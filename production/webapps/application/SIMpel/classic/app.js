var Ext=Ext||{};if(!Ext.Toolbar){Ext.Toolbar={}}if(!Ext.app){Ext.app={}}if(!Ext.app.bind){Ext.app.bind={}}if(!Ext.app.domain){Ext.app.domain={}}if(!Ext.app.route){Ext.app.route={}}if(!Ext.button){Ext.button={}}if(!Ext.container){Ext.container={}}if(!Ext.core){Ext.core={}}if(!Ext.data){Ext.data={}}if(!Ext.data.field){Ext.data.field={}}if(!Ext.data.flash){Ext.data.flash={}}if(!Ext.data.identifier){Ext.data.identifier={}}if(!Ext.data.matrix){Ext.data.matrix={}}if(!Ext.data.operation){Ext.data.operation={}}if(!Ext.data.proxy){Ext.data.proxy={}}if(!Ext.data.reader){Ext.data.reader={}}if(!Ext.data.request){Ext.data.request={}}if(!Ext.data.schema){Ext.data.schema={}}if(!Ext.data.session){Ext.data.session={}}if(!Ext.data.validator){Ext.data.validator={}}if(!Ext.data.writer){Ext.data.writer={}}if(!Ext.dd){Ext.dd={}}if(!Ext.dom){Ext.dom={}}if(!Ext.dom.Element){Ext.dom.Element={}}if(!Ext.event){Ext.event={}}if(!Ext.event.gesture){Ext.event.gesture={}}if(!Ext.event.publisher){Ext.event.publisher={}}if(!Ext.form){Ext.form={}}if(!Ext.form.Action){Ext.form.Action={}}if(!Ext.form.action){Ext.form.action={}}if(!Ext.form.field){Ext.form.field={}}if(!Ext.form.trigger){Ext.form.trigger={}}if(!Ext.fx){Ext.fx={}}if(!Ext.fx.animation){Ext.fx.animation={}}if(!Ext.fx.easing){Ext.fx.easing={}}if(!Ext.fx.runner){Ext.fx.runner={}}if(!Ext.fx.target){Ext.fx.target={}}if(!Ext.grid){Ext.grid={}}if(!Ext.grid.column){Ext.grid.column={}}if(!Ext.grid.feature){Ext.grid.feature={}}if(!Ext.grid.header){Ext.grid.header={}}if(!Ext.grid.locking){Ext.grid.locking={}}if(!Ext.grid.plugin){Ext.grid.plugin={}}if(!Ext.layout){Ext.layout={}}if(!Ext.layout.boxOverflow){Ext.layout.boxOverflow={}}if(!Ext.layout.component){Ext.layout.component={}}if(!Ext.layout.component.field){Ext.layout.component.field={}}if(!Ext.layout.container){Ext.layout.container={}}if(!Ext.layout.container.border){Ext.layout.container.border={}}if(!Ext.layout.container.boxOverflow){Ext.layout.container.boxOverflow={}}if(!Ext.list){Ext.list={}}if(!Ext.locale){Ext.locale={}}if(!Ext.locale.id){Ext.locale.id={}}if(!Ext.locale.id.form){Ext.locale.id.form={}}if(!Ext.locale.id.form.field){Ext.locale.id.form.field={}}if(!Ext.locale.id.grid){Ext.locale.id.grid={}}if(!Ext.locale.id.grid.header){Ext.locale.id.grid.header={}}if(!Ext.locale.id.grid.plugin){Ext.locale.id.grid.plugin={}}if(!Ext.locale.id.picker){Ext.locale.id.picker={}}if(!Ext.locale.id.tab){Ext.locale.id.tab={}}if(!Ext.locale.id.toolbar){Ext.locale.id.toolbar={}}if(!Ext.locale.id.view){Ext.locale.id.view={}}if(!Ext.locale.id.window){Ext.locale.id.window={}}if(!Ext.menu){Ext.menu={}}if(!Ext.mixin){Ext.mixin={}}if(!Ext.overrides){Ext.overrides={}}if(!Ext.overrides.app){Ext.overrides.app={}}if(!Ext.overrides.app.domain){Ext.overrides.app.domain={}}if(!Ext.overrides.dom){Ext.overrides.dom={}}if(!Ext.overrides.event){Ext.overrides.event={}}if(!Ext.overrides.event.publisher){Ext.overrides.event.publisher={}}if(!Ext.overrides.list){Ext.overrides.list={}}if(!Ext.overrides.plugin){Ext.overrides.plugin={}}if(!Ext.overrides.util){Ext.overrides.util={}}if(!Ext.panel){Ext.panel={}}if(!Ext.parse){Ext.parse={}}if(!Ext.parse.symbol){Ext.parse.symbol={}}if(!Ext.perf){Ext.perf={}}if(!Ext.picker){Ext.picker={}}if(!Ext.plugin){Ext.plugin={}}if(!Ext.promise){Ext.promise={}}if(!Ext.resizer){Ext.resizer={}}if(!Ext.scroll){Ext.scroll={}}if(!Ext.selection){Ext.selection={}}if(!Ext.slider){Ext.slider={}}if(!Ext.state){Ext.state={}}if(!Ext.tab){Ext.tab={}}if(!Ext.theme){Ext.theme={}}if(!Ext.theme.neptune){Ext.theme.neptune={}}if(!Ext.theme.neptune.form){Ext.theme.neptune.form={}}if(!Ext.theme.neptune.form.field){Ext.theme.neptune.form.field={}}if(!Ext.theme.neptune.grid){Ext.theme.neptune.grid={}}if(!Ext.theme.neptune.grid.column){Ext.theme.neptune.grid.column={}}if(!Ext.theme.neptune.layout){Ext.theme.neptune.layout={}}if(!Ext.theme.neptune.layout.component){Ext.theme.neptune.layout.component={}}if(!Ext.theme.neptune.menu){Ext.theme.neptune.menu={}}if(!Ext.theme.neptune.panel){Ext.theme.neptune.panel={}}if(!Ext.theme.neptune.picker){Ext.theme.neptune.picker={}}if(!Ext.theme.neptune.resizer){Ext.theme.neptune.resizer={}}if(!Ext.theme.neptune.toolbar){Ext.theme.neptune.toolbar={}}if(!Ext.theme.triton){Ext.theme.triton={}}if(!Ext.theme.triton.form){Ext.theme.triton.form={}}if(!Ext.theme.triton.form.field){Ext.theme.triton.form.field={}}if(!Ext.theme.triton.grid){Ext.theme.triton.grid={}}if(!Ext.theme.triton.grid.column){Ext.theme.triton.grid.column={}}if(!Ext.theme.triton.list){Ext.theme.triton.list={}}if(!Ext.theme.triton.menu){Ext.theme.triton.menu={}}if(!Ext.theme.triton.picker){Ext.theme.triton.picker={}}if(!Ext.theme.triton.resizer){Ext.theme.triton.resizer={}}if(!Ext.theme.triton.selection){Ext.theme.triton.selection={}}if(!Ext.theme.triton.toolbar){Ext.theme.triton.toolbar={}}if(!Ext.tip){Ext.tip={}}if(!Ext.toolbar){Ext.toolbar={}}if(!Ext.tree){Ext.tree={}}if(!Ext.util){Ext.util={}}if(!Ext.util.paintmonitor){Ext.util.paintmonitor={}}if(!Ext.util.sizemonitor){Ext.util.sizemonitor={}}if(!Ext.util.translatable){Ext.util.translatable={}}if(!Ext.ux){Ext.ux={}}if(!Ext.ux.DataView){Ext.ux.DataView={}}if(!Ext.ux.form){Ext.ux.form={}}if(!Ext.ux.layout){Ext.ux.layout={}}if(!Ext.view){Ext.view={}}if(!Ext.window){Ext.window={}}var SIMpel=SIMpel||{};if(!SIMpel.view){SIMpel.view={}}if(!SIMpel.view.main){SIMpel.view.main={}}if(!SIMpel.view.modules){SIMpel.view.modules={}}if(!SIMpel.view.modules.home){SIMpel.view.modules.home={}}if(!SIMpel.view.welcome){SIMpel.view.welcome={}}var aplikasi=aplikasi||{};if(!aplikasi.instansi){aplikasi.instansi={}}if(!aplikasi.login){aplikasi.login={}}if(!aplikasi.pengguna){aplikasi.pengguna={}}if(!aplikasi.pengguna.info){aplikasi.pengguna.info={}}if(!aplikasi.pengguna.ubahkatasandi){aplikasi.pengguna.ubahkatasandi={}}if(!aplikasi.requestreport){aplikasi.requestreport={}}if(!aplikasi.teams){aplikasi.teams={}}var com=com||{};var data=data||{};if(!data.model){data.model={}}if(!data.store){data.store={}}var informasi=informasi||{};if(!informasi.pengunjung){informasi.pengunjung={}}if(!informasi.pengunjung.antrian){informasi.pengunjung.antrian={}}if(!informasi.ruangkamartidur){informasi.ruangkamartidur={}}var inventory=inventory||{};if(!inventory.eksternal){inventory.eksternal={}}if(!inventory.eksternal.pembatalanpenerimaanbarang){inventory.eksternal.pembatalanpenerimaanbarang={}}if(!inventory.eksternal.penerimaan){inventory.eksternal.penerimaan={}}if(!inventory.eksternal.penerimaan.histori){inventory.eksternal.penerimaan.histori={}}if(!inventory.eksternal.penerimaanbarang){inventory.eksternal.penerimaanbarang={}}if(!inventory.eksternal.penerimaanbarangdetil){inventory.eksternal.penerimaanbarangdetil={}}if(!inventory.eksternal.pengembalian){inventory.eksternal.pengembalian={}}if(!inventory.eksternal.pengembalian.histori){inventory.eksternal.pengembalian.histori={}}if(!inventory.monitoring){inventory.monitoring={}}if(!inventory.monitoring.stokbarangminimum){inventory.monitoring.stokbarangminimum={}}if(!inventory.paketfarmasi){inventory.paketfarmasi={}}if(!inventory.penerimaan){inventory.penerimaan={}}if(!inventory.penerimaan.pengiriman){inventory.penerimaan.pengiriman={}}if(!inventory.penerimaan.permintaan){inventory.penerimaan.permintaan={}}if(!inventory.pengiriman){inventory.pengiriman={}}if(!inventory.pengiriman.history){inventory.pengiriman.history={}}if(!inventory.permintaan){inventory.permintaan={}}if(!inventory.permintaan.history){inventory.permintaan.history={}}if(!inventory.permintaan.terima){inventory.permintaan.terima={}}if(!inventory.stokbarangminimum){inventory.stokbarangminimum={}}if(!inventory.stokbarangruangan){inventory.stokbarangruangan={}}if(!inventory.stokopname){inventory.stokopname={}}var kunjungan=kunjungan||{};if(!kunjungan.pasienmeninggal){kunjungan.pasienmeninggal={}}if(!kunjungan.pasienpulang){kunjungan.pasienpulang={}}if(!kunjungan.perubahantanggal){kunjungan.perubahantanggal={}}if(!kunjungan.titipan){kunjungan.titipan={}}if(!kunjungan.widget){kunjungan.widget={}}var laporan=laporan||{};if(!laporan.inventory){laporan.inventory={}}if(!laporan.jasapelayanan){laporan.jasapelayanan={}}if(!laporan.kegiatanrird){laporan.kegiatanrird={}}if(!laporan.kunjungan){laporan.kunjungan={}}if(!laporan.layanan){laporan.layanan={}}if(!laporan.monitoring){laporan.monitoring={}}if(!laporan.pendapatan){laporan.pendapatan={}}if(!laporan.penerimaankasir){laporan.penerimaankasir={}}if(!laporan.pengunjung){laporan.pengunjung={}}if(!laporan.rekammedis){laporan.rekammedis={}}if(!laporan.rl){laporan.rl={}}var layanan=layanan||{};if(!layanan.JasaTuslahFarmasi){layanan.JasaTuslahFarmasi={}}if(!layanan.farmasi){layanan.farmasi={}}if(!layanan.farmasi.TransaksiLangsung){layanan.farmasi.TransaksiLangsung={}}if(!layanan.farmasi.retur){layanan.farmasi.retur={}}if(!layanan.farmasi.retur.pelayanan){layanan.farmasi.retur.pelayanan={}}if(!layanan.farmasi.widget){layanan.farmasi.widget={}}if(!layanan.farmasi.widget.riwayat){layanan.farmasi.widget.riwayat={}}if(!layanan.kelahiran){layanan.kelahiran={}}if(!layanan.laboratorium){layanan.laboratorium={}}if(!layanan.laboratorium.hasil){layanan.laboratorium.hasil={}}if(!layanan.laboratorium.order){layanan.laboratorium.order={}}if(!layanan.laboratorium.orderlist){layanan.laboratorium.orderlist={}}if(!layanan.laboratorium.riwayat){layanan.laboratorium.riwayat={}}if(!layanan.laboratorium.terimaorder){layanan.laboratorium.terimaorder={}}if(!layanan.laboratorium.viewhasil){layanan.laboratorium.viewhasil={}}if(!layanan.laboratorium.widget){layanan.laboratorium.widget={}}if(!layanan.pa){layanan.pa={}}if(!layanan.pa.hasil){layanan.pa.hasil={}}if(!layanan.pemakaiano2){layanan.pemakaiano2={}}if(!layanan.radiologi){layanan.radiologi={}}if(!layanan.radiologi.hasil){layanan.radiologi.hasil={}}if(!layanan.radiologi.order){layanan.radiologi.order={}}if(!layanan.radiologi.orderlist){layanan.radiologi.orderlist={}}if(!layanan.radiologi.riwayat){layanan.radiologi.riwayat={}}if(!layanan.radiologi.terimaorder){layanan.radiologi.terimaorder={}}if(!layanan.radiologi.widget){layanan.radiologi.widget={}}if(!layanan.resep){layanan.resep={}}if(!layanan.resep.order){layanan.resep.order={}}if(!layanan.resep.order.nonracikan){layanan.resep.order.nonracikan={}}if(!layanan.resep.order.racikan){layanan.resep.order.racikan={}}if(!layanan.resep.orderlist){layanan.resep.orderlist={}}if(!layanan.resep.riwayat){layanan.resep.riwayat={}}if(!layanan.resep.terima){layanan.resep.terima={}}if(!layanan.resep.widget){layanan.resep.widget={}}if(!layanan.tindakanmedis){layanan.tindakanmedis={}}if(!layanan.tindakanmedis.tenagamedis){layanan.tindakanmedis.tenagamedis={}}var master=master||{};if(!master.aturanpakai){master.aturanpakai={}}if(!master.barang){master.barang={}}if(!master.barangruangan){master.barangruangan={}}if(!master.dokter){master.dokter={}}if(!master.dokterruangan){master.dokterruangan={}}if(!master.doktersmf){master.doktersmf={}}if(!master.grouptindakanlab){master.grouptindakanlab={}}if(!master.inventory){master.inventory={}}if(!master.inventory.barang){master.inventory.barang={}}if(!master.inventory.barang.hargabarang){master.inventory.barang.hargabarang={}}if(!master.inventory.groupfilter){master.inventory.groupfilter={}}if(!master.inventory.kategori){master.inventory.kategori={}}if(!master.inventory.kelompokgroup){master.inventory.kelompokgroup={}}if(!master.inventory.satuan){master.inventory.satuan={}}if(!master.kamar){master.kamar={}}if(!master.kamar.tempattidur){master.kamar.tempattidur={}}if(!master.manajemenpengguna){master.manajemenpengguna={}}if(!master.manajemenpengguna.group){master.manajemenpengguna.group={}}if(!master.manajemenpengguna.groupmodul){master.manajemenpengguna.groupmodul={}}if(!master.manajemenpengguna.modul){master.manajemenpengguna.modul={}}if(!master.manajemenpengguna.pengguna){master.manajemenpengguna.pengguna={}}if(!master.marginpenjaminfarmasi){master.marginpenjaminfarmasi={}}if(!master.negara){master.negara={}}if(!master.paket){master.paket={}}if(!master.paket.distribusitarif){master.paket.distribusitarif={}}if(!master.paketdetil){master.paketdetil={}}if(!master.paketdetil.distribusitarif){master.paketdetil.distribusitarif={}}if(!master.pakettindakanfarmasi){master.pakettindakanfarmasi={}}if(!master.paramedis){master.paramedis={}}if(!master.parameterhasil){master.parameterhasil={}}if(!master.pegawai){master.pegawai={}}if(!master.pemakaiano2){master.pemakaiano2={}}if(!master.penjaminruangan){master.penjaminruangan={}}if(!master.penyedia){master.penyedia={}}if(!master.penyedia.barang){master.penyedia.barang={}}if(!master.perawatruangan){master.perawatruangan={}}if(!master.ppk){master.ppk={}}if(!master.referensi){master.referensi={}}if(!master.ruangan){master.ruangan={}}if(!master.ruangan.kelas){master.ruangan.kelas={}}if(!master.ruanganfarmasi){master.ruanganfarmasi={}}if(!master.ruangankonsul){master.ruangankonsul={}}if(!master.ruanganlab){master.ruanganlab={}}if(!master.ruanganmutasi){master.ruanganmutasi={}}if(!master.ruanganoperasi){master.ruanganoperasi={}}if(!master.ruanganrad){master.ruanganrad={}}if(!master.smfruangan){master.smfruangan={}}if(!master.staff){master.staff={}}if(!master.staffruangan){master.staffruangan={}}if(!master.tarif){master.tarif={}}if(!master.tarifadministrasi){master.tarifadministrasi={}}if(!master.tarifkelasfarmasi){master.tarifkelasfarmasi={}}if(!master.tarifo2){master.tarifo2={}}if(!master.tarifruangrawat){master.tarifruangrawat={}}if(!master.tenagamedis){master.tenagamedis={}}if(!master.tindakan){master.tindakan={}}if(!master.tindakan.tarif){master.tindakan.tarif={}}if(!master.tindakanpaket){master.tindakanpaket={}}if(!master.tindakanruangan){master.tindakanruangan={}}if(!master.wilayah){master.wilayah={}}if(!master.wilayah.tempatlahir){master.wilayah.tempatlahir={}}var pasien=pasien||{};if(!pasien.tagihan){pasien.tagihan={}}if(!pasien.widget){pasien.widget={}}var pegawai=pegawai||{};if(!pegawai.absensi){pegawai.absensi={}}if(!pegawai.absensi.mesin){pegawai.absensi.mesin={}}if(!pegawai.absensi.penarikan){pegawai.absensi.penarikan={}}if(!pegawai.absensi.presensi){pegawai.absensi.presensi={}}if(!pegawai.absensi.waktupenarikan){pegawai.absensi.waktupenarikan={}}if(!pegawai.dasarjadwal){pegawai.dasarjadwal={}}if(!pegawai.jadwaldinas){pegawai.jadwaldinas={}}if(!pegawai.kartuasuransi){pegawai.kartuasuransi={}}if(!pegawai.kartuidentitas){pegawai.kartuidentitas={}}if(!pegawai.keluarga){pegawai.keluarga={}}if(!pegawai.kodeabsensi){pegawai.kodeabsensi={}}if(!pegawai.kontak){pegawai.kontak={}}if(!pegawai.pegawaiabsen){pegawai.pegawaiabsen={}}if(!pegawai.pendidikan){pegawai.pendidikan={}}if(!pegawai.penempatan){pegawai.penempatan={}}if(!pegawai.penempatan.detil){pegawai.penempatan.detil={}}if(!pegawai.penempatan.sekarang){pegawai.penempatan.sekarang={}}if(!pegawai.rincianabsensi){pegawai.rincianabsensi={}}if(!pegawai.schedule){pegawai.schedule={}}if(!pegawai.schedule.detail){pegawai.schedule.detail={}}if(!pegawai.schedule.shift){pegawai.schedule.shift={}}if(!pegawai.schedule.shift.detail){pegawai.schedule.shift.detail={}}if(!pegawai.statuspegawai){pegawai.statuspegawai={}}if(!pegawai.strsip){pegawai.strsip={}}if(!pegawai.waktudinasruangan){pegawai.waktudinasruangan={}}var pembayaran=pembayaran||{};if(!pembayaran.kasir){pembayaran.kasir={}}if(!pembayaran.pembayarantagihan){pembayaran.pembayarantagihan={}}if(!pembayaran.penerimaan){pembayaran.penerimaan={}}if(!pembayaran.penjualan){pembayaran.penjualan={}}if(!pembayaran.tagihan){pembayaran.tagihan={}}if(!pembayaran.tagihan.deposit){pembayaran.tagihan.deposit={}}if(!pembayaran.tagihan.discount){pembayaran.tagihan.discount={}}if(!pembayaran.tagihan.discount.dokter){pembayaran.tagihan.discount.dokter={}}if(!pembayaran.tagihan.discount.sarana){pembayaran.tagihan.discount.sarana={}}if(!pembayaran.tagihan.discount.tenagamedis){pembayaran.tagihan.discount.tenagamedis={}}if(!pembayaran.tagihan.gabung){pembayaran.tagihan.gabung={}}if(!pembayaran.tagihan.kwitansi){pembayaran.tagihan.kwitansi={}}if(!pembayaran.tagihan.nontunai){pembayaran.tagihan.nontunai={}}if(!pembayaran.tagihan.pembatalan){pembayaran.tagihan.pembatalan={}}if(!pembayaran.tagihan.penjamin){pembayaran.tagihan.penjamin={}}if(!pembayaran.tagihan.penjualan){pembayaran.tagihan.penjualan={}}if(!pembayaran.tagihan.penjualan.rincian){pembayaran.tagihan.penjualan.rincian={}}if(!pembayaran.tagihan.piutang){pembayaran.tagihan.piutang={}}if(!pembayaran.tagihan.piutang.penjamin){pembayaran.tagihan.piutang.penjamin={}}if(!pembayaran.tagihan.piutang.perorangan){pembayaran.tagihan.piutang.perorangan={}}if(!pembayaran.tagihan.rincian){pembayaran.tagihan.rincian={}}if(!pembayaran.transaksikasir){pembayaran.transaksikasir={}}if(!pembayaran.widget){pembayaran.widget={}}var pendaftaran=pendaftaran||{};if(!pendaftaran.bayi){pendaftaran.bayi={}}if(!pendaftaran.kecelakaan){pendaftaran.kecelakaan={}}if(!pendaftaran.konsul){pendaftaran.konsul={}}if(!pendaftaran.konsul.jawab){pendaftaran.konsul.jawab={}}if(!pendaftaran.konsul.konsul){pendaftaran.konsul.konsul={}}if(!pendaftaran.konsul.riwayat){pendaftaran.konsul.riwayat={}}if(!pendaftaran.konsul.terima){pendaftaran.konsul.terima={}}if(!pendaftaran.mutasi){pendaftaran.mutasi={}}if(!pendaftaran.mutasi.permintaan){pendaftaran.mutasi.permintaan={}}if(!pendaftaran.mutasi.riwayat){pendaftaran.mutasi.riwayat={}}if(!pendaftaran.mutasi.terima){pendaftaran.mutasi.terima={}}if(!pendaftaran.online){pendaftaran.online={}}if(!pendaftaran.online.reservasi){pendaftaran.online.reservasi={}}if(!pendaftaran.paket){pendaftaran.paket={}}if(!pendaftaran.pembatalan){pendaftaran.pembatalan={}}if(!pendaftaran.pembatalan.kunjungan){pendaftaran.pembatalan.kunjungan={}}if(!pendaftaran.penanggungjawab){pendaftaran.penanggungjawab={}}if(!pendaftaran.penjamin){pendaftaran.penjamin={}}if(!pendaftaran.reservasi){pendaftaran.reservasi={}}if(!pendaftaran.rujukan){pendaftaran.rujukan={}}if(!pendaftaran.rujukan.keluar){pendaftaran.rujukan.keluar={}}if(!pendaftaran.tujuan){pendaftaran.tujuan={}}if(!pendaftaran.widget){pendaftaran.widget={}}var penjualan=penjualan||{};if(!penjualan.history){penjualan.history={}}if(!penjualan.penjualan){penjualan.penjualan={}}if(!penjualan.retur){penjualan.retur={}}var plugins=plugins||{};if(!plugins.bpjs){plugins.bpjs={}}if(!plugins.bpjs.klaim){plugins.bpjs.klaim={}}if(!plugins.bpjs.klaim.pengajuan){plugins.bpjs.klaim.pengajuan={}}if(!plugins.bpjs.monitoring){plugins.bpjs.monitoring={}}if(!plugins.bpjs.monitoring.histori){plugins.bpjs.monitoring.histori={}}if(!plugins.bpjs.monitoring.histori.pelayanan){plugins.bpjs.monitoring.histori.pelayanan={}}if(!plugins.bpjs.monitoring.klaim){plugins.bpjs.monitoring.klaim={}}if(!plugins.bpjs.monitoring.klaim.jasaraharja){plugins.bpjs.monitoring.klaim.jasaraharja={}}if(!plugins.bpjs.monitoring.kunjungan){plugins.bpjs.monitoring.kunjungan={}}if(!plugins.bpjs.peserta){plugins.bpjs.peserta={}}if(!plugins.bpjs.referensi){plugins.bpjs.referensi={}}if(!plugins.bpjs.referensi.carakeluar){plugins.bpjs.referensi.carakeluar={}}if(!plugins.bpjs.referensi.diagnosa){plugins.bpjs.referensi.diagnosa={}}if(!plugins.bpjs.referensi.dokter){plugins.bpjs.referensi.dokter={}}if(!plugins.bpjs.referensi.dpjp){plugins.bpjs.referensi.dpjp={}}if(!plugins.bpjs.referensi.faskes){plugins.bpjs.referensi.faskes={}}if(!plugins.bpjs.referensi.kelasrawat){plugins.bpjs.referensi.kelasrawat={}}if(!plugins.bpjs.referensi.pascapulang){plugins.bpjs.referensi.pascapulang={}}if(!plugins.bpjs.referensi.poli){plugins.bpjs.referensi.poli={}}if(!plugins.bpjs.referensi.procedure){plugins.bpjs.referensi.procedure={}}if(!plugins.bpjs.referensi.ruangrawat){plugins.bpjs.referensi.ruangrawat={}}if(!plugins.bpjs.referensi.spesialistik){plugins.bpjs.referensi.spesialistik={}}if(!plugins.bpjs.referensi.wilayah){plugins.bpjs.referensi.wilayah={}}if(!plugins.bpjs.rujukan){plugins.bpjs.rujukan={}}if(!plugins.bpjs.rujukan.pencarian){plugins.bpjs.rujukan.pencarian={}}if(!plugins.bpjs.sep){plugins.bpjs.sep={}}if(!plugins.bpjs.sep.detail){plugins.bpjs.sep.detail={}}if(!plugins.bpjs.sep.hapus){plugins.bpjs.sep.hapus={}}if(!plugins.bpjs.sep.insert){plugins.bpjs.sep.insert={}}if(!plugins.bpjs.sep.integrasi){plugins.bpjs.sep.integrasi={}}if(!plugins.bpjs.sep.integrasi.inacbg){plugins.bpjs.sep.integrasi.inacbg={}}if(!plugins.bpjs.sep.kunjungan){plugins.bpjs.sep.kunjungan={}}if(!plugins.bpjs.sep.mapping){plugins.bpjs.sep.mapping={}}if(!plugins.bpjs.sep.mapping.transaksi){plugins.bpjs.sep.mapping.transaksi={}}if(!plugins.bpjs.sep.monitoring){plugins.bpjs.sep.monitoring={}}if(!plugins.bpjs.sep.monitoring.verifikasiklaim){plugins.bpjs.sep.monitoring.verifikasiklaim={}}if(!plugins.bpjs.sep.pengajuan){plugins.bpjs.sep.pengajuan={}}if(!plugins.bpjs.sep.pengajuan.aproval){plugins.bpjs.sep.pengajuan.aproval={}}if(!plugins.bpjs.sep.riwayat){plugins.bpjs.sep.riwayat={}}if(!plugins.bpjs.sep.riwayat.pelayanan){plugins.bpjs.sep.riwayat.pelayanan={}}if(!plugins.bpjs.sep.update){plugins.bpjs.sep.update={}}if(!plugins.bpjs.sep.update.tanggalpulang){plugins.bpjs.sep.update.tanggalpulang={}}if(!plugins.dukcapil){plugins.dukcapil={}}if(!plugins.inacbg){plugins.inacbg={}}if(!plugins.inacbg.combo){plugins.inacbg.combo={}}if(!plugins.inacbg.grouping){plugins.inacbg.grouping={}}if(!plugins.inacbg.grouping.hasil){plugins.inacbg.grouping.hasil={}}if(!plugins.inacbg.model){plugins.inacbg.model={}}if(!plugins.inacbg.store){plugins.inacbg.store={}}if(!plugins.inacbg.tipe){plugins.inacbg.tipe={}}if(!plugins.inasis){plugins.inasis={}}if(!plugins.kemkes){plugins.kemkes={}}if(!plugins.kemkes.sisrute){plugins.kemkes.sisrute={}}if(!plugins.kemkes.sitt){plugins.kemkes.sitt={}}if(!plugins.pusdatin){plugins.pusdatin={}}if(!plugins.tts){plugins.tts={}}var rekammedis=rekammedis||{};if(!rekammedis.anamnesis){rekammedis.anamnesis={}}if(!rekammedis.anamnesis.riwayat){rekammedis.anamnesis.riwayat={}}if(!rekammedis.anamnesis.riwayat.alergi){rekammedis.anamnesis.riwayat.alergi={}}if(!rekammedis.anamnesis.riwayat.alergi.history){rekammedis.anamnesis.riwayat.alergi.history={}}if(!rekammedis.anamnesis.riwayat.perjalananpenyakit){rekammedis.anamnesis.riwayat.perjalananpenyakit={}}if(!rekammedis.anamnesis.riwayat.perjalananpenyakit.history){rekammedis.anamnesis.riwayat.perjalananpenyakit.history={}}if(!rekammedis.anamnesis.umum){rekammedis.anamnesis.umum={}}if(!rekammedis.anamnesis.umum.history){rekammedis.anamnesis.umum.history={}}if(!rekammedis.icd){rekammedis.icd={}}if(!rekammedis.icd.diagnosa){rekammedis.icd.diagnosa={}}if(!rekammedis.icd.penyebabkematian){rekammedis.icd.penyebabkematian={}}if(!rekammedis.icd.tindakan){rekammedis.icd.tindakan={}}if(!rekammedis.laporanoperasi){rekammedis.laporanoperasi={}}if(!rekammedis.laporanoperasi.list){rekammedis.laporanoperasi.list={}}if(!rekammedis.pemeriksaan){rekammedis.pemeriksaan={}}if(!rekammedis.pemeriksaan.fisik){rekammedis.pemeriksaan.fisik={}}if(!rekammedis.pemeriksaan.fisik.history){rekammedis.pemeriksaan.fisik.history={}}if(!rekammedis.pemeriksaan.umum){rekammedis.pemeriksaan.umum={}}if(!rekammedis.pemeriksaan.umum.tandavital){rekammedis.pemeriksaan.umum.tandavital={}}if(!rekammedis.pemeriksaan.umum.tandavital.history){rekammedis.pemeriksaan.umum.tandavital.history={}}(function(Q){var T,H=["constructor","toString","valueOf","toLocaleString"],P={},D={},R=0,G,J,M,N,U,O,F,S,L,C=function(){var e,f;J=Ext.Base;M=Ext.ClassManager;for(e=H.length;e-->0;){f=(1<<e);D[P[f]=H[e]]=f}for(e in D){R|=D[e]}R=~R;Function.prototype.$isFunction=1;L=!!(M&&M.addAlias);N=Ext.Class.getPreprocessor("config").fn;U=Ext.Class.getPreprocessor("cachedConfig")&&Ext.Class.getPreprocessor("cachedConfig").fn;O=Ext.Class.getPreprocessor("platformConfig")&&Ext.Class.getPreprocessor("platformConfig").fn;S=Ext.Class.getPreprocessor("privates")&&Ext.Class.getPreprocessor("privates").fn;F=Ext.ClassManager.postprocessors.deprecated&&Ext.ClassManager.postprocessors.deprecated.fn;T=J.$staticMembers;if(!T){T=[];for(G in J){if(J.hasOwnProperty(G)){T.push(G)}}}Q.derive=I;return I.apply(this,arguments)},K=function(g,o,l){var s=l.enumerableMembers,n=g.prototype,p,m,q,e,f;if(!o){return}if(L){g.addMembers(o)}else{for(p in o){e=o[p];if(e&&e.$isFunction&&!e.$isClass&&e!==Ext.emptyFn&&e!==Ext.identityFn){f=n.hasOwnProperty(p)&&n[p];if(f){e.$previous=f}n[p]=m=e;m.$owner=g;m.$name=p}else{n[p]=e}}for(q=1;s;q<<=1){if(s&q){s&=~q;p=P[q];n[p]=m=o[p];m.$owner=g;m.$name=p}}}},E=function(e){var m=function f(){return e.apply(this,arguments)||null},g,l;m.prototype=Ext.Object.chain(e.prototype);for(g=T.length;g-->0;){l=T[g];m[l]=J[l]}return m},I=function(B,y,ar,an,z,o,A,av,ak,m,u){var am=function v(){return this.constructor.apply(this,arguments)||null},at=am,al={enumerableMembers:an&R,onCreated:u,onBeforeCreated:K,aliases:av},q=ar.alternateClassName||[],ax=Ext.global,l,e,aw,s,f,ao,ap,aj,g,w,au,n,t,aq,p=M.alternateToName||M.maps.alternateToName,x=M.nameToAlternates||M.maps.nameToAlternates;for(aw=T.length;aw-->0;){ap=T[aw];am[ap]=J[ap]}if(ar.$isFunction){ar=ar(am)}al.data=ar;w=ar.statics;delete ar.statics;ar.$className=B;if("$className" in ar){am.$className=ar.$className}am.extend(y);g=am.prototype;if(z){am.xtype=ar.xtype=z[0];g.xtypes=z}g.xtypesChain=o;g.xtypesMap=A;ar.alias=av;at.triggerExtended(am,ar,al);if(ar.onClassExtended){am.onExtended(ar.onClassExtended,am);delete ar.onClassExtended}if(ar.privates&&S){S.call(Ext.Class,am,ar)}if(w){if(L){am.addStatics(w)}else{for(au in w){if(w.hasOwnProperty(au)){aq=w[au];if(aq&&aq.$isFunction&&!aq.$isClass&&aq!==Ext.emptyFn&&aq!==Ext.identityFn){am[au]=t=aq;t.$owner=am;t.$name=au}am[au]=aq}}}}if(ar.inheritableStatics){am.addInheritableStatics(ar.inheritableStatics);delete ar.inheritableStatics}if(g.onClassExtended){at.onExtended(g.onClassExtended,at);delete g.onClassExtended}if(ar.platformConfig&&O){O.call(Ext.Class,am,ar);delete ar.platformConfig}if(ar.config){N.call(Ext.Class,am,ar)}if(ar.cachedConfig&&U){U.call(Ext.Class,am,ar);delete ar.cachedConfig}if(ar.deprecated&&F){F.call(Ext.ClassManager,B,am,ar)}al.onBeforeCreated(am,al.data,al);for(aw=0,f=ak&&ak.length;aw<f;++aw){am.mixin.apply(am,ak[aw])}for(aw=0,f=av.length;aw<f;aw++){l=av[aw];M.setAlias?M.setAlias(am,l):M.addAlias(am,l)}if(ar.singleton){at=new am()}if(!(q instanceof Array)){q=[q]}n=M.getName(at);for(aw=0,s=q.length;aw<s;aw++){e=q[aw];M.classes[e]=at;if(L){M.addAlternate(am,e)}else{if(n){p[e]=n;q=x[n]||(x[n]=[]);q.push(e)}}}for(aw=0,f=m.length;aw<f;aw+=2){ao=m[aw];if(!ao){ao=ax}ao[m[aw+1]]=at}M.classes[B]=at;if(!L){if(n&&n!==B){p[B]=n;q=x[n]||(x[n]=[]);q.push(B)}}delete g.alternateClassName;if(al.onCreated){al.onCreated.call(at,at)}if(B){M.triggerCreated(B)}return at};Q.derive=C}(Ext.cmd={}));var Ext=Ext||{};(function(){var D=this,y=Object.prototype,C=y.toString,F=["valueOf","toLocaleString","toString","constructor"],I=function(){},z=function(){},x=function(e){return e},G=function(){var e=G.caller.caller;return e.$owner.prototype[e.$name].apply(this,arguments)},E=Ext.manifest||{},w,B=/\[object\s*(?:Array|Arguments|\w*Collection|\w*List|HTML\s+document\.all\s+class)\]/,A=/^\\?\/Date\(([-+])?(\d+)(?:[+-]\d{4})?\)\\?\/$/;Ext.global=D;Ext.now=Date.now||(Date.now=function(){return +new Date()});Ext.ticks=(D.performance&&D.performance.now)?function(){return performance.now()}:Ext.now;Ext._startTime=Ext.ticks();I.$nullFn=x.$nullFn=I.$emptyFn=x.$identityFn=z.$nullFn=true;z.$privacy="framework";I.$noClearOnDestroy=x.$noClearOnDestroy=true;z.$noClearOnDestroy=true;Ext.suspendLayouts=Ext.resumeLayouts=I;for(w in {toString:1}){F=null}Ext.enumerables=F;Ext.apply=function(l,n,m){if(m){Ext.apply(l,m)}if(l&&n&&typeof n==="object"){var f,e,g;for(f in n){l[f]=n[f]}if(F){for(e=F.length;e--;){g=F[e];if(n.hasOwnProperty(g)){l[g]=n[g]}}}}return l};function H(l,g,f){var e,m;for(e in f){if(f.hasOwnProperty(e)){m=f[e];if(typeof m==="function"){m.$name=e;m.$owner=g;m.$previous=l.hasOwnProperty(e)?l[e]:G}l[e]=m}}}Ext.buildSettings=Ext.apply({baseCSSPrefix:"x-"},Ext.buildSettings||{});Ext.apply(Ext,{idSeed:0,idPrefix:"ext-",isSecure:/^https/i.test(window.location.protocol),enableGarbageCollector:false,enableListenerCollection:true,name:Ext.sandboxName||"Ext",privateFn:z,emptyFn:I,identityFn:x,frameStartTime:Ext.now(),manifest:E,enableAria:true,startsWithHashRe:/^#/,validIdRe:/^[a-z_][a-z0-9\-_]*$/i,BLANK_IMAGE_URL:"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",makeIdSelector:function(e){return"#"+e},id:function(e,f){if(e&&e.id){return e.id}var g=(f||Ext.idPrefix)+(++Ext.idSeed);if(e){e.id=g}return g},returnId:function(e){return e.getId()},returnTrue:function(){return true},emptyString:new String(),baseCSSPrefix:Ext.buildSettings.baseCSSPrefix,$eventNameMap:{},$vendorEventRe:/^(DOMMouse|Moz.+|MS.+|webkit.+)/,canonicalEventName:function(e){return Ext.$eventNameMap[e]||(Ext.$eventNameMap[e]=(Ext.$vendorEventRe.test(e)?e:e.toLowerCase()))},applyIf:function(e,f){var g;if(e){for(g in f){if(e[g]===undefined){e[g]=f[g]}}}return e},destroy:function(){var g=arguments.length,e,f;for(e=0;e<g;e++){f=arguments[e];if(f){if(Ext.isArray(f)){this.destroy.apply(this,f)}else{if(Ext.isFunction(f.destroy)){f.destroy()}}}}return null},destroyMembers:function(l){for(var n,m,f=1,e=arguments,g=e.length;f<g;f++){n=l[m=e[f]];if(n!=null){l[m]=Ext.destroy(n)}}},override:function(l,g){if(l.$isClass){l.override(g)}else{if(typeof l==="function"){Ext.apply(l.prototype,g)}else{var f=l.self,e;if(f&&f.$isClass){e=g.privates;if(e){g=Ext.apply({},g);delete g.privates;H(l,f,e)}H(l,f,g)}else{Ext.apply(l,g)}}}return l},valueFrom:function(g,f,e){return Ext.isEmpty(g,e)?f:g},isEmpty:function(f,e){return(f==null)||(!e?f==="":false)||(Ext.isArray(f)&&f.length===0)},isArray:("isArray" in Array)?Array.isArray:function(e){return C.call(e)==="[object Array]"},isDate:function(e){return C.call(e)==="[object Date]"},isMSDate:function(e){if(!Ext.isString(e)){return false}return A.test(e)},isObject:(C.call(null)==="[object Object]")?function(e){return e!==null&&e!==undefined&&C.call(e)==="[object Object]"&&e.ownerDocument===undefined}:function(e){return C.call(e)==="[object Object]"},isSimpleObject:function(e){return e instanceof Object&&e.constructor===Object},isPrimitive:function(e){var f=typeof e;return f==="string"||f==="number"||f==="boolean"},isFunction:(typeof document!=="undefined"&&typeof document.getElementsByTagName("body")==="function")?function(e){return !!e&&C.call(e)==="[object Function]"}:function(e){return !!e&&typeof e==="function"},isNumber:function(e){return typeof e==="number"&&isFinite(e)},isNumeric:function(e){return !isNaN(parseFloat(e))&&isFinite(e)},isString:function(e){return typeof e==="string"},isBoolean:function(e){return typeof e==="boolean"},isElement:function(e){return e?e.nodeType===1:false},isTextNode:function(e){return e?e.nodeName==="#text":false},isDefined:function(e){return typeof e!=="undefined"},isIterable:function(e){if(!e||typeof e.length!=="number"||typeof e==="string"||Ext.isFunction(e)){return false}if(!e.propertyIsEnumerable){return !!e.item}if(e.hasOwnProperty("length")&&!e.propertyIsEnumerable("length")){return true}return B.test(C.call(e))},isDebugEnabled:I,clone:function(n,f){if(n===null||n===undefined){return n}if(f!==false&&n.nodeType&&n.cloneNode){return n.cloneNode(true)}var p=C.call(n),m,e,g,l,o;if(p==="[object Date]"){return new Date(n.getTime())}if(p==="[object Array]"){m=n.length;l=[];while(m--){l[m]=Ext.clone(n[m],f)}}else{if(p==="[object Object]"&&n.constructor===Object){l={};for(o in n){l[o]=Ext.clone(n[o],f)}if(F){for(e=F.length;e--;){g=F[e];if(n.hasOwnProperty(g)){l[g]=n[g]}}}}}return l||n},getUniqueGlobalNamespace:function(){var e=this.uniqueGlobalNamespace,f;if(e===undefined){f=0;do{e="ExtBox"+(++f)}while(D[e]!==undefined);D[e]=Ext;this.uniqueGlobalNamespace=e}return e},functionFactoryCache:{},cacheableFunctionFactory:function(){var n=this,m=Array.prototype.slice.call(arguments),f=n.functionFactoryCache,g,l,e;if(Ext.isSandboxed){e=m.length;if(e>0){e--;m[e]="var Ext=window."+Ext.name+";"+m[e]}}g=m.join("");l=f[g];if(!l){l=Function.prototype.constructor.apply(Function.prototype,m);f[g]=l}return l},functionFactory:function(){var f=Array.prototype.slice.call(arguments),e;if(Ext.isSandboxed){e=f.length;if(e>0){e--;f[e]="var Ext=window."+Ext.name+";"+f[e]}}return Function.prototype.constructor.apply(Function.prototype,f)},Logger:{verbose:I,log:I,info:I,warn:I,error:function(e){throw new Error(e)},deprecate:I},ariaWarn:function(f,e){if(Ext.enableAria&&!Ext.slicer){if(!Ext.ariaWarn.first){Ext.ariaWarn.first=true;Ext.log.warn("WAI-ARIA compatibility warnings can be suppressed by adding the following to application startup code:");Ext.log.warn("    Ext.ariaWarn = Ext.emptyFn;")}Ext.log.warn({msg:e,dump:f})}},getElementById:function(e){return document.getElementById(e)},splitAndUnescape:(function(){var e={};return function(m,o){if(!m){return[]}else{if(!o){return[m]}}var n=e[o]||(e[o]=new RegExp("\\\\"+o,"g")),g=[],l,f;l=m.split(o);while((f=l.shift())!==undefined){while(f.charAt(f.length-1)==="\\"&&l.length>0){f=f+o+l.shift()}f=f.replace(n,o);g.push(f)}return g}})()});Ext.returnTrue.$nullFn=Ext.returnId.$nullFn=true}());Ext.platformTags.modern=!(Ext.platformTags.classic=Ext.isClassic=true);(function(){function f(){var o=this,p=o.sourceClass,e=o.sourceMethod,n=o.msg;if(e){if(n){e+="(): ";e+=n}else{e+="()"}}if(p){e=e?(p+"."+e):p}return e||n||""}Ext.Error=function(e){if(Ext.isString(e)){e={msg:e}}var l=new Error();Ext.apply(l,e);l.message=l.message||l.msg;l.toString=f;return l};Ext.apply(Ext.Error,{ignore:false,raise:function(o){o=o||{};if(Ext.isString(o)){o={msg:o}}var p=this,s=p.raise.caller,e,q;if(s===Ext.raise){s=s.caller}if(s){if(!o.sourceMethod&&(q=s.$name)){o.sourceMethod=q}if(!o.sourceClass&&(q=s.$owner)&&(q=q.$className)){o.sourceClass=q}}if(p.handle(o)!==true){e=f.call(o);throw new Ext.Error(o)}},handle:function(){return this.ignore}})})();Ext.deprecated=function(f){return Ext.emptyFn};Ext.raise=function(){Ext.Error.raise.apply(Ext.Error,arguments)};Ext.Array=(function(){var Q=Array.prototype,H=Q.slice,F=(function(){var g=[],f,l=20;if(!g.splice){return false}while(l--){g.push("A")}g.splice(15,0,"F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F");f=g.length;g.splice(13,0,"XXX");if(f+1!==g.length){return false}return true}()),G="indexOf" in Q,N=true;function I(f,n){var m=f.length,g=new Array(m),l;for(l=0;l<m;l++){g[l]=l}g.sort(function(o,p){return n(f[o],f[p])||(o-p)});for(l=0;l<m;l++){g[l]=f[g[l]]}for(l=0;l<m;l++){f[l]=g[l]}return f}try{if(typeof document!=="undefined"){H.call(document.getElementsByTagName("body"))}}catch(D){N=false}var K=function(g,f){return(f<0)?Math.max(0,g.length+f):Math.min(g.length,f)},J=function(q,s,g,n){var m=n?n.length:0,w=q.length,p=K(q,s);if(p===w){if(m){q.push.apply(q,n)}}else{var t=Math.min(g,w-p),o=p+t,f=o+m-t,l=w-o,v=w-t,u;if(f<o){for(u=0;u<l;++u){q[f+u]=q[o+u]}}else{if(f>o){for(u=l;u--;){q[f+u]=q[o+u]}}}if(m&&p===v){q.length=v;q.push.apply(q,n)}else{q.length=v+m;for(u=0;u<m;++u){q[p+u]=n[u]}}}return q},O=function(f,l,g,m){if(m&&m.length){if(l===0&&!g){f.unshift.apply(f,m)}else{if(l<f.length){f.splice.apply(f,[l,g].concat(m))}else{f.push.apply(f,m)}}}else{f.splice(l,g)}return f},R=function(g,f,l){return J(g,f,l)},E=function(g,f,l){g.splice(f,l);return g},M=function(f,o,l){var n=arguments.length,g=K(f,o),m;if(n<3){l=f.length-g}m=f.slice(o,K(f,g+l));if(n<4){J(f,g,l)}else{J(f,g,l,H.call(arguments,3))}return m},P=function(f){return f.splice.apply(f,H.call(arguments,1))},L=F?E:R,C=F?O:J,e=F?P:M,S={binarySearch:function(f,m,p,o,g){var n=f.length,q,l;if(p instanceof Function){g=p;p=0;o=n}else{if(o instanceof Function){g=o;o=n}else{if(p===undefined){p=0}if(o===undefined){o=n}g=g||S.lexicalCompare}}--o;while(p<=o){q=(p+o)>>1;l=g(m,f[q]);if(l>=0){p=q+1}else{if(l<0){o=q-1}}}return p},defaultCompare:function(f,g){return(f<g)?-1:((f>g)?1:0)},lexicalCompare:function(f,g){f=String(f);g=String(g);return(f<g)?-1:((f>g)?1:0)},each:function(f,l,n,m){f=S.from(f);var o,g=f.length;if(m!==true){for(o=0;o<g;o++){if(l.call(n||f[o],f[o],o,f)===false){return o}}}else{for(o=g-1;o>-1;o--){if(l.call(n||f[o],f[o],o,f)===false){return o}}}return true},forEach:("forEach" in Q)?function(g,l,f){return g.forEach(l,f)}:function(f,m,n){for(var l=0,g=f.length;l<g;l++){m.call(n,f[l],l,f)}},indexOf:G?function(g,f,l){return g?Q.indexOf.call(g,f,l):-1}:function(f,m,g){var l,n=f?f.length:0;for(l=(g<0)?Math.max(0,n+g):g||0;l<n;l++){if(f[l]===m){return l}}return -1},contains:G?function(g,f){return Q.indexOf.call(g,f)!==-1}:function(f,l){var g,m;for(g=0,m=f.length;g<m;g++){if(f[g]===l){return true}}return false},toArray:function(m,f,l){if(!m||!m.length){return[]}if(typeof m==="string"){m=m.split("")}if(N){return H.call(m,f||0,l||m.length)}var g=[],n;f=f||0;l=l?((l<0)?m.length+l:l):m.length;for(n=f;n<l;n++){g.push(m[n])}return g},pluck:function(f,n){var o=[],m,g,l;for(m=0,g=f.length;m<g;m++){l=f[m];o.push(l[n])}return o},map:("map" in Q)?function(g,l,f){return g.map(l,f)}:function(f,g,l){var n=f.length,m=new Array(n),o;for(o=0;o<n;o++){m[o]=g.call(l,f[o],o,f)}return m},every:("every" in Q)?function(g,l,f){return g.every(l,f)}:function(f,m,n){var l=0,g=f.length;for(;l<g;++l){if(!m.call(n,f[l],l,f)){return false}}return true},some:("some" in Q)?function(g,l,f){return g.some(l,f)}:function(f,m,n){var l=0,g=f.length;for(;l<g;++l){if(m.call(n,f[l],l,f)){return true}}return false},equals:function(f,g){var n=f.length,m=g.length,l;if(f===g){return true}if(n!==m){return false}for(l=0;l<n;++l){if(f[l]!==g[l]){return false}}return true},clean:function(f){var n=[],m=0,g=f.length,l;for(;m<g;m++){l=f[m];if(!Ext.isEmpty(l)){n.push(l)}}return n},unique:function(f){var g=[],m=0,l=f.length,n;for(;m<l;m++){n=f[m];if(S.indexOf(g,n)===-1){g.push(n)}}return g},filter:("filter" in Q)?function(g,l,f){return g.filter(l,f)}:function(f,l,n){var o=[],m=0,g=f.length;for(;m<g;m++){if(l.call(n,f[m],m,f)){o.push(f[m])}}return o},findBy:function(f,g,m){var n=0,l=f.length;for(;n<l;n++){if(g.call(m||f,f[n],n)){return f[n]}}return null},from:function(g,l){if(g===undefined||g===null){return[]}if(Ext.isArray(g)){return(l)?H.call(g):g}var f=typeof g;if(g&&g.length!==undefined&&f!=="string"&&(f!=="function"||!g.apply)){return S.toArray(g)}return[g]},remove:function(g,l){var f=S.indexOf(g,l);if(f!==-1){L(g,f,1)}return g},removeAt:function(f,m,l){var g=f.length;if(m>=0&&m<g){l=l||1;l=Math.min(l,g-m);L(f,m,l)}return f},include:function(g,f){if(!S.contains(g,f)){g.push(f)}},clone:function(f){return H.call(f)},merge:function(){var l=H.call(arguments),f=[],m,g;for(m=0,g=l.length;m<g;m++){f=f.concat(l[m])}return S.unique(f)},intersect:function(){var o=[],f=H.call(arguments),m,p,u,q,l,y,g,s,n,x,t,v,w;if(!f.length){return o}m=f.length;for(t=l=0;t<m;t++){y=f[t];if(!q||y.length<q.length){q=y;l=t}}q=S.unique(q);L(f,l,1);g=q.length;m=f.length;for(t=0;t<g;t++){s=q[t];x=0;for(v=0;v<m;v++){p=f[v];u=p.length;for(w=0;w<u;w++){n=p[w];if(s===n){x++;break}}}if(x===m){o.push(s)}}return o},difference:function(p,o){var f=H.call(p),l=f.length,m,n,g;for(m=0,g=o.length;m<g;m++){for(n=0;n<l;n++){if(f[n]===o[m]){L(f,n,1);n--;l--}}}return f},reduce:Array.prototype.reduce?function(g,l,f){if(arguments.length===3){return Array.prototype.reduce.call(g,l,f)}return Array.prototype.reduce.call(g,l)}:function(f,g,n){f=Object(f);var m=0,l=f.length>>>0,o=n;if(arguments.length<3){while(true){if(m in f){o=f[m++];break}if(++m>=l){throw new TypeError("Reduce of empty array with no initial value")}}}for(;m<l;++m){if(m in f){o=g(o,f[m],m,f)}}return o},slice:([1,2].slice(1,undefined).length?function(g,l,f){return H.call(g,l,f)}:function(g,l,f){if(typeof l==="undefined"){return H.call(g)}if(typeof f==="undefined"){return H.call(g,l)}return H.call(g,l,f)}),sort:function(g,f){return I(g,f||S.lexicalCompare)},flatten:function(g){var l=[];function f(p){var n,m,o;for(n=0,m=p.length;n<m;n++){o=p[n];if(Ext.isArray(o)){f(o)}else{l.push(o)}}return l}return f(g)},min:function(f,g){var o=f[0],n,l,m;for(n=0,l=f.length;n<l;n++){m=f[n];if(g){if(g(o,m)===1){o=m}}else{if(m<o){o=m}}}return o},max:function(f,g){var n=f[0],o,l,m;for(o=0,l=f.length;o<l;o++){m=f[o];if(g){if(g(n,m)===-1){n=m}}else{if(m>n){n=m}}}return n},mean:function(f){return f.length>0?S.sum(f)/f.length:undefined},sum:function(f){var n=0,m,g,l;for(m=0,g=f.length;m<g;m++){l=f[m];n+=l}return n},toMap:function(f,m,l){var g={},n=f.length;if(!m){while(n--){g[f[n]]=n+1}}else{if(typeof m==="string"){while(n--){g[f[n][m]]=n+1}}else{while(n--){g[m.call(l,f[n])]=n+1}}}return g},toValueMap:function(s,v,m,t){var l={},f=s.length,g,u,o,q,n,p;if(!v){while(f--){p=s[f];l[p]=p}}else{if(!(q=(typeof v!=="string"))){t=m}u=t===1;g=t===2;while(f--){p=s[f];n=q?v.call(m,p):p[v];if(u){if(n in l){l[n].push(p)}else{l[n]=[p]}}else{if(g&&(n in l)){if((o=l[n]) instanceof Array){o.push(p)}else{l[n]=[o,p]}}else{l[n]=p}}}}return l},erase:L,insert:function(g,l,f){return C(g,l,0,f)},move:function(f,o,l){if(l===o){return}var n=f[o],g=l>o?1:-1,m;for(m=o;m!=l;m+=g){f[m]=f[m+g]}f[l]=n},replace:C,splice:e,push:function(f){var l=arguments.length,g=1,m;if(f===undefined){f=[]}else{if(!Ext.isArray(f)){f=[f]}}for(;g<l;g++){m=arguments[g];Array.prototype.push[Ext.isIterable(m)?"apply":"call"](f,m)}return f},numericSortFn:function(g,f){return g-f}};Ext.each=S.each;S.union=S.merge;Ext.min=S.min;Ext.max=S.max;Ext.sum=S.sum;Ext.mean=S.mean;Ext.flatten=S.flatten;Ext.clean=S.clean;Ext.unique=S.unique;Ext.pluck=S.pluck;Ext.toArray=function(){return S.toArray.apply(S,arguments)};return S}());Ext.String=(function(){var z=/^[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+|[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+$/g,J=/('|\\)/g,F=/([-.*+?\^${}()|\[\]\/\\])/g,H=/^\s+|\s+$/g,y=/\s+/,L=/(^[^a-z]*|[^\w])/gi,C,G,A,D,B=function(e,f){return C[f]},M=function(e,f){return(f in G)?G[f]:String.fromCharCode(parseInt(f.substr(2),10))},E=function(e,f){if(e===null||e===undefined||f===null||f===undefined){return false}return f.length<=e.length},K=String.fromCharCode,I;return I={fromCodePoint:String.fromCodePoint||function(){var e,m="",l=[],g=-1,f=arguments.length;while(++g<f){e=Number(arguments[g]);if(!isFinite(e)||e<0||e>1114111||Math.floor(e)!==e){Ext.raise("Invalid code point: "+e)}if(e<=65535){l.push(e)}else{e-=65536;l.push((e>>10)+55296,(e%1024)+56320)}if(g+1===f){m+=K(l);l.length=0}}return m},insert:function(e,l,f){if(!e){return l}if(!l){return e}var g=e.length;if(!f&&f!==0){f=g}if(f<0){f*=-1;if(f>=g){f=0}else{f=g-f}}if(f===0){e=l+e}else{if(f>=e.length){e+=l}else{e=e.substr(0,f)+l+e.substr(f)}}return e},startsWith:function(e,l,f){var g=E(e,l);if(g){if(f){e=e.toLowerCase();l=l.toLowerCase()}g=e.lastIndexOf(l,0)===0}return g},endsWith:function(l,f,e){var g=E(l,f);if(g){if(e){l=l.toLowerCase();f=f.toLowerCase()}g=l.indexOf(f,l.length-f.length)!==-1}return g},createVarName:function(e){return e.replace(L,"")},htmlEncode:function(e){return(!e)?e:String(e).replace(A,B)},htmlDecode:function(e){return(!e)?e:String(e).replace(D,M)},hasHtmlCharacters:function(e){return A.test(e)},addCharacterEntities:function(g){var m=[],f=[],e,l;for(e in g){l=g[e];G[e]=l;C[l]=e;m.push(l);f.push(e)}A=new RegExp("("+m.join("|")+")","g");D=new RegExp("("+f.join("|")+"|&#[0-9]{1,5};)","g")},resetCharacterEntities:function(){C={};G={};this.addCharacterEntities({"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&#39;":"'"})},urlAppend:function(e,f){if(!Ext.isEmpty(f)){return e+(e.indexOf("?")===-1?"?":"&")+f}return e},trim:function(e){if(e){e=e.replace(z,"")}return e||""},capitalize:function(e){if(e){e=e.charAt(0).toUpperCase()+e.substr(1)}return e||""},uncapitalize:function(e){if(e){e=e.charAt(0).toLowerCase()+e.substr(1)}return e||""},ellipsis:function(e,g,m){if(e&&e.length>g){if(m){var f=e.substr(0,g-2),l=Math.max(f.lastIndexOf(" "),f.lastIndexOf("."),f.lastIndexOf("!"),f.lastIndexOf("?"));if(l!==-1&&l>=(g-15)){return f.substr(0,l)+"..."}}return e.substr(0,g-3)+"..."}return e},escapeRegex:function(e){return e.replace(F,"\\$1")},createRegex:function(g,m,f,l){var e=g;if(g!=null&&!g.exec){e=I.escapeRegex(String(g));if(m!==false){e="^"+e}if(f!==false){e+="$"}e=new RegExp(e,(l!==false)?"i":"")}return e},escape:function(e){return e.replace(J,"\\$1")},toggle:function(f,e,g){return f===e?g:e},leftPad:function(f,e,l){var g=String(f);l=l||" ";while(g.length<e){g=l+g}return g},repeat:function(g,m,f){if(m<1){m=0}for(var l=[],e=m;e--;){l.push(g)}return l.join(f||"")},splitWords:function(e){if(e&&typeof e=="string"){return e.replace(H,"").split(y)}return e||[]}}}());Ext.String.resetCharacterEntities();Ext.htmlEncode=Ext.String.htmlEncode;Ext.htmlDecode=Ext.String.htmlDecode;Ext.urlAppend=Ext.String.urlAppend;Ext.Date=(function(){var x,y=Date,D=/(\\.)/g,C=/([gGhHisucUOPZ]|MS)/,w=/([djzmnYycU]|MS)/,E=/\\/gi,A=/\{(\d+)\}/g,v=new RegExp("\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/"),z=Ext.String.leftPad,B=["var me = this, dt, y, m, d, h, i, s, ms, o, O, z, zz, u, v, W, year, jan4, week1monday, daysInMonth, dayMatched,","def = me.defaults,","from = Ext.Number.from,","results = String(input).match(me.parseRegexes[{0}]);","if(results){","{1}","if(u != null){","v = new Date(u * 1000);","}else{","dt = me.clearTime(new Date);","y = from(y, from(def.y, dt.getFullYear()));","m = from(m, from(def.m - 1, dt.getMonth()));","dayMatched = d !== undefined;","d = from(d, from(def.d, dt.getDate()));","if (!dayMatched) {","dt.setDate(1);","dt.setMonth(m);","dt.setFullYear(y);","daysInMonth = me.getDaysInMonth(dt);","if (d > daysInMonth) {","d = daysInMonth;","}","}","h  = from(h, from(def.h, dt.getHours()));","i  = from(i, from(def.i, dt.getMinutes()));","s  = from(s, from(def.s, dt.getSeconds()));","ms = from(ms, from(def.ms, dt.getMilliseconds()));","if(z >= 0 && y >= 0){","v = me.add(new Date(y < 100 ? 100 : y, 0, 1, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);","v = !strict? v : (strict === true && (z <= 364 || (me.isLeapYear(v) && z <= 365))? me.add(v, me.DAY, z) : null);","}else if(strict === true && !me.isValid(y, m + 1, d, h, i, s, ms)){","v = null;","}else{","if (W) {","year = y || (new Date()).getFullYear();","jan4 = new Date(year, 0, 4, 0, 0, 0);","d = jan4.getDay();","week1monday = new Date(jan4.getTime() - ((d === 0 ? 6 : d - 1) * 86400000));","v = Ext.Date.clearTime(new Date(week1monday.getTime() + ((W - 1) * 604800000 + 43200000)));","} else {","v = me.add(new Date(y < 100 ? 100 : y, m, d, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);","}","}","}","}","if(v){","if(zz != null){","v = me.add(v, me.SECOND, -v.getTimezoneOffset() * 60 - zz);","}else if(o){","v = me.add(v, me.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));","}","}","return (v != null) ? v : null;"].join("\n");if(!Date.prototype.toISOString){Date.prototype.toISOString=function(){var e=this;return z(e.getUTCFullYear(),4,"0")+"-"+z(e.getUTCMonth()+1,2,"0")+"-"+z(e.getUTCDate(),2,"0")+"T"+z(e.getUTCHours(),2,"0")+":"+z(e.getUTCMinutes(),2,"0")+":"+z(e.getUTCSeconds(),2,"0")+"."+z(e.getUTCMilliseconds(),3,"0")+"Z"}}function u(e){var f=Array.prototype.slice.call(arguments,1);return e.replace(A,function(l,g){return f[g]})}x={now:y.now,toString:function(e){if(!e){e=new y()}return e.getFullYear()+"-"+z(e.getMonth()+1,2,"0")+"-"+z(e.getDate(),2,"0")+"T"+z(e.getHours(),2,"0")+":"+z(e.getMinutes(),2,"0")+":"+z(e.getSeconds(),2,"0")},getElapsed:function(e,f){return Math.abs(e-(f||x.now()))},useStrict:false,formatCodeToRegex:function(f,g){var e=x.parseCodes[f];if(e){e=typeof e==="function"?e():e;x.parseCodes[f]=e}return e?Ext.applyIf({c:e.c?u(e.c,g||"{0}"):e.c},e):{g:0,c:null,s:Ext.String.escapeRegex(f)}},parseFunctions:{MS:function(f,g){var e=(f||"").match(v);return e?new y(((e[1]||"")+e[2])*1):null},time:function(f,g){var e=parseInt(f,10);if(e||e===0){return new y(e)}return null},timestamp:function(f,g){var e=parseInt(f,10);if(e||e===0){return new y(e*1000)}return null}},parseRegexes:[],formatFunctions:{MS:function(){return"\\/Date("+this.getTime()+")\\/"},time:function(){return this.getTime().toString()},timestamp:function(){return x.format(this,"U")}},y2kYear:50,MILLI:"ms",SECOND:"s",MINUTE:"mi",HOUR:"h",DAY:"d",MONTH:"mo",YEAR:"y",DAYS_IN_WEEK:7,MONTHS_IN_YEAR:12,MAX_DAYS_IN_MONTH:31,SUNDAY:0,MONDAY:1,TUESDAY:2,WEDNESDAY:3,THURSDAY:4,FRIDAY:5,SATURDAY:6,defaults:{},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNumbers:{January:0,Jan:0,February:1,Feb:1,March:2,Mar:2,April:3,Apr:3,May:4,June:5,Jun:5,July:6,Jul:6,August:7,Aug:7,September:8,Sep:8,October:9,Oct:9,November:10,Nov:10,December:11,Dec:11},defaultFormat:"m/d/Y",firstDayOfWeek:0,weekendDays:[0,6],getShortMonthName:function(e){return x.monthNames[e].substring(0,3)},getShortDayName:function(e){return x.dayNames[e].substring(0,3)},getMonthNumber:function(e){return x.monthNumbers[e.substring(0,1).toUpperCase()+e.substring(1,3).toLowerCase()]},formatContainsHourInfo:function(e){return C.test(e.replace(D,""))},formatContainsDateInfo:function(e){return w.test(e.replace(D,""))},unescapeFormat:function(e){return e.replace(E,"")},formatCodes:{d:"Ext.String.leftPad(m.getDate(), 2, '0')",D:"Ext.Date.getShortDayName(m.getDay())",j:"m.getDate()",l:"Ext.Date.dayNames[m.getDay()]",N:"(m.getDay() ? m.getDay() : 7)",S:"Ext.Date.getSuffix(m)",w:"m.getDay()",z:"Ext.Date.getDayOfYear(m)",W:"Ext.String.leftPad(Ext.Date.getWeekOfYear(m), 2, '0')",F:"Ext.Date.monthNames[m.getMonth()]",m:"Ext.String.leftPad(m.getMonth() + 1, 2, '0')",M:"Ext.Date.getShortMonthName(m.getMonth())",n:"(m.getMonth() + 1)",t:"Ext.Date.getDaysInMonth(m)",L:"(Ext.Date.isLeapYear(m) ? 1 : 0)",o:"(m.getFullYear() + (Ext.Date.getWeekOfYear(m) == 1 && m.getMonth() > 0 ? +1 : (Ext.Date.getWeekOfYear(m) >= 52 && m.getMonth() < 11 ? -1 : 0)))",Y:"Ext.String.leftPad(m.getFullYear(), 4, '0')",y:"('' + m.getFullYear()).substring(2, 4)",a:"(m.getHours() < 12 ? 'am' : 'pm')",A:"(m.getHours() < 12 ? 'AM' : 'PM')",g:"((m.getHours() % 12) ? m.getHours() % 12 : 12)",G:"m.getHours()",h:"Ext.String.leftPad((m.getHours() % 12) ? m.getHours() % 12 : 12, 2, '0')",H:"Ext.String.leftPad(m.getHours(), 2, '0')",i:"Ext.String.leftPad(m.getMinutes(), 2, '0')",s:"Ext.String.leftPad(m.getSeconds(), 2, '0')",u:"Ext.String.leftPad(m.getMilliseconds(), 3, '0')",O:"Ext.Date.getGMTOffset(m)",P:"Ext.Date.getGMTOffset(m, true)",T:"Ext.Date.getTimezone(m)",Z:"(m.getTimezoneOffset() * -60)",c:function(){var m="Y-m-dTH:i:sP",f=[],g,l=m.length,e;for(g=0;g<l;++g){e=m.charAt(g);f.push(e==="T"?"'T'":x.getFormatCode(e))}return f.join(" + ")},C:function(){return"m.toISOString()"},U:"Math.round(m.getTime() / 1000)"},isValid:function(f,e,l,m,p,g,n){m=m||0;p=p||0;g=g||0;n=n||0;var o=x.add(new y(f<100?100:f,e-1,l,m,p,g,n),x.YEAR,f<100?f-100:0);return f===o.getFullYear()&&e===o.getMonth()+1&&l===o.getDate()&&m===o.getHours()&&p===o.getMinutes()&&g===o.getSeconds()&&n===o.getMilliseconds()},parse:function(g,e,l){var f=x.parseFunctions;if(f[e]==null){x.createParser(e)}return f[e].call(x,g,Ext.isDefined(l)?l:x.useStrict)},parseDate:function(f,e,g){return x.parse(f,e,g)},getFormatCode:function(e){var f=x.formatCodes[e];if(f){f=typeof f==="function"?f():f;x.formatCodes[e]=f}return f||("'"+Ext.String.escape(e)+"'")},createFormat:function(m){var e=[],l=false,f="",g;for(g=0;g<m.length;++g){f=m.charAt(g);if(!l&&f==="\\"){l=true}else{if(l){l=false;e.push("'"+Ext.String.escape(f)+"'")}else{if(f==="\n"){e.push("'\\n'")}else{e.push(x.getFormatCode(f))}}}}x.formatFunctions[m]=Ext.functionFactory("var m=this;return "+e.join("+"))},createParser:function(e){var q=x.parseRegexes.length,t=1,p=[],f=[],l=false,s="",n=0,m=e.length,g=[],o;for(;n<m;++n){s=e.charAt(n);if(!l&&s==="\\"){l=true}else{if(l){l=false;f.push(Ext.String.escape(s))}else{o=x.formatCodeToRegex(s,t);t+=o.g;f.push(o.s);if(o.g&&o.c){if(o.calcAtEnd){g.push(o.c)}else{p.push(o.c)}}}}}p=p.concat(g);x.parseRegexes[q]=new RegExp("^"+f.join("")+"$","i");x.parseFunctions[e]=Ext.functionFactory("input","strict",u(B,q,p.join("")))},parseCodes:{d:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(3[0-1]|[1-2][0-9]|0[1-9])"},j:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(3[0-1]|[1-2][0-9]|[1-9])"},D:function(){for(var f=[],e=0;e<7;f.push(x.getShortDayName(e)),++e){}return{g:0,c:null,s:"(?:"+f.join("|")+")"}},l:function(){return{g:0,c:null,s:"(?:"+x.dayNames.join("|")+")"}},N:{g:0,c:null,s:"[1-7]"},S:{g:0,c:null,s:"(?:st|nd|rd|th)"},w:{g:0,c:null,s:"[0-6]"},z:{g:1,c:"z = parseInt(results[{0}], 10);\n",s:"(\\d{1,3})"},W:{g:1,c:"W = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},F:function(){return{g:1,c:"m = parseInt(me.getMonthNumber(results[{0}]), 10);\n",s:"("+x.monthNames.join("|")+")"}},M:function(){for(var f=[],e=0;e<12;f.push(x.getShortMonthName(e)),++e){}return Ext.applyIf({s:"("+f.join("|")+")"},x.formatCodeToRegex("F"))},m:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(1[0-2]|0[1-9])"},n:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(1[0-2]|[1-9])"},t:{g:0,c:null,s:"(?:\\d{2})"},L:{g:0,c:null,s:"(?:1|0)"},o:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},Y:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},y:{g:1,c:"var ty = parseInt(results[{0}], 10);\ny = ty > me.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{2})"},a:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(am|pm|AM|PM)",calcAtEnd:true},A:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(AM|PM|am|pm)",calcAtEnd:true},g:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(1[0-2]|[0-9])"},G:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(2[0-3]|1[0-9]|[0-9])"},h:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(1[0-2]|0[1-9])"},H:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(2[0-3]|[0-1][0-9])"},i:{g:1,c:"i = parseInt(results[{0}], 10);\n",s:"([0-5][0-9])"},s:{g:1,c:"s = parseInt(results[{0}], 10);\n",s:"([0-5][0-9])"},u:{g:1,c:"ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n",s:"(\\d+)"},O:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),","mn = o.substring(3,5) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{4})"},P:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),","mn = o.substring(4,6) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{2}:\\d{2})"},T:{g:0,c:null,s:"[A-Z]{1,5}"},Z:{g:1,c:"zz = results[{0}] * 1;\nzz = (-43200 <= zz && zz <= 50400)? zz : null;\n",s:"([+-]?\\d{1,5})"},c:function(){var f=[],l=[x.formatCodeToRegex("Y",1),x.formatCodeToRegex("m",2),x.formatCodeToRegex("d",3),x.formatCodeToRegex("H",4),x.formatCodeToRegex("i",5),x.formatCodeToRegex("s",6),{c:"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n"},{c:["if(results[8]) {","if(results[8] == 'Z'){","zz = 0;","}else if (results[8].indexOf(':') > -1){",x.formatCodeToRegex("P",8).c,"}else{",x.formatCodeToRegex("O",8).c,"}","}"].join("\n")}],e,g;for(e=0,g=l.length;e<g;++e){f.push(l[e].c)}return{g:1,c:f.join(""),s:[l[0].s,"(?:","-",l[1].s,"(?:","-",l[2].s,"(?:","(?:T| )?",l[3].s,":",l[4].s,"(?::",l[5].s,")?","(?:(?:\\.|,)(\\d+))?","(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?",")?",")?",")?"].join("")}},U:{g:1,c:"u = parseInt(results[{0}], 10);\n",s:"(-?\\d+)"}},dateFormat:function(f,e){return x.format(f,e)},isEqual:function(e,f){if(e&&f){return(e.getTime()===f.getTime())}return !(e||f)},format:function(f,e){var g=x.formatFunctions;if(!Ext.isDate(f)){return""}if(g[e]==null){x.createFormat(e)}return g[e].call(f)+""},getTimezone:function(e){return e.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,5})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,"$1$2").replace(/[^A-Z]/g,"")},getGMTOffset:function(g,f){var e=g.getTimezoneOffset();return(e>0?"-":"+")+Ext.String.leftPad(Math.floor(Math.abs(e)/60),2,"0")+(f?":":"")+Ext.String.leftPad(Math.abs(e%60),2,"0")},getDayOfYear:function(f){var g=0,m=x.clone(f),l=f.getMonth(),e;for(e=0,m.setDate(1),m.setMonth(0);e<l;m.setMonth(++e)){g+=x.getDaysInMonth(m)}return g+f.getDate()-1},getWeekOfYear:(function(){var f=86400000,e=7*f;return function(g){var n=y.UTC(g.getFullYear(),g.getMonth(),g.getDate()+3)/f,l=Math.floor(n/7),m=new y(l*e).getUTCFullYear();return l-Math.floor(y.UTC(m,0,7)/e)+1}}()),isLeapYear:function(f){var e=f.getFullYear();return !!((e&3)===0&&(e%100||(e%400===0&&e)))},getFirstDayOfMonth:function(e){var f=(e.getDay()-(e.getDate()-1))%7;return(f<0)?(f+7):f},getLastDayOfMonth:function(e){return x.getLastDateOfMonth(e).getDay()},getFirstDateOfMonth:function(e){return new y(e.getFullYear(),e.getMonth(),1)},getLastDateOfMonth:function(e){return new y(e.getFullYear(),e.getMonth(),x.getDaysInMonth(e))},getDaysInMonth:(function(){var e=[31,28,31,30,31,30,31,31,30,31,30,31];return function(f){var g=f.getMonth();return g===1&&x.isLeapYear(f)?29:e[g]}}()),getSuffix:function(e){switch(e.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},clone:function(e){return new y(e.getTime())},isDST:function(e){return new y(e.getFullYear(),0,1).getTimezoneOffset()!==e.getTimezoneOffset()},clearTime:function(l,m){if(isNaN(l.getTime())){return l}if(m){return x.clearTime(x.clone(l))}var f=l.getDate(),g,e;l.setHours(0);l.setMinutes(0);l.setSeconds(0);l.setMilliseconds(0);if(l.getDate()!==f){for(g=1,e=x.add(l,x.HOUR,g);e.getDate()!==f;g++,e=x.add(l,x.HOUR,g)){}l.setDate(f);l.setHours(e.getHours())}return l},add:function(g,l,n){var f=x.clone(g),o=0,m,e;if(!l||n===0){return f}e=n-parseInt(n,10);n=parseInt(n,10);if(n){switch(l.toLowerCase()){case x.MILLI:f.setTime(f.getTime()+n);break;case x.SECOND:f.setTime(f.getTime()+n*1000);break;case x.MINUTE:f.setTime(f.getTime()+n*60*1000);break;case x.HOUR:f.setTime(f.getTime()+n*60*60*1000);break;case x.DAY:f.setTime(f.getTime()+n*24*60*60*1000);break;case x.MONTH:m=g.getDate();if(m>28){m=Math.min(m,x.getLastDateOfMonth(x.add(x.getFirstDateOfMonth(g),x.MONTH,n)).getDate())}f.setDate(m);f.setMonth(g.getMonth()+n);break;case x.YEAR:m=g.getDate();if(m>28){m=Math.min(m,x.getLastDateOfMonth(x.add(x.getFirstDateOfMonth(g),x.YEAR,n)).getDate())}f.setDate(m);f.setFullYear(g.getFullYear()+n);break}}if(e){switch(l.toLowerCase()){case x.MILLI:o=1;break;case x.SECOND:o=1000;break;case x.MINUTE:o=1000*60;break;case x.HOUR:o=1000*60*60;break;case x.DAY:o=1000*60*60*24;break;case x.MONTH:m=x.getDaysInMonth(f);o=1000*60*60*24*m;break;case x.YEAR:m=(x.isLeapYear(f)?366:365);o=1000*60*60*24*m;break}if(o){f.setTime(f.getTime()+o*e)}}return f},subtract:function(f,g,e){return x.add(f,g,-e)},between:function(g,e,l){var f=g.getTime();return e.getTime()<=f&&f<=l.getTime()},isWeekend:function(e){return Ext.Array.indexOf(this.weekendDays,e.getDay())>-1},utcToLocal:function(e){return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())},localToUtc:function(e){return x.utc(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())},utc:function(n,f,l,m,e,o,g){return new Date(Date.UTC(n,f,l,m||0,e||0,o||0,g||0))},compat:function(){var f,p=["useStrict","formatCodeToRegex","parseFunctions","parseRegexes","formatFunctions","y2kYear","MILLI","SECOND","MINUTE","HOUR","DAY","MONTH","YEAR","defaults","dayNames","monthNames","monthNumbers","getShortMonthName","getShortDayName","getMonthNumber","formatCodes","isValid","parseDate","getFormatCode","createFormat","createParser","parseCodes"],n=["dateFormat","format","getTimezone","getGMTOffset","getDayOfYear","getWeekOfYear","isLeapYear","getFirstDayOfMonth","getLastDayOfMonth","getDaysInMonth","getSuffix","clone","isDST","clearTime","add","between"],l=p.length,m=n.length,e,o,g;for(g=0;g<l;g++){e=p[g];y[e]=x[e]}for(f=0;f<m;f++){o=n[f];y.prototype[o]=function(){var q=Array.prototype.slice.call(arguments);q.unshift(this);return x[o].apply(x,q)}}},diff:function(g,l,e){var f,m=+l-g;switch(e){case x.MILLI:return m;case x.SECOND:return Math.floor(m/1000);case x.MINUTE:return Math.floor(m/60000);case x.HOUR:return Math.floor(m/3600000);case x.DAY:return Math.floor(m/86400000);case"w":return Math.floor(m/604800000);case x.MONTH:f=(l.getFullYear()*12+l.getMonth())-(g.getFullYear()*12+g.getMonth());if(x.add(g,e,f)>l){return f-1}return f;case x.YEAR:f=l.getFullYear()-g.getFullYear();if(x.add(g,e,f)>l){return f-1}else{return f}}},align:function(g,e,f){var l=new y(+g);switch(e.toLowerCase()){case x.MILLI:return l;case x.SECOND:l.setUTCSeconds(l.getUTCSeconds()-l.getUTCSeconds()%f);l.setUTCMilliseconds(0);return l;case x.MINUTE:l.setUTCMinutes(l.getUTCMinutes()-l.getUTCMinutes()%f);l.setUTCSeconds(0);l.setUTCMilliseconds(0);return l;case x.HOUR:l.setUTCHours(l.getUTCHours()-l.getUTCHours()%f);l.setUTCMinutes(0);l.setUTCSeconds(0);l.setUTCMilliseconds(0);return l;case x.DAY:if(f===7||f===14){l.setUTCDate(l.getUTCDate()-l.getUTCDay()+1)}l.setUTCHours(0);l.setUTCMinutes(0);l.setUTCSeconds(0);l.setUTCMilliseconds(0);return l;case x.MONTH:l.setUTCMonth(l.getUTCMonth()-(l.getUTCMonth()-1)%f,1);l.setUTCHours(0);l.setUTCMinutes(0);l.setUTCSeconds(0);l.setUTCMilliseconds(0);return l;case x.YEAR:l.setUTCFullYear(l.getUTCFullYear()-l.getUTCFullYear()%f,1,1);l.setUTCHours(0);l.setUTCMinutes(0);l.setUTCSeconds(0);l.setUTCMilliseconds(0);return g}}};x.parseCodes.C=x.parseCodes.c;return x}());Ext.Function=(function(){var D=0,G,A=[],F=[],x=0,w={},y=window,B=Ext.global,z=!!(B.setImmediate&&B.clearImmediate),H=y.requestAnimationFrame||y.webkitRequestAnimationFrame||y.mozRequestAnimationFrame||y.oRequestAnimationFrame||function(g){var f=Ext.now(),e=Math.max(0,16-(f-D)),l=y.setTimeout(function(){g(f+e)},e);D=f+e;return l},C=function(){var f=A.length,g,e,l;G=null;for(e=0;e<f;e++){l=A[e];g=l[3];if(w[g]){l[0].apply(l[1]||B,l[2]||F);delete w[g]}}A=A.slice(f)},E=function(){Ext.elevateFunction(C)},I={flexSetter:function(e){return function(m,g){var f,l;if(m!==null){if(typeof m!=="string"){for(f in m){if(m.hasOwnProperty(f)){e.call(this,f,m[f])}}if(Ext.enumerables){for(l=Ext.enumerables.length;l--;){f=Ext.enumerables[l];if(m.hasOwnProperty(f)){e.call(this,f,m[f])}}}}else{e.call(this,m,g)}}return this}},bind:function(l,n,f,g){if(arguments.length===2){return function(){return l.apply(n,arguments)}}var m=l,e=Array.prototype.slice;return function(){var o=f||arguments;if(g===true){o=e.call(arguments,0);o=o.concat(f)}else{if(typeof g==="number"){o=e.call(arguments,0);Ext.Array.insert(o,g,f)}}return m.apply(n||B,o)}},bindCallback:function(f,l,m,e,g){return function(){var n=Ext.Array.slice(arguments);return Ext.callback(f,l,m?m.concat(n):n,e,g)}},pass:function(g,f,e){if(!Ext.isArray(f)){if(Ext.isIterable(f)){f=Ext.Array.clone(f)}else{f=f!==undefined?[f]:[]}}return function(){var l=f.slice();l.push.apply(l,arguments);return g.apply(e||this,l)}},alias:function(e,f){return function(){return e[f].apply(e,arguments)}},clone:function(e){return function(){return e.apply(this,arguments)}},createInterceptor:function(g,l,e,f){if(!Ext.isFunction(l)){return g}else{f=Ext.isDefined(f)?f:null;return function(){var n=this,m=arguments;return(l.apply(e||n||B,m)!==false)?g.apply(n||B,m):f}}},createDelayed:function(f,m,l,e,g){if(l||e){f=Ext.Function.bind(f,l,e,g)}return function(){var n=this,o=Array.prototype.slice.call(arguments);setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(f,n,o)}else{f.apply(n,o)}},m)}},defer:function(f,m,l,e,g){f=Ext.Function.bind(f,l,e,g);if(m>0){return setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(f)}else{f()}},m)}f();return 0},interval:function(f,m,l,e,g){f=Ext.Function.bind(f,l,e,g);return setInterval(function(){if(Ext.elevateFunction){Ext.elevateFunction(f)}else{f()}},m)},createSequence:function(e,g,f){if(!g){return e}else{return function(){var l=e.apply(this,arguments);g.apply(f||this,arguments);return l}}},createBuffered:function(f,e,l,m){var g;return function(){var n=m||Array.prototype.slice.call(arguments,0),o=l||this;if(g){clearTimeout(g)}g=setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(f,o,n)}else{f.apply(o,n)}},e)}},createAnimationFrame:function(l,m,f,e){var g;e=e||3;return function(){var n=f||Array.prototype.slice.call(arguments,0);m=m||this;if(e===3&&g){I.cancelAnimationFrame(g)}if((e&1)||!g){g=I.requestAnimationFrame(function(){g=null;l.apply(m,n)})}}},requestAnimationFrame:function(l,m,g){var f=++x,e=Array.prototype.slice.call(arguments,0);e[3]=f;w[f]=1;A.push(e);if(!G){G=H(Ext.elevateFunction?E:C)}return f},cancelAnimationFrame:function(e){delete w[e]},createThrottled:function(f,e,n){var p=0,g,o,l,m=function(){if(Ext.elevateFunction){Ext.elevateFunction(f,n,o)}else{f.apply(n,o)}p=Ext.now();l=null};return function(){if(!n){n=this}g=Ext.now()-p;o=arguments;if(g>=e){clearTimeout(l);m()}else{if(!l){l=Ext.defer(m,e-g)}}}},createBarrier:function(g,e,f){return function(){if(!--g){e.apply(f,arguments)}}},interceptBefore:function(f,g,l,m){var e=f[g]||Ext.emptyFn;return(f[g]=function(){var n=l.apply(m||this,arguments);e.apply(this,arguments);return n})},interceptAfter:function(f,g,l,m){var e=f[g]||Ext.emptyFn;return(f[g]=function(){e.apply(this,arguments);return l.apply(m||this,arguments)})},interceptAfterOnce:function(n,f,e,l){var m=n[f],g;g=function(){var o;if(m){m.apply(this,arguments)}o=e.apply(l||this,arguments);n[f]=m;n=f=e=l=m=g=null;return o};n[f]=g;return g},makeCallback:function(e,f){return function(){return f[e].apply(f,arguments)}},memoize:function(l,m,g){var f={},e=g&&Ext.isFunction(g);return function(n){var o=e?g.apply(m,arguments):n;if(!(o in f)){f[o]=l.apply(m,arguments)}return f[o]}}};Ext.asap=z?function(e,f,g){if(f!=null||g!=null){e=I.bind(e,f,g)}return setImmediate(function(){if(Ext.elevateFunction){Ext.elevateFunction(e)}else{e()}})}:function(e,f,g){if(f!=null||g!=null){e=I.bind(e,f,g)}return setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(e)}else{e()}},0,true)},Ext.asapCancel=z?function(e){clearImmediate(e)}:function(e){clearTimeout(e)};Ext.defer=I.defer;Ext.interval=I.interval;Ext.pass=I.pass;Ext.bind=I.bind;Ext.deferCallback=I.requestAnimationFrame;return I})();Ext.Number=(new function(){var m=this,n=(0.9).toFixed()!=="1",o=Math,p={count:false,inclusive:false,wrap:true};Ext.apply(m,{MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-(o.pow(2,53)-1),MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||o.pow(2,53)-1,Clip:{DEFAULT:p,COUNT:Ext.applyIf({count:true},p),INCLUSIVE:Ext.applyIf({inclusive:true},p),NOWRAP:Ext.applyIf({wrap:false},p)},clipIndices:function(g,f,x){x=x||p;var y=0,l=x.wrap,v,e,w;f=f||[];for(w=0;w<2;++w){v=e;e=f[w];if(e==null){e=y}else{if(w&&x.count){e+=v;e=(e>g)?g:e}else{if(l){e=(e<0)?(g+e):e}if(w&&x.inclusive){++e}e=(e<0)?0:((e>g)?g:e)}}y=g}f[0]=v;f[1]=(e<v)?v:e;return f},constrain:function(f,g,l){var e=parseFloat(f);if(g===null){g=f}if(l===null){l=f}return(e<g)?g:((e>l)?l:e)},snap:function(f,l,g,e){var t;if(f===undefined||f<g){return g||0}if(l){t=f%l;if(t!==0){f-=t;if(t*2>=l){f+=l}else{if(t*2<-l){f-=l}}}}return m.constrain(f,g,e)},snapInRange:function(g,e,l,f){var s;l=(l||0);if(g===undefined||g<l){return l}if(e&&(s=((g-l)%e))){g-=s;s*=2;if(s>=e){g+=e}}if(f!==undefined){if(g>(f=m.snapInRange(f,e,l))){g=f}}return g},roundToNearest:function(f,e){e=e||1;return e*o.round(f/e)},sign:o.sign||function(e){e=+e;if(e===0||isNaN(e)){return e}return(e>0)?1:-1},log10:o.log10||function(e){return o.log(e)*o.LOG10E},isEqual:function(g,e,f){return o.abs(g-e)<f},isFinite:Number.isFinite||function(e){return typeof e==="number"&&isFinite(e)},toFixed:n?function(f,e){e=e||0;var g=o.pow(10,e);return(o.round(f*g)/g).toFixed(e)}:function(f,e){return f.toFixed(e)},from:function(f,e){if(isFinite(f)){f=parseFloat(f)}return !isNaN(f)?f:e},randomInt:function(f,e){return o.floor(o.random()*(e-f+1)+f)},correctFloat:function(e){return parseFloat(e.toPrecision(14))}});Ext.num=function(){return m.from.apply(this,arguments)}}());(function(){var p=function(){},s=/^\?/,q=/(\[):?([^\]]*)\]/g,t=/^([^\[]+)/,u=/\+/g,o=Ext.Object={chain:Object.create||function(e){p.prototype=e;var f=new p();p.prototype=null;return f},clear:function(f){for(var e in f){delete f[e]}return f},freeze:Object.freeze?function(e,g){if(e&&typeof e==="object"&&!Object.isFrozen(e)){Object.freeze(e);if(g){for(var f in e){o.freeze(e[f],g)}}}return e}:Ext.identityFn,toQueryObjects:function(m,e,n){var w=o.toQueryObjects,f=[],l,g;if(Ext.isArray(e)){for(l=0,g=e.length;l<g;l++){if(n){f=f.concat(w(m+"["+l+"]",e[l],true))}else{f.push({name:m,value:e[l]})}}}else{if(Ext.isObject(e)){for(l in e){if(e.hasOwnProperty(l)){if(n){f=f.concat(w(m+"["+l+"]",e[l],true))}else{f.push({name:m,value:e[l]})}}}}else{f.push({name:m,value:e})}}return f},toQueryString:function(A,f){var z=[],e=[],n,y,m,g,l;for(n in A){if(A.hasOwnProperty(n)){z=z.concat(o.toQueryObjects(n,A[n],f))}}for(y=0,m=z.length;y<m;y++){g=z[y];l=g.value;if(Ext.isEmpty(l)){l=""}else{if(Ext.isDate(l)){l=Ext.Date.toString(l)}}e.push(encodeURIComponent(g.name)+"="+encodeURIComponent(String(l)))}return e.join("&")},fromQueryString:function(R,P){var l=R.replace(s,"").split("&"),J={},N,I,m,g,Q,L,f,e,S,K,M,n,H,O;for(Q=0,L=l.length;Q<L;Q++){f=l[Q];if(f.length>0){I=f.split("=");m=I[0];m=m.replace(u,"%20");m=decodeURIComponent(m);g=I[1];if(g!==undefined){g=g.replace(u,"%20");g=decodeURIComponent(g)}else{g=""}if(!P){if(J.hasOwnProperty(m)){if(!Ext.isArray(J[m])){J[m]=[J[m]]}J[m].push(g)}else{J[m]=g}}else{K=m.match(q);M=m.match(t);m=M[0];n=[];if(K===null){J[m]=g;continue}for(e=0,S=K.length;e<S;e++){H=K[e];H=(H.length===2)?"":H.substring(1,H.length-1);n.push(H)}n.unshift(m);N=J;for(e=0,S=n.length;e<S;e++){H=n[e];if(e===S-1){if(Ext.isArray(N)&&H===""){N.push(g)}else{N[H]=g}}else{if(N[H]===undefined||typeof N[H]==="string"){O=n[e+1];N[H]=(Ext.isNumeric(O)||O==="")?[]:{}}N=N[H]}}}}}return J},each:function(m,f,g){var n=Ext.enumerables,l,e;if(m){g=g||m;for(e in m){if(m.hasOwnProperty(e)){if(f.call(g,e,m[e],m)===false){return}}}if(n){for(l=n.length;l--;){if(m.hasOwnProperty(e=n[l])){if(f.call(g,e,m[e],m)===false){return}}}}}},eachValue:function(m,f,g){var n=Ext.enumerables,l,e;g=g||m;for(e in m){if(m.hasOwnProperty(e)){if(f.call(g,m[e])===false){return}}}if(n){for(l=n.length;l--;){if(m.hasOwnProperty(e=n[l])){if(f.call(g,m[e])===false){return}}}}},merge:function(n){var z=1,y=arguments.length,g=o.merge,e=Ext.clone,A,l,m,f;for(;z<y;z++){A=arguments[z];for(l in A){m=A[l];if(m&&m.constructor===Object){f=n[l];if(f&&f.constructor===Object){g(f,m)}else{n[l]=e(m)}}else{n[l]=m}}}return n},mergeIf:function(w){var g=1,f=arguments.length,m=Ext.clone,n,l,e;for(;g<f;g++){n=arguments[g];for(l in n){if(!(l in w)){e=n[l];if(e&&e.constructor===Object){w[l]=m(e)}else{w[l]=e}}}}return w},getAllKeys:function(g){var f=[],e;for(e in g){f.push(e)}return f},getKey:function(g,e){for(var f in g){if(g.hasOwnProperty(f)&&g[f]===e){return f}}return null},getValues:function(f){var g=[],e;for(e in f){if(f.hasOwnProperty(e)){g.push(f[e])}}return g},getKeys:(typeof Object.keys=="function")?function(e){if(!e){return[]}return Object.keys(e)}:function(g){var f=[],e;for(e in g){if(g.hasOwnProperty(e)){f.push(e)}}return f},getSize:function(g){var f=0,e;for(e in g){if(g.hasOwnProperty(e)){f++}}return f},isEmpty:function(f){for(var e in f){if(f.hasOwnProperty(e)){return false}}return true},equals:(function(){var e=function(f,g){var l;for(l in f){if(f.hasOwnProperty(l)){if(f[l]!==g[l]){return false}}}return true};return function(f,g){if(f===g){return true}if(f&&g){return e(f,g)&&e(g,f)}else{if(!f&&!g){return f===g}else{return false}}}})(),fork:function(e){var l,g,f;if(e&&e.constructor===Object){l=o.chain(e);for(g in e){f=e[g];if(f){if(f.constructor===Object){l[g]=o.fork(f)}else{if(f instanceof Array){l[g]=Ext.Array.clone(f)}}}}}else{l=e}return l},defineProperty:("defineProperty" in Object)?Object.defineProperty:function(f,g,e){if(!Object.prototype.__defineGetter__){return}if(e.get){f.__defineGetter__(g,e.get)}if(e.set){f.__defineSetter__(g,e.set)}},classify:function(l){var m=l,f=[],n={},w=function(){var z=0,v=f.length,A;for(;z<v;z++){A=f[z];this[A]=new n[A]()}},g,e;for(g in l){if(l.hasOwnProperty(g)){e=l[g];if(e&&e.constructor===Object){f.push(g);n[g]=o.classify(e)}}}w.prototype=m;return w}};Ext.merge=Ext.Object.merge;Ext.mergeIf=Ext.Object.mergeIf}());Ext.apply(Ext,{_namedScopes:{"this":{isThis:1},controller:{isController:1},self:{isSelf:1},"self.controller":{isSelf:1,isController:1}},escapeId:(function(){var p=/^[a-zA-Z_][a-zA-Z0-9_\-]*$/i,o=/([\W]{1})/g,q=/^(\d)/g,s=function(e,f){return"\\"+f},n=function(e,f){return"\\00"+f.charCodeAt(0).toString(16)+" "};return function(e){return p.test(e)?e:e.replace(o,s).replace(q,n)}}()),callback:function(w,y,s,t,u,x){if(!w){return}var q=(y in Ext._namedScopes);if(w.charAt){if((!y||q)&&u){y=u.resolveListenerScope(q?y:x)}w=y[w]}else{if(q){y=x||u}else{if(!y){y=u}}}var v;if(w&&Ext.isFunction(w)){y=y||Ext.global;if(t){Ext.defer(w,t,y,s)}else{if(Ext.elevateFunction){v=Ext.elevateFunction(w,y,s)}else{if(s){v=w.apply(y,s)}else{v=w.call(y)}}}}return v},coerce:function(n,o){var p=Ext.typeOf(n),q=Ext.typeOf(o),s=typeof n==="string";if(p!==q){switch(q){case"string":return String(n);case"number":return Number(n);case"boolean":return s&&(!n||n==="false"||n==="0")?false:Boolean(n);case"null":return s&&(!n||n==="null")?null:false;case"undefined":return s&&(!n||n==="undefined")?undefined:false;case"date":return s&&isNaN(n)?Ext.Date.parse(n,Ext.Date.defaultFormat):Date(Number(n))}}return n},copyTo:function(t,q,w,n){if(typeof w==="string"){w=w.split(Ext.propertyNameSplitRe)}for(var v,s=0,u=w?w.length:0;s<u;s++){v=w[s];if(n||q.hasOwnProperty(v)){t[v]=q[v]}}return t},copy:function(t,q,w,n){if(typeof w==="string"){w=w.split(Ext.propertyNameSplitRe)}for(var v,s=0,u=w?w.length:0;s<u;s++){v=w[s];if(q.hasOwnProperty(v)||(n&&v in q)){t[v]=q[v]}}return t},propertyNameSplitRe:/[,;\s]+/,copyToIf:function(t,p,n){if(typeof n==="string"){n=n.split(Ext.propertyNameSplitRe)}for(var s,q=0,u=n?n.length:0;q<u;q++){s=n[q];if(t[s]===undefined){t[s]=p[s]}}return t},copyIf:function(t,p,n){if(typeof n==="string"){n=n.split(Ext.propertyNameSplitRe)}for(var s,q=0,u=n?n.length:0;q<u;q++){s=n[q];if(!(s in t)&&(s in p)){t[s]=p[s]}}return t},extend:(function(){var l=Object.prototype.constructor,g=function(e){var f;for(f in e){if(!e.hasOwnProperty(f)){continue}this[f]=e[f]}};return function(q,s,u){if(Ext.isObject(s)){u=s;s=q;q=u.constructor!==l?u.constructor:function(){s.apply(this,arguments)}}var e=function(){},f,t=s.prototype;e.prototype=t;f=q.prototype=new e();f.constructor=q;q.superclass=t;if(t.constructor===l){t.constructor=s}q.override=function(m){Ext.override(q,m)};f.override=g;f.proto=f;q.override(u);q.extend=function(m){return Ext.extend(q,m)};return q}}()),iterate:function(n,l,m){if(Ext.isEmpty(n)){return}if(m===undefined){m=n}if(Ext.isIterable(n)){Ext.Array.each.call(Ext.Array,n,l,m)}else{Ext.Object.each.call(Ext.Object,n,l,m)}},_resourcePoolRe:/^[<]([^<>@:]*)(?:[@]([^<>@:]+))?[>](.+)$/,resolveResource:function(l){var m=l,n;if(l&&l.charAt(0)==="<"){n=Ext._resourcePoolRe.exec(l);if(n){m=Ext.getResourcePath(n[3],n[1],n[2])}}return m},urlEncode:function(){var l=Ext.Array.from(arguments),g="";if(Ext.isString(l[1])){g=l[1]+"&";l[1]=false}return g+Ext.Object.toQueryString.apply(Ext.Object,l)},urlDecode:function(){return Ext.Object.fromQueryString.apply(Ext.Object,arguments)},getScrollbarSize:function(n){var o=Ext._scrollbarSize;if(n||!o){var p=document.body,m=document.createElement("div");m.style.width=m.style.height="100px";m.style.overflow="scroll";m.style.position="absolute";p.appendChild(m);Ext._scrollbarSize=o={width:m.offsetWidth-m.clientWidth,height:m.offsetHeight-m.clientHeight};p.removeChild(m)}return o},typeOf:(function(){var p=/\S/,n=Object.prototype.toString,m={number:1,string:1,"boolean":1,"undefined":1},o={"[object Array]":"array","[object Date]":"date","[object Boolean]":"boolean","[object Number]":"number","[object RegExp]":"regexp"};return function(g){if(g===null){return"null"}var l=typeof g,e,f;if(m[l]){return l}e=o[f=n.call(g)];if(e){return e}if(l==="function"){return"function"}if(l==="object"){if(g.nodeType!==undefined){if(g.nodeType===3){return p.test(g.nodeValue)?"textnode":"whitespace"}else{return"element"}}return"object"}return f}}()),factory:function(s,o,t,u){var p=Ext.ClassManager,q;if(!s||s.isInstance){if(t&&t!==s){t.destroy()}return s}if(u){if(typeof s==="string"){return p.instantiateByAlias(u+"."+s)}else{if(Ext.isObject(s)&&"type" in s){return p.instantiateByAlias(u+"."+s.type,s)}}}if(s===true){return t||Ext.create(o)}if("xtype" in s){q=p.instantiateByAlias("widget."+s.xtype,s)}else{if("xclass" in s){q=Ext.create(s.xclass,s)}}if(q){if(t){t.destroy()}return q}if(t){return t.setConfig(s)}return Ext.create(o,s)},log:(function(){var f=function(){};f.info=f.warn=f.error=Ext.emptyFn;return f}())});(function(){var s=[""],w=/([^\d\.])/,u=/[^\d]/g,v=/[\-+]/g,x=/\s/g,t=/_/g,y={classic:1,modern:1},q;Ext.Version=q=function(l,p){var g=this,D=g.padModes,e,n,C,o,f,E,m;if(l.isVersion){l=l.version}g.version=m=String(l).toLowerCase().replace(t,".").replace(v,"");e=m.charAt(0);if(e in D){m=m.substring(1);C=D[e]}else{C=p?D[p]:0}g.pad=C;E=m.search(w);g.shortVersion=m;if(E!==-1){g.release=f=m.substr(E,l.length);g.shortVersion=m.substr(0,E);f=q.releaseValueMap[f]||f}g.releaseValue=f||C;g.shortVersion=g.shortVersion.replace(u,"");g.parts=o=m.split(".");for(n=o.length;n--;){o[n]=parseInt(o[n],10)}if(C===Infinity){o.push(C)}g.major=o[0]||C;g.minor=o[1]||C;g.patch=o[2]||C;g.build=o[3]||C;return g};q.prototype={isVersion:true,padModes:{"~":NaN,"^":Infinity},release:"",compareTo:function(l){var g=this,F=g.pad,n=g.parts,e=n.length,G=l.isVersion?l:new q(l),I=G.pad,o=G.parts,p=o.length,f=Math.max(e,p),E,H,m;for(E=0;E<f;E++){H=(E<e)?n[E]:F;m=(E<p)?o[E]:I;if(H<m){return -1}if(H>m){return 1}}H=g.releaseValue;m=G.releaseValue;if(H<m){return -1}if(H>m){return 1}return 0},toString:function(){return this.version},valueOf:function(){return this.version},getMajor:function(){return this.major},getMinor:function(){return this.minor},getPatch:function(){return this.patch},getBuild:function(){return this.build},getRelease:function(){return this.release},getReleaseValue:function(){return this.releaseValue},isGreaterThan:function(e){return this.compareTo(e)>0},isGreaterThanOrEqual:function(e){return this.compareTo(e)>=0},isLessThan:function(e){return this.compareTo(e)<0},isLessThanOrEqual:function(e){return this.compareTo(e)<=0},equals:function(e){return this.compareTo(e)===0},match:function(e){e=String(e);return this.version.substr(0,e.length)===e},toArray:function(){var e=this;return[e.getMajor(),e.getMinor(),e.getPatch(),e.getBuild(),e.getRelease()]},getShortVersion:function(){return this.shortVersion},gt:function(e){return this.compareTo(e)>0},lt:function(e){return this.compareTo(e)<0},gtEq:function(e){return this.compareTo(e)>=0},ltEq:function(e){return this.compareTo(e)<=0}};Ext.apply(q,{aliases:{from:{extjs:"ext",core:"core",touch:"modern"},to:{ext:["extjs"],core:["core"],modern:["touch"]}},releaseValueMap:{dev:-6,alpha:-5,a:-5,beta:-4,b:-4,rc:-3,"#":-2,p:-1,pl:-1},getComponentValue:function(e){return !e?0:(isNaN(e)?this.releaseValueMap[e]||e:parseInt(e,10))},compare:function(e,f){var g=e.isVersion?e:new q(e);return g.compareTo(f)},set:function(e,g,l){var m=q.aliases.to[g],n=l.isVersion?l:new q(l),f;e[g]=n;if(m){for(f=m.length;f-->0;){e[m[f]]=n}}return n}});Ext.apply(Ext,{compatVersions:{},versions:{},lastRegisteredVersion:null,getCompatVersion:function(f){var g=Ext.compatVersions,e;if(!f){e=g.ext||g.touch||g.core}else{e=g[q.aliases.from[f]||f]}return e||Ext.getVersion(f)},setCompatVersion:function(e,f){q.set(Ext.compatVersions,e,f)},setVersion:function(e,f){if(e in y){Ext.toolkit=e}Ext.lastRegisteredVersion=q.set(Ext.versions,e,f);return this},getVersion:function(e){var f=Ext.versions;if(!e){return f.ext||f.touch||f.core}return f[q.aliases.from[e]||e]},checkVersion:function(p,N){var l=Ext.isArray(p),O=q.aliases.from,L=l?p:s,Q=L.length,M=Ext.versions,P=M.ext||M.touch,o,e,m,K,I,g,J,n,f;if(!l){s[0]=p}for(o=0;o<Q;++o){if(!Ext.isString(J=L[o])){m=Ext.checkVersion(J.and||J.or,!J.or);if(J.not){m=!m}}else{if(J.indexOf(" ")>=0){J=J.replace(x,"")}e=J.indexOf("@");if(e<0){n=J;f=P}else{g=J.substring(0,e);if(!(f=M[O[g]||g])){if(N){return false}continue}n=J.substring(e+1)}e=n.indexOf("-");if(e<0){if(n.charAt(e=n.length-1)==="+"){K=n.substring(0,e);I=null}else{K=I=n}}else{if(e>0){K=n.substring(0,e);I=n.substring(e+1)}else{K=null;I=n.substring(e+1)}}m=true;if(K){K=new q(K,"~");m=K.ltEq(f)}if(m&&I){I=new q(I,"~");m=I.gtEq(f)}}if(m){if(!N){return true}}else{if(N){return false}}}return !!N},deprecate:function(l,f,e,g){if(q.compare(Ext.getVersion(l),f)<1){e.call(g)}}})}());(function(o){var n=(o&&o.packages)||{},p=o&&o.compatibility,q,s;for(q in n){s=n[q];Ext.setVersion(q,s.version)}if(p){if(Ext.isString(p)){Ext.setCompatVersion("core",p)}else{for(q in p){Ext.setCompatVersion(q,p[q])}}}if(!n.ext&&!n.touch){Ext.setVersion("ext","6.2.0.981");Ext.setVersion("core","6.2.0.981")}})(Ext.manifest);Ext.Config=function(m){var l=this,n=m.charAt(0).toUpperCase()+m.substr(1);l.name=m;l.names={internal:"_"+m,initializing:"is"+n+"Initializing",apply:"apply"+n,update:"update"+n,get:"get"+n,set:"set"+n,initGet:"initGet"+n,changeEvent:m.toLowerCase()+"change"};l.root=l};Ext.Config.map={};Ext.Config.get=function(m){var l=Ext.Config.map,n=l[m]||(l[m]=new Ext.Config(m));return n};Ext.Config.prototype={self:Ext.Config,isConfig:true,getGetter:function(){return this.getter||(this.root.getter=this.makeGetter())},getInitGetter:function(){return this.initGetter||(this.root.initGetter=this.makeInitGetter())},getSetter:function(){return this.setter||(this.root.setter=this.makeSetter())},getEventedSetter:function(){return this.eventedSetter||(this.root.eventedSetter=this.makeEventedSetter())},getInternalName:function(f){return f.$configPrefixed?this.names.internal:this.name},mergeNew:function(u,s,o,p){var t,q;if(!s){t=u}else{if(!u){t=s}else{t=Ext.Object.chain(s);for(q in u){if(!p||!(q in t)){t[q]=u[q]}}}}return t},mergeSets:function(o,q,t){var s=q?Ext.Object.chain(q):{},p,u;if(o instanceof Array){for(p=o.length;p--;){u=o[p];if(!t||!(u in s)){s[u]=true}}}else{if(o){if(o.constructor===Object){for(p in o){u=o[p];if(!t||!(p in s)){s[p]=u}}}else{if(!t||!(o in s)){s[o]=true}}}}return s},makeGetter:function(){var l=this.name,g=this.names.internal;return function(){var e=this.$configPrefixed?g:l;return this[e]}},makeInitGetter:function(){var s=this.name,n=this.names,o=n.set,q=n.get,p=n.initializing;return function(){var e=this;e[p]=true;delete e[q];e[o](e.config[s]);delete e[p];return e[q].apply(e,arguments)}},makeSetter:function(){var u=this.name,p=this.names,s=p.internal,q=p.get,t=p.apply,v=p.update,w;w=function(e){var f=this,g=f.$configPrefixed?s:u,l=f[g];delete f[q];if(!f[t]||(e=f[t](e,l))!==undefined){if(e!==(l=f[g])){f[g]=e;if(f[v]){f[v](e,l)}}}return f};w.$isDefault=true;return w},makeEventedSetter:function(){var z=this.name,u=this.names,s=u.internal,A=u.get,t=u.apply,x=u.update,v=u.changeEvent,w=function(f,e,l,g){f[g]=e;if(f[x]){f[x](e,l)}},y;y=function(e){var f=this,g=f.$configPrefixed?s:z,l=f[g];delete f[A];if(!f[t]||(e=f[t](e,l))!==undefined){if(e!==(l=f[g])){if(f.isConfiguring){f[g]=e;if(f[x]){f[x](e,l)}}else{f.fireEventedAction(v,[f,e,l],w,f,[f,e,l,g])}}}return f};y.$isDefault=true;return y}};(function(){var m=Ext.Config,l=m.map,n=Ext.Object;Ext.Configurator=function(f){var p=this,e=f.prototype,g=f.superclass?f.superclass.self.$config:null;p.cls=f;p.superCfg=g;if(g){p.configs=n.chain(g.configs);p.cachedConfigs=n.chain(g.cachedConfigs);p.initMap=n.chain(g.initMap);p.values=n.chain(g.values);p.needsFork=g.needsFork}else{p.configs={};p.cachedConfigs={};p.initMap={};p.values={}}e.config=e.defaultConfig=p.values;f.$config=p};Ext.Configurator.prototype={self:Ext.Configurator,needsFork:false,initList:null,add:function(O,W){var N=this,S=N.cls,K=N.configs,L=N.cachedConfigs,s=N.initMap,e=S.prototype,J=W&&W.$config.configs,V=N.values,M,I,P,U,T,Q,H,f,g,R;for(H in O){R=O[H];M=R&&R.constructor===Object;I=M&&"$value" in R?R:null;P=false;if(I){P=!!I.cached;R=I.$value;M=R&&R.constructor===Object}U=I&&I.merge;T=K[H];if(T){if(W){U=T.merge;if(!U){continue}I=null}else{U=U||T.merge}Q=V[H];if(U){R=U.call(T,R,Q,S,W)}else{if(M){if(Q&&Q.constructor===Object){R=n.merge({},Q,R)}}}}else{if(J){T=J[H];I=null}else{T=m.get(H)}K[H]=T;if(T.cached||P){L[H]=true}f=T.names;if(!e[g=f.get]){e[g]=T.getter||T.getGetter()}if(!e[g=f.set]){e[g]=(I&&I.evented)?(T.eventedSetter||T.getEventedSetter()):(T.setter||T.getSetter())}}if(I){if(T.owner!==S){K[H]=T=Ext.Object.chain(T);T.owner=S}Ext.apply(T,I);delete T.$value}if(!N.needsFork&&R&&(R.constructor===Object||R instanceof Array)){N.needsFork=true}if(R!==null){s[H]=true}else{if(e.$configPrefixed){e[K[H].names.internal]=null}else{e[K[H].name]=null}if(H in s){s[H]=false}}V[H]=R}},configure:function(O,R){var K=this,S=K.configs,P=K.initMap,L=K.initListMap,T=K.initList,J=K.cls.prototype,ab=K.values,f=0,X=!T,aa,Z,Y,U,V,W,N,g,e,M,Q,ac;ab=K.needsFork?n.fork(ab):n.chain(ab);O.isConfiguring=true;if(X){K.initList=T=[];K.initListMap=L={};O.isFirstInstance=true;for(g in P){Z=S[g];M=Z.cached;if(P[g]){N=Z.names;e=ab[g];if(!J[N.set].$isDefault||J[N.apply]||J[N.update]||typeof e==="object"){if(M){(aa||(aa=[])).push(Z)}else{T.push(Z);L[g]=true}O[N.get]=Z.initGetter||Z.getInitGetter()}else{J[Z.getInternalName(J)]=e}}else{if(M){J[Z.getInternalName(J)]=undefined}}}}W=aa&&aa.length;if(W){for(U=0;U<W;++U){V=aa[U].getInternalName(J);O[V]=null}for(U=0;U<W;++U){N=(Z=aa[U]).names;Y=N.get;if(O.hasOwnProperty(Y)){O[N.set](ab[Z.name]);delete O[Y]}}for(U=0;U<W;++U){V=aa[U].getInternalName(J);J[V]=O[V];delete O[V]}}if(R&&R.platformConfig){R=K.resolvePlatformConfig(O,R)}if(X){if(O.afterCachedConfig&&!O.afterCachedConfig.$nullFn){O.afterCachedConfig(R)}}O.config=ab;for(U=0,W=T.length;U<W;++U){Z=T[U];O[Z.names.get]=Z.initGetter||Z.getInitGetter()}if(O.transformInstanceConfig){R=O.transformInstanceConfig(R)}if(R){for(g in R){e=R[g];Z=S[g];if(!Z){O[g]=e}else{if(!Z.lazy){++f}if(!L[g]){O[Z.names.get]=Z.initGetter||Z.getInitGetter()}if(Z.merge){e=Z.merge(e,ab[g],O)}else{if(e&&e.constructor===Object){Q=ab[g];if(Q&&Q.constructor===Object){e=n.merge(ab[g],e)}else{e=Ext.clone(e,false)}}}}ab[g]=e}}if(O.beforeInitConfig&&!O.beforeInitConfig.$nullFn){if(O.beforeInitConfig(R)===false){return}}if(R){for(g in R){if(!f){break}Z=S[g];if(Z&&!Z.lazy){--f;N=Z.names;Y=N.get;if(O.hasOwnProperty(Y)){O[N.set](ab[g]);delete O[N.get]}}}}for(U=0,W=T.length;U<W;++U){Z=T[U];N=Z.names;Y=N.get;if(!Z.lazy&&O.hasOwnProperty(Y)){O[N.set](ab[Z.name]);delete O[Y]}}delete O.isConfiguring},getCurrentConfig:function(e){var f=e.defaultConfig,g={},p;for(p in f){g[p]=e[l[p].names.get]()}return g},merge:function(f,v,x){var g=this.configs,y,u,w,e;for(y in x){u=x[y];e=g[y];if(e){if(e.merge){u=e.merge(u,v[y],f)}else{if(u&&u.constructor===Object){w=v[y];if(w&&w.constructor===Object){u=Ext.Object.merge(w,u)}else{u=Ext.clone(u,false)}}}}v[y]=u}return v},reconfigure:function(F,K,B){var f=F.config,e=[],G=F.$configStrict&&!(B&&B.strict===false),J=this.configs,C=B&&B.defaults,L,H,g,M,D,I,E;for(D in K){if(C&&F.hasOwnProperty(D)){continue}f[D]=K[D];L=J[D];if(L){F[L.names.get]=L.initGetter||L.getInitGetter()}else{E=F.self.prototype[D];if(G){if((typeof E==="function")&&!E.$nullFn){continue}}}e.push(D)}for(g=0,M=e.length;g<M;g++){D=e[g];L=J[D];if(L){I=L.names;H=I.get;if(F.hasOwnProperty(H)){F[I.set](K[D]);delete F[H]}}else{L=l[D]||Ext.Config.get(D);I=L.names;if(F[I.set]){F[I.set](K[D])}else{F[D]=K[D]}}}},resolvePlatformConfig:function(f,g){var v=g&&g.platformConfig,e=g,x,w,u;if(v){w=Ext.getPlatformConfigKeys(v);u=w.length;if(u){e=Ext.merge({},e);for(x=0,u=w.length;x<u;++x){this.merge(f,e,v[w[x]])}}}return e}}}());Ext.Base=(function(C){var D=[],I,G=[],F=function(l,n){var m=this,f,g,e;if(l){g=Ext.Config.map[l];e=g.names.get;if(n&&m.hasOwnProperty(e)){f=m.config[l]}else{f=m[e]()}}else{f=m.getCurrentConfig()}return f},y=function(e){return function(){return this[e].apply(this,arguments)}},E=Ext.Version,w=/^\d/,H={},A={},x=function(){},B=x.prototype,z;Ext.Reaper=z={delay:100,queue:[],timer:null,add:function(e){if(!z.timer){z.timer=Ext.defer(z.tick,z.delay)}z.queue.push(e)},flush:function(){if(z.timer){clearTimeout(z.timer);z.timer=null}var f=z.queue,g=f.length,e,l;z.queue=[];for(e=0;e<g;++e){l=f[e];if(l&&l.$reap){l.$reap()}}},tick:function(){z.timer=null;z.flush()}};Ext.apply(x,{$className:"Ext.Base",$isClass:true,create:function(){return Ext.create.apply(Ext,[this].concat(Array.prototype.slice.call(arguments,0)))},addDeprecations:function(Q){var g=this,q=[],m=Ext.getCompatVersion(Q.name),l,u,R,s,f,O,o,P,p,e,v,t,S,n;for(u in Q){if(w.test(u)){n=new Ext.Version(u);n.deprecations=Q[u];q.push(n)}}q.sort(E.compare);for(R=q.length;R--;){l=(n=q[R]).deprecations;f=g.prototype;S=l.statics;O=m&&m.lt(n);if(!O){break}while(l){p=l.methods;if(p){for(e in p){t=p[e];P=null;if(!t){}else{if(Ext.isString(t)){if(O){P=y(t)}}else{s="";if(t.message||t.fn){t=t.fn}o=f.hasOwnProperty(e)&&f[e];if(O&&t){t.$owner=g;t.$name=e;if(o){t.$previous=o}P=t}}}if(P){f[e]=P}}}l=S;S=null;f=g}}},extend:function(l){var f=this,g=l.prototype,n,e,m;n=f.prototype=Ext.Object.chain(g);n.self=f;f.superclass=n.superclass=g;if(!l.$isClass){for(e in B){if(e in n){n[e]=B[e]}}}m=g.$inheritableStatics;if(m){for(e in m){if(!f.hasOwnProperty(e)){f[e]=l[e]}}}if(l.$onExtended){f.$onExtended=l.$onExtended.slice()}f.getConfigurator()},$onExtended:[],triggerExtended:function(){var l=this.$onExtended,e=l.length,f,g;if(e>0){for(f=0;f<e;f++){g=l[f];g.fn.apply(g.scope||this,arguments)}}},onExtended:function(e,f){this.$onExtended.push({fn:e,scope:f});return this},addStatics:function(e){this.addMembers(e,true);return this},addInheritableStatics:function(g){var m=this,o=m.prototype,f=m.$inheritableStatics,e,l,n;if(!f){f=Ext.apply({},o.$inheritableStatics);m.$inheritableStatics=o.$inheritableStatics=f}for(e in g){if(g.hasOwnProperty(e)){l=g[e];n=m[e];if(typeof n==="function"&&!n.$isClass&&!n.$nullFn){l.$previous=n}m[e]=l;f[e]=true}}return m},addMembers:function(l,n,s){var q=this,O=Ext.Function.clone,v=n?q:q.prototype,g=!n&&v.defaultConfig,p=Ext.enumerables,N=l.privates,M,e,u,f,t,o,m;if(N){delete l.privates;if(!n){m=N.statics;delete N.statics}q.addMembers(N,n,o);if(m){q.addMembers(m,true,o)}}for(t in l){if(l.hasOwnProperty(t)){f=l[t];if(typeof f==="function"&&!f.$isClass&&!f.$nullFn){if(f.$owner){f=O(f)}if(v.hasOwnProperty(t)){f.$previous=v[t]}f.$owner=q;f.$name=t}else{if(g&&(t in g)&&!v.config.hasOwnProperty(t)){(M||(M={}))[t]=f;continue}}v[t]=f}}if(M){q.addConfig(M)}if(p){for(e=0,u=p.length;e<u;++e){if(l.hasOwnProperty(t=p[e])){f=l[t];if(f&&!f.$nullFn){if(f.$owner){f=O(f)}f.$owner=q;f.$name=t;if(v.hasOwnProperty(t)){f.$previous=v[t]}}v[t]=f}}}return this},addMember:function(f,e){H[f]=e;this.addMembers(H);delete H[f];return this},borrow:function(m,g){var o=m.prototype,f={},l,n,e;g=Ext.Array.from(g);for(l=0,n=g.length;l<n;l++){e=g[l];f[e]=o[e]}return this.addMembers(f)},override:function(f){var m=this,l=f.statics,o=f.inheritableStatics,n=f.config,g=f.mixins,e=f.cachedConfig;if(l||o||n){f=Ext.apply({},f)}if(l){m.addMembers(l,true);delete f.statics}if(o){m.addInheritableStatics(o);delete f.inheritableStatics}if(f.platformConfig){m.addPlatformConfig(f)}if(n){m.addConfig(n);delete f.config}if(e){m.addCachedConfig(e);delete f.cachedConfig}delete f.mixins;m.addMembers(f);if(g){m.mixin(g)}return m},addPlatformConfig:function(g){var u=this,f=g.platformConfig,n=g.config,t,e,K,m,p,o,s,q,l,v;delete g.platformConfig;m=u.getConfigurator();e=m.configs;o=Ext.getPlatformConfigKeys(f);for(l=0,v=o.length;l<v;++l){K=f[o[l]];p=t=null;for(s in K){q=K[s];if(n&&s in n){(t||(t={}))[s]=q;(p||(p={}))[s]=n[s];delete n[s]}else{if(s in e){(t||(t={}))[s]=q}else{g[s]=q}}}if(p){m.add(p)}if(t){m.add(t)}}},callParent:function(f){var e;return(e=this.callParent.caller)&&(e.$previous||((e=e.$owner?e:e.caller)&&e.$owner.superclass.self[e.$name])).apply(this,f||D)},callSuper:function(f){var e;return(e=this.callSuper.caller)&&((e=e.$owner?e:e.caller)&&e.$owner.superclass.self[e.$name]).apply(this,f||D)},mixin:function(q,n){var e=this,p,u,s,v,m,f,l,q,t,g,o;if(typeof q!=="string"){g=q;if(g instanceof Array){for(m=0,f=g.length;m<f;m++){p=g[m];e.mixin(p.prototype.mixinId||p.$className,p)}}else{for(l in g){e.mixin(l,g[l])}}return}p=n.prototype;u=e.prototype;if(p.onClassMixedIn){p.onClassMixedIn.call(n,e)}if(!u.hasOwnProperty("mixins")){if("mixins" in u){u.mixins=Ext.Object.chain(u.mixins)}else{u.mixins={}}}for(s in p){t=p[s];if(s==="mixins"){Ext.applyIf(u.mixins,t)}else{if(!(s==="mixinId"||s==="config"||s==="$inheritableStatics")&&(u[s]===undefined)){u[s]=t}}}v=p.$inheritableStatics;if(v){o={};for(q in v){if(!e.hasOwnProperty(q)){o[q]=n[q]}}e.addInheritableStatics(o)}if("config" in p){e.addConfig(p.config,n)}u.mixins[q]=p;if(p.afterClassMixedIn){p.afterClassMixedIn.call(n,e)}return e},addConfig:function(e,g){var f=this.$config||this.getConfigurator();f.add(e,g)},addCachedConfig:function(f,l){var g={},e;for(e in f){g[e]={cached:true,$value:f[e]}}this.addConfig(g,l)},getConfigurator:function(){return this.$config||new Ext.Configurator(this)},getName:function(){return Ext.getClassName(this)},createAlias:C(function(e,f){A[e]=function(){return this[f].apply(this,arguments)};this.override(A);delete A[e]})});for(I in x){if(x.hasOwnProperty(I)){G.push(I)}}x.$staticMembers=G;x.getConfigurator();x.addMembers({$className:"Ext.Base",isInstance:true,$configPrefixed:true,$configStrict:true,isConfiguring:false,isFirstInstance:false,destroyed:false,clearPropertiesOnDestroy:true,clearPrototypeOnDestroy:false,statics:function(){var e=this.statics.caller,f=this.self;if(!e){return f}return e.$owner},callParent:function(e){var g,f=(g=this.callParent.caller)&&(g.$previous||((g=g.$owner?g:g.caller)&&g.$owner.superclass[g.$name]));return f.apply(this,e||D)},callSuper:function(e){var g,f=(g=this.callSuper.caller)&&((g=g.$owner?g:g.caller)&&g.$owner.superclass[g.$name]);return f.apply(this,e||D)},self:x,constructor:function(){return this},initConfig:function(g){var e=this,f=e.self.getConfigurator();e.initConfig=Ext.emptyFn;e.initialConfig=g||{};f.configure(e,g);return e},beforeInitConfig:Ext.emptyFn,getConfig:F,setConfig:function(m,f,e){var l=this,g;if(m){if(typeof m==="string"){g={};g[m]=f}else{g=m}l.self.getConfigurator().reconfigure(l,g,e)}return l},getCurrentConfig:function(){var e=this.self.getConfigurator();return e.getCurrentConfig(this)},hasConfig:function(e){return e in this.defaultConfig},getInitialConfig:function(e){var f=this.config;if(!e){return f}return f[e]},$links:null,link:function(e,g){var l=this,f=l.$links||(l.$links={});f[e]=true;l[e]=g;return g},unlink:function(n){var l=this,g,m,f,e;for(g=0,m=n.length;g<m;g++){f=n[g];e=l[f];if(e){if(e.isInstance&&!e.destroyed){e.destroy()}else{if(e.parentNode&&"nodeType" in e){e.parentNode.removeChild(e)}}}l[f]=null}return l},$reap:function(){var m=this,g=m.$noClearOnDestroy,f,l,e;for(f in m){if((!g||!g[f])&&m.hasOwnProperty(f)){l=m[f];e=typeof l;if(e==="object"||(e==="function"&&!l.$noClearOnDestroy)){m[f]=null}}}},destroy:function(){var g=this,e=g.$links,f=g.clearPropertiesOnDestroy;if(e){g.$links=null;g.unlink(Ext.Object.getKeys(e))}g.destroy=Ext.emptyFn;g.isDestroyed=g.destroyed=true;if(f===true){g.$reap()}else{if(f){z.add(g)}}}});B.callOverridden=B.callParent;return x}(Ext.Function.flexSetter));(function(g,l){(Ext.util||(Ext.util={})).Cache=g=function(n){var e=this,f;if(n){Ext.apply(e,n)}e.head=f={key:null,value:null};e.map={};f.next=f.prev=f};g.prototype=l={maxSize:100,count:0,clear:function(){var e=this,n=e.head,f=n.next;n.next=n.prev=n;if(!e.evict.$nullFn){for(;f!==n;f=f.next){e.evict(f.key,f.value)}}e.count=0},each:function(e,f){f=f||this;for(var o=this.head,p=o.next;p!==o;p=p.next){if(e.call(f,p.key,p.value)){break}}},get:function(f){var s=this,p=s.head,q=s.map,e=q[f];if(e){if(e.prev!==p){s.unlinkEntry(e);s.linkEntry(e)}}else{q[f]=e={key:f,value:s.miss.apply(s,arguments)};s.linkEntry(e);++s.count;while(s.count>s.maxSize){s.unlinkEntry(p.prev,true);--s.count}}return e.value},evict:Ext.emptyFn,linkEntry:function(f){var n=this.head,e=n.next;f.next=e;f.prev=n;n.next=f;e.prev=f},unlinkEntry:function(e,p){var o=e.next,f=e.prev;f.next=o;o.prev=f;if(p){this.evict(e.key,e.value)}}};l.destroy=l.clear}());(function(){var o,p=Ext.Base,n=p.$staticMembers,q=function(e,f){return(e.length-f.length)||((e<f)?-1:((e>f)?1:0))};function s(e){function f(){return this.constructor.apply(this,arguments)||null}return f}Ext.Class=o=function(f,e,g){if(typeof f!="function"){g=e;e=f;f=null}if(!e){e={}}f=o.create(f,e);o.process(f,e,g);return f};Ext.apply(o,{makeCtor:s,onBeforeCreated:function(f,e,g){f.addMembers(e);g.onCreated.call(f,f)},create:function(l,e){var f=n.length,g;if(!l){l=s()}while(f--){g=n[f];l[g]=p[g]}return l},process:function(C,I,g){var l=I.preprocessors||o.defaultPreprocessors,F=this.preprocessors,m={onBeforeCreated:this.onBeforeCreated},D=[],f,J,K,E,e,G,H;delete I.preprocessors;C._classHooks=m;for(K=0,E=l.length;K<E;K++){f=l[K];if(typeof f=="string"){f=F[f];J=f.properties;if(J===true){D.push(f.fn)}else{if(J){for(e=0,G=J.length;e<G;e++){H=J[e];if(I.hasOwnProperty(H)){D.push(f.fn);break}}}}}else{D.push(f)}}m.onCreated=g?g:Ext.emptyFn;m.preprocessors=D;this.doProcess(C,I,m)},doProcess:function(v,f,w){var g=this,e=w.preprocessors,m=e.shift(),l=g.doProcess;for(;m;m=e.shift()){if(m.call(g,v,f,w,l)===false){return}}w.onBeforeCreated.apply(g,arguments)},preprocessors:{},registerPreprocessor:function(l,e,g,m,f){if(!m){m="last"}if(!g){g=[l]}this.preprocessors[l]={name:l,properties:g||false,fn:e};this.setDefaultPreprocessorPosition(l,m,f);return this},getPreprocessor:function(e){return this.preprocessors[e]},getPreprocessors:function(){return this.preprocessors},defaultPreprocessors:[],getDefaultPreprocessors:function(){return this.defaultPreprocessors},setDefaultPreprocessors:function(e){this.defaultPreprocessors=Ext.Array.from(e);return this},setDefaultPreprocessorPosition:function(g,e,f){var m=this.defaultPreprocessors,l;if(typeof e=="string"){if(e==="first"){m.unshift(g);return this}else{if(e==="last"){m.push(g);return this}}e=(e==="after")?1:-1}l=Ext.Array.indexOf(m,f);if(l!==-1){Ext.Array.splice(m,Math.max(0,l+e),0,g)}return this}});o.registerPreprocessor("extend",function(g,e,m){var A=Ext.Base,z=A.prototype,y=e.extend,l,x,f;delete e.extend;if(y&&y!==Object){l=y}else{l=A}x=l.prototype;if(!l.$isClass){for(f in z){if(!x[f]){x[f]=z[f]}}}g.extend(l);g.triggerExtended.apply(g,arguments);if(e.onClassExtended){g.onExtended(e.onClassExtended,g);delete e.onClassExtended}},true);o.registerPreprocessor("privates",function(m,f){var g=f.privates,e=g.statics,l=g.privacy||true;delete f.privates;delete g.statics;m.addMembers(g,false,l);if(e){m.addMembers(e,true,l)}});o.registerPreprocessor("statics",function(f,e){f.addStatics(e.statics);delete e.statics});o.registerPreprocessor("inheritableStatics",function(f,e){f.addInheritableStatics(e.inheritableStatics);delete e.inheritableStatics});Ext.createRuleFn=function(e){return new Function("$c","with($c) { try { return ("+e+"); } catch(e) { return false;}}")};Ext.expressionCache=new Ext.util.Cache({miss:Ext.createRuleFn});Ext.ruleKeySortFn=q;Ext.getPlatformConfigKeys=function(f){var g=[],l,e;for(l in f){e=Ext.expressionCache.get(l);if(e(Ext.platformTags)){g.push(l)}}g.sort(q);return g};o.registerPreprocessor("platformConfig",function(f,e,g){f.addPlatformConfig(e)});o.registerPreprocessor("config",function(f,e){if(e.hasOwnProperty("$configPrefixed")){f.prototype.$configPrefixed=e.$configPrefixed}f.addConfig(e.config);delete e.config});o.registerPreprocessor("cachedConfig",function(f,e){if(e.hasOwnProperty("$configPrefixed")){f.prototype.$configPrefixed=e.$configPrefixed}f.addCachedConfig(e.cachedConfig);delete e.cachedConfig});o.registerPreprocessor("mixins",function(f,e,m){var g=e.mixins,l=m.onCreated;delete e.mixins;m.onCreated=function(){m.onCreated=l;f.mixin(g);return m.onCreated.apply(this,arguments)}});Ext.extend=function(f,e,g){if(arguments.length===2&&Ext.isObject(e)){g=e;e=f;f=null}var l;if(!e){throw new Error("[Ext.extend] Attempting to extend from a class which has not been loaded on the page.")}g.extend=e;g.preprocessors=["extend","statics","inheritableStatics","mixins","platformConfig","config"];if(f){l=new o(f,g);l.prototype.constructor=f}else{l=new o(g)}l.prototype.override=function(m){for(var u in m){if(m.hasOwnProperty(u)){this[u]=m[u]}}};return l}}());Ext.Inventory=function(){var f=this;f.names=[];f.paths={};f.alternateToName={};f.aliasToName={};f.nameToAliases={};f.nameToAlternates={};f.nameToPrefix={}};Ext.Inventory.prototype={_array1:[0],prefixes:null,dotRe:/\./g,wildcardRe:/\*/g,addAlias:function(m,n,l){return this.addMapping(m,n,this.aliasToName,this.nameToAliases,l)},addAlternate:function(l,g){return this.addMapping(l,g,this.alternateToName,this.nameToAlternates)},addMapping:function(K,C,B,H,A){var F=K.$className||K,y=F,x=this._array1,I,D,G,z,E,J;if(Ext.isString(F)){y={};y[F]=C}for(G in y){D=y[G];if(Ext.isString(D)){x[0]=D;D=x}E=D.length;J=H[G]||(H[G]=[]);for(z=0;z<E;++z){if(!(I=D[z])){continue}if(B[I]!==G){B[I]=G;J.push(I)}}}},getAliasesByName:function(f){return this.nameToAliases[f]||null},getAlternatesByName:function(f){return this.nameToAlternates[f]||null},getNameByAlias:function(f){return this.aliasToName[f]||""},getNameByAlternate:function(f){return this.alternateToName[f]||""},getNamesByExpression:function(I,W,O){var M=this,n=M.aliasToName,G=M.alternateToName,V=M.nameToAliases,T=M.nameToAlternates,N=O?W:{},J=[],P=Ext.isString(I)?[I]:I,Q=P.length,S=M.wildcardRe,U,F,E,L,H,K,R;for(F=0;F<Q;++F){if((U=P[F]).indexOf("*")<0){if(!(K=n[U])){if(!(K=G[U])){K=U}}if(!(K in N)&&!(W&&(K in W))){N[K]=1;J.push(K)}}else{R=new RegExp("^"+U.replace(S,"(.*?)")+"$");for(K in V){if(!(K in N)&&!(W&&(K in W))){if(!(L=R.test(K))){H=(E=V[K]).length;while(!L&&H-->0){L=R.test(E[H])}E=T[K];if(E&&!L){H=E.length;while(!L&&H-->0){L=R.test(E[H])}}}if(L){N[K]=1;J.push(K)}}}}}return J},getPath:function(q){var p=this,n=p.paths,s="",o;if(q in n){s=n[q]}else{o=p.nameToPrefix[q]||(p.nameToPrefix[q]=p.getPrefix(q));if(o){q=q.substring(o.length+1);s=n[o];if(s){s+="/"}}s+=q.replace(p.dotRe,"/")+".js"}return s},getPrefix:function(u){if(u in this.paths){return u}else{if(u in this.nameToPrefix){return this.nameToPrefix[u]}}var w=this.getPrefixes(),z=u.length,t,y,A,v,x,s;while(z-->0){t=w[z];if(t){y=u.charAt(z);if(y!=="."){continue}A=u.substring(0,z);for(x=0,s=t.length;x<s;x++){v=t[x];if(v===u.substring(0,z)){return v}}}}return""},getPrefixes:function(){var q=this,y=q.prefixes,w,t,x,u,s,v;if(!y){w=q.names.slice(0);q.prefixes=y=[];for(s=0,v=w.length;s<v;s++){t=w[s];x=t.length;u=y[x]||(y[x]=[]);u.push(t)}}return y},removeName:function(B){var x=this,u=x.aliasToName,C=x.alternateToName,t=x.nameToAliases,y=x.nameToAlternates,A=t[B],w=y[B],z,v;delete t[B];delete y[B];delete x.nameToPrefix[B];if(A){for(z=A.length;z--;){if(B===(v=A[z])){delete u[v]}}}if(w){for(z=w.length;z--;){if(B===(v=w[z])){delete C[v]}}}},resolveName:function(n){var m=this,l;if(!(n in m.nameToAliases)){if(!(l=m.aliasToName[n])){l=m.alternateToName[n]}}return l||n},select:function(o,q){var p=this,u={},s={excludes:u,exclude:function(){p.getNamesByExpression(arguments,u,true);return this}},t;for(t in o){s[t]=p.selectMethod(u,o[t],q||o)}return s},selectMethod:function(m,o,p){var n=this;return function(e){var f=Ext.Array.slice(arguments,1);f.unshift(n.getNamesByExpression(e,m));return o.apply(p,f)}},setPath:Ext.Function.flexSetter(function(n,l){var m=this;m.paths[n]=l;m.names.push(n);m.prefixes=null;m.nameToPrefix={};return m})};Ext.ClassManager=(function(D,I,M,Q,F){var T=Ext.Class.makeCtor,O=[],N={Ext:{name:"Ext",value:Ext}},S=Ext.apply(new Ext.Inventory(),{classes:{},classState:{},existCache:{},instantiators:[],isCreated:function(e){if(S.classes[e]||S.existCache[e]){return true}if(!S.lookupName(e,false)){return false}S.triggerCreated(e);return true},createdListeners:[],nameCreatedListeners:{},existsListeners:[],nameExistsListeners:{},overrideMap:{},triggerCreated:function(f,e){S.existCache[f]=e||1;S.classState[f]+=40;S.notify(f,S.createdListeners,S.nameCreatedListeners)},onCreated:function(e,f,g){S.addListener(e,f,g,S.createdListeners,S.nameCreatedListeners)},notify:function(m,g,t){var s=S.getAlternatesByName(m),l=[m],p,n,q,o,e,f;for(p=0,n=g.length;p<n;p++){e=g[p];e.fn.call(e.scope,m)}while(l){for(p=0,n=l.length;p<n;p++){f=l[p];g=t[f];if(g){for(q=0,o=g.length;q<o;q++){e=g[q];e.fn.call(e.scope,f)}delete t[f]}}l=s;s=null}},addListener:function(f,g,l,m,n){if(Ext.isArray(l)){f=Ext.Function.createBarrier(l.length,f,g);for(o=0;o<l.length;o++){this.addListener(f,null,l[o],m,n)}return}var o,e={fn:f,scope:g};if(l){if(this.isCreated(l)){f.call(g,l);return}if(!n[l]){n[l]=[]}n[l].push(e)}else{m.push(e)}},$namespaceCache:N,addRootNamespaces:function(e){for(var f in e){N[f]={name:f,value:e[f]}}},clearNamespaceCache:function(){O.length=0;for(var e in N){if(!N[e].value){delete N[e]}}},getNamespaceEntry:function(f){if(typeof f!=="string"){return f}var e=N[f],g;if(!e){g=f.lastIndexOf(".");if(g<0){e={name:f}}else{e={name:f.substring(g+1),parent:S.getNamespaceEntry(f.substring(0,g))}}N[f]=e}return e},lookupName:function(l,f){var g=S.getNamespaceEntry(l),m=Ext.global,o=0,e,n;for(e=g;e;e=e.parent){O[o++]=e}while(m&&o-->0){e=O[o];n=m;m=e.value||m[e.name];if(!m&&f){n[e.name]=m={}}}return m},setNamespace:function(g,e){var f=S.getNamespaceEntry(g),l=Ext.global;if(f.parent){l=S.lookupName(f.parent,true)}l[f.name]=e;return e},setXType:function(p,e){var n=p.$className,f=n?p:S.get(n=p),m=f.prototype,l=m.xtypes,o=m.xtypesChain,g=m.xtypesMap;if(!m.hasOwnProperty("xtypes")){m.xtypes=l=[];m.xtypesChain=o=o?o.slice(0):[];m.xtypesMap=g=Ext.apply({},g)}S.addAlias(n,"widget."+e,true);l.push(e);o.push(e);g[e]=true},set:function(g,e){var f=S.getName(e);S.classes[g]=S.setNamespace(g,e);if(f&&f!==g){S.addAlternate(f,g)}return S},get:function(e){return S.classes[e]||S.lookupName(e,false)},addNameAliasMappings:function(e){S.addAlias(e)},addNameAlternateMappings:function(e){S.addAlternate(e)},getByAlias:function(e){return S.get(S.getNameByAlias(e))},getByConfig:function(g,f){var e=g.xclass,l;if(e){l=e}else{l=g.xtype;if(l){f="widget."}else{l=g.type}l=S.getNameByAlias(f+l)}return S.get(l)},getName:function(e){return e&&e.$className||""},getClass:function(e){return e&&e.self||null},create:function(g,e,l){var f=T(g);if(typeof e==="function"){e=e(f)}e.$className=g;return new D(f,e,function(){var w=e.postprocessors||S.defaultPostprocessors,o=S.postprocessors,n=[],p,u,q,v,s,t,m;delete e.postprocessors;for(u=0,q=w.length;u<q;u++){p=w[u];if(typeof p==="string"){p=o[p];t=p.properties;if(t===true){n.push(p.fn)}else{if(t){for(v=0,s=t.length;v<s;v++){m=t[v];if(e.hasOwnProperty(m)){n.push(p.fn);break}}}}}else{n.push(p)}}e.postprocessors=n;e.createdFn=l;S.processCreate(g,this,e)})},processCreate:function(g,m,e){var f=this,n=e.postprocessors.shift(),l=e.createdFn;if(!n){if(g){f.set(g,m)}delete m._classHooks;if(l){l.call(m,m)}if(g){f.triggerCreated(g)}return}if(n.call(f,g,m,e,f.processCreate)!==false){f.processCreate(g,m,e)}},createOverride:function(o,q,t){var n=this,m=q.override,g=q.requires,s=q.uses,p=q.mixins,e,l=1,f,u=function(){var z,v,w,x,y;if(!f){v=g?g.slice(0):[];if(p){if(!(e=p instanceof Array)){for(x in p){if(Ext.isString(z=p[x])){v.push(z)}}}else{for(w=0,y=p.length;w<y;++w){if(Ext.isString(z=p[w])){v.push(z)}}}}f=true;if(v.length){Ext.require(v,u);return}}if(e){for(w=0,y=p.length;w<y;++w){if(Ext.isString(z=p[w])){p[w]=Ext.ClassManager.get(z)}}}else{if(p){for(x in p){if(Ext.isString(z=p[x])){p[x]=Ext.ClassManager.get(z)}}}}z=m.$isClass?m:n.get(m);delete q.override;delete q.compatibility;delete q.requires;delete q.uses;Ext.override(z,q);Ext.Loader.history.push(o);if(s){Ext.Loader.addUsedClasses(s)}if(t){t.call(z,z)}};if(o){S.overrideMap[o]=true}if("compatibility" in q){l=q.compatibility;if(!l){l=false}else{if(typeof l==="number"){l=true}else{if(typeof l!=="boolean"){l=Ext.checkVersion(l)}}}}if(l){if(m.$isClass){u()}else{n.onCreated(u,n,m)}}n.triggerCreated(o,2);return n},instantiateByAlias:function(){var f=arguments[0],g=M.call(arguments),e=this.getNameByAlias(f);g[0]=e;return Ext.create.apply(Ext,g)},instantiate:function(){return Ext.create.apply(Ext,arguments)},dynInstantiate:function(e,f){f=Q(f,true);f.unshift(e);return Ext.create.apply(Ext,f)},getInstantiator:function(f){var g=this.instantiators,e,l,m;e=g[f];if(!e){l=f;m=[];for(l=0;l<f;l++){m.push("a["+l+"]")}e=g[f]=new Function("c","a","return new c("+m.join(",")+")")}return e},postprocessors:{},defaultPostprocessors:[],registerPostprocessor:function(l,e,g,m,f){if(!m){m="last"}if(!g){g=[l]}this.postprocessors[l]={name:l,properties:g||false,fn:e};this.setDefaultPostprocessorPosition(l,m,f);return this},setDefaultPostprocessors:function(e){this.defaultPostprocessors=Q(e);return this},setDefaultPostprocessorPosition:function(l,e,f){var g=this.defaultPostprocessors,m;if(typeof e==="string"){if(e==="first"){g.unshift(l);return this}else{if(e==="last"){g.push(l);return this}}e=(e==="after")?1:-1}m=Ext.Array.indexOf(g,f);if(m!==-1){Ext.Array.splice(g,Math.max(0,m+e),0,l)}return this}});S.registerPostprocessor("alias",function(l,m,e){var n=Ext.Array.from(e.alias),g,f;for(g=0,f=n.length;g<f;g++){I=n[g];this.addAlias(m,I)}},["xtype","alias"]);S.registerPostprocessor("singleton",function(g,l,e,f){if(e.singleton){f.call(this,g,new l(),e)}else{return true}return false});S.registerPostprocessor("alternateClassName",function(n,o,f){var l=f.alternateClassName,m,g,e;if(!(l instanceof Array)){l=[l]}for(m=0,g=l.length;m<g;m++){e=l[m];this.set(e,o)}});S.registerPostprocessor("debugHooks",function(g,l,f){var e=l.isInstance?l.self:l;delete e.prototype.debugHooks});S.registerPostprocessor("deprecated",function(g,l,f){var e=l.isInstance?l.self:l;e.addDeprecations(f.deprecated);delete e.prototype.deprecated});Ext.apply(Ext,{create:function(){var f=arguments[0],e=typeof f,g=M.call(arguments,1),l;if(e==="function"){l=f}else{if(e!=="string"&&g.length===0){g=[f];if(!(f=f.xclass)){f=g[0].xtype;if(f){f="widget."+f}}}f=S.resolveName(f);l=S.get(f)}if(!l){Ext.syncRequire(f);l=S.get(f)}return S.getInstantiator(g.length)(l,g)},widget:function(l,m){var e=l,g,f,n;if(typeof e!=="string"){m=l;e=m.xtype;f=m.xclass}else{m=m||{}}if(m.isComponent){return m}if(!f){g="widget."+e;f=S.getNameByAlias(g)}if(f){n=S.get(f)}if(!n){return Ext.create(f||g,m)}return new n(m)},createByAlias:I(S,"instantiateByAlias"),define:function(f,e,g){if(e.override){S.classState[f]=20;return S.createOverride.apply(S,arguments)}S.classState[f]=10;return S.create.apply(S,arguments)},undefine:function(g){var m=S.classes;delete m[g];delete S.existCache[g];delete S.classState[g];S.removeName(g);var f=S.getNamespaceEntry(g),l=f.parent?S.lookupName(f.parent,false):Ext.global;if(l){try{delete l[f.name]}catch(e){l[f.name]=undefined}}},getClassName:I(S,"getName"),getDisplayName:function(e){if(e){if(e.displayName){return e.displayName}if(e.$name&&e.$class){return Ext.getClassName(e.$class)+"#"+e.$name}if(e.$className){return e.$className}}return"Anonymous"},getClass:I(S,"getClass"),namespace:function(){var f=F,e;for(e=arguments.length;e-->0;){f=S.lookupName(arguments[e],true)}return f}});Ext.addRootNamespaces=S.addRootNamespaces;Ext.createWidget=Ext.widget;Ext.ns=Ext.namespace;D.registerPreprocessor("className",function(f,e){if("$className" in e){f.$className=e.$className}},true,"first");D.registerPreprocessor("alias",function(l,s){var n=l.prototype,v=Q(s.xtype),f=Q(s.alias),g="widget.",m=g.length,q=Array.prototype.slice.call(n.xtypesChain||[]),u=Ext.merge({},n.xtypesMap||{}),t,o,p,e;for(t=0,o=f.length;t<o;t++){p=f[t];if(p.substring(0,m)===g){e=p.substring(m);Ext.Array.include(v,e)}}l.xtype=s.xtype=v[0];s.xtypes=v;for(t=0,o=v.length;t<o;t++){e=v[t];if(!u[e]){u[e]=true;q.push(e)}}s.xtypesChain=q;s.xtypesMap=u;Ext.Function.interceptAfterOnce(l,"onClassCreated",function(){var z=this,x=z.prototype,A=x.mixins,w,y;for(w in A){if(A.hasOwnProperty(w)){y=A[w];v=y.xtypes;if(v){for(t=0,o=v.length;t<o;t++){e=v[t];if(!u[e]){u[e]=true;q.push(e)}}}}}});for(t=0,o=v.length;t<o;t++){e=v[t];Ext.Array.include(f,g+e)}s.alias=f},["xtype","alias"]);if(Ext.manifest){var P=Ext.manifest,C=P.classes,G=P.paths,E={},L={},R,J,K,H,U;if(G){if(P.bootRelative){U=Ext.Boot.baseUrl;for(H in G){if(G.hasOwnProperty(H)){G[H]=U+G[H]}}}S.setPath(G)}if(C){for(R in C){L[R]=[];E[R]=[];J=C[R];if(J.alias){E[R]=J.alias}if(J.alternates){L[R]=J.alternates}}}S.addAlias(E);S.addAlternate(L)}return S}(Ext.Class,Ext.Function.alias,Array.prototype.slice,Ext.Array.from,Ext.global));(Ext.env||(Ext.env={})).Browser=function(O,I){var N=this,Y=Ext.Boot.browserPrefixes,W=Ext.Boot.browserNames,X=N.enginePrefixes,P=N.engineNames,F=O.match(new RegExp("((?:"+Ext.Object.getValues(Y).join(")|(?:")+"))([\\w\\._]+)")),S=O.match(new RegExp("((?:"+Ext.Object.getValues(X).join(")|(?:")+"))([\\w\\._]+)")),G=W.other,Q=P.other,K="",T="",V="",R=false,H,J,M,L,E;N.userAgent=O;this.is=function(e){return !!this.is[e]};if(/Edge\//.test(O)){F=O.match(/(Edge\/)([\w.]+)/)}if(F){G=W[Ext.Object.getKey(Y,F[1])];if(G==="Safari"&&/^Opera/.test(O)){G="Opera"}K=new Ext.Version(F[2])}if(S){Q=P[Ext.Object.getKey(X,S[1])];T=new Ext.Version(S[2])}if(Q==="Trident"&&G!=="IE"){G="IE";var U=O.match(/.*rv:(\d+.\d+)/);if(U&&U.length){U=U[1];K=new Ext.Version(U)}}if(G&&K){Ext.setVersion(G,K)}if(O.match(/FB/)&&G==="Other"){G=W.safari;Q=P.webkit}if(O.match(/Android.*Chrome/g)){G="ChromeMobile"}if(O.match(/OPR/)){G="Opera";F=O.match(/OPR\/(\d+.\d+)/);K=new Ext.Version(F[1])}Ext.apply(this,{engineName:Q,engineVersion:T,name:G,version:K});this.setFlag(G,true,I);if(K){V=K.getMajor()||"";if(N.is.IE){V=parseInt(V,10);M=document.documentMode;if(M===7||(V===7&&M!==8&&M!==9&&M!==10)){V=7}else{if(M===8||(V===8&&M!==8&&M!==9&&M!==10)){V=8}else{if(M===9||(V===9&&M!==7&&M!==8&&M!==10)){V=9}else{if(M===10||(V===10&&M!==7&&M!==8&&M!==9)){V=10}else{if(M===11||(V===11&&M!==7&&M!==8&&M!==9&&M!==10)){V=11}}}}}E=Math.max(V,Ext.Boot.maxIEVersion);for(H=7;H<=E;++H){J="isIE"+H;if(V<=H){Ext[J+"m"]=true}if(V===H){Ext[J]=true}if(V>=H){Ext[J+"p"]=true}}}if(N.is.Opera&&parseInt(V,10)<=12){Ext.isOpera12m=true}Ext.chromeVersion=Ext.isChrome?V:0;Ext.firefoxVersion=Ext.isFirefox?V:0;Ext.ieVersion=Ext.isIE?V:0;Ext.operaVersion=Ext.isOpera?V:0;Ext.safariVersion=Ext.isSafari?V:0;Ext.webKitVersion=Ext.isWebKit?V:0;this.setFlag(G+V,true,I);this.setFlag(G+K.getShortVersion())}for(H in W){if(W.hasOwnProperty(H)){L=W[H];this.setFlag(L,G===L)}}this.setFlag(L);if(T){this.setFlag(Q+(T.getMajor()||""));this.setFlag(Q+T.getShortVersion())}for(H in P){if(P.hasOwnProperty(H)){L=P[H];this.setFlag(L,Q===L,I)}}this.setFlag("Standalone",!!navigator.standalone);this.setFlag("Ripple",!!document.getElementById("tinyhippos-injected")&&!Ext.isEmpty(window.top.ripple));this.setFlag("WebWorks",!!window.blackberry);if(window.PhoneGap!==undefined||window.Cordova!==undefined||window.cordova!==undefined){R=true;this.setFlag("PhoneGap");this.setFlag("Cordova")}if(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)(?!.*FBAN)/i.test(O)){R=true}this.setFlag("WebView",R);this.isStrict=Ext.isStrict=document.compatMode==="CSS1Compat";this.isSecure=Ext.isSecure;this.identity=G+V+(this.isStrict?"Strict":"Quirks")};Ext.env.Browser.prototype={constructor:Ext.env.Browser,engineNames:{webkit:"WebKit",gecko:"Gecko",presto:"Presto",trident:"Trident",other:"Other"},enginePrefixes:{webkit:"AppleWebKit/",gecko:"Gecko/",presto:"Presto/",trident:"Trident/"},styleDashPrefixes:{WebKit:"-webkit-",Gecko:"-moz-",Trident:"-ms-",Presto:"-o-",Other:""},stylePrefixes:{WebKit:"Webkit",Gecko:"Moz",Trident:"ms",Presto:"O",Other:""},propertyPrefixes:{WebKit:"webkit",Gecko:"moz",Trident:"ms",Presto:"o",Other:""},name:null,version:null,engineName:null,engineVersion:null,setFlag:function(n,l,m){if(l===undefined){l=true}this.is[n]=l;this.is[n.toLowerCase()]=l;if(m){Ext["is"+n]=l}return this},getStyleDashPrefix:function(){return this.styleDashPrefixes[this.engineName]},getStylePrefix:function(){return this.stylePrefixes[this.engineName]},getVendorProperyName:function(l){var g=this.propertyPrefixes[this.engineName];if(g.length>0){return g+Ext.String.capitalize(l)}return l},getPreferredTranslationMethod:function(f){if(typeof f==="object"&&"translationMethod" in f&&f.translationMethod!=="auto"){return f.translationMethod}else{return"csstransform"}}};(function(f){Ext.browser=new Ext.env.Browser(f,true);Ext.userAgent=f.toLowerCase();Ext.SSL_SECURE_URL=Ext.isSecure&&Ext.isIE?"javascript:''":"about:blank"}(Ext.global.navigator.userAgent));Ext.env.OS=function(G,E,J){var K=this,x=Ext.Boot.osNames,C=Ext.Boot.osPrefixes,F,y="",A=K.is,D,z,B,H,I;J=J||Ext.browser;for(D in C){if(C.hasOwnProperty(D)){z=C[D];B=G.match(new RegExp("(?:"+z+")([^\\s;]+)"));if(B){F=x[D];I=B[1];if(I&&I==="HTC_"){y=new Ext.Version("2.3")}else{if(I&&I==="Silk/"){y=new Ext.Version("2.3")}else{y=new Ext.Version(B[B.length-1])}}break}}}if(!F){F=x[(G.toLowerCase().match(/mac|win|linux/)||["other"])[0]];y=new Ext.Version("")}this.name=F;this.version=y;if(G.match(/ipad/i)){E="iPad"}if(E){this.setFlag(E.replace(/ simulator$/i,""))}this.setFlag(F);if(y){this.setFlag(F+(y.getMajor()||""));this.setFlag(F+y.getShortVersion())}for(D in x){if(x.hasOwnProperty(D)){H=x[D];if(!A.hasOwnProperty(F)){this.setFlag(H,(F===H))}}}if(this.name==="iOS"&&window.screen.height===568){this.setFlag("iPhone5")}if(J.is.Safari||J.is.Silk){if(this.is.Android2||this.is.Android3||J.version.shortVersion===501){J.setFlag("AndroidStock")}if(this.is.Android4){J.setFlag("AndroidStock");J.setFlag("AndroidStock4")}}};Ext.env.OS.prototype={constructor:Ext.env.OS,is:function(f){return !!this[f]},name:null,version:null,setFlag:function(l,g){if(g===undefined){g=true}if(this.flags){this.flags[l]=g}this.is[l]=g;this.is[l.toLowerCase()]=g;return this}};(function(){var A=Ext.global.navigator,u=A.userAgent,v=Ext.env.OS,w=(Ext.is||(Ext.is={})),t,x,z;v.prototype.flags=w;Ext.os=t=new v(u,A.platform);x=t.name;Ext["is"+x]=true;Ext.isMac=w.Mac=w.MacOS;var s=window.location.search.match(/deviceType=(Tablet|Phone)/),y=window.deviceType;if(s&&s[1]){z=s[1]}else{if(y==="iPhone"){z="Phone"}else{if(y==="iPad"){z="Tablet"}else{if(!t.is.Android&&!t.is.iOS&&!t.is.WindowsPhone&&/Windows|Linux|MacOS/.test(x)){z="Desktop";Ext.browser.is.WebView=!!Ext.browser.is.Ripple}else{if(t.is.iPad||t.is.RIMTablet||t.is.Android3||Ext.browser.is.Silk||(t.is.Android&&u.search(/mobile/i)===-1)){z="Tablet"}else{z="Phone"}}}}}t.setFlag(z,true);t.deviceType=z;delete v.prototype.flags}());Ext.feature={has:function(f){return !!this.has[f]},testElements:{},getTestElement:function(l,g){if(l===undefined){l="div"}else{if(typeof l!=="string"){return l}}if(g){return document.createElement(l)}if(!this.testElements[l]){this.testElements[l]=document.createElement(l)}return this.testElements[l]},isStyleSupported:function(n,o){var m=this.getTestElement(o).style,p=Ext.String.capitalize(n);if(typeof m[n]!=="undefined"||typeof m[Ext.browser.getStylePrefix(n)+p]!=="undefined"){return true}return false},isStyleSupportedWithoutPrefix:function(m,n){var l=this.getTestElement(n).style;if(typeof l[m]!=="undefined"){return true}return false},isEventSupported:function(p,s){if(s===undefined){s=window}var n=this.getTestElement(s),q="on"+p.toLowerCase(),o=(q in n);if(!o){if(n.setAttribute&&n.removeAttribute){n.setAttribute(q,"");o=typeof n[q]==="function";if(typeof n[q]!=="undefined"){n[q]=undefined}n.removeAttribute(q)}}return o},getStyle:function(n,o){var p=n.ownerDocument.defaultView,m=(p?p.getComputedStyle(n,null):n.currentStyle);return(m||n.style)[o]},getSupportedPropertyName:function(m,n){var l=Ext.browser.getVendorProperyName(n);if(l in m){return l}else{if(n in m){return n}}return null},detect:function(K){var J=this,H=document,z=J.toRun||J.tests,A=z.length,D=H.createElement("div"),C=[],F=Ext.supports,G=J.has,E,n,y,B,I;D.innerHTML='<div style="height:30px;width:50px;"><div style="height:20px;width:20px;"></div></div><div style="width: 200px; height: 200px; position: relative; padding: 5px;"><div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></div></div><div style="position: absolute; left: 10%; top: 10%;"></div><div style="float:left; background-color:transparent;"></div>';if(K){H.body.appendChild(D)}B=J.preDetected[Ext.browser.identity]||[];while(A--){y=z[A];I=B[A];E=y.name;n=y.names;if(I===undefined){if(!K&&y.ready){C.push(y);continue}I=y.fn.call(J,H,D)}if(E){F[E]=G[E]=I}else{if(n){while(n.length){E=n.pop();F[E]=G[E]=I}}}}if(K){H.body.removeChild(D)}J.toRun=C},report:function(){var m=[],n=this.tests.length,l;for(l=0;l<n;++l){m.push(this.has[this.tests[l].name]?1:0)}Ext.log(Ext.browser.identity+": ["+m.join(",")+"]")},preDetected:{},tests:[{name:"CloneNodeCopiesExpando",fn:function(){var f=document.createElement("div");f.expandoProp={};return f.cloneNode().expandoProp===f.expandoProp}},{name:"CSSPointerEvents",fn:function(f){return"pointerEvents" in f.documentElement.style}},{name:"CSS3BoxShadow",fn:function(f){return"boxShadow" in f.documentElement.style||"WebkitBoxShadow" in f.documentElement.style||"MozBoxShadow" in f.documentElement.style}},{name:"CSS3NegationSelector",fn:function(e){try{e.querySelectorAll("foo:not(bar)")}catch(l){return false}return true}},{name:"ClassList",fn:function(f){return !!f.documentElement.classList}},{name:"Canvas",fn:function(){var f=this.getTestElement("canvas");return !!(f&&f.getContext&&f.getContext("2d"))}},{name:"Svg",fn:function(f){return !!(f.createElementNS&&!!f.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)}},{name:"Vml",fn:function(){var g=this.getTestElement(),l=false;g.innerHTML="<!--[if vml]><br><![endif]-->";l=(g.childNodes.length===1);g.innerHTML="";return l}},{name:"Touch",fn:function(){var f=navigator.msMaxTouchPoints||navigator.maxTouchPoints;if(Ext.browser.is.Chrome&&Ext.browser.version.isLessThanOrEqual(39)){return(Ext.supports.TouchEvents&&f!==1)||f>1}else{return Ext.supports.TouchEvents||f>0}}},{name:"TouchEvents",fn:function(){return this.isEventSupported("touchend")}},{name:"PointerEvents",fn:function(){return navigator.pointerEnabled}},{name:"MSPointerEvents",fn:function(){return navigator.msPointerEnabled}},{name:"Orientation",fn:function(){return("orientation" in window)&&this.isEventSupported("orientationchange")}},{name:"OrientationChange",fn:function(){return this.isEventSupported("orientationchange")}},{name:"DeviceMotion",fn:function(){return this.isEventSupported("devicemotion")}},{names:["Geolocation","GeoLocation"],fn:function(){return"geolocation" in window.navigator}},{name:"SqlDatabase",fn:function(){return"openDatabase" in window}},{name:"WebSockets",fn:function(){return"WebSocket" in window}},{name:"Range",fn:function(){return !!document.createRange}},{name:"CreateContextualFragment",fn:function(){var f=!!document.createRange?document.createRange():false;return f&&!!f.createContextualFragment}},{name:"History",fn:function(){return("history" in window&&"pushState" in window.history)}},{name:"Css3dTransforms",fn:function(){return this.has("CssTransforms")&&this.isStyleSupported("perspective")}},{name:"CssTransforms",fn:function(){return this.isStyleSupported("transform")}},{name:"CssTransformNoPrefix",fn:function(){return this.isStyleSupportedWithoutPrefix("transform")}},{name:"CssAnimations",fn:function(){return this.isStyleSupported("animationName")}},{names:["CssTransitions","Transitions"],fn:function(){return this.isStyleSupported("transitionProperty")}},{names:["Audio","AudioTag"],fn:function(){return !!this.getTestElement("audio").canPlayType}},{name:"Video",fn:function(){return !!this.getTestElement("video").canPlayType}},{name:"LocalStorage",fn:function(){try{if("localStorage" in window&&window.localStorage!==null){localStorage.setItem("sencha-localstorage-test","test success");localStorage.removeItem("sencha-localstorage-test");return true}}catch(e){}return false}},{name:"XHR2",fn:function(){return window.ProgressEvent&&window.FormData&&window.XMLHttpRequest&&("withCredentials" in new XMLHttpRequest())}},{name:"XHRUploadProgress",fn:function(){if(window.XMLHttpRequest&&!Ext.browser.is.AndroidStock){var f=new XMLHttpRequest();return f&&("upload" in f)&&("onprogress" in f.upload)}return false}},{name:"NumericInputPlaceHolder",fn:function(){return !(Ext.browser.is.AndroidStock4&&Ext.os.version.getMinor()<2)}},{name:"matchesSelector",fn:function(){var q=document.documentElement,n="matches",o="webkitMatchesSelector",s="msMatchesSelector",p="mozMatchesSelector";return q[n]?n:q[o]?o:q[s]?s:q[p]?p:null}},{name:"RightMargin",ready:true,fn:function(m,l){var n=m.defaultView;return !(n&&n.getComputedStyle(l.firstChild.firstChild,null).marginRight!=="0px")}},{name:"DisplayChangeInputSelectionBug",fn:function(){var f=Ext.webKitVersion;return 0<f&&f<533}},{name:"DisplayChangeTextAreaSelectionBug",fn:function(){var f=Ext.webKitVersion;return 0<f&&f<534.24}},{name:"TransparentColor",ready:true,fn:function(m,l,n){n=m.defaultView;return !(n&&n.getComputedStyle(l.lastChild,null).backgroundColor!=="transparent")}},{name:"ComputedStyle",ready:true,fn:function(m,l,n){n=m.defaultView;return n&&n.getComputedStyle}},{name:"Float",fn:function(f){return"cssFloat" in f.documentElement.style}},{name:"CSS3BorderRadius",ready:true,fn:function(m){var o=["borderRadius","BorderRadius","MozBorderRadius","WebkitBorderRadius","OBorderRadius","KhtmlBorderRadius"],n=false,p;for(p=0;p<o.length;p++){if(m.documentElement.style[o[p]]!==undefined){n=true}}return n&&!Ext.isIE9}},{name:"CSS3LinearGradient",fn:function(v,A){var t="background-image:",u="-webkit-gradient(linear, left top, right bottom, from(black), to(white))",w="linear-gradient(left top, black, white)",x="-moz-"+w,z="-ms-"+w,y="-o-"+w,s=[t+u,t+w,t+x,t+z,t+y];A.style.cssText=s.join(";");return((""+A.style.backgroundImage).indexOf("gradient")!==-1)&&!Ext.isIE9}},{name:"MouseEnterLeave",fn:function(f){return("onmouseenter" in f.documentElement&&"onmouseleave" in f.documentElement)}},{name:"MouseWheel",fn:function(f){return("onmousewheel" in f.documentElement)}},{name:"Opacity",fn:function(l,g){if(Ext.isIE8){return false}g.firstChild.style.cssText="opacity:0.73";return g.firstChild.style.opacity=="0.73"}},{name:"Placeholder",fn:function(f){return"placeholder" in f.createElement("input")}},{name:"Direct2DBug",fn:function(f){return Ext.isString(f.documentElement.style.msTransformOrigin)&&Ext.isIE9m}},{name:"BoundingClientRect",fn:function(f){return"getBoundingClientRect" in f.documentElement}},{name:"RotatedBoundingClientRect",ready:true,fn:function(n){var s=n.body,q=false,o=n.createElement("div"),p=o.style;if(o.getBoundingClientRect){p.position="absolute";p.top="0";p.WebkitTransform=p.MozTransform=p.msTransform=p.OTransform=p.transform="rotate(90deg)";p.width="100px";p.height="30px";s.appendChild(o);q=o.getBoundingClientRect().height!==100;s.removeChild(o)}return q}},{name:"ChildContentClearedWhenSettingInnerHTML",ready:true,fn:function(){var l=this.getTestElement(),g;l.innerHTML="<div>a</div>";g=l.firstChild;l.innerHTML="<div>b</div>";return g.innerHTML!=="a"}},{name:"IncludePaddingInWidthCalculation",ready:true,fn:function(l,g){return g.childNodes[1].firstChild.offsetWidth===210}},{name:"IncludePaddingInHeightCalculation",ready:true,fn:function(l,g){return g.childNodes[1].firstChild.offsetHeight===210}},{name:"TextAreaMaxLength",fn:function(f){return("maxlength" in f.createElement("textarea"))}},{name:"GetPositionPercentage",ready:true,fn:function(l,g){return Ext.feature.getStyle(g.childNodes[2],"left")==="10%"}},{name:"PercentageHeightOverflowBug",ready:true,fn:function(m){var p=false,n,o;if(Ext.getScrollbarSize().height){o=this.getTestElement();n=o.style;n.height="50px";n.width="50px";n.overflow="auto";n.position="absolute";o.innerHTML=['<div style="display:table;height:100%;">','<div style="width:51px;"></div>',"</div>"].join("");m.body.appendChild(o);if(o.firstChild.offsetHeight===50){p=true}m.body.removeChild(o)}return p}},{name:"xOriginBug",ready:true,fn:function(o,n){n.innerHTML='<div id="b1" style="height:100px;width:100px;direction:rtl;position:relative;overflow:scroll"><div id="b2" style="position:relative;width:100%;height:20px;"></div><div id="b3" style="position:absolute;width:20px;height:20px;top:0px;right:0px"></div></div>';var p=document.getElementById("b1").getBoundingClientRect(),q=document.getElementById("b2").getBoundingClientRect(),s=document.getElementById("b3").getBoundingClientRect();return(q.left!==p.left&&s.right!==p.right)}},{name:"ScrollWidthInlinePaddingBug",ready:true,fn:function(m){var p=false,n,o;o=m.createElement("div");n=o.style;n.height="50px";n.width="50px";n.padding="10px";n.overflow="hidden";n.position="absolute";o.innerHTML='<span style="display:inline-block;zoom:1;height:60px;width:60px;"></span>';m.body.appendChild(o);if(o.scrollWidth===70){p=true}m.body.removeChild(o);return p}},{name:"rtlVertScrollbarOnRight",ready:true,fn:function(n,m){m.innerHTML='<div style="height:100px;width:100px;direction:rtl;overflow:scroll"><div style="width:20px;height:200px;"></div></div>';var o=m.firstChild,p=o.firstChild;return(p.offsetLeft+p.offsetWidth!==o.offsetLeft+o.offsetWidth)}},{name:"rtlVertScrollbarOverflowBug",ready:true,fn:function(m,l){l.innerHTML='<div style="height:100px;width:100px;direction:rtl;overflow:auto"><div style="width:95px;height:200px;"></div></div>';var n=l.firstChild;return n.clientHeight===n.offsetHeight}},{identity:"defineProperty",fn:function(){if(Ext.isIE8m){Ext.Object.defineProperty=Ext.emptyFn;return false}return true}},{identify:"nativeXhr",fn:function(){if(typeof XMLHttpRequest!=="undefined"){return true}XMLHttpRequest=function(){try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(f){return null}};return false}},{name:"SpecialKeyDownRepeat",fn:function(){return Ext.isWebKit?parseInt(navigator.userAgent.match(/AppleWebKit\/(\d+)/)[1],10)>=525:!(!(Ext.isGecko||Ext.isIE)||(Ext.isOpera&&Ext.operaVersion<12))}},{name:"EmulatedMouseOver",fn:function(){return Ext.os.is.iOS}},{name:"Hashchange",fn:function(){var f=document.documentMode;return"onhashchange" in window&&(f===undefined||f>7)}},{name:"FixedTableWidthBug",ready:true,fn:function(){if(Ext.isIE8){return false}var m=document.createElement("div"),n=document.createElement("div"),l;m.setAttribute("style","display:table;table-layout:fixed;");n.setAttribute("style","display:table-cell;min-width:50px;");m.appendChild(n);document.body.appendChild(m);m.offsetWidth;m.style.width="25px";l=m.offsetWidth;document.body.removeChild(m);return l===50}},{name:"FocusinFocusoutEvents",fn:function(){return !Ext.isGecko}},{name:"AsyncFocusEvents",fn:function(){return Ext.asyncFocus=!!Ext.isIE}},{name:"accessibility",ready:true,fn:function(x){var w=x.body,v,s,q,u,t;function y(e){var n=[],l=0,f,m;if(e.indexOf("rgb(")!==-1){n=e.replace("rgb(","").replace(")","").split(", ")}else{if(e.indexOf("#")!==-1){f=e.length===7?/^#(\S\S)(\S\S)(\S\S)$/:/^#(\S)(\S)(\S)$/;m=e.match(f);if(m){n=["0x"+m[1],"0x"+m[2],"0x"+m[3]]}}}for(var g=0;g<n.length;g++){l+=parseInt(n[g])}return l}v=x.createElement("div");s=x.createElement("img");q=v.style;Ext.apply(q,{width:"2px",position:"absolute",clip:"rect(1px,1px,1px,1px)",borderWidth:"1px",borderStyle:"solid",borderTopTolor:"#f00",borderRightColor:"#ff0",backgroundColor:"#fff",backgroundImage:"url("+Ext.BLANK_IMAGE_URL+")"});s.alt="";s.src=Ext.BLANK_IMAGE_URL;v.appendChild(s);w.appendChild(v);q=v.currentStyle||v.style;t=q.backgroundImage;u={Images:s.offsetWidth===1&&s.readyState!=="uninitialized",BackgroundImages:!(t!==null&&(t==="none"||t==="url(invalid-url:)")),BorderColors:q.borderTopColor!==q.borderRightColor,LightOnDark:y(q.color)-y(q.backgroundColor)>0};Ext.supports.HighContrastMode=!u.BackgroundImages;w.removeChild(v);v=s=null;return u}},{name:"ViewportUnits",ready:true,fn:function(o){if(Ext.isIE8){return false}var t=o.body,u=document.createElement("div"),p=u.currentStyle||u.style,q,s;t.appendChild(u);Ext.apply(p,{width:"50vw"});q=parseInt(window.innerWidth/2,10);s=parseInt((window.getComputedStyle?getComputedStyle(u,null):u.currentStyle).width,10);t.removeChild(u);u=null;return q===s}},{name:"CSSVariables",ready:false,fn:function(g){if(!window.getComputedStyle){return false}var l=window.getComputedStyle(g.documentElement);return l.getPropertyValue&&!!l.getPropertyValue("--x-supports-variables")}},{name:"Selectors2",ready:false,fn:function(e){try{return !!e.querySelectorAll(":scope")}catch(l){return false}}},{name:"CSSScrollSnap",ready:false,fn:function(g){var l=g.documentElement.style;return"scrollSnapType" in l||"webkitScrollSnapType" in l||"msScrollSnapType" in l}},0]};Ext.feature.tests.pop();Ext.supports={};Ext.feature.detect();Ext.env.Ready={blocks:(location.search||"").indexOf("ext-pauseReadyFire")>0?1:0,bound:0,delay:1,firing:false,generation:0,listeners:[],nextId:0,sortGeneration:0,state:0,timer:null,bind:function(){var l=Ext.env.Ready,g=document;if(!l.bound){if(g.readyState==="complete"){l.onReadyEvent({type:g.readyState||"body"})}else{l.bound=1;if(Ext.browser.is.PhoneGap&&!Ext.os.is.Desktop){l.bound=2;g.addEventListener("deviceready",l.onReadyEvent,false)}g.addEventListener("DOMContentLoaded",l.onReadyEvent,false);window.addEventListener("load",l.onReadyEvent,false)}}},block:function(){++this.blocks;Ext.isReady=false},fireReady:function(){var f=Ext.env.Ready;if(!f.state){Ext._readyTime=Ext.ticks();Ext.isDomReady=true;f.state=1;Ext.feature.detect(true);if(!f.delay){f.handleReady()}else{if(navigator.standalone){f.timer=Ext.defer(function(){f.timer=null;f.handleReadySoon()},1)}else{f.handleReadySoon()}}}},handleReady:function(){var f=this;if(f.state===1){f.state=2;Ext._beforeReadyTime=Ext.ticks();f.invokeAll();Ext._afterReadyTime=Ext.ticks()}},handleReadySoon:function(l){var g=this;if(!g.timer){g.timer=Ext.defer(function(){g.timer=null;g.handleReady()},l||g.delay)}},invoke:function(g){var l=g.delay;if(l){Ext.defer(g.fn,l,g.scope)}else{if(Ext.elevateFunction){Ext.elevateFunction(g.fn,g.scope)}else{g.fn.call(g.scope)}}},invokeAll:function(){if(Ext.elevateFunction){Ext.elevateFunction(this.doInvokeAll,this)}else{this.doInvokeAll()}},doInvokeAll:function(){var m=this,n=m.listeners,l;if(!m.blocks){Ext.isReady=true}m.firing=true;while(n.length){if(m.sortGeneration!==m.generation){m.sortGeneration=m.generation;n.sort(m.sortFn)}l=n.pop();if(m.blocks&&!l.dom){n.push(l);break}m.invoke(l)}m.firing=false},makeListener:function(m,n,o){var p={fn:m,id:++this.nextId,scope:n,dom:false,priority:0};if(o){Ext.apply(p,o)}p.phase=p.dom?0:1;return p},on:function(p,q,s){var o=Ext.env.Ready,n=o.makeListener(p,q,s);if(o.state===2&&!o.firing&&(n.dom||!o.blocks)){o.invoke(n)}else{o.listeners.push(n);++o.generation;if(!o.bound){o.bind()}}},onReadyEvent:function(g){var l=Ext.env.Ready;if(Ext.elevateFunction){Ext.elevateFunction(l.doReadyEvent,l,arguments)}else{l.doReadyEvent(g)}},doReadyEvent:function(g){var l=this;if(l.bound>0){l.unbind();l.bound=-1}if(!l.state){l.fireReady()}},sortFn:function(g,l){return -((g.phase-l.phase)||(l.priority-g.priority)||(g.id-l.id))},unblock:function(){var f=this;if(f.blocks){if(!--f.blocks){if(f.state===2&&!f.firing){f.invokeAll()}}}},unbind:function(){var l=this,g=document;if(l.bound>1){g.removeEventListener("deviceready",l.onReadyEvent,false)}g.removeEventListener("DOMContentLoaded",l.onReadyEvent,false);window.removeEventListener("load",l.onReadyEvent,false)}};(function(){var f=Ext.env.Ready;if(Ext.isIE9m){Ext.apply(f,{scrollTimer:null,readyStatesRe:/complete/i,pollScroll:function(){var l=true;try{document.documentElement.doScroll("left")}catch(e){l=false}if(l&&document.body){f.onReadyEvent({type:"doScroll"})}else{f.scrollTimer=Ext.defer(f.pollScroll,20)}return l},bind:function(){if(f.bound){return}var e=document,n;try{n=window.frameElement===undefined}catch(m){}if(!n||!e.documentElement.doScroll){f.pollScroll=Ext.emptyFn}else{if(f.pollScroll()){return}}if(e.readyState==="complete"){f.onReadyEvent({type:"already "+(e.readyState||"body")})}else{e.attachEvent("onreadystatechange",f.onReadyStateChange);window.attachEvent("onload",f.onReadyEvent);f.bound=1}},unbind:function(){document.detachEvent("onreadystatechange",f.onReadyStateChange);window.detachEvent("onload",f.onReadyEvent);if(Ext.isNumber(f.scrollTimer)){clearTimeout(f.scrollTimer);f.scrollTimer=null}},onReadyStateChange:function(){var e=document.readyState;if(f.readyStatesRe.test(e)){f.onReadyEvent({type:e})}}})}Ext.onDocumentReady=function(e,n,p){var o={dom:true};if(p){Ext.apply(o,p)}f.on(e,n,o)};Ext.onReady=function(e,m,n){f.on(e,m,n)};Ext.onInternalReady=function(e,m,n){f.on(e,m,Ext.apply({priority:1000},n))};f.bind()}());Ext.Loader=(new function(){var D=this,F=Ext.ClassManager,z=Ext.Boot,C=Ext.Class,x=Ext.env.Ready,y=Ext.Function.alias,A=["extend","mixins","requires"],I={},K=[],E=[],B=[],H={},J={enabled:true,scriptChainDelay:false,disableCaching:true,disableCachingParam:"_dc",paths:F.paths,preserveScripts:true,scriptCharset:undefined},G={disableCaching:true,disableCachingParam:true,preserveScripts:true,scriptChainDelay:"loadDelay"};Ext.apply(D,{isInHistory:I,isLoading:false,history:K,config:J,readyListeners:E,optionalRequires:B,requiresMap:H,hasFileLoadError:false,scriptsLoading:0,classesLoading:{},missingCount:0,missingQueue:{},syncModeEnabled:false,init:function(){var e=document.getElementsByTagName("script"),q=e[e.length-1].src,o=q.substring(0,q.lastIndexOf("/")+1),s=Ext._classPathMetadata,p=Ext.Microloader,m=Ext.manifest,l,f,v,t,w,u,g,n;if(!F.getPath("Ext")){F.setPath("Ext",o+"src")}if(s){Ext._classPathMetadata=null;D.addClassPathMappings(s)}if(m){l=m.loadOrder;w=Ext.Boot.baseUrl;if(l&&m.bootRelative){for(u=l.length,g=0;g<u;g++){n=l[g];n.path=w+n.path;n.canonicalPath=true}}}if(p){x.block();p.onMicroloaderReady(function(){x.unblock()})}},setConfig:Ext.Function.flexSetter(function(e,g){if(e==="paths"){D.setPath(g)}else{J[e]=g;var f=G[e];if(f){z.setConfig((f===true)?e:f,g)}}return D}),getConfig:function(e){return e?J[e]:J},setPath:function(){F.setPath.apply(F,arguments);return D},addClassPathMappings:function(e){F.setPath(e);return D},addBaseUrlClassPathMappings:function(e){for(var f in e){e[f]=z.baseUrl+e[f]}Ext.Loader.addClassPathMappings(e)},getPath:function(e){return F.getPath(e)},require:function(g,m,f,l){if(l){return D.exclude(l).require(g,m,f)}var e=F.getNamesByExpression(g);return D.load(e,m,f)},syncRequire:function(){var f=D.syncModeEnabled;D.syncModeEnabled=true;var e=D.require.apply(D,arguments);D.syncModeEnabled=f;return e},exclude:function(f){var e=F.select({require:function(m,g,l){return D.load(m,g,l)},syncRequire:function(l,o,g){var n=D.syncModeEnabled;D.syncModeEnabled=true;var m=D.load(l,o,g);D.syncModeEnabled=n;return m}});e.exclude(f);return e},load:function(o,s,p){if(s){if(s.length){s=D.makeLoadCallback(o,s)}s=s.bind(p||Ext.global)}var m=F.classState,g=[],t=[],q={},l=o.length,n,u,e,f;for(e=0;e<l;++e){u=F.resolveName(o[e]);if(!F.isCreated(u)){g.push(u);if(!m[u]){q[u]=D.getPath(u);t.push(q[u])}}}f=g.length;if(f){D.missingCount+=f;F.onCreated(function(){if(s){Ext.callback(s,p,arguments)}D.checkReady()},D,g);if(!J.enabled){Ext.raise("Ext.Loader is not enabled, so dependencies cannot be resolved dynamically. Missing required class"+((g.length>1)?"es":"")+": "+g.join(", "))}if(t.length){D.loadScripts({url:t,_classNames:g,_urlByClass:q})}else{D.checkReady()}}else{if(s){s.call(p)}D.checkReady()}if(D.syncModeEnabled){if(l===1){return F.get(o[0])}}return D},makeLoadCallback:function(e,f){return function(){var g=[],l=e.length;while(l-->0){g[l]=F.get(e[l])}return f.apply(this,g)}},onLoadFailure:function(){var e=this,f=e.onError;D.hasFileLoadError=true;--D.scriptsLoading;if(f){f.call(e.userScope,e)}D.checkReady()},onLoadSuccess:function(){var p=this,f=p.onLoad,o=p._classNames,q=p._urlByClass,n=F.classState,e=D.missingQueue,g,m,l;--D.scriptsLoading;if(f){f.call(p.userScope,p)}for(m=0,l=o.length;m<l;m++){g=o[m];if(!n[g]){e[g]=q[g]}}D.checkReady()},onReady:function(g,m,l,f){if(l){x.on(g,m,f)}else{var e=x.makeListener(g,m,f);if(D.isLoading){E.push(e)}else{x.invoke(e)}}},addUsedClasses:function(g){var f,l,e;if(g){g=(typeof g==="string")?[g]:g;for(l=0,e=g.length;l<e;l++){f=g[l];if(typeof f==="string"&&!Ext.Array.contains(B,f)){B.push(f)}}}return D},triggerReady:function(){var e,f=B;if(D.isLoading&&f.length){B=[];D.require(f)}else{D.isLoading=false;E.sort(x.sortFn);while(E.length&&!D.isLoading){e=E.pop();x.invoke(e)}x.unblock()}},historyPush:function(e){if(e&&!I[e]&&!F.overrideMap[e]){I[e]=true;K.push(e)}return D},loadScripts:function(m){var f=Ext.manifest,e=f&&f.loadOrder,l=f&&f.loadOrderMap,g;++D.scriptsLoading;if(e&&!l){f.loadOrderMap=l=z.createLoadOrderMap(e)}D.checkReady();g=Ext.apply({loadOrder:e,loadOrderMap:l,charset:J.scriptCharset,success:D.onLoadSuccess,failure:D.onLoadFailure,sync:D.syncModeEnabled,_classNames:[]},m);g.userScope=g.scope;g.scope=g;z.load(g)},loadScriptsSync:function(f){var e=D.syncModeEnabled;D.syncModeEnabled=true;D.loadScripts({url:f});D.syncModeEnabled=e},loadScriptsSyncBasePrefix:function(f){var e=D.syncModeEnabled;D.syncModeEnabled=true;D.loadScripts({url:f,prependBaseUrl:true});D.syncModeEnabled=e},loadScript:function(p){var n=typeof p==="string",g=p instanceof Array,q=!g&&!n,o=q?p.url:p,l=q&&p.onError,f=q&&p.onLoad,e=q&&p.scope,m={url:o,scope:e,onLoad:f,onError:l,_classNames:[]};D.loadScripts(m)},checkMissingQueue:function(){var f=D.missingQueue,l={},g,e=0;for(g in f){if(!(F.classState[g]||F.isCreated(g))){l[g]=f[g];e++}}D.missingCount=e;D.missingQueue=l},checkReady:function(){var f=D.isLoading,e;D.checkMissingQueue();e=D.missingCount+D.scriptsLoading;if(e&&!f){x.block();D.isLoading=!!e}else{if(!e&&f){D.triggerReady()}}}});Ext.require=y(D,"require");Ext.syncRequire=y(D,"syncRequire");Ext.exclude=y(D,"exclude");C.registerPreprocessor("loader",function(m,g,o,q){var v=this,N=[],t,w=F.getName(m),l,n,O,e,s,f,p,u;for(l=0,O=A.length;l<O;l++){f=A[l];if(g.hasOwnProperty(f)){p=g[f];if(typeof p==="string"){N.push(p)}else{if(p instanceof Array){for(n=0,e=p.length;n<e;n++){s=p[n];if(typeof s==="string"){N.push(s)}}}else{if(typeof p!=="function"){for(n in p){if(p.hasOwnProperty(n)){s=p[n];if(typeof s==="string"){N.push(s)}}}}}}}}if(N.length===0){return}if(w){H[w]=N}(w?D.exclude(w):D).require(N,function(){for(l=0,O=A.length;l<O;l++){f=A[l];if(g.hasOwnProperty(f)){p=g[f];if(typeof p==="string"){g[f]=F.get(p)}else{if(p instanceof Array){for(n=0,e=p.length;n<e;n++){s=p[n];if(typeof s==="string"){g[f][n]=F.get(s)}}}else{if(typeof p!=="function"){for(var L in p){if(p.hasOwnProperty(L)){s=p[L];if(typeof s==="string"){g[f][L]=F.get(s)}}}}}}}}q.call(v,m,g,o)});return false},true,"after","className");F.registerPostprocessor("uses",function(g,m,f){var e=f.uses,l;if(e){l=F.getNamesByExpression(f.uses);D.addUsedClasses(l)}});F.onCreated(D.historyPush);D.init()}());Ext._endTime=Ext.ticks();if(Ext._beforereadyhandler){Ext._beforereadyhandler()}(Ext.cmd.derive("Ext.Mixin",Ext.Base,function(f){return{statics:{addHook:function(u,e,s,q){var v=Ext.isFunction(u),w=function(){var l=arguments,g=v?u:q[u],m=this.callParent(l);g.apply(this,l);return m},t=e.hasOwnProperty(s)&&e[s];if(v){u.$previous=Ext.emptyFn}w.$name=s;w.$owner=e.self;if(t){w.$previous=t.$previous;t.$previous=w}else{e[s]=w}}},onClassExtended:function(B,y){var w=y.mixinConfig,e=y.xhooks,u=B.superclass,x=y.onClassMixedIn,A,v,C,z;if(e){delete y.xhooks;(w||(y.mixinConfig=w={})).on=e}if(w){A=u.mixinConfig;if(A){y.mixinConfig=w=Ext.merge({},A,w)}y.mixinId=w.id;v=w.before;C=w.after;e=w.on;z=w.extended}if(v||C||e||z){y.onClassMixedIn=function(g){var n=this.prototype,l=g.prototype,m;if(v){Ext.Object.each(v,function(p,o){g.addMember(p,function(){if(n[o].apply(this,arguments)!==false){return this.callParent(arguments)}})})}if(C){Ext.Object.each(C,function(p,o){g.addMember(p,function(){var q=this.callParent(arguments);n[o].apply(this,arguments);return q})})}if(e){for(m in e){f.addHook(e[m],l,m,n)}}if(z){g.onExtended(function(){var o=Ext.Array.slice(arguments,0);o.unshift(g);return z.apply(this,o)},this)}if(x){x.apply(this,arguments)}}}}}},0,0,0,0,0,0,[Ext,"Mixin"],0));Ext.util=Ext.util||{};Ext.util.DelayedTask=function(q,s,u,w,x){var y=this,v,t=function(){var e=Ext.GlobalEvents;clearInterval(y.id);y.id=null;q.apply(s,u||[]);if(x!==false&&e.hasListeners.idle){e.fireEvent("idle")}};w=typeof w==="boolean"?w:true;y.id=null;y.delay=function(g,e,f,l){if(w){y.cancel()}if(typeof g==="number"){v=g}q=e||q;s=f||s;u=l||u;if(!y.id){y.id=Ext.interval(t,v)}};y.cancel=function(){if(y.id){clearInterval(y.id);y.id=null}}};(Ext.cmd.derive("Ext.util.Event",Ext.Base,function(){var m=Array.prototype.slice,p=Ext.Array.insert,n=Ext.Array.toArray,o={};return{isEvent:true,suspended:0,noOptions:{},constructor:function(f,e){this.name=e;this.observable=f;this.listeners=[]},addListener:function(K,W,V,Q,g){var J=this,O=false,l=J.observable,R=J.name,f,T,L,S,I,e,U,M,P,H,N;if(J.findListener(K,W)===-1){T=J.createListener(K,W,V,Q,g);if(J.firing){J.listeners=J.listeners.slice(0)}f=J.listeners;M=U=f.length;L=V&&V.priority;I=J._highestNegativePriorityIndex;e=I!==undefined;if(L){S=(L<0);if(!S||e){for(P=(S?I:0);P<U;P++){H=f[P].o?f[P].o.priority||0:0;if(H<L){M=P;break}}}else{J._highestNegativePriorityIndex=M}}else{if(e){M=I}}if(!S&&M<=I){J._highestNegativePriorityIndex++}if(M===U){f[U]=T}else{p(f,M,[T])}if(l.isElement){l._getPublisher(R).subscribe(l,R,V.delegated!==false,V.capture)}if(g){N=g.managedListeners||(g.managedListeners=[]);N.push({item:J.observable,ename:(V&&V.managedName)||J.name,fn:K,scope:W,options:V})}O=true}return O},createListener:function(B,z,l,g,e){var D=this,C=Ext._namedScopes[z],f={fn:B,scope:z,ev:D,caller:g,manager:e,namedScope:C,defaultScope:C?(z||D.observable):undefined,lateBound:typeof B==="string"},A=B,E=false,F;if(l){f.o=l;if(l.single){A=D.createSingle(A,f,l,z);E=true}if(l.target){A=D.createTargeted(A,f,l,z,E);E=true}if(l.onFrame){A=D.createAnimFrame(A,f,l,z,E);E=true}if(l.delay){A=D.createDelayed(A,f,l,z,E);E=true}if(l.buffer){A=D.createBuffered(A,f,l,z,E);E=true}if(D.observable.isElement){F=l.type;if(F){f.type=F}}}f.fireFn=A;f.wrapped=E;return f},findListener:function(g,l){var s=this.listeners,e=s.length,f;while(e--){f=s[e];if(f){if(f.fn===g&&f.scope==l){return e}}}return -1},removeListener:function(E,C,G){var F=this,H=false,A=F.observable,I=F.name,g,B,f,D,l,e;G=G!=null?G:F.findListener(E,C);if(G!==-1){g=F.listeners[G];if(F.firing){F.listeners=F.listeners.slice(0)}F.listeners.splice(G,1);if(F._highestNegativePriorityIndex){if(G<F._highestNegativePriorityIndex){F._highestNegativePriorityIndex--}else{if(G===F._highestNegativePriorityIndex&&G===F.listeners.length){delete F._highestNegativePriorityIndex}}}if(g){B=g.o;if(g.task){g.task.cancel();delete g.task}e=g.tasks&&g.tasks.length;if(e){while(e--){g.tasks[e].cancel()}delete g.tasks}f=g.manager;if(f){D=f.managedListeners;if(D){for(e=D.length;e--;){l=D[e];if(l.item===F.observable&&l.ename===I&&l.fn===E&&l.scope===C){D.splice(e,1)}}}}if(A.isElement){A._getPublisher(I).unsubscribe(A,I,B.delegated!==false,B.capture)}}H=true}return H},clearListeners:function(){var g=this.listeners,e=g.length,f;while(e--){f=g[e];this.removeListener(f.fn,f.scope)}},suspend:function(){++this.suspended},resume:function(){if(this.suspended){--this.suspended}},isSuspended:function(){return this.suspended>0},fireDelegated:function(f,e){this.firingObservable=f;return this.fire.apply(this,e)},fire:function(){var l=this,ac=Ext.ComponentQuery,e=l.listeners,S=e.length,M=l.observable,Y=M.isElement,L=M.isComponent,Q=l.firingObservable,Z,R,K,V,ab,X,U,W,g,aa,O,T,N,f,P;if(!l.suspended&&S>0){l.firing=true;ab=arguments.length?m.call(arguments,0):[];U=ab.length;if(Y){N=ab[0]}for(V=0;V<S;V++){X=e[V];if(!X){continue}Z=X.o;if(Y){if(g){N.setCurrentTarget(g)}aa=X.type;if(aa){O=N;N=ab[0]=O.chain({type:aa})}Ext.EventObject=N}T=ab;if(Z){R=Z.delegate;if(R){if(Y){W=N.getTarget("#"+N.currentTarget.id+" "+R);if(W){ab[1]=W;g=N.currentTarget;N.setCurrentTarget(W)}else{continue}}else{if(L&&!ac.is(Q,R,M)){continue}}}if(Y){if(Z.preventDefault){N.preventDefault()}if(Z.stopPropagation){N.stopPropagation()}if(Z.stopEvent){N.stopEvent()}}ab[U]=Z;if(Z.args){T=Z.args.concat(ab)}}K=l.getFireInfo(X);f=K.fn;P=K.scope;K.fn=K.scope=null;if(P&&P.destroyed){l.removeListener(f,P,V);f=null}if(f&&f.apply(P,T)===false){Ext.EventObject=null;return(l.firing=false)}if(Z){ab.length--}if(O){N=ab[0]=O;O=null}Ext.EventObject=null}}l.firing=false;return true},getFireInfo:function(g,l){var f=this.observable,e=g.fireFn,u=g.scope,w=g.namedScope,v;if(!l&&g.wrapped){o.fn=e;return o}v=l?g.fn:e;if(g.lateBound){if(!u||w){u=(g.caller||f).resolveListenerScope(g.defaultScope)}v=u[v]}else{if(w&&w.isController){u=(g.caller||f).resolveListenerScope(g.defaultScope)}else{if(!u||w){u=f}}}o.fn=v;o.scope=u;return o},createAnimFrame:function(u,l,f,v,e){var g;if(!e){g=l.ev.getFireInfo(l,true);u=g.fn;v=g.scope;g.fn=g.scope=null}return Ext.Function.createAnimationFrame(u,v,f.args)},createTargeted:function(l,g,f,t,e){return function(){if(f.target===arguments[0]){var q;if(!e){q=g.ev.getFireInfo(g,true);l=q.fn;t=q.scope;q.fn=q.scope=null}return l.apply(t,arguments)}}},createBuffered:function(l,g,f,t,e){g.task=new Ext.util.DelayedTask();return function(){if(g.task){var q;if(!e){q=g.ev.getFireInfo(g,true);l=q.fn;t=q.scope;q.fn=q.scope=null}g.task.delay(f.buffer,l,t,n(arguments))}}},createDelayed:function(l,g,f,t,e){return function(){var s=new Ext.util.DelayedTask(),q;if(!e){q=g.ev.getFireInfo(g,true);l=q.fn;t=q.scope;q.fn=q.scope=null}if(!g.tasks){g.tasks=[]}g.tasks.push(s);s.delay(f.delay||10,l,t,n(arguments))}},createSingle:function(l,g,f,t,e){return function(){var w=g.ev,s=w.observable,x=g.fn,q;if(s){s.removeListener(w.name,x,t)}else{w.removeListener(x,t)}if(!e){q=w.getFireInfo(g,true);l=q.fn;t=q.scope;q.fn=q.scope=null}return l.apply(t,arguments)}}}},1,0,0,0,0,0,[Ext.util,"Event"],0));(Ext.cmd.derive("Ext.mixin.Identifiable",Ext.Base,{statics:{uniqueIds:{}},isIdentifiable:true,mixinId:"identifiable",idCleanRegex:/\.|[^\w\-]/g,defaultIdPrefix:"ext-",defaultIdSeparator:"-",getOptimizedId:function(){return this.id},getUniqueId:function(){var u=this.id,s,p,o,t,q;if(!(u||u===0)){s=this.self.prototype;p=this.defaultIdSeparator;t=Ext.mixin.Identifiable.uniqueIds;if(!s.hasOwnProperty("identifiablePrefix")){o=this.xtype;if(o){q=this.defaultIdPrefix+o.replace(this.idCleanRegex,p)+p}else{if(!(q=s.$className)){q=this.defaultIdPrefix+"anonymous"+p}else{q=q.replace(this.idCleanRegex,p).toLowerCase()+p}}s.identifiablePrefix=q}q=this.identifiablePrefix;if(!t.hasOwnProperty(q)){t[q]=0}u=this.id=this.id=q+(++t[q])}this.getUniqueId=this.getOptimizedId;return u},setId:function(f){this.id=this.id=f},getId:function(){var f=this.id;if(!f){f=this.getUniqueId()}this.getId=this.getOptimizedId;return f}},0,0,0,0,0,0,[Ext.mixin,"Identifiable"],0));(Ext.cmd.derive("Ext.mixin.Observable",Ext.Mixin,function(t){var p=Ext.emptyFn,q=[],w=Array.prototype,v=w.slice,s=function(e){if(e instanceof s){return e}this.observable=e;if(arguments[1].isObservable){this.managedListeners=true}this.args=v.call(arguments,1)},u=["events","hasListeners","managedListeners","eventedBeforeEventNames"];s.prototype.destroy=function(){this.destroy=Ext.emptyFn;var e=this.observable;if(!e.destroyed){e[this.managedListeners?"mun":"un"].apply(e,this.args)}};return{mixinConfig:{id:"observable",after:{destroy:"destroyObservable"}},statics:{releaseCapture:function(e){e.fireEventArgs=this.prototype.fireEventArgs},capture:function(e,g,l){var f=function(n,m){return g.apply(l,[n].concat(m))};this.captureArgs(e,f,l)},captureArgs:function(e,f,g){e.fireEventArgs=Ext.Function.createInterceptor(e.fireEventArgs,f,g)},observe:function(f,e){if(f){if(!f.isObservable){Ext.applyIf(f,new this());this.captureArgs(f.prototype,f.fireEventArgs,f)}if(Ext.isObject(e)){f.on(e)}}return f},prepareClass:function(I,f,G){var l=I.listeners=[],o=G||I.prototype,m=o.listeners,J=f?f.listeners:I.superclass.self.listeners,g,e,n,H,E;if(J){l.push(J)}if(m){e=m.scope;if(!e){m.scope="self"}else{n=Ext._namedScopes[e];if(n&&n.isController){m.scope="self.controller"}}l.push(m);o.listeners=null}if(!I.HasListeners){var F=function(){},K=I.superclass.HasListeners||(f&&f.HasListeners)||t.HasListeners;I.prototype.HasListeners=I.HasListeners=F;F.prototype=I.hasListeners=new K()}e=I.prototype.$noClearOnDestroy||{};for(H=0,E=u.length;H<E;H++){e[u[H]]=true}I.prototype.$noClearOnDestroy=e}},isObservable:true,$vetoClearingPrototypeOnDestroy:true,eventsSuspended:0,constructor:function(m){var f=this,n=f.self,o,g,e,y,l;if(f.$observableInitialized){return}f.$observableInitialized=true;f.hasListeners=f.hasListeners=new f.HasListeners();f.eventedBeforeEventNames={};f.events=f.events||{};o=n.listeners;if(o&&!f._addDeclaredListeners(o)){n.listeners=null}g=(m&&m.listeners)||f.listeners;if(g){if(g instanceof Array){for(l=0,y=g.length;l<y;++l){f.addListener(g[l])}}else{f.addListener(g)}}e=(m&&m.bubbleEvents)||f.bubbleEvents;if(e){f.enableBubble(e)}if(f.$applyConfigs){if(m){Ext.apply(f,m)}}else{f.initConfig(m)}if(g){f.listeners=null}},onClassExtended:function(f,e){if(!f.HasListeners){t.prepareClass(f,f.prototype.$observableMixedIn?undefined:e)}},$eventOptions:{scope:1,delay:1,buffer:1,onFrame:1,single:1,args:1,destroyable:1,priority:1,order:1},$orderToPriority:{before:100,current:0,after:-100},_addDeclaredListeners:function(f){var e=this;if(f instanceof Array){Ext.each(f,e._addDeclaredListeners,e)}else{e._addedDeclaredListeners=true;e.addListener(f)}return e._addedDeclaredListeners},addManagedListener:function(m,B,o,l,g,C){var A=this,n=A.managedListeners=A.managedListeners||[],e,f;if(typeof B!=="string"){f=arguments.length>4?g:B;g=B;for(B in g){if(g.hasOwnProperty(B)){e=g[B];if(!m.$eventOptions[B]){A.addManagedListener(m,B,e.fn||e,e.scope||g.scope||l,e.fn?e:f,true)}}}if(g&&g.destroyable){return new s(A,m,g)}}else{if(o!==p){m.doAddListener(B,o,l,g,null,A,A);if(!C&&g&&g.destroyable){return new s(A,m,B,o,l)}}}},removeManagedListener:function(m,C,o,l){var A=this,g,e,n,f,B;if(m.$observableDestroyed){return}if(typeof C!=="string"){g=C;for(C in g){if(g.hasOwnProperty(C)){e=g[C];if(!m.$eventOptions[C]){A.removeManagedListener(m,C,e.fn||e,e.scope||g.scope||l)}}}}else{n=A.managedListeners?A.managedListeners.slice():[];C=Ext.canonicalEventName(C);for(B=0,f=n.length;B<f;B++){A.removeManagedListenerItem(false,n[B],m,C,o,l)}}},fireEvent:function(e){return this.fireEventArgs(e,v.call(arguments,1))},resolveListenerScope:function(e){var f=Ext._namedScopes[e];if(f){if(f.isSelf||f.isThis){e=null}}return e||this},fireEventArgs:function(n,l){n=Ext.canonicalEventName(n);var e=this,g=e.events,f=g&&g[n],m=true;if(e.hasListeners[n]){m=e.doFireEvent(n,l||q,f?f.bubble:false)}return m},fireAction:function(m,g,e,f,l,n){if(typeof e==="string"&&!f){e=this[e]}l=l?Ext.Object.chain(l):{};l.single=true;l.priority=((n==="after")?-99.5:99.5);this.doAddListener(m,e,f,l);this.fireEventArgs(m,g)},$eventedController:{_paused:1,pause:function(){++this._paused},resume:function(){var f=this,g=f.fn,l=f.scope,e=f.fnArgs,o=f.owner,m,n;if(!--f._paused){if(g){m=Ext.Array.slice(e||f.args);if(e===false){m.shift()}f.fn=null;m.push(f);if(Ext.isFunction(g)){n=g.apply(l,m)}else{if(l&&Ext.isString(g)&&Ext.isFunction(l[g])){n=l[g].apply(l,m)}}if(n===false){return false}}if(!f._paused){return f.owner.fireEventArgs(f.eventName,f.args)}}}},fireEventedAction:function(e,B,n,g,o){var A=this,l=A.eventedBeforeEventNames,C=l[e]||(l[e]="before"+e),f=Ext.apply({owner:A,eventName:e,fn:n,scope:g,fnArgs:o,args:B},A.$eventedController),m;B.push(f);m=A.fireEventArgs(C,B);B.pop();if(m===false){return false}return f.resume()},doFireEvent:function(m,g,n){var e=this,o,f,l=true;do{if(e.eventsSuspended){if((o=e.eventQueue)){o.push([m,g])}return l}else{f=e.events&&e.events[m];if(f&&f!==true){if((l=f.fire.apply(f,g))===false){break}}}}while(n&&(e=e.getBubbleParent()));return l},getBubbleParent:function(){var e=this,f=e.getBubbleTarget&&e.getBubbleTarget();if(f&&f.isObservable){return f}return null},addListener:function(G,m,g,f,I,l){var n=this,F=Ext._namedScopes,e,o,E,D,H;if(typeof G!=="string"){f=G;g=f.scope;o=g&&F[g];E=o&&o.isSelf;H=((n.isComponent||n.isWidget)&&f.element)?n.$elementEventOptions:n.$eventOptions;for(G in f){e=f[G];if(!H[G]){D=e.scope;if(D&&E){o=F[D];if(o&&o.isController){D="self.controller"}}n.doAddListener(G,e.fn||e,D||g,e.fn?e:f,I,l)}}if(f&&f.destroyable){return new s(n,f)}}else{n.doAddListener(G,m,g,f,I,l);if(f&&f.destroyable){return new s(n,G,m,g,f)}}return n},removeListener:function(l,f,g,o){var e=this,m,n;if(typeof l!=="string"){n=l;o=o||e.$eventOptions;for(l in n){if(n.hasOwnProperty(l)){m=n[l];if(!e.$eventOptions[l]){e.doRemoveListener(l,m.fn||m,m.scope||n.scope)}}}}else{e.doRemoveListener(l,f,g)}return e},onBefore:function(l,e,f,g){return this.addListener(l,e,f,g,"before")},onAfter:function(l,e,f,g){return this.addListener(l,e,f,g,"after")},unBefore:function(l,e,f,g){return this.removeListener(l,e,f,g,"before")},unAfter:function(l,e,f,g){return this.removeListener(l,e,f,g,"after")},addBeforeListener:function(){return this.onBefore.apply(this,arguments)},addAfterListener:function(){return this.onAfter.apply(this,arguments)},removeBeforeListener:function(){return this.unBefore.apply(this,arguments)},removeAfterListener:function(){return this.unAfter.apply(this,arguments)},clearListeners:function(){var e=this,g=e.events,m=e.hasListeners,f,l;if(g){for(l in g){if(g.hasOwnProperty(l)){f=g[l];if(f.isEvent){delete m[l];f.clearListeners()}}}e.events=null}e.clearManagedListeners()},clearManagedListeners:function(){var e=this,g=e.managedListeners?e.managedListeners.slice():[],f=0,l=g.length;for(;f<l;f++){e.removeManagedListenerItem(true,g[f])}e.managedListeners=[]},removeManagedListenerItem:function(m,n,e,l,f,g){if(m||(n.item===e&&n.ename===l&&(!f||n.fn===f)&&(!g||n.scope===g))){if(!n.item.destroyed){n.item.doRemoveListener(n.ename,n.fn,n.scope,n.options)}if(!m){Ext.Array.remove(this.managedListeners,n)}}},hasListener:function(e){e=Ext.canonicalEventName(e);return !!this.hasListeners[e]},isSuspended:function(e){var f=this.eventsSuspended>0,g=this.events;if(!f&&e&&g){e=g[e];if(e&&e.isEvent){return e.isSuspended()}}return f},suspendEvents:function(e){++this.eventsSuspended;if(e&&!this.eventQueue){this.eventQueue=[]}},suspendEvent:function(){var e=this,g=e.events,n=arguments.length,l,f,m;for(l=0;l<n;l++){m=arguments[l];m=Ext.canonicalEventName(m);f=g[m];if(!f||!f.isEvent){f=e._initEvent(m)}f.suspend()}},resumeEvent:function(){var f=this.events||0,m=f&&arguments.length,g,e,l;for(g=0;g<m;g++){l=Ext.canonicalEventName(arguments[g]);e=f[l];if(e&&e.resume){e.resume()}}},resumeEvents:function(m){var l=this,e=l.eventQueue,f,g;if(l.eventsSuspended&&!--l.eventsSuspended){delete l.eventQueue;if(!m&&e){f=e.length;for(g=0;g<f;g++){l.fireEventArgs.apply(l,e[g])}}}},relayEvents:function(l,g,A){var m=this,z=g.length,e=0,f,o,n={};if(Ext.isObject(g)){for(e in g){o=g[e];n[e]=m.createRelayer(o)}}else{for(;e<z;e++){f=g[e];n[f]=m.createRelayer(A?A+f:f)}}m.mon(l,n,null,null,undefined);return new s(m,l,n)},createRelayer:function(g,f){var e=this;return function(){return e.fireEventArgs.call(e,g,f?v.apply(arguments,f):arguments)}},enableBubble:function(e){if(e){var g=this,f=(typeof e=="string")?arguments:e,n=g.events,l=n&&f.length,o,m,y;for(y=0;y<l;++y){o=f[y];o=Ext.canonicalEventName(o);m=n[o];if(!m||!m.isEvent){m=g._initEvent(o)}g.hasListeners._incr_(o);m.bubble=true}}},destroy:function(){this.clearListeners();this.callParent();this.destroyObservable(true)},destroyObservable:function(e){var f=this;if(f.$observableDestroyed){return}if(!e){f.clearListeners()}if(f.destroyed){if(f.clearPropertiesOnDestroy){if(!f.clearPrototypeOnDestroy){f.fireEvent=f.fireEventArgs=f.fireAction=f.fireEventedAction=Ext.emptyFn}f.events=f.managedListeners=f.eventedBeforeEventNames=null;f.$observableDestroyed=true}}},privates:{doAddListener:function(D,n,l,g,E,e,C){var o=this,B=false,f,m;E=E||(g&&g.order);if(E){m=(g&&g.priority);if(!m){g=g?Ext.Object.chain(g):{};g.priority=o.$orderToPriority[E]}}D=Ext.canonicalEventName(D);f=(o.events||(o.events={}))[D];if(!f||!f.isEvent){f=o._initEvent(D)}if(n!==p){if(!C&&(l&&l.isObservable&&(l!==o))){C=l}if(f.addListener(n,l,g,e,C)){o.hasListeners._incr_(D);B=true}}return B},doRemoveListener:function(m,g,l){var e=this,o=false,n=e.events,f;m=Ext.canonicalEventName(m);f=n&&n[m];if(f&&f.isEvent){if(f.removeListener(g,l)){e.hasListeners._decr_(m);o=true}}return o},_initEvent:function(e){return(this.events[e]=new Ext.util.Event(this,e))}},deprecated:{"5.0":{methods:{addEvents:null}}}}},1,0,0,0,0,[[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.mixin,"Observable"],function(){var s=this,o=s.prototype,q=function(){},u=function(f){if(!f.HasListeners){var e=f.prototype;e.$observableMixedIn=1;s.prepareClass(f,this);f.onExtended(function(l,g){s.prepareClass(l,null,g)});if(e.onClassMixedIn){Ext.override(f,{onClassMixedIn:function(g){u.call(this,g);this.callParent(arguments)}})}else{e.onClassMixedIn=function(g){u.call(this,g)}}}t.call(this,f)},t=o.onClassMixedIn;q.prototype={_decr_:function(e,f){if(f==null){f=1}if(!(this[e]-=f)){delete this[e]}},_incr_:function(e){if(this.hasOwnProperty(e)){++this[e]}else{this[e]=1}}};o.HasListeners=s.HasListeners=q;s.createAlias({on:"addListener",un:"removeListener",mon:"addManagedListener",mun:"removeManagedListener",setListeners:"addListener"});s.observeClass=s.observe;function p(e){var f=(this.methodEvents=this.methodEvents||{})[e],m,n,l,g=this,v;if(!f){this.methodEvents[e]=f={};f.originalFn=this[e];f.methodName=e;f.before=[];f.after=[];v=function(A,w,z){if((n=A.apply(w||g,z))!==undefined){if(typeof n=="object"){if(n.returnValue!==undefined){m=n.returnValue}else{m=n}l=!!n.cancel}else{if(n===false){l=true}else{m=n}}}};this[e]=function(){var C=Array.prototype.slice.call(arguments,0),w,B,A;m=n=undefined;l=false;for(B=0,A=f.before.length;B<A;B++){w=f.before[B];v(w.fn,w.scope,C);if(l){return m}}if((n=f.originalFn.apply(g,C))!==undefined){m=n}for(B=0,A=f.after.length;B<A;B++){w=f.after[B];v(w.fn,w.scope,C);if(l){return m}}return m}}return f}Ext.apply(o,{onClassMixedIn:u,beforeMethod:function(e,f,g){p.call(this,e).before.push({fn:f,scope:g})},afterMethod:function(e,f,g){p.call(this,e).after.push({fn:f,scope:g})},removeMethodListener:function(e,g,l){var f=this.getMethodEvent(e),m,n;for(m=0,n=f.before.length;m<n;m++){if(f.before[m].fn==g&&f.before[m].scope==l){Ext.Array.erase(f.before,m,1);return}}for(m=0,n=f.after.length;m<n;m++){if(f.after[m].fn==g&&f.after[m].scope==l){Ext.Array.erase(f.after,m,1);return}}},toggleEventLogging:function(e){Ext.util.Observable[e?"capture":"releaseCapture"](this,function(f){if(Ext.isDefined(Ext.global.console)){Ext.global.console.log(f,arguments)}})}})}));(Ext.cmd.derive("Ext.util.HashMap",Ext.Base,{generation:0,config:{keyFn:null},constructor:function(n){var l=this,m;l.mixins.observable.constructor.call(l,n);l.clear(true);m=l.getKeyFn();if(m){l.getKey=m}},getCount:function(){return this.length},getData:function(l,g){if(g===undefined){g=l;l=this.getKey(g)}return[l,g]},getKey:function(f){return f.id},add:function(n,l){var m=this;if(arguments.length===1){l=n;n=m.getKey(l)}if(m.containsKey(n)){return m.replace(n,l)}m.map[n]=l;++m.length;m.generation++;if(m.hasListeners.add){m.fireEvent("add",m,n,l)}return l},replace:function(q,o){var p=this,n=p.map,s;if(arguments.length===1){o=q;q=p.getKey(o)}if(!p.containsKey(q)){p.add(q,o)}s=n[q];n[q]=o;p.generation++;if(p.hasListeners.replace){p.fireEvent("replace",p,q,o,s)}return o},remove:function(g){var l=this.findKey(g);if(l!==undefined){return this.removeAtKey(l)}return false},removeAtKey:function(n){var m=this,l;if(m.containsKey(n)){l=m.map[n];delete m.map[n];--m.length;m.generation++;if(m.hasListeners.remove){m.fireEvent("remove",m,n,l)}return true}return false},get:function(l){var g=this.map;return g.hasOwnProperty(l)?g[l]:undefined},clear:function(l){var g=this;if(l||g.generation){g.map={};g.length=0;g.generation=l?0:g.generation+1}if(l!==true&&g.hasListeners.clear){g.fireEvent("clear",g)}return g},containsKey:function(l){var g=this.map;return g.hasOwnProperty(l)&&g[l]!==undefined},contains:function(f){return this.containsKey(this.findKey(f))},getKeys:function(){return this.getArray(true)},getValues:function(){return this.getArray(false)},getArray:function(m){var p=[],o,n=this.map;for(o in n){if(n.hasOwnProperty(o)){p.push(m?o:n[o])}}return p},each:function(o,p){var s=Ext.apply({},this.map),q,n=this.length;p=p||this;for(q in s){if(s.hasOwnProperty(q)){if(o.call(p,q,s[q],n)===false){break}}}return this},clone:function(){var l=new this.self(this.initialConfig),m=this.map,n;l.suspendEvents();for(n in m){if(m.hasOwnProperty(n)){l.add(n,m[n])}}l.resumeEvents();return l},findKey:function(m){var n,l=this.map;for(n in l){if(l.hasOwnProperty(n)&&l[n]===m){return n}}return undefined}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.util,"HashMap"],function(g){var l=g.prototype;l.removeByKey=l.removeAtKey}));(Ext.cmd.derive("Ext.promise.Consequence",Ext.Base,function(f){return{promise:null,deferred:null,onFulfilled:null,onRejected:null,onProgress:null,constructor:function(e,p,n){var o=this;o.onFulfilled=e;o.onRejected=p;o.onProgress=n;o.deferred=new Ext.promise.Deferred();o.promise=o.deferred.promise},trigger:function(e,n){var o=this,p=o.deferred;switch(e){case"fulfill":o.propagate(n,o.onFulfilled,p,p.resolve);break;case"reject":o.propagate(n,o.onRejected,p,p.reject);break}},update:function(e){if(Ext.isFunction(this.onProgress)){e=this.onProgress(e)}this.deferred.update(e)},propagate:function(n,e,p,o){if(Ext.isFunction(e)){this.schedule(function(){try{p.resolve(e(n))}catch(g){p.reject(g)}})}else{o.call(this.deferred,n)}},schedule:function(e){var l=f.queueSize++;f.queue[l]=e;if(!l){Ext.asap(f.dispatch)}},statics:{queue:new Array(10000),queueSize:0,dispatch:function(){var n=f.queue,e,m;for(m=0;m<f.queueSize;++m){e=n[m];n[m]=null;e()}f.queueSize=0}}}},1,0,0,0,0,0,[Ext.promise,"Consequence"],0));(Ext.cmd.derive("Ext.promise.Deferred",Ext.Base,{promise:null,consequences:[],completed:false,completionAction:null,completionValue:null,constructor:function(){var f=this;f.promise=new Ext.promise.Promise(f);f.consequences=[];f.completed=false;f.completionAction=null;f.completionValue=null},then:function(n,s,o){var p=this,q=new Ext.promise.Consequence(n,s,o);if(p.completed){q.trigger(p.completionAction,p.completionValue)}else{p.consequences.push(q)}return q.promise},resolve:function(p){var q=this,t,s;if(q.completed){return}try{if(p===q.promise){throw new TypeError("A Promise cannot be resolved with itself.")}if(p!=null&&(typeof p==="object"||Ext.isFunction(p))&&Ext.isFunction(s=p.then)){t=false;try{s.call(p,function(e){if(!t){t=true;q.resolve(e)}},function(e){if(!t){t=true;q.reject(e)}})}catch(u){if(!t){q.reject(u)}}}else{q.complete("fulfill",p)}}catch(o){q.reject(o)}},reject:function(f){if(this.completed){return}this.complete("reject",f)},update:function(q){var n=this.consequences,o,p,s;if(this.completed){return}for(p=0,s=n.length;p<s;p++){o=n[p];o.update(q)}},complete:function(w,p){var q=this,v=q.consequences,s,t,u;q.completionAction=w;q.completionValue=p;q.completed=true;for(t=0,u=v.length;t<u;t++){s=v[t];s.trigger(q.completionAction,q.completionValue)}q.consequences=null}},1,0,0,0,0,0,[Ext.promise,"Deferred"],0));(Ext.cmd.derive("Ext.promise.Promise",Ext.Base,function(g){var l;return{statics:{CancellationError:Ext.global.CancellationError||Error,_ready:function(){l=Ext.promise.Deferred},all:function(e){return g.when(e).then(function(y){var A=new l(),v=y.length,x=new Array(v),C,z,B,w,f;if(!v){A.resolve(x)}else{B=function(m,n){return g.when(m).then(function(o){x[n]=o;if(!--v){A.resolve(x)}return o},function(o){return A.reject(o)})};for(C=w=0,f=y.length;w<f;C=++w){z=y[C];if(C in y){B(z,C)}else{v--}}}return A.promise})},is:function(e){return e!=null&&(typeof e==="object"||Ext.isFunction(e))&&Ext.isFunction(e.then)},rethrowError:function(e){Ext.asap(function(){throw e})},when:function(e){var f=new Ext.promise.Deferred();f.resolve(e);return f.promise}},owner:null,constructor:function(e){this.owner=e},then:function(q,p,s,f){var e;if(arguments.length===1&&Ext.isObject(arguments[0])){e=arguments[0];q=e.success;p=e.failure;s=e.progress;f=e.scope}if(f){if(q){q=Ext.Function.bind(q,f)}if(p){p=Ext.Function.bind(p,f)}if(s){s=Ext.Function.bind(s,f)}}return this.owner.then(q,p,s)},otherwise:function(n,f){var e;if(arguments.length===1&&Ext.isObject(arguments[0])){e=arguments[0];n=e.fn;f=e.scope}if(f!=null){n=Ext.Function.bind(n,f)}return this.owner.then(null,n)},always:function(n,f){var e;if(arguments.length===1&&Ext.isObject(arguments[0])){e=arguments[0];n=e.fn;f=e.scope}if(f!=null){n=Ext.Function.bind(n,f)}return this.owner.then(function(p){try{n()}catch(m){g.rethrowError(m)}return p},function(m){try{n()}catch(p){g.rethrowError(p)}throw m})},done:function(){this.owner.then(null,g.rethrowError)},cancel:function(e){if(e==null){e=null}this.owner.reject(new this.self.CancellationError(e))},log:function(e){if(e==null){e=""}return this.owner.then(function(f){Ext.log(""+(e||"Promise")+" resolved with value: "+f);return f},function(f){Ext.log(""+(e||"Promise")+" rejected with reason: "+f);throw f})}}},1,0,0,0,0,0,[Ext.promise,"Promise"],function(f){f._ready()}));(Ext.cmd.derive("Ext.Promise",Ext.Base,function(){var f;return{statics:{_ready:function(){f=Ext.promise.Promise},all:function(){return f.all.apply(f,arguments)},race:function(){},reject:function(e){var l=new Ext.promise.Deferred();l.reject(e);return l.promise},resolve:function(e){var l=new Ext.promise.Deferred();l.resolve(e);return l.promise}},constructor:function(e){var l=new Ext.promise.Deferred();e(l.resolve.bind(l),l.reject.bind(l));return l.promise}}},1,0,0,0,0,0,[Ext,"Promise"],function(l){var g=Ext.global.Promise;if(g&&g.resolve){Ext.Promise=g}else{l._ready()}}));(Ext.cmd.derive("Ext.Deferred",Ext.promise.Deferred,function(m){var l,n;return{statics:{_ready:function(){l=Ext.promise.Promise;n=Ext.Promise.resolve},all:function(){return l.all.apply(l,arguments)},any:function(e){return m.some(e,1).then(function(f){return f[0]},function(f){if(f instanceof Error&&f.message==="Too few Promises were resolved."){Ext.raise("No Promises were resolved.")}else{throw f}})},delay:function(f,g){var e;if(arguments.length===1){g=f;f=undefined}g=Math.max(g,0);e=new m();setTimeout(function(){e.resolve(f)},g);return e.promise},map:function(f,e){return m.resolved(f).then(function(y){var A,C,z,E,B,x,g,D;E=y.length;x=new Array(y.length);A=new m();if(!E){A.resolve(x)}else{B=function(p,o){return m.resolved(p).then(function(q){return e(q,o,x)}).then(function(q){x[o]=q;if(!--E){A.resolve(x)}return q},function(q){return A.reject(q)})};for(C=g=0,D=y.length;g<D;C=++g){z=y[C];if(C in y){B(z,C)}else{E--}}}return A.promise})},memoize:function(g,p,f){var e=Ext.Function.memoize(g,p,f);return function(){return m.all(Ext.Array.slice(arguments)).then(function(o){return e.apply(p,o)})}},parallel:function(e,g){if(g==null){g=null}var f=Ext.Array.slice(arguments,2);return m.map(e,function(p){if(!Ext.isFunction(p)){throw new Error("Invalid parameter: expected a function.")}return p.apply(g,f)})},pipeline:function(e,f,g){if(g==null){g=null}return m.reduce(e,function(q,s){if(!Ext.isFunction(s)){throw new Error("Invalid parameter: expected a function.")}return s.call(g,q)},f)},reduce:function(e,p,f){var g=arguments.length===3;return m.resolved(e).then(function(o){var s=[o,function(v,q,w){return m.resolved(v).then(function(t){return m.resolved(q).then(function(u){return p(t,u,w,o)})})}];if(g){s.push(f)}return Ext.Array.reduce.apply(Ext.Array,s)})},rejected:function(e){var f=new Ext.Deferred();f.reject(e);return f.promise},resolved:function(e){var f=new Ext.Deferred();f.resolve(e);return f.promise},sequence:function(e,g){if(g==null){g=null}var f=Ext.Array.slice(arguments,2);return m.reduce(e,function(s,q){if(!Ext.isFunction(q)){throw new Error("Invalid parameter: expected a function.")}return m.resolved(q.apply(g,f)).then(function(o){s.push(o);return s})},[])},some:function(e,f){return m.resolved(e).then(function(z){var C,G,E,D,A,B,I,F,g,H;F=[];I=f;B=(z.length-I)+1;C=new m();if(z.length<f){C.reject(new Error("Too few Promises were resolved."))}else{D=function(o){if(I>0){F.push(o)}I--;if(I===0){C.resolve(F)}return o};E=function(o){B--;if(B===0){C.reject(new Error("Too few Promises were resolved."))}return o};for(G=g=0,H=z.length;g<H;G=++g){A=z[G];if(G in z){m.resolved(A).then(D,E)}}}return C.promise})},timeout:function(f,p){var e=new m(),g;g=setTimeout(function(){if(g){e.reject(new Error("Promise timed out."))}},p);m.resolved(f).then(function(o){clearTimeout(g);g=null;e.resolve(o)},function(o){clearTimeout(g);g=null;e.reject(o)});return e.promise}}}},0,0,0,0,0,0,[Ext,"Deferred"],function(f){f._ready()}));Ext.Factory=function(l){var g=this;g.aliasPrefix=l+".";g.cache={};g.name=l.replace(g.fixNameRe,g.fixNameFn);g.type=l};Ext.Factory.prototype={defaultProperty:"type",instanceProp:"isInstance",create:function(y,w){var t=this,A=Ext.ClassManager,z=t.cache,x,u,v,s;if(y){if(y[t.instanceProp]){return y}if(typeof y==="string"){s=y;y={};y[t.defaultProperty]=s}u=y.xclass;s=y.type}if(w&&w.constructor===Object){y=Ext.apply({},y,w);w=w.type}if(u){if(!(v=A.get(u))){return A.instantiate(u,y)}}else{if(!(s=s||w||t.defaultType)){v=t.defaultClass}if(!v&&!(v=z[s])){x=t.aliasPrefix+s;u=A.getNameByAlias(x);if(!(v=u&&A.get(u))){return A.instantiateByAlias(x,y)}z[s]=v}}return v.isInstance?v:new v(y)},fixNameRe:/\.[a-z]/ig,fixNameFn:function(f){return f.substring(1).toUpperCase()},clearCache:function(){this.cache={}}};Ext.Factory.define=function(u,p){var t=Ext.Factory,s,q,o;if(u.constructor===Object){Ext.Object.each(u,t.define,t)}else{q=new Ext.Factory(u);if(p){if(p.constructor===Object){Ext.apply(q,p);if(typeof(s=q.xclass)==="string"){q.defaultClass=Ext.ClassManager.get(s)}}else{q.defaultType=p}}t[q.name]=o=q.create.bind(q);o.instance=q}return o};(Ext.cmd.derive("Ext.mixin.Factoryable",Ext.Base,{mixinId:"factoryable",onClassMixedIn:function(w){var p=w.prototype,v=p.factoryConfig,q=p.alias,s={},t,u;q=q&&q.length&&q[0];if(q&&(t=q.lastIndexOf("."))>0){s.type=q.substring(0,t);s.defaultType=q.substring(t+1)}if(v){delete p.factoryConfig;Ext.apply(s,v)}u=Ext.Factory.define(s.type,s);if(w.create===Ext.Base.create){w.create=u}}},0,0,0,0,0,0,[Ext.mixin,"Factoryable"],0));(Ext.cmd.derive("Ext.data.request.Base",Ext.Base,{factoryConfig:{type:"request",defaultType:"ajax"},result:null,success:null,timer:null,constructor:function(l){var g=this;Ext.apply(g,l.options||{},l.ownerConfig);g.id=++Ext.data.Connection.requestId;g.owner=l.owner;g.options=l.options;g.requestOptions=l.requestOptions},start:function(){var l=this,g=l.getTimeout();if(g&&l.async){l.timer=Ext.defer(l.onTimeout,g,l)}},abort:function(){var f=this;f.clearTimer();if(!f.timedout){f.aborted=true}f.abort=Ext.emptyFn},createDeferred:function(){return(this.deferred=new Ext.Deferred())},getDeferred:function(){return this.deferred||this.createDeferred()},getPromise:function(){return this.getDeferred().promise},then:function(){var f=this.getPromise();return f.then.apply(f,arguments)},onComplete:function(){var l=this,m=l.deferred,n=l.result;l.clearTimer();if(m){if(l.success){m.resolve(n)}else{m.reject(n)}}},onTimeout:function(){var f=this;f.timedout=true;f.timer=null;f.abort(true)},getTimeout:function(){return this.timeout},clearTimer:function(){var f=this.timer;if(f){clearTimeout(f);this.timer=null}},destroy:function(){var f=this;f.abort();f.owner=f.options=f.requestOptions=f.result=null;f.callParent()},privates:{createException:function(){var g=this,l;l={request:g,requestId:g.id,status:g.aborted?-1:0,statusText:g.aborted?"transaction aborted":"communication failure",getResponseHeader:g._getHeader,getAllResponseHeaders:g._getHeaders};if(g.aborted){l.aborted=true}if(g.timedout){l.timedout=true}return l},_getHeader:function(l){var g=this.headers;return g&&g[l.toLowerCase()]},_getHeaders:function(){return this.headers}}},1,0,0,0,0,[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.request,"Base"],0));(Ext.cmd.derive("Ext.data.flash.BinaryXhr",Ext.Base,{statics:{flashPluginActivated:function(){Ext.data.flash.BinaryXhr.flashPluginActive=true;Ext.data.flash.BinaryXhr.flashPlugin=document.getElementById("ext-flash-polyfill");Ext.GlobalEvents.fireEvent("flashready")},flashPluginActive:false,flashPluginInjected:false,connectionIndex:1,liveConnections:{},flashPlugin:null,onFlashStateChange:function(m,n,o){var p;p=this.liveConnections[Number(m)];if(p){p.onFlashStateChange(n,o)}},registerConnection:function(g){var l=this.connectionIndex;this.conectionIndex=this.connectionIndex+1;this.liveConnections[l]=g;return l},injectFlashPlugin:function(){var m=this,n,l;m.flashPolyfillEl=Ext.getBody().appendChild({id:"ext-flash-polyfill",cn:[{tag:"p",html:"To view this page ensure that Adobe Flash Player version 11.1.0 or greater is installed."},{tag:"a",href:"http://www.adobe.com/go/getflashplayer",cn:[{tag:"img",src:window.location.protocol+"//www.adobe.com/images/shared/download_buttons/get_flash_player.gif",alt:"Get Adobe Flash player"}]}]});n=[Ext.Loader.getPath("Ext.data.Connection"),"../../../plugins/flash/swfobject.js"].join("/");l="/plugins/flash/FlashPlugin.swf";if(Ext.flashPluginPath){l=Ext.flashPluginPath}Ext.Loader.loadScript({url:n,onLoad:function(){var e="11.4.0";var q="playerProductInstall.swf";var f={};var g={};g.quality="high";g.bgcolor="#ffffff";g.allowscriptaccess="sameDomain";g.allowfullscreen="true";var s={};s.id="ext-flash-polyfill";s.name="polyfill";s.align="middle";swfobject.embedSWF(l,"ext-flash-polyfill","0","0",e,q,f,g,s)},onError:function(){},scope:m});Ext.data.flash.BinaryXhr.flashPluginInjected=true}},readyState:0,status:0,statusText:"",responseBytes:null,javascriptId:null,constructor:function(l){if(!Ext.data.flash.BinaryXhr.flashPluginInjected){Ext.data.flash.BinaryXhr.injectFlashPlugin()}var g=this;Ext.apply(g,l);g.requestHeaders={}},abort:function(){var f=this;if(f.readyState==4){return}f.aborted=true;if(!Ext.data.flash.BinaryXhr.flashPluginActive){Ext.GlobalEvents.removeListener("flashready",f.onFlashReady,f);return}Ext.data.flash.BinaryXhr.flashPlugin.abortRequest(f.javascriptId);delete Ext.data.flash.BinaryXhr.liveConnections[f.javascriptId]},getAllResponseHeaders:function(){var f=[];Ext.Object.each(this.responseHeaders,function(l,e){f.push(l+": "+e)});return f.join("\r\n")},getResponseHeader:function(g){var l=this.responseHeaders;return(l&&l[g])||null},open:function(u,q,p,t,s){var o=this;o.method=u;o.url=q;o.async=p!==false;o.user=t;o.password=s},overrideMimeType:function(f){this.mimeType=f},send:function(l){var g=this;g.body=l;if(!Ext.data.flash.BinaryXhr.flashPluginActive){Ext.GlobalEvents.addListener("flashready",g.onFlashReady,g)}else{this.onFlashReady()}},onFlashReady:function(){var l=this,m,n;l.javascriptId=Ext.data.flash.BinaryXhr.registerConnection(l);m={method:l.method,url:l.url,user:l.user,password:l.password,mimeType:l.mimeType,requestHeaders:l.requestHeaders,body:l.body,javascriptId:l.javascriptId};n=Ext.data.flash.BinaryXhr.flashPlugin.postBinary(m)},setReadyState:function(g){var l=this;if(l.readyState!=g){l.readyState=g;l.onreadystatechange()}},setRequestHeader:function(g,l){this.requestHeaders[g]=l},onreadystatechange:Ext.emptyFn,parseData:function(g){var l=this;this.status=g.status||0;l.responseHeaders={};if(l.mimeType){l.responseHeaders["content-type"]=l.mimeType}if(g.reason=="complete"){this.responseBytes=g.data;l.responseHeaders["content-length"]=g.data.length}else{if(g.reason=="error"||g.reason=="securityError"){this.statusText=g.text;l.responseHeaders["content-length"]=0}}},onFlashStateChange:function(l,m){var n=this;if(l==4){n.parseData(m);delete Ext.data.flash.BinaryXhr.liveConnections[n.javascriptId]}n.setReadyState(l)}},1,0,0,0,0,0,[Ext.data.flash,"BinaryXhr"],0));(Ext.cmd.derive("Ext.data.request.Ajax",Ext.data.request.Base,{statics:{parseStatus:function(q,p){var s;if(p){if(p.responseType==="arraybuffer"){s=p.byteLength}else{if(p.responseText){s=p.responseText.length}}}q=q==1223?204:q;var n=(q>=200&&q<300)||q==304||(q==0&&Ext.isNumber(s)),o=false;if(!n){switch(q){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:o=true;break}}return{success:n,isException:o}}},start:function(p){var s=this,t=s.options,u=s.requestOptions,q=s.isXdr,v,w;v=s.xhr=s.openRequest(t,u,s.async,s.username,s.password);if(!q){w=s.setupHeaders(v,t,u.data,u.params)}if(s.async){if(!q){v.onreadystatechange=Ext.Function.bind(s.onStateChange,s)}}if(q){s.processXdrRequest(s,v)}Ext.data.request.Base.prototype.start.call(this,p);v.send(p);if(!s.async){return s.onComplete()}return s},abort:function(o){var p=this,e=p.xhr;if(o||p.isLoading()){try{e.onreadystatechange=null}catch(n){e.onreadystatechange=Ext.emptyFn}e.abort();Ext.data.request.Base.prototype.abort.call(this,o);p.onComplete();p.cleanup()}},cleanup:function(){this.xhr=null;delete this.xhr},isLoading:function(){var p=this,m=p.xhr,o=m&&m.readyState,n=Ext.data.flash&&Ext.data.flash.BinaryXhr;if(!m||p.aborted||p.timedout){return false}if(n&&m instanceof n){return o!==4}return o!==0&&o!==4},openRequest:function(s,u,q,v,t){var p=this,w=p.newRequest(s);if(v){w.open(u.method,u.url,q,v,t)}else{if(p.isXdr){w.open(u.method,u.url)}else{w.open(u.method,u.url,q)}}if(s.binary||p.binary){if(window.Uint8Array){w.responseType="arraybuffer"}else{if(w.overrideMimeType){w.overrideMimeType("text/plain; charset=x-user-defined")}}}if(s.withCredentials||p.withCredentials){w.withCredentials=true}return w},newRequest:function(n){var m=this,l;if(n.binaryData){if(window.Uint8Array){l=m.getXhrInstance()}else{l=new Ext.data.flash.BinaryXhr()}}else{if(m.cors&&Ext.isIE9m){l=m.getXdrInstance();m.isXdr=true}else{l=m.getXhrInstance();m.isXdr=false}}return l},setupHeaders:function(G,F,A,B){var K=this,D=Ext.apply({},F.headers||{},K.defaultHeaders),H=K.defaultPostHeader,J=F.jsonData,E=F.xmlData,e="Content-Type",C=K.useDefaultXhrHeader,I,z;if(!D.hasOwnProperty(e)&&(A||B)){if(A){if(F.rawData){H="text/plain"}else{if(E&&Ext.isDefined(E)){H="text/xml"}else{if(J&&Ext.isDefined(J)){H="application/json"}}}}D[e]=H}if(C&&!D["X-Requested-With"]){D["X-Requested-With"]=K.defaultXhrHeader}if(D[e]===undefined||D[e]===null){delete D[e]}try{for(I in D){if(D.hasOwnProperty(I)){z=D[I];G.setRequestHeader(I,z)}}}catch(y){K.owner.fireEvent("exception",I,z)}return D},getXdrInstance:function(){var f;if(Ext.ieVersion>=8){f=new XDomainRequest()}else{Ext.raise({msg:"Your browser does not support CORS"})}return f},getXhrInstance:(function(){var p=[function(){return new XMLHttpRequest()},function(){return new ActiveXObject("MSXML2.XMLHTTP.3.0")},function(){return new ActiveXObject("MSXML2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],o=0,q=p.length,s;for(;o<q;++o){try{s=p[o];s();break}catch(e){}}return s}()),processXdrRequest:function(m,l){var n=this;delete m.headers;m.contentType=m.options.contentType||n.defaultXdrContentType;l.onload=Ext.Function.bind(n.onStateChange,n,[true]);l.onerror=l.ontimeout=Ext.Function.bind(n.onStateChange,n,[false])},processXdrResponse:function(l,g){l.getAllResponseHeaders=function(){return[]};l.getResponseHeader=function(){return""};l.contentType=g.contentType||this.defaultXdrContentType},onStateChange:function(o){var n=this,m=n.xhr,p=Ext.GlobalEvents;if((m&&m.readyState==4)||n.isXdr){n.clearTimer();n.onComplete(o);n.cleanup();if(p.hasListeners.idle){p.fireEvent("idle")}}},onComplete:function(e){var w=this,A=w.owner,C=w.options,u=w.xhr,z={success:false,isException:false},B,v,y;if(!u||w.destroyed){return w.result=z}try{B=Ext.data.request.Ajax.parseStatus(u.status,u);if(B.success){B.success=u.readyState===4}}catch(x){B=z}v=w.success=w.isXdr?e:B.success;if(v){y=w.createResponse(u);if(A.hasListeners.requestcomplete){A.fireEvent("requestcomplete",A,y,C)}if(C.success){Ext.callback(C.success,C.scope,[y,C])}}else{if(B.isException||w.aborted||w.timedout){y=w.createException(u)}else{y=w.createResponse(u)}if(A.hasListeners.requestexception){A.fireEvent("requestexception",A,y,C)}if(C.failure){Ext.callback(C.failure,C.scope,[y,C])}}w.result=y;if(C.callback){Ext.callback(C.callback,C.scope,[C,v,y])}A.onRequestComplete(w);Ext.data.request.Base.prototype.onComplete.call(this,e);return y},createResponse:function(u){var w=this,A=w.isXdr,B={},E=A?[]:u.getAllResponseHeaders().replace(/\r\n/g,"\n").split("\n"),y=E.length,D,x,v,z,C;while(y--){D=E[y];x=D.indexOf(":");if(x>=0){v=D.substr(0,x).toLowerCase();if(D.charAt(x+1)==" "){++x}B[v]=D.substr(x+1)}}z={request:w,requestId:w.id,status:u.status,statusText:u.statusText,getResponseHeader:function(e){return B[e.toLowerCase()]},getAllResponseHeaders:function(){return B}};if(A){w.processXdrResponse(z,u)}if(w.binary){z.responseBytes=w.getByteArray(u)}else{z.responseText=u.responseText;z.responseXML=u.responseXML}return z},destroy:function(){this.xhr=null;Ext.data.request.Base.prototype.destroy.call(this)},privates:{getByteArray:function(e){var x=e.response,y=e.responseBody,A=Ext.data.flash&&Ext.data.flash.BinaryXhr,z,t,v,w;if(e instanceof A){z=e.responseBytes}else{if(window.Uint8Array){z=x?new Uint8Array(x):[]}else{if(Ext.isIE9p){try{z=new VBArray(y).toArray()}catch(u){z=[]}}else{if(Ext.isIE){if(!this.self.vbScriptInjected){this.injectVBScript()}getIEByteArray(e.responseBody,z=[])}else{z=[];t=e.responseText;v=t.length;for(w=0;w<v;w++){z.push(t.charCodeAt(w)&255)}}}}}return z},injectVBScript:function(){var f=document.createElement("script");f.type="text/vbscript";f.text=["Function getIEByteArray(byteArray, out)","Dim len, i","len = LenB(byteArray)","For i = 1 to len","out.push(AscB(MidB(byteArray, i, 1)))","Next","End Function"].join("\n");Ext.getHead().dom.appendChild(f);this.self.vbScriptInjected=true}}},0,0,0,0,["request.ajax"],0,[Ext.data.request,"Ajax"],0));(Ext.cmd.derive("Ext.data.request.Form",Ext.data.request.Base,{start:function(m){var n=this,o=n.options,p=n.requestOptions;Ext.data.request.Base.prototype.start.call(this,m);n.form=n.upload(o.form,p.url,p.data,o);return n},abort:function(o){var p=this,e;if(p.isLoading()){try{e=p.frame.dom;if(e.stop){e.stop()}else{e.document.execCommand("Stop")}}catch(n){}}Ext.data.request.Base.prototype.abort.call(this,o);p.onComplete();p.cleanup()},cleanup:function(){var l=this,g=l.frame;if(g){g.un("load",l.onComplete,l);Ext.removeNode(g)}l.frame=l.form=null},isLoading:function(){return !!this.frame},upload:function(V,Q,L,R){V=Ext.getDom(V);R=R||{};var O=document.createElement("iframe"),I=Ext.get(O),G=I.id,U=[],T="multipart/form-data",M={target:V.target,method:V.method,encoding:V.encoding,enctype:V.enctype,action:V.action},W=function(e,f){P=document.createElement("input");Ext.fly(P).set({type:"hidden",value:f,name:e});V.appendChild(P);U.push(P)},P,J,E,K,F,N,H,v,S;I.set({name:G,cls:"x-hidden-display",src:Ext.SSL_SECURE_URL,tabIndex:-1});document.body.appendChild(O);if(document.frames){document.frames[G].name=G}Ext.fly(V).set({target:G,method:"POST",enctype:T,encoding:T,action:Q||M.action});if(L){J=Ext.Object.fromQueryString(L)||{};for(K in J){if(J.hasOwnProperty(K)){E=J[K];if(Ext.isArray(E)){F=E.length;for(N=0;N<F;N++){W(K,E[N])}}else{W(K,E)}}}}this.frame=I;I.on({load:this.onComplete,scope:this,single:!Ext.isOpera});V.submit();Ext.fly(V).set(M);for(H=U.length,v=0;v<H;v++){Ext.removeNode(U[v])}return V},getDoc:function(){var f=this.frame.dom;return(f&&(f.contentWindow.document||f.contentDocument))||(window.frames[f.id]||{}).document},getTimeout:function(){return this.options.timeout},onComplete:function(){var v=this,z=v.frame,A=v.owner,B=v.options,e,u,C,x,y;if(!z){return}if(v.aborted||v.timedout){v.result=y=v.createException();y.responseXML=null;y.responseText='{success:false,message:"'+Ext.String.trim(y.statusText)+'"}';y.request=v;e=B.failure;C=false}else{try{u=v.getDoc();v.result=y={responseText:"",responseXML:null,request:v};if(u){if(Ext.isOpera&&u.location==Ext.SSL_SECURE_URL){return}if(u.body){if((x=u.body.firstChild)&&/pre/i.test(x.tagName)){y.responseText=x.textContent||x.innerText}else{if((x=u.getElementsByTagName("textarea")[0])){y.responseText=x.value}else{y.responseText=u.body.textContent||u.body.innerText}}}y.responseXML=u.XMLDocument||u;e=B.success;C=true;y.status=200}else{Ext.raise("Could not acquire a suitable connection for the file upload service.")}}catch(w){v.result=y=v.createException();y.status=400;y.statusText=(w.message||w.description)+"";y.responseText='{success:false,message:"'+Ext.String.trim(y.statusText)+'"}';y.responseXML=null;e=B.failure;C=false}}v.frame=null;v.success=C;A.fireEvent(C?"requestcomplete":"requestexception",A,y,B);Ext.callback(e,B.scope,[y,B]);Ext.callback(B.callback,B.scope,[B,C,y]);A.onRequestComplete(v);Ext.asap(z.destroy,z);Ext.data.request.Base.prototype.onComplete.call(this)},destroy:function(){this.cleanup();Ext.data.request.Base.prototype.destroy.call(this)}},0,0,0,0,["request.form"],0,[Ext.data.request,"Form"],0));(Ext.cmd.derive("Ext.data.Connection",Ext.Base,{statics:{requestId:0},enctypeRe:/multipart\/form-data/i,config:{url:null,async:true,username:"",password:"",disableCaching:true,withCredentials:false,binary:false,cors:false,isXdr:false,defaultXdrContentType:"text/plain",disableCachingParam:"_dc",timeout:30000,extraParams:null,autoAbort:false,method:null,defaultHeaders:null,defaultPostHeader:"application/x-www-form-urlencoded; charset=UTF-8",useDefaultXhrHeader:true,defaultXhrHeader:"XMLHttpRequest"},constructor:function(f){this.mixins.observable.constructor.call(this,f);this.requests={}},request:function(o){o=o||{};var m=this,p,n;if(m.fireEvent("beforerequest",m,o)!==false){p=m.setOptions(o,o.scope||Ext.global);n=m.createRequest(o,p);return n.start(p.data)}Ext.callback(o.callback,o.scope,[o,undefined,undefined]);return Ext.Deferred.rejected([o,undefined,undefined])},createRequest:function(q,s){var n=this,p=q.type||s.type,o;if(!p){p=n.isFormUpload(q)?"form":"ajax"}if(q.autoAbort||n.getAutoAbort()){n.abort()}o=Ext.Factory.request({type:p,owner:n,options:q,requestOptions:s,ownerConfig:n.getConfig()});n.requests[o.id]=o;n.latestId=o.id;return o},isFormUpload:function(l){var g=this.getForm(l);if(g){return l.isUpload||this.enctypeRe.test(g.getAttribute("enctype"))}return false},getForm:function(f){return Ext.getDom(f.form)},setOptions:function(E,F){var v=this,z=E.params||{},w=v.getExtraParams(),A=E.urlParams,B=E.url||v.getUrl(),x=E.cors,G=E.jsonData,C,D,y;if(x!==undefined){v.setCors(x)}if(Ext.isFunction(z)){z=z.call(F,E)}if(Ext.isFunction(B)){B=B.call(F,E)}B=this.setupUrl(E,B);y=E.rawData||E.binaryData||E.xmlData||G||null;if(G&&!Ext.isPrimitive(G)){y=Ext.encode(y)}if(E.binaryData){if(v.nativeBinaryPostSupport()){y=(new Uint8Array(E.binaryData));if((Ext.isChrome&&Ext.chromeVersion<22)||Ext.isSafari||Ext.isGecko){y=y.buffer}}}if(Ext.isObject(z)){z=Ext.Object.toQueryString(z)}if(Ext.isObject(w)){w=Ext.Object.toQueryString(w)}z=z+((w)?((z)?"&":"")+w:"");A=Ext.isObject(A)?Ext.Object.toQueryString(A):A;z=this.setupParams(E,z);C=(E.method||v.getMethod()||((z||y)?"POST":"GET")).toUpperCase();this.setupMethod(E,C);D=E.disableCaching!==false?(E.disableCaching||v.getDisableCaching()):false;if(C==="GET"&&D){B=Ext.urlAppend(B,(E.disableCachingParam||v.getDisableCachingParam())+"="+(new Date().getTime()))}if((C=="GET"||y)&&z){B=Ext.urlAppend(B,z);z=null}if(A){B=Ext.urlAppend(B,A)}return{url:B,method:C,data:y||z||null}},setupUrl:function(m,n){var l=this.getForm(m);if(l){n=n||l.action}return n},setupParams:function(p,m){var n=this.getForm(p),o;if(n&&!this.isFormUpload(p)){o=Ext.Element.serializeForm(n);m=m?(m+"&"+o):o}return m},setupMethod:function(l,g){if(this.isFormUpload(l)){return"POST"}return g},isLoading:function(f){if(!f){f=this.getLatest()}return f?f.isLoading():false},abort:function(f){if(!f){f=this.getLatest()}if(f&&f.isLoading()){f.abort()}},abortAll:function(){var g=this.requests,l;for(l in g){this.abort(g[l])}},getLatest:function(){var g=this.latestId,l;if(g){l=this.requests[g]}return l||null},clearTimeout:function(f){if(!f){f=this.getLatest()}if(f){f.clearTimer()}},onRequestComplete:function(f){delete this.requests[f.id]},nativeBinaryPostSupport:function(){return Ext.isChrome||(Ext.isSafari&&Ext.isDefined(window.Uint8Array))||(Ext.isGecko&&Ext.isDefined(window.Uint8Array))}},1,0,0,0,0,[["observable",Ext.mixin.Observable]],[Ext.data,"Connection"],0));(Ext.cmd.derive("Ext.Ajax",Ext.data.Connection,{singleton:true,autoAbort:false},0,0,0,0,0,0,[Ext,"Ajax"],0));(Ext.cmd.derive("Ext.AnimationQueue",Ext.Base,{singleton:true,constructor:function(){var f=this;f.queue=[];f.taskQueue=[];f.runningQueue=[];f.idleQueue=[];f.isRunning=false;f.isIdle=true;f.run=Ext.Function.bind(f.run,f);if(Ext.os.is.iOS){Ext.interval(f.watch,500,f)}},start:function(n,o,p){var m=this;m.queue.push(arguments);if(!m.isRunning){if(m.hasOwnProperty("idleTimer")){clearTimeout(m.idleTimer);delete m.idleTimer}if(m.hasOwnProperty("idleQueueTimer")){clearTimeout(m.idleQueueTimer);delete m.idleQueueTimer}m.isIdle=false;m.isRunning=true;m.doStart()}},watch:function(){if(this.isRunning&&Ext.now()-this.lastRunTime>=500){this.run()}},run:function(){var n=this;if(!n.isRunning){return}var s=n.runningQueue,q=Ext.now(),p,o;n.lastRunTime=q;n.frameStartTime=q;s.push.apply(s,n.queue);for(p=0,o=s.length;p<o;p++){n.invoke(s[p])}s.length=0;n.doIterate()},doStart:function(){this.animationFrameId=Ext.Function.requestAnimationFrame(this.run);this.lastRunTime=Ext.now()},doIterate:function(){this.animationFrameId=Ext.Function.requestAnimationFrame(this.run)},doStop:function(){Ext.Function.cancelAnimationFrame(this.animationFrameId)},stop:function(q,s,u){var w=this;if(!w.isRunning){return}var v=w.queue,x=v.length,t,y;for(t=0;t<x;t++){y=v[t];if(y[0]===q&&y[1]===s&&y[2]===u){v.splice(t,1);t--;x--}}if(x===0){w.doStop();w.isRunning=false;w.idleTimer=Ext.defer(w.whenIdle,100,w)}},onIdle:function(p,q,u){var s=this.idleQueue,t,w,v;for(t=0,w=s.length;t<w;t++){v=s[t];if(p===v[0]&&q===v[1]&&u===v[2]){return}}s.push(arguments);if(this.isIdle){this.processIdleQueue()}},unIdle:function(p,q,u){var s=this.idleQueue,t,w,v;for(t=0,w=s.length;t<w;t++){v=s[t];if(p===v[0]&&q===v[1]&&u===v[2]){s.splice(t,1);return true}}return false},queueTask:function(l,m,n){this.taskQueue.push(arguments);this.processTaskQueue()},dequeueTask:function(p,q,u){var s=this.taskQueue,t,w,v;for(t=0,w=s.length;t<w;t++){v=s[t];if(p===v[0]&&q===v[1]&&u===v[2]){s.splice(t,1);t--;w--}}},invoke:function(m){var n=m[0],o=m[1],p=m[2];n=(typeof n=="string"?o[n]:n);if(Ext.isArray(p)){n.apply(o,p)}else{n.call(o,p)}},whenIdle:function(){this.isIdle=true;this.processIdleQueue()},processIdleQueue:function(){if(!this.hasOwnProperty("idleQueueTimer")){this.idleQueueTimer=Ext.defer(this.processIdleQueueItem,1,this)}},processIdleQueueItem:function(){delete this.idleQueueTimer;if(!this.isIdle){return}var l=this.idleQueue,g;if(l.length>0){g=l.shift();this.invoke(g);this.processIdleQueue()}},processTaskQueue:function(){if(!this.hasOwnProperty("taskQueueTimer")){this.taskQueueTimer=Ext.defer(this.processTaskQueueItem,15,this)}},processTaskQueueItem:function(){delete this.taskQueueTimer;var l=this.taskQueue,g;if(l.length>0){g=l.shift();this.invoke(g);this.processTaskQueue()}}},1,0,0,0,0,0,[Ext,"AnimationQueue"],0));(Ext.cmd.derive("Ext.ComponentManager",Ext.Base,{alternateClassName:"Ext.ComponentMgr",singleton:true,count:0,typeName:"xtype",constructor:function(l){var g=this;Ext.apply(g,l||{});g.all={};g.references={};g.onAvailableCallbacks={}},create:function(l,g){if(typeof l==="string"){return Ext.widget(l)}if(l.isComponent){return l}if("xclass" in l){return Ext.create(l.xclass,l)}return Ext.widget(l.xtype||g,l)},get:function(f){return this.all[f]},register:function(s){var n=this,o=n.all,p=s.getId(),q=n.onAvailableCallbacks;o[p]=s;if(s.getReference&&s.getReference()){n.references[p]=s}++n.count;if(!n.hasFocusListener){Ext.on("focus",n.onGlobalFocus,n);n.hasFocusListener=true}q=q&&q[p];if(q&&q.length){n.notifyAvailable(s)}},unregister:function(l){var g=l.getId();if(l.getReference&&l.getReference()){this.references[g]=null;delete this.references[g]}this.all[g]=null;delete this.all[g];this.count--},markReferencesDirty:function(){this.referencesDirty=true},fixReferences:function(){var l=this,m=l.references,n;if(l.referencesDirty){for(n in m){if(m.hasOwnProperty(n)){m[n].fixReference()}}l.referencesDirty=false}},onAvailable:function(v,s,t){var w=this,p=w.onAvailableCallbacks,u=w.all,q;if(v in u){q=u[v];s.call(t||q,q)}else{if(v){if(!Ext.isArray(p[v])){p[v]=[]}p[v].push(function(e){s.call(t||e,e)})}}},notifyAvailable:function(g){var l=this.onAvailableCallbacks[g&&g.getId()]||[];while(l.length){(l.shift())(g)}},each:function(g,l){return Ext.Object.each(this.all,g,l)},getCount:function(){return this.count},getAll:function(){return Ext.Object.getValues(this.all)},getActiveComponent:function(){return Ext.Component.fromElement(Ext.dom.Element.getActiveElement())},onGlobalFocus:function(w){var e=this,t=w.toElement,v=w.fromElement,x=Ext.Component.fromElement(t),u=Ext.Component.fromElement(v),s,y;if(x===u){return}s=e.getCommonAncestor(u,x);if(u&&!(u.destroyed||u.destroying)){if(u.handleBlurEvent){u.handleBlurEvent(w)}for(y=u;y&&y!==s;y=y.getRefOwner()){if(!(y.destroyed||y.destroying)){y.onFocusLeave({event:w.event,type:"focusleave",target:v,relatedTarget:t,fromComponent:u,toComponent:x})}}}if(x&&!(x.destroyed||x.destroying)){if(x.handleFocusEvent){x.handleFocusEvent(w)}for(y=x;y&&y!==s;y=y.getRefOwner()){y.onFocusEnter({event:w.event,type:"focusenter",relatedTarget:v,target:t,fromComponent:u,toComponent:x})}}},getCommonAncestor:function(g,l){if(g===l){return g}while(g&&!(g.isAncestor(l)||g===l)){g=g.getRefOwner()}return g},privates:{clearAll:function(){this.all={};this.references={};this.onAvailableCallbacks={}},fromElement:function(z,x,y){var u=Ext.getDom(z),A=this.all,w=0,s,v,t;if(typeof x!=="number"){s=Ext.getDom(x);x=Number.MAX_VALUE}while(u&&u.nodeType===1&&w<x&&u!==s){v=u.getAttribute("data-componentid")||u.id;if(v){t=A[v];if(t&&(!y||Ext.ComponentQuery.is(t,y))){return t}w++}u=u.parentNode}return null}},deprecated:{5:{methods:{isRegistered:null,registerType:null}}}},1,0,0,0,0,0,[Ext,"ComponentManager",Ext,"ComponentMgr"],function(){Ext.getCmp=function(f){return Ext.ComponentManager.get(f)}}));Ext.ns("Ext.util").Operators={"=":function(l,g){return l==g},"!=":function(l,g){return l!=g},"^=":function(l,g){return l&&l.substr(0,g.length)==g},"$=":function(l,g){return l&&l.substr(l.length-g.length)==g},"*=":function(l,g){return l&&l.indexOf(g)!==-1},"%=":function(l,g){return(l%g)===0},"|=":function(l,g){return l&&(l==g||l.substr(0,g.length+1)==g+"-")},"~=":function(l,g){return l&&(" "+l+" ").indexOf(" "+g+" ")!=-1}};(Ext.cmd.derive("Ext.util.LruCache",Ext.util.HashMap,{config:{maxSize:null},add:function(s,n){var o=this,p,q;o.removeAtKey(s);q=o.last;p={prev:q,next:null,key:s,value:n};if(q){q.next=p}else{o.first=p}o.last=p;Ext.util.HashMap.prototype.add.call(this,s,p);o.prune();return n},insertBefore:function(s,u,q){var o=this,t,p;if(q=this.map[this.findKey(q)]){t=o.findKey(u);if(t){o.unlinkEntry(p=o.map[t])}else{p={prev:q.prev,next:q,key:s,value:u}}if(q.prev){p.prev.next=p}else{o.first=p}p.next=q;q.prev=p;o.prune();return u}else{return o.add(s,u)}},get:function(l){var g=this.map[l];if(g){if(g.next){this.moveToEnd(g)}return g.value}},removeAtKey:function(f){this.unlinkEntry(this.map[f]);return Ext.util.HashMap.prototype.removeAtKey.apply(this,arguments)},clear:function(f){this.first=this.last=null;return Ext.util.HashMap.prototype.clear.call(this,f)},unlinkEntry:function(f){if(f){if(f.next){f.next.prev=f.prev}else{this.last=f.prev}if(f.prev){f.prev.next=f.next}else{this.first=f.next}f.prev=f.next=null}},moveToEnd:function(f){this.unlinkEntry(f);if(f.prev=this.last){this.last.next=f}else{this.first=f}this.last=f},getArray:function(l){var n=[],m=this.first;while(m){n.push(l?m.key:m.value);m=m.next}return n},each:function(q,s,t){var u=this,o=t?u.last:u.first,p=u.length;s=s||u;while(o){if(q.call(s,o.key,o.value,p)===false){break}o=t?o.prev:o.next}return u},findKey:function(m){var n,l=this.map;for(n in l){if(l.hasOwnProperty(n)&&l[n].value===m){return n}}return undefined},clone:function(){var n=new this.self(this.initialConfig),l=this.map,m;n.suspendEvents();for(m in l){if(l.hasOwnProperty(m)){n.add(m,l[m].value)}}n.resumeEvents();return n},prune:function(){var m=this,n=m.getMaxSize(),l=n?(m.length-n):0;if(l>0){for(;m.first&&l;l--){m.removeAtKey(m.first.key)}}}},0,0,0,0,0,0,[Ext.util,"LruCache"],0));(Ext.cmd.derive("Ext.ComponentQuery",Ext.Base,{singleton:true},0,0,0,0,0,0,[Ext,"ComponentQuery"],function(){var N=this,K=Ext.util.Operators,I=/(\d*)n\+?(\d*)/,O=/\D/,G=/^(\s)+/,H=/\\(.)/g,F=new Ext.util.LruCache({maxSize:100}),E=["var r = [],","i = 0,","it = items,","l = it.length,","c;","for (; i < l; i++) {","c = it[i];","if (c.{0}) {","r.push(c);","}","}","return r;"].join(""),D=function(e,f){return f.method.apply(this,[e].concat(f.args))},S=function(m,e){var o=[],l=0,f=m.length,g,n=e!==">";for(;l<f;l++){g=m[l];if(g.getRefItems){o=o.concat(g.getRefItems(n))}}return o},M=function(l){var m=[],g=0,e=l.length,f;for(;g<e;g++){f=l[g];while(!!(f=f.getRefOwner())){m.push(f)}}return m},P=function(n,e,f){if(e==="*"){return n.slice()}else{var o=[],m=0,g=n.length,l;for(;m<g;m++){l=n[m];if(l.isXType(e,f)){o.push(l)}}return o}},R=function(p,o,w,e){var l=[],q=0,f=p.length,m,u,n,g,s,t,v;if(o.charAt(0)==="@"){m=true;o=o.substr(1)}if(o.charAt(0)==="?"){m=true;u=true;o=o.substr(1)}for(;q<f;q++){n=p[q];v=n.self&&n.self.getConfigurator&&n.self.$config.configs[o];if(v){g=n[v.names.get]()}else{if(m&&!n.hasOwnProperty(o)){continue}else{g=n[o]}}if(u){l.push(n)}else{if(w==="~="){if(g){if(!Ext.isArray(g)){g=g.split(" ")}for(s=0,t=g.length;s<t;s++){if(K[w](Ext.coerce(g[s],e),e)){l.push(n);break}}}}else{if(w==="/="){if(g!=null&&e.test(g)){l.push(n)}}else{if(!e?!!n[o]:K[w](Ext.coerce(g,e),e)){l.push(n)}}}}}return l},L=function(m,e,n){var p=[],l=0,f=m.length,g,o;for(;l<f;l++){g=m[l];o=n?g.id:g.getItemId();if(o===e){p.push(g)}}return p},B=function(g,f,e){return N.pseudos[f](g,e)},J=/^(\s?([>\^])\s?|\s|$)/,C=/^(#)?((?:\\\.|[\w\-])+|\*)(?:\((true|false)\))?/,Q=[{re:/^\.((?:\\\.|[\w\-])+)(?:\((true|false)\))?/,method:P,argTransform:function(e){if(e[1]!==undefined){e[1]=e[1].replace(H,"$1")}return e.slice(1)}},{re:/^(?:\[((?:[@?$])?[\w\-]*)\s*(?:([\^$*~%!\/]?=)\s*(['"])?((?:\\\]|.)*?)\3)?(?!\\)\])/,method:R,argTransform:function(g){var n=g[0],f=g[1],m=g[2],l=g[4],e;if(l!==undefined){l=l.replace(H,"$1")}if(m==="/="){e=F.get(l);if(e){l=e}else{l=F.add(l,new RegExp(l))}}return[f,m,l]}},{re:/^#((?:\\\.|[\w\-])+)/,method:L},{re:/^\:([\w\-]+)(?:\(((?:\{[^\}]+\})|(?:(?!\{)[^\s>\/]*?(?!\})))\))?/,method:B,argTransform:function(e){if(e[2]!==undefined){e[2]=e[2].replace(H,"$1")}return e.slice(1)}},{re:/^(?:\{([^\}]+)\})/,method:E}];N.Query=Ext.extend(Object,{constructor:function(e){e=e||{};Ext.apply(this,e)},execute:function(l){var g=this.operations,m=[],e,f,n;for(f=0,n=g.length;f<n;f++){e=g[f];m=m.concat(this._execute(l,e))}return m},_execute:function(m,g){var f=0,e=g.length,l,n;if(!m){n=Ext.ComponentManager.getAll()}else{if(Ext.isIterable(m)){n=m}else{if(m.isMixedCollection){n=m.items}}}for(;f<e;f++){l=g[f];if(l.mode==="^"){n=M(n||[m])}else{if(l.mode){n=S(n||[m],l.mode)}else{n=D(n||S([m]),l)}}if(f===e-1){return n}}return[]},is:function(g,m){var l=this.operations,n=false,o=l.length,e,f;if(o===0){return true}for(f=0;f<o;f++){e=l[f];n=this._is(g,m,e);if(n){return n}}return false},_is:function(n,m,g){var p=g.length,f=[n],e,s,t,q,o,l;for(s=p-1;s>=0;--s){e=g[s];q=e.mode;if(q){if(q==="^"){f=S(f," ")}else{if(q===">"){o=[];for(t=0,p=f.length;t<p;++t){l=f[t].getRefOwner();if(l){o.push(l)}}f=o}else{f=M(f)}}}else{f=D(f,e)}if(f.length===0){return false}}if(m){if(!q){f=M(f)}if(f.length>0){f=D(f,{method:L,args:[m.id,true]})}if(f.length===0){return false}}return true},getMatches:function(e,g){var l=g.length,f;for(f=0;f<l;++f){e=D(e,g[f]);if(e.length===0){break}}return e},isMultiMatch:function(){return this.operations.length>1}});Ext.apply(N,{cache:new Ext.util.LruCache({maxSize:100}),pseudos:{not:function(e,o){var g=0,f=e.length,l=[],m=-1,n;for(;g<f;++g){n=e[g];if(!N.is(n,o)){l[++m]=n}}return l},first:function(e){var f=[];if(e.length>0){f.push(e[0])}return f},last:function(e){var g=e.length,f=[];if(g>0){f.push(e[g-1])}return f},focusable:function(l){var m=l.length,f=[],g=0,e;for(;g<m;g++){e=l[g];if(e.isFocusable&&e.isFocusable()){f.push(e)}}return f},canfocus:function(m,f){var n=m.length,g=[],l=0,e;for(;l<n;l++){e=m[l];if(e.canFocus&&e.canFocus(false,f)){g.push(e)}}return g},"nth-child":function(n,m){var l=[],f=I.exec(m==="even"&&"2n"||m==="odd"&&"2n+1"||!O.test(m)&&"n+"+m||m),p=(f[1]||1)-0,o=f[2]-0,q,g,e;for(q=0;g=n[q];q++){e=q+1;if(p===1){if(o===0||e===o){l.push(g)}}else{if((e+o)%p===0){l.push(g)}}}return l},scrollable:function(l){var m=l.length,f=[],g=0,e;for(;g<m;g++){e=l[g];if(e.scrollable||e._scrollable){f.push(e)}}return f},visible:function(l,m){m=m==="true";var n=l.length,f=[],g=0,e;for(;g<n;g++){e=l[g];if(e.isVisible(m)){f.push(e)}}return f}},query:function(g,m){if(!g){return Ext.ComponentManager.all.getArray()}var e=[],l=[],o={},p=N.cache.get(g),q,n,f;if(!p){p=N.cache.add(g,N.parse(g))}e=p.execute(m);if(p.isMultiMatch()){q=e.length;for(f=0;f<q;f++){n=e[f];if(!o[n.id]){l.push(n);o[n.id]=true}}e=l}return e},visitPreOrder:function(m,g,e,f,l){N._visit(true,m,g,e,f,l)},visitPostOrder:function(m,g,e,f,l){N._visit(false,m,g,e,f,l)},_visit:function(m,f,n,o,l,s){var p=N.cache.get(f),t=[n],g,q=0,u,e;if(!p){p=N.cache.add(f,N.parse(f))}e=p.is(n);if(n.getRefItems){g=n.getRefItems();q=g.length}if(s){Ext.Array.push(t,s)}if(m){if(e){if(o.apply(l||n,t)===false){return false}}}for(u=0;u<q;u++){if(N._visit.call(N,m,f,g[u],o,l,s)===false){return false}}if(!m){if(e){if(o.apply(l||n,t)===false){return false}}}},is:function(f,l,g){if(!l){return true}var e=N.cache.get(l);if(!e){e=N.cache.add(l,N.parse(l))}return e.is(f,g)},parse:function(m){var l=[],f,e,g,n;f=Ext.splitAndUnescape(m,",");for(g=0,n=f.length;g<n;g++){e=Ext.String.trim(f[g]);l.push(N._parse(e))}return new N.Query({operations:l})},_parse:function(u){var f=[],w=Ext.String.trim,e=Q.length,o,t,v,n,m,l,x,s,q,g,p;while(u&&o!==u){o=u;t=u.match(C);if(t){n=t[1];v=w(t[2]).replace(H,"$1");if(n==="#"){f.push({method:L,args:[v]})}else{f.push({method:P,args:[v,Boolean(t[3])]})}u=u.replace(t[0],"").replace(G,"$1")}while(!(m=u.match(J))){for(s=0;u&&s<e;s++){q=Q[s];l=u.match(q.re);g=q.method;x=q.argTransform;if(l){if(x){p=x(l)}else{p=l.slice(1)}f.push({method:Ext.isString(q.method)?Ext.functionFactory("items",Ext.String.format.apply(Ext.String,[g].concat(l.slice(1)))):q.method,args:p});u=u.replace(l[0],"").replace(G,"$1");break}if(s===(e-1)){Ext.raise('Invalid ComponentQuery selector: "'+arguments[0]+'"')}}}if(m[1]){f.push({mode:m[2]||m[1]});u=u.replace(m[0],"").replace(G,"")}}return f}});Ext.all=function(){return N.query.apply(N,arguments)};Ext.first=function(){var e=N.query.apply(N,arguments);return(e&&e[0])||null}}));(Ext.cmd.derive("Ext.Evented",Ext.Base,{alternateClassName:"Ext.EventedBase",initialized:false,constructor:function(f){this.mixins.observable.constructor.call(this,f);this.initialized=true},onClassExtended:function(s,o){if(!o.hasOwnProperty("eventedConfig")){return}var p=o.config,u=o.eventedConfig,q,t;if(p){Ext.applyIf(p,u)}else{s.addConfig(u)}for(q in u){if(u.hasOwnProperty(q)){t=Ext.Config.get(q);o[t.names.set]=t.eventedSetter||t.getEventedSetter()}}}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext,"Evented",Ext,"EventedBase"],0));(Ext.cmd.derive("Ext.util.Positionable",Ext.Base,{mixinId:"positionable",_positionTopLeft:["position","top","left"],clippedCls:"x-clipped",afterSetPosition:Ext.emptyFn,adjustForConstraints:function(l,m){var n=this.getConstrainVector(m,l);if(n){l[0]+=n[0];l[1]+=n[1]}return l},alignTo:function(q,t,u,s){var o=this,p=o.el;return o.setXY(o.getAlignToXY(q,t,u),p.anim&&!!s?p.anim(s):false)},calculateAnchorXY:function(s,n,o,q){var p=this.getRegion();p.setPosition(0,0);p.translateBy(n||0,o||0);if(q){p.setWidth(q.width);p.setHeight(q.height)}return p.getAnchorPoint(s)},convertPositionSpec:function(f){return Ext.util.Region.getAlignInfo(f)},getAlignToXY:function(p,o,m){var n=this.getAlignToRegion(p,o,m);return[n.x,n.y]},getAlignToRegion:function(t,s,v,p){var q=this,u,w;t=Ext.get(t.el||t);if(!t||!t.dom){}s=q.convertPositionSpec(s);if(s.constrain){if(s.constrain==="!"){u=t}else{u=q.constrainTo||q.container||q.el.parent()}u=Ext.get(u.el||u).getConstrainRegion()}w=q.getRegion().alignTo({target:t.getRegion(),inside:u,minHeight:p,offset:v,align:s,axisLock:true});return w},getAnchorXY:function(u,s,t){var y=this,x=y.getRegion(),q=y.el,w=q.dom.nodeName==="BODY"||q.dom.nodeType===9,v=q.getScroll();if(s){x.setPosition(0,0)}else{if(w){x.setPosition(v.left,v.top)}}if(t){x.setWidth(t.width);x.setHeight(t.height)}return x.getAnchorPoint(u)},getBox:function(z,w){var y=this,D=w?y.getLocalXY():y.getXY(),v=D[0],x=D[1],u,B,A,C,E;if(y.el.dom.nodeName==="BODY"||y.el.dom.nodeType===9){u=Ext.Element.getViewportWidth();B=Ext.Element.getViewportHeight()}else{u=y.getWidth();B=y.getHeight()}if(z){A=y.getBorderPadding();C=A.beforeX;E=A.beforeY;v+=C;x+=E;u-=(C+A.afterX);B-=(E+A.afterY)}return{x:v,left:v,0:v,y:x,top:x,1:x,width:u,height:B,right:v+u,bottom:x+B}},calculateConstrainedPosition:function(x,C,F,A){var G=this,B,w=G.floatParent,z=w?w.getTargetEl():null,D,y,v,E=false;if(F&&w){D=z.getXY();y=z.getBorderPadding();D[0]+=y.beforeX;D[1]+=y.beforeY;if(C){v=[C[0]+D[0],C[1]+D[1]]}}else{v=C}x=x||G.constrainTo||z||G.container||G.el.parent();if(F&&v){v=G.reverseTranslateXY(v)}B=((G.constrainHeader&&G.header.rendered)?G.header:G).getConstrainVector(x,v,A);if(B){E=C||G.getPosition(F);E[0]+=B[0];E[1]+=B[1]}return E},getConstrainRegion:function(){var w=this,A=w.el,C=A.dom.nodeName==="BODY",y=A.dom,x=A.getBorders(),v=A.getXY(),z=v[0]+x.beforeX,u=v[1]+x.beforeY,E,B,D;if(C){E=A.getScroll();z=E.left;u=E.top;B=Ext.Element.getViewportWidth();D=Ext.Element.getViewportHeight()}else{B=y.clientWidth;D=y.clientHeight}return new Ext.util.Region(u,z+B,u+D,z)},getConstrainVector:function(u,y,w){var t=this,A=t.getRegion(),x=[0,0],z=(t.shadow&&t.constrainShadow&&!t.shadowDisabled)?t.el.shadow.getShadowSize():undefined,s=false,v=t.constraintInsets;if(!(u instanceof Ext.util.Region)){u=Ext.get(u.el||u);u=u.getConstrainRegion()}if(v){v=Ext.isObject(v)?v:Ext.Element.parseBox(v);u.adjust(v.top,v.right,v.bottom,v.left)}if(y){A.translateBy(y[0]-A.x,y[1]-A.y)}if(w){A.right=A.left+w[0];A.bottom=A.top+w[1]}if(z){u.adjust(z[0],-z[1],-z[2],z[3])}if(A.right>u.right){s=true;x[0]=(u.right-A.right)}if(A.left+x[0]<u.left){s=true;x[0]=(u.left-A.left)}if(A.bottom>u.bottom){s=true;x[1]=(u.bottom-A.bottom)}if(A.top+x[1]<u.top){s=true;x[1]=(u.top-A.top)}return s?x:false},getOffsetsTo:function(n){var e=this.getXY(),m=Ext.fly(n.el||n).getXY();return[e[0]-m[0],e[1]-m[1]]},getRegion:function(l){var g=this.getBox(l);return new Ext.util.Region(g.top,g.right,g.bottom,g.left)},getClientRegion:function(){var o=this,p,n=o.getBox(),m=o.dom;p=m.offsetWidth-m.clientWidth;if(p){if(o.getStyle("direction")==="rtl"){n.left+=p}else{n.right-=p}}p=m.offsetHeight-m.clientHeight;if(p){n.bottom-=p}return new Ext.util.Region(n.top,n.right,n.bottom,n.left)},getViewRegion:function(){var w=this,z=w.el,B=z.dom.nodeName==="BODY",x,t,v,u,y,A,C;if(B){t=z.getScroll();y=t.left;u=t.top;A=Ext.Element.getViewportWidth();C=Ext.Element.getViewportHeight()}else{x=w.getBorderPadding();v=w.getXY();y=v[0]+x.beforeX;u=v[1]+x.beforeY;A=w.getWidth(true);C=w.getHeight(true)}return new Ext.util.Region(u,y+A,u+C,y)},getClientRegion:function(){var s=this.el,w,v,p,q,t,u;w=this.getBorderPadding();v=this.getXY();p=v[0]+w.beforeX;q=v[1]+w.beforeY;t=s.dom.clientWidth;u=s.dom.clientHeight;return new Ext.util.Region(q,p+t,q+u,p)},move:function(v,C,B){var y=this,E=y.getXY(),G=E[0],w=E[1],A=[G-C,w],F=[G+C,w],x=[G,w-C],D=[G,w+C],z={l:A,left:A,r:F,right:F,t:x,top:x,up:x,b:D,bottom:D,down:D};v=v.toLowerCase();y.setXY([z[v][0],z[v][1]],B)},setBox:function(n){var o=this,p,m;if(n.isRegion){n={x:n.left,y:n.top,width:n.right-n.left,height:n.bottom-n.top}}o.constrainBox(n);p=n.x;m=n.y;o.setXY([p,m]);o.setSize(n.width,n.height);o.afterSetPosition(p,m);return o},constrainBox:function(o){var p=this,q,s,n;if(p.constrain||p.constrainHeader){s=("x" in o)?o.x:o.left;n=("y" in o)?o.y:o.top;q=p.calculateConstrainedPosition(null,[s,n],false,[o.width,o.height]);if(q){o.x=q[0];o.y=q[1]}}},translatePoints:function(n,l){var m=this.translateXY(n,l);return{left:m.x,top:m.y}},translateXY:function(u,w){var x=this,z=x.el,t=z.getStyle(x._positionTopLeft),A=t.position==="relative",y=parseFloat(t.left),v=parseFloat(t.top),s=x.getXY();if(Ext.isArray(u)){w=u[1];u=u[0]}if(isNaN(y)){y=A?0:z.dom.offsetLeft}if(isNaN(v)){v=A?0:z.dom.offsetTop}y=(typeof u==="number")?u-s[0]+y:undefined;v=(typeof w==="number")?w-s[1]+v:undefined;return{x:y,y:v}},reverseTranslateXY:function(s){var u=s,y=this.el,x=y.dom,z=x.offsetParent,A,w,t,v;if(z){A=y.isStyle("position","relative"),w=Ext.fly(z).getXY(),t=s[0]+w[0]+z.clientLeft;v=s[1]+w[1]+z.clientTop;if(A){t+=y.getPadding("l");v+=y.getPadding("t")}u=[t,v]}return u},privates:{clipTo:function(v,C){var B,D=this.el,x=D.getRegion(),A,w,z=[],E=this.clippedCls,G,y,F;if(v.isRegion){B=v}else{B=(v.isComponent?v.el:Ext.fly(v)).getConstrainRegion()}if(!C){C=15}if(C&1&&(A=B.top-x.top)>0){z[0]=A;y=true}else{z[0]=-10000}if(C&2&&(A=x.right-B.right)>0){z[1]=Math.max(0,D.getWidth()-A);y=true}else{z[1]=10000}if(C&4&&(A=x.bottom-B.bottom)>0){z[2]=Math.max(0,D.getHeight()-A);y=true}else{z[2]=10000}if(C&8&&(A=B.left-x.left)>0){z[3]=A;y=true}else{z[3]=-10000}G="rect(";for(w=0;w<4;++w){G+=Ext.Element.addUnits(z[w],"px");G+=(w===3)?")":","}D.dom.style.clip=G;D.addCls(E);if((F=D.shadow)&&(D=F.el)&&D.dom){z[2]-=F.offsets.y;z[3]-=F.offsets.x;G="rect(";for(w=0;w<4;++w){G+=Ext.Element.addUnits(z[w],"px");G+=(w===3)?")":","}D.dom.style.clip=G;if(y&&!Ext.supports.CSS3BoxShadow){D.dom.style.display="none"}else{D.dom.style.display="";D.addCls(E)}}},clearClip:function(){var g=this.el,l=this.clippedCls;g.dom.style.clip=Ext.isIE8?"auto":"";g.removeCls(l);if(g.shadow&&g.shadow.el&&g.shadow.el.dom){g.shadow.el.dom.style.clip=Ext.isIE8?"auto":"";if(!Ext.supports.CSS3BoxShadow){g.dom.style.display="";g.removeCls(l)}}}}},0,0,0,0,0,0,[Ext.util,"Positionable"],0));Ext.define("Ext.overrides.util.Positionable",{override:"Ext.util.Positionable",anchorTo:function(v,x,A,B,t,C){var w=this,u=!Ext.isEmpty(t),z=function(){w.mixins.positionable.alignTo.call(w,v,x,A,B);Ext.callback(C,w)},y=w.getAnchor();w.removeAnchor();Ext.apply(y,{fn:z,scroll:u});Ext.on("resize",z,null);if(u){Ext.getWin().on("scroll",z,null,{buffer:!isNaN(t)?t:50})}z();return w},getAnchor:function(){var m=this.el,l,n;if(!m||!m.dom){return}l=m.getData();n=l._anchor;if(!n){n=l._anchor={}}return n},alignTo:function(s,w,x,t){var y=this,q=y.el,u,v;if(y.isComponent&&y.getSizeModel().height.shrinkWrap){if(y.maxHeight){y.setMaxHeight(null)}u=true}v=y.getAlignToRegion(s,w,x,y.minHeight||150);y.setXY([v.x,v.y],q.anim&&!!t?q.anim(t):false);if(u&&(u=v.getHeight())!==y.getHeight()){y.setMaxHeight(u)}return y},removeAnchor:function(){var f=this.getAnchor();if(f&&f.fn){Ext.un("resize",f.fn);if(f.scroll){Ext.getWin().on("scroll",f.fn)}delete f.fn}return this},setBox:function(l,n){var m=this;if(l.isRegion){l={x:l.left,y:l.top,width:l.right-l.left,height:l.bottom-l.top}}if(n){m.constrainBox(l);m.animate(Ext.applyIf({to:l,listeners:{afteranimate:Ext.Function.bind(m.afterSetPosition,m,[l.x,l.y])}},n))}else{arguments.callee.$previous.call(this,l)}return m}});(Ext.cmd.derive("Ext.dom.UnderlayPool",Ext.Base,{constructor:function(f){this.elementConfig=f;this.cache=[]},checkOut:function(){var f=this.cache.shift();if(!f){f=Ext.Element.create(this.elementConfig);f.setVisibilityMode(2)}return f},checkIn:function(f){this.cache.push(f)},reset:function(){var l=this.cache,g=l.length;while(g--){l[g].destroy()}this.cache=[]}},1,0,0,0,0,0,[Ext.dom,"UnderlayPool"],0));(Ext.cmd.derive("Ext.dom.Underlay",Ext.Base,{constructor:function(f){Ext.apply(this,f)},beforeShow:Ext.emptyFn,getInsertionTarget:function(){return this.target},getPool:function(){return this.pool||(this.self.prototype.pool=new Ext.dom.UnderlayPool(this.elementConfig))},hide:function(){var g=this,l=g.el;if(l){l.hide();g.getPool().checkIn(l);g.el=null;g.hidden=true}},realign:function(t,u,A,s){var w=this,z=w.el,x=w.target,y=w.offsets,v=Math.max;if(z){if(t==null){t=x.getX()}if(u==null){u=x.getY()}if(A==null){A=x.getWidth()}if(s==null){s=x.getHeight()}if(y){t=t+y.x;u=u+y.y;A=v(A+y.w,0);s=v(s+y.h,0)}z.setXY([t,u]);z.setSize(A,s)}},setZIndex:function(f){this.zIndex=f;if(this.el){this.el.setStyle("z-index",f)}},show:function(){var s=this,p=s.target,u=s.zIndex,t=s.el,q=s.getInsertionTarget().dom,o;if(!t){t=s.el=s.getPool().checkOut()}s.beforeShow();if(u==null){u=(parseInt(p.getStyle("z-index"),10))}if(u){t.setStyle("z-index",u)}t.setStyle("position",s.fixed?"fixed":"");o=t.dom;if(o.nextSibling!==q){p.dom.parentNode.insertBefore(o,q)}t.show();s.realign();s.hidden=false}},1,0,0,0,0,0,[Ext.dom,"Underlay"],0));(Ext.cmd.derive("Ext.dom.Shadow",Ext.dom.Underlay,{alternateClassName:"Ext.Shadow",mode:"drop",offset:4,cls:"x-"+(!Ext.supports.CSS3BoxShadow?"ie":"css")+"-shadow",constructor:function(s){var p=this,o,q,u,t;Ext.dom.Underlay.prototype.constructor.call(this,s);p.elementConfig={cls:p.cls,role:"presentation"};u=p.offset;t=Math.floor(u/2);p.opacity=50;switch(p.mode.toLowerCase()){case"drop":o={x:0,y:0,w:u,h:u};if(Ext.supports.CSS3BoxShadow){q={x:u,y:u,h:-u,w:-u}}else{q={x:-t,y:-t,h:-t,w:-t}}break;case"sides":o={x:-u,y:0,w:u*2,h:u};if(Ext.supports.CSS3BoxShadow){q={x:0,y:u,h:-u,w:0}}else{q={x:1+t-2*u,y:-(1+t),h:-1,w:t-1}}break;case"frame":o={x:-u,y:-u,w:u*2,h:u*2};if(Ext.supports.CSS3BoxShadow){q={x:0,y:0,h:0,w:0}}else{q={x:1+t-2*u,y:1+t-2*u,h:u-t-1,w:u-t-1}}break;case"bottom":o={x:-u,y:0,w:u*2,h:u};if(Ext.supports.CSS3BoxShadow){q={x:0,y:u,h:-u,w:0}}else{q={x:0,y:u,h:0,w:0}}break}p.offsets=q;p.outerOffsets=o},getShadowSize:function(){var o=this,m=o.el?o.offset:0,p=[m,m,m,m],n=o.mode.toLowerCase();if(o.el&&n!=="frame"){p[0]=0;if(n=="drop"){p[3]=0}}return p},boxShadowProperty:(function(){var g="boxShadow",l=document.documentElement.style;if(!("boxShadow" in l)){if("WebkitBoxShadow" in l){g="WebkitBoxShadow"}else{if("MozBoxShadow" in l){g="MozBoxShadow"}}}return g}()),beforeShow:function(){var m=this,n=m.el.dom.style,l=m.shim;if(Ext.supports.CSS3BoxShadow){n[m.boxShadowProperty]="0 0 "+(m.offset+2)+"px #888"}else{n.filter="progid:DXImageTransform.Microsoft.alpha(opacity="+m.opacity+") progid:DXImageTransform.Microsoft.Blur(pixelradius="+(m.offset)+")"}if(l){l.realign()}},setOpacity:function(l){var g=this.el;if(g){if(Ext.isIE&&!Ext.supports.CSS3BoxShadow){l=Math.floor(l*100/2)/100}this.opacity=l;g.setOpacity(l)}}},1,0,0,0,0,0,[Ext.dom,"Shadow",Ext,"Shadow"],0));(Ext.cmd.derive("Ext.dom.Shim",Ext.dom.Underlay,{cls:"x-shim",constructor:function(f){Ext.dom.Underlay.prototype.constructor.call(this,f);this.elementConfig={tag:"iframe",cls:this.cls,role:"presentation",frameBorder:"0",src:Ext.SSL_SECURE_URL,tabindex:"-1"}},getInsertionTarget:function(){var f=this.shadow;return(f&&f.el)||this.target}},1,0,0,0,0,0,[Ext.dom,"Shim"],0));(Ext.cmd.derive("Ext.dom.ElementEvent",Ext.util.Event,{addListener:function(x,F,E,B,z){var y=this,w=false,D=y.name,G=Ext.event.publisher.Dom.instance.directEvents[D],C,A,v;E=E||{};if(E.delegated===false||G){if(G&&E.delegate){E.capture=true}if(E.capture){v=y.directCaptures||(y.directCaptures=new Ext.util.Event(y.observable,D));w=v.addListener(x,F,E,B,z)}else{A=y.directs||(y.directs=new Ext.util.Event(y.observable,D));w=A.addListener(x,F,E,B,z)}}else{if(E.capture){C=y.captures||(y.captures=new Ext.util.Event(y.observable,D));w=C.addListener(x,F,E,B,z)}else{w=Ext.util.Event.prototype.addListener.call(this,x,F,E,B,z)}}return w},removeListener:function(q,s){var y=this,w=y.captures,t=y.directs,x=y.directCaptures,v=false,u=y.findListener(q,s);if(u!==-1){v=Ext.util.Event.prototype.removeListener.call(this,q,s,u)}else{if(t){u=t.findListener(q,s)}if(u!==-1){v=t.removeListener(q,s,u)}else{if(w){u=w.findListener(q,s)}if(u!==-1){v=w.removeListener(q,s,u)}else{if(x){u=x.findListener(q,s);if(u!==-1){v=x.removeListener(q,s,u)}}}}}return v},clearListeners:function(){var n=this,m=n.directCaptures,o=n.directs,p=n.captures;if(m){m.clearListeners()}if(o){o.clearListeners()}if(p){p.clearListeners()}Ext.util.Event.prototype.clearListeners.call(this)},suspend:function(){var n=this,m=n.directCaptures,o=n.directs,p=n.captures;if(m){m.suspend()}if(o){o.suspend()}if(p){p.suspend()}Ext.util.Event.prototype.suspend.call(this)},resume:function(){var n=this,m=n.directCaptures,o=n.directs,p=n.captures;if(m){m.resume()}if(o){o.resume()}if(p){p.resume()}Ext.util.Event.prototype.resume.call(this)}},0,0,0,0,0,0,[Ext.dom,"ElementEvent"],0));(Ext.cmd.derive("Ext.event.publisher.Publisher",Ext.Base,{isEventPublisher:true,$vetoClearingPrototypeOnDestroy:true,handledEvents:[],statics:{publishers:{},publishersByEvent:{}},constructor:function(){var g=this,l=g.type;g.handles={};g.registerEvents();Ext.event.publisher.Publisher.publishers[l]=g},registerEvents:function(p){var v=this,q=Ext.event.publisher.Publisher.publishersByEvent,t=p||v.handledEvents,w=t.length,u,s;for(s=0;s<w;s++){u=t[s];v.handles[u]=1;q[u]=v}},fire:function(n,p,o){var m;if(n.hasListeners[p]){m=n.events[p];if(m){m.fire.apply(m,o)}}}},1,0,0,0,0,0,[Ext.event.publisher,"Publisher"],0));(Ext.cmd.derive("Ext.util.Offset",Ext.Base,{statics:{fromObject:function(f){if(f instanceof this){return f}if(typeof f==="number"){return new this(f,f)}if(f.length){return new this(f[0],f[1])}return new this(f.x,f.y)}},constructor:function(l,g){this.x=(l!=null&&!isNaN(l))?l:0;this.y=(g!=null&&!isNaN(g))?g:0;return this},copy:function(){return new Ext.util.Offset(this.x,this.y)},copyFrom:function(f){this.x=f.x;this.y=f.y},toString:function(){return"Offset["+this.x+","+this.y+"]"},equals:function(f){return(this.x===f.x&&this.y===f.y)},add:function(f){this.x+=f.x;this.y+=f.y},round:function(g){if(!isNaN(g)){var l=Math.pow(10,g);this.x=Math.round(this.x*l)/l;this.y=Math.round(this.y*l)/l}else{this.x=Math.round(this.x);this.y=Math.round(this.y)}},isZero:function(){return this.x===0&&this.y===0}},3,0,0,0,0,0,[Ext.util,"Offset"],0));(Ext.cmd.derive("Ext.util.Region",Ext.Base,function(){var G=Ext.util,M=/([^\?!]*)(!|\?)?$/,O=/^(?:(?:([trbl])(\d+))|(tl|t|tc|tr|l|c|r|bl|b|bc|br))(?:-(?:(?:([trbl])(\d+))|(tl|t|tc|tr|l|c|r|bl|b|bc|br)))?$/i,C={l:0,r:100,t:0,b:100,c:50},A={l:100,r:0,t:0,b:100,c:50},J={b:0,l:1,t:2,r:3},N={"tl-tr":"l0-r0","tl-r":"l0-r50","bl-r":"l100-r50","bl-br":"l100-r100","tr-tl":"r0-l0","tr-l":"r0-l50","br-l":"r100-l50","br-bl":"r100-l100"},H={"tl-tr":"r0-l0","tl-r":"r0-l50","bl-r":"r100-l50","bl-br":"r100-l100","tr-tl":"l0-r0","tr-l":"l0-r50","br-l":"l100-r50","br-bl":"l100-r100"},z=[],F=new G.Offset(0,0),L=function(n){var l=G.Region,o=typeof n,f,e,m,g;if(n==null){return l.EMPTY}if(n.isRegion){return n}if(n.isElement||n.nodeType===1){return this.getRegion(n)}if(o==="string"){n=n.split(" ");switch(n.length){case 1:n[1]=n[2]=n[3]=n[0];break;case 2:n[2]=n[0];n[3]=n[1];break;case 3:n[3]=n[1]}f=parseInt(n[0],10)||0;e=parseInt(n[1],10)||0;m=parseInt(n[2],10)||0;g=parseInt(n[3],10)||0}else{if(o==="number"){f=e=m=g=n}else{if(typeof n.x==="number"){f=n.y;g=n.x;if(typeof n.right==="number"){e=n.right;m=n.bottom}else{e=g+n.width;m=f+n.height}}}}return new l(f,e,m,g)},D=[-1,1,1,-1],K=function(g,e,f){if(f!=null&&e){z[0]=z[1]=z[2]=z[3]=0;z[f]=e.y*D[f];g=G.Region.from(g);g.adjust.apply(g,z)}return g},B=function(u,n,l,t,g){var o=Math.ceil(t.x/2)+2,m,f,v,e,p,q,s;if(g&&!g.intersect(u)){return}if(l!=null){if(l&1){m=new G.Region(0,0,0,0).setWidth(t.y).setHeight(t.x);f=l===3;q=f?n.right:n.left;v=new G.Region(Math.max(n.top,u.top),q,Math.min(n.bottom,u.bottom),q);if(u.getHeight()>o){e=v.getHeight();if(e<u.width&&e<t.x+4){if(e<o){if(v.getAnchorPoint_c()[1]>u.getAnchorPoint_c()[1]){s=u.bottom-o}else{p=true;s=u.top+o-n.getHeight()}if(g){s=Math.min(Math.max(s,g.top),g.bottom-n.getHeight())}n.setPosition(n.x,s);v=new G.Region(Math.max(n.top,u.top),q,Math.min(n.bottom,u.bottom),q);e=v.getHeight();if(e<o){return}if(p){v.setPosition(q,u.y-t.x/2-2)}}v.setHeight(Math.max(e,t.x+4));if(g&&!g.contains(v)){return}}}n.anchor=m.alignTo({target:v,align:f?"l-r":"r-l",overlap:true});n.anchor.position=f?"right":"left"}else{m=new G.Region(0,0,0,0).setWidth(t.x).setHeight(t.y);f=l===0;s=f?n.bottom:n.top;v=new G.Region(s,Math.min(n.right,u.right),s,Math.max(n.left,u.left));if(u.getWidth()>o){e=v.getWidth();if(e<u.height&&e<t.x+4){if(e<o){if(v.getAnchorPoint_c()[0]>u.getAnchorPoint_c()[0]){q=u.right-o}else{p=true;q=u.left+o-n.getWidth()}if(g){q=Math.min(Math.max(q,g.left),g.right-n.getWidth())}n.setPosition(q,n.y);v=new G.Region(s,Math.min(n.right,u.right),s,Math.max(n.left,u.left));e=v.getWidth();if(e<o){return}if(p){v.setPosition(u.x-t.x/2-2,s)}}v.setWidth(Math.max(e,t.x+4));if(g&&!g.contains(v)){return}}}n.anchor=m.alignTo({target:v,align:f?"t-b":"b-t",overlap:true});n.anchor.position=f?"bottom":"top"}n.anchor.align=l}return n},I=function(l,e,f,g){var m;if(l&&g){if(e.top>=f.bottom&&e.bottom>g.bottom){e.setHeight(Math.max(e.getHeight()+g.bottom-e.bottom,l));e.constrainHeight=true}else{if(e.bottom<=f.top&&e.top<g.top){m=Math.max(e.getHeight()+e.top-g.top,l);e.adjust(e.getHeight()-m);e.constrainHeight=true}else{if(e.getHeight()>g.getHeight()){e.setHeight(Math.max(l,g.getHeight()));e.setPosition(e.x,0);e.constrainHeight=true}}}}},E=function(m,e,f,l){var g;if(m&&l){if(e.left>=f.right&&e.right>l.right){e.setWidth(Math.max(e.getWidth()+l.right-e.right,m));e.constrainWidth=true}else{if(e.right<=f.left&&e.left<l.left){g=Math.max(e.getWidth()+e.left-l.left,m);e.adjust(0,0,0,e.getWidth()-g);e.constrainWidth=true}else{if(e.getWidth()>l.getWidth()){e.setWidth(Math.max(m,l.getWidth()));e.setPosition(0,e.y);e.constrainWidth=true}}}}};return{isRegion:true,statics:{getRegion:function(e){return Ext.fly(e).getRegion()},from:function(e){return new this(e.top,e.right,e.bottom,e.left)},getAlignInfo:function(f,m){if(typeof f==="object"){return f}f=f?((f.indexOf("-")<0)?"tl-"+f:f):"tl-bl";g=M.exec(f);f=g[1];f=(m?H:N)[f]||f;var n=m?A:C,g,e=O.exec(f),l;l={myEdge:e[1],myOffset:e[2],otherEdge:e[4],otherOffset:e[5],constrain:g[2]};if(e[3]){l.myEdge=e[3][0];l.myOffset=n[e[3][1]];if(l.myOffset==null){l.myOffset=50}}if(e[6]){l.otherEdge=e[6][0];l.otherOffset=n[e[6][1]];if(l.otherOffset==null){l.otherOffset=50}}l.position=J[l.myEdge];return l}},constructor:function(f,e,l,g){var m=this;m.y=m.top=m[1]=f;m.right=e;m.bottom=l;m.x=m.left=m[0]=g;m.height=m.bottom-m.top;m.width=m.right-m.left},setPosition:function(f,e){if(arguments.length===1){e=f[1];f=f[0]}return this.translateBy(f-this.x,e-this.y)},contains:function(e){var f=this;return(e.x>=f.x&&(e.right||e.x)<=f.right&&e.y>=f.y&&(e.bottom||e.y)<=f.bottom)},intersect:function(f){var g=this,n=Math.max(g.y,f.y),m=Math.min(g.right,f.right),l=Math.min(g.bottom,f.bottom),e=Math.max(g.x,f.x);if(l>n&&m>e){return new this.self(n,m,l,e)}else{return false}},union:function(f){var g=this,n=Math.min(g.y,f.y),m=Math.max(g.right,f.right),l=Math.max(g.bottom,f.bottom),e=Math.min(g.x,f.x);return new this.self(n,m,l,e)},constrainTo:function(e){var f=this,g=Ext.Number.constrain;f.top=f.y=g(f.top,e.y,e.bottom);f.bottom=g(f.bottom,e.y,e.bottom);f.left=f.x=g(f.left,e.x,e.right);f.right=g(f.right,e.x,e.right);return f},adjust:function(f,e,l,g){var m=this;m.top=m.y+=f||0;m.left=m.x+=g||0;m.right+=e||0;m.bottom+=l||0;return m},getOutOfBoundOffset:function(f,e){if(!Ext.isObject(f)){if(f==="x"){return this.getOutOfBoundOffsetX(e)}else{return this.getOutOfBoundOffsetY(e)}}else{e=f;var g=new G.Offset();g.x=this.getOutOfBoundOffsetX(e.x);g.y=this.getOutOfBoundOffsetY(e.y);return g}},getOutOfBoundOffsetX:function(e){if(e<=this.x){return this.x-e}else{if(e>=this.right){return this.right-e}}return 0},getOutOfBoundOffsetY:function(e){if(e<=this.y){return this.y-e}else{if(e>=this.bottom){return this.bottom-e}}return 0},isOutOfBound:function(f,e){if(!Ext.isObject(f)){if(f==="x"){return this.isOutOfBoundX(e)}else{return this.isOutOfBoundY(e)}}else{e=f;return(this.isOutOfBoundX(e.x)||this.isOutOfBoundY(e.y))}},isOutOfBoundX:function(e){return(e<this.x||e>this.right)},isOutOfBoundY:function(e){return(e<this.y||e>this.bottom)},restrict:function(e,g,f){if(Ext.isObject(e)){var l;f=g;g=e;if(g.copy){l=g.copy()}else{l={x:g.x,y:g.y}}l.x=this.restrictX(g.x,f);l.y=this.restrictY(g.y,f);return l}else{if(e==="x"){return this.restrictX(g,f)}else{return this.restrictY(g,f)}}},restrictX:function(e,f){if(!f){f=1}if(e<=this.x){e-=(e-this.x)*f}else{if(e>=this.right){e-=(e-this.right)*f}}return e},restrictY:function(e,f){if(!f){f=1}if(e<=this.y){e-=(e-this.y)*f}else{if(e>=this.bottom){e-=(e-this.bottom)*f}}return e},alignTo:function(m){var u=this,n=u.self,v=G.Offset,w=L(m.target),s,t=m.rtl,p=m.overlap,x=m.align,y=m.anchorSize,f=m.offset,g=m.inside,Q=m.position,l=m.allowXTranslate,e=m.allowYTranslate,q,o;if(f){f=v.fromObject(f)}if(y){y=v.fromObject(y)}if(Q){if(Q.length===2){Q=new G.Point(Q[0],Q[1])}o=new n().copyFrom(u).setPosition(Q.x,Q.y)}else{x=u.getAlignInfo(x,t);if(g){if(w.x>=g.right){w.setPosition(g.right-1,w.y);if(x.position!==3){x=u.getAlignInfo("r-l",t)}}else{if(w.right<g.x){w.setPosition(g.x-w.getWidth()+1,w.y);if(x.position!==1){x=u.getAlignInfo("l-r",t)}}}if(w.y>=g.bottom){w.setPosition(w.x,g.bottom-1);if(x.position!==0){x=u.getAlignInfo("b-t",t)}}else{if(w.bottom<g.y){w.setPosition(w.x,g.y-w.getHeight()+1);if(x.position!==2){x=u.getAlignInfo("t-b",t)}}}}s=y?K(w,y,x.position):w;o=n.from(u).translateBy(u.getAlignToVector(s,x));p=!!o.intersect(s);if(f&&(p||!y)){o.translateBy(f)}if(y){B(w,o,x.position,y,g)}}if(g){if(o.left<g.left){o.translateBy(g.left-o.left,0);q=true}if(o.right>g.right&&o.left>g.left){o.translateBy(g.right-o.right,0);q=true}if(o.top<g.top){o.translateBy(0,g.top-o.top);q=true}if(o.bottom>g.bottom&&o.top>g.top){o.translateBy(0,g.bottom-o.bottom);q=true}if(q&&!p){o.anchor=null;if(m.axisLock){if(x.position&1){e=false}else{l=false}}if(Q){if(o.contains(Q)){Q.exclude(o,{inside:g,centerOnSideChange:false})}}else{if(o.intersect(s)){x.position=w.exclude(o,{defaultPosition:x.position,inside:g,minHeight:m.minHeight,minWidth:m.minWidth,allowX:l,allowY:e,offset:f,anchorHeight:y?y.y:0,centerOnSideChange:!!y})}else{if(m.minWidth&&o.getWidth()>g.getWidth()){o.setPosition(0,o.y);o.setWidth(Math.max(g.getWidth(),m.minWidth));o.constrainWidth=true}else{if(m.minHeight&&o.getHeight()>g.getHeight()){o.setPosition(o.x,0);o.setHeight(Math.max(g.getHeight(),m.minHeight));o.constrainHeight=true}}}o.align=x;if(y){B(w,o,x.position,y,g)}}}}return o},exclude:function(y,W){W=W||{};var e=this,g=W.inside,V=W.defaultPosition,s=W.centerOnSideChange,w=W.minHeight,q=W.minWidth,o=W.allowX!==false,p=W.allowY!==false,f=W.anchorHeight,x=W.offset,U=[],n,t,l,T,m,v,u;if(!x){x=F}if(p){U.push([0,t=e.top-y.bottom-f+x.y,"b-t",0,Math.abs(t)]);U.push([0,t=e.bottom-y.top+f+x.y,"t-b",2,Math.abs(t)])}else{s=false}if(o){U.push([t=e.left-y.right-f+x.x,0,"r-l",3,Math.abs(t)]);U.push([t=e.right-y.left+f+x.x,0,"l-r",1,Math.abs(t)])}else{s=false}Ext.Array.sort(U,function(Q,P){var R=Q[4]-P[4];if(!R){if(Q[3]===V){return -1}if(P[3]===V){return 1}}return R});if(g){for(l=0;l<U.length;l++){t=U[l];n=G.Region.from(y);n.translateBy.apply(n,t);if(g.contains(n)){y.copyFrom(n);u={align:t[2],position:t[3],distance:t[4]};break}if(w){I(w,n,e,g);if(g.contains(n)){if(!T||n.getArea()>T.region.getArea()){T={region:n,align:t[2],position:t[3],distance:t[4]}}}}if(q){E(q,n,e,g);if(g.contains(n)){if(!T||n.getArea()>T.region.getArea()){T={region:n,align:t[2],position:t[3],distance:t[4]}}}}v=g.intersect(n);if(v){v=v.getArea();if(!m||(v&&m.area<v)){m={region:n,align:t[2],position:t[3],distance:t[4],area:v}}}}if(!u){if(T){y.copyFrom(T.region);u=T;y.constrainWidth=T.region.constrainWidth;y.constrainHeight=T.region.constrainHeight}else{if(m){y.copyFrom(m.region);u=m}}}if(u){if((u.position&1)!==(V&1)){if(u.distance&&s){t=y.alignTo({align:u.align,target:e,anchorSize:f,offset:x,axisLock:true,inside:g,minHeight:W.minHeight,minWidth:W.minWidth});if(g.contains(t)){y.setPosition(t.x,t.y)}}}return u.position}}else{y.translateBy.apply(y,U[0]);return U[0][3]}return V},getAlignToXY:function(l,g,e){var f=this.getAlignToVector(l,g,e);return[this.x+f[0],this.y+f[1]]},getAnchorPoint:function(e,f){e=(typeof e==="string")?this.getAlignInfo(e+"-tl",f):e;return this["getAnchorPoint_"+e.myEdge](e.myOffset)},getAlignToVector:function(l,f,m){f=(typeof f==="string")?this.getAlignInfo(f,m):f;var g=this["getAnchorPoint_"+f.myEdge](f.myOffset),e=l["getAnchorPoint_"+f.otherEdge](f.otherOffset);return[e[0]-g[0],e[1]-g[1]]},getAnchorPoint_t:function(e){return[this.x+Math.round(this.getWidth()*(e/100)),this.y]},getAnchorPoint_b:function(e){return[this.x+Math.round(this.getWidth()*(e/100)),this.bottom]},getAnchorPoint_l:function(e){return[this.x,this.y+Math.round(this.getHeight()*(e/100))]},getAnchorPoint_r:function(e){return[this.right,this.y+Math.round(this.getHeight()*(e/100))]},getAnchorPoint_c:function(){return[this.x+Math.round(this.getWidth()/2),this.y+Math.round(this.getHeight()/2)]},getHeight:function(){return this.bottom-this.y},getWidth:function(){return this.right-this.x},getArea:function(){return this.getHeight()*this.getWidth()},setHeight:function(e){this.bottom=this.top+e;return this},setWidth:function(e){this.right=this.left+e;return this},getSize:function(){return{width:this.right-this.x,height:this.bottom-this.y}},copy:function(){return new this.self(this.y,this.right,this.bottom,this.x)},copyFrom:function(e){var f=this;f.top=f.y=f[1]=e.y;f.right=e.right;f.bottom=e.bottom;f.left=f.x=f[0]=e.x;return this},toString:function(){return"Region["+this.top+","+this.right+","+this.bottom+","+this.left+"]"},translateBy:function(f,g){if(f.length){g=f[1];f=f[0]}else{if(arguments.length===1){g=f.y;f=f.x}}var e=this;e.top=e.y+=g;e.right+=f;e.bottom+=g;e.left=e.x+=f;return e},round:function(){var e=this;e.top=e.y=Math.round(e.y);e.right=Math.round(e.right);e.bottom=Math.round(e.bottom);e.left=e.x=Math.round(e.x);return e},equals:function(e){return(this.top===e.top&&this.right===e.right&&this.bottom===e.bottom&&this.left===e.left)},getOffsetsTo:function(e){return{x:this.x-e.x,y:this.y-e.y}}}},3,0,0,0,0,0,[Ext.util,"Region"],function(f){f.prototype.getAlignInfo=f.getAlignInfo;f.EMPTY=new f(0,0,0,0)}));(Ext.cmd.derive("Ext.util.Point",Ext.util.Region,{isPoint:true,radianToDegreeConstant:180/Math.PI,origin:{x:0,y:0},statics:{fromEvent:function(m){var n=m.changedTouches,e=(n&&n.length>0)?n[0]:m;return this.fromTouch(e)},fromTouch:function(f){return new this(f.pageX,f.pageY)},from:function(f){if(!f){return new this(0,0)}if(!(f instanceof this)){return new this(f.x,f.y)}return f}},constructor:function(l,g){if(l==null){l=0}if(g==null){g=0}Ext.util.Region.prototype.constructor.call(this,g,l,g,l)},clone:function(){return new this.self(this.x,this.y)},copy:function(){return this.clone.apply(this,arguments)},copyFrom:function(f){this.x=f.x;this.y=f.y;return this},toString:function(){return"Point["+this.x+","+this.y+"]"},equals:function(f){return(this.x===f.x&&this.y===f.y)},isCloseTo:function(q,s){if(typeof s=="number"){return this.getDistanceTo(q)<=s}var t=q.x,u=q.y,o=s.x,p=s.y;return(this.x<=t+o&&this.x>=t-o&&this.y<=u+p&&this.y>=u-p)},isWithin:function(){return this.isCloseTo.apply(this,arguments)},isContainedBy:function(f){if(!(f instanceof Ext.util.Region)){f=Ext.get(f.el||f).getRegion()}return f.contains(this)},roundedEquals:function(f){if(!f||typeof f!=="object"){f=this.origin}return(Math.round(this.x)===Math.round(f.x)&&Math.round(this.y)===Math.round(f.y))},getDistanceTo:function(m){if(!m||typeof m!=="object"){m=this.origin}var l=this.x-m.x,n=this.y-m.y;return Math.sqrt(l*l+n*n)},getAngleTo:function(m){if(!m||typeof m!=="object"){m=this.origin}var l=this.x-m.x,n=this.y-m.y;return Math.atan2(n,l)*this.radianToDegreeConstant}},3,0,0,0,0,0,[Ext.util,"Point"],function(){this.prototype.translate=this.prototype.translateBy}));(Ext.cmd.derive("Ext.event.Event",Ext.Base,{alternateClassName:"Ext.EventObjectImpl",stopped:false,claimed:false,defaultPrevented:false,isEvent:true,statics:{resolveTextNode:function(f){return(f&&f.nodeType===3)?f.parentNode:f},pointerEvents:{pointerdown:1,pointermove:1,pointerup:1,pointercancel:1,pointerover:1,pointerout:1,pointerenter:1,pointerleave:1,MSPointerDown:1,MSPointerMove:1,MSPointerUp:1,MSPointerOver:1,MSPointerOut:1,MSPointerCancel:1,MSPointerEnter:1,MSPointerLeave:1},mouseEvents:{mousedown:1,mousemove:1,mouseup:1,mouseover:1,mouseout:1,mouseenter:1,mouseleave:1},clickEvents:{click:1,dblclick:1},touchEvents:{touchstart:1,touchmove:1,touchend:1,touchcancel:1},focusEvents:{focus:1,blur:1,focusin:1,focusout:1,focusenter:1,focusleave:1},pointerTypeMap:{2:"touch",3:"pen",4:"mouse",touch:"touch",pen:"pen",mouse:"mouse"},keyFlags:{CTRL:"ctrlKey",CONTROL:"ctrlKey",ALT:"altKey",SHIFT:"shiftKey",CMD:"metaKey",COMMAND:"metaKey",CMDORCTRL:Ext.isMac?"metaKey":"ctrlKey",COMMANDORCONTROL:Ext.isMac?"metaKey":"ctrlKey",META:"metaKey"},modifierGlyphs:{ctrlKey:"",altKey:"",metaKey:Ext.isMac?"":"",shiftKey:""},specialKeyGlyphs:{BACKSPACE:"",TAB:"",ENTER:"",RETURN:"",SPACE:"",PAGE_UP:"",PAGE_DOWN:"",END:"",HOME:"",LEFT:"",UP:"",RIGHT:"",DOWN:"",PRINT_SCREEN:"",INSERT:"",DELETE:"",CONTEXT_MENU:""},getKeyId:function(q){q=q.toUpperCase();var y=this,x=q.split("+"),w=x.length-1,t=x[w],u=[],v,s;for(s=0;s<w;s++){v=y.keyFlags[x[s]];u[v]=true}if(u.ctrlKey){u.push(y.modifierGlyphs.ctrlKey)}if(u.altKey){u.push(y.modifierGlyphs.altKey)}if(u.shiftKey){u.push(y.modifierGlyphs.shiftKey)}if(u.metaKey){u.push(y.modifierGlyphs.metaKey)}u.push(this.specialKeyGlyphs[t]||t);return u.join("")}},constructor:function(z){var u=this,B=u.self,v=u.self.resolveTextNode,C=z.changedTouches,y=C?C[0]:z,e=z.type,A,w;u.timeStamp=u.time=Ext.now();u.pageX=y.pageX;u.pageY=y.pageY;u.clientX=y.clientX;u.clientY=y.clientY;u.target=u.delegatedTarget=v(z.target);w=z.relatedTarget;if(w){if(Ext.isGecko&&e==="dragenter"||e==="dragleave"){try{u.relatedTarget=v(w)}catch(x){u.relatedTarget=null}}else{u.relatedTarget=v(w)}}u.browserEvent=u.event=z;u.type=e;u.button=z.button||0;u.shiftKey=z.shiftKey;u.ctrlKey=z.ctrlKey||z.metaKey||false;u.altKey=z.altKey;u.charCode=z.charCode;u.keyCode=z.keyCode;u.buttons=z.buttons;if(u.button===0&&u.buttons===0){u.buttons=1}if(B.focusEvents[e]){if(B.forwardTab!==undefined){u.forwardTab=B.forwardTab}}else{if(e!=="keydown"){delete B.forwardTab}}if(B.mouseEvents[e]){A="mouse"}else{if(B.clickEvents[e]){A=B.pointerTypeMap[z.pointerType]||"mouse"}else{if(B.pointerEvents[e]){A=B.pointerTypeMap[z.pointerType]}else{if(B.touchEvents[e]){A="touch"}}}}if(A){u.pointerType=A}u.isMultitouch=z.isPrimary===false||(z.touches&&z.touches.length>1)},chain:function(l){var e=Ext.Object.chain(this);e.parentEvent=this;return Ext.apply(e,l)},correctWheelDelta:function(l){var m=this.WHEEL_SCALE,n=Math.round(l/m);if(!n&&l){n=(l<0)?-1:1}return n},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){return this.keyCode||this.charCode},getKeyName:function(){return this.keyCodes[this.keyCode]},getPoint:function(){var m=this,n=m.point,l;if(!n){l=m.getXY();n=m.point=new Ext.util.Point(l[0],l[1])}return n},getRelatedTarget:function(q,n,s){var p=this.relatedTarget,o=null;if(p&&p.nodeType){if(q){o=Ext.fly(p).findParent(q,n,s)}else{o=s?Ext.get(p):p}}return o},getTarget:function(m,l,n){return m?Ext.fly(this.target).findParent(m,l,n):(n?Ext.get(this.target):this.target)},getTime:function(){return this.time},getWheelDelta:function(){var f=this.getWheelDeltas();return f.y},getWheelDeltas:function(){var m=this,n=m.browserEvent,o=0,p=0;if(Ext.isDefined(n.wheelDeltaX)){o=n.wheelDeltaX;p=n.wheelDeltaY}else{if(n.wheelDelta){p=n.wheelDelta}else{if("deltaX" in n){o=n.deltaX;p=-n.deltaY}else{if(n.detail){p=-n.detail;if(p>100){p=3}else{if(p<-100){p=-3}}if(Ext.isDefined(n.axis)&&n.axis===n.HORIZONTAL_AXIS){o=p;p=0}}}}}return{x:m.correctWheelDelta(o),y:m.correctWheelDelta(p)}},getX:function(){return this.getXY()[0]},getXY:function(){var s=this,p=s.xy;if(!p){p=s.xy=[s.pageX,s.pageY];var t=p[0],v,q,w,u;if(!t&&t!==0){v=s.browserEvent;q=document;w=q.documentElement;u=q.body;p[0]=v.clientX+(w&&w.scrollLeft||u&&u.scrollLeft||0)-(w&&w.clientLeft||u&&u.clientLeft||0);p[1]=v.clientY+(w&&w.scrollTop||u&&u.scrollTop||0)-(w&&w.clientTop||u&&u.clientTop||0)}}return p},getY:function(){return this.getXY()[1]},hasModifier:function(){var f=this;return !!(f.ctrlKey||f.altKey||f.shiftKey||f.metaKey)},isNavKeyPress:function(m){var n=this,p=n.keyCode,o=n.type==="keypress";return((!o||Ext.isGecko)&&p>=33&&p<=40)||(!m&&(p===n.RETURN||p===n.TAB||p===n.ESC))},isSpecialKey:function(){var m=this,o=m.keyCode,p=Ext.isGecko,n=m.type==="keypress";return(p&&n&&m.charCode===0)||(this.isNavKeyPress())||(o===m.BACKSPACE)||(o===m.ENTER)||(o>=16&&o<=20)||((!n||p)&&o>=44&&o<=46)},makeUnpreventable:function(){this.browserEvent.preventDefault=Ext.emptyFn},preventDefault:function(){var g=this,l=g.parentEvent;g.defaultPrevented=true;if(l){l.defaultPrevented=true}g.browserEvent.preventDefault();return g},setCurrentTarget:function(f){this.currentTarget=this.delegatedTarget=f},stopEvent:function(){return this.preventDefault().stopPropagation()},stopPropagation:function(){var m=this,l=m.browserEvent,n=m.parentEvent;m.stopped=true;if(n&&!m.isGesture){n.stopped=true}if(!l.stopPropagation){l.cancelBubble=true;return m}l.stopPropagation();return m},claimGesture:function(){var g=this,l=g.parentEvent;g.claimed=true;if(l&&!g.hasOwnProperty("isGesture")){l.claimGesture()}else{g.preventDefault()}return g},within:function(n,m,p){var o;if(n){o=m?this.getRelatedTarget():this.getTarget()}return o?Ext.fly(n).contains(o)||!!(p&&o===Ext.getDom(n)):false},deprecated:{"4.0":{methods:{getPageX:"getX",getPageY:"getY"}}}},1,0,0,0,0,0,[Ext.event,"Event",Ext,"EventObjectImpl"],function(t){var q=t.prototype,p={BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,WHEEL_SCALE:(function(){var e;if(Ext.isGecko){e=3}else{if(Ext.isMac){if(Ext.isSafari&&Ext.webKitVersion>=532){e=120}else{e=12}e*=3}else{e=120}}return e}())},s={},o,u;Ext.apply(t,p);Ext.apply(q,p);delete p.WHEEL_SCALE;delete p.RETURN;for(o in p){u=p[o];s[u]=o}q.keyCodes=s;q.getTrueXY=q.getXY}));Ext.define("Ext.overrides.event.Event",{override:"Ext.event.Event",mousedownEvents:{mousedown:1,pointerdown:1,touchstart:1},injectEvent:(function(){var o,n={},p;if(!Ext.isIE9m&&document.createEvent){o={createHtmlEvent:function(e,g,l,m){var f=e.createEvent("HTMLEvents");f.initEvent(g,l,m);return f},createMouseEvent:function(e,D,K,L,I,M,l,f,E,F,G,J,H){var m=e.createEvent("MouseEvents"),g=e.defaultView||window;if(m.initMouseEvent){m.initMouseEvent(D,K,L,g,I,M,l,M,l,f,E,F,G,J,H)}else{m=e.createEvent("UIEvents");m.initEvent(D,K,L);m.view=g;m.detail=I;m.screenX=M;m.screenY=l;m.clientX=M;m.clientY=l;m.ctrlKey=f;m.altKey=E;m.metaKey=G;m.shiftKey=F;m.button=J;m.relatedTarget=H}return m},createUIEvent:function(e,g,m,v,l){var f=e.createEvent("UIEvents"),w=e.defaultView||window;f.initUIEvent(g,m,v,w,l);return f},fireEvent:function(e,g,f){e.dispatchEvent(f)}}}else{if(document.createEventObject){p={0:1,1:4,2:2};o={createHtmlEvent:function(e,g,l,m){var f=e.createEventObject();f.bubbles=l;f.cancelable=m;return f},createMouseEvent:function(f,m,I,J,G,K,g,e,C,D,E,H,F){var l=f.createEventObject();l.bubbles=I;l.cancelable=J;l.detail=G;l.screenX=K;l.screenY=g;l.clientX=K;l.clientY=g;l.ctrlKey=e;l.altKey=C;l.shiftKey=D;l.metaKey=E;l.button=p[H]||H;l.relatedTarget=F;return l},createUIEvent:function(e,g,m,u,l){var f=e.createEventObject();f.bubbles=m;f.cancelable=u;return f},fireEvent:function(e,g,f){e.fireEvent("on"+g,f)}}}}Ext.Object.each({load:[false,false],unload:[false,false],select:[true,false],change:[true,false],submit:[true,true],reset:[true,false],resize:[true,false],scroll:[true,false]},function(f,e){var g=e[0],l=e[1];n[f]=function(m,w){var v=o.createHtmlEvent(f,g,l);o.fireEvent(m,f,v)}});function q(e,f){var g=(e!=="mousemove");return function(l,w){var m=w.getXY(),v=o.createMouseEvent(l.ownerDocument,e,true,g,f,m[0],m[1],w.ctrlKey,w.altKey,w.shiftKey,w.metaKey,w.button,w.relatedTarget);o.fireEvent(l,e,v)}}Ext.each(["click","dblclick","mousedown","mouseup","mouseover","mousemove","mouseout"],function(e){n[e]=q(e,1)});Ext.Object.each({focusin:[true,false],focusout:[true,false],activate:[true,true],focus:[false,false],blur:[false,false]},function(f,e){var g=e[0],l=e[1];n[f]=function(m,w){var v=o.createUIEvent(m.ownerDocument,f,g,l,1);o.fireEvent(m,f,v)}});if(!o){n={};o={}}function s(e,f){}return function(e){var f=this,g=n[f.type]||s,l=e?(e.dom||e):f.getTarget();g(l,f)}}()),preventDefault:function(u){var p=this,q=p.browserEvent,s=p.parentEvent,t,o;if(typeof q.type!=="unknown"){if(!u){p.defaultPrevented=true}if(s){s.defaultPrevented=true}if(q.preventDefault){q.preventDefault()}else{if(q.type==="mousedown"){o=q.target;t=o.getAttribute("unselectable");if(t!=="on"){o.setAttribute("unselectable","on");Ext.defer(function(){o.setAttribute("unselectable",t)},1)}}q.returnValue=false;if(q.ctrlKey||q.keyCode>111&&q.keyCode<124){q.keyCode=-1}}}return p},stopPropagation:function(){var g=this,l=g.browserEvent;if(typeof l.type!=="unknown"){if(g.mousedownEvents[g.type]){Ext.GlobalEvents.fireMouseDown(g)}arguments.callee.$previous.call(this)}return g},deprecated:{"5.0":{methods:{clone:function(){return new this.self(this.browserEvent,this)}}}}},function(){var p=this,m,n=function(e){if(e.keyCode===9){p.forwardTab=!e.shiftKey}},o=function(e){if(e.keyCode===9){delete p.forwardTab}};if(Ext.isIE9m){m={0:0,1:0,4:1,2:2};p.override({statics:{enableIEAsync:function(f){var e,g={};for(e in f){g[e]=f[e]}return g}},constructor:function(g,f,s,e){var l=this;l.callParent([g,f,s,e]);l.button=m[g.button];if(g.type==="contextmenu"){l.button=2}l.toElement=g.toElement;l.fromElement=g.fromElement},mouseLeaveRe:/(mouseout|mouseleave)/,mouseEnterRe:/(mouseover|mouseenter)/,enableIEAsync:function(e){this.browserEvent=this.self.enableIEAsync(e)},getRelatedTarget:function(u,f,e){var l=this,t,g;if(!l.relatedTarget){t=l.type;if(l.mouseLeaveRe.test(t)){g=l.toElement}else{if(l.mouseEnterRe.test(t)){g=l.fromElement}}if(g){l.relatedTarget=l.self.resolveTextNode(g)}}return l.callParent([u,f,e])}});document.attachEvent("onkeydown",n);document.attachEvent("onkeyup",o);window.attachEvent("onunload",function(){document.detachEvent("onkeydown",n);document.detachEvent("onkeyup",o)})}else{if(document.addEventListener){document.addEventListener("keydown",n,true);document.addEventListener("keyup",o,true)}}});(Ext.cmd.derive("Ext.event.publisher.Dom",Ext.event.publisher.Publisher,{type:"dom",handledDomEvents:[],reEnterCount:0,captureEvents:{animationstart:1,animationend:1,resize:1,focus:1,blur:1},directEvents:{mouseenter:1,mouseleave:1,pointerenter:1,pointerleave:1,MSPointerEnter:1,MSPointerLeave:1,load:1,unload:1,beforeunload:1,error:1,DOMContentLoaded:1,DOMFrameContentLoaded:1,hashchange:1,scroll:1},blockedPointerEvents:{pointerover:1,pointerout:1,pointerenter:1,pointerleave:1,MSPointerOver:1,MSPointerOut:1,MSPointerEnter:1,MSPointerLeave:1},blockedCompatibilityMouseEvents:{mouseenter:1,mouseleave:1},constructor:function(){var f=this;f.bubbleSubscribers={};f.captureSubscribers={};f.directSubscribers={};f.directCaptureSubscribers={};f.delegatedListeners={};f.initHandlers();Ext.onInternalReady(f.onReady,f);Ext.event.publisher.Publisher.prototype.constructor.call(this)},registerEvents:function(){var u=this,p=Ext.event.publisher.Publisher.publishersByEvent,t=u.handledDomEvents,o=t.length,q=0,s;for(;q<o;q++){s=t[q];u.handles[s]=1;p[s]=u}Ext.event.publisher.Publisher.prototype.registerEvents.call(this)},onReady:function(){var m=this,p=m.handledDomEvents,n,o;if(p){for(o=0,n=p.length;o<n;o++){m.addDelegatedListener(p[o])}}Ext.getWin().on("unload",m.destroy,m)},initHandlers:function(){var f=this;f.onDelegatedEvent=Ext.bind(f.onDelegatedEvent,f);f.onDirectEvent=Ext.bind(f.onDirectEvent,f);f.onDirectCaptureEvent=Ext.bind(f.onDirectCaptureEvent,f)},addDelegatedListener:function(f){this.delegatedListeners[f]=1;this.target.addEventListener(f,this.onDelegatedEvent,!!this.captureEvents[f])},removeDelegatedListener:function(f){delete this.delegatedListeners[f];this.target.removeEventListener(f,this.onDelegatedEvent,!!this.captureEvents[f])},addDirectListener:function(m,l,n){l.dom.addEventListener(m,n?this.onDirectCaptureEvent:this.onDirectEvent,n)},removeDirectListener:function(m,l,n){l.dom.removeEventListener(m,n?this.onDirectCaptureEvent:this.onDirectEvent,n)},subscribe:function(s,t,w,u){var q=this,p,v;if(w&&!q.directEvents[t]){p=u?q.captureSubscribers:q.bubbleSubscribers;if(!q.handles[t]&&!q.delegatedListeners[t]){q.addDelegatedListener(t)}if(p[t]){++p[t]}else{p[t]=1}}else{p=u?q.directCaptureSubscribers:q.directSubscribers;v=s.id;p=p[t]||(p[t]={});if(p[v]){++p[v]}else{p[v]=1;q.addDirectListener(t,s,u)}}},unsubscribe:function(w,v,z,s){var t=this,u,x,A,y;if(z&&!t.directEvents[v]){u=t.captureSubscribers;x=t.bubbleSubscribers;A=s?u:x;if(A[v]){--A[v]}if(!t.handles[v]&&!x[v]&&!u[v]){this.removeDelegatedListener(v)}}else{A=s?t.directCaptureSubscribers:t.directSubscribers;y=w.id;A=A[v];if(A[y]){--A[y]}if(!A[y]){delete A[y];t.removeDirectListener(v,w,s)}}},getPropagatingTargets:function(m){var n=m,o=[],p;while(n){o.push(n);p=n.parentNode;if(!p){p=n.defaultView}n=p}return o},publish:function(e,z,D){var I=this,K=false,C=false,F,H,y,E,A,J,B,G;D=D||false;if(!z){y=e.target;if(I.captureEvents[e.type]){E=Ext.cache[y.id];z=E?[E]:[]}else{z=I.getPropagatingTargets(y)}}F=Ext.Array.from(e);J=z.length;G=F.length;for(A=0;A<G;A++){H=F[A].type;if(!K&&I.captureSubscribers[H]){K=true}if(!C&&I.bubbleSubscribers[H]){C=true}}if(K){for(A=J;A--;){E=Ext.cache[z[A].id];if(E){for(B=0;B<G;B++){e=F[B];I.fire(E,e.type,e,false,true);if(!D&&e.claimed){D=true;B=I.filterClaimed(F,e);G=F.length}if(e.stopped){F.splice(B,1);B--;G--}}}}}if(C&&!e.stopped){for(A=0;A<J;A++){E=Ext.cache[z[A].id];if(E){for(B=0;B<G;B++){e=F[B];I.fire(E,e.type,e,false,false);if(!D&&e.claimed&&I.filterClaimed){D=true;B=I.filterClaimed(F,e);G=F.length}if(e.stopped){F.splice(B,1);B--;G--}}}}}},publishDelegatedDomEvent:function(e){this.publish(e)},fire:function(p,q,u,t,s){var e;if(p.hasListeners[q]){e=p.events[q];if(e){if(s&&t){e=e.directCaptures}else{if(s){e=e.captures}else{if(t){e=e.directs}}}if(e){u.setCurrentTarget(p.dom);e.fire(u,u.target)}}}},onDelegatedEvent:function(e){if(Ext.elevateFunction){Ext.elevateFunction(this.doDelegatedEvent,this,[e])}else{this.doDelegatedEvent(e)}},doDelegatedEvent:function(e){var m=this,n;e=new Ext.event.Event(e);n=e.time;if(!m.isEventBlocked(e)){m.beforeEvent(e);Ext.frameStartTime=n;m.reEnterCount++;m.publishDelegatedDomEvent(e);m.reEnterCount--;m.afterEvent(e)}},onDirectEvent:function(e){if(Ext.elevateFunction){Ext.elevateFunction(this.doDirectEvent,this,[e,false])}else{this.doDirectEvent(e,false)}},onDirectCaptureEvent:function(e){if(Ext.elevateFunction){Ext.elevateFunction(this.doDirectEvent,this,[e,true])}else{this.doDirectEvent(e,true)}},doDirectEvent:function(t,q){var e=this,u=t.currentTarget,s,p;t=new Ext.event.Event(t);s=t.time;if(e.isEventBlocked(t)){return}e.beforeEvent(t);Ext.frameStartTime=s;p=Ext.cache[u.id];if(p){e.reEnterCount++;e.fire(p,t.type,t,true,q);e.reEnterCount--}e.afterEvent(t)},beforeEvent:function(o){var s=o.browserEvent,q=Ext.event.publisher.Dom,p,e;if(s.type==="touchstart"){p=s.touches;if(p.length===1){e=p[0];q.lastTouchStartX=e.pageX;q.lastTouchStartY=e.pageY}}},afterEvent:function(e){var s=e.browserEvent,o=s.type,p=Ext.event.publisher.Dom,q=Ext.GlobalEvents;if(e.self.pointerEvents[o]&&e.pointerType!=="mouse"){p.lastScreenPointerEventTime=Ext.now()}if(o==="touchend"){p.lastTouchEndTime=Ext.now()}if(!this.reEnterCount&&q.hasListeners.idle&&!q.idleEventMask[o]){q.fireEvent("idle")}},isEventBlocked:function(s){var e=this,o=s.type,q=Ext.event.publisher.Dom,p=Ext.now();if(Ext.isGecko&&s.type==="click"&&s.button===2){return true}return(e.blockedPointerEvents[o]&&s.pointerType!=="mouse")||(e.blockedCompatibilityMouseEvents[o]&&(p-q.lastScreenPointerEventTime<1000))||(Ext.supports.TouchEvents&&s.self.mouseEvents[s.type]&&Math.abs(s.pageX-q.lastTouchStartX)<15&&Math.abs(s.pageY-q.lastTouchStartY)<15&&(Ext.now()-q.lastTouchEndTime)<1000)},destroy:function(){var g=Ext.dom.GarbageCollector,l;for(l in this.delegatedListeners){this.removeDelegatedListener(l)}Ext.Reaper.flush();if(g){g.collect()}this.callParent()},reset:function(){var f=Ext.event.publisher.Dom;f.lastScreenPointerEventTime=f.lastTouchEndTime=f.lastTouchStartX=f.lastTouchStartY=undefined}},1,0,0,0,0,0,[Ext.event.publisher,"Dom"],function(o){var m=document,n=m.defaultView,p=o.prototype;if((Ext.os.is.iOS&&Ext.os.version.getMajor()<5)||Ext.browser.is.AndroidStock||!(n&&n.addEventListener)){p.target=m}else{p.target=n}o.instance=new o()}));Ext.define("Ext.overrides.event.publisher.Dom",{override:"Ext.event.publisher.Dom"},function(u){if(Ext.isIE9m){var s=document.documentElement,o=document.body,p=u.prototype,t,q;p.target=document;p.directBoundListeners={};t=function(e,f,g){e.target=e.srcElement||window;e.currentTarget=this;if(g){f.onDirectCaptureEvent(e)}else{f.onDirectEvent(e)}};q=function(e,f){e.target=e.srcElement||window;e.currentTarget=this;f.onDirectCaptureEvent(e)};u.override({addDelegatedListener:function(e){this.delegatedListeners[e]=1;this.target.attachEvent("on"+e,this.onDelegatedEvent)},removeDelegatedListener:function(e){delete this.delegatedListeners[e];this.target.detachEvent("on"+e,this.onDelegatedEvent)},addDirectListener:function(m,l,n){var f=this,e=l.dom,g=Ext.Function.bind(t,e,[f,n],true),y=f.directBoundListeners,x=y[m]||(y[m]={});x[e.id]=g;if(e.attachEvent){e.attachEvent("on"+m,g)}else{f.callParent([m,l,n])}},removeDirectListener:function(g,f,l){var e=f.dom;if(e.detachEvent){e.detachEvent("on"+g,this.directBoundListeners[g][e.id])}else{this.callParent([g,f,l])}},doDelegatedEvent:function(e){e.target=e.srcElement||window;if(e.type==="focusin"){e.relatedTarget=e.fromElement===o||e.fromElement===s?null:e.fromElement}else{if(e.type==="focusout"){e.relatedTarget=e.toElement===o||e.toElement===s?null:e.toElement}}return this.callParent([e])}});Ext.apply(p.directEvents,p.captureEvents);Ext.apply(p.directEvents,{change:1,input:1,paste:1});p.captureEvents={}}});(Ext.cmd.derive("Ext.event.publisher.Gesture",Ext.event.publisher.Dom,{type:"gesture",isCancelEvent:{touchcancel:1,pointercancel:1,MSPointerCancel:1},handledEvents:[],handledDomEvents:[],constructor:function(u){var y=this,t=y.handledDomEvents,w=Ext.supports,q=w.TouchEvents,x=y.onTouchStart,s=y.onTouchMove,v=y.onTouchEnd;y.handlers={touchstart:x,touchmove:s,touchend:v,touchcancel:v,pointerdown:x,pointermove:s,pointerup:v,pointercancel:v,MSPointerDown:x,MSPointerMove:s,MSPointerUp:v,MSPointerCancel:v,mousedown:x,mousemove:s,mouseup:v};y.activeTouchesMap={};y.activeTouches=[];y.changedTouches=[];y.recognizers=[];y.eventToRecognizer={};y.cancelEvents=[];if(q){y.onTargetTouchMove=y.onTargetTouchMove.bind(y);y.onTargetTouchEnd=y.onTargetTouchEnd.bind(y)}if(w.PointerEvents){t.push("pointerdown","pointermove","pointerup","pointercancel");y.mousePointerType="mouse"}else{if(w.MSPointerEvents){t.push("MSPointerDown","MSPointerMove","MSPointerUp","MSPointerCancel");y.mousePointerType=4}else{if(q){t.push("touchstart","touchmove","touchend","touchcancel")}}}if(!t.length||(q&&Ext.isWebKit&&Ext.os.is.Desktop)){t.push("mousedown","mousemove","mouseup")}y.initConfig(u);return Ext.event.publisher.Dom.prototype.constructor.call(this)},onReady:function(){Ext.event.publisher.Dom.prototype.onReady.call(this);Ext.Array.sort(this.recognizers,function(m,n){var o=m.priority,p=n.priority;return(o>p)?1:(o<p)?-1:0})},registerRecognizer:function(t){var u=this,q=t.handledEvents,o=q.length,s,p;t.setOnRecognized(u.onRecognized);t.setCallbackScope(u);for(p=0;p<o;p++){s=q[p];u.handledEvents.push(s);u.eventToRecognizer[s]=t}u.registerEvents(q);u.recognizers.push(t)},onRecognized:function(G,A,N,F,O){var K=this,B=N.touches,J=N.changedTouches,M=J.length,H=K.events,C=!H.length,L=K.cancelEvents,I,e,D,E;F=F||{};F.type=A;F.target=J[0].target;F.stopped=false;F.claimed=false;F.isGesture=true;N=N.chain(F);if(!K.gestureTargets){if(M>1){I=[];for(D=0;D<M;D++){E=J[D];I.push(E.targets)}e=K.getCommonTargets(I)}else{e=J[0].targets}K.gestureTargets=e}if(O&&G.isSingleTouch&&(B.length>1)){N.target=B[0].target;L.push(N)}else{H.push(N)}if(C){K.publishGestures()}},getCommonTargets:function(w){var v=w[0],y=w.length;if(y===1){return v}var s=[],q=1,x,u,t;while(true){x=v[v.length-q];if(!x){return s}for(t=1;t<y;t++){u=w[t];if(u[u.length-q]!==x){return s}}s.unshift(x);q++}return s},invokeRecognizers:function(p,t){var q=this.recognizers,u=q.length,e,s;if(p==="onStart"){for(e=0;e<u;e++){q[e].isActive=true}}for(e=0;e<u;e++){s=q[e];if(s.isActive&&s[p].call(s,t)===false){s.isActive=false}}},filterClaimed:function(t,z){var v=this,y=v.eventToRecognizer,u=z.type,B=y[u],C,A,w,x;for(x=t.length;x--;){w=t[x].type;if(w===u){C=x}else{A=y[w];if(!B||(A&&(A!==B))){t.splice(x,1);if(C){C--}}}}v.claimRecognizer(B,t[0]);return C},claimRecognizer:function(t,u){var v=this,q=v.recognizers,e,w,s;for(e=0,w=q.length;e<w;e++){s=q[e];if(s!==t){s.isActive=false;s.cancel(u)}}if(v.events.length){v.publishGestures(true)}},publishGestures:function(o){var p=this,n=p.cancelEvents,s=p.events,q=p.gestureTargets;if(n.length){p.cancelEvents=[];p.publish(n,p.getPropagatingTargets(n[0].target),true)}if(s.length){p.events=[];p.gestureTargets=null;p.publish(s,q||p.getPropagatingTargets(s[0].target),o)}},updateTouches:function(e,H){var L=this,y=e.browserEvent,E=y.changedTouches||[y],I=L.activeTouches,O=L.activeTouchesMap,J=[],M,x,F,D,G,N,C,K;for(G=0,N=E.length;G<N;G++){M=E[G];if("identifier" in M){x=M.identifier}else{if("pointerId" in M){x=M.pointerId}else{x=1}}F=O[x];if(!F){D=Ext.event.Event.resolveTextNode(M.target);F=O[x]={identifier:x,target:D,targets:L.getPropagatingTargets(D)};I.push(F)}if(H){delete O[x];Ext.Array.remove(I,F)}C=M.pageX;K=M.pageY;F.pageX=C;F.pageY=K;F.point=new Ext.util.Point(C,K);J.push(F)}e.touches=Ext.Array.clone(I);e.changedTouches=J},publishDelegatedDomEvent:function(e){var l=this;if(!e.button||e.button<1){l.events=[e];l.handlers[e.type].call(l,e)}else{Ext.event.publisher.Dom.prototype.publishDelegatedDomEvent.call(this,e)}},onTouchStart:function(e){var p=this,n=e.target,o=e.browserEvent.touches;if(e.browserEvent.type==="touchstart"){n.addEventListener("touchmove",p.onTargetTouchMove);n.addEventListener("touchend",p.onTargetTouchEnd);n.addEventListener("touchcancel",p.onTargetTouchEnd)}if(o&&o.length<=p.activeTouches.length){p.removeGhostTouches(o)}p.updateTouches(e);if(!p.isStarted){if(Ext.enableGarbageCollector){Ext.dom.GarbageCollector.pause()}p.isStarted=true;p.invokeRecognizers("onStart",e)}p.invokeRecognizers("onTouchStart",e);p.publishGestures()},onTouchMove:function(e){var m=this,n=m.mousePointerType;if(m.isStarted){if(n&&e.browserEvent.pointerType===n&&e.buttons===0){e.type=Ext.dom.Element.prototype.eventMap.touchend;e.button=0;m.onTouchEnd(e);return}m.updateTouches(e);if(e.changedTouches.length>0){m.invokeRecognizers("onTouchMove",e)}}m.publishGestures()},onTouchEnd:function(e){var m=this,n;if(!m.isStarted){m.publishGestures();return}m.updateTouches(e,true);n=m.activeTouches.length;try{m.invokeRecognizers(m.isCancelEvent[e.type]?"onTouchCancel":"onTouchEnd",e)}finally{if(!n){m.isStarted=false;m.invokeRecognizers("onEnd",e)}m.publishGestures();if(!n){if(Ext.enableGarbageCollector){Ext.dom.GarbageCollector.resume()}}}},onTargetTouchMove:function(e){if(Ext.elevateFunction){Ext.elevateFunction(this.doTargetTouchMove,this,[e])}else{this.doTargetTouchMove(e)}},doTargetTouchMove:function(e){if(!Ext.getBody().contains(e.target)){this.onTouchMove(new Ext.event.Event(e))}},onTargetTouchEnd:function(e){if(Ext.elevateFunction){Ext.elevateFunction(this.doTargetTouchEnd,this,[e])}else{this.doTargetTouchEnd(e)}},doTargetTouchEnd:function(e){var n=this,m=e.target;m.removeEventListener("touchmove",n.onTargetTouchMove);m.removeEventListener("touchend",n.onTargetTouchEnd);m.removeEventListener("touchcancel",n.onTargetTouchEnd);if(!Ext.getBody().contains(m)){n.onTouchEnd(new Ext.event.Event(e))}},reset:function(){var n=this,q=n.recognizers,o=q.length,p,s;n.activeTouchesMap={};n.activeTouches=[];n.changedTouches=[];n.isStarted=false;n.gestureTargets=null;n.events=[];n.cancelEvents=[];for(p=0;p<o;p++){s=q[p];s.reset();s.isActive=false}Ext.event.publisher.Dom.prototype.reset.call(this)},privates:{removeGhostTouches:function(q){var t={},w=q.length,v=this.activeTouches,s=this.activeTouchesMap,u,x,y;for(u=0;u<w;++u){t[q[u].identifier]=true}u=v.length;while(u--){y=v[u];x=y.identifier;if(!q[x]){Ext.Array.remove(v,y);delete s[x]}}}}},1,0,0,0,0,0,[Ext.event.publisher,"Gesture"],function(f){f.instance=Ext.$gesturePublisher=new f()}));Ext.define("Ext.overrides.event.publisher.Gesture",{override:"Ext.event.publisher.Gesture"},function(){if(Ext.isIE9m){this.override({updateTouches:function(n,p){var e=n.browserEvent,o=n.getXY();e.pageX=o[0];e.pageY=o[1];this.callParent([n,p])},doDelegatedEvent:function(e){this.callParent([Ext.event.Event.enableIEAsync(e)])}})}});(Ext.cmd.derive("Ext.mixin.Templatable",Ext.Mixin,{mixinConfig:{id:"templatable"},referenceAttributeName:"reference",referenceSelector:"[reference]",getElementConfig:function(){return{reference:"element"}},getElementTemplate:function(){var f=document.createDocumentFragment();f.appendChild(Ext.Element.create(this.getElementConfig(),true));return f},initElement:function(){var f=this.self.prototype;f.elementTemplate=this.getElementTemplate();f.initElement=f.doInitElement;this.initElement.apply(this,arguments)},linkElement:function(l,g){this.link(l,g)},doInitElement:function(){var v=this.referenceAttributeName,s,q,p,w,t,u;s=this.elementTemplate.cloneNode(true);q=s.querySelectorAll(this.referenceSelector);for(p=0,w=q.length;p<w;p++){t=q[p];u=t.getAttribute(v);t.removeAttribute(v);this.linkElement(u,t)}}},0,0,0,0,0,0,[Ext.mixin,"Templatable"],0));(Ext.cmd.derive("Ext.TaskQueue",Ext.Base,{singleton:true,pending:false,mode:true,constructor:function(){this.readQueue=[];this.writeQueue=[];this.run=Ext.Function.bind(this.run,this);if(Ext.os.is.iOS){Ext.interval(this.watch,500,this)}},requestRead:function(l,m,n){this.request(true);this.readQueue.push(arguments)},requestWrite:function(l,m,n){this.request(false);this.writeQueue.push(arguments)},request:function(f){if(!this.pending){this.pendingTime=Date.now();this.pending=true;this.mode=f;if(f){Ext.defer(this.run,1,this)}else{Ext.Function.requestAnimationFrame(this.run)}}},watch:function(){if(this.pending&&Date.now()-this.pendingTime>=500){this.run()}},run:function(){this.pending=false;var t=this.readQueue,x=this.writeQueue,z=null,w;if(this.mode){w=t;if(x.length>0){z=false}}else{w=x;if(t.length>0){z=true}}var A=w.slice(),y,v,B,u,C;w.length=0;for(y=0,v=A.length;y<v;y++){B=A[y];u=B[0];C=B[1];if(C&&(C.destroying||C.destroyed)){continue}if(typeof u==="string"){u=C[u]}if(B.length>2){u.apply(C,B[2])}else{u.call(C)}}A.length=0;if(z!==null){this.request(z)}}},1,0,0,0,0,0,[Ext,"TaskQueue"],0));(Ext.cmd.derive("Ext.util.sizemonitor.Abstract",Ext.Base,{config:{element:null,callback:Ext.emptyFn,scope:null,args:[]},width:null,height:null,contentWidth:null,contentHeight:null,constructor:function(f){this.refresh=Ext.Function.bind(this.refresh,this);this.info={width:0,height:0,contentWidth:0,contentHeight:0,flag:0};this.initElement();this.initConfig(f);this.bindListeners(true)},bindListeners:Ext.emptyFn,applyElement:function(f){if(f){return Ext.get(f)}},updateElement:function(f){f.append(this.detectorsContainer);f.addCls("x-size-monitored")},applyArgs:function(f){return f.concat([this.info])},refreshMonitors:Ext.emptyFn,forceRefresh:function(){Ext.TaskQueue.requestRead("refresh",this)},getContentBounds:function(){return this.detectorsContainer.getBoundingClientRect()},getContentWidth:function(){return this.detectorsContainer.clientWidth},getContentHeight:function(){return this.detectorsContainer.clientHeight},refreshSize:function(){var y=this.getElement();if(!y||y.destroyed){return false}var A=y.getWidth(),C=y.getHeight(),B=this.getContentWidth(),t=this.getContentHeight(),u=this.contentWidth,w=this.contentHeight,z=this.info,x=false,v=0;this.width=A;this.height=C;this.contentWidth=B;this.contentHeight=t;v=((u!==B?1:0)+(w!==t?2:0));if(v>0){z.width=A;z.height=C;z.contentWidth=B;z.contentHeight=t;z.flag=v;x=true;this.getCallback().apply(this.getScope(),this.getArgs())}return x},refresh:function(f){if(this.destroying||this.destroyed){return}if(this.refreshSize()||f){Ext.TaskQueue.requestWrite("refreshMonitors",this)}},destroy:function(){var g=this,l=g.getElement();g.bindListeners(false);if(l&&!l.destroyed){l.removeCls("x-size-monitored")}delete g._element;g.refresh=null;g.callParent()}},1,0,0,0,0,[[Ext.mixin.Templatable.prototype.mixinId||Ext.mixin.Templatable.$className,Ext.mixin.Templatable]],[Ext.util.sizemonitor,"Abstract"],0));(Ext.cmd.derive("Ext.util.sizemonitor.Scroll",Ext.util.sizemonitor.Abstract,{getElementConfig:function(){return{reference:"detectorsContainer",classList:["x-size-monitors","scroll"],children:[{reference:"expandMonitor",className:"expand"},{reference:"shrinkMonitor",className:"shrink"}]}},constructor:function(f){this.onScroll=Ext.Function.bind(this.onScroll,this);Ext.util.sizemonitor.Abstract.prototype.constructor.apply(this,arguments)},bindListeners:function(g){var l=g?"addEventListener":"removeEventListener";this.expandMonitor[l]("scroll",this.onScroll,true);this.shrinkMonitor[l]("scroll",this.onScroll,true)},forceRefresh:function(){Ext.TaskQueue.requestRead("refresh",this,[true])},onScroll:function(){Ext.TaskQueue.requestRead("refresh",this)},refreshMonitors:function(){var m=this.expandMonitor,l=this.shrinkMonitor,n=1000000;if(m&&!m.destroyed){m.scrollLeft=n;m.scrollTop=n}if(l&&!l.destroyed){l.scrollLeft=n;l.scrollTop=n}},destroy:function(){this.onScroll=null;Ext.util.sizemonitor.Abstract.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.util.sizemonitor,"Scroll"],0));(Ext.cmd.derive("Ext.util.sizemonitor.OverflowChange",Ext.util.sizemonitor.Abstract,{constructor:function(f){this.onExpand=Ext.Function.bind(this.onExpand,this);this.onShrink=Ext.Function.bind(this.onShrink,this);Ext.util.sizemonitor.Abstract.prototype.constructor.apply(this,arguments)},getElementConfig:function(){return{reference:"detectorsContainer",classList:["x-size-monitors","overflowchanged"],children:[{reference:"expandMonitor",className:"expand",children:[{reference:"expandHelper"}]},{reference:"shrinkMonitor",className:"shrink",children:[{reference:"shrinkHelper"}]}]}},bindListeners:function(g){var l=g?"addEventListener":"removeEventListener";this.expandMonitor[l](Ext.browser.is.Firefox?"underflow":"overflowchanged",this.onExpand,true);this.shrinkMonitor[l](Ext.browser.is.Firefox?"overflow":"overflowchanged",this.onShrink,true)},onExpand:function(e){if(Ext.browser.is.Webkit&&e.horizontalOverflow&&e.verticalOverflow){return}Ext.TaskQueue.requestRead("refresh",this)},onShrink:function(e){if(Ext.browser.is.Webkit&&!e.horizontalOverflow&&!e.verticalOverflow){return}Ext.TaskQueue.requestRead("refresh",this)},refreshMonitors:function(){if(this.destroying||this.destroyed){return}var u=this.expandHelper,o=this.shrinkHelper,s=this.getContentBounds(),p=s.width,t=s.height,q;if(u&&!u.destroyed){q=u.style;q.width=(p+1)+"px";q.height=(t+1)+"px"}if(o&&!o.destroyed){q=o.style;q.width=p+"px";q.height=t+"px"}Ext.TaskQueue.requestRead("refresh",this)},destroy:function(){this.onExpand=this.onShrink=null;Ext.util.sizemonitor.Abstract.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.util.sizemonitor,"OverflowChange"],0));(Ext.cmd.derive("Ext.util.SizeMonitor",Ext.Base,{constructor:function(l){var g=Ext.util.sizemonitor;if(Ext.browser.is.Firefox){return new g.OverflowChange(l)}else{return new g.Scroll(l)}}},1,0,0,0,0,0,[Ext.util,"SizeMonitor"],0));(Ext.cmd.derive("Ext.event.publisher.ElementSize",Ext.event.publisher.Publisher,{type:"size",handledEvents:["resize"],constructor:function(){this.monitors={};this.subscribers={};Ext.event.publisher.Publisher.prototype.constructor.apply(this,arguments)},subscribe:function(o){var m=o.id,n=this.subscribers,p=this.monitors;if(n[m]){++n[m]}else{n[m]=1;p[m]=new Ext.util.SizeMonitor({element:o,callback:this.onElementResize,scope:this,args:[o]})}o.on("painted","forceRefresh",p[m]);return true},unsubscribe:function(p){var n=p.id,o=this.subscribers,q=this.monitors,s;if(o[n]&&!--o[n]){delete o[n];s=q[n];p.un("painted","forceRefresh",s);s.destroy();delete q[n]}},onElementResize:function(l,g){Ext.TaskQueue.requestRead("fire",this,[l,"resize",[l,g]])}},1,0,0,0,0,0,[Ext.event.publisher,"ElementSize"],function(f){f.instance=new f()}));(Ext.cmd.derive("Ext.util.paintmonitor.Abstract",Ext.Base,{config:{element:null,callback:Ext.emptyFn,scope:null,args:[]},eventName:"",monitorClass:"",constructor:function(f){this.onElementPainted=Ext.Function.bind(this.onElementPainted,this);this.initConfig(f)},bindListeners:function(f){this.monitorElement[f?"addEventListener":"removeEventListener"](this.eventName,this.onElementPainted,true)},applyElement:function(f){if(f){return Ext.get(f)}},updateElement:function(f){this.monitorElement=Ext.Element.create({classList:["x-paint-monitor",this.monitorClass]},true);f.appendChild(this.monitorElement);f.addCls("x-paint-monitored");this.bindListeners(true)},onElementPainted:function(){},destroy:function(){var m=this,o=m.monitorElement,p=o.parentNode,n=m.getElement();m.bindListeners(false);delete m.monitorElement;if(n&&!n.destroyed){n.removeCls("x-paint-monitored");delete m._element}if(p){p.removeChild(o)}m.callParent()}},1,0,0,0,0,0,[Ext.util.paintmonitor,"Abstract"],0));(Ext.cmd.derive("Ext.util.paintmonitor.CssAnimation",Ext.util.paintmonitor.Abstract,{eventName:Ext.browser.is.WebKit?"webkitAnimationEnd":"animationend",monitorClass:"cssanimation",onElementPainted:function(e){if(e.animationName==="x-paint-monitor-helper"){this.getCallback().apply(this.getScope(),this.getArgs())}}},0,0,0,0,0,0,[Ext.util.paintmonitor,"CssAnimation"],0));(Ext.cmd.derive("Ext.util.PaintMonitor",Ext.Base,{constructor:function(f){return new Ext.util.paintmonitor.CssAnimation(f)}},1,0,0,0,0,0,[Ext.util,"PaintMonitor"],0));(Ext.cmd.derive("Ext.event.publisher.ElementPaint",Ext.event.publisher.Publisher,{type:"paint",handledEvents:["painted"],constructor:function(){this.monitors={};this.subscribers={};Ext.event.publisher.Publisher.prototype.constructor.apply(this,arguments)},subscribe:function(p){var o=this,m=p.id,n=o.subscribers;if(n[m]){++n[m]}else{n[m]=1;o.monitors[m]=new Ext.util.PaintMonitor({element:p,callback:o.onElementPainted,scope:o,args:[p]})}},unsubscribe:function(o){var m=o.id,n=this.subscribers,p=this.monitors;if(n[m]&&!--n[m]){delete n[m];p[m].destroy();delete p[m]}},onElementPainted:function(f){Ext.TaskQueue.requestRead("fire",this,[f,"painted",[f]])}},1,0,0,0,0,0,[Ext.event.publisher,"ElementPaint"],function(f){f.instance=new f()}));(Ext.cmd.derive("Ext.dom.Element",Ext.Base,function(be){var a4=window,ba=document,bs=ba.documentElement,a5=a4.top,a7,aI,ax,bm="width",bd="height",aO="min-width",bq="min-height",bc="max-width",aM="max-height",a5="top",aE="right",aw="bottom",aF="left",bk="visibility",aL="hidden",bt="display",a2="none",bh="z-index",aX="position",a8="relative",a6="static",aU="-",aY=/\w/g,ay=/\s+/,aK=/[\s]+/,bv=/^(?:transparent|(?:rgba[(](?:\s*\d+\s*[,]){3}\s*0\s*[)]))$/i,aB=/table-row|table-.*-group/,bu=/top/i,a0={t:"border-top-width",r:"border-right-width",b:"border-bottom-width",l:"border-left-width"},aQ={t:"padding-top",r:"padding-right",b:"padding-bottom",l:"padding-left"},bi={t:"margin-top",r:"margin-right",b:"margin-bottom",l:"margin-left"},aG=[aQ.l,aQ.r,aQ.t,aQ.b],bo=[a0.l,a0.r,a0.t,a0.b],aT=/\d+$/,bl=/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i,bb="px",bf=/(-[a-z])/gi,aA=/([a-z0-9\-]+)\s*:\s*([^;\s]+(?:\s*[^;\s]+)*);?/gi,a9=/^\d+(?:\.\d*)?px$/i,aW={},a1="originalDisplay",aZ=function(g,f){return f.charAt(1).toUpperCase()},az=function(g,n){var f,l,m;if(g.nodeType===1){g._extData=null;if(n){f=g.childNodes;for(l=0,m=f.length;l<m;++l){az(f[l],n)}}}},aJ="x-hidden-visibility",aN="x-hidden-display",bj="x-hidden-offsets",bw="x-hidden-clip",aP="x-sized",e="x-unsized",aD="x-stretched",bg={style:"style",className:"className",cls:"cls",classList:"classList",text:"text",hidden:"hidden",html:"html",children:"children"},a3=0,aS=0,aR=false,bp=false,aV,aH,bn;try{a7=a5.__elementIdCounter__}catch(aC){a5=a4}a5.__elementIdCounter=a7=(a5.__elementIdCounter__||0)+1;aI="ext-window-"+a7;ax="ext-document-"+a7;return{alternateClassName:["Ext.Element"],observableType:"element",isElement:true,skipGarbageCollection:true,$applyConfigs:true,identifiablePrefix:"ext-element-",styleHooks:{},validIdRe:Ext.validIdRe,blockedEvents:Ext.supports.EmulatedMouseOver?{mouseover:1}:{},longpressEvents:{longpress:1,taphold:1},constructor:function(l){var g=this,f;if(typeof l==="string"){l=ba.getElementById(l)}if(!l){return null}g.dom=l;f=l.id;if(f){g.id=f}else{f=l.id=g.getUniqueId()}g.el=g;Ext.cache[f]=g;g.longpressListenerCount=0;g.mixins.observable.constructor.call(g)},inheritableStatics:{cache:Ext.cache={},editableSelector:'input,textarea,[contenteditable="true"]',VISIBILITY:1,DISPLAY:2,OFFSETS:3,CLIP:4,minKeyboardHeight:100,unitRe:bl,useDelegatedEvents:true,validNodeTypes:{1:1,9:1},addUnits:function(g,f){if(typeof g==="number"){return g+(f||bb)}if(g===""||g==="auto"||g==null){return g||""}if(aT.test(g)){return g+(f||bb)}if(!bl.test(g)){return g||""}return g},create:function(v,f){var o=this,g,q,n,l,m,t,s,p,u;v=v||{};if(v.isElement){return f?v.dom:v}else{if("nodeType" in v){return f?v:Ext.get(v)}}if(typeof v==="string"){return ba.createTextNode(v)}l=v.tag;if(!l){l="div"}if(v.namespace){q=ba.createElementNS(v.namespace,l)}else{q=ba.createElement(l)}n=q.style;for(t in v){if(t!=="tag"){m=v[t];switch(t){case bg.style:if(typeof m==="string"){q.setAttribute(t,m)}else{for(s in m){if(m.hasOwnProperty(s)){n[s]=m[s]}}}break;case bg.className:case bg.cls:u=m.split(ay);g=g?g.concat(u):u;break;case bg.classList:g=g?g.concat(m):m;break;case bg.text:q.textContent=m;break;case bg.html:q.innerHTML=m;break;case bg.hidden:if(g){g.push(aN)}else{g=[aN]}break;case bg.children:if(m!=null){for(s=0,p=m.length;s<p;s++){q.appendChild(o.create(m[s],true))}}break;default:if(m!=null){q.setAttribute(t,m)}}}}if(g){q.className=g.join(" ")}if(f){return q}else{return o.get(q)}},detach:function(){var f=this.dom;if(f&&f.parentNode&&f.tagName!=="BODY"){f.parentNode.removeChild(f)}return this},fly:function(g,f){return Ext.fly(g,f)},fromPoint:(function(){var f;if(Ext.isIE){try{f=window.self!==window.top}catch(g){f=true}}return function(m,n,o){var l=null;l=ba.elementFromPoint(m,n);if(!l&&f){l=ba.elementFromPoint(m,n)}return o?l:Ext.get(l)}})(),fromPagePoint:function(g,f,m){var l=Ext.getDoc().getScroll();return be.fromPoint(g-l.left,f-l.top,m)},get:function(f){var o=this,q=Ext.cache,s,t,g,l,m,p,n;if(!f){return null}if(f.isFly){f=f.dom}if(typeof f==="string"){g=f;if(q.hasOwnProperty(g)){l=q[g];if(l.skipGarbageCollection||!Ext.isGarbage(l.dom)){return l}else{l.destroy()}}if(g===aI){return be.get(a4)}else{if(g===ax){return be.get(ba)}}t=Ext.getElementById?Ext.getElementById(g):ba.getElementById(g);if(t){return new be(t)}}s=f.nodeType;if(s){m=(s===9);n=o.validNodeTypes[s]}else{p=(f.window==f)}if(n||p){g=f.id;if(q.hasOwnProperty(g)){l=q[g];if(l.skipGarbageCollection||f===l.dom||!Ext.isGarbage(l.dom)){return l}else{l.destroy()}}if(f===ba){f.id=ax}if(f==a4){f.id=aI}f=new be(f);if(p||m){f.skipGarbageCollection=true}return f}if(f.isElement){return f}if(f.isComposite){return f}if(Ext.isIterable(f)){return o.select(f)}return null},getActiveElement:function(g){var f=ba.activeElement;if(!f||!f.focus){f=ba.body}return g?Ext.get(f):f},getDocumentHeight:function(){return Math.max(!Ext.isStrict?ba.body.scrollHeight:bs.scrollHeight,this.getViewportHeight())},getDocumentWidth:function(){return Math.max(!Ext.isStrict?ba.body.scrollWidth:bs.scrollWidth,this.getViewportWidth())},getOrientation:function(){if(Ext.supports.OrientationChange){return(a4.orientation==0)?"portrait":"landscape"}return(a4.innerHeight>a4.innerWidth)?"portrait":"landscape"},getViewportHeight:function(){var f=be._viewportHeight;if(Ext.isIE9m){return ba.documentElement.clientHeight}return(f!=null)?f:bs.clientHeight},getViewportWidth:function(){var f=be._viewportWidth;if(Ext.isIE9m){return ba.documentElement.clientWidth}return(f!=null)?f:bs.clientWidth},getViewportScale:function(){var f=a4.top;return((Ext.isiOS||Ext.isAndroid)?1:(f.devicePixelRatio||f.screen.deviceXDPI/f.screen.logicalXDPI))*this.getViewportTouchScale()},getViewportTouchScale:function(l){var f=1,n="hidden",m=a4.top,g;if(!l){g=this._viewportTouchScale;if(g){return g}}if(Ext.isIE10p||Ext.isEdge||Ext.isiOS){f=bs.offsetWidth/a4.innerWidth}else{if(Ext.isChromeMobile){f=m.outerWidth/m.innerWidth}}return f},getViewSize:function(){return{width:be.getViewportWidth(),height:be.getViewportHeight()}},maskIframes:function(){var f=document.getElementsByTagName("iframe");Ext.each(f,function(g){var l;l=Ext.fly(g.parentNode).mask();l.setStyle("background-color","transparent")})},normalize:function(f){return aW[f]||(aW[f]=f.replace(bf,aZ))},_onWindowFocusChange:function(f){if(Ext.fly(f.target).is(be.editableSelector)){a3=new Date();aR=(f.type==="focusin"||f.type==="pointerup")}},_onWindowResize:function(){var m=bs.clientWidth,l=bs.clientHeight,f=new Date(),o=1000,g,n;g=m-be._documentWidth;n=l-be._documentHeight;be._windowWidth=m;be._windowHeight=l;if(((f-a3)<o)||((f-aS)<o)){if(g===0&&(aR&&(n<=-be.minKeyboardHeight))){bp=true;return}}if(bp&&(g===0)&&(n>=be.minKeyboardHeight)){bp=false;aS=new Date()}if(bp){return}be._viewportWidth=m;be._viewportHeight=l},parseBox:function(g){g=g||0;var m=typeof g,f,l;if(m==="number"){return{top:g,right:g,bottom:g,left:g}}else{if(m!=="string"){return g}}f=g.split(" ");l=f.length;if(l===1){f[1]=f[2]=f[3]=f[0]}else{if(l===2){f[2]=f[0];f[3]=f[1]}else{if(l===3){f[3]=f[1]}}}return{top:parseFloat(f[0])||0,right:parseFloat(f[1])||0,bottom:parseFloat(f[2])||0,left:parseFloat(f[3])||0}},parseStyles:function(l){var g={},f;if(l){aA.lastIndex=0;while((f=aA.exec(l))){g[f[1]]=f[2]||""}}return g},select:function(l,f,g){return Ext.fly(g||ba).select(l,f)},query:function(l,g,f){return Ext.fly(f||ba).query(l,g)},unitizeBox:function(f,l){var g=this;f=g.parseBox(f);return g.addUnits(f.top,l)+" "+g.addUnits(f.right,l)+" "+g.addUnits(f.bottom,l)+" "+g.addUnits(f.left,l)},unmaskIframes:function(){var f=document.getElementsByTagName("iframe");Ext.each(f,function(g){Ext.fly(g.parentNode).unmask()})},serializeForm:function(y){var w=y.elements||(ba.forms[y]||Ext.getDom(y)).elements,l=false,n=encodeURIComponent,t="",u=w.length,s,m,o,x,g,q,v,p,f;for(q=0;q<u;q++){s=w[q];m=s.name;o=s.type;x=s.options;if(!s.disabled&&m){if(/select-(one|multiple)/i.test(o)){p=x.length;for(v=0;v<p;v++){f=x[v];if(f.selected){g=f.hasAttribute("value");t+=Ext.String.format("{0}={1}&",n(m),n(g?f.value:f.text))}}}else{if(!(/file|undefined|reset|button/i.test(o))){if(!(/radio|checkbox/i.test(o)&&!s.checked)&&!(o=="submit"&&l)){t+=n(m)+"="+n(s.value)+"&";l=/submit/i.test(o)}}}}}return t.substr(0,t.length-1)},getCommonAncestor:function(f,l,g){bn=bn||new Ext.dom.Fly();bn.attach(Ext.getDom(f));while(!bn.isAncestor(l)){if(bn.dom.parentNode){bn.attach(bn.dom.parentNode)}else{bn.attach(ba.body);break}}return g?bn.dom:Ext.get(bn)}},addCls:function(o,q,m){var n=this,v=n.getData(),l,u,g,f,s,p,t;if(!o){return n}if(!v.isSynchronized){n.synchronize()}u=n.dom;g=v.classMap;f=v.classList;q=q?q+aU:"";m=m?aU+m:"";if(typeof o==="string"){o=o.split(ay)}for(s=0,p=o.length;s<p;s++){t=o[s];if(t){t=q+t+m;if(!g[t]){g[t]=true;f.push(t);l=true}}}if(l){u.className=f.join(" ")}return n},addClsOnClick:function(m,l,o){var g=this,f=g.dom,n=Ext.isFunction(l);g.on("mousedown",function(){if(n&&l.call(o||g,g)===false){return false}Ext.fly(f).addCls(m);var p=Ext.getDoc(),q=function(){Ext.fly(f).removeCls(m);p.removeListener("mouseup",q)};p.on("mouseup",q)});return g},addClsOnFocus:function(m,l,o){var g=this,f=g.dom,n=Ext.isFunction(l);g.on("focus",function(){if(n&&l.call(o||g,g)===false){return false}Ext.fly(f).addCls(m)});g.on("blur",function(){Ext.fly(f).removeCls(m)});return g},addClsOnOver:function(m,l,o){var g=this,f=g.dom,n=Ext.isFunction(l);g.hover(function(){if(n&&l.call(o||g,g)===false){return}Ext.fly(f).addCls(m)},function(){Ext.fly(f).removeCls(m)});return g},addStyles:function(g,m){var o=0,n=(g||"").match(aY),f,q=n.length,l,p=[];if(q===1){o=Math.abs(parseFloat(this.getStyle(m[n[0]]))||0)}else{if(q){for(f=0;f<q;f++){l=n[f];p.push(m[l])}p=this.getStyle(p);for(f=0;f<q;f++){l=n[f];o+=parseFloat(p[m[l]])||0}}}return o},addUnits:function(g,f){return be.addUnits(g,f)},adjustDirect2DDimension:function(f){var m=this,g=m.dom,o=m.getStyle("display"),q=g.style.display,l=g.style.position,n=f===bm?0:1,p=g.currentStyle,s;if(o==="inline"){g.style.display="inline-block"}g.style.position=o.match(aB)?"absolute":"static";s=(parseFloat(p[f])||parseFloat(p.msTransformOrigin.split(" ")[n])*2)%1;g.style.position=l;if(o==="inline"){g.style.display=q}return s},animate:function(f){f=new Ext.fx.Animation(f);f.setElement(this);this._activeAnimation=f;f.on({animationend:this._onAnimationEnd,scope:this});Ext.Animator.run(f);return f},_onAnimationEnd:function(){this._activeAnimation=null},getActiveAnimation:function(){return this._activeAnimation},append:function(){this.appendChild.apply(this,arguments)},appendChild:function(l,n){var f=this,g,o,m;if(l.nodeType||l.dom||typeof l==="string"){l=Ext.getDom(l);f.dom.appendChild(l);return !n?Ext.get(l):l}else{if(l.length){g=Ext.fly(ba.createDocumentFragment());o=l.length;for(m=0;m<o;m++){g.appendChild(l[m],n)}l=Ext.Array.toArray(g.dom.childNodes);f.dom.appendChild(g.dom);return n?l:new Ext.dom.CompositeElementLite(l)}else{return f.createChild(l,null,n)}}},appendTo:function(f){Ext.getDom(f).appendChild(this.dom);return this},applyStyles:function(f){if(f){if(typeof f==="function"){f=f.call()}if(typeof f==="string"){f=be.parseStyles(f)}if(typeof f==="object"){this.setStyle(f)}}return this},blur:function(){var l=this,f=l.dom;if(f!==ba.body){try{f.blur()}catch(g){}return l}else{return l.focus(undefined,f)}},cacheScrollValues:function(){var f=this,n=[],l=[],g,m,p,o;aH=aH||new Ext.dom.Fly();g=f.query("*");for(p=0,o=g.length;p<o;p++){m=g[p];if(m.scrollTop>0||m.scrollLeft!==0){l.push(m);n.push(aH.attach(m).getScroll())}}return function(){var s,q,t;for(q=0,t=l.length;q<t;q++){s=n[q];aH.attach(l[q]);aH.setScrollLeft(s.left);aH.setScrollTop(s.top)}}},center:function(f){return this.alignTo(f||ba,"c-c")},child:function(m,l){var g=this,f=Ext.get(g).id;return g.selectNode(Ext.makeIdSelector(f)+" > "+m,!!l)},clone:function(l,g){var f=this.dom.cloneNode(l);if(Ext.supports.CloneNodeCopiesExpando){az(f,l)}return g?f:Ext.get(f)},constrainScrollLeft:function(g){var f=this.dom;return Math.max(Math.min(g,f.scrollWidth-f.clientWidth),0)},constrainScrollTop:function(g){var f=this.dom;return Math.max(Math.min(g,f.scrollHeight-f.clientHeight),0)},createChild:function(l,g,f){l=l||{tag:"div"};if(g){return Ext.DomHelper.insertBefore(g,l,f!==true)}else{return Ext.DomHelper.append(this.dom,l,f!==true)}},contains:function(l){if(!l){return false}var g=this,f=Ext.getDom(l);return(f===g.dom)||g.isAncestor(f)},destroy:function(){var g=this,f=g.dom;if(f&&f.parentNode){f.parentNode.removeChild(f)}g.collect()},detach:function(){var f=this.dom;if(f&&f.parentNode&&f.tagName!=="BODY"){f.parentNode.removeChild(f)}return this},disableShadow:function(){var f=this.shadow;if(f){f.hide();f.disabled=true}},disableShim:function(){var f=this.shim;if(f){f.hide();f.disabled=true}},doReplaceWith:function(g){var f=this.dom;f.parentNode.replaceChild(Ext.getDom(g),f)},doScrollIntoView:function(u,v,g,t,m,p){aH=aH||new Ext.dom.Fly();var o=this,s=o.dom,l=aH.attach(u)[m](),n=u.scrollTop,q=o.getScrollIntoViewXY(u,l,n),w=q.x,f=q.y;if(t){if(g){g=Ext.apply({listeners:{afteranimate:function(){aH.attach(s).highlight()}}},g)}else{aH.attach(s).highlight()}}if(f!==n){aH.attach(u).scrollTo("top",f,g)}if(v!==false&&(w!==l)){aH.attach(u)[p]("left",w,g)}return o},down:function(g,f){return this.selectNode(g,!!f)},enableShadow:function(n,m){var l=this,f=l.shadow||(l.shadow=new Ext.dom.Shadow(Ext.apply({target:l},n))),g=l.shim;if(g){g.offsets=f.outerOffsets;g.shadow=f;f.shim=g}if(m===true||(m!==false&&l.isVisible())){f.show()}else{f.hide()}f.disabled=false},enableShim:function(n,m){var l=this,f=l.shim||(l.shim=new Ext.dom.Shim(Ext.apply({target:l},n))),g=l.shadow;if(g){f.offsets=g.outerOffsets;f.shadow=g;g.shim=f}if(m===true||(m!==false&&l.isVisible())){f.show()}else{f.hide()}f.disabled=false;return f},findParent:function(l,p,o){var g=this,f=g.dom,n=bs,m=0;if(p||p===0){if(typeof p!=="number"){n=Ext.getDom(p);p=Number.MAX_VALUE}}else{p=50}while(f&&f.nodeType===1&&m<p&&f!==n){if(Ext.fly(f).is(l)){return o?Ext.get(f):f}m++;f=f.parentNode}return null},findParentNode:function(f,m,l){var g=Ext.fly(this.dom.parentNode);return g?g.findParent(f,m,l):null},first:function(g,f){return this.matchNode("nextSibling","firstChild",g,f)},focus:function(f,l){var g=this;l=l||g.dom;if(Number(f)){Ext.defer(g.focus,f,g,[null,l])}else{Ext.GlobalEvents.fireEvent("beforefocus",l);l.focus()}return g},collect:function(){var m=this,l=m.dom,f=m.shadow,g=m.shim;if(!m.isFly){m.mixins.observable.destroy.call(m);delete Ext.cache[m.id];m.el=null}if(l){l._extData=m.dom=null}if(f){f.hide();m.shadow=null}if(g){g.hide();m.shim=null}},getAnchorToXY:function(f,m,g,l){return f.getAnchorXY(m,g,l)},getAttribute:function(l,g){var f=this.dom;return g?(f.getAttributeNS(g,l)||f.getAttribute(g+":"+l)):(f.getAttribute(l)||f[l]||null)},getAttributes:function(){var g=this.dom.attributes,l={},n,f,m;for(f=0,m=g.length;f<m;f++){n=g[f];l[n.name]=n.value}return l},getBottom:function(f){return(f?this.getLocalY():this.getY())+this.getHeight()},getById:function(f,l){var g=ba.getElementById(f)||this.dom.querySelector(Ext.makeIdSelector(f));return l?g:(g?Ext.get(g):null)},getBorderPadding:function(){var g=this.getStyle(aG),f=this.getStyle(bo);return{beforeX:(parseFloat(f[a0.l])||0)+(parseFloat(g[aQ.l])||0),afterX:(parseFloat(f[a0.r])||0)+(parseFloat(g[aQ.r])||0),beforeY:(parseFloat(f[a0.t])||0)+(parseFloat(g[aQ.t])||0),afterY:(parseFloat(f[a0.b])||0)+(parseFloat(g[aQ.b])||0)}},getBorders:function(){var f=this.getStyle(bo);return{beforeX:(parseFloat(f[a0.l])||0),afterX:(parseFloat(f[a0.r])||0),beforeY:(parseFloat(f[a0.t])||0),afterY:(parseFloat(f[a0.b])||0)}},getBorderWidth:function(f){return this.addStyles(f,a0)},getData:function(l){var f=this.dom,g;if(f){g=f._extData;if(!g&&!l){f._extData=g={}}}return g},getFirstChild:function(){return Ext.get(this.dom.firstElementChild)},getHeight:function(l,p){var n=this,m=n.dom,f=n.isStyle("display","none"),o,g;if(f){return 0}if(m.nodeName==="BODY"){o=be.getViewportHeight()}else{o=m.offsetHeight;if(o==null){o=m.getBoundingClientRect().height}}if(Ext.supports.Direct2DBug){g=n.adjustDirect2DDimension(bd);if(p){o+=g}else{if(g>0&&g<0.5){o++}}}if(l){o-=n.getBorderWidth("tb")+n.getPadding("tb")}return(o<0)?0:o},getHtml:function(){return this.dom?this.dom.innerHTML:""},getLeft:function(f){return f?this.getLocalX():this.getX()},getLocalX:function(){var f=this,l,g=f.getStyle("left");if(!g||g==="auto"){g=0}else{if(a9.test(g)){g=parseFloat(g)}else{g=f.getX();l=f.dom.offsetParent;if(l){g-=Ext.fly(l).getX()}}}return g},getLocalXY:function(){var g=this,l,n=g.getStyle(["left","top"]),m=n.left,f=n.top;if(!m||m==="auto"){m=0}else{if(a9.test(m)){m=parseFloat(m)}else{m=g.getX();l=g.dom.offsetParent;if(l){m-=Ext.fly(l).getX()}}}if(!f||f==="auto"){f=0}else{if(a9.test(f)){f=parseFloat(f)}else{f=g.getY();l=g.dom.offsetParent;if(l){f-=Ext.fly(l).getY()}}}return[m,f]},getLocalY:function(){var l=this,g,f=l.getStyle("top");if(!f||f==="auto"){f=0}else{if(a9.test(f)){f=parseFloat(f)}else{f=l.getY();g=l.dom.offsetParent;if(g){f-=Ext.fly(g).getY()}}}return f},getMargin:(function(){var g={t:"top",l:"left",r:"right",b:"bottom"},f=["margin-top","margin-left","margin-right","margin-bottom"];return function(n){var p=this,l,o,m;if(!n){l=p.getStyle(f);m={};if(l&&typeof l==="object"){m={};for(o in bi){m[o]=m[g[o]]=parseFloat(l[bi[o]])||0}}}else{m=p.addStyles(n,bi)}return m}})(),getPadding:function(f){return this.addStyles(f,aQ)},getParent:function(){return Ext.get(this.dom.parentNode)},getRight:function(f){return(f?this.getLocalX():this.getX())+this.getWidth()},getScroll:function(){var m=this,l=m.dom,o=bs,f,g,n=ba.body;if(l===ba||l===n){f=o.scrollLeft||(n?n.scrollLeft:0);g=o.scrollTop||(n?n.scrollTop:0)}else{f=l.scrollLeft;g=l.scrollTop}return{left:f,top:g}},getScrollIntoViewXY:function(A,s,u){var o=this.dom,t=Ext.getDom(A),q=this.getOffsetsTo(t),v=o.offsetWidth,y=o.offsetHeight,B=q[0]+s,z=q[1]+u,m=z+y,g=B+v,x=t.clientHeight,p=t.clientWidth,l=s,w=u,n=w+x,f=l+p;if(y>x||z<w){u=z}else{if(m>n){u=m-x}}if(v>p||B<l){s=B}else{if(g>f){s=g-p}}return{x:s,y:u}},getScrollLeft:function(){var f=this.dom;if(f===ba||f===ba.body){return this.getScroll().left}else{return f.scrollLeft}},getScrollTop:function(){var f=this.dom;if(f===ba||f===ba.body){return this.getScroll().top}else{return f.scrollTop}},getSize:function(f){return{width:this.getWidth(f),height:this.getHeight(f)}},getStyle:function(n,t){var s=this,z=s.dom,y=typeof n!=="string",l=s.styleHooks,m=n,q=m,u=1,v,g,o,p,f,w,x;if(y){o={};m=q[0];x=0;if(!(u=q.length)){return o}}if(!z||z.documentElement){return o||""}v=z.style;if(t){w=v}else{w=z.ownerDocument.defaultView.getComputedStyle(z,null);if(!w){t=true;w=v}}do{p=l[m];if(!p){l[m]=p={name:be.normalize(m)}}if(p.get){f=p.get(z,s,t,w)}else{g=p.name;f=w[g]}if(!y){return f}o[m]=f;m=q[++x]}while(x<u);return o},getStyleValue:function(f){return this.dom.style.getPropertyValue(f)},getTop:function(f){return f?this.getLocalY():this.getY()},getTouchAction:function(){return Ext.dom.TouchAction.get(this.dom)},getValue:function(g){var f=this.dom.value;return g?parseInt(f,10):f},getViewSize:function(){var f=this.dom;if(f===ba||f===ba.body){return{width:be.getViewportWidth(),height:be.getViewportHeight()}}else{return{width:f.clientWidth,height:f.clientHeight}}},getVisibilityMode:function(){var l=this,g=l.getData(),f=g.visibilityMode;if(f===undefined){g.visibilityMode=f=be.DISPLAY}return f},getWidth:function(q,o){var m=this,l=m.dom,g=m.isStyle("display","none"),n,p,f;if(g){return 0}if(Ext.supports.BoundingClientRect){n=l.getBoundingClientRect();p=(m.vertical&&!Ext.supports.RotatedBoundingClientRect)?(n.bottom-n.top):(n.right-n.left);p=o?p:Math.ceil(p)}else{p=l.offsetWidth}if(Ext.supports.Direct2DBug&&!m.vertical){f=m.adjustDirect2DDimension(bm);if(o){p+=f}else{if(f>0&&f<0.5){p++}}}if(q){p-=m.getBorderWidth("lr")+m.getPadding("lr")}return(p<0)?0:p},getX:function(){return this.getXY()[0]},getXY:function(){var o=Math.round,m=this.dom,q=ba.body,p=0,g=0,f,n;if(m!==ba&&m!==q){try{f=q.getBoundingClientRect();n=m.getBoundingClientRect();p=n.left-f.left;g=n.top-f.top}catch(l){}}return[o(p),o(g)]},getY:function(){return this.getXY()[1]},getZIndex:function(){return parseInt(this.getStyle("z-index"),10)},hasCls:function(g){var f=this.getData();if(!f.isSynchronized){this.synchronize()}return f.classMap.hasOwnProperty(g)},hide:function(){this.setVisible(false);return this},insertAfter:function(f){f=Ext.getDom(f);f.parentNode.insertBefore(this.dom,f.nextSibling);return this},insertBefore:function(f){f=Ext.getDom(f);f.parentNode.insertBefore(this.dom,f);return this},insertFirst:function(g,f){g=g||{};if(g.nodeType||g.dom||typeof g==="string"){g=Ext.getDom(g);this.dom.insertBefore(g,this.dom.firstChild);return !f?Ext.get(g):g}else{return this.createChild(g,this.dom.firstChild,f)}},insertHtml:function(m,g,l){var f=Ext.DomHelper.insertHtml(m,this.dom,g);return l?Ext.get(f):f},insertSibling:function(f,q,n){var o=this,m=Ext.DomHelper,l=(q||"before").toLowerCase()==="after",s,g,t,p;if(Ext.isIterable(f)){t=f.length;g=Ext.fly(ba.createDocumentFragment());if(Ext.isArray(f)){for(p=0;p<t;p++){s=g.appendChild(f[p],n)}}else{for(p=0;p<t;p++){g.dom.appendChild(s=f[0])}if(n===false){s=Ext.get(s)}}o.dom.parentNode.insertBefore(g.dom,l?o.dom.nextSibling:o.dom);return s}f=f||{};if(f.nodeType||f.dom){s=o.dom.parentNode.insertBefore(Ext.getDom(f),l?o.dom.nextSibling:o.dom);if(!n){s=Ext.get(s)}}else{if(l&&!o.dom.nextSibling){s=m.append(o.dom.parentNode,f,!n)}else{s=m[l?"insertAfter":"insertBefore"](o.dom,f,!n)}}return s},is:function(l){var f=this.dom,g;if(!l){g=true}else{if(!f.tagName){g=false}else{if(Ext.isFunction(l)){g=l(f)}else{g=f[Ext.supports.matchesSelector](l)}}}return g},isAncestor:function(m){var l=false,g=this.dom,f=Ext.getDom(m);if(g&&f){if(g.contains){return g.contains(f)}else{if(g.compareDocumentPosition){return !!(g.compareDocumentPosition(f)&16)}else{while((f=f.parentNode)){l=f===g||l}}}}return l},isPainted:(function(){return !Ext.browser.is.IE?function(){var f=this.dom;return Boolean(f&&f.offsetParent)}:function(){var f=this.dom;return Boolean(f&&(f.offsetHeight!==0&&f.offsetWidth!==0))}})(),isScrollable:function(){var f=this.dom;return f.scrollHeight>f.clientHeight||f.scrollWidth>f.clientWidth},isStyle:function(g,f){return this.getStyle(g)===f},isVisible:function(l){var f=this.dom,g;if(!f){return false}if(!aV){aV=new Ext.dom.Fly()}for(g=f.ownerDocument.documentElement;f!==g;f=f.parentNode){if(!f||f.nodeType===11||(aV.attach(f)).isStyle(bk,aL)||aV.isStyle(bt,a2)){return false}if(!l){break}}return true},last:function(g,f){return this.matchNode("previousSibling","lastChild",g,f)},matchNode:function(o,m,n,l){var g=this.dom,f;if(!g){return null}f=g[m];while(f){if(f.nodeType===1&&(!n||Ext.fly(f,"_matchNode").is(n))){return !l?Ext.get(f):f}f=f[o]}return null},monitorMouseLeave:function(o,g,m){var f=this,l,n={mouseleave:function(p){if(Ext.isIE9m){p.enableIEAsync()}l=Ext.defer(g,o,m||f,[p])},mouseenter:function(){clearTimeout(l)},destroy:function(){clearTimeout(l);f.un(n)}};f.on(n);return n},next:function(g,f){return this.matchNode("nextSibling","nextSibling",g,f)},parent:function(g,f){return this.matchNode("parentNode","parentNode",g,f)},position:function(f,g,n,l){var m=this;if(m.dom.tagName!=="BODY"){if(!f&&m.isStyle(aX,a6)){m.setStyle(aX,a8)}else{if(f){m.setStyle(aX,f)}}if(g){m.setStyle(bh,g)}if(n||l){m.setXY([n||false,l||false])}}},prev:function(g,f){return this.matchNode("previousSibling","previousSibling",g,f)},query:function(f,l,n){var t=this.dom,p,o,m,g,s,q,u;if(!t){return null}l=(l!==false);f=f.split(",");if(!n){p=[]}for(q=0,o=f.length;q<o;q++){if(typeof f[q]==="string"){if(n){g=t.querySelector(f[q]);return l?g:Ext.get(g)}s=t.querySelectorAll(f[q]);for(u=0,m=s.length;u<m;u++){p.push(l?s[u]:Ext.get(s[u]))}}}return p},radioCls:function(g){var f=this.dom.parentNode.childNodes,n;g=Ext.isArray(g)?g:[g];for(var l=0,m=f.length;l<m;l++){n=f[l];if(n&&n.nodeType===1){Ext.fly(n).removeCls(g)}}return this.addCls(g)},redraw:function(){var g=this.dom,f=g.style;f.display="none";g.offsetHeight;f.display=""},remove:function(){this.destroy()},removeChild:function(f){this.dom.removeChild(Ext.getDom(f));return this},removeCls:function(o,q,m){var n=this,v=n.getData(),l,u,g,f,s,p,t;if(!o){return n}if(!v.isSynchronized){n.synchronize()}u=n.dom;g=v.classMap;f=v.classList;q=q?q+aU:"";m=m?aU+m:"";if(typeof o==="string"){o=o.split(ay)}for(s=0,p=o.length;s<p;s++){t=o[s];if(t){t=q+t+m;if(g[t]){delete g[t];Ext.Array.remove(f,t);l=true}}}if(l){u.className=f.join(" ")}return n},repaint:function(){var f=this;f.addCls("x-repaint");Ext.defer(function(){if(f.dom){Ext.fly(f.dom).removeCls("x-repaint")}},1);return f},replace:function(l,n){l=Ext.getDom(l);var m=l.parentNode,f=l.id,g=this.dom;if(n!==false&&f&&Ext.cache[f]){m.insertBefore(g,l);Ext.get(l).destroy()}else{m.replaceChild(g,l)}return this},replaceCls:function(f,o,q,l){var n=this,t,g,w,s,p,u,v=n.getData(),m;if(!f&&!o){return n}f=f||[];o=o||[];if(!v.isSynchronized){n.synchronize()}if(!l){l=""}t=n.dom;g=v.classMap;w=v.classList;q=q?q+aU:"";l=l?aU+l:"";if(typeof f==="string"){f=f.split(ay)}if(typeof o==="string"){o=o.split(ay)}for(s=0,p=f.length;s<p;s++){u=q+f[s]+l;if(g[u]){delete g[u];m=true}}for(s=0,p=o.length;s<p;s++){u=q+o[s]+l;if(!g[u]){g[u]=true;m=true}}if(m){v.classList=w=Ext.Object.getKeys(g);t.className=w.join(" ")}return n},replaceWith:function(g){var f=this,m=f.dom,l=m.parentNode,o=Ext.cache,n;f.clearListeners();if(g.nodeType||g.dom||typeof g==="string"){g=Ext.get(g);n=l.insertBefore(g.dom,m)}else{n=Ext.DomHelper.insertBefore(m,g)}l.removeChild(m);f.dom=n;if(!f.isFly){delete o[f.id];o[f.id=Ext.id(n)]=f}return f},resolveListenerScope:function(g){var f=this.component;return f?f.resolveListenerScope(g):this},scroll:function(l,p,f){if(!this.isScrollable()){return false}l=l.charAt(0);var m=this,q=m.dom,n=l==="r"||l==="l"?"left":"top",g=false,s,o;if(l==="l"||l==="t"||l==="u"){p=-p}if(n==="left"){s=q.scrollLeft;o=m.constrainScrollLeft(s+p)}else{s=q.scrollTop;o=m.constrainScrollTop(s+p)}if(o!==s){this.scrollTo(n,o,f);g=true}return g},scrollBy:function(n,m,l){var g=this,f=g.dom;if(n.length){l=m;m=n[1];n=n[0]}else{if(typeof n!="number"){l=m;m=n.y;n=n.x}}if(n){g.scrollTo("left",g.constrainScrollLeft(f.scrollLeft+n),l)}if(m){g.scrollTo("top",g.constrainScrollTop(f.scrollTop+m),l)}return g},scrollChildIntoView:function(g,f){Ext.fly(g).scrollIntoView(this,f)},scrollIntoView:function(m,f,g,l){m=Ext.getDom(m)||Ext.getBody().dom;return this.doScrollIntoView(m,f,g,l,"getScrollLeft","scrollTo")},scrollTo:function(o,g,q){var n=bu.test(o),m=this,f=n?"scrollTop":"scrollLeft",l=m.dom,p;if(!q||!m.anim){l[f]=g;l[f]=g}else{p={to:{}};p.to[f]=g;if(Ext.isObject(q)){Ext.applyIf(p,q)}m.animate(p)}return m},select:function(m,f){var l,g;if(typeof m==="string"){g=this.query(m,!f)}else{g=m;l=true}return f?new Ext.CompositeElement(g,!l):new Ext.CompositeElementLite(g,true)},selectNode:function(g,f){return this.query(g,f,true)},set:function(o,n){var g=this,m=g.dom,l,f;for(l in o){if(o.hasOwnProperty(l)){f=o[l];if(l==="style"){g.applyStyles(f)}else{if(l==="cls"){m.className=f}else{if(n!==false){if(f===undefined){m.removeAttribute(l)}else{m.setAttribute(l,f)}}else{m[l]=f}}}}}return g},setBottom:function(f){this.dom.style[aw]=be.addUnits(f);return this},setCls:function(m){var o=this,n=o.getData(),q,g,p,l,f;if(!n.isSynchronized){o.synchronize()}if(typeof m==="string"){m=m.split(ay)}n.classList=f=m.slice();n.classMap=l={};for(q=0,g=f.length;q<g;q++){l[f[q]]=true}o.dom.className=f.join(" ")},setDisplayed:function(g){var f=this;if(typeof g==="boolean"){g=g?f._getDisplay():a2}f.setStyle(bt,g);if(f.shadow||f.shim){f.setUnderlaysVisible(g!==a2)}return f},setHeight:function(g){var f=this;f.dom.style[bd]=be.addUnits(g);if(f.shadow||f.shim){f.syncUnderlays()}return f},setHtml:function(f){if(this.dom){this.dom.innerHTML=f}return this},setId:function(f){var g=this,m=g.id,l=Ext.cache;if(m){delete l[m]}g.dom.id=f;g.id=f;l[f]=g;return g},setLeft:function(g){var f=this;f.dom.style[aF]=be.addUnits(g);if(f.shadow||f.shim){f.syncUnderlays()}return f},setLocalX:function(l){var f=this,g=f.dom.style;g.right="auto";g.left=(l===null)?"auto":l+"px";if(f.shadow||f.shim){f.syncUnderlays()}return f},setLocalXY:function(m,f){var g=this,l=g.dom.style;l.right="auto";if(m&&m.length){f=m[1];m=m[0]}if(m===null){l.left="auto"}else{if(m!==undefined){l.left=m+"px"}}if(f===null){l.top="auto"}else{if(f!==undefined){l.top=f+"px"}}if(g.shadow||g.shim){g.syncUnderlays()}return g},setLocalY:function(g){var f=this;f.dom.style.top=(g===null)?"auto":g+"px";if(f.shadow||f.shim){f.syncUnderlays()}return f},setMargin:function(f){var l=this,g=l.dom.style;if(f||f===0){f=l.self.unitizeBox((f===true)?5:f);g.setProperty("margin",f,"important")}else{g.removeProperty("margin-top");g.removeProperty("margin-right");g.removeProperty("margin-bottom");g.removeProperty("margin-left")}},setMaxHeight:function(f){this.dom.style[aM]=be.addUnits(f);return this},setMaxWidth:function(f){this.dom.style[bc]=be.addUnits(f);return this},setMinHeight:function(f){this.dom.style[bq]=be.addUnits(f);return this},setMinWidth:function(f){this.dom.style[aO]=be.addUnits(f);return this},setOpacity:function(g){var f=this;if(f.dom){f.setStyle("opacity",g)}return f},setPadding:function(f){var l=this,g=l.dom.style;if(f||f===0){f=l.self.unitizeBox((f===true)?5:f);g.setProperty("padding",f,"important")}else{g.removeProperty("padding-top");g.removeProperty("padding-right");g.removeProperty("padding-bottom");g.removeProperty("padding-left")}},setRight:function(f){this.dom.style[aE]=be.addUnits(f);return this},setScrollLeft:function(f){this.dom.scrollLeft=f;return this},setScrollTop:function(f){this.dom.scrollTop=f;return this},setSize:function(g,m){var f=this,l=f.dom.style;if(Ext.isObject(g)){m=g.height;g=g.width}l.width=be.addUnits(g);l.height=be.addUnits(m);if(f.shadow||f.shim){f.syncUnderlays()}return f},setSizeState:function(g){var m=this,f,l;if(g===true){f=aP;l=[e,aD]}else{if(g===false){f=e;l=[aP,aD]}else{if(g===null){f=aD;l=[aP,e]}else{l=[aP,e,aD]}}}if(f){m.addCls(f)}m.removeCls(l);return m},setStyle:function(g,o){var m=this,l=m.dom,q=m.styleHooks,n=l.style,p=g,f;if(typeof p==="string"){f=q[p];if(!f){q[p]=f={name:be.normalize(p)}}o=(o==null)?"":o;if(f.set){f.set(l,o,m)}else{n[f.name]=o}if(f.afterSet){f.afterSet(l,o,m)}}else{for(p in g){if(g.hasOwnProperty(p)){f=q[p];if(!f){q[p]=f={name:be.normalize(p)}}o=g[p];o=(o==null)?"":o;if(f.set){f.set(l,o,m)}else{n[f.name]=o}if(f.afterSet){f.afterSet(l,o,m)}}}}return m},setText:function(f){this.dom.textContent=f},setTop:function(g){var f=this;f.dom.style[a5]=be.addUnits(g);if(f.shadow||f.shim){f.syncUnderlays()}return f},setTouchAction:function(f){Ext.dom.TouchAction.set(this.dom,f)},setUnderlaysVisible:function(l){var f=this.shadow,g=this.shim;if(f&&!f.disabled){if(l){f.show()}else{f.hide()}}if(g&&!g.disabled){if(l){g.show()}else{g.hide()}}},setVisibility:function(g){var f=this.dom.style;if(g){f.removeProperty("visibility")}else{f.setProperty("visibility","hidden","important")}},setVisibilityMode:function(f){this.getData().visibilityMode=f;return this},setVisible:function(g){var m=this,l=m.getVisibilityMode(),f=g?"removeCls":"addCls";switch(l){case be.DISPLAY:m.removeCls([aJ,bj,bw]);m[f](aN);break;case be.VISIBILITY:m.removeCls([aN,bj,bw]);m[f](aJ);break;case be.OFFSETS:m.removeCls([aJ,aN,bw]);m[f](bj);break;case be.CLIP:m.removeCls([aJ,aN,bj]);m[f](bw);break}if(m.shadow||m.shim){m.setUnderlaysVisible(g)}return m},setWidth:function(g){var f=this;f.dom.style[bm]=be.addUnits(g);if(f.shadow||f.shim){f.syncUnderlays()}return f},setX:function(f){return this.setXY([f,false])},setXY:function(l){var n=this,g=n.translatePoints(l),m=n.dom.style,f;n.position();m.right="auto";for(f in g){if(!isNaN(g[f])){m[f]=g[f]+"px"}}if(n.shadow||n.shim){n.syncUnderlays()}return n},setY:function(f){return this.setXY([false,f])},setZIndex:function(g){var f=this;if(f.shadow){f.shadow.setZIndex(g)}if(f.shim){f.shim.setZIndex(g)}return f.setStyle("z-index",g)},show:function(){this.setVisible(true);return this},swapCls:function(p,l,o,f){if(o===undefined){o=true}var g=this,n=o?p:l,m=o?l:p;if(m){g.removeCls(f?f+"-"+m:m)}if(n){g.addCls(f?f+"-"+n:n)}return g},synchronize:function(){var m=this,s=m.dom,l={},n=s.className,g,q,o,p,f=m.getData();if(n&&n.length>0){g=s.className.split(aK);for(q=0,o=g.length;q<o;q++){p=g[q];l[p]=true}}else{g=[]}f.classList=g;f.classMap=l;f.isSynchronized=true;return m},syncUnderlays:function(){var s=this,m=s.shadow,p=s.shim,g=s.dom,l,o,q,n,f;if(s.isVisible()){l=s.getXY();o=l[0];q=l[1];n=g.offsetWidth;f=g.offsetHeight;if(m&&!m.hidden){m.realign(o,q,n,f)}if(p&&!p.hidden){p.realign(o,q,n,f)}}},toggleCls:function(g,f){if(typeof f!=="boolean"){f=!this.hasCls(g)}return f?this.addCls(g):this.removeCls(g)},toggle:function(){this.setVisible(!this.isVisible());return this},translate:function(){var f="webkitTransform" in ba.createElement("div").style?"webkitTransform":"transform";return function(m,g,l){m=Math.round(m);g=Math.round(g);l=Math.round(l);this.dom.style[f]="translate3d("+(m||0)+"px, "+(g||0)+"px, "+(l||0)+"px)"}}(),unwrap:function(){var m=this.dom,q=m.parentNode,l,o=Ext.fly(Ext.Element.getActiveElement()),g,n,f,p;g=Ext.cache[o.id];if(g){o=g}if(this.contains(o)){if(g){g.suspendFocusEvents()}n=true}if(q){l=q.parentNode;if(n){p=l.getAttribute("tabIndex");f=Ext.fly(l);f.set({tabIndex:-1});f.suspendFocusEvents();f.focus()}l.insertBefore(m,q);l.removeChild(q)}else{l=ba.createDocumentFragment();l.appendChild(m)}if(n){if(g){g.focus();g.resumeFocusEvents()}else{Ext.fly(o).focus()}if(f){f.resumeFocusEvents();f.set({tabIndex:p})}}return this},up:function(f,l,g){return this.findParentNode(f,l,!g)},update:function(f){return this.setHtml(f)},wrap:function(u,l,p){var m=this,o=m.dom,q=Ext.DomHelper.insertBefore(o,u||{tag:"div"},!l),n=q,f=Ext.Element.getActiveElement(),t,g,s;t=Ext.cache[f.id];if(t){f=t}if(p){n=q.selectNode(p,l)}if(m.contains(f)){if(t){t.suspendFocusEvents()}s=q.dom.getAttribute("tabIndex");q.set({tabIndex:-1});q.suspendFocusEvents();q.focus();g=true}n.appendChild(o);if(g){if(t){t.focus();t.resumeFocusEvents()}else{Ext.fly(f).focus()}q.resumeFocusEvents();q.set({tabIndex:s})}return q},privates:{doAddListener:function(t,o,l,y,z,m,x){var p=this,n=Ext.$gesturePublisher,s=t,g=Ext.supports,w=g.TouchEvents,f=g.PointerEvents,v,u,q;t=Ext.canonicalEventName(t);if(!p.blockedEvents[t]){v=p.mixins.observable.doAddListener;y=y||{};if(be.useDelegatedEvents===false){y.delegated=y.delegated||false}if(y.translate!==false){u=p.additiveEvents[t];if(u){y.type=t;t=u;v.call(p,t,o,l,y,z,m,x)}q=p.eventMap[t];if(q){y.type=y.type||t;if(x){y.managedName=s}t=q}}if(v.call(p,t,o,l,y,z,m,x)){if(p.longpressEvents[t]&&(++p.longpressListenerCount===1)){p.on("MSHoldVisual","preventMsHoldVisual",p)}}if(x&&q){delete y.managedName}delete y.type}},doRemoveListener:function(v,o,m){var p=this,n=Ext.$gesturePublisher,l=Ext.supports,u=l.TouchEvents,g=l.PointerEvents,f,q,w,s,t;v=Ext.canonicalEventName(v);if(!p.blockedEvents[v]){f=p.mixins.observable.doRemoveListener;w=p.additiveEvents[v];if(w){v=w;f.call(p,v,o,m)}q=p.eventMap[v];if(q){t=f.call(p,q,o,m)}t=f.call(p,v,o,m)||t;if(t){if(p.longpressEvents[v]&&!--p.longpressListenerCount){p.un("MSHoldVisual","preventMsHoldVisual",p)}}}},_initEvent:function(f){return(this.events[f]=new Ext.dom.ElementEvent(this,f))},_getDisplay:function(){var g=this.getData(),f=g[a1];if(f===undefined){g[a1]=f=""}return f},_getPublisher:function(l){var f=Ext.event.publisher.Publisher,g=f.publishersByEvent[l];if(!g||(this.dom===window&&l==="resize")){g=f.publishers.dom}return g},isFocusSuspended:function(){return !!this.getData().suspendFocusEvents},preventMsHoldVisual:function(f){f.preventDefault()},suspendFocusEvents:function(){if(!this.isFly){this.suspendEvent("focus","blur")}this.getData().suspendFocusEvents=true},resumeFocusEvents:function(){function f(){var g;if(!this.destroyed){g=this.getData();if(g){g.suspendFocusEvents=false}if(!this.isFly){this.resumeEvent("focus","blur")}}}if(!this.destroyed&&this.getData().suspendFocusEvents){if(Ext.isIE){Ext.asap(f,this)}else{f.call(this)}}}},deprecated:{"5.0":{methods:{cssTranslate:null,getHTML:"getHtml",getOuterHeight:null,getOuterWidth:null,getPageBox:function(f){var q=this,u=q.dom,o=u.nodeName==="BODY",n=o?be.getViewportWidth():u.offsetWidth,t=o?be.getViewportHeight():u.offsetHeight,l=q.getXY(),m=l[1],s=l[0]+n,p=l[1]+t,g=l[0];if(f){return new Ext.util.Region(m,s,p,g)}else{return{left:g,top:m,width:n,height:t,right:s,bottom:p}}},getScrollParent:null,isDescendent:null,isTransparent:function(g){var f=this.getStyle(g);return f?bv.test(f):false},purgeAllListeners:"clearListeners",removeAllListeners:"clearListeners",setHTML:"setHtml",setTopLeft:null}}}}},1,0,0,0,0,[[Ext.util.Positionable.prototype.mixinId||Ext.util.Positionable.$className,Ext.util.Positionable],[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.dom,"Element",Ext,"Element"],function(U){var au=document,ao=au.documentElement,ac=U.prototype,ab=Ext.supports,Q="pointerdown",aq="pointermove",at="pointerup",ar="pointercancel",al="MSPointerDown",aa="MSPointerMove",W="MSPointerUp",av="MSPointerCancel",aj="mousedown",Y="mousemove",ai="mouseup",P="mouseover",R="mouseout",V="mouseenter",ap="mouseleave",ae="touchstart",ad="touchmove",T="touchend",an="touchcancel",am="click",ah="dblclick",ag="tap",S="doubletap",af=ac.eventMap={},ak=ac.additiveEvents={},X=Ext.id,Z;Ext.id=function(g,l){var m=Ext.getDom(g,true),f,e;if(!m){e=X(g,l)}else{if(!(e=m.id)){e=X(null,l||U.prototype.identifiablePrefix);if(Ext.isSandboxed){f=Ext.sandboxPrefix||(Ext.sandboxPrefix=Ext.sandboxName.toLowerCase()+"-");e=f+e}m.id=e}}return e};if(ab.PointerEvents){af[aj]=Q;af[Y]=aq;af[ai]=at;af[ae]=Q;af[ad]=aq;af[T]=at;af[an]=ar;af[P]="pointerover";af[R]="pointerout";af[V]="pointerenter";if(!Ext.isIE11){af[ap]="pointerleave"}}else{if(ab.MSPointerEvents){af[Q]=al;af[aq]=aa;af[at]=W;af[ar]=av;af[aj]=al;af[Y]=aa;af[ai]=W;af[ae]=al;af[ad]=aa;af[T]=W;af[an]=av;af[P]="MSPointerOver";af[R]="MSPointerOut"}else{if(ab.TouchEvents){af[Q]=ae;af[aq]=ad;af[at]=T;af[ar]=an;af[aj]=ae;af[Y]=ad;af[ai]=T;af[am]=ag;af[ah]=S;if(Ext.isWebKit&&Ext.os.is.Desktop){af[ae]=aj;af[ad]=Y;af[T]=ai;af[an]=ai;ak[aj]=aj;ak[Y]=Y;ak[ai]=ai;ak[ae]=ae;ak[ad]=ad;ak[T]=T;ak[an]=an;ak[Q]=aj;ak[aq]=Y;ak[at]=ai;ak[ar]=ai}}else{af[Q]=aj;af[aq]=Y;af[at]=ai;af[ar]=ai;af[ae]=aj;af[ad]=Y;af[T]=ai;af[an]=ai}}}if(Ext.isWebKit){af.transitionend=Ext.browser.getVendorProperyName("transitionEnd");af.animationstart=Ext.browser.getVendorProperyName("animationStart");af.animationend=Ext.browser.getVendorProperyName("animationEnd")}if(!Ext.supports.MouseWheel&&!Ext.isOpera){af.mousewheel="DOMMouseScroll"}Z=ac.$eventOptions=Ext.Object.chain(ac.$eventOptions);Z.translate=Z.capture=Z.delegate=Z.delegated=Z.stopEvent=Z.preventDefault=Z.stopPropagation=Z.element=1;ac.styleHooks.opacity={name:"opacity",afterSet:function(f,g,l){var e=l.shadow;if(e){e.setOpacity(g)}}};ac.getTrueXY=ac.getXY;Ext.select=U.select;Ext.query=U.query;Ext.apply(Ext,{get:function(e){return U.get(e)},getDom:function(e){if(!e||!au){return null}return typeof e==="string"?Ext.getElementById(e):"dom" in e?e.dom:e},getBody:function(){if(!Ext._bodyEl){if(!au.body){throw new Error("[Ext.getBody] document.body does not yet exist")}Ext._bodyEl=Ext.get(au.body)}return Ext._bodyEl},getHead:function(){if(!Ext._headEl){Ext._headEl=Ext.get(au.head||au.getElementsByTagName("head")[0])}return Ext._headEl},getDoc:function(){if(!Ext._docEl){Ext._docEl=Ext.get(au)}return Ext._docEl},getWin:function(){if(!Ext._winEl){Ext._winEl=Ext.get(window)}return Ext._winEl},removeNode:function(f){f=f.dom||f;var e=f&&f.id,g=Ext.cache[e],l;if(g){g.destroy()}else{if(f&&(f.nodeType===3||f.tagName.toUpperCase()!=="BODY")){l=f.parentNode;if(l){l.removeChild(f)}}}}});Ext.isGarbage=function(e){return e&&e.nodeType===1&&e.tagName!=="BODY"&&e.tagName!=="HTML"&&(!e.parentNode||(e.offsetParent===null&&((Ext.isIE8?au.all[e.id]:au.getElementById(e.id))!==e)&&!(Ext.detachedBodyEl&&Ext.detachedBodyEl.isAncestor(e))))};if(Ext.os.is.Android||(Ext.os.is.Windows&&Ext.supports.Touch)){Ext.onReady(function(){var e=Ext.getWin();U._documentWidth=U._viewportWidth=ao.clientWidth;U._documentHeight=U._viewportHeight=ao.clientHeight;e.on({focusin:"_onWindowFocusChange",focusout:"_onWindowFocusChange",pointerup:"_onWindowFocusChange",capture:true,delegated:false,delay:1,scope:U});e.on({resize:"_onWindowResize",priority:2000,scope:U})})}}));(Ext.cmd.derive("Ext.util.Filter",Ext.Base,{isFilter:true,config:{property:null,value:null,filterFn:null,id:null,anyMatch:false,exactMatch:false,caseSensitive:false,disabled:false,disableOnEmpty:false,operator:null,root:null,serializer:null,convert:null},scope:null,$configStrict:false,statics:{createFilterFn:function(f){if(!f){return Ext.returnTrue}return function(u){var s=f.isCollection?f.items:f,t=s.length,q=true,p,e;for(p=0;q&&p<t;p++){e=s[p];if(!e.getDisabled()){q=e.filter(u)}}return q}},isEqual:function(g,l){if(g.getProperty()!==l.getProperty()){return false}if(g.getOperator()!==l.getOperator()){return false}if(g.getValue()===l.getValue()){return true}else{if(Ext.isArray(g)&&Ext.isArray(l)&&Ext.Array.equals(g,l)){return true}}return false},isInvalid:function(f){if(!f.filterFn){if(!f.property){return"A Filter requires either a property or a filterFn to be set"}if(!f.hasOwnProperty("value")&&!f.operator){return"A Filter requires either a property and value, or a filterFn to be set"}}return false}},constructor:function(f){this.initConfig(f)},preventConvert:{"in":1,notin:1},filter:function(q){var s=this,n=s._filterFn||s.getFilterFn(),o=s.getConvert(),p=s._value;s._filterValue=p;s.isDateValue=Ext.isDate(p);if(s.isDateValue){s.dateValue=p.getTime()}if(o&&!s.preventConvert[s.getOperator()]){s._filterValue=o.call(s.scope||s,p)}return n.call(s.scope||s,q)},getId:function(){var f=this._id;if(!f){f=this.getProperty();if(!f){f=Ext.id(null,"ext-filter-")}this._id=f}return f},getFilterFn:function(){var m=this,l=m._filterFn,n;if(!l){n=m.getOperator();if(n){l=m.operatorFns[n]}else{l=m.createRegexFilter()}m._filterFn=l;m.generatedFilterFn=true}return l},createRegexFilter:function(){var q=this,n=!!q.getAnyMatch(),s=!!q.getExactMatch(),p=q.getValue(),o=Ext.String.createRegex(p,!n,!n&&s,!q.getCaseSensitive());return function(f){var e=q.getPropertyValue(f);return o?o.test(e):(e==null)}},getPropertyValue:function(m){var n=this._root,l=(n==null)?m:m[n];return l[this._property]},getState:function(){var l=this.getInitialConfig(),n={},m;for(m in l){if(l.hasOwnProperty(m)){n[m]=l[m]}}delete n.root;n.value=this.getValue();return n},getScope:function(){return this.scope},serialize:function(){var n=this.getState(),m=this.getSerializer(),l;delete n.id;delete n.serializer;if(m){l=m.call(this,n);if(l){n=l}}return n},updateOperator:function(){if(this.generatedFilterFn){this._filterFn=null}},updateValue:function(f){if(this.generatedFilterFn){this._filterFn=null}if(this.getDisableOnEmpty()){this.setDisabled(Ext.isEmpty(f))}},updateFilterFn:function(f){delete this.generatedFilterFn},updateDisableOnEmpty:function(f){if(f){this.setDisabled(Ext.isEmpty(this.getValue()))}},privates:{getCandidateValue:function(q,s,o){var p=this,u=p._convert,t=p.getPropertyValue(q);if(u){t=u.call(p.scope||p,t)}else{if(!o){t=Ext.coerce(t,s)}}return t}}},1,0,0,0,0,0,[Ext.util,"Filter"],function(){var l=this.prototype,g=(l.operatorFns={"<":function(e){var f=this._filterValue;return this.getCandidateValue(e,f)<f},"<=":function(e){var f=this._filterValue;return this.getCandidateValue(e,f)<=f},"=":function(f){var e=this,n=e._filterValue;f=e.getCandidateValue(f,n);if(e.isDateValue&&f instanceof Date){f=f.getTime();n=e.dateValue}return f==n},"===":function(f){var e=this,n=e._filterValue;f=e.getCandidateValue(f,n,true);if(e.isDateValue&&f instanceof Date){f=f.getTime();n=e.dateValue}return f===n},">=":function(e){var f=this._filterValue;return this.getCandidateValue(e,f)>=f},">":function(e){var f=this._filterValue;return this.getCandidateValue(e,f)>f},"!=":function(f){var e=this,n=e._filterValue;f=e.getCandidateValue(f,n);if(e.isDateValue&&f instanceof Date){f=f.getTime();n=e.dateValue}return f!=n},"!==":function(f){var e=this,n=e._filterValue;f=e.getCandidateValue(f,n,true);if(e.isDateValue&&f instanceof Date){f=f.getTime();n=e.dateValue}return f!==n},"in":function(e){var f=this._filterValue;return Ext.Array.contains(f,this.getCandidateValue(e,f))},notin:function(e){var f=this._filterValue;return !Ext.Array.contains(f,this.getCandidateValue(e,f))},like:function(e){var f=this._filterValue;return f&&this.getCandidateValue(e,f).toLowerCase().indexOf(f.toLowerCase())>-1},"/=":function(f){var e=this,o=e._filterValue;f=e.getCandidateValue(f,o);if(o!==e.lastRegExpSource){e.lastRegExpSource=o;try{e.regex=new RegExp(o,"i")}catch(p){e.regex=null}}return e.regex?e.regex.test(f):false}});g["=="]=g["="];g.gt=g[">"];g.ge=g[">="];g.lt=g["<"];g.le=g["<="];g.eq=g["="];g.ne=g["!="]}));(Ext.cmd.derive("Ext.util.Observable",Ext.mixin.Observable,{$applyConfigs:true},0,0,0,0,0,0,[Ext.util,"Observable"],function(l){var g=Ext.mixin.Observable;l.releaseCapture=g.releaseCapture;l.capture=g.capture;l.captureArgs=g.captureArgs;l.observe=l.observeClass=g.observe}));(Ext.cmd.derive("Ext.util.AbstractMixedCollection",Ext.Base,{isMixedCollection:true,generation:0,indexGeneration:0,constructor:function(m,n){var l=this;if(arguments.length===1&&Ext.isObject(m)){l.initialConfig=m;Ext.apply(l,m)}else{l.allowFunctions=m===true;if(n){l.getKey=n}l.initialConfig={allowFunctions:l.allowFunctions,getKey:l.getKey}}l.items=[];l.map={};l.keys=[];l.indexMap={};l.length=0;l.mixins.observable.constructor.call(l)},destroy:function(){var f=this;f.items=f.map=f.keys=f.indexMap=null;f.callParent()},allowFunctions:false,add:function(n,m){var p=this.length,o;if(arguments.length===1){o=this.insert(p,n)}else{o=this.insert(p,n,m)}return o},getKey:function(f){return f.id},replace:function(p,n){var o=this,s,q;if(arguments.length==1){n=arguments[0];p=o.getKey(n)}s=o.map[p];if(typeof p=="undefined"||p===null||typeof s=="undefined"){return o.add(p,n)}o.generation++;q=o.indexOfKey(p);o.items[q]=n;o.map[p]=n;if(o.hasListeners.replace){o.fireEvent("replace",p,s,n)}return n},reorder:function(s){var x=this,u=x.items,t=0,y=u.length,w=[],q=[],v;x.suspendEvents();for(v in s){w[s[v]]=u[v]}for(t=0;t<y;t++){if(s[t]==undefined){q.push(u[t])}}for(t=0;t<y;t++){if(w[t]==undefined){w[t]=q.shift()}}x.clear();x.addAll(w);x.resumeEvents()},updateKey:function(w,v){var q=this,p=q.map,u=q.indexOfKey(w),s=q.indexMap,t;if(u>-1){t=p[w];delete p[w];delete s[w];p[v]=t;s[v]=u;q.keys[u]=v;q.indexGeneration=++q.generation}},addAll:function(l){var m=this,n;if(arguments.length>1||Ext.isArray(l)){m.insert(m.length,arguments.length>1?arguments:l)}else{for(n in l){if(l.hasOwnProperty(n)){if(m.allowFunctions||typeof l[n]!="function"){m.add(n,l[n])}}}}},each:function(o,p){var s=Ext.Array.push([],this.items),q=0,t=s.length,u;for(;q<t;q++){u=s[q];if(o.call(p||u,u,q,t)===false){break}}},eachKey:function(o,p){var u=this.keys,s=this.items,q=0,t=u.length;for(;q<t;q++){o.call(p||window,u[q],s[q],q,t)}},findBy:function(o,p){var u=this.keys,s=this.items,q=0,t=s.length;for(;q<t;q++){if(o.call(p||window,s[q],u[q])){return s[q]}}return null},insert:function(o,n,m){var p;if(Ext.isIterable(n)){p=this.doInsert(o,n,m)}else{if(arguments.length>2){p=this.doInsert(o,[n],[m])}else{p=this.doInsert(o,[n])}p=p[0]}return p},doInsert:function(z,J,K){var M=this,F,E,B,y=J.length,G=y,C=M.hasListeners.add,D,A={},L,H,I;if(K!=null){M.useLinearSearch=true}else{K=J;J=new Array(y);for(B=0;B<y;B++){J[B]=this.getKey(K[B])}}M.suspendEvents();for(B=0;B<y;B++){F=J[B];E=M.indexOfKey(F);if(E!==-1){if(E<z){z--}M.removeAt(E)}if(F!=null){if(A[F]!=null){L=true;G--}A[F]=B}}M.resumeEvents();if(L){H=J;I=K;J=new Array(G);K=new Array(G);B=0;for(F in A){J[B]=H[A[F]];K[B]=I[A[F]];B++}y=G}D=z===M.length&&M.indexGeneration===M.generation;Ext.Array.insert(M.items,z,K);Ext.Array.insert(M.keys,z,J);M.length+=y;M.generation++;if(D){M.indexGeneration=M.generation}for(B=0;B<y;B++,z++){F=J[B];if(F!=null){M.map[F]=K[B];if(D){M.indexMap[F]=z}}if(C){M.fireEvent("add",z,K[B],F)}}return K},remove:function(m){var n=this,o,p;if(!n.useLinearSearch&&(o=n.getKey(m))){p=n.indexOfKey(o)}else{p=Ext.Array.indexOf(n.items,m)}return(p===-1)?false:n.removeAt(p)},removeAll:function(n){var l=this,m;if(n||l.hasListeners.remove){if(n){for(m=n.length-1;m>=0;--m){l.remove(n[m])}}else{while(l.length){l.removeAt(0)}}}else{l.length=l.items.length=l.keys.length=0;l.map={};l.indexMap={};l.generation++;l.indexGeneration=l.generation}},removeAt:function(p){var n=this,m,o;if(p<n.length&&p>=0){n.length--;m=n.items[p];Ext.Array.erase(n.items,p,1);o=n.keys[p];if(typeof o!="undefined"){delete n.map[o]}Ext.Array.erase(n.keys,p,1);if(n.hasListeners.remove){n.fireEvent("remove",m,o)}n.generation++;return m}return false},removeRange:function(t,z){var o=this,y,A,u,v,x,w;if(t<o.length&&t>=0){if(!z){z=1}v=Math.min(t+z,o.length);z=v-t;w=v===o.length;x=w&&o.indexGeneration===o.generation;for(u=t;u<v;u++){A=o.keys[u];if(A!=null){delete o.map[A];if(x){delete o.indexMap[A]}}}y=o.items[u-1];o.length-=z;o.generation++;if(x){o.indexGeneration=o.generation}if(w){o.items.length=o.keys.length=o.length}else{o.items.splice(t,z);o.keys.splice(t,z)}return y}return false},removeAtKey:function(o){var m=this,n=m.keys,p;if(o==null){for(p=n.length-1;p>=0;p--){if(n[p]==null){m.removeAt(p)}}}else{return m.removeAt(m.indexOfKey(o))}},getCount:function(){return this.length},indexOf:function(l){var m=this,n;if(l!=null){if(!m.useLinearSearch&&(n=m.getKey(l))){return this.indexOfKey(n)}return Ext.Array.indexOf(m.items,l)}return -1},indexOfKey:function(f){if(!this.map.hasOwnProperty(f)){return -1}if(this.indexGeneration!==this.generation){this.rebuildIndexMap()}return this.indexMap[f]},rebuildIndexMap:function(){var n=this,o=n.indexMap={},p=n.keys,s=p.length,q;for(q=0;q<s;q++){o[p[q]]=q}n.indexGeneration=n.generation},get:function(o){var m=this,p=m.map[o],n=p!==undefined?p:(typeof o=="number")?m.items[o]:undefined;return typeof n!="function"||m.allowFunctions?n:null},getAt:function(f){return this.items[f]},getByKey:function(f){return this.map[f]},contains:function(l){var m=this,n;if(l!=null){if(!m.useLinearSearch&&(n=m.getKey(l))){return this.map[n]!=null}return Ext.Array.indexOf(this.items,l)!==-1}return false},containsKey:function(f){return this.map.hasOwnProperty(f)},clear:function(){var f=this;if(f.generation){f.length=0;f.items=[];f.keys=[];f.map={};f.indexMap={};f.generation++;f.indexGeneration=f.generation}if(f.hasListeners.clear){f.fireEvent("clear")}},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},sum:function(x,u,w,v){var t=this.extractValues(x,u),y=t.length,q=0,s;w=w||0;v=(v||v===0)?v:y-1;for(s=w;s<=v;s++){q+=t[s]}return q},collect:function(t,x,v){var C=this.extractValues(t,x),B=C.length,A={},z=[],u,w,y;for(y=0;y<B;y++){u=C[y];w=String(u);if((v||!Ext.isEmpty(u))&&!A[w]){A[w]=true;z.push(u)}}return z},extractValues:function(l,n){var m=this.items;if(n){m=Ext.Array.pluck(m,n)}return Ext.Array.pluck(m,l)},hasRange:function(g,l){return(l<this.length)},getRange:function(w,u){var x=this,s=x.items,t=[],v=s.length,y,q;if(v<1){return t}if(w>u){q=true;y=w;w=u;u=y}if(w<0){w=0}if(u==null||u>=v){u=v-1}t=s.slice(w,u+1);if(q&&t.length){t.reverse()}return t},filter:function(o,p,n,s){var q=[];if(Ext.isString(o)){q.push(new Ext.util.Filter({property:o,value:p,anyMatch:n,caseSensitive:s}))}else{if(Ext.isArray(o)||o instanceof Ext.util.Filter){q=q.concat(o)}}return this.filterBy(Ext.util.Filter.createFilterFn(q))},filterBy:function(q,s){var w=this,v=new w.self(w.initialConfig),x=w.keys,u=w.items,y=u.length,t;v.getKey=w.getKey;for(t=0;t<y;t++){if(q.call(s||w,u[t],x[t])){v.add(x[t],u[t])}}v.useLinearSearch=w.useLinearSearch;return v},findIndex:function(p,q,n,o,s){if(Ext.isEmpty(q,false)){return -1}q=this.createValueMatcher(q,o,s);return this.findIndexBy(function(e){return e&&q.test(e[p])},null,n)},findIndexBy:function(q,s,w){var x=this,y=x.keys,u=x.items,t=w||0,v=u.length;for(;t<v;t++){if(q.call(s||x,u[t],y[t])){return t}}return -1},createValueMatcher:function(p,n,s,q){if(!p.exec){var o=Ext.String.escapeRegex;p=String(p);if(n===true){p=o(p)}else{p="^"+o(p);if(q===true){p+="$"}}p=new RegExp(p,s?"":"i")}return p},clone:function(){var l=this,g=new l.self(l.initialConfig);g.add(l.keys,l.items);g.useLinearSearch=l.useLinearSearch;return g}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.util,"AbstractMixedCollection"],0));(Ext.cmd.derive("Ext.util.Sorter",Ext.Base,{isSorter:true,config:{property:null,sorterFn:null,root:null,transform:null,direction:"ASC",id:undefined},statics:{createComparator:function(g,l){l=l||0;return function(n,s){var e=g.isCollection?g.items:g,t=e.length,f,u;for(u=0;u<t;++u){f=e[u].sort(n,s);if(f){return f}}return l&&l(n,s)}}},multiplier:1,constructor:function(f){this.initConfig(f)},getId:function(){var f=this._id;if(!f){f=this.getProperty();if(!f){f=Ext.id(null,"ext-sorter-")}this._id=f}return f},sort:function(l,g){return this.multiplier*this.sortFn(l,g)},sortFn:function(s,t){var y=this,q=y._transform,u=y._root,x=y._property,w,v;if(u){s=s[u];t=t[u]}w=s[x];v=t[x];if(q){w=q(w);v=q(v)}return(w>v)?1:(w<v?-1:0)},applyDirection:function(f){return f?f:"ASC"},updateDirection:function(f){this.multiplier=(f.toUpperCase()==="DESC")?-1:1},updateProperty:function(f){if(f){delete this.sortFn}},updateSorterFn:function(f){this.sortFn=f},toggle:function(){this.setDirection(Ext.String.toggle(this.getDirection(),"ASC","DESC"))},getState:function(){var g=this,l={root:g.getRoot(),property:g.getProperty(),direction:g.getDirection()};if(g._id){l.id=g._id}return l},serialize:function(){return{property:this.getProperty(),direction:this.getDirection()}}},1,0,0,0,0,0,[Ext.util,"Sorter"],0));(Ext.cmd.derive("Ext.util.Sortable",Ext.Base,{isSortable:true,$configPrefixed:false,$configStrict:false,config:{sorters:null},defaultSortDirection:"ASC",multiSortLimit:3,statics:{createComparator:function(f){return f&&f.length?function(o,p){var q=f[0].sort(o,p),s=f.length,e=1;for(;!q&&e<s;e++){q=f[e].sort.call(f[e],o,p)}return q}:function(){return 0}}},applySorters:function(l){var m=this,n=m.getSorters()||new Ext.util.MixedCollection(false,Ext.returnId);if(l){n.addAll(m.decodeSorters(l))}return n},sort:function(x,y,w,q){var u=this,v,s,t=u.getSorters();if(!t){u.setSorters(null);t=u.getSorters()}if(Ext.isArray(x)){q=w;w=y}else{if(Ext.isObject(x)){x=[x];q=w;w=y}else{if(Ext.isString(x)){v=t.get(x);if(!v){v={property:x,direction:y}}else{if(y==null){v.toggle()}else{v.setDirection(y)}}x=[v]}}}if(x&&x.length){x=u.decodeSorters(x);switch(w){case"multi":t.insert(0,x[0]);s=t.getCount()-u.multiSortLimit;if(s>0){t.removeRange(u.multiSortLimit,s)}break;case"prepend":t.insert(0,x);break;case"append":t.addAll(x);break;case undefined:case null:case"replace":t.clear();t.addAll(x);break;default:}}if(q!==false){u.fireEvent("beforesort",u,x);u.onBeforeSort(x);if(u.getSorterCount()){u.doSort(u.generateComparator())}}return x},getSorterCount:function(){return this.getSorters().items.length},generateComparator:function(){var f=this.getSorters().getRange();return f.length?this.createComparator(f):this.emptyComparator},emptyComparator:function(){return 0},onBeforeSort:Ext.emptyFn,decodeSorters:function(w){if(!Ext.isArray(w)){if(w===undefined){w=[]}else{w=[w]}}var q=w.length,v=Ext.util.Sorter,t=this.getModel?this.getModel():this.model,p,u,s;for(s=0;s<q;s++){u=w[s];if(!(u instanceof v)){if(Ext.isString(u)){u={property:u}}Ext.applyIf(u,{root:this.sortRoot,direction:"ASC"});if(u.fn){u.sorterFn=u.fn}if(typeof u=="function"){u={sorterFn:u}}if(t&&!u.transform){p=t.getField(u.property);u.transform=p&&p.sortType!==Ext.identityFn?p.sortType:undefined}w[s]=new Ext.util.Sorter(u)}}return w},getFirstSorter:function(){var n=this.getSorters().items,p=n.length,o=0,m;for(;o<p;++o){m=n[o];if(!m.isGrouper){return m}}return null}},0,0,0,0,0,0,[Ext.util,"Sortable"],function(){this.prototype.createComparator=this.createComparator}));(Ext.cmd.derive("Ext.util.MixedCollection",Ext.util.AbstractMixedCollection,{constructor:function(){this.initConfig();Ext.util.AbstractMixedCollection.prototype.constructor.apply(this,arguments)},doSort:function(f){this.sortBy(f)},_sort:function(D,A,E){var o=this,y,x,z=String(A).toUpperCase()=="DESC"?-1:1,v=[],C=o.keys,w=o.items,B;E=E||function(e,f){return e-f};for(y=0,x=w.length;y<x;y++){v[v.length]={key:C[y],value:w[y],index:y}}Ext.Array.sort(v,function(e,f){return E(e[D],f[D])*z||(e.index<f.index?-1:1)});for(y=0,x=v.length;y<x;y++){B=v[y];w[y]=B.value;C[y]=B.key;o.indexMap[B.key]=y}o.generation++;o.indexGeneration=o.generation;o.fireEvent("sort",o)},sortBy:function(u){var w=this,v=w.items,x,y=w.keys,s,q=v.length,t;for(t=0;t<q;t++){v[t].$extCollectionIndex=t}Ext.Array.sort(v,function(e,f){return u(e,f)||(e.$extCollectionIndex<f.$extCollectionIndex?-1:1)});for(t=0;t<q;t++){x=v[t];s=w.getKey(x);y[t]=s;w.indexMap[s]=t;delete x.$extCollectionIndex}w.generation++;w.indexGeneration=w.generation;w.fireEvent("sort",w,v,y)},findInsertionIndex:function(q,s){var y=this,u=y.items,w=0,v=u.length-1,t,x;if(!s){s=y.generateComparator()}while(w<=v){t=(w+v)>>1;x=s(q,u[t]);if(x>=0){w=t+1}else{if(x<0){v=t-1}}}return w},reorder:function(f){Ext.util.AbstractMixedCollection.prototype.reorder.call(this,f);this.fireEvent("sort",this)},sortByKey:function(l,g){this._sort("key",l,g||function(f,o){var p=String(f).toUpperCase(),e=String(o).toUpperCase();return p>e?1:(p<e?-1:0)})}},1,0,0,0,0,[["sortable",Ext.util.Sortable]],[Ext.util,"MixedCollection"],0));(Ext.cmd.derive("Ext.util.TaskRunner",Ext.Base,{interval:10,timerId:null,constructor:function(l){var g=this;if(typeof l=="number"){g.interval=l}else{if(l){Ext.apply(g,l)}}g.tasks=[];g.timerFn=Ext.Function.bind(g.onTick,g)},newTask:function(g){var l=new Ext.util.TaskRunner.Task(g);l.manager=this;return l},start:function(n){var l=this,m=Ext.Date.now();if(!n.pending){l.tasks.push(n);n.pending=true}n.stopped=false;n.taskStartTime=m;n.taskRunTime=n.fireOnStart!==false?0:n.taskStartTime;n.taskRunCount=0;if(!l.firing){if(n.fireOnStart!==false){l.startTimer(0,m)}else{l.startTimer(n.interval,m)}}return n},stop:function(f){if(!f.stopped){f.stopped=true;if(f.onStop){f.onStop.call(f.scope||f,f)}}return f},stopAll:function(){Ext.each(this.tasks,this.stop,this)},firing:false,nextExpires:1e+99,onTick:function(){var K=this,C=K.tasks,I=K.fireIdleEvent,H=Ext.Date.now(),J=1e+99,O=C.length,E=Ext.GlobalEvents,F,L,A,G,D,B,M;K.timerId=null;K.firing=true;for(A=0;A<O||A<(O=C.length);++A){G=C[A];if(!(B=G.stopped)){F=G.taskRunTime+G.interval;if(F<=H){D=1;if(G.hasOwnProperty("fireIdleEvent")){I=G.fireIdleEvent}else{I=K.fireIdleEvent}G.taskRunCount++;if(G.args){M=G.addCountToArgs?G.args.concat([G.taskRunCount]):G.args}else{M=[G.taskRunCount]}try{D=G.run.apply(G.scope||G,M)}catch(z){try{if(G.onError){D=G.onError.call(G.scope||G,G,z)}}catch(N){}}G.taskRunTime=H;if(D===false||G.taskRunCount===G.repeat){K.stop(G);B=true}else{B=G.stopped;F=H+G.interval}}if(!B&&G.duration&&G.duration<=(H-G.taskStartTime)){K.stop(G);B=true}}if(B){G.pending=false;if(!L){L=C.slice(0,A)}}else{if(L){L.push(G)}if(J>F){J=F}}}if(L){K.tasks=L}K.firing=false;if(K.tasks.length){K.startTimer(J-H,Ext.Date.now())}if(I!==false&&E.hasListeners.idle){E.fireEvent("idle")}},startTimer:function(n,p){var o=this,q=p+n,s=o.timerId;if(s&&o.nextExpires-q>o.interval){clearTimeout(s);s=null}if(!s){if(n<o.interval){n=o.interval}o.timerId=Ext.defer(o.timerFn,n);o.nextExpires=q}}},1,0,0,0,0,0,[Ext.util,"TaskRunner"],function(){var g=this,l=g.prototype;l.destroy=l.stopAll;g.Task=new Ext.Class({isTask:true,stopped:true,fireOnStart:false,constructor:function(e){Ext.apply(this,e)},restart:function(e){if(e!==undefined){this.interval=e}this.manager.start(this)},start:function(e){if(this.stopped){this.restart(e)}},stop:function(){this.manager.stop(this)}});l=g.Task.prototype;l.destroy=l.stop}));(Ext.cmd.derive("Ext.fx.target.Target",Ext.Base,{isAnimTarget:true,constructor:function(f){this.target=f;this.id=this.getId()},getId:function(){return this.target.id},remove:function(){Ext.destroy(this.target)}},1,0,0,0,0,0,[Ext.fx.target,"Target"],0));(Ext.cmd.derive("Ext.fx.target.Element",Ext.fx.target.Target,{type:"element",getElVal:function(m,n,l){if(l===undefined){if(n==="x"){l=m.getX()}else{if(n==="y"){l=m.getY()}else{if(n==="scrollTop"){l=m.getScroll().top}else{if(n==="scrollLeft"){l=m.getScroll().left}else{if(n==="height"){l=m.getHeight()}else{if(n==="width"){l=m.getWidth()}else{l=m.getStyle(n)}}}}}}}return l},getAttr:function(n,l){var m=this.target;return[[m,this.getElVal(m,n,l)]]},setAttr:function(v){var y=v.length,s,x,w,o,t,u;for(o=0;o<y;o++){s=v[o].attrs;for(x in s){if(s.hasOwnProperty(x)){u=s[x].length;for(t=0;t<u;t++){w=s[x][t];this.setElVal(w[0],x,w[1])}}}}},setElVal:function(m,n,l){if(n==="x"){m.setX(l)}else{if(n==="y"){m.setY(l)}else{if(n==="scrollTop"){m.scrollTo("top",l)}else{if(n==="scrollLeft"){m.scrollTo("left",l)}else{if(n==="width"){m.setWidth(l)}else{if(n==="height"){m.setHeight(l)}else{m.setStyle(n,l)}}}}}}}},0,0,0,0,0,0,[Ext.fx.target,"Element"],0));(Ext.cmd.derive("Ext.fx.target.ElementCSS",Ext.fx.target.Element,{setAttr:function(J,B){var G={attrs:[],duration:[],easing:[]},L=J.length,K=function(){this.setStyle(Ext.supports.CSS3Prefix+"TransitionProperty",null);this.setStyle(Ext.supports.CSS3Prefix+"TransitionDuration",null);this.setStyle(Ext.supports.CSS3Prefix+"TransitionTimingFunction",null)},I={single:true},A,H,o,M,D,E,z,C,F;for(z=0;z<L;z++){H=J[z];D=H.duration;M=H.easing;H=H.attrs;for(o in H){if(Ext.Array.indexOf(G.attrs,o)==-1){G.attrs.push(o.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}));G.duration.push(D+"ms");G.easing.push(M)}}}A=G.attrs.join(",");D=G.duration.join(",");M=G.easing.join(", ");for(z=0;z<L;z++){H=J[z].attrs;for(o in H){F=H[o].length;for(C=0;C<F;C++){E=H[o][C];E[0].setStyle(Ext.supports.CSS3Prefix+"TransitionProperty",B?"":A);E[0].setStyle(Ext.supports.CSS3Prefix+"TransitionDuration",B?"":D);E[0].setStyle(Ext.supports.CSS3Prefix+"TransitionTimingFunction",B?"":M);E[0].setStyle(o,E[1]);if(B){E=E[0].dom.offsetWidth}else{E[0].on(Ext.supports.CSS3TransitionEnd,K,E[0],I)}}}}}},0,0,0,0,0,0,[Ext.fx.target,"ElementCSS"],0));(Ext.cmd.derive("Ext.fx.target.CompositeElement",Ext.fx.target.Element,{isComposite:true,constructor:function(f){f.id=f.id||Ext.id(null,"ext-composite-");Ext.fx.target.Element.prototype.constructor.call(this,f)},getAttr:function(w,v){var u=[],x=this.target,y=x.elements,q=y.length,t,s;for(t=0;t<q;t++){s=y[t];if(s){s=x.getElement(s);u.push([s,this.getElVal(s,w,v)])}}return u},setAttr:function(I){var x=this.target,w=I.length,D=x.elements,F=D.length,H,B,G,y,C,z,A,E;for(z=0;z<w;z++){G=I[z].attrs;for(y in G){if(G.hasOwnProperty(y)){E=G[y].length;for(A=0;A<E;A++){H=G[y][A][1];for(B=0;B<F;++B){C=D[B];if(C){C=x.getElement(C);this.setElVal(C,y,H)}}}}}}},remove:function(){this.target.destroy()}},1,0,0,0,0,0,[Ext.fx.target,"CompositeElement"],0));(Ext.cmd.derive("Ext.fx.target.CompositeElementCSS",Ext.fx.target.CompositeElement,{setAttr:function(){return Ext.fx.target.ElementCSS.prototype.setAttr.apply(this,arguments)}},0,0,0,0,0,0,[Ext.fx.target,"CompositeElementCSS"],0));(Ext.cmd.derive("Ext.fx.target.Sprite",Ext.fx.target.Target,{type:"draw",getFromPrim:function(m,n){var l;switch(n){case"rotate":case"rotation":l=m.attr.rotation;return{x:l.x||0,y:l.y||0,degrees:l.degrees||0};case"scale":case"scaling":l=m.attr.scaling;return{x:l.x||1,y:l.y||1,cx:l.cx||0,cy:l.cy||0};case"translate":case"translation":l=m.attr.translation;return{x:l.x||0,y:l.y||0};default:return m.attr[n]}},getAttr:function(l,g){return[[this.target,g!==undefined?g:this.getFromPrim(this.target,l)]]},setAttr:function(M){var B=M.length,y=[],F,C,J,H,I,K,L,D,E,x,A,G;for(D=0;D<B;D++){F=M[D].attrs;for(C in F){J=F[C];G=J.length;for(E=0;E<G;E++){I=J[E][0];H=J[E][1];if(C==="translate"||C==="translation"){L={x:H.x,y:H.y}}else{if(C==="rotate"||C==="rotation"){x=H.x;if(isNaN(x)){x=null}A=H.y;if(isNaN(A)){A=null}L={degrees:H.degrees,x:x,y:A}}else{if(C==="scale"||C==="scaling"){x=H.x;if(isNaN(x)){x=null}A=H.y;if(isNaN(A)){A=null}L={x:x,y:A,cx:H.cx,cy:H.cy}}else{if(C==="width"||C==="height"||C==="x"||C==="y"){L=parseFloat(H)}else{L=H}}}}K=Ext.Array.indexOf(y,I);if(K===-1){y.push([I,{}]);K=y.length-1}y[K][1][C]=L}}}B=y.length;for(D=0;D<B;D++){y[D][0].setAttributes(y[D][1])}this.target.redraw()}},0,0,0,0,0,0,[Ext.fx.target,"Sprite"],0));(Ext.cmd.derive("Ext.fx.target.CompositeSprite",Ext.fx.target.Sprite,{getAttr:function(u,v){var t=[],w=[].concat(this.target.items),p=w.length,q,s;for(q=0;q<p;q++){s=w[q];t.push([s,v!==undefined?v:this.getFromPrim(s,u)])}return t}},0,0,0,0,0,0,[Ext.fx.target,"CompositeSprite"],0));(Ext.cmd.derive("Ext.fx.target.Component",Ext.fx.target.Target,{type:"component",getPropMethod:{top:function(){return this.getPosition(true)[1]},left:function(){return this.getPosition(true)[0]},x:function(){return this.getPosition()[0]},y:function(){return this.getPosition()[1]},height:function(){return this.getHeight()},width:function(){return this.getWidth()},opacity:function(){return this.el.getStyle("opacity")}},setMethods:{top:"setPosition",left:"setPosition",x:"setPagePosition",y:"setPagePosition",height:"setSize",width:"setSize",opacity:"setOpacity"},getAttr:function(l,g){return[[this.target,g!==undefined?g:this.getPropMethod[l].call(this.target)]]},setAttr:function(L,E,I){var N=this,O=L.length,C,P,H,w,F,Q,G,M,D,o,J={},K;for(w=0;w<O;w++){C=L[w].attrs;for(P in C){Q=C[P].length;for(F=0;F<Q;F++){H=C[P][F];K=J[N.setMethods[P]]||(J[N.setMethods[P]]={});K.target=H[0];K[P]=H[1]}}if(J.setPosition){H=J.setPosition;G=(H.left===undefined)?undefined:parseFloat(H.left);M=(H.top===undefined)?undefined:parseFloat(H.top);H.target.setPosition(G,M)}if(J.setPagePosition){H=J.setPagePosition;H.target.setPagePosition(H.x,H.y)}if(J.setSize){H=J.setSize;D=(H.width===undefined)?H.target.getWidth():parseFloat(H.width);o=(H.height===undefined)?H.target.getHeight():parseFloat(H.height);H.target.el.setSize(D,o);if(I||N.dynamic){Ext.GlobalEvents.on({idle:Ext.Function.bind(H.target.setSize,H.target,[D,o]),single:true})}}if(J.setOpacity){H=J.setOpacity;H.target.el.setStyle("opacity",H.opacity)}}}},0,0,0,0,0,0,[Ext.fx.target,"Component"],0));(Ext.cmd.derive("Ext.fx.Queue",Ext.Base,{constructor:function(){this.targets=new Ext.util.HashMap();this.fxQueue={}},getFxDefaults:function(l){var g=this.targets.get(l);if(g){return g.fxDefaults}return{}},setFxDefaults:function(n,l){var m=this.targets.get(n);if(m){m.fxDefaults=Ext.apply(m.fxDefaults||{},l)}},stopAnimation:function(q,s){var u=this,t=u.getFxQueue(q),o=t.length,p;while(o){p=t[o-1];if(p){p.end(s)}o--}},getActiveAnimation:function(g){var l=this.getFxQueue(g);return(l&&!!l.length)?l[0]:false},hasFxBlock:function(g){var l=this.getFxQueue(g);return l&&l[0]&&l[0].block},getFxQueue:function(p){if(!p){return false}var o=this,q=o.fxQueue,s=q[p],n=o.targets.get(p);if(!n){return false}if(!s){o.fxQueue[p]=q[p]=[];if(n.type!=="element"){n.target.on("destroy",function(){q[p]=null;delete q[p]})}}return o.fxQueue[p]},queueFx:function(o){var p=this,u=o.target,s=u.getId(),t,q;if(!u){return}t=p.getFxQueue(s);q=t.length;if(q){if(o.concurrent){o.paused=false}else{t[q-1].on("afteranimate",function(){o.paused=false})}}else{o.paused=false}o.on("afteranimate",function(){Ext.Array.remove(t,o);if(t.length===0){p.targets.remove(o.target);p.fxQueue[s]=null;delete p.fxQueue[s]}if(o.remove){if(u.type==="element"){var e=Ext.get(s);if(e){e.destroy()}}}},p,{single:true});t.push(o)}},1,0,0,0,0,0,[Ext.fx,"Queue"],0));(Ext.cmd.derive("Ext.fx.Manager",Ext.Base,{singleton:true,constructor:function(){var f=this;f.items=new Ext.util.MixedCollection();f.targetArr={};f.mixins.queue.constructor.call(f);f.taskRunner=new Ext.util.TaskRunner()},interval:16,forceJS:true,createTarget:function(m){var o=this,n=!o.forceJS&&Ext.supports.Transitions,p;o.useCSS3=n;if(m){if(m.tagName||Ext.isString(m)||m.isFly){m=Ext.get(m);p=new Ext.fx.target["Element"+(n?"CSS":"")](m)}else{if(m.dom){p=new Ext.fx.target["Element"+(n?"CSS":"")](m)}else{if(m.isComposite){p=new Ext.fx.target["CompositeElement"+(n?"CSS":"")](m)}else{if(m.isSprite){p=new Ext.fx.target.Sprite(m)}else{if(m.isCompositeSprite){p=new Ext.fx.target.CompositeSprite(m)}else{if(m.isComponent){p=new Ext.fx.target.Component(m)}else{if(m.isAnimTarget){return m}else{return null}}}}}}}o.targets.add(p);return p}else{return null}},addAnim:function(m){var n=this,o=n.items,p=n.task;o.add(m.id,m);if(!p&&o.length){p=n.task={run:n.runner,interval:n.interval,scope:n};n.taskRunner.start(p)}},removeAnim:function(m){var n=this,o=n.items,p=n.task;o.removeAtKey(m.id);if(p&&!o.length){n.taskRunner.stop(p);delete n.task}},runner:function(){var o=this,q=o.items.getRange(),p=0,s=q.length,n;o.targetArr={};o.timestamp=new Date();for(;p<s;p++){n=q[p];if(n.isReady()){o.startAnim(n)}}for(p=0;p<s;p++){n=q[p];if(n.isRunning()){o.runAnim(n)}}o.applyPendingAttrs();o.targetArr=null},startAnim:function(f){f.start(this.timestamp)},runAnim:function(o,x){if(!o){return}var s=this,w=s.useCSS3&&o.target.type==="element",v=s.timestamp-o.startTime,t=(v>=o.duration),y,u;if(x){v=o.duration;t=true}y=this.collectTargetData(o,v,w,t);if(w){o.target.setAttr(y.anims[o.id].attributes,true);s.collectTargetData(o,o.duration,w,t);o.paused=true;y=o.target.target;if(o.target.isComposite){y=o.target.target.last()}u={};u[Ext.supports.CSS3TransitionEnd]=o.lastFrame;u.scope=o;u.single=true;y.on(u)}return y},jumpToEnd:function(n){var o=this,m,p;if(!o.targetArr){o.targetArr={};p=true}m=o.runAnim(n,true);o.applyAnimAttrs(m,m.anims[n.id]);if(p){o.targetArr=null}},collectTargetData:function(q,t,o,u){var s=q.target.getId(),p=this.targetArr[s];if(!p){p=this.targetArr[s]={id:s,el:q.target,anims:{}}}p.anims[q.id]={id:q.id,anim:q,elapsed:t,isLastFrame:u,attributes:[{duration:q.duration,easing:(o&&q.reverse)?q.easingFn.reverse().toCSS3():q.easing,attrs:q.runAnim(t)}]};return p},applyAnimAttrs:function(l,n){var m=n.anim;if(n.attributes&&m.isRunning()){l.el.setAttr(n.attributes,false,n.isLastFrame);if(n.isLastFrame){m.lastFrame()}}},applyPendingAttrs:function(){var o=this.targetArr,u,q,s,p,t;for(q in o){if(o.hasOwnProperty(q)){u=o[q];for(t in u.anims){if(u.anims.hasOwnProperty(t)){s=u.anims[t];p=s.anim;if(s.attributes&&p.isRunning()){u.el.setAttr(s.attributes,false,s.isLastFrame);if(s.isLastFrame){p.lastFrame()}}}}}}}},1,0,0,0,0,[["queue",Ext.fx.Queue]],[Ext.fx,"Manager"],0));(Ext.cmd.derive("Ext.fx.Animator",Ext.Base,{isAnimator:true,duration:250,delay:0,delayStart:0,dynamic:false,easing:"ease",running:false,paused:false,damper:1,iterations:1,currentIteration:0,keyframeStep:0,animKeyFramesRE:/^(from|to|\d+%?)$/,constructor:function(l){var g=this;l=Ext.apply(g,l||{});g.config=l;g.id=Ext.id(null,"ext-animator-");g.mixins.observable.constructor.call(g,l);g.timeline=[];g.createTimeline(g.keyframes);if(g.target){g.applyAnimator(g.target);Ext.fx.Manager.addAnim(g)}},sorter:function(g,l){return g.pct-l.pct},createTimeline:function(z){var w=this,E=[],v=w.to||{},B=w.duration,D,C,A,x,u,y;for(u in z){if(z.hasOwnProperty(u)&&w.animKeyFramesRE.test(u)){y={attrs:Ext.apply(z[u],v)};if(u==="from"){u=0}else{if(u==="to"){u=100}}y.pct=parseInt(u,10);E.push(y)}}Ext.Array.sort(E,w.sorter);x=E.length;for(A=0;A<x;A++){D=(E[A-1])?B*(E[A-1].pct/100):0;C=B*(E[A].pct/100);w.timeline.push({duration:C-D,attrs:E[A].attrs})}},applyAnimator:function(y){var v=this,u=[],C=v.timeline,w=C.length,A,x,B,t,z;if(v.fireEvent("beforeanimate",v)!==false){for(z=0;z<w;z++){A=C[z];t=A.attrs;x=t.easing||v.easing;B=t.damper||v.damper;delete t.easing;delete t.damper;A=new Ext.fx.Anim({target:y,easing:x,damper:B,duration:A.duration,paused:true,to:t});u.push(A)}v.animations=u;v.target=A.target;for(z=0;z<w-1;z++){A=u[z];A.nextAnim=u[z+1];A.on("afteranimate",function(){this.nextAnim.paused=false});A.on("afteranimate",function(){this.fireEvent("keyframe",this,++this.keyframeStep)},v)}u[w-1].on("afteranimate",function(){this.lastFrame()},v)}},start:function(o){var n=this,p=n.delay,q=n.delayStart,s;if(p){if(!q){n.delayStart=o;return}else{s=o-q;if(s<p){return}else{o=new Date(q.getTime()+p)}}}if(n.fireEvent("beforeanimate",n)!==false){n.startTime=o;n.running=true;n.animations[n.keyframeStep].paused=false}},lastFrame:function(){var l=this,n=l.iterations,m=l.currentIteration;m++;if(m<n){l.startTime=new Date();l.currentIteration=m;l.keyframeStep=0;l.applyAnimator(l.target);l.animations[l.keyframeStep].paused=false}else{l.currentIteration=0;l.end()}},end:function(){var f=this;f.fireEvent("afteranimate",f,f.startTime,new Date()-f.startTime)},isReady:function(){return this.paused===false&&this.running===false&&this.iterations>0},isRunning:function(){return false}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.fx,"Animator"],0));(Ext.cmd.derive("Ext.fx.CubicBezier",Ext.Base,{singleton:true,cubicBezierAtTime:function(I,D,F,J,K,z){var t=3*D,L=3*(J-D)-t,G=1-t-L,A=3*F,M=3*(K-F)-A,H=1-A-M;function B(e){return((G*e+L)*e+t)*e}function E(f,g){var e=C(f,g);return((H*e+M)*e+A)*e}function C(f,g){var l,m,p,o,n,e;for(p=f,e=0;e<8;e++){o=B(p)-f;if(Math.abs(o)<g){return p}n=(3*G*p+2*L)*p+t;if(Math.abs(n)<0.000001){break}p=p-o/n}l=0;m=1;p=f;if(p<l){return l}if(p>m){return m}while(l<m){o=B(p);if(Math.abs(o-f)<g){return p}if(f>o){l=p}else{m=p}p=(m-l)/2+l}return p}return E(I,1/(200*z))},cubicBezier:function(q,n,s,p){var o=function(e){return Ext.fx.CubicBezier.cubicBezierAtTime(e,q,n,s,p,1)};o.toCSS3=function(){return"cubic-bezier("+[q,n,s,p].join(",")+")"};o.reverse=function(){return Ext.fx.CubicBezier.cubicBezier(1-s,1-p,1-q,1-n)};return o}},0,0,0,0,0,0,[Ext.fx,"CubicBezier"],0));(Ext.cmd.derive("Ext.fx.Easing",Ext.Base,function(){var p=Math,v=p.PI,q=p.pow,t=p.sin,w=p.sqrt,u=p.abs,s=1.70158;return{singleton:true,linear:Ext.identityFn,ease:function(x){var g=0.07813-x/2,l=w(0.0066+g*g),n=l-g,e=q(u(n),1/3)*(n<0?-1:1),o=-l-g,f=q(u(o),1/3)*(o<0?-1:1),m=e+f+0.25;return q(1-m,2)*3*m*0.1+(1-m)*3*m*m+m*m*m},easeIn:function(e){return q(e,1.7)},easeOut:function(e){return q(e,0.48)},easeInOut:function(x){var g=0.48-x/1.04,l=w(0.1734+g*g),n=l-g,e=q(u(n),1/3)*(n<0?-1:1),o=-l-g,f=q(u(o),1/3)*(o<0?-1:1),m=e+f+0.5;return(1-m)*3*m*m+m*m*m},backIn:function(e){return e*e*((s+1)*e-s)},backOut:function(e){e=e-1;return e*e*((s+1)*e+s)+1},elasticIn:function(e){if(e===0||e===1){return e}var f=0.3,g=f/4;return q(2,-10*e)*t((e-g)*(2*v)/f)+1},elasticOut:function(e){return 1-Ext.fx.Easing.elasticIn(1-e)},bounceIn:function(e){return 1-Ext.fx.Easing.bounceOut(1-e)},bounceOut:function(e){var g=7.5625,f=2.75,l;if(e<(1/f)){l=g*e*e}else{if(e<(2/f)){e-=(1.5/f);l=g*e*e+0.75}else{if(e<(2.5/f)){e-=(2.25/f);l=g*e*e+0.9375}else{e-=(2.625/f);l=g*e*e+0.984375}}}return l}}},0,0,0,0,0,0,[Ext.fx,"Easing"],function(m){var l=m.self,n=l.prototype;l.addMembers({"back-in":n.backIn,"back-out":n.backOut,"ease-in":n.easeIn,"ease-out":n.easeOut,"elastic-in":n.elasticIn,"elastic-out":n.elasticOut,"bounce-in":n.bounceIn,"bounce-out":n.bounceOut,"ease-in-out":n.easeInOut})}));(Ext.cmd.derive("Ext.fx.DrawPath",Ext.Base,{singleton:true,pathToStringRE:/,?([achlmqrstvxz]),?/gi,pathCommandRE:/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,pathValuesRE:/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,stopsRE:/^(\d+%?)$/,radian:Math.PI/180,is:function(g,l){l=String(l).toLowerCase();return(l=="object"&&g===Object(g))||(l=="undefined"&&typeof g==l)||(l=="null"&&g===null)||(l=="array"&&Array.isArray&&Array.isArray(g))||(Object.prototype.toString.call(g).toLowerCase().slice(8,-1))==l},path2string:function(){return this.join(",").replace(Ext.fx.DrawPath.pathToStringRE,"$1")},pathToString:function(f){return f.join(",").replace(Ext.fx.DrawPath.pathToStringRE,"$1")},parsePathString:function(p){if(!p){return null}var m={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},n=[],o=this;if(o.is(p,"array")&&o.is(p[0],"array")){n=o.pathClone(p)}if(!n.length){String(p).replace(o.pathCommandRE,function(s,e,f){var g=[],l=e.toLowerCase();f.replace(o.pathValuesRE,function(q,u){if(u){g.push(+u)}});if(l=="m"&&g.length>2){n.push([e].concat(Ext.Array.splice(g,0,2)));l="l";e=(e=="m")?"l":"L"}while(g.length>=m[l]){n.push([e].concat(Ext.Array.splice(g,0,m[l])));if(!m[l]){break}}})}n.toString=o.path2string;return n},pathClone:function(u){var q=[],t,o,s,p;if(!this.is(u,"array")||!this.is(u&&u[0],"array")){u=this.parsePathString(u)}for(s=0,p=u.length;s<p;s++){q[s]=[];for(t=0,o=u[s].length;t<o;t++){q[s][t]=u[s][t]}}q.toString=this.path2string;return q},pathToAbsolute:function(B){if(!this.is(B,"array")||!this.is(B&&B[0],"array")){B=this.parsePathString(B)}var w=[],G=0,v=0,E=0,F=0,y=0,x=B.length,C,A,z,D;if(x&&B[0][0]=="M"){G=+B[0][1];v=+B[0][2];E=G;F=v;y++;w[0]=["M",G,v]}for(;y<x;y++){C=w[y]=[];A=B[y];if(A[0]!=A[0].toUpperCase()){C[0]=A[0].toUpperCase();switch(C[0]){case"A":C[1]=A[1];C[2]=A[2];C[3]=A[3];C[4]=A[4];C[5]=A[5];C[6]=+(A[6]+G);C[7]=+(A[7]+v);break;case"V":C[1]=+A[1]+v;break;case"H":C[1]=+A[1]+G;break;case"M":E=+A[1]+G;F=+A[2]+v;default:z=1;D=A.length;for(;z<D;z++){C[z]=+A[z]+((z%2)?G:v)}}}else{z=0;D=A.length;for(;z<D;z++){w[y][z]=A[z]}}switch(C[0]){case"Z":G=E;v=F;break;case"H":G=C[1];break;case"V":v=C[1];break;case"M":A=w[y];D=A.length;E=A[D-2];F=A[D-1];default:A=w[y];D=A.length;G=A[D-2];v=A[D-1]}}w.toString=this.path2string;return w},interpolatePaths:function(G,L){var p=this,C=p.pathToAbsolute(G),K=p.pathToAbsolute(L),J={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},F={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},E=function(f,g){if(f[g].length>7){f[g].shift();var e=f[g];while(e.length){Ext.Array.splice(f,g++,0,["C"].concat(Ext.Array.splice(e,0,6)))}Ext.Array.erase(f,g,1);I=Math.max(C.length,K.length||0)}},D=function(l,m,g,f,e){if(l&&m&&l[e][0]=="M"&&m[e][0]!="M"){Ext.Array.splice(m,e,0,["M",f.x,f.y]);g.bx=0;g.by=0;g.x=l[e][1];g.y=l[e][2];I=Math.max(C.length,K.length||0)}},z,I,A,H,B,M;for(z=0,I=Math.max(C.length,K.length||0);z<I;z++){C[z]=p.command2curve(C[z],J);E(C,z);(K[z]=p.command2curve(K[z],F));E(K,z);D(C,K,J,F,z);D(K,C,F,J,z);A=C[z];H=K[z];B=A.length;M=H.length;J.x=A[B-2];J.y=A[B-1];J.bx=parseFloat(A[B-4])||J.x;J.by=parseFloat(A[B-3])||J.y;F.bx=(parseFloat(H[M-4])||F.x);F.by=(parseFloat(H[M-3])||F.y);F.x=H[M-2];F.y=H[M-1]}return[C,K]},command2curve:function(l,m){var n=this;if(!l){return["C",m.x,m.y,m.x,m.y,m.x,m.y]}if(l[0]!="T"&&l[0]!="Q"){m.qx=m.qy=null}switch(l[0]){case"M":m.X=l[1];m.Y=l[2];break;case"A":l=["C"].concat(n.arc2curve.apply(n,[m.x,m.y].concat(l.slice(1))));break;case"S":l=["C",m.x+(m.x-(m.bx||m.x)),m.y+(m.y-(m.by||m.y))].concat(l.slice(1));break;case"T":m.qx=m.x+(m.x-(m.qx||m.x));m.qy=m.y+(m.y-(m.qy||m.y));l=["C"].concat(n.quadratic2curve(m.x,m.y,m.qx,m.qy,l[1],l[2]));break;case"Q":m.qx=l[1];m.qy=l[2];l=["C"].concat(n.quadratic2curve(m.x,m.y,l[1],l[2],l[3],l[4]));break;case"L":l=["C"].concat(m.x,m.y,l[1],l[2],l[1],l[2]);break;case"H":l=["C"].concat(m.x,m.y,l[1],m.y,l[1],m.y);break;case"V":l=["C"].concat(m.x,m.y,m.x,l[1],m.x,l[1]);break;case"Z":l=["C"].concat(m.x,m.y,m.X,m.Y,m.X,m.Y);break}return l},quadratic2curve:function(u,s,x,q,w,t){var y=1/3,v=2/3;return[y*u+v*x,y*s+v*q,y*w+v*x,y*t+v*q,w,t]},rotate:function(t,v,u){var q=Math.cos(u),s=Math.sin(u),w=t*q-v*s,p=t*s+v*q;return{x:w,y:p}},arc2curve:function(aS,az,aw,ay,aK,aY,a2,aU,aC,aI){var aO=this,a4=Math.PI,aM=aO.radian,aA=a4*120/180,a6=aM*(+aK||0),aq=[],au=Math,x=au.cos,a7=au.sin,aT=au.sqrt,aQ=au.abs,aX=au.asin,av,ao,ap,aJ,a5,al,t,aE,aG,aZ,a0,aV,a1,aD,a3,aF,an,y,am,aH,aL,aN,aR,ar,aP,at,aB,ax,aW;if(!aI){av=aO.rotate(aS,az,-a6);aS=av.x;az=av.y;av=aO.rotate(aU,aC,-a6);aU=av.x;aC=av.y;ao=(aS-aU)/2;ap=(az-aC)/2;aJ=(ao*ao)/(aw*aw)+(ap*ap)/(ay*ay);if(aJ>1){aJ=aT(aJ);aw=aJ*aw;ay=aJ*ay}a5=aw*aw;al=ay*ay;t=(aY==a2?-1:1)*aT(aQ((a5*al-a5*ap*ap-al*ao*ao)/(a5*ap*ap+al*ao*ao)));aE=t*aw*ap/ay+(aS+aU)/2;aG=t*-ay*ao/aw+(az+aC)/2;aZ=aX(((az-aG)/ay).toFixed(7));a0=aX(((aC-aG)/ay).toFixed(7));aZ=aS<aE?a4-aZ:aZ;a0=aU<aE?a4-a0:a0;if(aZ<0){aZ=a4*2+aZ}if(a0<0){a0=a4*2+a0}if(a2&&aZ>a0){aZ=aZ-a4*2}if(!a2&&a0>aZ){a0=a0-a4*2}}else{aZ=aI[0];a0=aI[1];aE=aI[2];aG=aI[3]}aV=a0-aZ;if(aQ(aV)>aA){aB=a0;ax=aU;aW=aC;a0=aZ+aA*(a2&&a0>aZ?1:-1);aU=aE+aw*x(a0);aC=aG+ay*a7(a0);aq=aO.arc2curve(aU,aC,aw,ay,aK,0,a2,ax,aW,[a0,aB,aE,aG])}aV=a0-aZ;a1=x(aZ);aD=a7(aZ);a3=x(a0);aF=a7(a0);an=au.tan(aV/4);y=4/3*aw*an;am=4/3*ay*an;aH=[aS,az];aL=[aS+y*aD,az-am*a1];aN=[aU+y*aF,aC-am*a3];aR=[aU,aC];aL[0]=2*aH[0]-aL[0];aL[1]=2*aH[1]-aL[1];if(aI){return[aL,aN,aR].concat(aq)}else{aq=[aL,aN,aR].concat(aq).join().split(",");ar=[];at=aq.length;for(aP=0;aP<at;aP++){ar[aP]=aP%2?aO.rotate(aq[aP-1],aq[aP],a6).y:aO.rotate(aq[aP],aq[aP+1],a6).x}return ar}}},0,0,0,0,0,0,[Ext.fx,"DrawPath"],0));(Ext.cmd.derive("Ext.fx.PropertyHandler",Ext.Base,{statics:{defaultHandler:{pixelDefaultsRE:/width|height|top$|bottom$|left$|right$/i,unitRE:/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/,scrollRE:/^scroll/i,computeDelta:function(s,y,A,v,t){A=(typeof A=="number")?A:1;var u=this.unitRE,x=u.exec(s),z,w;if(x){s=x[1];w=x[2];if(!this.scrollRE.test(t)&&!w&&this.pixelDefaultsRE.test(t)){w="px"}}s=+s||0;x=u.exec(y);if(x){y=x[1];w=x[2]||w}y=+y||0;z=(v!=null)?v:s;return{from:s,delta:(y-z)*A,units:w}},get:function(E,C,D,F,w){var G=E.length,A=[],z,x,v,B,y;for(z=0;z<G;z++){if(F){x=F[z][1].from}if(Ext.isArray(E[z][1])&&Ext.isArray(C)){v=[];B=0;y=E[z][1].length;for(;B<y;B++){v.push(this.computeDelta(E[z][1][B],C[B],D,x,w))}A.push([E[z][0],v])}else{A.push([E[z][0],this.computeDelta(E[z][1],C,D,x,w)])}}return A},set:function(s,v){var u=s.length,y=[],x,A,t,w,z;for(x=0;x<u;x++){A=s[x][1];if(Ext.isArray(A)){t=[];z=0;w=A.length;for(;z<w;z++){t.push(A[z].from+A[z].delta*v+(A[z].units||0))}y.push([s[x][0],t])}else{y.push([s[x][0],A.from+A.delta*v+(A.units||0)])}}return y}},stringHandler:{computeDelta:function(n,q,o,p,s){return{from:n,delta:q}},get:function(s,z,A,t,v){var u=s.length,y=[],x,w;for(x=0;x<u;x++){y.push([s[x][0],this.computeDelta(s[x][1],z,A,w,v)])}return y},set:function(t,u){var p=t.length,s=[],q,o;for(q=0;q<p;q++){o=t[q][1];s.push([t[q][0],o.delta])}return s}},color:{rgbRE:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,hexRE:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,hex3RE:/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,parseColor:function(w,A){A=(typeof A=="number")?A:1;var v=false,y=[this.hexRE,this.rgbRE,this.hex3RE],x=y.length,t,z,s,u;for(u=0;u<x;u++){s=y[u];z=(u%2===0)?16:10;t=s.exec(w);if(t&&t.length===4){if(u===2){t[1]+=t[1];t[2]+=t[2];t[3]+=t[3]}v={red:parseInt(t[1],z),green:parseInt(t[2],z),blue:parseInt(t[3],z)};break}}return v||w},computeDelta:function(v,u,p,s){v=this.parseColor(v);u=this.parseColor(u,p);var w=s?s:v,t=typeof w,q=typeof u;if(t==="string"||t==="undefined"||q==="string"||q==="undefined"){return u||w}return{from:v,delta:{red:Math.round((u.red-w.red)*p),green:Math.round((u.green-w.green)*p),blue:Math.round((u.blue-w.blue)*p)}}},get:function(w,v,y,s){var x=w.length,t=[],q,u;for(q=0;q<x;q++){if(s){u=s[q][1].from}t.push([w[q][0],this.computeDelta(w[q][1],v,y,u)])}return t},set:function(s,w){var v=s.length,y=[],x,z,A,u,t;for(x=0;x<v;x++){z=s[x][1];if(z){u=z.from;t=z.delta;z=(typeof z==="object"&&"red" in z)?"rgb("+z.red+", "+z.green+", "+z.blue+")":z;z=(typeof z==="object"&&z.length)?z[0]:z;if(typeof z==="undefined"){return[]}A=typeof z==="string"?z:"rgb("+[(u.red+Math.round(t.red*w))%256,(u.green+Math.round(t.green*w))%256,(u.blue+Math.round(t.blue*w))%256].join(",")+")";y.push([s[x][0],A])}}return y}},object:{interpolate:function(m,o){o=(typeof o==="number")?o:1;var p={},n;for(n in m){p[n]=parseFloat(m[n])*o}return p},computeDelta:function(v,u,s,t){v=this.interpolate(v);u=this.interpolate(u,s);var w=t?t:v,p={},q;for(q in u){p[q]=u[q]-w[q]}return{from:v,delta:p}},get:function(w,v,y,s){var x=w.length,t=[],q,u;for(q=0;q<x;q++){if(s){u=s[q][1].from}t.push([w[q][0],this.computeDelta(w[q][1],v,y,u)])}return t},set:function(B,v){var u=B.length,y=[],w={},x,p,C,z,A;for(x=0;x<u;x++){z=B[x][1];p=z.from;C=z.delta;for(A in p){w[A]=p[A]+C[A]*v}y.push([B[x][0],w])}return y}},path:{computeDelta:function(n,s,p,q){p=(typeof p==="number")?p:1;var o;n=+n||0;s=+s||0;o=(q!=null)?q:n;return{from:n,delta:(s-o)*p}},forcePath:function(f){if(!Ext.isArray(f)&&!Ext.isArray(f[0])){f=Ext.fx.DrawPath.parsePathString(f)}return f},get:function(G,A,H,L){var F=this.forcePath(A),O=[],J=G.length,E,B,N,C,M,z,D,I,K;for(N=0;N<J;N++){K=this.forcePath(G[N][1]);C=Ext.fx.DrawPath.interpolatePaths(K,F);K=C[0];F=C[1];E=K.length;I=[];for(z=0;z<E;z++){C=[K[z][0]];B=K[z].length;for(D=1;D<B;D++){M=L&&L[0][1][z][D].from;C.push(this.computeDelta(K[z][D],F[z][D],H,M))}I.push(C)}O.push([G[N][0],I])}return O},set:function(E,G){var F=E.length,z=[],x,y,A,w,v,B,D,C;for(x=0;x<F;x++){B=E[x][1];w=[];D=B.length;for(y=0;y<D;y++){v=[B[y][0]];C=B[y].length;for(A=1;A<C;A++){v.push(B[y][A].from+B[y][A].delta*G)}w.push(v.join(","))}z.push([E[x][0],w.join(",")])}return z}}}},0,0,0,0,0,0,[Ext.fx,"PropertyHandler"],function(){var o=["outlineColor","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","fill","stroke"],n=o.length,p=0,m;for(;p<n;p++){m=o[p];this[m]=this.color}o=["cursor"];n=o.length;p=0;for(;p<n;p++){m=o[p];this[m]=this.stringHandler}}));(Ext.cmd.derive("Ext.fx.Anim",Ext.Base,{isAnimation:true,duration:250,delay:0,delayStart:0,dynamic:false,easing:"ease",damper:1,bezierRE:/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,reverse:false,running:false,paused:false,iterations:1,autoEnd:false,alternate:false,currentIteration:0,startTime:0,frameCount:0,constructor:function(n){var m=this,l;n=n||{};if(n.keyframes){return new Ext.fx.Animator(n)}Ext.apply(m,n);if(m.from===undefined){m.from={}}m.propHandlers={};m.config=n;m.target=Ext.fx.Manager.createTarget(m.target);m.easingFn=Ext.fx.Easing[m.easing];m.target.dynamic=m.dynamic;if(!m.easingFn){m.easingFn=String(m.easing).match(m.bezierRE);if(m.easingFn&&m.easingFn.length===5){l=m.easingFn;m.easingFn=Ext.fx.CubicBezier.cubicBezier(+l[1],+l[2],+l[3],+l[4])}}m.id=Ext.id(null,"ext-anim-");m.mixins.observable.constructor.call(m);Ext.fx.Manager.addAnim(m);if(n.autoEnd){m.running=true;m.jumpToEnd()}},setAttr:function(l,g){return Ext.fx.Manager.items.get(this.id).setAttr(this.target,l,g)},initAttrs:function(){var w=this,u=w.from,t=w.to,v=w.initialFrom||{},y={},A,z,s,x;for(x in t){if(t.hasOwnProperty(x)){A=w.target.getAttr(x,u[x]);z=t[x];if(!Ext.fx.PropertyHandler[x]){if(Ext.isObject(z)){s=w.propHandlers[x]=Ext.fx.PropertyHandler.object}else{s=w.propHandlers[x]=Ext.fx.PropertyHandler.defaultHandler}}else{s=w.propHandlers[x]=Ext.fx.PropertyHandler[x]}y[x]=s.get(A,z,w.damper,v[x],x)}}w.currentAttrs=y},start:function(o){var n=this,p=n.delay,q=n.delayStart,s;if(p){if(!q){n.delayStart=o;return}else{s=o-q;if(s<p){return}else{o=new Date(q.getTime()+p)}}}if(n.fireEvent("beforeanimate",n)!==false){n.startTime=o;if(!n.paused&&!n.currentAttrs){n.initAttrs()}n.running=true;n.frameCount=0}},jumpToEnd:function(){var f=this;if(!f.endWasCalled){if(!f.currentAttrs){f.initAttrs()}Ext.fx.Manager.jumpToEnd(f);f.end()}},runAnim:function(D){var v=this,E=v.currentAttrs,z=v.duration,A=v.easingFn,B=v.propHandlers,x={},w,u,y,C;if(D>=z){D=z;C=true}if(v.reverse){D=z-D}for(y in E){if(E.hasOwnProperty(y)){u=E[y];w=C?1:A(D/z);x[y]=B[y].set(u,w)}}v.frameCount++;return x},lastFrame:function(){var l=this,n=l.iterations,m=l.currentIteration;m++;if(m<n){if(l.alternate){l.reverse=!l.reverse}l.startTime=new Date();l.currentIteration=m;l.paused=false}else{l.currentIteration=0;l.end();l.fireEvent("lastframe",l,l.startTime)}},endWasCalled:0,end:function(l){var g=this;if(g.endWasCalled++){return}g.startTime=0;g.paused=false;g.running=false;Ext.fx.Manager.removeAnim(g);if(!l){g.fireEvent("afteranimate",g,g.startTime);Ext.callback(g.callback,g.scope,[g,g.startTime])}if(g.remove){g.target.destroy()}},isReady:function(){return this.paused===false&&this.running===false&&this.iterations>0},isRunning:function(){return this.paused===false&&this.running===true&&this.isAnimator!==true}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.fx,"Anim"],0));Ext.enableFx=true;(Ext.cmd.derive("Ext.util.Animate",Ext.Base,{mixinId:"animate",isAnimate:true,animate:function(l){var g=this;if(Ext.fx.Manager.hasFxBlock(g.id)){return g}Ext.fx.Manager.queueFx(new Ext.fx.Anim(g.anim(l)));return this},anim:function(l){if(!Ext.isObject(l)){return(l)?{}:false}var g=this;if(l.stopAnimation){g.stopAnimation()}Ext.applyIf(l,Ext.fx.Manager.getFxDefaults(g.id));return Ext.apply({target:g,paused:true},l)},getAnimationProps:function(){var g=this,l=g.layout;return l&&l.animate?l.animate:{}},stopFx:Ext.Function.alias(Ext.util.Animate,"stopAnimation"),stopAnimation:function(f){Ext.fx.Manager.stopAnimation(this.id,f);return this},syncFx:function(){Ext.fx.Manager.setFxDefaults(this.id,{concurrent:true});return this},sequenceFx:function(){Ext.fx.Manager.setFxDefaults(this.id,{concurrent:false});return this},hasActiveFx:Ext.Function.alias(Ext.util.Animate,"getActiveAnimation"),getActiveAnimation:function(){return Ext.fx.Manager.getActiveAnimation(this.id)}},0,0,0,0,0,0,[Ext.util,"Animate"],0));(Ext.cmd.derive("Ext.dom.Fly",Ext.dom.Element,{alternateClassName:"Ext.dom.Element.Fly",validNodeTypes:{1:1,9:1,11:1},isFly:true,constructor:function(f){this.dom=f;this.el=this},attach:function(g){var l=this;if(!g){return l.detach()}l.dom=g;if(!Ext.cache[g.id]){l.getData().isSynchronized=false}return l},detach:function(){this.dom=null},addListener:null,removeListener:null},1,0,0,0,0,0,[Ext.dom,"Fly",Ext.dom.Element,"Fly"],function(n){var m={},l;n.cache=m;Ext.fly=function(g,e){var t=null,u=Ext.fly,f,s;e=e||(u.caller&&u.caller.$name)||"_global";g=Ext.getDom(g);if(g){f=g.nodeType;if(n.prototype.validNodeTypes[f]||(!f&&(g.window==g))){t=Ext.cache[g.id];if(!t||t.dom!==g){t=m[e]||(m[e]=new n());t.dom=g;s=t.getData(true);if(s){s.isSynchronized=false}}}}return t};Ext.getDetachedBody=function(){if(!l){Ext.detachedBodyEl=l=new n(document.createElement("div"));l.isDetachedBody=true}return l}}));(Ext.cmd.derive("Ext.dom.CompositeElementLite",Ext.Base,{alternateClassName:["Ext.CompositeElementLite"],isComposite:true,isLite:true,statics:{importElementMethods:function(){var l=Ext.dom.Element,g=this.prototype;Ext.Object.each(l.prototype,function(f,e){if(typeof e==="function"&&!g[f]){g[f]=function(){return this.invoke(f,arguments)}}})}},constructor:function(g,l){if(l){this.elements=g||[]}else{this.elements=[];this.add(g)}},getElement:function(g){var l=this._fly||(this._fly=new Ext.dom.Fly());return l.attach(g)},transformElement:function(f){return Ext.getDom(f)},getCount:function(){return this.elements.length},add:function(p,s){var n=this.elements,q,o;if(!p){return this}if(typeof p=="string"){p=Ext.fly(s||document).query(p)}else{if(p.isComposite){p=p.elements}else{if(!Ext.isIterable(p)){p=[p]}}}for(q=0,o=p.length;q<o;++q){n.push(this.transformElement(p[q]))}return this},invoke:function(q,u){var x=this,w=x.elements,y=w.length,v,s,t;if(t!==0){v=(x.isLite?Ext.dom.Fly:Ext.dom.Element).prototype;for(t=0;t<y;t++){s=w[t];if(s){v[q].apply(x.getElement(s),u)}}}return x},item:function(m){var l=this.elements[m],n=null;if(l){n=this.getElement(l)}return n},slice:function(g,l){return Ext.Array.slice(this.elements,g,l)},each:function(w,e){var v=this,q=v.elements,t=q.length,s,u;for(s=0;s<t;s++){u=q[s];if(u){u=this.getElement(u);if(w.call(e||u,u,v,s)===false){break}}}return v},fill:function(l){var g=this;g.elements=[];g.add(l);return g},insert:function(g,l){Ext.Array.insert(this.elements,g,l)},filter:function(z){var u=this,y=u.elements,v=y.length,x=[],w=0,t=typeof z=="function",s,A;for(;w<v;w++){A=y[w];s=false;if(A){A=u.getElement(A);if(t){s=z.call(A,A,u,w)!==false}else{s=A.is(z)}if(s){x.push(u.transformElement(A))}}}u.elements=x;return u},indexOf:function(f){return Ext.Array.indexOf(this.elements,this.transformElement(f))},replaceElement:function(o,p,s){var q=!isNaN(o)?o:this.indexOf(o),n;if(q>-1){p=Ext.getDom(p);if(s){n=this.elements[q];n.parentNode.insertBefore(p,n);Ext.removeNode(n)}Ext.Array.splice(this.elements,q,1,p)}return this},clear:function(m){var n=this,o=n.elements,p=o.length-1;if(m){for(;p>=0;p--){Ext.removeNode(o[p])}}this.elements=[]},addElements:function(e,p){if(!e){return this}if(typeof e==="string"){e=Ext.dom.Element.selectorFunction(e,p)}var o=this.elements,q=e.length,s;for(s=0;s<q;s++){o.push(Ext.get(e[s]))}return this},first:function(){return this.item(0)},last:function(){return this.item(this.getCount()-1)},contains:function(f){return this.indexOf(f)!=-1},removeElement:function(q,w){q=[].concat(q);var s=this,y=s.elements,t=q.length,x,u,v;for(v=0;v<t;v++){x=q[v];if((u=(y[x]||y[x=s.indexOf(x)]))){if(w){if(u.dom){u.destroy()}else{Ext.removeNode(u)}}Ext.Array.erase(y,x,1)}}return s},destroy:function(){return this.invoke("destroy",arguments);this.callParent()}},1,0,0,0,0,0,[Ext.dom,"CompositeElementLite",Ext,"CompositeElementLite"],function(g){var l=g.prototype;g.importElementMethods();l.on=l.addListener}));Ext.define("Ext.overrides.dom.Element",(function(){var aF,aD=window,aj=document,ab="hidden",ay="isClipped",ad="overflow",au="overflow-x",av="overflow-y",aq="originalClip",al="height",aJ="width",aI="visibility",aN="display",ah="none",Z="offsets",aL="clip",aC="originalDisplay",ag="visibilityMode",ap="isVisible",aE="x-hidden-offsets",az="x-hidden-clip",Y=['<div class="{0}-tl" role="presentation">','<div class="{0}-tr" role="presentation">','<div class="{0}-tc" role="presentation"></div>',"</div>","</div>",'<div class="{0}-ml" role="presentation">','<div class="{0}-mr" role="presentation">','<div class="{0}-mc" role="presentation"></div>',"</div>","</div>",'<div class="{0}-bl" role="presentation">','<div class="{0}-br" role="presentation">','<div class="{0}-bc" role="presentation"></div>',"</div>","</div>"].join(""),ae=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/ig,ak=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,aM=/\ssrc=([\'\"])(.*?)\1/i,aA=/\S/,aG=/\stype=([\'\"])(.*?)\1/i,an=/^-ms-/,am=/(-[a-z])/gi,af=function(f,e){return e.charAt(1).toUpperCase()},aB="x-masked",ao="x-masked-relative",at="x-mask-msg",aw=/^body/i,ax={},ar=function(f){var e=f.getData(),g=e[ag];if(g===undefined){e[ag]=g=aF.VISIBILITY}return g},aa=aj.createRange?aj.createRange():null,ai={INPUT:true,TEXTAREA:true};if(Ext.isIE8){var aH=aj.createElement("div"),ac=[],aK=Ext.Function.createBuffered(function(){var f=ac.length,e;for(e=0;e<f;e++){aH.appendChild(ac[e])}aH.innerHTML="";ac.length=0},10)}return{override:"Ext.dom.Element",mixins:[Ext.util.Animate],skipGarbageCollection:false,_init:function(e){aF=e;e.tabbableSelector+=",["+e.tabbableSavedCounterAttribute+"]"},statics:{selectableCls:"x-selectable",unselectableCls:"x-unselectable",tabbableSelector:Ext.supports.CSS3NegationSelector?'a[href],button,iframe,input,select,textarea,[tabindex]:not([tabindex="-1"]),[contenteditable="true"]':'a[href],button,iframe,input,select,textarea,[tabindex],[contenteditable="true"]',naturallyFocusableTags:{BUTTON:true,IFRAME:true,EMBED:true,INPUT:true,OBJECT:true,SELECT:true,TEXTAREA:true,HTML:Ext.isIE?true:false,BODY:Ext.isIE?false:true},naturallyTabbableTags:{BUTTON:true,IFRAME:true,INPUT:true,SELECT:true,TEXTAREA:true,OBJECT:Ext.isIE8m?true:false},tabbableSavedCounterAttribute:"data-tabindex-counter",tabbableSavedValueAttribute:"data-tabindex-value",normalize:function(e){if(e==="float"){e=Ext.supports.Float?"cssFloat":"styleFloat"}return ax[e]||(ax[e]=e.replace(an,"ms-").replace(am,af))}},addKeyListener:function(g,e,f){var l;if(typeof g!=="object"||Ext.isArray(g)){l={target:this,key:g,fn:e,scope:f}}else{l={target:this,key:g.key,shift:g.shift,ctrl:g.ctrl,alt:g.alt,fn:e,scope:f}}return new Ext.util.KeyMap(l)},addKeyMap:function(e){return new Ext.util.KeyMap(Ext.apply({target:this},e))},afterAnimate:function(){var e=this.shadow;if(e&&!e.disabled&&!e.animate){e.show()}},anchorAnimX:function(f){var e=(f==="l")?"right":"left";this.dom.style[e]="0px"},anim:function(m){if(!Ext.isObject(m)){return(m)?{}:false}var l=this,g=m.duration||Ext.fx.Anim.prototype.duration,e=m.easing||"ease",f;if(m.stopAnimation){l.stopAnimation()}Ext.applyIf(m,Ext.fx.Manager.getFxDefaults(l.id));Ext.fx.Manager.setFxDefaults(l.id,{delay:0});f={target:l.dom,remove:m.remove,alternate:m.alternate||false,duration:g,easing:e,callback:m.callback,listeners:m.listeners,iterations:m.iterations||1,scope:m.scope,block:m.block,concurrent:m.concurrent,delay:m.delay||0,paused:true,keyframes:m.keyframes,from:m.from||{},to:Ext.apply({},m),userConfig:m};Ext.apply(f.to,m.to);delete f.to.to;delete f.to.from;delete f.to.remove;delete f.to.alternate;delete f.to.keyframes;delete f.to.iterations;delete f.to.listeners;delete f.to.target;delete f.to.paused;delete f.to.callback;delete f.to.scope;delete f.to.duration;delete f.to.easing;delete f.to.concurrent;delete f.to.block;delete f.to.stopAnimation;delete f.to.delay;return f},animate:function(e){this.addAnimation(e);return this},addAnimation:function(m){var f=this,l=f.dom.id||Ext.id(f.dom),g,e,n;if(!Ext.fx.Manager.hasFxBlock(l)){if(m.listeners){g=m.listeners;delete m.listeners}if(m.internalListeners){m.listeners=m.internalListeners;delete m.internalListeners}n=m.autoEnd;delete m.autoEnd;e=new Ext.fx.Anim(f.anim(m));e.on({afteranimate:"afterAnimate",beforeanimate:"beforeAnimate",scope:f,single:true});if(g){e.on(g)}Ext.fx.Manager.queueFx(e);if(n){e.jumpToEnd()}}return e},beforeAnimate:function(){var e=this.shadow;if(e&&!e.disabled&&!e.animate){e.hide()}},boxWrap:function(f){f=f||"x-box";var e=Ext.get(this.insertHtml("beforeBegin","<div class='"+f+"' role='presentation'>"+Ext.String.format(Y,f)+"</div>"));e.selectNode("."+f+"-mc").appendChild(this.dom);return e},clean:function(n){var l=this,f=l.dom,g=l.getData(),e=f.firstChild,m=-1,o;if(g.isCleaned&&n!==true){return l}while(e){o=e.nextSibling;if(e.nodeType===3){if(!(aA.test(e.nodeValue))){f.removeChild(e)}else{if(o&&o.nodeType===3){e.appendData(Ext.String.trim(o.data));f.removeChild(o);o=e.nextSibling;e.nodeIndex=++m}}}else{Ext.fly(e,"_clean").clean();e.nodeIndex=++m}e=o}g.isCleaned=true;return l},empty:aa?function(){var e=this.dom;if(e.firstChild){aa.setStartBefore(e.firstChild);aa.setEndAfter(e.lastChild);aa.deleteContents()}}:function(){var e=this.dom;while(e.lastChild){e.removeChild(e.lastChild)}},clearListeners:function(){this.removeAnchor();arguments.callee.$previous.call(this)},clearPositioning:function(e){e=e||"";return this.setStyle({left:e,right:e,top:e,bottom:e,"z-index":"",position:"static"})},createProxy:function(m,e,f){m=(typeof m==="object")?m:{tag:"div",role:"presentation",cls:m};var l=this,g=e?Ext.DomHelper.append(e,m,true):Ext.DomHelper.insertBefore(l.dom,m,true);g.setVisibilityMode(aF.DISPLAY);g.hide();if(f&&l.setBox&&l.getBox){g.setBox(l.getBox())}return g},clearOpacity:function(){return this.setOpacity("")},clip:function(){var f=this,e=f.getData(),g;if(!e[ay]){e[ay]=true;g=f.getStyle([ad,au,av]);e[aq]={o:g[ad],x:g[au],y:g[av]};f.setStyle(ad,ab);f.setStyle(au,ab);f.setStyle(av,ab)}return f},destroy:function(){var l=this,e=l.dom,f=l.getData(),g,m;if(e){if(l.isAnimate){l.stopAnimation()}l.removeAnchor()}arguments.callee.$previous.call(this);if(e&&Ext.isIE8&&(e.window!=e)&&(e.nodeType!==9)&&(e.tagName!=="BODY")&&(e.tagName!=="HTML")){ac[ac.length]=e;aK()}if(f){g=f.maskEl;m=f.maskMsg;if(g){g.destroy()}if(m){m.destroy()}}},enableDisplayMode:function(e){var f=this;f.setVisibilityMode(aF.DISPLAY);if(e!==undefined){f.getData()[aC]=e}return f},fadeIn:function(f){var g=this,e=g.dom;g.animate(Ext.apply({},f,{opacity:1,internalListeners:{beforeanimate:function(l){var m=Ext.fly(e,"_anim");if(m.isStyle("display","none")){m.setDisplayed("")}else{m.show()}}}}));return this},fadeOut:function(f){var g=this,e=g.dom;f=Ext.apply({opacity:0,internalListeners:{afteranimate:function(l){if(e&&l.to.opacity===0){var m=Ext.fly(e,"_anim");if(f.useDisplay){m.setDisplayed(false)}else{m.hide()}}}}},f);g.animate(f);return g},fixDisplay:function(){var e=this;if(e.isStyle(aN,ah)){e.setStyle(aI,ab);e.setStyle(aN,e._getDisplay());if(e.isStyle(aN,ah)){e.setStyle(aN,"block")}}},frame:function(n,g,f){var m=this,e=m.dom,l;n=n||"#C3DAF9";g=g||1;f=f||{};l=function(){var p=Ext.fly(e,"_anim"),q=this,o,s,t;p.show();o=p.getBox();s=Ext.getBody().createChild({role:"presentation",id:p.dom.id+"-anim-proxy",style:{position:"absolute","pointer-events":"none","z-index":35000,border:"0px solid "+n}});t=new Ext.fx.Anim({target:s,duration:f.duration||1000,iterations:g,from:{top:o.y,left:o.x,borderWidth:0,opacity:1,height:o.height,width:o.width},to:{top:o.y-20,left:o.x-20,borderWidth:10,opacity:0,height:o.height+40,width:o.width+40}});t.on("afteranimate",function(){s.destroy();q.end()})};m.animate({duration:(Math.max(f.duration,500)*2)||2000,listeners:{beforeanimate:{fn:l}},callback:f.callback,scope:f.scope});return m},getColor:function(o,n,e){var l=this.getStyle(o),m=e||e===""?e:"#",f,p,g=0;if(!l||(/transparent|inherit/.test(l))){return n}if(/^r/.test(l)){l=l.slice(4,l.length-1).split(",");p=l.length;for(;g<p;g++){f=parseInt(l[g],10);m+=(f<16?"0":"")+f.toString(16)}}else{l=l.replace("#","");m+=l.length===3?l.replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"):l}return(m.length>5?m.toLowerCase():n)},getLoader:function(){var f=this,e=f.getData(),g=e.loader;if(!g){e.loader=g=new Ext.ElementLoader({target:f})}return g},getPositioning:function(f){var g=this.getStyle(["left","top","position","z-index"]),e=this.dom;if(f){if(g.left==="auto"){g.left=e.offsetLeft+"px"}if(g.top==="auto"){g.top=e.offsetTop+"px"}}return g},ghost:function(m,f){var l=this,e=l.dom,g;m=m||"b";g=function(){var p=Ext.fly(e,"_anim"),q=p.getWidth(),s=p.getHeight(),o=p.getXY(),t=p.getPositioning(),n={opacity:0};switch(m){case"t":n.y=o[1]-s;break;case"l":n.x=o[0]-q;break;case"r":n.x=o[0]+q;break;case"b":n.y=o[1]+s;break;case"tl":n.x=o[0]-q;n.y=o[1]-s;break;case"bl":n.x=o[0]-q;n.y=o[1]+s;break;case"br":n.x=o[0]+q;n.y=o[1]+s;break;case"tr":n.x=o[0]+q;n.y=o[1]-s;break}this.to=n;this.on("afteranimate",function(){var u=Ext.fly(e,"_anim");if(u){u.hide();u.clearOpacity();u.setPositioning(t)}})};l.animate(Ext.applyIf(f||{},{duration:500,easing:"ease-out",listeners:{beforeanimate:g}}));return l},hide:function(e){if(typeof e==="string"){this.setVisible(false,e);return this}this.setVisible(false,this.anim(e));return this},highlight:function(t,f){var o=this,s=o.dom,m={},p,l,q,e,g,n;f=f||{};e=f.listeners||{};q=f.attr||"backgroundColor";m[q]=t||"ffff9c";if(!f.to){l={};l[q]=f.endColor||o.getColor(q,"ffffff","")}else{l=f.to}f.listeners=Ext.apply(Ext.apply({},e),{beforeanimate:function(){p=s.style[q];var u=Ext.fly(s,"_anim");u.clearOpacity();u.show();g=e.beforeanimate;if(g){n=g.fn||g;return n.apply(g.scope||e.scope||aD,arguments)}},afteranimate:function(){if(s){s.style[q]=p}g=e.afteranimate;if(g){n=g.fn||g;n.apply(g.scope||e.scope||aD,arguments)}}});o.animate(Ext.apply({},f,{duration:1000,easing:"ease-in",from:m,to:l}));return o},hover:function(l,m,f,g){var e=this;e.on("mouseenter",l,f||e.dom,g);e.on("mouseleave",m,f||e.dom,g);return e},initDD:function(g,f,e){var l=new Ext.dd.DD(Ext.id(this.dom),g,f);return Ext.apply(l,e)},initDDProxy:function(g,f,e){var l=new Ext.dd.DDProxy(Ext.id(this.dom),g,f);return Ext.apply(l,e)},initDDTarget:function(g,f,e){var l=new Ext.dd.DDTarget(Ext.id(this.dom),g,f);return Ext.apply(l,e)},isFocusable:function(){var f=this.dom,g=false,e;if(f&&!f.disabled){e=f.nodeName;g=!!Ext.Element.naturallyFocusableTags[e]||((e==="A"||e==="LINK")&&!!f.href)||f.getAttribute("tabIndex")!=null||f.contentEditable==="true";if(Ext.isIE8&&e==="INPUT"&&f.type==="hidden"){g=false}g=g&&this.isVisible(true)}return g},isInputField:function(){var e=this.dom,f=e.contentEditable;if((ai[e.tagName]&&e.type!=="button")||(f===""||f==="true")){return true}return false},isTabbable:function(m){var g=this.dom,e=false,f,l,n;if(g&&!g.disabled){f=g.nodeName;n=g.getAttribute("tabIndex");l=n!=null;n-=0;if(f==="A"||f==="LINK"){if(g.href){e=l&&n<0?false:true}else{if(g.contentEditable==="true"){e=!l||(l&&n>=0)?true:false}else{e=l&&n>=0?true:false}}}else{if(g.contentEditable==="true"||Ext.Element.naturallyTabbableTags[f]){e=l&&n<0?false:true}else{if(l&&n>=0){e=true}}}if(Ext.isIE8&&f==="INPUT"&&g.type==="hidden"){e=false}e=e&&(m||((!this.component||this.component.isVisible(true))&&this.isVisible(true)))}return e},isMasked:function(o){var g=this,e=g.getData(),l=e.maskEl,n=e.maskMsg,f=false,m;if(l&&l.isVisible()){if(n){n.center(g)}f=true}else{if(o){m=g.findParentNode();if(m){return Ext.fly(m).isMasked(o)}}}return f},load:function(e){this.getLoader().load(e);return this},mask:function(e,g,p){var m=this,f=m.dom,l=m.getData(),o=l.maskEl,n;if(!(aw.test(f.tagName)&&m.getStyle("position")==="static")){m.addCls(ao)}if(o){o.destroy()}o=Ext.DomHelper.append(f,{role:"presentation",cls:"x-mask x-border-box",children:{role:"presentation",cls:g?at+" "+g:at,cn:{tag:"div",role:"presentation",cls:"x-mask-msg-inner",cn:{tag:"div",role:"presentation",cls:"x-mask-msg-text",html:e||""}}}},true);n=Ext.get(o.dom.firstChild);l.maskEl=o;m.addCls(aB);o.setDisplayed(true);if(typeof e==="string"){n.setDisplayed(true);n.center(m)}else{n.setDisplayed(false)}if(f===aj.body){o.addCls("x-mask-fixed")}m.saveTabbableState({skipSelf:f===aj.body});if(Ext.isIE9m&&f!==aj.body&&m.isStyle("height","auto")){o.setSize(undefined,p||m.getHeight())}return o},puff:function(f){var g=this,e=g.dom,m,l=g.getBox(),n=g.getStyle(["width","height","left","right","top","bottom","position","z-index","font-size","opacity"],true);f=Ext.applyIf(f||{},{easing:"ease-out",duration:500,useDisplay:false});m=function(){var o=Ext.fly(e,"_anim");o.clearOpacity();o.show();this.to={width:l.width*2,height:l.height*2,x:l.x-(l.width/2),y:l.y-(l.height/2),opacity:0,fontSize:"200%"};this.on("afteranimate",function(){var p=Ext.fly(e,"_anim");if(p){if(f.useDisplay){p.setDisplayed(false)}else{p.hide()}p.setStyle(n);Ext.callback(f.callback,f.scope)}})};g.animate({duration:f.duration,easing:f.easing,listeners:{beforeanimate:{fn:m}}});return g},selectable:function(){var e=this;e.dom.unselectable="";e.removeCls(aF.unselectableCls);e.addCls(aF.selectableCls);return e},setCapture:function(){var e=this.dom;if(Ext.isIE9m&&e.setCapture){e.setCapture()}},setHeight:function(g,f){var e=this;if(!f||!e.anim){arguments.callee.$previous.apply(this,arguments)}else{if(!Ext.isObject(f)){f={}}e.animate(Ext.applyIf({to:{height:g}},f))}return e},setHorizontal:function(){var e=this,f=e.verticalCls;delete e.vertical;if(f){delete e.verticalCls;e.removeCls(f)}delete e.setWidth;delete e.setHeight;if(!Ext.isIE8){delete e.getWidth;delete e.getHeight}delete e.styleHooks},updateText:function(e){var l=this,g,f;if(g){f=g.firstChild;if(!f||(f.nodeType!==3||f.nextSibling)){f=aj.createTextNode();l.empty();g.appendChild(f)}if(e){f.data=e}}},setHtml:function(o,n,e,m){var l=this,f,g,p;if(!l.dom){return l}o=o||"";g=l.dom;if(n!==true){g.innerHTML=o;Ext.callback(e,l);return l}f=Ext.id();o+='<span id="'+f+'" role="presentation"></span>';p=Ext.interval(function(){var u,x,q,s,t,v,w;if(!(v=aj.getElementById(f))){return false}clearInterval(p);Ext.removeNode(v);u=Ext.getHead().dom;while((x=ae.exec(o))){q=x[1];s=q?q.match(aM):false;if(s&&s[2]){w=aj.createElement("script");w.src=s[2];t=q.match(aG);if(t&&t[2]){w.type=t[2]}u.appendChild(w)}else{if(x[2]&&x[2].length>0){if(m){Ext.functionFactory(x[2]).call(m)}else{Ext.globalEval(x[2])}}}}Ext.callback(e,m||l)},20);g.innerHTML=o.replace(ak,"");return l},setOpacity:function(f,g){var e=this;if(!e.dom){return e}if(!g||!e.anim){e.setStyle("opacity",f)}else{if(typeof g!="object"){g={duration:350,easing:"ease-in"}}e.animate(Ext.applyIf({to:{opacity:f}},g))}return e},setPositioning:function(e){return this.setStyle(e)},setVertical:function(e,l){var g=this,f=aF.prototype;g.vertical=true;if(l){g.addCls(g.verticalCls=l)}g.setWidth=f.setHeight;g.setHeight=f.setWidth;if(!Ext.isIE8){g.getWidth=f.getHeight;g.getHeight=f.getWidth}g.styleHooks=(e===270)?f.verticalStyleHooks270:f.verticalStyleHooks90},setSize:function(g,l,f){var e=this;if(Ext.isObject(g)){f=l;l=g.height;g=g.width}if(!f||!e.anim){e.dom.style.width=aF.addUnits(g);e.dom.style.height=aF.addUnits(l);if(e.shadow||e.shim){e.syncUnderlays()}}else{if(f===true){f={}}e.animate(Ext.applyIf({to:{width:g,height:l}},f))}return e},setVisible:function(e,m){var l=this,f=l.dom,g=ar(l);if(typeof m==="string"){switch(m){case aN:g=aF.DISPLAY;break;case aI:g=aF.VISIBILITY;break;case Z:g=aF.OFFSETS;break;case aL:g=aF.CLIP;break}l.setVisibilityMode(g);m=false}if(!m||!l.anim){if(g===aF.DISPLAY){return l.setDisplayed(e)}else{if(g===aF.OFFSETS){l[e?"removeCls":"addCls"](aE)}else{if(g===aF.CLIP){l[e?"removeCls":"addCls"](az)}else{if(g===aF.VISIBILITY){l.fixDisplay();f.style.visibility=e?"":ab}}}}}else{if(e){l.setOpacity(0.01);l.setVisible(true)}if(!Ext.isObject(m)){m={duration:350,easing:"ease-in"}}l.animate(Ext.applyIf({callback:function(){if(!e){Ext.fly(f).setVisible(false).setOpacity(1)}},to:{opacity:(e)?1:0}},m))}l.getData()[ap]=e;if(l.shadow||l.shim){l.setUnderlaysVisible(e)}return l},setWidth:function(f,g){var e=this;if(!g||!e.anim){arguments.callee.$previous.apply(this,arguments)}else{if(!Ext.isObject(g)){g={}}e.animate(Ext.applyIf({to:{width:f}},g))}return e},setX:function(f,e){return this.setXY([f,this.getY()],e)},setXY:function(f,g){var e=this;if(!g||!e.anim){arguments.callee.$previous.call(this,f)}else{if(!Ext.isObject(g)){g={}}e.animate(Ext.applyIf({to:{x:f[0],y:f[1]}},g))}return this},setY:function(e,f){return this.setXY([this.getX(),e],f)},show:function(e){if(typeof e==="string"){this.setVisible(true,e);return this}this.setVisible(true,this.anim(e));return this},slideIn:function(s,e,q){var o=this,f=o.dom,l=f.style,m,g,p,n;s=s||"t";e=e||{};m=function(){var w=this,x=e.listeners,y=Ext.fly(f,"_anim"),v,t,u,z;if(!q){y.fixDisplay()}v=y.getBox();if((s=="t"||s=="b")&&v.height===0){v.height=f.scrollHeight}else{if((s=="l"||s=="r")&&v.width===0){v.width=f.scrollWidth}}t=y.getStyle(["width","height","left","right","top","bottom","position","z-index"],true);y.setSize(v.width,v.height);if(e.preserveScroll){p=y.cacheScrollValues()}z=y.wrap({role:"presentation",id:Ext.id()+"-anim-wrap-for-"+y.dom.id,style:{visibility:q?"visible":"hidden"}});n=z.dom.parentNode;z.setPositioning(y.getPositioning());if(z.isStyle("position","static")){z.position("relative")}y.clearPositioning("auto");z.clip();if(p){p()}y.setStyle({visibility:"",position:"absolute"});if(q){z.setSize(v.width,v.height)}switch(s){case"t":u={from:{width:v.width+"px",height:"0px"},to:{width:v.width+"px",height:v.height+"px"}};l.bottom="0px";break;case"l":u={from:{width:"0px",height:v.height+"px"},to:{width:v.width+"px",height:v.height+"px"}};o.anchorAnimX(s);break;case"r":u={from:{x:v.x+v.width,width:"0px",height:v.height+"px"},to:{x:v.x,width:v.width+"px",height:v.height+"px"}};o.anchorAnimX(s);break;case"b":u={from:{y:v.y+v.height,width:v.width+"px",height:"0px"},to:{y:v.y,width:v.width+"px",height:v.height+"px"}};break;case"tl":u={from:{x:v.x,y:v.y,width:"0px",height:"0px"},to:{width:v.width+"px",height:v.height+"px"}};l.bottom="0px";o.anchorAnimX("l");break;case"bl":u={from:{y:v.y+v.height,width:"0px",height:"0px"},to:{y:v.y,width:v.width+"px",height:v.height+"px"}};o.anchorAnimX("l");break;case"br":u={from:{x:v.x+v.width,y:v.y+v.height,width:"0px",height:"0px"},to:{x:v.x,y:v.y,width:v.width+"px",height:v.height+"px"}};o.anchorAnimX("r");break;case"tr":u={from:{x:v.x+v.width,width:"0px",height:"0px"},to:{x:v.x,width:v.width+"px",height:v.height+"px"}};l.bottom="0px";o.anchorAnimX("r");break}z.show();g=Ext.apply({},e);delete g.listeners;g=new Ext.fx.Anim(Ext.applyIf(g,{target:z,duration:500,easing:"ease-out",from:q?u.to:u.from,to:q?u.from:u.to}));g.on("afteranimate",function(){var A=Ext.fly(f,"_anim");A.setStyle(t);if(q){if(e.useDisplay){A.setDisplayed(false)}else{A.hide()}}if(z.dom){if(z.dom.parentNode){z.dom.parentNode.insertBefore(A.dom,z.dom)}else{n.appendChild(A.dom)}z.destroy()}if(p){p()}w.end()});if(x){g.on(x)}};o.animate({duration:e.duration?Math.max(e.duration,500)*2:1000,listeners:{beforeanimate:m}});return o},slideOut:function(e,f){return this.slideIn(e,f,true)},swallowEvent:function(m,l){var f=this,e,n,g=function(o){o.stopPropagation();if(l){o.preventDefault()}};if(Ext.isArray(m)){n=m.length;for(e=0;e<n;e++){f.on(m[e],g)}return f}f.on(m,g);return f},switchOff:function(l){var g=this,e=g.dom,f;l=Ext.applyIf(l||{},{easing:"ease-in",duration:500,remove:false,useDisplay:false});f=function(){var n=Ext.fly(e,"_anim"),o=this,p=n.getSize(),m=n.getXY(),q,s;n.clearOpacity();n.clip();s=n.getPositioning();q=new Ext.fx.Animator({target:e,duration:l.duration,easing:l.easing,keyframes:{33:{opacity:0.3},66:{height:1,y:m[1]+p.height/2},100:{width:1,x:m[0]+p.width/2}}});q.on("afteranimate",function(){var t=Ext.fly(e,"_anim");if(l.useDisplay){t.setDisplayed(false)}else{t.hide()}t.clearOpacity();t.setPositioning(s);t.setSize(p);o.end()})};g.animate({duration:(Math.max(l.duration,500)*2),listeners:{beforeanimate:{fn:f}},callback:l.callback,scope:l.scope});return g},syncContent:function(f){f=Ext.getDom(f);var e=f.childNodes,l=e.length,n=this.dom,m=n.childNodes,p=m.length,s,o,v,t,w,g,q,u=n._extData;if(Ext.isIE9m&&n.mergeAttributes){n.mergeAttributes(f,true);n.src=f.src}else{w=f.attributes;g=w.length;for(s=0;s<g;s++){q=w[s].name;if(q!=="id"){n.setAttribute(q,w[s].value)}}}if(u){u.isSynchronized=false}if(l!==p){n.innerHTML=f.innerHTML;return}for(s=0;s<l;s++){v=e[s];o=m[s];t=v.nodeType;if(t!==o.nodeType||(t===1&&v.tagName!==o.tagName)){n.innerHTML=f.innerHTML;return}if(t===3){o.data=v.data}else{if(v.id&&o.id!==v.id){o.id=v.id}o.style.cssText=v.style.cssText;o.className=v.className;Ext.fly(o,"_syncContent").syncContent(v)}}},toggle:function(f){var e=this;e.setVisible(!e.isVisible(),e.anim(f));return e},unmask:function(){var g=this,e=g.getData(),f=e.maskEl,l;if(f){l=f.dom.style;if(l.clearExpression){l.clearExpression("width");l.clearExpression("height")}if(f){f.destroy();delete e.maskEl}g.removeCls([aB,ao])}g.restoreTabbableState(g.dom===aj.body)},unclip:function(){var f=this,e=f.getData(),g;if(e[ay]){e[ay]=false;g=e[aq];if(g.o){f.setStyle(ad,g.o)}if(g.x){f.setStyle(au,g.x)}if(g.y){f.setStyle(av,g.y)}}return f},translate:function(g,f,e){if(Ext.supports.CssTransforms&&!Ext.isIE9m){arguments.callee.$previous.apply(this,arguments)}else{if(g!=null){this.dom.style.left=g+"px"}if(f!=null){this.dom.style.top=f+"px"}}},unselectable:function(){var e=this;if(Ext.isOpera){e.dom.unselectable="on"}e.removeCls(aF.selectableCls);e.addCls(aF.unselectableCls);return e},privates:{findTabbableElements:function(l){var g,q,o,x,w,t=this.dom,u=Ext.Element.tabbableSavedCounterAttribute,m=[],n=0,f,y,v,s,p,e;if(!t){return m}if(l){g=l.skipSelf;q=l.skipChildren;o=l.excludeRoot;x=l.includeSaved;w=l.includeHidden}o=o&&Ext.getDom(o);if(o&&o.contains(t)){return m}if(!g&&((x&&t.hasAttribute(u))||this.isTabbable(w))){m[n++]=t}if(q){return m}f=t.querySelectorAll(Ext.Element.tabbableSelector);p=f.length;if(!p){return m}v=new Ext.dom.Fly();for(s=0;s<p;s++){y=f[s];e=+y.getAttribute("tabIndex");if(((x&&y.hasAttribute(u))||(!(e<0)&&v.attach(y).isTabbable(w)))&&!(o&&(o===y||o.contains(y)))){m[n++]=y}}return m},saveTabbableState:function(l){var e=Ext.Element.tabbableSavedCounterAttribute,m=Ext.Element.tabbableSavedValueAttribute,o,n,f,g,p;if(!l||l.includeSaved==null){l=Ext.Object.chain(l||null);l.includeSaved=true}n=this.findTabbableElements(l);for(g=0,p=n.length;g<p;g++){f=n[g];o=+f.getAttribute(e);if(o>0){f.setAttribute(e,++o)}else{if(f.hasAttribute("tabIndex")){f.setAttribute(m,f.getAttribute("tabIndex"))}else{f.setAttribute(m,"none")}f.setAttribute("tabIndex","-1");f.setAttribute(e,"1")}}return n},restoreTabbableState:function(g,p){var s=this.dom,n=Ext.Element.tabbableSavedCounterAttribute,m=Ext.Element.tabbableSavedValueAttribute,e=[],l,f,e,t,q,o;if(!s){return this}if(!p){e=Ext.Array.from(s.querySelectorAll("["+n+"]"))}if(!g){e.unshift(s)}for(q=0,o=e.length;q<o;q++){t=e[q];if(!t.hasAttribute(n)||!t.hasAttribute(m)){continue}f=+t.getAttribute(n);if(f>1){t.setAttribute(n,--f);continue}l=t.getAttribute(m);if(l==="none"){t.removeAttribute("tabIndex")}else{t.setAttribute("tabIndex",l)}t.removeAttribute(m);t.removeAttribute(n)}return e}},deprecated:{"4.0":{methods:{pause:function(f){var e=this;Ext.fx.Manager.setFxDefaults(e.id,{delay:f});return e},scale:function(g,f,e){this.animate(Ext.apply({},e,{width:g,height:f}));return this},shift:function(e){this.animate(e);return this}}},"4.2":{methods:{moveTo:function(g,f,e){return this.setXY([g,f],e)},setBounds:function(l,e,f,m,g){return this.setBox({x:l,y:e,width:f,height:m},g)},setLeftTop:function(e,g){var f=this,l=f.dom.style;l.left=aF.addUnits(e);l.top=aF.addUnits(g);if(f.shadow||f.shim){f.syncUnderlays()}return f},setLocation:function(g,f,e){return this.setXY([g,f],e)}}},"5.0":{methods:{getAttributeNS:function(e,f){return this.getAttribute(f,e)},getCenterXY:function(){return this.getAlignToXY(aj,"c-c")},getComputedHeight:function(){return Math.max(this.dom.offsetHeight,this.dom.clientHeight)||parseFloat(this.getStyle(al))||0},getComputedWidth:function(){return Math.max(this.dom.offsetWidth,this.dom.clientWidth)||parseFloat(this.getStyle(aJ))||0},getStyleSize:function(){var f=this,e=this.dom,m=(e===aj||e===aj.body),g,n,l;if(m){return{width:aF.getViewportWidth(),height:aF.getViewportHeight()}}g=f.getStyle(["height","width"],true);if(g.width&&g.width!=="auto"){n=parseFloat(g.width)}if(g.height&&g.height!=="auto"){l=parseFloat(g.height)}return{width:n||f.getWidth(true),height:l||f.getHeight(true)}},isBorderBox:function(){return true},isDisplayed:function(){return !this.isStyle("display","none")},focusable:"isFocusable"}}}}})(),function(){var I=Ext.dom.Element,J=I.prototype,Q=!Ext.isIE8,ab=document,O=ab.defaultView,R=/alpha\(opacity=(.*)\)/i,W=/^\s+|\s+$/g,N=J.styleHooks,V=Ext.supports,Y,K,Z,G,X,M,aa;J._init(I);delete J._init;Ext.plainTableCls="x-table-plain";Ext.plainListCls="x-list-plain";if(Ext.CompositeElementLite){Ext.CompositeElementLite.importElementMethods()}if(!V.Opacity&&Ext.isIE){Ext.apply(N.opacity,{get:function(e){var f=e.style.filter,g,l;if(f.match){g=f.match(R);if(g){l=parseFloat(g[1]);if(!isNaN(l)){return l?l/100:0}}}return 1},set:function(e,g){var l=e.style,f=l.filter.replace(R,"").replace(W,"");l.zoom=1;if(typeof(g)==="number"&&g>=0&&g<1){g*=100;l.filter=f+(f.length?" ":"")+"alpha(opacity="+g+")"}else{l.filter=f}}})}if(!V.matchesSelector){var T=/^([a-z]+|\*)?(?:\.([a-z][a-z\-_0-9]*))?$/i,P=/\-/g,ac,S=function(g,f){var e=new RegExp("(?:^|\\s+)"+f.replace(P,"\\-")+"(?:\\s+|$)");if(g&&g!=="*"){g=g.toUpperCase();return function(l){return l.tagName===g&&e.test(l.className)}}return function(l){return e.test(l.className)}},H=function(e){e=e.toUpperCase();return function(f){return f.tagName===e}},L={};J.matcherCache=L;J.is=function(q){if(!q){return true}var p=this.dom,f,n,g,l,m,o,e;if(p.nodeType!==1){return false}if(!(g=Ext.isFunction(q)?q:L[q])){if(!(n=q.match(T))){l=p.parentNode;if(!l){m=true;l=ac||(ac=ab.createDocumentFragment());ac.appendChild(p)}o=Ext.Array.indexOf(Ext.fly(l,"_is").query(q),p)!==-1;if(m){ac.removeChild(p)}return o}e=n[1];f=n[2];L[q]=g=f?S(e,f):H(e)}return g(p)}}if(!O||!O.getComputedStyle){J.getStyle=function(g,p){var o=this,u=o.dom,e=typeof g!=="string",x=g,n=x,q=1,w=p,y=o.styleHooks,f,s,l,m,v,z,t;if(e){l={};x=n[0];t=0;if(!(q=n.length)){return l}}if(!u||u.documentElement){return l||""}s=u.style;if(p){z=s}else{z=u.currentStyle;if(!z){w=true;z=s}}do{m=y[x];if(!m){y[x]=m={name:I.normalize(x)}}if(m.get){v=m.get(u,o,w,z)}else{f=m.name;v=z[f]}if(!e){return v}l[x]=v;x=n[++t]}while(t<q);return l}}if(Ext.isIE8){aa=function(e,g,f,l){if(l[this.styleName]==="none"){return"0px"}return l[this.name]};Z=["Top","Right","Bottom","Left"];G=Z.length;while(G--){X=Z[G];M="border"+X+"Width";N["border-"+X.toLowerCase()+"-width"]=N[M]={name:M,styleName:"border"+X+"Style",get:aa}}var U="x-sync-repaint";J.syncRepaint=function(){this.addCls(U);this.getWidth();this.removeCls(U)}}if(Ext.isIE10m){Ext.override(I,{focus:function(e,f){var g=this,l;f=f||g.dom;if(Number(e)){Ext.defer(g.focus,e,g,[null,f])}else{Ext.GlobalEvents.fireEvent("beforefocus",f);if(f&&(f.tagName==="INPUT"||f.tagname==="TEXTAREA")){Ext.synchronouslyFocusing=document.activeElement}try{f.focus()}catch(m){l=m}if(Ext.synchronouslyFocusing&&document.activeElement!==f&&!l){f.focus()}Ext.synchronouslyFocusing=null}return g}})}Ext.apply(Ext,{enableGarbageCollector:true,isBorderBox:true,useShims:false,getElementById:function(e){var f=ab.getElementById(e),g;if(!f&&(g=Ext.detachedBodyEl)){f=g.dom.querySelector(Ext.makeIdSelector(e))}return f},addBehaviors:function(e){if(!Ext.isReady){Ext.onInternalReady(function(){Ext.addBehaviors(e)})}else{var l={},f,m,g;for(m in e){if((f=m.split("@"))[1]){g=f[0];if(!l[g]){l[g]=Ext.fly(document).select(g,true)}l[g].on(f[1],e[m])}}l=null}}});if(Ext.isIE9m){Ext.getElementById=function(e){var f=ab.getElementById(e),g;if(!f&&(g=Ext.detachedBodyEl)){f=g.dom.all[e]}return f};J.getById=function(e,n){var f=this.dom,m=null,g,l;if(f){l=(Q&&ab.getElementById(e))||f.all[e];if(l){if(n){m=l}else{g=Ext.cache[e];if(g){if(g.skipGarbageCollection||!Ext.isGarbage(g.dom)){m=g}else{g.destroy()}}m=m||new Ext.Element(l)}}}return m}}else{if(!ab.querySelector){Ext.getDetachedBody=Ext.getBody;Ext.getElementById=function(e){return ab.getElementById(e)};J.getById=function(e,g){var f=ab.getElementById(e);return g?f:(f?Ext.get(f):null)}}}if(Ext.isIE&&!(Ext.isIE9p&&ab.documentMode>=9)){J.getAttribute=function(l,f){var e=this.dom,g;if(f){g=typeof e[f+":"+l];if(g!=="undefined"&&g!=="unknown"){return e[f+":"+l]||null}return null}if(l==="for"){l="htmlFor"}return e[l]||null}}Ext.onInternalReady(function(){var u=/^(?:transparent|(?:rgba[(](?:\s*\d+\s*[,]){3}\s*0\s*[)]))$/i,w=[],o=J.setWidth,n=J.setHeight,f=J.setSize,e=/^\d+(?:\.\d*)?px$/i,p,s,x,g;if(V.FixedTableWidthBug){N.width={name:"width",set:function(B,A,D){var y=B.style,z=D._needsTableWidthFix,C=y.display;if(z){y.display="none"}y.width=A;if(z){B.scrollWidth;y.display=C}}};J.setWidth=function(D,y){var C=this,A=C.dom,E=A.style,z=C._needsTableWidthFix,B=E.display;if(z&&!y){E.display="none"}o.call(C,D,y);if(z&&!y){A.scrollWidth;E.display=B}return C};J.setSize=function(D,y,F){var B=this,A=B.dom,E=A.style,z=B._needsTableWidthFix,C=E.display;if(z&&!F){E.display="none"}f.call(B,D,y,F);if(z&&!F){A.scrollWidth;E.display=C}return B}}if(Ext.isIE8){N.height={name:"height",set:function(B,A,D){var y=D.component,C,z;if(y&&y._syncFrameHeight&&D===y.el){z=y.frameBody.dom.style;if(e.test(A)){C=y.getFrameInfo();if(C){z.height=(parseInt(A,10)-C.height)+"px"}}else{if(!A||A==="auto"){z.height=""}}}B.style.height=A}};J.setHeight=function(z,C){var B=this.component,A,y;if(B&&B._syncFrameHeight&&this===B.el){y=B.frameBody.dom.style;if(!z||z==="auto"){y.height=""}else{A=B.getFrameInfo();if(A){y.height=(z-A.height)+"px"}}}return n.call(this,z,C)};J.setSize=function(B,z,D){var C=this.component,A,y;if(C&&C._syncFrameHeight&&this===C.el){y=C.frameBody.dom.style;if(!z||z==="auto"){y.height=""}else{A=C.getFrameInfo();if(A){y.height=(z-A.height)+"px"}}}return f.call(this,B,z,D)}}Ext.getDoc().on("selectstart",function(B,A){var C=I.selectableCls,D=I.unselectableCls,z=A&&A.tagName;z=z&&z.toLowerCase();if(z==="input"||z==="textarea"){return}while(A&&A.nodeType===1&&A!==ab.documentElement){var y=Ext.fly(A);if(y.hasCls(C)){return}if(y.hasCls(D)){B.stopEvent();return}A=A.parentNode}});function q(A,y,B,z){var C=z[this.name]||"";return u.test(C)?"transparent":C}function l(y,A,z){return function(){y.selectionStart=A;y.selectionEnd=z}}function m(C){var E=V.DisplayChangeInputSelectionBug,D=V.DisplayChangeTextAreaSelectionBug,B,z,A,y;if(E||D){B=I.getActiveElement();z=B&&B.tagName;if((D&&z==="TEXTAREA")||(E&&z==="INPUT"&&B.type==="text")){if(Ext.fly(C).isAncestor(B)){A=B.selectionStart;y=B.selectionEnd;if(Ext.isNumber(A)&&Ext.isNumber(y)){return l(B,A,y)}}}}return Ext.emptyFn}function t(A,D,C,E){var z=E.marginRight,y,B;if(z!=="0px"){y=A.style;B=y.display;y.display="inline-block";z=(C?E:A.ownerDocument.defaultView.getComputedStyle(A,null)).marginRight;y.display=B}return z}function v(A,D,B,E){var z=E.marginRight,F,y,C;if(z!=="0px"){F=A.style;y=m(A);C=F.display;F.display="inline-block";z=(B?E:A.ownerDocument.defaultView.getComputedStyle(A,"")).marginRight;F.display=C;y()}return z}if(!V.RightMargin){N.marginRight=N["margin-right"]={name:"marginRight",get:(V.DisplayChangeInputSelectionBug||V.DisplayChangeTextAreaSelectionBug)?v:t}}if(!V.TransparentColor){p=["background-color","border-color","color","outline-color"];for(s=p.length;s--;){x=p[s];g=I.normalize(x);N[x]=N[g]={name:g,get:q}}}J.verticalStyleHooks90=Y=Ext.Object.chain(N);J.verticalStyleHooks270=K=Ext.Object.chain(N);Y.width=N.height||{name:"height"};Y.height=N.width||{name:"width"};Y["margin-top"]={name:"marginLeft"};Y["margin-right"]={name:"marginTop"};Y["margin-bottom"]={name:"marginRight"};Y["margin-left"]={name:"marginBottom"};Y["padding-top"]={name:"paddingLeft"};Y["padding-right"]={name:"paddingTop"};Y["padding-bottom"]={name:"paddingRight"};Y["padding-left"]={name:"paddingBottom"};Y["border-top"]={name:"borderLeft"};Y["border-right"]={name:"borderTop"};Y["border-bottom"]={name:"borderRight"};Y["border-left"]={name:"borderBottom"};K.width=N.height||{name:"height"};K.height=N.width||{name:"width"};K["margin-top"]={name:"marginRight"};K["margin-right"]={name:"marginBottom"};K["margin-bottom"]={name:"marginLeft"};K["margin-left"]={name:"marginTop"};K["padding-top"]={name:"paddingRight"};K["padding-right"]={name:"paddingBottom"};K["padding-bottom"]={name:"paddingLeft"};K["padding-left"]={name:"paddingTop"};K["border-top"]={name:"borderRight"};K["border-right"]={name:"borderBottom"};K["border-bottom"]={name:"borderLeft"};K["border-left"]={name:"borderTop"};if(!Ext.scopeCss){w.push("x-body")}if(V.Touch){w.push("x-touch")}if(Ext.isIE&&Ext.isIE9m){w.push("x-ie","x-ie9m");w.push("x-ie8p");if(Ext.isIE8){w.push("x-ie8")}else{w.push("x-ie9","x-ie9p")}if(Ext.isIE8m){w.push("x-ie8m")}}if(Ext.isIE10){w.push("x-ie10")}if(Ext.isIE10p){w.push("x-ie10p")}if(Ext.isIE11){w.push("x-ie11")}if(Ext.isEdge){w.push("x-edge")}if(Ext.isGecko){w.push("x-gecko")}if(Ext.isOpera){w.push("x-opera")}if(Ext.isOpera12m){w.push("x-opera12m")}if(Ext.isWebKit){w.push("x-webkit")}if(Ext.isSafari){w.push("x-safari")}if(Ext.isChrome){w.push("x-chrome")}if(Ext.isMac){w.push("x-mac")}if(Ext.isLinux){w.push("x-linux")}if(!V.CSS3BorderRadius){w.push("x-nbr")}if(!V.CSS3LinearGradient){w.push("x-nlg")}if(V.Touch){w.push("x-touch")}if(Ext.os.deviceType){w.push("x-"+Ext.os.deviceType.toLowerCase())}Ext.getBody().addCls(w)},null,{priority:1500})});(Ext.cmd.derive("Ext.GlobalEvents",Ext.mixin.Observable,{alternateClassName:"Ext.globalEvents",observableType:"global",singleton:true,resizeBuffer:100,idleEventMask:{mousemove:1,touchmove:1,pointermove:1,MSPointerMove:1,unload:1},constructor:function(){var f=this;f.callParent();Ext.onInternalReady(function(){f.attachListeners()})},attachListeners:function(){Ext.get(window).on("resize",this.fireResize,this,{buffer:this.resizeBuffer});Ext.getDoc().on("mousedown",this.fireMouseDown,this)},fireMouseDown:function(e){this.fireEvent("mousedown",e)},fireResize:function(){var m=this,o=Ext.Element,p=o.getViewportWidth(),n=o.getViewportHeight();if(m.curHeight!==n||m.curWidth!==p){m.curHeight=n;m.curWidth=p;m.fireEvent("resize",p,n)}}},1,0,0,0,0,0,[Ext,"GlobalEvents",Ext,"globalEvents"],function(f){Ext.on=function(){return f.addListener.apply(f,arguments)};Ext.un=function(){return f.removeListener.apply(f,arguments)};Ext.fireEvent=function(){return f.fireEvent.apply(f,arguments)}}));Ext.define("Ext.overrides.GlobalEvents",{override:"Ext.GlobalEvents",deprecated:{5:{methods:{addListener:function(x,u,t,s,y,z,w){var A,v;if(x==="ready"){v=u}else{if(typeof x!=="string"){for(A in x){if(A==="ready"){v=x[A]}}}}if(v){Ext.onReady(v)}this.callParent([x,u,t,s,y,z,w])}}}}});(Ext.cmd.derive("Ext.Glyph",Ext.Base,{isGlyph:true,constructor:function(f){f&&this.setGlyph(f)},setGlyph:function(g){var l;this.glyphConfig=g;if(typeof g==="string"){l=g.split("@");if(isNaN(g=isNaN(l[0])?parseInt("0"+l[0],16):parseInt(l[0],10))||!g){g=l[0].charCodeAt(0)}this.fontFamily=l[1]||Ext._glyphFontFamily}else{this.fontFamily=Ext._glyphFontFamily}this.codepoint=g;this.character=Ext.String.fromCodePoint(this.codepoint);return this},getStyle:function(){return{"font-family":this.fontFamily}},isEqual:function(f){return f&&f.isGlyph&&f.codepoint===this.codepoint&&f.fontFamily===this.fontFamily},statics:(function(){var f;return{fly:function(e){return e.isGlyph?e:(f||(f=new Ext.Glyph())).setGlyph(e)}}})()},1,0,0,0,0,0,[Ext,"Glyph"],0));Ext.USE_NATIVE_JSON=false;Ext.JSON=(new (function(){var me=this,hasNative=window.JSON&&JSON.toString()==="[object JSON]",useHasOwn=!!{}.hasOwnProperty,pad=function(n){return n<10?"0"+n:n},doDecode=function(json){return eval("("+json+")")},doEncode=function(o,newline){if(o===null||o===undefined){return"null"}else{if(Ext.isDate(o)){return me.encodeDate(o)}else{if(Ext.isString(o)){if(Ext.isMSDate(o)){return me.encodeMSDate(o)}else{return me.encodeString(o)}}else{if(typeof o==="number"){return isFinite(o)?String(o):"null"}else{if(Ext.isBoolean(o)){return String(o)}else{if(o.toJSON){return o.toJSON()}else{if(Ext.isArray(o)){return encodeArray(o,newline)}else{if(Ext.isObject(o)){return encodeObject(o,newline)}else{if(typeof o==="function"){return"null"}}}}}}}}}return"undefined"},m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\","\v":"\\u000b"},charToReplace=/[\\\"\x00-\x1f\x7f-\uffff]/g,encodeString=function(s){return'"'+s.replace(charToReplace,function(a){var c=m[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"'},encodeMSDate=function(o){return'"'+o+'"'},encodeArrayPretty=function(o,newline){var len=o.length,cnewline=newline+"   ",sep=","+cnewline,a=["[",cnewline],i;for(i=0;i<len;i+=1){a.push(me.encodeValue(o[i],cnewline),sep)}a[a.length-1]=newline+"]";return a.join("")},encodeObjectPretty=function(o,newline){var cnewline=newline+"   ",sep=","+cnewline,a=["{",cnewline],i,val;for(i in o){val=o[i];if(!useHasOwn||o.hasOwnProperty(i)){if(typeof val==="function"||val===undefined){continue}a.push(me.encodeValue(i)+": "+me.encodeValue(val,cnewline),sep)}}a[a.length-1]=newline+"}";return a.join("")},encodeArray=function(o,newline){if(newline){return encodeArrayPretty(o,newline)}var a=["[",""],len=o.length,i;for(i=0;i<len;i+=1){a.push(me.encodeValue(o[i]),",")}a[a.length-1]="]";return a.join("")},encodeObject=function(o,newline){if(newline){return encodeObjectPretty(o,newline)}var a=["{",""],i,val;for(i in o){val=o[i];if(!useHasOwn||o.hasOwnProperty(i)){if(typeof val==="function"||val===undefined){continue}a.push(me.encodeValue(i),":",me.encodeValue(val),",")}}a[a.length-1]="}";return a.join("")};me.encodeString=encodeString;me.encodeValue=doEncode;me.encodeDate=function(o){return'"'+o.getFullYear()+"-"+pad(o.getMonth()+1)+"-"+pad(o.getDate())+"T"+pad(o.getHours())+":"+pad(o.getMinutes())+":"+pad(o.getSeconds())+'"'};me.encode=function(o){if(hasNative&&Ext.USE_NATIVE_JSON){return JSON.stringify(o)}return me.encodeValue(o)};me.decode=function(json,safe){try{if(hasNative&&Ext.USE_NATIVE_JSON){return JSON.parse(json)}return doDecode(json)}catch(e){if(safe){return null}Ext.raise({sourceClass:"Ext.JSON",sourceMethod:"decode",msg:"You're trying to decode an invalid JSON String: "+json})}};me.encodeMSDate=encodeMSDate;if(!Ext.util){Ext.util={}}Ext.util.JSON=me;Ext.encode=me.encode;Ext.decode=me.decode})());(Ext.cmd.derive("Ext.mixin.Inheritable",Ext.Mixin,{mixinConfig:{id:"inheritable"},getInherited:function(s){var w=this,u=(s&&w.inheritedStateInner)||w.inheritedState,z=w.getRefOwner(),A=w.isContainer,t,y,x,v;if(!u||u.invalid){t=w.getRefOwner();v=w.ownerLayout;if(z){x=v?v===z.layout:true}w.inheritedState=u=Ext.Object.chain(t?t.getInherited(x):Ext.rootInheritedState);if(A){w.inheritedStateInner=y=Ext.Object.chain(u)}w.initInheritedState(u,y);u=(A&&s)?w.inheritedStateInner:w.inheritedState}return u},getInheritedConfig:function(n,s){var o=this.inheritedState,q,p;if(!o||o.invalid){o=this.getInherited()}p=o[n];if(s&&o.hasOwnProperty(n)){q=p;delete o[n];p=o[n];o[n]=q}return p},resolveListenerScope:function(u,t){var p=this,o=(typeof t==="boolean"),q=Ext._namedScopes[u],s;if(!q){s=p.getInheritedConfig("defaultListenerScope",o?t:true)||u||p}else{if(q.isController){s=p.getInheritedConfig("controller",o?t:!q.isSelf)}else{if(q.isSelf){s=p.getInheritedConfig("defaultListenerScope",o&&t)||p}else{if(q.isThis){s=p}}}}return s||null},resolveSatelliteListenerScope:function(p,n){var o=this,q=Ext._namedScopes[n],s;if(!q){s=o.getInheritedConfig("defaultListenerScope")||n||o}else{if(q.isController){s=o.getInheritedConfig("controller")}else{if(q.isSelf){s=o.getInheritedConfig("defaultListenerScope")||p}else{if(q.isThis){s=p}}}}return s||null},lookupReferenceHolder:function(f){return this.getInheritedConfig("referenceHolder",f!==false)||null},getRefOwner:function(){var f=this;return f.ownerCt||f.parent||f.$initParent||f.ownerCmp||f.floatParent},invalidateInheritedState:function(){var f=this.inheritedState;if(f){f.invalid=true;delete this.inheritedState}},privates:{fixReference:function(){var l=this,g;if(l.getReference()){g=l.lookupReferenceHolder();if(g){g.attachReference(l)}}},onInheritedAdd:function(m,n){var l=this;if(l.inheritedState&&n){l.invalidateInheritedState()}if(l.getReference()){Ext.ComponentManager.markReferencesDirty()}},onInheritedRemove:function(m){var n=this,l;if(n.getReference()){l=n.lookupReferenceHolder();if(l){l.clearReference(n)}}if(n.inheritedState&&!m){n.invalidateInheritedState()}}}},0,0,0,0,0,0,[Ext.mixin,"Inheritable"],function(){Ext.rootInheritedState={}}));(Ext.cmd.derive("Ext.mixin.Bindable",Ext.Base,{mixinId:"bindable",config:{bind:{$value:null,lazy:true},controller:null,defaultListenerScope:false,publishes:{$value:null,lazy:true,merge:function(g,l){return this.mergeSets(g,l)}},reference:null,session:{$value:null,lazy:true},twoWayBindable:{$value:null,lazy:true,merge:function(g,l){return this.mergeSets(g,l)}},viewModel:{$value:null,lazy:true}},defaultBindProperty:null,validRefRe:/^[a-z_][a-z0-9_]*$/i,initInheritedState:function(q){var p=this,u=p.getReference(),t=p.getController(),s=p.getConfig("viewModel",true),v=p.getConfig("session",true),w=p.getDefaultListenerScope();if(t){q.controller=t}if(w){q.defaultListenerScope=p}else{if(t){q.defaultListenerScope=t}}if(s){if(!s.isViewModel){s=p}q.viewModel=s}if(v){if(!v.isSession){v=p}q.session=v}if(u){p.referenceKey=(q.referencePath||"")+u;p.viewModelKey=(q.viewModelPath||"")+u}},lookupController:function(f){return this.getInheritedConfig("controller",f)||null},lookupSession:function(l){var g=l?null:this.getSession();if(!g){g=this.getInheritedConfig("session",l);if(g&&!g.isSession){g=g.getInherited().session=g.getSession()}}return g||null},lookupViewModel:function(l){var g=l?null:this.getViewModel();if(!g){g=this.getInheritedConfig("viewModel",l);if(g&&!g.isViewModel){g=g.getInherited().viewModel=g.getViewModel()}}return g||null},publishState:function(E,u){var v=this,B=v.publishedState,y=v.getBind(),w=y&&E&&y[E],x=0,A,C,z,D;if(w&&!w.syncing&&!w.isReadOnly()){if(!(w.calls===0&&(u==null||u===v.getInitialConfig()[E]))){w.setValue(u)}}if(!(C=v.getPublishes())){return}if(!(z=v.lookupViewModel())){return}if(!(D=v.viewModelKey)){return}if(E&&B){if(!C[E]){return}if(!(u&&u.constructor===Object)&&!(u instanceof Array)){if(B[E]===u){return}}D+=".";D+=E}else{B=B||(v.publishedState={});for(A in C){++x;if(A===E){B[A]=u}else{B[A]=v[A]}}if(!x){return}u=B}z.set(D,u)},privates:{addBindableUpdater:function(p){var q=this,o=q.self.$config.configs,s=o[p],n;if(s&&!q.hasOwnProperty(n=s.names.update)){q[n]=s.bindableUpdater||(s.root.bindableUpdater=q.makeBindableUpdater(s))}},applyBind:function(z,C){if(!z){return z}var x=this,u=x.lookupViewModel(),y=x.getTwoWayBindable(),B=x._getBindTemplateScope,w,t,A,v;x.$hasBinds=true;if(!C||typeof C==="string"){C={}}if(Ext.isString(z)){w=z;z={};z[x.defaultBindProperty]=w}for(t in z){A=z[t];w=C[t];if(w&&typeof w!=="string"){w.destroy();w=null;v=true}if(A){w=u.bind(A,x.onBindNotify,x);w._config=Ext.Config.get(t);w.getTemplateScope=B}if(v){delete C[t]}else{C[t]=w}if(y&&y[t]){if(v){x.clearBindableUpdater(t)}else{if(!w.isReadOnly()){x.addBindableUpdater(t)}}}}return C},applyController:function(f){if(f){f=Ext.Factory.controller(f);f.setView(this)}return f},applyPublishes:function(l){if(this.lookupViewModel()){for(var g in l){this.addBindableUpdater(g)}}return l},applySession:function(l){if(!l){return null}if(!l.isSession){var m=this.lookupSession(true),n=(l===true)?{}:l;if(m){l=m.spawn(n)}else{l=new Ext.data.Session(n)}}return l},applyViewModel:function(o){var n=this,p,m;if(!o){return null}if(!o.isViewModel){p={parent:n.lookupViewModel(true),view:n};p.session=n.getSession();if(!m&&!p.parent){p.session=n.lookupSession()}if(o){if(o.constructor===Object){Ext.apply(p,o)}else{if(typeof o==="string"){p.type=o}}}o=Ext.Factory.viewModel(p)}return o},_getBindTemplateScope:function(){return this.scope.resolveListenerScope()},clearBindableUpdater:function(p){var q=this,o=q.self.$config.configs,s=o[p],n;if(s&&q.hasOwnProperty(n=s.names.update)){if(q[n].$bindableUpdater){delete q[n]}}},destroyBindable:function(){var n=this,o=n.getConfig("viewModel",true),m=n.getConfig("session",true),p=n.getController();if(o&&o.isViewModel){o.destroy();n.setViewModel(null)}if(m&&m.isSession){if(m.getAutoDestroy()){m.destroy()}n.setSession(null)}if(p){n.setController(null);p.destroy()}},initBindable:function(){this.initBindable=Ext.emptyFn;this.getBind();this.getPublishes()},makeBindableUpdater:function(n){var l=n.names.update,m=function(p,f){var e=this,g=e.self.prototype[l];if(g){g.call(e,p,f)}e.publishState(n.name,p)};m.$bindableUpdater=true;return m},isSyncing:function(o){var m=this.getBind(),p=false,n;if(m){n=m[o];if(n){p=n.syncing>0}}return p},onBindNotify:function(m,n,l){l.syncing=(l.syncing+1)||1;this[l._config.names.set](m);--l.syncing},removeBindings:function(){var o=this,m,p,n;if(o.$hasBinds){m=o.getBind();if(m&&typeof m!=="string"){for(p in m){n=m[p];n.destroy();n._config=n.getTemplateScope=null}}}o.setBind(null)},updateSession:function(g){var l=this.getInherited();if(g){l.session=g}else{delete l.session}},updateViewModel:function(m){var l=this.getInherited(),n=this.getController();if(m){l.viewModel=m;m.setView(this);if(n){n.initViewModel(m)}}else{delete l.viewModel}}}},0,0,0,0,0,0,[Ext.mixin,"Bindable"],0));(Ext.cmd.derive("Ext.mixin.ComponentDelegation",Ext.Mixin,{mixinConfig:{id:"componentDelegation"},privates:{addDelegatedListener:function(x,v,E,D,z,A,y){var w=this,B,C,u;x=Ext.canonicalEventName(x);z=z||D.order;if(z){u=(D&&D.priority);if(!u){D=D?Ext.Object.chain(D):{};D.priority=w.$orderToPriority[z]}}B=w.$delegatedEvents||(w.$delegatedEvents={});C=B[x]||(B[x]=new Ext.util.Event(w,x));if(C.addListener(v,E,D,A,y)){w.$hasDelegatedListeners._incr_(x)}},clearDelegatedListeners:function(){var o=this,q=o.$delegatedEvents,s,p,n;if(q){for(s in q){p=q[s];n=p.listeners.length;p.clearListeners();o.$hasDelegatedListeners._decr_(s,n);delete q[s]}}},doFireDelegatedEvent:function(t,q){var v=this,s=true,u,p,w;if(v.$hasDelegatedListeners[t]){u=v.getRefOwner();while(u){p=u.$delegatedEvents;if(p){w=p[t];if(w){s=w.fireDelegated(v,q);if(s===false){break}}}u=u.getRefOwner()}}return s},removeDelegatedListener:function(t,p,q){var u=this,s=u.$delegatedEvents,o;if(s){o=s[t];if(o&&o.removeListener(p,q)){u.$hasDelegatedListeners._decr_(t);if(o.listeners.length===0){delete s[t]}}}},destroyComponentDelegation:function(){if(this.clearPropertiesOnDestroy){this.$delegatedEvents=null}}},onClassMixedIn:function(l){function g(){}l.prototype.HasListeners=l.HasListeners=g;g.prototype=l.hasListeners=new Ext.mixin.ComponentDelegation.HasDelegatedListeners()}},0,0,0,0,0,0,[Ext.mixin,"ComponentDelegation"],function(g){function l(){}g.HasDelegatedListeners=l;l.prototype=g.prototype.$hasDelegatedListeners=new Ext.mixin.Observable.HasListeners()}));(Ext.cmd.derive("Ext.mixin.Pluggable",Ext.Base,function(g){var l=[];return{config:{plugins:null},addPlugin:function(e){var f=this,n=f.getPlugins();if(n){e=f.createPlugin(e);e.init(f);n.push(e)}else{f.setPlugins(e)}return e},destroyPlugin:function(e){return this.removePlugin(e,true)},findPlugin:function(u){var n=this.getPlugins(),s=n&&n.length,e,t,f;for(e=0;e<s&&!f;e++){t=n[e];if(t.type===u||t.ptype===u){f=t}}return f||null},getPlugin:function(s){var n=this.getPlugins(),t=n&&n.length,e,u,f;for(e=0;e<t&&!f;e++){u=n[e];if(u.id===s||u.pluginId===s){f=u}}return f||null},removePlugin:function(s,e){var p=this.getPlugins(),f=p&&p.length||0,q;while(f-->0){q=p[f];if(q===s||q.id===s){p.splice(f,1);if(e){if(q.destroy){q.destroy()}}else{if(q.detachCmp){q.detachCmp();if(q.setCmp){q.setCmp(null)}}}break}q=null}return q},privates:{statics:{idSeed:0},activatePlugin:function(v){var u=this,e=u.initialConfig,t=e&&e.plugins,f=null,w,p;if(t){t=l.concat(t);for(w=t.length;w-->0;){p=t[w];if(p===v||p.type===v){u.initialConfig=e=Ext.apply({},e);e.plugins=t;t[w]=f=u.createPlugin(p);break}}}return f},applyPlugins:function(f,s){var t=this,e=s&&s.length||0,u,w,v;f=f?l.concat(f):null;u=f&&f.length||0;for(w=0;w<e;++w){s[w].$dead=true}for(w=0;w<u;++w){f[w]=t.createPlugin(f[w])}for(w=0;w<u;++w){v=f[w];if(v.$dead){delete v.$dead}else{v.init(t)}}for(w=0;w<e;++w){if((v=s[w]).$dead){delete v.$dead;Ext.destroy(v)}}return f},createPlugin:function(e){if(typeof e==="string"){e={type:e}}var f=e;if(!e.isInstance){e.cmp=this;f=Ext.factory(e,null,null,"plugin");delete e.cmp}if(!f.id){f.id=++g.idSeed}if(f.setCmp){f.setCmp(this)}return f}}}},0,0,0,0,0,0,[Ext.mixin,"Pluggable"],0));(Ext.cmd.derive("Ext.Widget",Ext.Evented,{alternateClassName:"Ext.Gadget",isWidget:true,element:{reference:"element"},observableType:"component",cachedConfig:{baseCls:true,cls:null,style:null,border:null,touchAction:null},config:{ui:null,userCls:null},eventedConfig:{width:null,height:null,hidden:null},template:[],classCls:null,classClsRoot:true,clearPropertiesOnDestroy:"async",noBorderCls:"x-noborder-trbl",constructor:function(m){var l=this,n;l.initId(m);l.initElement();l.mixins.observable.constructor.call(l,m);Ext.ComponentManager.register(l);n=l.getController();if(n){n.init(l)}},afterCachedConfig:function(){var u=this,t=u.self.prototype,C=u.referenceList,z=u.renderElement,w,y,x,v,A,B;t.renderTemplate=w=document.createDocumentFragment();w.appendChild(z.clone(true,true));B=w.querySelectorAll("[id]");for(x=0,v=B.length;x<v;x++){y=B[x];y.removeAttribute("id")}for(x=0,v=C.length;x<v;x++){A=C[x];u[A].dom.removeAttribute("reference")}},addCls:function(f){this.el.addCls(f)},applyBaseCls:function(n){var m="x-",l=this.xtype;if(n===true){n=this.classCls||(m+l)}else{if(!n){n=m+l}}return n},applyCls:function(f){if(typeof f=="string"){f=[f]}if(!f||!f.length){f=null}return f},applyHidden:function(f){return !!f},applyTouchAction:function(l,g){if(g!=null){l=Ext.merge({},g,l)}return l},applyWidth:function(f){return this.filterLengthValue(f)},applyHeight:function(f){return this.filterLengthValue(f)},updateBorder:function(f){f=f||f===null;this.el.toggleCls(this.noBorderCls,!f)},clearListeners:function(){var f=this;f.mixins.observable.clearListeners.call(f);f.mixins.componentDelegation.clearDelegatedListeners.call(f)},destroy:function(){var f=this;f.isDestroying=f.destroying=true;f.doDestroy();f.clearListeners();f.isDestroying=f.destroying=false;f.mixins.componentDelegation.destroyComponentDelegation.call(f);Ext.Evented.prototype.destroy.call(this)},doDestroy:function(){var n=this,q=n.referenceList,p,o,s;for(p=0,o=q.length;p<o;p++){s=q[p];if(n.hasOwnProperty(s)){n[s].destroy();n[s]=null}}n.destroyBindable();Ext.ComponentManager.unregister(n)},doFireEvent:function(q,o,s){var n=this,p=n.mixins.observable.doFireEvent.call(n,q,o,s);if(p!==false){p=n.mixins.componentDelegation.doFireDelegatedEvent.call(n,q,o)}return p},getBubbleTarget:function(){return this.getRefOwner()},getElementConfig:function(){var g=this,l=g.element;if(!("children" in l)){l=Ext.apply({children:g.getTemplate()},l)}return l},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getTemplate:function(){return this.template},getClassCls:function(){var o=this.self.prototype,t=o,q,u,s,p;while(t){u=t.classCls;if(u){if(u instanceof Array){for(s=0,p=u.length;s<p;s++){(q||(q=[])).push(u[s])}}else{(q||(q=[])).push(u)}}if(t.classClsRoot&&t.hasOwnProperty("classClsRoot")){break}t=t.superclass}if(q){o.classClsList=q}return q},hide:function(){this.setHidden(true)},initElement:function(){var J=this,I=J.self.prototype,G=J.getId(),H=J.referenceList=J.referenceList=[],E=true,M=!I.hasOwnProperty("renderTemplate"),z,C,A,F,B,K,L,D,y;if(M){E=false;z=document.createDocumentFragment();C=Ext.Element.create(J.processElementConfig.call(I),true);z.appendChild(C)}else{z=J.renderTemplate.cloneNode(true);C=z.firstChild}F=z.querySelectorAll("[reference]");for(B=0,K=F.length;B<K;B++){L=F[B];D=L.getAttribute("reference");if(E){L.removeAttribute("reference")}if(D==="element"){L.id=G;A=J.el=J.addElementReference(D,L);A.dom.setAttribute("data-componentid",G);if(M){y=J.getClassCls();if(y){A.addCls(y)}}}else{J.addElementReferenceOnDemand(D,L)}H.push(D)}if(C===A.dom){J.renderElement=A}else{J.addElementReferenceOnDemand("renderElement",C)}},is:function(f){return Ext.ComponentQuery.is(this,f)},isHidden:function(m){var l=!!this.getHidden(),n;if(!l&&m){n=this.getRefOwner();while(n&&n!==m){l=!!n.getHidden();if(l){break}n=n.getRefOwner()}}return l},isVisible:function(f){return !this.isHidden(f)},isXType:function(g,l){return l?(Ext.Array.indexOf(this.xtypes,g)!==-1):!!this.xtypesMap[g]},lookupTpl:function(f){return Ext.XTemplate.getTpl(this,f)},removeCls:function(f){this.el.removeCls(f)},toggleCls:function(l,g){this.element.toggleCls(l,g)},resolveListenerScope:function(g,l){return this.mixins.inheritable.resolveListenerScope.call(this,g,l)},setSize:function(g,l){if(g&&typeof g==="object"){return this.setSize(g.width,g.height)}if(g!==undefined){this.setWidth(g)}if(l!==undefined){this.setHeight(l)}},show:function(){this.setHidden(false)},updateBaseCls:function(p,o){var m=this,n=m.element;if(o){n.removeCls(o)}if(p){n.addCls(p)}if(!m.isConfiguring){m.syncUiCls()}},updateCls:function(g,l){this.element.replaceCls(l,g)},updateHidden:function(g){var l=this.renderElement;if(l&&!l.destroyed){if(g){l.hide()}else{l.show()}}},applyStyle:function(g,l){if(l&&g===l&&Ext.isObject(l)){g=Ext.apply({},g)}return g},updateStyle:function(f){this.element.applyStyles(f)},updateTouchAction:function(n){var q,s,p,o;for(q in n){s=this[q];p=n[q];if(s&&s.isElement){s.setTouchAction(p)}else{o=true}}if(o){this.el.setTouchAction(n)}},updateUi:function(){this.syncUiCls()},updateWidth:function(f){this.element.setWidth(f)},updateHeight:function(f){this.element.setHeight(f)},up:function(q,p){var s=this.getRefOwner(),t=typeof p==="string",v=typeof p==="number",u=p&&p.isComponent,w=0;if(q){for(;s;s=s.getRefOwner()){w++;if(q.isComponent||q.isWidget){if(s===q){return s}}else{if(Ext.ComponentQuery.is(s,q)){return s}}if(t&&s.is(p)){return}if(v&&w===p){return}if(u&&s===p){return}}}return s},updateLayout:Ext.emptyFn,onFocusEnter:Ext.emptyFn,onFocusLeave:Ext.emptyFn,isAncestor:function(){return false},privates:{addElementReferenceOnDemand:function(l,g){if(this._elementListeners[l]){this.addElementReference(l,g)}else{Ext.Object.defineProperty(this,l,{get:function(){delete this[l];return this.addElementReference(l,g)},configurable:true})}},addElementReference:function(s,p){var w=this,t=w[s]=Ext.get(p),q=w._elementListeners[s],u,v;t.skipGarbageCollection=true;t.component=w;if(q){q=Ext.clone(q);for(u in q){v=q[u];if(typeof v==="object"){v.scope=w}}q.scope=w;t.on(q)}return t},detachFromBody:function(){Ext.getDetachedBody().appendChild(this.element);this.isDetached=true},doAddListener:function(E,I,H,F,C,D,A){var w=this,G=F&&F.element,x=F&&F.delegate,y,B,z;if(G){y={};y[E]=I;if(H){y.scope=H}B=Ext.Element.prototype.$eventOptions;for(z in F){if(B[z]){y[z]=F[z]}}w.mon(w[G],y);return}else{if(x){w.mixins.componentDelegation.addDelegatedListener.call(w,E,I,H,F,C,D,A);return}}Ext.Evented.prototype.doAddListener.call(this,E,I,H,F,C,D,A)},doRemoveListener:function(p,n,o){var m=this;m.mixins.observable.doRemoveListener.call(m,p,n,o);m.mixins.componentDelegation.removeDelegatedListener.call(m,p,n,o)},filterLengthValue:function(f){if(f==="auto"||(!f&&f!==0)){return null}return f},getFocusEl:function(){return this.element},initElementListeners:function(D){var E=this,z=E.self.superclass,A=z._elementListeners,y=D.reference,C=D.children,w,u,B,v,x;if(E.hasOwnProperty("_elementListeners")){w=E._elementListeners}else{w=E._elementListeners=(A?Ext.Object.chain(A):{})}if(y){u=D.listeners;if(u){if(A){B=A[y];if(B){u=Ext.Object.chain(B);Ext.apply(u,D.listeners)}}w[y]=u;D.listeners=null}}if(C){for(x=0,v=C.length;x<v;x++){E.initElementListeners(C[x])}}},initId:function(o){var n=this,p=n.config,m=(o&&o.id)||(p&&p.id);if(m){n.setId(m);n.id=m}else{n.getId()}},processElementConfig:function(){var n=this,l=n.self.superclass,m;if(n.hasOwnProperty("_elementConfig")){m=n._elementConfig}else{m=n._elementConfig=n.getElementConfig();if(l.isWidget){n.processElementConfig.call(l)}n.initElementListeners(m)}return m},reattachToBody:function(){this.isDetached=false},addUi:function(u){var p=this,o=p.getUi(),q,s,t;if(u){u=u.split(" ");t=u.length;o=(o&&o.split(" "))||[];for(q=0;q<t;q++){s=u[q];if(o.indexOf(s)===-1){o.push(s)}}p.setUi(o.join(" "))}},removeUi:function(v){var p=this,w=p.getUi(),q,t,s,u;if(v){v=v.split(" ");u=v.length;w=(w&&w.split(" "))||[];for(q=0;q<u;q++){t=v[q];s=w.indexOf(t);if(s!==-1){w.splice(s,1)}}p.setUi(w.join(" "))}},syncUiCls:function(){var G=this,F=G.getUi(),y=G.currentUiCls,z=G.element,x=G.getBaseCls(),E=G.classClsList,A=[],D,B,w,C,v;if(y){z.removeCls(y)}if(F){F=F.split(" ");for(B=0,w=F.length;B<w;B++){D="-"+F[B];if(x&&(x!==G.classCls)){A.push(x+D)}if(E){for(C=0,v=E.length;C<v;C++){A.push(E[C]+D)}}}z.addCls(A);G.currentUiCls=A}},updateUserCls:function(g,l){this.element.replaceCls(l,g)}}},1,["widget"],["widget"],{widget:true},["widget.widget"],[[Ext.mixin.Inheritable.prototype.mixinId||Ext.mixin.Inheritable.$className,Ext.mixin.Inheritable],[Ext.mixin.Bindable.prototype.mixinId||Ext.mixin.Bindable.$className,Ext.mixin.Bindable],[Ext.mixin.ComponentDelegation.prototype.mixinId||Ext.mixin.ComponentDelegation.$className,Ext.mixin.ComponentDelegation],[Ext.mixin.Pluggable.prototype.mixinId||Ext.mixin.Pluggable.$className,Ext.mixin.Pluggable]],[Ext,"Widget",Ext,"Gadget"],function(g){var l=g.prototype;(l.$elementEventOptions=Ext.Object.chain(Ext.Element.prototype.$eventOptions)).element=1;(l.$eventOptions=Ext.Object.chain(l.$eventOptions)).delegate=1}));Ext.define("Ext.overrides.Widget",{override:"Ext.Widget",$configStrict:false,isComponent:true,liquidLayout:true,rendered:true,rendering:true,config:{renderTo:null},constructor:function(n){var m=this,l;(arguments.callee.$previous||Ext.Evented.prototype.constructor).call(this,n);m.getComponentLayout();l=m.getRenderTo();if(l){m.render(l)}},addClsWithUI:function(f){this.el.addCls(f)},afterComponentLayout:Ext.emptyFn,updateLayout:function(){var f=this.getRefOwner();if(f){f.updateLayout()}},destroy:function(){var g=this,l=g.ownerCt;if(l&&l.remove){l.remove(g,false)}(arguments.callee.$previous||Ext.Evented.prototype.destroy).call(this)},finishRender:function(){this.rendering=false;this.initBindable()},getAnimationProps:function(){return{}},getComponentLayout:function(){var g=this,l=g.componentLayout;if(!l){l=g.componentLayout=new Ext.layout.component.Auto();l.setOwner(g)}return l},getEl:function(){return this.element},getTdCls:function(){return"x-"+this.getTdType()+"-"+(this.ui||"default")+"-cell"},getTdType:function(){return this.xtype},getItemId:function(){return this.itemId||this.id},getSizeModel:function(){return Ext.Component.prototype.getSizeModel.apply(this,arguments)},onAdded:function(o,m,p){var n=this;n.ownerCt=o;n.onInheritedAdd(n,p)},onRemoved:function(g){var l=this;if(!g){l.removeBindings()}l.onInheritedRemove(g);l.ownerCt=l.ownerLayout=null},parseBox:function(f){return Ext.Element.parseBox(f)},removeClsWithUI:function(f){this.el.removeCls(f)},render:function(s,t){var o=this,q=o.element,p=Ext.Component.prototype,u;if(!o.ownerCt||o.floating){if(Ext.scopeCss){q.addCls(p.rootCls)}q.addCls(p.borderBoxCls)}if(t){u=s.childNodes[t];if(u){Ext.fly(s).insertBefore(q,u);return}}Ext.fly(s).appendChild(q)},setPosition:function(l,g){this.el.setLocalXY(l,g)},up:function(){return Ext.Component.prototype.up.apply(this,arguments)},isAncestor:function(){return Ext.Component.prototype.isAncestor.apply(this,arguments)},onFocusEnter:function(){return Ext.Component.prototype.onFocusEnter.apply(this,arguments)},onFocusLeave:function(){return Ext.Component.prototype.onFocusLeave.apply(this,arguments)},isLayoutChild:function(g){var l=this.ownerCt;return l?(l===g||l.isLayoutChild(g)):false},privates:{doAddListener:function(q,v,w,s,u,t,p){if(q=="painted"||q=="resize"){this.element.doAddListener(q,v,w||this,s,u)}(arguments.callee.$previous||Ext.Evented.prototype.doAddListener).call(this,q,v,w,s,u,t,p)},doRemoveListener:function(n,l,m){if(n=="painted"||n=="resize"){this.element.doRemoveListener(n,l,m)}(arguments.callee.$previous||Ext.Evented.prototype.doRemoveListener).call(this,n,l,m)}}},function(g){var l=g.prototype;if(Ext.isIE9m){l.addElementReferenceOnDemand=l.addElementReference}});(Ext.cmd.derive("Ext.ProgressBase",Ext.Base,{mixinId:"progressbase",config:{value:0,textTpl:null},applyTextTpl:function(f){if(!f.isTemplate){f=new Ext.XTemplate(f)}return f},applyValue:function(f){return f||0}},0,0,0,0,0,0,[Ext,"ProgressBase"],0));(Ext.cmd.derive("Ext.util.Format",Ext.Base,function(){var f;return{singleton:true,defaultDateFormat:"m/d/Y",thousandSeparator:",",decimalSeparator:".",currencyPrecision:2,currencySign:"$",currencySpacer:"",percentSign:"%",currencyAtEnd:false,stripTagsRe:/<\/?[^>]+>/gi,stripScriptsRe:/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,nl2brRe:/\r?\n/g,hashRe:/#+$/,allHashes:/^#+$/,formatPattern:/[\d,\.#]+/,formatCleanRe:/[^\d\.#]/g,I18NFormatCleanRe:null,formatFns:{},constructor:function(){f=this},nbsp:function(e,l){l=l!==false;if(l?e===""||e==null:!e){e="\xa0"}return e},undef:function(e){return e!==undefined?e:""},defaultValue:function(e,l){return e!==undefined&&e!==""?e:l},substr:"ab".substr(-1)!="b"?function(o,e,p){var n=String(o);return(e<0)?n.substr(Math.max(n.length+e,0),p):n.substr(e,p)}:function(m,e,n){return String(m).substr(e,n)},lowercase:function(e){return String(e).toLowerCase()},uppercase:function(e){return String(e).toUpperCase()},usMoney:function(e){return f.currency(e,"$",2)},currency:function(s,y,t,v,u){var w="",x=",0",e=0;s=s-0;if(s<0){s=-s;w="-"}t=Ext.isDefined(t)?t:f.currencyPrecision;x+=(t>0?".":"");for(;e<t;e++){x+="0"}s=f.number(s,x);if(u==null){u=f.currencySpacer}if((v||f.currencyAtEnd)===true){return Ext.String.format("{0}{1}{2}{3}",w,s,u,y||f.currencySign)}else{return Ext.String.format("{0}{1}{2}{3}",w,y||f.currencySign,u,s)}},date:function(l,e){if(!l){return""}if(!Ext.isDate(l)){l=new Date(Date.parse(l))}return Ext.Date.dateFormat(l,e||Ext.Date.defaultFormat)},dateRenderer:function(e){return function(l){return f.date(l,e)}},hex:function(e,m){var n=parseInt(e||0,10).toString(16);if(m){if(m<0){m=-m;if(n.length>m){n=n.substring(n.length-m)}}while(n.length<m){n="0"+n}}return n},or:function(e,l){return e||l},pick:function(n,o,e){if(Ext.isNumber(n)){var p=arguments[n+1];if(p){return p}}return n?e:o},lessThanElse:function(w,t,v,u,x){var s=Ext.Number.from(w,0),y=Ext.Number.from(t,0),e=!Ext.isDefined(x);return s<y?v:(s>y?u:(e?u:x))},sign:function(e,o,p,n){if(n===undefined){n=p}return f.lessThanElse(e,0,o,p,n)},stripTags:function(e){return !e?e:String(e).replace(f.stripTagsRe,"")},stripScripts:function(e){return !e?e:String(e).replace(f.stripScriptsRe,"")},fileSize:(function(){var n=1024,m=1048576,e=1073741824;return function(l){var g;if(l<n){if(l===1){g="1 byte"}else{g=l+" bytes"}}else{if(l<m){g=(Math.round(((l*10)/n))/10)+" KB"}else{if(l<e){g=(Math.round(((l*10)/m))/10)+" MB"}else{g=(Math.round(((l*10)/e))/10)+" GB"}}}return g}})(),math:(function(){var e={};return function(m,n){if(!e[n]){e[n]=Ext.functionFactory("v","return v "+n+";")}return e[n](m)}}()),round:function(e,m){var n=Number(e);if(typeof m==="number"){m=Math.pow(10,m);n=Math.round(e*m)/m}else{if(m===undefined){n=Math.round(n)}}return n},number:function(I,A){if(!A){return I}if(isNaN(I)){return""}var B=f.formatFns[A];if(!B){var e=A,F=f.thousandSeparator,H=f.decimalSeparator,z=0,C="",D,K,J,G,E,v;if(A.substr(A.length-2)==="/i"){if(!f.I18NFormatCleanRe||f.lastDecimalSeparator!==H){f.I18NFormatCleanRe=new RegExp("[^\\d\\"+H+"#]","g");f.lastDecimalSeparator=H}A=A.substr(0,A.length-2);D=A.indexOf(F)!==-1;K=A.replace(f.I18NFormatCleanRe,"").split(H)}else{D=A.indexOf(",")!==-1;K=A.replace(f.formatCleanRe,"").split(".")}J=A.replace(f.formatPattern,"");if(K.length>2){}else{if(K.length===2){z=K[1].length;G=K[1].match(f.hashRe);if(G){v=G[0].length;C='trailingZeroes=new RegExp(Ext.String.escapeRegex(utilFormat.decimalSeparator) + "*0{0,'+v+'}$")'}}}E=["var utilFormat=Ext.util.Format,extNumber=Ext.Number,neg,absVal,fnum,parts"+(D?",thousandSeparator,thousands=[],j,n,i":"")+(J?',formatString="'+A+'",formatPattern=/[\\d,\\.#]+/':"")+',trailingZeroes;return function(v){if(typeof v!=="number"&&isNaN(v=extNumber.from(v,NaN)))return"";neg=v<0;',"absVal=Math.abs(v);","fnum=Ext.Number.toFixed(absVal, "+z+");",C,";"];if(D){if(z){E[E.length]='parts=fnum.split(".");';E[E.length]="fnum=parts[0];"}E[E.length]="if(absVal>=1000) {";E[E.length]="thousandSeparator=utilFormat.thousandSeparator;thousands.length=0;j=fnum.length;n=fnum.length%3||3;for(i=0;i<j;i+=n){if(i!==0){n=3;}thousands[thousands.length]=fnum.substr(i,n);}fnum=thousands.join(thousandSeparator);}";if(z){E[E.length]="fnum += utilFormat.decimalSeparator+parts[1];"}}else{if(z){E[E.length]='if(utilFormat.decimalSeparator!=="."){parts=fnum.split(".");fnum=parts[0]+utilFormat.decimalSeparator+parts[1];}'}}E[E.length]='if(neg&&fnum!=="'+(z?"0."+Ext.String.repeat("0",z):"0")+'") { fnum="-"+fnum; }';if(G){E[E.length]='fnum=fnum.replace(trailingZeroes,"");'}E[E.length]="return ";if(J){E[E.length]="formatString.replace(formatPattern, fnum);"}else{E[E.length]="fnum;"}E[E.length]="};";B=f.formatFns[e]=Ext.functionFactory("Ext",E.join(""))(Ext)}return B(I)},numberRenderer:function(e){return function(l){return f.number(l,e)}},percent:function(e,l){return f.number(e*100,l||"0")+f.percentSign},attributes:function(m){if(typeof m==="object"){var n=[],e;for(e in m){if(m.hasOwnProperty(e)){n.push(e,'="',e==="style"?Ext.DomHelper.generateStyles(m[e],null,true):Ext.htmlEncode(m[e]),'" ')}}m=n.join("")}return m||""},plural:function(e,m,n){return e+" "+(e===1?m:(n?n:m+"s"))},nl2br:function(e){return Ext.isEmpty(e)?"":e.replace(f.nl2brRe,"<br/>")},capitalize:Ext.String.capitalize,uncapitalize:Ext.String.uncapitalize,ellipsis:Ext.String.ellipsis,escape:Ext.String.escape,escapeRegex:Ext.String.escapeRegex,htmlDecode:Ext.String.htmlDecode,htmlEncode:Ext.String.htmlEncode,leftPad:Ext.String.leftPad,toggle:Ext.String.toggle,trim:Ext.String.trim,parseBox:function(m){m=m||0;if(typeof m==="number"){return{top:m,right:m,bottom:m,left:m}}var e=m.split(" "),n=e.length;if(n===1){e[1]=e[2]=e[3]=e[0]}else{if(n===2){e[2]=e[0];e[3]=e[1]}else{if(n===3){e[3]=e[1]}}}return{top:parseInt(e[0],10)||0,right:parseInt(e[1],10)||0,bottom:parseInt(e[2],10)||0,left:parseInt(e[3],10)||0}},uri:function(e){return encodeURI(e)},uriCmp:function(e){return encodeURIComponent(e)},wordBreakRe:/[\W\s]+/,word:function(e,p,q){var o=q?(typeof q==="string"?new RegExp(q):q):f.wordBreakRe,s=(e||"").split(o);return s[p||0]||""}}},1,0,0,0,0,0,[Ext.util,"Format"],0));(Ext.cmd.derive("Ext.Template",Ext.Base,{inheritableStatics:{from:function(g,l){g=Ext.getDom(g);return new this(g.value||g.innerHTML,l||"")}},useEval:Ext.isGecko,constructor:function(q){var w=this,t=arguments,u=[],s,p=t.length,v;w.initialConfig={};if(p===1&&Ext.isArray(q)){t=q;p=t.length}if(p>1){for(s=0;s<p;s++){v=t[s];if(typeof v==="object"){Ext.apply(w.initialConfig,v);Ext.apply(w,v)}else{u.push(v)}}}else{u.push(q)}w.html=u.join("")},isTemplate:true,disableFormats:false,tokenRe:/\{(?:(?:(\d+)|([a-z_][\w\-]*))(?::([a-z_\.]+)(?:\(([^\)]*?)?\))?)?)\}/gi,apply:function(l){var g=this;if(g.compiled){if(!g.fn){g.compile()}return g.fn(l).join("")}return g.evaluate(l)},evaluate:function(t){var u=this,q=!u.disableFormats,o=Ext.util.Format,s=u;function p(f,g,l,e,m){if(l==null||l===""){l=g}if(e&&q){if(m){m=[t[l]].concat(Ext.functionFactory("return ["+m+"];")())}else{m=[t[l]]}if(e.substr(0,5)==="this."){return s[e.substr(5)].apply(s,m)}else{if(o[e]){return o[e].apply(o,m)}else{return f}}}else{return t[l]!==undefined?t[l]:""}}return u.html.replace(u.tokenRe,p)},applyOut:function(n,m){var l=this;if(l.compiled){if(!l.fn){l.compile()}m.push.apply(m,l.fn(n))}else{m.push(l.apply(n))}return m},applyTemplate:function(){return this.apply.apply(this,arguments)},set:function(n,l){var m=this;m.html=n;m.compiled=!!l;m.fn=null;return m},compileARe:/\\/g,compileBRe:/(\r\n|\n)/g,compileCRe:/'/g,compile:function(){var g=this,l;l=g.html.replace(g.compileARe,"\\\\").replace(g.compileBRe,"\\n").replace(g.compileCRe,"\\'").replace(g.tokenRe,g.regexReplaceFn.bind(g));l=(this.disableFormats!==true?"var fm=Ext.util.Format;":"")+(g.useEval?"$=":"return")+" function(v){return ['"+l+"'];};";g.fn=g.useEval?g.evalCompiled(l):(new Function("Ext",l))(Ext);g.compiled=true;return g},evalCompiled:function($){eval($);return $},regexReplaceFn:function(o,p,q,n,s){if(p==null||p===""){p='"'+q+'"'}else{if(this.stringFormat){p=parseInt(p)+1}}if(n&&this.disableFormats!==true){s=s?","+s:"";if(n.substr(0,5)==="this."){n=n+"("}else{if(Ext.util.Format[n]){n="fm."+n+"("}else{return o}}return"',"+n+"v["+p+"]"+s+"),'"}else{return"',v["+p+"] == undefined ? '' : v["+p+"],'"}},insertFirst:function(m,n,l){return this.doInsert("afterBegin",m,n,l)},insertBefore:function(m,n,l){return this.doInsert("beforeBegin",m,n,l)},insertAfter:function(m,n,l){return this.doInsert("afterEnd",m,n,l)},append:function(m,n,l){return this.doInsert("beforeEnd",m,n,l)},doInsert:function(q,o,s,n){var p=Ext.DomHelper.insertHtml(q,Ext.getDom(o),this.apply(s));return n?Ext.get(p):p},overwrite:function(n,p,m){var o=Ext.DomHelper.overwrite(Ext.getDom(n),this.apply(p));return m?Ext.get(o):o}},1,0,0,0,0,0,[Ext,"Template"],function(o){var p=/\{\d+\}/,s=function(e){if(p.test(e)){e=new o(e,q);return function(){return e.apply(arguments)}}else{return function(){return e}}},q={useFormat:false,compiled:true,stringFormat:true},n={};Ext.String.format=Ext.util.Format.format=function(e){var f=n[e]||(n[e]=s(e));return f.apply(this,arguments)};Ext.String.formatEncode=function(){return Ext.String.htmlEncode(Ext.String.format.apply(this,arguments))}}));(Ext.cmd.derive("Ext.util.XTemplateParser",Ext.Base,{constructor:function(f){Ext.apply(this,f)},doTpl:Ext.emptyFn,parse:function(t){var I=this,N=t.length,m={elseif:"elif"},L=I.topRe,S=I.actionsRe,Q,R,H,s,O,G,M,J,K,T,P,U,F;I.level=0;I.stack=R=[];for(Q=0;Q<N;Q=T){L.lastIndex=Q;s=L.exec(t);if(!s){I.doText(t.substring(Q,N));break}K=s.index;T=L.lastIndex;if(Q<K){H=t.substring(Q,K);if(!(F&&Ext.String.trim(H)==="")){I.doText(H)}}F=false;if(s[1]){T=t.indexOf("%}",K+2);I.doEval(t.substring(K+2,T));T+=2}else{if(s[2]){T=t.indexOf("]}",K+2);I.doExpr(t.substring(K+2,T));T+=2}else{if(s[3]){I.doTag(s[3])}else{if(s[4]){P=null;while((J=S.exec(s[4]))!==null){H=J[2]||J[3];if(H){H=Ext.String.htmlDecode(H);O=J[1];O=m[O]||O;P=P||{};G=P[O];if(typeof G=="string"){P[O]=[G,H]}else{if(G){P[O].push(H)}else{P[O]=H}}}}if(!P){if(I.elseRe.test(s[4])){I.doElse()}else{if(I.defaultRe.test(s[4])){I.doDefault()}else{I.doTpl();R.push({type:"tpl"})}}}else{if(P["if"]){I.doIf(P["if"],P);R.push({type:"if"})}else{if(P["switch"]){I.doSwitch(P["switch"],P);R.push({type:"switch"});F=true}else{if(P["case"]){I.doCase(P["case"],P)}else{if(P.elif){I.doElseIf(P.elif,P)}else{if(P["for"]){++I.level;if(U=I.propRe.exec(s[4])){P.propName=U[1]||U[2]}I.doFor(P["for"],P);R.push({type:"for",actions:P})}else{if(P.foreach){++I.level;if(U=I.propRe.exec(s[4])){P.propName=U[1]||U[2]}I.doForEach(P.foreach,P);R.push({type:"foreach",actions:P})}else{if(P.exec){I.doExec(P.exec,P);R.push({type:"exec",actions:P})}}}}}}}}}else{if(s[0].length===5){R.push({type:"tpl"})}else{M=R.pop();I.doEnd(M.type,M.actions);if(M.type=="for"||M.type=="foreach"){--I.level}}}}}}}},topRe:/(?:(\{\%)|(\{\[)|\{([^{}]+)\})|(?:<tpl([^>]*)\>)|(?:<\/tpl>)/g,actionsRe:/\s*(elif|elseif|if|for|foreach|exec|switch|case|eval|between)\s*\=\s*(?:(?:"([^"]*)")|(?:'([^']*)'))\s*/g,propRe:/prop=(?:(?:"([^"]*)")|(?:'([^']*)'))/,defaultRe:/^\s*default\s*$/,elseRe:/^\s*else\s*$/},1,0,0,0,0,0,[Ext.util,"XTemplateParser"],0));(Ext.cmd.derive("Ext.util.XTemplateCompiler",Ext.util.XTemplateParser,{useEval:Ext.isGecko,useIndex:Ext.isIE8m,useFormat:true,propNameRe:/^[\w\d\$]*$/,compile:function(n){var l=this,m=l.generate(n);return l.useEval?l.evalTpl(m):(new Function("Ext",m))(Ext)},generate:function(p){var m=this,o="var fm=Ext.util.Format,ts=Object.prototype.toString;",n;m.maxLevel=0;m.body=["var c0=values, a0="+m.createArrayTest(0)+", p0=parent, n0=xcount, i0=xindex, k0, v;\n"];if(m.definitions){if(typeof m.definitions==="string"){m.definitions=[m.definitions,o]}else{m.definitions.push(o)}}else{m.definitions=[o]}m.switches=[];m.parse(p);m.definitions.push((m.useEval?"$=":"return")+" function ("+m.fnArgs+") {",m.body.join(""),"}");n=m.definitions.join("\n");m.definitions.length=m.body.length=m.switches.length=0;delete m.definitions;delete m.body;delete m.switches;return n},doText:function(l){var m=this,n=m.body;l=l.replace(m.aposRe,"\\'").replace(m.newLineRe,"\\n");if(m.useIndex){n.push("out[out.length]='",l,"'\n")}else{n.push("out.push('",l,"')\n")}},doExpr:function(g){var l=this.body;l.push("if ((v="+g+") != null) out");if(this.useIndex){l.push("[out.length]=v+''\n")}else{l.push(".push(v+'')\n")}},doTag:function(l){var g=this.parseTag(l);if(g){this.doExpr(g)}else{this.doText("{"+l+"}")}},doElse:function(){this.body.push("} else {\n")},doEval:function(f){this.body.push(f,"\n")},doIf:function(m,l){var n=this;if(m==="."){n.body.push("if (values) {\n")}else{if(n.propNameRe.test(m)){n.body.push("if (",n.parseTag(m),") {\n")}else{n.body.push("if (",n.addFn(m),n.callFn,") {\n")}}if(l.exec){n.doExec(l.exec)}},doElseIf:function(m,l){var n=this;if(m==="."){n.body.push("else if (values) {\n")}else{if(n.propNameRe.test(m)){n.body.push("} else if (",n.parseTag(m),") {\n")}else{n.body.push("} else if (",n.addFn(m),n.callFn,") {\n")}}if(l.exec){n.doExec(l.exec)}},doSwitch:function(l){var m=this,n;if(l==="."||l==="#"){n=l==="."?"values":"xindex";m.body.push("switch (",n,") {\n")}else{if(m.propNameRe.test(l)){m.body.push("switch (",m.parseTag(l),") {\n")}else{m.body.push("switch (",m.addFn(l),m.callFn,") {\n")}}m.switches.push(0)},doCase:function(n){var p=this,q=Ext.isArray(n)?n:[n],u=p.switches.length-1,t,s;if(p.switches[u]){p.body.push("break;\n")}else{p.switches[u]++}for(s=0,u=q.length;s<u;++s){t=p.intRe.exec(q[s]);q[s]=t?t[1]:("'"+q[s].replace(p.aposRe,"\\'")+"'")}p.body.push("case ",q.join(": case "),":\n")},doDefault:function(){var l=this,g=l.switches.length-1;if(l.switches[g]){l.body.push("break;\n")}else{l.switches[g]++}l.body.push("default:\n")},doEnd:function(o,m){var n=this,p=n.level-1;if(o=="for"||o=="foreach"){if(m.exec){n.doExec(m.exec)}n.body.push("}\n");n.body.push("parent=p",p,";values=r",p+1,";xcount=n"+p+";xindex=i",p,"+1;xkey=k",p,";\n")}else{if(o=="if"||o=="switch"){n.body.push("}\n")}}},doFor:function(p,v){var q=this,s,t=q.level,u=t-1,w;if(p==="."){s="values"}else{if(q.propNameRe.test(p)){s=q.parseTag(p)}else{s=q.addFn(p)+q.callFn}}if(q.maxLevel<t){q.maxLevel=t;q.body.push("var ")}if(p=="."){w="c"+t}else{w="a"+u+"?c"+u+"[i"+u+"]:c"+u}q.body.push("i",t,"=0,n",t,"=0,c",t,"=",s,",a",t,"=",q.createArrayTest(t),",r",t,"=values,p",t,",k",t,";\n","p",t,"=parent=",w,"\n","if (c",t,"){if(a",t,"){n",t,"=c",t,".length;}else if (c",t,".isMixedCollection){c",t,"=c",t,".items;n",t,"=c",t,".length;}else if(c",t,".isStore){c",t,"=c",t,".data.items;n",t,"=c",t,".length;}else{c",t,"=[c",t,"];n",t,"=1;}}\n","for (xcount=n",t,";i",t,"<n"+t+";++i",t,"){\n","values=c",t,"[i",t,"]");if(v.propName){q.body.push(".",v.propName)}q.body.push("\n","xindex=i",t,"+1\n");if(v.between){q.body.push('if(xindex>1){ out.push("',v.between,'"); } \n')}},doForEach:function(p,v){var q=this,s,t=q.level,u=t-1,w;if(p==="."){s="values"}else{if(q.propNameRe.test(p)){s=q.parseTag(p)}else{s=q.addFn(p)+q.callFn}}if(q.maxLevel<t){q.maxLevel=t;q.body.push("var ")}if(p=="."){w="c"+t}else{w="a"+u+"?c"+u+"[i"+u+"]:c"+u}q.body.push("i",t,"=-1,n",t,"=0,c",t,"=",s,",a",t,"=",q.createArrayTest(t),",r",t,"=values,p",t,",k",t,";\n","p",t,"=parent=",w,"\n","for(k",t," in c",t,"){\n","xindex=++i",t,"+1;\n","xkey=k",t,";\n","values=c",t,"[k",t,"];");if(v.propName){q.body.push(".",v.propName)}if(v.between){q.body.push('if(xindex>1){ out.push("',v.between,'"); } \n')}},createArrayTest:("isArray" in Array)?function(f){return"Array.isArray(c"+f+")"}:function(f){return"ts.call(c"+f+')==="[object Array]"'},doExec:function(o,n){var p=this,s="f"+p.definitions.length,q=p.guards[p.strict?0:1];p.definitions.push("function "+s+"("+p.fnArgs+") {",q.doTry," var $v = values; with($v) {","  "+o," }",q.doCatch,"}");p.body.push(s+p.callFn+"\n")},guards:[{doTry:"",doCatch:""},{doTry:"try { ",doCatch:" } catch(e) {\n}"}],addFn:function(p){var m=this,o="f"+m.definitions.length,n=m.guards[m.strict?0:1];if(p==="."){m.definitions.push("function "+o+"("+m.fnArgs+") {"," return values","}")}else{if(p===".."){m.definitions.push("function "+o+"("+m.fnArgs+") {"," return parent","}")}else{m.definitions.push("function "+o+"("+m.fnArgs+") {",n.doTry," var $v = values; with($v) {","  return("+p+")"," }",n.doCatch,"}")}}return o},parseTag:function(u){var w=this,v=w.tagRe.exec(u),y,t,m,x,s;if(!v){return null}y=v[1];t=v[2];m=v[3];x=v[4];if(y=="."){if(!w.validTypes){w.definitions.push("var validTypes={string:1,number:1,boolean:1};");w.validTypes=true}s='validTypes[typeof values] || ts.call(values) === "[object Date]" ? values : ""'}else{if(y=="#"){s="xindex"}else{if(y=="$"){s="xkey"}else{if(y.substr(0,7)=="parent."){s=y}else{if(isNaN(y)&&y.indexOf("-")==-1&&y.indexOf(".")!=-1){s="values."+y}else{s="values['"+y+"']"}}}}}if(x){s="("+s+x+")"}if(t&&w.useFormat){m=m?","+m:"";if(t.substr(0,5)!="this."){t="fm."+t+"("}else{t+="("}}else{return s}return t+s+m+")"},evalTpl:function($){eval($);return $},newLineRe:/\r\n|\r|\n/g,aposRe:/[']/g,intRe:/^\s*(\d+)\s*$/,tagRe:/^([\w-\.\#\$]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\/]\s?[\d\.\+\-\*\/\(\)]+)?$/},0,0,0,0,0,0,[Ext.util,"XTemplateCompiler"],function(){var f=this.prototype;f.fnArgs="out,values,parent,xindex,xcount,xkey";f.callFn=".call(this,"+f.fnArgs+")"}));(Ext.cmd.derive("Ext.XTemplate",Ext.Template,{isXTemplate:true,emptyObj:{},fn:null,strict:false,apply:function(p,o,n,m){return this.applyOut(p,[],o,n,m).join("")},applyOut:function(v,t,e,x,u){var y=this,s;if(!y.fn){s=new Ext.util.XTemplateCompiler({useFormat:y.disableFormats!==true,definitions:y.definitions,strict:y.strict});y.fn=s.compile(y.html)}x=x||1;u=u||1;if(y.strict){y.fn(t,v,e||y.emptyObj,x,u)}else{try{y.fn(t,v,e||y.emptyObj,x,u)}catch(w){}}return t},compile:function(){return this},statics:{getTpl:function(o,m){var n=o[m],p;if(n&&!n.isTemplate){n=Ext.ClassManager.dynInstantiate("Ext.XTemplate",n);if(o.hasOwnProperty(m)){p=o}else{for(p=o.self.prototype;p&&!p.hasOwnProperty(m);p=p.superclass){}}p[m]=n;n.owner=p}return n||null}}},0,0,0,0,0,0,[Ext,"XTemplate"],0));(Ext.cmd.derive("Ext.app.EventDomain",Ext.Base,{statics:{instances:{}},isEventDomain:true,isInstance:false,constructor:function(){var f=this;if(!f.isInstance){Ext.app.EventDomain.instances[f.type]=f}f.bus={};f.monitoredClasses=[]},dispatch:function(y,I,K){I=Ext.canonicalEventName(I);var J=this,x=J.bus,H=x[I],B,D,E,C,G,z,A,F;if(!H){return true}for(B in H){if(H.hasOwnProperty(B)&&J.match(y,B,J.controller)){D=H[B];for(E in D){if(D.hasOwnProperty(E)){C=D[E];if(C.controller.isActive()){G=C.list;z=G.length;for(A=0;A<z;A++){F=G[A];if(F.fire.apply(F,K)===false){return false}}}}}}}return true},listen:function(V,J){var M=this,K=M.bus,S=M.idProperty,R=M.monitoredClasses,U=R.length,L=J.getId(),N=(M.type==="component"),G=N?J.getRefMap():null,E,P,Q,F,X,W,Y,H,I,O,T;for(F in V){I=V[F];if(N){F=G[F]||F}if(I){if(S){F=F==="*"?F:F.substring(1)}for(O in I){X=null;W=I[O];Y=J;O=Ext.canonicalEventName(O);H=new Ext.util.Event(J,O);if(Ext.isObject(W)){X=W;W=X.fn;Y=X.scope||J;delete X.fn;delete X.scope}if(typeof W==="string"){W=Y[W]}H.addListener(W,Y,X);for(E=0;E<U;++E){T=R[E].hasListeners;if(T){T._incr_(O)}}P=K[O]||(K[O]={});P=P[F]||(P[F]={});Q=P[L]||(P[L]={controller:J,list:[]});Q.list.push(H)}}}},match:function(l,n){var m=this.idProperty;if(m){return n==="*"||l[m]===n}return false},monitor:function(n){var o=this,p=n.isInstance?n:n.prototype,m=p.doFireEvent;o.monitoredClasses.push(n);p.doFireEvent=function(f,l){var g=this,e;e=m.apply(g,arguments);if(e!==false&&!g.destroyed&&!g.isSuspended(f)){e=o.dispatch(g,f,l)}return e}},unlisten:function(E){var N=this.bus,H=E,J=this.monitoredClasses,z=J.length,G,M,I,O,K,D,L,A,B,F,C;if(E.isController){H=E.getId()}for(M in N){M=Ext.canonicalEventName(M);if(N.hasOwnProperty(M)&&(L=N[M])){for(D in L){G=L[D];F=G[H];if(F){I=F.list;if(I){for(A=0,O=I.length;A<O;++A){K=I[A];K.clearListeners();for(B=0;B<z;++B){C=J[B].hasListeners;if(C){C._decr_(K.name)}}}delete G[H]}}}}}},destroy:function(){this.monitoredClasses=this.bus=null;this.callParent()}},1,0,0,0,0,0,[Ext.app,"EventDomain"],0));(Ext.cmd.derive("Ext.app.domain.Component",Ext.app.EventDomain,{singleton:true,type:"component",constructor:function(){this.callParent();this.monitor(Ext.Widget)},dispatch:function(u,p,q){var s=u.lookupController(false),o,t;while(s){o=s.compDomain;if(o){if(o.dispatch(u,p,q)===false){return false}}t=s.getView();s=t?t.lookupController(true):null}return this.callParent(arguments)},match:function(g,l){return g.is(l)}},1,0,0,0,0,0,[Ext.app.domain,"Component"],0));(Ext.cmd.derive("Ext.util.ProtoElement",Ext.Base,function(){var g=Ext.String.splitWords,l=Ext.Array.toMap;return{isProtoEl:true,clsProp:"cls",styleProp:"style",removedProp:"removed",styleIsText:false,constructor:function(f){var p=this,o,e;if(f){Ext.apply(p,f);o=p.cls;e=p.style;delete p.cls}p.classList=o?g(o):[];p.classMap=o?l(p.classList):{};if(e){if(typeof e==="string"){p.style=Ext.Element.parseStyles(e)}else{if(Ext.isFunction(e)){p.styleFn=e;delete p.style}else{p.style=Ext.apply({},e)}}}},flush:function(){this.flushClassList=[];this.removedClasses={};delete this.style;delete this.unselectableAttr},addCls:function(z){if(!z){return this}var e=this,A=(typeof z==="string")?g(z):z,x=A.length,u=e.classList,y=e.classMap,w=e.flushClassList,v=0,f;for(;v<x;++v){f=A[v];if(!y[f]){y[f]=true;u.push(f);if(w){w.push(f);delete e.removedClasses[f]}}}return e},hasCls:function(e){return e in this.classMap},removeCls:function(A){var B=this,e=B.classList,x=(B.classList=[]),v=l(g(A)),y=e.length,z=B.classMap,f=B.removedClasses,w,C;for(w=0;w<y;++w){C=e[w];if(v[C]){if(f){if(z[C]){f[C]=true;Ext.Array.remove(B.flushClassList,C)}}delete z[C]}else{x.push(C)}}return B},setStyle:function(p,e){var f=this,o=f.style||(f.style={});if(typeof p==="string"){if(arguments.length===1){f.setStyle(Ext.Element.parseStyles(p))}else{o[p]=e}}else{Ext.apply(o,p)}return f},unselectable:function(){this.addCls(Ext.dom.Element.unselectableCls);if(Ext.isOpera){this.unselectableAttr=true}},writeTo:function(q){var e=this,s=e.flushClassList||e.classList,f=e.removedClasses,p;if(e.styleFn){p=Ext.apply({},e.styleFn());Ext.apply(p,e.style)}else{p=e.style}q[e.clsProp]=s.join(" ");if(p){q[e.styleProp]=e.styleIsText?Ext.DomHelper.generateStyles(p,null,true):p}if(f){f=Ext.Object.getKeys(f);if(f.length){q[e.removedProp]=f.join(" ")}}if(e.unselectableAttr){q.unselectable="on"}return q}}},1,0,0,0,0,0,[Ext.util,"ProtoElement"],0));(Ext.cmd.derive("Ext.dom.CompositeElement",Ext.dom.CompositeElementLite,{alternateClassName:"Ext.CompositeElement",isLite:false,getElement:function(f){return f},transformElement:function(f){return Ext.get(f)}},0,0,0,0,0,0,[Ext.dom,"CompositeElement",Ext,"CompositeElement"],0));(Ext.cmd.derive("Ext.util.CSS",Ext.Base,function(){var p,n=null,o=document,q=/(-[a-z])/gi,s=function(f,e){return e.charAt(1).toUpperCase()};return{singleton:true,rules:n,initialized:false,constructor:function(){p=this},createStyleSheet:function(g,e){var l,m=o.getElementsByTagName("head")[0],f=o.createElement("style");f.setAttribute("type","text/css");if(e){f.setAttribute("id",e)}l=f.styleSheet;if(l){m.appendChild(f);l.cssText=g}else{f.appendChild(o.createTextNode(g));m.appendChild(f);l=f.sheet}p.cacheStyleSheet(l);return l},removeStyleSheet:function(f){var e=(typeof f==="string")?o.getElementById(f):f.ownerNode;if(e){e.parentNode.removeChild(e)}},swapStyleSheet:function(e,g){var f;p.removeStyleSheet(e);f=o.createElement("link");f.setAttribute("rel","stylesheet");f.setAttribute("type","text/css");f.setAttribute("id",e);f.setAttribute("href",g);o.getElementsByTagName("head")[0].appendChild(f)},cacheStyleSheet:function(l){if(!n){n=p.rules={}}try{var e=l.cssRules||l.rules,m=e.length-1,x=l.imports,y=x?x.length:0,f,w;for(w=0;w<y;++w){p.cacheStyleSheet(x[w])}for(;m>=0;--m){f=e[m];if(f.styleSheet){p.cacheStyleSheet(f.styleSheet)}p.cacheRule(f,l)}}catch(g){}},cacheRule:function(l,e){if(l.styleSheet){return p.cacheStyleSheet(l.styleSheet)}var f=l.selectorText,g,m;if(f){f=f.split(",");g=f.length;for(m=0;m<g;m++){n[Ext.String.trim(f[m]).toLowerCase()]={parentStyleSheet:e,cssRule:l}}}},getRules:function(e){var f={},g;if(n===null||e){p.refreshCache()}for(g in n){f[g]=n[g].cssRule}return f},refreshCache:function(){var f=o.styleSheets,g=0,l=f.length;n=p.rules={};for(;g<l;g++){try{if(!f[g].disabled){p.cacheStyleSheet(f[g])}}catch(e){}}},getRule:function(l,f,g){var e,m;if(!n||f){p.refreshCache()}if(!Ext.isArray(l)){m=n[l.toLowerCase()];if(m&&!g){m=m.cssRule}return m||null}for(e=0;e<l.length;e++){if(n[l[e]]){return g?n[l[e].toLowerCase()]:n[l[e].toLowerCase()].cssRule}}return null},createRule:function(e,m,g){var u,f=e.cssRules||e.rules,l=f.length;if(e.insertRule){e.insertRule(m+" {"+g+"}",l)}else{e.addRule(m,g||" ")}p.cacheRule(u=f[l],e);return u},updateRule:function(u,f,g){var e,m,l;if(!Ext.isArray(u)){e=p.getRule(u);if(e){if(arguments.length===2){l=Ext.Element.parseStyles(f);for(f in l){e.style[f.replace(q,s)]=l[f]}}else{e.style[f.replace(q,s)]=g}return true}}else{for(m=0;m<u.length;m++){if(p.updateRule(u[m],f,g)){return true}}}return false},deleteRule:function(l){var f=p.getRule(l,false,true),e,g;if(f){e=f.parentStyleSheet;g=Ext.Array.indexOf(e.cssRules||e.rules,f.cssRule);if(e.deleteRule){e.deleteRule(g)}else{e.removeRule(g)}delete n[l]}}}},1,0,0,0,0,0,[Ext.util,"CSS"],0));(Ext.cmd.derive("Ext.fx.easing.Abstract",Ext.Base,{config:{startTime:0,startValue:0},isEasing:true,isEnded:false,constructor:function(f){this.initConfig(f);return this},applyStartTime:function(f){if(!f){f=Ext.Date.now()}return f},updateStartTime:function(f){this.reset()},reset:function(){this.isEnded=false},getValue:Ext.emptyFn},1,0,0,0,0,0,[Ext.fx.easing,"Abstract"],0));(Ext.cmd.derive("Ext.fx.easing.Linear",Ext.fx.easing.Abstract,{config:{duration:0,endValue:0},updateStartValue:function(f){this.distance=this.getEndValue()-f},updateEndValue:function(f){this.distance=f-this.getStartValue()},getValue:function(){var l=Ext.Date.now()-this.getStartTime(),g=this.getDuration();if(l>g){this.isEnded=true;return this.getEndValue()}else{return this.getStartValue()+((l/g)*this.distance)}}},0,0,0,0,["easing.linear"],0,[Ext.fx.easing,"Linear"],0));(Ext.cmd.derive("Ext.util.translatable.Abstract",Ext.Evented,{config:{useWrapper:null,easing:null,easingX:{duration:300},easingY:{duration:300}},x:0,y:0,activeEasingX:null,activeEasingY:null,isAnimating:false,isTranslatable:true,constructor:function(f){this.mixins.observable.constructor.call(this,f);this.position={x:0,y:0}},factoryEasing:function(f){return Ext.factory(f,Ext.fx.easing.Linear,null,"easing")},applyEasing:function(f){if(!this.getEasingX()){this.setEasingX(this.factoryEasing(f))}if(!this.getEasingY()){this.setEasingY(this.factoryEasing(f))}},applyEasingX:function(f){return this.factoryEasing(f)},applyEasingY:function(f){return this.factoryEasing(f)},doTranslate:function(l,g){if(this.hasListeners.translate){this.fireEvent("translate",this,l,g)}},translate:function(n,l,m){if(m){return this.translateAnimated(n,l,m)}if(this.isAnimating){this.stopAnimation()}if(!isNaN(n)&&typeof n=="number"){this.x=n}if(!isNaN(l)&&typeof l=="number"){this.y=l}this.doTranslate(n,l)},translateAxis:function(q,o,p){var s,n;if(q=="x"){s=o}else{n=o}return this.translate(s,n,p)},getPosition:function(){var g=this,l=g.position;l.x=-g.x;l.y=-g.y;return l},animate:function(g,l){this.activeEasingX=g;this.activeEasingY=l;this.isAnimating=true;this.lastX=null;this.lastY=null;Ext.AnimationQueue.start(this.doAnimationFrame,this);this.fireEvent("animationstart",this,this.x,this.y);return this},translateAnimated:function(u,w,y){var q=this;if(!Ext.isObject(y)){y={}}if(q.isAnimating){q.stopAnimation()}q.callback=y.callback;q.callbackScope=y.scope;var s=Ext.Date.now(),x=y.easing,t=(typeof u=="number")?(y.easingX||x||q.getEasingX()||true):null,v=(typeof w=="number")?(y.easingY||x||q.getEasingY()||true):null;if(t){t=q.factoryEasing(t);t.setStartTime(s);t.setStartValue(q.x);t.setEndValue(u);if("duration" in y){t.setDuration(y.duration)}}if(v){v=q.factoryEasing(v);v.setStartTime(s);v.setStartValue(q.y);v.setEndValue(w);if("duration" in y){v.setDuration(y.duration)}}return q.animate(t,v)},doAnimationFrame:function(){var o=this,q=o.activeEasingX,s=o.activeEasingY,p=Date.now(),t,u;if(!o.isAnimating){return}o.lastRun=p;if(q===null&&s===null){o.stopAnimation();return}if(q!==null){o.x=t=Math.round(q.getValue());if(q.isEnded){o.activeEasingX=null;o.fireEvent("axisanimationend",o,"x",t)}}else{t=o.x}if(s!==null){o.y=u=Math.round(s.getValue());if(s.isEnded){o.activeEasingY=null;o.fireEvent("axisanimationend",o,"y",u)}}else{u=o.y}if(o.lastX!==t||o.lastY!==u){o.doTranslate(t,u);o.lastX=t;o.lastY=u}o.fireEvent("animationframe",o,t,u)},stopAnimation:function(){var f=this;if(!f.isAnimating){return}f.activeEasingX=null;f.activeEasingY=null;f.isAnimating=false;Ext.AnimationQueue.stop(f.doAnimationFrame,f);if(!f.destroying){f.fireEvent("animationend",f,f.x,f.y);if(f.callback){f.callback.call(f.callbackScope);f.callback=null}}},refresh:function(){this.translate(this.x,this.y)},destroy:function(){var f=this;f.destroying=true;if(f.isAnimating){f.stopAnimation()}Ext.Evented.prototype.destroy.call(this);f.destroying=false;f.destroyed=true}},1,0,0,0,0,0,[Ext.util.translatable,"Abstract"],0));(Ext.cmd.derive("Ext.util.translatable.Dom",Ext.util.translatable.Abstract,{config:{element:null},applyElement:function(f){if(!f){return}return Ext.get(f)},updateElement:function(){this.refresh()}},0,0,0,0,0,0,[Ext.util.translatable,"Dom"],0));(Ext.cmd.derive("Ext.util.translatable.ScrollPosition",Ext.util.translatable.Dom,{type:"scrollposition",constructor:function(f){if(f&&f.element){this.x=f.element.getScrollLeft();this.y=f.element.getScrollTop()}Ext.util.translatable.Dom.prototype.constructor.call(this,f)},translateAnimated:function(){var f=this.getElement();this.x=f.getScrollLeft();this.y=f.getScrollTop();Ext.util.translatable.Dom.prototype.translateAnimated.apply(this,arguments)},doTranslate:function(n,l){var m=this.getElement();m.setScrollLeft(Math.round(n));m.setScrollTop(Math.round(l))},getPosition:function(){var l=this,n=l.position,m=l.getElement();n.x=m.getScrollLeft();n.y=m.getScrollTop();return n}},1,0,0,0,0,0,[Ext.util.translatable,"ScrollPosition"],0));(Ext.cmd.derive("Ext.scroll.Scroller",Ext.Evented,{factoryConfig:{defaultType:"scroller"},isScroller:true,config:{direction:undefined,element:undefined,scrollbars:null,snapSelector:null,snapOffset:null,msSnapInterval:null,x:true,y:true,scrollElement:null,size:null,spacerXY:null},snappableCls:"x-scroller-snappable",elementCls:"x-scroller",spacerCls:"x-scroller-spacer",noScrollbarsCls:"x-no-scrollbars",statics:{create:function(l,g){return Ext.Factory.scroller(l,g)},getScrollingElement:function(){var n=document,s=this.$standardScrollElement,o=n.scrollingElement,p,q;if(o){return o}if(s===undefined){p=document.createElement("iframe");p.style.height="1px";document.body.appendChild(p);q=p.contentWindow.document;q.write('<!DOCTYPE html><div style="height:9999em">x</div>');q.close();s=q.documentElement.scrollHeight>q.body.scrollHeight;p.parentNode.removeChild(p);this.$standardScrollElement=s}return s?n.documentElement:n.body}},constructor:function(l){var g=this;g.position={x:0,y:0};Ext.Evented.prototype.constructor.call(this,l);g.onDomScrollEnd=Ext.Function.createBuffered(g.onDomScrollEnd,100,g)},destroy:function(){var f=this;f.setX(Ext.emptyString);f.setY(Ext.emptyString);f.setElement(null);f.setScrollElement(null);f.onDomScrollEnd=f._partners=f.component=null;if(f._translatable){f._translatable.destroy();f._translatable=null}f.removeSnapStylesheet();Ext.Evented.prototype.destroy.call(this)},addPartner:function(o,q){var p=this,n=p._partners||(p._partners={}),s=o._partners||(o._partners={});n[o.getId()]={scroller:o,axis:q};s[p.getId()]={scroller:p,axis:q}},applyElement:function(s,t){var p=this,q,o,u;if(t){p.scrollListener.destroy()}if(s){if(s.isElement){q=s}else{q=Ext.get(s)}if(q.dom===document.documentElement||q.dom===document.body){o=Ext.getWin();u=Ext.scroll.Scroller.getScrollingElement()}else{u=o=q}p.setScrollElement(Ext.get(u));p.scrollListener=o.on({scroll:p.onDomScroll,scope:p,destroyable:true});return q}},applySize:function(o,n){var p,m;if(o===null||typeof o==="number"){p=m=o}else{if(o){p=o.x;m=o.y}}if(p===null){p=0}else{if(p===undefined){p=(n?n.x:0)}}if(m===null){m=0}else{if(m===undefined){m=(n?n.y:0)}}return{x:p,y:m}},getClientSize:function(){var f=this.getElement().dom;return{x:f.clientWidth,y:f.clientHeight}},getScrollbarSize:function(){var w=this,A=0,C=0,x=w.getElement(),y,t,u,v,z,B;if(x&&!x.destroyed){t=w.getX();u=w.getY();y=x.dom;if(t||u){B=Ext.getScrollbarSize()}if(t==="scroll"){v=true}else{if(t){v=y.scrollWidth>y.clientWidth}}if(u==="scroll"){z=true}else{if(u){z=y.scrollHeight>y.clientHeight}}if(v){C=B.height}if(z){A=B.width}}return{width:A,height:C}},getPosition:function(){var f=this;if(f.positionDirty){f.updateDomScrollPosition()}return f.position},getSize:function(){var m=this.getElement(),n,l;if(m&&!m.destroyed){l=m.dom;n={x:l.scrollWidth,y:l.scrollHeight}}else{n={x:0,y:0}}return n},getMaxPosition:function(){var o=this.getElement(),p=0,m=0,n;if(o&&!o.destroyed){n=o.dom;p=n.scrollWidth-n.clientWidth;m=n.scrollHeight-n.clientHeight}return{x:p,y:m}},getMaxUserPosition:function(){var p=this,q=p.getElement(),s=0,n=0,o;if(q&&!q.destroyed){o=q.dom;if(p.getX()){s=o.scrollWidth-o.clientWidth}if(p.getY()){n=o.scrollHeight-o.clientHeight}}return{x:s,y:n}},refresh:function(){this.positionDirty=true;this.fireEvent("refresh",this);return this},removePartner:function(m){var l=this._partners,n=m._partners;if(l){delete l[m.getId()]}if(n){delete (n[this.getId()])}},scrollBy:function(n,o,m){var p=this.getPosition();if(n){if(n.length){m=o;o=n[1];n=n[0]}else{if(typeof n!=="number"){m=o;o=n.y;n=n.x}}}n=(typeof n==="number")?n+p.x:null;o=(typeof o==="number")?o+p.y:null;return this.doScrollTo(n,o,m)},scrollIntoView:function(y,x,A,v){var t=this,u=t.getPosition(),w,B,C,z=t.getElement();if(y){w=Ext.fly(y).getScrollIntoViewXY(z,u.x,u.y);B=(x===false)?u.x:w.x;C=w.y;if(C!==u.y||B!==u.x){if(v){t.on({scrollend:"doHighlight",scope:t,single:true,args:[y,v]})}t.doScrollTo(B,C,A)}else{if(v){t.doHighlight(y,v)}}}},isInView:function(f){return this.doIsInView(f)},scrollTo:function(p,m,o){var n;if(p){if(p.length){o=m;m=p[1];p=p[0]}else{if(typeof p!=="number"){o=m;m=p.y;p=p.x}}}if(p<0||m<0){n=this.getMaxPosition();if(p<0){p+=n.x}if(m<0){m+=n.y}}this.doScrollTo(p,m,o)},updateDirection:function(n){var o=this,p,m;if(!n){p=o.getX();m=o.getY();if(p&&m){n=(m==="scroll"&&p==="scroll")?"both":"auto"}else{if(m){n="vertical"}else{if(p){n="horizontal"}}}o._direction=n}else{if(n==="auto"){p=true;m=true}else{if(n==="vertical"){p=false;m=true}else{if(n==="horizontal"){p=true;m=false}else{if(n==="both"){p="scroll";m="scroll"}}}}o.setX(p);o.setY(m)}},updateScrollbars:function(l,g){this.syncScrollbarCls()},updateSize:function(p){var o=this,q=o.getElement(),t=p.x,u=p.y,s;if(q){o.positionDirty=true;s=o.getSpacer();if(!t&&!u){s.hide()}else{if(t>0){t-=1}if(u>0){u-=1}o.setSpacerXY({x:t,y:u});s.show()}}},updateMsSnapInterval:function(){this.initMsSnapInterval()},updateSnapSelector:function(){this.initSnap()},updateSnapOffset:function(){this.initSnap()},updateElement:function(l){var g=this;g.initXStyle();g.initYStyle();l.addCls(g.elementCls);g.initSnap();g.initMsSnapInterval();g.syncScrollbarCls()},updateX:function(f){this.initXStyle()},updateY:function(f){this.initYStyle()},deprecated:{"5":{methods:{getScroller:function(){return this}}},"5.1.0":{methods:{scrollToTop:function(f){return this.scrollTo(0,0,f)},scrollToEnd:function(f){return this.scrollTo(Infinity,Infinity,f)}}}},privates:{getSpacer:function(){var l=this,n=l._spacer,m;if(!n){m=l.getElement();n=l._spacer=m.createChild({cls:l.spacerCls,role:"presentation"},m.dom.firstChild);n.setVisibilityMode(2);n.hide();m.position()}return n},applySpacerXY:function(g,l){if(l&&g.x===l.x&&g.y===l.y){g=undefined}return g},updateSpacerXY:function(u){var q=this,t=q.getSpacer(),o=t.dom.style,s=u.y,p;o.marginTop="";q.translateSpacer(u.x,q.constrainScrollRange(s));o.lineHeight=Number(!parseInt(o.lineHeight,10))+"px";p=s-q.getElement().dom.scrollHeight;if(p>0){o.marginTop=Math.min(p,q.maxSpacerMargin||0)+"px"}},translateSpacer:function(l,g){this.getSpacer().translate(l,g)},doIsInView:function(t,q){var s=this,w=s.component,v={x:false,y:false},y,x=s.getElement(),u;if(t&&(q||(x.contains(t)||(w&&w.owns(t))))){u=x.getRegion();y=Ext.fly(t).getRegion();v.x=y.right>u.left&&y.left<u.right;v.y=y.bottom>u.top&&y.top<u.bottom}return v},constrainScrollRange:function(s){if(s<1000000){return s}if(!this.maxSpacerTranslate){var t=Math.pow(2,32),v=t,p=500,u=Ext.getBody().createChild({style:{position:"absolute",left:"-10000px",top:"0",width:"500px",height:"500px"},cn:{cls:this.spacerCls}},null,true),q=Ext.get(u.firstChild),w=q.dom.style;q.translate(0,t-1);w.lineHeight=Number(!parseInt(w.lineHeight,10))+"px";while(v!==p+1){q.translate(0,(t=p+Math.floor((v-p)/2)));w.lineHeight=Number(!parseInt(w.lineHeight,10))+"px";if(u.scrollHeight<t){v=t}else{p=t}}q.translate(0,Ext.scroll.Scroller.prototype.maxSpacerTranslate=p);v=p*2;while(v!==p+1){q.dom.style.marginTop=((t=p+Math.floor((v-p)/2)))+"px";w.lineHeight=Number(!parseInt(w.lineHeight,10))+"px";if(u.scrollHeight<t){v=t}else{p=t}}Ext.fly(u).destroy();Ext.scroll.Scroller.prototype.maxSpacerMargin=p-Ext.scroll.Scroller.prototype.maxSpacerTranslate}return Math.min(s,this.maxSpacerTranslate)},convertX:function(f){return f},doHighlight:function(g,l){if(l!==true){Ext.fly(g).highlight(l)}else{Ext.fly(g).highlight()}},doScrollTo:function(t,u,B){var v=this,y=v.getScrollElement(),x,A,C,w,z;if(y&&!y.destroyed){A=y.dom;C=(t===Infinity);w=(u===Infinity);if(C||w){x=v.getMaxPosition();if(C){t=x.x}if(w){u=x.y}}t=v.convertX(t);if(B){if(!this._translatable){this._translatable=new Ext.util.translatable.ScrollPosition({element:y})}this._translatable.translate(t,u,B)}else{if(u!=null){A.scrollTop=u}if(t!=null){A.scrollLeft=t;if(Ext.isIE8){z=A.scrollLeft;A.scrollLeft=t}}}v.positionDirty=true}},fireScrollStart:function(p,m){var n=this,o=n.component;n.invokePartners("onPartnerScrollStart",p,m);if(n.hasListeners.scrollstart){n.fireEvent("scrollstart",n,p,m)}if(o&&o.onScrollStart){o.onScrollStart(p,m)}Ext.GlobalEvents.fireEvent("scrollstart",n,p,m)},fireScroll:function(p,m){var n=this,o=n.component;n.invokePartners("onPartnerScroll",p,m);if(n.hasListeners.scroll){n.fireEvent("scroll",n,p,m)}if(o&&o.onScrollMove){o.onScrollMove(p,m)}Ext.GlobalEvents.fireEvent("scroll",n,p,m)},fireScrollEnd:function(p,m){var n=this,o=n.component;n.invokePartners("onPartnerScrollEnd",p,m);if(n.hasListeners.scrollend){n.fireEvent("scrollend",n,p,m)}if(o&&o.onScrollEnd){o.onScrollEnd(p,m)}Ext.GlobalEvents.fireEvent("scrollend",n,p,m)},getElementScroll:function(f){return f.getScroll()},initSnap:function(){var q=this,v=q.getSnapOffset(),p=q.getSnapSelector(),s=q.getElement(),u,w,t;if(s&&p){s.addCls(q.snappableCls);q.removeSnapStylesheet();if(v){u=v.x||0;w=v.y||0;if(u){u=-u+"px"}if(w){w=-w+"px"}}t=u+" "+w+";";q.snapStylesheet=Ext.util.CSS.createStyleSheet("#"+s.id+" "+p+"{-webkit-scroll-snap-coordinate:"+t+"scroll-snap-coordinate:"+t+"}")}},initMsSnapInterval:function(){var p=this.getElement(),q,s,n,o;if(p){q=this.getMsSnapInterval();if(q){s=q.x;n=q.y;o=p.dom.style;if(s){o["-ms-scroll-snap-points-x"]="snapInterval(0px, "+s+"px)"}if(n){o["-ms-scroll-snap-points-y"]="snapInterval(0px, "+n+"px)"}}}},initXStyle:function(){var g=this.getElement(),l=this.getX();if(g&&g.dom){if(!l){l="hidden"}else{if(l===true){l="auto"}}g.setStyle("overflow-x",l)}},initYStyle:function(){var l=this.getElement(),g=this.getY();if(l&&l.dom){if(!g){g="hidden"}else{if(g===true){g="auto"}}l.setStyle("overflow-y",g)}},invokePartners:function(w,v,x){var t=this,q=t._partners,u,y,s=w==="onPartnerScrollEnd";if(!t.suspendSync&!t.isReflecting){for(y in q){u=q[y].scroller;u.isReflecting=true;u[w](t,v,x);if(s){u.isReflecting=false}}}},clearReflecting:function(){this.isReflecting=false},suspendPartnerSync:function(){this.suspendSync=(this.suspendSync||0)+1},resumePartnerSync:function(l){var m=this,n;if(m.suspendSync){m.suspendSync--}if(!m.suspendSync&&l){n=m.getPosition();m.invokePartners("onPartnerScroll",n.x,n.y);m.invokePartners("onPartnerScrollEnd",n.x,n.y)}},updateDomScrollPosition:function(){var m=this,n=m.getScrollElement(),o,p=m.position;if(n&&!n.destroyed){o=m.getElementScroll(n);p.x=o.left;p.y=o.top}m.positionDirty=false;return p},syncWithPartners:function(){var p=this,o=p._partners,n,q,s;p.isReflecting=true;for(n in o){q=o[n].scroller;s=q.getPosition();p.onPartnerScroll(q,s.x,s.y)}p.isReflecting=false},syncScrollbarCls:function(){var f=this.getElement();if(f){f.toggleCls(this.noScrollbarsCls,this.getScrollbars()===false)}},onDomScroll:function(){var n=this,o,p,m;o=n.updateDomScrollPosition();if(n.restoring){return}p=o.x;m=o.y;if(!n.isScrolling){n.isScrolling=Ext.isScrolling=true;n.fireScrollStart(p,m)}n.fireScroll(p,m);n.onDomScrollEnd()},onDomScrollEnd:function(){var n=this,o,p,m;if(n.destroying||n.destroyed){return}o=n.getPosition();p=o.x;m=o.y;n.isScrolling=Ext.isScrolling=false;n.trackingScrollLeft=p;n.trackingScrollTop=m;n.fireScrollEnd(p,m)},onPartnerScroll:function(n,p,m){var o=n._partners[this.getId()].axis;if(o){if(o==="x"){m=null}else{if(o==="y"){p=null}}}this.doScrollTo(p,m,false,true)},onPartnerScrollStart:Ext.privateFn,onPartnerScrollEnd:Ext.privateFn,removeSnapStylesheet:function(){var f=this.snapStylesheet;if(f){Ext.util.CSS.removeStyleSheet(f);this.snapStylesheet=null}},restoreState:function(){var g=this,l=g.getScrollElement();if(l){if(g.trackingScrollTop!==undefined){g.restoring=true;Ext.defer(function(){g.restoring=false},50);g.doScrollTo(g.trackingScrollLeft,g.trackingScrollTop,false)}}}}},1,0,0,0,["scroller.scroller"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.scroll,"Scroller"],function(f){Ext.getViewportScroller=function(){return f.viewport||(f.viewport=new f())};Ext.setViewportScroller=function(e){if(f.viewport!==e){Ext.destroy(f.viewport);f.viewport=e.isScroller?e:new f(e)}};Ext.onReady(function(){Ext.defer(function(){var e=Ext.getViewportScroller();if(!e.getElement()){e.setElement(Ext.getBody())}},100)})}));(Ext.cmd.derive("Ext.util.Floating",Ext.Base,{mixinId:"floating",focusOnToFront:true,shadow:"sides",animateShadow:false,constrain:false,alignOnScroll:true,config:{activeCounter:0,alwaysOnTop:false},preventDefaultAlign:false,_visModeMap:{visibility:1,display:2,offsets:3},constructor:function(){var o=this,p=o.el,n=o.shadow,s,q;if(n){q={mode:(n===true)?"sides":n};s=o.shadowOffset;if(s){q.offset=s}q.animate=o.animateShadow;q.fixed=o.fixed;p.enableShadow(q,false)}if(o.shim||Ext.useShims){p.enableShim({fixed:o.fixed},false)}p.setVisibilityMode(o._visModeMap[o.hideMode]);o.el.on({mousedown:o.onMouseDown,scope:o,capture:true});o.registerWithOwnerCt();o.initHierarchyEvents()},alignTo:function(B,y,C,D,v){var w=this,E,F,z,A,G,x;if(B.isComponent){E=B.el;F=B.destroyed}else{E=B=Ext.get(B);z=E.dom;F=!z||Ext.isGarbage(z)}if(F){w._lastAlignTarget=null;if(w.alignListeners){w.alignListeners.destroy()}return}w.mixins.positionable.alignTo.call(w,E,y,C,D,v!==false);A=w.getXY();G=B.getXY();w.alignVector=[A[0]-G[0],A[1]-G[1]];w._lastAlignTarget=B;w._lastAlignToPos=y;w._lastAlignToOffsets=C;w._topAlignTarget=w.getTopAlignTarget();w.clearClip();if(!w.alignListeners){x={resize:{fn:w.alignOnResize,buffer:100},scope:w,destroyable:true};if(w.alignOnScroll&&!E.contains(w.el)){x.scroll=w.doRealign}w.alignListeners=Ext.on(x)}},initFloatConstrain:function(){var l=this,g=l.floatParent;if((l.constrain||l.constrainHeader)&&!l.constrainTo){l.constrainTo=g?g.getTargetEl():l.container}},initHierarchyEvents:function(){var g=this,l=this.syncHidden;if(!g.hasHierarchyEventListeners){g.mon(Ext.GlobalEvents,{hide:l,collapse:l,show:l,expand:l,added:l,scope:g});g.hasHierarchyEventListeners=true}},registerWithOwnerCt:function(){var l=this,m=l.ownerCt,n=l.zIndexParent;if(n){n.unregisterFloatingItem(l)}n=l.zIndexParent=l.up("[floating]");l.floatParent=m||n;l.initFloatConstrain();delete l.ownerCt;if(n){n.registerFloatingItem(l)}else{Ext.WindowManager.register(l)}},onMouseDown:function(x){var s=this,t=s.focusTask,v=s.getRefOwner(),e=x.pointerType==="touch",y,w,u;if(s.floating&&(!t||!t.id)){if(s.owns(Ext.Element.getActiveElement())){e=true}y=x.target;w=s.el.dom;while(!e&&y&&y!==w){if(Ext.fly(y).isFocusable()){e=true}y=y.parentNode}u=Ext.WindowManager.getActive()===s&&(y===w||e);if(!u){s.toFront(e)}if(!e&&v&&v.containsFocus){x.preventDefault()}}},onBeforeFloatLayout:function(){this.el.preventSync=true},onAfterFloatLayout:function(){var f=this.el;if(f.shadow||f.shim){f.setUnderlaysVisible(true);f.syncUnderlays()}},syncHidden:function(){var n=this,m=n.hidden||!n.rendered,p=n.hierarchicallyHidden=n.isHierarchicallyHidden(),o=n.pendingShow;if(m!==p){if(p){n.hide();n.pendingShow=true}else{if(o){delete n.pendingShow;if(o.length){n.show.apply(n,o)}else{n.show()}}}}},setZIndex:function(l){var g=this;g.el.setZIndex(l);l+=10;if(g.floatingDescendants){l=Math.floor(g.floatingDescendants.setBase(l)/100)*100+10000}return l},doConstrain:function(n){var m=this,l=m.calculateConstrainedPosition(n,null,true);if(l){m.setPosition(l)}},updateActiveCounter:function(n){var m=this,l=m.zIndexParent;if(l&&l!==l.zIndexManager.front&&m.bringParentToFront!==false){l.setActiveCounter(++Ext.ZIndexManager.activeCounter)}l=m.zIndexManager;if(l){l.onComponentUpdate(m)}},updateAlwaysOnTop:function(l){var g=this.zIndexManager;if(g){g.onComponentUpdate(this)}},toFront:function(g){var l=this;if(l.zIndexManager.bringToFront(l,g||!l.focusOnToFront)){if(l.hasListeners.tofront){l.fireEvent("tofront",l,l.el.getZIndex())}}return l},setActive:function(m,o){var n=this,p;if(m){if(n.el.shadow&&n.el.getData().isVisible!==false&&!n.maximized){n.el.enableShadow(null,true)}if(o){p=Ext.ComponentManager.getActiveComponent();if(!p||!p.up(n)){n.focus()}}n.fireEvent("activate",n)}else{n.fireEvent("deactivate",n)}},toBack:function(){this.zIndexManager.sendToBack(this);return this},center:function(){var l=this,g;if(l.isVisible()){g=l.getAlignToXY(l.container,"c-c");l.setPagePosition(g)}else{l.needsCenter=true}return l},onFloatShow:function(){var f=this;if(f.needsCenter){f.center()}else{if(f._lastAlignTarget){f.alignTo(f._lastAlignTarget,f._lastAlignToPos,f._lastAlignToOffsets,false,!f.fixed)}}f.needsCenter=false},fitContainer:function(q){var u=this,o=u.floatParent,s=o?o.getTargetEl():u.container,t=s.getViewSize(),p=o||(s.dom!==document.body)?[0,0]:s.getXY();t.x=p[0];t.y=p[1];u.setBox(t,q)},privates:{onFloatDestroy:function(){this.clearAlignEl()},getTopAlignTarget:function(){var g=this._lastAlignTarget,l=g;while(g&&(l=g)&&g.isComponent){if(l.isFloating()){g=l._lastAlignTarget}else{g=l.up("{isFloating()}");g=g&&g._lastAlignTarget}}return l},clearAlignEl:function(){var f=this;if(f._lastAlignTarget){f.alignListeners=Ext.destroy(f.alignListeners);Ext.un("scroll",f.doRealign,f);f._lastAlignToPos=f._lastAlignTarget=f._lastAlignToOffsets=f._topAlignTarget=null}},alignOnResize:function(){this.doRealign()},doRealign:function(u){var p=this,s=p._lastAlignTarget.el,q,w,v,t;if(s&&p.isVisible()){if(s.isComponent){q=s.destroyed}else{w=s.dom;q=!w||Ext.isGarbage(w)}if(q){p.clearAlignEl()}else{if(!u||(u.getElement().contains(p._topAlignTarget.el)&&!u.getElement().contains(p.el))){v=s.getXY();t=[v[0]+p.alignVector[0],v[1]+p.alignVector[1]];p.setXY(t);if(u){p.clipToScroller(u)}}}}},clipToScroller:function(s){var o=this,n=o._topAlignTarget.getBox(),q=s.getElement().getConstrainRegion(),p=0;if(n.top<q.top){p=1}if(n.right>q.right){p=p|2}if(n.bottom>q.bottom){p=p|4}if(n.left<q.left){p=p|8}if(p){o.clipTo(q,p)}else{o.clearClip()}}}},1,0,0,0,0,0,[Ext.util,"Floating"],0));(Ext.cmd.derive("Ext.util.ElementContainer",Ext.Base,{mixinId:"elementCt",config:{childEls:{$value:{},cached:true,lazy:true,merge:function(w,u,p,q){var s=u?Ext.Object.chain(u):{},t,v;if(w instanceof Array){for(t=w.length;t--;){v=w[t];if(!q||!(v in s)){if(typeof v==="string"){s[v]={name:v,itemId:v}}else{s[v.name]=v}}}}else{if(w){if(w.constructor===Object){for(t in w){if(!q||!(t in s)){v=w[t];if(v===true){s[t]={itemId:t}}else{if(typeof v==="string"){s[t]={itemId:v}}else{s[t]=v;if(!("itemId" in v)){v.itemId=t}}}s[t].name=t}}}else{if(!q||!(w in s)){s[w]={name:w,itemId:w}}}}}return s}}},destroy:function(){var n=this,o=n.getChildEls(),m,p;for(p in o){m=n[p];if(m){if(m.destroy){m.component=null;m.destroy()}n[p]=null}}},privates:{addChildEl:function(n){var l=this,m=l.getChildEls();if(!l.hasOwnProperty("childEls")){l.childEls=m=Ext.Object.chain(m)}if(typeof n==="string"){n={name:n,itemId:n}}m[n.name]=n},afterClassMixedIn:function(l){var m=l.prototype,n=m.childEls;if(n){delete m.childEls;l.getConfigurator().add({childEls:n})}},attachChildEls:function(C,D){var y=this,x=y.getChildEls(),z=D||y,H=z.id+"-",I=!z.frame,G,F,J,A,B,K,E;for(G in x){J=x[G];if(I&&J.frame){continue}B=J.select;if(B){K=C.select(B,true)}else{if(!(B=J.selectNode)){if(!(E=J.id)){E=H+J.itemId;K=Ext.cache[E]}else{K=Ext.cache[E]||C.getById(E)}}else{K=C.selectNode(B,false)}}if(K){if(K.isElement){K.component=z}else{if(K.isComposite&&!K.isLite){F=K.elements;for(A=F.length;A--;){F[A].component=z}}}}y[G]=K||null}}}},0,0,0,0,0,0,[Ext.util,"ElementContainer"],0));(Ext.cmd.derive("Ext.util.Renderable",Ext.Base,{mixinId:"renderable",frameCls:"x-frame",frameIdRegex:/[\-]frame\d+[TMB][LCR]$/,frameElNames:["TL","TC","TR","ML","MC","MR","BL","BC","BR","Table"],frameTpl:["<tpl if=\"hasTabGuard\">{% this.renderTabGuard(out, values, 'before'); %}</tpl>",'<tpl if="top">','<tpl if="left"><div id="{fgid}TL" data-ref="frameTL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}TR" data-ref="frameTR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}TC" data-ref="frameTC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>",'<tpl if="left"><div id="{fgid}ML" data-ref="frameML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}MR" data-ref="frameMR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}Body" data-ref="frameBody" class="{frameBodyCls} {frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" role="presentation">',"{%this.applyRenderTpl(out, values)%}","</div>",'<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>','<tpl if="bottom">','<tpl if="left"><div id="{fgid}BL" data-ref="frameBL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}BR" data-ref="frameBR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}BC" data-ref="frameBC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>","<tpl if=\"hasTabGuard\">{% this.renderTabGuard(out, values, 'after'); %}</tpl>"],frameTableTpl:["<tpl if=\"hasTabGuard\">{% this.renderTabGuard(out, values, 'before'); %}</tpl>",'<table id="{fgid}Table" data-ref="frameTable" class="{frameCls} ','x-table-plain" cellpadding="0" role="presentation">','<tpl if="top">','<tr role="presentation">','<tpl if="left"><td id="{fgid}TL" data-ref="frameTL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}TC" data-ref="frameTC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}TR" data-ref="frameTR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>","</tpl>",'<tr role="presentation">','<tpl if="left"><td id="{fgid}ML" data-ref="frameML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}Body" data-ref="frameBody" class="{frameBodyCls} {frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" style="{mcStyle}" role="presentation">',"{%this.applyRenderTpl(out, values)%}","</td>",'<tpl if="right"><td id="{fgid}MR" data-ref="frameMR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>",'<tpl if="bottom">','<tr role="presentation">','<tpl if="left"><td id="{fgid}BL" data-ref="frameBL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}BC" data-ref="frameBC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}BR" data-ref="frameBR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>","</tpl>","</table>","<tpl if=\"hasTabGuard\">{% this.renderTabGuard(out, values, 'after'); %}</tpl>"],_renderState:0,ariaEl:"el",_layerCls:"x-layer",_fixedLayerCls:"x-fixed-layer",ariaStaticRoles:{presentation:true,article:true,definition:true,directory:true,document:true,img:true,heading:true,math:true,note:true,banner:true,complementary:true,contentinfo:true,navigation:true,search:true,"undefined":true,"null":true},statics:{makeRenderSetter:function(n,l){var m=n.name;return function(e){var f=this,g=(f.renderConfigs||(f.renderConfigs={})),p=g[l];if(f._renderState>=l){(n.setter||n.getSetter()).call(f,e)}else{if(!p){g[l]=p={}}if(!(m in p)){p[m]=f[m]}f[m]=e}return f}},processRenderConfig:function(D,F,B){var x=this.prototype,z=this.getConfigurator(),E=Ext.util.Renderable,G=E.makeRenderSetter,A=D[F],w,v,C,y;for(C in A){v=Ext.Config.get(C);if(!x[y=v.names.set]){w=(v.renderSetter||(v.renderSetter={}));x[y]=w[B]||(w[B]=G(v,B))}}delete D[F];z.add(A)}},onClassMixedIn:function(p){var s=p.override,n=this.processRenderConfig,o=function(e){if(e.beforeRenderConfig){this.processRenderConfig(e,"beforeRenderConfig",1)}if(e.renderConfig){this.processRenderConfig(e,"renderConfig",3)}s.call(this,e)},q=function(e,f){e.override=o;e.processRenderConfig=n;if(f.beforeRenderConfig){e.processRenderConfig(f,"beforeRenderConfig",1)}if(f.renderConfig){e.processRenderConfig(f,"renderConfig",3)}};q(p,p.prototype);p.onExtended(q)},afterRender:function(){var t=this,x={},z=t.protoEl,u=t.el,w,s,y,v,A;t.finishRenderChildren();t._renderState=4;if(t.contentEl){y="x-";v=y+"hidden-";A=t.contentEl=Ext.get(t.contentEl);A.component=t;A.removeCls([y+"hidden",v+"display",v+"offsets"]);t.getContentTarget().appendChild(A.dom)}z.writeTo(x);s=x.removed;if(s){u.removeCls(s)}s=x.cls;if(s.length){u.addCls(s)}s=x.style;if(x.style){u.setStyle(s)}t.protoEl=null;if(!t.ownerCt&&!t.skipLayout){t.updateLayout()}if(!(t.x&&t.y)&&(t.pageX||t.pageY)){t.setPagePosition(t.pageX,t.pageY)}if(t.disableOnRender){t.onDisable()}w=t.controller;if(w&&w.afterRender){w.afterRender(t)}},afterFirstLayout:function(A,F){var y=this,G=y.x,w=y.y,v=y.defaultAlign,C=y.alignOffset,z,B,D,x,E;if(!y.ownerLayout){B=G!==undefined;D=w!==undefined}if(y.floating&&!y.preventDefaultAlign&&(!B||!D)){if(y.floatParent){x=y.floatParent.getTargetEl().getViewRegion();E=y.el.getAlignToXY(y.alignTarget||y.floatParent.getTargetEl(),v,C);x.x=E[0]-x.x;x.y=E[1]-x.y}else{E=y.el.getAlignToXY(y.alignTarget||y.container,v,C);x=y.el.translateXY(E[0],E[1])}G=B?G:x.x;w=D?w:x.y;B=D=true}if(B||D){y.setPosition(G,w)}y.onBoxReady(A,F);z=y.controller;if(z&&z.boxReady){z.boxReady(y,A,F)}},beforeRender:function(){var o=this,n=o.floating,p=o.getComponentLayout(),q=o.userCls,s;o._renderState=1;o.ariaUsesMainElement=o.ariaEl==="el";s=o.controller;if(s&&s.beforeRender){s.beforeRender(o)}o.initBindable();if(o.renderConfigs){o.flushRenderConfigs()}if(o.reference){o.publishState()}if(q){o.addCls(q)}if(n){o.addCls(o.fixed?o._fixedLayerCls:o._layerCls);q=n.cls;if(q){o.addCls(q)}}o.frame=o.frame||o.alwaysFramed;if(!p.initialized){p.initLayout()}o.initOverflow();o.setUI(o.ui)},doApplyRenderTpl:function(n,p){var m=p.$comp,o;if(!m.rendered){o=m.initRenderTpl();o.applyOut(p.renderData,n)}},getElConfig:function(){var q=this,x=q.autoEl,s=q.getFrameInfo(),u={tag:"div",tpl:s?q.initFramingTpl(s.table):q.initRenderTpl()},w=q.layoutTargetCls,y=q.protoEl,v=q.ariaRole,t;q.initStyles(y);if(w&&!s){y.addCls(w)}y.writeTo(u);y.flush();if(x){if(Ext.isString(x)){u.tag=x}else{Ext.apply(u,x)}}if(v&&q.ariaUsesMainElement){u.role=v;if(!q.ariaStaticRoles[v]){u["aria-hidden"]=!!q.hidden;u["aria-disabled"]=!!q.disabled;if(q.ariaLabel&&!q.ariaLabelledBy){u["aria-label"]=q.ariaLabel}if(q.collapsible){u["aria-expanded"]=!q.collapsed}if(q.ariaRenderAttributes){Ext.apply(u,q.ariaRenderAttributes)}if(q.config.ariaAttributes){Ext.apply(u,q.getAriaAttributes())}}}u.id=q.id;if(u.tpl){if(s){u.tplData=t=q.getFrameRenderData();t.renderData=q.initRenderData()}else{u.tplData=q.initRenderData()}}q.ariaRenderAttributes=null;return u},getInsertPosition:function(f){if(f!==undefined){if(Ext.isNumber(f)){f=this.container.dom.childNodes[f]}else{f=Ext.getDom(f)}}return f},getRenderTree:function(){var g=this,l=null;if(!g.hasListeners.beforerender||g.fireEvent("beforerender",g)!==false){g._renderState=1;g.beforeRender();g.rendering=true;g._renderState=2;l=g.getElConfig();if(g.el){l.id=g.$pid=Ext.id(null,g.el.identifiablePrefix)}}return l},initRenderData:function(){var n=this,p=n.ariaRole,m,o;m=Ext.apply({$comp:n,id:n.id,ui:n.ui,uiCls:n.uiCls,baseCls:n.baseCls,componentCls:n.componentCls,frame:n.frame,hasTabGuard:!!n.tabGuard,scrollerCls:n.scrollerCls,childElCls:"",ariaEl:n.ariaEl},n.renderData);if(p&&!n.ariaUsesMainElement){o={role:p};if(!n.ariaStaticRoles[p]){o["aria-hidden"]=!!n.hidden;o["aria-disabled"]=!!n.disabled;if(n.ariaLabel&&!n.ariaLabelledBy){o["aria-label"]=n.ariaLabel}if(n.collapsible){o["aria-expanded"]=!n.collapsed}if(n.ariaRenderAttributes){Ext.apply(o,n.ariaRenderAttributes)}if(n.config.ariaAttributes){Ext.apply(o,n.getAriaAttributes())}}m.ariaAttributes=o}return m},onRender:function(y,x){var v=this,t=v.x,u=v.y,z=null,A=v.el,w=v.scrollable,B,C;v.applyRenderSelectors();if(w&&w.isScroller){w.setElement(v.getOverflowEl());if(Ext.isIE){v.showListenerIE=Ext.on("show",v.onGlobalShow,v,{destroyable:true})}}v.rendering=null;v.rendered=true;v._renderState=3;if(v.renderConfigs){v.flushRenderConfigs()}if(t!=null){z={x:t}}if(u!=null){(z=z||{}).y=u}if(!v.getFrameInfo()){B=v.width;C=v.height;if(typeof B==="number"){z=z||{};z.width=B}if(typeof C==="number"){z=z||{};z.height=C}}v.lastBox=A.lastBox=z},render:function(t,u){var q=this,s=q.el,w=q.ownerLayout,x,v,y;if(s&&!s.isElement){q.wrapPrimaryEl(s);s=q.el}if(!q.skipLayout){Ext.suspendLayouts()}t=q.initContainer(t);y=q.getInsertPosition(u);if(!s){v=q.getRenderTree();if(w&&w.transformItemRenderTree){v=w.transformItemRenderTree(v)}if(v){if(y){s=Ext.DomHelper.insertBefore(y,v)}else{s=Ext.DomHelper.append(t,v)}q.wrapPrimaryEl(s);q.cacheRefEls(s)}}else{if(!q.hasListeners.beforerender||q.fireEvent("beforerender",q)!==false){q.beforeRender();q.needsRenderTpl=q.rendering=true;q._renderState=2;q.initStyles(s);if(q.allowDomMove!==false){if(y){t.dom.insertBefore(s.dom,y)}else{t.dom.appendChild(s.dom)}}}else{x=true}}if(s&&!x){q.finishRender(u)}if(!q.skipLayout){Ext.resumeLayouts(!q.hidden&&!t.isDetachedBody)}},ensureAttachedToBody:function(l){var m=this,n;while(m.ownerCt){m=m.ownerCt}if(m.container.isDetachedBody){m.container=n=Ext.getBody();n.appendChild(m.el.dom);if(l){m.updateLayout()}if(typeof m.x==="number"||typeof m.y==="number"){m.setPosition(m.x,m.y)}}},privates:{applyRenderSelectors:function(){var o=this,q=o.renderSelectors,p=o.el,n,s;o.attachChildEls(p);o.ariaEl=o[o.ariaEl]||o.el;if(q){for(s in q){n=q[s];if(n){o[s]=p.selectNode(n,false)}}}},cacheRefEls:function(q){q=q||this.el;var t=Ext.cache,x=Ext.dom.Element,w=q.isElement?q.dom:q,u=w.querySelectorAll("[data-ref]"),v=u.length,y,s;for(s=0;s<v;s++){y=u[s];if(!t[y.id]){new x(y)}}},doAutoRender:function(){var f=this;if(!f.rendered){if(f.floating){f.render(f.renderTo||document.body)}else{f.render(Ext.isBoolean(f.autoRender)?Ext.getBody():f.autoRender)}}},doRenderContent:function(p,m){var o=m.$comp,n=o.data;if(o.html){Ext.DomHelper.generateMarkup(o.html,p);delete o.html}if(o.tpl){if(!o.tpl.isTemplate){o.tpl=new Ext.XTemplate(o.tpl)}if(n){o.data=n=n.isEntity?n.getData(true):n;o.tpl.applyOut(n,p)}}},doRenderFramingTabGuard:function(o,m,p){var n=m.$comp.layout;m.renderData.$skipTabGuards=true;if(n&&n.doRenderTabGuard){n.doRenderTabGuard.call(this,o,m,p)}},flushRenderConfigs:function(){var s=this,x=s.renderConfigs,y=s._renderState,w,t,u,v,q;if(x){for(t=0;t<=y;++t){w=x[t];if(w){x[t]=null;for(u in w){q=w[u];(v||(v={}))[u]=s[u];s[u]=q}}}if(v){s.setConfig(v)}}},finishRender:function(v){var C=this,B=Ext.cache,t,w,A,u,x,y,z;if(!C.el||C.$pid){if(C.container){z=B[C.id];y=z?z.dom:C.container.getById(C.id,true)}else{A=C.$pid||C.id;z=B[A];y=z?z.dom:Ext.getDom(A)}if(!C.el){C.wrapPrimaryEl(y)}else{delete C.$pid;if(!C.el.dom){C.wrapPrimaryEl(C.el)}y.parentNode.insertBefore(C.el.dom,y);t=y;y=C.el.dom;w=y.firstChild;while(t.firstChild){y.insertBefore(t.firstChild,w)}C.el.addCls(t.className);Ext.removeNode(t)}}else{if(C.needsRenderTpl){u=C.initRenderTpl();if(u){x=C.initRenderData();u.insertFirst(C.getTargetEl(),x)}C.cacheRefEls()}}C.el.component=C;if(!C.container){C.container=Ext.get(C.el.dom.parentNode)}if(C.ctCls){C.container.addCls(C.ctCls)}C.onRender(C.container,v);if(!C.overflowInited){C.initOverflow()}C.el.setVisibilityMode(Ext.Element[C.hideMode.toUpperCase()]);if(C.overCls){C.el.hover(C.addOverCls,C.removeOverCls,C)}if(C.hasListeners.render){C.fireEvent("render",C)}C.afterRender();if(C.hasListeners.afterrender){C.fireEvent("afterrender",C)}C.initEvents();if(C.hidden){C.el.hide()}},finishRenderChildren:function(){var f=this.getComponentLayout();f.finishRender()},getFrameRenderData:function(){var l=this,m=l.frameSize,n="";if(l._syncFrameHeight&&l.height){n="height:"+(l.height-m.height)+"px"}return{$comp:l,id:l.id,fgid:l.id+"-frame",ui:l.ui,uiCls:l.uiCls,frameCls:l.frameCls,frameBodyCls:l.layoutTargetCls||"",baseCls:l.baseCls,hasTabGuard:l.tabGuard,top:!!m.top,left:!!m.left,right:!!m.right,bottom:!!m.bottom,mcStyle:n,frameElCls:""}},getFrameInfo:function(){if(Ext.supports.CSS3BorderRadius||!this.frame){return false}var D=this,J=D.frameInfoCache,Q=D.getFramingInfoCls()+"-frameInfo",C=J[Q],L,H,M,B,P,O,I,K,E,R,G,S,N,F;if(C==null){L=Ext.fly(D.getStyleProxy(Q),"frame-style-el");H=L.getStyle("font-family");if(H){H=H.split("-");M=parseInt(H[1],10);B=parseInt(H[2],10);P=parseInt(H[3],10);O=parseInt(H[4],10);I=parseInt(H[5],10);K=parseInt(H[6],10);E=parseInt(H[7],10);R=parseInt(H[8],10);G=parseInt(H[9],10);S=parseInt(H[10],10);N=parseInt(H[11],10);F=parseInt(H[12],10);C={table:H[0].charAt(0)==="t",vertical:H[0].charAt(1)==="v",top:M,right:B,bottom:P,left:O,width:O+B,height:M+P,border:{top:I,right:K,bottom:E,left:R,width:R+K,height:I+E},padding:{top:G,right:S,bottom:N,left:F,width:F+S,height:G+N}}}else{C=false}J[Q]=C}D.frame=!!C;D.frameSize=C;return C},getFramingInfoCls:function(){return this.baseCls+"-"+this.ui},getStyleProxy:function(g){var l=this.styleProxyEl||(Ext.Component.prototype.styleProxyEl=Ext.getBody().createChild({role:"presentation",style:{position:"absolute",top:"-10000px"}},null,true));l.className=g;return l},getFrameTpl:function(f){return this.lookupTpl(f?"frameTableTpl":"frameTpl")},initContainer:function(l){var g=this;if(!l&&g.el){l=g.el.dom.parentNode;g.allowDomMove=false}g.container=l.dom?l:Ext.get(l);return g.container},initOverflow:function(){var p=this,s=p.getOverflowStyle(),n=p.scrollFlags,o=p.getOverflowEl(),q=(n.y||n.x);if(!q||!o||!o.isElement){return}p.overflowInited=true;o.setStyle(s)},initFramingTpl:function(g){var l=this.getFrameTpl(g);if(l&&!l.applyRenderTpl){this.setupFramingTpl(l)}return l},initRenderTpl:function(){var f=this.lookupTpl("renderTpl");if(f&&!f.renderContent){this.setupRenderTpl(f)}return f},setupFramingTpl:function(f){f.applyRenderTpl=this.doApplyRenderTpl;f.renderTabGuard=this.doRenderFramingTabGuard},setupRenderTpl:function(f){f.renderBody=f.renderContent=this.doRenderContent},updateFrame:function(){if(Ext.supports.CSS3BorderRadius||!this.frame){return}var O=this,C=O.el.dom,P=O.frameTable,G=O.frameBody,M=G.dom,Q=O.getFrameInfo(),L,D,H,E,A,K,J,F,B,I,N;H=document.createElement("div");K=O.getFrameRenderData();K.hasTabGuard=false;F=O.getFrameTpl(Q.table);F.insertFirst(H,K);N=H.querySelectorAll("[data-ref]");I=H.querySelector('[data-ref="frameBody"]');for(A=M;A.parentNode!==C;){A=A.parentNode}while(H.firstChild){C.insertBefore(H.firstChild,A)}I.parentNode.replaceChild(M,I);M.className=I.className;G.setSize();L=O.getChildEls();if(P){P.destroy();O.frameTable=null}for(D in L){if(L[D].frame){E=O[D];if(E&&E!==G){E.destroy();O[D]=null}}}for(B=N.length;B--;){D=(J=N[B]).getAttribute("data-ref");if(D!=="frameBody"){O[D]=new Ext.dom.Element(J)}}},frameInfoCache:{}}},0,0,0,0,0,0,[Ext.util,"Renderable"],0));(Ext.cmd.derive("Ext.state.Provider",Ext.Base,{prefix:"ext-",constructor:function(l){var g=this;Ext.apply(g,l);g.state={};g.mixins.observable.constructor.call(g)},get:function(l,n){var m=this.state[l];return m===undefined?n:m},clear:function(l){var g=this;delete g.state[l];g.fireEvent("statechange",g,l,null)},set:function(n,l){var m=this;m.state[n]=l;m.fireEvent("statechange",m,n,l)},decodeValue:function(w){var z=this,C=/^(a|n|d|b|s|o|e)\:(.*)$/,A=C.exec(unescape(w)),v,y,B,t,x,u;if(!A||!A[1]){return}y=A[1];w=A[2];switch(y){case"e":return null;case"n":return parseFloat(w);case"d":return new Date(Date.parse(w));case"b":return(w==="1");case"a":v=[];if(w){t=w.split("^");x=t.length;for(u=0;u<x;u++){w=t[u];v.push(z.decodeValue(w))}}return v;case"o":v={};if(w){t=w.split("^");x=t.length;for(u=0;u<x;u++){w=t[u];B=w.split("=");v[B[0]]=z.decodeValue(B[1])}}return v;default:return w}},encodeValue:function(o){var u="",p=0,s,t,q;if(o==null){return"e:1"}else{if(typeof o==="number"){s="n:"+o}else{if(typeof o==="boolean"){s="b:"+(o?"1":"0")}else{if(Ext.isDate(o)){s="d:"+o.toUTCString()}else{if(Ext.isArray(o)){for(t=o.length;p<t;p++){u+=this.encodeValue(o[p]);if(p!==t-1){u+="^"}}s="a:"+u}else{if(typeof o==="object"){for(q in o){if(typeof o[q]!=="function"&&o[q]!==undefined){u+=q+"="+this.encodeValue(o[q])+"^"}}s="o:"+u.substring(0,u.length-1)}else{s="s:"+o}}}}}}return escape(s)}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.state,"Provider"],0));(Ext.cmd.derive("Ext.state.Manager",Ext.Base,{singleton:true,constructor:function(){this.provider=new Ext.state.Provider()},setProvider:function(f){this.provider=f},get:function(g,l){return this.provider.get(g,l)},set:function(l,g){this.provider.set(l,g)},clear:function(f){this.provider.clear(f)},getProvider:function(){return this.provider}},1,0,0,0,0,0,[Ext.state,"Manager"],0));(Ext.cmd.derive("Ext.state.Stateful",Ext.Base,{mixinId:"state",config:{stateful:null},saveDelay:100,constructor:function(){var f=this;if(!f.stateEvents){f.stateEvents=[]}if(f.stateful){f.addStateEvents(f.stateEvents);f.initState()}},addStateEvents:function(p){var u=this,q,o,s,t;if(u.stateful&&u.getStateId()){t=(typeof p==="string")?arguments:p;s=u.stateEventsByName||(u.stateEventsByName={});for(q=t.length;q--;){o=t[q];if(o&&!s[o]){s[o]=1;u.on(o,u.onStateChange,u)}}}},onStateChange:function(){var n=this,p=n.saveDelay,m,o;if(!n.stateful){return}if(p){if(!n.stateTask){m=Ext.state.Stateful;o=m.runner||(m.runner=new Ext.util.TaskRunner());n.stateTask=o.newTask({run:n.saveState,scope:n,interval:p,repeat:1,fireIdleEvent:false})}n.stateTask.start()}else{n.saveState()}},saveState:function(){var F=this,B=F.getStateful(),C=B&&F.getStateId(),G=F.hasListeners,w,v,A,y,z,x,D,E;if(C){D=F.getState()||{};if(Ext.isObject(B)){v=F.self.getConfigurator();v=v.configs;for(z in B){if(B[z]){if(!(z in D)){w=v[z];D[z]=w?F[w.get]():F[z]}}else{delete D[z]}}}A=F.getPlugins()||[];for(z=0,x=A.length;z<x;z++){y=A[z];if(y&&y.getState){E=y.getState(D);if(E&&!D[y.ptype]){D[y.ptype]=E}}}if(!G.beforestatesave||F.fireEvent("beforestatesave",F,D)!==false){Ext.state.Manager.set(C,D);if(G.statesave){F.fireEvent("statesave",F,D)}}}},getState:function(){return null},applyState:function(f){if(f){Ext.apply(this,f)}},getStateId:function(){var f=this;return f.stateId||(f.autoGenId?null:f.id)},initState:function(){var t=this,A=t.stateful&&t.getStateId(),u=t.hasListeners,B,C,x,v,y,w,z;if(A){C=Ext.state.Manager.get(A);if(C){B=Ext.apply({},C);if(!u.beforestaterestore||t.fireEvent("beforestaterestore",t,C)!==false){y=t.getPlugins()||[];for(x=0,v=y.length;x<v;x++){w=y[x];if(w){z=w.ptype;if(w.applyState){w.applyState(B[z],C)}delete B[z]}}t.applyState(B);if(u.staterestore){t.fireEvent("staterestore",t,C)}}}}},savePropToState:function(u,o,p){var s=this,q=s[u],t=s.initialConfig;if(s.hasOwnProperty(u)){if(!t||t[u]!==q){if(o){o[p||u]=q}return true}}return false},savePropsToState:function(n,p){var q=this,s,o;if(typeof n==="string"){q.savePropToState(n,p)}else{for(s=0,o=n.length;s<o;++s){q.savePropToState(n[s],p)}}return p},destroy:function(){var f=this.stateTask;if(f){f.destroy();this.stateTask=null}}},1,0,0,0,0,0,[Ext.state,"Stateful"],0));(Ext.cmd.derive("Ext.util.Focusable",Ext.Base,{mixinId:"focusable",hasFocus:false,focusable:false,focusCls:"focus",initFocusable:Ext.emptyFn,initFocusableEvents:function(){this.initFocusableElement()},getFocusClsEl:function(){return this.getFocusEl()},getFocusEl:function(){return this.element||this.el},destroyFocusable:function(){var f=this;Ext.destroy(f.focusListeners);f.focusListeners=f.focusEnterEvent=f.focusTask=null;f.focusEl=f.ariaEl=null},enableFocusable:Ext.emptyFn,disableFocusable:function(){var m=this,o,n=m.focusCls,p;if(m.hasFocus){o=m.findFocusTarget();if(o){o.focus()}}p=m.getFocusClsEl();if(n&&p){p.removeCls(m.removeClsWithUI(n,true))}},isFocusable:function(n){var l=this,m;if(!l.focusable&&(!l.isContainer||!n)){return false}m=l.getFocusEl();if(m&&l.canFocus()){return m.isFocusable(n)}return false},canFocus:function(o,m){var n=this,p;p=(n.isContainer||n.focusable)&&n.rendered&&!n.destroying&&!n.destroyed&&!n.disabled&&(o||n.isVisible(true));return p||(m&&!!n.findFocusTarget())},focus:function(y,t,w,s){var q=this,v,x,u;if((!q.focusable&&!q.isContainer)||q.destroyed||q.destroying){return}if(t){q.getFocusTask().delay(Ext.isNumber(t)?t:10,q.focus,q,[y,false,w,s]);return q}q.cancelFocus();if(q.canFocus()){if(v=q.getFocusEl()){if(v.isComponent){return v.focus(y,t,w,s)}x=v.dom;if(x){if(q.floating){u=q.container.dom.scrollTop}v.focus();if(y){if(Ext.isArray(y)){if(q.selectText){q.selectText.apply(q,y)}}else{if(x.select){x.select()}else{if(q.selectText){q.selectText()}}}}Ext.callback(w,s)}if(q.floating){if(u!==undefined){q.container.dom.scrollTop=u}}}}else{v=q.findFocusTarget();if(v){return v.focus(y,t,w,s)}}return q},cancelFocus:function(){var f=this.getFocusTask();if(f){f.cancel()}},beforeBlur:Ext.emptyFn,onBlur:function(s){var e=this,p=e.focusableContainer,o=e.focusCls,q;if(!e.focusable||e.destroying){return}e.hasFocus=false;e.beforeBlur(s);if(p){p.beforeFocusableChildBlur(e,s)}q=e.getFocusClsEl();if(o&&q){q.removeCls(e.removeClsWithUI(o,true))}e.fireEvent("blur",e,s);e.postBlur(s);if(p){p.afterFocusableChildBlur(e,s)}},postBlur:Ext.emptyFn,beforeFocus:Ext.emptyFn,onFocus:function(s){var e=this,p=e.focusableContainer,o=e.focusCls,q;if(!e.focusable){return}if(e.canFocus()){e.beforeFocus(s);if(p){p.beforeFocusableChildFocus(e,s)}q=e.getFocusClsEl();if(o&&q){q.addCls(e.addClsWithUI(o,true))}if(!e.hasFocus){e.hasFocus=true;e.fireEvent("focus",e,s)}e.postFocus(s);if(p){p.afterFocusableChildFocus(e,s)}}},postFocus:Ext.emptyFn,getTabIndex:function(){var l=this,m,n;if(!l.focusable){return}m=l.rendered&&l.getFocusEl();if(m){if(m.isComponent){n=m.getTabIndex()}else{if(m.isElement){n=m.getAttribute("tabIndex")}else{return}}l.tabIndex=n}else{n=l.tabIndex}return n-0},setTabIndex:function(m,p){var n=this,o;if(!n.focusable){return}n.tabIndex=m;if(!n.rendered){return}o=p||n.getFocusEl();if(o){if(o.isComponent){o.setTabIndex(m)}else{if(o.isElement){o.set({tabIndex:m})}}}},onFocusEnter:function(e){var l=this;if(l.destroying||l.destroyed){return}if(l.floating&&l!==l.zIndexManager.getActive()){l.toFront(true)}l.focusEnterEvent=e;l.containsFocus=true;l.fireEvent("focusenter",l,e)},onFocusLeave:function(e){var l=this;if(l.destroying||l.destroyed){return}l.focusEnterEvent=null;l.containsFocus=false;l.fireEvent("focusleave",l,e)},privates:{revertFocus:function(){var l=this,m=l.focusEnterEvent,n;if(l.preventRefocus||!l.el.contains(Ext.Element.getActiveElement())||!m){return}n=m&&m.relatedTarget;if(Ext.getDoc().contains(n)&&Ext.fly(n).isFocusable()){n.focus()}else{if(m.fromComponent&&m.fromComponent.focus){m.fromComponent.focus()}}},findFocusTarget:function(){var o=this,p,n,m;for(p=o.up(":visible(true):not([disabled]):not([destroying])");p;p=p.up(":visible(true):not([disabled]):not([destroying])")){n=Ext.ComponentQuery.query(":canfocus()",p);if(n.length){m=Ext.Array.indexOf(n,Ext.ComponentManager.getActiveComponent());return n[m+1]||n[m-1]||n[0]}if(p.isFocusable&&p.isFocusable()){return p}}},initFocusableElement:function(){var l=this,n=l.tabIndex,m=l.getFocusEl();if(m&&!m.isComponent){l.focusEl=m;if(n!=null&&l.canFocus(true)){l.setTabIndex(n,m)}m.dom.setAttribute("data-componentid",l.id)}},getFocusTask:function(){if(!this.focusTask){this.focusTask=Ext.focusTask}return this.focusTask},handleFocusEvent:function(e){var l;if(this.isFocusing(e)){l=new Ext.event.Event(e.event);l.type="focus";l.relatedTarget=e.fromElement;l.target=e.toElement;this.onFocus(l)}},handleBlurEvent:function(e){var l;if(this.isBlurring(e)){l=new Ext.event.Event(e.event);l.type="blur";l.target=e.fromElement;l.relatedTarget=e.toElement;this.onBlur(l)}},isFocusing:function(e){var l;if(this.focusable){l=this.getFocusEl();if(l){if(l.isComponent){return l.isFocusing(e)}else{return e.toElement===l.dom&&e.fromElement!==e.toElement}}}return false},isBlurring:function(e){var l;if(this.focusable){l=this.getFocusEl();if(l){if(l.isComponent){return l.isBlurring(e)}else{return e.fromElement===l.dom&&e.fromElement!==e.toElement}}}return false},blur:function(){var g=this,l;if(!g.focusable||!g.canFocus()){return}l=g.getFocusEl();if(l){g.blurring=true;l.blur();delete g.blurring}return g},disableTabbing:function(){var l=this,m=l.el,n;if(m){m.saveTabbableState()}n=l.getFocusEl();if(n){if(n.isComponent){n.disableTabbing()}else{if(n.isElement&&m&&!m.contains(n)){n.saveTabbableState()}}}},enableTabbing:function(){var l=this,m=l.el,n;n=l.getFocusEl();if(n){if(n.isComponent){n.enableTabbing()}else{if(n.isElement&&m&&!m.contains(n)){n.restoreTabbableState()}}}if(m){m.restoreTabbableState()}},updateMaskState:function(n,s){var p=this,q=p.ariaEl.dom,o;if(n){p.disableTabbing();p.setMasked(true);if(q){q.setAttribute("aria-busy","true");o=q.getAttribute("aria-describedby");if(o){p._savedAriaDescribedBy=o}q.setAttribute("aria-describedby",s.ariaEl.id)}}else{p.enableTabbing();p.setMasked(false);if(q){q.removeAttribute("aria-busy");o=q.getAttribute("aria-describedby");q.removeAttribute("aria-describedby");if(o===s.ariaEl.id&&p._savedAriaDescribedBy){q.setAttribute("aria-describedby",p._savedAriaDescribedBy);delete p._savedAriaDescribedBy}}}}}},0,0,0,0,0,0,[Ext.util,"Focusable"],function(){if(!Ext.focusTask){Ext.focusTask=new Ext.util.DelayedTask()}}));(Ext.cmd.derive("Ext.mixin.Accessible",Ext.Mixin,{mixinConfig:{id:"accessible"},config:{ariaAttributes:{$value:null,lazy:true}},privates:{getAriaLabelEl:function(s){var p=[],v,q,t,w,u;if(s){if(Ext.isFunction(s)){return s.call(this)}else{if(!Ext.isArray(s)){s=[s]}v=this.lookupReferenceHolder();if(v){for(q=0,t=s.length;q<t;q++){w=v.lookupReference(s[q]);if(w){p.push(w.ariaEl.id)}}}}}return p.length?p.join(" "):null}}},0,0,0,0,0,0,[Ext.mixin,"Accessible"],0));(Ext.cmd.derive("Ext.mixin.Keyboard",Ext.Mixin,function(f){return{mixinConfig:{id:"keyboard"},config:{keyMap:{$value:null,cached:true,merge:function(x,z,A,t){if(x===null){return x}var y=z?Ext.Object.chain(z):{},w,u,v,e;for(w in x){if(w!=="scope"){u=w.toUpperCase();if(!t||y[u]===undefined){v=x[w];if(v){if(typeof v==="string"||typeof v==="function"){v={handler:v}}else{v=Ext.apply({handler:v.fn},v)}e=v.scope||x.scope||"self";v.scope=(e==="controller")?"self.controller":e}y[u]=v}}}return y}},keyMapEnabled:null},keyMapTarget:"el",applyKeyMap:function(u,w){var e=this,v,q,s,t;if(u){if(w&&e.isConfiguring){w=Ext.apply({},w)}v=u.scope||"controller";for(s in u){if(s==="scope"){continue}if(!(t=u[s])){if(!w){continue}}else{if(typeof t==="string"||typeof t==="function"){t={handler:t,scope:v}}else{if(t){t=Ext.apply({handler:t.fn,scope:v},t)}}w=w||{}}if(f.parseEntry(s,q=t||{})){w[q.name]=t}}}else{w=null}if(e._keyMapReady){e.setKeyMapListener(w&&e.getKeyMapEnabled())}return w||null},initKeyMap:function(){var e=this,l=e.getKeyMapEnabled();e._keyMapReady=true;if(l===null){e.setKeyMapEnabled(true)}else{e.setKeyMapListener(l&&e.getKeyMap())}},updateKeyMapEnabled:function(e){this.setKeyMapListener(e&&this._keyMapReady&&this.getKeyMap())},privates:{_keyMapReady:false,callKeyMapEntry:function(l,e){return l&&Ext.callback(l.handler,l.scope,[e,this],0,this)},findKeyMapEntry:function(e){var o=this,s=o.getKeyMap(),q,p;if(s){for(q in s){if(f.matchEntry(q,p=s[q],e)){return p}}}return null},onKeyMapEvent:function(e){var m=this,n=m.getKeyMapEnabled()?m.findKeyMapEntry(e):null;return m.callKeyMapEntry(n,e)},setKeyMapListener:function(p){var o=this,e=o._keyMapListener,n;if(e){e.destroy();e=null}if(p){n=o[o.keyMapTarget];if(typeof n==="function"){n=n.call(o)}e=n.on({destroyable:true,scope:o,keydown:"onKeyMapEvent",keypress:"onKeyMapEvent"})}o._keyMapListener=e||null},statics:{_charCodeRe:/^#([\d]+)$/,_hyphenRe:/^[a-z]+\-/i,_keyMapEvents:{charCode:"keypress",keyCode:"keydown"},matchEntry:function(q,e,s){var o=s.browserEvent,p;if(s.type!==e.event){return false}if(!(p=e.charCode)){if(e.keyCode!==s.keyCode||!e.shiftKey!==!o.shiftKey){return false}}else{if(s.getCharCode()!==p){return false}}return !e.ctrlKey===!o.ctrlKey&&!e.altKey===!o.altKey&&!e.metaKey===!o.metaKey},parseEntry:function(F,G){F=F.toUpperCase();var J=this,E=Ext.event.Event,H=E.keyFlags,B=J._hyphenRe.test(F)?"-":"+",I=(F===B)?[B]:F.split(B),A=I.length-1,z=I[A],D=z,K="keyCode",C,n,e;for(n=0;n<A;n++){G[H[I[n]]]=true}if(A){D=G.ctrlKey?"CTRL+":"";D+=G.altKey?"ALT+":"";D+=G.metaKey?"META+":"";D+=G.shiftKey?"SHIFT+":"";D+=z}G.name=D;if(isNaN(C=E[z])){if(!(e=J._charCodeRe.exec(z))){if(z.length===1){C=z.charCodeAt(0)}}else{C=+e[1]}if(C){K="charCode"}else{C=+z}}G.event=G.event||J._keyMapEvents[K];return !isNaN(C)&&(G[K]=C)}}}}},0,0,0,0,0,0,[Ext.mixin,"Keyboard"],0));(Ext.cmd.derive("Ext.Component",Ext.Base,{alternateClassName:"Ext.AbstractComponent",statics:{AUTO_ID:1000,pendingLayouts:null,layoutSuspendCount:0,DIRECTION_TOP:"top",DIRECTION_RIGHT:"right",DIRECTION_BOTTOM:"bottom",DIRECTION_LEFT:"left",VERTICAL_DIRECTION_Re:/^(?:top|bottom)$/,INVALID_ID_CHARS_Re:/[\.,\s]/g,ariaHighContrastModeCls:"x-aria-highcontrast",cancelLayout:function(n,l){var m=this.runningLayoutContext||this.pendingLayouts;if(m){m.cancelComponent(n,false,l)}},fromElement:function(l,m,n){return Ext.ComponentManager.fromElement(l,m,n)},flushLayouts:function(){var g=this,l=g.pendingLayouts;if(l&&l.invalidQueue.length){g.pendingLayouts=null;g.runningLayoutContext=l;Ext.override(l,{runComplete:function(){g.runningLayoutContext=null;var e=Ext.scroll.Scroller,f=Ext.GlobalEvents,n;if(e.viewport){e.viewport.restoreState()}n=this.callParent();if(f.hasListeners.afterlayout){f.fireEvent("afterlayout")}return n}});l.run()}},resumeLayouts:function(f){if(this.layoutSuspendCount&&!--this.layoutSuspendCount){if(f){this.flushLayouts()}if(Ext.GlobalEvents.hasListeners.resumelayouts){Ext.GlobalEvents.fireEvent("resumelayouts")}}},suspendLayouts:function(){++this.layoutSuspendCount},updateLayout:function(q,n){var p=this,s=p.runningLayoutContext,o;if(s){s.queueInvalidate(q)}else{o=p.pendingLayouts||(p.pendingLayouts=new Ext.layout.Context());o.queueInvalidate(q);if(!n&&!p.layoutSuspendCount&&!q.isLayoutSuspended()){p.flushLayouts()}}}},$configPrefixed:false,$configStrict:false,clearPropertiesOnDestroy:"async",manageLayoutScroll:true,config:{data:null,maxHeight:null,maxWidth:null,minHeight:null,minWidth:null,scrollable:null},renderConfig:{touchAction:null},defaultBindProperty:"html",alignTarget:null,autoRender:false,autoShow:false,baseCls:"x-component",childEls:{frameTable:{frame:true},frameTL:{frame:"tl"},frameTC:{frame:"tc"},frameTR:{frame:"tr"},frameML:{frame:"ml"},frameBody:{frame:"mc"},frameMR:{frame:"mr"},frameBL:{frame:"bl"},frameBC:{frame:"bc"},frameBR:{frame:"br"}},componentLayout:"autocomponent",defaultAlign:"c-c",disabled:false,disabledRe:/^(?:button|input|select|textarea|optgroup|option|fieldset)$/i,nonMaskableRe:(function(){var f=["input","select","textarea","optgroup","option","table"];if(Ext.isIE9m&&!(Ext.isIE9&&!Ext.isIEQuirks)){f.push("p")}return new RegExp("^(?:"+f.join("|")+")$","i")}()),disabledCls:"x-item-disabled",draggable:false,floating:false,hidden:false,hideMode:"display",maskElement:null,renderTpl:"{%this.renderContent(out,values)%}",resizeHandles:"all",shrinkWrap:2,toFrontOnShow:true,synthetic:false,tplWriteMode:"overwrite",ui:"default",uiCls:[],userCls:null,weight:null,allowDomMove:true,autoGenId:false,borderBoxCls:"x-border-box",componentLayoutCounter:0,contentPaddingProperty:"padding",deferLayouts:false,frameSize:null,horizontalPosProp:"left",isComponent:true,_isLayoutRoot:false,layoutSuspendCount:0,liquidLayout:false,maskOnDisable:true,rendered:false,rootCls:"x-body",scrollerCls:"x-scroll-scroller",_scrollFlags:{auto:{auto:{overflowX:"auto",overflowY:"auto",x:true,y:true,both:true},"false":{overflowX:"auto",overflowY:"hidden",x:true,y:false,both:false},scroll:{overflowX:"auto",overflowY:"scroll",x:true,y:true,both:true}},"false":{auto:{overflowX:"hidden",overflowY:"auto",x:false,y:true,both:false},"false":{overflowX:"hidden",overflowY:"hidden",x:false,y:false,both:false},scroll:{overflowX:"hidden",overflowY:"scroll",x:false,y:true,both:false}},scroll:{auto:{overflowX:"scroll",overflowY:"auto",x:true,y:true,both:true},"false":{overflowX:"scroll",overflowY:"hidden",x:true,y:false,both:false},scroll:{overflowX:"scroll",overflowY:"scroll",x:true,y:true,both:true}},none:{overflowX:"",overflowY:"",x:false,y:false,both:false}},_scrollableCfg:{x:{x:true,y:false},y:{x:false,y:true},horizontal:{x:true,y:false},vertical:{x:false,y:true},both:{x:true,y:true},"true":{x:true,y:true}},validIdRe:Ext.validIdRe,constructor:function(B){var v=this,z,w,u,x,C,y,A,t;B=B||{};if(B.initialConfig){if(B.isAction){v.baseAction=B}B=B.initialConfig}else{if(B.tagName||B.dom||Ext.isString(B)){B={applyTo:B,id:B.id||B}}}v.initialConfig=B;v.getId();v.protoEl=new Ext.util.ProtoElement();v.initConfig(B);if(v.scrollable==null){C=v.autoScroll;if(C){t=!!C}else{y=v.overflowX;A=v.overflowY;if(y||A){t={x:(y&&y!=="hidden")?y:false,y:(A&&A!=="hidden")?A:false}}}if(t){v.setScrollable(t)}}u=v.xhooks;if(u){delete v.xhooks;Ext.override(v,u)}v.mixins.elementCt.constructor.call(v);v.setupProtoEl();if(v.cls){v.initialCls=v.cls;v.protoEl.addCls(v.cls)}if(v.style){v.initialStyle=v.style;v.protoEl.setStyle(v.style)}v.renderData=v.renderData||{};v.initComponent();if(!v.preventRegister){Ext.ComponentManager.register(v)}v.mixins.state.constructor.call(v);v.addStateEvents("resize");x=v.getController();if(x){x.init(v)}if(v.plugins){for(z=0,w=v.plugins.length;z<w;z++){v.plugins[z]=v.initPlugin(v.plugins[z])}}v.loader=v.getLoader();if(v.disabled){v.disabled=false;v.disable(true)}if(v.renderTo){v.render(v.renderTo)}if(v.autoShow&&!v.$initParent){v.show()}if(v.baseAction){v.baseAction.addComponent(v)}},beforeInitConfig:function(){this.mixins.observable.constructor.call(this)},addCls:function(n){var l=this,m=l.rendered?l.el:l.protoEl;m.addCls.apply(m,arguments);return l},addClsWithUI:function(y,t){var u=this,v=[],w=0,x=u.uiCls=Ext.Array.clone(u.uiCls),z=u.activeUI,A,s;if(typeof y==="string"){y=(y.indexOf(" ")<0)?[y]:Ext.String.splitWords(y)}A=y.length;for(;w<A;w++){s=y[w];if(s&&!u.hasUICls(s)){x.push(s);if(z){v=v.concat(u.addUIClsToElement(s))}}}if(t!==true&&z){u.addCls(v)}return v},afterComponentLayout:function(p,s,q,u){var o=this,t=o.scrollable;if(++o.componentLayoutCounter===1){o.afterFirstLayout(p,s)}else{if(o.manageLayoutScroll&&t){t.restoreState()}}if(p!==q||s!==u){o.onResize(p,s,q,u)}if(o.floating){o.onAfterFloatLayout()}},addPlugin:function(g){var l=this;g=l.constructPlugin(g);if(l.plugins){l.plugins.push(g)}else{l.plugins=[g]}if(l.pluginsInitialized){l.initPlugin(g)}return g},addPropertyToState:function(n,o,p){var q=this,s=arguments.length;if(s===3||q.hasOwnProperty(o)){if(s<3){p=q[o]}if(p!==q.initialConfig[o]){(n||(n={}))[o]=p}}return n},addUIClsToElement:function(w){var q=this,u=q.baseCls+"-"+q.ui+"-"+w,v=["x-"+w,q.baseCls+"-"+w,u],s,x,t,y;if(q.rendered&&q.frame&&!Ext.supports.CSS3BorderRadius){u+="-";s=q.getChildEls();for(x in s){y=s[x].frame;if(y&&y!==true){t=q[x];if(t){t.addCls(u+y)}}}}return v},removeUIClsFromElement:function(w){var q=this,u=q.baseCls+"-"+q.ui+"-"+w,v=["x-"+w,q.baseCls+"-"+w,u],s,x,t,y;if(q.rendered&&q.frame&&!Ext.supports.CSS3BorderRadius){u+="-";s=q.getChildEls();for(x in s){y=s[x].frame;if(y&&y!==true){t=q[x];if(t){t.removeCls(u+y)}}}}return v},adjustPosition:function(p,m){var o=this,n;if(o.isContainedFloater()){n=o.floatParent.getTargetEl().getViewRegion();p+=n.left;m+=n.top}return{x:p,y:m}},afterHide:function(m,o){var n=this,p=n.focusableContainer;delete n.getInherited().topmostFocusEvent;n.hiddenByLayout=null;if(n.ownerLayout){n.updateLayout({isRoot:false})}if(p){p.onFocusableChildHide(n)}n.fireHierarchyEvent("hide");n.fireEvent("hide",n);Ext.callback(m,o||n)},afterSetPosition:function(n,l){var m=this;m.onPosition(n,l);if(m.hasListeners.move){m.fireEvent("move",m,n,l)}},afterShow:function(y,w,s){var q=this,x=q.el,v,u,t;y=q.getAnimateTarget(y);if(!q.ghost){y=null}if(y){u={x:x.getX(),y:x.getY(),width:x.dom.offsetWidth,height:x.dom.offsetHeight};v={x:y.getX(),y:y.getY(),width:y.dom.offsetWidth,height:y.dom.offsetHeight};q.fireHierarchyEvent("show");t=q.ghost();t.el.stopAnimation();t.setX(-10000);q.ghostBox=u;t.el.animate({from:v,to:u,listeners:{afteranimate:function(){if(!q.destroying){t.componentLayout.lastComponentSize=null;q.unghost();q.ghostBox=null;q.onShowComplete(w,s)}}}})}else{q.onShowComplete(w,s);q.fireHierarchyEvent("show")}},animate:function(Q){var I=this,N,H,J,S,P,R,L,D,G,O,C,F,M,E,w,K;Q=Q||{};P=Q.to||{};if(Ext.fx.Manager.hasFxBlock(I.id)){return I}N=Ext.isDefined(P.width);if(N){S=Ext.Number.constrain(P.width,I.minWidth,I.maxWidth)}H=Ext.isDefined(P.height);if(H){J=Ext.Number.constrain(P.height,I.minHeight,I.maxHeight)}if(!Q.dynamic&&(N||H)){D=(Q.from?Q.from.width:undefined)||I.getWidth();G=D;O=(Q.from?Q.from.height:undefined)||I.getHeight();C=O;F=false;if(H&&J>O){C=J;F=true}if(N&&S>D){G=S;F=true}if(H||N){K=I.el.getStyle("overflow");if(K!=="hidden"){I.el.setStyle("overflow","hidden")}}if(F){R=!Ext.isNumber(I.width);L=!Ext.isNumber(I.height);I.setSize(G,C);I.el.setSize(D,O);if(R){delete I.width}if(L){delete I.height}}if(N){P.width=S}if(H){P.height=J}}M=I.constrain;E=I.constrainHeader;if(M||E){I.constrain=I.constrainHeader=false;w=Q.callback;Q.callback=function(){I.constrain=M;I.constrainHeader=E;if(w){w.call(Q.scope||I,arguments)}if(K!=="hidden"){I.el.setStyle("overflow",K)}}}return I.mixins.animate.animate.apply(I,arguments)},applyScrollable:function(q,p){var s=this,n=s.rendered,o;if(q){if(q===true||typeof q==="string"){o=s._scrollableCfg[q];q=o}if(p){p.setConfig(q);q=p}else{q=Ext.Object.chain(q);if(n){q.element=s.getOverflowEl()}q=Ext.scroll.Scroller.create(q,s.scrollableType);q.component=s}}else{if(p){q=p;p.setConfig({x:false,y:false})}}if(s.rendered&&!s.destroying&&!s.destroyed){if(q){s.getOverflowStyle()}else{s.scrollFlags=s._scrollFlags.none}s.updateLayout()}return q},applyTouchAction:function(l,g){if(g!=null){l=Ext.merge({},g,l)}return l},beforeDestroy:Ext.emptyFn,beforeLayout:function(){if(this.floating){this.onBeforeFloatLayout()}},beforeSetPosition:function(s,u,z){var v=this,t=null,x,y,A,w;if(s){if(Ext.isNumber(x=s[0])){z=u;u=s[1];s=x}else{if((x=s.x)!==undefined){z=u;u=s.y;s=x}}}if(v.constrain||v.constrainHeader){t=v.calculateConstrainedPosition(null,[s,u],true);if(t){s=t[0];u=t[1]}}y=(s!==undefined);A=(u!==undefined);if(y||A){v.x=s;v.y=u;w=v.adjustPosition(s,u);t={x:w.x,y:w.y,anim:z,hasX:y,hasY:A}}return t},beforeShow:Ext.emptyFn,bubble:function(n,o,p){var m=this;while(m){if(n.apply(o||m,p||[m])===false){break}m=m.getBubbleTarget()}return this},clearListeners:function(){var f=this;f.mixins.observable.clearListeners.call(f);f.mixins.componentDelegation.clearDelegatedListeners.call(f)},cloneConfig:function(n){n=n||{};var m=n.id||Ext.id(),p=Ext.applyIf(n,this.initialConfig),o;p.id=m;o=Ext.getClass(this);return new o(p)},destroy:function(){var f=this;if(!f.hasListeners.beforedestroy||f.fireEvent("beforedestroy",f)!==false){f.isDestroying=f.destroying=true;f.doDestroy();f.clearListeners();f.isDestroying=f.destroying=false;f.callParent();f.mixins.componentDelegation.destroyComponentDelegation.call(f);f.mixins.observable.destroyObservable.call(f,true)}},doDestroy:function(){var u=this,s=u.focusableContainer,q=u.renderSelectors,t,o,p;o=u.floatParent||u.ownerCt;if(u.floating){delete u.floatParent;if(u.zIndexManager&&!u.zIndexManager.destroyed){u.zIndexManager.unregister(u)}u.floating=true}u.removeBindings();if(!u.beforeDestroy.$emptyFn){u.beforeDestroy()}u.destroyBindable();if(o&&o.remove){o.remove(u,false)}u.stopAnimation();if(u.rendered){Ext.destroy(u.loadMask,u.dd,u.resizer,u.proxy,u.proxyWrap,u.resizerComponent,u.scrollable,u.contentEl)}if(s){s.onFocusableChildDestroy(u)}if(u.focusable){u.destroyFocusable()}Ext.destroy(u.componentLayout,u.loadMask,u.floatingDescendants);if(!u.onDestroy.$emptyFn){u.onDestroy()}Ext.destroy(u.plugins);if(u.rendered){Ext.Component.cancelLayout(u,true)}u.componentLayout=null;if(u.hasListeners.destroy){u.fireEvent("destroy",u)}if(!u.preventRegister){Ext.ComponentManager.unregister(u)}u.mixins.state.destroy.call(u);if(u.floating){u.onFloatDestroy()}if(u.rendered){if(u.showListenerIE){u.showListenerIE.destroy();u.showListenerIE=null}if(!u.preserveElOnDestroy){u.el.destroy()}u.el.component=null;u.mixins.elementCt.destroy.call(u);if(q){for(t in q){if(q.hasOwnProperty(t)){p=u[t];if(p){delete u[t];p.destroy()}}}}u.rendered=false}},disable:function(p,n){var o=this,q=o.focusableContainer,s=o.getInherited();if(!n){s.disabled=true;o.savedDisabled=true}if(o.maskOnDisable){s.disableMask=true}if(!o.disabled){if(q){q.beforeFocusableChildDisable(o)}o.addCls(o.disabledCls);if(o.rendered){o.onDisable()}else{o.disableOnRender=true}o.disabled=true;if(p!==true){o.fireEvent("disable",o)}if(q){q.onFocusableChildDisable(o)}}return o},doFireEvent:function(q,o,s){var n=this,p;p=n.mixins.observable.doFireEvent.call(n,q,o,s);if(p!==false&&!n.destroyed){p=n.mixins.componentDelegation.doFireDelegatedEvent.call(n,q,o)}return p},enable:function(p,n){var o=this,q=o.focusableContainer,s=o.getInherited();if(!n){delete o.getInherited().disabled;o.savedDisabled=false}if(o.maskOnDisable){delete s.disableMask}if(o.disabled){if(!(n&&s.hasOwnProperty("disabled"))){if(q){q.beforeFocusableChildEnable(o)}o.disableOnRender=false;o.removeCls(o.disabledCls);if(o.rendered){o.onEnable()}o.disabled=false;if(p!==true){o.fireEvent("enable",o)}if(q){q.onFocusableChildEnable(o)}}}return o},findParentBy:function(l){var g;for(g=this.getRefOwner();g&&!l(g,this);g=g.getRefOwner()){}return g||null},findParentByType:function(f){return Ext.isFunction(f)?this.findParentBy(function(e){return e.self===f||e.constructor===f}):this.up(f)},findPlugin:function(m){var o,p=this.plugins,n=p&&p.length;for(o=0;o<n;o++){if(p[o].ptype===m){return p[o]}}},getAnimateTarget:function(f){f=f||this.animateTarget;if(f){f=f.isComponent?f.getEl():Ext.get(f)}return f||null},getBubbleTarget:function(){return this.getRefOwner()},getComponentLayout:function(){var f=this;if(!f.componentLayout||!f.componentLayout.isLayout){f.setComponentLayout(Ext.layout.Layout.create(f.componentLayout,"autocomponent"))}return f.componentLayout},getEl:function(){return this.el},getHeight:function(){return this.el.getHeight()},initInheritedState:function(n){var l=this,m=l.componentLayout;if(l.hidden){n.hidden=true}if(l.collapseImmune){n.collapseImmune=true}if(l.modelValidation!==undefined){n.modelValidation=l.modelValidation}if(l.savedDisabled){n.disabled=true}l.mixins.bindable.initInheritedState.call(l,n);if(m&&m.initInheritedState){m.initInheritedState(n)}},getId:function(){var l=this,g;if(!(l.id||(l.id=l.initialConfig.id))){g=l.getXType();if(g){g=g.replace(Ext.Component.INVALID_ID_CHARS_Re,"-")}else{g=Ext.name.toLowerCase()+"-comp"}l.id=g+"-"+l.getAutoId()}return l.id},getItemId:function(){return this.itemId||this.id},getLoader:function(){var g=this,l=g.loader;if(l){if(!l.isLoader){g.loader=new Ext.ComponentLoader(Ext.apply({target:g},l))}else{l.setTarget(g)}return g.loader}return null},getMaskTarget:function(){return this.maskElement?this[this.maskElement]:null},getPlugin:function(n){var q,s=this.plugins,o=s&&s.length,p;for(q=0;q<o;q++){p=s[q];if(p.id===n||p.pluginId===n){return p}}return null},getPosition:function(s){var q=this,o,p=q.isContainedFloater(),n;if((s===true)&&!p){return[q.getLocalX(),q.getLocalY()]}o=q.getXY();if((s===true)&&p){n=q.floatParent.getTargetEl().getViewRegion();o[0]-=n.left;o[1]-=n.top}return o},getScrollX:function(){var f=this.getScrollable();return f?f.getPosition().x:0},getScrollY:function(){var f=this.getScrollable();return f?f.getPosition().y:0},getSize:function(f){return this.el.getSize(f)},getSizeModel:function(Q){var M=this,I=Ext.layout.SizeModel,F=M.componentLayout.ownerContext,H=M.width,K=M.height,J,G,C,D,B,L,O,N,P,A,E=M.floating||M.floated;if(F){A=F.widthModel;B=F.heightModel}if(!A||!B){C=((J=typeof H)==="number");D=((G=typeof K)==="number");P=E||!(L=M.ownerLayout);if(P){O=Ext.layout.Layout.prototype.autoSizePolicy;N=E?3:M.shrinkWrap;if(C){A=I.configured}if(D){B=I.configured}}else{O=L.getItemSizePolicy(M,Q);N=L.isItemShrinkWrap(M)}if(F){F.ownerSizePolicy=O}N=(N===true)?3:(N||0);if(P&&N){if(H&&J==="string"){N&=2}if(K&&G==="string"){N&=1}}if(N!==3){if(!Q){Q=M.ownerCt&&M.ownerCt.getSizeModel()}if(Q){N|=(Q.width.shrinkWrap?1:0)|(Q.height.shrinkWrap?2:0)}}if(!A){if(!O.setsWidth){if(C){A=I.configured}else{A=(N&1)?I.shrinkWrap:I.natural}}else{if(O.readsWidth){if(C){A=I.calculatedFromConfigured}else{A=(N&1)?I.calculatedFromShrinkWrap:I.calculatedFromNatural}}else{A=I.calculated}}}if(!B){if(!O.setsHeight){if(D){B=I.configured}else{B=(N&2)?I.shrinkWrap:I.natural}}else{if(O.readsHeight){if(D){B=I.calculatedFromConfigured}else{B=(N&2)?I.calculatedFromShrinkWrap:I.calculatedFromNatural}}else{B=I.calculated}}}}return A.pairsByHeightOrdinal[B.ordinal]},getState:function(){var m=this,l=null,n=m.getSizeModel();if(n.width.configured){l=m.addPropertyToState(l,"width")}if(n.height.configured){l=m.addPropertyToState(l,"height")}return l},getUserCls:function(){return this.userCls},setUserCls:function(n){var m=this,l=m.userCls;if(n!==l){m.userCls=n;if(m.rendered){m.el.replaceCls(l,n)}}return l},getWidth:function(){return this.el.getWidth()},getXType:function(){return this.self.xtype},getXTypes:function(){var n=this.self,m,o,p;if(!n.xtypes){m=[];o=this;while(o){p=o.xtypes;if(p!==undefined){m.unshift.apply(m,p)}o=o.superclass}n.xtypeChain=m;n.xtypes=m.join("/")}return n.xtypes},hasCls:function(g){var l=this.rendered?this.el:this.protoEl;return l.hasCls.apply(l,arguments)},hasUICls:function(n){var m=this,l=m.uiCls||[];return Ext.Array.contains(l,n)},hide:function(o,n,q){var p=this,s=p.focusableContainer;if(p.pendingShow){p.pendingShow=false}if(!(p.rendered&&!p.isVisible())){if(!p.hasListeners.beforehide||p.fireEvent("beforehide",p)!==false||p.hierarchicallyHidden){p.getInherited().hidden=p.hidden=true;if(s){s.beforeFocusableChildHide(p)}p.fireHierarchyEvent("beforehide");if(p.rendered){p.onHide.apply(p,arguments)}}}return p},initComponent:function(){var l=this,m=l.width,n=l.height;if(l.plugins&&!l.plugins.processed){l.plugins=l.constructPlugins()}l.pluginsInitialized=true;if(m!=null||n!=null){l.setSize(m,n)}if(l.listeners){l.on(l.listeners);l.listeners=null}if(l.focusable){l.initFocusable()}},initEvents:function(){var p=this,v=p.afterRenderEvents,t,q,w,s,u;if(v){for(w in v){q=p[w];if(q&&q.on){t=v[w];for(s=0,u=t.length;s<u;++s){p.mon(q,t[s])}}}}if(p.focusable){p.initFocusableEvents()}p.initKeyMap()},is:function(f){return Ext.ComponentQuery.is(this,f)},isDescendantOf:function(l){var g;for(g=this.getRefOwner();g&&g!==l;g=g.getRefOwner()){}return g||null},isAncestor:function(f){while(f){if(f.getRefOwner()===this){return true}f=f.getRefOwner()}},isDisabled:function(){return this.disabled},isDraggable:function(){return !!this.draggable},isDroppable:function(){return !!this.droppable},isFloating:function(){return this.floating},isHidden:function(){return this.hidden},isHierarchicallyHidden:function(){var m=this,n=false,p,o;for(;(p=m.ownerCt||m.floatParent);m=p){o=p.getInherited();if(o.hidden){n=true;break}if(m.getInherited().collapseImmune){if(p.collapsed&&!m.collapseImmune){n=true;break}}else{n=!!o.collapsed;break}}return n},isLayoutChild:function(f){return !this.floating&&!!this.up(f)},isLayoutRoot:function(){var l=this,g=l.ownerLayout;if(!g||l._isLayoutRoot||l.floating){return true}return g.isItemLayoutRoot(l)},isLayoutSuspended:function(){var l=this,g;while(l){if(l.layoutSuspendCount||l.suspendLayout){return true}g=l.ownerLayout;if(!g){break}l=g.owner}return false},isVisible:function(n){var m=this,l;if(m.hidden||!m.rendered||m.destroyed){l=true}else{if(n){l=m.isHierarchicallyHidden()}}return !l},isXType:function(g,l){return l?(Ext.Array.indexOf(this.xtypes,g)!==-1):!!this.xtypesMap[g]},isMasked:function(l){var g=this;return !!(g.masked||(g.loadMask&&g.loadMask.isVisible())||(l&&g.getInherited().masked))},lookupTpl:function(f){return Ext.XTemplate.getTpl(this,f)},setMasked:function(l){var m=this,n=m.focusableContainer;if(l){m.masked=true;m.getInherited().masked=l}else{m.masked=false;delete m.getInherited().masked}if(n){n.onFocusableChildMasked(m,l)}return m},mask:function(n,p,s){var q=this.lastBox,o=this.getMaskTarget()||this.el;if(q){s=q.height}o.mask(n,p,s);this.setMasked(true)},nextNode:function(x,t){var z=this,y=z.ownerCt,s,w,u,v,A;if(t&&z.is(x)){return z}if(y){for(w=y.items.items,v=Ext.Array.indexOf(w,z)+1,u=w.length;v<u;v++){A=w[v];if(A.is(x)){return A}if(A.down){s=A.down(x);if(s){return s}}}return y.nextNode(x)}return null},nextSibling:function(s){var o=this.ownerCt,q,p,t,u;if(o){q=o.items;t=q.indexOf(this)+1;if(t){if(s){for(p=q.getCount();t<p;t++){if((u=q.getAt(t)).is(s)){return u}}}else{if(t<q.getCount()){return q.getAt(t)}}}}return null},onAdded:function(o,m,p){var n=this;n.ownerCt=o;n.onInheritedAdd(n,p);if(n.hasListeners&&n.hasListeners.added){n.fireEvent("added",n,o,m)}if(Ext.GlobalEvents.hasListeners.added){n.fireHierarchyEvent("added")}},onRemoved:function(n){var o=this,m,p;if(!o.isLayoutMoving&&o.el&&o.el.contains(Ext.Element.getActiveElement())){p=o.findFocusTarget();if(p){p.focus()}}if(Ext.GlobalEvents.hasListeners.removed){o.fireHierarchyEvent("removed")}if(o.hasListeners.removed){o.fireEvent("removed",o,o.ownerCt)}if(!n){o.removeBindings()}o.onInheritedRemove(n);o.ownerCt=o.ownerLayout=null},onBoxReady:function(n,p){var m=this,o;if(m.ariaLabelledBy||m.ariaDescribedBy){if(m.ariaLabelledBy){o=m.getAriaLabelEl(m.ariaLabelledBy);if(o){m.ariaEl.dom.setAttribute("aria-labelledby",o)}}if(m.ariaDescribedBy){o=m.getAriaLabelEl(m.ariaDescribedBy);if(o){m.ariaEl.dom.setAttribute("aria-describedby",o)}}}if(m.resizable){m.initResizable(m.resizable)}if(m.draggable){m.initDraggable()}if(m.hasListeners.boxready){m.fireEvent("boxready",m,n,p)}},onDestroy:Ext.emptyFn,onDisable:function(){var n=this,m,l;if(n.focusable){n.disableFocusable()}if(!n.ariaStaticRoles[n.ariaRole]){n.ariaEl.dom.setAttribute("aria-disabled",true)}if(n.maskOnDisable&&!n.getInheritedConfig("disableMask",true)){m=n.el.dom;l=m.nodeName;if(n.disabledRe.test(l)){m.disabled=true}if(!n.nonMaskableRe.test(l)){n.mask()}}},onEnable:function(){var n=this,m,l;if(n.focusable){n.enableFocusable()}if(!n.ariaStaticRoles[n.ariaRole]){n.ariaEl.dom.setAttribute("aria-disabled",false)}if(n.maskOnDisable&&n.getInherited().hasOwnProperty("masked")){m=n.el.dom;l=m.nodeName;if(n.disabledRe.test(l)){m.disabled=false}if(!n.nonMaskableRe.test(l)){n.unmask()}}},onGlobalShow:function(f){if(this.up(f)){this.getScrollable().restoreState()}},onHide:function(v,u,p){var w=this,s,q,t;if(!w.ariaStaticRoles[w.ariaRole]&&!w.destroying&&!w.destroyed){w.ariaEl.dom.setAttribute("aria-hidden",true)}w.revertFocus();v=w.getAnimateTarget(v);if(!w.ghost){v=null}if(v){t={x:v.getX(),y:v.getY(),width:v.dom.offsetWidth,height:v.dom.offsetHeight};s=w.ghost();s.el.stopAnimation();q=w.getSize();s.el.animate({to:t,listeners:{afteranimate:function(){if(!w.destroying){s.componentLayout.lastComponentSize=null;w.unghost(false);s.el.setSize(q);w.afterHide(u,p)}}}})}else{w.el.hide()}if(!v){w.afterHide(u,p)}},onPosition:Ext.emptyFn,onResize:function(p,s,q,n){var o=this;if(o.floating&&o.constrain){o.doConstrain()}if(o.hasListeners.resize){o.fireEvent("resize",o,p,s,q,n)}},onShow:function(){var f=this;if(!f.ariaStaticRoles[f.ariaRole]){f.ariaEl.dom.setAttribute("aria-hidden",false)}f.el.show();f.updateLayout({isRoot:false,context:f._showContext});if(f.floating){if(f.maximized){f.fitContainer()}else{if(f.constrain){f.doConstrain()}}}},_showContext:{show:true},onShowComplete:function(p,n){var m=this,o=m.focusableContainer;if(m.floating){m.onFloatShow()}Ext.callback(p,n||m);m.fireEvent("show",m);if(o){o.onFocusableChildShow(m)}delete m.hiddenByLayout},onShowVeto:Ext.emptyFn,previousNode:function(u,s){var w=this,x=w.ownerCt,v,y,q,t;if(s&&w.is(u)){return w}if(x){for(y=x.items.items,q=Ext.Array.indexOf(y,w)-1;q>-1;q--){t=y[q];if(t.query){v=t.query(u);v=v[v.length-1];if(v){return v}}if(t.is(u)){return t}}return x.previousNode(u,true)}return null},previousSibling:function(q){var o=this.ownerCt,p,s,n;if(o){p=o.items;s=p.indexOf(this);if(s!==-1){if(q){for(--s;s>=0;s--){if((n=p.getAt(s)).is(q)){return n}}}else{if(s){return p.getAt(--s)}}}}return null},registerFloatingItem:function(g){var l=this;if(!l.floatingDescendants){l.floatingDescendants=new Ext.ZIndexManager(l)}l.floatingDescendants.register(g)},removeCls:function(n){var l=this,m=l.rendered?l.el:l.protoEl;m.removeCls.apply(m,arguments);return l},removeClsWithUI:function(z,E){var u=this,v=[],x=0,C=Ext.Array,w=C.remove,y=u.uiCls=C.clone(u.uiCls),A=u.activeUI,B,D;if(typeof z==="string"){z=(z.indexOf(" ")<0)?[z]:Ext.String.splitWords(z)}B=z.length;for(x=0;x<B;x++){D=z[x];if(D&&u.hasUICls(D)){w(y,D);if(A){v=v.concat(u.removeUIClsFromElement(D))}}}if(E!==true&&A){u.removeCls(v)}return v},resumeLayouts:function(g){var l=this;if(!l.rendered){return}if(l.layoutSuspendCount&&!--l.layoutSuspendCount){l.suspendLayout=false;if(g&&!l.isLayoutSuspended()){l.updateLayout(g)}}},scrollBy:function(n,o,m){var p=this.getScrollable();if(p){p.scrollBy(n,o,m)}},scrollTo:function(o,m,n){var p=this.getScrollable();if(p){p.scrollTo(o,m,n)}},setAutoScroll:function(f){this.setScrollable(!!f);return this},setBorder:function(o,m){var n=this,p=!!m;if(n.rendered||p){if(!p){m=n.el}if(!o){o=0}else{if(o===true){o="1px"}else{o=this.unitizeBox(o)}}m.setStyle("border-width",o);if(!p){n.updateLayout()}}n.border=o},setDock:function(l){var m=this,n=m.ownerCt;if(l!==m.dock){if(n&&n.moveDocked){n.moveDocked(m,l)}else{m.dock=l}}return m},setDisabled:function(f){return this[f?"disable":"enable"]()},setFlex:function(f){this.flex=f},setHeight:function(f){return this.setSize(undefined,f)},setLoading:function(n,m){var o=this,p={target:o};if(o.rendered){if(n!==false){if(Ext.isString(n)){p.msg=n}else{Ext.apply(p,n)}if(!o.loadMask||!o.loadMask.isLoadMask){if(m&&p.useTargetEl==null){p.useTargetEl=true}o.loadMask=new Ext.LoadMask(p)}else{Ext.apply(o.loadMask,p)}if(o.loadMask.isVisible()){o.loadMask.syncMaskState()}else{o.loadMask.show()}}else{if(o.loadMask&&o.loadMask.isLoadMask){o.loadMask.hide()}}}return o.loadMask},setMargin:function(l,m){var n=this;if(n.rendered){if(!l&&l!==0){l=""}else{if(l===true){l=5}l=this.unitizeBox(l)}n.margin=l;n.margin$=null;n.getEl().setStyle("margin",l);if(!m){n.updateLayout(n._notAsLayoutRoot)}}else{n.margin=l}},setOverflowXY:function(g,l){this.setScrollable({x:(g&&g!=="hidden")?g:false,y:(l&&l!=="hidden")?l:false});return this},setPagePosition:function(t,u,s){var q=this,p,o;if(Ext.isArray(t)){u=t[1];t=t[0]}q.pageX=t;q.pageY=u;if(q.floating){if(q.isContainedFloater()){o=q.floatParent.getTargetEl().getViewRegion();if(Ext.isNumber(t)&&Ext.isNumber(o.left)){t-=o.left}if(Ext.isNumber(u)&&Ext.isNumber(o.top)){u-=o.top}}else{p=q.el.translateXY(t,u);t=p.x;u=p.y}q.setPosition(t,u,s)}else{p=q.el.translateXY(t,u);q.setPosition(p.x,p.y,s)}return q},setPosition:function(s,n,q){var p=this,o=p.beforeSetPosition.apply(p,arguments);if(o&&p.rendered){s=o.x;n=o.y;if(q){if(s!==p.getLocalX()||n!==p.getLocalY()){p.stopAnimation();p.animate(Ext.apply({duration:1000,listeners:{afteranimate:Ext.Function.bind(p.afterSetPosition,p,[s,n])},to:{left:s,top:n}},q))}}else{p.setLocalXY(s,n);p.afterSetPosition(s,n)}}return p},setScrollX:function(m,l){var n=this.getScrollable();if(n){n.scrollTo(m,null,l)}},setScrollY:function(l,m){var n=this.getScrollable();if(n){n.scrollTo(null,l,m)}},setSize:function(q,u){var p=this,t=p.width,v=p.height,w,s;if(q&&typeof q==="object"){u=q.height;q=q.width}if(typeof q==="number"){p.width=Ext.Number.constrain(q,p.minWidth,p.maxWidth)}else{if(q===null){delete p.width}else{if(typeof q==="string"){w=true;p.width=q}}}if(typeof u==="number"){p.height=Ext.Number.constrain(u,p.minHeight,p.maxHeight)}else{if(u===null){delete p.height}else{if(typeof u==="string"){s=true;p.height=u}}}if(p.rendered&&p.isVisible()){if(t!==p.width||v!==p.height){if(p.liquidLayout||w||s){p.el.setSize(p.width,p.height)}p.updateLayout(p._notAsLayoutRoot)}}return p},setStyle:function(l,m){var n=this.el||this.protoEl;n.setStyle(l,m);return this},setUI:function(p){var q=this,n=q.uiCls,o=q.activeUI,s;if(p===o){return}if(o){s=q.removeClsWithUI(n,true);if(s.length){q.removeCls(s)}q.removeUIFromElement()}else{q.uiCls=[]}q.ui=p;q.activeUI=p;q.addUIToElement();s=q.addClsWithUI(n,true);if(s.length){q.addCls(s)}if(q.rendered){q.updateLayout()}},setVisible:function(f){return this[f?"show":"hide"]()},setHidden:function(f){return this.setVisible(!f)},setWidth:function(f){return this.setSize(f)},show:function(o,t,q){var p=this,u=p.rendered,s=p.focusableContainer;if(p.hierarchicallyHidden||(p.floating&&!u&&p.isHierarchicallyHidden())){if(!u){p.initHierarchyEvents()}if(arguments.length>1){arguments[0]=null;p.pendingShow=arguments}else{p.pendingShow=true}}else{if(u&&p.isVisible()){if(p.floating){p.onFloatShow()}}else{if(p.fireEvent("beforeshow",p)!==false){p.hidden=false;delete this.getInherited().hidden;if(s){s.beforeFocusableChildShow(p)}Ext.suspendLayouts();if(!u&&(p.autoRender||p.floating)){p.doAutoRender();u=p.rendered}if(u){p.beforeShow();Ext.resumeLayouts();p.onShow.apply(p,arguments);p.afterShow.apply(p,arguments)}else{Ext.resumeLayouts(true)}}else{p.onShowVeto()}}}return p},showAt:function(p,m,o){var n=this;if(!n.rendered&&(n.autoRender||n.floating)){n.x=p;n.y=m;return n.show()}if(n.floating){n.setPosition(p,m,o)}else{n.setPagePosition(p,m,o)}return n.show()},showBy:function(o,m,n){var p=this;if(p.floating&&o){p._lastAlignTarget=o;p._lastAlignToPos=m||p.defaultAlign;p._lastAlignToOffsets=n||p.alignOffset;p.show()}return p},suspendLayouts:function(){var f=this;if(!f.rendered){return}if(++f.layoutSuspendCount===1){f.suspendLayout=true}},toggleCls:function(l,g){if(g===undefined){g=!this.hasCls(l)}return this[g?"addCls":"removeCls"](l)},unitizeBox:function(f){return Ext.Element.unitizeBox(f)},unmask:function(){(this.getMaskTarget()||this.el).unmask();this.setMasked(false)},unregisterFloatingItem:function(g){var l=this;if(l.floatingDescendants){l.floatingDescendants.unregister(g)}},up:function(q,p){var s=this.getRefOwner(),t=typeof p==="string",v=typeof p==="number",u=p&&p.isComponent,w=0;if(q){for(;s&&!s.destroyed;s=s.getRefOwner()){w++;if(q.isComponent){if(s===q){return s}}else{if(Ext.ComponentQuery.is(s,q)){return s}}if(t&&s.is(p)){return}if(v&&w===p){return}if(u&&s===p){return}}}return s},update:function(y,v,t,A){var u=this,C=(u.tpl&&!Ext.isString(y)),z=u.focusableContainer,w,B,x;if(C){u.data=(y&&y.isEntity)?y.getData(true):y}else{u.html=Ext.isObject(y)?Ext.DomHelper.markup(y):y}if(u.rendered){w=u.getSizeModel();B=w.width.shrinkWrap||w.height.shrinkWrap;if(u.isContainer){x=u.layout.getRenderTarget();B=B||u.items.items.length>0}else{x=u.getTargetEl()}if(C){u.tpl[u.tplWriteMode](x,u.data||{})}else{x.setHtml(u.html,v,t,A||u)}if(B){u.updateLayout()}if(z){z.onFocusableChildUpdate(u)}}},setHtml:function(m,n,l){this.update(m,n,null,l)},applyData:function(f){this.update(f)},updateBox:function(f){this.setSize(f.width,f.height);this.setPagePosition(f.x,f.y);return this},_asLayoutRoot:{isRoot:true},_notAsLayoutRoot:{isRoot:false},updateLayout:function(q){var o=this,u,s=o.lastBox,t=q&&q.isRoot,p=q&&q.context;if(s){s.invalid=true}if(!o.rendered||o.layoutSuspendCount||o.suspendLayout){return}if(o.hidden){Ext.Component.cancelLayout(o)}else{if(typeof t!=="boolean"){t=o.isLayoutRoot()}}if(t||!o.ownerLayout||!o.ownerLayout.onContentChange(o,p)){if(!o.isLayoutSuspended()){u=(q&&q.hasOwnProperty("defer"))?q.defer:o.deferLayouts;Ext.Component.updateLayout(o,u)}}},updateMaxHeight:function(g,l){this.changeConstraint(g,l,"min","max-height","height")},updateMaxWidth:function(g,l){this.changeConstraint(g,l,"min","max-width","width")},updateMinHeight:function(g,l){this.changeConstraint(g,l,"max","min-height","height")},updateMinWidth:function(l,g){this.changeConstraint(l,g,"max","min-width","width")},updateTouchAction:function(n){var q,s,p,o;for(q in n){s=this[q];p=n[q];if(s&&s.isElement){s.setTouchAction(p)}else{o=true}}if(o){this.el.setTouchAction(n)}},getAnchorToXY:function(m,p,n,o){return m.getAnchorXY(p,n,o)},getBorderPadding:function(){return this.el.getBorderPadding()},getLocalX:function(){return this.el.getLocalX()},getLocalXY:function(){return this.el.getLocalXY()},getLocalY:function(){return this.el.getLocalY()},getX:function(){return this.el.getX()},getXY:function(){return this.el.getXY()},getY:function(){return this.el.getY()},setLocalX:function(f){this.el.setLocalX(f)},setLocalXY:function(l,g){this.el.setLocalXY(l,g)},setLocalY:function(f){this.el.setLocalY(f)},setX:function(l,g){this.el.setX(l,g)},setXY:function(g,l){this.el.setXY(g,l)},setY:function(g,l){this.el.setY(g,l)},privates:{addOverCls:function(){var f=this;if(!f.disabled){f.el.addCls(f.overCls)}},addUIToElement:function(){var p=this,t=p.baseCls+"-"+p.ui,q,u,s,o;p.addCls(t);if(p.rendered&&p.frame&&!Ext.supports.CSS3BorderRadius){t+="-";q=p.getChildEls();for(u in q){o=q[u].frame;if(o&&o!==true){s=p[u];if(s){s.addCls(t+o)}}}}},changeConstraint:function(v,s,u,p,t){var w=this,q=w[t];if(v!=null&&typeof q==="number"){w[t]=Math[u](q,v)}if(w.liquidLayout){if(v!=null){w.setStyle(p,v+"px")}else{if(s){w.setStyle(p,"")}}}if(w.rendered){w.updateLayout()}},constructPlugin:function(g){var l=this;if(typeof g==="string"){g=Ext.PluginManager.create({},g,l)}else{g=Ext.PluginManager.create(g,null,l)}return g},constructPlugins:function(){var n=this,p=n.plugins,q,o,s;if(p){q=[];q.processed=true;if(!Ext.isArray(p)){p=[p]}for(o=0,s=p.length;o<s;o++){q[o]=n.constructPlugin(p[o])}}n.pluginsInitialized=true;return q},detachFromBody:function(){Ext.getDetachedBody().appendChild(this.el);Ext.Component.cancelLayout(this);this.isDetached=true},doAddListener:function(C,J,I,G,E,F,B){var K=this,x,z,D,H,A,y;if(Ext.isObject(J)||(G&&G.element)){if(G.element){H=G.element;x={};x[C]=J;if(I){x.scope=I}D=K.$elementEventOptions;for(z in G){if(D[z]){x[z]=G[z]}}}else{x=J;H=C}A=K[H];if(A&&A.isObservable){K.mon(A,x)}else{K.afterRenderEvents=K.afterRenderEvents||{};if(!K.afterRenderEvents[H]){K.afterRenderEvents[H]=[]}K.afterRenderEvents[H].push(x)}return}if(G){y=G.delegate;if(y){K.mixins.componentDelegation.addDelegatedListener.call(K,C,J,I,G,E,F,B);return}}K.mixins.observable.doAddListener.call(K,C,J,I,G,E,F,B)},doRemoveListener:function(p,n,o){var m=this;m.mixins.observable.doRemoveListener.call(m,p,n,o);m.mixins.componentDelegation.removeDelegatedListener.call(m,p,n,o)},fireHierarchyEvent:function(g){var l=Ext.GlobalEvents;if(l.hasListeners[g]){l.fireEvent(g,this)}},getActionEl:function(){return this.el},getAutoId:function(){this.autoGenId=true;return ++Ext.Component.AUTO_ID},getContentTarget:function(){return this.el},getDragEl:function(){return this.el},getOverflowEl:function(){return this.getTargetEl()},getOverflowStyle:function(){var p=this,s=p.getScrollable(),q=p._scrollFlags,t,u,o;if(s){t=s.getX();if(t===true){t="auto"}u=s.getY();if(u===true){u="auto"}o=q[t][u]}else{o=q.none}p.scrollFlags=o;return{overflowX:o.overflowX,overflowY:o.overflowY}},getPlugins:function(){var f=this.plugins;f=(f&&f.processed)?f:this.constructPlugins();return f||null},getProxy:function(){var l=this,g;if(!l.proxy){g=Ext.getBody();l.proxy=l.el.createProxy("x-proxy-el",g,true)}return l.proxy},getTargetEl:function(){return this.frameBody||this.el},getTdCls:function(){return"x-"+this.getTdType()+"-"+this.ui+"-cell"},getTdType:function(){return this.xtype},getTpl:function(f){return this.lookupTpl(f)},initCls:function(){var m=this,n=[m.baseCls],l=m.getComponentLayout().targetCls;if(l){n.push(l)}if(m.componentCls){n.push(m.componentCls)}else{m.componentCls=m.baseCls}return n},initDraggable:function(){var l=this,n=(l.resizer&&l.resizer.el!==l.el)?l.resizerComponent=new Ext.Component({el:l.resizer.el,rendered:true,container:l.container}):l,m=Ext.applyIf({el:n.getDragEl(),constrainTo:(l.constrain||l.draggable.constrain)?(l.constrainTo||(l.floatParent?l.floatParent.getTargetEl():l.container)):undefined},l.draggable);if(l.constrain||l.constrainDelegate){m.constrain=l.constrain;m.constrainDelegate=l.constrainDelegate}l.dd=new Ext.util.ComponentDragger(n,m)},initPadding:function(l){var n=this,m=n.padding;if(m!=null){if(n.layout&&n.layout.managePadding&&n.contentPaddingProperty==="padding"){l.setStyle("padding",0)}else{l.setStyle("padding",this.unitizeBox((m===true)?5:m))}}},initPlugin:function(f){f.init(this);return f},initResizable:function(l){var g=this;l=Ext.apply({target:g,dynamic:false,constrainTo:(g.constrain||(l&&l.constrain))?(g.constrainTo||(g.floatParent?g.floatParent.getTargetEl():g.container)):undefined,handles:g.resizeHandles},l);l.target=g;g.resizer=new Ext.resizer.Resizer(l)},initStyles:function(E){var x=this,z=x.margin,y=x.border,D=x.cls,C=x.style,v=x.x,w=x.y,A=x.liquidLayout,B,u;x.initPadding(E);if(z!=null){E.setStyle("margin",this.unitizeBox((z===true)?5:z))}if(y!=null){x.setBorder(y,E)}if(D&&D!==x.initialCls){E.addCls(D);x.cls=x.initialCls=null}if(C&&C!==x.initialStyle){E.setStyle(C);x.style=x.initialStyle=null}if(v!=null){E.setStyle(x.horizontalPosProp,(typeof v==="number")?(v+"px"):v)}if(w!=null){E.setStyle("top",(typeof w==="number")?(w+"px"):w)}if(!x.ownerCt||x.floating){if(Ext.scopeCss){E.addCls(x.rootCls)}E.addCls(x.borderBoxCls)}if(A||!x.getFrameInfo()){B=x.width;u=x.height;if(B!=null){if(typeof B==="number"){E.setStyle("width",B+"px")}else{E.setStyle("width",B)}}if(u!=null){if(typeof u==="number"){E.setStyle("height",u+"px")}else{E.setStyle("height",u)}}}},isContainedFloater:function(){return(this.floating&&this.floatParent)},isDescendant:function(l){if(l.isContainer){for(var g=this.ownerCt;g;g=g.ownerCt){if(g===l){return true}}}return false},owns:function(m){var n=false,l;if(m.isEvent){m=m.target}else{if(m.isElement){m=m.dom}}l=Ext.Component.fromElement(m);if(l){n=(l===this)||(!!l.up(this))}return n},parseBox:function(f){return Ext.Element.parseBox(f)},reattachToBody:function(){this.isDetached=false},removeManagedListenerItem:function(u,w,v,s,y,q){var x=this,t=w.options?w.options.element:null;if(t){t=x[t];if(t&&t.un){if(u||(w.item===v&&w.ename===s&&(!y||w.fn===y)&&(!q||w.scope===q))){t.un(w.ename,w.fn,w.scope);if(!u){Ext.Array.remove(x.managedListeners,w)}}}}else{return x.mixins.observable.removeManagedListenerItem.apply(x,arguments)}},removeOverCls:function(){this.el.removeCls(this.overCls)},removePlugin:function(f){Ext.Array.remove(this.plugins,f);f.destroy()},removeUIFromElement:function(){var p=this,t=p.baseCls+"-"+p.ui,q,u,s,o;p.removeCls(t);if(p.rendered&&p.frame&&!Ext.supports.CSS3BorderRadius){t+="-";q=p.getChildEls();for(u in q){o=q[u].frame;if(o&&o!==true){s=p[u];if(s){s.removeCls(t+o)}}}}},setComponentLayout:function(g){var l=this.componentLayout;if(l&&l.isLayout&&l!==g){l.setOwner(null)}this.componentLayout=g;g.setOwner(this)},setHiddenState:function(m){var n=this,o=n.getInherited(),p=n.zIndexManager;n.hidden=m;if(m){o.hidden=true}else{delete o.hidden}if(p){p.onComponentShowHide(n)}},setupProtoEl:function(){var f=this.initCls();this.protoEl.addCls(f)},wrapPrimaryEl:function(l){var m=this,n=m.el;if(!n||!n.isElement){m.el=Ext.get(l)}if(m.floating){this.mixins.floating.constructor.call(this)}}},deprecated:{5:{methods:{addClass:"addCls",doComponentLayout:function(){this.updateLayout();return this},removeClass:"removeCls",forceComponentLayout:"updateLayout",setDocked:"setDock"}}}},1,["component","box"],["component","box"],{component:true,box:true},["widget.box","widget.component"],[[Ext.mixin.Inheritable.prototype.mixinId||Ext.mixin.Inheritable.$className,Ext.mixin.Inheritable],[Ext.util.Floating.prototype.mixinId||Ext.util.Floating.$className,Ext.util.Floating],[Ext.util.Positionable.prototype.mixinId||Ext.util.Positionable.$className,Ext.util.Positionable],[Ext.util.Observable.prototype.mixinId||Ext.util.Observable.$className,Ext.util.Observable],[Ext.mixin.ComponentDelegation.prototype.mixinId||Ext.mixin.ComponentDelegation.$className,Ext.mixin.ComponentDelegation],[Ext.mixin.Bindable.prototype.mixinId||Ext.mixin.Bindable.$className,Ext.mixin.Bindable],[Ext.util.Animate.prototype.mixinId||Ext.util.Animate.$className,Ext.util.Animate],[Ext.util.ElementContainer.prototype.mixinId||Ext.util.ElementContainer.$className,Ext.util.ElementContainer],[Ext.util.Renderable.prototype.mixinId||Ext.util.Renderable.$className,Ext.util.Renderable],[Ext.state.Stateful.prototype.mixinId||Ext.state.Stateful.$className,Ext.state.Stateful],[Ext.util.Focusable.prototype.mixinId||Ext.util.Focusable.$className,Ext.util.Focusable],[Ext.mixin.Accessible.prototype.mixinId||Ext.mixin.Accessible.$className,Ext.mixin.Accessible],[Ext.mixin.Keyboard.prototype.mixinId||Ext.mixin.Keyboard.$className,Ext.mixin.Keyboard]],[Ext,"Component",Ext,"AbstractComponent"],function(g){var l=g.prototype;(l.$elementEventOptions=Ext.Object.chain(Ext.Element.prototype.$eventOptions)).element=1;(l.$eventOptions=Ext.Object.chain(l.$eventOptions)).delegate=1;g.createAlias({on:"addListener",prev:"previousSibling",next:"nextSibling"});Ext.resumeLayouts=function(e){g.resumeLayouts(e)};Ext.suspendLayouts=function(){g.suspendLayouts()};Ext.batchLayouts=function(e,f){g.suspendLayouts();try{e.call(f)}finally{g.resumeLayouts(true)}};Ext.setGlyphFontFamily=function(e){Ext._glyphFontFamily=e};g.hierarchyEventSource=l.hierarchyEventSource=Ext.GlobalEvents;Ext.onReady(function(){if(Ext.supports.HighContrastMode){Ext.getBody().addCls(g.ariaHighContrastModeCls)}})}));Ext.define("Ext.layout.container.border.Region",{override:"Ext.Component",initBorderRegion:function(){var f=this;if(!f._borderRegionInited){f._borderRegionInited=true;f.addStateEvents(["changeregion","changeweight"]);Ext.override(f,{getState:function(){var e=f.callParent();e=f.addPropertyToState(e,"region");e=f.addPropertyToState(e,"weight");return e}})}},getOwningBorderContainer:function(){var f=this.getOwningBorderLayout();return f&&f.owner},getOwningBorderLayout:function(){var f=this.ownerLayout;return(f&&f.isBorderLayout)?f:null},setRegion:function(I){var w=this,C,B=w.region;if(I!==B){C=w.getOwningBorderLayout();if(C){var z=C.regionFlags[I],H=w.placeholder,E=w.splitter,D=C.owner,F=C.regionMeta,A=w.collapsed||w.floated,G,x,y;if(w.fireEventArgs("beforechangeregion",[w,I])===false){return B}Ext.suspendLayouts();w.region=I;Ext.apply(w,z);if(w.updateCollapseTool){w.updateCollapseTool()}if(E){Ext.apply(E,z);E.updateOrientation();x=D.items;y=x.indexOf(w);if(y>=0){G=F[I].splitterDelta;if(x.getAt(y+G)!==E){x.remove(E);y=x.indexOf(w);if(G>0){++y}x.insert(y,E)}}}if(H){if(A){w.expand(false)}D.remove(H);w.placeholder=null;if(A){w.collapse(null,false)}}D.updateLayout();Ext.resumeLayouts(true);w.fireEventArgs("changeregion",[w,B])}else{w.region=I}}return B},setWeight:function(o){var p=this,q=p.getOwningBorderContainer(),n=p.placeholder,s=p.weight;if(o!==s){if(p.fireEventArgs("beforechangeweight",[p,o])!==false){p.weight=o;if(n){n.weight=o}if(q){q.updateLayout()}p.fireEventArgs("changeweight",[p,s])}}return s}},function(l){var g=l.prototype;g.setBorderRegion=g.setRegion;g.setRegionWeight=g.setWeight});Ext.define("Ext.theme.neptune.Component",{override:"Ext.Component",initComponent:function(){arguments.callee.$previous.call(this);if(this.dock&&this.border===undefined){this.border=false}},privates:{initStyles:function(){var l=this,m=l.hasOwnProperty("border"),n=l.border;if(l.dock){l.border=null}arguments.callee.$previous.apply(this,arguments);if(m){l.border=n}else{delete l.border}}}},function(){Ext.namespace("Ext.theme.is").Neptune=true;Ext.theme.name="Neptune"});Ext.define("Ext.theme.triton.Component",{override:"Ext.Component"},function(){Ext.namespace("Ext.theme.is").Triton=true;Ext.theme.name="Triton"});(Ext.cmd.derive("Ext.Action",Ext.Base,{constructor:function(f){this.initialConfig=f;this.itemId=f.itemId=(f.itemId||f.id||Ext.id());this.items=[]},isAction:true,setText:function(f){this.initialConfig.text=f;this.callEach("setText",[f])},getText:function(){return this.initialConfig.text},setIconCls:function(f){this.initialConfig.iconCls=f;this.callEach("setIconCls",[f])},setGlyph:function(f){this.initialConfig.glyph=f;this.callEach("setGlyph",[f])},getIconCls:function(){return this.initialConfig.iconCls},setDisabled:function(f){this.initialConfig.disabled=f;this.callEach("setDisabled",[f])},enable:function(){this.setDisabled(false)},disable:function(){this.setDisabled(true)},isDisabled:function(){return this.initialConfig.disabled},setHidden:function(f){this.initialConfig.hidden=f;this.callEach("setVisible",[!f])},show:function(){this.setHidden(false)},hide:function(){this.setHidden(true)},isHidden:function(){return this.initialConfig.hidden},setHandler:function(g,l){this.initialConfig.handler=g;this.initialConfig.scope=l;this.callEach("setHandler",[g,l])},each:function(g,l){Ext.each(this.items,g,l)},callEach:function(u,q){var s=this.items,p=0,t=s.length,o;Ext.suspendLayouts();for(;p<t;p++){o=s[p];o[u].apply(o,q)}Ext.resumeLayouts(true)},addComponent:function(f){this.items.push(f);f.on("destroy",this.removeComponent,this)},removeComponent:function(f){Ext.Array.remove(this.items,f)},execute:function(){this.initialConfig.handler.apply(this.initialConfig.scope||Ext.global,arguments)}},1,0,0,0,0,0,[Ext,"Action"],0));(Ext.cmd.derive("Ext.layout.SizeModel",Ext.Base,{constructor:function(p){var n=this,o=n.self,s=o.sizeModelsArray,q;Ext.apply(n,p);n[q=n.name]=true;n.fixed=!(n.auto=n.natural||n.shrinkWrap);s[n.ordinal=s.length]=o[q]=o.sizeModels[q]=n},statics:{sizeModelsArray:[],sizeModels:{}},calculated:false,configured:false,constrainedMax:false,constrainedMin:false,natural:false,shrinkWrap:false,calculatedFromConfigured:false,calculatedFromNatural:false,calculatedFromShrinkWrap:false,names:null},1,0,0,0,0,0,[Ext.layout,"SizeModel"],function(){var n=this,v=n.sizeModelsArray,s,t,u,w,q;new n({name:"calculated"});new n({name:"configured",names:{width:"width",height:"height"}});new n({name:"natural"});new n({name:"shrinkWrap"});new n({name:"calculatedFromConfigured",configured:true,calculatedFrom:true,names:{width:"width",height:"height"}});new n({name:"calculatedFromNatural",natural:true,calculatedFrom:true});new n({name:"calculatedFromShrinkWrap",shrinkWrap:true,calculatedFrom:true});new n({name:"constrainedMax",configured:true,constrained:true,names:{width:"maxWidth",height:"maxHeight"}});new n({name:"constrainedMin",configured:true,constrained:true,names:{width:"minWidth",height:"minHeight"}});new n({name:"constrainedDock",configured:true,constrained:true,constrainedByMin:true,names:{width:"dockConstrainedWidth",height:"dockConstrainedHeight"}});for(s=0,u=v.length;s<u;++s){q=v[s];q.pairsByHeightOrdinal=w=[];for(t=0;t<u;++t){w.push({width:q,height:v[t]})}}}));(Ext.cmd.derive("Ext.layout.Layout",Ext.Base,{factoryConfig:{type:"layout"},isLayout:true,initialized:false,running:false,needsItemSize:true,setsItemSize:true,autoSizePolicy:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},$configPrefixed:false,$configStrict:false,constructor:function(l){var g=this;g.id=Ext.id(null,g.type+"-");g.initConfig(l);delete g.type;g.layoutCount=0},beginLayout:Ext.emptyFn,beginLayoutCycle:function(n){var o=this,p=o.context,m;if(o.lastWidthModel!==n.widthModel){if(o.lastWidthModel){m=true}o.lastWidthModel=n.widthModel}if(o.lastHeightModel!==n.heightModel){if(o.lastWidthModel){m=true}o.lastHeightModel=n.heightModel}if(m){(p=n.context).clearTriggers(o,false);p.clearTriggers(o,true);o.triggerCount=0}},finishedLayout:function(f){this.lastWidthModel=f.widthModel;this.lastHeightModel=f.heightModel;this.ownerContext=null},redoLayout:Ext.emptyFn,undoLayout:Ext.emptyFn,getAnimatePolicy:function(){return this.animatePolicy},getItemSizePolicy:function(f){return this.autoSizePolicy},isItemBoxParent:function(f){return false},isItemLayoutRoot:function(m){var n=m.getSizeModel(),o=n.width,p=n.height;if(!m.componentLayout.lastComponentSize&&(o.calculated||p.calculated)){return false}return !o.shrinkWrap&&!p.shrinkWrap},isItemShrinkWrap:function(f){return f.shrinkWrap},isRunning:function(){return !!this.ownerContext},getItemsRenderTree:function(q,t){var v=q.length,p,w,s,u;if(v){u=[];for(p=0;p<v;++p){w=q[p];if(!w.rendered){if(t&&(t[w.id]!==undefined)){s=t[w.id]}else{this.configureItem(w);s=w.getRenderTree();if(t){t[w.id]=s}}if(s){u.push(s)}}}}return u},finishRender:Ext.emptyFn,finishRenderItems:function(n,s){var o=s.length,q,p;for(q=0;q<o;q++){p=s[q];if(p.rendering){p.finishRender(q)}}},renderChildren:function(){var m=this,n=m.getLayoutItems(),l=m.getRenderTarget();m.renderItems(n,l)},renderItems:function(u,w){var p=this,q=u.length,t=0,v=0,s;if(q){Ext.suspendLayouts();for(;t<q;t++,v++){s=u[t];if(s&&!s.rendered){p.renderItem(s,w,v)}else{if(s.ignoreDomPosition){--v}else{if(!p.isValidParent(s,w,v)){p.moveItem(s,w,v)}else{p.configureItem(s)}}}}Ext.resumeLayouts(true)}},isValidParent:function(o,n,s){var p=(n&&n.dom)||n,q=this.getItemLayoutEl(o);if(q&&p){if(typeof s==="number"){s=this.getPositionOffset(s);return q===p.childNodes[s]}return q.parentNode===p}return false},getItemLayoutEl:function(n){var m=n.el?n.el.dom:Ext.getDom(n),p=m.parentNode,o;if(p){o=p.className;if(o&&o.indexOf("x-resizable-wrap")!==-1){m=m.parentNode}}return m},getPositionOffset:function(f){return f},configureItem:function(f){f.ownerLayout=this},renderItem:function(n,m,p){var o=this;if(!n.rendered){o.configureItem(n);n.render(m,p)}},moveItem:function(o,n,p){var m=Ext.Element.getActiveElement(true);n=n.dom||n;if(typeof p==="number"){p=n.childNodes[p]}if(o.el.contains(m)){m.suspendFocusEvents()}else{m=null}n.insertBefore(o.el.dom,p||null);o.container=Ext.get(n);this.configureItem(o);if(m){m.focus();m.resumeFocusEvents()}},onContentChange:function(){this.owner.updateLayout();return true},initLayout:function(){this.initialized=true},setOwner:function(f){this.owner=f},getLayoutItems:function(){return[]},onAdd:function(f){f.ownerLayout=this},onRemove:Ext.emptyFn,onDestroy:Ext.emptyFn,afterRemove:function(n){var o=this,p=n.el,q=o.owner,s;if(n.rendered){s=[].concat(o.itemCls||[]);if(q.itemCls){s=Ext.Array.push(s,q.itemCls)}if(s.length){p.removeCls(s)}}delete n.ownerLayout},afterCollapse:function(l,g){if(g){this.onContentChange(l)}},afterExpand:function(l,g){if(g){this.onContentChange(l)}},destroy:function(){var l=this,g;if(l.targetCls){g=l.getTarget();if(g){g.removeCls(l.targetCls)}}if(!l.onDestroy.$emptyFn){l.onDestroy()}l.callParent()},sortWeightedItems:function(p,m){for(var o=0,n=p.length;o<n;++o){p[o].$i=o}Ext.Array.sort(p,function(g,e){var f=e.weight-g.weight;if(!f){f=g.$i-e.$i;if(g[m]){f=-f}}return f});for(o=0;o<n;++o){delete p[o].$i}}},1,0,0,0,0,[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.layout,"Layout"],function(){var f=this;f.prototype.sizeModels=f.sizeModels=Ext.layout.SizeModel.sizeModels}));(Ext.cmd.derive("Ext.layout.container.Container",Ext.layout.Layout,{alternateClassName:"Ext.layout.ContainerLayout",type:"container",beginCollapse:Ext.emptyFn,beginExpand:Ext.emptyFn,animatePolicy:null,activeItemCount:0,renderTpl:["{%this.renderBody(out,values)%}"],usesContainerHeight:true,usesContainerWidth:true,usesHeight:true,usesWidth:true,constructor:function(){Ext.layout.Layout.prototype.constructor.apply(this,arguments);this.mixins.elementCt.constructor.call(this)},destroy:function(){this.mixins.elementCt.destroy.call(this);Ext.layout.Layout.prototype.destroy.call(this)},beginLayout:function(f){Ext.layout.Layout.prototype.beginLayout.apply(this,arguments);f.targetContext=f.paddingContext=f.getEl("getTarget",this);this.cacheChildItems(f)},beginLayoutCycle:function(l,n){var m=this;Ext.layout.Layout.prototype.beginLayoutCycle.apply(this,arguments);if(n){if(m.usesContainerHeight){++l.consumersContainerHeight}if(m.usesContainerWidth){++l.consumersContainerWidth}}},cacheChildItems:function(w){var p=this,s,v,u,q,t;if(p.needsItemSize||p.setsItemSize){s=w.context;v=w.childItems=[];u=w.visibleItems=p.getVisibleItems();q=u.length;for(t=0;t<q;++t){v.push(s.getCmp(u[t]))}}},cacheElements:function(){var f=this.owner;this.attachChildEls(f.el,f)},calculate:function(l){var m=l.props,n=l.el;if(l.widthModel.shrinkWrap&&isNaN(m.width)){l.setContentWidth(n.getWidth())}if(l.heightModel.shrinkWrap&&isNaN(m.height)){l.setContentHeight(n.getHeight())}},configureItem:function(p){var q=this,o=q.itemCls,s=q.owner.itemCls,t,u;p.ownerLayout=q;if(o){if(typeof o==="string"){u=[o]}else{u=o;t=!!u}}if(s){if(t){u=Ext.Array.clone(u)}u=Ext.Array.push(u||[],s)}if(u){p.addCls(u)}},doRenderBody:function(l,g){this.renderItems(l,g);this.renderContent(l,g)},doRenderContainer:function(q,n){var p=n.$comp.layout,s=p.getRenderTpl(),o=p.getRenderData();s.applyOut(o,q)},doRenderItems:function(o,m){var n=m.$layout,p=n.getRenderTree();if(p){Ext.DomHelper.generateMarkup(p,o)}},doRenderTabGuard:function(q,o,s){var p=o.$comp,n;if(p.tabGuard&&!o.$skipTabGuards){n=p.lookupTpl("tabGuardTpl");if(n){o.tabGuard=s;o.tabGuardEl=p.tabGuardElements[s];p.addChildEl(o.tabGuardEl);n.applyOut(o,q);delete o.tabGuard;delete o.tabGuardEl}}},finishRender:function(){var n=this,p=n.owner,m,o;Ext.layout.Layout.prototype.finishRender.call(this);n.cacheElements();m=n.getRenderTarget();o=n.getLayoutItems();n.finishRenderItems(m,o)},notifyOwner:function(){this.owner.afterLayout(this)},getContainerSize:function(B,x){var A=B.targetContext,y=A.getFrameInfo(),u=B.paddingContext.getPaddingInfo(),v=0,E=0,z,w,C,D;if(!B.widthModel.shrinkWrap){++E;C=x?A.getDomProp("width"):A.getProp("width");z=(typeof C==="number");if(z){++v;C-=y.width+u.width;if(C<0){C=0}}}if(!B.heightModel.shrinkWrap){++E;D=x?A.getDomProp("height"):A.getProp("height");w=(typeof D==="number");if(w){++v;D-=y.height+u.height;if(D<0){D=0}}}return{width:C,height:D,needed:E,got:v,gotAll:v===E,gotWidth:z,gotHeight:w}},getPositionOffset:function(l){if(!this.createsInnerCt){var g=this.owner.itemNodeOffset;if(g){l+=g}}return l},getLayoutItems:function(){var l=this.owner,g=l&&l.items;return(g&&g.items)||[]},getRenderData:function(){var f=this.owner;return{$comp:f,$layout:this,ownerId:f.id}},getRenderedItems:function(){var q=this,x=q.getRenderTarget(),w=q.getLayoutItems(),s=w.length,y=[],u,v,t;for(u=0,v=0;u<s;u++,v++){t=w[u];if(t.rendered){if(t.ignoreDomPosition){--v}else{if(!this.isValidParent(t,x,v)){continue}}y.push(t)}}return y},getRenderTarget:function(){return this.owner.getTargetEl()},getElementTarget:function(){return this.getRenderTarget()},getRenderTpl:function(){var l=this,g=Ext.XTemplate.getTpl(this,"renderTpl");if(!g.renderContent){l.owner.setupRenderTpl(g)}return g},getRenderTree:function(){var p,n=this.owner.items,m,o={};do{m=n.generation;p=this.getItemsRenderTree(this.getLayoutItems(),o)}while(n.generation!==m);return p},renderChildren:function(){var q=this,p=q.owner.items,n=q.getRenderTarget(),o,s;do{o=p.generation;s=q.getLayoutItems();q.renderItems(s,n)}while(p.generation!==o)},getScrollbarsNeeded:function(y,t,z,u){var A=Ext.getScrollbarSize(),w=typeof y==="number",s=typeof t==="number",v=0,x=0;if(!A.width){return 0}if(s&&t<u){x=2;y-=A.width}if(w&&y<z){v=1;if(!x&&s){t-=A.height;if(t<u){x=2}}}return x+v},getTarget:function(){return this.owner.getTargetEl()},getVisibleItems:function(){var w=this.getRenderTarget(),t=this.getLayoutItems(),p=t.length,u=[],s,v,q;for(s=0,v=0;s<p;s++,v++){q=t[s];if(q.rendered&&q.hidden!==true&&!q.floated){if(q.ignoreDomPosition){--v}else{if(!this.isValidParent(q,w,v)){continue}}u.push(q)}}return u},getMoveAfterIndex:function(f){return this.owner.items.indexOf(f)+1},moveItemBefore:function(p,o){var t=this.owner,s=t.items,q=s.indexOf(p),u;if(p===o){return p}if(o){u=s.indexOf(o);if(q>-1&&q<u){--u}}else{u=s.length}return t.insert(u,p)},setupRenderTpl:function(f){f.renderBody=this.doRenderBody;f.renderContainer=this.doRenderContainer;f.renderItems=this.doRenderItems;f.renderTabGuard=this.doRenderTabGuard},getContentTarget:function(){return this.owner.getDefaultContentTarget()},onAdd:function(f){if(!f.liquidLayout){++this.activeItemCount}Ext.layout.Layout.prototype.onAdd.call(this,f)},onRemove:function(g,l){if(!g.liquidLayout){--this.activeItemCount}Ext.layout.Layout.prototype.onRemove.call(this,g,l)}},1,0,0,0,["layout.container"],[[Ext.util.ElementContainer.prototype.mixinId||Ext.util.ElementContainer.$className,Ext.util.ElementContainer]],[Ext.layout.container,"Container",Ext.layout,"ContainerLayout"],0));(Ext.cmd.derive("Ext.layout.container.Auto",Ext.layout.container.Container,{type:"autocontainer",childEls:["outerCt","innerCt"],reserveScrollbar:false,managePadding:true,manageOverflow:false,needsItemSize:false,setsItemSize:false,lastOverflowAdjust:{width:0,height:0},outerCtCls:"x-autocontainer-outerCt",innerCtCls:"x-autocontainer-innerCt",renderTpl:['<div id="{ownerId}-outerCt" data-ref="outerCt" class="{outerCtCls}" role="presentation">','<div id="{ownerId}-innerCt" data-ref="innerCt" style="{%this.renderPadding(out, values)%}" ','<tpl if="!$comp.html">role="presentation"</tpl>','class="{innerCtCls}">',"{%this.renderBody(out,values)%}","</div>","</div>"],beginLayout:function(f){Ext.layout.container.Container.prototype.beginLayout.apply(this,arguments);this.initContextItems(f)},beforeLayoutCycle:function(m){var o=this.owner,n=o.inheritedState,p=o.inheritedStateInner;if(!n||n.invalid){n=o.getInherited();p=o.inheritedStateInner}if(m.widthModel.shrinkWrap){p.inShrinkWrapTable=true}else{delete p.inShrinkWrapTable}},beginLayoutCycle:function(A){var v=this,C=v.outerCt,x=v.lastOuterCtWidth||"",y=v.lastOuterCtHeight||"",G=v.lastOuterCtTableLayout||"",D=A.state,F,z,E,B,w;Ext.layout.container.Container.prototype.beginLayoutCycle.apply(this,arguments);z=E=B="";if(!A.widthModel.shrinkWrap){z="100%";w=v.owner.inheritedStateInner;F=v.getOverflowXStyle(A);B=(w.inShrinkWrapTable||F==="auto"||F==="scroll")?"":"fixed"}if(!A.heightModel.shrinkWrap&&!Ext.supports.PercentageHeightOverflowBug){E="100%"}if((z!==x)||v.hasOuterCtPxWidth){C.setStyle("width",z);v.lastOuterCtWidth=z;v.hasOuterCtPxWidth=false}if(B!==G){C.setStyle("table-layout",B);v.lastOuterCtTableLayout=B}if((E!==y)||v.hasOuterCtPxHeight){C.setStyle("height",E);v.lastOuterCtHeight=E;v.hasOuterCtPxHeight=false}if(v.hasInnerCtPxHeight){v.innerCt.setStyle("height","");v.hasInnerCtPxHeight=false}D.overflowAdjust=D.overflowAdjust||v.lastOverflowAdjust},calculate:function(p){var s=this,q=p.state,n=s.getContainerSize(p,true),o=q.calculatedItems||(q.calculatedItems=s.calculateItems?s.calculateItems(p,n):true);s.setCtSizeIfNeeded(p,n);if(o&&p.hasDomProp("containerChildrenSizeDone")){s.calculateContentSize(p);if(n.gotAll){if(s.manageOverflow&&!p.state.secondPass&&!s.reserveScrollbar){s.calculateOverflow(p,n)}return}}s.done=false},calculateContentSize:function(w){var p=this,u=((w.widthModel.shrinkWrap?1:0)|(w.heightModel.shrinkWrap?2:0)),s=(u&1)||undefined,v=(u&2)||undefined,q=0,t=w.props;if(s){if(isNaN(t.contentWidth)){++q}else{s=undefined}}if(v){if(isNaN(t.contentHeight)){++q}else{v=undefined}}if(q){if(s&&!w.setContentWidth(p.measureContentWidth(w))){p.done=false}if(v&&!w.setContentHeight(p.measureContentHeight(w))){p.done=false}}},calculateOverflow:function(y){var u=this,z,s,A,v,w,x,t;w=(u.getOverflowXStyle(y)==="auto");x=(u.getOverflowYStyle(y)==="auto");if(w||x){A=Ext.getScrollbarSize();t=y.overflowContext.el.dom;v=0;if(t.scrollWidth>t.clientWidth){v|=1}if(t.scrollHeight>t.clientHeight){v|=2}z=(x&&(v&2))?A.width:0;s=(w&&(v&1))?A.height:0;if(z!==u.lastOverflowAdjust.width||s!==u.lastOverflowAdjust.height){u.done=false;y.invalidate({state:{overflowAdjust:{width:z,height:s},overflowState:v,secondPass:true}})}}},completeLayout:function(f){this.lastOverflowAdjust=f.state.overflowAdjust},doRenderBody:function(q,o){var p=o.$layout,t=Ext.XTemplate,u=p.beforeBodyTpl,s=p.afterBodyTpl;if(u){t.getTpl(p,"beforeBodyTpl").applyOut(o,q)}this.renderItems(q,o);this.renderContent(q,o);if(s){t.getTpl(p,"afterBodyTpl").applyOut(o,q)}},doRenderPadding:function(q,o){var p=o.$layout,s=o.$layout.owner,n=s[s.contentPaddingProperty];if(p.managePadding&&n){q.push("padding:",s.unitizeBox(n))}},finishedLayout:function(g){var l=this.innerCt;Ext.layout.container.Container.prototype.finishedLayout.apply(this,arguments);if(Ext.isIE8){l.repaint()}if(Ext.isOpera){l.setStyle("position","relative");l.dom.scrollWidth;l.setStyle("position","")}},getContainerSize:function(o,n){var p=Ext.layout.container.Container.prototype.getContainerSize.apply(this,arguments),m=o.state.overflowAdjust;if(m){p.width-=m.width;p.height-=m.height}return p},getRenderData:function(){var l=this,g=Ext.layout.container.Container.prototype.getRenderData.call(this);g.innerCtCls=l.innerCtCls;g.outerCtCls=l.outerCtCls;return g},getRenderTarget:function(){return this.innerCt},getElementTarget:function(){return this.innerCt},getOverflowXStyle:function(f){return f.overflowXStyle||(f.overflowXStyle=this.owner.scrollFlags.overflowX||f.overflowContext.getStyle("overflow-x"))},getOverflowYStyle:function(f){return f.overflowYStyle||(f.overflowYStyle=this.owner.scrollFlags.overflowY||f.overflowContext.getStyle("overflow-y"))},initContextItems:function(o){var p=this,m=o.target,n=p.owner.getOverflowEl();o.outerCtContext=o.getEl("outerCt",p);o.innerCtContext=o.getEl("innerCt",p);o.overflowContext=(n===o.el)?o:o.getEl(n);if(m[m.contentPaddingProperty]!==undefined){o.paddingContext=o.innerCtContext}},initLayout:function(){var l=this,m=Ext.getScrollbarSize().width,n=l.owner;Ext.layout.container.Container.prototype.initLayout.call(this);if(m&&l.manageOverflow&&!l.hasOwnProperty("lastOverflowAdjust")){if(n.scrollable||l.reserveScrollbar){l.lastOverflowAdjust={width:m,height:0}}}},measureContentHeight:function(m){var n=this.outerCt.getHeight(),l=m.target;if(this.managePadding&&(l[l.contentPaddingProperty]===undefined)){n+=m.targetContext.getPaddingInfo().height}return n},measureContentWidth:function(p){var u,q,s,t,o;if(this.chromeCellMeasureBug){u=this.innerCt.dom;q=u.style;s=q.display;if(s==="table-cell"){q.display="";u.offsetWidth;q.display=s}}if(Ext.isSafari){u=this.outerCt.dom;q=u.style;q.display="table-cell";u.offsetWidth;u.style.display=""}t=this.outerCt.getWidth();o=p.target;if(this.managePadding&&(o[o.contentPaddingProperty]===undefined)){t+=p.targetContext.getPaddingInfo().width}return t},setCtSizeIfNeeded:function(z,B){var y=this,D=B.height,w=z.paddingContext.getPaddingInfo(),u=y.getTarget(),E=y.getOverflowXStyle(z),A=(E==="auto"||E==="scroll"),C=Ext.getScrollbarSize(),x,v;if(D&&!z.heightModel.shrinkWrap){if(Ext.supports.PercentageHeightOverflowBug){x=true}if(Ext.isIE8){v=true}if((x||v)&&A&&(u.dom.scrollWidth>u.dom.clientWidth)){D=Math.max(D-C.height,0)}if(x){z.outerCtContext.setProp("height",D+w.height);y.hasOuterCtPxHeight=true}if(v){z.innerCtContext.setProp("height",D);y.hasInnerCtPxHeight=true}}},setupRenderTpl:function(f){Ext.layout.container.Container.prototype.setupRenderTpl.apply(this,arguments);f.renderPadding=this.doRenderPadding},getContentTarget:function(){return this.innerCt}},0,0,0,0,["layout.auto","layout.autocontainer"],0,[Ext.layout.container,"Auto"],function(g){var l=Ext.chromeVersion;g.prototype.chromeCellMeasureBug=Ext.isChrome&&l>=26&&l<=34}));(Ext.cmd.derive("Ext.util.CollectionKey",Ext.Base,{isCollectionKey:true,observerPriority:-200,config:{collection:null,keyFn:null,property:null,rootProperty:null,unique:true},generation:0,map:null,mapRebuilds:0,constructor:function(f){this.initConfig(f)},get:function(l){var g=this.map||this.getMap();return g[l]||null},clear:function(){this.map=null},getRootProperty:function(){var g=this,l=(arguments.callee.$previous||Ext.Base.prototype.getRootProperty).call(this);return l!==null?l:g.getCollection().getRootProperty()},indexOf:function(C,w){var A=this.map||this.getMap(),B=A[C],v=this.getCollection(),z=v.length,x,u,n,y;if(!B){return -1}if(w===undefined){w=-1}if(B instanceof Array){n=B;u=z;for(y=n.length;y-->0;){x=v.indexOf(n[y]);if(x<u&&x>w){u=x}}if(u===z){return -1}}else{u=v.indexOf(B)}return(u>w)?u:-1},updateKey:function(q,o){var s=this,p=s.map,u,t;if(p){u=p[o];if(u instanceof Array){t=Ext.Array.indexOf(u,q);if(t>=0){if(u.length>2){u.splice(t,1)}else{p[o]=u[1-t]}}}else{if(u){delete p[o]}}s.add([q])}},onCollectionAdd:function(g,l){if(this.map){this.add(l.items)}},onCollectionItemChange:function(g,l){this.map=null},onCollectionRefresh:function(){this.map=null},onCollectionRemove:function(w,x){var u=this,A=u.map,v=x.items,z=v.length,y,s,t;if(A){if(u.getUnique()&&z<w.length/2){for(y=0;y<z;++y){t=u.getKey(s=v[y]);delete A[t]}}else{u.map=null}}},add:function(v){var u=this,A=u.map,z,w,s,t,y,x;y=v.length;x=u.getUnique();for(w=0;w<y;++w){t=u.getKey(s=v[w]);if(x||!(t in A)){A[t]=s}else{if(!((z=A[t]) instanceof Array)){A[t]=z=[z]}z.push(s)}}},applyKeyFn:function(f){if(Ext.isString(f)){this.getKey=function(e){return e[f]()}}else{this.getKey=f}},updateProperty:function(g){var l=this.getRootProperty();this.getKey=function(e){return(l?e[l]:e)[g]}},getMap:function(){var l=this,g=l.map;if(!g){l.map=g={};l.keysByItemKey={};++l.mapRebuilds;l.add(l.getCollection().items)}return g},updateCollection:function(f){f.addObserver(this)},clone:function(){return new Ext.util.CollectionKey(this.getCurrentConfig())}},1,0,0,0,0,[[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.util,"CollectionKey"],0));(Ext.cmd.derive("Ext.util.Grouper",Ext.util.Sorter,{isGrouper:true,config:{groupFn:null,sortProperty:null},constructor:function(f){Ext.util.Sorter.prototype.constructor.apply(this,arguments)},getGroupString:function(l){var g=this._groupFn(l);return(g!=null)?String(g):""},sortFn:function(x,y){var v=this,z=v._groupFn(x),w=v._groupFn(y),s=v._sortProperty,t=v._root,u=v._sorterFn,A=v._transform;if(z===w){return 0}if(s||u){if(u){return u.call(this,x,y)}if(t){x=x[t];y=y[t]}z=x[s];w=y[s];if(A){z=A(z);w=A(w)}}return(z>w)?1:(z<w?-1:0)},standardGroupFn:function(g){var l=this._root;return(l?g[l]:g)[this._property]},updateSorterFn:function(){},updateProperty:function(){if(!this.getGroupFn()){this.setGroupFn(this.standardGroupFn)}}},1,0,0,0,0,0,[Ext.util,"Grouper"],0));(Ext.cmd.derive("Ext.util.Collection",Ext.Base,{isCollection:true,config:{autoFilter:true,autoSort:true,autoGroup:true,decoder:null,extraKeys:null,filters:null,grouper:null,groups:null,rootProperty:null,sorters:null,multiSortLimit:3,defaultSortDirection:"ASC",source:null,trackGroups:true},generation:0,indices:null,indexRebuilds:0,updating:0,grouped:false,sorted:false,filtered:false,$endUpdatePriority:1001,manageSorters:true,constructor:function(l){var g=this;g.items=[];g.map={};g.length=0;if(l&&l.keyFn){g.getKey=l.keyFn}g.mixins.observable.constructor.call(g,l)},destroy:function(){var n=this,o=n._filters,m=n._sorters,p=n._groups;if(o){o.destroy();n._filters=null}if(m){n.grouped=n.sorted=false;n.setSorters(null);if(n.manageSorters){m.destroy()}}if(p){p.destroy();n._groups=null}n.setSource(null);n.observers=n.items=n.map=null;n.callParent()},add:function(m){var n=this,p=n.decodeItems(arguments,0),o=p;if(p.length){n.splice(n.length,0,p);o=(p.length===1)?p[0]:p}return o},replaceAll:function(){var l=this,m,n;n=l.decodeItems(arguments,0);m=n;if(n.length){l.splice(0,l.length,n);m=(n.length===1)?n[0]:n}else{l.removeAll()}return m},aggregate:function(v,t,p,u,q){var w=this,s=Ext.Array.slice(arguments);s.unshift(w.items);return w.aggregateItems.apply(w,s)},aggregateByGroup:function(m,o,n){var p=this.getGroups();return this.aggregateGroups(p,m,o,n)},aggregateItems:function(z,J,E,H,D,I){var O=this,A=Ext.Number.clipIndices(z.length,[H,D]),G=(H!==0&&D!==z.length),B,C,F,N,L,K,M;H=A[0];D=A[1];if(!Ext.isFunction(E)){E=O._aggregators[E];return E.call(O,z,H,D,J,O.getRootProperty())}N=O.getRootProperty();K=new Array(F);M=G?new Array(F):z;for(B=H,C=0;B<D;++B,C++){if(G){M[C]=L=z[B]}K[C]=(N?L[N]:L)[J]}return E.call(I||O,z,K,0)},aggregateGroups:function(C,u,A,E){var w=C.items,x=w.length,B=!Ext.isFunction(A),z={},y,v,D;for(y=0;y<x;++y){v=w[y];if(!B){D=this.aggregateItems(v.items,u,A,null,null,E)}else{D=v[A](u)}z[v.getGroupKey()]=D}return z},beginUpdate:function(){if(!this.updating++){this.notify("beginupdate")}},clear:function(){var p=this,o=p.generation,s=o?p.items:[],q,n;if(o){p.items=[];p.length=0;p.map={};p.indices={};p.generation++;q=p.getExtraKeys();if(q){for(n in q){q[n].clear()}}}return s},clone:function(){var l=this,g=new l.self(l.initialConfig);g.add(l.items);return g},collect:function(C,w,u){var x=this.items,A=x.length,B={},y=[],z,v,t;for(z=0;z<A;++z){t=x[z];t=(w?t[w]:t)[C];v=String(t);if((u||!Ext.isEmpty(t))&&!B[v]){B[v]=1;y.push(t)}}return y},contains:function(l){var n=false,m;if(l!=null){m=this.getKey(l);n=this.map[m]===l}return n},containsKey:function(f){return f in this.map},createFiltered:function(H,I,B,x,C){var y=this,A=new y.self(y.initialConfig),J=y.getRootProperty(),z=y.items,E,D,F,K,G;if(Ext.isFunction(H)){K=H;G=I}else{if(Ext.isString(H)){F=[new Ext.util.Filter({property:H,value:I,root:J,anyMatch:B,caseSensitive:x,exactMatch:C})]}else{if(H instanceof Ext.util.Filter){F=[H];H.setRoot(J)}else{if(Ext.isArray(H)){F=H.slice(0);for(D=0,E=F.length;D<E;++D){F[D].setRoot(J)}}}}K=Ext.util.Filter.createFilterFn(F)}G=G||y;for(D=0,E=z.length;D<E;D++){if(K.call(G,z[D])){A.add(z[D])}}return A},filterBy:function(g,l){return this.createFiltered(g,l)},each:function(u,o){var s=this.items,t=s.length,p,q;if(t){o=o||this;s=s.slice(0);for(p=0;p<t;p++){q=u.call(o,s[p],p,t);if(q===false){break}}}return q},eachKey:function(v,s){var w=this,x=w.items,z=x.length,A,t,u,y;if(z){s=s||w;x=x.slice(0);for(A=0;A<z;A++){u=w.getKey(t=x[A]);y=v.call(s,u,t,A,z);if(y===false){break}}}return y},endUpdate:function(){if(!--this.updating){this.notify("endupdate")}},find:function(x,y,w,s,t,u){if(Ext.isEmpty(y,false)){return null}var q=Ext.String.createRegex(y,s,t,u),v=this.getRootProperty();return this.findBy(function(e){return e&&q.test((v?e[v]:e)[x])},null,w)},findBy:function(v,s,A){var w=this,x=w.items,y=x.length,z,t,u;s=s||w;for(z=A||0;z<y;z++){u=w.getKey(t=x[z]);if(v.call(s,t,u)){return x[z]}}return null},findIndex:function(w,p,v,s,t,u){var q=this.find(w,p,v,s,t,u);return q?this.indexOf(q):-1},findIndexBy:function(o,p,m){var n=this.findBy(o,p,m);return n?this.indexOf(n):-1},first:function(g){var l=g?this.getGroups():undefined;return l?this.aggregateGroups(l,null,"first"):this.items[0]},last:function(g){var l=g?this.getGroups():undefined;return l?this.aggregateGroups(l,null,"last"):this.items[this.length-1]},get:function(f){return this.map[f]},getAt:function(f){return this.items[f]},getByKey:function(f){return this.map[f]},getCount:function(){return this.length},getKey:function(l){var g=l.id;return(g===0||g)?g:((g=l._id)===0||g)?g:l.getId()},getRange:function(o,s){var p=this.items,n=p.length,q;if(!n){q=[]}else{q=Ext.Number.clipIndices(n,[o,s]);q=p.slice(q[0],q[1])}return q},getValues:function(s,u,A,z){var v=this.items,x=Ext.Number.clipIndices(v.length,[A,z]),w=[],y,t;for(y=x[0],z=x[1];y<z;++y){t=v[y];t=(u?t[u]:t)[s];w.push(t)}return w},indexOf:function(g){if(!g){return -1}var l=this.getKey(g);return this.indexOfKey(l)},indexOfKey:function(n){var m=this,l=m.indices;if(n in m.map){if(!l){l=m.getIndices()}return l[n]}return -1},insert:function(p,n){var o=this,s=o.decodeItems(arguments,1),q=s;if(s.length){o.splice(p,0,s);q=(s.length===1)?s[0]:s}return q},itemChanged:function(P,T,K,J){var O=this,Y=K===0||!!K,R=O.filtered&&O.getAutoFilter(),W=false,X=0,H=O.items,M=O.length-1,aa=O.sorted&&M>0&&O.getAutoSort(),F=O.getSource(),G=0,N=false,I=false,Q,S,V,L,U,Z;if(F&&!F.updating){F.itemChanged(P,T,K,J)}else{S=O.getKey(P);if(R){U=O.indexOfKey(Y?K:S);I=(U<0);N=O.isItemFiltered(P);W=(I!==N)}if(W){if(N){G=[P];Z=-1}else{L=[P];Z=O.length}}else{if(aa&&!N){if(!R){U=O.indexOfKey(Y?K:S)}V=O.getSortFn();if(U!==-1){if(U&&V(H[U-1],H[U])>0){X=-1;Z=Ext.Array.binarySearch(H,P,0,U,V)}else{if(U<M&&V(H[U],H[U+1])>0){X=1;Z=Ext.Array.binarySearch(H,P,U+1,V)}}if(X){L=[P]}}}}Q={item:P,key:S,index:Z,filterChanged:W,keyChanged:Y,indexChanged:!!X,filtered:N,oldIndex:U,newIndex:Z,wasFiltered:I,meta:J};if(Y){Q.oldKey=K}if(T){Q.modified=T}O.beginUpdate();O.notify("beforeitemchange",[Q]);if(Y){O.updateKey(P,K)}if(L||G){O.splice(Z,G,L)}if(X>0){Q.newIndex--}else{if(X<0){Q.oldIndex++}}O.notify(N?"filtereditemchange":"itemchange",[Q]);O.endUpdate()}},remove:function(m){var n=this,p=n.decodeRemoveItems(arguments,0),o=n.length;n.splice(0,p);return o-n.length},removeAll:function(){var g=this,l=g.length;if(g.generation&&l){g.splice(0,l)}return g},removeAt:function(n,u){var C=this,z=C.length,w=Ext.Number,x=w.clipIndices(z,[n,(u===undefined)?1:u],w.Clip.COUNT),y=x[0],A=x[1]-y,B=(A===1)&&C.getAt(y),v;C.splice(y,A);v=C.length-z;return(B&&v)?B:v},removeByKey:function(l){var g=this.getByKey(l);if(!g||!this.remove(g)){return false}return g},replace:function(g){var l=this.indexOf(g);if(l===-1){this.add(g)}else{this.insert(l,g)}},splice:function(ag,ax,ai){var ay=this,aE=ay.sorted&&ay.getAutoSort(),ak=ay.map,at=ay.items,av=ay.length,ao=(ax instanceof Array)?ay.decodeRemoveItems(ax):null,an=!ao,af=Ext.Number,aD=af.clipIndices(av,[ag,an?ax:0],af.Clip.COUNT),aB=aD[0],az=aD[1],Z=az-aB,aq=ay.decodeItems(arguments,2),aa=aq?aq.length:0,ah,am,ap,aF=aB,aG=ay.indices||((aa||ao)?ay.getIndices():null),au=null,aA=Z?[aB]:null,aC=null,ar=ay.getSource(),aH,ad,ac,X,aj,ae,Y,aw,al,ab,n,W;if(ar&&!ar.updating){if(an){ao=[];for(X=0;X<Z;++X){ao.push(at[aB+X])}}if(aB<av){X=ar.indexOf(at[aB])}else{X=ar.length}ay.requestedIndex=ag;ar.splice(X,ao,aq);delete ay.requestedIndex;return ay}if(aa){ah=aq;aC=[];am={};if(aE){W=ay.getSorters();if(aa>1){if(!ah.$cloned){aq=ah=ah.slice(0)}ay.sortData(ah)}}for(X=0;X<aa;++X){aw=ay.getKey(aj=aq[X]);if((Y=am[aw])!==undefined){(n||(n={}))[Y]=1}else{ae=aG[aw];if(ae<aB||az<=ae){(aA||(aA=[])).push(ae)}}am[aw]=X;aC.push(aw)}if(n){al=aC;ah=[];aC=[];ah.$cloned=true;for(X=0;X<aa;++X){if(!n[X]){aj=aq[X];ah.push(aj);aC.push(al[X])}}aa=ah.length}au={items:ah,keys:aC}}for(X=ao?ao.length:0;X-->0;){aw=ay.getKey(ao[X]);if((ae=aG[aw])!==undefined){(aA||(aA=[])).push(ae)}}if(!au&&!aA){return ay}ay.beginUpdate();if(aA){aH=null;ac=[];ap={};if(aA.length>1){aA.sort(Ext.Array.numericSortFn)}for(X=0,ab=aA.length;X<ab;++X){aw=ay.getKey(aj=at[ae=aA[X]]);if(!(aw in ak)){continue}delete ak[aw];if(!aH||ae>(aH.at+ad.length)){ac.push(aH={at:ae,items:(ad=[]),keys:(al=[]),map:ap,next:aH,replacement:au});if(au){au.replaced=aH}}ad.push(ap[aw]=aj);al.push(aw);if(ae<aF-1){--aF}if(Z>1&&ae===aB){--Z;aA[X--]=++aB}}if(au){au.at=aF}for(Y=ac.length;Y-->0;){aH=ac[Y];X=aH.at;ab=aH.items.length;if(X+ab<av){ay.indices=aG=null}ay.length=av-=ab;at.splice(X,ab);if(aG){al=aH.keys;for(X=0;X<ab;++X){delete aG[al[X]]}}++ay.generation;ay.notify("remove",[aH])}}if(au){if(aE&&aa>1&&av){ay.spliceMerge(ah,aC)}else{if(aE){if(aa>1){aF=0;ay.indices=aG=null}else{aF=W.findInsertionIndex(au.items[0],at,ay.getSortFn(),ag)}}if(aF===av){az=aF;for(X=ah.length-1;X>=0;--X){at[az+X]=ah[X]}aG=ay.indices;if(aG){for(X=0;X<aa;++X){aG[aC[X]]=aF+X}}}else{ay.indices=null;Ext.Array.insert(at,aF,ah)}for(X=0;X<aa;++X){ak[aC[X]]=ah[X]}ay.length+=aa;au.at=aF;au.atItem=aF===0?null:at[aF-1];++ay.generation;ay.notify("add",[au])}}ay.endUpdate();return ay},update:function(o,p){var n=this;n.beginUpdate();try{return o.call(p||n,n)}catch(e){throw e}finally{n.endUpdate()}},updateKey:function(t,p){var u=this,q=u.map,v=u.indices,s=u.getSource(),w;if(s&&!s.updating){s.updateKey(t,p)}else{if((w=u.getKey(t))!==p){if(q[p]===t&&!(w in q)){delete q[p];u.updating++;u.generation++;q[w]=t;if(v){v[w]=v[p];delete v[p]}u.notify("updatekey",[{item:t,newKey:w,oldKey:p}]);u.updating--}}}},findInsertIndex:function(p){var o=this.getSource(),u=o.items,s=o.indexOf(p)-1,q,t;while(s>-1){q=u[s];t=this.indexOf(q);if(t>-1){return t+1}--s}return 0},onCollectionAdd:function(C,B){var F=this,D=B.atItem,G=B.items,x=F.requestedIndex,n,w,A,y,E,z;if(!F.sorted){if(x!==undefined){w=x}else{if(D){w=F.indexOf(D);if(w===-1){w=F.findInsertIndex(G[0])}else{++w}}else{w=0}}}if(F.getAutoFilter()&&F.filtered){for(y=0,z=G.length;y<z;++y){E=G[y];if(F.isItemFiltered(E)){if(!A){A=G.slice(0,y)}if(!n){n=[]}n.push(E)}else{if(A){A.push(E)}}}}F.splice((w<0)?F.length:w,0,A||G);if(n){F.notify("filteradd",[n])}},onCollectionBeforeItemChange:function(g,l){this.onCollectionUpdateKey=null},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionItemChange:function(g,l){delete this.onCollectionUpdateKey;this.itemChanged(l.item,l.modified,l.oldKey,l.meta)},onCollectionFilteredItemChange:null,onCollectionRefresh:function(A){var v=this,z={},t={},x,s,w,u,y;w=A.items;w=v.filtered&&v.getAutoFilter()?Ext.Array.filter(w,v.getFilterFn()):w.slice(0);if(v.sorted){v.sortData(w)}v.items=w;v.length=y=w.length;v.map=z;v.indices=t;for(x=0;x<y;++x){u=v.getKey(s=w[x]);z[u]=s;t[u]=x}v.notify("refresh")},onCollectionRemove:function(g,l){this.splice(0,l.items)},onCollectionUpdateKey:function(g,l){this.updateKey(l.item,l.oldKey)},_aggregators:{average:function(q,p,s,n,t){var u=s-p;return u&&this._aggregators.sum.call(this,q,p,s,n,t)/u},bounds:function(w,A,z,s,v){for(var t,u,y,x=A;x<z;++x){t=w[x];t=(v?t[v]:t)[s];if(!(t<u)){u=t}if(!(t>y)){y=t}}return[y,u]},count:function(f){return f.length},extremes:function(y,D,B,F,v){var x=null,C=null,z,E,w,A,G;for(z=D;z<B;++z){E=y[z];G=(v?E[v]:E)[F];if(!(G<w)){w=G;x=E}if(!(G>A)){A=G;C=E}}return[C,x]},max:function(p,o,q,u,s){var t=this._aggregators.bounds.call(this,p,o,q,u,s);return t[1]},maxItem:function(p,o,q,u,s){var t=this._aggregators.extremes.call(this,p,o,q,u,s);return t[1]},min:function(p,o,q,u,s){var t=this._aggregators.bounds.call(this,p,o,q,u,s);return t[0]},minItem:function(p,o,q,u,s){var t=this._aggregators.extremes.call(this,p,o,q,u,s);return t[0]},sum:function(t,y,u,w,v){for(var x,q=0,s=y;s<u;++s){x=t[s];x=(v?x[v]:x)[w];q+=x}return q}},_eventToMethodMap:{add:"onCollectionAdd",beforeitemchange:"onCollectionBeforeItemChange",beginupdate:"onCollectionBeginUpdate",endupdate:"onCollectionEndUpdate",itemchange:"onCollectionItemChange",filtereditemchange:"onCollectionFilteredItemChange",refresh:"onCollectionRefresh",remove:"onCollectionRemove",beforesort:"beforeCollectionSort",sort:"onCollectionSort",filter:"onCollectionFilter",filteradd:"onCollectionFilterAdd",updatekey:"onCollectionUpdateKey"},addObserver:function(n){var m=this,l=m.observers;if(!l){m.observers=l=[]}if(m.notifying){m.observers=l=l.slice(0)}l.push(n);if(l.length>1){Ext.Array.sort(l,m.prioritySortFn)}},prioritySortFn:function(m,n){var o=m.observerPriority||0,p=n.observerPriority||0;return o-p},applyExtraKeys:function(p,u){var w=this,q=u||{},s,t,v;for(t in p){v=p[t];if(!v.isCollectionKey){s={collection:w};if(Ext.isString(v)){s.property=v}else{s=Ext.apply(s,v)}v=new Ext.util.CollectionKey(s)}else{v.setCollection(w)}q[t]=w[t]=v;v.name=t}return q},applyGrouper:function(f){if(f){f=this.getSorters().decodeSorter(f,"Ext.util.Grouper")}return f},decodeItems:function(q,s){var w=this,t=(s===undefined)?q:q[s],u,v,p;if(!t||!t.$cloned){u=q.length>s+1||!Ext.isIterable(t);if(u){t=Ext.Array.slice(q,s);if(t.length===1&&t[0]===undefined){t.length=0}}v=w.getDecoder();if(v){if(!u){t=t.slice(0);u=true}for(p=t.length;p-->0;){if((t[p]=v.call(w,t[p]))===false){t.splice(p,1)}}}if(u){t.$cloned=true}}return t},getIndices:function(){var p=this,n=p.indices,t=p.items,u=t.length,q,s;if(!n){p.indices=n={};++p.indexRebuilds;for(q=0;q<u;++q){s=p.getKey(t[q]);n[s]=q}}return n},notify:function(y,v){var u=this,z=u.observers,C=u._eventToMethodMap[y],t=0,x,A,B,w;v=v||[];if(z&&C){u.notifying=true;for(x=0,A=z.length;x<A;++x){B=(w=z[x])[C];if(B){if(!t++){v.unshift(u)}B.apply(w,v)}}u.notifying=false}if(!u.hasListeners){return}if(u.hasListeners[y]){if(!t){v.unshift(u)}u.fireEventArgs(y,v)}},getFilterFn:function(){return this.getFilters().getFilterFn()},getFilters:function(g){var l=this._filters;if(!l&&g!==false){l=new Ext.util.FilterCollection();this.setFilters(l)}return l},isItemFiltered:function(f){return !this.getFilters().filterFn(f)},onFilterChange:function(o){var p=this,u=p.getSource(),q,s,t;if(!u){q=p.getExtraKeys();if(q){s={};for(t in q){s[t]=q[t].clone(p)}}u=new Ext.util.Collection({keyFn:p.getKey,extraKeys:s,rootProperty:p.getRootProperty()});if(p.length){u.add(p.items)}p.setSource(u);p.autoSource=u}else{if(u.length||p.length){p.onCollectionRefresh(u)}}p.notify("filter")},applyFilters:function(l,g){if(!l||l.isFilterCollection){return l}if(l){if(!g){g=this.getFilters()}g.splice(0,g.length,l)}return g},updateFilters:function(n,m){var l=this;if(m){m.un("endupdate","onEndUpdateFilters",l)}if(n){n.on({endupdate:"onEndUpdateFilters",scope:l,priority:l.$endUpdatePriority});n.$filterable=l}l.onEndUpdateFilters(n)},onEndUpdateFilters:function(n){var o=this,m=o.filtered,p=!!n&&(n.length>0);if(m||p){o.filtered=p;o.onFilterChange(n)}},getSortFn:function(){return this._sortFn||this.createSortFn()},getSorters:function(g){var l=this._sorters;if(!l&&g!==false){l=new Ext.util.SorterCollection();this.setSorters(l)}return l},onSortChange:function(){if(this.sorted){this.sortItems()}},sort:function(p,n,m){var o=this.getSorters();o.addSort.apply(o,arguments);return this},sortData:function(f){Ext.Array.sort(f,this.getSortFn());return f},sortItems:function(g){var l=this;if(l.sorted){g=l.getSortFn()}l.indices=null;l.notify("beforesort",[l.getSorters(false)]);if(l.length){Ext.Array.sort(l.items,g)}l.notify("sort")},sortBy:function(f){return this.sortItems(f)},findInsertionIndex:function(w,t,p,q){var v,s,u;t=t||this.items;p=p||this.getSortFn();u=t.length;if(q<u){v=q>0?p(t[q-1],w):0;s=q<u-1?p(w,t[q]):0;if(v<1&&s<1){return q}}return Ext.Array.binarySearch(t,w,p)},applySorters:function(l,g){if(!l||l.isSorterCollection){return l}if(l){if(!g){g=this.getSorters()}g.splice(0,g.length,l)}return g},createSortFn:function(){var n=this,p=n.getGrouper(),m=n.getSorters(false),o=m?m.getSortFn():null;if(!p){return o}return function(e,f){var g=p.sort(e,f);if(!g&&o){g=o(e,f)}return g}},updateGrouper:function(q){var p=this,s=p.getGroups(),n=p.getSorters(),o;p.onSorterChange();p.grouped=!!q;if(q){if(p.getTrackGroups()){if(!s){s=new Ext.util.GroupCollection({itemRoot:p.getRootProperty()});s.$groupable=p;p.setGroups(s)}s.setGrouper(q);o=true}}else{if(s){p.removeObserver(s);s.destroy()}p.setGroups(null)}if(!n.updating){p.onEndUpdateSorters(n)}if(o){s.onCollectionRefresh(p)}},updateSorters:function(n,m){var l=this;if(m&&!m.destroyed){m.un("endupdate","onEndUpdateSorters",l)}if(n){n.on({endupdate:"onEndUpdateSorters",scope:l,priority:l.$endUpdatePriority});n.$sortable=l}l.onSorterChange();l.onEndUpdateSorters(n)},onSorterChange:function(){this._sortFn=null},onEndUpdateSorters:function(n){var o=this,m=o.sorted,p=(o.grouped&&o.getAutoGroup())||(n&&n.length>0);if(m||p){o.sorted=!!p;o.onSortChange(n)}},removeObserver:function(l){var g=this.observers;if(g){Ext.Array.remove(g,l)}},spliceMerge:function(J,B){var C=this,D=C.map,N=J.length,Q=0,I=C.items,K=I.length,L=[],M=0,G=[],P=C.getSortFn(),H,R,F,O,E,S;C.items=G;for(S=0;S<N;S=R){O=J[S];for(;Q<K;++Q){if(P(O,E=I[Q])<0){break}G.push(E)}if(Q===K){L[M++]={at:G.length,itemAt:G[G.length-1],items:(H=[])};if(M>1){L[M-2].next=L[M-1]}for(;S<N;++S){H.push(O=J[S]);G.push(O)}break}L[M++]={at:G.length,itemAt:G[G.length-1],items:(H=[O])};if(M>1){L[M-2].next=L[M-1]}G.push(O);for(R=S+1;R<N;++R){if(P(O=J[R],E)>=0){break}G.push(O);H.push(O)}}for(;Q<K;++Q){G.push(I[Q])}for(F=0;F<N;++F){D[B[F]]=J[F]}C.length=G.length;++C.generation;C.indices=null;for(F=0;F<M;++F){C.notify("add",[L[F]])}},getGroups:function(){return(arguments.callee.$previous||Ext.Base.prototype.getGroups).call(this)||null},updateAutoGroup:function(g){var l=this.getGroups();if(l){l.setAutoGroup(g)}this.onEndUpdateSorters(this._sorters)},updateGroups:function(l,g){if(g){this.removeObserver(g)}if(l){this.addObserver(l)}},updateSource:function(m,n){var l=this.autoSource;if(n){if(!n.destroyed){n.removeObserver(this)}if(n===l){l.destroy();this.autoSource=null}}if(m){m.addObserver(this);if(m.length||this.length){this.onCollectionRefresh(m)}}}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.util,"Collection"],function(){var f=this.prototype;f.removeAtKey=f.removeByKey;f.decodeRemoveItems=f.decodeItems;Ext.Object.each(f._aggregators,function(e){f[e]=function(n,o,p){return this.aggregate(n,e,o,p)};f[e+"ByGroup"]=function(l){return this.aggregateByGroup(l,e)}})}));(Ext.cmd.derive("Ext.util.SorterCollection",Ext.util.Collection,{isSorterCollection:true,$sortable:null,sortFn:null,config:{sorterOptionsFn:null,sorterOptionsScope:null},constructor:function(l){var g=this;g.sortFn=Ext.util.Sorter.createComparator(g);Ext.util.Collection.prototype.constructor.call(this,l);g.setDecoder(g.decodeSorter)},addSort:function(u,v,A){var w=this,z,y,B,D,C,E,x;if(!u){w.beginUpdate();w.endUpdate()}else{D=w.getOptions();if(u instanceof Array){x=u;A=v;v=null}else{if(Ext.isString(u)){if(!(E=w.get(u))){x=[{property:u,direction:v||D.getDefaultSortDirection()}]}else{x=[E]}}else{if(Ext.isFunction(u)){x=[{sorterFn:u,direction:v||D.getDefaultSortDirection()}]}else{x=[u];A=v;v=null}}}A=w._sortModes[A||"replace"];C=w.getAt(0);z=w.length;y=A.append?z:0;w.beginUpdate();w.splice(y,A.replace?z:0,x);if(A.multi){z=w.length;B=D.getMultiSortLimit();if(z>B){w.removeAt(B,z)}}if(E&&v){E.setDirection(v)}else{if(y===0&&C&&C===w.getAt(0)){C.toggle()}}w.endUpdate()}},clear:function(){this.beginUpdate();Ext.util.Collection.prototype.clear.call(this);this.endUpdate(this.items)},getSortFn:function(){return this.sortFn},getByProperty:function(n){var q=this.items,s=q.length,p,o;for(p=0;p<s;++p){o=q[p];if(o.getProperty()===n){return o}}return null},_sortModes:{append:{append:1},multi:{multi:1},prepend:{prepend:1},replace:{replace:1}},decodeSorter:function(t,A){var v=this,s=v.getOptions(),u=s.getRootProperty(),z=v.getSorterOptionsFn(),y,w,x;if(t.isSorter){if(!t.getRoot()){t.setRoot(u)}}else{w={direction:s.getDefaultSortDirection(),root:u};x=typeof t;if(x==="string"){y=v.get(t);if(y){return y}w.property=t}else{if(x==="function"){w.sorterFn=t}else{w=Ext.apply(w,t);if(w.fn){w.sorterFn=w.fn;delete w.fn}}}t=Ext.create(A||"Ext.util.Sorter",w)}if(z){z.call(v.getSorterOptionsScope()||v,t)}return t},setSorterConfigure:function(g,l){this.setSorterOptionsFn(g);this.setSorterOptionsScope(l)},decodeRemoveItems:function(w,z){var G=this,y=(z===undefined)?w:w[z];if(!y||!y.$cloned){if(w.length>z+1||!Ext.isIterable(y)){y=Ext.Array.slice(w,z)}var F=G.items,x=y.length,A=[],B,E,C,D,n;for(B=0;B<x;B++){D=y[B];if(D&&D.isSorter){A.push(D)}else{n=typeof D;if(n==="string"){D=G.get(D);if(D){A.push(D)}}else{if(n==="function"){for(C=F.length;C-->0;){E=F[C];if(E.getSorterFn()===D){A.push(E)}}}}}}y=A;y.$cloned=true}return y},getOptions:function(){return this.$sortable||this}},1,0,0,0,0,0,[Ext.util,"SorterCollection"],0));(Ext.cmd.derive("Ext.util.FilterCollection",Ext.util.Collection,{isFilterCollection:true,$filterable:null,filterFn:null,constructor:function(l){var g=this;g.filterFn=Ext.util.Filter.createFilterFn(g);Ext.util.Collection.prototype.constructor.call(this,l);g.setDecoder(g.decodeFilter)},filterData:function(f){return this.filtered?Ext.Array.filter(f,this.filterFn):f},getFilterFn:function(){return this.filterFn},isItemFiltered:function(f){return !this.filterFn(f)},decodeFilter:function(n){var o=this.getOptions(),p=o.getRootProperty(),m;if(n.isFilter){if(!n.getRoot()){n.setRoot(p)}}else{m={root:p};if(Ext.isFunction(n)){m.filterFn=n}else{m=Ext.apply(m,n);if(m.fn){m.filterFn=m.fn;delete m.fn}if(Ext.util.Filter.isInvalid(m)){return false}}n=new Ext.util.Filter(m)}return n},decodeRemoveItems:function(K,O){var I=this,N=(O===undefined)?K:K[O];if(!N.$cloned){if(K.length>O+1||!Ext.isIterable(N)){N=Ext.Array.slice(K,O)}var C=I.items,L=N.length,A=[],F,B,E,M,G,H,n,D,J;for(B=0;B<L;B++){F=N[B];if(F&&F.isFilter){A.push(F)}else{J=typeof F;E=J==="function";M=F.property!==undefined&&F.value!==undefined;G=J==="string";for(D=C.length;D-->0;){H=C[D];n=false;if(G){n=H.getProperty()===F}else{if(E){n=H.getFilterFn()===F}else{if(M){n=H.getProperty()===F.property&&H.getValue()===F.value}}}if(n){A.push(H)}}}}N=A;N.$cloned=true}return N},getOptions:function(){return this.$filterable||this}},1,0,0,0,0,0,[Ext.util,"FilterCollection"],0));(Ext.cmd.derive("Ext.ZIndexManager",Ext.Base,{alternateClassName:"Ext.WindowGroup",statics:{zBase:9000,activeCounter:0},constructor:function(l){var g=this;g.id=Ext.id(null,"zindex-mgr-");g.zIndexStack=new Ext.util.Collection({sorters:{sorterFn:function(e,f){var n=(e.alwaysOnTop||0)-(f.alwaysOnTop||0);if(!n){n=e.getActiveCounter()-f.getActiveCounter()}return n}},filters:{filterFn:function(e){return e.isVisible()}}});g.zIndexStack.addObserver(g);g.front=null;g.sortCount=0;g.globalListeners=Ext.GlobalEvents.on({beforehide:g.onComponentShowHide,show:g.onComponentShowHide,scope:g,destroyable:true});if(l){if(l.isContainer){g.resizeListeners=l.on({resize:g.onContainerResize,scope:g,destroyable:true});g.zseed=Ext.Number.from(g.rendered?l.getEl().getStyle("zIndex"):undefined,g.getNextZSeed());g.targetEl=l.getTargetEl();g.container=l}else{g.resizeListeners=Ext.on({resize:g.onContainerResize,scope:g,destroyable:true});g.zseed=g.getNextZSeed();g.targetEl=Ext.get(l)}}else{g.zseed=g.getNextZSeed();Ext.onInternalReady(function(){g.resizeListeners=Ext.on({resize:g.scheduleContainerResize,scope:g,destroyable:true,priority:-10000});g.targetEl=Ext.getBody()})}},getId:function(){return this.id},getNextZSeed:function(){return(Ext.ZIndexManager.zBase+=10000)},setBase:function(f){this.zseed=f;return this.onCollectionSort()},onCollectionSort:function(){var v=this,y=v.front,u=v.zseed,t=v.zIndexStack.getRange(),w=t.length,z,x,A,B,C=!y||y.isVisible();v.sortCount++;for(z=0;z<w;z++){x=t[z];if(x.destroying||x.destroyed){continue}u=x.setZIndex(u);if(!x.hidden){B=x;if(x.modal){A=x}}}if(B!==y){if(y&&!y.destroying){y.setActive(false)}if(B){C=C&&(B.isFocusable(true)&&(B.modal||(B.focusOnToFront&&!B.preventFocusOnActivate)));B.setActive(true,C)}}v.front=B||null;if(A){if(A===y){v.syncModalMask(A)}else{v.showModalMask(A)}}else{v.hideModalMask()}return u},onComponentUpdate:function(f){if(this.zIndexStack.contains(f)){this.zIndexStack.sort()}},onAfterComponentRender:function(f){if(f.isVisible()&&f.toFrontOnShow){this.zIndexStack.itemChanged(f,"hidden");this.zIndexStack.sort()}},onComponentShowHide:function(o){var n=this,m=n.zIndexStack,p=n.sortCount;if(o.isFloating()&&!n.hidingAll&&(m.getSource()||m).contains(o)){if(n.tempHidden){Ext.Array.remove(n.tempHidden,o)}m.beginUpdate();if(o.isVisible()){if(o.toFrontOnShow){m.itemChanged(o,"hidden");o.setActiveCounter(++Ext.ZIndexManager.activeCounter)}}else{m.itemChanged(o,"hidden")}m.endUpdate();if(n.sortCount===p){n.onCollectionSort()}}},register:function(l){var g=this;if(l.zIndexManager){l.zIndexManager.unregister(l)}l.zIndexManager=g;if(!l.rendered){l.on("afterrender",g.onAfterComponentRender,g,{single:true})}g.zIndexStack.add(l)},unregister:function(l){var g=this;delete l.zIndexManager;l.un("afterrender",g.onAfterComponentRender,g);g.zIndexStack.remove(l);g.onCollectionSort()},get:function(f){return f.isComponent?f:this.zIndexStack.get(f)},bringToFront:function(t,p){var s=this,v=s.zIndexStack,u=v.last(),q,w;t=s.get(t);if(!t){return false}w=t.preventFocusOnActivate;t.preventFocusOnActivate=p;t.setActiveCounter(++Ext.ZIndexManager.activeCounter);t.preventFocusOnActivate=w;q=v.last();return(q===t&&q!==u)},sendToBack:function(f){f=this.get(f);if(f){f.setActiveCounter(0)}return f||null},hideAll:function(){var m=this,n=m.zIndexStack.getRange(),p=n.length,o;m.hidingAll=true;for(o=0;o<p;o++){n[o].hide()}m.hidingAll=false;m.hideModalMask();m.front=null},hide:function(){var u=this,o=Ext.Element.getActiveElement(),p=u.zIndexStack.getRange(),t=p.length,q,s;u.focusRestoreElement=null;(u.tempHidden||(u.tempHidden=[])).length=0;for(q=0;q<t;q++){s=p[q];if(s.isVisible()){if(s.el.contains(o)){u.focusRestoreElement=o}s.el.hide();s.pendingShow=s.hidden=true;u.tempHidden.push(s)}}},show:function(){var o=this,p,n=o.tempHidden,s=n?n.length:0,q;for(p=0;p<s;p++){q=n[p];q.hidden=false;if(q.pendingShow){q.el.show();q.pendingShow=false;q.setPosition(q.x,q.y);q.onFloatShow()}else{q.hide()}}o.tempHidden=null;if(o.focusRestoreElement){o.focusRestoreElement.focus()}},getActive:function(){return this.zIndexStack.last()},getBy:function(g,l){return this.zIndexStack.filterBy(g,l).getRange()},each:function(g,l){this.zIndexStack.each(g,l)},eachBottomUp:function(u,o){var s=this.zIndexStack.getRange(),p,t=s.length,q;for(p=0;p<t;p++){q=s[p];if(q.isComponent&&u.call(o||q,q)===false){return}}},eachTopDown:function(n,o){var s=this.zIndexStack.getRange(),p,q;for(p=s.length;p-->0;){q=s[p];if(q.isComponent&&n.call(o||q,q)===false){return}}},destroy:function(){var m=this,o=m.zIndexStack.getRange(),p=o.length,n;for(n=0;n<p;n++){Ext.destroy(o[n])}Ext.destroy(m.mask,m.maskShim,m.zIndexStack,m.globalListeners,m.resizeListeners);m.callParent()},privates:{getMaskBox:function(){var f=this.mask.maskTarget;if(f.dom===document.body){return{height:Math.max(document.body.scrollHeight,Ext.dom.Element.getDocumentHeight()),width:Math.max(document.body.scrollWidth,document.documentElement.clientWidth),x:0,y:0}}else{return f.getBox()}},scheduleContainerResize:function(){if(!this.containerResizeTimer){this.containerResizeTimer=Ext.Function.requestAnimationFrame(this.onContainerResize,this)}},onContainerResize:function(){var n=this,o=n.mask,p=n.maskShim,m;n.containerResizeTimer=null;if(o&&o.isVisible()){o.hide();if(p){p.hide()}m=n.getMaskBox();if(p){p.setSize(m);p.show()}o.setSize(m);o.show()}},onMaskMousedown:function(e){if(this.front){this.front.focus();e.preventDefault()}},onMaskClick:function(){var g=this.front,l;if(g){if(!g.hasListeners.maskclick||g.fireEvent("maskclick",g)!==false){l=g.maskClickAction||"focus";g[l]()}}},showModalMask:function(q){var o=this,n=q.el,p=q.floatParent?q.floatParent.getEl():q.container,s=o.mask;if(!s){o.mask=s=Ext.getBody().createChild({role:"presentation",cls:"x-mask x-border-box",style:"height:0;width:0"});s.setVisibilityMode(Ext.Element.DISPLAY);s.on({mousedown:o.onMaskMousedown,click:o.onMaskClick,scope:o})}else{o.hideModalMask()}s.maskTarget=p;p.saveTabbableState({excludeRoot:n});o.syncModalMask(q)},syncModalMask:function(s){var q=this,u=s.el.getZIndex()-4,t=q.mask,o=q.maskShim,p=q.getMaskBox();if(o){o.setZIndex(u);o.show();o.setBox(p)}t.setZIndex(u);t.show();t.setBox(p)},hideModalMask:function(){var g=this.mask,l=this.maskShim;if(g&&g.isVisible()){g.maskTarget.restoreTabbableState();g.maskTarget=undefined;g.hide();if(l){l.hide()}}}}},1,0,0,0,0,0,[Ext,"ZIndexManager",Ext,"WindowGroup"],function(){Ext.WindowManager=Ext.WindowMgr=new this()}));(Ext.cmd.derive("Ext.util.ItemCollection",Ext.util.MixedCollection,{alternateClassName:"Ext.ItemCollection",getKey:function(f){return f.getItemId&&f.getItemId()},has:function(f){return this.map.hasOwnProperty(f.getId())}},0,0,0,0,0,0,[Ext.util,"ItemCollection",Ext,"ItemCollection"],0));(Ext.cmd.derive("Ext.mixin.Queryable",Ext.Base,{mixinId:"queryable",isQueryable:true,query:function(f){f=f||"*";return Ext.ComponentQuery.query(f,this.getQueryRoot())},queryBy:function(w,p){var s=[],t=this.getQueryRoot().getRefItems(true),q=0,u=t.length,v;for(;q<u;++q){v=t[q];if(w.call(p||v,v)!==false){s.push(v)}}return s},queryById:function(f){return this.down(Ext.makeIdSelector(f))},child:function(l){var g=this.getQueryRoot().getRefItems();if(l&&l.isComponent){return this.matchById(g,l.getItemId())}if(l){g=Ext.ComponentQuery.query(l,g)}if(g.length){return g[0]}return null},down:function(f){if(f&&f.isComponent){return this.matchById(this.getRefItems(true),f.getItemId())}f=f||"";return this.query(f)[0]||null},visitPreOrder:function(p,m,n,o){Ext.ComponentQuery._visit(true,p,this.getQueryRoot(),m,n,o)},visitPostOrder:function(p,m,n,o){Ext.ComponentQuery._visit(false,p,this.getQueryRoot(),m,n,o)},getRefItems:function(){return[]},getQueryRoot:function(){return this},privates:{matchById:function(q,n){var s=q.length,p,o;for(p=0;p<s;++p){o=q[p];if(o.getItemId()===n){return o}}return null}}},0,0,0,0,0,0,[Ext.mixin,"Queryable"],0));(Ext.cmd.derive("Ext.mixin.Container",Ext.Mixin,{mixinConfig:{id:"container"},isContainer:true,config:{referenceHolder:false},getReferences:function(){Ext.ComponentManager.fixReferences();return this.refs||null},lookup:function(g){var l=this.getReferences();return(l&&l[g])||null},lookupReference:function(f){return this.lookup(f)},privates:{attachReference:function(o){var m=this,n,p;if(m.destroying||m.destroyed){return}p=m.refs||(m.refs={});n=o.referenceKey;p[n]=o},clearReference:function(m){var n=this.refs,l=m.referenceKey;if(n&&l){m.viewModelKey=m.referenceKey=n[l]=null}},containerOnAdded:function(g,l){if(l){Ext.ComponentManager.markReferencesDirty()}},containerOnRemoved:function(l){var g;if(!l){g=this.lookupReferenceHolder();if(g){Ext.ComponentManager.markReferencesDirty();g.clearReferences()}}},clearReferences:function(){this.refs=null},initContainerInheritedState:function(q,t){var x=this,u=x.getController(),w=x.getSession(),s=x.getConfig("viewModel",true),v=x.getReference(),y=x.getReferenceHolder();if(u){q.referenceHolder=u;y=true}else{if(y){q.referenceHolder=x}}if(y){q.referencePath=""}else{if(v&&x.isParentReference){q.referencePath=x.referenceKey+"."}}if(w){q.session=w}if(s){q.viewModelPath=""}else{if(v&&x.isParentReference){q.viewModelPath=x.viewModelKey+"."}}},setupReference:function(g){var l;if(g&&g.charAt(l=g.length-1)===">"){this.isParentReference=true;g=g.substring(0,l)}return g}}},0,0,0,0,0,0,[Ext.mixin,"Container"],0));(Ext.cmd.derive("Ext.container.Container",Ext.Component,{alternateClassName:["Ext.Container","Ext.AbstractContainer"],renderTpl:"<tpl if=\"hasTabGuard\">{% this.renderTabGuard(out, values, 'before'); %}</tpl>{% this.renderContainer(out,values) %}<tpl if=\"hasTabGuard\">{% this.renderTabGuard(out, values, 'after'); %}</tpl>",config:{actions:null},autoDestroy:true,defaultType:"panel",detachOnRemove:true,items:undefined,layout:"auto",suspendLayout:false,tabGuardTpl:'<span id="{id}-{tabGuardEl}" data-ref="{tabGuardEl}" aria-hidden="true" class="x-tab-guard x-tab-guard-{tabGuardPosition}" style="width:0px;height:0px;"></span>',tabGuardElements:{before:"tabGuardBeforeEl",after:"tabGuardAfterEl"},_applyDefaultsOptions:{defaults:true,strict:false},ariaRole:"presentation",baseCls:"x-container",layoutCounter:0,add:function(){var I=this,y=Ext.Array.slice(arguments),A=(typeof y[0]==="number")?y.shift():-1,C=I.getLayout(),B=false,G,x,D,E,F,H,z,w;if(y.length===1&&Ext.isArray(y[0])){x=y[0];G=true}else{x=y}if(I.rendered){Ext.suspendLayouts()}z=x=I.prepareItems(x,true);E=x.length;if(!G&&E===1){z=x[0]}for(D=0;D<E;D++){F=x[D];H=(A<0)?I.items.length:(A+D);w=!!F.instancedCmp;delete F.instancedCmp;if(F.floating){(I.floatingItems||(I.floatingItems=new Ext.util.ItemCollection())).add(F);F.onAdded(I,H,w);delete F.$initParent;if(I.hasListeners.add){I.fireEvent("add",I,F,H)}}else{if((!I.hasListeners.beforeadd||I.fireEvent("beforeadd",I,F,H)!==false)&&I.onBeforeAdd(F)!==false){I.items.insert(H,F);F.onAdded(I,H,w);delete F.$initParent;I.onAdd(F,H);C.onAdd(F,H);B=true;if(I.hasListeners.add){I.fireEvent("add",I,F,H)}}}}if(B){I.updateLayout()}if(I.rendered){Ext.resumeLayouts(true)}return z},onAdded:function(m,l,n){Ext.Component.prototype.onAdded.call(this,m,l,n);this.containerOnAdded(m,n)},onRemoved:function(f){this.containerOnRemoved(f);Ext.Component.prototype.onRemoved.apply(this,arguments)},afterComponentLayout:function(){var o=this.floatingItems,p,m,n;Ext.Component.prototype.afterComponentLayout.apply(this,arguments);if(o){o=o.items;p=o.length;for(m=0;m<p;m++){n=o[m];if(!n.rendered&&n.autoShow){n.show()}}}},afterLayout:function(g){var l=this;++l.layoutCounter;if(l.hasListeners.afterlayout){l.fireEvent("afterlayout",l,g)}},doDestroy:function(){var o=this,p=o.items,n=o.floatingItems,m;if(p){while((m=p.first())){o.doRemove(m,true)}p.destroy();o.items=null}if(n){while((m=n.first())){o.doRemove(m,true)}n.destroy();o.floatingItems=null}Ext.destroy(o.layout);Ext.Component.prototype.doDestroy.call(this)},beforeRender:function(){var m=this,n=m.getLayout(),l;m.preventChildDisable=true;Ext.Component.prototype.beforeRender.call(this);m.preventChildDisable=false;if(!n.initialized){n.initLayout()}l=n.targetCls;if(l){m.applyTargetCls(l)}},cascade:function(t,C,B){var u=this,y=u.items?u.items.items:[],x=y.length,z=0,v,w=B?B.concat(u):[u],A=w.length-1;if(t.apply(C||u,w)!==false){for(;z<x;z++){v=y[z];if(v.cascade){v.cascade(t,C,B)}else{w[A]=v;t.apply(C||v,w)}}}return this},contains:function(l,m){var n=false;if(m){this.cascade(function(e){if(e.contains&&e.contains(l)){n=true;return false}});return n}else{return this.items.contains(l)||(this.floatingItems&&this.floatingItems.contains(l))}},disable:function(t,v){var p=this,q=p.disabled,w,u,s;Ext.Component.prototype.disable.call(this,t,v);if(!v&&!p.preventChildDisable&&!q){w=p.getChildItemsToDisable();u=w.length;for(s=0;s<u;s++){w[s].disable(t,true)}}return p},enable:function(t,v){var p=this,q=p.disabled,w,u,s;Ext.Component.prototype.enable.call(this,t,v);if(q){w=p.getChildItemsToDisable();u=w.length;for(s=0;s<u;s++){w[s].enable(t,true)}}return p},getChildByElement:function(p,u){var v,s,t=0,q=this.getRefItems(),w=q.length;p=Ext.getDom(p);for(;t<w;t++){v=q[t];s=v.getEl();if(s&&((s.dom===p)||s.contains(p))){return(u&&v.getChildByElement)?v.getChildByElement(p,u):v}}return null},getComponent:function(m){if(Ext.isObject(m)){m=m.getItemId()}var l=this.items.get(m),n=this.floatingItems;if(!l&&n&&typeof m!=="number"){l=n.get(m)}return l},getFocusEl:function(){var f=this.getDefaultFocus();if(f){return f}else{if(this.focusable){return this.getTargetEl()}}return undefined},getLayout:function(){var g=this,l=g.layout;if(!l||!l.isLayout){g.setLayout(l)}return g.layout},getRefItems:function(s){var v=this,q=v.items.items,t=q.length,p=0,w,u=[];for(;p<t;p++){w=q[p];u[u.length]=w;if(s&&w.getRefItems){u.push.apply(u,w.getRefItems(true))}}if(v.floatingItems){q=v.floatingItems.items;t=q.length;for(p=0;p<t;p++){w=q[p];u[u.length]=w;if(s&&w.getRefItems){u.push.apply(u,w.getRefItems(true))}}}return u},getDefaultFocus:function(){var g=this.defaultFocus,l;if(g){l=this.down(g)}return l},initComponent:function(){var f=this;Ext.Component.prototype.initComponent.call(this);f.getLayout();f.constructing=true;f.initItems();if(f.disabled){f.disabled=false;f.disable(true)}delete f.constructing},initItems:function(){var g=this,l=g.items;if(!l||!l.isMixedCollection){g.items=new Ext.util.ItemCollection();if(l){if(!Ext.isArray(l)){l=[l]}g.$initingItems=true;g.add(l);delete g.$initingItems}}},initInheritedState:function(t,y){var u=this,x=u.controller,w=u.layout,v=u.session,s=u.viewModel,z=u.reference,A=u.referenceHolder;Ext.Component.prototype.initInheritedState.call(this,t,y);if(u.collapsed){t.collapsed=true}u.initContainerInheritedState(t,y);if(w&&w.initInheritedState){w.initInheritedState(t,y)}},insert:function(l,m){var n;if(m&&m.isComponent){n=this.items.indexOf(m);if(n!==-1){return this.move(n,l)}}return this.add(l,m)},lookupComponent:function(p){var n=this,m=n.defaultType,o;if(!p.isComponent){if(typeof p==="string"){if(!(o=(p[0]==="@"))){return Ext.ComponentManager.get(p)}p=n.getAction(p.substr(1));m=n.defaultActionType||m}p=Ext.ComponentManager.create(p,m);if(o){p.instancedCmp=true}}return p},move:function(q,n){var o=this,s=o.items,p;if(q.isComponent){q=s.indexOf(q)}p=s.getAt(q);if(q!==n){p=s.removeAt(q);if(p===false){return false}n=Math.min(n,s.getCount());s.insert(n,p);o.onMove(p,q,n);if(o.hasListeners.childmove){o.fireEvent("childmove",o,p,q,n)}o.updateLayout()}return p},moveBefore:function(p,n){var m,o;if(p!==n){m=Ext.Element.getActiveElement(true);if(p.el&&p.el.contains(m)){o=m;o.suspendFocusEvents();p.isLayoutMoving=true}p=this.layout.moveItemBefore(p,n);if(o){p.isLayoutMoving=false;o.focus();o.resumeFocusEvents()}}return p},moveAfter:function(n,m){var o=this.layout,p;if(n!==m){p=m?o.getMoveAfterIndex(m):0;n=this.moveBefore(n,this.items.getAt(p))}return n},nextChild:function(w,t){var y=this,s=y.items,x=s.indexOf(w),q=0,u=s.length,v;if(x!==-1){if(t){for(;q<u;q++){v=s.getAt(x+q);if(!v||Ext.ComponentQuery.is(v,t)){break}}}else{v=s.getAt(x+1)}}return v||null},onAdd:Ext.emptyFn,onBeforeAdd:function(g){var l=g.ownerCt;if(l&&l!==this){l.remove(g,false)}},onMove:Ext.emptyFn,onRemove:Ext.emptyFn,onPosition:function(){Ext.Component.prototype.onPosition.apply(this,arguments);this.repositionFloatingItems()},onResize:function(){Ext.Component.prototype.onResize.apply(this,arguments);this.repositionFloatingItems()},prevChild:function(w,t){var y=this,s=y.items,x=s.indexOf(w),q=0,u=s.length,v;if(x!==-1){if(t){for(;q<u;q++){v=s.getAt(x-q);if(!v||Ext.ComponentQuery.is(v,t)){break}}}else{v=s.getAt(x-1)}}return v||null},remove:function(o,p){var n=this,m;if(n.destroyed||n.destroying){return}m=n.getComponent(o);if(m&&(!n.hasListeners.beforeremove||n.fireEvent("beforeremove",n,m)!==false)){n.doRemove(m,p);if(n.hasListeners.remove){n.fireEvent("remove",n,m)}if(!n.destroying&&!n.destroyAfterRemoving&&!m.floating){n.updateLayout()}if(n.destroyAfterRemoving){n.destroy()}}return m},removeAll:function(s){var w=this,y,u=w.floatingItems,t=[],q=0,v,x;if(u){y=w.items.items.concat(u.items)}else{y=w.items.items.slice()}v=y.length;Ext.suspendLayouts();w.removingAll=true;for(;q<v;q++){x=y[q];w.remove(x,s);if(x.ownerCt!==w){t.push(x)}}w.removingAll=false;Ext.resumeLayouts(!!v);return t},setLayout:function(o){var p=this,s=p.layout,u=s&&s.isLayout,t,q;if(typeof o==="string"){o={type:o}}q=o.type;if(u&&(!q||(q===s.type))){delete o.type;s.setConfig(o)}else{if(u){s.setOwner(null)}t=p.self.prototype.layout;if(typeof t==="string"){o.type=q||t}else{Ext.merge(Ext.merge({},t),o)}o=this.layout=Ext.Factory.layout(o);o.setOwner(this)}if(p.rendered){p.updateLayout()}},setActiveItem:function(f){return this.getLayout().setActiveItem(f)},updateActions:function(m){var o=this,p,n;for(p in m){if(!m[p].isAction){m[p]=new Ext.Action(m[p])}}},getAction:function(g){var l=this;for(var l=this;l;l=l.getRefOwner()){if(l.actions&&l.actions[g]){return l.actions[g]}}},privates:{applyDefaults:function(n){var m=this,l=m.defaults;if(l){if(Ext.isFunction(l)){l=l.call(m,n)}if(Ext.isString(n)){n=Ext.ComponentManager.get(n)}if(n.isComponent){n.setConfig(l,null,m._applyDefaultsOptions)}else{n=m.self.getConfigurator().merge(m,Ext.Object.fork(l),n)}}return n},applyReference:function(f){return this.setupReference(f)},applyTargetCls:function(f){this.layoutTargetCls=f},detachComponent:function(f){Ext.getDetachedBody().appendChild(f.getEl())},doRemove:function(t,z){var u=this,s,A=u.detachOnRemove,y=u.layout,w=y&&u.rendered,x,v=t.floating;if(z===undefined){s=u.autoDestroy}else{if(typeof z==="boolean"){s=z}else{s=("destroy" in z)&&z.destroy;A=("detach" in z)&&z.detach}}x=t.destroying||s;if(v){u.floatingItems.remove(t)}else{u.items.remove(t)}if(w&&!v){if(y.running){Ext.Component.cancelLayout(t,x)}y.onRemove(t,x)}if(!t.destroyed){t.onRemoved(x)}u.onRemove(t,x);if(s){t.destroy()}else{if(!u.destroyed){if(w&&!v){y.afterRemove(t)}if(A&&t.rendered){u.detachComponent(t)}}}},finishRenderChildren:function(){Ext.Component.prototype.finishRenderChildren.call(this);var f=this.getLayout();if(f){f.finishRender()}},getChildItemsToDisable:function(){return this.query("[isFormField],[isFocusableContainer],button")},getContentTarget:function(){return this.getLayout().getContentTarget()},getDefaultContentTarget:function(){return this.el},prepareItems:function(s,p){if(Ext.isArray(s)){s=s.slice()}else{s=[s]}var u=this,q=0,t=s.length,o;for(;q<t;q++){o=s[q];if(o==null){Ext.Array.erase(s,q,1);--q;--t}else{if(p){o=this.applyDefaults(o)}o.$initParent=u;if(o.isComponent){o.instancedCmp=true}s[q]=u.lookupComponent(o);delete o.$initParent}}return s},repositionFloatingItems:function(){var o=this.floatingItems,p,m,n;if(o){o=o.items;p=o.length;for(m=0;m<p;m++){n=o[m];if(n.el&&!n.hidden){n.setPosition(n.x,n.y)}}}},initTabGuards:function(u){var s=this,v=s.tabGuardBeforeEl,w=s.tabGuardAfterEl,x=s.tabGuardBeforeIndex||0,z=s.tabGuardAfterIndex||0,t,y,A;if(!s.rendered||!s.tabGuard){return}A=s.el.findTabbableElements({skipSelf:true});if(A[0]===v.dom){A.shift()}if(A[A.length-1]===w.dom){A.pop()}if(A&&A.length){if(x==null||z==null){for(t=0;t<A.length;t++){y=+A[t].getAttribute("tabIndex");if(y>0){x=Math.min(x,y);z=Math.max(z,y)}}}v.dom.setAttribute("tabIndex",x);w.dom.setAttribute("tabIndex",z)}else{v.dom.removeAttribute("tabIndex");w.dom.removeAttribute("tabIndex")}if(s.onTabGuardFocusEnter){if(!v.hasListeners.focusenter){v.on("focusenter",s.onTabGuardFocusEnter,s)}if(!w.hasListeners.focusenter){w.on("focusenter",s.onTabGuardFocusEnter,s)}}},_noMargin:{"margin-top":"","margin-right":"","margin-bottom":"","margin-left":""},resetItemMargins:function(){var p=this.items.items,n=p.length,o=this._noMargin,m;while(n--){m=p[n];m.margin$=null;m.el.setStyle(o)}},setupRenderTpl:function(f){Ext.Component.prototype.setupRenderTpl.apply(this,arguments);this.getLayout().setupRenderTpl(f)}}},0,["container"],["component","box","container"],{component:true,box:true,container:true},["widget.container"],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable],[Ext.mixin.Container.prototype.mixinId||Ext.mixin.Container.$className,Ext.mixin.Container]],[Ext.container,"Container",Ext,"Container",Ext,"AbstractContainer"],0));(Ext.cmd.derive("Ext.panel.Bar",Ext.container.Container,{vertical:false,_verticalSides:{left:1,right:1},initComponent:function(){var g=this,l=g.vertical;g.dock=g.dock||(l?"left":"top");g.layout=Ext.apply(l?{type:"vbox",align:"middle",alignRoundingMethod:"ceil"}:{type:"hbox",align:"middle",alignRoundingMethod:"floor"},g.layout);Ext.container.Container.prototype.initComponent.call(this)},onAdded:function(m,l,n){this.initOrientation();Ext.container.Container.prototype.onAdded.call(this,m,l,n)},onRemoved:function(f){this.removeClsWithUI(this.uiCls);Ext.container.Container.prototype.onRemoved.call(this,f)},beforeRender:function(){var f=this;if(f.forceOrientation||!f.ownerCt){f.initOrientation()}Ext.container.Container.prototype.beforeRender.call(this)},setDock:function(m){var n=this,o,p;if(m!==n.dock){Ext.suspendLayouts();n.clearOrientation();Ext.container.Container.prototype.setDock.call(this,m);n.initOrientation();p=n.vertical;o=n.layout;o.setVertical(p);o.setAlignRoundingMethod(p?"ceil":"floor");Ext.resumeLayouts(true)}},privates:{clearOrientation:function(){this.removeClsWithUI([this.vertical?"vertical":"horizontal",this.getDockName()])},getDockName:function(){return this.dock},initOrientation:function(){var l=this,m=l.dock,n=(l.vertical=(m?m in l._verticalSides:l.vertical));l.addClsWithUI([n?"vertical":"horizontal",l.getDockName()])}}},0,0,["component","box","container"],{component:true,box:true,container:true},0,0,[Ext.panel,"Bar"],0));(Ext.cmd.derive("Ext.panel.Title",Ext.Component,{isTitle:true,noWrap:true,textAlign:"left",iconAlign:"left",rotation:0,text:"&#160;",beforeRenderConfig:{textAlign:null,text:null,glyph:null,icon:null,iconAlign:null,iconCls:null,rotation:null},autoEl:{role:"presentation",unselectable:"on"},textElRole:"presentation",tabIndex:0,childEls:["textEl","iconEl","iconWrapEl"],renderTpl:'<tpl if="iconMarkup && iconBeforeTitle">{iconMarkup}</tpl><div id="{id}-textEl" data-ref="textEl" class="{textCls} {textCls}-{ui} {itemCls}{childElCls}" unselectable="on"<tpl if="textElRole"> role="{textElRole}"</tpl>>{text}</div><tpl if="iconMarkup && !iconBeforeTitle">{iconMarkup}</tpl>',iconTpl:'<div id="{id}-iconWrapEl" data-ref="iconWrapEl" role="presentation" class="{iconWrapCls} {iconWrapCls}-{ui} {iconAlignCls} {itemCls}{childElCls}"<tpl if="iconWrapStyle"> style="{iconWrapStyle}"</tpl>><div id="{id}-iconEl" data-ref="iconEl" role="presentation" unselectable="on" class="{baseIconCls} {baseIconCls}-{ui} {iconCls} {glyphCls}" style="<tpl if="iconUrl">background-image:url({iconUrl});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">{glyph}</tpl></div></div>',_textAlignClasses:{left:"x-title-align-left",center:"x-title-align-center",right:"x-title-align-right"},_iconAlignClasses:{top:"x-title-icon-top",right:"x-title-icon-right",bottom:"x-title-icon-bottom",left:"x-title-icon-left"},_rotationClasses:{0:"x-title-rotate-none",1:"x-title-rotate-right",2:"x-title-rotate-left"},_rotationAngles:{1:90,2:270},baseCls:"x-title",_titleSuffix:"-title",_glyphCls:"x-title-glyph",_iconWrapCls:"x-title-icon-wrap",_baseIconCls:"x-title-icon",_itemCls:"x-title-item",_textCls:"x-title-text",afterComponentLayout:function(){var o=this,q=o.getRotation(),s,n,p;if(q&&!Ext.isIE8){p=o.el;s=o.lastBox;n=s.x;p.setStyle(o._getVerticalAdjustDirection(),(n+((q===1)?s.width:-s.height))+"px")}Ext.Component.prototype.afterComponentLayout.call(this)},onRender:function(){var l=this,n=l.getRotation(),m=l.el;Ext.Component.prototype.onRender.call(this);if(n){m.setVertical(l._rotationAngles[n])}if(Ext.supports.FixedTableWidthBug){m._needsTableWidthFix=true}},applyText:function(f){if(!f){f="&#160;"}return f},beforeRender:function(){var f=this;Ext.Component.prototype.beforeRender.call(this);f.addCls(f._rotationClasses[f.getRotation()]);f.addCls(f._textAlignClasses[f.getTextAlign()])},getIconMarkup:function(){return this.lookupTpl("iconTpl").apply(this.getIconRenderData())},getIconRenderData:function(){var o=this,q=o.getIcon(),s=o.getIconCls(),p=o.getGlyph(),u,t=o.getIconAlign();if(p){u=p.fontFamily;p=p.character}return{id:o.id,ui:o.ui,itemCls:o._itemCls,iconUrl:q,iconCls:s,iconWrapCls:o._iconWrapCls,baseIconCls:o._baseIconCls,iconAlignCls:o._iconAlignClasses[t],glyph:p,glyphCls:p?o._glyphCls:"",glyphFontFamily:u}},initRenderData:function(){var m=this,n,l;l=Ext.apply({text:m.getText(),textElRole:m.textElRole,id:m.id,ui:m.ui,itemCls:m._itemCls,textCls:m._textCls,iconMarkup:null,iconBeforeTitle:null},Ext.Component.prototype.initRenderData.call(this));if(m._hasIcon()){n=m.getIconAlign();l.iconMarkup=m.getIconMarkup();l.iconBeforeTitle=(n==="top"||n==="left")}return l},onAdded:function(s,u,t){var p=this,o=p._titleSuffix,q=s.baseCls;p.addCls([q+o,q+o+"-"+s.ui]);Ext.Component.prototype.onAdded.call(this,s,u,t)},applyGlyph:function(g,l){if(g){if(!g.isGlyph){g=new Ext.Glyph(g)}if(g.isEqual(l)){g=undefined}}return g},updateGlyph:function(o,q){var p=this,n=p._glyphCls,s;if(p.rendered){p._syncIconVisibility();s=p.iconEl;if(o){s.dom.innerHTML=o.character;s.addCls(n);s.setStyle("font-family",o.fontFamily)}else{if(q!==o){s.dom.innerHTML="";s.removeCls(n)}}if(p._didIconStateChange(q,o)){p.updateLayout()}}},updateIcon:function(o,m){o=o||"";var n=this,p;if(n.rendered&&o!==m){n._syncIconVisibility();p=n.iconEl;p.setStyle("background-image",o?"url("+o+")":"");if(n._didIconStateChange(m,o)){n.updateLayout()}}},updateIconAlign:function(u,q){var s=this,o=s.iconWrapEl,t,p;if(s.iconWrapEl){t=s.el;p=s._iconAlignClasses;if(q){o.removeCls(p[q])}o.addCls(p[u]);if(u==="top"||u==="left"){t.insertFirst(o)}else{t.appendChild(o)}s.updateLayout()}},updateIconCls:function(o,n){o=o||"";var m=this,p;if(m.rendered&&n!==o){m._syncIconVisibility();p=m.iconEl;if(n){p.removeCls(n)}p.addCls(o);if(m._didIconStateChange(n,o)){m.updateLayout()}}},updateRotation:function(q,s){var o=this,p,n;if(o.rendered){p=o.el;n=o._rotationClasses;o.removeCls(n[s]);o.addCls(n[q]);p.setHorizontal();if(q){p.setVertical(o._rotationAngles[q])}p.setStyle({right:"",left:"",top:"",height:"",width:""});o.lastBox=null;o.updateLayout()}},updateText:function(f){if(this.rendered){this.textEl.setHtml(f);this.updateLayout()}},updateTextAlign:function(m,o){var p=this,n=p._textAlignClasses;if(p.rendered){if(o){p.removeCls(n[o])}p.addCls(n[m]);p.updateLayout()}},privates:{_getVerticalAdjustDirection:function(){return"left"},_didIconStateChange:function(n,l){var m=Ext.isEmpty(l);return Ext.isEmpty(n)?!m:m},_hasIcon:function(){return !!(this.getIcon()||this.getIconCls()||this.getGlyph())},_syncIconVisibility:function(){var o=this,p=o.el,t=o._hasIcon(),u=o.iconWrapEl,q,s;if(t&&!u){s=o.iconAlign;q=(s==="left"||s==="top");p.dom.insertAdjacentHTML(q?"afterbegin":"beforeend",o.getIconMarkup());u=o.iconWrapEl=p[q?"first":"last"]();o.iconEl=u.first()}if(u){u.setDisplayed(t)}}}},0,["title"],["component","box","title"],{component:true,box:true,title:true},["widget.title"],0,[Ext.panel,"Title"],0));(Ext.cmd.derive("Ext.panel.Tool",Ext.Component,{config:{glyph:null},isTool:true,baseCls:"x-tool",disabledCls:"x-tool-disabled",toolPressedCls:"x-tool-pressed",toolOverCls:"x-tool-over",childEls:["toolEl"],renderTpl:['<div id="{id}-toolEl" data-ref="toolEl" class="{className} {childElCls}" role="presentation"<tpl if="glyph"><tpl if="glyphFontFamily"> style="font-family:{glyphFontFamily};"></tpl>{glyph}<tpl else>></tpl></div>'],toolOwner:null,tooltipType:"qtip",stopEvent:true,ariaRole:"button",focusable:true,tabIndex:0,keyMap:{scope:"this",SPACE:"onClick",ENTER:"onClick"},cacheHeight:true,cacheWidth:true,initComponent:function(){var f=this;f.tooltip=f.tooltip||f.qtip;Ext.Component.prototype.initComponent.call(this)},initRenderData:function(){var o=this,n=Ext.Component.prototype.initRenderData.call(this),p=o.getGlyph(),m;if(p){m=p.fontFamily;p=p.character}Ext.applyIf(n,{className:o.calculateClassName(),glyph:p,glyphFontFamily:m});return n},calculateClassName:function(){var g=this,l=g.baseCls+"-tool-el ";if(g.type){l+=g.baseCls+"-img "+g.baseCls+"-"+g.type}else{if(g.iconCls){l+=g.iconCls}}return l},afterRender:function(){var l=this,g;Ext.Component.prototype.afterRender.call(this);if(l.setTypeAfterRender){l.setTypeAfterRender=false;l.setType(l.type)}l.el.on({click:l.onClick,mousedown:l.onMouseDown,mouseover:l.onMouseOver,mouseout:l.onMouseOut,scope:l});g=l.tooltip;if(g){l.setTooltip(g)}},tipAttrs:{qtip:"data-qtip"},setTooltip:function(x,s){var q=this,u=q.tooltip,y=q.tooltipType,w=q.id,t=q.el,v;if(u&&Ext.quickTipsActive&&Ext.isObject(u)){Ext.tip.QuickTipManager.unregister(w)}q.tooltip=x;if(s){q.tooltipType=s}if(x){if(Ext.quickTipsActive&&Ext.isObject(x)){Ext.tip.QuickTipManager.register(Ext.apply({target:w},x))}else{if(t){if(s&&y&&s!==y){v=q.tipAttrs[y]||"title";t.dom.removeAttribute(v)}v=q.tipAttrs[s||y]||"title";t.dom.setAttribute(v,x)}}if(v!=="title"&&q.ariaRole&&q.ariaRole!=="presentation"){if(t){t.dom.setAttribute("aria-label",x)}else{q.ariaRenderAttributes=q.ariaRenderAttributes||{};q.ariaRenderAttributes["aria-label"]=x}}}},setType:function(w){var v=this,q=v.toolEl,p=v.updating,t=v.rendering,s,u;if(!p){s=v.calculateClassName();if(!t){v.updating=u=true}v.setIconCls(null);v.setGlyph(null)}v.type=w;if(u){v.updateToolCls(s);v.updating=false}else{if(t){v.setTypeAfterRender=true}}return v},setIconCls:function(p){var u=this,q=u.toolEl,o=u.updating,s,t;if(!o){s=u.calculateClassName();u.updating=t=true;u.setType(null);u.setGlyph(null)}u.iconCls=p;if(t){u.updateToolCls(s);u.updating=false}return u},doDestroy:function(){var f=this;f.setTooltip(null);delete f.toolOwner;Ext.Component.prototype.doDestroy.call(this)},applyGlyph:function(g,l){if(g){if(!g.isGlyph){g=new Ext.Glyph(g)}if(g.isEqual(l)){g=undefined}}return g},updateGlyph:function(v,t){var w=this,q=w.toolEl,p=w.updating,s,u;if(!p){s=w.calculateClassName();w.updating=u=true;w.setType(null);w.setIconCls(null)}if(q){if(v){q.dom.innerHTML=v.character;q.setStyle(v.getStyle())}else{q.dom.innerHTML=""}}if(u){w.updateToolCls(s);w.updating=false}},privates:{onClick:function(e,m){var n=this;if(n.disabled){return false}if(e.type!=="keydown"){n.el.removeCls(n.toolPressedCls+" "+n.toolOverCls)}if(n.stopEvent!==false){e.stopEvent()}if(n.handler){Ext.callback(n.handler,n.scope,[e,m,n.ownerCt,n],0,n)}else{if(n.callback){Ext.callback(n.callback,n.scope,[n.toolOwner||n.ownerCt,n,e],0,n)}}if(n.destroyed){return}n.fireEvent("click",n,e,n.toolOwner||n.ownerCt);return true},onMouseDown:function(e){e.preventDefault();if(this.disabled){return false}this.el.addCls(this.toolPressedCls)},onMouseOver:function(){if(this.disabled){return false}this.el.addCls(this.toolOverCls)},onMouseOut:function(){this.el.removeCls(this.toolOverCls)},updateToolCls:function(m){var l=this,n=this.toolEl;if(n){n.removeCls(m);n.addCls(this.calculateClassName())}}}},0,["tool"],["component","box","tool"],{component:true,box:true,tool:true},["widget.tool"],0,[Ext.panel,"Tool"],0));(Ext.cmd.derive("Ext.util.KeyMap",Ext.Base,{alternateClassName:"Ext.KeyMap",eventName:"keydown",constructor:function(l){var g=this;if((arguments.length!==1)||(typeof l==="string")||l.dom||l.tagName||l===document||l.isComponent){g.legacyConstructor.apply(g,arguments);return}Ext.apply(g,l);g.bindings=[];if(!g.target.isComponent){g.target=Ext.get(g.target)}if(g.binding){g.addBinding(g.binding)}else{if(l.key){g.addBinding(l)}}g.enable()},legacyConstructor:function(o,m,p){var n=this;Ext.apply(n,{target:Ext.get(o),eventName:p||n.eventName,bindings:[]});if(m){n.addBinding(m)}n.enable()},addBinding:function(n){var p=this,o=n.key,q,s;if(p.processing){p.bindings=p.bindings.slice(0)}if(Ext.isArray(n)){for(q=0,s=n.length;q<s;q++){p.addBinding(n[q])}return}p.bindings.push(Ext.apply({keyCode:p.processKeys(o)},n))},removeBinding:function(w){var p=this,v=p.bindings,u=v.length,t,q,s;if(p.processing){p.bindings=v.slice(0)}s=p.processKeys(w.key);for(t=0;t<u;++t){q=v[t];if((q.fn||q.handler)===(w.fn||w.handler)&&q.scope===w.scope){if(w.alt===q.alt&&w.ctrl===q.ctrl&&w.shift===q.shift){if(Ext.Array.equals(q.keyCode,s)){Ext.Array.erase(p.bindings,t,1);return}}}}},processKeys:function(w){var v=false,q,p,t,u,s;if(w.test){return w}if(Ext.isString(w)){p=[];t=w.toUpperCase();for(s=0,u=t.length;s<u;++s){p.push(t.charCodeAt(s))}w=p;v=true}if(!Ext.isArray(w)){w=[w]}if(!v){for(s=0,u=w.length;s<u;++s){q=w[s];if(Ext.isString(q)){w[s]=q.toUpperCase().charCodeAt(0)}}}return w},handleTargetEvent:function(o){var p=this,u,q,s,t;if(p.enabled){u=p.bindings;q=0;s=u.length;o=p.processEvent.apply(p.processEventScope||p,arguments);if(o){p.lastKeyEvent=o;if(p.ignoreInputFields&&Ext.fly(o.target).isInputField()){return}if(!o.getKey){return o}p.processing=true;for(;q<s;++q){t=p.processBinding(u[q],o);if(t===false){p.processing=false;return t}}p.processing=false}}},processEvent:Ext.identityFn,processBinding:function(x,B){if(this.checkModifiers(x,B)){var w=B.getKey(),u=x.fn||x.handler,t=x.scope||this,v=x.keyCode,A=x.defaultEventAction,z,y,C;if(v.test){if(v.test(String.fromCharCode(B.getCharCode()))){C=u.call(t,w,B);if(C!==true&&A){B[A]()}if(C===false){return C}}}else{if(v.length){for(z=0,y=v.length;z<y;++z){if(w===v[z]){C=u.call(t,w,B);if(C!==true&&A){B[A]()}if(C===false){return C}break}}}}}},checkModifiers:function(v,p){var q=["shift","ctrl","alt"],s=0,u=q.length,w,t;for(;s<u;++s){t=q[s];w=v[t];if(!(w===undefined||(w===p[t+"Key"]))){return false}}return true},on:function(t,q,s){var v,u,p,w;if(Ext.isObject(t)&&!Ext.isArray(t)){v=t.key;u=t.shift;p=t.ctrl;w=t.alt}else{v=t}this.addBinding({key:v,shift:u,ctrl:p,alt:w,fn:q,scope:s})},un:function(t,q,s){var v,u,p,w;if(Ext.isObject(t)&&!Ext.isArray(t)){v=t.key;u=t.shift;p=t.ctrl;w=t.alt}else{v=t}this.removeBinding({key:v,shift:u,ctrl:p,alt:w,fn:q,scope:s})},isEnabled:function(){return this.enabled},enable:function(){var f=this;if(!f.enabled){f.target.on(f.eventName,f.handleTargetEvent,f,{capture:f.capture,priority:f.priority});f.enabled=true}},disable:function(){var f=this;if(f.enabled){f.target.removeListener(f.eventName,f.handleTargetEvent,f);f.enabled=false}},setDisabled:function(f){if(f){this.disable()}else{this.enable()}},destroy:function(l){var n=this,m=n.target;n.bindings=[];n.disable();if(l){m.destroy()}delete n.target;n.callParent()}},1,0,0,0,0,0,[Ext.util,"KeyMap",Ext,"KeyMap"],0));(Ext.cmd.derive("Ext.util.KeyNav",Ext.Base,{alternateClassName:"Ext.KeyNav",disabled:false,defaultEventAction:false,forceKeyDown:false,eventName:"keypress",statics:{keyOptions:{left:37,right:39,up:38,down:40,space:32,pageUp:33,pageDown:34,del:46,backspace:8,home:36,end:35,enter:13,esc:27,tab:9}},constructor:function(l){var g=this;if(arguments.length===2){g.legacyConstructor.apply(g,arguments);return}g.doConstruction(l)},legacyConstructor:function(g,l){this.doConstruction(Ext.apply({target:g},l))},doConstruction:function(p){var n=this,o={target:p.target,ignoreInputFields:p.ignoreInputFields,eventName:n.getKeyEvent("forceKeyDown" in p?p.forceKeyDown:n.forceKeyDown,p.eventName),capture:p.capture},m;if(n.map){n.map.destroy()}n.initConfig(p);if(p.processEvent){o.processEvent=p.processEvent;o.processEventScope=p.processEventScope||n}if(p.priority){o.priority=p.priority}if(p.keyMap){m=n.map=p.keyMap}else{m=n.map=new Ext.util.KeyMap(o);n.destroyKeyMap=true}this.addBindings(p);m.disable();if(!p.disabled){m.enable()}},addBindings:function(w){var t=this,u,y,q=t.map,v=Ext.util.KeyNav.keyOptions,s,x=w.scope||t;for(u in w){y=w[u];s=v[u];if(s!=null){u=s}if(y&&(u.length===1||!isNaN(u=parseInt(u,10)))){if(typeof y==="function"){y={handler:y,defaultEventAction:(w.defaultEventAction!==undefined)?w.defaultEventAction:t.defaultEventAction}}q.addBinding({key:u,ctrl:y.ctrl,shift:y.shift,alt:y.alt,handler:Ext.Function.bind(t.handleEvent,y.scope||x,[y.handler||y.fn,t],true),defaultEventAction:(y.defaultEventAction!==undefined)?y.defaultEventAction:t.defaultEventAction})}}},handleEvent:function(m,n,o,p){p.lastKeyEvent=n;return o.call(this,n)},destroy:function(g){var l=this;if(l.destroyKeyMap){l.map.destroy(g)}delete l.map;l.callParent()},enable:function(){if(this.map){this.map.enable();this.disabled=false}},disable:function(){if(this.map){this.map.disable()}this.disabled=true},setDisabled:function(f){this.map.setDisabled(f);this.disabled=f},getKeyEvent:function(g,l){if(g||(Ext.supports.SpecialKeyDownRepeat&&!l)){return"keydown"}else{return l||this.eventName}}},1,0,0,0,0,0,[Ext.util,"KeyNav",Ext,"KeyNav"],0));(Ext.cmd.derive("Ext.util.FocusableContainer",Ext.Mixin,{mixinConfig:{id:"focusablecontainer",before:{onAdd:"onFocusableChildAdd",onRemove:"onFocusableChildRemove",doDestroy:"destroyFocusableContainer",onFocusEnter:"onFocusEnter"},after:{afterRender:"initFocusableContainer",onFocusLeave:"onFocusLeave",afterShow:"activateFocusableContainer"}},isFocusableContainer:true,enableFocusableContainer:true,activeChildTabIndex:0,inactiveChildTabIndex:-1,focusableContainerEl:"el",tabGuard:true,privates:{initFocusableContainer:function(n){var o,m,p;if(this.enableFocusableContainer){n=n!=null?n:true;this.doInitFocusableContainer(n)}else{o=this.getFocusables();for(m=0,p=o.length;m<p;m++){o[m].focusableContainer=null}}},doInitFocusableContainer:function(p){var n=this,o=n.focusableContainerEl,m;if(p){n.clearFocusables()}m=n.findNextFocusableChild({step:1,beforeRender:true});if(m){n.activateFocusableContainer(true)}else{if(n.isFocusableContainerActive()){n.activateFocusableContainer(false)}}if(!o.isElement){o=n.focusableContainerEl=n[o]}n.focusableKeyNav=n.createFocusableContainerKeyNav(o)},createFocusableContainerKeyNav:function(l){var g=this;return new Ext.util.KeyNav(l,{eventName:"keydown",ignoreInputFields:true,scope:g,tab:g.onFocusableContainerTabKey,enter:g.onFocusableContainerEnterKey,space:g.onFocusableContainerSpaceKey,up:g.onFocusableContainerUpKey,down:g.onFocusableContainerDownKey,left:g.onFocusableContainerLeftKey,right:g.onFocusableContainerRightKey})},destroyFocusableContainer:function(){if(this.enableFocusableContainer){this.doDestroyFocusableContainer()}},doDestroyFocusableContainer:function(){this.focusableKeyNav=Ext.destroy(this.focusableKeyNav)},getFocusables:function(){return this.items.items},initDefaultFocusable:function(){var w=this,t=w.activeChildTabIndex,u=false,s,x,q,v,y;s=w.getFocusables();v=s.length;if(!v){return}for(q=0;q<v;q++){x=s[q];if(!x.disabled&&x.isFocusable&&x.isFocusable()){u=true;break}}if(!u){return}x=w.findNextFocusableChild({items:s,step:true});if(x){w.activateFocusable(x)}return x},clearFocusables:function(){var n=this,q=n.getFocusables(),s=q.length,o,p;for(p=0;p<s;p++){o=q[p];if(o.focusable&&!o.disabled){n.deactivateFocusable(o)}}},activateFocusable:function(l,m){var n=m!=null?m:this.activeChildTabIndex;l.setTabIndex(n)},deactivateFocusable:function(l,m){var n=m!=null?m:this.inactiveChildTabIndex;l.setTabIndex(n)},activateFocusableContainer:function(o){var n=this,p=n.tabGuardBeforeEl,m=n.tabGuardAfterEl;if(!n.rendered||n.destroying||n.destroyed||!p||!m){return}o=o!=null?o:true;if(o){p.dom.setAttribute("tabIndex",n.activeChildTabIndex);m.dom.setAttribute("tabIndex",n.activeChildTabIndex)}else{p.dom.removeAttribute("tabIndex");m.dom.removeAttribute("tabIndex")}},onFocusableContainerTabKey:function(){return true},onFocusableContainerEnterKey:function(){return true},onFocusableContainerSpaceKey:function(){return true},onFocusableContainerUpKey:function(e){e.preventDefault();return this.moveChildFocus(e,false)},onFocusableContainerDownKey:function(e){e.preventDefault();return this.moveChildFocus(e,true)},onFocusableContainerLeftKey:function(e){e.preventDefault();return this.moveChildFocus(e,false)},onFocusableContainerRightKey:function(e){e.preventDefault();return this.moveChildFocus(e,true)},getFocusableFromEvent:function(l){var e=Ext.Component.fromElement(l.getTarget());return e},moveChildFocus:function(m,n){var e=this.getFocusableFromEvent(m);return this.focusChild(e,n,m)},focusChild:function(l,n){var m=this.findNextFocusableChild({child:l,step:n});if(m){m.focus()}return m},findNextFocusableChild:function(C){var t=C.beforeRender,w,u,B,A,v,y,x,z;w=C.items||this.getFocusables();A=C.step!=null?C.step:1;B=C.child;z=!!this.allowFocusingDisabledChildren;v=Ext.Array.indexOf(w,B);A=A===true?1:A===false?-1:A;x=w.length;y=A>0?(v<x?v+A:0):(v>0?v+A:x-1);for(;;y+=A){if(v<0&&(y>=x||y<0)){return null}else{if(y>=x){y=-1;continue}else{if(y<0){y=x;continue}else{if(y===v){return null}}}}u=w[y];if(!u||!u.focusable||(u.disabled&&!z)){continue}if(t||(u.isFocusable&&u.isFocusable())){return u}}return null},isFocusableContainerActive:function(){var o=this,p=false,s=o.tabGuardBeforeEl,q=o.focusableContainerEl,u,t;if(s&&s.isTabbable&&s.isTabbable()){p=true}else{if(q.isTabbable&&q.isTabbable()){p=true}else{u=o.lastFocusedChild;t=u&&u.getFocusEl&&u.getFocusEl();if(t&&t.isTabbable&&t.isTabbable()){p=true}}}return p},onFocusEnter:function(n){var p=this,o=n.toComponent,e;if(!p.enableFocusableContainer||p.destroying||p.destroyed){return null}if(o===p){e=p.initDefaultFocusable();if(e){e.focus();p.activateFocusableContainer(false)}}else{p.activateFocusableContainer(false)}return o},onFocusLeave:function(e){var m=this,n=m.lastFocusedChild;if(!m.enableFocusableContainer||m.destroying||m.destroyed){return}m.clearFocusables();if(n&&!n.disabled){m.activateFocusable(n)}else{m.activateFocusableContainer(true)}},beforeFocusableChildBlur:Ext.privateFn,afterFocusableChildBlur:Ext.privateFn,beforeFocusableChildFocus:function(g){var l=this;if(!l.enableFocusableContainer||l.destroying||l.destroyed){return}l.clearFocusables();l.activateFocusable(g);if(g.needArrowKeys){l.guardFocusableChild(g)}},guardFocusableChild:function(m){var n=this,p=n.activeChildTabIndex,o;o=n.findNextFocusableChild({child:m,step:-1});if(o){o.setTabIndex(p)}o=n.findNextFocusableChild({child:m,step:1});if(o){o.setTabIndex(p)}},afterFocusableChildFocus:function(g){var l=this;if(!l.enableFocusableContainer||l.destroying||l.destroyed){return}l.lastFocusedChild=g},onFocusableChildAdd:function(f){if(this.enableFocusableContainer){return this.doFocusableChildAdd(f)}},doFocusableChildAdd:function(g){var l=this;if(g.focusable){g.focusableContainer=l;if(!l.$initingItems&&!l.isFocusableContainerActive()){l.activateFocusableContainer(true)}}},onFocusableChildRemove:function(f){if(this.enableFocusableContainer){return this.doFocusableChildRemove(f)}f.focusableContainer=null},doFocusableChildRemove:function(g){var l=this;if(g===l.lastFocusedChild){l.lastFocusedChild=null;l.activateFocusableContainer(true)}g=l.findNextFocusableChild({step:1,beforeRender:true});if(!g){l.activateFocusableContainer(false)}},beforeFocusableChildEnable:Ext.privateFn,onFocusableChildEnable:function(g){var l=this;if(!l.enableFocusableContainer||l.destroying||l.destroyed){return}if(g!==l.lastFocusedChild){l.deactivateFocusable(g);if(!l.isFocusableContainerActive()){l.activateFocusableContainer(true)}}},beforeFocusableChildDisable:function(l){var m=this,n;if(!m.enableFocusableContainer||m.destroying||m.destroyed){return}if(l.hasFocus){n=m.findNextFocusableChild({child:l})||l.findFocusTarget();if(n){n.focus()}}},onFocusableChildDisable:function(m){var n=this,p=n.lastFocusedChild,o;if(!n.enableFocusableContainer||n.destroying||n.destroyed){return}if(m===p){n.activateFocusableContainer(true)}o=n.findNextFocusableChild({step:1});if(!o){n.activateFocusableContainer(false)}},beforeFocusableChildHide:function(f){return this.beforeFocusableChildDisable(f)},onFocusableChildHide:function(f){return this.onFocusableChildDisable(f)},beforeFocusableChildShow:function(f){return this.beforeFocusableChildEnable(f)},onFocusableChildShow:function(f){return this.onFocusableChildEnable(f)},onFocusableChildMasked:Ext.privateFn,onFocusableChildDestroy:Ext.privateFn,onFocusableChildUpdate:Ext.privateFn}},0,0,0,0,0,0,[Ext.util,"FocusableContainer"],0));(Ext.cmd.derive("Ext.layout.component.Component",Ext.layout.Layout,{type:"component",isComponentLayout:true,nullBox:{},usesContentHeight:true,usesContentWidth:true,usesHeight:true,usesWidth:true,widthCache:{},heightCache:{},beginLayoutCycle:function(E,I){var N=this,F=N.owner,B=E.ownerCtContext,A=E.heightModel,v=E.widthModel,O=F.el.dom===document.body,C=F.lastBox||N.nullBox,L=F.el.lastBox||N.nullBox,H=!O,D=E.isTopLevel,M,K,G,J;Ext.layout.Layout.prototype.beginLayoutCycle.call(this,E,I);if(I){if(N.usesContentWidth){++E.consumersContentWidth}if(N.usesContentHeight){++E.consumersContentHeight}if(N.usesWidth){++E.consumersWidth}if(N.usesHeight){++E.consumersHeight}if(B&&!B.hasRawContent){M=F.ownerLayout;if(M){if(M.usesWidth){++E.consumersWidth}if(M.usesHeight){++E.consumersHeight}}}}if(v.configured){G=F[v.names.width];if(D&&v.calculatedFrom){G=C.width}if(!O){H=N.setWidthInDom||(I?G!==L.width:v.constrained)}E.setWidth(G,H)}else{if(D){if(v.calculated){K=C.width;E.setWidth(K,K!==L.width)}K=C.x;E.setProp("x",K,K!==L.x)}}if(A.configured){J=F[A.names.height];if(D&&A.calculatedFrom){J=C.height}if(!O){H=I?J!==L.height:A.constrained}E.setHeight(J,H)}else{if(D){if(A.calculated){K=C.height;E.setHeight(K,K!==L.height)}K=C.y;E.setProp("y",K,K!==L.y)}}},finishedLayout:function(z){var u=this,s=z.children,A=u.owner,w,y,t,x,v;if(s){w=s.length;for(y=0;y<w;y++){t=s[y];t.el.lastBox=t.props}}z.previousSize=u.lastComponentSize;u.lastComponentSize=A.el.lastBox=v=z.props;x=A.lastBox||(A.lastBox={});x.x=v.x;x.y=v.y;x.width=v.width;x.height=v.height;x.invalid=false;Ext.layout.Layout.prototype.finishedLayout.call(this,z)},notifyOwner:function(n){var o=this,p=o.lastComponentSize,m=n.previousSize;o.owner.afterComponentLayout(p.width,p.height,m?m.width:undefined,m?m.height:undefined)},getTarget:function(){return this.owner.el},getRenderTarget:function(){return this.owner.el},cacheTargetInfo:function(o){var p=this,m=p.targetInfo,n;if(!m){n=o.getEl("getTarget",p);p.targetInfo=m={padding:n.getPaddingInfo(),border:n.getBorderInfo()}}return m},measureAutoDimensions:function(M,V){var R=this,ac=R.owner,G=ac.layout,Z=M.heightModel,W=M.widthModel,aa=M.boxParent,J=M.isBoxParent,Q=M.target,ab=M.props,T,O={gotWidth:false,gotHeight:false,isContainer:(T=!M.hasRawContent)},S=V||3,H,Y,P=0,X=0,N,I,U,L,K;if(W.shrinkWrap&&M.consumersContentWidth){++P;H=!(S&1);if(T){if(H){O.contentWidth=0;O.gotWidth=true;++X}else{if((O.contentWidth=M.getProp("contentWidth"))!==undefined){O.gotWidth=true;++X}}}else{I=ab.contentWidth;if(typeof I==="number"){O.contentWidth=I;O.gotWidth=true;++X}else{if(H){N=true}else{if(!M.hasDomProp("containerChildrenSizeDone")){N=false}else{if(J||!aa||aa.widthModel.shrinkWrap){N=true}else{N=aa.hasDomProp("width")}}}if(N){if(H){U=0}else{if(G&&G.measureContentWidth){U=G.measureContentWidth(M)}else{if(Q.cacheWidth){L=Q.xtype+"-"+Q.ui;K=R.widthCache;U=K[L]||(K[L]=R.measureContentWidth(M))}else{U=R.measureContentWidth(M)}}}if(!isNaN(O.contentWidth=U)){M.setContentWidth(U,true);O.gotWidth=true;++X}}}}}else{if(W.natural&&M.consumersWidth){++P;I=ab.width;if(typeof I==="number"){O.width=I;O.gotWidth=true;++X}else{if(J||!aa){N=true}else{N=aa.hasDomProp("width")}if(N){if(!isNaN(O.width=R.measureOwnerWidth(M))){M.setWidth(O.width,false);O.gotWidth=true;++X}}}}}if(Z.shrinkWrap&&M.consumersContentHeight){++P;Y=!(S&2);if(T){if(Y){O.contentHeight=0;O.gotHeight=true;++X}else{if((O.contentHeight=M.getProp("contentHeight"))!==undefined){O.gotHeight=true;++X}}}else{I=ab.contentHeight;if(typeof I==="number"){O.contentHeight=I;O.gotHeight=true;++X}else{if(Y){N=true}else{if(!M.hasDomProp("containerChildrenSizeDone")){N=false}else{if(ac.noWrap){N=true}else{if(!W.shrinkWrap){N=(M.bodyContext||M).hasDomProp("width")}else{if(J||!aa||aa.widthModel.shrinkWrap){N=true}else{N=aa.hasDomProp("width")}}}}}if(N){if(Y){U=0}else{if(G&&G.measureContentHeight){U=G.measureContentHeight(M)}else{if(Q.cacheHeight){L=Q.xtype+"-"+Q.ui;K=R.heightCache;U=K[L]||(K[L]=R.measureContentHeight(M))}else{U=R.measureContentHeight(M)}}}if(!isNaN(O.contentHeight=U)){M.setContentHeight(U,true);O.gotHeight=true;++X}}}}}else{if(Z.natural&&M.consumersHeight){++P;I=ab.height;if(typeof I==="number"){O.height=I;O.gotHeight=true;++X}else{if(J||!aa){N=true}else{N=aa.hasDomProp("width")}if(N){if(!isNaN(O.height=R.measureOwnerHeight(M))){M.setHeight(O.height,false);O.gotHeight=true;++X}}}}}if(aa){M.onBoxMeasured()}O.gotAll=X===P;return O},measureContentWidth:function(f){return f.el.getWidth()-f.getFrameInfo().width},measureContentHeight:function(f){return f.el.getHeight()-f.getFrameInfo().height},measureOwnerHeight:function(f){return f.el.getHeight()},measureOwnerWidth:function(f){return f.el.getWidth()}},0,0,0,0,0,0,[Ext.layout.component,"Component"],0));(Ext.cmd.derive("Ext.layout.component.Auto",Ext.layout.component.Component,{type:"autocomponent",setHeightInDom:false,setWidthInDom:false,waitForOuterHeightInDom:false,waitForOuterWidthInDom:false,beginLayoutCycle:function(p,t){var q=this,u=q.lastWidthModel,o=q.lastHeightModel,s=q.owner.el;Ext.layout.component.Component.prototype.beginLayoutCycle.apply(this,arguments);if(u&&u.fixed&&p.widthModel.shrinkWrap){s.setWidth(null)}if(o&&o.fixed&&p.heightModel.shrinkWrap){s.setHeight(null)}},calculate:function(v){var w=this,p=w.measureAutoDimensions(v),t=v.heightModel,s=v.widthModel,q,u;if(p.gotWidth){if(s.shrinkWrap){w.publishOwnerWidth(v,p.contentWidth)}else{if(w.publishInnerWidth){w.publishInnerWidth(v,p.width)}}}else{if(!s.auto&&w.publishInnerWidth){q=w.waitForOuterWidthInDom?v.getDomProp("width"):v.getProp("width");if(q===undefined){w.done=false}else{w.publishInnerWidth(v,q)}}}if(p.gotHeight){if(t.shrinkWrap){w.publishOwnerHeight(v,p.contentHeight)}else{if(w.publishInnerHeight){w.publishInnerHeight(v,p.height)}}}else{if(!t.auto&&w.publishInnerHeight){u=w.waitForOuterHeightInDom?v.getDomProp("height"):v.getProp("height");if(u===undefined){w.done=false}else{w.publishInnerHeight(v,u)}}}if(!p.gotAll){w.done=false}},calculateOwnerHeightFromContentHeight:function(g,l){return l+g.getFrameInfo().height},calculateOwnerWidthFromContentWidth:function(g,l){return l+g.getFrameInfo().width},publishOwnerHeight:function(w,y){var q=this,u=q.owner,v=q.calculateOwnerHeightFromContentHeight(w,y),x,s,t;if(isNaN(v)){q.done=false}else{x=Ext.Number.constrain(v,u.minHeight,u.maxHeight);if(x===v){s=q.setHeightInDom}else{t=q.sizeModels[(x<v)?"constrainedMax":"constrainedMin"];v=x;if(w.heightModel.calculatedFromShrinkWrap){w.heightModel=t}else{w.invalidate({heightModel:t})}}w.setHeight(v,s)}},publishOwnerWidth:function(x,u){var y=this,w=y.owner,q=y.calculateOwnerWidthFromContentWidth(x,u),v,s,t;if(isNaN(q)){y.done=false}else{v=Ext.Number.constrain(q,w.minWidth,w.maxWidth);if(v===q){s=y.setWidthInDom}else{t=y.sizeModels[(v<q)?"constrainedMax":"constrainedMin"];q=v;if(x.widthModel.calculatedFromShrinkWrap){x.widthModel=t}else{x.invalidate({widthModel:t})}}x.setWidth(q,s)}}},0,0,0,0,["layout.autocomponent"],0,[Ext.layout.component,"Auto"],0));(Ext.cmd.derive("Ext.panel.Header",Ext.panel.Bar,{isHeader:true,defaultType:"tool",indicateDrag:false,weight:-1,shrinkWrap:3,iconAlign:"left",titleAlign:"left",titlePosition:0,titleRotation:"default",autoEl:{role:"presentation"},beforeRenderConfig:{glyph:null,icon:null,iconCls:null,iconAlign:null,title:{$value:{xtype:"title",flex:1},merge:function(g,l){if(typeof g!=="object"){g={text:g}}return Ext.merge(l?Ext.Object.chain(l):{},g)}},titleAlign:null,titlePosition:null,titleRotation:null},headerCls:"x-header",initComponent:function(){var m=this,n=m.items,o=m.itemPosition,p=[m.headerCls];m.tools=m.tools||[];m.items=n=(n?n.slice():[]);if(o!==undefined){m._userItems=n.slice();m.items=n=[]}m.indicateDragCls=m.headerCls+"-draggable";if(m.indicateDrag){p.push(m.indicateDragCls)}m.addCls(p);m.syncNoBorderCls();Ext.Array.push(n,m.tools);m.tools.length=0;Ext.panel.Bar.prototype.initComponent.call(this);m.on({dblclick:m.onDblClick,click:m.onClick,element:"el",scope:m})},addTool:function(l){var g=this;g.add(Ext.ComponentManager.create(l,"tool"));g.checkFocusableTools()},afterLayout:function(){var q=this,n,s,p,o;if(q.vertical){s=q.frameTR;if(s){n=q.frameBR;p=q.frameTL;o=(q.getWidth()-s.getPadding("r")-((p)?p.getPadding("l"):q.el.getBorderWidth("l")))+"px";n.setStyle("background-position-x",o);s.setStyle("background-position-x",o)}}Ext.panel.Bar.prototype.afterLayout.call(this)},applyTitle:function(n,p){var o=this,s,q;n=n||"";s=Ext.isString(n);if(!Ext.isObject(n)){n={text:n.toString()}}if(p){Ext.suspendLayouts();p.setConfig(n);Ext.resumeLayouts(true);n=p}else{if(s){n.xtype="title"}n.ui=o.ui;q=("rotation" in n);n.id=o.id+"-title";if(o.isAccordionHeader){n.ariaRole="tab";n.textElRole=null;n.focusable=true}n=Ext.create(n);if(!q&&o.vertical&&o.titleRotation==="default"){n.rotation=1}}return n},applyTitlePosition:function(g){var l=this.items.getCount();if(this._titleInItems){--l}return Math.max(Math.min(g,l),0)},beforeLayout:function(){Ext.panel.Bar.prototype.beforeLayout.call(this);this.syncBeforeAfterTitleClasses()},beforeRender:function(){var g=this,l=g.itemPosition;g.protoEl.unselectable();Ext.panel.Bar.prototype.beforeRender.call(this);if(l!==undefined){g.insert(l,g._userItems)}g.checkFocusableTools()},checkFocusableTools:function(){var p=this,o=p.tools,n,q,s;if(p.isAccordionHeader){p.enableFocusableContainer=false;return}for(q=0,s=o.length;q<s;q++){if(o[q].focusable){n=true;break}}if(n){if(!p.initialConfig.hasOwnProperty("enableFocusableContainer")||p.enableFocusableContainer){p.ariaRole="toolbar";p.enableFocusableContainer=true;if(p.rendered){p.ariaEl.dom.setAttribute("role","toolbar");p.initFocusableContainer(true)}}}else{p.ariaRole="presentation";p.enableFocusableContainer=false;if(p.rendered){p.ariaEl.dom.setAttribute("role","presentation");p.initFocusableContainer(true)}}},getTools:function(){return this.tools.slice()},onAdd:function(m,n){var l=this.tools;Ext.panel.Bar.prototype.onAdd.call(this,m,n);if(m.isTool){l.push(m);l[m.type]=m}},onAdded:function(m,l,n){this.syncNoBorderCls();Ext.panel.Bar.prototype.onAdded.call(this,m,l,n)},onRemoved:function(m,l,n){this.syncNoBorderCls();Ext.panel.Bar.prototype.onRemoved.call(this,m,l,n)},setDock:function(p){var q=this,n=q.getTitle(),s=q.getTitleRotation(),o=n.getRotation();Ext.suspendLayouts();Ext.panel.Bar.prototype.setDock.call(this,p);if(s==="default"){s=(q.vertical?1:0);if(s!==o){n.setRotation(s)}if(q.rendered){q.resetItemMargins()}}Ext.resumeLayouts(true)},updateGlyph:function(f){this.getTitle().setGlyph(f)},updateIcon:function(f){this.getTitle().setIcon(f)},updateIconAlign:function(g,l){this.getTitle().setIconAlign(g)},updateIconCls:function(f){this.getTitle().setIconCls(f)},updateTitle:function(g,l){if(!l){this.insert(this.getTitlePosition(),g);this._titleInItems=true}this.titleCmp=g},updateTitleAlign:function(g,l){this.getTitle().setTextAlign(g)},updateTitlePosition:function(f){this.insert(f,this.getTitle())},updateTitleRotation:function(f){if(f==="default"){f=(this.vertical?1:0)}this.getTitle().setRotation(f)},privates:{fireClickEvent:function(n,e){var m="."+Ext.panel.Tool.prototype.baseCls;if(!e.getTarget(m)){this.fireEvent(n,this,e)}},getFramingInfoCls:function(){var l=this,m=Ext.panel.Bar.prototype.getFramingInfoCls.call(this),n=l.ownerCt;if(!l.expanding&&n&&(n.collapsed||l.isCollapsedExpander)){m+="-"+n.collapsedCls}return m+"-"+l.dock},onClick:function(e){this.fireClickEvent("click",e)},onDblClick:function(e){this.fireClickEvent("dblclick",e)},syncBeforeAfterTitleClasses:function(B){var v=this,w=v.items,y=w.items,C=v.getTitlePosition(),D=y.length,x=w.generation,G=v.syncBeforeAfterGen,E,z,A,F;if(!B&&(G===x)){return}v.syncBeforeAfterGen=x;for(A=0;A<D;++A){F=y[A];E=F.afterTitleCls||(F.afterTitleCls=F.baseCls+"-after-title");z=F.beforeTitleCls||(F.beforeTitleCls=F.baseCls+"-before-title");if(!v.title||A<C){if(G){F.removeCls(E)}F.addCls(z)}else{if(A>C){if(G){F.removeCls(z)}F.addCls(E)}}}},syncNoBorderCls:function(){var m=this,n=this.ownerCt,l=m.headerCls+"-noborder";if(n?(n.border===false&&!n.frame):m.border===false){m.addCls(l)}else{m.removeCls(l)}}}},0,["header"],["component","box","container","header"],{component:true,box:true,container:true,header:true},["widget.header"],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.panel,"Header"],0));(Ext.cmd.derive("Ext.layout.container.boxOverflow.None",Ext.Base,{alternateClassName:"Ext.layout.boxOverflow.None",factoryConfig:{defaultType:"none"},isBoxOverflowHandler:true,$configPrefixed:false,$configStrict:false,constructor:function(f){this.initConfig(f)},handleOverflow:Ext.emptyFn,clearOverflow:Ext.emptyFn,beginLayout:Ext.emptyFn,beginLayoutCycle:Ext.emptyFn,calculate:function(o){var p=this,n=o.state.boxPlan,m;if(n&&n.tooNarrow){m=p.handleOverflow(o);if(m){if(m.reservedSpace){p.layout.publishInnerCtSize(o,m.reservedSpace)}}}else{p.clearOverflow()}},completeLayout:Ext.emptyFn,finishedLayout:function(o){var p=this,s=p.layout.owner,q,n;if(s.hasListeners.overflowchange){q=s.query(">[hidden]");n=q.length;if(n!==p.lastHiddenCount){s.fireEvent("overflowchange",p.lastHiddenCount,n,q);p.lastHiddenCount=n}}},onRemove:Ext.emptyFn,getItem:function(f){return this.layout.owner.getComponent(f)},getOwnerType:function(l){var g;if(l.isToolbar){g="toolbar"}else{if(l.isTabBar){g="tab-bar"}else{if(l.isMenu){g="menu"}else{if(l.isBreadcrumb){g="breadcrumb"}else{g=l.getXType()}}}}return g},getPrefixConfig:Ext.emptyFn,getSuffixConfig:Ext.emptyFn,getOverflowCls:function(){return""},setVertical:function(){var m=this,n=m.layout,l=n.innerCt;l.removeCls(m.getOverflowCls(n.oppositeDirection));l.addCls(m.getOverflowCls(n.direction))}},1,0,0,0,["box.overflow.None","box.overflow.none"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.layout.container.boxOverflow,"None",Ext.layout.boxOverflow,"None"],0));(Ext.cmd.derive("Ext.util.ClickRepeater",Ext.util.Observable,{constructor:function(m,n){var l=this;l.el=Ext.get(m);l.el.unselectable();Ext.apply(l,n);Ext.util.Observable.prototype.constructor.call(this);if(!l.disabled){l.disabled=true;l.enable()}if(l.handler){l.on("click",l.handler,l.scope||l)}},interval:20,delay:250,preventDefault:true,stopDefault:false,timer:0,enable:function(){if(this.disabled){this.el.on("mousedown",this.handleMouseDown,this);if(Ext.isIE8){this.el.on("dblclick",this.handleDblClick,this)}if(this.preventDefault||this.stopDefault){this.el.on("click",this.eventOptions,this)}}this.disabled=false},disable:function(f){if(f||!this.disabled){clearTimeout(this.timer);if(this.pressedCls){this.el.removeCls(this.pressedCls)}Ext.getDoc().un("mouseup",this.handleMouseUp,this);this.el.clearListeners()}this.disabled=true},setDisabled:function(f){this[f?"disable":"enable"]()},eventOptions:function(e){if(this.preventDefault){e.preventDefault()}if(this.stopDefault){e.stopEvent()}},destroy:function(){this.disable(true);Ext.util.Observable.prototype.destroy.call(this)},handleDblClick:function(e){clearTimeout(this.timer);this.fireEvent("mousedown",this,e);this.fireEvent("click",this,e)},handleMouseDown:function(e){clearTimeout(this.timer);if(this.pressedCls){this.el.addCls(this.pressedCls)}this.mousedownTime=new Date();Ext.getDoc().on("mouseup",this.handleMouseUp,this);this.el.on("mouseout",this.handleMouseOut,this);this.fireEvent("mousedown",this,e);this.fireEvent("click",this,e);if(this.accelerate){this.delay=400}this.timer=Ext.defer(this.click,this.delay||this.interval,this,[e]);if(this.mousedownPreventDefault){e.preventDefault()}if(this.mousedownStopEvent){e.stopEvent()}},click:function(e){this.fireEvent("click",this,e);this.timer=Ext.defer(this.click,this.accelerate?this.easeOutExpo(Ext.Date.getElapsed(this.mousedownTime),400,-390,12000):this.interval,this,[e])},easeOutExpo:function(o,p,m,n){return(o===n)?p+m:m*(-Math.pow(2,-10*o/n)+1)+p},handleMouseOut:function(){clearTimeout(this.timer);if(this.pressedCls){this.el.removeCls(this.pressedCls)}this.el.on("mouseover",this.handleMouseReturn,this)},handleMouseReturn:function(e){this.el.un("mouseover",this.handleMouseReturn,this);if(this.pressedCls){this.el.addCls(this.pressedCls)}this.click(e)},handleMouseUp:function(e){clearTimeout(this.timer);this.el.un("mouseover",this.handleMouseReturn,this);this.el.un("mouseout",this.handleMouseOut,this);Ext.getDoc().un("mouseup",this.handleMouseUp,this);if(this.pressedCls){this.el.removeCls(this.pressedCls)}this.fireEvent("mouseup",this,e)}},1,0,0,0,0,0,[Ext.util,"ClickRepeater"],0));(Ext.cmd.derive("Ext.layout.container.boxOverflow.Scroller",Ext.layout.container.boxOverflow.None,{alternateClassName:"Ext.layout.boxOverflow.Scroller",animateScroll:false,scrollIncrement:20,wheelIncrement:10,scrollRepeatInterval:60,scrollDuration:400,scrollerCls:"x-box-scroller",beforeSuffix:"-before-scroller",afterSuffix:"-after-scroller",constructor:function(l){var g=this;g.mixins.observable.constructor.call(g,l);g.scrollPosition=0;g.scrollSize=0},getPrefixConfig:function(){return{role:"presentation",id:this.layout.owner.id+this.beforeSuffix,cls:this.createScrollerCls("beforeX"),style:"display:none"}},getSuffixConfig:function(){return{role:"presentation",id:this.layout.owner.id+this.afterSuffix,cls:this.createScrollerCls("afterX"),style:"display:none"}},createScrollerCls:function(p){var v=this,w=v.layout,t=w.owner,q=v.getOwnerType(t),u=v.scrollerCls,s=u+" "+u+"-"+w.names[p]+" "+u+"-"+q+" "+u+"-"+q+"-"+t.ui;if(t.plain){s+=" "+u+"-plain"}return s},getOverflowCls:function(f){return this.scrollerCls+"-body-"+f},beginLayout:function(f){f.innerCtScrollPos=this.getScrollPosition();Ext.layout.container.boxOverflow.None.prototype.beginLayout.apply(this,arguments)},finishedLayout:function(q){var s=this,w=q.state.boxPlan,t=s.layout,p=t.names,v=Math.min(s.getMaxScrollPosition(),q.innerCtScrollPos),u;if(w&&w.tooNarrow){u=q.childItems[q.childItems.length-1].props;s.scrollSize=u[p.x]+u[p.width];s.updateScrollButtons();t.innerCt[p.setScrollLeft](v)}Ext.layout.container.boxOverflow.None.prototype.finishedLayout.call(this,q)},handleOverflow:function(z){var u=this,v=u.layout.names,t=v.getWidth,s=v.parallelMargins,y,w,x,A;u.showScrollers();x=u.getBeforeScroller();A=u.getAfterScroller();y=x[t]()+A[t]()+x.getMargin(s)+A.getMargin(s);w=z.targetContext.getPaddingInfo()[v.width];return{reservedSpace:Math.max(y-w,0)}},getBeforeScroller:function(){var f=this;return f._beforeScroller||(f._beforeScroller=f.createScroller(f.beforeSuffix,"beforeRepeater","scrollLeft"))},getAfterScroller:function(){var f=this;return f._afterScroller||(f._afterScroller=f.createScroller(f.afterSuffix,"afterRepeater","scrollRight"))},createScroller:function(w,q,v){var p=this,s=p.layout.owner,t=p.scrollerCls,u;u=s.el.getById(s.id+w);u.addClsOnOver(t+"-hover");u.addClsOnClick(t+"-pressed");u.setVisibilityMode(Ext.Element.DISPLAY);p[q]=new Ext.util.ClickRepeater(u,{interval:p.scrollRepeatInterval,handler:v,scope:p});return u},createWheelListener:function(){var f=this;f.wheelListener=f.layout.innerCt.on("mousewheel",f.onMouseWheel,f,{destroyable:true})},onMouseWheel:function(e){e.stopEvent();this.scrollBy(this.getWheelDelta(e)*this.wheelIncrement*-1,false)},getWheelDelta:function(e){return e.getWheelDelta()},clearOverflow:function(){this.hideScrollers()},showScrollers:function(){var f=this;if(!f.wheelListener){f.createWheelListener()}f.getBeforeScroller().show();f.getAfterScroller().show();f.layout.owner.addClsWithUI(f.layout.direction==="vertical"?"vertical-scroller":"scroller")},hideScrollers:function(){var m=this,l=m.getBeforeScroller(),n=m.getAfterScroller();if(l){l.hide();n.hide();m.layout.owner.removeClsWithUI(m.layout.direction==="vertical"?"vertical-scroller":"scroller")}},destroy:function(){Ext.destroyMembers(this,"beforeRepeater","afterRepeater","_beforeScroller","_afterScroller","wheelListener");this.callParent()},scrollBy:function(g,l){this.scrollTo(this.getScrollPosition()+g,l)},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},updateScrollButtons:function(){var o=this,m=o.getBeforeScroller(),p=o.getAfterScroller(),n;if(!m||!p){return}n=o.scrollerCls+"-disabled";m[o.atExtremeBefore()?"addCls":"removeCls"](n);p[o.atExtremeAfter()?"addCls":"removeCls"](n);o.scrolling=false},scrollLeft:function(){this.scrollBy(-this.scrollIncrement,false)},scrollRight:function(){this.scrollBy(this.scrollIncrement,false)},getScrollPosition:function(){var l=this,m=l.layout,n;if(isNaN(l.scrollPosition)){n=m.innerCt[m.names.getScrollLeft]()}else{n=l.scrollPosition}return n},getMaxScrollPosition:function(){var m=this,n=m.layout,l=m.scrollSize-n.innerCt.lastBox[n.names.width];return(l<0)?0:l},atExtremeBefore:function(){return !this.getScrollPosition()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollPosition()},setVertical:function(){var p=this,o=p.getBeforeScroller(),q=p.getAfterScroller(),n=p.layout.names,s=p.scrollerCls;o.removeCls(s+"-"+n.beforeY);q.removeCls(s+"-"+n.afterY);o.addCls(s+"-"+n.beforeX);q.addCls(s+"-"+n.afterX);Ext.layout.container.boxOverflow.None.prototype.setVertical.call(this)},scrollTo:function(u,t){var w=this,p=w.layout,v=p.names,q=w.getScrollPosition(),s=Ext.Number.constrain(u,0,w.getMaxScrollPosition());if(s!==q&&!w.scrolling){w.scrollPosition=NaN;if(t===undefined){t=w.animateScroll}p.innerCt[v.scrollTo](v.beforeScrollX,s,t?w.getScrollAnim():false);if(t){w.scrolling=true}else{w.updateScrollButtons()}w.fireEvent("scroll",w,s,t?w.getScrollAnim():false)}},scrollToItem:function(C,z){var t=this,w=t.layout,y=w.owner,u=w.names,A=w.innerCt,B,x,v;C=t.getItem(C);if(C!==undefined){if(C===y.items.first()){v=0}else{if(C===y.items.last()){v=t.getMaxScrollPosition()}else{B=t.getItemVisibility(C);if(!B.fullyVisible){x=C.getBox(false,true);v=x[u.x];if(B.hiddenEnd){v-=(A[u.getWidth]()-x[u.width])}}}}if(v!==undefined){t.scrollTo(v,z)}}},getItemVisibility:function(s){var u=this,z=u.getItem(s).getBox(true,true),y=u.layout,v=y.names,w=z[v.x],x=w+z[v.width],A=u.getScrollPosition(),t=A+y.innerCt[v.getWidth]();return{hiddenStart:w<A,hiddenEnd:x>t,fullyVisible:w>=A&&x<=t}}},1,0,0,0,["box.overflow.Scroller","box.overflow.scroller"],[["observable",Ext.mixin.Observable]],[Ext.layout.container.boxOverflow,"Scroller",Ext.layout.boxOverflow,"Scroller"],0));(Ext.cmd.derive("Ext.dd.DragDropManager",Ext.Base,{singleton:true,alternateClassName:["Ext.dd.DragDropMgr","Ext.dd.DDM"],ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:true,stopPropagation:false,initialized:false,locked:false,init:function(){this.initialized=true},POINT:0,INTERSECT:1,mode:0,notifyOccluded:false,dragCls:"x-dd-drag-current",currentPoint:new Ext.util.Point(),_execOnAll:function(s,t){var p=this.ids,q,u,v,w;for(q in p){if(p.hasOwnProperty(q)){w=p[q];for(u in w){if(w.hasOwnProperty(u)){v=w[u];if(!this.isTypeOfDD(v)){continue}v[s].apply(v,t)}}}}},addListeners:function(){var f=this;f.init();Ext.getWin().on({unload:f._onUnload,resize:f._onResize,scope:f})},_onResize:function(e){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=true},unlock:function(){this.locked=false},isLocked:function(){return this.locked},locationCache:{},useCache:true,clickPixelThresh:8,dragThreshMet:false,clickTimeout:null,startX:0,startY:0,regDragDrop:function(g,l){if(!this.initialized){this.init()}if(!this.ids[l]){this.ids[l]={}}this.ids[l][g.id]=g},removeDDFromGroup:function(l,n){if(!this.ids[n]){this.ids[n]={}}var m=this.ids[n];if(m&&m[l.id]){delete m[l.id]}},_remove:function(t,q){var u=this,p=u.ids,s=t.groups,g;if(u.clearingAll){return}if(u.dragCurrent===t){u.dragCurrent=null}for(g in s){if(s.hasOwnProperty(g)){if(q){delete p[g]}else{if(p[g]){delete p[g][t.id]}}}}delete u.handleIds[t.id];delete u.locationCache[t.id]},regHandle:function(g,l){if(!this.handleIds[g]){this.handleIds[g]={}}this.handleIds[g][l]=l},isDragDrop:function(f){return(this.getDDById(f))?true:false},getRelated:function(u,s){var o=[],p,q,t;for(p in u.groups){for(q in this.ids[p]){t=this.ids[p][q];if(!this.isTypeOfDD(t)){continue}if(!s||t.isTarget){o[o.length]=t}}}return o},isLegalTarget:function(n,o){var q=this.getRelated(n,true),p,s;for(p=0,s=q.length;p<s;++p){if(q[p].id===o.id){return true}}return false},isTypeOfDD:function(f){return(f&&f.__ygDragDrop)},isHandle:function(g,l){return(this.handleIds[g]&&this.handleIds[g][l])},getDDById:function(m,n){var o,p;for(o in this.ids){p=this.ids[o][m];if(p instanceof Ext.dd.DDTarget||n){return p}}return null},handleMouseDown:function(w,x){var v=this,A=w.getXY(),z=x.getEl(),t={translate:false,fn:v.handleMouseUp,capture:false,priority:-1000},y={translate:false,fn:v.handleMouseMove,capture:false},u={capture:true,destroyable:true,scope:v},e=Ext.supports;u.touchstart=v.handleMouseUp;if(e.PointerEvents){u.pointerup=t;u.pointermove=y}else{if(e.MSPointerEvents){u.mouseup=t;u.mousemove=y}else{if(w.pointerType==="mouse"){u.mouseup=t;u.mousemove=y}else{u.touchend=t;u.touchmove=y}}}v.pointerMoveListeners=Ext.getDoc().on(u);v.isMouseDown=true;if(Ext.quickTipsActive){Ext.tip.QuickTipManager.ddDisable()}v.currentPoint.setPosition(A);if(v.dragCurrent){v.handleMouseUp(w)}v.mousedownEvent=w;v.currentTarget=w.getTarget();v.dragCurrent=x;Ext.fly(z).setCapture();v.startX=A[0];v.startY=A[1];v.offsetX=v.offsetY=0;v.deltaX=v.startX-z.offsetLeft;v.deltaY=v.startY-z.offsetTop;v.dragThreshMet=false},startDrag:function(q,n){var p=this,o=p.dragCurrent,s;clearTimeout(p.clickTimeout);if(o){o.b4StartDrag(q,n);o.startDrag(q,n);s=Ext.fly(o.getDragEl());if(s){s.addCls(p.dragCls);if(s.shim&&s.shim.el){s.shim.el.addCls(p.dragCls)}}}p.dragThreshMet=true},handleMouseUp:function(e){var l=this;l.pointerMoveListeners.destroy();l.isMouseDown=false;if(Ext.quickTipsActive){Ext.tip.QuickTipManager.ddEnable()}if(!l.dragCurrent){return}if(Ext.isIE&&document.releaseCapture){document.releaseCapture()}clearTimeout(l.clickTimeout);if(l.dragThreshMet){l.fireEvents(e,true)}l.stopDrag(e);if(l.dragThreshMet){l.stopEvent(e)}l.mousedownEvent=l.currentTarget=null},stopEvent:function(e){if(this.stopPropagation){e.stopPropagation()}if(this.preventDefault&&e.pointerType==="touch"){e.preventDefault()}},stopDrag:function(e){var o=this,n=o.dragCurrent,p;if(n){if(o.dragThreshMet){p=Ext.fly(n.getDragEl());if(p){p.removeCls(o.dragCls);if(p.shim&&p.shim.el){p.shim.el.removeCls(o.dragCls)}}n.b4EndDrag(e);n.endDrag(e)}o.dragCurrent.onMouseUp(e)}o.dragCurrent=null;o.dragOvers={}},handleMouseMove:function(v){var x=this,w=x.dragCurrent,u=v.getXY(),e=u[0],t=u[1],y,s;x.offsetX=e-x.startX;x.offsetY=t-x.startY;x.currentPoint.setPosition(u);if(!w){return true}if(!x.dragThreshMet){y=Math.abs(x.offsetX);s=Math.abs(x.offsetY);if(y>x.clickPixelThresh||s>x.clickPixelThresh){v.claimGesture();x.startDrag(x.startX,x.startY)}}if(x.dragThreshMet){w.b4Drag(v);w.onDrag(v);if(!w.moveOnly){x.fireEvents(v,false)}}x.stopEvent(v);return true},fireEvents:function(N,J){var L=this,I=Ext.supports.Touch,S=L.dragCurrent,e=L.currentPoint,H=[],R=[],O=[],W=[],M=[],Q=[],U,T,K,V,F,E,G,P;if(!S||S.isLocked()){return}P=!(S.deltaX<0||S.deltaY<0);if(I||(!L.notifyOccluded&&(!Ext.supports.CSSPointerEvents||Ext.isIE10m||Ext.isOpera)&&P)){U=S.getDragEl();if(P){U.style.visibility="hidden"}N=N.chain({target:L.elementFromPoint(N.clientX,N.clientY)||document.documentElement});if(P){U.style.visibility="visible"}}for(F in L.dragOvers){T=L.dragOvers[F];delete L.dragOvers[F];if(!L.isTypeOfDD(T)||T.destroyed){continue}if(J){O.push(T)}else{if(L.notifyOccluded){if(!this.isOverTarget(e,T,L.mode)){O.push(T)}}else{if(!N.within(T.getEl())){O.push(T)}}}R[F]=true}for(G in S.groups){if("string"!==typeof G){continue}for(F in L.ids[G]){T=L.ids[G][F];if(L.isTypeOfDD(T)&&(K=T.getEl())&&(T.isTarget)&&(!T.isLocked())&&(Ext.fly(K).isVisible(true))&&((T!==S)||(S.ignoreSelf===false))){if(L.notifyOccluded){if((T.zIndex=L.getZIndex(K))!==-1){V=true}H.push(T)}else{if(N.within(T.getEl())){H.push(T);break}}}}}if(V){Ext.Array.sort(H,L.byZIndex)}for(F=0,E=H.length;F<E;F++){T=H[F];if(L.isOverTarget(e,T,L.mode)){if(J){M.push(T)}else{if(!R[T.id]){Q.push(T)}else{W.push(T)}L.dragOvers[T.id]=T}if(!L.notifyOccluded){break}}}if(L.mode){if(Q.length){S.onDragEnter(N,Q)}if(W.length){S.b4DragOver(N,W);S.onDragOver(N,W)}if(M.length){S.b4DragDrop(N,M);S.onDragDrop(N,M)}if(O.length){S.b4DragOut(N,O);S.onDragOut(N,O)}}else{for(F=0,E=Q.length;F<E;++F){S.onDragEnter(N,Q[F].id)}for(F=0,E=W.length;F<E;++F){S.b4DragOver(N,W[F].id);S.onDragOver(N,W[F].id)}for(F=0,E=M.length;F<E;++F){S.b4DragDrop(N,M[F].id);S.onDragDrop(N,M[F].id)}for(F=0,E=O.length;F<E;++F){S.b4DragOut(N,O[F].id);S.onDragOut(N,O[F].id)}}if(J&&!M.length){S.onInvalidDrop(N)}},elementFromPoint:function(l,g){if(Ext.rootInheritedState.rtl){l=Ext.Element.getViewportWidth()-l}return Ext.Element.fromPoint(l,g,true)},getZIndex:function(o){var p=document.body,n,m=-1;o=Ext.getDom(o);while(o!==p){if(!isNaN(n=Number(Ext.fly(o).getStyle("zIndex")))){m=n}o=o.parentNode}return m},byZIndex:function(g,l){return g.zIndex<l.zIndex},getBestMatch:function(p){var n=null,q=p.length,o,s;if(q===1){n=p[0]}else{for(o=0;o<q;++o){s=p[o];if(s.cursorIsOver){n=s;break}else{if(!n||n.overlap.getArea()<s.overlap.getArea()){n=s}}}}return n},refreshCache:function(q){var s,p,o,n;for(s in q){if("string"!==typeof s){continue}for(p in this.ids[s]){o=this.ids[s][p];if(this.isTypeOfDD(o)){n=this.getLocation(o);if(n){this.locationCache[o.id]=n}else{delete this.locationCache[o.id]}}}}},verifyEl:function(f){return Ext.getBody().contains(f)},getLocation:function(l){if(!this.isTypeOfDD(l)){return null}if(l.getRegion){return l.getRegion()}var y=l.getEl(),F,z,A,D,E,C,B,G,t;try{F=Ext.fly(y).getXY()}catch(e){}if(!F){return null}z=F[0];A=z+y.offsetWidth;D=F[1];E=D+y.offsetHeight;C=D-l.padding[0];B=A+l.padding[1];G=E+l.padding[2];t=z-l.padding[3];return new Ext.util.Region(C,B,G,t)},isOverTarget:function(s,A,y){var w=this.locationCache[A.id],t,v,z,x,u;if(!w||!this.useCache){w=this.getLocation(A);this.locationCache[A.id]=w}if(!w){return false}A.cursorIsOver=w.contains(s);t=this.dragCurrent;if(!t||!t.getTargetCoord||(!y&&!t.constrainX&&!t.constrainY)){return A.cursorIsOver}A.overlap=null;v=t.getTargetCoord(s.x,s.y);z=t.getDragEl();x=new Ext.util.Region(v.y,v.x+z.offsetWidth,v.y+z.offsetHeight,v.x);u=x.intersect(w);if(u){A.overlap=u;return(y)?true:A.cursorIsOver}else{return false}},_onUnload:function(e,l){Ext.dd.DragDropManager.unregAll()},unregAll:function(){var l=this,n=l.elementCache,m;if(l.dragCurrent){l.stopDrag();l.dragCurrent=null}l.clearingAll=true;l._execOnAll("unreg",[]);delete l.clearingAll;for(m in n){delete n[m]}l.elementCache={};l.ids={};l.handleIds={}},elementCache:{},getElWrapper:function(g){var l=this.elementCache[g];if(!l||!l.el){l=this.elementCache[g]=new this.ElementWrapper(Ext.getDom(g))}return l},getElement:function(f){return Ext.getDom(f)},getCss:function(g){var l=Ext.getDom(g);return(l)?l.style:null},ElementWrapper:function(f){this.el=f||null;this.id=this.el&&f.id;this.css=this.el&&f.style},getPosX:function(f){return Ext.fly(f).getX()},getPosY:function(f){return Ext.fly(f).getY()},swapNode:function(n,p){if(n.swapNode){n.swapNode(p)}else{var m=p.parentNode,o=p.nextSibling;if(o===n){m.insertBefore(n,p)}else{if(p===n.nextSibling){m.insertBefore(p,n)}else{n.parentNode.replaceChild(p,n);m.insertBefore(n,o)}}}},getScroll:function(){var o=window.document,n=o.documentElement,s=o.body,p=0,q=0;if(n&&(n.scrollTop||n.scrollLeft)){p=n.scrollTop;q=n.scrollLeft}else{if(s){p=s.scrollTop;q=s.scrollLeft}}return{top:p,left:q}},getStyle:function(g,l){return Ext.fly(g).getStyle(l)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(n,l){var m=Ext.fly(l).getXY();Ext.fly(n).setXY(m)},numericSort:function(g,l){return(g-l)},handleWasClicked:function(n,l){if(this.isHandle(l,n.id)){return true}else{var m=n.parentNode;while(m){if(this.isHandle(l,m.id)){return true}else{m=m.parentNode}}}return false}},0,0,0,0,0,0,[Ext.dd,"DragDropManager",Ext.dd,"DragDropMgr",Ext.dd,"DDM"],function(f){Ext.onInternalReady(function(){f.addListeners()})}));(Ext.cmd.derive("Ext.resizer.Splitter",Ext.Component,{childEls:["collapseEl"],renderTpl:['<tpl if="collapsible===true">','<div id="{id}-collapseEl" data-ref="collapseEl" role="presentation" class="',"x-","collapse-el ","x-",'layout-split-{collapseDir}{childElCls}">',"</div>","</tpl>"],isSplitter:true,baseCls:"x-splitter",collapsedClsInternal:"x-splitter-collapsed",canResize:true,collapsible:null,collapseOnDblClick:true,defaultSplitMin:40,defaultSplitMax:1000,collapseTarget:"next",horizontal:false,vertical:false,touchAction:undefined,size:5,tracker:null,ariaRole:"separator",focusable:true,tabIndex:0,applyTouchAction:function(l,g){if(l===undefined){l=this.vertical?{panX:false}:{panY:false}}return Ext.Component.prototype.applyTouchAction.call(this,l,g)},getTrackerConfig:function(){return Ext.apply({xclass:"Ext.resizer.SplitterTracker",el:this.el,splitter:this},this.tracker)},beforeRender:function(){var n=this,m=n.getCollapseTarget(),o=n.collapsible,p;Ext.Component.prototype.beforeRender.call(this);if(m.collapsed){n.addCls(n.collapsedClsInternal)}if(!n.canResize){n.addCls(n.baseCls+"-noresize")}Ext.applyIf(n.renderData,{collapseDir:n.getCollapseDirection(),collapsible:(o!==null)?o:m.collapsible});n.ariaRenderAttributes=n.ariaRenderAttributes||{};n.ariaRenderAttributes["aria-orientation"]=n.orientation;n.protoEl.unselectable()},onRender:function(){var m=this,l,n;Ext.Component.prototype.onRender.apply(this,arguments);if(m.performCollapse!==false){if(m.renderData.collapsible){m.mon(m.collapseEl,"click",m.toggleTargetCmp,m)}if(m.collapseOnDblClick){m.mon(m.el,"dblclick",m.toggleTargetCmp,m)}}l=m.getCollapseTarget();if(l&&l.isPanel){l.on({collapse:m.onTargetCollapse,expand:m.onTargetExpand,beforeexpand:m.onBeforeTargetExpand,beforecollapse:m.onBeforeTargetCollapse,scope:m})}if(m.canResize){m.tracker=Ext.create(m.getTrackerConfig());m.relayEvents(m.tracker,["beforedragstart","dragstart","dragend"])}n=m.collapseEl;if(n){n.lastCollapseDirCls=m.collapseDirProps[m.collapseDirection].cls}},getCollapseDirection:function(){var u=this,q=u.collapseDirection,o,t,s,p;if(!q){o=u.collapseTarget;if(o.isComponent){q=o.collapseDirection}if(!q){p=u.ownerCt.layout.type;if(o.isComponent){s=u.ownerCt.items;t=Number(s.indexOf(o)===s.indexOf(u)-1)<<1|Number(p==="hbox")}else{t=Number(u.collapseTarget==="prev")<<1|Number(p==="hbox")}q=["bottom","right","top","left"][t]}u.collapseDirection=q}u.setOrientation((q==="top"||q==="bottom")?"horizontal":"vertical");return q},getCollapseTarget:function(){var f=this;return f.collapseTarget.isComponent?f.collapseTarget:f.collapseTarget==="prev"?f.previousSibling():f.nextSibling()},setCollapseEl:function(g){var l=this.collapseEl;if(l){l.setDisplayed(g)}},onBeforeTargetExpand:function(f){this.setCollapseEl("none")},onBeforeTargetCollapse:function(){this.setCollapseEl("none")},onTargetCollapse:function(g){var l=this;if(g===l.getCollapseTarget()&&g[l.orientation==="vertical"?"collapsedHorizontal":"collapsedVertical"]()){l.el.addCls(l.collapsedClsInternal+" "+(l.collapsedCls||""))}l.setCollapseEl("")},onTargetExpand:function(g){var l=this;l.el.removeCls(l.collapsedClsInternal+" "+(l.collapsedCls||""));l.setCollapseEl("")},collapseDirProps:{top:{cls:"x-layout-split-top"},right:{cls:"x-layout-split-right"},bottom:{cls:"x-layout-split-bottom"},left:{cls:"x-layout-split-left"}},orientationProps:{horizontal:{opposite:"vertical",fixedAxis:"height",stretchedAxis:"width"},vertical:{opposite:"horizontal",fixedAxis:"width",stretchedAxis:"height"}},applyCollapseDirection:function(){var n=this,o=n.collapseEl,m=n.collapseDirProps[n.collapseDirection],p;if(o){p=o.lastCollapseDirCls;if(p){o.removeCls(p)}o.addCls(o.lastCollapseDirCls=m.cls)}},applyOrientation:function(){var p=this,s=p.orientation,q=p.orientationProps[s],w=p.size,t=q.fixedAxis,v=q.stretchedAxis,u=p.baseCls+"-";p[s]=true;p[q.opposite]=false;if(!p.hasOwnProperty(t)||p[t]==="100%"){p[t]=w}if(!p.hasOwnProperty(v)||p[v]===w){p[v]="100%"}p.removeCls(u+q.opposite);p.addCls(u+s)},setOrientation:function(l){var g=this;if(g.orientation!==l){g.orientation=l;g.applyOrientation()}},updateOrientation:function(){delete this.collapseDirection;this.getCollapseDirection();this.applyCollapseDirection()},toggleTargetCmp:function(e,p){var o=this.getCollapseTarget(),s=o.placeholder,q;if(Ext.isFunction(o.expand)&&Ext.isFunction(o.collapse)){if(s&&!s.hidden){q=true}else{q=!o.hidden}if(q){if(o.collapsed||o.floatedFromCollapse){o.expand()}else{if(o.collapseDirection){o.collapse()}else{o.collapse(this.renderData.collapseDir)}}}}},setSize:function(){var f=this;Ext.Component.prototype.setSize.apply(this,arguments);if(Ext.isIE&&f.el){f.el.repaint()}},doDestroy:function(){Ext.destroy(this.tracker);Ext.Component.prototype.doDestroy.call(this)}},0,["splitter"],["component","box","splitter"],{component:true,box:true,splitter:true},["widget.splitter"],0,[Ext.resizer,"Splitter"],0));Ext.define("Ext.theme.neptune.resizer.Splitter",{override:"Ext.resizer.Splitter",size:8});Ext.define("Ext.theme.triton.resizer.Splitter",{override:"Ext.resizer.Splitter",size:10});(Ext.cmd.derive("Ext.layout.container.Box",Ext.layout.container.Container,{alternateClassName:"Ext.layout.BoxLayout",type:"box",config:{align:"begin",constrainAlign:false,enableSplitters:true,overflowHandler:{$value:null,merge:function(g,l){if(typeof g==="string"){g={type:g}}return Ext.merge(l?Ext.Object.chain(l):{},g)}},padding:0,pack:"start",stretchMaxPartner:undefined,vertical:false,alignRoundingMethod:"round"},itemCls:"x-box-item",targetCls:"x-box-layout-ct",targetElCls:"x-box-target",innerCls:"x-box-inner",manageMargins:true,createsInnerCt:true,childEls:["innerCt","targetEl"],renderTpl:['{%var oc,l=values.$comp.layout,oh=l.overflowHandler;if (oh && oh.getPrefixConfig!==Ext.emptyFn) {if(oc=oh.getPrefixConfig())dh.generateMarkup(oc, out)}%}<div id="{ownerId}-innerCt" data-ref="innerCt" role="presentation" class="{[l.innerCls]}{[oh ? (" " + oh.getOverflowCls(l.direction)) : ""]}"><div id="{ownerId}-targetEl" data-ref="targetEl" class="{targetElCls}" role="presentation">{%this.renderBody(out, values)%}</div></div>{%if (oh && oh.getSuffixConfig!==Ext.emptyFn) {if(oc=oh.getSuffixConfig())dh.generateMarkup(oc, out)}%}',{disableFormats:true,definitions:"var dh=Ext.DomHelper;"}],constructor:function(n){var l=this,m;Ext.layout.container.Container.prototype.constructor.call(this,n);l.setVertical(l.vertical);l.flexSortFn=l.flexSort.bind(l);m=typeof l.padding;if(m==="string"||m==="number"){l.padding=Ext.util.Format.parseBox(l.padding);l.padding.height=l.padding.top+l.padding.bottom;l.padding.width=l.padding.left+l.padding.right}},_beginRe:/^(?:begin|left|top)$/,_centerRe:/^(?:center|middle)$/,_endRe:/^(?:end|right|bottom)$/,_percentageRe:/^\s*(\d+(?:\.\d*)?)\s*[%]\s*$/,getItemSizePolicy:function(K,J){var P=this,A=P.sizePolicy,C=P.align,D=K.flex,M=C,Q=P.names,B=Q.height,N=Q.width,H=K[N],L=K[B],F=P._percentageRe,G=F.test(H),E=(C==="stretch"),I=(C==="stretchmax"),O=P.constrainAlign;if(!J&&(E||D||G||(O&&!I))){J=P.owner.getSizeModel()}if(E){if(!F.test(L)&&J[B].shrinkWrap){M="stretchmax"}}else{if(!I){if(F.test(L)){M="stretch"}else{if(O&&!J[B].shrinkWrap){M="stretchmax"}else{M=""}}}}if(D||G){if(!J[N].shrinkWrap){A=A.flex}}return A[M]},flexSort:function(M,N){var z=this.names.maxWidth,F=this.names.minWidth,O=Infinity,A=M.target,J=N.target,C=A.flex,D=J.flex,I=0,H,L,B,G,K,E;B=A[z]||O;G=J[z]||O;H=A[F]||0;L=J[F]||0;K=isFinite(H)||isFinite(L);E=isFinite(B)||isFinite(G);if(K||E){if(E){I=B-G}if(I===0&&K){I=L-H}if(I===0){if(E){I=D-C}else{I=C-D}}}return I},isItemBoxParent:function(f){return true},isItemShrinkWrap:function(f){return true},roundFlex:function(f){return Math.floor(f)},beginCollapse:function(g){var l=this;if(l.direction==="vertical"&&g.collapsedVertical()){g.collapseMemento.capture(["flex"]);delete g.flex}else{if(l.direction==="horizontal"&&g.collapsedHorizontal()){g.collapseMemento.capture(["flex"]);delete g.flex}}},beginExpand:function(f){f.collapseMemento.restore(["flex"])},beginLayout:function(p){var q=this,u=q.owner,v=u.stretchMaxPartner,s=q.innerCt.dom.style,w=q.names,t=q.overflowHandler;p.boxNames=w;if(t){t.beginLayout(p)}if(typeof v==="string"){v=Ext.getCmp(v)||u.query(v)[0]}p.stretchMaxPartner=v&&p.context.getCmp(v);Ext.layout.container.Container.prototype.beginLayout.call(this,p);p.innerCtContext=p.getEl("innerCt",q);p.targetElContext=p.getEl("targetEl",q);p.ownerScrollable=u.getScrollable();s.width=s.height=""},beginLayoutCycle:function(B,F){var I=this,E=B.state,H=B.ownerScrollable,x=I.align,w=B.boxNames,G=I.pack,C=I._centerRe,A=I.overflowHandler,D=B.state.canScroll,y,z;if(A){A.beginLayoutCycle(B,F)}Ext.layout.container.Container.prototype.beginLayoutCycle.call(this,B,F);B.parallelSizeModel=y=B[w.widthModel];B.perpendicularSizeModel=z=B[w.heightModel];B.boxOptions={align:x={stretch:x==="stretch",stretchmax:x==="stretchmax",center:C.test(x),bottom:I._endRe.test(x)},pack:G={center:C.test(G),end:G==="end"}};if(H){if(!D){E.canScroll={parallel:!y.shrinkWrap&&H[w.getX](),perpendicular:!z.shrinkWrap&&H[w.getY]()}}if(!E.actualScroll){E.actualScroll={parallel:false,perpendicular:false}}}if(x.stretch&&z.shrinkWrap){x.stretchmax=true;x.stretch=false}x.nostretch=!(x.stretch||x.stretchmax);if(y.shrinkWrap){G.center=G.end=false}I.cacheFlexes(B);I.targetEl.setWidth(20000)},cacheFlexes:function(U){var M=this,S=U.boxNames,ai=S.widthModel,ac=S.heightModel,ag=U.boxOptions.align.nostretch,aa=0,ah=U.childItems,X=ah.length,P=[],Q=0,W=0,J=0,V=S.minWidth,R=S.minHeight,ab=M._percentageRe,T=0,O=0,ad,L,Z,Y,af,ae,K,N;while(X--){L=ah[X];ad=L.target;ae=L[ai];if(ae.calculated){L.flex=Z=ad.flex;if(Z){aa+=Z;P.push(L);Q+=ad[V]||0}else{if((Y=ab.exec(ad[S.width]))){L.percentageParallel=parseFloat(Y[1])/100;++T}}}if(ae.configured){K=ad[S.width]}else{K=ad[V]||0}J+=K;af=L[ac];if(ag&&af.calculated){Y=ab.exec(ad[S.height]);L.percentagePerpendicular=parseFloat(Y[1])/100;++O}if(af.configured){N=ad[S.height]}else{N=ad[R]||0}if(N>W){W=N}}U.flexedItems=P;U.flexedMinWidth=Q;U.smallestWidth=J;U.smallestHeight=W;U.totalFlex=aa;U.percentageWidths=T;U.percentageHeights=O;Ext.Array.sort(P,M.flexSortFn)},calculate:function(y){var u=this,v=y.boxNames,A=y.state,w=A.actualScroll,s=A.needsScroll,z=A.canScroll,t=A.boxPlan||(A.boxPlan={}),x=u.overflowHandler;t.targetSize=u.getContainerSize(y);if(z&&!s){A.needsScroll=s={parallel:z.parallel&&t.targetSize[v.width]<y.smallestWidth,perpendicular:z.perpendicular&&t.targetSize[v.height]<y.smallestHeight}}if(!A.parallelDone){A.parallelDone=u.calculateParallel(y,v,t)}if(!A.perpendicularDone){A.perpendicularDone=u.calculatePerpendicular(y,v,t)}if(A.parallelDone&&A.perpendicularDone){if(z&&!A.scrollPass){if(s.parallel!==w.parallel||s.perpendicular!==w.perpendicular){y.invalidate({state:{scrollPass:true,canScroll:z,needsScroll:w}});u.done=false;return}}u.publishInnerCtSize(y);if(u.done&&y.boxOptions.align.stretchmax&&!A.stretchMaxDone){u.calculateStretchMax(y,v,t);A.stretchMaxDone=true}if(x){x.calculate(y)}}else{u.done=false}},calculateParallel:function(aj,V,ae){var ap=this,at=aj.parallelSizeModel.shrinkWrap,ad=V.width,az=aj.childItems,an=V.beforeX,Z=V.afterX,aw=V.setWidth,ag=az.length,ak=aj.flexedItems,aa=ak.length,aq=aj.boxOptions.pack,Y=ap.padding,aE=ae.targetSize,ar=aE[ad],U=aj.state,ah=U.needsScroll,ao=U.canScroll,af=0,ay=Y[an],ab=ay+Y[Z],am=Ext.getScrollbarSize(),aB=am[V.width],aF=am[V.height],X,ai,aA,av,au,ax,aD,W,ac,al,aC;if(!at&&!aE[V.gotWidth]){return false}for(X=0;X<ag;++X){au=az[X];ai=au.marginInfo||au.getMarginInfo();af+=ai[ad];if(!au[V.widthModel].calculated){ac=au.getProp(ad);ab+=ac;if(isNaN(ab)){return false}}}ab+=af;if(aj.percentageWidths){al=ar-af;if(isNaN(al)){return false}for(X=0;X<ag;++X){au=az[X];if(au.percentageParallel){ac=Math.ceil(al*au.percentageParallel);ac=au[aw](ac);ab+=ac}}}if(at){aC=0;ae.tooNarrow=false}else{aC=ar-ab;if(ah&&ah.perpendicular){aC-=aF}ae.tooNarrow=aC<aj.flexedMinWidth;if(ae.tooNarrow&&ao&&ao.parallel){U.actualScroll.parallel=true}}W=ab;aA=aC;av=aj.totalFlex;for(X=0;X<aa;X++){au=ak[X];ax=au.flex;aD=ap.roundFlex((ax/av)*aA);aD=au[aw](aD);W+=aD;aA=Math.max(0,aA-aD);av-=ax}if(aq.center){ay+=aA/2;if(ay<0){ay=0}}else{if(aq.end){ay+=aA}}for(X=0;X<ag;++X){au=az[X];ai=au.marginInfo;ay+=ai[an];au.setProp(V.x,ay);ay+=ai[Z]+au.props[ad]}W+=aj.targetContext.getPaddingInfo()[ad];aj.state.contentWidth=W;if(ah&&ah.perpendicular){if(at){W+=aB}aj[V.hasOverflowY]=true;aj.target.componentLayout[V.setWidthInDom]=true;aj[V.invalidateScrollY]=Ext.isIE8}aj[V.setContentWidth](W);return true},calculatePerpendicular:function(au,ac,an){var aw=this,Y=au.state,ar=Y.needsScroll,av=Y.canScroll,aK=au.perpendicularSizeModel.shrinkWrap,aM=an.targetSize,aG=au.childItems,ao=aG.length,aD=Math.max,aE=ac.height,aC=ac.setHeight,aH=ac.beforeY,ax=ac.y,af=aw.padding,aF=af[aH],aB=aM[aE]-aF-af[ac.afterY],ai=au.boxOptions.align,aA=ai.stretch,az=ai.stretchmax,Z=ai.center,aa=ai.bottom,ag=aw.constrainAlign,ah=0,al=0,aj=aw.onBeforeConstrainInvalidateChild,am=aw.onAfterConstrainInvalidateChild,aN=Ext.getScrollbarSize().height,ap,ae,ak,at,aq,aL,ay,aJ,ab,ad,aI;if(!aK&&!aM[ac.gotHeight]){return false}if(aA||((Z||aa)&&!aK)){if(isNaN(aB)){return false}}if(ar&&ar.parallel){if(aK){ad=true}else{aB-=aN;an.targetSize[aE]-=aN}}if(aA){aL=aB;ah=aD(aL,au.smallestHeight)}else{for(ae=0;ae<ao;ae++){ay=aG[ae];at=(ay.marginInfo||ay.getMarginInfo())[aE];if(!(aI=ay.percentagePerpendicular)){ak=ay.getProp(aE)}else{++al;if(aK){continue}else{ak=aI*aB-at;ak=ay[aC](ak)}}if(!aK&&ag&&ay[ac.heightModel].shrinkWrap&&ak>aB){ay.invalidate({before:aj,after:am,layout:aw,childHeight:aB,names:ac});au.state.parallelDone=false}if(isNaN(ah=aD(ah,ak+at,ay.target[ac.minHeight]||0))){return false}}}if(ad){ah+=aN;au[ac.hasOverflowX]=true;au.target.componentLayout[ac.setHeightInDom]=true;au[ac.invalidateScrollX]=Ext.isIE8}aJ=au.stretchMaxPartner;if(aJ){au.setProp("maxChildHeight",ah);ab=aJ.childItems;if(ab&&ab.length){ah=aD(ah,aJ.getProp("maxChildHeight"));if(isNaN(ah)){return false}}}au[ac.setContentHeight](ah+aw.padding[aE]+au.targetContext.getPaddingInfo()[aE]);if(ad){ah-=aN}if(ah>aM[aE]&&av&&av.perpendicular){Y.actualScroll.perpendicular=true}an.maxSize=ah;if(az){aL=ah}else{if(Z||aa||al){if(ag){aL=aK?ah:aB}else{aL=aK?ah:aD(aB,ah)}aL-=au.innerCtContext.getBorderInfo()[aE]}}for(ae=0;ae<ao;ae++){ay=aG[ae];at=ay.marginInfo||ay.getMarginInfo();ap=aF+at[aH];if(aA){ay[aC](aL-at[aE])}else{aI=ay.percentagePerpendicular;if(aK&&aI){at=ay.marginInfo||ay.getMarginInfo();ak=aI*aL-at[aE];ak=ay[aC](ak)}if(Z){aq=aL-ay.props[aE];if(aq>0){ap=aF+Math[aw.alignRoundingMethod](aq/2)}}else{if(aa){ap=aD(0,aL-ap-ay.props[aE])}}}ay.setProp(ax,ap)}return true},onBeforeConstrainInvalidateChild:function(m,n){var l=n.names.heightModel;if(!m[l].constrainedMin){m[l]=Ext.layout.SizeModel.calculated}},onAfterConstrainInvalidateChild:function(m,n){var l=n.names;m.setProp(l.beforeY,0);if(m[l.heightModel].calculated){m[l.setHeight](n.childHeight)}},calculateStretchMax:function(E,y,L){var M=this,A=y.height,K=y.width,B=E.childItems,G=B.length,I=L.maxSize,J=M.onBeforeStretchMaxInvalidateChild,C=M.onAfterStretchMaxInvalidateChild,H,z,D,F;for(D=0;D<G;++D){H=B[D];z=H.props;F=I-H.getMarginInfo()[A];if(F!==z[A]||H[y.heightModel].constrained){H.invalidate({before:J,after:C,layout:M,childWidth:z[K],childHeight:F,childX:z.x,childY:z.y,names:y})}}},onBeforeStretchMaxInvalidateChild:function(m,n){var l=n.names.heightModel;if(!m[l].constrainedMax){m[l]=Ext.layout.SizeModel.calculated}},onAfterStretchMaxInvalidateChild:function(o,p){var n=p.names,s=p.childHeight,q=p.childWidth;o.setProp("x",p.childX);o.setProp("y",p.childY);if(o[n.heightModel].calculated){o[n.setHeight](s)}if(o[n.widthModel].calculated){o[n.setWidth](q)}},completeLayout:function(A){var t=this,u=A.invalidateScrollX,v=A.invalidateScrollY,z=t.overflowHandler,x,B,w,y,C;if(z){z.completeLayout(A)}if(u||v){B=t.getTarget();x=B.dom;C=x.style;if(u){w=B.getStyle("overflowX");if(w==="auto"){w=C.overflowX;C.overflowX="scroll"}else{u=false}}if(v){y=B.getStyle("overflowY");if(y==="auto"){y=C.overflowY;C.overflowY="scroll"}else{v=false}}if(u||v){x.scrollWidth;if(u){C.overflowX=w}if(v){C.overflowY=y}}}},finishedLayout:function(g){var l=this.overflowHandler;if(l){l.finishedLayout(g)}Ext.layout.container.Container.prototype.finishedLayout.call(this,g)},getLayoutItems:function(){var n=Ext.layout.container.Container.prototype.getLayoutItems.call(this),y=n.length,v,w,x,A,t,u,z;for(x=0;x<y;++x){if((A=n[x]).isSplitter){continue}z=A.splitter;if(A.hidden){if(z){if(!z.hidden){z.hidden=true;if(z.el){z.el.hide()}}}continue}if(z){u=z.collapseTarget==="next"}else{u=false}w=null;if(v&&t){if(t.hidden){t.hidden=false;if(t.el){t.el.show()}}if(u){w=true}}else{if(u){w=!v}}if(w!==null&&z.hidden!==w){z.hidden=w;if(z.el){z.el.setVisible(!w)}}t=!u&&z;v=A}if(v&&t&&!t.hidden){t.hidden=true;if(t.el){t.el.hide()}}return n},insertSplitter:function(p,q,u,s){var o={xtype:"splitter",id:p.id+"-splitter",hidden:u,splitterFor:p,synthetic:true},t=q+((s.collapseTarget==="prev")?1:0);o[this.names.height]="100%";if(s){Ext.apply(o,s)}p.splitter=this.owner.add(t,o)},publishInnerCtSize:function(G,E){E=E||0;var z=this,H=G.state,A=G.boxNames,B=A.height,N=A.width,C=G.boxOptions.align,L=z.padding,O=H.boxPlan,D=O.targetSize,J=O.maxSize,M=H.needsScroll,I=G.innerCtContext,F,K;if(G.parallelSizeModel.shrinkWrap||(O.tooNarrow&&H.canScroll)){F=H.contentWidth-G.targetContext.getPaddingInfo()[N]}else{F=D[N];if(M&&M.perpendicular){F-=Ext.getScrollbarSize()[N]}}F-=E;z.owner.tooNarrow=O.tooNarrow;if(C.stretch){K=J}else{K=O.maxSize+L[A.beforeY]+L[A.afterY]+I.getBorderInfo()[B];if(!G.perpendicularSizeModel.shrinkWrap&&(C.center||C.bottom)){K=Math.max(D[B],K)}}I[A.setWidth](F);I[A.setHeight](K);G.targetElContext.setWidth(G.innerCtContext.props.width-(z.vertical?0:(E||0)));if(isNaN(F+K)){z.done=false}},onAdd:function(m,p){var n=this,o=n.enableSplitters&&!m.isButton&&m.split;Ext.layout.container.Container.prototype.onAdd.call(this,m,p);if(o){if(o===true){o={collapseTarget:"next"}}else{if(Ext.isString(o)){o={collapseTarget:o==="before"?"next":"prev"}}else{o=Ext.apply({collapseTarget:o.side==="before"?"next":"prev"},o)}}n.insertSplitter(m,p,!!m.hidden,o)}},onRemove:function(u,q){var y=this,w=y.names,v=y.owner,x=u.splitter,t=y.overflowHandler,s;Ext.layout.container.Container.prototype.onRemove.call(this,u,q);if(x&&v.contains(x)){v.doRemove(x,true);u.splitter=null}if(t){t.onRemove(u)}if(u.layoutMarginCap===y.id){delete u.layoutMarginCap}if(!v.destroying&&!q&&u.rendered){s=u.getEl();if(s){s.setStyle(w.beforeY,"");s.setStyle(w.beforeX,"");s.setStyle("margin","")}}},applyOverflowHandler:function(m,n){var l;if(typeof m==="string"){m={type:m}}l=m.type;if(n&&n.type===m.type){delete m.type;n.setConfig(m);return n}m.layout=this;return Ext.Factory.boxOverflow(m)},getRenderTarget:function(){return this.targetEl},getElementTarget:function(){return this.innerCt},destroy:function(){var f=this;Ext.destroy(f.innerCt,f.overflowHandler);f.flexSortFn=f.innerCt=null;Ext.layout.container.Container.prototype.destroy.call(this)},getRenderData:function(){var f=Ext.layout.container.Container.prototype.getRenderData.call(this);f.targetElCls=this.targetElCls;return f},updateVertical:function(q){var n=this,p=n.overflowHandler,s=n.owner,o=n._props;Ext.apply(n,q?o.vbox:o.hbox);if(p&&s&&s.rendered){p.setVertical(q)}},_props:{hbox:{direction:"horizontal",oppositeDirection:"vertical",horizontal:true,vertical:false,names:{beforeX:"left",beforeScrollX:"left",leftCap:"Left",afterX:"right",width:"width",contentWidth:"contentWidth",minWidth:"minWidth",maxWidth:"maxWidth",widthCap:"Width",widthModel:"widthModel",widthIndex:0,x:"x",getX:"getX",setX:"setX",scrollLeft:"scrollLeft",overflowX:"overflowX",hasOverflowX:"hasOverflowX",invalidateScrollX:"invalidateScrollX",parallelMargins:"lr",center:"middle",beforeY:"top",afterY:"bottom",height:"height",contentHeight:"contentHeight",minHeight:"minHeight",maxHeight:"maxHeight",heightCap:"Height",heightModel:"heightModel",heightIndex:1,y:"y",getY:"getY",setY:"setY",overflowY:"overflowY",hasOverflowY:"hasOverflowY",invalidateScrollY:"invalidateScrollY",perpendicularMargins:"tb",getWidth:"getWidth",getHeight:"getHeight",setWidth:"setWidth",setHeight:"setHeight",gotWidth:"gotWidth",gotHeight:"gotHeight",setContentWidth:"setContentWidth",setContentHeight:"setContentHeight",setWidthInDom:"setWidthInDom",setHeightInDom:"setHeightInDom",getScrollLeft:"getScrollLeft",setScrollLeft:"setScrollLeft",scrollTo:"scrollTo"},sizePolicy:{flex:{"":{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},stretch:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1},stretchmax:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:1}},"":{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},stretch:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},stretchmax:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:1}}},vbox:{direction:"vertical",oppositeDirection:"horizontal",horizontal:false,vertical:true,names:{beforeX:"top",beforeScrollX:"top",leftCap:"Top",afterX:"bottom",width:"height",contentWidth:"contentHeight",minWidth:"minHeight",maxWidth:"maxHeight",widthCap:"Height",widthModel:"heightModel",widthIndex:1,x:"y",getX:"getY",setX:"setY",scrollLeft:"scrollTop",overflowX:"overflowY",hasOverflowX:"hasOverflowY",invalidateScrollX:"invalidateScrollY",parallelMargins:"tb",center:"center",beforeY:"left",afterY:"right",height:"width",contentHeight:"contentWidth",minHeight:"minWidth",maxHeight:"maxWidth",heightCap:"Width",heightModel:"widthModel",heightIndex:0,y:"x",getY:"getX",setY:"setX",overflowY:"overflowX",hasOverflowY:"hasOverflowX",invalidateScrollY:"invalidateScrollX",perpendicularMargins:"lr",getWidth:"getHeight",getHeight:"getWidth",setWidth:"setHeight",setHeight:"setWidth",gotWidth:"gotHeight",gotHeight:"gotWidth",setContentWidth:"setContentHeight",setContentHeight:"setContentWidth",setWidthInDom:"setHeightInDom",setHeightInDom:"setWidthInDom",getScrollLeft:"getScrollTop",setScrollLeft:"setScrollTop",scrollTo:"scrollTo"},sizePolicy:{flex:{"":{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},stretch:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1},stretchmax:{readsWidth:1,readsHeight:0,setsWidth:1,setsHeight:1}},"":{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},stretch:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},stretchmax:{readsWidth:1,readsHeight:1,setsWidth:1,setsHeight:0}}}}},1,0,0,0,["layout.box"],0,[Ext.layout.container,"Box",Ext.layout,"BoxLayout"],0));(Ext.cmd.derive("Ext.layout.container.HBox",Ext.layout.container.Box,{alternateClassName:"Ext.layout.HBoxLayout",type:"hbox",vertical:false},0,0,0,0,["layout.hbox"],0,[Ext.layout.container,"HBox",Ext.layout,"HBoxLayout"],0));(Ext.cmd.derive("Ext.layout.container.VBox",Ext.layout.container.Box,{alternateClassName:"Ext.layout.VBoxLayout",type:"vbox",vertical:true},0,0,0,0,["layout.vbox"],0,[Ext.layout.container,"VBox",Ext.layout,"VBoxLayout"],0));(Ext.cmd.derive("Ext.toolbar.Toolbar",Ext.container.Container,{alternateClassName:"Ext.Toolbar",isToolbar:true,baseCls:"x-toolbar",ariaRole:"toolbar",defaultType:"button",layout:undefined,vertical:undefined,enableOverflow:false,overflowHandler:null,defaultButtonUI:"default-toolbar",defaultFieldUI:"default",defaultFooterButtonUI:"default",defaultFooterFieldUI:"default",trackMenus:true,itemCls:"x-toolbar-item",statics:{shortcuts:{"-":"tbseparator"," ":"tbspacer"},shortcutsHV:{0:{"->":{xtype:"tbfill",height:0}},1:{"->":{xtype:"tbfill",width:0}}}},initComponent:function(){var l=this,m=l.layout,n=l.vertical;if(n===undefined){l.vertical=n=l.dock==="right"||l.dock==="left"}l.layout=m=Ext.applyIf(Ext.isString(m)?{type:m}:m||{},{type:n?"vbox":"hbox",align:n?"stretchmax":"middle"});if(l.overflowHandler){m.overflowHandler=l.overflowHandler}else{if(l.enableOverflow){m.overflowHandler="menu"}}if(n){l.addClsWithUI("vertical")}if(l.ui==="footer"){l.ignoreBorderManagement=true}Ext.container.Container.prototype.initComponent.call(this)},getRefItems:function(s){var n=this,q=Ext.container.Container.prototype.getRefItems.apply(this,arguments),o=n.layout,p;if(s&&(n.enableOverflow||(n.overflowHandler==="menu"))){p=o.overflowHandler;if(p&&p.menu){q=q.concat(p.menu.getRefItems(s))}}return q},lookupComponent:function(m){var n=arguments,p,o;if(typeof m==="string"&&m[0]!=="@"){o=Ext.toolbar.Toolbar;p=o.shortcutsHV[this.vertical?1:0][m]||o.shortcuts[m];if(typeof p==="string"){m={xtype:p}}else{if(p){m=Ext.apply({},p)}else{m={xtype:"tbtext",text:m}}}this.applyDefaults(m);n=[m]}return Ext.container.Container.prototype.lookupComponent.apply(this,n)},onBeforeAdd:function(o){var n=this,m=n.ui==="footer",p=m?n.defaultFooterButtonUI:n.defaultButtonUI;if(o.isSegmentedButton){if(o.getDefaultUI()==="default"&&!o.config.hasOwnProperty("defaultUI")){o.setDefaultUI(p)}}else{if(o.ui==="default"&&!o.hasOwnProperty("ui")){if(o.isButton){o.ui=p}else{if(o.isFormField){o.ui=m?n.defaultFooterFieldUI:n.defaultFieldUI}}}}if(o instanceof Ext.toolbar.Separator){o.setUI(n.vertical?"vertical":"horizontal")}Ext.container.Container.prototype.onBeforeAdd.apply(this,arguments)},onAdd:function(l){var g=this;if(l.needArrowKeys&&g.enableFocusableContainer){g.enableFocusableContainer=false;g.ariaRole="group"}Ext.container.Container.prototype.onAdd.apply(this,arguments);g.trackMenu(l)},onRemove:function(f){Ext.container.Container.prototype.onRemove.apply(this,arguments);this.trackMenu(f,true)},privates:{applyDefaults:function(f){if(!Ext.isString(f)){f=Ext.container.Container.prototype.applyDefaults.apply(this,arguments)}return f},trackMenu:function(l,n){var m=this;if(m.trackMenus&&l.menu){l[n?"un":"on"]({mouseover:m.onButtonOver,menushow:m.onButtonMenuShow,menuhide:m.onButtonMenuHide,scope:m})}},getChildItemsToDisable:function(){return this.items.getRange()},onButtonOver:function(m,e){var n=this.activeMenuBtn;if(n&&n!==m){n.hideMenu();m.focus();m.showMenu(e);this.activeMenuBtn=m}},onButtonMenuShow:function(f){this.activeMenuBtn=f},onButtonMenuHide:function(f){this.activeMenuBtn=null}}},0,["toolbar"],["component","box","container","toolbar"],{component:true,box:true,container:true,toolbar:true},["widget.toolbar"],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.toolbar,"Toolbar",Ext,"Toolbar"],0));Ext.define("Ext.theme.neptune.toolbar.Toolbar",{override:"Ext.toolbar.Toolbar",usePlainButtons:false,border:false});(Ext.cmd.derive("Ext.dd.DragDrop",Ext.Base,{constructor:function(l,n,m){if(l){this.init(l,n,m)}},id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:false,lock:function(){this.locked=true},moveOnly:false,unlock:function(){this.locked=false},isTarget:true,padding:null,_domRef:null,__ygDragDrop:true,constrainX:false,constrainY:false,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:false,xTicks:null,yTicks:null,primaryButtonOnly:true,available:false,hasOuterHandles:false,triggerEvent:"mousedown",b4StartDrag:function(l,g){},startDrag:function(l,g){},b4Drag:function(e){},onDrag:function(e){},onDragEnter:function(l,e){},b4DragOver:function(e){},onDragOver:function(l,e){},b4DragOut:function(e){},onDragOut:function(l,e){},b4DragDrop:function(e){},onDragDrop:function(l,e){},onInvalidDrop:function(e){},b4EndDrag:function(e){},endDrag:function(e){},b4MouseDown:function(e){},onMouseDown:function(e){},onMouseUp:function(e){},onAvailable:function(){},defaultPadding:{left:0,right:0,top:0,bottom:0},constrainTo:function(z,B,E){if(Ext.isNumber(B)){B={left:B,right:B,top:B,bottom:B}}B=B||this.defaultPadding;var x=Ext.get(this.getEl()).getBox(),D=Ext.get(z),s=D.getScroll(),y,w=D.dom,v,A,C;if(w===document.body){y={x:s.left,y:s.top,width:Ext.Element.getViewportWidth(),height:Ext.Element.getViewportHeight()}}else{v=D.getXY();y={x:v[0],y:v[1],width:w.clientWidth,height:w.clientHeight}}A=x.y-y.y;C=x.x-y.x;this.resetConstraints();this.setXConstraint(C-(B.left||0),y.width-C-x.width-(B.right||0),this.xTickSize);this.setYConstraint(A-(B.top||0),y.height-A-x.height-(B.bottom||0),this.yTickSize)},getEl:function(){if(!this._domRef){this._domRef=Ext.getDom(this.id)}return this._domRef},getDragEl:function(){return Ext.getDom(this.dragElId)},init:function(m,p,o){var n=this;n.el=n.el||Ext.get(m);n.initTarget(m,p,o);Ext.get(n.id).on(n.triggerEvent,n.handleMouseDown,n);if(Ext.supports.Touch&&n.triggerEvent==="longpress"){Ext.get(n.id).swallowEvent("contextmenu",true)}},initTarget:function(l,n,m){this.config=m||{};this.DDMInstance=Ext.dd.DragDropManager;this.groups={};if(typeof l!=="string"){l=Ext.id(l)}this.id=l;this.addToGroup((n)?n:"default");this.handleElId=l;this.setDragElId(l);this.invalidHandleTypes={A:"A"};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig();this.handleOnAvailable()},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0];this.isTarget=(this.config.isTarget!==false);this.maintainOffset=(this.config.maintainOffset);this.primaryButtonOnly=(this.config.primaryButtonOnly!==false)},handleOnAvailable:function(){this.available=true;this.resetConstraints();this.onAvailable()},setPadding:function(n,p,m,o){if(!p&&0!==p){this.padding=[n,n,n,n]}else{if(!m&&0!==m){this.padding=[n,p,n,p]}else{this.padding=[n,p,m,o]}}},setInitPosition:function(p,q){var o=this.getEl(),s,t,u;if(!this.DDMInstance.verifyEl(o)){return}s=p||0;t=q||0;u=Ext.fly(o).getXY();this.initPageX=u[0]-s;this.initPageY=u[1]-t;this.lastPageX=u[0];this.lastPageY=u[1];this.setStartPosition(u)},setStartPosition:function(g){var l=g||Ext.fly(this.getEl()).getXY();this.deltaSetXY=null;this.startPageX=l[0];this.startPageY=l[1]},addToGroup:function(f){this.groups[f]=true;this.DDMInstance.regDragDrop(this,f)},removeFromGroup:function(f){if(this.groups[f]){delete this.groups[f]}this.DDMInstance.removeDDFromGroup(this,f)},setDragElId:function(f){this.dragElId=f},setHandleElId:function(f){if(typeof f!=="string"){f=Ext.id(f)}this.handleElId=f;this.DDMInstance.regHandle(this.id,f)},setOuterHandleElId:function(f){if(typeof f!=="string"){f=Ext.id(f)}Ext.get(f).on(this.triggerEvent,this.handleMouseDown,this);this.setHandleElId(f);this.hasOuterHandles=true},unreg:function(){var g=this,l;if(g._domRef){l=Ext.fly(g.id);if(l){l.un(g.triggerEvent,g.handleMouseDown,g)}}g._domRef=null;g.DDMInstance._remove(g,g.autoGroup)},destroy:function(){this.unreg();this.callParent()},isLocked:function(){return(this.DDMInstance.isLocked()||this.locked)},handleMouseDown:function(e,m){var n=this;if((n.primaryButtonOnly&&e.button)||n.isLocked()){return}n.DDMInstance.refreshCache(n.groups);if(n.hasOuterHandles||n.DDMInstance.isOverTarget(e.getPoint(),n)){if(n.clickValidator(e)){n.setStartPosition();n.b4MouseDown(e);n.onMouseDown(e);n.DDMInstance.handleMouseDown(e,n);n.DDMInstance.stopEvent(e)}}},clickValidator:function(e){var l=e.getTarget();return(this.isValidHandleChild(l)&&(this.id===this.handleElId||this.DDMInstance.handleWasClicked(l,this.id)))},addInvalidHandleType:function(l){var g=l.toUpperCase();this.invalidHandleTypes[g]=g},addInvalidHandleId:function(f){if(typeof f!=="string"){f=Ext.id(f)}this.invalidHandleIds[f]=f},addInvalidHandleClass:function(f){this.invalidHandleClasses.push(f)},removeInvalidHandleType:function(l){var g=l.toUpperCase();delete this.invalidHandleTypes[g]},removeInvalidHandleId:function(f){if(typeof f!=="string"){f=Ext.id(f)}delete this.invalidHandleIds[f]},removeInvalidHandleClass:function(o){var m=this.invalidHandleClasses,p=m.length,n;for(n=0;n<p;++n){if(m[n]===o){delete m[n]}}},isValidHandleChild:function(e){var p=true,t,q,s;try{t=e.nodeName.toUpperCase()}catch(u){t=e.nodeName}p=p&&!this.invalidHandleTypes[t];p=p&&!this.invalidHandleIds[e.id];for(q=0,s=this.invalidHandleClasses.length;p&&q<s;++q){p=!Ext.fly(e).hasCls(this.invalidHandleClasses[q])}return p},setXTicks:function(m,p){this.xTicks=[];this.xTickSize=p;var n={},o;for(o=this.initPageX;o>=this.minX;o=o-p){if(!n[o]){this.xTicks[this.xTicks.length]=o;n[o]=true}}for(o=this.initPageX;o<=this.maxX;o=o+p){if(!n[o]){this.xTicks[this.xTicks.length]=o;n[o]=true}}Ext.Array.sort(this.xTicks,this.DDMInstance.numericSort)},setYTicks:function(m,p){this.yTicks=[];this.yTickSize=p;var n={},o;for(o=this.initPageY;o>=this.minY;o=o-p){if(!n[o]){this.yTicks[this.yTicks.length]=o;n[o]=true}}for(o=this.initPageY;o<=this.maxY;o=o+p){if(!n[o]){this.yTicks[this.yTicks.length]=o;n[o]=true}}Ext.Array.sort(this.yTicks,this.DDMInstance.numericSort)},setXConstraint:function(l,m,n){this.leftConstraint=l;this.rightConstraint=m;this.minX=this.initPageX-l;this.maxX=this.initPageX+m;if(n){this.setXTicks(this.initPageX,n)}this.constrainX=true},clearConstraints:function(){this.constrainX=false;this.constrainY=false;this.clearTicks()},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0},setYConstraint:function(n,l,m){this.topConstraint=n;this.bottomConstraint=l;this.minY=this.initPageY-n;this.maxY=this.initPageY+l;if(m){this.setYTicks(this.initPageY,m)}this.constrainY=true},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var g=(this.maintainOffset)?this.lastPageX-this.initPageX:0,l=(this.maintainOffset)?this.lastPageY-this.initPageY:0;this.setInitPosition(g,l)}else{this.setInitPosition()}if(this.constrainX){this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize)}if(this.constrainY){this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)}},getTick:function(v,q){if(!q){return v}else{if(q[0]>=v){return q[0]}else{var t,u,s,w,p;for(t=0,u=q.length;t<u;++t){s=t+1;if(q[s]&&q[s]>=v){w=v-q[t];p=q[s]-v;return(p>w)?q[t]:q[s]}}return q[q.length-1]}}},toString:function(){return("DragDrop "+this.id)}},3,0,0,0,0,0,[Ext.dd,"DragDrop"],0));(Ext.cmd.derive("Ext.dd.DD",Ext.dd.DragDrop,{constructor:function(l,n,m){if(l){this.init(l,n,m)}},scroll:true,autoOffset:function(n,o){var p=n-this.startPageX,m=o-this.startPageY;this.setDelta(p,m)},setDelta:function(g,l){this.deltaX=g;this.deltaY=l},setDragElPos:function(l,m){var n=this.getDragEl();this.alignElWithMouse(n,l,m)},alignElWithMouse:function(B,y,A){var x=this.getTargetCoord(y,A),z=B.dom?B:Ext.fly(B,"_dd"),D=z.getSize(),v=Ext.Element,u,C,E,w;if(!this.deltaSetXY){u=this.cachedViewportSize={width:v.getDocumentWidth(),height:v.getDocumentHeight()};C=[Math.max(0,Math.min(x.x,u.width-D.width)),Math.max(0,Math.min(x.y,u.height-D.height))];z.setXY(C);E=this.getLocalX(z);w=z.getLocalY();this.deltaSetXY=[E-x.x,w-x.y]}else{u=this.cachedViewportSize;this.setLocalXY(z,Math.max(0,Math.min(x.x+this.deltaSetXY[0],u.width-D.width)),Math.max(0,Math.min(x.y+this.deltaSetXY[1],u.height-D.height)))}this.cachePosition(x.x,x.y);this.autoScroll(x.x,x.y,B.offsetHeight,B.offsetWidth);return x},cachePosition:function(m,n){if(m){this.lastPageX=m;this.lastPageY=n}else{var l=Ext.fly(this.getEl()).getXY();this.lastPageX=l[0];this.lastPageY=l[1]}},autoScroll:function(K,w,B,J){if(this.scroll){var I=Ext.Element.getViewportHeight(),E=Ext.Element.getViewportWidth(),G=this.DDMInstance.getScrollTop(),C=this.DDMInstance.getScrollLeft(),x=B+w,H=J+K,y=(I+G-w-this.deltaY),A=(E+C-K-this.deltaX),D=40,F=(document.all)?80:30;if(x>I&&y<D){window.scrollTo(C,G+F)}if(w<G&&G>0&&w-G<D){window.scrollTo(C,G-F)}if(H>E&&A<D){window.scrollTo(C+F,G)}if(K<C&&C>0&&K-C<D){window.scrollTo(C-F,G)}}},getTargetCoord:function(n,o){var p=n-this.deltaX,m=o-this.deltaY;if(this.constrainX){if(p<this.minX){p=this.minX}if(p>this.maxX){p=this.maxX}}if(this.constrainY){if(m<this.minY){m=this.minY}if(m>this.maxY){m=this.maxY}}p=this.getTick(p,this.xTicks);m=this.getTick(m,this.yTicks);return{x:p,y:m}},applyConfig:function(){Ext.dd.DragDrop.prototype.applyConfig.call(this);this.scroll=(this.config.scroll!==false)},b4MouseDown:function(e){var l=e.getXY();this.autoOffset(l[0],l[1])},b4Drag:function(e){var l=e.getXY();this.setDragElPos(l[0],l[1])},toString:function(){return("DD "+this.id)},getLocalX:function(f){return f.getLocalX()},setLocalXY:function(m,n,l){m.setLocalXY(n,l)}},3,0,0,0,0,0,[Ext.dd,"DD"],0));(Ext.cmd.derive("Ext.dd.DDProxy",Ext.dd.DD,{statics:{dragElId:"ygddfdiv"},constructor:function(l,n,m){if(l){this.init(l,n,m);this.initFrame()}},resizeFrame:true,centerFrame:false,createFrame:function(){var o=this,p=document.body,m,n;if(!p||!p.firstChild){Ext.defer(function(){o.createFrame()},50);return}m=this.getDragEl();if(!m){m=document.createElement("div");m.id=this.dragElId;m.setAttribute("role","presentation");n=m.style;n.position="absolute";n.visibility="hidden";n.cursor="move";n.border="2px solid #aaa";n.zIndex=999;p.insertBefore(m,p.firstChild)}},initFrame:function(){this.createFrame()},applyConfig:function(){Ext.dd.DD.prototype.applyConfig.call(this);this.resizeFrame=(this.config.resizeFrame!==false);this.centerFrame=(this.config.centerFrame);this.setDragElId(this.config.dragElId||Ext.dd.DDProxy.dragElId)},showFrame:function(n,o){var p=this,s=p.getDragEl(),q=s.style;p._resizeProxy();if(p.centerFrame){p.setDelta(Math.round(parseInt(q.width,10)/2),Math.round(parseInt(q.height,10)/2))}p.setDragElPos(n,o);Ext.fly(s).show()},_resizeProxy:function(){if(this.resizeFrame){var f=this.getEl();Ext.fly(this.getDragEl()).setSize(f.offsetWidth,f.offsetHeight)}},b4MouseDown:function(n){var o=n.getXY(),p=o[0],e=o[1];this.autoOffset(p,e);this.setDragElPos(p,e)},b4StartDrag:function(l,g){this.showFrame(l,g)},b4EndDrag:function(e){Ext.fly(this.getDragEl()).hide()},endDrag:function(e){var m=this.getEl(),n=this.getDragEl();n.style.visibility="";this.beforeMove();m.style.visibility="hidden";Ext.dd.DDM.moveToEl(m,n);n.style.visibility="hidden";m.style.visibility="";this.afterDrag()},beforeMove:function(){},afterDrag:function(){},toString:function(){return("DDProxy "+this.id)}},3,0,0,0,0,0,[Ext.dd,"DDProxy"],0));(Ext.cmd.derive("Ext.dd.StatusProxy",Ext.Component,{animRepair:false,childEls:["ghost"],renderTpl:['<div class="x-dd-drop-icon" role="presentation"></div><div id="{id}-ghost" data-ref="ghost" class="x-dd-drag-ghost" role="presentation"></div>'],repairCls:"x-dd-drag-repair",ariaRole:"presentation",skipLayout:true,alignOnScroll:false,constructor:function(l){var g=this;l=l||{};Ext.apply(g,{hideMode:"visibility",hidden:true,floating:true,id:g.id||Ext.id(),cls:"x-dd-drag-proxy "+this.dropNotAllowed,shadow:l.shadow||false,renderTo:Ext.getDetachedBody()});Ext.Component.prototype.constructor.apply(this,arguments);this.dropStatus=this.dropNotAllowed},dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",setStatus:function(f){f=f||this.dropNotAllowed;if(this.dropStatus!==f){this.el.replaceCls(this.dropStatus,f);this.dropStatus=f}},reset:function(m){var l=this,n="x-dd-drag-proxy ";l.el.replaceCls(n+l.dropAllowed,n+l.dropNotAllowed);l.dropStatus=l.dropNotAllowed;if(m){l.ghost.setHtml("")}},update:function(l){if(typeof l==="string"){this.ghost.setHtml(l)}else{this.ghost.setHtml("");l.style.margin="0";this.ghost.dom.appendChild(l)}var g=this.ghost.dom.firstChild;if(g){Ext.fly(g).setStyle("float","none")}},getGhost:function(){return this.ghost},hide:function(f){Ext.Component.prototype.hide.call(this);if(f){this.reset(true)}},stop:function(){if(this.anim&&this.anim.isAnimated&&this.anim.isAnimated()){this.anim.stop()}},sync:function(){this.el.syncUnderlays()},repair:function(n,m,p){var o=this;o.callback=m;o.scope=p;if(n&&o.animRepair!==false){o.el.addCls(o.repairCls);o.el.setUnderlaysVisible(false);o.anim=o.el.animate({duration:o.repairDuration||500,easing:"ease-out",to:{x:n[0],y:n[1]},stopAnimation:true,callback:o.afterRepair,scope:o})}else{o.afterRepair()}},afterRepair:function(){var f=this;f.hide(true);f.el.removeCls(f.repairCls);if(typeof f.callback==="function"){f.callback.call(f.scope||f)}delete f.callback;delete f.scope}},1,0,["component","box"],{component:true,box:true},0,0,[Ext.dd,"StatusProxy"],0));(Ext.cmd.derive("Ext.dd.DragSource",Ext.dd.DDProxy,{dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",animRepair:true,repairHighlightColor:"c3daf9",constructor:function(g,l){this.el=Ext.get(g);if(!this.dragData){this.dragData={}}Ext.apply(this,l);if(!this.proxy){this.proxy=new Ext.dd.StatusProxy({id:this.el.id+"-drag-status-proxy",animRepair:this.animRepair})}Ext.dd.DDProxy.prototype.constructor.call(this,this.el.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:false,isTarget:false,scroll:this.scroll===true});this.dragging=false},getDragData:function(e){return this.dragData},onDragEnter:function(n,e){var o=Ext.dd.DragDropManager.getDDById(e),p;this.cachedTarget=o;if(this.beforeDragEnter(o,n,e)!==false){if(o.isNotifyTarget){p=o.notifyEnter(this,n,this.dragData);this.proxy.setStatus(p)}else{this.proxy.setStatus(this.dropAllowed)}if(this.afterDragEnter){this.afterDragEnter(o,n,e)}}},beforeDragEnter:function(m,n,e){return true},onDragOver:function(n,e){var o=this.cachedTarget||Ext.dd.DragDropManager.getDDById(e),p;if(this.beforeDragOver(o,n,e)!==false){if(o.isNotifyTarget){p=o.notifyOver(this,n,this.dragData);this.proxy.setStatus(p)}if(this.afterDragOver){this.afterDragOver(o,n,e)}}},beforeDragOver:function(m,n,e){return true},onDragOut:function(m,e){var n=this.cachedTarget||Ext.dd.DragDropManager.getDDById(e);if(this.beforeDragOut(n,m,e)!==false){if(n.isNotifyTarget){n.notifyOut(this,m,this.dragData)}this.proxy.reset();if(this.afterDragOut){this.afterDragOut(n,m,e)}}this.cachedTarget=null},beforeDragOut:function(m,n,e){return true},onDragDrop:function(m,e){var n=this.cachedTarget||Ext.dd.DragDropManager.getDDById(e);if(this.beforeDragDrop(n,m,e)!==false){if(n.isNotifyTarget){if(n.notifyDrop(this,m,this.dragData)!==false){this.onValidDrop(n,m,e)}else{this.onInvalidDrop(n,m,e)}}else{this.onValidDrop(n,m,e)}if(this.afterDragDrop){this.afterDragDrop(n,m,e)}}delete this.cachedTarget},beforeDragDrop:function(m,n,e){return true},onValidDrop:function(m,n,e){this.hideProxy();if(this.afterValidDrop){this.afterValidDrop(m,n,e)}},getRepairXY:function(e,l){return this.el.getXY()},onInvalidDrop:function(n,o,e){var p=this;if(!o){o=n;n=null;e=o.getTarget().id}if(p.beforeInvalidDrop(n,o,e)!==false){if(p.cachedTarget){if(p.cachedTarget.isNotifyTarget){p.cachedTarget.notifyOut(p,o,p.dragData)}p.cacheTarget=null}p.proxy.repair(p.getRepairXY(o,p.dragData),p.afterRepair,p);if(p.afterInvalidDrop){p.afterInvalidDrop(o,e)}}},afterRepair:function(){var f=this;if(Ext.enableFx){f.el.highlight(f.repairHighlightColor)}f.dragging=false},beforeInvalidDrop:function(m,n,e){return true},handleMouseDown:function(e){if(this.dragging){return}var l=this.getDragData(e);if(l&&this.onBeforeDrag(l,e)!==false){this.dragData=l;this.proxy.stop();Ext.dd.DDProxy.prototype.handleMouseDown.apply(this,arguments)}},onBeforeDrag:function(l,e){return true},onStartDrag:Ext.emptyFn,alignElWithMouse:function(){this.proxy.ensureAttachedToBody(true);return Ext.dd.DDProxy.prototype.alignElWithMouse.apply(this,arguments)},startDrag:function(l,g){this.proxy.reset();this.proxy.hidden=false;this.dragging=true;this.proxy.update("");this.onInitDrag(l,g);this.proxy.show()},onInitDrag:function(n,l){var m=this.el.dom.cloneNode(true);m.id=Ext.id();this.proxy.update(m);this.onStartDrag(n,l);return true},getProxy:function(){return this.proxy},hideProxy:function(){this.proxy.hide();this.proxy.reset(true);this.dragging=false},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)},b4EndDrag:function(e){},endDrag:function(e){this.onEndDrag(this.dragData,e)},onEndDrag:function(l,e){},autoOffset:function(l,g){this.setDelta(-12,-20)},destroy:function(){Ext.destroy(this.proxy);Ext.dd.DDProxy.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.dd,"DragSource"],0));(Ext.cmd.derive("Ext.panel.Proxy",Ext.Base,{alternateClassName:"Ext.dd.PanelProxy",moveOnDrag:true,constructor:function(n,m){var l=this;l.panel=n;l.id=l.panel.id+"-ddproxy";Ext.apply(l,m)},insertProxy:true,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost.el},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){var f=this;if(f.ghost){if(f.proxy){f.proxy.destroy();delete f.proxy}f.panel.unghost(null,f.moveOnDrag);delete f.ghost}},show:function(){var g=this,l;if(!g.ghost){l=g.panel.getSize();g.panel.el.setVisibilityMode(Ext.Element.DISPLAY);g.ghost=g.panel.ghost();if(g.insertProxy){g.proxy=g.panel.el.insertSibling({role:"presentation",cls:"x-panel-dd-spacer"});g.proxy.setSize(l)}}},repair:function(m,l,n){this.hide();Ext.callback(l,n||this)},moveProxy:function(l,g){if(this.proxy){l.insertBefore(this.proxy.dom,g)}}},1,0,0,0,0,0,[Ext.panel,"Proxy",Ext.dd,"PanelProxy"],0));(Ext.cmd.derive("Ext.panel.DD",Ext.dd.DragSource,{constructor:function(m,n){var l=this;l.panel=m;l.dragData={panel:m};l.panelProxy=new Ext.panel.Proxy(m,n);l.proxy=l.panelProxy.proxy;Ext.dd.DragSource.prototype.constructor.call(this,m.el,n);l.setupEl(m)},setupEl:function(p){var n=this,m=p.header,o=p.body;if(m){n.setHandleElId(m.id);o=m.el}if(o){o.setStyle("cursor","move");n.scroll=false}else{p.on("boxready",n.setupEl,n,{single:true})}},showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(l,g){this.panelProxy.show()},b4MouseDown:function(n){var o=n.getXY(),p=o[0],e=o[1];this.autoOffset(p,e)},onInitDrag:function(l,g){this.onStartDrag(l,g);return true},createFrame:Ext.emptyFn,getDragEl:function(e){var l=this.panelProxy.ghost;if(l){return l.el.dom}},endDrag:function(e){this.panelProxy.hide();this.panel.saveState()},autoOffset:function(l,g){l-=this.startPageX;g-=this.startPageY;this.setDelta(l,g)},onInvalidDrop:function(n,o,e){var p=this;if(p.beforeInvalidDrop(n,o,e)!==false){if(p.cachedTarget){if(p.cachedTarget.isNotifyTarget){p.cachedTarget.notifyOut(p,o,p.dragData)}p.cacheTarget=null}if(p.afterInvalidDrop){p.afterInvalidDrop(o,e)}}}},1,0,0,0,0,0,[Ext.panel,"DD"],0));(Ext.cmd.derive("Ext.layout.component.Dock",Ext.layout.component.Component,{alternateClassName:"Ext.layout.component.AbstractDock",type:"dock",horzAxisProps:{name:"horz",oppositeName:"vert",dockBegin:"left",dockEnd:"right",horizontal:true,marginBegin:"margin-left",maxSize:"maxWidth",minSize:"minWidth",pos:"x",setSize:"setWidth",shrinkWrapDock:"shrinkWrapDockWidth",size:"width",sizeModel:"widthModel"},vertAxisProps:{name:"vert",oppositeName:"horz",dockBegin:"top",dockEnd:"bottom",horizontal:false,marginBegin:"margin-top",maxSize:"maxHeight",minSize:"minHeight",pos:"y",setSize:"setHeight",shrinkWrapDock:"shrinkWrapDockHeight",size:"height",sizeModel:"heightModel"},initializedBorders:-1,horizontalCollapsePolicy:{width:true,x:true},verticalCollapsePolicy:{height:true,y:true},finishRender:function(){var m=this,l,n;Ext.layout.component.Component.prototype.finishRender.call(this);l=m.getRenderTarget();n=m.getDockedItems();m.finishRenderItems(l,n)},isItemBoxParent:function(f){return true},isItemShrinkWrap:function(f){return true},noBorderClasses:["x-docked-noborder-top","x-docked-noborder-right","x-docked-noborder-bottom","x-docked-noborder-left"],noBorderClassesSides:{top:"x-docked-noborder-top",right:"x-docked-noborder-right",bottom:"x-docked-noborder-bottom",left:"x-docked-noborder-left"},borderWidthProps:{top:"border-top-width",right:"border-right-width",bottom:"border-bottom-width",left:"border-left-width"},_itemCls:"x-docked",handleItemBorders:function(){var L=this,G=L.owner,M,H,A=L.lastDockedItems,B=L.borders,F=G.dockedItems.generation,E=L.noBorderClassesSides,K=L.borderWidthProps,C,y,I,J,z,D=L.collapsed;if(L.initializedBorders===F||(G.border&&!G.manageBodyBorders)||(G.collapsed&&G.collapseMode==="mini")){return}L.initializedBorders=F;L.collapsed=false;L.lastDockedItems=H=L.getLayoutItems();L.collapsed=D;M={top:[],right:[],bottom:[],left:[]};for(C=0,y=H.length;C<y;C++){I=H[C];J=I.dock;if(I.ignoreBorderManagement){continue}if(!M[J].satisfied){M[J].push(I);M[J].satisfied=true}if(!M.top.satisfied&&J!=="bottom"){M.top.push(I)}if(!M.right.satisfied&&J!=="left"){M.right.push(I)}if(!M.bottom.satisfied&&J!=="top"){M.bottom.push(I)}if(!M.left.satisfied&&J!=="right"){M.left.push(I)}}if(A){for(C=0,y=A.length;C<y;C++){I=A[C];if(!I.destroyed&&!I.ignoreBorderManagement&&!G.manageBodyBorders){I.removeCls(L.noBorderClasses)}}}if(B){for(z in B){if(G.manageBodyBorders&&B[z].satisfied){G.setBodyStyle(K[z],"")}}}for(z in M){y=M[z].length;if(!G.manageBodyBorders){for(C=0;C<y;C++){M[z][C].addCls(E[z])}if((!M[z].satisfied&&!G.bodyBorder)||G.bodyBorder===false){G.addBodyCls(E[z])}else{G.removeBodyCls(E[z])}}else{if(M[z].satisfied){G.setBodyStyle(K[z],"1px")}}}L.borders=M},beforeLayoutCycle:function(w){var s=this,t=s.owner,v=s.sizeModels.shrinkWrap,p=t.shrinkWrapDock,q,u;if(t.collapsed){if(t.collapsedVertical()){u=true;w.measureDimensions=1}else{q=true;w.measureDimensions=2}}w.collapsedVert=u;w.collapsedHorz=q;if(u){w.heightModel=v}else{if(q){w.widthModel=v}}p=p===true?3:(p||0);w.shrinkWrapDockHeight=(p&1)&&w.heightModel.shrinkWrap;w.shrinkWrapDockWidth=(p&2)&&w.widthModel.shrinkWrap},beginLayout:function(C){var K=this,D=K.owner,G=K.getLayoutItems(),E=C.context,A=G.length,x=K.lastCollapsedState,J,y,H,F,B,z,I;Ext.layout.component.Component.prototype.beginLayout.apply(this,arguments);z=D.getCollapsed();if(z!==x&&x!==undefined){if(K.owner.collapsed){C.isCollapsingOrExpanding=1;D.addClsWithUI(D.collapsedCls)}else{C.isCollapsingOrExpanding=2;D.removeClsWithUI(D.collapsedCls);C.lastCollapsedState=K.lastCollapsedState}}K.lastCollapsedState=z;C.dockedItems=J=[];for(y=0;y<A;y++){H=G[y];if(H.rendered){I=H.dock;F=E.getCmp(H);F.dockedAt={x:0,y:0};F.offsets=B=Ext.Element.parseBox(H.offsets||0);F.horizontal=I==="top"||I==="bottom";B.width=B.left+B.right;B.height=B.top+B.bottom;J.push(F)}}C.bodyContext=C.getEl("body")},beginLayoutCycle:function(A){var x=this,C=A.dockedItems,y=C.length,B=x.owner,w=B.frameBody,t=x.lastHeightModel,z,u,v;Ext.layout.component.Component.prototype.beginLayoutCycle.apply(this,arguments);if(x.owner.manageHeight){if(x.lastBodyDisplay){B.body.dom.style.display=x.lastBodyDisplay=""}}else{if(x.lastBodyDisplay!=="inline-block"){B.body.dom.style.display=x.lastBodyDisplay="inline-block"}if(t&&t.shrinkWrap&&!A.heightModel.shrinkWrap){B.body.dom.style.marginBottom=""}}if(A.widthModel.auto){if(A.widthModel.shrinkWrap){B.el.setWidth(null)}B.body.setWidth(null);if(w){w.setWidth(null)}}if(A.heightModel.auto){B.body.setHeight(null);if(w){w.setHeight(null)}}if(A.collapsedVert){A.setContentHeight(0)}else{if(A.collapsedHorz){A.setContentWidth(0)}}for(z=0;z<y;z++){u=C[z].target;v=u.dock;if(v==="right"){u.setLocalX(0)}else{if(v!=="left"){continue}}}},calculate:function(A){var F=this,B=F.measureAutoDimensions(A,A.measureDimensions),C=A.state,G=C.horzDone,z=C.vertDone,y=A.bodyContext,v,D,w,x,E;A.borderInfo||A.getBorderInfo();A.paddingInfo||A.getPaddingInfo();A.frameInfo||A.getFrameInfo();y.borderInfo||y.getBorderInfo();y.paddingInfo||y.getPaddingInfo();if(!A.frameBorder){if(!(v=A.framing)){A.frameBorder=A.borderInfo;A.framePadding=A.paddingInfo}else{A.frameBorder=v.border;A.framePadding=v.padding}}D=!G&&F.createAxis(A,B.contentWidth,A.widthModel,F.horzAxisProps,A.collapsedHorz);w=!z&&F.createAxis(A,B.contentHeight,A.heightModel,F.vertAxisProps,A.collapsedVert);for(x=0,E=A.dockedItems.length;E--;++x){if(D){F.dockChild(A,D,E,x)}if(w){F.dockChild(A,w,E,x)}}if(D&&F.finishAxis(A,D)){C.horzDone=G=D}if(w&&F.finishAxis(A,w)){C.vertDone=z=w}if(G&&z&&F.finishConstraints(A,G,z)){F.finishPositions(A,G,z)}else{F.done=false}},createAxis:function(F,N,S,I,T){var L=this,M=0,V=L.owner,R=V[I.maxSize],U=V[I.minSize]||0,H=I.dockBegin,P=I.dockEnd,D=I.pos,J=I.size,K=R!=null,G=S.shrinkWrap,W,O,E,Q;if(G){if(T){Q=0}else{W=F.bodyContext;Q=N+W.borderInfo[J]}}else{O=F.frameBorder;E=F.framePadding;M=O[H]+E[H];Q=F.getProp(J)-(O[P]+E[P])}return{shrinkWrap:S.shrinkWrap,sizeModel:S,initialBegin:M,begin:M,end:Q,collapsed:T,horizontal:I.horizontal,ignoreFrameBegin:null,ignoreFrameEnd:null,initialSize:Q-M,maxChildSize:0,hasMinMaxConstraints:(U||K)&&S.shrinkWrap,minSize:U,maxSize:K?R:1000000000,bodyPosProp:L.owner.manageHeight?D:I.marginBegin,dockBegin:H,dockEnd:P,posProp:D,sizeProp:J,setSize:I.setSize,shrinkWrapDock:F[I.shrinkWrapDock],sizeModelName:I.sizeModel,dockedPixelsEnd:0}},dockChild:function(B,A,D,y){var x=this,C=B.dockedItems[A.shrinkWrap?D:y],v=C.target,u=v.dock,z=A.sizeProp,w,E;if(v.ignoreParentFrame&&B.isCollapsingOrExpanding){C.clearMarginCache()}if(!C.marginInfo){C.getMarginInfo()}if(u===A.dockBegin){if(A.shrinkWrap){w=x.dockOutwardBegin(B,C,v,A)}else{w=x.dockInwardBegin(B,C,v,A)}}else{if(u===A.dockEnd){if(A.shrinkWrap){w=x.dockOutwardEnd(B,C,v,A)}else{w=x.dockInwardEnd(B,C,v,A)}}else{if(A.shrinkWrapDock){E=C.getProp(z)+C.marginInfo[z];A.maxChildSize=Math.max(A.maxChildSize,E);w=0}else{w=x.dockStretch(B,C,v,A)}}}C.dockedAt[A.posProp]=w},dockInwardBegin:function(A,B,t,y){var w=y.begin,x=y.sizeProp,z=t.ignoreParentFrame,v,C,u;if(z){y.ignoreFrameBegin=B;u=t.dock;v=A.frameBorder[u];w-=v+A.framePadding[u]}if(!t.overlay){C=B.getProp(x)+B.marginInfo[x];y.begin+=C;if(z){y.begin-=v}}return w},dockInwardEnd:function(q,s,t,u){var w=u.sizeProp,v=s.getProp(w)+s.marginInfo[w],x=u.end-v,y;if(!t.overlay){u.end=x}if(t.ignoreParentFrame){u.ignoreFrameEnd=s;y=q.frameBorder[t.dock];x+=y+q.framePadding[t.dock];u.end+=y}return x},dockOutwardBegin:function(p,q,s,t){var v=t.begin,w=t.sizeProp,u;if(t.collapsed){t.ignoreFrameBegin=t.ignoreFrameEnd=q}else{if(s.ignoreParentFrame){t.ignoreFrameBegin=q}}if(!s.overlay){u=q.getProp(w)+q.marginInfo[w];v-=u;t.begin=v}return v},dockOutwardEnd:function(p,q,s,t){var v=t.end,w=t.sizeProp,u;u=q.getProp(w)+q.marginInfo[w];if(t.collapsed){t.ignoreFrameBegin=t.ignoreFrameEnd=q}else{if(s.ignoreParentFrame){t.ignoreFrameEnd=q}}if(!s.overlay){t.end=v+u;t.dockedPixelsEnd+=u}return v},dockStretch:function(E,F,K,D){var J=K.dock,y=D.sizeProp,G=J==="top"||J==="bottom",z=E.frameBorder,C=F.offsets,L=E.framePadding,A=G?"right":"bottom",H=G?"left":"top",M=D.begin+C[H],B,I;if(K.stretch!==false){I=D.end-M-C[A];if(K.ignoreParentFrame){M-=L[H]+z[H];I+=L[y]+z[y]}B=F.marginInfo;I-=B[y];F[D.setSize](I)}return M},finishAxis:function(M,Y){if(isNaN(Y.maxChildSize)){return false}var Z=Y.begin,I=Y.end-Z,W=Y.collapsed,O=Y.setSize,Q=Y.dockBegin,R=Y.dockEnd,J=M.framePadding,G=M.frameBorder,X=G[Q],V=M.framing,K=V&&V[Q],ab=W?0:J[Q],T=Y.sizeProp,S=Y.ignoreFrameBegin,H=Y.ignoreFrameEnd,ac=M.bodyContext,N=Math.max(X+ab-K,0),aa,L,P,U;if(Y.shrinkWrap){L=Y.initialSize;if(V){P=-Z+X+ab;aa=P-K-N}else{aa=-Z;P=aa+ab}if(!W){I+=J[T]}if(S){P-=X;aa-=X;S.dockedAt[Y.posProp]-=ab}else{I+=X}if(W){}else{if(H){H.dockedAt[Y.posProp]+=J[R]}else{I+=G[R]}}Y.size=I;if(!Y.horizontal&&!this.owner.manageHeight){U=false}}else{if(V){P=0;aa=Z-K-N}else{P=-X;aa=Z-ab-X}L=I}Y.delta=P;ac[O](L,U);ac.setProp(Y.bodyPosProp,aa);return !isNaN(I)},beforeInvalidateShrinkWrapDock:function(l,m){var n=m.axis.sizeModelName;if(!l[n].constrainedMin){l[n]=Ext.layout.SizeModel.calculated}},afterInvalidateShrinkWrapDock:function(o,s){var q=s.axis,p=s.layout,n;if(o[q.sizeModelName].calculated){n=p.dockStretch(s.ownerContext,o,o.target,q);o.setProp(q.posProp,q.delta+n)}},finishConstraints:function(I,Q,D){var K=this,B=K.sizeModels,E=Q.shrinkWrap,C=D.shrinkWrap,S=K.owner,L,G,F,N,M,H,R,P,O,J;if(E){H=Q.size;R=Q.collapsed?0:Q.minSize;P=Q.maxSize;O=Q.maxChildSize;J=Math.max(H,O);if(J>P){M=B.constrainedMax;F=P}else{if(J<R){M=B.constrainedMin;F=R}else{if(H<O){M=B.constrainedDock;S.dockConstrainedWidth=F=O}else{F=H}}}}if(C){H=D.size;R=D.collapsed?0:D.minSize;P=D.maxSize;O=D.maxChildSize;J=Math.max(H,O+H-D.initialSize);if(J>P){N=B.constrainedMax;G=P}else{if(J<R){N=B.constrainedMin;G=R}else{if(H<O){N=B.constrainedDock;S.dockConstrainedHeight=G=O}else{if(!I.collapsedVert&&!S.manageHeight){L=false;I.bodyContext.setProp("margin-bottom",D.dockedPixelsEnd)}G=H}}}}if(M||N){if(M&&N&&M.constrainedMax&&N.constrainedByMin){I.invalidate({widthModel:M});return false}if(!I.widthModel.calculatedFromShrinkWrap&&!I.heightModel.calculatedFromShrinkWrap){I.invalidate({widthModel:M,heightModel:N});return false}}else{K.invalidateAxes(I,Q,D)}if(E){I.setWidth(F);if(M){I.widthModel=M}}if(C){I.setHeight(G,L);if(N){I.heightModel=N}}return true},invalidateAxes:function(D,I,Q){var M=this.beforeInvalidateShrinkWrapDock,H=this.afterInvalidateShrinkWrapDock,E=I.end-I.begin,J=Q.initialSize,G=I.shrinkWrapDock&&I.maxChildSize<=E,P=Q.shrinkWrapDock&&Q.maxChildSize<=J,L,O,A,F,K,N,C,B;if(G||P){if(P){Q.begin=Q.initialBegin;Q.end=Q.begin+Q.initialSize}L=D.dockedItems;for(A=0,O=L.length;A<O;++A){F=L[A];N=F.horizontal;C=null;if(G&&N){B=I.sizeProp;K=E;C=I}else{if(P&&!N){B=Q.sizeProp;K=J;C=Q}}if(C){K-=F.getMarginInfo()[B];if(K!==F.props[B]){F.invalidate({before:M,after:H,axis:C,ownerContext:D,layout:this})}}}}},finishPositions:function(x,A,u){var s=x.dockedItems,y=s.length,v=A.delta,w=u.delta,t,z;for(t=0;t<y;++t){z=s[t];z.setProp("x",v+z.dockedAt.x);z.setProp("y",w+z.dockedAt.y)}},finishedLayout:function(m){var n=this,l=m.target;Ext.layout.component.Component.prototype.finishedLayout.apply(this,arguments);if(!m.animatePolicy){if(m.isCollapsingOrExpanding===1){l.afterCollapse(false)}else{if(m.isCollapsingOrExpanding===2){l.afterExpand(false)}}}},getAnimatePolicy:function(n){var o=this,p,m;if(n.isCollapsingOrExpanding===1){p=o.lastCollapsedState}else{if(n.isCollapsingOrExpanding===2){p=n.lastCollapsedState}}if(p==="left"||p==="right"){m=o.horizontalCollapsePolicy}else{if(p==="top"||p==="bottom"){m=o.verticalCollapsePolicy}}return m},getDockedItems:function(B,E){var w=this,z=(B==="visual"),v=z?Ext.ComponentQuery.query("[rendered]",w.owner.dockedItems.items):w.owner.dockedItems.items,x=v&&v.length&&B!==false,C,F,G,y,A,D;if(E==null){G=x&&!z?v.slice():v}else{G=[];for(y=0,D=v.length;y<D;++y){F=v[y].dock;A=(F==="top"||F==="left");if(E?A:!A){G.push(v[y])}}x=x&&G.length}if(x){C=(B=B||"render")==="render";Ext.Array.sort(G,function(f,g){var e,l;if(C&&((e=w.owner.dockOrder[f.dock])!==(l=w.owner.dockOrder[g.dock]))){if(!(e+l)){return e-l}}e=w.getItemWeight(f,B);l=w.getItemWeight(g,B);if((e!==undefined)&&(l!==undefined)){return e-l}return 0})}return G||[]},getItemWeight:function(m,n){var l=m.weight||this.owner.defaultDockWeights[m.dock];return l[n]||l},getLayoutItems:function(){var o=this,s,u,p,q,t;if(o.owner.collapsed){t=o.owner.getCollapsedDockedItems()}else{s=o.getDockedItems("visual");u=s.length;t=[];for(q=0;q<u;q++){p=s[q];if(!p.hidden){t.push(p)}}}return t},measureContentWidth:function(l){var g=l.bodyContext;return g.el.getWidth()-g.getBorderInfo().width},measureContentHeight:function(l){var g=l.bodyContext;return g.el.getHeight()-g.getBorderInfo().height},redoLayout:function(l){var m=this,n=m.owner;if(l.isCollapsingOrExpanding===1){if(n.reExpander){n.reExpander.el.show()}n.addClsWithUI(n.collapsedCls);l.redo(true)}else{if(l.isCollapsingOrExpanding===2){n.removeClsWithUI(n.collapsedCls);l.bodyContext.redo()}}},getRenderTarget:function(){return this.owner.bodyWrap},renderChildren:function(){var m=this,n=m.getDockedItems(),l=m.getRenderTarget();m.handleItemBorders();m.renderItems(n,l)},renderItems:function(Q,L){var O=this,ae=O.owner,aa={},T=Q.length,S=ae.body.dom,Z=ae.bodyWrap.dom,ad=!!ae.frameSize,U=ae.bodyContainer,ab,I,ac,P,X,V,M,W,J,Y,K,H,R,N;if(T){for(H=0;H<T;H++){P=Q[H];aa[P.id]=P;if(P.dockToEl){ac=true}}ab=O.getRenderTarget().dom.childNodes;I=ab.length;M=0;for(H=0;H<I;++H){X=ab[H];V=X===S;if(V){W=H;break}if(aa[X.id]){++M}}W-=M;if(ac){V=false;M=0;ab=ae.el.dom.childNodes;I=ab.length;for(H=0;H<I;H++){X=ab[H];if(ad){V=X===Z||X===U;if(!V&&Ext.fly(X).contains(Z)){V=true;ae.bodyContainer=X}}else{V=X===Z}if(V){Y=H;break}if(aa[X.id]){++M}}Y-=M}J=K=0;for(H=0;H<T;H++){P=Q[H];if(P.dockToEl){N=ae.el;R=Y+K++;if(P.dock==="right"||P.dock==="bottom"){R++;if(ad){R++}}else{if(ad&&R>0){R--}}}else{N=L;R=W+J++;if(P.dock==="right"||P.dock==="bottom"){R++}}if(!P.rendered){O.renderItem(P,N,R)}else{if(!O.isValidParent(P,N,R)){O.moveItem(P,N,R)}}}}},undoLayout:function(l){var m=this,n=m.owner;if(l.isCollapsingOrExpanding===1){if(n.reExpander){n.reExpander.el.hide()}n.removeClsWithUI(n.collapsedCls);l.undo(true)}else{if(l.isCollapsingOrExpanding===2){n.addClsWithUI(n.collapsedCls);l.bodyContext.undo()}}},sizePolicy:{nostretch:{setsWidth:0,setsHeight:0},horz:{shrinkWrap:{setsWidth:1,setsHeight:0,readsWidth:1},stretch:{setsWidth:1,setsHeight:0}},vert:{shrinkWrap:{setsWidth:0,setsHeight:1,readsHeight:1},stretch:{setsWidth:0,setsHeight:1}},stretchV:{setsWidth:0,setsHeight:1},autoStretchH:{readsWidth:1,setsWidth:1,setsHeight:0},autoStretchV:{readsHeight:1,setsWidth:0,setsHeight:1}},getItemSizePolicy:function(q,w){var s=this,v=s.sizePolicy,p=s.owner.shrinkWrapDock,t,u;if(q.stretch===false){return v.nostretch}t=q.dock;u=(t==="left"||t==="right");p=p===true?3:(p||0);if(u){v=v.vert;p=p&1}else{v=v.horz;p=p&2}if(p){if(!w){w=s.owner.getSizeModel()}if(w[u?"height":"width"].shrinkWrap){return v.shrinkWrap}}return v.stretch},configureItem:function(l,g){Ext.layout.component.Component.prototype.configureItem.apply(this,arguments);l.addCls(this._itemCls);if(!l.ignoreBorderManagement){l.addClsWithUI(this.getDockCls(l.dock))}},getDockCls:function(f){return"docked-"+f},afterRemove:function(l){var g;Ext.layout.component.Component.prototype.afterRemove.apply(this,arguments);l.removeCls(this._itemCls);if(!l.ignoreBorderManagement){l.removeClsWithUI(this.getDockCls(l.dock))}g=l.el.dom;if(!l.destroying&&g){g.parentNode.removeChild(g)}this.childrenChanged=true},borderCollapseMap:{},getBorderCollapseTable:function(){var p=this,u=p.borderCollapseMap,t=p.owner,s=t.baseCls,o=t.ui,q;u=u[s]||(u[s]={});q=u[o];if(!q){s+="-"+o+"-outer-border-";u[o]=q=[0,s+"l",s+"b",s+"bl",s+"r",s+"rl",s+"rb",s+"rbl",s+"t",s+"tl",s+"tb",s+"tbl",s+"tr",s+"trl",s+"trb",s+"trbl"]}return q}},0,0,0,0,["layout.dock"],0,[Ext.layout.component,"Dock",Ext.layout.component,"AbstractDock"],0));Ext.define("Ext.theme.neptune.layout.component.Dock",{override:"Ext.layout.component.Dock",noBorderClassTable:[0,"x-noborder-l","x-noborder-b","x-noborder-bl","x-noborder-r","x-noborder-rl","x-noborder-rb","x-noborder-rbl","x-noborder-t","x-noborder-tl","x-noborder-tb","x-noborder-tbl","x-noborder-tr","x-noborder-trl","x-noborder-trb","x-noborder-trbl"],edgeMasks:{top:8,right:4,bottom:2,left:1},handleItemBorders:function(){var P=this,ac=0,O=8,L=4,T=2,ad=1,ag=P.owner,I=ag.bodyBorder,Q=ag.border,Z=P.collapsed,M=P.edgeMasks,X=P.noBorderClassTable,S=ag.dockedItems.generation,U,ae,V,aa,J,R,W,N,ab,K,Y,af;if(P.initializedBorders===S){return}Y=[];af=[];ae=P.getBorderCollapseTable();X=P.getBorderClassTable?P.getBorderClassTable():X;P.initializedBorders=S;P.collapsed=false;V=P.getDockedItems("visual");P.collapsed=Z;for(J=0,R=V.length;J<R;J++){W=V[J];if(W.ignoreBorderManagement){continue}N=W.dock;K=aa=0;Y.length=0;af.length=0;if(N!=="bottom"){if(ac&O){U=W.border}else{U=Q;if(U!==false){aa+=O}}if(U===false){K+=O}}if(N!=="left"){if(ac&L){U=W.border}else{U=Q;if(U!==false){aa+=L}}if(U===false){K+=L}}if(N!=="top"){if(ac&T){U=W.border}else{U=Q;if(U!==false){aa+=T}}if(U===false){K+=T}}if(N!=="right"){if(ac&ad){U=W.border}else{U=Q;if(U!==false){aa+=ad}}if(U===false){K+=ad}}if((ab=W.lastBorderMask)!==K){W.lastBorderMask=K;if(ab){af[0]=X[ab]}if(K){Y[0]=X[K]}}if((ab=W.lastBorderCollapse)!==aa){W.lastBorderCollapse=aa;if(ab){af[af.length]=ae[ab]}if(aa){Y[Y.length]=ae[aa]}}if(af.length){W.removeCls(af)}if(Y.length){W.addCls(Y)}ac|=M[N]}K=aa=0;Y.length=0;af.length=0;if(ac&O){U=I}else{U=Q;if(U!==false){aa+=O}}if(U===false){K+=O}if(ac&L){U=I}else{U=Q;if(U!==false){aa+=L}}if(U===false){K+=L}if(ac&T){U=I}else{U=Q;if(U!==false){aa+=T}}if(U===false){K+=T}if(ac&ad){U=I}else{U=Q;if(U!==false){aa+=ad}}if(U===false){K+=ad}if((ab=P.lastBodyBorderMask)!==K){P.lastBodyBorderMask=K;if(ab){af[0]=X[ab]}if(K){Y[0]=X[K]}}if((ab=P.lastBodyBorderCollapse)!==aa){P.lastBodyBorderCollapse=aa;if(ab){af[af.length]=ae[ab]}if(aa){Y[Y.length]=ae[aa]}}if(af.length){ag.removeBodyCls(af)}if(Y.length){ag.addBodyCls(Y)}},onRemove:function(m){var n=this,o=m.lastBorderMask,p=m.lastBorderCollapse;if(!m.destroyed&&!m.ignoreBorderManagement){if(o){m.lastBorderMask=0;m.removeCls(n.noBorderClassTable[o])}if(p){m.lastBorderCollapse=0;m.removeCls(n.getBorderCollapseTable()[p])}}(arguments.callee.$previous||Ext.layout.component.Component.prototype.onRemove).call(this,m)}});(Ext.cmd.derive("Ext.util.Memento",Ext.Base,(function(){function o(f,g,e,l){f[l?l+e:e]=g[e]}function p(f,g,e){delete f[e]}function n(f,g,e,l){var u=l?l+e:e,m=f[u];if(m||f.hasOwnProperty(u)){s(g,e,m)}}function s(f,e,g){if(Ext.isDefined(g)){f[e]=g}else{delete f[e]}}function q(w,e,f,m,l){if(e){if(Ext.isArray(m)){var g,x=m.length;for(g=0;g<x;g++){w(e,f,m[g],l)}}else{w(e,f,m,l)}}}return{data:null,target:null,constructor:function(e,f){this.data={};if(e){this.target=e;if(f){this.capture(f)}}},capture:function(l,e,f){var g=this;q(o,g.data||(g.data={}),e||g.target,l,f)},remove:function(e){q(p,this.data,null,e)},restore:function(g,l,e,f){q(n,this.data,e||this.target,g,f);if(l!==false){this.remove(g)}},restoreAll:function(t,f){var l=this,m=f||this.target,g=l.data,e;t=t!==false;for(e in g){if(g.hasOwnProperty(e)){s(m,e,g[e]);if(t){delete g[e]}}}}}}()),1,0,0,0,0,0,[Ext.util,"Memento"],0));(Ext.cmd.derive("Ext.container.DockingContainer",Ext.Base,{isDockingContainer:true,defaultDockWeights:{top:{render:1,visual:1},left:{render:3,visual:5},right:{render:5,visual:7},bottom:{render:7,visual:3}},dockOrder:{top:-1,left:-1,right:1,bottom:1},horizontalDocks:0,addDocked:function(x,u){var v=this,B=v.rendered,A=0,E=v.dockedItems,z=E.getCount(),y,w,D,C;x=v.prepareItems(x);C=x.length;if(B){Ext.suspendLayouts()}if(u===undefined){u=z}else{u=Math.min(u,z)}for(;A<C;A++){D=x[A];D.dock=D.dock||"top";if(D.dock==="left"||D.dock==="right"){v.horizontalDocks++}y=u+A;E.insert(y,D);w=!!D.instancedCmp;delete D.instancedCmp;D.onAdded(v,y,w);delete D.$initParent;if(v.onDockedAdd!==Ext.emptyFn){v.onDockedAdd(D)}if(v.hasListeners.dockedadd){v.fireEvent("dockedadd",v,D,y)}}if(v.rendered){v.updateLayout();Ext.resumeLayouts(true)}return x},destroyDockedItems:function(){var l=this.dockedItems,g;if(l){while((g=l.first())){this.removeDocked(g,true)}}},doRenderDockedItems:function(s,x,w){var y=x.$comp,q=y.componentLayout,t=y.tabGuard&&y.lookupTpl("tabGuardTpl"),u,v;if(q.getDockedItems){u=q.getDockedItems("render",!w);v=u&&q.getItemsRenderTree(u);if(v){Ext.DomHelper.generateMarkup(v,s)}}},getDockedComponent:function(f){if(Ext.isObject(f)){f=f.getItemId()}return this.dockedItems.get(f)},getDockedItems:function(n,l){var m=this.getComponentLayout().getDockedItems("render",l);if(n&&m.length){m=Ext.ComponentQuery.query(n,m)}return m},getDockingRefItems:function(q,n){var s=q&&"*,* *",o=this.getDockedItems(s,true),p;o.push.apply(o,n);p=this.getDockedItems(s,false);o.push.apply(o,p);return o},initDockingItems:function(){var g=this,l=g.dockedItems;if(!l||!l.isMixedCollection){g.dockedItems=new Ext.util.ItemCollection();if(l){g.addDocked(l)}}},insertDocked:function(g,l){this.addDocked(l,g)},onDockedAdd:Ext.emptyFn,onDockedRemove:Ext.emptyFn,removeDocked:function(n,q){var o=this,p,s;q=q===true||(q!==false&&o.autoDestroy);if(!o.dockedItems.contains(n)){return n}if(n.dock==="left"||n.dock==="right"){o.horizontalDocks--}p=o.componentLayout;s=p&&o.rendered;if(s){p.onRemove(n)}o.dockedItems.remove(n);n.onRemoved(n.destroying||q);o.onDockedRemove(n);if(q){n.destroy()}else{if(s){p.afterRemove(n)}}if(o.hasListeners.dockedremove){o.fireEvent("dockedremove",o,n)}if(!o.destroying){o.updateLayout()}return n},moveDocked:function(l,n){var m=this;if(m.rendered){Ext.suspendLayouts()}m.removeDocked(l,false);l.dock=n;m.addDocked(l);if(m.rendered){if(l.frame){Ext.getDetachedBody().appendChild(l.el);l.updateFrame()}Ext.resumeLayouts(true)}},setupDockingRenderTpl:function(f){f.renderDockedItems=this.doRenderDockedItems}},0,0,0,0,0,0,[Ext.container,"DockingContainer"],0));(Ext.cmd.derive("Ext.panel.Panel",Ext.container.Container,{alternateClassName:"Ext.Panel",childEls:["bodyWrap","body"],renderTpl:['<tpl if="headingText">','<div id="{id}-headingEl" data-ref="headingEl" role="heading"',' class="',"x-",'hidden-clip" style="height:0">',"{headingText}","</div>","</tpl>","<tpl if=\"hasTabGuard\">{% this.renderTabGuard(out, values, 'before'); %}</tpl>",'<div id="{id}-bodyWrap" data-ref="bodyWrap" class="{baseCls}-bodyWrap"','<tpl if="bodyWrapAriaAttributes">','<tpl foreach="bodyWrapAriaAttributes"> {$}="{.}"</tpl>',"<tpl else>",' role="presentation"',"</tpl>",">","{% this.renderDockedItems(out,values,0); %}",'<div id="{id}-body" data-ref="body" class="{baseCls}-body<tpl if="bodyCls"> {bodyCls}</tpl>',' {baseCls}-body-{ui}<tpl if="uiCls">','<tpl for="uiCls"> {parent.baseCls}-body-{parent.ui}-{.}</tpl>','</tpl>{childElCls}"','<tpl if="bodyAriaAttributes">','<tpl foreach="bodyAriaAttributes"> {$}="{.}"</tpl>',"<tpl else>",' role="presentation"',"</tpl>",'<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{%this.renderContainer(out,values);%}","</div>","{% this.renderDockedItems(out,values,1); %}","</div>","<tpl if=\"hasTabGuard\">{% this.renderTabGuard(out, values, 'after'); %}</tpl>"],headerPosition:"top",iconAlign:"left",titleAlign:"left",titleRotation:"default",beforeRenderConfig:{glyph:null,headerPosition:null,icon:null,iconAlign:null,iconCls:null,title:null,titleAlign:null,titleRotation:null},animCollapse:Ext.enableFx,border:true,closable:false,closeAction:"destroy",closeToolText:"Close panel",collapsed:false,collapsedCls:"collapsed",collapseFirst:true,collapsible:undefined,collapseToolText:"Collapse panel",expandToolText:"Expand panel",constrain:false,constrainHeader:false,dockedItems:null,tbar:null,bbar:null,fbar:null,lbar:null,rbar:null,buttons:null,floatable:true,frame:false,frameHeader:true,hideCollapseTool:false,manageHeight:true,maskElement:"el",minButtonWidth:75,preventHeader:false,shrinkWrapDock:false,titleCollapse:undefined,baseCls:"x-panel",bodyPosProps:{x:"x",y:"y"},componentLayout:"dock",contentPaddingProperty:"bodyPadding",emptyArray:[],isPanel:true,defaultBindProperty:"title",addBodyCls:function(m){var l=this,n=l.rendered?l.body:l.getProtoBody();n.addCls(m);return l},addTool:function(p){if(!Ext.isArray(p)){p=[p]}var q=this,v=q.header,u=p.length,w=q.tools,s,t;if(!v||!v.isHeader){v=null;if(!w){q.tools=w=[]}}for(s=0;s<u;s++){t=p[s];t.toolOwner=q;if(v){v.addTool(t)}else{w.push(t)}}q.updateHeader()},addTools:Ext.emptyFn,getClosable:function(){return this.closable},setClosable:function(m){var l=this,n=l.tab;m=!!m;if(l.closable!==m){l.closable=m;if(n){n.setClosable(m)}}},setCollapsible:function(n){var o=this,m=o.collapsible,p=o.collapseTool;o.collapsible=n;if(n&&!m){o.updateCollapseTool();p=o.collapseTool;if(p){p.show()}}else{if(!n&&m){if(p){p.hide()}}}},addUIClsToElement:function(m){var l=this,n=Ext.container.Container.prototype.addUIClsToElement.apply(this,arguments);l.addBodyCls(["x-"+m,l.baseCls+"-body-"+m,l.baseCls+"-body-"+l.ui+"-"+m]);return n},afterCollapse:function(m){var n=this,l=n.ownerLayout;n.isCollapsingOrExpanding=0;n.updateCollapseTool();if(m){n.removeCls("x-animating-size")}if(l){l.afterCollapse(n,m)}n.setHiddenDocked();n.fireEvent("collapse",n)},afterExpand:function(m){var n=this,l=n.ownerLayout;n.isCollapsingOrExpanding=0;n.updateCollapseTool();if(m){n.removeCls("x-animating-size")}if(l){l.afterExpand(n,m)}n.fireEvent("expand",n);n.fireHierarchyEvent("expand")},doDestroy:function(){var f=this;Ext.destroy(f.placeholder,f.ghostPanel,f.dd,f.accordionHeaderKeyNav,f.accordionBodyKeyNav,f.defaultButtonKeyNav);f.destroyDockedItems();Ext.container.Container.prototype.doDestroy.call(this)},beforeRender:function(){var g=this,l;g.getProtoBody();Ext.container.Container.prototype.beforeRender.call(this);g.initTools();if(!(g.preventHeader||(g.header===false))||g.isViewportBorderChild){g.updateHeader()}g.afterHeaderInit=true;if(g.collapsed){if(g.isPlaceHolderCollapse()){if(!g.hidden){g.setHiddenState(true);g.preventCollapseFire=true;g.placeholderCollapse();delete g.preventCollapseFire;l=g.collapsed;g.collapsed=false}}else{g.beginCollapse();g.addClsWithUI(g.collapsedCls)}}if(l){g.collapsed=l}},getMemento:function(l){var g=this;if(l&&typeof l==="string"){l+="Memento";return g[l]||(g[l]=new Ext.util.Memento(g))}},beginCollapse:function(){var p=this,s=p.lastBox,v=p.rendered,t=p.getMemento("collapse"),q=p.getSizeModel(),w=p.header,u;t.capture(["height","minHeight","width","minWidth"]);if(s){t.capture(p.restoreDimension(),s,"last.")}if(p.collapsedVertical()){if(q.width.shrinkWrap){p.width=v?p.getWidth():p.width||p.minWidth||100}delete p.height;p.minHeight=0}else{if(p.collapsedHorizontal()){if(q.height.shrinkWrap){p.height=v?p.getHeight():p.height||p.minHeight||100}delete p.width;p.minWidth=0}}if(p.ownerCt){p.ownerCt.getLayout().beginCollapse(p)}if(!p.isPlaceHolderCollapse()&&w!==false){if(w===(u=p.getReExpander())){w.collapseImmune=true;w.getInherited().collapseImmune=true;w.addClsWithUI(p.getHeaderCollapsedClasses(w));if(w.rendered){w.updateFrame()}}else{if(u.el){u.el.show();u.hidden=false}}}if(p.resizer){p.resizer.disable()}if(p.rendered){p.ariaEl.dom.setAttribute("aria-expanded",false);if(p.isAccordionPanel){p.body.dom.setAttribute("aria-hidden",true)}}},beginDrag:function(){if(this.floatingDescendants){this.floatingDescendants.hide()}},beginExpand:function(){var o=this,p=o.lastBox,q=o.getMemento("collapse"),t=o.restoreDimension(),u=o.header,s;if(q){q.restore(["minHeight","minWidth",t]);if(p){q.restore(t,true,p,"last.")}}if(o.ownerCt){o.ownerCt.getLayout().beginExpand(o)}if(!o.isPlaceHolderCollapse()&&u!==false){if(u===(s=o.getReExpander())){delete u.collapseImmune;delete u.getInherited().collapseImmune;u.removeClsWithUI(o.getHeaderCollapsedClasses(u));if(u.rendered){u.expanding=true;u.updateFrame();delete u.expanding}}else{s.hidden=true;s.el.hide()}}if(o.resizer){o.resizer.enable()}if(o.rendered){o.ariaEl.dom.setAttribute("aria-expanded",true);if(o.isAccordionPanel){o.body.dom.setAttribute("aria-hidden",false)}}},bridgeToolbars:function(){var u=this,v=[],w=u.minButtonWidth,q,s,t;function p(l,e,f,g){if(Ext.isArray(l)){l={xtype:"toolbar",items:l}}else{if(!l.isComponent){l=Ext.apply({},l)}}if(!l.xtype){l.xtype="toolbar"}l.dock=e;if(g){l.enableFocusableContainer=false}if(f){l.layout=Ext.applyIf(l.layout||{},{pack:{left:"start",center:"center"}[u.buttonAlign]||"end"})}return l}if(u.tbar){v.push(p(u.tbar,"top"));u.tbar=null}if(u.bbar){v.push(p(u.bbar,"bottom"));u.bbar=null}if(u.buttons){u.fbar=u.buttons;u.buttons=null;t=true}if(u.fbar){q=p(u.fbar,"bottom",true,t);q.ui="footer";if(w){s=q.defaults;q.defaults=function(f){var e=s||{},g=!f.xtype||f.isButton,l;if(!g){l=Ext.ClassManager.getByAlias("widget."+f.xtype);if(l){g=l.prototype.isButton}}if(g&&!("minWidth" in e)){e=Ext.apply({minWidth:w},e)}return e}}v.push(q);u.fbar=null}if(u.lbar){v.push(p(u.lbar,"left"));u.lbar=null}if(u.rbar){v.push(p(u.rbar,"right"));u.rbar=null}if(u.dockedItems){if(u.dockedItems.isMixedCollection){u.addDocked(v)}else{if(!Ext.isArray(u.dockedItems)){u.dockedItems=[u.dockedItems]}u.dockedItems=u.dockedItems.concat(v)}}else{u.dockedItems=v}},close:function(){if(this.fireEvent("beforeclose",this)!==false){this.doClose()}},collapse:function(p,u){var q=this,w=p||q.collapseDirection,t=q.ownerCt,s=q.ownerLayout,v=q.rendered;if(q.isCollapsingOrExpanding){return q}if(arguments.length<2){u=q.animCollapse}if(q.collapsed||q.fireEvent("beforecollapse",q,p,u)===false){return q}if(s&&s.onBeforeComponentCollapse){if(s.onBeforeComponentCollapse(q)===false){return q}}if(v&&t&&q.isPlaceHolderCollapse()){return q.placeholderCollapse(p,u)}q.collapsed=w;if(v){q.beginCollapse()}q.getInherited().collapsed=true;q.fireHierarchyEvent("collapse");if(v){q.doCollapseExpand(1,u)}return q},collapsedHorizontal:function(){var f=this.getCollapsed();return f==="left"||f==="right"},collapsedVertical:function(){var f=this.getCollapsed();return f==="top"||f==="bottom"},convertCollapseDir:function(f){return f.substr(0,1)},createGhost:function(p){var o=this,m=o.header,n=o.frame&&!o.alwaysFramed;return{xtype:"panel",hidden:false,header:m?{titleAlign:m.getTitleAlign()}:null,ui:n?o.ui.replace(/-framed$/,""):o.ui,id:o.id+"-ghost",renderTo:Ext.getBody(),resizable:false,draggable:false,closable:false,focusable:false,floating:true,alignOnScroll:false,shadow:false,frame:n,shim:o.shim,alwaysFramed:o.alwaysFramed,overlapHeader:o.overlapHeader,headerPosition:o.getHeaderPosition(),titleRotation:o.getTitleRotation(),baseCls:o.baseCls,getRefOwner:function(){return o.getRefOwner()},cls:o.baseCls+"-ghost "+(p||"")}},createReExpander:function(v,z){var x=this,t=v==="left",u=v==="right",w=t||u,A=x.ownerCt,y=x.header,s=Ext.apply({hideMode:"offsets",title:x.getTitle(),titleAlign:x.getTitleAlign(),vertical:w,textCls:x.headerTextCls,icon:x.getIcon(),iconCls:x.getIconCls(),iconAlign:x.getIconAlign(),glyph:x.getGlyph(),baseCls:x.self.prototype.baseCls+"-header",ui:x.ui,frame:x.frame&&x.frameHeader,ignoreParentFrame:x.frame||x.overlapHeader,ignoreBorderManagement:x.frame||x.ignoreHeaderBorderManagement,indicateDrag:x.draggable,collapseImmune:true,ariaRole:x.ariaRole,preventRefocus:true,ownerCt:(A&&x.collapseMode==="placeholder")?A:x,ownerLayout:x.componentLayout,forceOrientation:true,margin:x.margin,defaultFocus:"tool[isDefaultExpandTool]"},z);if(x.collapseMode==="mini"){if(w){s.width=1}else{s.height=1}}if(y){Ext.apply(s,{enableFocusableContainer:y.enableFocusableContainer,activeChildTabIndex:y.activeChildTabIndex,inactiveChildTabIndex:y.inactiveChildTabIndex,allowFocusingDisabledChildren:y.allowFocusingDisabledChildren})}if(!x.hideCollapseTool){if(t||(u&&x.isPlaceHolderCollapse())){s.titlePosition=1}s.tools=[{xtype:"tool",type:"expand-"+x.getOppositeDirection(v),isDefaultExpandTool:true,uiCls:["top"],handler:x.toggleCollapse,scope:x,tooltip:x.expandToolText}]}s=new Ext.panel.Header(s);s.addClsWithUI(x.getHeaderCollapsedClasses(s));s.expandTool=s.down("tool[isDefaultExpandTool=true]");return s},doClose:function(){this.fireEvent("close",this);this[this.closeAction]()},doCollapseExpand:function(s,q){var o=this,p=o.animCollapse,n=o.ownerLayout;o.animCollapse=q;o.isCollapsingOrExpanding=s;if(q){o.addCls("x-animating-size")}if(n&&!q){n.onContentChange(o)}else{o.updateLayout({isRoot:true})}o.animCollapse=p;return o},endDrag:function(){if(this.floatingDescendants){this.floatingDescendants.show()}},expand:function(p){var n=this,o=n.ownerLayout,m=n.rendered;if(n.isCollapsingOrExpanding){return n}if(!arguments.length){p=n.animCollapse}if(!n.collapsed&&!n.floatedFromCollapse){return n}if(n.fireEvent("beforeexpand",n,p)===false){return n}if(o&&o.onBeforeComponentExpand){if(o.onBeforeComponentExpand(n)===false){return n}}delete n.getInherited().collapsed;if(m&&n.isPlaceHolderCollapse()){return n.placeholderExpand(p)}n.restoreHiddenDocked();if(m){n.beginExpand()}n.collapsed=false;if(n.rendered){n.doCollapseExpand(2,p)}return n},findReExpander:function(w){var p=this,v=Ext.Component,q=p.dockedItems.items,u=q.length,t,s;if(p.collapseMode==="mini"){return}switch(w){case v.DIRECTION_TOP:case v.DIRECTION_BOTTOM:for(s=0;s<u;s++){t=q[s];if(!t.hidden){if(t.isHeader&&(!t.dock||t.dock==="top"||t.dock==="bottom")){return t}}}break;case v.DIRECTION_LEFT:case v.DIRECTION_RIGHT:for(s=0;s<u;s++){t=q[s];if(!t.hidden){if(t.isHeader&&(t.dock==="left"||t.dock==="right")){return t}}}break;default:throw ("Panel#findReExpander must be passed a valid collapseDirection")}},floatCollapsedPanel:function(){var u=this,t=u.placeholder,B=u.splitter,v=Ext.util.Region.from(t.getBox(false,true)),x=Ext.panel.Panel.floatCls,z=u.collapsed,C=u.ownerCt||u,A,y,w={mouseleave:u.onMouseLeaveFloated,mouseenter:u.onMouseEnterFloated,scope:u,destroyable:true};if(u.isSliding){return}if(u.el.hasCls(x)){u.slideOutFloatedPanel();return}u.isSliding=true;t.el.hide();t.hidden=true;u.el.show();u.setHiddenState(false);u.collapsed=false;C.updateLayout();t.el.show();t.hidden=false;u.el.hide();u.setHiddenState(true);u.collapsed=z;C.updateLayout();y=u.getBox(false,true);if(u.fireEvent("beginfloat",u)===false){return}u.slideOutTask=u.slideOutTask||new Ext.util.DelayedTask(u.slideOutFloatedPanel,u);u.pointerLeaveListener=Ext.getDoc().on({mousedown:u.onFloatedPointerEvent,mousemove:u.onFloatedPointerEvent,scope:u,destroyable:true});if(!u.placeholderListener){u.placeholderListener=t.on({resize:u.onPlaceholderResize,scope:u,destroyable:true})}u.phHoverListeners=t.el.on(w);u.elHoverListeners=u.el.on(w);u.el.addCls(x);u.floated=z;if(u.collapseTool){u.collapseTool.el.hide()}if(B){v=v.union(B.getBox(false,true))}switch(u.collapsed){case"top":u.width=v.width;u.setLocalXY(y.x,y.y+v.height);break;case"right":u.height=v.height;u.setLocalXY(y.x-v.width,y.y);break;case"bottom":u.width=v.width;u.setLocalXY(y.x,y.y-v.height);break;case"left":u.height=v.height;u.setLocalXY(y.x+v.width,y.y);break}A=u.convertCollapseDir(u.collapsed);u.floatedFromCollapse=u.collapsed;u.collapsed=false;u.setHiddenState(false);u.el.slideIn(A,{preserveScroll:true,duration:Ext.Number.from(u.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){u.isSliding=false;u.fireEvent("endfloat",u);u.fireEvent("float",u)}}})},onFloatedPointerEvent:function(g){var l=this;if(l.owns(g)||l.placeholder.owns(g)||(l.splitter&&l.splitter.owns(g))||(l.floatCollapsedPanel&&l.el.getRegion().contains(g.getPoint()))){l.slideOutTask.cancel()}else{l.slideOutTask.delay(500)}},onMouseEnterFloated:function(e){this.slideOutTask.cancel()},onMouseLeaveFloated:function(e){var l=e.getRelatedTarget();if(l&&(this.owns(l)||this.placeholder.owns(l))){return}this.slideOutTask.delay(500)},onPlaceholderResize:function(w,s,u){var t=this,p=t.splitter,q=t.getBox(false,true),v=Ext.util.Region.from(w.getBox(false,true));if(p){v=v.union(p.getBox(false,true))}switch(t.floated){case"top":t.width=s;t.setLocalY(v.y+v.height);break;case"right":t.height=u;t.setLocalX(v.x-q.width);break;case"bottom":t.width=s;t.setLocalY(v.y-q.height);break;case"left":t.height=u;t.setLocalX(v.x+v.width);break}t.updateLayout({isRoot:true})},getAnimationProps:function(){var g=this,l;l=Ext.container.Container.prototype.getAnimationProps.call(this);if(typeof g.animCollapseDuration==="number"){l.duration=g.animCollapseDuration}else{if(typeof g.animCollapse==="number"){l.duration=g.animCollapse}}return l},getCollapsed:function(){var f=this;if(f.collapsed===true){return f.collapseDirection}return f.collapsed},getCollapsedDockedItems:function(){var f=this;return f.header===false||f.collapseMode==="placeholder"?f.emptyArray:[f.getReExpander()]},getComponent:function(l){var g=Ext.container.Container.prototype.getComponent.apply(this,arguments);if(g===undefined&&!Ext.isNumber(l)){g=this.getDockedComponent(l)}return g},getHeader:function(){return this.header},getHeaderCollapsedClasses:function(m){var o=this,n=o.collapsedCls,p;p=[n,n+"-"+m.getDockName()];if(o.border&&(!o.frame||(o.frame&&Ext.supports.CSS3BorderRadius))){p.push(n+"-border-"+m.getDockName())}return p},getOppositeDirection:function(l){var g=Ext.Component;switch(l){case g.DIRECTION_TOP:return g.DIRECTION_BOTTOM;case g.DIRECTION_RIGHT:return g.DIRECTION_LEFT;case g.DIRECTION_BOTTOM:return g.DIRECTION_TOP;case g.DIRECTION_LEFT:return g.DIRECTION_RIGHT}},getPlaceholder:function(p){var q=this,v=p||q.collapseDirection,s=null,w=q.placeholder,t=q.floatable,u=q.titleCollapse;if(!w){if(t||(q.collapsible&&u)){s={click:{fn:function(e,f){if(!w.expandTool.el.dom.contains(arguments[1])){q[(!u&&t)?"floatCollapsedPanel":"toggleCollapse"]()}},element:"el",scope:q}}}q.placeholder=w=Ext.widget(q.createReExpander(v,{id:q.id+"-placeholder",listeners:s}))}if(!w.placeholderFor){if(!w.isComponent){q.placeholder=w=q.lookupComponent(w)}Ext.applyIf(w,{margin:q.margin,placeholderFor:q,synthetic:true});w.addCls(["x-region-collapsed-placeholder","x-region-collapsed-"+v+"-placeholder",q.collapsedCls])}return w},getProtoBody:function(){var g=this,l=g.protoBody;if(!l){g.protoBody=l=new Ext.util.ProtoElement({cls:g.bodyCls,style:g.bodyStyle,clsProp:"bodyCls",styleProp:"bodyStyle",styleIsText:true})}return l},getReExpander:function(o){var p=this,u=o||p.collapseDirection,s=p.reExpander||p.findReExpander(u),t=p.titleCollapse,q=null;p.expandDirection=p.getOppositeDirection(u);if(!s){if(t){q={click:{fn:p.toggleCollapse,element:"el",scope:p}}}p.reExpander=s=p.createReExpander(u,{dock:u,cls:"x-docked "+p.baseCls+"-"+p.ui+"-collapsed",isCollapsedExpander:true,listeners:q});p.dockedItems.insert(0,s)}return s},getRefItems:function(m){var l=this.placeholder,n;if(l){n=[l];if(m&&l.getRefItems){n.push.apply(n,l.getRefItems(m))}}else{n=[]}n.push.apply(n,this.getDockingRefItems(m,Ext.container.Container.prototype.getRefItems.call(this,m)));return n},getState:function(){var t=this,q=Ext.container.Container.prototype.getState.call(this)||{},u=t.collapsed,s=t.floated,o,p;if(s){t.collapsed=s}q=t.addPropertyToState(q,"collapsed");if(s){t.collapsed=u}if(t.getCollapsed()){o=t.getMemento("collapse").data;q=t.addPropertyToState(q,"collapsed",o);p=t.isPlaceHolderCollapse();if(t.collapsedVertical()){if(p){q=t.addPropertyToState(q,"height");delete q.width}else{delete q.height;if(o){q=t.addPropertyToState(q,"height",o.height)}}}else{if(p){q=t.addPropertyToState(q,"width");delete q.height}else{delete q.width;if(o){q=t.addPropertyToState(q,"width",o.width)}}}}return q},applyState:function(n){var o=this,p={},m;if(n){m=n.collapsed;if(m){p=o.getMemento("collapse");Ext.Object.merge(p.data,m);n.collapsed=true}Ext.container.Container.prototype.applyState.apply(this,arguments)}},ghost:function(E){var w=this,D=w.el,C=w.ghostPanel,z=w.getBox(),A=w.header,G,y,v,F,x,B;if(!C){w.ghostPanel=C=Ext.widget(w.createGhost(E));C.el.dom.removeAttribute("tabIndex")}else{C.el.show()}C.setHiddenState(false);C.floatParent=w.floatParent;if(A&&!w.preventHeader){G=C.header;G.suspendLayouts();y=G.query("tool");for(B=y.length;B--;){G.remove(y[B])}G.setTitlePosition(0);C.addTool(w.ghostTools());C.setTitle(w.getTitle());G.setTitlePosition(A.titlePosition);F=w.getIconCls();if(F){C.setIconCls(F)}else{v=w.getIcon();if(v){C.setIcon(v)}else{x=w.getGlyph();if(x){C.setGlyph(x)}}}G.addCls("x-header-ghost");G.resumeLayouts(true)}C.setPagePosition(z.x,z.y);C.setSize(z.width,z.height);w.elVisMode=D.getVisibilityMode();D.setVisibilityMode(Ext.Element.CLIP);D.hide();return C},ghostTools:function(){var o=[],u=this.header,p=u?u.query("tool[hidden=false]"):[],q,t,s;if(p.length){q=0;t=p.length;for(;q<t;q++){s=p[q];o.push({type:s.type,tooltip:s.tooltip})}}else{o=[{type:"placeholder"}]}return o},initBodyBorder:function(){var f=this;if(f.frame&&f.bodyBorder){if(!Ext.isNumber(f.bodyBorder)){f.bodyBorder=1}f.getProtoBody().setStyle("border-width",this.unitizeBox(f.bodyBorder))}},initBodyStyles:function(){var g=this,l=g.getProtoBody();if(g.bodyPadding!==undefined){if(g.layout.managePadding){l.setStyle("padding",0)}else{l.setStyle("padding",this.unitizeBox((g.bodyPadding===true)?5:g.bodyPadding))}}g.initBodyBorder()},initBorderProps:function(){var f=this;if(f.frame&&f.border&&f.bodyBorder===undefined){f.bodyBorder=false}if(f.frame&&f.border&&(f.bodyBorder===false||f.bodyBorder===0)){f.manageBodyBorders=true}},initComponent:function(){var f=this;if(f.collapsible){f.addStateEvents(["expand","collapse"])}if(f.unstyled){f.setUI("plain")}if(f.frame){f.setUI(f.ui+"-framed")}f.bridgeToolbars();f.initBorderProps();Ext.container.Container.prototype.initComponent.call(this);f.collapseDirection=f.collapseDirection||f.getHeaderPosition()||Ext.Component.DIRECTION_TOP;if(typeof f.animCollapse==="number"){f.animCollapseDuration=f.animCollapse}f.hiddenOnCollapse=new Ext.dom.CompositeElement()},initItems:function(){Ext.container.Container.prototype.initItems.call(this);this.initDockingItems()},initRenderData:function(){var p=this,n=p.bodyWrapAriaRole,m=p.bodyAriaRole,o;o=Ext.container.Container.prototype.initRenderData.call(this);p.initBodyStyles();p.protoBody.writeTo(o);delete p.protoBody;if(p.headingText){o.headingText=p.headingText;p.addChildEl("headingEl")}if(n){o.bodyWrapAriaAttributes={role:n};if(!p.ariaStaticRoles[n]&&p.bodyWrapAriaRenderAttributes){Ext.apply(o.bodyWrapAriaAttributes,p.bodyWrapAriaRenderAttributes)}}if(m){o.bodyAriaAttributes={role:m};if(!p.ariaStaticRoles[m]&&p.bodyAriaRenderAttributes){Ext.apply(o.bodyAriaAttributes,p.bodyAriaRenderAttributes)}}return o},calculateConstrainedPosition:function(y,u,q,w){var x=this,v=x.header,s,t;if(x.constrainHeader){s=v.lastBox;if(w){if(!v.vertical){w=[w[0],s?s.height:w[1]]}else{w=[s?s.width:w[0],w[1]]}}else{if(s){w=[s.width,s.height]}}t=x.floatParent;y=y||x.constrainTo||(t?t.getTargetEl():null)||x.container||x.el.parent()}return Ext.container.Container.prototype.calculateConstrainedPosition.call(this,y,u,q,w)},initTools:function(){var p=this,n=p.tools,q,o,s;p.tools=[];for(q=n&&n.length;q;){--q;p.tools[q]=s=n[q];s.toolOwner=p}if(p.collapsible&&!(p.hideCollapseTool||p.header===false||p.preventHeader)){p.updateCollapseTool();if(p.collapseFirst){p.tools.unshift(p.collapseTool)}}p.addTools();if(p.pinnable){p.initPinnable()}if(p.closable){p.addClsWithUI("closable");o={xtype:"tool",type:"close",scope:p,handler:p.close,tooltip:p.closeToolText};if(p.isAccordionPanel||p.disableCloseToolFocus){o.focusable=false;o.ariaRole="presentation"}p.addTool(o)}if(p.collapseTool&&!p.collapseFirst){p.addTool(p.collapseTool)}},isLayoutRoot:function(){if(this.floatedFromCollapse){return true}return Ext.container.Container.prototype.isLayoutRoot.call(this)},isPlaceHolderCollapse:function(){return this.collapseMode==="placeholder"},isVisible:function(l){var g=this;if(g.collapsed&&g.placeholder){return g.placeholder.isVisible(l)}return Ext.container.Container.prototype.isVisible.apply(this,arguments)},onBoxReady:function(){var l=this,g;Ext.container.Container.prototype.onBoxReady.apply(this,arguments);if(l.collapsed){l.setHiddenDocked()}if(l.isAccordionPanel){l.ariaEl=l.header.titleCmp.el;l.ariaEl.dom.setAttribute("aria-expanded",!l.collapsed);l.ariaEl.dom.setAttribute("aria-controls",l.body.id);l.body.dom.setAttribute("aria-labelledby",l.header.titleCmp.id);l.body.dom.setAttribute("aria-hidden",!!l.collapsed);l.accordionHeaderKeyNav=new Ext.util.KeyNav({target:l.header.titleCmp.el,scope:l,left:l.navigateAccordionHeader,right:l.navigateAccordionHeader,up:l.navigateAccordionHeader,down:l.navigateAccordionHeader,home:l.navigateAccordionHeader,end:l.navigateAccordionHeader,space:l.toggleCollapse,enter:l.toggleCollapse,del:{alt:true,fn:l.maybeClose}});l.accordionBodyKeyNav=new Ext.util.KeyNav({target:l.body,scope:l,up:{ctrl:true,fn:l.navigateAccordionBody}})}if(l.defaultButton){g=l.defaultButtonTarget?l[l.defaultButtonTarget]:l.body;l.defaultButtonKeyNav=new Ext.util.KeyNav({target:g,scope:l,defaultEventAction:"stopEvent",enter:l.fireDefaultButton})}},onHide:function(n,q,p){var o=this,s=o.dd;if(o.floatedFromCollapse){o.slideOutFloatedPanel(true)}if(o.draggable&&s){s.endDrag()}if(o.collapsed&&o.placeholder){if(o.splitter){Ext.suspendLayouts();o.splitter.hide();Ext.resumeLayouts()}o.placeholder.hide()}else{Ext.container.Container.prototype.onHide.call(this,n,q,p)}},onRemoved:function(g){var l=this;if(l.placeholder&&!g){l.ownerCt.remove(l.placeholder,false)}Ext.container.Container.prototype.onRemoved.apply(this,arguments)},onShow:function(){var f=this;if(f.collapsed&&f.isPlaceHolderCollapse()){if(f.splitter){Ext.suspendLayouts();f.splitter.show();Ext.resumeLayouts()}f.setHiddenState(true);f.placeholderCollapse()}else{Ext.container.Container.prototype.onShow.apply(this,arguments)}},placeholderCollapse:function(v,A){var w=this,z=w.ownerCt,s=v||w.collapseDirection,x=Ext.panel.Panel.floatCls,y=w.collapseTool,u=w.getPlaceholder(s),t;if(Ext.Component.layoutSuspendCount||w.isLayoutSuspended()){A=false}w.fireEvent("beginfloat",w);w.isCollapsingOrExpanding=1;w.setHiddenState(true);w.collapsed=s;if(u.rendered){if(u.el.dom.parentNode!==w.el.dom.parentNode){w.el.dom.parentNode.insertBefore(u.el.dom,w.el.dom)}u.hidden=false;u.setHiddenState(false);u.el.show();z.updateLayout()}else{z.insert(z.items.indexOf(w),u)}if(w.rendered){w.focusPlaceholderExpandTool=w.focusPlaceHolder=false;if(y&&Ext.ComponentManager.getActiveComponent()===y){w.focusPlaceholderExpandTool=true}else{if(w.containsFocus){w.focusPlaceHolder=true}}w.el.setVisibilityMode(w.placeholderCollapseHideMode);if(A){w.el.addCls(x);u.el.hide();t=w.convertCollapseDir(s);w.el.slideOut(t,{preserveScroll:true,duration:Ext.Number.from(A,Ext.fx.Anim.prototype.duration),listeners:{scope:w,afteranimate:function(){var f=this,e=f.placeholder.el;f.el.removeCls(x);e.show();if(f.ownerCt){e.setStyle("display","none");e.slideIn(t,{easing:"linear",duration:100,listeners:{afteranimate:f.doPlaceholderCollapse,scope:f}})}else{f.doPlaceholderCollapse()}}}})}else{w.el.hide();w.doPlaceholderCollapse()}}else{w.isCollapsingOrExpanding=0;if(!w.preventCollapseFire){w.fireEvent("collapse",w)}}return w},doPlaceholderCollapse:function(){var p=this,n=p.placeholder,m=n.expandTool,o;if(p.focusPlaceholderExpandTool&&m){m.focus()}else{if(p.focusPlaceHolder){n.focus()}}p.focusPlaceholderExpandTool=false;n.setHiddenState(false);if(n.rendered){o=n.ariaEl.dom;o.setAttribute("aria-hidden",false);o.setAttribute("aria-expanded",false)}o=p.ariaEl.dom;o.setAttribute("aria-hidden",true);o.setAttribute("aria-expanded",false);p.isCollapsingOrExpanding=0;p.fireEvent("collapse",p);p.fireEvent("endfloat",p)},placeholderExpand:function(t){var q=this,x=q.collapsed,w=q.placeholder.expandTool,s=Ext.panel.Panel.floatCls,u=q.ownerLayout?q.ownerLayout.centerRegion:null,y,v;if(Ext.Component.layoutSuspendCount){t=false}if(q.floatedFromCollapse){v=q.getPosition(true);q.slideOutFloatedPanelBegin();q.slideOutFloatedPanelEnd();q.floated=false}if(w&&Ext.ComponentManager.getActiveComponent()===w){q.focusHeaderCollapseTool=true;w._ariaRole=w.ariaEl.dom.getAttribute("role");w._ariaLabel=w.ariaEl.dom.getAttribute("aria-label");w.ariaEl.dom.setAttribute("role","presentation");w.ariaEl.dom.removeAttribute("aria-label")}if(t){Ext.suspendLayouts();q.placeholder.hide();q.el.show();q.collapsed=false;q.setHiddenState(false);if(u&&!v){u.hidden=true}Ext.resumeLayouts(true);u.hidden=false;if(!q.floatedFromCollapse){q.fireEvent("beginfloat",q)}q.el.addCls(s);q.isCollapsingOrExpanding=2;if(v){y=q.getXY();q.setLocalXY(v[0],v[1]);q.setXY([y[0],y[1]],{duration:Ext.Number.from(t,Ext.fx.Anim.prototype.duration),listeners:{scope:q,afteranimate:function(){var e=this;e.el.removeCls(s);e.isCollapsingOrExpanding=0;e.fireEvent("expand",e);e.fireEvent("endfloat",e)}}})}else{q.el.hide();q.placeholder.el.show();q.placeholder.hidden=false;q.setHiddenState(false);q.el.slideIn(q.convertCollapseDir(x),{preserveScroll:true,duration:Ext.Number.from(t,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:q.doPlaceholderExpand,scope:q}})}}else{q.floated=q.collapsed=false;q.doPlaceholderExpand(true)}return q},doPlaceholderExpand:function(q){q=q===true;var p=this,o=p.placeholder,s=p.collapseTool,n=o.expandTool;if(q){Ext.suspendLayouts();p.show()}p.el.removeCls(Ext.panel.Panel.floatCls);o.hide();if(q){Ext.resumeLayouts(true)}else{p.updateLayout()}if(p.focusHeaderCollapseTool&&s){s.focus()}p.focusHeaderCollapseTool=false;o.ariaEl.dom.setAttribute("aria-expanded",true);p.ariaEl.dom.setAttribute("aria-expanded",true);if(n&&n._ariaRole){n.ariaEl.dom.setAttribute("role",n._ariaRole);n.ariaEl.dom.setAttribute("aria-label",n._ariaLabel);n._ariaRole=n._ariaLabel=null}p.isCollapsingOrExpanding=0;p.fireEvent("expand",p);p.fireEvent("endfloat",p)},remove:function(m,n){var l=this.dockedItems;if(l&&l.contains(m)){this.removeDocked(m,n)}else{Ext.container.Container.prototype.remove.call(this,m,n)}return m},removeBodyCls:function(m){var l=this,n=l.rendered?l.body:l.getProtoBody();n.removeCls(m);return l},removeUIClsFromElement:function(m){var l=this,n=Ext.container.Container.prototype.removeUIClsFromElement.apply(this,arguments);l.removeBodyCls(["x-"+m,l.baseCls+"-body-"+m,l.baseCls+"-body-"+l.ui+"-"+m]);return n},restoreDimension:function(){var f=this.collapseDirection;return(f==="top"||f==="bottom")?"height":"width"},restoreHiddenDocked:function(){this.setDockedItemsVisibility(this.hiddenOnCollapse,true)},setBodyStyle:function(o,m){var n=this,p=n.rendered?n.body:n.getProtoBody();if(Ext.isFunction(o)){o=o()}if(arguments.length===1){if(Ext.isString(o)){o=Ext.Element.parseStyles(o)}p.setStyle(o)}else{p.setStyle(o,m)}return n},setBorder:function(p,n){if(n){return}var o=this,m=o.header;if(!p){p=0}else{if(p===true){p="1px"}else{p=o.unitizeBox(p)}}if(m){if(m.isHeader){m.setBorder(p)}else{m.border=p}}if(o.rendered&&o.bodyBorder!==false){o.body.setStyle("border-width",p)}o.updateLayout();o.border=p},setCollapsed:function(f){this[f?"collapse":"expand"]()},setDockedItemsVisibility:function(y,t){var w=this,s=w.getDockedItems(),v=s.length,q=0,x,u;if(w.header!==false){u=w.getReExpander()}for(;q<v;q++){x=s[q];if(x&&x!==u&&x.el){y.add(x.el)}}y.setStyle("visibility",t?"":"hidden");y.clear()},setGlyph:function(p){var q=this,s=q.glyph,n=q.header,o=q.placeholder;if(p!==s){q.glyph=p;if(n){if(n.isHeader){n.setGlyph(p)}else{n.glyph=p}}else{if(q.rendered||q.afterHeaderInit){q.updateHeader()}}if(o&&o.setGlyph){o.setGlyph(p)}q.fireEvent("glyphchange",q,p,s)}},setIcon:function(s){var q=this,p=q.icon,n=q.header,o=q.placeholder;if(s!==p){q.icon=s;if(n){if(n.isHeader){n.setIcon(s)}else{n.icon=s}}else{if(q.rendered||q.afterHeaderInit){q.updateHeader()}}if(o&&o.setIcon){o.setIcon(s)}q.fireEvent("iconchange",q,s,p)}},setIconCls:function(q){var p=this,s=p.iconCls,n=p.header,o=p.placeholder;if(q!==s){p.iconCls=q;if(n){if(n.isHeader){n.setIconCls(q)}else{n.iconCls=q}}else{if(p.rendered||p.afterHeaderInit){p.updateHeader()}}if(o&&o.setIconCls){o.setIconCls(q)}p.fireEvent("iconclschange",p,q,s)}},setTitle:function(o){var q=this,s=q.title,u=q.header,t=q.reExpander,p=q.placeholder;if(o!==s){q.title=o;if(u){if(u.isHeader){u.setTitle(o)}}else{if(q.rendered||q.afterHeaderInit){q.updateHeader()}}if(q.headingEl){q.headingEl.setHtml(o)}if(t){t.setTitle(o)}if(p&&p.setTitle){p.setTitle(o)}q.fireEvent("titlechange",q,o,s)}},setHiddenDocked:function(){var g=this,l=new Ext.dom.CompositeElement();g.hiddenOnCollapse.add(g.body);l.add(g.body);g.setDockedItemsVisibility(l,false)},setUI:function(g){var l=this;Ext.container.Container.prototype.setUI.apply(this,arguments);if(l.header&&l.header.rendered){l.header.setUI(g)}},toggleCollapse:function(){return(this.collapsed||this.floatedFromCollapse)?this.expand():this.collapse()},updateCollapseTool:function(){var m=this,n=m.collapseTool,l;if(!n&&m.collapsible){m.collapseDirection=m.collapseDirection||m.getHeaderPosition()||"top";l={xtype:"tool",handler:m.toggleCollapse,scope:m};if(m.isAccordionPanel){l.focusable=false;l.ariaRole="presentation"}m.collapseTool=m.expandTool=n=Ext.widget(l)}if(n){if(m.collapsed&&!m.isPlaceHolderCollapse()){n.setType("expand-"+m.getOppositeDirection(m.collapseDirection));n.setTooltip(m.expandToolText)}else{n.setType("collapse-"+m.collapseDirection);n.setTooltip(m.collapseToolText)}}},navigateAccordionHeader:function(e){var o=this,p,n;p=e.getKey();switch(p){case e.UP:case e.LEFT:n=o.findAccordionSibling("prev");break;case e.DOWN:case e.RIGHT:n=o.findAccordionSibling("next");break;case e.HOME:n=o.findAccordionSibling("first");break;case e.END:n=o.findAccordionSibling("last");break;case e.DELETE:n=o.findAccordionSibling("prev")||o.findAccordionSibling("next");if(!n){e.doNotClose=true}break}e.stopEvent();if(n&&n!==o){n.header.titleCmp.focus()}},navigateAccordionBody:function(e){var l;if(e.getKey()===e.UP){l=this}e.stopEvent();if(l){l.header.titleCmp.focus()}},findAccordionSibling:function(o,n){var p=this,s="[isAccordionPanel]",q;switch(o){case"prev":q=p.prev(s);if(!q){if(p.accordionWrapOver){q=p.ownerCt.child(s+":last")}else{if(n){q=p}}}break;case"next":q=p.next(s);if(!q){if(p.accordionWrapOver){q=p.ownerCt.child(s+":first")}else{if(n){q=p}}}break;case"first":q=p.ownerCt.child(s+":first");break;case"last":q=p.ownerCt.child(s+":last");break}return q},fireDefaultButton:function(n){var o=this,e,p;e=o.lookupReferenceHolder(false)||o;p=e.lookupReference(o.defaultButton);if(p&&p.click){p.click(n);n.stopEvent();return false}},maybeClose:function(e){var l=this;if(l.closable){l.navigateAccordionHeader(e);if(!e.doNotClose){l.close()}}},canFocus:function(l,g){if(this.collapsed){return !!(this.placeholder&&this.placeholder.canFocus(l,g))}return this.mixins.focusable.canFocus.call(this,l,g)},focus:function(){var l=this,g=l.placeholder;if(l.collapsed&&g&&g.canFocus()){g.focus.apply(g,arguments)}else{Ext.container.Container.prototype.focus.apply(this,arguments)}},onFocusEnter:function(e){var m=this,n=m.ariaEl.dom;Ext.container.Container.prototype.onFocusEnter.call(this,e);if(m.isAccordionPanel&&n){n.setAttribute("aria-selected",true)}},onFocusLeave:function(e){var m=this,n=m.ariaEl.dom;Ext.container.Container.prototype.onFocusLeave.call(this,e);if(m.isAccordionPanel&&n){n.setAttribute("aria-selected","false")}},updateHeaderPosition:function(l){var g=this.header;if(g&&g.isHeader){g.setDock(l)}},updateIconAlign:function(g){var l=this.header;if(l&&l.isHeader){l.setIconAlign(g)}},updateTitleAlign:function(g){var l=this.header;if(l&&l.isHeader){l.setTitleAlign(g)}},updateTitleRotation:function(l){var g=this.header;if(g&&g.isHeader){g.setTitleRotation(l)}},unghost:function(q,t,s){var u=this,o=u.el,p=u.ghostPanel;if(!p){return}o.show();o.setVisibilityMode(u.elVisMode);if(q!==false){if(t!==false){u.setPagePosition(p.getXY())}}else{o.hide()}p.el.hide();p.setHiddenState(true)},updateHeader:function(F){var x=this,B=x.header,I=x.getTitle(),z=x.tools,J=x.getIcon(),K=x.getGlyph(),G=x.getIconCls(),C=K||J||G,y=x.ariaEl.dom,A=x.getHeaderPosition(),D=A==="left"||A==="right",H,E;if(Ext.isObject(B)||(B!==false&&(F||(I||C)||(z&&z.length)||(x.collapsible&&!x.titleCollapse)))){if(B&&B.isHeader){B.dockToEl=true;B.show()}else{B=x.header=Ext.widget(Ext.merge({xtype:"header",title:I,titleAlign:x.getTitleAlign(),vertical:D,dock:x.getHeaderPosition()||"top",dockToEl:true,titleRotation:x.getTitleRotation(),textCls:x.headerTextCls,iconCls:G,iconAlign:x.getIconAlign(),icon:J,glyph:K,baseCls:x.baseCls+"-header",tools:z,ui:x.ui,id:x.id+"_header",overCls:x.headerOverCls,indicateDrag:x.draggable,frame:(x.frame||x.alwaysFramed)&&x.frameHeader,ignoreParentFrame:x.frame||x.overlapHeader,ignoreBorderManagement:x.frame||x.ignoreHeaderBorderManagement,isAccordionHeader:x.isAccordionPanel,ownerCt:x,synthetic:true,listeners:x.collapsible&&x.titleCollapse?{click:x.toggleCollapse,scope:x}:null},x.header));x.addDocked(B,0)}if(x.isAccordionPanel){if(y){y.setAttribute("aria-labelledby",B.id+"-title");y.removeAttribute("aria-label")}else{E=x.ariaRenderAttributes||(x.ariaRenderAttributes={});E["aria-labelledby"]=B.id+"-title";delete E["aria-label"]}}else{if(I){if(x.ariaRole!=="tabpanel"){if(y){y.setAttribute("aria-labelledby",B.id+"-title-textEl");y.removeAttribute("aria-label")}else{E=x.ariaRenderAttributes||(x.ariaRenderAttributes={});E["aria-labelledby"]=B.id+"-title-textEl";delete E["aria-label"]}}}else{if(x.ariaRenderAttributes){delete x.ariaRenderAttributes["aria-label"]}}}}else{if(B){B.hide()}I=Ext.util.Format.stripTags(I);if(y){if(!y.hasAttribute("aria-labelledby")){if(I){y.setAttribute("aria-label",I)}else{y.removeAttribute("aria-label")}}}else{E=x.ariaRenderAttributes||(x.ariaRenderAttributes={});if(!E["aria-labelledby"]){if(I){E["aria-label"]=I}else{delete E["aria-label"]}}}}if(x.isViewportBorderChild&&!x.hasOwnProperty("ariaRole")){x.ariaRole="region"}if(I&&x.ariaRole==="region"){H=x.headingEl;if(H){H.setHtml(I)}else{if(x.rendered){x.headingEl=Ext.dom.Helper.insertFirst(x.el,{tag:"div",id:x.id+"-headingEl",role:"heading","class":"x-hidden-clip",style:"height:0",html:I},true);y.removeAttribute("aria-label");y.setAttribute("aria-labelledby",x.id+"-headingEl")}else{x.headingText=x.title;E=x.ariaRenderAttributes||(x.ariaRenderAttributes={});E["aria-labelledby"]=x.id+"-headingEl";delete E["aria-label"]}}}else{if(x.headingEl){x.headingEl.destroy();x.headingEl=null}}},statics:{floatCls:"x-border-region-slide-in"},privates:{addUIToElement:function(){var f=this;Ext.container.Container.prototype.addUIToElement.apply(this,arguments);f.addBodyCls(f.baseCls+"-body-"+f.ui)},applyTargetCls:function(f){this.getProtoBody().addCls(f)},getDefaultContentTarget:function(){return this.body},getTargetEl:function(){var f=this;return f.body||f.protoBody||f.frameBody||f.el},initDraggable:function(){var f=this;if(f.simpleDrag){f.initSimpleDraggable()}else{f.dd=new Ext.panel.DD(f,Ext.isBoolean(f.draggable)?null:f.draggable)}},initResizable:function(f){Ext.container.Container.prototype.initResizable.call(this,f);if(this.collapsed){this.resizer.disable()}},initSimpleDraggable:function(){var g=this,l=g.draggable;if(!g.header&&!l.delegate){g.updateHeader(true)}if(g.header||l.delegate){l=Ext.apply({el:g.el,delegate:g.header&&g.header.el},l);if(g.constrain||g.constrainHeader){l.constrain=g.constrain;l.constrainDelegate=g.constrainHeader;l.constrainTo=g.constrainTo||g.container}l=g.dd=new Ext.util.ComponentDragger(g,l);g.relayEvents(l,["dragstart","drag","dragend"])}},removeUIFromElement:function(){var f=this;Ext.container.Container.prototype.removeUIFromElement.apply(this,arguments);f.removeBodyCls(f.baseCls+"-body-"+f.ui)},setupRenderTpl:function(f){Ext.container.Container.prototype.setupRenderTpl.apply(this,arguments);this.setupDockingRenderTpl(f)},slideOutFloatedPanel:function(s){var p=this,u=p.el,o,t,q=function(){p.slideOutFloatedPanelEnd();p.el.removeCls("x-border-region-slide-in");p.fireEvent("endfloat",p)};if(p.isSliding||p.destroyed){return}p.isSliding=true;p.floated=false;p.slideOutFloatedPanelBegin();if(s){u.hide();return q()}if(typeof p.collapsed==="string"){o=p.convertCollapseDir(p.collapsed)}p.fireEvent("beginfloat",p);u.slideOut(o,{preserveScroll:true,duration:Ext.Number.from(p.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:q}});if(this.containsFocus){t=this.findFocusTarget();if(t){t.focus()}}},slideOutFloatedPanelBegin:function(){var o=this,n=o.placeholder.el,p=o.el,m=o.bodyMousedownListener;o.collapsed=o.floatedFromCollapse;o.setHiddenState(true);o.floatedFromCollapse=null;Ext.destroy(o.pointerLeaveListener,o.phHoverListeners,o.elHoverListeners);if(m){o.bodyMousedownListener=m.destroy()}},slideOutFloatedPanelEnd:function(l){var g=this;if(g.collapseTool){g.collapseTool.el.show()}g.slideOutTask.cancel();g.isSliding=false;if(!l){g.fireEvent("unfloat",g)}}}},0,["panel"],["component","box","container","panel"],{component:true,box:true,container:true,panel:true},["widget.panel"],[["docking",Ext.container.DockingContainer]],[Ext.panel,"Panel",Ext,"Panel"],function(){var f=this.prototype;f.animCollapse=Ext.enableFx;f.placeholderCollapseHideMode=Ext.Element.VISIBILITY}));Ext.define("Ext.theme.neptune.panel.Panel",{override:"Ext.panel.Panel",border:false,bodyBorder:false,initBorderProps:Ext.emptyFn,initBodyBorder:function(){if(this.bodyBorder!==true){arguments.callee.$previous.call(this)}}});(Ext.cmd.derive("Ext.dd.DragTracker",Ext.Base,{active:false,trackOver:false,tolerance:5,autoStart:false,constructor:function(l){var g=this;Ext.apply(g,l);g.dragRegion=new Ext.util.Region(0,0,0,0);if(g.el){g.initEl(g.el)}g.mixins.observable.constructor.call(g);if(g.disabled){g.disable()}if(Ext.supports.Touch){Ext.getWin().on({touchstart:"onWindowTouchStart",scope:g,capture:true})}},initEl:function(q){var p=this,s=p.delegate,n,o;p.el=q=Ext.get(q);q.addCls("x-unselectable");if(s&&s.isElement){p.handle=s}p.delegate=p.handle?undefined:p.delegate;if(Ext.supports.Touch){n=Ext.ComponentManager.fromElement(q);o=n&&n.getScrollable();if(o){n=o.getElement();if(p.handle&&!n.contains(p.handle)){o=false}else{if(p.delegate&&!n.down(p.delegate)){o=false}else{o=o.getX()||o.getY()}}}}if(!p.handle){p.handle=q}p.handleListeners={scope:p,delegate:p.delegate,dragstart:p.onDragStart};if(o){p.handleListeners.longpress=p.onMouseDown;p.handleListeners.mousedown={fn:p.onMouseDown,delegate:p.delegate,translate:false};p.handleListeners.contextmenu=function(e){e.stopEvent()}}else{p.handleListeners.mousedown=p.onMouseDown}if(!Ext.supports.TouchEvents&&(p.trackOver||p.overCls)){Ext.apply(p.handleListeners,{mouseover:p.onMouseOver,mouseout:p.onMouseOut})}p.mon(p.handle,p.handleListeners);p.keyNav=new Ext.util.KeyNav({target:q,up:p.onResizeKeyDown,left:p.onResizeKeyDown,right:p.onResizeKeyDown,down:p.onResizeKeyDown,scope:p})},disable:function(){this.disabled=true},enable:function(){this.disabled=false},destroy:function(){var f=this;f.endDrag({});f.el=f.handle=f.onBeforeStart=f.onStart=f.onDrag=f.onEnd=f.onCancel=null;f.callParent()},onWindowTouchStart:function(e){if(this.mouseIsDown){this.onMouseUp(e)}},onMouseOver:function(v,w){var y=this,x,e,s,u,t;if(!y.disabled){if(v.within(v.target,true,true)||y.delegate){x=y.handleCls;y.mouseIsOut=false;if(x){for(s=0,u=y.handleEls.length;s<u;s++){e=y.handleEls[s];t=e.delegateCls;if(!t){t=e.delegateCls=[x,"-",e.region,"-over"].join("")}e.addCls([t,y.overCls])}}y.fireEvent("mouseover",y,v,y.delegate?v.getTarget(y.delegate,w):y.handle)}}},onMouseOut:function(s){var e=this,o,p,q;if(e.mouseIsDown){e.mouseIsOut=true}else{if(e.handleCls){for(p=0,q=e.handleEls.length;p<q;p++){o=e.handleEls[p];o.removeCls([o.delegateCls,e.overCls])}}e.fireEvent("mouseout",e,s)}},onMouseDown:function(e,n){var o=this,p=e.parentEvent||e;if(o.disabled||p.dragTracked){return}o.dragTarget=o.delegate?n:o.handle.dom;o.startXY=o.lastXY=e.getXY();o.startRegion=Ext.fly(o.dragTarget).getRegion();if(o.fireEvent("mousedown",o,e)===false||o.fireEvent("beforedragstart",o,e)===false||o.onBeforeStart(e)===false){return}o.mouseIsDown=true;p.dragTracked=true;o.el.setCapture();e.stopPropagation();if(o.preventDefault!==false||e.pointerType==="touch"){e.preventDefault()}Ext.getDoc().on({scope:o,capture:true,mouseup:o.onMouseUp,mousemove:o.onMouseMove,selectstart:o.stopSelect});o.dragEnded=false;if(!o.tolerance){o.triggerStart()}else{if(o.autoStart){o.timer=Ext.defer(o.triggerStart,o.autoStart===true?1000:o.autoStart,o,[e])}}},onMouseMove:function(s,e){var p=this,o=s.getXY(),q=p.startXY;s.stopPropagation();if(p.preventDefault!==false){s.preventDefault()}if(p.dragEnded){return}p.lastXY=o;if(!p.active){if(Math.max(Math.abs(q[0]-o[0]),Math.abs(q[1]-o[1]))>p.tolerance){p.triggerStart(s)}else{return}}if(p.fireEvent("mousemove",p,s)===false){p.onMouseUp(s)}else{p.onDrag(s);p.fireEvent("drag",p,s)}},onMouseUp:function(e){var l=this;l.mouseIsDown=false;if(l.mouseIsOut){l.mouseIsOut=false;l.onMouseOut(e)}if(l.preventDefault!==false){e.preventDefault()}if(Ext.isIE&&document.releaseCapture){document.releaseCapture()}l.fireEvent("mouseup",l,e);l.endDrag(e)},endDrag:function(e){var m=this,n=m.active;Ext.getDoc().un({mousemove:m.onMouseMove,mouseup:m.onMouseUp,selectstart:m.stopSelect,capture:true,scope:m});m.clearStart();m.active=false;m.dragEnded=true;if(n){m.onEnd(e);m.fireEvent("dragend",m,e)}else{m.onCancel(e)}m._constrainRegion=null},triggerStart:function(e){var l=this;l.clearStart();l.active=true;l.onStart(e);l.fireEvent("dragstart",l,e)},clearStart:function(){var f=this.timer;if(f){clearTimeout(f);this.timer=null}},stopSelect:function(e){e.stopEvent();return false},onBeforeStart:function(e){},onStart:function(f){},onDrag:function(e){},onCancel:function(e){},onEnd:function(e){},getDragTarget:function(){return this.dragTarget},getDragCt:function(){return this.el},getConstrainRegion:function(){var f=this;if(f.constrainTo){if(f.constrainTo instanceof Ext.util.Region){return f.constrainTo}if(!f._constrainRegion){f._constrainRegion=Ext.fly(f.constrainTo).getViewRegion()}}else{if(!f._constrainRegion){f._constrainRegion=f.getDragCt().getViewRegion()}}return f._constrainRegion},getXY:function(f){return f?this.constrainModes[f](this,this.lastXY):this.lastXY},getOffset:function(l){var m=this.getXY(l),n=this.startXY;return[m[0]-n[0],m[1]-n[1]]},onDragStart:function(e){e.stopPropagation()},constrainModes:{point:function(o,m){var n=o.dragRegion,p=o.getConstrainRegion();if(!p){return m}n.x=n.left=n[0]=n.right=m[0];n.y=n.top=n[1]=n.bottom=m[1];n.constrainTo(p);return[n.left,n.top]},dragTarget:function(q,u){var s=q.startXY,o=q.startRegion.copy(),t=q.getConstrainRegion(),p;if(!t){return u}o.translateBy(u[0]-s[0],u[1]-s[1]);if(o.right>t.right){u[0]+=p=(t.right-o.right);o.left+=p}if(o.left<t.left){u[0]+=(t.left-o.left)}if(o.bottom>t.bottom){u[1]+=p=(t.bottom-o.bottom);o.top+=p}if(o.top<t.top){u[1]+=(t.top-o.top)}return u}}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.dd,"DragTracker"],0));(Ext.cmd.derive("Ext.util.ComponentDragger",Ext.dd.DragTracker,{autoStart:500,constructor:function(l,g){this.comp=l;this.initialConstrainTo=g.constrainTo;Ext.dd.DragTracker.prototype.constructor.call(this,g)},onStart:function(e){var m=this,n=m.comp;m.dragTarget=m.el;m.startRegion=m.el.getRegion();m.startPosition=n.getXY();if(n.ghost&&!n.liveDrag){m.proxy=n.ghost()}if(m.constrain||m.constrainDelegate){m.constrainTo=m.calculateConstrainRegion()}if(n.beginDrag){n.beginDrag()}if(n.el.shim){Ext.dom.Element.maskIframes()}},calculateConstrainRegion:function(){var u=this,w=u.comp,v=u.initialConstrainTo||u.comp.el.dom.parentNode,x=w.constraintInsets,C,A,y,z=u.proxy?u.proxy.el:w.el,t=z.shadow,B=(t&&!u.constrainDelegate&&w.constrainShadow&&!t.disabled)?t.getShadowSize():0;if(!(v instanceof Ext.util.Region)){C=Ext.fly(v);v=C.getConstrainRegion()}else{v=v.copy()}if(x){x=Ext.isObject(x)?x:Ext.Element.parseBox(x);v.adjust(x.top,x.right,x.bottom,x.left)}if(B){v.adjust(B[0],-B[1],-B[2],B[3])}if(u.constrainDelegate){A=Ext.fly(u.handle).getRegion();y=z.getRegion();v.adjust(y.top-A.top,y.right-A.right,y.bottom-A.bottom,y.left-A.left)}return v},onDrag:function(n){var o=this,p=(o.proxy&&!o.comp.liveDrag)?o.proxy:o.comp,e=o.getOffset(o.constrain||o.constrainDelegate?"dragTarget":null);p.setPagePosition(o.startPosition[0]+e[0],o.startPosition[1]+e[1])},onEnd:function(e){var l=this.comp;if(l.destroyed||l.destroying){return}if(this.proxy&&!l.liveDrag){l.unghost()}if(l.endDrag){l.endDrag()}if(l.el.shim){Ext.dom.Element.unmaskIframes()}}},1,0,0,0,0,0,[Ext.util,"ComponentDragger"],0));(Ext.cmd.derive("Ext.window.Window",Ext.panel.Panel,{alternateClassName:"Ext.Window",baseCls:"x-window",resizable:true,draggable:true,constrain:false,constrainHeader:false,plain:false,minimizable:false,maximizable:false,minHeight:50,minWidth:50,expandOnShow:true,collapsible:false,closable:true,hidden:true,autoRender:true,hideMode:"offsets",floating:true,alignOnScroll:false,itemCls:"x-window-item",overlapHeader:true,ignoreHeaderBorderManagement:true,alwaysFramed:true,isRootCfg:{isRoot:true},isWindow:true,ariaRole:"dialog",focusable:true,tabGuard:true,closeToolText:"Close dialog",keyMap:{scope:"this",ESC:"onEsc"},maskClickAction:"focus",disableCloseToolFocus:true,initComponent:function(){var f=this;f.frame=false;Ext.panel.Panel.prototype.initComponent.call(this);if(f.plain){f.addClsWithUI("plain")}f.addStateEvents(["maximize","restore","resize","dragend"])},getElConfig:function(){var g=this,l;l=Ext.panel.Panel.prototype.getElConfig.call(this);l.tabIndex=-1;return l},getFocusEl:function(){return this.getDefaultFocus()||this.el},getState:function(){var q=this,o=Ext.panel.Panel.prototype.getState.call(this)||{},s=!!q.maximized,p=q.ghostBox,n;o.maximized=s;if(s){n=q.restorePos}else{if(p){n=[p.x,p.y]}else{n=q.getPosition(true)}}Ext.apply(o,{size:s?q.restoreSize:q.getSize(),pos:n});return o},applyState:function(g){var l=this;if(g){l.maximized=g.maximized;if(l.maximized){l.hasSavedRestore=true;l.restoreSize=g.size;l.restorePos=g.pos}else{Ext.apply(l,{width:g.size.width,height:g.size.height,x:g.pos[0],y:g.pos[1]})}}},onRender:function(m,n){var l=this;Ext.panel.Panel.prototype.onRender.apply(this,arguments);if(l.header){l.header.on({scope:l,click:l.onHeaderClick})}if(l.maximizable){l.header.on({scope:l,dblclick:l.toggleMaximize})}},afterRender:function(){var l=this,g=l.header;if(l.maximized){l.maximized=false;l.maximize(null,true);if(g){g.removeCls(g.indicateDragCls)}}Ext.panel.Panel.prototype.afterRender.call(this);l.initTabGuards()},onEsc:function(e){e.stopEvent();this.close()},doDestroy:function(){var f=this;if(f.rendered){Ext.un("resize",f.onWindowResize,f);delete f.animateTarget;f.hide()}Ext.panel.Panel.prototype.doDestroy.call(this)},addTools:function(){var l=this,g=[];Ext.panel.Panel.prototype.addTools.call(this);if(l.minimizable){g.push({type:"minimize",handler:"minimize",scope:l})}if(l.maximizable){g.push({type:"maximize",handler:"toggleMaximize",scope:l})}if(g.length){l.addTool(g)}},addTool:function(g){var l=this;Ext.panel.Panel.prototype.addTool.call(this,g);if(l.rendered&&l.tabGuard){l.initTabGuards()}},add:function(){var g=this,l;l=Ext.panel.Panel.prototype.add.apply(this,arguments);if(g.rendered&&g.tabGuard){g.initTabGuards()}return l},remove:function(){var g=this,l;l=Ext.panel.Panel.prototype.remove.apply(this,arguments);if(g.rendered&&g.tabGuard){g.initTabGuards()}return l},addDocked:function(){var g=this,l;l=Ext.panel.Panel.prototype.addDocked.apply(this,arguments);if(g.rendered&&g.tabGuard){g.initTabGuards()}return l},removeDocked:function(){var g=this,l;l=Ext.panel.Panel.prototype.removeDocked.apply(this,arguments);if(g.rendered&&g.tabGuard){g.initTabGuards()}return l},onShow:function(){var f=this;Ext.panel.Panel.prototype.onShow.apply(this,arguments);if(f.expandOnShow){f.expand(false)}f.syncMonitorWindowResize();if(f.rendered&&f.tabGuard){f.initTabGuards()}},doClose:function(){var f=this;if(f.hidden){f.fireEvent("close",f);if(f.closeAction==="destroy"&&!f.destroying&&!f.destroyed){f.destroy()}}else{f.hide(f.animateTarget,f.doClose,f)}},afterHide:function(){var f=this;f.syncMonitorWindowResize();Ext.panel.Panel.prototype.afterHide.apply(this,arguments);if(f.rendered&&f.tabGuard){f.initTabGuards()}},onWindowResize:function(){var g=this,l;if(!g.destroyed){if(g.maximized){g.fitContainer()}else{l=g.getSizeModel();if(l.width.natural||l.height.natural){g.updateLayout()}g.doConstrain()}}},minimize:function(){this.fireEvent("minimize",this);return this},resumeHeaderLayout:function(f){this.header.resumeLayouts(f?this.isRootCfg:null)},afterCollapse:function(){var n=this,l=n.header,m=n.tools;if(l&&n.maximizable){l.suspendLayouts();m.maximize.hide();this.resumeHeaderLayout(true)}if(n.resizer){n.resizer.disable()}Ext.panel.Panel.prototype.afterCollapse.apply(this,arguments)},afterExpand:function(){var p=this,m=p.header,o=p.tools,n;if(m){m.suspendLayouts();if(p.maximizable){o.maximize.show();n=true}this.resumeHeaderLayout(n)}if(p.resizer){p.resizer.enable()}Ext.panel.Panel.prototype.afterExpand.apply(this,arguments)},maximize:function(z,v){var t=this,x=t.header,w=t.tools,A=t.width,s=t.height,u,y;if(!t.maximized&&!t.maximizing){t.maximizing=true;t.expand(false);if(!t.hasSavedRestore){u=t.restoreSize={width:A?A:null,height:s?s:null};if(v){t.restorePos=[t.x||0,t.y||0]}else{t.restorePos=t.getPosition()}}if(x){x.suspendLayouts();if(w.maximize){w.maximize.setType("restore")}if(t.collapseTool){t.collapseTool.hide();y=true}t.resumeHeaderLayout(y)}t.el.disableShadow();if(t.dd){t.dd.disable();if(x){x.removeCls(x.indicateDragCls)}}if(t.resizer){t.resizer.disable()}t.el.addCls("x-window-maximized");t.container.addCls("x-window-maximized-ct");t.syncMonitorWindowResize();t.fitContainer(z=(z||!!t.animateTarget)?{callback:function(){t.maximizing=false;t.maximized=true;if(!v){t.fireEvent("maximize",t)}}}:null);if(!z){t.maximizing=false;t.maximized=true;if(!v){t.fireEvent("maximize",t)}}}return t},restore:function(s){var q=this,p=q.tools,u=q.header,t=q.restoreSize,o;if(q.maximized){q.hasSavedRestore=null;q.removeCls("x-window-maximized");if(u){u.suspendLayouts();if(p.maximize){p.maximize.setType("maximize")}if(q.collapseTool){q.collapseTool.show();o=true}q.resumeHeaderLayout(o)}t.x=q.restorePos[0];t.y=q.restorePos[1];q.setBox(t,s=(s||!!q.animateTarget)?{callback:function(){q.el.enableShadow(null,true);q.maximized=false;q.fireEvent("restore",q)}}:null);q.restorePos=q.restoreSize=null;if(q.dd){q.dd.enable();if(u){u.addCls(u.indicateDragCls)}}if(q.resizer){q.resizer.enable()}q.container.removeCls("x-window-maximized-ct");q.syncMonitorWindowResize();if(!s){q.el.enableShadow(null,true);q.maximized=false;q.fireEvent("restore",q)}}return q},syncMonitorWindowResize:function(){var o=this,n=o._monitoringResize,m=o.monitorResize||o.constrain||o.constrainHeader||o.maximized,p=o.hidden||o.destroying||o.destroyed;if(m&&!p){if(!n){Ext.on("resize",o.onWindowResize,o,{buffer:1});o._monitoringResize=true}}else{if(n){Ext.un("resize",o.onWindowResize,o);o._monitoringResize=false}}},toggleMaximize:function(){return this[this.maximized?"restore":"maximize"]()},createGhost:function(){var f=Ext.panel.Panel.prototype.createGhost.apply(this,arguments);f.xtype="window";f.focusOnToFront=false;return f},getDefaultFocus:function(){var n=this,o,m=n.defaultFocus,p;if(m!==undefined){if(Ext.isNumber(m)){o=n.query("button")[m]}else{if(Ext.isString(m)){p=m;if(Ext.validIdRe.test(p)){o=n.down(Ext.makeIdSelector(p))}if(!o){o=n.down(p)}}else{if(m.focus){o=m}}}}return o},privates:{initDraggable:function(){this.initSimpleDraggable()},onHeaderClick:function(e,m){var n;if(e.el.contains(m.getTarget())){n=this.getDefaultFocus();if(n){n.focus()}}},initResizable:function(l){var g=this;Ext.panel.Panel.prototype.initResizable.call(this,l);if(g.maximized||g.maximizing){g.resizer.disable()}},initSimpleDraggable:function(){var g=this,l;Ext.panel.Panel.prototype.initSimpleDraggable.call(this);l=g.dd;if(l&&g.maximized||g.maximizing){l.disable()}},onTabGuardFocusEnter:function(v,u){var e=this,z=e.el,x=e.tabGuardBeforeEl,y=e.tabGuardAfterEl,C=v.relatedTarget,A,w,B;A=z.findTabbableElements({skipSelf:true});if(A[0]===x.dom){A.shift()}if(A[A.length-1]===y.dom){A.pop()}if(A.length===0){B=z}else{if(C===z.dom){w=u===x.dom}else{if(z.contains(C)){w=!!v.forwardTab}else{w=u===x.dom}}}B=B||(w?A[0]:A[A.length-1]);if(B){B.focus()}}}},0,["window"],["component","box","container","panel","window"],{component:true,box:true,container:true,panel:true,window:true},["widget.window"],0,[Ext.window,"Window",Ext,"Window"],0));(Ext.cmd.derive("Ext.form.Labelable",Ext.Mixin,{isLabelable:true,mixinConfig:{id:"labelable",on:{beforeRender:"beforeLabelRender",onRender:"onLabelRender"}},config:{childEls:["labelEl","bodyEl","errorEl","errorWrapEl","ariaErrorEl","ariaStatusEl","ariaHelpEl","labelTextEl"]},labelableRenderTpl:["{beforeLabelTpl}",'<label id="{id}-labelEl" data-ref="labelEl" class="{labelCls} {labelCls}-{ui} {labelClsExtra} ','{childElCls} {unselectableCls}" style="{labelStyle}"','<tpl if="inputId && !skipLabelForAttribute"> for="{inputId}"</tpl>'," {labelAttrTpl}>",'<span class="{labelInnerCls} {labelInnerCls}-{ui}" style="{labelInnerStyle}">',"{beforeLabelTextTpl}",'<span id="{id}-labelTextEl" data-ref="labelTextEl" class="{labelTextCls}">','<tpl if="fieldLabel">{fieldLabel}','<tpl if="labelSeparator">{labelSeparator}</tpl>',"</tpl>","</span>","{afterLabelTextTpl}","</span>","</label>","{afterLabelTpl}",'<div id="{id}-bodyEl" data-ref="bodyEl" role="presentation"',' class="{baseBodyCls} {baseBodyCls}-{ui}<tpl if="fieldBodyCls">',' {fieldBodyCls} {fieldBodyCls}-{ui}</tpl> {growCls} {extraFieldBodyCls}"','<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{beforeBodyEl}","{beforeSubTpl}","{[values.$comp.getSubTplMarkup(values)]}","{afterSubTpl}","{afterBodyEl}",'<tpl if="renderAriaElements">','<tpl if="ariaHelp">','<span id="{id}-ariaHelpEl" data-ref="ariaHelpEl"',' class="x-hidden-offsets">',"{ariaHelp}","</span>","</tpl>",'<span id="{id}-ariaStatusEl" data-ref="ariaStatusEl" aria-hidden="true"',' class="x-hidden-offsets">',"{ariaStatus}","</span>",'<span id="{id}-ariaErrorEl" data-ref="ariaErrorEl" aria-hidden="true" aria-live="assertive"',' class="x-hidden-clip">',"</span>","</tpl>","</div>",'<tpl if="renderError">','<div id="{id}-errorWrapEl" data-ref="errorWrapEl" class="{errorWrapCls} {errorWrapCls}-{ui}',' {errorWrapExtraCls}" style="{errorWrapStyle}">','<div role="presentation" id="{id}-errorEl" data-ref="errorEl" ','class="{errorMsgCls} {invalidMsgCls} {invalidMsgCls}-{ui}" ','data-anchorTarget="{tipAnchorTarget}">',"</div>","</div>","</tpl>",{disableFormats:true}],activeErrorsTpl:undefined,htmlActiveErrorsTpl:['<tpl if="errors && errors.length">','<ul class="{listCls}">','<tpl for="errors"><li>{.}</li></tpl>',"</ul>","</tpl>"],plaintextActiveErrorsTpl:['<tpl if="errors && errors.length">','<tpl for="errors"><tpl if="xindex &gt; 1">\n</tpl>{.}</tpl>',"</tpl>"],ariaActiveErrorsTpl:['<tpl if="errors && errors.length">','<tpl for="errors" between=". ">{.}</tpl>',"</tpl>"],isFieldLabelable:true,formItemCls:"x-form-item",labelCls:"x-form-item-label",topLabelCls:"x-form-item-label-top",rightLabelCls:"x-form-item-label-right",labelInnerCls:"x-form-item-label-inner",labelTextCls:"x-form-item-label-text",topLabelSideErrorCls:"x-form-item-label-top-side-error",errorMsgCls:"x-form-error-msg",errorWrapCls:"x-form-error-wrap",errorWrapSideCls:"x-form-error-wrap-side",errorWrapUnderCls:"x-form-error-wrap-under",errorWrapUnderSideLabelCls:"x-form-error-wrap-under-side-label",baseBodyCls:"x-form-item-body",invalidIconCls:"x-form-invalid-icon",invalidUnderCls:"x-form-invalid-under",noLabelCls:"x-form-item-no-label",fieldBodyCls:"",extraFieldBodyCls:"",invalidCls:"x-form-invalid",fieldLabel:undefined,labelAlign:"left",labelWidth:100,labelPad:5,labelSeparator:":",hideLabel:false,hideEmptyLabel:true,preventMark:false,autoFitErrors:true,msgTarget:"qtip",msgTargets:{qtip:1,title:1,under:1,side:1,none:1},noWrap:true,ariaHelp:undefined,ariaErrorText:"Input error. {0}.",labelableInsertions:["beforeBodyEl","afterBodyEl","beforeLabelTpl","afterLabelTpl","beforeSubTpl","afterSubTpl","beforeLabelTextTpl","afterLabelTextTpl","labelAttrTpl"],statics:{initTip:function(){var m=this.tip,n,l;if(m){return}n={id:"ext-form-error-tip",ui:"form-invalid"};if(Ext.supports.Touch){n.dismissDelay=0;n.anchor="top";n.showDelay=0;n.showOnTap=true;n.listeners={beforeshow:function(){this.minWidth=Ext.fly(this.activeTarget.el).getWidth()}}}m=this.tip=Ext.create("Ext.tip.QuickTip",n);l=Ext.apply({},m.tagConfig);l.attribute="errorqtip";m.setTagConfig(l)},destroyTip:function(){this.tip=Ext.destroy(this.tip)}},initLabelable:function(){var l=this,g=l.padding;if(g){l.padding=undefined;l.extraMargins=Ext.Element.parseBox(g)}if(Ext.isIE8){l.restoreDisplay=Ext.Function.createDelayed(l.doRestoreDisplay,0,l)}if(!l.activeErrorsTpl){if(l.msgTarget==="title"){l.activeErrorsTpl=l.plaintextActiveErrorsTpl}else{l.activeErrorsTpl=l.htmlActiveErrorsTpl}}l.addCls([l.formItemCls,l.formItemCls+"-"+l.ui]);l.lastActiveError="";l.enableBubble("errorchange")},trimLabelSeparator:function(){var n=this,m=n.labelSeparator,p=n.fieldLabel||"",o=p.substr(p.length-1);return o===m?p.slice(0,-1):p},getFieldLabel:function(){return this.trimLabelSeparator()},setFieldLabel:function(s){s=s||"";var q=this,y=q.labelSeparator,t=q.labelEl,u=q.errorWrapEl,w=(q.labelAlign!=="top"),v=q.noLabelCls,x=q.errorWrapUnderSideLabelCls;q.fieldLabel=s;if(q.rendered){if(Ext.isEmpty(s)&&q.hideEmptyLabel){q.addCls(v);if(w&&u){u.removeCls(x)}}else{if(y){s=q.trimLabelSeparator()+y}q.labelTextEl.dom.innerHTML=s;q.removeCls(v);if(w&&u){u.addCls(x)}}q.updateLayout()}},setHideLabel:function(l){var g=this;if(l!==g.hideLabel){g.hideLabel=l;if(g.rendered){g[l?"addCls":"removeCls"](g.noLabelCls);g.updateLayout()}}},setHideEmptyLabel:function(n){var l=this,m;if(n!==l.hideEmptyLabel){l.hideEmptyLabel=n;if(l.rendered&&!l.hideLabel){m=n&&!l.getFieldLabel();l[m?"addCls":"removeCls"](l.noLabelCls);l.updateLayout()}}},getInsertionRenderData:function(o,n){var q=n.length,s,p;while(q--){s=n[q];p=this[s];if(p){if(typeof p!=="string"){if(!p.isTemplate){p=Ext.XTemplate.getTpl(this,s)}p=p.apply(o)}}o[s]=p||""}return o},getLabelableRenderData:function(){var D=this,K=D.labelAlign,O=(K==="top"),G=(K==="right"),J=(D.msgTarget==="side"),N=(D.msgTarget==="under"),B=D.errorMsgCls,M=D.labelPad,E=D.labelWidth,R=D.labelClsExtra||"",L=J?D.errorWrapSideCls:D.errorWrapUnderCls,S="",H="",P=D.hasVisibleLabel(),F=D.autoFitErrors,I=D.defaultBodyWidth,Q,C;if(O){R+=" "+D.topLabelCls;if(M){H="padding-bottom:"+M+"px;"}if(J&&!F){R+=" "+D.topLabelSideErrorCls}}else{if(G){R+=" "+D.rightLabelCls}if(M){S+=D.getHorizontalPaddingStyle()+M+"px;"}S+="width:"+(E+(M?M:0))+"px;";H="width:"+E+"px"}if(P){if(!O&&N){L+=" "+D.errorWrapUnderSideLabelCls}}if(I){Q="min-width:"+I+"px;max-width:"+I+"px;"}C={id:D.id,inputId:D.getInputId(),labelCls:D.labelCls,labelClsExtra:R,labelStyle:S+(D.labelStyle||""),labelInnerStyle:H,labelInnerCls:D.labelInnerCls,labelTextCls:D.labelTextCls,skipLabelForAttribute:!!D.skipLabelForAttribute,unselectableCls:Ext.Element.unselectableCls,bodyStyle:Q,baseBodyCls:D.baseBodyCls,fieldBodyCls:D.fieldBodyCls,extraFieldBodyCls:D.extraFieldBodyCls,errorWrapCls:D.errorWrapCls,errorWrapExtraCls:L,renderError:J||N,invalidMsgCls:J?D.invalidIconCls:N?D.invalidUnderCls:"",errorMsgCls:B,growCls:D.grow?D.growCls:"",tipAnchorTarget:D.id+"-inputEl",errorWrapStyle:(J&&!F)?"visibility:hidden":"display:none",fieldLabel:D.getFieldLabel(),labelSeparator:D.labelSeparator,renderAriaElements:!!D.renderAriaElements,ariaStatus:""};if(D.ariaHelp){C.ariaHelp=Ext.String.htmlEncode(D.ariaHelp)}D.getInsertionRenderData(C,D.labelableInsertions);return C},getHorizontalPaddingStyle:function(){return"padding-right:"},beforeLabelRender:function(){var f=this;f.setFieldDefaults(f.getInherited().fieldDefaults);if(f.ownerLayout){f.addCls("x-"+f.ownerLayout.type+"-form-item")}if(!f.hasVisibleLabel()){f.addCls(f.noLabelCls)}},onLabelRender:function(){var p=this,q={},u=Ext.Element,t=p.errorWrapEl,o,s;if(t){t.setVisibilityMode((p.msgTarget==="side"&&!p.autoFitErrors)?u.VISIBILITY:u.DISPLAY)}if(p.extraMargins){o=p.el.getMargin();for(s in o){if(o.hasOwnProperty(s)){q["margin-"+s]=(o[s]+p.extraMargins[s])+"px"}}p.el.setStyle(q)}},hasVisibleLabel:function(){if(this.hideLabel){return false}return !(this.hideEmptyLabel&&!this.getFieldLabel())},getSubTplMarkup:function(){return""},getInputId:function(){return""},getActiveError:function(){return this.activeError||""},hasActiveError:function(){return !!this.getActiveError()},setActiveError:function(f){this.setActiveErrors(f)},getActiveErrors:function(){return this.activeErrors||[]},setActiveErrors:function(J){var y=this,K=y.errorWrapEl,A=y.msgTarget,B=A==="side",H=A==="qtip",G=y.ariaErrorEl,D,E,z,I,x,F,C;J=Ext.Array.from(J);z=y.lookupTpl("activeErrorsTpl");y.activeErrors=J;E=y.activeError=z.apply({fieldLabel:y.fieldLabel,errors:J,listCls:"x-list-plain"});y.renderActiveError();if(y.rendered){D=y.getActionEl();if(B){y.errorEl.dom.setAttribute("data-errorqtip",E)}else{if(H){D.dom.setAttribute("data-errorqtip",E)}else{if(A==="title"){D.dom.setAttribute("title",E)}}}if(A!=="title"&&G){x=y.lookupTpl("ariaActiveErrorsTpl");F=x.apply({errors:J});C=Ext.String.formatEncode(y.ariaErrorText,F,y.fieldLabel);if(G.dom.innerHTML!==C){G.dom.innerHTML=C}y.ariaStatusEl.dom.innerHTML=Ext.String.htmlEncode(F)}if(B||H){Ext.form.Labelable.initTip()}if(!y.msgTargets[A]){I=Ext.get(A);if(I){I.dom.innerHTML=E}}}if(K){K.setVisible(J.length>0);if(B&&y.autoFitErrors){y.labelEl.addCls(y.topLabelSideErrorCls)}y.updateLayout()}},unsetActiveError:function(){var w=this,t=w.errorWrapEl,p=w.ariaErrorEl,s=w.msgTarget,u=w.restoreDisplay,q,v;if(w.hasActiveError()){delete w.activeError;delete w.activeErrors;w.renderActiveError();if(w.rendered){q=w.getActionEl();if(s==="qtip"){q.dom.removeAttribute("data-errorqtip")}else{if(s==="title"){q.dom.removeAttribute("title")}}if(s!=="title"&&p){p.dom.innerHTML=w.ariaStatusEl.dom.innerHTML=""}if(!w.msgTargets[s]){v=Ext.get(s);if(v){v.dom.innerHTML=""}}if(t){t.hide();if(s==="side"&&w.autoFitErrors){w.labelEl.removeCls(w.topLabelSideErrorCls)}w.updateLayout();if(u){w.el.dom.style.display="block";w.restoreDisplay()}}}}},doRestoreDisplay:function(){var f=this.el;if(f&&f.dom){f.dom.style.display=""}},renderActiveError:function(){var l=this,m=l.getActiveError(),n=!!m;if(m!==l.lastActiveError){l.lastActiveError=m;l.fireEvent("errorchange",l,m)}if(l.rendered&&!l.destroyed&&!l.preventMark){l.toggleInvalidCls(n);if(l.errorEl){l.errorEl.dom.innerHTML=m}}},toggleInvalidCls:function(f){this.el[f?"addCls":"removeCls"](this.invalidCls)},setFieldDefaults:function(g){var l;for(l in g){if(!this.hasOwnProperty(l)){this[l]=g[l]}}}},0,0,0,0,0,0,[Ext.form,"Labelable"],function(){if(Ext.supports.Touch){this.prototype.msgTarget="side"}}));(Ext.cmd.derive("Ext.form.field.Field",Ext.Base,{mixinId:"field",isFormField:true,config:{validation:null,validationField:null},disabled:false,submitValue:true,validateOnChange:true,valuePublishEvent:"change",suspendCheckChange:0,dirty:false,initField:function(){var m=this,n=m.valuePublishEvent,p,o;m.initValue();if(Ext.isString(n)){m.on(n,m.publishValue,m)}else{for(o=0,p=n.length;o<p;++o){m.on(n[o],m.publishValue,m)}}},initValue:function(){var f=this;if("value" in f){f.suspendCheckChange++;f.setValue(f.value);f.suspendCheckChange--}f.initialValue=f.originalValue=f.lastValue=f.getValue()},cleanupField:function(){delete this._ownerRecord},getFieldIdentifier:function(){return this.isEditorComponent?this.dataIndex:this.name},getName:function(){return this.name},getValue:function(){return this.value},setValue:function(g){var l=this;l.value=g;l.checkChange();return l},isEqual:function(g,l){return String(g)===String(l)},isEqualAsString:function(g,l){return String(Ext.valueFrom(g,""))===String(Ext.valueFrom(l,""))},getSubmitData:function(){var l=this,g=null;if(!l.disabled&&l.submitValue){g={};g[l.getName()]=""+l.getValue()}return g},getModelData:function(p,o){var n=this,m=null;if(!n.disabled&&(n.submitValue||!o)){m={};m[n.getFieldIdentifier()]=n.getValue()}return m},reset:function(){var f=this;f.beforeReset();f.setValue(f.originalValue);f.clearInvalid();delete f.wasValid},beforeReset:Ext.emptyFn,resetOriginalValue:function(){this.originalValue=this.getValue();this.checkDirty()},checkChange:function(){var l=this,m,n;if(!l.suspendCheckChange&&!l.destroying&&!l.destroyed){m=l.getValue();n=l.lastValue;if(l.didValueChange(m,n)){l.lastValue=m;l.fireEvent("change",l,m,n);l.onChange(m,n)}}},didValueChange:function(g,l){return !this.isEqual(g,l)},onChange:function(l){var g=this;if(g.validateOnChange){g.validate()}g.checkDirty()},publishValue:function(){var f=this;if(f.rendered&&!f.getErrors().length){f.publishState("value",f.getValue())}},isDirty:function(){var f=this;return !f.disabled&&!f.isEqual(f.getValue(),f.originalValue)},checkDirty:function(){var l=this,g=l.isDirty();if(g!==l.wasDirty){l.dirty=g;l.fireEvent("dirtychange",l,g);l.onDirtyChange(g);l.wasDirty=g}},onDirtyChange:Ext.emptyFn,getErrors:function(o){var n=[],p=this.getValidationField(),q=this.getValidation(),s;if(p){s=p.validate(o,null,null,this._ownerRecord);if(s!==true){n.push(s)}}if(q&&q!==true){n.push(q)}return n},isValid:function(){var f=this;return f.disabled||Ext.isEmpty(f.getErrors())},validate:function(){return this.checkValidityChange(this.isValid())},checkValidityChange:function(g){var l=this;if(g!==l.wasValid){l.wasValid=g;l.fireEvent("validitychange",l,g)}return g},setValidationField:function(g,l){(arguments.callee.$previous||Ext.Base.prototype.setValidationField).call(this,g);this._ownerRecord=l},batchChanges:function(f){try{this.suspendCheckChange++;f()}finally{this.suspendCheckChange--}this.checkChange()},isFileUpload:function(){return false},extractFileInput:function(){return null},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,updateValidation:function(l,g){if(g){this.validate()}},privates:{resetToInitialValue:function(){var g=this,l=g.originalValue;g.originalValue=g.initialValue;g.reset();g.originalValue=l}}},0,0,0,0,0,0,[Ext.form.field,"Field"],0));(Ext.cmd.derive("Ext.form.field.Base",Ext.Component,{alternateClassName:["Ext.form.Field","Ext.form.BaseField"],focusable:true,shrinkWrap:true,fieldSubTpl:['<input id="{id}" data-ref="inputEl" type="{type}" {inputAttrTpl}',' size="1"','<tpl if="name"> name="{name}"</tpl>','<tpl if="value"> value="{[Ext.util.Format.htmlEncode(values.value)]}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','{%if (values.maxLength !== undefined){%} maxlength="{maxLength}"{%}%}','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',"<tpl if=\"ariaEl == 'inputEl'\">",'<tpl foreach="ariaElAttributes"> {$}="{.}"</tpl>',"</tpl>",'<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {editableCls} {inputCls}" autocomplete="off"/>',{disableFormats:true}],defaultBindProperty:"value",autoEl:{role:"presentation"},subTplInsertions:["inputAttrTpl"],childEls:["inputEl"],inputType:"text",isTextInput:true,invalidText:"The value in this field is invalid",fieldCls:"x-form-field",focusCls:"form-focus",dirtyCls:"x-form-dirty",checkChangeEvents:Ext.isIE&&(!document.documentMode||document.documentMode<=9)?["change","propertychange","keyup"]:["change","input","textInput","keyup","dragdrop"],ignoreChangeRe:/data\-errorqtip|style\.|className/,checkChangeBuffer:50,liquidLayout:true,readOnly:false,readOnlyCls:"x-form-readonly",validateOnBlur:true,hasFocus:false,baseCls:"x-field",fieldBodyCls:"x-field-body",maskOnDisable:false,stretchInputElFixed:true,ariaEl:"inputEl",renderAriaElements:true,initComponent:function(){var f=this;Ext.Component.prototype.initComponent.call(this);f.subTplData=f.subTplData||{};f.initLabelable();f.initField();f.initDefaultName();if(f.readOnly){f.addCls(f.readOnlyCls)}f.addCls("x-form-type-"+f.inputType);if(f.format&&f.formatText&&!f.ariaHelp){f.ariaHelp=Ext.String.format(f.formatText,f.format)}},initDefaultName:function(){var f=this;if(!f.name){f.name=f.getInputId()}},getInputId:function(){return this.inputId||(this.inputId=this.id+"-inputEl")},getSubTplData:function(s){var y=this,w=y.id,q=y.inputType,u=y.getInputId(),x,t,v;x=Ext.apply({ui:y.ui,id:u,cmpId:w,name:y.name||u,disabled:y.disabled,readOnly:y.readOnly,value:y.getRawValue(),type:q,fieldCls:y.fieldCls,fieldStyle:y.getFieldStyle(),childElCls:s.childElCls,tabIdx:y.tabIndex,inputCls:y.inputCls,typeCls:"x-form-"+(y.isTextInput?"text":q),ariaEl:y.ariaEl},y.subTplData);if(y.ariaRole){t={};if(!y.ariaStaticRoles[y.ariaRole]){t["aria-hidden"]=!!y.hidden;t["aria-disabled"]=!!y.disabled;v={"aria-invalid":false,"aria-readonly":!!y.readOnly};if(y.ariaLabel){t["aria-label"]=Ext.String.htmlEncode(y.ariaLabel)}t=Ext.apply(t,y.getAriaAttributes());if(!t["aria-describedby"]){if(y.ariaHelp){v["aria-describedby"]=w+"-ariaStatusEl "+w+"-ariaHelpEl"}else{v["aria-describedby"]=w+"-ariaStatusEl"}}x.inputElAriaAttributes=v}if(y.ariaRole!=="native"){t.role=y.ariaRole}if(y.ariaLabel){t["aria-label"]=y.ariaLabel}if(y.format&&y.formatText&&!x.title){t.title=Ext.String.formatEncode(y.formatText,y.format)}x.ariaElAttributes=t}y.getInsertionRenderData(x,y.subTplInsertions);return x},getSubTplMarkup:function(s){var q=this,p=q.getSubTplData(s),o=q.lookupTpl("preSubTpl"),u=q.lookupTpl("postSubTpl"),t="";if(o){t+=o.apply(p)}t+=q.lookupTpl("fieldSubTpl").apply(p);if(u){t+=u.apply(p)}return t},initRenderData:function(){return Ext.applyIf(Ext.Component.prototype.initRenderData.call(this),this.getLabelableRenderData())},setFieldStyle:function(n){var m=this,l=m.inputEl;if(l){l.applyStyles(n)}m.fieldStyle=n},getFieldStyle:function(){var f=this.fieldStyle;return Ext.isObject(f)?Ext.DomHelper.generateStyles(f,null,true):f||""},onRender:function(){this.callParent(arguments);this.mixins.labelable.self.initTip();this.renderActiveError()},beforeBlur:function(e){if(this.validateOnBlur){this.validate()}},onFocusLeave:function(e){Ext.Component.prototype.onFocusLeave.call(this,e);this.completeEdit()},completeEdit:Ext.emptyFn,isFileUpload:function(){return this.inputType==="file"},getSubmitData:function(){var n=this,m=null,l;if(!n.disabled&&n.submitValue){l=n.getSubmitValue();if(l!==null){m={};m[n.getName()]=l}}return m},getSubmitValue:function(){return this.processRawValue(this.getRawValue())},getRawValue:function(){var g=this,l=(g.inputEl?g.inputEl.getValue():Ext.valueFrom(g.rawValue,""));g.rawValue=l;return l},setRawValue:function(l){var n=this,m=n.rawValue;if(!n.transformRawValue.$nullFn){l=n.transformRawValue(l)}l=Ext.valueFrom(l,"");if(m===undefined||m!==l){n.rawValue=l;if(n.inputEl){n.bindChangeEvents(false);n.inputEl.dom.value=l;n.bindChangeEvents(true)}}if(n.rendered&&n.reference){n.publishState("rawValue",l)}return l},transformRawValue:Ext.identityFn,valueToRaw:function(f){return""+Ext.valueFrom(f,"")},rawToValue:Ext.identityFn,processRawValue:Ext.identityFn,getValue:function(){var l=this,g=l.rawToValue(l.processRawValue(l.getRawValue()));l.value=g;return g},setValue:function(g){var l=this;l.setRawValue(l.valueToRaw(g));return l.mixins.field.setValue.call(l,g)},onBoxReady:function(){var f=this;Ext.Component.prototype.onBoxReady.apply(this,arguments);if(f.setReadOnlyOnBoxReady){f.setReadOnly(f.readOnly)}},onDisable:function(){var l=this,g=l.inputEl;Ext.Component.prototype.onDisable.call(this);if(g){g.dom.disabled=true;if(l.hasActiveError()){l.clearInvalid();l.hadErrorOnDisable=true}}if(l.wasValid===false){l.checkValidityChange(true)}},onEnable:function(){var o=this,n=o.inputEl,m=o.preventMark,p;Ext.Component.prototype.onEnable.call(this);if(n){n.dom.disabled=false}if(o.wasValid!==undefined){o.forceValidation=true;o.preventMark=!o.hadErrorOnDisable;p=o.isValid();o.forceValidation=false;o.preventMark=m;o.checkValidityChange(p)}delete o.hadErrorOnDisable},setReadOnly:function(m){var o=this,n=o.inputEl,p=o.readOnly;m=!!m;o[m?"addCls":"removeCls"](o.readOnlyCls);o.readOnly=m;if(n){n.dom.readOnly=m;n.dom.setAttribute("aria-readonly",m)}else{if(o.rendering){o.setReadOnlyOnBoxReady=true}}if(m!==p){o.fireEvent("writeablechange",o,m)}},fireKey:function(e,l){if(e.isSpecialKey()){this.fireEvent("specialkey",this,e,l)}},initEvents:function(){var p=this,v=p.inputEl,w=p.onFieldMutation,s=p.checkChangeEvents,u=s.length,t,q;if(v){p.mon(v,Ext.supports.SpecialKeyDownRepeat?"keydown":"keypress",p.fireKey,p);for(t=0;t<u;++t){q=s[t];if(q==="propertychange"){p.usesPropertychange=true}if(q==="textInput"){p.usesTextInput=true}p.mon(v,q,w,p)}}Ext.Component.prototype.initEvents.call(this)},onFieldMutation:function(e){if(!this.readOnly&&!(e.type==="propertychange"&&this.ignoreChangeRe.test(e.browserEvent.propertyName))){this.startCheckChangeTask()}},startCheckChangeTask:function(){var g=this,l=g.checkChangeTask;if(!l){g.checkChangeTask=l=new Ext.util.DelayedTask(g.doCheckChangeTask,g)}if(!g.bindNotifyListener){g.bindNotifyListener=Ext.on("beforebindnotify",g.onBeforeNotify,g,{destroyable:true})}l.delay(g.checkChangeBuffer)},doCheckChangeTask:function(){var f=this.bindNotifyListener;if(f){f.destroy();this.bindNotifyListener=null}this.checkChange()},publishValue:function(){var f=this;if(f.rendered&&!f.getErrors().length){f.publishState("value",f.getValue())}},onDirtyChange:function(g){var l=this;l[g?"addCls":"removeCls"](l.dirtyCls);if(l.rendered&&l.reference){l.publishState("dirty",g)}},isValid:function(){var m=this,n=m.disabled,l=m.forceValidation||!n;return l?m.validateValue(m.processRawValue(m.getRawValue())):n},validateValue:function(o){var p=this,m=p.getErrors(o),n=Ext.isEmpty(m);if(!p.preventMark){if(n){p.clearInvalid()}else{p.markInvalid(m)}}return n},markInvalid:function(m){var o=this,p=o.getActiveError(),n;o.setActiveErrors(Ext.Array.from(m));n=o.getActiveError();if(p!==n){o.setError(n);if(!o.ariaStaticRoles[o.ariaRole]&&o.inputEl){o.inputEl.dom.setAttribute("aria-invalid",true)}}},clearInvalid:function(){var g=this,l=g.hasActiveError();delete g.hadErrorOnDisable;g.unsetActiveError();if(l){g.setError("");if(!g.ariaStaticRoles[g.ariaRole]&&g.inputEl){g.inputEl.dom.setAttribute("aria-invalid",false)}}},setError:function(p){var n=this,o=n.msgTarget,m;if(n.rendered){if(o==="title"||o==="qtip"){m=o==="qtip"?"data-errorqtip":"title";n.getActionEl().dom.setAttribute(m,p||"")}else{n.updateLayout()}}},renderActiveError:function(){var l=this,m=l.hasActiveError(),n=l.invalidCls+"-field";if(l.inputEl){l.inputEl[m?"addCls":"removeCls"]([n,n+"-"+l.ui])}l.mixins.labelable.renderActiveError.call(l)},doDestroy:function(){var g=this,l=g.checkChangeTask;if(l){l.cancel()}Ext.destroy(g.bindNotifyListener);g.cleanupField();Ext.Component.prototype.doDestroy.call(this)},privates:{applyBind:function(u,q){var s=this,t=q&&q.value,o,p;o=Ext.Component.prototype.applyBind.call(this,u,q);if(o){p=o.value;s.hasBindingValue=!!p;if(p!==t&&s.getInherited().modelValidation){s.updateValueBinding(o)}}return o},applyRenderSelectors:function(){var f=this;Ext.Component.prototype.applyRenderSelectors.call(this);if(!f.inputEl){f.inputEl=f.el.getById(f.getInputId())}},bindChangeEvents:function(m){var l=m?"resumeEvent":"suspendEvent",n=this.inputEl;if(this.usesPropertychange){n[l]("propertychange")}if(this.usesTextInput){n[l]("textInput")}},getActionEl:function(){return this.inputEl||this.el},getFocusEl:function(){return this.inputEl},initRenderTpl:function(){var f=this;if(!f.hasOwnProperty("renderTpl")){f.renderTpl=f.lookupTpl("labelableRenderTpl")}return Ext.Component.prototype.initRenderTpl.call(this)},onBeforeNotify:function(){this.checkChangeTask.cancel();this.checkChange()},updateValueBinding:function(m){var n=this,o=m.value,p=m.$fieldBinding;if(p){p.destroy();m.$fieldBinding=null}if(o&&o.bindValidationField){n.fieldBinding=o.bindValidationField("setValidationField",n)}}},deprecated:{"5":{methods:{doComponentLayout:function(){this.bindChangeEvents(false);this.callParent(arguments);this.bindChangeEvents(true)}}}}},0,["field"],["component","box","field"],{component:true,box:true,field:true},["widget.field"],[[Ext.form.Labelable.prototype.mixinId||Ext.form.Labelable.$className,Ext.form.Labelable],[Ext.form.field.Field.prototype.mixinId||Ext.form.field.Field.$className,Ext.form.field.Field]],[Ext.form.field,"Base",Ext.form,"Field",Ext.form,"BaseField"],0));(Ext.cmd.derive("Ext.form.field.VTypes",Ext.Base,(function(){var n=/^[a-zA-Z_]+$/,m=/^[a-zA-Z0-9_]+$/,o=/^(")?(?:[^\."\s])(?:(?:[\.])?(?:[\w\-!#$%&'*+/=?^_`{|}~]))*\1@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,p=/(((^https?)|(^ftp)):\/\/((([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*)|(localhost|LOCALHOST))\/?)/i;return{singleton:true,alternateClassName:"Ext.form.VTypes",email:function(e){return o.test(e)},emailText:'This field should be an e-mail address in the format "user@example.com"',emailMask:/[\w.\-@'"!#$%&'*+/=?^_`{|}~]/i,url:function(e){return p.test(e)},urlText:'This field should be a URL in the format "http://www.example.com"',alpha:function(e){return n.test(e)},alphaText:"This field should only contain letters and _",alphaMask:/[a-z_]/i,alphanum:function(e){return m.test(e)},alphanumText:"This field should only contain letters, numbers and _",alphanumMask:/[a-z0-9_]/i}}()),0,0,0,0,0,0,[Ext.form.field,"VTypes",Ext.form,"VTypes"],0));(Ext.cmd.derive("Ext.form.trigger.Trigger",Ext.Base,{factoryConfig:{defaultType:"trigger"},repeatClick:false,hidden:false,hideOnReadOnly:undefined,tooltip:null,weight:0,preventMouseDown:true,focusOnMousedown:false,baseCls:"x-form-trigger",focusCls:"x-form-trigger-focus",overCls:"x-form-trigger-over",clickCls:"x-form-trigger-click",validIdRe:Ext.validIdRe,renderTpl:['<div id="{triggerId}" class="{baseCls} {baseCls}-{ui} {cls} {cls}-{ui} {extraCls} ','{childElCls}"<tpl if="triggerStyle"> style="{triggerStyle}"</tpl>','<tpl if="ariaRole"> role="{ariaRole}"<tpl else> role="presentation"</tpl>',">","{[values.$trigger.renderBody(values)]}","</div>"],statics:{weightComparator:function(l,g){return l.weight-g.weight}},constructor:function(m){var l=this,n;Ext.apply(l,m);if(l.compat4Mode){n=l.cls;l.focusCls=[l.focusCls,n+"-focus"];l.overCls=[l.overCls,n+"-over"];l.clickCls=[l.clickCls,n+"-click"]}},afterFieldRender:function(){var l=this,g=l.tooltip;l.initEvents();if(g){l.tooltip=null;l.setTooltip(g)}},destroy:function(){var f=this;f.clickRepeater=f.el=Ext.destroy(f.clickRepeater,f.el);f.callParent()},getBodyRenderData:Ext.emptyFn,getEl:function(){return this.el||null},getStateEl:function(){return this.el},hide:function(){var g=this,l=g.el;g.hidden=true;if(l){l.hide()}},initEvents:function(){var m=this,p=m.isFieldEnabled,n=m.getStateEl(),o=m.el;n.addClsOnOver(m.overCls,p,m);n.addClsOnClick(m.clickCls,p,m);if(m.repeatClick){m.clickRepeater=new Ext.util.ClickRepeater(o,{preventDefault:true,handler:m.onClick,listeners:{mousedown:m.onClickRepeaterMouseDown,mouseup:m.onClickRepeaterMouseUp,scope:m},scope:m})}else{m.field.mon(o,{click:m.onClick,mousedown:m.onMouseDown,scope:m})}},isFieldEnabled:function(){return !this.field.disabled},isVisible:function(){var n=this,l=n.field,m=false;if(n.hidden||!l||!n.rendered||n.destroyed){m=true}return !m},onClick:function(){var o=this,q=arguments,s=o.clickRepeater?q[1]:q[0],p=o.handler,e=o.field;if(p&&!e.readOnly&&o.isFieldEnabled()){Ext.callback(o.handler,o.scope,[e,o,s],0,e)}},resolveListenerScope:function(f){return this.field.resolveSatelliteListenerScope(this,f)},onMouseDown:function(e){if(e.pointerType!=="touch"&&(!this.field.containsFocus||this.focusOnMousedown)){this.field.focus()}if(this.preventMouseDown){e.preventDefault()}},onClickRepeaterMouseDown:function(e,l){if(!l.parentEvent||l.parentEvent.type==="mousedown"){this.field.inputEl.focus()}l.preventDefault()},onClickRepeaterMouseUp:function(e){var n=this,m=n.field;Ext.callback(n.endHandler,n.scope,[m,n,e],0,m)},onFieldBlur:function(){this.getStateEl().removeCls(this.focusCls)},onFieldFocus:function(){this.getStateEl().addCls(this.focusCls)},onFieldRender:function(){var g=this,l=g.el=g.field.triggerWrap.selectNode("#"+g.domId,false);l.setVisibilityMode(Ext.Element.DISPLAY);g.rendered=true},renderBody:function(m){var n=this,l=n.bodyTpl;Ext.apply(m,n.getBodyRenderData());return l?Ext.XTemplate.getTpl(n,"bodyTpl").apply(m):""},renderTrigger:function(p){var n=this,o=n.width,m=n.hidden?"display:none;":"";if(o){m+="width:"+o}return Ext.XTemplate.getTpl(n,"renderTpl").apply({$trigger:n,fieldData:p,ui:p.ui,childElCls:p.childElCls,triggerId:n.domId=n.field.id+"-trigger-"+n.id,cls:n.cls,triggerStyle:m,extraCls:n.extraCls,baseCls:n.baseCls,ariaRole:n.ariaRole})},setHidden:function(f){if(f!==this.hidden){this[f?"hide":"show"]()}},setTooltip:function(n){var o=this,p=o.el,m=o.tooltip;if(n!==m){o.tooltip=n;if(p){p.dom.setAttribute("data-qtip",Ext.htmlEncode(n))}}},setVisible:function(f){this.setHidden(!f)},show:function(){var g=this,l=g.el;g.hidden=false;if(l){l.show()}}},1,0,0,0,["trigger.trigger"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.form.trigger,"Trigger"],0));(Ext.cmd.derive("Ext.util.TextMetrics",Ext.Base,{statics:{shared:null,measure:function(s,o,n){var q=this,p=q.shared;if(!p){p=q.shared=new q(s,n)}p.bind(s);p.setFixedWidth(n||"auto");return p.getSize(o)},destroy:function(){var f=this;Ext.destroy(f.shared);f.shared=null}},constructor:function(p,m){var n=this,o=Ext.getBody().createChild({role:"presentation",cls:"x-textmetrics"});o.setVisibilityMode(1);n.measure=o;if(p){n.bind(p)}o.position("absolute");o.setLocalXY(-1000,-1000);o.hide();if(m){o.setWidth(m)}},getSize:function(l){var m=this.measure,n;m.setHtml(l);n=m.getSize();m.setHtml("");return n},bind:function(l){var g=this;g.el=Ext.get(l);g.measure.setStyle(g.el.getStyle(["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing","word-break"]))},setFixedWidth:function(f){this.measure.setWidth(f)},getWidth:function(f){this.measure.dom.style.width="auto";return this.getSize(f).width},getHeight:function(f){return this.getSize(f).height},destroy:function(){var f=this;f.el=f.measure=Ext.destroy(f.measure);f.callParent()}},1,0,0,0,0,0,[Ext.util,"TextMetrics"],function(){Ext.Element.override({getTextWidth:function(l,m,n){return Ext.Number.constrain(Ext.util.TextMetrics.measure(this.dom,Ext.valueFrom(l,this.dom.innerHTML,true)).width,m||0,n||1000000)}})}));(Ext.cmd.derive("Ext.form.field.Text",Ext.form.field.Base,{alternateClassName:["Ext.form.TextField","Ext.form.Text"],config:{hideTrigger:false,triggers:undefined},renderConfig:{editable:true},growMin:30,growMax:800,growAppend:"W",allowBlank:true,validateBlank:false,allowOnlyWhitespace:true,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:"The minimum length for this field is {0}",maxLengthText:"The maximum length for this field is {0}",blankText:"This field is required",regexText:"",emptyText:"",emptyCls:"x-form-empty-field",placeholderCoverCls:"x-placeholder-label",requiredCls:"x-form-required-field",ariaRole:"textbox",repeatTriggerClick:false,triggerWrapCls:"x-form-trigger-wrap",triggerWrapFocusCls:"x-form-trigger-wrap-focus",triggerWrapInvalidCls:"x-form-trigger-wrap-invalid",fieldBodyCls:"x-form-text-field-body",inputWrapCls:"x-form-text-wrap",inputWrapFocusCls:"x-form-text-wrap-focus",inputWrapInvalidCls:"x-form-text-wrap-invalid",growCls:"x-form-text-grow",emptyClsElements:null,needArrowKeys:true,squashMouseUp:{mouseup:function(e){if(this.selectOnFocus){this.inputEl.dom.select()}},translate:false,single:true,preventDefault:true},childEls:["triggerWrap","inputWrap","placeholderLabel"],preSubTpl:['<div id="{cmpId}-triggerWrap" data-ref="triggerWrap"',"<tpl if=\"ariaEl == 'triggerWrap'\">",'<tpl foreach="ariaElAttributes"> {$}="{.}"</tpl>',"<tpl else>",' role="presentation"',"</tpl>",' class="{triggerWrapCls} {triggerWrapCls}-{ui}">','<div id={cmpId}-inputWrap data-ref="inputWrap"',' role="presentation" class="{inputWrapCls} {inputWrapCls}-{ui}">'],postSubTpl:['<tpl if="!Ext.supports.Placeholder">','<label id="{cmpId}-placeholderLabel" data-ref="placeholderLabel" for="{id}" class="{placeholderCoverCls} {placeholderCoverCls}-{ui}">{placeholder}</label>',"</tpl>","</div>",'<tpl for="triggers">{[values.renderTrigger(parent)]}</tpl>',"</div>"],initComponent:function(){var g=this,l=g.emptyCls;if(g.allowOnlyWhitespace===false){g.allowBlank=false}if(g.size){g.defaultBodyWidth=g.size*6.5+20}if(!g.onTrigger1Click){g.onTrigger1Click=g.onTriggerClick}Ext.form.field.Base.prototype.initComponent.call(this);if(g.readOnly){g.setReadOnly(g.readOnly)}g.fieldFocusCls=g.baseCls+"-focus";g.emptyUICls=l+" "+l+"-"+g.ui;g.addStateEvents("change")},initEvents:function(){var g=this,l=g.inputEl;Ext.form.field.Base.prototype.initEvents.call(this);if(g.selectOnFocus||g.emptyText){g.mon(l,"mousedown",g.onMouseDown,g)}if(g.maskRe||(g.vtype&&g.disableKeyFilter!==true&&(g.maskRe=Ext.form.field.VTypes[g.vtype+"Mask"]))){g.mon(l,"keypress",g.filterKeys,g)}if(g.enableKeyEvents){g.mon(l,{scope:g,keyup:g.onKeyUp,keydown:g.onKeyDown,keypress:g.onKeyPress})}},isEqual:function(g,l){return this.isEqualAsString(g,l)},onChange:function(g,l){Ext.form.field.Base.prototype.onChange.call(this,g,l);this.autoSize()},getSubTplData:function(t){var s=this,y=s.getRawValue(),w=s.emptyText&&y.length<1,v=s.maxLength,x,q,u;if(s.enforceMaxLength){if(v===Number.MAX_VALUE){v=undefined}}else{v=undefined}if(s.emptyText){x=s.emptyText}q=Ext.apply(Ext.form.field.Base.prototype.getSubTplData.call(this,t),{triggerWrapCls:s.triggerWrapCls,inputWrapCls:s.inputWrapCls,placeholderCoverCls:s.placeholderCoverCls,triggers:s.orderedTriggers,maxLength:v,readOnly:!s.editable||s.readOnly,placeholder:x,value:y,fieldCls:s.fieldCls+(s.allowBlank?"":" "+s.requiredCls)+(w?" "+s.emptyUICls:"")});u=q.inputElAriaAttributes;if(u){u["aria-required"]=!s.allowBlank}return q},onRender:function(){var o=this,p=o.getTriggers(),n=[],m;if(Ext.supports.FixedTableWidthBug){o.el._needsTableWidthFix=true}(arguments.callee.$previous||Ext.form.field.Base.prototype.onRender).call(this);if(p){this.invokeTriggers("onFieldRender");for(m in p){n.push(p[m].el)}o.triggerEl=o.triggerCell=new Ext.CompositeElement(n,true)}o.inputCell=o.inputWrap},afterRender:function(){var f=this;f.autoSize();Ext.form.field.Base.prototype.afterRender.call(this);f.invokeTriggers("afterFieldRender");f.emptyClsElements=[f.inputEl]},onMouseDown:function(){if(!this.hasFocus){this.squashMouseUp.scope=this;Ext.getDoc().on(this.squashMouseUp)}},applyTriggers:function(w){var v=this,A=v.getHideTrigger(),E=v.readOnly,D=v.orderedTriggers=[],u=v.repeatTriggerClick,B,x,z,C,y;if(!w){w={};if(v.triggerCls&&!v.trigger1Cls){v.trigger1Cls=v.triggerCls}for(y=1;(C=v["trigger"+y+"Cls"]);y++){w["trigger"+y]={cls:C,extraCls:"x-trigger-index-"+y,handler:"onTrigger"+y+"Click",compat4Mode:true,scope:v}}}for(B in w){if(w.hasOwnProperty(B)){x=w[B];x.field=v;x.id=B;if((E&&x.hideOnReadOnly!==false)||(A&&x.hidden!==false)){x.hidden=true}if(u&&(x.repeatClick!==false)){x.repeatClick=true}z=w[B]=Ext.form.trigger.Trigger.create(x);D.push(z)}}Ext.Array.sort(D,Ext.form.trigger.Trigger.weightComparator);return w},invokeTriggers:function(t,q){var o=this,p=o.getTriggers(),u,s;if(p){for(u in p){if(p.hasOwnProperty(u)){s=p[u];s[t].apply(s,q||[])}}}},getTrigger:function(f){return this.getTriggers()[f]},updateHideTrigger:function(f){this.invokeTriggers(f?"hide":"show")},updateEditable:function(l,g){this.setReadOnlyAttr(!l||this.readOnly)},setReadOnly:function(u){var p=this,q=p.getTriggers(),s=p.getHideTrigger(),t,o;u=!!u;Ext.form.field.Base.prototype.setReadOnly.call(this,u);if(p.rendered){p.setReadOnlyAttr(u||!p.editable)}if(q){for(o in q){t=q[o];if(t.hideOnReadOnly===true||(t.hideOnReadOnly!==false&&!s)){t.setVisible(!u)}}}},setReadOnlyAttr:function(m){var o=this,p="readonly",n=o.inputEl.dom;if(m){n.setAttribute(p,p)}else{n.removeAttribute(p)}if(!o.ariaStaticRoles[o.ariaRole]){o.inputEl.dom.setAttribute("aria-readonly",!!m)}},processRawValue:function(p){var q=this,n=q.stripCharsRe,s,o;if(n){if(!n.global){s="g";s+=(n.ignoreCase)?"i":"";s+=(n.multiline)?"m":"";n=new RegExp(n.source,s)}o=p.replace(n,"");if(o!==p){q.setRawValue(o);if(q.lastValue===p){q.lastValue=o}p=o}}return p},onDisable:function(){Ext.form.field.Base.prototype.onDisable.call(this);if(Ext.isIE){this.inputEl.dom.unselectable="on"}},onEnable:function(){Ext.form.field.Base.prototype.onEnable.call(this);if(Ext.isIE){this.inputEl.dom.unselectable=""}},onKeyDown:function(e){this.fireEvent("keydown",this,e)},onKeyUp:function(e){this.fireEvent("keyup",this,e)},onKeyPress:function(e){this.fireEvent("keypress",this,e)},getEmptyText:function(){return this.emptyText},setEmptyText:function(m){var n=this,l=n.inputEl;m=m||"";n.emptyText=m;if(n.rendered){if(Ext.supports.Placeholder&&!n.simulatePlaceholder){if(m){l.dom.setAttribute("placeholder",m)}else{l.dom.removeAttribute("placeholder")}}else{n.placeholderLabel.setHtml(m)}n.refreshEmptyText()}return this},afterFirstLayout:function(){Ext.form.field.Base.prototype.afterFirstLayout.call(this);if(Ext.isIE&&this.disabled){var f=this.inputEl;if(f){f.dom.unselectable="on"}}},toggleInvalidCls:function(l){var g=l?"addCls":"removeCls";Ext.form.field.Base.prototype.toggleInvalidCls.call(this,l);this.triggerWrap[g](this.triggerWrapInvalidCls);this.inputWrap[g](this.inputWrapInvalidCls)},onFieldMutation:function(e){this.refreshEmptyText();Ext.form.field.Base.prototype.onFieldMutation.call(this,e)},refreshEmptyText:function(){var q=this,o=q.inputEl,t=q.emptyClsElements,p,u,s;if(o){p=q.getValue();u=!(o.dom.value||(Ext.isArray(p)&&p.length));if(q.placeholderLabel){q.placeholderLabel.setDisplayed(u)}for(s=0;s<t.length;s++){t[s].toggleCls(q.emptyUICls,u)}}},setValue:function(f){f=Ext.form.field.Base.prototype.setValue.call(this,f);this.refreshEmptyText();return f},onFocus:function(e){var m=this,n;Ext.form.field.Base.prototype.onFocus.call(this,e);Ext.asap(function(){if(!m.destroyed&&document.activeElement===m.inputEl.dom){n=m.inputEl.dom.value.length;m.selectText(m.selectOnFocus?0:n,n)}});if(m.emptyText){m.autoSize()}m.addCls(m.fieldFocusCls);m.triggerWrap.addCls(m.triggerWrapFocusCls);m.inputWrap.addCls(m.inputWrapFocusCls);m.invokeTriggers("onFieldFocus",[e])},onBlur:function(e){var l=this;Ext.form.field.Base.prototype.onBlur.call(this,e);l.removeCls(l.fieldFocusCls);l.triggerWrap.removeCls(l.triggerWrapFocusCls);l.inputWrap.removeCls(l.inputWrapFocusCls);l.invokeTriggers("onFieldBlur",[e])},filterKeys:function(e){if((e.ctrlKey&&!e.altKey)||e.isSpecialKey()){return}var l=String.fromCharCode(e.getCharCode());if(!this.maskRe.test(l)){e.stopEvent()}},getState:function(){return this.addPropertyToState(Ext.form.field.Base.prototype.getState.call(this),"value")},applyState:function(f){Ext.form.field.Base.prototype.applyState.call(this,f);if(f.hasOwnProperty("value")){this.setValue(f.value)}},getErrors:function(D){D=arguments.length?(D==null?"":D):this.processRawValue(this.getRawValue());var x=this,u=Ext.form.field.Base.prototype.getErrors.call(this,D),C=x.validator,z=x.vtype,w=Ext.form.field.VTypes,v=x.regex,E=Ext.String.format,B,y,A;if(Ext.isFunction(C)){B=C.call(x,D);if(B!==true){u.push(B)}}y=x.allowOnlyWhitespace?D:Ext.String.trim(D);if(y.length<1){if(!x.allowBlank){u.push(x.blankText)}if(!x.validateBlank){return u}A=true}if(!A&&D.length<x.minLength){u.push(E(x.minLengthText,x.minLength))}if(D.length>x.maxLength){u.push(E(x.maxLengthText,x.maxLength))}if(z){if(!w[z](D,x)){u.push(x.vtypeText||w[z+"Text"])}}if(v&&!v.test(D)){u.push(x.regexText||x.invalidText)}return u},selectText:function(v,t){var w=this,p=w.inputEl.dom,q=p.value,u=q.length,s;if(u>0){v=v===undefined?0:Math.min(v,u);t=t===undefined?u:Math.min(t,u);if(p.setSelectionRange){p.setSelectionRange(v,t)}else{if(p.createTextRange){s=p.createTextRange();s.moveStart("character",v);s.moveEnd("character",t-u);s.select()}}}},getGrowWidth:function(){return this.inputEl.dom.value},autoSize:function(){var s=this,t,v,p,w,u,q;if(s.grow&&s.rendered&&s.getSizeModel().width.auto){w=s.inputEl;t=s.getTriggers();p=0;q=Ext.util.Format.htmlEncode(s.getGrowWidth()||(s.hasFocus?"":s.emptyText)||"");q+=s.growAppend;for(v in t){p+=t[v].el.getWidth()}u=w.getTextWidth(q)+p+s.inputWrap.getBorderWidth("lr")+s.triggerWrap.getBorderWidth("lr");u=Math.min(Math.max(u,s.growMin),s.growMax);s.bodyEl.setWidth(u);s.updateLayout();s.fireEvent("autosize",s,u)}},doDestroy:function(){var f=this;f.invokeTriggers("destroy");Ext.destroy(f.triggerRepeater);Ext.form.field.Base.prototype.doDestroy.call(this)},onTriggerClick:Ext.emptyFn,privates:{getTdType:function(){return"textfield"}},deprecated:{5:{methods:{getTriggerWidth:function(){var m=this.getTriggers(),n=0,l;if(m&&this.rendered){for(l in m){if(m.hasOwnProperty(l)){n+=m[l].el.getWidth()}}}return n}}}}},0,["textfield"],["component","box","field","textfield"],{component:true,box:true,field:true,textfield:true},["widget.textfield"],0,[Ext.form.field,"Text",Ext.form,"TextField",Ext.form,"Text"],0));(Ext.cmd.derive("Ext.form.field.TextArea",Ext.form.field.Text,{alternateClassName:"Ext.form.TextArea",fieldSubTpl:['<textarea id="{id}" data-ref="inputEl" {inputAttrTpl}','<tpl if="name"> name="{name}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','<tpl if="maxLength !== undefined"> maxlength="{maxLength}"</tpl>','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {inputCls}" ','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>','<tpl foreach="ariaElAttributes"> {$}="{.}"</tpl>','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>',' autocomplete="off">\n','<tpl if="value">{[Ext.util.Format.htmlEncode(values.value)]}</tpl>',"</textarea>",{disableFormats:true}],growMin:60,growMax:1000,growAppend:"\n-",enterIsSpecial:false,preventScrollbars:false,returnRe:/\r/g,inputCls:"x-form-textarea",extraFieldBodyCls:"x-form-textarea-body",ariaAttributes:{"aria-multiline":true},getSubTplData:function(o){var m=this,n=m.getFieldStyle(),p=Ext.form.field.Text.prototype.getSubTplData.apply(this,arguments);if(m.grow){if(m.preventScrollbars){p.fieldStyle=(n||"")+";overflow:hidden;height:"+m.growMin+"px"}}return p},afterRender:function(){var f=this;Ext.form.field.Text.prototype.afterRender.apply(this,arguments);f.needsMaxCheck=f.enforceMaxLength&&f.maxLength!==Number.MAX_VALUE&&!Ext.supports.TextAreaMaxLength;if(f.needsMaxCheck){f.inputEl.on("paste",f.onPaste,f)}},transformRawValue:function(f){return this.stripReturns(f)},getValue:function(){return this.stripReturns(Ext.form.field.Text.prototype.getValue.call(this))},valueToRaw:function(f){f=this.stripReturns(f);return Ext.form.field.Text.prototype.valueToRaw.call(this,f)},stripReturns:function(f){if(f&&typeof f==="string"){f=f.replace(this.returnRe,"")}return f},onPaste:function(){var f=this;if(!f.pasteTask){f.pasteTask=new Ext.util.DelayedTask(f.pasteCheck,f)}f.pasteTask.delay(1)},pasteCheck:function(){var m=this,l=m.getValue(),n=m.maxLength;if(l.length>n){l=l.substr(0,n);m.setValue(l)}},fireKey:function(e){var o=this,p=e.getKey(),n;if(e.isSpecialKey()&&(o.enterIsSpecial||(p!==e.ENTER||e.hasModifier()))){o.fireEvent("specialkey",o,e)}if(p===e.ENTER){e.stopPropagation()}if(o.needsMaxCheck&&p!==e.BACKSPACE&&p!==e.DELETE&&!e.isNavKeyPress()&&!o.isCutCopyPasteSelectAll(e,p)){n=o.getValue();if(n.length>=o.maxLength){e.stopEvent()}}},isCutCopyPasteSelectAll:function(e,l){if(e.ctrlKey){return l===e.A||l===e.C||l===e.V||l===e.X}return false},autoSize:function(){var p=this,n,s,q,o;if(p.grow&&p.rendered&&p.getSizeModel().height.auto){n=p.inputEl;q=n.getWidth(true);o=Ext.util.Format.htmlEncode(n.dom.value)||"&#160;";o+=p.growAppend;o=o.replace(/\n/g,"<br/>");s=Ext.util.TextMetrics.measure(n,o,q).height+n.getPadding("tb")+p.inputWrap.getBorderWidth("tb")+p.triggerWrap.getBorderWidth("tb");s=Math.min(Math.max(s,p.growMin),p.growMax);p.bodyEl.setHeight(s);p.updateLayout();p.fireEvent("autosize",p,s)}},doDestroy:function(){var f=this.pasteTask;if(f){f.cancel()}Ext.form.field.Text.prototype.doDestroy.call(this)}},0,["textarea","textareafield"],["component","box","field","textfield","textareafield","textarea"],{component:true,box:true,field:true,textfield:true,textareafield:true,textarea:true},["widget.textarea","widget.textareafield"],0,[Ext.form.field,"TextArea",Ext.form,"TextArea"],0));(Ext.cmd.derive("Ext.dom.ButtonElement",Ext.dom.Element,{setSize:function(o,s,q){var n=this,p=n.component;Ext.dom.Element.prototype.setSize.call(this,o,s,q);p.btnWrap.setStyle("table-layout",(!o||o==="auto")?"":"fixed");p.btnEl.setStyle("height",(!s||s==="auto")?"":"auto");return n},setStyle:function(u,o){var p=this,s=p.component,q,t;Ext.dom.Element.prototype.setStyle.call(this,u,o);if(u){if(u==="width"||(typeof u!=="string"&&"width" in u)){q=o||u.width;s.btnWrap.setStyle("table-layout",(!q||q==="auto")?"":"fixed")}if(u==="height"||(typeof u!=="string"&&"height" in u)){t=o||u.height;s.btnEl.setStyle("height",(!t||t==="auto")?"":"auto")}}return p},setHeight:function(l,g){Ext.dom.Element.prototype.setHeight.call(this,l,g);this.component.btnEl.setStyle("height",(!l||l==="auto")?"":"auto");return this},setWidth:function(g,l){Ext.dom.Element.prototype.setWidth.call(this,g,l);this.component.btnWrap.setStyle("table-layout",(!g||g==="auto")?"":"fixed");return this}},0,0,0,0,0,0,[Ext.dom,"ButtonElement"],0));(Ext.cmd.derive("Ext.button.Manager",Ext.Base,{singleton:true,alternateClassName:"Ext.ButtonToggleManager",groups:{},pressedButton:null,init:function(){var f=this;if(!f.initialized){Ext.getDoc().on({mouseup:f.onDocumentMouseUp,scope:f});f.initialized=true}},onButtonMousedown:function(n,e){var m=this.pressedButton;if(m&&!m.destroying&&!m.destroyed){m.onMouseUp(e)}this.pressedButton=n},onDocumentMouseUp:function(e){var l=this.pressedButton;if(l&&!l.destroying&&!l.destroyed){l.onMouseUp(e);this.pressedButton=null}},toggleGroup:function(p,s){if(s){var g=this.groups[p.toggleGroup],o=g.length,q;for(q=0;q<o;q++){if(g[q]!==p){g[q].toggle(false)}}}},register:function(o){var n=this,p=this.groups,m=p[o.toggleGroup];n.init();if(!o.toggleGroup){return}if(!m){m=p[o.toggleGroup]=[]}m.push(o);o.on("toggle",n.toggleGroup,n)},unregister:function(n){if(!n.toggleGroup){return}var m=this,l=m.groups[n.toggleGroup];if(l){Ext.Array.remove(l,n);n.un("toggle",m.toggleGroup,m)}},getPressed:function(m){var n=this.groups[m],o=0,p;if(n){for(p=n.length;o<p;o++){if(n[o].pressed===true){return n[o]}}}return null}},0,0,0,0,0,0,[Ext.button,"Manager",Ext,"ButtonToggleManager"],0));(Ext.cmd.derive("Ext.menu.Manager",Ext.Base,{singleton:true,alternateClassName:"Ext.menu.MenuMgr",groups:{},visible:[],constructor:function(){var f=this;f.onShow=function(){f.registerGlobalListeners();return f.onShow.apply(f,arguments)}},onGlobalScroll:function(q){var u=this.visible,s=u.length,p,o,t=q.getElement();if(s&&q!==Ext.scroll.Scroller.viewport){u=u.slice();for(p=0;p<s;++p){o=u[p];if(!o.alignOnScroll&&o.hideOnScroll!==false&&!o.owns(t)){o.hide()}}}},checkActiveMenus:function(e){var t=this.visible,s=t.length,q,u,p=Ext.Component.fromElement(e.target);if(s){t=t.slice();for(q=0;q<s;++q){u=t[q];if(!(u.owns(e)||(p&&p.isMenuItem&&p.menu===u))){u.hide()}}}},onShow:function(f){if(f.floating){Ext.Array.include(this.visible,f)}},onHide:function(f){if(f.floating){Ext.Array.remove(this.visible,f)}},hideAll:function(){var m=this.visible,o=m.length,p=false,n;if(o){m=m.slice();for(n=0;n<o;n++){m[n].hide();p=true}}return p},get:function(l,m){var n;if(typeof l==="string"){n=Ext.getCmp(l);if(n instanceof Ext.menu.Menu){l=n}}else{if(Ext.isArray(l)){m=Ext.apply({items:l},m);l=new Ext.menu.Menu(m)}else{if(!l.isComponent){m=Ext.apply({},l,m);l=Ext.ComponentManager.create(m,"menu")}}}return l},registerCheckable:function(l){var n=this.groups,m=l.group;if(m){if(!n[m]){n[m]=[]}n[m].push(l)}},unregisterCheckable:function(l){var n=this.groups,m=l.group;if(m){Ext.Array.remove(n[m],l)}},onCheckChange:function(s,y){var w=this.groups,t=s.group,u=0,v,q,x;if(t&&y){v=w[t];q=v.length;for(;u<q;u++){x=v[u];if(x!==s){x.setChecked(false)}}}},registerGlobalListeners:function(){var f=this;delete f.onShow;Ext.on({mousedown:f.checkActiveMenus,scroll:f.onGlobalScroll,scope:f})}},1,0,0,0,0,0,[Ext.menu,"Manager",Ext.menu,"MenuMgr"],0));(Ext.cmd.derive("Ext.button.Button",Ext.Component,{alternateClassName:"Ext.Button",config:{iconAlign:"left",text:null,textAlign:"center",arrowVisible:true,glyph:null},isButton:true,_syncFrameHeight:true,liquidLayout:true,hidden:false,disabled:false,pressed:false,tabIndex:0,enableToggle:false,menuAlign:"tl-bl?",showEmptyMenu:false,clickEvent:"click",preventDefault:true,handleMouseEvents:true,tooltipType:"qtip",baseCls:"x-btn",hrefTarget:"_blank",destroyMenu:true,focusable:true,ariaRole:"button",keyMap:{scope:"this",SPACE:"onEnterKey",ENTER:"onEnterKey",DOWN:"onDownKey"},defaultBindProperty:"text",childEls:["btnEl","btnWrap","btnInnerEl","btnIconEl","arrowEl"],publishes:{pressed:1},_btnWrapCls:"x-btn-wrap",_btnCls:"x-btn-button",_baseIconCls:"x-btn-icon-el",_glyphCls:"x-btn-glyph",_innerCls:"x-btn-inner",_textCls:"x-btn-text",_noTextCls:"x-btn-no-text",_hasIconCls:"x-btn-icon",_pressedCls:"x-btn-pressed",overCls:"x-btn-over",_disabledCls:"x-btn-disabled",_menuActiveCls:"x-btn-menu-active",_arrowElCls:"x-btn-arrow-el",_focusCls:"x-btn-focus",_arrowFocusCls:"x-arrow-focus",renderTpl:'<span id="{id}-btnWrap" data-ref="btnWrap" role="presentation" unselectable="on" style="{btnWrapStyle}" class="{btnWrapCls} {btnWrapCls}-{ui} {splitCls}{childElCls}"><span id="{id}-btnEl" data-ref="btnEl" role="presentation" unselectable="on" style="{btnElStyle}" class="{btnCls} {btnCls}-{ui} {textCls} {noTextCls} {hasIconCls} {iconAlignCls} {textAlignCls} {btnElAutoHeightCls}{childElCls}"><tpl if="iconBeforeText">{[values.$comp.renderIcon(values)]}</tpl><span id="{id}-btnInnerEl" data-ref="btnInnerEl" unselectable="on" class="{innerCls} {innerCls}-{ui}{childElCls}">{text}</span><tpl if="!iconBeforeText">{[values.$comp.renderIcon(values)]}</tpl></span></span>{[values.$comp.getAfterMarkup ? values.$comp.getAfterMarkup(values) : ""]}<tpl if="closable"><span id="{id}-closeEl" data-ref="closeEl" class="{baseCls}-close-btn"><tpl if="closeText"> {closeText}</tpl></span></tpl><tpl if="split"><span id="{id}-arrowEl" class="{arrowElCls}" data-ref="arrowEl" role="button" hidefocus="on" unselectable="on"<tpl if="tabIndex != null"> tabindex="{tabIndex}"</tpl><tpl foreach="arrowElAttributes"> {$}="{.}"</tpl> style="{arrowElStyle}">{arrowElText}</span></tpl>',iconTpl:'<span id="{id}-btnIconEl" data-ref="btnIconEl" role="presentation" unselectable="on" class="{baseIconCls} {baseIconCls}-{ui} {iconCls} {glyphCls}{childElCls}" style="<tpl if="iconUrl">background-image:url({iconUrl});</tpl><tpl if="glyph"><tpl if="glyphFontFamily">font-family:{glyphFontFamily};</tpl>">{glyph}<tpl else>"></tpl></span>',scale:"small",allowedScales:["small","medium","large"],arrowAlign:"right",arrowCls:"arrow",maskOnDisable:false,shrinkWrap:3,frame:true,autoEl:{tag:"a",hidefocus:"on",unselectable:"on"},hasFrameTable:function(){return this.href&&this.frameTable},frameTableListener:function(){if(!this.disabled){this.doNavigate()}},doNavigate:function(){if(this.hrefTarget==="_blank"){window.open(this.getHref(),this.hrefTarget)}else{location.href=this.getHref()}},_triggerRegion:{},initComponent:function(){var f=this;f.addCls("x-unselectable");Ext.Component.prototype.initComponent.call(this);if(f.menu){f.split=true;f.setMenu(f.menu,false,true)}if(f.url){f.href=f.url}f.configuredWithPreventDefault=f.hasOwnProperty("preventDefault");if(f.href&&!f.configuredWithPreventDefault){f.preventDefault=false}if(Ext.isString(f.toggleGroup)&&f.toggleGroup!==""){f.enableToggle=true}if(f.html&&!f.text){f.text=f.html;delete f.html}},getElConfig:function(){var n=this,o=Ext.Component.prototype.getElConfig.call(this),p=n.getHref(),m=n.hrefTarget;if(o.tag==="a"){if(!n.disabled){o.tabIndex=n.tabIndex}if(p){if(!n.disabled){o.href=p;if(m){o.target=m}}}}if(!n.ariaStaticRoles[n.ariaRole]){if(n.menu&&!n.isSplitButton){o["aria-haspopup"]=true}if(n.enableToggle){o["aria-pressed"]=!!n.pressed}}return o},beforeRender:function(){Ext.Component.prototype.beforeRender.call(this);if(this.pressed){this.addCls(this._pressedCls)}},initRenderData:function(){return Ext.apply(Ext.Component.prototype.initRenderData.call(this),this.getTemplateArgs())},getMenu:function(){return this.menu||null},setMenu:function(w,x,q){var y=this,u=y.menu,v=y.isSplitButton?y.arrowEl&&y.arrowEl.dom:y.ariaEl.dom,t,s;if(u&&!q){if(x!==false&&y.destroyMenu){u.destroy()}u.ownerCmp=null}if(w){t=w.isMenu;w=Ext.menu.Manager.get(w,{ownerCmp:y});w.setOwnerCmp(y,t);w.menuClickBuffer=250;y.mon(w,{scope:y,show:y.onMenuShow,hide:y.onMenuHide});if(!u&&y.getArrowVisible()){y.split=true;if(y.rendered){y._addSplitCls();y.updateLayout()}}y.menu=w;if(v){v.setAttribute("aria-haspopup",true);v.setAttribute("aria-owns",w.id)}else{s=y.isSplitButton?(y.ariaArrowElAttributes||(y.ariaArrowElAttributes={})):(y.ariaRenderAttributes||(y.ariaRenderAttributes={}));s["aria-haspopup"]=true;s["aria-owns"]=w.id}}else{if(y.rendered){v.removeAttribute("aria-haspopup");v.removeAttribute("aria-owns");y._removeSplitCls();y.updateLayout()}else{s=y.isSplitButton?y.ariaArrowElAttributes:y.ariaRenderAttributes;if(s){delete s["aria-haspopup"];delete s["aria-owns"]}}y.split=false;y.menu=null}},onRender:function(){var n=this,m,p,o;Ext.Component.prototype.onRender.apply(this,arguments);p=n.el;if(n.tooltip){n.setTooltip(n.tooltip,true)}if(n.handleMouseEvents){o={scope:n,mouseover:n.onMouseOver,mouseout:n.onMouseOut,mousedown:n.onMouseDown};if(n.split){o.mousemove=n.onMouseMove}}else{o={scope:n}}if(Ext.supports.Touch){o.touchstart=n.onTouchStart}if(n.repeat){n.mon(new Ext.util.ClickRepeater(p,Ext.isObject(n.repeat)?n.repeat:{}),"click",n.onRepeatClick,n)}else{if(o[n.clickEvent]){m=true}else{o[n.clickEvent]=n.onClick}}n.mon(p,o);if(n.hasFrameTable()){n.mon(n.frameTable,"click",n.frameTableListener,n)}if(m){n.mon(p,n.clickEvent,n.onClick,n)}Ext.button.Manager.register(n)},onFocusLeave:function(e){Ext.Component.prototype.onFocusLeave.call(this,e);if(this.menu){this.menu.hide()}},getTemplateArgs:function(){var u=this,z=u._btnCls,x=u._baseIconCls,A=u.getIconAlign(),t=u.glyph,v,s=u.text,y=u._hasIcon(),w=u._hasIconCls;if(t){v=t.fontFamily;t=t.character}return{split:u.isSplitButton,innerCls:u._innerCls,splitCls:u.getArrowVisible()?u.getSplitCls():"",iconUrl:u.icon,iconCls:u.iconCls,glyph:t,glyphCls:t?u._glyphCls:"",glyphFontFamily:v,text:s||"&#160;",closeText:u.closeText,textCls:s?u._textCls:"",noTextCls:s?"":u._noTextCls,hasIconCls:y?w:"",btnWrapCls:u._btnWrapCls,btnWrapStyle:u.width?"table-layout:fixed;":"",btnElStyle:u.height?"height:auto;":"",btnCls:z,baseIconCls:x,iconBeforeText:A==="left"||A==="top",iconAlignCls:y?(w+"-"+A):"",textAlignCls:z+"-"+u.getTextAlign(),arrowElCls:u._arrowElCls,arrowElStyle:u.arrowVisible?"":"display:none",tabIndex:u.tabIndex}},renderIcon:function(f){return this.lookupTpl("iconTpl").apply(f)},setHref:function(p){var o=this,m=o.hrefTarget,n;o.href=p;if(!o.configuredWithPreventDefault){o.preventDefault=!p}if(o.rendered){n=o.el.dom;if(!p||o.disabled){n.removeAttribute("href");n.removeAttribute("hrefTarget")}else{n.href=o.getHref();if(m){n.target=m}}}},getHref:function(){var g=this,l=g.href;return l?Ext.urlAppend(l,Ext.Object.toQueryString(Ext.apply({},g.params,g.baseParams))):false},setParams:function(l){var n=this,m;n.params=l;if(n.rendered){m=n.el.dom;if(n.disabled){m.removeAttribute("href")}else{m.href=n.getHref()||""}}},getSplitCls:function(){var f=this;return f.split?(f.baseCls+"-"+f.arrowCls)+" "+(f.baseCls+"-"+f.arrowCls+"-"+f.arrowAlign):""},setIcon:function(o){o=o||"";var n=this,p=n.btnIconEl,m=n.icon||"";if(n.glyph){n.setGlyph(null)}n.icon=o;if(o!==m){if(p){p.removeCls(n.iconCls);p.setStyle("background-image",o?"url("+o+")":"");n._syncHasIconCls();if(n.didIconStateChange(m,o)){n.updateLayout()}}n.fireEvent("iconchange",n,m,o)}return n},setIconCls:function(o){o=o||"";var m=this,p=m.btnIconEl,n=m.iconCls||"";if(m.glyph){m.setGlyph(null)}m.iconCls=o;if(n!==o){if(p){p.setStyle("background-image","");p.removeCls(n);p.addCls(o);m._syncHasIconCls();if(m.didIconStateChange(n,o)){m.updateLayout()}}m.fireEvent("iconchange",m,n,o)}return m},applyGlyph:function(g,l){if(g){if(!g.isGlyph){g=new Ext.Glyph(g)}if(g.isEqual(l)){g=undefined}}return g},updateGlyph:function(o,q){var p=this,s=p.btnIconEl,n=p._glyphCls;if(s){p.icon=null;s.setStyle("background-image","");if(o){s.dom.innerHTML=o.character;s.addCls(n);s.setStyle(o.getStyle())}else{s.dom.innerHTML="";s.removeCls(n)}p._syncHasIconCls();if(p.didIconStateChange(q,o)){p.updateLayout()}}p.fireEvent("glyphchange",p,o&&o.glyphConfig,q&&q.glyphConfig);return p},setTooltip:function(l,n){var m=this;if(m.rendered){if(!n||!l){m.clearTip()}if(l){if(Ext.quickTipsActive&&Ext.isObject(l)){Ext.tip.QuickTipManager.register(Ext.apply({target:m.el.id},l));m.tooltip=l}else{m.el.dom.setAttribute(m.getTipAttr(),l)}}}else{m.tooltip=l}return m},updateIconAlign:function(u,p){var q=this,s,t,o;if(q.rendered){s=q.btnEl;t=q.btnIconEl;o=q._hasIconCls;if(p){s.removeCls(o+"-"+p)}s.addCls(o+"-"+u);if(u==="top"||u==="left"){s.insertFirst(t)}else{s.appendChild(t)}q.updateLayout()}},updateTextAlign:function(n,o){var p=this,q=p.btnEl,s=p._btnCls;if(p.rendered){q.removeCls(s+"-"+o);q.addCls(s+"-"+n)}},getTipAttr:function(){return this.tooltipType==="qtip"?"data-qtip":"title"},getRefItems:function(n){var l=this.menu,m=[];if(l){if(n){m=l.getRefItems(n)}m.unshift(l)}return m},clearTip:function(){var g=this,l=g.el;if(Ext.quickTipsActive&&Ext.isObject(g.tooltip)){Ext.tip.QuickTipManager.unregister(l)}else{l.dom.removeAttribute(g.getTipAttr())}},doDestroy:function(){var l=this,g=l.menu;if(l.rendered){l.clearTip()}Ext.destroy(l.repeater);if(g&&l.destroyMenu){l.menu=Ext.destroy(g)}Ext.button.Manager.unregister(l);Ext.Component.prototype.doDestroy.call(this)},setHandler:function(g,l){this.handler=g;if(arguments.length>1){this.scope=l}return this},updateText:function(o,s){o=o==null?"":String(o);s=s||"";var p=this,n=p.btnInnerEl,q=p.btnEl;if(p.rendered){n.setHtml(o||"&#160;");q[o?"addCls":"removeCls"](p._textCls);q[o?"removeCls":"addCls"](p._noTextCls);p.updateLayout()}p.fireEvent("textchange",p,s,o)},didIconStateChange:function(n,l){var m=Ext.isEmpty(l);return Ext.isEmpty(n)?!m:m},click:function(e){return this.onClick(e)},setPressed:function(f){return this.toggle(f!==false)},toggle:function(m,o){var n=this,p=n.ariaEl.dom;if(!n.enableToggle){return n}m=m===undefined?!n.pressed:!!m;if(n.fireEvent("beforetoggle",n,m)!==false){if(m!==n.pressed){n[m?"addCls":"removeCls"](n._pressedCls);n.pressed=m;if(p){p.setAttribute("aria-pressed",m)}if(!o){n.fireEvent("toggle",n,m);Ext.callback(n.toggleHandler,n.scope,[n,m],0,n);if(n.publishState){n.publishState("pressed",m)}}}}return n},maybeShowMenu:function(e){if(this.menu){this.showMenu(e)}},showMenu:function(p){var n=this,m=n.menu,o=!p||p.pointerType;if(m&&n.rendered){if(n.tooltip&&Ext.quickTipsActive&&n.getTipAttr()!=="title"){Ext.tip.QuickTipManager.getQuickTip().cancelShow(n.el)}if(m.isVisible()){if(o){m.hide()}else{m.focus()}}else{if(!p||n.showEmptyMenu||m.items.getCount()>0){m.autoFocus=!o;m.showBy(n.el,n.menuAlign)}}}return n},hideMenu:function(){if(this.hasVisibleMenu()){this.menu.hide()}return this},hasVisibleMenu:function(){var f=this.menu;return f&&f.rendered&&f.isVisible()},onRepeatClick:function(l,e){this.onClick(e)},onTouchStart:function(e){this.doPreventDefault(e)},onEnterKey:function(e){if(!this.href){this.onClick(e);e.stopEvent();return false}},onClick:function(e){var l=this;if(e){l.doPreventDefault(e)}if(e&&e.type!=="keydown"&&e.button){return}if(!l.disabled){l.doToggle();l.maybeShowMenu(e);l.fireHandler(e)}},doToggle:function(){var f=this;if(f.allowDepress!==false||!f.pressed){f.toggle()}},doPreventDefault:function(e){if(e&&(this.preventDefault||(this.disabled&&this.getHref()))){e.preventDefault()}},fireHandler:function(e){var l=this;if(l.fireEvent("click",l,e)!==false&&!l.destroyed){Ext.callback(l.handler,l.scope,[l,e],0,l)}},onMouseOver:function(e){var l=this;if(!l.disabled&&!e.within(l.el,true,true)){l.onMouseEnter(e)}},onMouseOut:function(e){var l=this;if(!e.within(l.el,true,true)){if(l.overMenuTrigger){l.onMenuTriggerOut(e)}l.onMouseLeave(e)}},onMouseMove:function(e){var n=this,m=n.overMenuTrigger;if(n.split){if(n.isWithinTrigger(e)){if(!m){n.onMenuTriggerOver(e)}}else{if(m){n.onMenuTriggerOut(e)}}}},isWithinTrigger:function(e){var o=this,p=o.el,s,q;s=(o.arrowAlign==="right")?e.getX()-o.getX():e.getY()-p.getY();q=o.getTriggerRegion();return s>q.begin&&s<q.end},getTriggerRegion:function(){var o=this,n=o._triggerRegion,p=o.arrowAlign==="right",q=p?"getRight":"getBottom",s=p?o.getWidth():o.getHeight();n.begin=s-(o.el[q]()-o.btnEl[q]());n.end=s;return n},onMouseEnter:function(e){this.fireEvent("mouseover",this,e)},onMouseLeave:function(e){this.fireEvent("mouseout",this,e)},onMenuTriggerOver:function(e){var m=this,n=m.arrowTooltip;m.overMenuTrigger=true;if(m.split&&n){m.btnWrap.dom.setAttribute(m.getTipAttr(),n)}m.fireEvent("menutriggerover",m,m.menu,e)},onMenuTriggerOut:function(e){var l=this;delete l.overMenuTrigger;if(l.split&&l.arrowTooltip){l.btnWrap.dom.setAttribute(l.getTipAttr(),"")}l.fireEvent("menutriggerout",l,l.menu,e)},onEnable:function(){var o=this,p=o.href,m=o.hrefTarget,n=o.el.dom;Ext.Component.prototype.onEnable.call(this);o.removeCls(o._disabledCls);n.setAttribute("tabIndex",o.tabIndex);if(p){n.href=p}if(m){n.target=m}},onDisable:function(){var l=this,g=l.el.dom;Ext.Component.prototype.onDisable.call(this);l.addCls(l._disabledCls);l.removeCls(l.overCls);g.removeAttribute("tabIndex");if(l.href){g.removeAttribute("href")}if(l.hrefTarget){g.removeAttribute("target")}},setScale:function(l){var n=this,m=n.ui.replace("-"+n.scale,"");if(!Ext.Array.contains(n.allowedScales,l)){throw ("#setScale: scale must be an allowed scale ("+n.allowedScales.join(", ")+")")}n.scale=l;n.setUI(m)},setUI:function(g){var l=this;if(l.scale&&!g.match(l.scale)){g=g+"-"+l.scale}Ext.Component.prototype.setUI.call(this,g)},onMouseDown:function(e){var l=this;if(Ext.isIE||e.pointerType==="touch"){Ext.defer(function(){var f=l.getFocusEl();if(f&&!e.defaultPrevented){f.focus()}},1)}if(!l.disabled&&e.button===0){Ext.button.Manager.onButtonMousedown(l,e);l.addCls(l._pressedCls)}},onMouseUp:function(e){var l=this;if(!l.destroyed&&e.button===0){if(!l.pressed){l.removeCls(l._pressedCls)}}},onMenuShow:function(){var f=this;f.addCls(f._menuActiveCls);f.fireEvent("menushow",f,f.menu)},onMenuHide:function(e){var l=this;l.removeCls(l._menuActiveCls);l.fireEvent("menuhide",l,l.menu)},onDownKey:function(e){var l=this;if(l.menu&&!l.disabled){l.showMenu(e);e.stopEvent();return false}},updateArrowVisible:function(g){var l=this;if(l.rendered){if(g){if(l.menu||l.isSplitButton){l.split=true;l._addSplitCls()}}else{l._removeSplitCls();l.split=false}}return g},privates:{elClsMap:{btnWrap:"_btnWrapCls",btnEl:"_btnCls",btnIconEl:"_baseIconCls",btnInnerEl:"_innerCls"},addUIToElement:function(){Ext.Component.prototype.addUIToElement.call(this);this.updateChildElsUICls(true)},addOverCls:function(){if(!this.disabled){this.addCls(this.overCls)}},_addSplitCls:function(){var f=this;f.btnWrap.addCls(f.getSplitCls())},getTdCls:function(){return"x-button-"+this.ui+"-"+this.scale+"-cell"},getValue:function(){return this.value},removeUIFromElement:function(){Ext.Component.prototype.removeUIFromElement.call(this);this.updateChildElsUICls(false)},removeOverCls:function(){this.removeCls(this.overCls)},_removeSplitCls:function(){var f=this;f.btnWrap.removeCls(f.getSplitCls())},_syncHasIconCls:function(){var m=this,n=m.btnEl,l=m._hasIconCls;if(n){n[m._hasIcon()?"addCls":"removeCls"]([l,l+"-"+m.iconAlign])}},_hasIcon:function(){return !!(this.icon||this.iconCls||this.glyph)},updateChildElsUICls:function(s){var y=this,w=y.ui,A=s?"addCls":"removeCls",x=y.elClsMap,u,z,v,t;for(u in x){z=y[u];v=x[u];t=y[v];if(z&&t){z[A](t+"-"+w)}}},wrapPrimaryEl:function(f){this.el=new Ext.dom.ButtonElement(f);Ext.Component.prototype.wrapPrimaryEl.call(this,f)}}},0,["button"],["component","box","button"],{component:true,box:true,button:true},["widget.button"],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.button,"Button",Ext,"Button"],0));(Ext.cmd.derive("Ext.layout.container.Anchor",Ext.layout.container.Auto,{alternateClassName:"Ext.layout.AnchorLayout",type:"anchor",defaultAnchor:"100%",parseAnchorRE:/^(r|right|b|bottom)$/i,manageOverflow:true,setsItemSize:true,beginLayoutCycle:function(y){var q=this,s=0,w,v,x,u,t;Ext.layout.container.Auto.prototype.beginLayoutCycle.apply(this,arguments);x=y.childItems;t=x.length;for(u=0;u<t;++u){v=x[u];w=v.target.anchorSpec;if(w){if(v.widthModel.calculated&&w.right){s|=1}if(v.heightModel.calculated&&w.bottom){s|=2}if(s===3){break}}}y.anchorDimensions=s},calculateItems:function(C,I){var L=this,Q=C.childItems,D=Q.length,N=I.gotHeight,B=I.gotWidth,E=I.height,G=I.width,H=(B?1:0)|(N?2:0),M=C.anchorDimensions,P,J,O,K,A,F;if(!M){return true}for(A=0;A<D;A++){J=Q[A];O=J.getMarginInfo();P=J.target.anchorSpec;if(B&&J.widthModel.calculated){F=P.right(G)-O.width;F=L.adjustWidthAnchor(F,J);J.setWidth(F)}if(N&&J.heightModel.calculated){K=P.bottom(E)-O.height;K=L.adjustHeightAnchor(K,J);J.setHeight(K)}}return(H&M)===M},anchorFactory:{offset:function(f){return function(e){return e+f}},ratio:function(f){return function(e){return Math.floor(e*f)}},standard:function(f){return function(e){return e-f}}},parseAnchor:function(q,n,s){if(q&&q!=="none"){var p=this.anchorFactory,o;if(this.parseAnchorRE.test(q)){return p.standard(s-n)}if(q.indexOf("%")!==-1){return p.ratio(parseFloat(q.replace("%",""))*0.01)}o=parseInt(q,10);if(!isNaN(o)){return p.offset(o)}}return null},adjustWidthAnchor:function(g,l){return g},adjustHeightAnchor:function(g,l){return g},configureItem:function(w){var p=this,u=p.owner,q=w.anchor,t,s,v;Ext.layout.container.Auto.prototype.configureItem.apply(this,arguments);if(!w.anchor&&w.items&&!Ext.isNumber(w.width)){w.anchor=q=p.defaultAnchor}if(u.anchorSize){if(typeof u.anchorSize==="number"){s=u.anchorSize}else{s=u.anchorSize.width;v=u.anchorSize.height}}else{s=u.initialConfig.width;v=u.initialConfig.height}if(q){t=q.split(" ");w.anchorSpec={right:p.parseAnchor(t[0],w.initialConfig.width,s),bottom:p.parseAnchor(t[1],w.initialConfig.height,v)}}},sizePolicy:{$:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},b:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},r:{$:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},b:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}}},getItemSizePolicy:function(p){var n=p.anchorSpec,s="$",o=this.sizePolicy,q;if(n){q=this.owner.getSizeModel();if(n.right&&!q.width.shrinkWrap){o=o.r}if(n.bottom&&!q.height.shrinkWrap){s="b"}}return o[s]}},0,0,0,0,["layout.anchor"],0,[Ext.layout.container,"Anchor",Ext.layout,"AnchorLayout"],0));(Ext.cmd.derive("Ext.util.TaskManager",Ext.util.TaskRunner,{alternateClassName:["Ext.TaskManager"],singleton:true},0,0,0,0,0,0,[Ext.util,"TaskManager",Ext,"TaskManager"],0));(Ext.cmd.derive("Ext.layout.component.ProgressBar",Ext.layout.component.Auto,{type:"progressbar",beginLayout:function(m){var o=this,p,n;Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);if(!m.textEls){n=o.owner.textEl;if(n.isComposite){m.textEls=[];n=n.elements;for(p=n.length;p--;){m.textEls[p]=m.getEl(Ext.get(n[p]))}}else{m.textEls=[m.getEl("textEl")]}}},calculate:function(n){var p=this,s,o,q;Ext.layout.component.Auto.prototype.calculate.apply(this,arguments);if(Ext.isNumber(q=n.getProp("width"))){q-=n.getBorderInfo().width;o=n.textEls;for(s=o.length;s--;){o[s].setWidth(q)}}else{p.done=false}}},0,0,0,0,["layout.progressbar"],0,[Ext.layout.component,"ProgressBar"],0));(Ext.cmd.derive("Ext.ProgressBar",Ext.Component,{baseCls:"x-progress",animate:false,text:"",waitTimer:null,childEls:["bar"],defaultBindProperty:"value",renderTpl:['<tpl if="internalText">','<div class="{baseCls}-text {baseCls}-text-back" role="presentation">{text}</div>',"</tpl>",'<div id="{id}-bar" data-ref="bar" class="{baseCls}-bar {baseCls}-bar-{ui}" role="presentation" style="width:{percentage}%">','<tpl if="internalText">','<div class="{baseCls}-text" role="presentation">','<div role="presentation">{text}</div>',"</div>","</tpl>","</div>"],componentLayout:"progressbar",ariaRole:"progressbar",focusable:true,tabIndex:0,autoEl:{"aria-valuemin":"0","aria-valuenow":"0","aria-valuemax":"100"},initRenderData:function(){var n=this,l=n.value||0,m;m=Ext.Component.prototype.initRenderData.call(this);return Ext.apply(m,{internalText:!n.hasOwnProperty("textEl"),text:n.text||Math.round(l*100)+"%",percentage:l*100})},onRender:function(){var f=this;Ext.Component.prototype.onRender.apply(this,arguments);if(f.textEl){f.textEl=Ext.get(f.textEl);f.updateText(f.text)}else{f.textEl=f.el.select("."+f.baseCls+"-text")}},afterRender:function(){var f=this;Ext.Component.prototype.afterRender.apply(this,arguments);if(f.text){f.ariaEl.dom.setAttribute("aria-valuetext",f.text)}},updateValue:function(f){this.updateProgress(f)},updateProgress:function(o,u,t){o=o||0;var p=this,s=p.value,q=p.getTextTpl();p.value=o||(o=0);if(u!=null){p.autoText=false;p.updateText(u)}else{if(q){p.autoText=false;p.updateText(q.apply({value:o,percent:o*100}))}else{if(!p.text&&p.autoText!==false){p.autoText=true;p.updateText(Math.round(o*100)+"%")}else{if(p.text&&p.ariaEl.dom){p.ariaEl.dom.removeAttribute("aria-valuetext")}}}}if(p.rendered&&!p.destroyed){if(t===true||(t!==false&&p.animate)){p.bar.stopAnimation();p.bar.animate(Ext.apply({from:{width:(s*100)+"%"},to:{width:(o*100)+"%"}},p.animate))}else{p.bar.setStyle("width",(o*100)+"%")}p.ariaEl.dom.setAttribute("aria-valuenow",Math.round(o*100))}p.fireEvent("update",p,o,u);return p},updateText:function(g){var l=this;if(!l.autoText){l.text=g}if(l.rendered){l.textEl.setHtml(g);if(!l.autoText){l.ariaEl.dom.setAttribute("aria-valuetext",g)}else{l.ariaEl.dom.removeAttribute("aria-valuetext")}}return l},applyText:function(f){this.updateText(f)},getText:function(){return this.text},wait:function(l){var m=this,n;if(!m.waitTimer){n=m;l=l||{};if(l.text!=null){m.autoText=false}m.updateText(l.text);m.waitTimer=Ext.TaskManager.start({run:function(f){var e=l.increment||10;f-=1;m.updateProgress(((((f+e)%e)+1)*(100/e))*0.01,null,l.animate)},interval:l.interval||1000,duration:l.duration,onStop:function(){if(l.fn){l.fn.apply(l.scope||m)}m.reset()},scope:n})}return m},isWaiting:function(){return this.waitTimer!==null},reset:function(l){var g=this;g.updateProgress(0);g.clearTimer();if(l===true){g.hide()}if(g.rendered){g.ariaEl.dom.removeAttribute("aria-valuetext")}return g},clearTimer:function(){var f=this;if(f.waitTimer){f.waitTimer.onStop=null;Ext.TaskManager.stop(f.waitTimer);f.waitTimer=null}},doDestroy:function(){var g=this,l=g.bar;g.clearTimer();if(g.rendered){if(g.textEl.isComposite){g.textEl.clear()}Ext.destroyMembers(g,"textEl","progressBar");if(l&&g.animate){l.stopAnimation()}}Ext.Component.prototype.doDestroy.call(this)}},0,["progressbar"],["component","box","progressbar"],{component:true,box:true,progressbar:true},["widget.progressbar"],[[Ext.ProgressBase.prototype.mixinId||Ext.ProgressBase.$className,Ext.ProgressBase]],[Ext,"ProgressBar"],0));(Ext.cmd.derive("Ext.window.MessageBox",Ext.window.Window,{OK:1,YES:2,NO:4,CANCEL:8,OKCANCEL:9,YESNO:6,YESNOCANCEL:14,INFO:"x-message-box-info",WARNING:"x-message-box-warning",QUESTION:"x-message-box-question",ERROR:"x-message-box-error",hideMode:"offsets",closeAction:"hide",resizable:false,scrollable:true,title:"&#160;",defaultMinWidth:250,defaultMaxWidth:600,defaultMinHeight:110,defaultMaxHeight:500,minWidth:null,maxWidth:null,minHeight:null,maxHeight:null,constrain:true,cls:["x-message-box","x-hidden-offsets"],layout:{type:"vbox",align:"stretch"},shrinkWrapDock:true,defaultTextHeight:75,minProgressWidth:250,minPromptWidth:250,buttonText:{ok:"OK",yes:"Yes",no:"No",cancel:"Cancel"},buttonIds:["ok","yes","no","cancel"],titleText:{confirm:"Confirm",prompt:"Prompt",wait:"Loading...",alert:"Attention"},baseIconCls:"x-message-box-icon",ariaRole:"alertdialog",makeButton:function(l){var g=this.buttonIds[l];return new Ext.button.Button({handler:this.btnCallback,itemId:g,scope:this,text:this.buttonText[g],minWidth:75})},btnCallback:function(s,p){var q=this,o,n;if(p&&p.type==="keydown"&&!p.isSpecialKey()){p.getTarget(null,null,true).on({keyup:function(e){q.btnCallback(s,e)},single:true});return}if(q.cfg.prompt||q.cfg.multiline){if(q.cfg.multiline){n=q.textArea}else{n=q.textField}o=n.getValue();n.reset()}q.hide();q.userCallback(s.itemId,o,q.cfg)},hide:function(){var g=this,l=g.cfg?g.cfg.cls:"";g.progressBar.reset();if(l){g.removeCls(l)}Ext.window.Window.prototype.hide.apply(this,arguments)},constructor:function(l){var g=this;Ext.window.Window.prototype.constructor.apply(this,arguments);g.minWidth=g.defaultMinWidth=(g.minWidth||g.defaultMinWidth);g.maxWidth=g.defaultMaxWidth=(g.maxWidth||g.defaultMaxWidth);g.minHeight=g.defaultMinHeight=(g.minHeight||g.defaultMinHeight);g.maxHeight=g.defaultMaxHeight=(g.maxHeight||g.defaultMaxHeight)},initComponent:function(s){var n=this,q=n.id,o,p;n.title=n.title||"&#160;";n.iconCls=n.iconCls||"";n.topContainer=new Ext.container.Container({layout:"hbox",padding:10,style:{overflow:"hidden"},items:[n.iconComponent=new Ext.Component({cls:n.baseIconCls}),n.promptContainer=new Ext.container.Container({flex:1,layout:{type:"vbox",align:"stretch"},items:[n.msg=new Ext.Component({id:q+"-msg",cls:n.baseCls+"-text"}),n.textField=new Ext.form.field.Text({id:q+"-textfield",enableKeyEvents:true,ariaAttributes:{"aria-labelledby":n.msg.id},listeners:{keydown:n.onPromptKey,scope:n}}),n.textArea=new Ext.form.field.TextArea({id:q+"-textarea",height:75,ariaAttributes:{"aria-labelledby":n.msg.id}})]})]});n.progressBar=new Ext.ProgressBar({id:q+"-progressbar",margin:"0 10 10 10"});n.items=[n.topContainer,n.progressBar];n.msgButtons=[];for(o=0;o<4;o++){p=n.makeButton(o);n.msgButtons[p.itemId]=p;n.msgButtons.push(p)}n.bottomTb=new Ext.toolbar.Toolbar({id:q+"-toolbar",ui:"footer",dock:"bottom",enableFocusableContainer:false,ariaRole:null,layout:{pack:"center"},items:[n.msgButtons[0],n.msgButtons[1],n.msgButtons[2],n.msgButtons[3]]});n.dockedItems=[n.bottomTb];n.on("close",n.onClose,n);Ext.window.Window.prototype.initComponent.call(this)},afterRender:function(){var f=this;Ext.window.Window.prototype.afterRender.apply(this,arguments);f.textField.labelEl.dom.removeAttribute("for");f.textArea.labelEl.dom.removeAttribute("for")},onClose:function(){var f=this.msgButtons[3];if(f){this.btnCallback(f)}},onPromptKey:function(n,e){var m=this;if(e.keyCode===e.RETURN||e.keyCode===10){if(m.msgButtons.ok.isVisible()){m.msgButtons.ok.handler.call(m,m.msgButtons.ok)}else{if(m.msgButtons.yes.isVisible()){m.msgButtons.yes.handler.call(m,m.msgButtons.yes)}}}},reconfigure:function(Z){var R=this,G=0,T=true,O=R.buttonText,X=R.resizer,I=R.header,S=I&&!I.isHeader,Y=Z&&(Z.message||Z.msg),W=Z.buttonTips,Q,ac,M,K,P,H,V,U,aa,N,J,L,ab;R.updateButtonText();R.cfg=Z=Z||{};L=Z.wait;if(Z.width){K=Z.width}if(Z.height){P=Z.height}R.minWidth=Z.minWidth||R.defaultMinWidth;R.maxWidth=Z.maxWidth||R.defaultMaxWidth;R.minHeight=Z.minHeight||R.defaultMinHeight;R.maxHeight=Z.maxHeight||R.defaultMaxHeight;if("maskClickAction" in Z){R.maskClickAction=Z.maskClickAction}else{delete R.maskClickAction}if(X){M=X.resizeTracker;X.minWidth=M.minWidth=R.minWidth;X.maxWidth=M.maxWidth=R.maxWidth;X.minHeight=M.minHeight=R.minHeight;X.maxHeight=M.maxHeight=R.maxHeight}delete R.defaultFocus;if(Z.defaultFocus){R.defaultFocus=Z.defaultFocus}R.animateTarget=Z.animateTarget||undefined;R.modal=Z.modal!==false;if(Z.title!=null){Q=Z.title}else{if(S&&I.title!=null){Q=I.title}else{Q=R.title}}if(Z.iconCls!=null){ac=Z.iconCls}else{if(S&&I.iconCls!=null){ac=I.iconCls}else{ac=R.iconCls}}R.setTitle(Q);R.setIconCls(ac);if(Ext.isObject(Z.buttons)){R.buttonText=Z.buttons;G=0}else{R.buttonText=Z.buttonText||R.buttonText;G=Ext.isNumber(Z.buttons)?Z.buttons:0}Ext.each(R.buttonIds,function(e){R.msgButtons[e].setTooltip((W&&W[e])||null)});G=G|R.updateButtonText();R.buttonText=O;Ext.suspendLayouts();R.width=R.height=null;if(K||P){if(K){R.setWidth(K)}if(P){R.setHeight(P)}}if(!R.rendered){R.render(Ext.getBody())}R.closable=Z.closable!==false&&!L;I=R.header;if(I){ab=I.child("[type=close]");if(ab){ab.setVisible(R.closable)}if(!Z.title&&!R.closable&&!Z.iconCls){I.hide()}else{I.show()}}R.liveDrag=!Z.proxyDrag;R.userCallback=Ext.Function.bindCallback(Z.callback||Z.fn||Ext.emptyFn,Z.scope||Ext.global);R.setIcon(Z.icon);aa=R.msg;if(Y){aa.setHtml(Y);aa.show();R.ariaEl.dom.setAttribute("aria-describedby",aa.id)}else{aa.hide();R.ariaEl.dom.removeAttribute("aria-describedby")}V=R.textArea;U=R.textField;if(Z.prompt||Z.multiline){R.multiline=Z.multiline;if(Z.multiline){V.setValue(Z.value);V.setHeight(Z.defaultTextHeight||R.defaultTextHeight);V.show();U.hide();R.defaultFocus=V}else{U.setValue(Z.value);V.hide();U.show();R.defaultFocus=U}R.ariaEl.dom.removeAttribute("aria-describedby")}else{V.hide();U.hide()}N=R.progressBar;if(Z.progress||L){N.show();R.updateProgress(0,Z.progressText);R.defaultFocus=N;if(L){N.wait(L===true?Z.waitConfig:L)}}else{N.hide()}J=R.msgButtons;for(H=0;H<4;H++){if(G&Math.pow(2,H)){if(!R.defaultFocus){R.defaultFocus=J[H]}J[H].show();T=false}else{J[H].hide()}}if(T){R.bottomTb.hide()}else{R.bottomTb.show()}Ext.resumeLayouts(true)},updateButtonText:function(){var o=this,p=o.buttonText,q=0,n,s;for(n in p){if(p.hasOwnProperty(n)){s=o.msgButtons[n];if(s){if(o.cfg&&o.cfg.buttonText){q=q|Math.pow(2,Ext.Array.indexOf(o.buttonIds,n))}if(s.text!==p[n]){s.setText(p[n])}}}}return q},show:function(n){var l=this,m;n=n||{};if(Ext.Component.layoutSuspendCount){Ext.on({resumelayouts:function(){l.show(n)},single:true});return l}l.reconfigure(n);if(n.cls){l.addCls(n.cls)}m=l.query("textfield:not([hidden]),textarea:not([hidden]),button:not([hidden])");l.preventFocusOnActivate=!m.length;Ext.window.Window.prototype.show.call(this);return l},onShow:function(){Ext.window.Window.prototype.onShow.apply(this,arguments);this.center()},updateText:function(f){this.msg.setHtml(f)},setIcon:function(p,q,t){var o=this,u=o.iconComponent,s=o.messageIconCls;if(s){u.removeCls(s)}if(p){u.show();if(q||t){u.setSize(q||u.getWidth(),t||u.getHeight())}u.addCls("x-dlg-icon");u.addCls(o.messageIconCls=p)}else{u.removeCls("x-dlg-icon");u.hide()}return o},updateProgress:function(l,n,m){this.progressBar.updateProgress(l,n);if(m){this.updateText(m)}return this},onEsc:function(){if(this.closable!==false){Ext.window.Window.prototype.onEsc.apply(this,arguments)}},confirm:function(p,m,n,o){if(Ext.isString(p)){p={title:p,icon:this.QUESTION,message:m,buttons:this.YESNO,callback:n,scope:o}}return this.show(p)},prompt:function(u,p,q,s,t,o){if(Ext.isString(u)){u={prompt:true,title:u,minWidth:this.minPromptWidth,message:p,buttons:this.OKCANCEL,callback:q,scope:s,multiline:t,value:o}}return this.show(u)},wait:function(m,l,n){if(Ext.isString(m)){m={title:l,message:m,closable:false,wait:true,modal:true,minWidth:this.minProgressWidth,waitConfig:n}}return this.show(m)},alert:function(m,n,o,p){if(Ext.isString(m)){m={title:m,message:n,buttons:this.OK,fn:o,scope:p,minWidth:this.minWidth}}return this.show(m)},progress:function(l,m,n){if(Ext.isString(l)){l={title:l,message:m,progress:true,progressText:n}}return this.show(l)}},1,["messagebox"],["component","box","container","panel","window","messagebox"],{component:true,box:true,container:true,panel:true,window:true,messagebox:true},["widget.messagebox"],0,[Ext.window,"MessageBox"],function(f){Ext.onInternalReady(function(){Ext.MessageBox=Ext.Msg=new f()})}));(Ext.cmd.derive("Ext.form.field.Picker",Ext.form.field.Text,{alternateClassName:"Ext.form.Picker",config:{triggers:{picker:{handler:"onTriggerClick",scope:"this",focusOnMousedown:true}}},renderConfig:{editable:true},keyMap:{scope:"this",DOWN:"onDownArrow",ESC:"onEsc"},keyMapTarget:"inputEl",isPickerField:true,matchFieldWidth:true,pickerAlign:"tl-bl?",openCls:"x-pickerfield-open",isExpanded:false,applyTriggers:function(m){var l=this,n=m.picker;if(!n.cls){n.cls=l.triggerCls}return Ext.form.field.Text.prototype.applyTriggers.call(this,m)},getSubTplData:function(o){var n=this,m,p;m=Ext.form.field.Text.prototype.getSubTplData.call(this,o);if(!n.ariaStaticRoles[n.ariaRole]){p=m.ariaElAttributes;if(p){p["aria-haspopup"]=true;p["aria-expanded"]=false}}return m},initEvents:function(){Ext.form.field.Text.prototype.initEvents.call(this);if(Ext.isGecko){this.inputEl.dom.setAttribute("autocomplete","off")}},updateEditable:function(n,l){var m=this;if(!n){m.inputEl.on("click",m.onTriggerClick,m)}else{m.inputEl.un("click",m.onTriggerClick,m)}Ext.form.field.Text.prototype.updateEditable.call(this,n,l)},onEsc:function(e){if(Ext.isIE){e.preventDefault()}if(this.isExpanded){this.collapse();e.stopEvent()}},onDownArrow:function(e){var l=this;if((e.time-l.lastDownArrow)>150){delete l.lastDownArrow}if(!l.isExpanded){e.stopEvent();l.onTriggerClick(e);l.lastDownArrow=e.time}else{if(!e.stopped&&(e.time-l.lastDownArrow)<150){delete l.lastDownArrow}}},expand:function(){var n=this,p,o,m;if(n.rendered&&!n.isExpanded&&!n.destroyed){p=n.bodyEl;o=n.getPicker();m=Ext.getDoc();o.setMaxHeight(o.initialConfig.maxHeight);if(n.matchFieldWidth){o.setWidth(n.bodyEl.getWidth())}o.show();n.isExpanded=true;n.alignPicker();p.addCls(n.openCls);if(!n.ariaStaticRoles[n.ariaRole]){if(!n.ariaEl.dom.hasAttribute("aria-owns")){n.ariaEl.dom.setAttribute("aria-owns",o.listEl?o.listEl.id:o.el.id)}n.ariaEl.dom.setAttribute("aria-expanded",true)}n.touchListeners=m.on({translate:false,touchstart:n.collapseIf,scope:n,delegated:false,destroyable:true});n.scrollListeners=Ext.on({scroll:n.onGlobalScroll,scope:n,destroyable:true});Ext.on("resize",n.alignPicker,n,{buffer:1});n.fireEvent("expand",n);n.onExpand()}},onExpand:Ext.emptyFn,alignPicker:function(){var g=this,l;if(g.rendered&&!g.destroyed){l=g.getPicker();if(l.isVisible()&&l.isFloating()){g.doAlign()}}},doAlign:function(){var n=this,p=n.picker,s="-above",o,q;p.el.alignTo(n.triggerWrap,n.pickerAlign,n.pickerOffset);o=p.floatParent?p.getOffsetsTo(p.floatParent.getTargetEl()):p.getXY();p.x=o[0];p.y=o[1];q=p.el.getY()<n.inputEl.getY();n.bodyEl[q?"addCls":"removeCls"](n.openCls+s);p[q?"addCls":"removeCls"](p.baseCls+s)},collapse:function(){var m=this;if(m.isExpanded&&!m.destroyed&&!m.destroying){var n=m.openCls,o=m.picker,p="-above";o.hide();m.isExpanded=false;m.bodyEl.removeCls([n,n+p]);o.el.removeCls(o.baseCls+p);if(!m.ariaStaticRoles[m.ariaRole]){m.ariaEl.dom.setAttribute("aria-expanded",false)}m.touchListeners.destroy();m.scrollListeners.destroy();Ext.un("resize",m.alignPicker,m);m.fireEvent("collapse",m);m.onCollapse()}},onCollapse:Ext.emptyFn,collapseIf:function(e){var l=this;if(!l.destroyed&&!e.within(l.bodyEl,false,true)&&!l.owns(e.target)&&!Ext.fly(e.target).isFocusable()){l.collapse()}},getPicker:function(){var g=this,l=g.picker;if(!l){g.creatingPicker=true;g.picker=l=g.createPicker();l.ownerCmp=g;delete g.creatingPicker}return g.picker},onFocusLeave:function(e){this.collapse();Ext.form.field.Text.prototype.onFocusLeave.call(this,e)},getRefItems:function(){var f=[];if(this.picker){f[0]=this.picker}return f},createPicker:Ext.emptyFn,onTriggerClick:function(e){var l=this;if(!l.readOnly&&!l.disabled){if(l.isExpanded){l.collapse()}else{l.expand()}}},doDestroy:function(){var g=this,l=g.picker;Ext.un("resize",g.alignPicker,g);Ext.destroy(g.keyNav,l);if(l){g.picker=l.pickerField=null}Ext.form.field.Text.prototype.doDestroy.call(this)},privates:{onGlobalScroll:function(f){if(!this.picker.owns(f.getElement())){this.collapse()}}}},0,["pickerfield"],["component","box","field","textfield","pickerfield"],{component:true,box:true,field:true,textfield:true,pickerfield:true},["widget.pickerfield"],0,[Ext.form.field,"Picker",Ext.form,"Picker"],0));(Ext.cmd.derive("Ext.util.ObjectTemplate",Ext.Base,{isObjectTemplate:true,excludeProperties:{},valueRe:/^[{][a-z\.]+[}]$/i,statics:{create:function(g,l){return g.isObjectTemplate?g:new Ext.util.ObjectTemplate(g,l)}},constructor:function(g,l){Ext.apply(this,l);this.template=g},apply:function(l){var g=this;delete g.apply;g.apply=g.compile(g.template);return g.apply(l)},privates:{compile:function(p){var w=this,t=w.excludeProperties,v,s,u,q;if(Ext.isString(p)){if(p.indexOf("{")<0){q=function(){return p}}else{if(w.valueRe.test(p)){p=p.substring(1,p.length-1).split(".");q=function(e){for(var g=e,f=0;g&&f<p.length;++f){g=g[p[f]]}return g}}else{p=new Ext.XTemplate(p);q=function(e){return p.apply(e)}}}}else{if(!p||Ext.isPrimitive(p)||Ext.isFunction(p)){q=function(){return p}}else{if(p instanceof Array){v=[];for(s=0,u=p.length;s<u;++s){v[s]=w.compile(p[s])}q=function(e){var g=[],f;for(f=0;f<u;++f){g[f]=v[f](e)}return g}}else{v={};for(s in p){if(!t[s]){v[s]=w.compile(p[s])}}q=function(e){var g={},f,l;for(f in p){l=t[f]?p[f]:v[f](e);if(l!==undefined){g[f]=l}}return g}}}}return q}}},1,0,0,0,0,0,[Ext.util,"ObjectTemplate"],0));(Ext.cmd.derive("Ext.data.schema.Role",Ext.Base,{isRole:true,left:true,owner:false,side:"left",isMany:false,defaultReaderType:"json",_internalReadOptions:{recordsOnly:true,asRoot:true},constructor:function(o,n){var m=this,p=n.extra;Ext.apply(m,n);if(p){p=Ext.apply({},p);delete p.type;Ext.apply(m,p);delete m.extra}m.association=o;if(o.owner===m.side){o.owner=m;m.owner=true}},processUpdate:function(){Ext.raise('Only the "many" for an association may be processed. "'+this.role+'" is not valid.')},processLoad:function(o,n,p,m){return p},checkMembership:Ext.emptyFn,adoptAssociated:function(m,l){var n=this.getAssociatedItem(m);if(n){l.adopt(n)}},$roleFilterId:"$associationRoleFilter",createAssociationStore:function(y,F,z,E){var w=this,A=w.association,x=A.getFieldName(),v=A.isManyToMany,C=w.storeConfig,D=F.getId(),B={asynchronousLoad:false,model:w.cls,role:w,session:y,associatedEntity:F,disableMetaChangeEvent:true,pageSize:null,remoteFilter:true,trackRemoved:!y},G;if(v){B.filters=[{id:w.$roleFilterId,property:w.inverse.field,value:D,exactMatch:true}]}else{if(x){B.filters=[{id:w.$roleFilterId,property:x,value:D,exactMatch:true}];B.foreignKeyName=x}}if(C){Ext.apply(B,C)}G=Ext.Factory.store(B);w.onStoreCreate(G,y,D);if(x||(v&&y)){G.on({scope:w,add:"onAddToMany",remove:"onRemoveFromMany",clear:"onRemoveFromMany"})}if(z){G.loadData(z)}G.complete=!!E;return G},onStoreCreate:Ext.emptyFn,getAssociatedStore:function(G,U,X,E,O){var M=this,I=M.getStoreName(),T=G[I],Y=G.session,L=U&&U.reload,H=G.$source,S=false,K=false,P,W,F,R,J,Q,V,N;if(!T){if(Y){if(H){K=H.phantom}if(!E&&H){V=H[I];if(V&&!V.isLoading()){E=[];J=V.getData().items;for(F=0,R=J.length;F<R;++F){Q=J[F];E.push(Y.getRecord(Q.self,Q.id))}S=!!V.complete;P=true}}if(!P){N=!!E;E=M.findRecords(Y,G,E,O);if(!N&&(!E||!E.length)){E=null}S=K||N}}else{S=!!E}T=M.createAssociationStore(Y,G,E,S||G.phantom);T.$source=V;if(!E&&(M.autoLoad||U)){L=true}G[I]=T}if(U){if(L||T.isLoading()){T.on("load",function(f,g,e,l){W=[f,l];X=X||U.scope||G;if(e){Ext.callback(U.success,X,W)}else{Ext.callback(U.failure,X,W)}W.push(e);Ext.callback(U,X,W);Ext.callback(U.callback,X,W)},null,{single:true})}else{W=[T,null];X=X||U.scope||G;Ext.callback(U.success,X,W);W.push(true);Ext.callback(U,X,W);Ext.callback(U.callback,X,W)}}if(L&&!T.isLoading()){T.load()}return T},getAssociatedItem:function(g){var l=this.isMany?this.getStoreName():this.getInstanceName();return g[l]||null},onDrop:Ext.emptyFn,onIdChanged:Ext.emptyFn,getReaderRoot:function(){var f=this;return f.associationKey||(f.associationKey=f.association.schema.getNamer().readerRoot(f.role))},getReader:function(){var p=this,s=p.reader,o=p.cls,n=!p.associationKey,q=this.getReaderRoot();if(s&&!s.isReader){if(Ext.isString(s)){s={type:s}}Ext.applyIf(s,{model:o,rootProperty:q,useSimpleAccessors:n,type:p.defaultReaderType});s=p.reader=Ext.createByAlias("reader."+s.type,s)}return s},getInstanceName:function(){var f=this;return f.instanceName||(f.instanceName=f.association.schema.getNamer().instanceName(f.role))},getOldInstanceName:function(){return this.oldInstanceName||(this.oldInstanceName="$old"+this.getInstanceName())},getStoreName:function(){var f=this;return f.storeName||(f.storeName=f.association.schema.getNamer().storeName(f.role))},constructReader:function(q){var y=this,w=y.getReader(),x=y.cls,v=!y.associationKey,u=y.getReaderRoot(),t,s;if(!w){s=x.getProxy();if(s){t=s.getReader();w=new t.self();w.copyFrom(t);w.setRootProperty(u)}else{w=new q.self({model:x,useSimpleAccessors:v,rootProperty:u})}y.reader=w}return w},read:function(q,u,p,o){var t=this.constructReader(p),s=t.getRoot(u);if(s){return t.readRecords(s,o,this._internalReadOptions)}},getCallbackOptions:function(n,m,l){if(typeof n==="function"){n={callback:n,scope:m||l}}else{if(n){n=Ext.apply({},n);n.scope=m||n.scope||l}}return n},doGetFK:function(D,F,H){var x=this,G=x.cls,A=x.association.getFieldName(),I=x.getInstanceName(),w=D[I],E=F&&F.reload,B=w!==undefined&&!E,y=D.session,C,z;if(!B){if(y){C=D.get(A);if(C||C===0){B=y.peekRecord(G,C,true)&&!E;w=y.getRecord(G,C,false)}else{B=true;D[I]=w=null}}else{if(A){C=D.get(A);if(!C&&C!==0){B=true;D[I]=w=null}else{if(!w){w=G.createWithId(C)}}}else{B=true;w=null}}}else{if(w){B=!w.isLoading()}}if(B){if(F){z=[w,null];H=H||F.scope||D;Ext.callback(F.success,H,z);z.push(true);Ext.callback(F,H,z);Ext.callback(F.callback,H,z)}}else{D[I]=w;F=x.getCallbackOptions(F,H,D);w.load(F)}return w},doSetFK:function(E,w,F,G){var x=this,z=x.association.getFieldName(),I=x.getInstanceName(),A=E[I],C=x.inverse,B=C.setterName,y=E.session,H,D;if(w&&w.isEntity){if(A!==w){D=x.getOldInstanceName();E[D]=A;E[I]=w;if(A&&A.isEntity){A[C.getInstanceName()]=undefined}if(z){E.set(z,w.getId())}delete E[D];E.onAssociatedRecordSet(w,x);if(B){w[B](E)}}}else{H=(E.changingKey&&!C.isMany)||E.set(z,w);if(H&&A&&A.isEntity&&!A.isEqual(A.getId(),w)){E[I]=undefined;if(!C.isMany){A[C.getInstanceName()]=undefined}}}if(F){if(Ext.isFunction(F)){F={callback:F,scope:G||E}}return E.save(F)}}},1,0,0,0,0,0,[Ext.data.schema,"Role"],0));(Ext.cmd.derive("Ext.data.schema.Association",Ext.Base,{isOneToOne:false,isManyToOne:false,isManyToMany:false,owner:null,field:null,constructor:function(p){var n=this,m,o;Ext.apply(n,p);n.left=m=new n.Left(n,n.left);n.right=o=new n.Right(n,n.right);m.inverse=o;o.inverse=m},hasField:function(){return !!this.field},getFieldName:function(){var f=this.field;return f?f.name:""}},1,0,0,0,0,0,[Ext.data.schema,"Association"],0));(Ext.cmd.derive("Ext.data.schema.OneToOne",Ext.data.schema.Association,{isOneToOne:true,isToOne:true,kind:"one-to-one",Left:Ext.define(null,{extend:"Ext.data.schema.Role",onDrop:function(n,m){var l=this.getAssociatedItem(n);n[this.getInstanceName()]=null;if(l){l[this.inverse.getInstanceName()]=null}},onIdChanged:function(s,p,q){var n=this.getAssociatedItem(s),o=this.association.getFieldName();if(!s.session&&n&&o){n.set(o,q)}},createGetter:function(){var f=this;return function(){return f.doGet(this)}},createSetter:function(){var f=this;return function(e){return f.doSet(this,e)}},doGet:function(p){var o=this.getInstanceName(),n=p[o],m=p.session;if(!n&&m){}return n||null},doSet:function(s,n){var q=this.getInstanceName(),o=s[q],p=this.inverse.setterName;if(o!==n){s[q]=n;if(p){n[p](s)}s.onAssociatedRecordSet(n,this)}return o},read:function(u,q,t,p){var s=this,w=s.callParent([u,q,t,p]),v;if(w){v=w[0];if(v){v[s.inverse.getInstanceName()]=u;u[s.getInstanceName()]=v;delete u.data[s.role]}}}}),Right:Ext.define(null,{extend:"Ext.data.schema.Role",left:false,side:"right",createGetter:function(){var f=this;return function(l,e){return f.doGetFK(this,l,e)}},createSetter:function(){var f=this;return function(e,n,m){return f.doSetFK(this,e,n,m)}},onDrop:function(u,p){var s=this,q=s.association.field,t=s.getAssociatedItem(u),o;if(s.inverse.owner){if(p&&q){o=u.get(q.name);if(o||o===0){t=p.getEntry(s.cls,o).record;if(t){t.drop()}}}else{if(t){t.drop()}}}if(q){u.set(q.name,null)}u[s.getInstanceName()]=null;if(t){t[s.inverse.getInstanceName()]=null}},onValueChange:function(w,x,y){var q=this,v=w[q.getOldInstanceName()]||q.getAssociatedItem(w),s=y||y===0,t=q.getInstanceName(),u=q.cls;w.changingKey=true;q.doSetFK(w,y);if(!s){w[t]=null}else{if(x&&u){w[t]=x.peekRecord(u,y)||undefined}}if(q.inverse.owner&&v){q.association.schema.queueKeyCheck(v,q)}w.changingKey=false},checkKeyForDrop:function(l){var g=this.inverse.getAssociatedItem(l);if(!g){l.drop()}},read:function(D,C,H,B){var y=this,J=y.callParent([D,C,H,B]),M,K,I,z,L,F,E,G,A;if(J){M=J[0];K=y.association.field;if(K){I=K.name}z=D.session;A=D.data;if(M){if(z){L=z.getRefs(M,this.inverse,true);G=(L&&L[D.id])||(A[I]===undefined)}else{G=true}if(G){if(K){E=A[I];F=M.id;if(E!==F){A[I]=F;if(z){z.updateReference(D,K,F,E)}}}M[y.inverse.getInstanceName()]=D;D[y.getInstanceName()]=M}delete A[y.role]}}}})},0,0,0,0,0,0,[Ext.data.schema,"OneToOne"],0));(Ext.cmd.derive("Ext.data.schema.ManyToOne",Ext.data.schema.Association,{isManyToOne:true,isToOne:true,kind:"many-to-one",Left:Ext.define(null,{extend:"Ext.data.schema.Role",isMany:true,onDrop:function(u,w){var v=this,s=v.getAssociatedItem(u),z,x,y,t,A;if(s){z=s.removeAll();if(z&&v.inverse.owner){for(y=0,x=z.length;y<x;++y){z[y].drop()}}s.destroy();u[v.getStoreName()]=null}else{if(w){z=w.getRefs(u,v);if(z){for(A in z){z[A].drop()}}}}},onIdChanged:function(u,z,y){var s=this.association.getFieldName(),t=this.getAssociatedItem(u),x,w,v,A;if(t){A=t.getFilters().get(this.$roleFilterId);if(A){A.setValue(y)}if(!u.session&&s){x=t.getDataSource().items;for(w=0,v=x.length;w<v;++w){x[w].set(s,y)}}}},processUpdate:function(v,z){var u=this,x=u.inverse.cls,w=z.R,A,t,s,y;if(w){for(A in w){t=v.peekRecord(x,A);if(t){y=v.getEntityList(u.cls,w[A]);s=u.getAssociatedItem(t);if(s){s.loadData(y);s.complete=true}else{t[u.getterName](null,null,y)}}else{v.onInvalidAssociationEntity(x,A)}}}},findRecords:function(x,w,B,F){var y=B,I=x.getRefs(w,this,true),H=this.association.field,G,C,D,A,z,E;if(H&&(I||F)){G=H.name;y=[];if(B){E={};for(A=0,z=B.length;A<z;++A){C=B[A];D=C.id;if(I&&I[D]){y.push(C)}else{if(F&&C.data[G]===undefined){y.push(C);C.data[G]=w.id;x.updateReference(C,H,w.id,undefined)}}E[D]=true}}if(I){for(D in I){if(!E||!E[D]){y.push(I[D])}}}}return y},processLoad:function(q,s,n,o){var p=n;if(o){p=this.findRecords(o,s,n,true)}this.onLoadMany(s,p,o);return p},adoptAssociated:function(s,u){var q=this.getAssociatedItem(s),o,p,t;if(q){q.setSession(u);o=q.getData().items;for(p=0,t=o.length;p<t;++p){u.adopt(o[p])}}},createGetter:function(){var f=this;return function(n,m,e){return f.getAssociatedStore(this,n,m,e,true)}},createSetter:null,onAddToMany:function(l,g){this.syncFK(g,l.getAssociatedEntity(),false)},onLoadMany:function(G,z,v){var E=this.inverse.getInstanceName(),C=G.getId(),F=this.association.field,x,w,A,B,y,D;if(F){for(x=0,w=z.length;x<w;++x){A=z[x];A[E]=G;if(F){D=F.name;y=A.data;B=y[D];if(B!==C){y[D]=C;if(v){v.updateReference(A,F,C,B)}}}}}},onRemoveFromMany:function(l,g){this.syncFK(g,l.getAssociatedEntity(),true)},read:function(v,B,C,z){var w=this,t=w.inverse.getInstanceName(),A=w.callParent([v,B,C,z]),u,x,y;if(A){u=v[w.getterName](null,null,A);delete v.data[w.role];A=u.getData().items;for(y=0,x=A.length;y<x;++y){A[y][t]=v}}},syncFK:function(z,G,F){var v=this.association.getFieldName(),x=this.inverse,y=x.setterName,E=x.getInstanceName(),w=z.length,C=G.getId(),D,A,B;while(w-->0){A=z[w];D=!A.isEqual(C,A.get(v));B=F?null:G;if(D!==F){A.changingKey=true;A[y](B);A.changingKey=false}else{A[E]=B}}}}),Right:Ext.define(null,{extend:"Ext.data.schema.Role",left:false,side:"right",onDrop:function(l,m){var n=this.association.field;if(n){l.set(n.name,null)}l[this.getInstanceName()]=null},createGetter:function(){var f=this;return function(l,e){return f.doGetFK(this,l,e)}},createSetter:function(){var f=this;return function(n,m,e){return f.doSetFK(this,n,m,e)}},checkMembership:function(n,m){var o=this.association.field,p;if(o){p=this.getSessionStore(n,m.get(o.name));if(p&&!p.contains(m)){p.add(m)}}},onValueChange:function(B,y,D,E){var x=this,H=x.getInstanceName(),F=x.cls,C,G,I,A,w,z;if(!B.changingKey){C=D||D===0;if(!C){B[H]=null}if(y){I=x.getSessionStore(y,E);if(I){I.remove(B)}if(C){I=x.getSessionStore(y,D);if(I&&!I.isLoading()){I.add(B)}if(F){z=y.peekRecord(F,D)}B[H]=z||undefined}}else{G=B.joined;if(G){for(A=G.length-1;A>=0;A--){I=G[A];if(I.isStore){w=I.getAssociatedEntity();if(w&&w.self===x.cls&&w.getId()===E){I.remove(B)}}}}}}if(x.owner&&D===null){x.association.schema.queueKeyCheck(B,x)}},checkKeyForDrop:function(g){var l=this.association.field;if(g.get(l.name)===null){g.drop()}},getSessionStore:function(n,o){var p=this.cls,m;if(p){m=n.peekRecord(p,o);if(m){return this.inverse.getAssociatedItem(m)}}},read:function(u,q,s,o){var p=this.callParent([u,q,s,o]),t;if(p){t=p[0];if(t){u[this.getInstanceName()]=t;delete u.data[this.role]}}}})},0,0,0,0,0,0,[Ext.data.schema,"ManyToOne"],0));(Ext.cmd.derive("Ext.data.schema.ManyToMany",Ext.data.schema.Association,{isManyToMany:true,isToMany:true,kind:"many-to-many",Left:Ext.define(null,{extend:"Ext.data.schema.Role",isMany:true,digitRe:/^\d+$/,findRecords:function(I,H,B){var G=I.getMatrixSlice(this.inverse,H.id),A=G.members,w=[],F=this.cls,E,y,x,D,z,C;if(B){E={};for(y=0,x=B.length;y<x;++y){C=B[y];D=C.id;z=A[D];if(!(z&&z[2]===-1)){w.push(C)}E[D]=true}}for(D in A){z=A[D];if(!E||!E[D]&&(z&&z[2]!==-1)){C=I.peekRecord(F,D);if(C){w.push(C)}}}return w},onIdChanged:function(p,m,n){var o=this.getAssociatedItem(p);if(o){o.getFilters().get(this.$roleFilterId).setValue(n)}},processLoad:function(q,s,n,o){var p=n;if(o){p=this.findRecords(o,s,n);this.onAddToMany(q,p,true)}return p},processUpdate:function(v,z){var u=this,x=u.inverse.cls,w=z.R,A,t,s,y;if(w){for(A in w){t=v.peekRecord(x,A);if(t){y=v.getEntityList(u.cls,w[A]);s=u.getAssociatedItem(t);if(s){s.loadData(y);s.complete=true}else{t[u.getterName](null,null,y)}}else{v.onInvalidAssociationEntity(x,A)}}}u.processMatrixBlock(v,z.C,1);u.processMatrixBlock(v,z.D,-1)},checkMembership:function(x,w){var I=x.getMatrix(this.association,true),y,B,A,G,F,E,C,z,D,H;if(!I){return}y=this.left?I.right:I.left;B=y.inverse.role.cls;A=this.inverse;F=y.slices;if(F){G=F[w.id];if(G){C=G.members;for(E in C){z=C[E];if(z[2]!==-1){D=x.peekRecord(B,E);if(D){H=A.getAssociatedItem(D);if(H){H.matrixUpdate=1;H.add(w);H.matrixUpdate=0}}}}}}},onStoreCreate:function(q,o,n){var p=this,s;if(o){s=o.getMatrixSlice(p.inverse,n);s.attach(q);s.notify=p.onMatrixUpdate;s.scope=p}},processMatrixBlock:function(p,q,s){var u=this.inverse,t=this.digitRe,w,v;if(q){for(v in q){if(t.test(v)){v=parseInt(v,10)}w=p.getMatrixSlice(u,v);w.update(q[v],s)}}},createGetter:function(){var f=this;return function(n,m,e){return f.getAssociatedStore(this,n,m,e,false)}},onAddToMany:function(n,l,m){if(!n.matrixUpdate){n.matrixUpdate=1;n.matrix.update(l,m===true?0:1);n.matrixUpdate=0}},onRemoveFromMany:function(g,l){if(!g.matrixUpdate){g.matrixUpdate=1;g.matrix.update(l,-1);g.matrixUpdate=0}},read:function(t,p,s,o){var q=this,u=q.callParent([t,p,s,o]);if(u){t[q.getterName](null,null,u);delete t.data[q.role]}},onMatrixUpdate:function(p,v,q){var u=p.store,t,w,s;if(u&&!u.loading&&!u.matrixUpdate){u.matrixUpdate=1;t=u.indexOfId(v);if(q<0){if(t>=0){u.remove([t])}}else{if(t<0){s=u.getSession().getEntry(this.type,v);w=s&&s.record;if(w){u.add(w)}}}u.matrixUpdate=0}},adoptAssociated:function(s,u){var p=this.getAssociatedItem(s),q,o,t;if(p){p.setSession(u);this.onStoreCreate(p,u,s.getId());q=p.getData().items;for(o=0,t=q.length;o<t;++o){u.adopt(q[o])}}}},function(){var f=this;Ext.ClassManager.onCreated(function(){Ext.data.schema.ManyToMany.prototype.Right=Ext.define(null,{extend:f,left:false,side:"right"})},null,"Ext.data.schema.ManyToMany")})},0,0,0,0,0,0,[Ext.data.schema,"ManyToMany"],0));(Ext.cmd.derive("Ext.util.Inflector",Ext.Base,{singleton:true,plurals:[[(/(quiz)$/i),"$1zes"],[(/^(ox)$/i),"$1en"],[(/([m|l])ouse$/i),"$1ice"],[(/(matr|vert|ind)ix|ex$/i),"$1ices"],[(/(x|ch|ss|sh)$/i),"$1es"],[(/([^aeiouy]|qu)y$/i),"$1ies"],[(/(hive)$/i),"$1s"],[(/(?:([^f])fe|([lr])f)$/i),"$1$2ves"],[(/sis$/i),"ses"],[(/([ti])um$/i),"$1a"],[(/(buffal|tomat|potat)o$/i),"$1oes"],[(/(bu)s$/i),"$1ses"],[(/(alias|status|sex)$/i),"$1es"],[(/(octop|vir)us$/i),"$1i"],[(/(ax|test)is$/i),"$1es"],[(/^(p)erson$/i),"$1eople"],[(/^(m)an$/i),"$1en"],[(/(.*)(child)(ren)?$/i),"$1$2ren"],[(/s$/i),"s"],[(/$/),"s"]],singulars:[[(/(address)$/i),"$1"],[(/(quiz)zes$/i),"$1"],[(/(matr)ices$/i),"$1ix"],[(/(vert|ind)ices$/i),"$1ex"],[(/^(ox)en/i),"$1"],[(/(alias|status)es$/i),"$1"],[(/(octop|vir)i$/i),"$1us"],[(/(cris|ax|test)es$/i),"$1is"],[(/(shoe)s$/i),"$1"],[(/(o)es$/i),"$1"],[(/(bus)es$/i),"$1"],[(/([m|l])ice$/i),"$1ouse"],[(/(x|ch|ss|sh)es$/i),"$1"],[(/(m)ovies$/i),"$1ovie"],[(/(s)eries$/i),"$1eries"],[(/([^aeiouy]|qu)ies$/i),"$1y"],[(/([lr])ves$/i),"$1f"],[(/(tive)s$/i),"$1"],[(/(hive)s$/i),"$1"],[(/([^f])ves$/i),"$1fe"],[(/(^analy)ses$/i),"$1sis"],[(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i),"$1$2sis"],[(/([ti])a$/i),"$1um"],[(/(n)ews$/i),"$1ews"],[(/(p)eople$/i),"$1erson"],[(/s$/i),""]],uncountable:["sheep","fish","series","species","money","rice","information","equipment","grass","mud","offspring","deer","means"],singular:function(g,l){this.singulars.unshift([g,l])},plural:function(g,l){this.plurals.unshift([g,l])},clearSingulars:function(){this.singulars=[]},clearPlurals:function(){this.plurals=[]},isTransnumeral:function(f){return Ext.Array.indexOf(this.uncountable,f)!=-1},pluralize:function(u){if(this.isTransnumeral(u)){return u}var o=this.plurals,p=o.length,t,q,s;for(s=0;s<p;s++){t=o[s];q=t[0];if(q==u||(q.test&&q.test(u))){return u.replace(q,t[1])}}return u},singularize:function(u){if(this.isTransnumeral(u)){return u}var o=this.singulars,p=o.length,t,q,s;for(s=0;s<p;s++){t=o[s];q=t[0];if(q==u||(q.test&&q.test(u))){return u.replace(q,t[1])}}return u},classify:function(f){return Ext.String.capitalize(this.singularize(f))},ordinalize:function(m){var o=parseInt(m,10),n=o%10,p=o%100;if(11<=p&&p<=13){return m+"th"}else{switch(n){case 1:return m+"st";case 2:return m+"nd";case 3:return m+"rd";default:return m+"th"}}}},0,0,0,0,0,0,[Ext.util,"Inflector"],function(){var g={alumnus:"alumni",cactus:"cacti",focus:"foci",nucleus:"nuclei",radius:"radii",stimulus:"stimuli",ellipsis:"ellipses",paralysis:"paralyses",oasis:"oases",appendix:"appendices",index:"indexes",beau:"beaux",bureau:"bureaux",tableau:"tableaux",woman:"women",child:"children",man:"men",corpus:"corpora",criterion:"criteria",curriculum:"curricula",genus:"genera",memorandum:"memoranda",phenomenon:"phenomena",foot:"feet",goose:"geese",tooth:"teeth",antenna:"antennae",formula:"formulae",nebula:"nebulae",vertebra:"vertebrae",vita:"vitae"},l;for(l in g){if(g.hasOwnProperty(l)){this.plural(l,g[l]);this.singular(g[l],l)}}}));(Ext.cmd.derive("Ext.data.schema.Namer",Ext.Base,{isNamer:true,capitalize:function(f){return Ext.String.capitalize(f)},fieldRole:function(g){var l=g.match(this.endsWithIdRe,"");if(l){g=g.substr(0,g.length-(l[1]||l[2]).length)}return this.apply("uncapitalize",g)},idField:function(f){return this.apply("uncapitalize,singularize",f)+"Id"},instanceName:function(f){return this.apply("underscore",f)},multiRole:function(f){return this.apply("undotted,uncapitalize,pluralize",f)},pluralize:function(f){return Ext.util.Inflector.pluralize(f)},readerRoot:function(f){return this.apply("uncapitalize",f)},singularize:function(f){return Ext.util.Inflector.singularize(f)},storeName:function(f){return this.apply("underscore",f)},uncapitalize:function(f){return Ext.String.uncapitalize(f)},underscore:function(f){return"_"+f},uniRole:function(f){return this.apply("undotted,uncapitalize,singularize",f)},undotted:function(m){if(m.indexOf(".")<0){return m}var l=m.split("."),n=l.length;while(n-->1){l[n]=this.apply("capitalize",l[n])}return l.join("")},getterName:function(g){var l=g.role;if(g&&g.isMany){return l}return"get"+this.apply("capitalize",l)},inverseFieldRole:function(x,w,q,u){var y=this,v=y.apply(w?"uniRole":"multiRole",x),s=y.apply("pluralize",q),t=y.apply("undotted,pluralize",u);if(s.toLowerCase()!==t.toLowerCase()){v=q+y.apply("capitalize",v)}return v},manyToMany:function(n,o,s){var p=this,q=p.apply("undotted,capitalize,singularize",o)+p.apply("undotted,capitalize,pluralize",s);if(n){q=p.apply("capitalize",n+q)}return q},manyToOne:function(m,o,p,n){return this.apply("capitalize,singularize",p)+this.apply("capitalize",o)},matrixRole:function(l,m){var n=this.apply(l?"multiRole,capitalize":"multiRole",m);return l?l+n:n},oneToOne:function(m,o,p,n){return this.apply("undotted,capitalize,singularize",p)+this.apply("capitalize",o)},setterName:function(f){return"set"+this.apply("capitalize",f.role)},endsWithIdRe:/(?:(_id)|[^A-Z](Id))$/,cache:{},apply:function(w,y){var t=this,z=t.cache,s=z[y]||(z[y]={}),u=s[w],v,x,A;if(!u){if(w.indexOf(",")<0){u=t[w](y)}else{x=(A=w.split(",")).length;u=y;for(v=0;v<x;++v){u=t.apply(A[v],u)}}s[w]=u}return u}},0,0,0,0,["namer.default"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.schema,"Namer"],0));(Ext.cmd.derive("Ext.data.schema.Schema",Ext.Base,{aliasPrefix:"schema.",isSchema:true,type:"default",statics:{instances:{},get:function(q){var w=this,s=w.instances,v="default",t=q&&Ext.isString(q),u,p;if(q){if(q.isSchema){return q}v=t?q:(q.id||v)}if(!(u=s[v])){s[v]=u=w.create(q);u.id=v}else{if(q&&!t){p=Ext.merge({},u.config);Ext.merge(p,q);u.setConfig(p);u.config=p}}return u},lookupEntity:function(t){var p=null,u=this.instances,q,s,o;if(t){if(t.isEntity){p=t.self}else{if(Ext.isFunction(t)){p=t}else{if(Ext.isString(t)){p=Ext.ClassManager.get(t);if(p&&(!p.prototype||!p.prototype.isEntity)){p=null}if(!p){for(s in u){o=u[s];q=o.getEntity(t);if(q){if(p){Ext.raise('Ambiguous entity name "'+t+'". Defined by schema "'+p.schema.type+'" and "'+s+'"')}p=q}}}if(!p){Ext.raise('No such Entity "'+t+'".')}}}}}return p}},assocCount:0,entityCount:0,config:{defaultIdentifier:null,keyCheckDelay:10,namer:"default",namespace:null,proxy:{type:"ajax",url:"{prefix}/{entityName}"},urlPrefix:""},onClassExtended:function(n,l){var m=l.alias;if(m&&!l.type){if(!Ext.isString(m)){m=m[0]}n.prototype.type=m.substring(this.prototype.aliasPrefix.length)}},constructor:function(f){this.initConfig(f);this.clear()},applyDefaultIdentifier:function(f){return f&&Ext.Factory.dataIdentifier(f)},applyNamer:function(g){var l=Ext.data.schema.Namer.create(g);l.schema=this;return l},applyNamespace:function(g){if(g){var l=g.length-1;if(g.charAt(l)!=="."){g+="."}}return g},applyProxy:function(f){return Ext.util.ObjectTemplate.create(f)},eachAssociation:function(m,n){var o=this.associations,p;for(p in o){if(o.hasOwnProperty(p)){if(m.call(n,p,o[p])===false){break}}}},eachEntity:function(n,o){var m=this.entities,p;for(p in m){if(m.hasOwnProperty(p)){if(n.call(o,p,m[p].cls)===false){break}}}},getAssociation:function(l){var g=this.associations[l];return g||null},getEntity:function(l){var g=this.entityClasses[l]||this.entities[l];return(g&&g.cls)||null},getEntityName:function(p){var m=this.getNamespace(),n,o;if(typeof p==="string"){o=p}else{o=p.$className||null}if(o){if(m){n=m.length;if(o.substring(0,n)!==m){return o}}if(n){o=o.substring(n)}}return o},hasAssociations:function(f){f=f.entityName||f;return !!this.associationEntityMap[f]},hasEntity:function(l){var g=this.getEntityName(l);return !!(this.entities[g]||this.entityClasses[g])},addMatrix:function(F,M,P,Q,B){var K=this,H=K.getNamer(),D=K.associations,S=K.entities,N=Q.type,C=B.type,O=Q.field||H.apply("idField",N),J=B.field||H.apply("idField",C),R=Q.role||H.matrixRole(P,N),G=B.role||H.matrixRole(P,C),E,L,I;L=S[N]||(S[N]={cls:null,name:N,associations:{}});I=S[C]||(S[C]={cls:null,name:C,associations:{}});++K.assocCount;D[M]=E=new Ext.data.schema.ManyToMany({name:M,schema:K,definedBy:F,left:{cls:L.cls,type:N,role:R,field:O,associationKey:Q.associationKey},right:{cls:I.cls,type:C,role:G,field:J,associationKey:B.associationKey}});L.associations[E.right.role]=E.right;I.associations[E.left.role]=E.left;if(L.cls){K.associationEntityMap[L.cls.entityName]=true}if(I.cls){K.associationEntityMap[I.cls.entityName]=true}K.decorateModel(E)},addReference:function(E,W,F,V,D){var L=this,H=L.getNamer(),T=L.entities,O=L.associations,I=E.entityName,S=F.association,N=F.child,J=F.parent,G=F.role,M=F.type||J||N,K=F.inverse,P=Ext.isString(K)?{role:K}:K,Q=P&&P.role,U,R;if(!G){if(!W||F.legacy){G=H.apply("uncapitalize",M)}else{G=H.apply("fieldRole",W.name)}}if(!Q){Q=H.inverseFieldRole(I,V,G,M)}if(!S){if(V){S=H.oneToOne(E,Q,M,G)}else{S=H.manyToOne(E,Q,M,G)}}if(D&&S in O){if(D(O[S],S,Q,G)!==false){return}}U=T[M]||(T[M]={cls:null,name:M,associations:{}});R=V?Ext.data.schema.OneToOne:Ext.data.schema.ManyToOne;S=new R({name:S,owner:N?"left":(J?"right":null),definedBy:E,schema:L,field:W,nullable:W?!!W.allowBlank:true,left:{cls:E,type:I,role:Q,extra:P},right:{cls:U.cls,type:M,role:G,extra:F},meta:F});E.associations[G]=S.right;U.associations[Q]=S.left;if(W){W.reference=S.right;E.references.push(W)}++L.assocCount;L.associationEntityMap[I]=true;if(U.cls){L.associationEntityMap[U.cls.entityName]=true}O[S.name]=S;if(S.right.cls){L.decorateModel(S)}},privates:{addEntity:function(z){var v=this,w=v.entities,E=z.entityName,D=w[E],x=z.fields,A,u,y,B,C;if(!D){w[E]=D={name:E,associations:{}}}else{A=D.associations;for(C in A){A[C].inverse.cls=z;v.associationEntityMap[E]=true;v.decorateModel(A[C].association)}}D.cls=z;z.prototype.associations=z.associations=D.associations;v.entityClasses[z.$className]=D;++v.entityCount;for(y=0,B=x.length;y<B;++y){u=x[y];if(u.reference){v.addReferenceDescr(z,u)}}},addMatrices:function(u,t){var o=this,s,p,q;if(Ext.isString(t)){o.addMatrixDescr(u,null,t)}else{if(t[0]){for(s=0,p=t.length;s<p;++s){o.addMatrixDescr(u,null,t[s])}}else{for(q in t){o.addMatrixDescr(u,q,t[q])}}}},addMatrixDescr:function(y,C,x){var w=this,u=y.entityName,z=w.associations,v=w.getNamer(),A=x.left,D=x.right,E,B;if(Ext.isString(x)){if(x.charAt(0)==="#"){A={type:u};D={type:x.substring(1)}}else{if(x.charAt(E=x.length-1)==="#"){A={type:x.substring(0,E)};D={type:u}}else{if(v.apply("multiRole",u)<v.apply("multiRole",x)){A={type:u};D={type:x}}else{A={type:x};D={type:u}}}}}else{B=x.relation;if(A||(!D&&v.apply("multiRole",u)<v.apply("multiRole",x.type))){if(!A||A===true){A={type:u}}else{A=Ext.apply({type:u},A)}D=x}else{if(!D||D===true){D={type:u}}else{D=Ext.apply({type:u},D)}A=x}}if(!C){C=v.manyToMany(B,A.type,D.type)}if(!(C in z)){w.addMatrix(y,C,B,A,D)}},addReferenceDescr:function(o,m){var p=this,n=m.$reference;if(Ext.isString(n)){n={type:n}}else{n=Ext.apply({},n)}p.addReference(o,m,n,m.unique)},addBelongsTo:function(l,g){this.addKeylessSingle(l,g,false)},addHasOne:function(l,g){this.addKeylessSingle(l,g,true)},addKeylessSingle:function(q,n,o){var s,p;n=Ext.apply({},this.checkLegacyAssociation(q,n));n.type=this.getEntityName(n.child||n.parent||n.type);s=n.foreignKey||(n.type.toLowerCase()+"_id");p=q.getField(s);n.fromSingle=true;if(p){p.$reference=n;p.unique=true;n.legacy=true}this.addReference(q,p,n,o)},addHasMany:function(A,I){var H=this,y=H.entities,D=H.pending,F,E,G,w,x,z,C,B;I=Ext.apply({},this.checkLegacyAssociation(A,I));I.type=this.getEntityName(I.child||I.parent||I.type);E=I.type;w=y[E];F=w&&w.cls;if(F){E=A.entityName;x=I.foreignKey||(E.toLowerCase()+"_id");delete I.foreignKey;B=Ext.apply({},I.inverse);delete I.inverse;z=Ext.apply({},I);delete z.type;I=Ext.apply({type:E,inverse:z},B);C=z.child;if(C){delete z.child;I.parent=E}G=F.getField(x);if(G){G.$reference=I;I.legacy=true}H.addReference(F,G,I,false)}else{if(!D[E]){D[E]=[]}D[E].push([A,I])}},checkLegacyAssociation:function(m,l){if(Ext.isString(l)){l={type:l}}else{l=Ext.apply({},l)}if(l.model){l.type=l.model;delete l.model}var n=l.associatedName||l.name;if(n){delete l.associatedName;delete l.name;l.role=n}return l},afterKeylessAssociations:function(s){var u=this.pending,q=s.entityName,o=u[q],p,t;if(o){for(p=0,t=o.length;p<t;++p){this.addHasMany.apply(this,o[p])}delete u[q]}},clear:function(m){var n=this,l=n.timer;delete n.setConfig;if(l){window.clearTimeout(l);n.timer=null}n.associations={};n.associationEntityMap={};n.entities={};n.entityClasses={};n.pending={};n.assocCount=n.entityCount=0;if(m){n.setNamespace(null)}},constructProxy:function(m){var o=this,n=Ext.Object.chain(m),p=o.getProxy();n.schema=o;n.prefix=o.getUrlPrefix();return p.apply(n)},applyDecoration:function(v){var p=this,u=v.inverse.cls,w=p.getNamer(),s,t,q;if(u&&!v.decorated){v.decorated=true;q=u.prototype;if(!(s=v.getterName)){v.getterName=s=w.getterName(v)}q[s]=v.createGetter();if(v.createSetter){if(!(t=v.setterName)){v.setterName=t=w.setterName(v)}q[t]=v.createSetter()}}},decorateModel:function(f){this.applyDecoration(f.left);this.applyDecoration(f.right)},processKeyChecks:function(q){var w=this,t=w.keyCheckQueue,v=w.timer,u,s,p;if(v){window.clearTimeout(v);w.timer=null}if(!t){return}do{t=w.keyCheckQueue;w.keyCheckQueue=[];for(s=0,u=t.length;s<u;++s){p=t[s];p.role.checkKeyForDrop(p.record)}}while(q&&w.keyCheckQueue.length)},queueKeyCheck:function(s,n){var p=this,q=p.keyCheckQueue,o=p.timer;if(!q){p.keyCheckQueue=q=[]}q.push({record:s,role:n});if(!o){p.timer=o=Ext.Function.defer(p.processKeyChecks,p.getKeyCheckDelay(),p)}},rankEntities:function(){var o=this,u=o.entities,t=Ext.Object.getKeys(u),p=t.length,q,s;o.nextRank=1;t.sort();for(s=0;s<p;++s){q=u[t[s]].cls;if(!q.rank){o.rankEntity(q)}}},rankEntity:function(p){var q=p.associations,n,o,s;for(s in q){o=q[s];if(!o.left&&o.association.field){n=o.cls;if(!n.rank){this.rankEntity(n)}}}p.rank=this.nextRank++}}},1,0,0,0,["schema.default"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.schema,"Schema"],0));(Ext.cmd.derive("Ext.data.AbstractStore",Ext.Base,{factoryConfig:{defaultType:"store",type:"store"},$configPrefixed:false,$configStrict:false,config:{filters:null,autoDestroy:undefined,storeId:null,statefulFilters:false,sorters:null,remoteSort:{lazy:true,$value:false},remoteFilter:{lazy:true,$value:false},groupField:undefined,groupDir:"ASC",grouper:null,pageSize:25,autoSort:null},currentPage:1,loading:false,isStore:true,updating:0,constructor:function(m){var l=this,n;l.isInitializing=true;l.mixins.observable.constructor.call(l,m);l.isInitializing=false;n=l.getStoreId();if(!n&&(m&&m.id)){l.setStoreId(n=m.id)}if(n){Ext.data.StoreManager.register(l)}},getCount:function(){var f=this.getData();return f?f.getCount():0},rangeCached:function(g,l){return this.getData().getCount()>=Math.max(g,l)},find:function(y,q,x,w,v,s){var t=!w,u=!!(t&&s);return this.getData().findIndex(y,q,x,t,u,!v)},findRecord:function(){var g=this,l=g.find.apply(g,arguments);return l!==-1?g.getAt(l):null},findExact:function(l,n,m){return this.getData().findIndexBy(function(e){return e.isEqual(e.get(l),n)},this,m)},findBy:function(m,n,l){return this.getData().findIndexBy(m,n,l)},getAt:function(f){return this.getData().getAt(f)||null},getRange:function(m,o,n){var p=this.getData().getRange(m,Ext.isNumber(o)?o+1:o);if(n&&n.callback){n.callback.call(n.scope||this,p,m,o,n)}return p},getFilters:function(g){var l=(arguments.callee.$previous||Ext.Base.prototype.getFilters).call(this);if(!l&&g!==false){this.setFilters([]);l=(arguments.callee.$previous||Ext.Base.prototype.getFilters).call(this)}return l},applyFilters:function(m,n){var l;if(!n){n=this.createFiltersCollection();l=true}n.add(m);if(l){this.onRemoteFilterSet(n,this.getRemoteFilter())}return n},getSorters:function(g){var l=(arguments.callee.$previous||Ext.Base.prototype.getSorters).call(this);if(!l&&g!==false){this.setSorters([]);l=(arguments.callee.$previous||Ext.Base.prototype.getSorters).call(this)}return l},applySorters:function(m,n){var l;if(!n){n=this.createSortersCollection();l=true}n.add(m);if(l){this.onRemoteSortSet(n,this.getRemoteSort())}return n},filter:function(m,l,n){if(Ext.isString(m)){m={property:m,value:l}}this.suppressNextFilter=!!n;this.getFilters().add(m);this.suppressNextFilter=false},removeFilter:function(o,p){var m=this,n=m.getFilters();m.suppressNextFilter=!!p;if(o instanceof Ext.util.Filter){n.remove(o)}else{n.removeByKey(o)}m.suppressNextFilter=false},updateAutoSort:function(f){this.getData().setAutoSort(f)},updateRemoteSort:function(f){this.onRemoteSortSet(this.getSorters(false),f)},updateRemoteFilter:function(f){this.onRemoteFilterSet(this.getFilters(false),f)},addFilter:function(g,l){this.suppressNextFilter=!!l;this.getFilters().add(g);this.suppressNextFilter=false},filterBy:function(g,l){this.getFilters().add({filterFn:g,scope:l||this})},clearFilter:function(n){var l=this,m=l.getFilters(false);if(!m||m.getCount()===0){return}l.suppressNextFilter=!!n;m.removeAll();l.suppressNextFilter=false},isFiltered:function(){return this.getFilters().getCount()>0},isSorted:function(){var f=this.getSorters(false);return !!(f&&f.length>0)||this.isGrouped()},addFieldTransform:function(n){if(n.getTransform()){return}var o=n.getProperty(),p=this.getModel(),s,q;if(p){s=p.getField(o);q=s?s.getSortType():null}if(q&&q!==Ext.identityFn){n.setTransform(q)}},beginUpdate:function(){if(!this.updating++){this.fireEvent("beginupdate")}},endUpdate:function(){if(this.updating&&!--this.updating){this.fireEvent("endupdate");this.onEndUpdate()}},getState:function(){var p=this,w=[],q=p.getFilters(),t=p.getGrouper(),v,s,u;p.getSorters().each(function(e){w[w.length]=e.getState();s=true});if(p.statefulFilters&&p.saveStatefulFilters){s=true;v=[];q.each(function(e){v[v.length]=e.getState()})}if(t){s=true}if(s){u={};if(w.length){u.sorters=w}if(v){u.filters=v}if(t){u.grouper=t.getState()}}return u},applyState:function(n){var p=this,q=n.sorters,s=n.filters,o=n.grouper;if(q){p.getSorters().replaceAll(q)}if(s){p.saveStatefulFilters=true;p.getFilters().replaceAll(s)}if(o){p.setGrouper(o)}},hasPendingLoad:Ext.emptyFn,isLoaded:Ext.emptyFn,isLoading:Ext.emptyFn,destroy:function(){var f=this;if(f.hasListeners.beforedestroy){f.fireEvent("beforedestroy",f)}f.destroying=true;if(f.getStoreId()){Ext.data.StoreManager.unregister(f)}f.doDestroy();if(f.hasListeners.destroy){f.fireEvent("destroy",f)}f.destroying=false;f.callParent()},doDestroy:Ext.emptyFn,sort:function(n,o,m){var p=this;if(arguments.length===0){if(p.getRemoteSort()){p.load()}else{p.forceLocalSort()}}else{p.getSorters().addSort(n,o,m)}},onBeforeCollectionSort:function(l,g){if(g){this.fireEvent("beforesort",this,g.getRange())}},onSorterEndUpdate:function(){var l=this,g;g=l.getSorters(false);if(l.settingGroups||!g){return}g=g.getRange();if(g.length){if(l.getRemoteSort()){l.load({callback:function(){l.fireEvent("sort",l,g)}})}else{l.fireEvent("datachanged",l);l.fireEvent("refresh",l);l.fireEvent("sort",l,g)}}else{l.fireEvent("sort",l,g)}},onFilterEndUpdate:function(){var l=this,m=l.suppressNextFilter,n=l.getFilters(false);if(!n){return}if(l.getRemoteFilter()){l.currentPage=1;if(!m){l.load()}}else{if(!m){l.fireEvent("datachanged",l);l.fireEvent("refresh",l)}}if(l.trackStateChanges){l.saveStatefulFilters=true}l.fireEvent("filterchange",l,l.getFilters().getRange())},updateGroupField:function(f){if(f){this.setGrouper({property:f,direction:this.getGroupDir()})}else{this.setGrouper(null)}},getGrouper:function(){return this.getData().getGrouper()},group:function(s,o){var q=this,p=q.getSorters(false),n=s||(p&&p.length);if(s&&typeof s==="string"){s={property:s,direction:o||q.getGroupDir()}}q.settingGroups=true;q.getData().setGrouper(s);delete q.settingGroups;if(n){if(q.getRemoteSort()){q.load({scope:q,callback:q.fireGroupChange})}else{q.fireEvent("datachanged",q);q.fireEvent("refresh",q);q.fireGroupChange()}}else{q.fireGroupChange()}},fireGroupChange:function(){if(!this.destroyed){this.fireEvent("groupchange",this,this.getGrouper())}},clearGrouping:function(){this.group(null)},getGroupField:function(){var l=this.getGrouper(),g="";if(l){g=l.getProperty()}return g},isGrouped:function(){return !!this.getGrouper()},applyGrouper:function(f){this.group(f);return this.getData().getGrouper()},getGroups:function(){return this.getData().getGroups()},onEndUpdate:Ext.emptyFn,privates:{loadsSynchronously:Ext.privateFn,onRemoteFilterSet:function(l,g){if(l){l[g?"on":"un"]("endupdate",this.onFilterEndUpdate,this)}},onRemoteSortSet:function(m,l){var n=this;if(m){m[l?"on":"un"]("endupdate",n.onSorterEndUpdate,n);n.getData()[l?"un":"on"]("beforesort",n.onBeforeCollectionSort,n)}}},deprecated:{5:{methods:{destroyStore:function(){this.destroy()}}}}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data,"AbstractStore"],0));(Ext.cmd.derive("Ext.data.Error",Ext.Base,{isError:true,$configPrefixed:false,config:{field:null,message:""},constructor:function(f){this.initConfig(f);this.msg=this.message}},1,0,0,0,0,0,[Ext.data,"Error"],0));(Ext.cmd.derive("Ext.data.ErrorCollection",Ext.util.MixedCollection,{alternateClassName:"Ext.data.Errors",init:function(y){var v=this,x=y.fields,A=y.data,F,G,E,z,w,B,C,D;for(z=0,w=x.length;z<w;++z){G=x[z];D=G.name;C=A[D];if(G.validate&&!G.validate.$nullFn){F=v.length;B=G.validate(C,null,v,y);if(F===v.length&&B!==true){v.add(D,B)}}}return v},add:function(s,p){var q=this,t=Ext.data.field.Field.defaultInvalidMessage,u=s,o;if(Ext.isString(s)){u=new Ext.data.Error({field:s,message:p||t})}else{if(!(u.isError)){u=new Ext.data.Error({field:u.field||u.name,message:u.error||u.message||u.msg||t})}s=u.field}o=q.get(s);if(o){if(Ext.isArray(o)){o.push(u);return o}q.removeAtKey(s);u=[o,u];u.field=s;u=[u]}return Ext.util.MixedCollection.prototype.add.call(this,u)},getKey:function(f){return f.field},isValid:function(){return this.length===0},getByField:function(g){var l=this.get(g);if(l&&!Ext.isArray(l)){l=[l]}return l||[]}},0,0,0,0,0,0,[Ext.data,"ErrorCollection",Ext.data,"Errors"],0));(Ext.cmd.derive("Ext.data.operation.Operation",Ext.Base,{alternateClassName:"Ext.data.Operation",isOperation:true,config:{synchronous:false,url:"",params:undefined,callback:undefined,scope:undefined,resultSet:null,response:null,request:null,records:null,id:undefined,proxy:null,batch:null,recordCreator:null,internalCallback:null,internalScope:null},order:0,foreignKeyDirection:1,started:false,running:false,complete:false,success:undefined,exception:false,error:undefined,idPrefix:"ext-operation-",constructor:function(l){var g=l&&l.scope;this.initConfig(l);if(l){l.scope=g}if(g){this.setScope(g);this.initialConfig.scope=g}this._internalId=Ext.id(this,this.idPrefix)},getAction:function(){return this.action},execute:function(){var g=this,l;delete g.error;delete g.success;g.complete=g.exception=false;g.setStarted();g.request=l=g.doExecute();if(l){l.setOperation(g)}return l},doExecute:Ext.emptyFn,abort:function(){var g=this,l=g.request;if(g.running&&l){g.getProxy().abort(l);g.request=null}},process:function(q,o,s,n){var p=this;n=n!==false;p.setResponse(s);p.setResultSet(q);if(q.getSuccess()){p.doProcess(q,o,s);p.setSuccessful(n)}else{if(n){p.setException(q.getMessage())}}},_commitSetOptions:{convert:true,commit:true},doProcess:function(I,A,B){var K=this,C=K._commitSetOptions,F=K.getRecords(),D=F.length,H=F[0].clientIdProperty,G=I.getRecords(),x=G?G.length:0,J,y,E,z;if(x&&H){J=Ext.Array.toValueMap(F,"id");for(z=0;z<x;++z){y=G[z];E=J[y[H]];if(E){delete J[E.id];delete y[H];E.set(y,C)}}for(z in J){J[z].commit()}}else{for(z=0;z<D;++z){E=F[z];if(x===0||!(y=G[z])){E.commit()}else{E.set(y,C)}}}},setStarted:function(){this.started=this.running=true},setCompleted:function(){var g=this,l=g.getProxy();g.complete=true;g.running=false;g.triggerCallbacks();if(l){l.completeOperation(g)}},setSuccessful:function(f){this.success=true;if(f){this.setCompleted()}},setException:function(l){var g=this;g.exception=true;g.success=g.running=false;g.error=l;g.setCompleted()},triggerCallbacks:function(){var l=this,g=l.getInternalCallback();if(g){g.call(l.getInternalScope()||l,l);l.setInternalCallback(null);l.setInternalScope(null)}if(g=l.getCallback()){g.call(l.getScope()||l,l.getRecords(),l,l.wasSuccessful());l.setCallback(null);l.setScope(null)}},hasException:function(){return this.exception},getError:function(){return this.error},getRecords:function(){var f;return this._records||((f=this.getResultSet())?f.getRecords():null)},isStarted:function(){return this.started},isRunning:function(){return this.running},isComplete:function(){return this.complete},wasSuccessful:function(){return this.isComplete()&&this.success===true},allowWrite:function(){return true}},1,0,0,0,0,0,[Ext.data.operation,"Operation",Ext.data,"Operation"],0));(Ext.cmd.derive("Ext.data.operation.Create",Ext.data.operation.Operation,{action:"create",isCreateOperation:true,order:10,config:{recordCreator:Ext.identityFn},doExecute:function(){return this.getProxy().create(this)}},0,0,0,0,["data.operation.create"],0,[Ext.data.operation,"Create"],0));(Ext.cmd.derive("Ext.data.operation.Destroy",Ext.data.operation.Operation,{action:"destroy",isDestroyOperation:true,order:30,foreignKeyDirection:-1,doProcess:function(){var l=this.getRecords(),n=l.length,m;for(m=0;m<n;++m){l[m].setErased()}},doExecute:function(){return this.getProxy().erase(this)},getRecordData:function(s,p){var n={},o=s.idField,q=this.getNameProperty()||"name";n[o[q]]=s.id;return n}},0,0,0,0,["data.operation.destroy"],0,[Ext.data.operation,"Destroy"],0));(Ext.cmd.derive("Ext.data.operation.Read",Ext.data.operation.Operation,{action:"read",isReadOperation:true,config:{filters:undefined,sorters:undefined,grouper:undefined,start:undefined,limit:undefined,page:undefined,addRecords:false},doExecute:function(){return this.getProxy().read(this)},doProcess:Ext.emptyFn,allowWrite:function(){return false}},0,0,0,0,["data.operation.read"],0,[Ext.data.operation,"Read"],0));(Ext.cmd.derive("Ext.data.operation.Update",Ext.data.operation.Operation,{action:"update",isUpdateOperation:true,order:20,config:{recordCreator:Ext.identityFn},doExecute:function(){return this.getProxy().update(this)}},0,0,0,0,["data.operation.update"],0,[Ext.data.operation,"Update"],0));(Ext.cmd.derive("Ext.data.SortTypes",Ext.Base,{singleton:true,none:Ext.identityFn,stripCommasRe:/,/g,stripTagsRE:/<\/?[^>]+>/gi,asText:function(f){return(f!=null)?String(f).replace(this.stripTagsRe,""):"\x00"},asUCText:function(f){return(f!=null)?String(f).toUpperCase().replace(this.stripTagsRe,""):"\x00"},asUCString:function(f){return(f!=null)?String(f).toUpperCase():"\x00"},asDate:function(f){if(!f){return 0}if(Ext.isDate(f)){return f.getTime()}return Date.parse(String(f))},asFloat:function(l){var g=parseFloat(String(l).replace(this.stripCommasRe,""));return isNaN(g)?0:g},asInt:function(l){var g=parseInt(String(l).replace(this.stripCommasRe,""),10);return isNaN(g)?0:g}},0,0,0,0,0,0,[Ext.data,"SortTypes"],0));(Ext.cmd.derive("Ext.data.validator.Validator",Ext.Base,{isValidator:true,type:"base",statics:{all:{},register:function(m,n){var l=this.all;l[m.toUpperCase()]=l[m.toLowerCase()]=l[m]=n.prototype}},onClassExtended:function(l,g){if(g.type){Ext.data.validator.Validator.register(g.type,l)}},constructor:function(f){if(typeof f==="function"){this.fnOnly=true;this.validate=f}else{this.initConfig(f)}},validate:function(){return true},clone:function(){var f=this;if(f.fnOnly){return new Ext.data.validator.Validator(f.validate)}return new f.self(f.getCurrentConfig())}},1,0,0,0,["data.validator.base"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.validator,"Validator"],function(){this.register(this.prototype.type,this)}));(Ext.cmd.derive("Ext.data.field.Field",Ext.Base,{alternateClassName:"Ext.data.Field",aliasPrefix:"data.field.",type:"auto",factoryConfig:{defaultProperty:"name"},isDataField:true,isField:true,allowBlank:true,allowNull:false,critical:false,defaultInvalidMessage:"This field is invalid",defaultValue:undefined,definedBy:null,depends:null,dependents:null,mapping:null,name:null,ordinal:undefined,persist:null,reference:null,unique:false,rank:null,stripRe:/[\$,%]/g,calculated:false,evil:false,identifier:false,onClassExtended:function(q,o){var u=o.sortType,p=q.prototype,t=p.validators,s=o.validators;if(u&&Ext.isString(u)){p.sortType=Ext.data.SortTypes[u]}if(s){if(!Ext.isArray(s)){s=[s]}delete o.validators;if(t){s=t.concat(s)}p.validators=s}},argumentNamesRe:/^function\s*\(\s*([^,\)\s]+)/,calculateRe:/[^\.a-z0-9_]([a-z_][a-z_0-9]*)\.([a-z_][a-z_0-9]*)/gi,constructor:function(C){var J=this,H=J.calculateRe,z,G,I,y,D,F,x,E,K,B,A;if(C){if(Ext.isString(C)){J.name=C}else{A=C.validators;if(A){delete C.validators;J.instanceValidators=A}Ext.apply(J,C)}}if(!J.allowNull){J.allowNull=!!J.reference}z=J.calculate;D=J.depends;if(z){J.convert=J.doCalculate;if(!D){if(!(D=z.$depends)){F={};K=z.toString();z.$depends=D=[];x=J.argumentNamesRe.exec(K);E=x?x[1]:"data";while((x=H.exec(K))){if(E===x[1]&&!F[B=x[2]]){F[B]=1;D.push(B)}}}J.depends=D}}I=J.defaultValue;if(J.convert){J.calculated=G=J.convert.length>1;J.evil=G&&!D}if(J.persist===null){J.persist=!z}y=J.sortType;if(!J.sortType){J.sortType=Ext.data.SortTypes.none}else{if(Ext.isString(y)){J.sortType=Ext.data.SortTypes[y]}}if(D&&typeof D==="string"){J.depends=[D]}J.cloneDefaultValue=I!==undefined&&(Ext.isDate(I)||Ext.isArray(I)||Ext.isObject(I))},setModelValidators:function(f){this._validators=null;this.modelValidators=f},compileValidators:function(){var f=this;f._validators=[];f.constructValidators(f.validators);f.constructValidators(f.modelValidators);f.constructValidators(f.instanceValidators)},constructValidators:function(s){if(s){if(!(s instanceof Array)){s=[s]}var n=s.length,p=this._validators,q,o;for(q=0;q<n;++q){o=s[q];if(o.fn){o=o.fn}p.push(Ext.Factory.dataValidator(o))}}},collate:function(p,q){var o=this,s=p,n=q;if(o.sortType){s=o.sortType(s);n=o.sortType(n)}return(s===n)?0:((s<n)?-1:1)},compare:function(g,l){return(g===l)?0:((g<l)?-1:1)},isEqual:function(g,l){return this.compare(g,l)===0},convert:null,serialize:null,validate:function(E,y,u,x){var v=this,w="",D,C,A,B,z;if(!v._validators){v.compileValidators()}A=v._validators;for(z=0,B=A.length;z<B;++z){C=A[z];D=C.validate(E,x);if(D!==true){D=D||v.defaultInvalidMessage;if(u){u.add(v.name,D);w=w||D}else{if(y){if(w){w+=y}w+=D}else{w=D;break}}}}return w||true},doCalculate:function(l,g){return g?this.calculate(g.data):l},getName:function(){return this.name},getAllowBlank:function(){return this.allowBlank},getAllowNull:function(){return this.allowNull},getConvert:function(){return this.convert},getDefaultValue:function(){return this.defaultValue},getDepends:function(){return this.depends},getMapping:function(){return this.mapping},hasMapping:function(){var f=this.mapping;return !!(f||f===0)},getPersist:function(){return this.persist},getSortType:function(){return this.sortType},getType:function(){return"auto"},deprecated:{5.1:{methods:{getSortDir:function(){return this.sortDir}}}}},1,0,0,0,["data.field.auto"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.field,"Field",Ext.data,"Field"],0));(Ext.cmd.derive("Ext.data.field.Boolean",Ext.data.field.Field,{isBooleanField:true,trueRe:/^\s*(?:true|yes|on|1)\s*$/i,convert:function(f){if(typeof f==="boolean"){return f}if(this.allowNull&&(f===undefined||f===null||f==="")){return null}return this.trueRe.test(String(f))},getType:function(){return"bool"}},0,0,0,0,["data.field.bool","data.field.boolean"],0,[Ext.data.field,"Boolean"],0));(Ext.cmd.derive("Ext.data.field.Date",Ext.data.field.Field,{sortType:"asDate",isDateField:true,dateFormat:null,dateReadFormat:null,dateWriteFormat:null,compare:function(q,n){var o=q instanceof Date,p=n instanceof Date,s;if(p&&o){s=q.getTime()-n.getTime();if(s===0){s=0}else{s=s<0?-1:1}}else{if(o===p){s=0}else{s=o?1:-1}}return s},convert:function(l){if(!l){return null}if(l instanceof Date){return l}var n=this.dateReadFormat||this.dateFormat,m;if(n){return Ext.Date.parse(l,n,this.useStrict)}m=Date.parse(l);return m?new Date(m):null},serialize:function(m){var n=null,l;if(Ext.isDate(m)){l=this.getDateWriteFormat();n=l?Ext.Date.format(m,l):m}return n},getDateFormat:function(){return this.dateFormat},getDateReadFormat:function(){return this.dateReadFormat},getDateWriteFormat:function(){var f=this;if(f.hasOwnProperty("dateWriteFormat")){return f.dateWriteFormat}if(f.hasOwnProperty("dateFormat")){return f.dateFormat}return f.dateWriteFormat||f.dateFormat||"timestamp"},getType:function(){return"date"}},0,0,0,0,["data.field.date"],0,[Ext.data.field,"Date"],0));(Ext.cmd.derive("Ext.data.field.Integer",Ext.data.field.Field,{isNumeric:true,isIntegerField:true,numericType:"int",convert:function(o){if(typeof o==="number"){return this.getNumber(o)}var m=o===undefined||o===null||o==="",p=this.allowNull,n;if(m){n=p?null:0}else{n=this.parse(o);if(p&&isNaN(n)){n=null}}return n},getNumber:function(f){return parseInt(f,10)},getType:function(){return this.numericType},parse:function(f){return parseInt(String(f).replace(this.stripRe,""),10)},sortType:function(f){if(f==null){f=Infinity}return f}},0,0,0,0,["data.field.int","data.field.integer"],0,[Ext.data.field,"Integer"],0));(Ext.cmd.derive("Ext.data.field.Number",Ext.data.field.Integer,{isIntegerField:false,isNumberField:true,numericType:"float",getNumber:Ext.identityFn,parse:function(f){return parseFloat(String(f).replace(this.stripRe,""))}},0,0,0,0,["data.field.float","data.field.number"],0,[Ext.data.field,"Number"],0));(Ext.cmd.derive("Ext.data.field.String",Ext.data.field.Field,{sortType:"asUCString",isStringField:true,convert:function(g){var l=this.allowNull?null:"";return(g===undefined||g===null)?l:String(g)},getType:function(){return"string"}},0,0,0,0,["data.field.string"],0,[Ext.data.field,"String"],0));(Ext.cmd.derive("Ext.data.identifier.Generator",Ext.Base,{"abstract":true,factoryConfig:{defaultType:"sequential"},isGenerator:true,config:{id:null},constructor:function(n){var m=this,l;m.initConfig(n);l=m.getId();if(l){Ext.data.identifier.Generator.all[l]=m}},privates:{clone:function(g){var l=this.getInitialConfig();l=g?Ext.apply({},g,l):l;return new this.self(l)},statics:{all:{}}}},1,0,0,0,["data.identifier.default"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.identifier,"Generator"],function(){var l=this,n=Ext.Factory,m=n.dataIdentifier;n.dataIdentifier=function(f){var g=Ext.isString(f)?f:(f&&f.id),e=g&&l.all[g];return e||m(f)}}));(Ext.cmd.derive("Ext.data.identifier.Sequential",Ext.data.identifier.Generator,{config:{increment:1,prefix:null,seed:1},generate:function(){var m=this,n=m._seed,l=m._prefix;m._seed+=m._increment;return(l!==null)?l+n:n}},0,0,0,0,["data.identifier.sequential"],0,[Ext.data.identifier,"Sequential"],0));(Ext.cmd.derive("Ext.data.Model",Ext.Base,{alternateClassName:"Ext.data.Record",isEntity:true,isModel:true,validIdRe:null,erasing:false,observableType:"record",crudState:"R",crudStateWas:null,constructor:function(C,L){var K=this,H=K.self,M=H.identifier,E=Ext.data.Model,J=E.identifier,I=K.idField.name,y,G,F,z,A,D,B;K.data=K.data=C||(C={});K.session=L||null;K.internalId=z=J.generate();if((y=C) instanceof Array){K.data=C={};B=K.getFields();A=Math.min(B.length,y.length);for(D=0;D<A;++D){C[B[D].name]=y[D]}}if(!(F=H.initializeFn)){H.initializeFn=F=E.makeInitializeFn(H)}if(!F.$nullFn){H.initializeFn(K)}if(!(K.id=G=C[I])&&G!==0){if(L){M=L.getIdentifier(H);G=M.generate()}else{if(J===M){G=z}else{G=M.generate()}}C[I]=K.id=G;K.phantom=true;K.crudState="C"}if(L){L.add(K)}if(K.init&&Ext.isFunction(K.init)){K.init()}},editing:false,dirty:false,session:null,dropped:false,erased:false,clientIdProperty:null,evented:false,phantom:false,idProperty:"id",manyToMany:null,identifier:null,previousValues:undefined,proxy:undefined,schema:"default",versionProperty:null,generation:1,validationSeparator:null,convertOnSet:true,beginEdit:function(){var l=this,m=l.modified,n=l.previousValues;if(!l.editing){l.editing=true;l.editMemento={dirty:l.dirty,data:Ext.apply({},l.data),generation:l.generation,modified:m&&Ext.apply({},m),previousValues:n&&Ext.apply({},n)}}},cancelEdit:function(){var g=this,l=g.editMemento;if(l){g.editing=false;Ext.apply(g,l);g.editMemento=null}},endEdit:function(o,m){var n=this,p=n.editMemento;if(p){n.editing=false;n.editMemento=null;n.previousValues=p.previousValues;if(!o){if(!m){m=n.getModifiedFieldNames(p.data)}if(n.dirty||(m&&m.length)){n.callJoined("afterEdit",[m])}}}},getField:function(f){return this.self.getField(f)},getFields:function(){return this.self.getFields()},getFieldsMap:function(){return this.fieldsMap},getIdProperty:function(){return this.idProperty},getId:function(){return this.id},getObservableId:function(){return this.internalId},setId:function(g,l){this.set(this.idProperty,g,l)},getPrevious:function(g){var l=this.previousValues;return l&&l[g]},isModified:function(g){var l=this.modified;return !!(l&&l.hasOwnProperty(g))},getModified:function(g){var l;if(this.isModified(g)){l=this.modified[g]}return l},get:function(f){return this.data[f]},_singleProp:{},_rejectOptions:{convert:false,silent:true},set:function(am,Z,ak){var au=this,aD=au.self,V=au.data,aq=au.modified,ai=au.previousValues,ag=au.session,ah=Ext.isString(am),ap=(ah?ak:Z),ae=ap?ap.convert!==false:au.convertOnSet,ad=au.fieldsMap,aB=ap&&ap.silent,av=ap&&ap.commit,ac=!(ap&&ap.refs===false)&&ag,ao=!(ap&&ap.dirty===false&&!av),ar=null,ay=0,aC=au.associations,az,aA,aE,at,aw,aj,al,ax,X,W,aa,af,Y,aF,ab,U,an;if(ah){U=au._singleProp;U[am]=Z}else{U=am}if(!(Y=aD.rankedFields)){Y=aD.rankFields()}aa=Y.length;do{for(aw in U){ab=U[aw];az=V[aw];al=au;aA=ad[aw];if(aA){if(ae&&aA.convert){ab=aA.convert(ab,au)}al=aA;aF=aA.reference}else{aF=null}if(al.isEqual(az,ab)){continue}V[aw]=ab;(ar||(ar=[])).push(aw);(ai||(au.previousValues=ai={}))[aw]=az;if(aF&&aF.cls){if(ac){ag.updateReference(au,aA,ab,az)}aF.onValueChange(au,ag,ab,az)}W=(X=aA&&aA.dependents)&&X.length;while(W-->0){(ax=X[W]).dirty=true;ay=ay?Math.min(ay,ax.rank):ax.rank}if(!aA||aA.persist){if(aq&&aq.hasOwnProperty(aw)){if(!ao||al.isEqual(aq[aw],ab)){delete aq[aw];au.dirty=-1}}else{if(ao){if(!aq){au.modified=aq={}}au.dirty=true;aq[aw]=az}}}if(aw===au.idField.name){aE=true;aj=az;af=ab}}if(!ay){break}aA=Y[ay-1];aA.dirty=false;if(ah){delete U[am]}else{U=au._singleProp;ah=true}am=aA.name;U[am]=V[am];ae=true;for(;ay<aa;++ay){if(Y[ay].dirty){break}}if(ay<aa){++ay}else{ay=0}}while(1);if(au.dirty<0){au.dirty=false;for(at in aq){if(aq.hasOwnProperty(at)){au.dirty=true;break}}}if(ah){delete U[am]}++au.generation;if(aE){au.id=af;au.onIdChanged(af,aj);au.callJoined("onIdChanged",[aj,af]);if(aC){for(an in aC){aC[an].onIdChanged(au,aj,af)}}}if(av){au.commit(aB,ar)}else{if(!aB&&!au.editing&&ar){au.callJoined("afterEdit",[ar])}}return ar},reject:function(n){var l=this,m=l.modified;if(m){l.set(m,l._rejectOptions)}l.dropped=false;l.clearState();if(!n){l.callJoined("afterReject")}},commit:function(s,p){var q=this,u=q.versionProperty,o=q.data,t;q.clearState();if(u&&!q.phantom&&!isNaN(o[u])){++o[u]}q.phantom=false;if(q.dropped){q.erased=t=true}if(!s){if(t){q.callJoined("afterErase")}else{q.callJoined("afterCommit",[p])}}},clearState:function(){var f=this;f.dirty=f.editing=false;f.editMemento=f.modified=null},drop:function(q){var o=this,p=o.associations,n=o.session,s;if(o.erased||o.dropped){return}o.dropped=true;if(p&&q!==false){for(s in p){p[s].onDrop(o,n)}}o.callJoined("afterDrop");if(o.phantom){o.setErased()}},join:function(m){var n=this,l=n.joined;if(!l){l=n.joined=[m]}else{if(!l.length){l[0]=m}else{Ext.Array.include(l,m)}}if(m.isStore&&!n.store){n.store=m}},unjoin:function(o){var p=this,u=p.joined,t=u&&u.length,s=p.store,q;if(o===p.session){p.session=null}else{if(t===1&&u[0]===o){u.length=0}else{if(t){Ext.Array.remove(u,o)}}if(s===o){s=null;if(u){for(q=0,t=u.length;q<t;++q){o=u[q];if(o.isStore){s=o;break}}}p.store=s}}},clone:function(m){var n=this,o=n.modified,p=n.copy(n.id,m);if(o){p.modified=Ext.apply({},o)}p.dirty=n.dirty;p.dropped=n.dropped;p.phantom=n.phantom;return p},copy:function(q,u){var p=this,o=Ext.apply({},p.data),s=p.idProperty,t=p.self;if(q||q===0){o[s]=q}else{if(q===null){delete o[s]}}return new t(o,u)},getProxy:function(){return this.self.getProxy()},getValidation:function(m){var l=this,n=l.validation;if(!n){l.validation=n=new Ext.data.Validation();n.attach(l)}if(m===true||(m!==false&&n.syncGeneration!==l.generation)){n.refresh(m)}return n},validate:function(){return new Ext.data.ErrorCollection().init(this)},isValid:function(){return this.getValidation().isValid()},toUrl:function(){var g=this.$className.split("."),l=g[g.length-1].toLowerCase();return l+"/"+this.getId()},erase:function(l){var g=this;g.erasing=true;g.drop();g.erasing=false;return g.save(l)},setErased:function(){this.erased=true;this.callJoined("afterErase")},getChanges:function(){return this.getData(this._getChangesOptions)},getCriticalFields:function(){var l=this.self,g=l.criticalFields;if(!g){l.rankFields();g=l.criticalFields}return g},getAssociatedData:function(I,J){var N=this,F=N.associations,L,B,K,O,E,G,z,C,D,H,A,M;I=I||{};N.$gathering=1;if(J){J=Ext.Object.chain(J)}for(D in F){C=F[D];K=C.getAssociatedItem(N);if(!K||K.$gathering){continue}if(K.isStore){K.$gathering=1;O=K.getData().items;G=O.length;E=[];for(B=0;B<G;++B){z=O[B];L=!z.$gathering;z.$gathering=1;if(J){M=J.associated;if(M===undefined){J.associated=L;A=true}else{if(!L){J.associated=false;A=true}}H=J}else{H=L?N._getAssociatedOptions:N._getNotAssociatedOptions}E.push(z.getData(H));if(A){J.associated=M;A=false}delete z.$gathering}delete K.$gathering}else{H=J||N._getAssociatedOptions;if(J&&J.associated===undefined){H.associated=true}E=K.getData(H)}I[D]=E}delete N.$gathering;return I},getData:function(D){var P=this,Q={},I=(D===true)?P._getAssociatedOptions:(D||Q),E=P.data,O=I.associated,L=I.changes,M=L&&I.critical,n=L?P.modified:E,B=P.fieldsMap,C=I.persist,J=I.serialize,G,N,F,H,K;if(n){for(H in n){K=E[H];N=B[H];if(N){if(C&&!N.persist){continue}if(J&&N.serialize){K=N.serialize(K,P)}}Q[H]=K}}if(M){G=P.self.criticalFields||P.getCriticalFields();for(F=G.length;F-->0;){H=(N=G[F]).name;if(!(H in Q)){K=E[H];if(J&&N.serialize){K=N.serialize(K,P)}Q[H]=K}}}if(O){P.getAssociatedData(Q,I)}return Q},getTransientFields:function(){var l=this.self,g=l.transientFields;if(!g){l.rankFields();g=l.transientFields}return g},isLoading:function(){return !!this.loadOperation},abort:function(){var f=this.loadOperation;if(f){f.abort()}},load:function(u){u=Ext.apply({},u);var y=this,q=u.scope||y,t=y.getProxy(),w=u.callback,v=y.loadOperation,x=y.getId(),s;if(v){s=v.extraCalls;if(!s){s=v.extraCalls=[]}s.push(u);return v}u.id=x;u.recordCreator=function(f,l,g){var e=y.session;if(g){g.recordCreator=e?e.recordCreator:null}y.set(f,y._commitOptions);return y};u.internalCallback=function(m){var e=m.wasSuccessful()&&m.getRecords().length>0,p=y.loadOperation,g=p.extraCalls,n=[y,m],f=[y,m,e],l,o;y.loadOperation=null;if(e){Ext.callback(u.success,q,n)}else{Ext.callback(u.failure,q,n)}Ext.callback(w,q,f);if(g){for(l=0,o=g.length;l<o;++l){u=g[l];if(e){Ext.callback(u.success,q,n)}else{Ext.callback(u.failure,q,n)}Ext.callback(u.callback,q,f)}}y.callJoined("afterLoad")};delete u.callback;y.loadOperation=v=t.createOperation("read",u);v.execute();return v},save:function(s){s=Ext.apply({},s);var v=this,x=v.phantom,A=v.dropped,y=A?"destroy":(x?"create":"update"),t=s.scope||v,u=s.callback,w=v.getProxy(),z;s.records=[v];s.internalCallback=function(g){var f=[v,g],e=g.wasSuccessful();if(e){Ext.callback(s.success,t,f)}else{Ext.callback(s.failure,t,f)}f.push(e);Ext.callback(u,t,f)};delete s.callback;z=w.createOperation(y,s);if(A&&x){z.setResultSet(Ext.data.reader.Reader.prototype.nullResultSet);v.setErased();z.setSuccessful(true)}else{z.execute()}return z},inheritableStatics:{addFields:function(f){this.replaceFields(f)},replaceFields:function(I,x){var H=this,B=H.prototype,y=Ext.data.field.Field,A=H.fields,J=H.fieldsMap,D=H.fieldOrdinals,G,C,E,z,F,K;if(x===true){A.length=0;H.fieldsMap=J={};H.fieldOrdinals=D={}}else{if(x){for(C=x.length;C-->0;){F=x[C];if(F in D){delete D[F];delete J[F]}}for(C=0,z=A.length;C<z;++C){F=(G=A[C]).name;if(F in D){D[F]=C}else{A.splice(C,1);--C;--z}}}}for(C=0,z=I?I.length:0;C<z;C++){F=(G=I[C]).name;if(!(F in D)){D[F]=K=A.length;A.push(G=y.create(G));J[F]=G;G.ordinal=K;G.definedBy=G.owner=this}}H.idField=B.idField=E=J[B.idProperty];E.allowNull=E.critical=E.identifier=true;E.defaultValue=null;H.initializeFn=H.rankedFields=H.transientFields=H.criticalFields=null},removeFields:function(f){this.replaceFields(null,f)},getIdFromData:function(n){var o=this,p=o.idField,m=p.calculated?(new o(n)).id:n[p.name];return m},createWithId:function(n,q,p){var o=q,s=this;if(n||n===0){o={};if(q){Ext.apply(o,q)}o[s.idField.name]=n}return new s(o,p)},getFields:function(){return this.fields},getFieldsMap:function(){return this.fieldsMap},getField:function(f){return this.fieldsMap[f]||null},getProxy:function(){var o=this,p=o.proxy,m=o.defaultProxy,n;if(!p){p=o.proxyConfig;if(!p&&m){p=m}if(!p||!p.isProxy){if(typeof p==="string"){p={type:p}}n=o.schema.constructProxy(o);p=p?Ext.merge(n,p):n}p=o.setProxy(p)}return p},setProxy:function(m){var l=this,n;if(m){if(!m.isProxy){m=Ext.Factory.proxy(m)}else{n=m.getModel();if(n&&n!==l){m=m.clone()}}m.setModel(l)}return(l.prototype.proxy=l.proxy=m)},load:function(n,s,p){var q={},o;q[this.prototype.idProperty]=n;o=new this(q,p);o.load(s);return o}},deprecated:{5:{methods:{hasId:null,markDirty:null,setDirty:null,eachStore:function(u,p){var o=this,s=o.stores,t=s.length,q;for(q=0;q<t;++q){u.call(p,s[q])}},join:function(n){var o=this,p=o.stores,m=o.joined;if(!m){m=o.joined=[n]}else{m.push(n)}if(n.isStore){o.store=o.store||n;if(!p){p=o.stores=[]}p.push(n)}},unjoin:function(n){var o=this,p=o.stores,m=o.joined;if(m.length===1){m.length=0}else{Ext.Array.remove(m,n)}if(n.isStore){Ext.Array.remove(p,n);o.store=p[0]||null}}},properties:{persistenceProperty:null},inheritableStatics:{methods:{setFields:null}}}},privates:{_commitOptions:{commit:true},_getChangesOptions:{changes:true},_getAssociatedOptions:{associated:true},_getNotAssociatedOptions:{associated:false},copyFrom:function(w){var x=this,z=x.fields,F=z.length,C=[],v,B=0,y,A,E=x.idProperty,D,G;if(w){y=x.data;A=w.data;for(;B<F;B++){v=z[B];D=v.name;if(D!==E){G=A[D];if(G!==undefined&&!x.isEqual(y[D],G)){y[D]=G;C.push(D)}}}if(x.phantom&&!w.phantom){x.beginEdit();x.setId(w.getId());x.endEdit(true);x.commit(true)}}return C},callJoined:function(x,y){var v=this,t=v.joined,w=v.session,B=v.dropped?"D":(v.phantom?"C":(v.dirty?"U":"R")),A,z,u,C;v.crudState=B;if(t||w){if(y){y.unshift(v)}else{y=[v]}if(t){for(A=0,z=t.length;A<z;++A){C=t[A];if(C&&(u=C[x])){u.apply(C,y)}}}u=w&&w[x];if(u){u.apply(w,y)}}v.crudStateWas=B},onAssociatedRecordSet:function(l,g){this.callJoined("afterAssociatedRecordSet",[l,g])},onIdChanged:Ext.privateFn,setSession:function(f){this.session=f;if(f){f.add(this)}},getModifiedFieldNames:function(t){var p=this,o=p.data,s=[],u=t||p.editMemento.data,q;for(q in o){if(o.hasOwnProperty(q)){if(!p.isEqual(o[q],u[q],q)){s.push(q)}}}return s},isEqual:function(p,f,n){var o;if(n){o=n.isField?n:this.fieldsMap[n];if(o){return o.isEqual(p,f)}}if(p instanceof Date&&f instanceof Date){return p.getTime()===f.getTime()}return p===f},statics:{EDIT:"edit",REJECT:"reject",COMMIT:"commit",defaultProxy:"memory",rankFields:function(){var t=this,u=t.prototype,y=t.fields,A=y.length,w=[],B=[],x=[],C,v,z;t.rankedFields=u.rankedFields=w;t.criticalFields=u.criticalFields=B;t.transientFields=u.transientFields=x;for(z=0;z<A;++z){v=y[z];if(v.critical){B.push(v)}if(!v.persist){x.push(v)}if(v.evil){(C||(C=[])).push(v)}else{if(!v.depends){w.push(v);v.rank=w.length}}}for(z=0;z<A;++z){if(!(v=y[z]).rank&&!v.evil){t.topoAdd(v)}}if(C){for(z=0,A=C.length;z<A;++z){w.push(v=C[z]);v.rank=w.length}}return w},topoAdd:function(v){var t=this,w=v.depends,u=w?w.length:0,q=t.rankedFields,s,p;for(s=0;s<u;++s){p=t.fieldsMap[w[s]];(p.dependents||(p.dependents=[])).push(v);if(!p.rank){t.topoAdd(p)}}q.push(v);v.rank=q.length},initFields:function(O,Z,I){var R=Ext.data.field.Field,X=O.fields,H=[],N={},V={},aa=[],P=I.fields,M=O.versionProperty||I.versionProperty,K=Z.idProperty,U,Y,T,W,L,F,S,Q,G,J;Z.fields=I.fields=H;Z.fieldOrdinals=I.fieldOrdinals=N;Z.fieldsMap=I.fieldsMap=V;Z.references=I.references=aa;if(P){for(T=0,W=P.length;T<W;++T){H[T]=Y=Ext.Object.chain(P[T]);Y.dependents=null;Y.owner=Z;N[L=Y.name]=T;V[L]=Y;Y.rank=null;if(Y.generated){Q=Y;G=Y.name}}}if(X){delete O.fields;for(T=0,W=X.length;T<W;++T){Y=X[T];S=Y.reference;if(S&&typeof S!=="string"){S=Ext.merge({},S)}Y.$reference=S;Y=R.create(X[T]);L=Y.name;F=N[L];if(F===undefined){N[L]=F=H.length}V[L]=Y;H[F]=Y;Y.definedBy=Y.owner=Z;Y.ordinal=F;if(L===K){J=Y}}}U=V[K];if(!U){if(Q&&Q.generated){F=Q.ordinal}else{F=H.length}delete V[G];delete N[G];U=new R(K);H[F]=U;N[K]=F;V[K]=U;U.definedBy=Z;U.ordinal=F;U.generated=true}else{if(J&&Q&&Q.generated){Ext.Array.remove(H,Q);delete V[G];delete N[G];V[K]=J;for(T=0,W=H.length;T<W;++T){Y=H[T];H.ordinal=T;N[Y.name]=T}}}U.allowNull=U.critical=U.identifier=true;U.defaultValue=null;Z.idField=I.idField=U;if(M){Y=V[M];if(!Y){F=H.length;Y=new R({name:M,type:"int"});H[F]=Y;N[M]=F;V[M]=Y;Y.definedBy=Z;Y.ordinal=F;Y.generated=true}Y.defaultValue=1;Y.critical=true}},initValidators:function(z,G,x){var I=x.validators,B,J,D,K,A,C,y,E,F,H;if(I){B={};for(J in I){B[J]=Ext.Array.clone(I[J])}}K=z.validators||z.validations;if(K){delete z.validators;B=B||{};if(Ext.isArray(K)){D={};for(A=0,C=K.length;A<C;++A){H=K[A];E=H.field;if(!D[E]){D[E]=[]}H=H.fn||H;D[E].push(H)}K=D}for(E in K){y=K[E];if(!Ext.isArray(y)){y=[y]}F=B[E];if(B[E]){Ext.Array.push(F,y)}else{B[E]=y}}}if(B){for(E in B){J=G.getField(E);if(J){J.setModelValidators(B[E])}}}G.validators=x.validators=B},initAssociations:function(z,w,E){var A=w.associations,y=w.belongsTo,G=w.hasMany,D=w.hasOne,F=w.manyToMany,x,B,o,C;delete w.associations;delete w.belongsTo;delete w.hasMany;delete w.hasOne;delete w.manyToMany;if(F){z.addMatrices(E,F)}if(A){A=Ext.isArray(A)?A:[A];for(x=0,B=A.length;x<B;++x){o=A[x];C=Ext.apply({},o);delete C.type;switch(o.type){case"belongsTo":z.addBelongsTo(E,C);break;case"hasMany":z.addHasMany(E,C);break;case"hasOne":z.addHasOne(E,C);break}}}if(y){y=Ext.isArray(y)?y:[y];for(x=0,B=y.length;x<B;++x){z.addBelongsTo(E,y[x])}}if(G){G=Ext.isArray(G)?G:[G];for(x=0,B=G.length;x<B;++x){z.addHasMany(E,G[x])}}if(D){D=Ext.isArray(D)?D:[D];for(x=0,B=D.length;x<B;++x){z.addHasOne(E,D[x])}}z.afterKeylessAssociations(E)},initIdentifier:function(u,t,o){var s=u.identifier||u.idgen,p=o.identifier||t.schema._defaultIdentifier,q;if(s){delete u.identifier;delete u.idgen;s=Ext.Factory.dataIdentifier(s)}else{if(p){if(p.clone&&!p.getId()){s=p.clone()}else{if(p.isGenerator){s=p}else{s=Ext.Factory.dataIdentifier(p)}}}}t.identifier=o.identifier=s;if(!s){q=t.entityName;if(!q){q=Ext.id(null,"extModel")}t.identifier=Ext.Factory.dataIdentifier({type:"sequential",prefix:q+"-"})}},findValidator:function(t,s,u){var y=u.type||u,w=t[s],v,q,x;if(w){for(q=0,v=w.length;q<v;++q){x=w[q];if(x.type===y){return x}}}return null},makeInitializeFn:function(H){var G=["var "],A=["\nreturn function (e) {\n    var data = e.data, v;\n"],K=0,y,z,M,I,D,L,B,C,J,E,F;if(!(B=H.rankedFields)){B=H.rankFields()}for(E=0,F=B.length;E<F;++E){L=B[E];C="f"+E;M=L.convert;if(E){G.push(",  \n    ")}G.push(C," = $fields["+E+"]");if((J=(L.defaultValue!==undefined))||M){I='data["'+L.name+'"]';++K;y=z="";if(L.cloneDefaultValue){y="Ext.clone(";z=")"}A.push("\n");if(M&&J){A.push("    v = ",I,";\n    if (v !== undefined) {\n        v = ",C,".convert(v, e);\n    }\n    if (v === undefined) {\n        v = ",y,C,".defaultValue",z,";\n    }\n    ",I," = v;")}else{if(M){A.push("    v = ",C,".convert(",I,",e);\n    if (v !== undefined) {\n        ",I," = v;\n    }\n")}else{if(J){A.push("    if (",I," === undefined) {\n        ",I," = ",y,C,".defaultValue",z,";\n    }\n")}}}}}if(!K){return Ext.emptyFn}G.push(";\n");G.push.apply(G,A);G.push("}");G=G.join("");D=new Function("$fields","Ext",G);return D(B,Ext)}}}},1,0,0,0,0,0,[Ext.data,"Model",Ext.data,"Record"],function(){var m=this,n=m.prototype,o=Ext.data.schema.Schema,p;m.proxyConfig=n.proxy;delete n.proxy;m.fields=[];m.fieldsMap=n.fieldsMap={};m.schema=n.schema=o.get(n.schema);n.idField=new Ext.data.field.Field(n.idProperty);m.identifier=new Ext.data.identifier.Sequential();m.onExtended(function(e,l){var v=e.prototype,f=l.schema,g=v.superclass.self,w,x,y;e.idProperty=l.idProperty||v.idProperty;if(f){delete l.schema;w=o.get(f)}else{if(!(w=v.schema)){w=p||(p=o.get("default"))}}e.rankFields=m.rankFields;e.topoAdd=m.topoAdd;v.schema=e.schema=w;if(!(x=l.entityName)){v.entityName=x=w.getEntityName(e)}e.entityName=x;e.fieldExtractors={};m.initIdentifier(l,e,v);m.initFields(l,e,v);m.initValidators(l,e,v);e.fields.items=e.fields;if(x){w.addEntity(e);m.initAssociations(w,l,e)}y=l.proxy;if(y){delete l.proxy}else{if(g!==m){y=g.proxyConfig||g.proxy}}e.proxyConfig=y})}));(Ext.cmd.derive("Ext.data.ResultSet",Ext.Base,{isResultSet:true,$configPrefixed:false,config:{loaded:true,count:null,total:null,success:false,records:null,message:null,metadata:null},constructor:function(f){this.initConfig(f)},getCount:function(){var g=(arguments.callee.$previous||Ext.Base.prototype.getCount).call(this),l;if(!g){l=this.getRecords();if(l){g=l.length}}return g}},1,0,0,0,0,0,[Ext.data,"ResultSet"],0));(Ext.cmd.derive("Ext.data.reader.Reader",Ext.Base,{alternateClassName:["Ext.data.Reader","Ext.data.DataReader"],factoryConfig:{defaultType:null},config:{totalProperty:"total",successProperty:"success",rootProperty:"",messageProperty:"",typeProperty:"",implicitIncludes:true,readRecordsOnFailure:true,model:null,proxy:null,transform:null,keepRawData:null},isReader:true,constructor:function(l){if(l&&l.hasOwnProperty("root")){l=Ext.apply({},l);l.rootProperty=l.root;delete l.root}var g=this;g.duringInit=1;g.mixins.observable.constructor.call(g,l);--g.duringInit;g.buildExtractors()},applyModel:function(f){return Ext.data.schema.Schema.lookupEntity(f)},applyTransform:function(f){if(f){if(Ext.isFunction(f)){f={fn:f}}else{if(f.charAt){f={fn:this[f]}}}return f.fn.bind(f.scope||this)}return f},forceBuildExtractors:function(){if(!this.duringInit){this.buildExtractors(true)}},updateTotalProperty:function(){this.forceBuildExtractors()},updateMessageProperty:function(){this.forceBuildExtractors()},updateSuccessProperty:function(){this.forceBuildExtractors()},read:function(q,n){var o,s,p;if(q){p=q.responseText;if(p){s=this.getResponseData(q);if(s&&s.__$isError){return new Ext.data.ResultSet({total:0,count:0,records:[],success:false,message:s.msg})}else{o=this.readRecords(s,n)}}else{if(p!==""){o=this.readRecords(q,n)}}}return o||this.nullResultSet},getNullResultSet:function(){return this.nullResultSet},createReadError:function(f){return{__$isError:true,msg:f}},readRecords:function(C,E,A){var z=this,B=A&&A.recordsOnly,K=A&&A.asRoot,J,D,F,M,y,L,H,G,I;I=z.getMeta?z.getMeta(C):C.metaData;if(I){z.onMetaChange(I)}G=z.getTransform();if(G){C=G(C)}z.buildExtractors();if(z.getKeepRawData()){z.rawData=C}if(z.hasListeners.rawdata){z.fireEventArgs("rawdata",[C])}C=z.getData(C);J=true;D=0;F=[];if(z.getSuccessProperty()){L=z.getSuccess(C);if(L===false||L==="false"){J=false}}if(z.getMessageProperty()){H=z.getMessage(C)}if(J||z.getReadRecordsOnFailure()){M=(K||Ext.isArray(C))?C:z.getRoot(C);if(M){y=M.length}if(z.getTotalProperty()){L=parseInt(z.getTotal(C),10);if(!isNaN(L)){y=L}}if(M){F=z.extractData(M,E);D=F.length}}return B?F:new Ext.data.ResultSet({total:y||D,metadata:I,count:D,records:F,success:J,message:H})},extractData:function(I,B){var K=this,A=B&&B.model?Ext.data.schema.Schema.lookupEntity(B.model):K.getModel(),D=A.schema,H=D.hasAssociations(A)&&K.getImplicitIncludes(),J=K.getFieldExtractorInfo(A.fieldExtractors),G=I.length,E=new Array(G),M=K.getTypeProperty(),L,F,C,y,z;if(!G&&Ext.isObject(I)){I=[I];G=1}for(z=0;z<G;z++){y=I[z];if(!y.isModel){F=y;if(M&&(C=K.getChildType(D,F,M))){L=C.getProxy().getReader();y=L.extractRecord(F,B,C,D.hasAssociations(C)&&L.getImplicitIncludes(),L.getFieldExtractorInfo(C.fieldExtractors))}else{y=K.extractRecord(F,B,A,H,J)}if(y.isModel&&y.isNode){y.raw=F}}if(y.onLoad){y.onLoad()}E[z]=y}return E},getChildType:function(o,n,m){var p;switch(typeof m){case"string":return o.getEntity(n[m]);case"object":p=m.namespace;return o.getEntity((p?p+".":"")+n[m.name]);case"function":return o.getEntity(m(n))}},extractRecordData:function(n,m){var o=m&&m.model?Ext.data.schema.Schema.lookupEntity(m.model):this.getModel(),p=this.getFieldExtractorInfo(o.fieldExtractors);return this.extractRecord(n,m,o,false,p)},extractRecord:function(A,z,y,s,u){var v=this,w=(z&&z.recordCreator)||v.defaultRecordCreator,t,x;t=v.extractModelData(A,u);x=w.call(v,t,y||v.getModel(),z);if(s&&x.isModel){v.readAssociated(x,A,z)}return x},getFieldExtractorInfo:function(l){if(!l){return}var n=this.$className,m=l[n];if(m===undefined){l[n]=m=this.buildFieldExtractors()}return m},buildFieldExtractors:function(){var v=this.getFields(),u=v.length,x=[],C=[],y=null,A=0,t,B,w,z;for(w=0;w<u;++w){t=v[w];z=this.createFieldAccessor(t);if(z){B=t.name;x.push("val = extractors["+A+"](raw); if (val !== undefined) { data['"+B+"'] = val; }");C.push(z);++A}}if(x.length){y={extractors:C,fn:new Function("raw","data","extractors","var val;"+x.join(""))}}return y},defaultRecordCreator:function(m,l){var n=new l(m);n.phantom=false;return n},getModelData:function(f){return{}},extractModelData:function(o,p){var m=this.getModelData(o),n;if(p){n=p.fn;n(o,m,p.extractors)}return m},readAssociated:function(t,o,p){var q=t.associations,s,u;for(s in q){if(q.hasOwnProperty(s)){u=q[s];if(u.cls){u.read(t,o,this,p)}}}},getFields:function(){return this.getModel().fields},getData:Ext.identityFn,getRoot:Ext.identityFn,getResponseData:function(f){},onMetaChange:function(v){var w=this,t=v.fields,s,p,u,q;w.metaData=v;if(v.root){w.setRootProperty(v.root)}if(v.totalProperty){w.setTotalProperty(v.totalProperty)}if(v.successProperty){w.setSuccessProperty(v.successProperty)}if(v.messageProperty){w.setMessageProperty(v.messageProperty)}u=v.clientIdProperty;if(t){p=Ext.define(null,{extend:"Ext.data.Model",fields:t,clientIdProperty:u});w.setModel(p);q=w.getProxy();if(q){q.setModel(p)}}else{if(u){s=w.getModel();if(s){s.self.prototype.clientIdProperty=u}}}},buildExtractors:function(o){var q=this,p,s,n;if(o||!q.hasExtractors){p=q.getTotalProperty();s=q.getSuccessProperty();n=q.getMessageProperty();if(p){q.getTotal=q.getAccessor(p)}if(s){q.getSuccess=q.getAccessor(s)}if(n){q.getMessage=q.getAccessor(n)}q.hasExtractors=true;return true}},getAccessor:function(n){var o=this,s=o.extractorCache,q,p;if(typeof n==="string"){p=o.getAccessorKey(n);q=s.get(p);if(!q){q=o.createAccessor(n);s.add(p,q)}}else{q=o.createAccessor(n)}return q},getAccessorKey:function(f){return this.$className+f},createAccessor:Ext.emptyFn,createFieldAccessor:Ext.emptyFn,destroy:function(){var f=this;f.model=f.getTotal=f.getSuccess=f.getMessage=f.rawData=null;f.onMetaChange=null;f.transform=null;f.callParent()},privates:{copyFrom:function(l){var g=this;l.buildExtractors();g.getTotal=l.getTotal;g.getSuccess=l.getSuccess;g.getMessage=l.getMessage;++g.duringInit;g.setConfig(l.getConfig());--g.duringInit;g.hasExtractors=true}}},1,0,0,0,["reader.base"],[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.reader,"Reader",Ext.data,"Reader",Ext.data,"DataReader"],function(g){var l=g.prototype;Ext.apply(l,{nullResultSet:new Ext.data.ResultSet({total:0,count:0,records:[],success:true,message:""})});l.extractorCache=new Ext.util.LruCache()}));(Ext.cmd.derive("Ext.data.writer.Writer",Ext.Base,{factoryConfig:{defaultType:null},alternateClassName:["Ext.data.DataWriter","Ext.data.Writer"],config:{clientIdProperty:null,allDataOptions:{persist:true},partialDataOptions:{changes:true,critical:true},writeAllFields:false,dateFormat:null,nameProperty:"name",writeRecordId:true,transform:null},isWriter:true,constructor:function(f){this.initConfig(f)},applyTransform:function(f){if(f){if(Ext.isFunction(f)){f={fn:f}}return f.fn.bind(f.scope||this)}return f},write:function(o){var q=o.getOperation(),s=q.getRecords()||[],t=s.length,u=[],p;for(p=0;p<t;p++){u.push(this.getRecordData(s[p],q))}return this.writeRecords(o,u)},writeRecords:Ext.emptyFn,getRecordData:function(A,C){var O=this,E=O.getNameProperty(),I=E!=="name",G=A.self.idField,K=G[E]||G.name,L=A.id,F=O.getWriteAllFields(),P,H,D,J,M,Q,B,N;if(G.serialize){L=G.serialize(L)}if(!F&&C&&C.isDestroyOperation){P={};P[K]=L}else{H=O.getDateFormat();D=A.phantom;J=(D||F)?O.getAllDataOptions():O.getPartialDataOptions();M=D&&O.getClientIdProperty();Q=A.getFieldsMap();J.serialize=false;B=A.getData(J);P=I?{}:B;if(M){P[M]=L;delete B[K]}else{if(!O.getWriteRecordId()){delete B[K]}}for(K in B){L=B[K];if(!(N=Q[K])){if(I){P[K]=L}}else{if(N.isDateField&&H&&Ext.isDate(L)){L=Ext.Date.format(L,H)}else{if(N.serialize){L=N.serialize(L,A)}}if(I){K=N[E]||K}P[K]=L}}}return P}},1,0,0,0,["writer.base"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.writer,"Writer",Ext.data,"DataWriter",Ext.data,"Writer"],0));(Ext.cmd.derive("Ext.data.proxy.Proxy",Ext.Base,{$configPrefixed:false,alternateClassName:["Ext.data.DataProxy","Ext.data.Proxy"],config:{batchOrder:"create,update,destroy",batchActions:true,model:undefined,reader:{type:"json"},writer:{type:"json"}},isProxy:true,isSynchronous:false,constructor:function(f){this.mixins.observable.constructor.call(this,f);this.pendingOperations={}},applyModel:function(f){return Ext.data.schema.Schema.lookupEntity(f)},updateModel:function(g){if(g){var l=this.getReader();if(l&&!l.getModel()){l.setModel(g)}}},applyReader:function(f){if(this.isSynchronous){f=f||{};f.keepRawData=true}return Ext.Factory.reader(f)},updateReader:function(n){if(n){var l=this,m=l.getModel();if(!m){m=n.getModel();if(m){l.setModel(m)}}else{n.setModel(m)}}},applyWriter:function(g){var l=this.getReader();g=Ext.Factory.writer(g);if(g.getRecord&&!g.getRecord()&&l&&l.getRecord){l=l.getRecord();if(l){g.setRecord(l)}}return g},abort:Ext.emptyFn,onMetaChange:function(f){this.fireEvent("metachange",this,f)},create:Ext.emptyFn,read:Ext.emptyFn,update:Ext.emptyFn,erase:Ext.emptyFn,batch:function(F,I){var w=this,x=w.getBatchActions(),z,D,A,C,B,H,E,G,y;if(F.operations===undefined){F={operations:F,listeners:I}}if(F.batch){if(Ext.isDefined(F.batch.runOperation)){z=Ext.applyIf(F.batch,{proxy:w,listeners:{}})}}else{F.batch={proxy:w,listeners:F.listeners||{}}}if(!z){z=new Ext.data.Batch(F.batch)}z.on("complete",Ext.bind(w.onBatchComplete,w,[F],0));A=w.getBatchOrder().split(",");C=A.length;for(H=0;H<C;H++){B=A[H];D=F.operations[B];if(D){if(x){z.add(w.createOperation(B,{records:D,params:F.params}))}else{G=D.length;for(E=0;E<G;E++){y=D[E];z.add(w.createOperation(B,{records:[y],params:F.params}))}}}}z.start();return z},onBatchComplete:function(n,m){var l=n.scope||this;if(m.hasException()){if(Ext.isFunction(n.failure)){Ext.callback(n.failure,l,[m,n])}}else{if(Ext.isFunction(n.success)){Ext.callback(n.success,l,[m,n])}}if(Ext.isFunction(n.callback)){Ext.callback(n.callback,l,[m,n])}},createOperation:function(l,m){var n=Ext.createByAlias("data.operation."+l,m);n.setProxy(this);this.pendingOperations[n._internalId]=n;return n},completeOperation:function(f){delete this.pendingOperations[f._internalId]},clone:function(){return new this.self(this.getInitialConfig())},destroy:function(){var m=this.pendingOperations,n,l;for(n in m){l=m[n];if(l&&l.isRunning()){l.abort()}}this.pendingOperations=null;this.callParent()}},1,0,0,0,["proxy.proxy"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable],[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.data.proxy,"Proxy",Ext.data,"DataProxy",Ext.data,"Proxy"],0));(Ext.cmd.derive("Ext.data.proxy.Client",Ext.data.proxy.Proxy,{alternateClassName:"Ext.data.ClientProxy",isSynchronous:true,clear:function(){}},0,0,0,0,0,0,[Ext.data.proxy,"Client",Ext.data,"ClientProxy"],0));(Ext.cmd.derive("Ext.data.proxy.Memory",Ext.data.proxy.Client,{alternateClassName:"Ext.data.MemoryProxy",isMemoryProxy:true,config:{enablePaging:false,data:{$value:null,merge:function(m,p,n,o){if(Ext.isArray(m)){return Ext.Array.clone(m)}else{return Ext.clone(m)}}}},finishOperation:function(o){var n=0,m=o.getRecords(),p=m.length;for(n;n<p;n++){m[n].dropped=!!o.isDestroyOperation;m[n].commit()}o.setSuccessful(true)},create:function(f){this.finishOperation(f)},update:function(f){this.finishOperation(f)},erase:function(f){this.finishOperation(f)},read:function(w){var u=this,t=u.getReader().read(u.getData()),y=t.getRecords(),v=w.getSorters(),B=w.getGrouper(),z=w.getFilters(),A=w.getStart(),x=w.getLimit(),C;if(w.process(t,null,null,false)!==false){if(z&&z.length){t.setRecords(y=Ext.Array.filter(y,Ext.util.Filter.createFilterFn(z)));t.setTotal(y.length)}if(B){v=v?v.concat(B):v}if(v&&v.length){t.setRecords(y=Ext.Array.sort(y,Ext.util.Sortable.createComparator(v)))}if(u.getEnablePaging()&&A!==undefined&&x!==undefined){if(A>=t.getTotal()){t.setConfig({success:false,records:[],total:0})}else{t.setRecords(Ext.Array.slice(y,A,A+x))}}w.setCompleted();if(C=t.getMetadata()){u.onMetaChange(C)}}},clear:Ext.emptyFn},0,0,0,0,["proxy.memory"],0,[Ext.data.proxy,"Memory",Ext.data,"MemoryProxy"],0));(Ext.cmd.derive("Ext.data.ProxyStore",Ext.data.AbstractStore,{config:{model:undefined,fields:null,proxy:undefined,autoLoad:undefined,autoSync:false,batchUpdateMode:"operation",sortOnLoad:true,trackRemoved:true,asynchronousLoad:undefined},onClassExtended:function(q,o,s){var p=o.model,n;if(typeof p==="string"){n=s.onBeforeCreated;s.onBeforeCreated=function(){var e=this,f=arguments;Ext.require(p,function(){n.apply(e,f)})}}},implicitModel:"Ext.data.Model",autoSyncSuspended:0,constructor:function(l){var g=this;g.removed=[];Ext.data.AbstractStore.prototype.constructor.apply(this,arguments);if(g.getAsynchronousLoad()===false){g.flushLoad()}},applyAsynchronousLoad:function(f){if(f==null){f=!this.loadsSynchronously()}return f},updateAutoLoad:function(f){this.getData();if(f){this.load(Ext.isObject(f)?f:undefined)}},getTotalCount:function(){return this.totalCount||0},applyFields:function(f){if(f){this.createImplicitModel(f)}},applyModel:function(f){if(f){f=Ext.data.schema.Schema.lookupEntity(f)}else{if(!this.destroying){this.getFields();f=this.getModel()||this.createImplicitModel()}}return f},applyProxy:function(g){var l=this.getModel();if(g!==null){if(g){if(g.isProxy){g.setModel(l)}else{if(Ext.isString(g)){g={type:g,model:l}}else{if(!g.model){g=Ext.apply({model:l},g)}}g=Ext.createByAlias("proxy."+g.type,g);g.autoCreated=true}}else{if(l){g=l.getProxy();this.useModelProxy=true}}if(!g){g=Ext.createByAlias("proxy.memory");g.autoCreated=true}}return g},applyState:function(g){var l=this;Ext.data.AbstractStore.prototype.applyState.call(this,g);if(l.getAutoLoad()||l.isLoaded()){l.load()}},updateProxy:function(g,l){this.proxyListeners=Ext.destroy(this.proxyListeners)},updateTrackRemoved:function(f){this.cleanRemoved();this.removed=f?[]:null},onMetaChange:function(l,g){this.fireEvent("metachange",this,g)},create:function(o,q){var p=this,u=p.getModel(),t=new u(o),s;q=Ext.apply({},q);if(!q.records){q.records=[t]}q.internalScope=p;q.internalCallback=p.onProxyWrite;s=p.createOperation("create",q);return s.execute()},read:function(){return this.load.apply(this,arguments)},update:function(m){var l=this,n;m=Ext.apply({},m);if(!m.records){m.records=l.getUpdatedRecords()}m.internalScope=l;m.internalCallback=l.onProxyWrite;n=l.createOperation("update",m);return n.execute()},onProxyWrite:function(o){var n=this,m=o.wasSuccessful(),p=o.getRecords();switch(o.getAction()){case"create":n.onCreateRecords(p,o,m);break;case"update":n.onUpdateRecords(p,o,m);break;case"destroy":n.onDestroyRecords(p,o,m);break}if(m){n.fireEvent("write",n,o);n.fireEvent("datachanged",n)}},onCreateRecords:Ext.emptyFn,onUpdateRecords:Ext.emptyFn,onDestroyRecords:function(m,n,l){if(l){this.cleanRemoved()}},erase:function(m){var l=this,n;m=Ext.apply({},m);if(!m.records){m.records=l.getRemovedRecords()}m.internalScope=l;m.internalCallback=l.onProxyWrite;n=l.createOperation("destroy",m);return n.execute()},onBatchOperationComplete:function(g,l){return this.onProxyWrite(l)},onBatchComplete:function(q,t){var u=this,s=q.operations,o=s.length,p;if(u.batchUpdateMode!=="operation"){u.suspendEvents();for(p=0;p<o;p++){u.onProxyWrite(s[p])}u.resumeEvents()}u.isSyncing=false;u.fireEvent("datachanged",u)},onBatchException:function(g,l){},filterNew:function(f){return f.phantom===true&&f.isValid()},getNewRecords:function(){return[]},getUpdatedRecords:function(){return[]},getModifiedRecords:function(){return[].concat(this.getNewRecords(),this.getUpdatedRecords())},filterUpdated:function(f){return f.dirty===true&&f.phantom!==true&&f.isValid()},getRemovedRecords:function(){var f=this.getRawRemovedRecords();return f?Ext.Array.clone(f):[]},sync:function(s){var p=this,t={},w=p.getNewRecords(),q=p.getUpdatedRecords(),u=p.getRemovedRecords(),v=false;p.needsSync=false;if(w.length>0){t.create=w;v=true}if(q.length>0){t.update=q;v=true}if(u.length>0){t.destroy=u;v=true}if(v&&p.fireEvent("beforesync",t)!==false){p.isSyncing=true;s=s||{};p.proxy.batch(Ext.apply(s,{operations:t,listeners:p.getBatchListeners()}))}return p},getBatchListeners:function(){var g=this,l={scope:g,exception:g.onBatchException,complete:g.onBatchComplete};if(g.batchUpdateMode==="operation"){l.operationcomplete=g.onBatchOperationComplete}return l},save:function(){return this.sync.apply(this,arguments)},load:function(l){var g=this;if(typeof l==="function"){l={callback:l}}else{l=l?Ext.Object.chain(l):{}}g.pendingLoadOptions=l;if(g.getAsynchronousLoad()){if(!g.loadTimer){g.loadTimer=Ext.asap(g.flushLoad,g)}}else{g.flushLoad()}return g},flushLoad:function(){var l=this,m=l.pendingLoadOptions,n;l.clearLoadTask();if(!m){return}l.setLoadOptions(m);if(l.getRemoteSort()&&m.sorters){l.fireEvent("beforesort",l,m.sorters)}n=Ext.apply({internalScope:l,internalCallback:l.onProxyLoad,scope:l},m);l.lastOptions=n;n=l.createOperation("read",n);if(l.fireEvent("beforeload",l,n)!==false){l.onBeforeLoad(n);l.loading=true;n.execute()}},reload:function(f){return this.load(Ext.apply({},f,this.lastOptions))},onEndUpdate:function(){var f=this;if(f.needsSync&&f.autoSync&&!f.autoSyncSuspended){f.sync()}},afterReject:function(l){var g=this;if(g.contains(l)){g.onUpdate(l,Ext.data.Model.REJECT,null);g.fireEvent("update",g,l,Ext.data.Model.REJECT,null)}},afterCommit:function(n,l){var m=this;if(!l){l=null}if(m.contains(n)){m.onUpdate(n,Ext.data.Model.COMMIT,l);m.fireEvent("update",m,n,Ext.data.Model.COMMIT,l)}},afterErase:function(f){this.onErase(f)},onErase:Ext.emptyFn,onUpdate:Ext.emptyFn,doDestroy:function(){var g=this,l=g.getProxy();g.clearLoadTask();g.getData().destroy();g.data=null;g.setProxy(null);if(l.autoCreated){l.destroy()}g.setModel(null);Ext.data.AbstractStore.prototype.doDestroy.call(this)},hasPendingLoad:function(){return !!this.pendingLoadOptions||this.isLoading()},isLoading:function(){return !!this.loading},isLoaded:function(){return this.loadCount>0},suspendAutoSync:function(){++this.autoSyncSuspended},resumeAutoSync:function(g){var l=this;if(l.autoSyncSuspended&&!--l.autoSyncSuspended){if(g){l.sync()}}},removeAll:Ext.emptyFn,clearData:Ext.emptyFn,privates:{getRawRemovedRecords:function(){return this.removed},onExtraParamsChanged:function(){},clearLoadTask:function(){if(this.loadTimer){Ext.asapCancel(this.loadTimer)}this.pendingLoadOptions=this.loadTimer=null},cleanRemoved:function(){var l=this.getRawRemovedRecords(),n,m;if(l){for(m=0,n=l.length;m<n;++m){l[m].unjoin(this)}l.length=0}},createOperation:function(o,s){var n=this,q=n.getProxy(),p;if(!n.proxyListeners){p={scope:n,destroyable:true,beginprocessresponse:n.beginUpdate,endprocessresponse:n.endUpdate};if(!n.disableMetaChangeEvent){p.metachange=n.onMetaChange}n.proxyListeners=q.on(p)}return q.createOperation(o,s)},createImplicitModel:function(s){var n=this,q={extend:n.implicitModel,statics:{defaultProxy:"memory"}},o,p;if(s){q.fields=s}p=Ext.define(null,q);n.setModel(p);o=n.getProxy();if(o){p.setProxy(o)}else{n.setProxy(p.getProxy())}},loadsSynchronously:function(){return this.getProxy().isSynchronous},onBeforeLoad:Ext.privateFn,removeFromRemoved:function(l){var g=this.getRawRemovedRecords();if(g){Ext.Array.remove(g,l);l.unjoin(this)}},setLoadOptions:function(p){var n=this,o,m;if(n.getRemoteFilter()){o=n.getFilters(false);if(o&&o.getCount()){p.filters=o.getRange()}}if(n.getRemoteSort()){m=n.getSorters(false);if(m&&m.getCount()){p.sorters=m.getRange()}}}}},1,0,0,0,0,0,[Ext.data,"ProxyStore"],0));(Ext.cmd.derive("Ext.data.LocalStore",Ext.Mixin,{mixinConfig:{id:"localstore"},config:{extraKeys:null},applyExtraKeys:function(n){var l,m=this.getData();m.setExtraKeys(n);n=m.getExtraKeys();for(l in n){this[l]=n[l]}},add:function(f){return this.insert(this.getCount(),arguments.length===1?f:arguments)},constructDataCollection:function(){var f=new Ext.util.Collection({rootProperty:"data"});f.addObserver(this);return f},createModel:function(n){var m=this.getSession(),l;if(!n.isModel){l=this.getModel();n=new l(n,m)}return n},createFiltersCollection:function(){return this.getData().getFilters()},createSortersCollection:function(){var f=this.getData().getSorters();f.setSorterConfigure(this.addFieldTransform,this);return f},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionSort:function(){this.onSorterEndUpdate()},onCollectionFilter:function(){this.onFilterEndUpdate()},notifySorterChange:function(){this.getData().onSorterChange()},forceLocalSort:function(){this.getData().onSortChange()},contains:function(f){return this.indexOf(f)>-1},each:function(p,q,v){var w=this.getData(),u,t,s;if(typeof v==="object"){v=v.filtered}if(v===true&&w.filtered){w=w.getSource()}w=w.items.slice(0);u=w.length;for(s=0;s<u;++s){t=w[s];if(p.call(q||t,t,s,u)===false){break}}},collect:function(q,s,n){var p=this,o=p.getData();if(typeof s==="object"){n=s.filtered;s=s.allowNull}if(n===true&&o.filtered){o=o.getSource()}return o.collect(q,"data",s)},getById:function(g){var l=this.getData();if(l.filtered){l=l.getSource()}return l.get(g)||null},getByInternalId:function(n){var l=this.getData(),m;if(l.filtered){if(!l.$hasExtraKeys){m=this.makeInternalKeyCfg();l.setExtraKeys(m);l.$hasExtraKeys=true}l=l.getSource()}if(!l.$hasExtraKeys){l.setExtraKeys(m||this.makeInternalKeyCfg());l.$hasExtraKeys=true}return l.byInternalId.get(n)||null},getDataSource:function(){var f=this.getData();return f.getSource()||f},indexOf:function(f){return this.getData().indexOf(f)},indexOfId:function(f){return this.indexOf(this.getById(f))},insert:function(p,q){var n=this,s,o;if(q){if(!Ext.isIterable(q)){q=[q]}else{q=Ext.Array.clone(q)}s=q.length}if(!s){return[]}for(o=0;o<s;++o){q[o]=n.createModel(q[o])}n.getData().insert(p,q);return q},queryBy:function(m,n){var l=this.getData();return(l.getSource()||l).createFiltered(m,n)},query:function(o,p,u,t,s){var q=this.getData();return(q.getSource()||q).createFiltered(o,p,u,t,s)},first:function(f){return this.getData().first(f)||null},last:function(f){return this.getData().last(f)||null},sum:function(l,n){var m=this.getData();return(n&&this.isGrouped())?m.sumByGroup(l):m.sum(l)},count:function(l){var g=this.getData();return(l&&this.isGrouped())?g.countByGroup():g.count()},min:function(l,n){var m=this.getData();return(n&&this.isGrouped())?m.minByGroup(l):m.min(l)},max:function(l,n){var m=this.getData();return(n&&this.isGrouped())?m.maxByGroup(l):m.max(l)},average:function(l,n){var m=this.getData();return(n&&this.isGrouped())?m.averageByGroup(l):m.average(l)},aggregate:function(v,C,x,u){var w=this,B,y,A,t,z;if(x&&w.isGrouped()){B=w.getGroups().items;y=B.length;A={};for(z=0;z<y;++z){t=B[z];A[t.getGroupKey()]=w.getAggregate(v,C||w,t.items,u)}return A}else{return w.getAggregate(v,C,w.getData().items,u)}},getAggregate:function(w,p,s,v){var t=[],u=s.length,q;for(q=0;q<u;++q){t[q]=s[q].get(v)}return w.call(p||this,s,t)},addObserver:function(l){var g=this.observers;if(!g){this.observers=g=new Ext.util.Collection()}g.add(l)},removeObserver:function(l){var g=this.observers;if(g){g.remove(l)}},callObservers:function(x,s){var w=this.observers,v,t,q,u,y;if(w){t=w.items;if(s){s.unshift(this)}else{s=[this]}for(q=0,v=t.length;q<v;++q){y=t[q];u="onSource"+x;if(y[u]){y[u].apply(y,s)}}}},queryRecordsBy:function(p,q){var v=this.getData(),w=[],u,s,t;v=(v.getSource()||v).items;q=q||this;for(s=0,u=v.length;s<u;++s){t=v[s];if(p.call(q,t)===true){w.push(t)}}return w},queryRecords:function(v,w){var p=this.getData(),q=[],u,s,t;p=(p.getSource()||p).items;for(s=0,u=p.length;s<u;++s){t=p[s];if(t.get(v)===w){q.push(t)}}return q},privates:{isLast:function(f){return f===this.last()},makeInternalKeyCfg:function(){return{byInternalId:{property:"internalId",rootProperty:""}}}}},0,0,0,0,0,0,[Ext.data,"LocalStore"],0));(Ext.cmd.derive("Ext.data.proxy.Server",Ext.data.proxy.Proxy,{alternateClassName:"Ext.data.ServerProxy",isRemote:true,config:{url:"",pageParam:"page",startParam:"start",limitParam:"limit",groupParam:"group",groupDirectionParam:"groupDir",sortParam:"sort",filterParam:"filter",directionParam:"dir",idParam:"id",simpleSortMode:false,simpleGroupMode:false,noCache:true,cacheString:"_dc",timeout:30000,api:{create:undefined,read:undefined,update:undefined,destroy:undefined},extraParams:{}},create:function(){return this.doRequest.apply(this,arguments)},read:function(){return this.doRequest.apply(this,arguments)},update:function(){return this.doRequest.apply(this,arguments)},erase:function(){return this.doRequest.apply(this,arguments)},setExtraParam:function(n,m){var l=this.getExtraParams();l[n]=m;this.fireEvent("extraparamschanged",l)},updateExtraParams:function(g,l){this.fireEvent("extraparamschanged",g)},buildRequest:function(u){var w=this,t=Ext.apply({},u.getParams()),v=Ext.applyIf(t,w.getExtraParams()||{}),p,q,s;Ext.applyIf(v,w.getParams(u));q=u.getId();s=w.getIdParam();if(q!==undefined&&v[s]===undefined){v[s]=q}p=new Ext.data.Request({params:v,action:u.getAction(),records:u.getRecords(),url:u.getUrl(),operation:u,proxy:w});p.setUrl(w.buildUrl(p));u.setRequest(p);return p},processResponse:function(t,z,x,y){var v=this,A,w,u,s;if(v.destroying||v.destroyed){return}v.fireEvent("beginprocessresponse",v,y,z);if(t===true){w=v.getReader();if(y.status===204){u=w.getNullResultSet()}else{u=w.read(v.extractResponseData(y),{recordCreator:z.getRecordCreator()})}z.process(u,x,y);A=!z.wasSuccessful()}else{v.setException(z,y);A=true}if(A){v.fireEvent("exception",v,y,z)}else{s=u.getMetadata();if(s){v.onMetaChange(s)}}v.afterRequest(x,t);v.fireEvent("endprocessresponse",v,y,z)},setException:function(g,l){g.setException({status:l.status,statusText:l.statusText,response:l})},extractResponseData:Ext.identityFn,applyEncoding:function(f){return Ext.encode(f)},encodeSorters:function(n,p){var s=[],o=n.length,q;for(q=0;q<o;q++){s[q]=n[q].serialize()}return this.applyEncoding(p?s[0]:s)},encodeFilters:function(n){var s=[],o=n.length,q,p;for(q=0;q<o;q++){p=n[q];p.getFilterFn();if(p.generatedFilterFn){s.push(p.serialize())}}return this.applyEncoding(s)},getParams:function(G){if(!G.isReadOperation){return{}}var M=this,N={},Q=G.getGrouper(),Y=G.getSorters(),I=G.getFilters(),R=G.getPage(),S=G.getStart(),P=G.getLimit(),K=M.getSimpleSortMode(),V=M.getSimpleGroupMode(),E=M.getPageParam(),U=M.getStartParam(),X=M.getLimitParam(),W=M.getGroupParam(),J=M.getGroupDirectionParam(),T=M.getSortParam(),F=M.getFilterParam(),H=M.getDirectionParam(),L,O;if(E&&R){N[E]=R}if(U&&(S||S===0)){N[U]=S}if(X&&P){N[X]=P}L=W&&Q;if(L){if(V){N[W]=Q.getProperty();N[J]=Q.getDirection()}else{N[W]=M.encodeSorters([Q],true)}}if(T&&Y&&Y.length>0){if(K){O=0;if(Y.length>1&&L){O=1}N[T]=Y[O].getProperty();N[H]=Y[O].getDirection()}else{N[T]=M.encodeSorters(Y)}}if(F&&I&&I.length>0){N[F]=M.encodeFilters(I)}return N},buildUrl:function(l){var m=this,n=m.getUrl(l);if(m.getNoCache()){n=Ext.urlAppend(n,Ext.String.format("{0}={1}",m.getCacheString(),Ext.Date.now()))}return n},getUrl:function(g){var l;if(g){l=g.getUrl()||this.getApi()[g.getAction()]}return l?l:(arguments.callee.$previous||Ext.data.proxy.Proxy.prototype.getUrl).call(this)},doRequest:function(f){},afterRequest:Ext.emptyFn,destroy:function(){var f=this;f.destroying=true;f.reader=f.writer=Ext.destroy(f.reader,f.writer);Ext.data.proxy.Proxy.prototype.destroy.call(this);f.destroying=false;f.destroyed=true}},0,0,0,0,["proxy.server"],0,[Ext.data.proxy,"Server",Ext.data,"ServerProxy"],0));(Ext.cmd.derive("Ext.data.proxy.Ajax",Ext.data.proxy.Server,{alternateClassName:["Ext.data.HttpProxy","Ext.data.AjaxProxy"],isAjaxProxy:true,defaultActionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"},config:{binary:false,headers:undefined,paramsAsJson:false,withCredentials:false,useDefaultXhrHeader:true,username:null,password:null,actionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"}},doRequest:function(u){var q=this,p=q.getWriter(),s=q.buildRequest(u),v=q.getMethod(s),t,w;if(p&&u.allowWrite()){s=p.write(s)}s.setConfig({binary:q.getBinary(),headers:q.getHeaders(),timeout:q.getTimeout(),scope:q,callback:q.createRequestCallback(s,u),method:v,useDefaultXhrHeader:q.getUseDefaultXhrHeader(),disableCaching:false});if(v.toUpperCase()!=="GET"&&q.getParamsAsJson()){w=s.getParams();if(w){t=s.getJsonData();if(t){t=Ext.Object.merge({},t,w)}else{t=w}s.setJsonData(t);s.setParams(undefined)}}if(q.getWithCredentials()){s.setWithCredentials(true);s.setUsername(q.getUsername());s.setPassword(q.getPassword())}return q.sendRequest(s)},sendRequest:function(f){f.setRawRequest(Ext.Ajax.request(f.getCurrentConfig()));this.lastRequest=f;return f},abort:function(f){f=f||this.lastRequest;if(f){Ext.Ajax.abort(f.getRawRequest())}},getMethod:function(p){var n=this.getActionMethods(),o=p.getAction(),m;if(n){m=n[o]}return m||this.defaultActionMethods[o]},createRequestCallback:function(l,n){var m=this;return function(e,g,f){if(l===m.lastRequest){m.lastRequest=null}m.processResponse(g,n,l,f)}},destroy:function(){this.lastRequest=null;Ext.data.proxy.Server.prototype.destroy.call(this)}},0,0,0,0,["proxy.ajax"],0,[Ext.data.proxy,"Ajax",Ext.data,"HttpProxy",Ext.data,"AjaxProxy"],0));(Ext.cmd.derive("Ext.data.reader.Json",Ext.data.reader.Reader,{alternateClassName:"Ext.data.JsonReader",config:{record:null,metaProperty:"metaData",useSimpleAccessors:false,preserveRawData:false},updateRootProperty:function(){this.forceBuildExtractors()},updateMetaProperty:function(){this.forceBuildExtractors()},getResponseData:function(n){var m;try{return Ext.decode(n.responseText)}catch(l){m=this.createReadError(l.message);Ext.Logger.warn("Unable to parse the JSON returned by the server");this.fireEvent("exception",this,n,m);return m}},buildExtractors:function(){var l=this,n,m;if(Ext.data.reader.Reader.prototype.buildExtractors.apply(this,arguments)){n=l.getMetaProperty();m=l.getRootProperty();if(m){l.getRoot=l.getAccessor(m)}else{l.getRoot=Ext.identityFn}if(n){l.getMeta=l.getAccessor(n)}}},extractData:function(t,o){var u=this.getRecord(),p=[],q,s;if(u){q=t.length;if(!q&&Ext.isObject(t)){q=1;t=[t]}for(s=0;s<q;s++){p[s]=t[s][u]}}else{p=t}return Ext.data.reader.Reader.prototype.extractData.call(this,p,o)},getModelData:function(f){return this.getPreserveRawData()?Ext.apply({},f):f},createAccessor:(function(){var f=/[\[\.]/;return function(L){var P=this,I=P.getUseSimpleAccessors(),G,D,B,F,H,M,J,N,O,e,Q,E,K,C;if(!(L||L===0)){return}if(typeof L==="function"){return L}if(!I){G=String(L).search(f)}if(I===true||G<0){D=function(g){return g[L]}}else{B="raw";F=[];H="";M=0;C=L.length;for(E=0;E<=C;++E){Q=L[E];J=Q===".";N=Q==="[";O=Q==="]";e=J||N||O||!Q;if(!e||M>1||(M&&!O)){H+=Q}else{if(e){K=false;if(N){++M}else{if(O){--M;K=true}}if(H){if(K){H="["+H+"]"}else{H="."+H}B+=H;F.push(""+B);H=""}}}}D=F.join(" && ");D=Ext.functionFactory("raw","return "+D)}return D}}()),createFieldAccessor:function(n){var q=this,s=n.mapping,p=s||s===0,o=p?s:n.name;if(p){if(typeof o==="function"){return function(e){return n.mapping(e,q)}}else{return q.createAccessor(o)}}},getAccessorKey:function(g){var l=this.getUseSimpleAccessors()?"simple":"";return this.$className+l+g},privates:{copyFrom:function(f){Ext.data.reader.Reader.prototype.copyFrom.call(this,f);this.getRoot=f.getRoot}}},0,0,0,0,["reader.json"],0,[Ext.data.reader,"Json",Ext.data,"JsonReader"],0));(Ext.cmd.derive("Ext.data.writer.Json",Ext.data.writer.Writer,{alternateClassName:"Ext.data.JsonWriter",config:{rootProperty:undefined,encode:false,allowSingle:true,expandData:false},getExpandedData:function(x){var z=x.length,w=0,t,A,v,y,u,s=function(g,f){var e={};e[g]=f;return e};for(;w<z;w++){t=x[w];for(A in t){if(t.hasOwnProperty(A)){v=A.split(".");y=v.length-1;if(y>0){u=t[A];for(;y>0;y--){u=s(v[y],u)}t[v[0]]=t[v[0]]||{};Ext.Object.merge(t[v[0]],u);delete t[A]}}}}return x},writeRecords:function(p,w){var q=this,u=q.getRootProperty(),s,v,t;if(q.getExpandData()){w=q.getExpandedData(w)}if(q.getAllowSingle()&&w.length===1){w=w[0];v=true}t=this.getTransform();if(t){w=t(w,p)}if(q.getEncode()){if(u){p.setParam(u,Ext.encode(w))}else{}}else{if(v||(w&&w.length)){s=p.getJsonData()||{};if(u){s[u]=w}else{s=w}p.setJsonData(s)}}return p}},0,0,0,0,["writer.json"],0,[Ext.data.writer,"Json",Ext.data,"JsonWriter"],0));(Ext.cmd.derive("Ext.util.Group",Ext.util.Collection,{config:{groupKey:null},$endUpdatePriority:2001,manageSorters:false},0,0,0,0,0,0,[Ext.util,"Group"],0));(Ext.cmd.derive("Ext.util.GroupCollection",Ext.util.Collection,{isGroupCollection:true,config:{grouper:null,itemRoot:null},observerPriority:-100,constructor:function(f){Ext.util.Collection.prototype.constructor.call(this,f);this.on("remove","onGroupRemove",this)},onCollectionAdd:function(g,l){this.addItemsToGroups(g,l.items,l.at)},onCollectionBeforeItemChange:function(g,l){this.changeDetails=l},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionItemChange:function(l,n){var m=n.item;if(!n.indexChanged){this.syncItemGrouping(l,m,l.getKey(m),n.oldKey,n.oldIndex)}this.changeDetails=null},onCollectionRefresh:function(f){this.removeAll();this.addItemsToGroups(f,f.items)},onCollectionRemove:function(B,A){var v=this,D=v.changeDetails,w,n,E,x,z,y,C;if(D){C=D.item;E=v.findGroupForItem(C);w=[];if(E){w.push({group:E,items:[C]})}}else{w=v.groupItems(B,A.items,false)}for(x=0,z=w.length;x<z;++x){E=(n=w[x]).group;if(E){E.remove(n.items);if(!E.length){(y||(y=[])).push(E)}}}if(y){v.remove(y)}},onCollectionSort:function(p){var q=this,v=p.getSorters(false),u,s,t,w;if(v){u=q.items;s=q.length;for(t=0;t<s;++t){w=u[t];if(w.getSorters()!==v){w.setSorters(v)}}}},onCollectionUpdateKey:function(m,o){var p=o.index,n=o.item;if(!o.indexChanged){p=m.indexOf(n);this.syncItemGrouping(m,n,o.newKey,o.oldKey,p)}},addItemsToGroups:function(l,m,n){this.groupItems(l,m,true,n)},groupItems:function(J,M,G,N){var B=this,I={},O=[],L=J.getGrouper(),S=B.itemGroupKeys,Q,R,P,E,H,C,D,F,K;for(H=0,F=M.length;H<F;++H){E=L.getGroupString(C=M[H]);D=J.getKey(C);if(G){(S||(B.itemGroupKeys=S={}))[D]=E}else{if(S){delete S[D]}}if(!(R=I[E])){if(!(P=B.getByKey(E))&&G){(K||(K=[])).push(P=B.createGroup(J,E))}O.push(I[E]=R={group:P,items:[]})}R.items.push(C)}if(G&&B.length>1&&N){Q=J.indexOf(O[0].group.getAt(0));N=Math.max(N-Q,0)}for(H=0,F=O.length;H<F;++H){R=O[H];R.group.insert(N!=null?N:P.items.length,R.items)}if(K){B.add(K)}return O},syncItemGrouping:function(I,K,D,A,H){var N=this,Q=N.itemGroupKeys||(N.itemGroupKeys={}),G=I.getGrouper(),J=G.getGroupString(K),C=0,O=-1,M=D,P,L,E,B,F;if(A||A===0){B=Q[A];delete Q[A];M=A}else{B=Q[D]}Q[D]=J;if(!(L=N.get(J))){L=N.createGroup(I,J);P=[L]}if(L.get(M)!==K){if(L.getCount()>0&&I.getSorters().getCount()===0){F=I.indexOf(L.items[0]);if(H<F){O=0}else{O=H-F}}if(O===-1){L.add(K)}else{L.insert(O,K)}}else{L.itemChanged(K,null,A)}if(J!==B&&(B===0||B)){E=N.get(B);if(E){E.remove(K);if(!E.length){C=[E]}}}if(P){N.splice(0,C,P)}else{if(C){N.splice(0,C)}}},createGroup:function(m,n){var l=new Ext.util.Group({groupKey:n,rootProperty:this.getItemRoot(),sorters:m.getSorters()});return l},getKey:function(f){return f.getGroupKey()},createSortFn:function(){var l=this,n=l.getGrouper(),m=l.getSorters().getSortFn();if(!n){return m}return function(f,e){return n.sort(f.items[0],e.items[0])||m(f,e)}},updateGrouper:function(l){var g=this;g.grouped=!!(l&&g.$groupable.getAutoGroup());g.onSorterChange();g.onEndUpdateSorters(g.getSorters())},destroy:function(){this.$groupable=null;this.destroyGroups(this.items);Ext.util.Collection.prototype.destroy.call(this)},privates:{destroyGroups:function(m){var n=m.length,l;for(l=0;l<n;++l){m[l].destroy()}},findGroupForItem:function(o){var q=this.items,s=q.length,p,n;for(p=0;p<s;++p){n=q[p];if(n.contains(o)){return n}}},onGroupRemove:function(g,l){this.destroyGroups(l.items)}}},1,0,0,0,0,0,[Ext.util,"GroupCollection"],0));(Ext.cmd.derive("Ext.data.Store",Ext.data.ProxyStore,{config:{data:0,clearRemovedOnLoad:true,clearOnPageLoad:true,associatedEntity:null,role:null,session:null},addRecordsOptions:{addRecords:true},loadCount:0,complete:false,moveMapCount:0,constructor:function(n){var m=this,l;if(n){if(n.buffered){return new Ext.data.BufferedStore(n)}}Ext.data.ProxyStore.prototype.constructor.call(this,n);l=m.inlineData;if(l){delete m.inlineData;m.loadInlineData(l)}},applyData:function(l,n){var m=this;m.getFields();m.getModel();if(l&&l.isCollection){n=l}else{if(!n){n=m.constructDataCollection()}if(l){if(m.isInitializing){m.inlineData=l}else{m.loadData(l)}}}return n},loadInlineData:function(l){var m=this,n=m.getProxy();if(n&&n.isMemoryProxy){n.setData(l);m.suspendEvents();m.read();m.resumeEvents()}else{m.removeAll(true);m.suspendEvents();m.loadData(l);m.resumeEvents()}},onCollectionAdd:function(g,l){this.onCollectionAddItems(g,l.items,l)},onCollectionFilterAdd:function(g,l){this.onCollectionAddItems(g,l)},onCollectionAddItems:function(A,E,F){var K=this,y=E.length,I=F?!F.next:false,z=K.removed,B=K.ignoreCollectionAdd,x=K.getSession(),G=F&&F.replaced,D,J,C,H;for(D=0;D<y;++D){C=E[D];if(x){x.adopt(C)}if(!B){C.join(K);if(z&&z.length){Ext.Array.remove(z,C)}J=J||C.phantom||C.dirty}}if(B){return}if(G){H=[];do{Ext.Array.push(H,G.items);G=G.next}while(G);K.setMoving(H,true)}if(F){if(F.replaced){if(I){K.fireEvent("refresh",K)}}else{K.fireEvent("add",K,E,F.at);if(I){K.fireEvent("datachanged",K)}}}if(H){K.setMoving(H,false)}K.needsSync=K.needsSync||J},onCollectionBeforeItemChange:function(n,o){var s=o.item,p=o.modified||null,q=o.meta;this.fireEvent("beforeupdate",this,s,q,p,o)},onCollectionFilteredItemChange:function(){this.onCollectionItemChange.apply(this,arguments)},onCollectionItemChange:function(u,o){var p=this,t=o.item,q=o.modified||null,s=o.meta;if(p.fireChangeEvent(t)){p.onUpdate(t,s,q,o);p.fireEvent("update",p,t,s,q,o)}},afterChange:function(n,l,m){this.getData().itemChanged(n,l||null,undefined,m)},afterCommit:function(l,g){this.afterChange(l,g,Ext.data.Model.COMMIT)},afterEdit:function(l,g){this.needsSync=this.needsSync||l.dirty;this.afterChange(l,g,Ext.data.Model.EDIT)},afterReject:function(f){this.afterChange(f,null,Ext.data.Model.REJECT)},afterDrop:function(f){this.getData().remove(f)},afterErase:function(f){this.removeFromRemoved(f)},addSorted:function(s){var p=this,n=p.getRemoteSort(),o=p.getData(),q;if(n){o.setSorters(p.getSorters())}q=o.findInsertionIndex(s);if(n){o.setSorters(null)}return p.insert(q,s)},remove:function(z,s,u){var t=this,y=t.getDataSource(),v,x,A,w;if(z){if(z.isModel){if(y.indexOf(z)>-1){A=[z];v=1}else{v=0}}else{A=[];for(x=0,v=z.length;x<v;++x){w=z[x];if(w&&w.isEntity){if(!y.contains(w)){continue}}else{if(!(w=y.getAt(w))){continue}}A.push(w)}v=A.length}}if(!v){return[]}t.removeIsMove=s===true;t.removeIsSilent=u;y.remove(A);t.removeIsSilent=false;return A},onCollectionRemove:function(z,F){var I=this,y=I.removed,D=F.items,K=D.length,x=F.at,E=F.replacement,G=I.removeIsMove||(E&&Ext.Array.equals(D,E.items)),J=I.removeIsSilent,H=!F.next,B=I.getDataSource(),C,A;if(I.ignoreCollectionRemove){return}if(E){I.setMoving(E.items,true)}for(C=0;C<K;++C){A=D[C];if(!B.contains(A)){if(y&&!G&&!A.phantom&&!A.erasing){A.removedFrom=x+C;y.push(A);I.needsSync=true}else{A.unjoin(I)}}}if(!J){if(!E||!E.items.length){I.fireEvent("remove",I,D,x,G);if(H){I.fireEvent("datachanged",I)}}}if(E){I.setMoving(E.items,false)}},onFilterEndUpdate:function(){var f=this;if(f.destroying||f.destroyed){return}Ext.data.ProxyStore.prototype.onFilterEndUpdate.apply(this,arguments);f.callObservers("Filter")},removeAt:function(n,m){var l=this.getData();n=Math.max(n,0);if(n<l.length){if(arguments.length===1){m=1}else{if(!m){return}}l.removeAt(n,m)}},removeAll:function(q){var p=this,o=p.getData(),n=p.hasListeners.clear,s=o.getRange();if(o.length){p.removeIsSilent=true;p.callObservers("BeforeRemoveAll");o.removeAll();p.removeIsSilent=false;if(!q){p.fireEvent("clear",p,s);p.fireEvent("datachanged",p)}p.callObservers("AfterRemoveAll",[!!q])}return s},setRecords:function(l){var g=this.getCount();++this.loadCount;if(g){this.getData().splice(0,g,l)}else{this.add(l)}},splice:function(n,l,m){return this.getData().splice(n,l,m)},onProxyLoad:function(q){var o=this,p=q.getResultSet(),s=q.getRecords(),n=q.wasSuccessful();if(o.destroyed){return}if(p){o.totalCount=p.getTotal()}if(n){s=o.processAssociation(s);o.loadRecords(s,q.getAddRecords()?{addRecords:true}:undefined)}else{o.loading=false}if(o.hasListeners.load){o.fireEvent("load",o,s,n,q)}o.callObservers("AfterLoad",[s,n,q])},filterDataSource:function(o){var u=this.getDataSource(),s=u.items,t=s.length,q=[],p;for(p=0;p<t;p++){if(o.call(u,s[p])){q.push(s[p])}}return q},getNewRecords:function(){return this.filterDataSource(this.filterNew)},getRejectRecords:function(){return this.filterDataSource(this.filterRejects)},getUpdatedRecords:function(){return this.filterDataSource(this.filterUpdated)},loadData:function(u,t){var o=this,p=u.length,q=[],s;for(s=0;s<p;s++){q.push(o.createModel(u[s]))}q=o.processAssociation(q);o.loadRecords(q,t?o.addRecordsOptions:undefined)},loadRawData:function(p,t){var q=this,w=q.getSession(),u=q.getProxy().getReader().read(p,w?{recordCreator:w.recordCreator}:undefined),s=u.getRecords(),v=u.getSuccess();if(v){q.totalCount=u.getTotal();q.loadRecords(s,t?q.addRecordsOptions:undefined)}return v},loadRecords:function(w,t){var x=this,y=w.length,v=x.getData(),q,s,u;if(t){q=t.addRecords}if(!x.getRemoteSort()&&!x.getSortOnLoad()){u=true;v.setAutoSort(false)}if(!q){x.clearData(true)}x.loading=false;x.ignoreCollectionAdd=true;x.callObservers("BeforePopulate");v.add(w);x.ignoreCollectionAdd=false;if(u){v.setAutoSort(true)}for(s=0;s<y;s++){w[s].join(x)}++x.loadCount;x.complete=true;if(x.hasListeners.datachanged){x.fireEvent("datachanged",x)}if(x.hasListeners.refresh){x.fireEvent("refresh",x)}x.callObservers("AfterPopulate")},loadPage:function(m,p){var n=this,o=n.getPageSize();n.currentPage=m;p=Ext.apply({page:m,start:(m-1)*o,limit:o,addRecords:!n.getClearOnPageLoad()},p);n.read(p)},nextPage:function(f){this.loadPage(this.currentPage+1,f)},previousPage:function(f){this.loadPage(this.currentPage-1,f)},clearData:function(z){var t=this,v=t.removed,y=t.getDataSource(),u=t.getClearRemovedOnLoad(),C=v&&z&&!u,B,x,A,w;if(y){B=y.items;for(A=0,w=B.length;A<w;++A){x=B[A];if(C&&Ext.Array.contains(v,x)){continue}x.unjoin(t)}t.ignoreCollectionRemove=true;t.callObservers("BeforeClear");y.removeAll();t.ignoreCollectionRemove=false;t.callObservers("AfterClear")}if(v&&(!z||u)){v.length=0}},onIdChanged:function(l,m,n){this.getData().updateKey(l,m);this.fireEvent("idchanged",this,l,m,n)},commitChanges:function(){var n=this,m=n.getModifiedRecords(),p=m.length,o=0;Ext.suspendLayouts();n.beginUpdate();for(;o<p;o++){m[o].commit()}n.cleanRemoved();n.endUpdate();Ext.resumeLayouts(true)},filterNewOnly:function(f){return f.phantom===true},filterRejects:function(f){return f.phantom||f.dirty},rejectChanges:function(){var t=this,s=t.getRejectRecords(),v=s.length,x,z,A,u,y,w;Ext.suspendLayouts();t.beginUpdate();for(x=0;x<v;x++){z=s[x];if(z.phantom){A=A||[];A.push(z)}else{z.reject()}}if(A){t.remove(A);for(x=0,v=A.length;x<v;++x){A[x].reject()}}s=t.getRawRemovedRecords();if(s){v=s.length;u=!t.getRemoteSort()&&t.isSorted();if(u){y=t.getData();w=y.getAutoSort();y.setAutoSort(false)}for(x=v-1;x>=0;x--){z=s[x];z.reject();if(!u){t.insert(z.removedFrom||0,z)}}if(u){y.setAutoSort(w);t.add(s)}s.length=0}t.endUpdate();Ext.resumeLayouts(true)},doDestroy:function(){var o=this,p=o.loadTask,m=o.getData(),n=m.getSource();o.clearData();o.setSession(null);o.observers=null;if(p){p.cancel();o.loadTask=null}if(n){n.destroy()}Ext.data.ProxyStore.prototype.doDestroy.call(this)},privates:{fetch:function(g){g=Ext.apply({},g);this.setLoadOptions(g);var l=this.createOperation("read",g);l.execute()},fireChangeEvent:function(f){return this.getDataSource().contains(f)},onBeforeLoad:function(f){this.callObservers("BeforeLoad",[f])},onRemoteFilterSet:function(l,g){if(l){this.getData().setFilters(g?null:l)}Ext.data.ProxyStore.prototype.onRemoteFilterSet.call(this,l,g)},onRemoteSortSet:function(m,l){var n=this.getData();if(m){n.setSorters(l?null:m)}n.setAutoGroup(!l);Ext.data.ProxyStore.prototype.onRemoteSortSet.call(this,m,l)},isMoving:function(q,o){var u=this.moveMap,s=0,t,p;if(u){if(q){if(Ext.isArray(q)){for(p=0,t=q.length;p<t;++p){s+=u[q[p].id]?1:0}}else{if(u[q.id]){++s}}}else{s=o?u:this.moveMapCount}}return s},setLoadOptions:function(p){var o=this,s=o.getPageSize(),n,q;if(o.getRemoteSort()&&!p.grouper){q=o.getGrouper();if(q){p.grouper=q}}if(s||"start" in p||"limit" in p||"page" in p){p.page=p.page!=null?p.page:o.currentPage;p.start=(p.start!==undefined)?p.start:(p.page-1)*s;p.limit=p.limit!=null?p.limit:s;o.currentPage=p.page}p.addRecords=p.addRecords||false;if(!p.recordCreator){n=o.getSession();if(n){p.recordCreator=n.recordCreator}}Ext.data.ProxyStore.prototype.setLoadOptions.call(this,p)},setMoving:function(t,w){var q=this,p=q.moveMap||(q.moveMap={}),u=t.length,s,v;for(s=0;s<u;++s){v=t[s].id;if(w){if(p[v]){++p[v]}else{p[v]=1;++q.moveMapCount}}else{if(--p[v]===0){delete p[v];--q.moveMapCount}}}if(q.moveMapCount===0){q.moveMap=null}},processAssociation:function(n){var l=this,m=l.getAssociatedEntity();if(m){n=l.getRole().processLoad(l,m,n,l.getSession())}return n}}},1,0,0,0,["store.store"],[[Ext.data.LocalStore.prototype.mixinId||Ext.data.LocalStore.$className,Ext.data.LocalStore]],[Ext.data,"Store"],0));(Ext.cmd.derive("Ext.data.reader.Array",Ext.data.reader.Json,{alternateClassName:"Ext.data.ArrayReader",config:{totalProperty:undefined,successProperty:undefined},createFieldAccessor:function(m){var o=m.mapping,n=m.hasMapping()?o:m.ordinal,p;m.mapping=n;p=Ext.data.reader.Json.prototype.createFieldAccessor.apply(this,arguments);m.mapping=o;return p},getModelData:function(f){return{}}},0,0,0,0,["reader.array"],0,[Ext.data.reader,"Array",Ext.data,"ArrayReader"],0));(Ext.cmd.derive("Ext.data.ArrayStore",Ext.data.Store,{alternateClassName:["Ext.data.SimpleStore"],config:{proxy:{type:"memory",reader:"array"}},loadData:function(n,s){if(this.expandData){var o=[],q=0,p=n.length;for(;q<p;q++){o[o.length]=[n[q]]}n=o}Ext.data.Store.prototype.loadData.call(this,n,s)}},0,0,0,0,["store.array"],0,[Ext.data,"ArrayStore",Ext.data,"SimpleStore"],0));(Ext.cmd.derive("Ext.data.StoreManager",Ext.util.MixedCollection,{alternateClassName:["Ext.StoreMgr","Ext.data.StoreMgr","Ext.StoreManager"],singleton:true,register:function(){for(var l=0,g;(g=arguments[l]);l++){this.add(g)}},unregister:function(){for(var l=0,g;(g=arguments[l]);l++){this.remove(this.lookup(g))}},lookup:function(s,v){if(Ext.isArray(s)){var t=["field1"],p=!Ext.isArray(s[0]),w=s,q,u;if(p){w=[];for(q=0,u=s.length;q<u;++q){w.push([s[q]])}}else{for(q=2,u=s[0].length;q<=u;++q){t.push("field"+q)}}return new Ext.data.ArrayStore({data:w,fields:t,autoDestroy:true,autoCreated:true,expanded:p})}if(Ext.isString(s)){return this.get(s)}else{return Ext.Factory.store(s,v)}},getKey:function(f){return f.storeId},addEmptyStore:function(){var f=Ext.regStore("ext-empty-store",{proxy:"memory",useModelWarning:false});f.isEmptyStore=true;this.add(f)},clear:function(){this.callParent();this.addEmptyStore()}},0,0,0,0,0,0,[Ext.data,"StoreManager",Ext,"StoreMgr",Ext.data,"StoreMgr",Ext,"StoreManager"],function(){Ext.regStore=function(l,m){var n;if(Ext.isObject(l)){m=l}else{if(Ext.data.StoreManager.containsKey(l)){return Ext.data.StoreManager.lookup(l)}m.storeId=l}if(m instanceof Ext.data.Store){n=m}else{n=new Ext.data.Store(m)}Ext.data.StoreManager.register(n);return n};Ext.getStore=function(f){return Ext.data.StoreManager.lookup(f)};Ext.data.StoreManager.addEmptyStore()}));(Ext.cmd.derive("Ext.util.StoreHolder",Ext.Base,{mixinId:"storeholder",autoDestroyBoundStore:false,bindStore:function(q,p,s){s=s||"store";var o=this,n=p?null:o[s];if(q!==n){if(n){if(!o.onUnbindStore.$emptyFn){o.onUnbindStore(n,p,s)}if(!n.destroyed){if(o.autoDestroyBoundStore&&s==="store"&&n.autoDestroy){n.destroy()}else{o.unbindStoreListeners(n)}}}if(q){o[s]=q=Ext.data.StoreManager.lookup(q);o.bindStoreListeners(q);if(!o.onBindStore.$emptyFn){o.onBindStore(q,n,p)}}else{o[s]=null}if(o.fireEvent){o.fireEvent("storechange",o,q,n)}}return o},getStore:function(){return this.store},setStore:function(f){this.bindStore(f)},unbindStoreListeners:function(l){var g=this.storeListeners;if(g){l.un(g)}},bindStoreListeners:function(l){var g=this.getStoreListeners(l);if(g){g=Ext.apply({},g);if(!g.scope){g.scope=this}this.storeListeners=g;l.on(g)}},getStoreListeners:Ext.emptyFn,onUnbindStore:Ext.emptyFn,onBindStore:Ext.emptyFn},0,0,0,0,0,0,[Ext.util,"StoreHolder"],0));(Ext.cmd.derive("Ext.LoadMask",Ext.Component,{isLoadMask:true,msg:"Loading...",msgCls:"x-mask-loading",msgWrapCls:"x-mask-msg",useMsg:true,useTargetEl:false,cls:"x-mask",componentCls:"x-border-box",ariaRole:"progressbar",focusable:true,tabIndex:0,childEls:["msgWrapEl","msgEl","msgTextEl"],renderTpl:['<div id="{id}-msgWrapEl" data-ref="msgWrapEl" class="{[values.$comp.msgWrapCls]}" role="presentation">','<div id="{id}-msgEl" data-ref="msgEl" class="{[values.$comp.msgCls]} ',"x-",'mask-msg-inner {childElCls}" role="presentation">','<div id="{id}-msgTextEl" data-ref="msgTextEl" class="',"x-","mask-msg-text",'{childElCls}" role="presentation">{msg}</div>',"</div>","</div>"],maskOnDisable:false,skipLayout:true,constructor:function(m){var l=this,n;if(arguments.length===2){n=l.target=m;m=arguments[1]}else{n=m.target}Ext.Component.prototype.constructor.call(this,m);if(n.isComponent){l.ownerCt=n;l.hidden=true;l.renderTo=l.getMaskTarget();l.external=l.renderTo===Ext.getBody();l.bindComponent(n)}else{n=Ext.get(n);l.isElement=true;l.renderTo=l.target}l.render(l.renderTo);if(l.store){l.bindStore(l.store,true)}},initRenderData:function(){var f=Ext.Component.prototype.initRenderData.apply(this,arguments);f.msg=this.msg||"";return f},onRender:function(){Ext.Component.prototype.onRender.apply(this,arguments);this.maskEl=this.el},bindComponent:function(n){var l=this,m={scope:this,resize:l.sizeMask};if(l.external){m.added=l.onComponentAdded;m.removed=l.onComponentRemoved;if(n.floating){m.move=l.sizeMask;l.activeOwner=n}else{if(n.ownerCt){l.onComponentAdded(n.ownerCt)}}}l.mon(n,m);if(l.external){l.mon(Ext.GlobalEvents,{show:l.onContainerShow,hide:l.onContainerHide,expand:l.onContainerExpand,collapse:l.onContainerCollapse,scope:l})}},onComponentAdded:function(l){var g=this;delete g.activeOwner;g.floatParent=l;if(!l.floating){l=l.up("[floating]")}if(l){g.activeOwner=l;g.mon(l,"move",g.sizeMask,g);g.mon(l,"tofront",g.onOwnerToFront,g)}else{g.preventBringToFront=true}l=g.floatParent.ownerCt;if(g.rendered&&g.isVisible()&&l){g.floatOwner=l;g.mon(l,"afterlayout",g.sizeMask,g,{single:true})}},onComponentRemoved:function(p){var n=this,m=n.activeOwner,o=n.floatOwner;if(m){n.mun(m,"move",n.sizeMask,n);n.mun(m,"tofront",n.onOwnerToFront,n)}if(o){n.mun(o,"afterlayout",n.sizeMask,n)}delete n.activeOwner;delete n.floatOwner},afterRender:function(){var f=this;Ext.Component.prototype.afterRender.apply(this,arguments);if(Ext.isIE){f.el.on("mousedown",f.onMouseDown,f)}this.el.skipGarbageCollection=true},onMouseDown:function(e){var l=this.el;if(e.within(l)){e.preventDefault();l.focus()}},onOwnerToFront:function(l,g){this.el.setStyle("zIndex",g+1)},onContainerShow:function(f){if(!this.isHierarchicallyHidden()){this.onComponentShow()}},onContainerHide:function(f){if(this.isHierarchicallyHidden()){this.onComponentHide()}},onContainerExpand:function(f){if(!this.isHierarchicallyHidden()){this.onComponentShow()}},onContainerCollapse:function(f){if(this.isHierarchicallyHidden()){this.onComponentHide()}},onComponentHide:function(){var f=this;if(f.rendered&&f.isVisible()){f.hide();f.showNext=true}},onComponentShow:function(){if(this.showNext){this.show()}delete this.showNext},sizeMask:function(){var o=this,n=o.activeOwner||o.target,p=o.external?o.getOwner().el:o.getMaskTarget(),m;if(o.rendered&&o.isVisible()){if(o.external){if(!o.isElement&&n.floating){m=n.el.getZIndex();if(!isNaN(m)){o.onOwnerToFront(n,m)}}o.el.setSize(p.getSize()).alignTo(p,"tl-tl")}o.msgWrapEl.center(o.el)}},bindStore:function(n,m){var l=this;Ext.destroy(l.proxyListeners);l.mixins.storeholder.bindStore.apply(l,arguments);n=l.store;if(n){while(n.getSource){n=n.getSource()}if(!n.loadsSynchronously()){l.proxyListeners=n.getProxy().on({exception:l.onLoad,scope:l,destroyable:true})}if(n.isLoading()){l.onBeforeLoad()}}},getStoreListeners:function(o){var m=this.onLoad,n=this.onBeforeLoad,p={cachemiss:n,cachefilled:{fn:m,buffer:100}};if(!o.loadsSynchronously()){p.beforeload=n;p.load=m}return p},onDisable:function(){Ext.Component.prototype.onDisable.apply(this,arguments);if(this.loading){this.onLoad()}},getOwner:function(){return this.ownerCt||this.ownerCmp||this.floatParent},getMaskTarget:function(){var f=this.getOwner();if(this.isElement){return this.target}return this.useTargetEl?f.getTargetEl():(f.getMaskTarget()||Ext.getBody())},onBeforeLoad:function(){var l=this,n=l.getOwner(),m;if(!l.disabled){l.loading=true;if(n.componentLayoutCounter){l.maybeShow()}else{m=n.afterComponentLayout;n.afterComponentLayout=function(){n.afterComponentLayout=m;m.apply(n,arguments);l.maybeShow()}}}},maybeShow:function(){var l=this,n=l.getOwner(),m;m=n.isVisible(true)&&(!l.isComponent||n.el.isVisible(true));if(!m){l.showNext=true}else{if(l.loading&&n.rendered){l.show()}}},hide:function(){var g=this,l=g.ownerCt;if(g.isElement){l.unmask();g.fireEvent("hide",this);return}if(l){l.updateMaskState(false,g)}delete g.showNext;return Ext.Component.prototype.hide.apply(this,arguments)},show:function(){var f=this;if(f.isElement){f.ownerCt.mask(this.useMsg?this.msg:"",this.msgCls);f.fireEvent("show",this);return}return Ext.Component.prototype.show.apply(this,arguments)},afterShow:function(){var g=this,l=g.ownerCt;g.loading=true;Ext.Component.prototype.afterShow.apply(this,arguments);l.updateMaskState(true,g);g.el.restoreTabbableState();g.syncMaskState()},syncMaskState:function(){var l=this,m=l.ownerCt,n=l.el;if(l.isVisible()){if(l.hasOwnProperty("msgWrapCls")){n.dom.className=l.msgWrapCls}if(l.useMsg){l.msgTextEl.setHtml(l.msg);l.ariaEl.dom.setAttribute("aria-valuetext",l.msg)}else{l.msgWrapEl.hide()}if(l.shim||Ext.useShims){n.enableShim(null,true)}else{n.disableShim()}if(m.el.contains(Ext.Element.getActiveElement())){l.focus()}l.sizeMask()}},onLoad:function(){this.loading=false;this.hide()},doDestroy:function(){var f=this;f.ownerCt=null;f.bindStore(null);if(f.isElement){f.ownerCt.unmask()}Ext.Component.prototype.doDestroy.call(this)}},1,["loadmask"],["component","box","loadmask"],{component:true,box:true,loadmask:true},["widget.loadmask"],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext,"LoadMask"],0));(Ext.cmd.derive("Ext.util.Bag",Ext.Base,{isBag:true,constructor:function(){this.items=[];this.map={}},generation:0,length:0,beginUpdate:Ext.emptyFn,endUpdate:Ext.emptyFn,add:function(D){var F=this,G=F.items,C=F.map,z=1,y,w,E,A,x,n,B;if(Ext.isArray(D)){y=n=[];z=D.length}for(w=0;w<z;w++){A=F.getKey(x=y?D[w]:D);E=C[A];if(E===undefined){G.push(x);C[A]=F.length++;if(y){y.push(x)}else{n=x}}else{B=G[E];if(y){y.push(B)}else{n=B}G[E]=x}}++F.generation;return n},clear:function(){var l=this,m=l.generation||l.length,n=m?l.items:[];if(m){l.items=[];l.length=0;l.map={};++l.generation}return n},clone:function(){var l=this,m=new l.self(),n=l.length;if(n){Ext.apply(m.map,l.map);m.items=l.items.slice();m.length=l.length}return m},contains:function(n){var p=false,m=this.map,o;if(n!=null){o=this.getKey(n);if(o in m){p=this.items[m[o]]===n}}return p},containsKey:function(f){return f in this.map},destroy:function(){this.items=this.map=null;this.callParent()},each:function(u,o){var s=this.items,t=s.length,p,q;if(t){o=o||this;s=s.slice(0);for(p=0;p<t;p++){q=u.call(o,s[p],p,t);if(q===false){break}}}return q},getAt:function(g){var l=null;if(g<this.length){l=this.items[g]}return l},get:function(f){return this.getByKey(f)},getByKey:function(m){var l=this.map,n=(m in l)?this.items[l[m]]:null;return n},indexOfKey:function(m){var l=this.map,n=(m in l)?l[m]:-1;return n},last:function(){return this.items[this.length-1]},updateKey:function(q,o){var s=this,p=s.map,n;if(!q||!o){return}if((n=s.getKey(q))!==o){if(s.getAt(p[o])===q&&!(n in p)){s.generation++;p[n]=p[o];delete p[o]}}},getCount:function(){return this.length},getKey:function(f){return f.id||f.getId()},getRange:function(o,s){var p=this.items,n=p.length,q;if(!n){q=[]}else{q=Ext.Number.clipIndices(n,[o,s]);q=p.slice(q[0],q[1])}return q},remove:function(E){var H=this,D=H.map,I=H.items,n=null,A=1,x,z,y,G,B,F,C;if(Ext.isArray(E)){A=E.length;z=n=[]}if(H.length){for(y=0;y<A;y++){G=D[B=H.getKey(z?E[y]:E)];if(G!==undefined){delete D[B];C=I[G];if(z){z.push(C)}else{n=C}F=I.pop();if(G<--H.length){I[G]=F;D[H.getKey(F)]=G}x=true}}if(x){++H.generation}}return n},removeByKey:function(l){var g=this.getByKey(l);if(g){this.remove(g)}return g||null},replace:function(f){this.add(f);return f},sort:function(q){var o=this,s=o.items,n=s.length,p;if(n){Ext.Array.sort(s,q);o.map={};while(n-->0){p=s[n];o.map[o.getKey(p)]=n}++o.generation}}},1,0,0,0,0,0,[Ext.util,"Bag"],0));(Ext.cmd.derive("Ext.selection.Model",Ext.mixin.Observable,{alternateClassName:"Ext.AbstractSelectionModel",factoryConfig:{defaultType:"dataviewmodel"},$configPrefixed:false,$configStrict:false,config:{store:null,selected:{}},isSelectionModel:true,allowDeselect:undefined,toggleOnClick:true,ordered:false,selected:null,pruneRemoved:true,suspendChange:0,ignoreRightMouseSelection:false,constructor:function(l){var g=this;g.modes={SINGLE:true,SIMPLE:true,MULTI:true};Ext.mixin.Observable.prototype.constructor.call(this,l);g.setSelectionMode(g.mode);if(g.selectionMode!=="SINGLE"){g.allowDeselect=true}},updateStore:function(l,g){this.bindStore(l,!g)},applySelected:function(f){if(!f.isBag&&!f.isCollection){f=new Ext.util[this.ordered?"Collection":"Bag"](Ext.apply({rootProperty:"data"},f))}return f},getStoreListeners:function(){var f=this;return{add:f.onStoreAdd,clear:f.onStoreClear,remove:f.onStoreRemove,update:f.onStoreUpdate,idchanged:f.onIdChanged,load:f.onStoreLoad,refresh:f.onStoreRefresh,pageadd:f.onPageAdd,pageremove:f.onPageRemove}},onBindStore:function(n,l,m){if(!m){this.updateSelectedInstances(this.selected)}},suspendChanges:function(){++this.suspendChange},resumeChanges:function(){if(this.suspendChange){--this.suspendChange}},selectAll:function(p){var n=this,o=n.store.getRange(),m=n.getSelection().length;n.suspendChanges();n.doSelect(o,true,p);if(!n.destroyed){n.resumeChanges();if(!p){n.maybeFireSelectionChange(n.getSelection().length!==m)}}},deselectAll:function(A){var u=this,y=u.getSelection(),t={},l=u.store,z=y.length,v,x,w;for(v=0,x=y.length;v<x;v++){w=y[v];t[w.id]=l.indexOf(w)}y=Ext.Array.sort(y,function(g,e){var f=t[g.id],m=t[e.id];return f<m?-1:1});u.suspendChanges();u.doDeselect(y,A);if(!u.destroyed){u.resumeChanges();if(!A){u.maybeFireSelectionChange(u.getSelection().length!==z)}}},getSelectionStart:function(){return this.selectionStart},setSelectionStart:function(f){this.selectionStart=f},selectWithEvent:function(p,s){var e=this,o=e.isSelected(p),q=s.shiftKey;switch(e.selectionMode){case"MULTI":e.selectWithEventMulti(p,s,o);break;case"SIMPLE":e.selectWithEventSimple(p,s,o);break;case"SINGLE":e.selectWithEventSingle(p,s,o);break}if(e.destroyed){return}if(!q){if(e.isSelected(p)){e.selectionStart=p}else{e.selectionStart=null}}},vetoSelection:function(e){if(e.stopSelection){return true}else{if(e.type!=="keydown"&&e.button!==0){if(this.ignoreRightMouseSelection||this.isSelected(e.record)){return true}}else{return e.type==="mousedown"}}},onNavigate:function(y){if(!y.record||this.vetoSelection(y.keyEvent)){return}this.onBeforeNavigate(y);var K=this,e=y.keyEvent,D=e.ctrlKey||y.ctrlKey,A=y.recordIndex,z=y.record,G=y.previousRecord,C=K.isSelected(z),I=(K.selectionStart&&K.isSelected(y.previousRecord))?K.selectionStart:(K.selectionStart=y.previousRecord),E=y.previousRecordIndex,H=e.getCharCode(),F=H===e.SPACE,B=y.record!==y.previousRecord,J=H===e.UP||H===e.PAGE_UP||H===e.HOME||(H===e.LEFT&&B)?"up":(H===e.DOWN||H===e.PAGE_DOWN||H===e.END||(H===e.RIGHT&&B)?"down":null);switch(K.selectionMode){case"MULTI":K.setSelectionStart(y.selectionStart);if(H===e.A&&D){K.selected.beginUpdate();K.selectRange(0,K.store.getCount()-1);K.selected.endUpdate()}else{if(F){if(e.shiftKey){K.selectRange(I,z,D)}else{if(C){if(K.allowDeselect){K.doDeselect(z)}}else{K.doSelect(z,D)}}}else{if(e.shiftKey&&I){if(J==="up"&&E<=A){K.deselectRange(G,A+1)}else{if(J==="down"&&E>=A){K.deselectRange(G,A-1)}else{if(I!==z){K.selectRange(I,z,D)}}}K.lastSelected=z}else{if(H){if(!D){K.doSelect(z,false)}}else{K.selectWithEvent(z,e)}}}}break;case"SIMPLE":if(H===e.A&&D){K.selected.beginUpdate();K.selectRange(0,K.store.getCount()-1);K.selected.endUpdate()}else{if(C){K.doDeselect(z)}else{K.doSelect(z,true)}}break;case"SINGLE":if(!D){if(J){K.doSelect(z,false)}else{if(F||!H){K.selectWithEvent(z,e)}}}}if(!e.shiftKey&&!K.destroyed&&K.isSelected(z)){K.selectionStart=z;K.selectionStartIdx=A}},selectRange:function(H,B,G){var x=this,I=x.store,C=x.selected.items,F,z,y,A,E,w,D;if(x.isLocked()){return}F=x.normalizeRowRange(H,B);H=F[0];B=F[1];A=[];for(z=H;z<=B;z++){if(!x.isSelected(I.getAt(z))){A.push(I.getAt(z))}}if(!G){E=[];x.suspendChanges();for(z=0,y=C.length;z<y;++z){D=C[z];w=I.indexOf(D);if(w<H||w>B){E.push(D)}}for(z=0,y=E.length;z<y;++z){x.doDeselect(E[z]);if(x.destroyed){break}}if(!x.destroyed){x.resumeChanges()}}if(!x.destroyed){if(A.length){x.doMultiSelect(A,true)}else{if(E){x.maybeFireSelectionChange(E.length>0)}}}},deselectRange:function(q,s){var w=this,t=w.store,v,x,y,u;if(w.isLocked()){return}v=w.normalizeRowRange(q,s);q=v[0];s=v[1];y=[];for(x=q;x<=s;x++){u=t.getAt(x);if(w.isSelected(u)){y.push(u)}}if(y.length){w.doDeselect(y)}},normalizeRowRange:function(n,o){var p=this.store,m;if(!Ext.isNumber(n)){n=p.indexOf(n)}n=Math.max(0,n);if(!Ext.isNumber(o)){o=p.indexOf(o)}o=Math.min(o,p.getCount()-1);if(n>o){m=o;o=n;n=m}return[n,o]},select:function(m,l,n){if(Ext.isDefined(m)&&!(Ext.isArray(m)&&!m.length)){this.doSelect(m,l,n)}},deselect:function(g,l){this.doDeselect(g,l)},doSelect:function(p,n,q){var o=this,s;if(o.locked||p==null){return}if(typeof p==="number"){s=o.store.getAt(p);if(!s){return}p=[s]}if(o.selectionMode==="SINGLE"){if(p.isModel){p=[p]}if(p.length){o.doSingleSelect(p[0],q)}}else{o.doMultiSelect(p,n,q)}},doMultiSelect:function(C,E,u){var w=this,B=w.selected,v=false,D,z,x,y,A;if(w.locked){return}C=!Ext.isArray(C)?[C]:C;x=C.length;if(!E&&B.getCount()>0){D=w.deselectDuringSelect(C,u);if(w.destroyed){return}if(D[0]){w.maybeFireSelectionChange(D[1]>0&&!u);return}else{v=D[1]>0}}A=function(){if(!B.getCount()){w.selectionStart=y}if(!u){B.add(y)}v=true};for(z=0;z<x;z++){y=C[z];if(w.isSelected(y)){continue}w.onSelectChange(y,true,u,A);if(w.destroyed){return}}w.lastSelected=y;if(u){B.add(C)}w.maybeFireSelectionChange(v&&!u)},deselectDuringSelect:function(x,t){var u=this,A=u.selected.getRange(),v=A.length,y=0,w=false,s,z;u.suspendChanges();u.deselectingDuringSelect=true;for(z=0;z<v;++z){s=A[z];if(!Ext.Array.contains(x,s)){if(u.doDeselect(s,t)){++y}else{w=true}}if(u.destroyed){w=true;y=0;break}}u.deselectingDuringSelect=false;if(!u.destroyed){u.resumeChanges()}return[w,y]},doDeselect:function(B,t){var u=this,A=u.selected,y=0,v,x,C=0,w=0,z;if(u.locked||!u.store){return false}if(typeof B==="number"){x=u.store.getAt(B);if(!x){return false}B=[x]}else{if(!Ext.isArray(B)){B=[B]}}z=function(){++w;if(!t){A.remove(x)}if(x===u.selectionStart){u.selectionStart=null}};v=B.length;u.suspendChanges();for(;y<v;y++){x=B[y];if(u.isSelected(x)){if(u.lastSelected===x){u.lastSelected=A.last()}++C;u.onSelectChange(x,false,t,z);if(u.destroyed){return false}}}u.resumeChanges();if(t){A.remove(B)}u.maybeFireSelectionChange(w>0&&!t);return w===C},doSingleSelect:function(t,s){var p=this,u=false,q=p.selected,o;if(p.locked){return}if(p.isSelected(t)){return}o=function(){if(q.getCount()){p.suspendChanges();var e=p.deselectDuringSelect([t],s);if(p.destroyed){return}p.resumeChanges();if(e[0]){return false}}p.lastSelected=t;if(!q.getCount()){p.selectionStart=t}q.add(t);u=true};p.onSelectChange(t,true,s,o);if(u&&!p.destroyed){p.maybeFireSelectionChange(!s)}},maybeFireSelectionChange:function(l){var g=this;if(l&&!g.suspendChange){g.fireEvent("selectionchange",g,g.getSelection())}},getSelection:function(){return this.selected.getRange()},getSelectionMode:function(){return this.selectionMode},setSelectionMode:function(f){f=f?f.toUpperCase():"SINGLE";this.selectionMode=this.modes[f]?f:"SINGLE"},isLocked:function(){return this.locked},setLocked:function(f){this.locked=!!f},isRangeSelected:function(p,q){var u=this,s=u.store,o,t;t=u.normalizeRowRange(p,q);p=t[0];q=t[1];for(o=p;o<=q;o++){if(!u.isSelected(s.getAt(o))){return false}}return true},isSelected:function(f){f=Ext.isNumber(f)?this.store.getAt(f):f;return this.selected?this.selected.contains(f):false},hasSelection:function(){var f=this.getSelected();return !!(f&&f.getCount())},refresh:function(){var I=this,F=I.store,z=[],w=[],A=I.getSelection(),y=A.length,C=I.getSelected(),H,x,E,G,D,B;if(!F||!(C.isCollection||C.isBag||C.isRows)||!C.getCount()){return}E=F.getData();if(E.getSource){x=E.getSource();if(x){E=x}}I.refreshing=true;C.beginUpdate();I.suspendChanges();for(B=0;B<y;B++){G=A[B];D=E.get(G.getId());if(D){z.push(D)}else{if(!I.pruneRemoved){w.push(G)}}if(I.mode==="SINGLE"&&w.length){break}}if(C.getCount()!==(z.length+w.length)){H=true}I.clearSelections();if(z.length){I.doSelect(z,false,true)}if(w.length){C.add(w);if(!I.lastSelected){I.lastSelected=w[w.length-1]}}I.resumeChanges();if(H){C.endUpdate()}else{C.updating--}I.refreshing=false;I.maybeFireSelectionChange(H)},clearSelections:function(){var f=this.getSelected();if(f){f.clear()}this.lastSelected=null},onStoreAdd:Ext.emptyFn,onStoreClear:function(){if((!this.store.isLoading()||this.store.clearing)&&this.hasSelection()){this.clearSelections();this.maybeFireSelectionChange(true)}},onStoreRemove:function(t,A,x,C){var u=this,B=A,y,w,z,v;if(u.selectionStart&&Ext.Array.contains(A,u.selectionStart)){u.selectionStart=null}if(C||u.locked||!u.pruneRemoved){return}v=t.isMoving(null,true);if(v){B=null;for(y=0,w=A.length;y<w;++y){z=A[y];if(!v[z.id]){(B||(B=[])).push(z)}}}if(B){u.deselect(B)}},onPageRemove:function(m,n,l){this.onStoreRemove(this.store,l)},onPageAdd:function(p,q,o){var t=o.length,u,s;for(u=0;u<t;u++){s=o[u];if(this.selected.get(s.id)){this.selected.replace(s)}}},getCount:function(){return this.selected.getCount()},onUpdate:Ext.emptyFn,destroy:function(){var f=this;f.clearSelections();f.bindStore(null);f.selected=Ext.destroy(f.selected);Ext.mixin.Observable.prototype.destroy.call(this)},onStoreUpdate:Ext.emptyFn,onIdChanged:function(p,m,n,o){this.selected.updateKey(m,n)},onStoreRefresh:function(){this.updateSelectedInstances(this.selected)},updateSelectedInstances:function(z){var v=this,F=v.getStore(),G=v.lastSelected,D=0,B=v.pruneRemovedOnRefresh(),w,C,y,E,A,x;if(F&&F.isBufferedStore){return}w=z.getRange();C=w.length;if(G){v.lastSelected=F.getById(G.id);x=v.lastSelected!==G}v.refreshing=true;if(F){for(y=0;y<C;++y){E=w[y];A=F.getById(E.id);if(A){if(A!==E){z.add(A)}}else{if(B){z.remove(E);++D}}}}else{D=z.getCount();z.removeAll()}v.refreshing=false;v.maybeFireSelectionChange(D>0);if(x){v.fireEvent("lastselectedchanged",v,v.getSelection(),G)}},pruneRemovedOnRefresh:function(){return this.pruneRemoved},onStoreLoad:Ext.emptyFn,onSelectChange:function(t,p,q,u){var o=this,s=p?"select":"deselect";if((q||o.fireEvent("before"+s,o,t))!==false&&u()!==false){if(!q&&!o.destroyed){o.fireEvent(s,o,t)}}},onEditorKey:Ext.emptyFn,beforeViewRender:function(f){Ext.Array.include(this.views||(this.views=[]),f)},onHeaderClick:Ext.emptyFn,resolveListenerScope:function(l){var n=this.view,m;if(n){m=n.resolveSatelliteListenerScope(this,l)}return m||Ext.mixin.Observable.prototype.resolveListenerScope.call(this,l)},bindComponent:Ext.emptyFn,privates:{onBeforeNavigate:Ext.privateFn,getLastSelected:function(){return this.lastSelected},selectWithEventMulti:function(e,F,z){var E=this,y=F.shiftKey,C=F.ctrlKey,A=y?(E.getSelectionStart()):null,x=E.getSelection(),G=x.length,B,w,D;if(y&&A){E.selectRange(A,e,C)}else{if(C&&z){if(E.allowDeselect){E.doDeselect(e,false)}}else{if(C){E.doSelect(e,true,false)}else{if(z&&!y&&!C&&G>1){if(E.allowDeselect){B=[];for(w=0;w<G;++w){D=x[w];if(D!==e){B.push(D)}}E.doDeselect(B)}}else{if(!z){E.doSelect(e,false)}}}}}},selectWithEventSimple:function(n,e,m){if(m){this.doDeselect(n)}else{this.doSelect(n,true)}},selectWithEventSingle:function(p,s,o){var e=this,q=e.allowDeselect;if(q&&!s.ctrlKey){q=e.toggleOnClick}if(q&&o){e.doDeselect(p)}else{e.doSelect(p,false)}}}},1,0,0,0,["selection.abstract"],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.selection,"Model",Ext,"AbstractSelectionModel"],0));(Ext.cmd.derive("Ext.selection.DataViewModel",Ext.selection.Model,{deselectOnContainerClick:true,bindComponent:function(n){var l=this,m;if(l.view!==n){if(l.view){l.navigationModel=null;Ext.destroy(l.viewListeners,l.navigationListeners)}l.view=n;if(n){m=l.getViewListeners();m.scope=l;m.destroyable=true;l.navigationModel=n.getNavigationModel();l.viewListeners=n.on(m);l.navigationListeners=l.navigationModel.on({navigate:l.onNavigate,scope:l,destroyable:true})}}},getViewListeners:function(){var l=this,g={};g[l.view.triggerCtEvent]=l.onContainerClick;return g},onUpdate:function(g){var l=this.view;if(l&&this.isSelected(g)){l.onItemSelect(g)}},onContainerClick:function(){if(this.deselectOnContainerClick){this.deselectAll()}},onSelectChange:function(u,y,q,w){var x=this,v=x.view,s=y?"select":"deselect",t=x.store.indexOf(u);if((q||x.fireEvent("before"+s,x,u,t))!==false&&w()!==false){if(v&&!v.destroyed){if(y){v.onItemSelect(u)}else{v.onItemDeselect(u)}}if(!q&&!x.destroyed){x.fireEvent(s,x,u,t)}}},destroy:function(){this.bindComponent();Ext.destroy(this.keyNav);Ext.selection.Model.prototype.destroy.call(this)}},0,0,0,0,["selection.dataviewmodel"],0,[Ext.selection,"DataViewModel"],0));(Ext.cmd.derive("Ext.view.NavigationModel",Ext.Base,{config:{store:null},focusCls:"x-view-item-focused",constructor:function(){this.mixins.observable.constructor.call(this)},bindComponent:function(f){if(this.view!==f){this.view=f;this.bindView(f)}},bindView:function(p){var n=this,m=p.dataSource,o;n.initKeyNav(p);if(!m.isEmptyStore){n.setStore(m)}o=n.getViewListeners();o.destroyable=true;n.viewListeners=n.viewListeners||[];n.viewListeners.push(p.on(o))},updateStore:function(f){this.mixins.storeholder.bindStore.apply(this,[f])},getViewListeners:function(){var f=this;return{containermousedown:f.onContainerMouseDown,itemmousedown:f.onItemMouseDown,itemclick:f.onItemClick,itemcontextmenu:f.onItemMouseDown,scope:f}},initKeyNav:function(l){var g=this;g.keyNav=new Ext.util.KeyNav({target:l,ignoreInputFields:true,eventName:"itemkeydown",defaultEventAction:"stopEvent",processEvent:g.processViewEvent,up:g.onKeyUp,down:g.onKeyDown,right:g.onKeyRight,left:g.onKeyLeft,pageDown:g.onKeyPageDown,pageUp:g.onKeyPageUp,home:g.onKeyHome,end:g.onKeyEnd,space:g.onKeySpace,enter:g.onKeyEnter,A:{ctrl:true,handler:g.onSelectAllKeyPress},scope:g})},processViewEvent:function(q,s,n,p,o){return o},addKeyBindings:function(f){this.keyNav.addBindings(f)},enable:function(){this.keyNav.enable();this.disabled=false},disable:function(){this.keyNav.disable();this.disabled=true},onContainerMouseDown:function(l,g){if(Ext.getScrollbarSize().width){if(!l.el.getClientRegion().contains(g.getPoint())){g.preventDefault();l.lastFocused="scrollbar"}}},onItemMouseDown:function(q,s,n,o,p){if(p.pointerType!=="touch"){this.setPosition(o)}},onItemClick:function(p,q,n,o,s){if(this.record===q){this.fireNavigateEvent(s)}else{this.setPosition(o,s)}},setPosition:function(A,w,D,z,v){var u=this,E=u.view,y=E.getSelectionModel(),C=E.dataSource,x,B;if(A==null||!E.all.getCount()){u.record=u.recordIndex=null}else{if(typeof A==="number"){B=Math.max(Math.min(A,C.getCount()-1),0);x=C.getAt(A)}else{if(A.isEntity){x=C.getById(A.id);B=C.indexOf(x);if(B===-1){x=C.getAt(0);B=0}}else{if(A.tagName){x=E.getRecord(A);B=C.indexOf(x)}else{x=B=null}}}}if(x===u.record){u.recordIndex=B;return u.focusPosition(B)}if(u.item){u.item.removeCls(u.focusCls)}u.previousRecordIndex=u.recordIndex;u.previousRecord=u.record;u.previousItem=u.item;u.recordIndex=B;u.record=x;z=z||u.record===u.lastFocused;if(x){u.focusPosition(u.recordIndex)}else{if(!v){u.item=null}}if(!D){y.fireEvent("focuschange",y,u.previousRecord,u.record)}if(!z&&w){u.fireNavigateEvent(w)}},focusPosition:function(l){var g=this;if(l!=null&&l!==-1){if(l.isEntity){l=g.view.dataSource.indexOf(l)}g.item=g.view.all.item(l);if(g.item){g.lastFocused=g.record;g.lastFocusedIndex=g.recordIndex;g.focusItem(g.item)}else{g.record=null}}else{g.item=null}},focusItem:function(f){f.addCls(this.focusCls);f.focus()},getPosition:function(){return this.record?this.recordIndex:null},getRecordIndex:function(){return this.recordIndex},getItem:function(){return this.item},getRecord:function(){return this.record},getLastFocused:function(){if(this.view.dataSource.indexOf(this.lastFocused)===-1){return null}return this.lastFocused},onKeyUp:function(g){var l=this.recordIndex-1;if(l<0){l=this.view.all.getCount()-1}this.setPosition(l,g)},onKeyDown:function(g){var l=this.recordIndex+1;if(l>this.view.all.getCount()-1){l=0}this.setPosition(l,g)},onKeyRight:function(g){var l=this.recordIndex+1;if(l>this.view.all.getCount()-1){l=0}this.setPosition(l,g)},onKeyLeft:function(g){var l=this.recordIndex-1;if(l<0){l=this.view.all.getCount()-1}this.setPosition(l,g)},onKeyPageDown:Ext.emptyFn,onKeyPageUp:Ext.emptyFn,onKeyHome:function(f){this.setPosition(0,f)},onKeyEnd:function(f){this.setPosition(this.view.all.getCount()-1,f)},onKeySpace:function(f){this.fireNavigateEvent(f)},onKeyEnter:function(f){f.stopEvent();f.view.fireEvent("itemclick",f.view,f.record,f.item,f.recordIndex,f)},onSelectAllKeyPress:function(f){this.fireNavigateEvent(f)},fireNavigateEvent:function(g){var l=this;l.fireEvent("navigate",{navigationModel:l,keyEvent:g,previousRecordIndex:l.previousRecordIndex,previousRecord:l.previousRecord,previousItem:l.previousItem,recordIndex:l.recordIndex,record:l.record,item:l.item})},destroy:function(){this.setStore(null);Ext.destroy(this.viewListeners,this.keyNav);this.callParent()}},1,0,0,0,["view.navigation.default"],[[Ext.util.Observable.prototype.mixinId||Ext.util.Observable.$className,Ext.util.Observable],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable],[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.view,"NavigationModel"],0));(Ext.cmd.derive("Ext.view.AbstractView",Ext.Component,{isDataView:true,inheritableStatics:{getRecord:function(f){return this.getBoundView(f).getRecord(f)},getBoundView:function(f){return Ext.getCmp(f.getAttribute("data-boundView"))}},defaultBindProperty:"store",renderBuffer:document.createElement("div"),statics:{updateDelay:200,queueRecordChange:function(K,I,A,F,E){var L=this,G=L.changeQueue||(L.changeQueue={}),z=A.internalId,M,B,y,D,H,J,C;M=G[z]||(G[z]={operation:F,record:A,data:{},views:[]});B=M.data;Ext.Array.include(M.views,K);if(E&&(y=E.length)){for(D=0;D<y;D++){H=E[D];J=A.data[H];if(B.hasOwnProperty(H)){if(A.isEqual(B[H],J)){delete B[H];C=true}}else{B[H]=J}}if(C&&!Ext.Object.getKeys(B).length){delete G[z]}}else{Ext.apply(B,A.data)}if(!L.flushQueueTask){L.flushQueueTask=Ext.util.TaskManager.newTask({run:Ext.global.requestAnimationFrame?Ext.Function.createAnimationFrame(L.onFlushTick,L):Ext.Function.bind(L.onFlushTick,L),interval:Ext.view.AbstractView.updateDelay,repeat:1})}L.flushQueueTask.start()},onFlushTick:function(){Ext.AnimationQueue.start(this.flushChangeQueue,this)},flushChangeQueue:function(){var q=this,y,w,v,s,x,t,u;if(Ext.isScrolling){q.flushQueueTask.start();return}v=q.changeQueue;this.changeQueue={};for(x in v){s=v[x];y=s.views;w=y.length;for(t=0;t<w;t++){u=y[t];if(!u.destroyed){u.handleUpdate(u.dataSource,s.record,s.operation,Ext.Object.getKeys(s.data))}}}Ext.AnimationQueue.stop(q.flushChangeQueue,q)}},config:{selection:null,store:"ext-empty-store",navigationModel:{type:"default"},selectionModel:{type:"dataviewmodel"}},publishes:["selection"],twoWayBindable:["selection"],throttledUpdate:false,deferInitialRefresh:false,itemCls:"x-dataview-item",loadingText:"Loading...",loadMask:true,loadingUseMsg:true,selectedItemCls:"x-item-selected",emptyText:"",deferEmptyText:true,trackOver:false,blockRefresh:false,preserveScrollOnRefresh:false,preserveScrollOnReload:false,autoDestroyBoundStore:true,ariaRole:"listbox",itemAriaRole:"option",last:false,focusable:true,tabIndex:0,triggerEvent:"itemclick",triggerCtEvent:"containerclick",refreshNeeded:true,updateSuspendCounter:0,addCmpEvents:Ext.emptyFn,constructor:function(f){if(f&&f.selModel){f.selectionModel=f.selModel}Ext.Component.prototype.constructor.call(this,f)},initComponent:function(){var o=this,q=Ext.isDefined,n=o.itemTpl,p={},s;if(n){if(Ext.isArray(n)){if(typeof n[n.length-1]!=="string"){n=n.slice(0);p=n.pop()}n=n.join("")}else{if(Ext.isObject(n)){p=Ext.apply(p,n.initialConfig);n=n.html}}if(!o.itemSelector){o.itemSelector="."+o.itemCls}n=Ext.String.format('<tpl for="."><div class="{0}" role="{2}">{1}</div></tpl>',o.itemCls,n,o.itemAriaRole);o.tpl=new Ext.XTemplate(n,p)}Ext.Component.prototype.initComponent.call(this);o.tpl=o.lookupTpl("tpl");if(o.overItemCls){o.trackOver=true}o.addCmpEvents();s=o.store=Ext.data.StoreManager.lookup(o.store||"ext-empty-store");if(!o.dataSource){o.dataSource=s}o.bindStore(s,true);o.getNavigationModel().bindComponent(this);if(!o.all){o.all=new Ext.CompositeElementLite()}o.scrollState={top:0,left:0};o.savedTabIndexAttribute="data-savedtabindex-"+o.id},getElConfig:function(){var f=this.mixins.renderable.getElConfig.call(this);if(this.focusable){f.tabIndex=0}return f},onRender:function(m,n){var l=this.loadMask;Ext.Component.prototype.onRender.call(this,m,n);if(l){this.createMask(l)}},beforeLayout:function(){var f=this;Ext.Component.prototype.beforeLayout.call(this);if(f.refreshNeeded&&!f.pendingRefresh){if(f.refreshCounter){f.refreshView()}else{f.doFirstRefresh(f.dataSource)}}},onMaskBeforeShow:function(){var g=this,l=g.loadingHeight;if(l&&l>g.getHeight()){g.hasLoadingHeight=true;g.oldMinHeight=g.minHeight;g.minHeight=l;g.updateLayout()}},onMaskHide:function(){var f=this;if(!f.destroying&&f.hasLoadingHeight){f.minHeight=f.oldMinHeight;f.updateLayout();delete f.hasLoadingHeight}},beforeRender:function(){Ext.Component.prototype.beforeRender.call(this);this.getSelectionModel().beforeViewRender(this)},afterRender:function(){Ext.Component.prototype.afterRender.call(this);if(this.focusable){this.focusEl=this.el}},getRefItems:function(){var g=this.loadMask,l=[];if(g&&g.isComponent){l.push(g)}return l},getSelection:function(){return this.getSelectionModel().getSelection()},updateSelection:function(n){var m=this,l;if(!m.ignoreNextSelection){m.ignoreNextSelection=true;l=m.getSelectionModel();if(n){l.select(n)}else{l.deselectAll()}m.ignoreNextSelection=false}},updateBindSelection:function(p,n){var m=this,o=null;if(!m.ignoreNextSelection){m.ignoreNextSelection=true;if(n.length){o=p.getLastSelected();m.hasHadSelection=true}if(m.hasHadSelection){m.setSelection(o)}m.ignoreNextSelection=false}},applySelectionModel:function(t,w){var p=this,q=p.grid,v,s,u;if(w){if(!w.destroyed){w.un({scope:p,selectionchange:p.updateBindSelection,lastselectedchanged:p.updateBindSelection})}Ext.destroy(p.selModelRelayer);t=Ext.Factory.selection(t)}else{if(t&&t.isSelectionModel){t.locked=p.disableSelection}else{if(p.simpleSelect){v="SIMPLE"}else{if(p.multiSelect){v="MULTI"}else{v="SINGLE"}}if(typeof t==="string"){t={type:t}}t=Ext.Factory.selection(Ext.apply({allowDeselect:p.allowDeselect||p.multiSelect,mode:v,locked:p.disableSelection},t))}}if(t.mode!=="SINGLE"){u=(q||p).ariaEl.dom;if(u){u.setAttribute("aria-multiselectable",true)}else{if(!q){s=p.ariaRenderAttributes||(p.ariaRenderAttributes={});s["aria-multiselectable"]=true}}}p.selModelRelayer=p.relayEvents(t,["selectionchange","beforeselect","beforedeselect","select","deselect","focuschange"]);t.on({scope:p,lastselectedchanged:p.updateBindSelection,selectionchange:p.updateBindSelection});return t},updateSelectionModel:function(f){this.selModel=f},applyNavigationModel:function(f){return Ext.Factory.viewNavigation(f)},onFocusEnter:function(e){var n=this,o=n.getNavigationModel(),p;if(p==="scrollbar"){e.relatedTarget.focus();return}n.toggleChildrenTabbability(false);if(!n.itemFocused&&n.all.getCount()){if(e.event.getTarget()===n.tabGuardEl){p=n.all.getCount()-1}else{p=o.getLastFocused()}o.setPosition(p||0,e.event,null,!p);n.itemFocused=o.getPosition()!=null}if(n.itemFocused){n.el.dom.setAttribute("tabIndex",-1);if(n.tabGuardEl){n.tabGuardEl.setAttribute("tabIndex",-1)}}Ext.Component.prototype.onFocusEnter.call(this,e)},onFocusLeave:function(e){var l=this;if(l.itemFocused&&!l.refreshing){l.getNavigationModel().setPosition(null,e.event,null,true);l.itemFocused=false;l.el.dom.setAttribute("tabIndex",0);if(l.tabGuardEl){l.tabGuardEl.setAttribute("tabIndex",0)}}Ext.Component.prototype.onFocusLeave.call(this,e)},onRemoved:function(f){Ext.Component.prototype.onRemoved.call(this,f);if(!f){this.onFocusLeave({})}},refresh:function(){var v=this,w=v.all,E=w.getCount(),x=v.refreshCounter,F,B,C,y=v.getSelectionModel(),z,A=x&&w.getCount()&&v.preserveScrollOnRefresh&&v.getScrollable(),G=v.bufferedRenderer,D;if(!v.rendered||v.destroyed){return}if(!v.hasListeners.beforerefresh||v.fireEvent("beforerefresh",v)!==false){v.refreshing=true;z=v.saveFocusState();F=v.getTargetEl();C=v.getViewRange();B=F.dom;if(A){D=A.getPosition();if(!(D.x||D.y)){D=null}}if(x){v.clearViewEl();v.refreshCounter++}else{v.refreshCounter=1}v.tpl.append(F,v.collectData(C,w.startIndex||0));if(C.length<1){v.addEmptyText();w.clear()}else{v.collectNodes(F.dom);v.updateIndexes(0)}z();if(v.refreshSelmodelOnRefresh!==false){y.refresh()}v.refreshNeeded=false;v.refreshSize(w.getCount()!==E);v.fireItemMutationEvent("refresh",v,C);if(A){A.scrollTo(D)}if(!v.viewReady){v.viewReady=true;v.fireEvent("viewready",v)}v.refreshing=false;if(G){G.refreshSize()}v.cleanupData()}if(!v.tabGuardEl){v.tabGuardEl=v.el.createChild({cls:"x-tab-guard x-tab-guard-after",tabIndex:"0"},null,true)}},addEmptyText:function(){var g=this,l=g.getStore();if(g.emptyText&&!l.isLoading()&&(!g.deferEmptyText||g.refreshCounter>1||l.isLoaded())){g.emptyEl=Ext.core.DomHelper.insertHtml("beforeEnd",g.getTargetEl().dom,g.emptyText)}},getEmptyText:function(){return this.emptyText},setEmptyText:function(l){var g=this;if(g.emptyText!==l){g.emptyText=l;g.refresh()}return g},getViewRange:function(){return this.dataSource.getRange()},refreshSize:function(m){var n=this,o=n.getSizeModel(),p=n.getScrollable();if(o.height.shrinkWrap||o.width.shrinkWrap||m){n.updateLayout()}},afterFirstLayout:function(n,o){var m=this,p=m.getScrollable();if(p){p.on({scroll:m.onViewScroll,scrollend:m.onViewScrollEnd,scope:m,onFrame:!!Ext.global.requestAnimationFrame})}Ext.Component.prototype.afterFirstLayout.call(this,n,o)},clearViewEl:function(){var x=this,w=x.getTargetEl(),q=x.all,t=x.getStore(),s,u,y,v=x.getNodeContainer()===w;u=q.slice();y=[];for(s=q.startIndex;s<=q.endIndex;s++){y.push(t.getByInternalId(q.item(s,true).getAttribute("data-recordId")))}x.fireItemMutationEvent("itemremove",y,q.startIndex||0,u,x);x.clearEmptyEl();x.all.clear(!v);w=v?w.dom:x.getNodeContainer();if(w){w.innerHTML=""}},clearEmptyEl:function(){var f=this.emptyEl;if(f){Ext.removeNode(f)}this.emptyEl=null},onViewScroll:function(m,n,l){this.fireEvent("scroll",this,n,l)},onViewScrollEnd:function(m,n,l){this.fireEvent("scrollend",this,n,l)},saveScrollState:function(){var l=this,g=l.scrollState;if(l.rendered){g.left=l.getScrollX();g.top=l.getScrollY()}},restoreScrollState:function(){var l=this,g=l.scrollState;if(l.rendered){l.setScrollX(g.left);l.setScrollY(g.top)}},prepareData:function(o,p,q){var s,t,u;if(q){s=q.getAssociatedData();for(t in s){if(s.hasOwnProperty(t)){if(!u){o=Ext.Object.chain(o);u=true}o[t]=s[t]}}}return o},collectData:function(q,u){var o=[],p=0,t=q.length,s;for(;p<t;p++){s=q[p];o[p]=this.prepareData(s.data,u+p,s)}return o},cleanupData:Ext.emptyFn,bufferRender:function(s,q){var x=this,w=x.renderBuffer,u=document.createDocumentFragment(),t,v,y;x.tpl.overwrite(w,x.collectData(s,q));t=Ext.fly(w).query(x.getItemSelector());for(y=0,v=t.length;y<v;y++){u.appendChild(t[y])}return{fragment:u,children:t}},nodeContainerSelector:null,getNodeContainer:function(){var g=this.getTargetEl(),l=this.nodeContainerSelector;return l?g.down(l,true):g},setItemsDraggable:function(o){var n=this,p="#"+n.id+" "+n.getItemSelector(),m=n.viewStyleSheet;if(o){if(!m){m=Ext.view.AbstractView.prototype.viewStyleSheet=Ext.util.CSS.createStyleSheet("","AbstractView")}Ext.util.CSS.createRule(m,p,"touch-action: pinch-zoom double-tap-zoom;-ms-touch-action: pinch-zoom double-tap-zoom;-webkit-user-drag: none;")}else{if(m){Ext.util.CSS.deleteRule(p)}}},getNodeContainerSelector:function(){return this.nodeContainerSelector},onUpdate:function(q,t,s,v,p){var w=this,u=p&&p.filtered;if(!u&&w.getNode(t)){if(w.throttledUpdate){w.statics().queueRecordChange(w,q,t,s,v)}else{w.handleUpdate(q,t,s,v,p)}}},handleUpdate:function(q,t){var u=this,p,o,s=u.getSelectionModel();if(u.viewReady&&!u.refreshNeeded){p=u.dataSource.indexOf(t);if(p>-1){if(u.getNode(t)){o=u.bufferRender([t],p).children[0];u.all.replaceElement(p,o,true);u.updateIndexes(p,p);s.onUpdate(t);u.refreshSizePending=true;if(s.isSelected(t)){u.onItemSelect(t)}if(u.hasListeners.itemupdate){u.fireEvent("itemupdate",t,p,o,u)}return o}}}},onReplace:function(M,K,F,E){var z=this,y=z.all,B=z.getSelectionModel(),J=K,H,I,A,G,L,D,C;if(z.rendered){H=z.bufferRender(E,K,true);A=H.fragment;G=H.children;I=y.item(K);if(I){y.item(K).insertSibling(A,"before",true)}else{z.appendNodes(A)}y.insert(K,G);if(F.length){C=z.saveFocusState()}K+=E.length;D=K+F.length-1;L=y.removeRange(K,D,true);if(z.refreshSelmodelOnRefresh!==false){B.refresh()}z.updateIndexes(K);z.fireItemMutationEvent("itemremove",F,J,L,z);z.fireItemMutationEvent("itemadd",E,J,G,z);C();z.refreshSize()}},onAdd:function(p,q,o){var u=this,s,t=u.getSelectionModel();if(u.rendered&&!u.refreshNeeded){if(u.all.getCount()===0){u.refresh();s=u.all.slice()}else{s=u.doAdd(q,o);if(u.refreshSelmodelOnRefresh!==false){t.refresh()}u.updateIndexes(o);u.refreshSizePending=true}u.fireItemMutationEvent("itemadd",q,o,s,u)}},appendNodes:function(n){var m=this.all,l=m.getCount();if(this.nodeContainerSelector){this.getNodeContainer().appendChild(n)}else{m.item(l-1).insertSibling(n,"after")}},doAdd:function(z,x){var v=this,C=v.bufferRender(z,x,true),w=C.fragment,A=C.children,u=v.all,y=u.getCount(),t=u.startIndex||0,B=u.endIndex||y-1;if(y===0||x>B){v.appendNodes(w)}else{if(x<=t){u.item(t).insertSibling(w,"before",true)}else{u.item(x).insertSibling(A,"before",true)}}u.insert(x,A);return A},onRemove:function(E,A,w){var v=this,D=v.all,u,z,y,C,B,x;if(v.rendered&&!v.refreshNeeded&&D.getCount()){if(v.dataSource.getCount()===0){v.refresh()}else{x=v.saveFocusState();C=[];for(z=A.length-1;z>=0;--z){y=A[z];u=w+z;if(C){B=D.item(u);C[z]=B?B.dom:undefined}if(D.item(u)){v.doRemove(y,u)}}v.fireItemMutationEvent("itemremove",A,w,C,v);x();v.updateIndexes(w)}v.refreshSizePending=true}},doRemove:function(l,g){this.all.removeElement(g,true)},eventLifecycleMap:{refresh:"onViewRefresh",itemremove:"onItemRemove",itemadd:"onItemAdd"},fireItemMutationEvent:function(n){var m=this,l=m.ownerGrid;if(l){m.ownerGrid[m.eventLifecycleMap[n]].apply(m.ownerGrid,Ext.Array.slice(arguments,1))}m.fireEvent.apply(m,arguments)},saveFocusState:function(){var o=this,s=o.dataSource||o.store,q=o.getNavigationModel(),p=q.recordIndex,u=q.record,t=o.el.contains(Ext.Element.getActiveElement());if(u){if(t){o.el.dom.focus()}return function(){if(s.getCount()){p=Math.min(p,o.all.getCount()-1);q.setPosition(s.contains(u)?u:p,null,null,true,!t)}}}return Ext.emptyFn},refreshNode:function(f){if(Ext.isNumber(f)){f=this.store.getAt(f)}this.onUpdate(this.dataSource,f)},updateIndexes:function(v,w){var t=this.all.elements,p,u=this.getViewRange(),q,s=this.id;v=v||0;w=w||((w===0)?0:(t.length-1));for(q=v;q<=w;q++){p=t[q];p.setAttribute("data-recordIndex",q);p.setAttribute("data-recordId",u[q].internalId);p.setAttribute("data-boundView",s)}},bindStore:function(q,p){var n=this,s=n.getSelectionModel(),o=n.getNavigationModel();if(s&&!s.destroyed){s.bindStore(q,p);s.bindComponent(q?n:null)}n.mixins.storeholder.bindStore.apply(n,arguments);if(o&&!o.destroyed){o.setStore(q)}if(q&&n.componentLayoutCounter&&!n.blockRefresh){n.doFirstRefresh(q,!p)}},doFirstRefresh:function(n,l){var m=this;if(m.deferInitialRefresh&&!l){Ext.defer(m.doFirstRefresh,1,m,[n,true])}else{if(n&&!m.deferRefreshForLoad(n)){m.refresh()}}},onUnbindStore:function(f){this.setMaskBind(null);if(this.dataSource===f){this.dataSource=null}},onBindStore:function(n,l){var m=this;if(m.store.isBufferedStore){m.store.preserveScrollOnReload=m.preserveScrollOnReload}if(l&&l.isBufferedStore){delete l.preserveScrollOnReload}m.setMaskBind(n);if(!m.dataSource){m.dataSource=n}},setMaskBind:function(g){var l=this.loadMask;if(this.rendered&&l&&g&&!l.bindStore){l=this.createMask()}if(l&&l.bindStore){l.bindStore(g)}},getStoreListeners:function(){var f=this;return{refresh:f.onDataRefresh,replace:f.onReplace,add:f.onAdd,remove:f.onRemove,update:f.onUpdate,clear:f.onDataRefresh,beginupdate:f.onBeginUpdate,endupdate:f.onEndUpdate}},onBeginUpdate:function(){++this.updateSuspendCounter;Ext.suspendLayouts()},onEndUpdate:function(){var f=this;if(f.updateSuspendCounter){--f.updateSuspendCounter}Ext.resumeLayouts(true);if(f.refreshSizePending){f.refreshSize(true);f.refreshSizePending=false}},onDataRefresh:function(n){var l=this,m=l.preserveScrollOnRefresh;if(n.loadCount>l.lastRefreshLoadCount){l.preserveScrollOnRefresh=l.preserveScrollOnReload}l.refreshView();l.preserveScrollOnRefresh=m;l.lastRefreshLoadCount=n.loadCount},refreshView:function(n){var o=this,p=o.blockRefresh||!o.rendered||o.up("[collapsed],[isCollapsingOrExpanding],[hidden]"),m=o.bufferedRenderer;if(p){o.refreshNeeded=true}else{if(m){m.refreshView(n)}else{o.refresh()}}},findItemByChild:function(f){return Ext.fly(f).findParent(this.getItemSelector(),this.getTargetEl())},findTargetByEvent:function(e){return e.getTarget(this.getItemSelector(),this.getTargetEl())},getSelectedNodes:function(){var o=[],p=this.getSelectionModel().getSelection(),m=p.length,n=0;for(;n<m;n++){o.push(this.getNode(p[n]))}return o},getRecords:function(p){var q=[],o=0,s=p.length,n=this.dataSource.data;for(;o<s;o++){q[q.length]=n.getByKey(p[o].getAttribute("data-recordId"))}return q},getRecord:function(f){return this.dataSource.getByInternalId(Ext.getDom(f).getAttribute("data-recordId"))},isSelected:function(g){var l=this.getRecord(g);return this.getSelectionModel().isSelected(l)},select:function(m,l,n){this.getSelectionModel().select(m,l,n)},deselect:function(g,l){this.getSelectionModel().deselect(g,l)},getNode:function(m){var l=this,n;if(l.rendered&&(m||m===0)){if(Ext.isString(m)){n=document.getElementById(m)}else{if(m.isModel){n=l.getNodeByRecord(m)}else{if(Ext.isNumber(m)){n=l.all.elements[m]}else{if(m.target&&m.target.nodeType){m=m.target}n=Ext.fly(m).findParent(l.itemSelector,l.getTargetEl())}}}}return n||null},getNodeByRecord:function(l){var g=this.store.indexOf(l);return this.all.elements[g]||null},getNodes:function(l,n){var m=this.all;if(n!==undefined){n++}return m.slice(l,n)},indexOf:function(f){f=this.getNode(f);if(!f&&f!==0){return -1}if(f.getAttribute("data-recordIndex")){return Number(f.getAttribute("data-recordIndex"))}return this.all.indexOf(f)},doDestroy:function(){var l=this,m=l.updateSuspendCounter,n=l.tabGuardEl;if(l.all&&!l.all.destroyed){l.all.clear()}if(n){if(n.parentNode){n.parentNode.removeChild(n)}}l.emptyEl=null;l.setItemsDraggable(false);l.bindStore(null);if(l.selModelRelayer){l.selModelRelayer.destroy()}Ext.destroy(l.navigationModel,l.selectionModel,l.loadMask);while(m--){Ext.resumeLayouts(true)}Ext.Component.prototype.doDestroy.call(this)},onItemSelect:function(l){var g=this.getNode(l);if(g){Ext.fly(g).addCls(this.selectedItemCls);g.setAttribute("aria-selected","true")}return g},onItemDeselect:function(l){var g=this.getNode(l);if(g){Ext.fly(g).removeCls(this.selectedItemCls);g.setAttribute("aria-selected","false")}return g},getItemSelector:function(){return this.itemSelector},addItemCls:function(m,n){var l=this.getNode(m);if(l){Ext.fly(l).addCls(n)}},removeItemCls:function(m,n){var l=this.getNode(m);if(l){Ext.fly(l).removeCls(n)}},setStore:function(l){var g=this;if(g.store!==l){if(g.isConfiguring){g.store=l}else{g.bindStore(l,false)}}},privates:{deferRefreshForLoad:function(f){return f.isLoading()},toggleChildrenTabbability:function(g){var l=this.getTargetEl();if(g){l.restoreTabbableState(true)}else{l.saveTabbableState({skipSelf:true,includeSaved:false})}},collectNodes:function(l){var m=this.all,n={role:this.itemAriaRole};m.fill(Ext.fly(l).query(this.getItemSelector()),m.startIndex||0);if(this.focusable){n.tabindex="-1"}m.set(n)},createMask:function(o){var m=this,n=m.getStore(),p;if(n&&!n.isEmptyStore&&!n.loadsSynchronously()){p={target:m,msg:m.loadingText,useMsg:m.loadingUseMsg,store:n};if(m.loadingCls){p.msgCls=m.loadingCls}if(Ext.isObject(o)){p=Ext.apply(p,o)}m.loadMask=new Ext.LoadMask(p);m.loadMask.on({scope:m,beforeshow:m.onMaskBeforeShow,hide:m.onMaskHide})}return m.loadMask},getOverflowEl:function(){return Ext.Component.prototype.getTargetEl.call(this)}}},1,0,["component","box"],{component:true,box:true},0,[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.view,"AbstractView"],function(){Ext.deprecate("extjs","4.0",function(){Ext.view.AbstractView.override({getSelectionCount:function(){if(Ext.global.console){Ext.global.console.warn("DataView: getSelectionCount will be removed, please interact with the Ext.selection.DataViewModel")}return this.selModel.getSelection().length},getSelectedRecords:function(){if(Ext.global.console){Ext.global.console.warn("DataView: getSelectedRecords will be removed, please interact with the Ext.selection.DataViewModel")}return this.selModel.getSelection()},select:function(p,o,m){if(Ext.global.console){Ext.global.console.warn("DataView: select will be removed, please access select through a DataView's SelectionModel, ie: view.getSelectionModel().select()")}var n=this.getSelectionModel();return n.select.apply(n,arguments)},clearSelections:function(){if(Ext.global.console){Ext.global.console.warn("DataView: clearSelections will be removed, please access deselectAll through DataView's SelectionModel, ie: view.getSelectionModel().deselectAll()")}var f=this.getSelectionModel();return f.deselectAll()}})})}));(Ext.cmd.derive("Ext.view.View",Ext.view.AbstractView,{alternateClassName:"Ext.DataView",inputTagRe:/^textarea$|^input$/i,keyEventRe:/^key/,manageLayoutScroll:false,inheritableStatics:{EventMap:{longpress:"LongPress",mousedown:"MouseDown",mouseup:"MouseUp",click:"Click",dblclick:"DblClick",contextmenu:"ContextMenu",mouseover:"MouseOver",mouseout:"MouseOut",mouseenter:"MouseEnter",mouseleave:"MouseLeave",keydown:"KeyDown",keyup:"KeyUp",keypress:"KeyPress",focus:"Focus"},TouchEventMap:{touchstart:"mousedown",touchend:"mouseup",tap:"click",doubletap:"dblclick"}},afterRender:function(){var f=this;Ext.view.AbstractView.prototype.afterRender.call(this);f.mon(f.el,{scope:f,click:f.handleEvent,longpress:f.handleEvent,mousedown:f.handleEvent,mouseup:f.handleEvent,dblclick:f.handleEvent,contextmenu:f.handleEvent,keydown:f.handleEvent,keyup:f.handleEvent,keypress:f.handleEvent,mouseover:f.handleMouseOver,mouseout:f.handleMouseOut})},getTargetSelector:function(){return this.dataRowSelector||this.itemSelector},handleMouseOver:function(e){var n=this,p=n.getTargetSelector(),o=e.getTarget(p);if(!n.destroyed){if(o){if(n.mouseOverItem!==o&&n.el.contains(o)){n.mouseOverItem=e.item=o;e.newType="mouseenter";n.handleEvent(e)}}else{n.handleEvent(e)}}},handleMouseOut:function(t){var e=this,q=e.getTargetSelector(),p=t.getTarget(q),u=t.getRelatedTarget(q),s;if((p===u)&&!(p===null&&u===null)){return}if(!e.destroyed){if(p&&(s=e.self.getBoundView(p))){t.item=p;t.newType="mouseleave";s.handleEvent(t);s.mouseOverItem=null}else{e.handleEvent(t)}}},handleEvent:function(e){var m=this,n=m.keyEventRe.test(e.type);e.isInputFieldEvent=Ext.fly(e.target).isInputField();e.view=m;e.item=e.getTarget(m.itemSelector);if(e.item){e.record=m.getRecord(e.item)}if(m.processUIEvent(e)!==false&&!m.destroyed){m.processSpecialEvent(e)}if(n&&!e.isInputFieldEvent){if(e.getKey()===e.SPACE||e.isNavKeyPress(true)){e.preventDefault()}}e.view=null},processItemEvent:Ext.emptyFn,processContainerEvent:Ext.emptyFn,processSpecialEvent:Ext.emptyFn,processUIEvent:function(w){if(!Ext.getBody().isAncestor(w.target)){return}var e=this,C=w.item,B=e.self,A=B.EventMap,v=B.TouchEventMap,x,y=w.record,u=w.type,z=u;if(w.newType){z=w.newType}if(C){z=v[z]||z;x=w.recordIndex=e.indexInStore?e.indexInStore(y):e.indexOf(C);if(!y||e.processItemEvent(y,C,x,w)===false){return false}if((e["onBeforeItem"+A[z]](y,C,x,w)===false)||(e.fireEvent("beforeitem"+z,e,y,C,x,w)===false)||(e["onItem"+A[z]](y,C,x,w)===false)){return false}e.fireEvent("item"+z,e,y,C,x,w)}else{u=v[u]||u;if((e.processContainerEvent(w)===false)||(e["onBeforeContainer"+A[u]](w)===false)||(e.fireEvent("beforecontainer"+u,e,w)===false)||(e["onContainer"+A[u]](w)===false)){return false}e.fireEvent("container"+u,e,w)}return true},onItemMouseEnter:function(p,n,o,e){if(this.trackOver){this.highlightItem(n)}},onItemMouseLeave:function(p,n,o,e){if(this.trackOver){this.clearHighlight()}},onItemMouseDown:Ext.emptyFn,onItemLongPress:Ext.emptyFn,onItemMouseUp:Ext.emptyFn,onItemFocus:Ext.emptyFn,onItemClick:Ext.emptyFn,onItemDblClick:Ext.emptyFn,onItemContextMenu:Ext.emptyFn,onItemKeyDown:Ext.emptyFn,onItemKeyUp:Ext.emptyFn,onItemKeyPress:Ext.emptyFn,onBeforeItemLongPress:Ext.emptyFn,onBeforeItemMouseDown:Ext.emptyFn,onBeforeItemMouseUp:Ext.emptyFn,onBeforeItemFocus:Ext.emptyFn,onBeforeItemMouseEnter:Ext.emptyFn,onBeforeItemMouseLeave:Ext.emptyFn,onBeforeItemClick:Ext.emptyFn,onBeforeItemDblClick:Ext.emptyFn,onBeforeItemContextMenu:Ext.emptyFn,onBeforeItemKeyDown:Ext.emptyFn,onBeforeItemKeyUp:Ext.emptyFn,onBeforeItemKeyPress:Ext.emptyFn,onContainerMouseDown:Ext.emptyFn,onContainerLongPress:Ext.emptyFn,onContainerMouseUp:Ext.emptyFn,onContainerMouseOver:Ext.emptyFn,onContainerMouseOut:Ext.emptyFn,onContainerClick:Ext.emptyFn,onContainerDblClick:Ext.emptyFn,onContainerContextMenu:Ext.emptyFn,onContainerKeyDown:Ext.emptyFn,onContainerKeyUp:Ext.emptyFn,onContainerKeyPress:Ext.emptyFn,onBeforeContainerMouseDown:Ext.emptyFn,onBeforeContainerLongPress:Ext.emptyFn,onBeforeContainerMouseUp:Ext.emptyFn,onBeforeContainerMouseOver:Ext.emptyFn,onBeforeContainerMouseOut:Ext.emptyFn,onBeforeContainerClick:Ext.emptyFn,onBeforeContainerDblClick:Ext.emptyFn,onBeforeContainerContextMenu:Ext.emptyFn,onBeforeContainerKeyDown:Ext.emptyFn,onBeforeContainerKeyUp:Ext.emptyFn,onBeforeContainerKeyPress:Ext.emptyFn,setHighlightedItem:function(n){var o=this,p=o.highlightedItem,m=o.overItemCls;if(p!==n){if(p){Ext.fly(p).removeCls(m);if(Ext.isIE8){o.repaintBorder(p);o.repaintBorder(p.nextSibling)}if(o.hasListeners.unhighlightitem){o.fireEvent("unhighlightitem",o,p)}}o.highlightedItem=n;if(n){Ext.fly(n).addCls(o.overItemCls);if(Ext.isIE8){o.repaintBorder(n.nextSibling)}if(o.hasListeners.highlightitem){o.fireEvent("highlightitem",o,n)}}}},highlightItem:function(f){this.setHighlightedItem(f)},clearHighlight:function(){this.setHighlightedItem(undefined)},handleUpdate:function(s,t){var u=this,o,q,p;if(u.viewReady){o=u.getNode(t);q=Ext.view.AbstractView.prototype.handleUpdate.apply(this,arguments);p=u.highlightedItem;if(p&&p===o){delete u.highlightedItem;if(q){u.highlightItem(q)}}}},refresh:function(){this.clearHighlight();Ext.view.AbstractView.prototype.refresh.apply(this,arguments)},focusNode:function(w){var y=this,q=Ext.fly(y.getNode(w)),s=y.el,v=0,u=0,x=s.getRegion(),t;x.bottom=x.top+s.dom.clientHeight;x.right=x.left+s.dom.clientWidth;if(q){t=q.getRegion();if(t.top<x.top){v=t.top-x.top}else{if(t.bottom>x.bottom){v=t.bottom-x.bottom}}if(t.left<x.left){u=t.left-x.left}else{if(t.right>x.right){u=t.right-x.right}}if(u||v){y.scrollBy(u,v,false)}q.set({tabIndex:-1});q.focus()}},privates:{repaintBorder:function(g){var l=this.getNode(g);if(l){l.className=l.className}}}},0,["dataview"],["component","box","dataview"],{component:true,box:true,dataview:true},["widget.dataview"],0,[Ext.view,"View",Ext,"DataView"],0));(Ext.cmd.derive("Ext.view.BoundListKeyNav",Ext.view.NavigationModel,{navigateOnSpace:true,initKeyNav:function(n){var m=this,l=n.pickerField;if(!m.keyNav){Ext.view.NavigationModel.prototype.initKeyNav.call(this,n);m.keyNav.map.addBinding({key:Ext.event.Event.ESC,fn:m.onKeyEsc,scope:m})}if(!l){return}if(!l.rendered){l.on("render",Ext.Function.bind(m.initKeyNav,m,[n],0),m,{single:true});return}m.fieldKeyNav=new Ext.util.KeyNav({disabled:true,target:l.inputEl,forceKeyDown:true,up:m.onKeyUp,down:m.onKeyDown,right:m.onKeyRight,left:m.onKeyLeft,pageDown:m.onKeyPageDown,pageUp:m.onKeyPageUp,home:m.onKeyHome,end:m.onKeyEnd,tab:m.onKeyTab,space:m.onKeySpace,enter:m.onKeyEnter,A:{ctrl:true,handler:m.onSelectAllKeyPress},priority:1001,scope:m})},processViewEvent:function(q,s,n,p,o){if(o.within(q.listWrap)){return o}if(o.getKey()===o.ESC){if(Ext.fly(o.target).isInputField()){o.target=o.target.parentNode}return o}},enable:function(){this.fieldKeyNav.enable();Ext.view.NavigationModel.prototype.enable.call(this)},disable:function(){this.fieldKeyNav.disable();Ext.view.NavigationModel.prototype.disable.call(this)},onItemMouseDown:function(q,s,n,p,o){Ext.view.NavigationModel.prototype.onItemMouseDown.call(this,q,s,n,p,o);if(o.pointerType==="mouse"){o.preventDefault()}},onKeyUp:function(u){var w=this,s=w.view,e=s.all,v=s.highlightedItem,q=v?s.indexOf(v):-1,t=q>0?q-1:e.getCount()-1;w.setPosition(t);u.preventDefault()},onKeyDown:function(u){var w=this,s=w.view,e=s.all,v=s.highlightedItem,q=v?s.indexOf(v):-1,t=q<e.getCount()-1?q+1:0;w.setPosition(t);u.preventDefault()},onKeyLeft:Ext.returnTrue,onKeyRight:Ext.returnTrue,onKeyTab:function(e){var n=this.view,m=n.pickerField;if(n.isVisible()){if(m.selectOnTab){this.selectHighlighted(e)}if(m.collapse){m.collapse()}}return true},onKeyEnter:function(s){var q=this.view,p=q.getSelectionModel(),e=q.pickerField,o=p.getCount();s.stopEvent();this.selectHighlighted(s);if(!e.multiSelect&&o===p.getCount()&&e.collapse){e.collapse()}e.fireEvent("specialkey",e,s,{fromBoundList:true});return false},onKeySpace:function(){if(this.navigateOnSpace){Ext.view.NavigationModel.prototype.onKeySpace.apply(this,arguments)}return true},onKeyEsc:function(){if(this.view.pickerField){this.view.pickerField.collapse()}},focusItem:function(l){var m=this,n=m.view;if(typeof l==="number"){l=n.all.item(l)}if(l){l=l.dom;n.highlightItem(l);n.getScrollable().scrollIntoView(l,false)}},selectHighlighted:function(t){var u=this,q=u.view,s=q.getSelectionModel(),p,e=u.recordIndex;if(q.all.getCount()){p=u.getRecord();if(p){if(t.getKey()===t.ENTER||!s.isSelected(p)){s.selectWithEvent(p,t);if(!q.store.data.contains(p)){u.setPosition(Math.min(e,q.store.getCount()-1))}}}}},destroy:function(){this.fieldKeyNav=Ext.destroy(this.fieldKeyNav);Ext.view.NavigationModel.prototype.destroy.call(this)}},0,0,0,0,["view.navigation.boundlist"],0,[Ext.view,"BoundListKeyNav"],0));(Ext.cmd.derive("Ext.layout.component.BoundList",Ext.layout.component.Auto,{type:"component",beginLayout:function(m){var n=this,p=n.owner,o=p.pagingToolbar;n.scrollPos=p.listWrap.getScroll();Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);if(p.floating){m.savedXY=p.getXY();p.setXY([0,-9999])}if(o){m.toolbarContext=m.context.getCmp(o)}m.listContext=m.getEl("listWrap")},beginLayoutCycle:function(g){var l=this.owner;Ext.layout.component.Auto.prototype.beginLayoutCycle.apply(this,arguments);if(g.heightModel.auto){l.el.setHeight("auto");l.listWrap.setHeight("auto")}},getLayoutItems:function(){var f=this.owner.pagingToolbar;return f?[f]:[]},isValidParent:function(){return true},finishedLayout:function(p){var q=this,o=p.savedXY,t=q.owner,s=t.listWrap,u=q.scrollPos;Ext.layout.component.Auto.prototype.finishedLayout.apply(this,arguments);if(o){q.owner.setXY(o)}s.setScrollLeft(u.left);s.setScrollTop(u.top)},measureContentWidth:function(f){return this.owner.listWrap.getWidth()},measureContentHeight:function(f){return this.owner.listWrap.getHeight()},publishInnerHeight:function(n,p){var o=n.toolbarContext,m=0;if(o){m=o.getProp("height")}if(m===undefined){this.done=false}else{n.listContext.setHeight(p-n.getFrameInfo().height-m)}},calculateOwnerHeightFromContentHeight:function(l){var n=Ext.layout.component.Auto.prototype.calculateOwnerHeightFromContentHeight.apply(this,arguments),m=l.toolbarContext;if(m){n+=m.getProp("height")}return n}},0,0,0,0,["layout.boundlist"],0,[Ext.layout.component,"BoundList"],0));(Ext.cmd.derive("Ext.toolbar.Item",Ext.Component,{alternateClassName:"Ext.Toolbar.Item",enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn},0,["tbitem"],["component","box","tbitem"],{component:true,box:true,tbitem:true},["widget.tbitem"],0,[Ext.toolbar,"Item",Ext.Toolbar,"Item"],0));(Ext.cmd.derive("Ext.toolbar.TextItem",Ext.toolbar.Item,{alternateClassName:"Ext.Toolbar.TextItem",text:"",baseCls:"x-toolbar-text",ariaRole:null,beforeRender:function(){var f=this.text;Ext.toolbar.Item.prototype.beforeRender.call(this);if(f){this.html=f}},setText:function(f){this.update(f)}},0,["tbtext"],["component","box","tbitem","tbtext"],{component:true,box:true,tbitem:true,tbtext:true},["widget.tbtext"],0,[Ext.toolbar,"TextItem",Ext.Toolbar,"TextItem"],0));(Ext.cmd.derive("Ext.form.trigger.Spinner",Ext.form.trigger.Trigger,{cls:"x-form-trigger-spinner",spinnerCls:"x-form-spinner",spinnerUpCls:"x-form-spinner-up",spinnerDownCls:"x-form-spinner-down",focusCls:"x-form-spinner-focus",overCls:"x-form-spinner-over",clickCls:"x-form-spinner-click",focusFieldOnClick:true,vertical:true,bodyTpl:'<tpl if="vertical"><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerUpCls} {spinnerUpCls}-{ui} {childElCls} {upDisabledCls}"></div></tpl><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerDownCls} {spinnerDownCls}-{ui} {childElCls} {downDisabledCls}"></div><tpl if="!vertical"><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerUpCls} {spinnerUpCls}-{ui} {childElCls} {upDisabledCls}"></div></tpl>',destroy:function(){var f=this;if(f.spinnerEl){f.spinnerEl.destroy();f.spinnerEl=f.upEl=f.downEl=null}Ext.form.trigger.Trigger.prototype.destroy.call(this)},getBodyRenderData:function(){var f=this;return{vertical:f.vertical,upDisabledCls:f.upEnabled?"":(f.spinnerUpCls+"-disabled"),downDisabledCls:f.downEnabled?"":(f.spinnerDownCls+"-disabled"),spinnerCls:f.spinnerCls,spinnerUpCls:f.spinnerUpCls,spinnerDownCls:f.spinnerDownCls}},getStateEl:function(){return this.spinnerEl},onClick:function(){var o=this,p=arguments,e=o.clickRepeater?p[1]:p[0],n=o.field;if(!n.readOnly&&!n.disabled){if(o.upEl.contains(e.target)){Ext.callback(o.upHandler,o.scope,[n,o,e],0,n)}else{if(o.downEl.contains(e.target)){Ext.callback(o.downHandler,o.scope,[n,o,e],0,n)}}}n.inputEl.focus()},onFieldRender:function(){var o=this,p=o.vertical,m,n;Ext.form.trigger.Trigger.prototype.onFieldRender.call(this);m=o.spinnerEl=o.el.select("."+o.spinnerCls,true);n=m.elements;o.upEl=p?n[0]:n[1];o.downEl=p?n[1]:n[0]},setUpEnabled:function(f){this.upEl[f?"removeCls":"addCls"](this.spinnerUpCls+"-disabled")},setDownEnabled:function(f){this.downEl[f?"removeCls":"addCls"](this.spinnerDownCls+"-disabled")}},0,0,0,0,["trigger.spinner"],0,[Ext.form.trigger,"Spinner"],0));(Ext.cmd.derive("Ext.form.field.Spinner",Ext.form.field.Text,{alternateClassName:"Ext.form.Spinner",config:{triggers:{spinner:{type:"spinner",upHandler:"onSpinnerUpClick",downHandler:"onSpinnerDownClick",endHandler:"onSpinEnd",scope:"this"}}},spinUpEnabled:true,spinDownEnabled:true,keyNavEnabled:true,mouseWheelEnabled:true,repeatTriggerClick:true,onSpinUp:Ext.emptyFn,onSpinDown:Ext.emptyFn,ariaRole:"spinbutton",applyTriggers:function(m){var l=this,n=m.spinner;n.upEnabled=l.spinUpEnabled;n.downEnabled=l.spinDownEnabled;return Ext.form.field.Text.prototype.applyTriggers.call(this,m)},onRender:function(){var g=this,l=g.getTrigger("spinner");(arguments.callee.$previous||Ext.form.field.Text.prototype.onRender).call(this);if(g.keyNavEnabled){g.spinnerKeyNav=new Ext.util.KeyNav(g.inputEl,{scope:g,up:g.spinUp,down:g.spinDown});g.inputEl.on({keyup:g.onInputElKeyUp,scope:g})}if(g.mouseWheelEnabled){g.mon(g.bodyEl,"mousewheel",g.onMouseWheel,g)}g.spinUpEl=l.upEl;g.spinDownEl=l.downEl},onSpinnerUpClick:function(){this.spinUp()},onSpinnerDownClick:function(){this.spinDown()},spinUp:function(){var f=this;if(f.spinUpEnabled&&!f.disabled){f.fireEvent("spin",f,"up");f.fireEvent("spinup",f);f.onSpinUp()}},spinDown:function(){var f=this;if(f.spinDownEnabled&&!f.disabled){f.fireEvent("spin",f,"down");f.fireEvent("spindown",f);f.onSpinDown()}},setSpinUpEnabled:function(n){var m=this,l=m.spinUpEnabled;m.spinUpEnabled=n;if(l!==n&&m.rendered){m.getTrigger("spinner").setUpEnabled(n)}},setSpinDownEnabled:function(n){var m=this,l=m.spinDownEnabled;m.spinDownEnabled=n;if(l!==n&&m.rendered){m.getTrigger("spinner").setDownEnabled(n)}},onMouseWheel:function(m){var n=this,e;if(n.hasFocus){e=m.getWheelDelta();if(e>0){n.spinUp()}else{if(e<0){n.spinDown()}}m.stopEvent();n.onSpinEnd()}},onInputElKeyUp:function(e){if(e.keyCode===e.UP||e.keyCode===e.DOWN){this.onSpinEnd()}},doDestroy:function(){Ext.destroyMembers(this,"spinnerKeyNav");Ext.form.field.Text.prototype.doDestroy.call(this)}},0,["spinnerfield"],["component","box","field","textfield","spinnerfield"],{component:true,box:true,field:true,textfield:true,spinnerfield:true},["widget.spinnerfield"],0,[Ext.form.field,"Spinner",Ext.form,"Spinner"],function(f){f.prototype.onSpinEnd=Ext.Function.createBuffered(function(){this.fireEvent("spinend",this)},100)}));(Ext.cmd.derive("Ext.form.field.Number",Ext.form.field.Spinner,{alternateClassName:["Ext.form.NumberField","Ext.form.Number"],allowExponential:true,allowDecimals:true,decimalSeparator:null,submitLocaleSeparator:true,decimalPrecision:2,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,step:1,minText:"The minimum value for this field is {0}",maxText:"The maximum value for this field is {0}",nanText:"{0} is not a valid number",negativeText:"The value cannot be negative",baseChars:"0123456789",autoStripChars:false,initComponent:function(){var f=this;if(f.decimalSeparator===null){f.decimalSeparator=Ext.util.Format.decimalSeparator}Ext.form.field.Spinner.prototype.initComponent.call(this);f.setMinValue(f.minValue);f.setMaxValue(f.maxValue)},getSubTplData:function(s){var p=this,q=p.minValue,u=p.maxValue,v,t,w;v=Ext.form.field.Spinner.prototype.getSubTplData.call(this,s);t=v.inputElAriaAttributes;if(t){if(q>Number.NEGATIVE_INFINITY){t["aria-valuemin"]=q}if(u<Number.MAX_VALUE){t["aria-valuemax"]=u}w=p.getValue();if(w!=null&&w>=q&&w<=u){t["aria-valuenow"]=w}}return v},setValue:function(n){var o=this,m,p;if(o.hasFocus){m=o.getBind();p=m&&m.value;if(p&&p.syncing&&n===o.value){return o}}return Ext.form.field.Spinner.prototype.setValue.call(this,n)},getErrors:function(p){p=arguments.length>0?p:this.processRawValue(this.getRawValue());var q=this,n=Ext.form.field.Spinner.prototype.getErrors.call(this,p),o=Ext.String.format,s;if(p.length<1){return n}p=String(p).replace(q.decimalSeparator,".");if(isNaN(p)){n.push(o(q.nanText,p))}s=q.parseValue(p);if(q.minValue===0&&s<0){n.push(this.negativeText)}else{if(s<q.minValue){n.push(o(q.minText,q.minValue))}}if(s>q.maxValue){n.push(o(q.maxText,q.maxValue))}return n},rawToValue:function(g){var l=this.fixPrecision(this.parseValue(g));if(l===null){l=g||null}return l},valueToRaw:function(l){var m=this,n=m.decimalSeparator;l=m.parseValue(l);l=m.fixPrecision(l);l=Ext.isNumber(l)?l:parseFloat(String(l).replace(n,"."));l=isNaN(l)?"":String(l).replace(".",n);return l},getSubmitValue:function(){var l=this,g=Ext.form.field.Spinner.prototype.getSubmitValue.call(this);if(!l.submitLocaleSeparator){g=g.replace(l.decimalSeparator,".")}return g},onChange:function(g){var l=this.ariaEl.dom;this.toggleSpinners();Ext.form.field.Spinner.prototype.onChange.apply(this,arguments);if(l){if(Ext.isNumber(g)&&isFinite(g)){l.setAttribute("aria-valuenow",g)}else{l.removeAttribute("aria-valuenow")}}},toggleSpinners:function(){var n=this,m=n.getValue(),o=m===null,p;if(n.spinUpEnabled||n.spinUpDisabledByToggle){p=o||m<n.maxValue;n.setSpinUpEnabled(p,true)}if(n.spinDownEnabled||n.spinDownDisabledByToggle){p=o||m>n.minValue;n.setSpinDownEnabled(p,true)}},setMinValue:function(o){var q=this,s=q.ariaEl.dom,p,n,s;q.minValue=p=Ext.Number.from(o,Number.NEGATIVE_INFINITY);q.toggleSpinners();if(s){if(p>Number.NEGATIVE_INFINITY){s.setAttribute("aria-valuemin",p)}else{s.removeAttribute("aria-valuemin")}}if(q.disableKeyFilter!==true){n=q.baseChars+"";if(q.allowExponential){n+=q.decimalSeparator+"e+-"}else{if(q.allowDecimals){n+=q.decimalSeparator}if(q.minValue<0){n+="-"}}n=Ext.String.escapeRegex(n);q.maskRe=new RegExp("["+n+"]");if(q.autoStripChars){q.stripCharsRe=new RegExp("[^"+n+"]","gi")}}},setMaxValue:function(m){var n=this.ariaEl.dom,l;this.maxValue=l=Ext.Number.from(m,Number.MAX_VALUE);if(n){if(l<Number.MAX_VALUE){n.setAttribute("aria-valuemax",l)}else{n.removeAttribute("aria-valuemax")}}this.toggleSpinners()},parseValue:function(f){f=parseFloat(String(f).replace(this.decimalSeparator,"."));return isNaN(f)?null:f},fixPrecision:function(m){var n=this,o=isNaN(m),p=n.decimalPrecision;if(o||!m){return o?"":m}else{if(!n.allowDecimals||p<=0){p=0}}return parseFloat(Ext.Number.toFixed(parseFloat(m),p))},onBlur:function(e){var m=this,n=m.rawToValue(m.getRawValue());if(!Ext.isEmpty(n)){m.setValue(n)}Ext.form.field.Spinner.prototype.onBlur.call(this,e)},setSpinUpEnabled:function(g,l){Ext.form.field.Spinner.prototype.setSpinUpEnabled.apply(this,arguments);if(!l){delete this.spinUpDisabledByToggle}else{this.spinUpDisabledByToggle=!g}},onSpinUp:function(){var f=this;if(!f.readOnly){f.setSpinValue(Ext.Number.constrain(f.getValue()+f.step,f.minValue,f.maxValue))}},setSpinDownEnabled:function(g,l){Ext.form.field.Spinner.prototype.setSpinDownEnabled.apply(this,arguments);if(!l){delete this.spinDownDisabledByToggle}else{this.spinDownDisabledByToggle=!g}},onSpinDown:function(){var f=this;if(!f.readOnly){f.setSpinValue(Ext.Number.constrain(f.getValue()-f.step,f.minValue,f.maxValue))}},setSpinValue:function(g){var l=this;if(l.enforceMaxLength){if(l.fixPrecision(g).toString().length>l.maxLength){return}}l.setValue(g)}},0,["numberfield"],["component","box","field","textfield","spinnerfield","numberfield"],{component:true,box:true,field:true,textfield:true,spinnerfield:true,numberfield:true},["widget.numberfield"],0,[Ext.form.field,"Number",Ext.form,"NumberField",Ext.form,"Number"],0));(Ext.cmd.derive("Ext.toolbar.Paging",Ext.toolbar.Toolbar,{alternateClassName:"Ext.PagingToolbar",displayInfo:false,prependButtons:false,displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display",beforePageText:"Page",afterPageText:"of {0}",firstText:"First Page",prevText:"Previous Page",nextText:"Next Page",lastText:"Last Page",refreshText:"Refresh",inputItemWidth:30,emptyPageData:{total:0,currentPage:0,pageCount:0,toRecord:0,fromRecord:0},defaultBindProperty:"store",getPagingItems:function(){var g=this,l={scope:g,blur:g.onPagingBlur};l[Ext.supports.SpecialKeyDownRepeat?"keydown":"keypress"]=g.onPagingKeyDown;return[{itemId:"first",tooltip:g.firstText,overflowText:g.firstText,iconCls:"x-tbar-page-first",disabled:true,handler:g.moveFirst,scope:g},{itemId:"prev",tooltip:g.prevText,overflowText:g.prevText,iconCls:"x-tbar-page-prev",disabled:true,handler:g.movePrevious,scope:g},"-",g.beforePageText,{xtype:"numberfield",itemId:"inputItem",name:"inputItem",cls:"x-tbar-page-number",allowDecimals:false,minValue:1,hideTrigger:true,enableKeyEvents:true,keyNavEnabled:false,selectOnFocus:true,submitValue:false,isFormField:false,width:g.inputItemWidth,margin:"-1 2 3 2",listeners:l},{xtype:"tbtext",itemId:"afterTextItem",html:Ext.String.format(g.afterPageText,1)},"-",{itemId:"next",tooltip:g.nextText,overflowText:g.nextText,iconCls:"x-tbar-page-next",disabled:true,handler:g.moveNext,scope:g},{itemId:"last",tooltip:g.lastText,overflowText:g.lastText,iconCls:"x-tbar-page-last",disabled:true,handler:g.moveLast,scope:g},"-",{itemId:"refresh",tooltip:g.refreshText,overflowText:g.refreshText,iconCls:"x-tbar-loading",disabled:g.store.isLoading(),handler:g.doRefresh,scope:g}]},initComponent:function(){var m=this,n=m.items||m.buttons||[],l;m.bindStore(m.store||"ext-empty-store",true);l=m.getPagingItems();if(m.prependButtons){m.items=n.concat(l)}else{m.items=l.concat(n)}delete m.buttons;if(m.displayInfo){m.items.push("->");m.items.push({xtype:"tbtext",itemId:"displayItem"})}Ext.toolbar.Toolbar.prototype.initComponent.call(this)},beforeRender:function(){Ext.toolbar.Toolbar.prototype.beforeRender.apply(this,arguments);this.updateBarInfo()},onAdded:function(t){var p=this,u=p.store,q=p._autoStore,o,s;if(q===undefined){p._autoStore=q=!(u&&!u.isEmptyStore)}if(q){o=p._storeChangeListener;if(o){o.destroy();o=null}s=t&&t.store;if(s){o=t.on({destroyable:true,scope:p,storechange:"onOwnerStoreChange"})}p._storeChangeListener=o;p.onOwnerStoreChange(t,s)}Ext.toolbar.Toolbar.prototype.onAdded.apply(this,arguments)},onOwnerStoreChange:function(l,g){this.setStore(g||Ext.getStore("ext-empty-store"))},updateBarInfo:function(){var f=this;if(!f.store.isLoading()){f.calledInternal=true;f.onLoad();f.calledInternal=false}},updateInfo:function(){var o=this,q=o.child("#displayItem"),t=o.store,s=o.getPageData(),p,u;if(q){p=t.getCount();if(p===0){u=o.emptyMsg}else{u=Ext.String.format(o.displayMsg,s.fromRecord,s.toRecord,s.total)}q.setText(u)}},onLoad:function(){var x=this,s,u,t,w,y,v,q;y=x.store.getCount();v=y===0;if(!v){s=x.getPageData();u=s.currentPage;t=s.pageCount;if(u>t){if(t>0){x.store.loadPage(t)}else{x.getInputItem().reset()}return}w=Ext.String.format(x.afterPageText,isNaN(t)?1:t)}else{u=0;t=0;w=Ext.String.format(x.afterPageText,0)}Ext.suspendLayouts();q=x.child("#afterTextItem");if(q){q.update(w)}q=x.getInputItem();if(q){q.setDisabled(v).setValue(u)}x.setChildDisabled("#first",u===1||v);x.setChildDisabled("#prev",u===1||v);x.setChildDisabled("#next",u===t||v);x.setChildDisabled("#last",u===t||v);x.setChildDisabled("#refresh",false);x.updateInfo();Ext.resumeLayouts(true);if(!x.calledInternal){x.fireEvent("change",x,s||x.emptyPageData)}},setChildDisabled:function(n,m){var l=this.child(n);if(l){l.setDisabled(m)}},getPageData:function(){var o=this.store,p=o.getTotalCount(),n=Math.ceil(p/o.pageSize),m=Math.min(o.currentPage*o.pageSize,p);return{total:p,currentPage:o.currentPage,pageCount:Ext.Number.isFinite(n)?n:1,fromRecord:((o.currentPage-1)*o.pageSize)+1,toRecord:m||p}},onLoadError:function(){this.setChildDisabled("#refresh",false)},getInputItem:function(){return this.child("#inputItem")},readPageFromInput:function(o){var n=this.getInputItem(),m=false,p;if(n){p=n.getValue();m=parseInt(p,10);if(!p||isNaN(m)){n.setValue(o.currentPage);return false}}return m},onPagingBlur:function(e){var m=this.getInputItem(),n;if(m){n=this.getPageData().currentPage;m.setValue(n)}},onPagingKeyDown:function(e,l){this.processKeyEvent(e,l)},processKeyEvent:function(u,v){var e=this,q=v.getKey(),s=e.getPageData(),t=v.shiftKey?10:1,w;if(q===v.RETURN){v.stopEvent();w=e.readPageFromInput(s);if(w!==false){w=Math.min(Math.max(1,w),s.pageCount);if(w!==s.currentPage&&e.fireEvent("beforechange",e,w)!==false){e.store.loadPage(w)}}}else{if(q===v.HOME||q===v.END){v.stopEvent();w=q===v.HOME?1:s.pageCount;u.setValue(w)}else{if(q===v.UP||q===v.PAGE_UP||q===v.DOWN||q===v.PAGE_DOWN){v.stopEvent();w=e.readPageFromInput(s);if(w){if(q===v.DOWN||q===v.PAGE_DOWN){t*=-1}w+=t;if(w>=1&&w<=s.pageCount){u.setValue(w)}}}}}},beforeLoad:function(){this.setChildDisabled("#refresh",true)},moveFirst:function(){if(this.fireEvent("beforechange",this,1)!==false){this.store.loadPage(1);return true}return false},movePrevious:function(){var l=this,n=l.store,m=n.currentPage-1;if(m>0){if(l.fireEvent("beforechange",l,m)!==false){n.previousPage();return true}}return false},moveNext:function(){var m=this,p=m.store,n=m.getPageData().pageCount,o=p.currentPage+1;if(o<=n){if(m.fireEvent("beforechange",m,o)!==false){p.nextPage();return true}}return false},moveLast:function(){var g=this,l=g.getPageData().pageCount;if(g.fireEvent("beforechange",g,l)!==false){g.store.loadPage(l);return true}return false},doRefresh:function(){var m=this,n=m.store,l=n.currentPage;if(m.fireEvent("beforechange",m,l)!==false){n.loadPage(l);return true}return false},getStoreListeners:function(){return{beforeload:this.beforeLoad,load:this.onLoad,exception:this.onLoadError}},onBindStore:function(){if(this.rendered){this.updateBarInfo()}},doDestroy:function(){var l=this,g=l._storeChangeListener;if(g){g.destroy();l._storeChangeListener=null}l.bindStore(null);Ext.toolbar.Toolbar.prototype.doDestroy.call(this)}},0,["pagingtoolbar"],["component","box","container","toolbar","pagingtoolbar"],{component:true,box:true,container:true,toolbar:true,pagingtoolbar:true},["widget.pagingtoolbar"],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.toolbar,"Paging",Ext,"PagingToolbar"],0));Ext.define("Ext.theme.neptune.toolbar.Paging",{override:"Ext.toolbar.Paging",defaultButtonUI:"plain-toolbar",inputItemWidth:40});Ext.define("Ext.theme.triton.toolbar.Paging",{override:"Ext.toolbar.Paging",inputItemWidth:50});(Ext.cmd.derive("Ext.view.BoundList",Ext.view.View,{alternateClassName:"Ext.BoundList",pageSize:0,baseCls:"x-boundlist",itemCls:"x-boundlist-item",listItemCls:"",shadow:false,trackOver:true,preserveScrollOnRefresh:true,enableInitialSelection:false,refreshSelmodelOnRefresh:true,componentLayout:"boundlist",navigationModel:"boundlist",scrollable:true,ariaEl:"listEl",tabIndex:-1,childEls:["listWrap","listEl"],renderTpl:['<div id="{id}-listWrap" data-ref="listWrap"',' class="{baseCls}-list-ct ',Ext.dom.Element.unselectableCls,'">','<ul id="{id}-listEl" data-ref="listEl" class="',"x-",'list-plain"','<tpl foreach="ariaAttributes"> {$}="{.}"</tpl>',">","</ul>","</div>","{%","var pagingToolbar=values.$comp.pagingToolbar;","if (pagingToolbar) {","Ext.DomHelper.generateMarkup(pagingToolbar.getRenderTree(), out);","}","%}",{disableFormats:true}],focusOnToFront:false,alignOnScroll:false,initComponent:function(){var m=this,n=m.baseCls,l=m.itemCls;m.selectedItemCls=n+"-selected";if(m.trackOver){m.overItemCls=n+"-item-over"}m.itemSelector="."+l;if(m.floating){m.addCls(n+"-floating")}if(!m.tpl){m.generateTpl()}else{if(!m.tpl.isTemplate){m.tpl=new Ext.XTemplate(m.tpl)}}if(m.pageSize){m.pagingToolbar=m.createPagingToolbar()}Ext.view.View.prototype.initComponent.call(this)},generateTpl:function(){var f=this;f.tpl=new Ext.XTemplate('<tpl for=".">','<li role="option" unselectable="on" class="'+f.itemCls+'">'+f.getInnerTpl(f.displayField)+"</li>","</tpl>")},setDisplayField:function(f){this.displayField=f;this.generateTpl()},getRefOwner:function(){return this.pickerField||Ext.view.View.prototype.getRefOwner.call(this)},getRefItems:function(){var l=Ext.view.View.prototype.getRefItems.call(this),g=this.pagingToolbar;if(g){l.push(g)}return l},createPagingToolbar:function(){var f=this;return new Ext.toolbar.Paging({id:f.id+"-paging-toolbar",pageSize:f.pageSize,store:f.dataSource,border:false,ownerCt:f,ownerLayout:f.getComponentLayout()})},getNodeContainer:function(){return this.listEl},refresh:function(){var g=this,l=g.tpl;l.field=g.pickerField;l.store=g.store;Ext.view.View.prototype.refresh.call(this);l.field=l.store=null;if(!g.ariaStaticRoles[g.ariaRole]){g.refreshAriaAttributes()}},refreshAriaAttributes:function(){var u=this,E=u.store,x=u.getSelectionModel(),B,D,C,A,y,v,z,w;D=E.isFiltered()?E.getCount():E.getTotalCount()||E.getCount();C=u.getNodes();B=u.pickerField&&u.pickerField.multiSelect;for(z=0,w=C.length;z<w;z++){A=C[z];y=null;if(D!==w){y=u.getRecord(A);v=E.indexOf(y);A.setAttribute("aria-setsize",D);A.setAttribute("aria-posinset",v)}if(B){y=y||u.getRecord(A);A.setAttribute("aria-selected",x.isSelected(y))}}},bindStore:function(n,m){var l=this.pagingToolbar;Ext.view.View.prototype.bindStore.apply(this,arguments);if(l){l.bindStore(n,m)}},getInnerTpl:function(f){return"{"+f+"}"},onShow:function(){var f=this.pickerField;Ext.view.View.prototype.onShow.call(this);if(f&&f.rendered&&!f.hasFocus){f.focus()}},afterComponentLayout:function(p,s,q,n){var o=this.pickerField;Ext.view.View.prototype.afterComponentLayout.call(this,p,s,q,n);if(o&&o.alignPicker){o.alignPicker()}},onItemSelect:function(n){var l=this,m;m=Ext.view.View.prototype.onItemSelect.call(this,n);if(m){if(l.ariaSelectable){m.setAttribute("aria-selected","true")}else{m.removeAttribute("aria-selected")}}return m},onItemDeselect:function(n){var l=this,m;m=Ext.view.View.prototype.onItemDeselect.call(this,n);if(m&&l.ariaSelectable){if(l.pickerField&&l.pickerField.multiSelect){m.setAttribute("aria-selected","false")}else{m.removeAttribute("aria-selected")}}return m},onItemClick:function(s){var o=this,n=o.pickerField,q,p;if(!n){return}q=n.valueField;p=o.getSelectionModel().getSelection();if(!n.multiSelect&&p.length){p=p[0];if(p&&n.isEqual(s.get(q),p.get(q))&&n.collapse){n.collapse()}}},onContainerClick:function(m){var n=this.pagingToolbar,e;if(n&&n.rendered&&m.within(n.el)){return false}if(Ext.isIE10||Ext.isIE11){e=this.listWrap.getClientRegion();if(!m.getPoint().isContainedBy(e)){return false}}},doDestroy:function(){this.pagingToolbar=Ext.destroy(this.pagingToolbar);Ext.view.View.prototype.doDestroy.call(this)},privates:{getTargetEl:function(){return this.listEl},getOverflowEl:function(){return this.listWrap},finishRenderChildren:function(){var f=this.pagingToolbar;Ext.view.View.prototype.finishRenderChildren.apply(this,arguments);if(f){f.finishRender()}}}},0,["boundlist"],["component","box","dataview","boundlist"],{component:true,box:true,dataview:true,boundlist:true},["widget.boundlist"],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.view,"BoundList",Ext,"BoundList"],0));(Ext.cmd.derive("Ext.form.field.ComboBox",Ext.form.field.Picker,{alternateClassName:"Ext.form.ComboBox",config:{filters:null,selection:null,valueNotFoundText:null,displayTpl:null,delimiter:", ",displayField:"text"},publishes:["selection"],twoWayBindable:["selection"],triggerCls:"x-form-arrow-trigger",hiddenName:"",collapseOnSelect:false,hiddenDataCls:"x-hidden-display x-form-data-hidden",ariaRole:"combobox",autoDestroyBoundStore:true,childEls:{hiddenDataEl:true},filtered:false,afterRender:function(){var f=this;Ext.form.field.Picker.prototype.afterRender.apply(this,arguments);f.setHiddenValue(f.value)},multiSelect:false,triggerAction:"all",allQuery:"",queryParam:"query",queryMode:"remote",queryCaching:true,autoLoadOnValue:false,pageSize:0,anyMatch:false,caseSensitive:false,autoSelect:true,autoSelectLast:true,typeAhead:false,typeAheadDelay:250,selectOnTab:true,forceSelection:false,growToLongestValue:true,clearFilterOnBlur:true,defaultListConfig:{loadingHeight:70,minWidth:70,maxHeight:300,shadow:"sides"},transformInPlace:true,clearValueOnEmpty:true,newlineRe:/\r?\n/g,getGrowWidth:function(){var x=this,v=x.inputEl.dom.value,w,u,t,y,z,s,A;if(x.growToLongestValue){w=x.displayField;u=x.store;t=u.data.length;y=0;for(z=0;z<t;z++){s=u.getAt(z).data[w];A=s.length;if(A>y){y=A;v=s}}}return v},initComponent:function(){var o=this,q=Ext.isDefined,s=o.store,p=o.transform,t,u;if("pinList" in o){o.collapseOnSelect=!o.pinList}if(p){t=Ext.getDom(p);if(t){if(!o.store){s=Ext.Array.map(Ext.Array.from(t.options),function(e){return[e.value,e.text]})}if(!o.name){o.name=t.name}if(!("value" in o)){o.value=t.value}}}if(!o.displayTpl){o.setDisplayTpl(false)}o.bindStore(s||"ext-empty-store",true,true);u=o.queryMode==="local";if(!q(o.queryDelay)){o.queryDelay=u?10:500}if(!q(o.minChars)){o.minChars=u?0:4}Ext.form.field.Picker.prototype.initComponent.call(this);o.doQueryTask=new Ext.util.DelayedTask(o.doRawQuery,o);if(t){if(o.transformInPlace){o.render(t.parentNode,t);delete o.renderTo}Ext.removeNode(t)}},initEvents:function(){var f=this;Ext.form.field.Picker.prototype.initEvents.call(this);f.altArrowKeyNav=new Ext.util.KeyNav({target:f.inputEl,forceKeyDown:true,priority:1002,scope:f,down:{alt:true,handler:f.onAltDownArrow},up:{alt:true,handler:f.onAltUpArrow}})},getSubTplData:function(q){var p=this,n=p.id,o,s;o=Ext.form.field.Picker.prototype.getSubTplData.call(this,q);if(!p.ariaStaticRoles[p.ariaRole]){s=o.ariaElAttributes;if(s){s["aria-owns"]=n+"-inputEl "+n+"-picker-listEl";s["aria-autocomplete"]="list"}}return o},getSubTplMarkup:function(n){var m=this,p="",o=Ext.form.field.Picker.prototype.getSubTplMarkup.apply(this,arguments);if(m.hiddenName){p='<div id="'+n.id+'-hiddenDataEl" data-ref="hiddenDataEl" class="'+m.hiddenDataCls+'" role="presentation"></div>'}return p+o},applyDisplayTpl:function(g){var l=this;if(!g){g=new Ext.XTemplate('<tpl for=".">{[typeof values === "string" ? values : values["'+l.getDisplayField()+'"]]}<tpl if="xindex < xcount">'+l.getDelimiter()+"</tpl></tpl>");g.auto=true}else{if(!g.isTemplate){g=new Ext.XTemplate(g)}}return g},applyFilters:function(m,l){var n=this;if(m===null||m.isFilterCollection){return m}if(m){if(!l){l=this.getFilters()}l.beginUpdate();l.splice(0,l.length,m);l.each(function(e){e.ownerId=n.id});l.endUpdate()}return l},applyValueNotFoundText:function(n){var m=this,l=m.valueNotFoundRecord||(m.valueNotFoundRecord=new Ext.data.Model());l.set(m.displayField,n);if(m.valueField&&m.displayField!==m.valueField){l.set(m.valueField,n)}return n},getFilters:function(g){var l=this.filters;if(!l&&g!==false){l=new Ext.util.FilterCollection();this.setFilters(l)}return l},updateFilters:function(n,m){var l=this;if(m){m.un("endupdate","onEndUpdateFilters",l)}if(n){n.on("endupdate","onEndUpdateFilters",l)}l.onEndUpdateFilters(n)},onEndUpdateFilters:function(o){var p=this,u=p.filtered,q=!!o&&(o.length>0),t,s;if(u||q){p.filtered=q;t=[];s=p.store.getFilters();s.each(function(e){if(e.ownerId===p.id&&!o.contains(e)){t.push(e)}});s.splice(0,t,o.items)}},clearLocalFilter:function(){var g=this,l=g.queryFilter;if(l){g.queryFilter=null;g.changingFilters=true;g.store.removeFilter(l,true);g.changingFilters=false}},completeEdit:function(e){var l=this;Ext.form.field.Picker.prototype.completeEdit.call(this,e);l.doQueryTask.cancel();l.assertValue();if(l.queryFilter&&l.queryMode==="local"&&l.clearFilterOnBlur){l.clearLocalFilter()}},onFocus:function(e){var l=this;Ext.form.field.Picker.prototype.onFocus.call(this,e);if(l.triggerAction!=="all"&&l.queryFilter&&l.queryMode==="local"&&l.clearFilterOnBlur){delete l.lastQuery;l.doRawQuery()}},onAltDownArrow:function(e){e.stopEvent();if(!this.isExpanded){this.onDownArrow(e)}return false},onAltUpArrow:function(e){e.stopEvent();if(this.isExpanded){this.onEsc(e)}return false},assertValue:function(){var s=this,p=s.getRawValue(),t=s.getDisplayValue(),w=s.lastSelectedRecords,u=false,q,v;if(s.forceSelection){if(s.multiSelect){if(p!==t){s.setRawValue(t)}}else{v=s.findRecordByDisplay(p);if(!v){if(w&&(!s.allowBlank||s.rawValue)){v=w[0]}else{if(s.displayTplData&&s.displayTplData.length){v=s.findRecordByValue(s.displayTplData[0][s.valueField])}}}else{if(s.getDisplayValue([s.getRecordDisplayData(v)])===t){v=null;u=true}}if(v){s.select(v,true);s.fireEvent("select",s,v)}else{if(!u){if(w){delete s.lastSelectedRecords}s.setRawValue("")}}}}else{if((q=s.getValue())&&q==p){v=s.findRecordByDisplay(q);if(v&&(v!==(w&&w[0])||s.displayField!==s.valueField)){s.select(v,true);s.fireEvent("select",s,v)}}}s.collapse()},onTypeAhead:function(){var p=this,q=p.displayField,s=p.store.findRecord(q,p.getRawValue()),o,t,u;if(s){o=s.get(q);t=o.length;u=p.getRawValue().length;if(u!==0&&u!==t){p.lastMutatedValue=o;p.setRawValue(o);p.selectText(u,o.length)}}},resetToDefault:Ext.emptyFn,beforeReset:function(){Ext.form.field.Picker.prototype.beforeReset.call(this);this.clearLocalFilter()},onUnbindStore:function(){var g=this,l=g.picker;if(g.queryFilter&&!g.store.destroyed){g.clearLocalFilter()}if(l){l.bindStore(null)}g.pickerSelectionModel.destroy()},onBindStore:function(t,q){var o=this,s=o.picker,p,u;if(t){if(t.autoCreated){o.queryMode="local";o.valueField=o.displayField="field1";if(!t.expanded){o.displayField="field2"}if(o.getDisplayTpl().auto){o.setDisplayTpl(null)}}if(!Ext.isDefined(o.valueField)){o.valueField=o.displayField}p={byValue:{rootProperty:"data",unique:false}};p.byValue.property=o.valueField;t.setExtraKeys(p);if(o.displayField===o.valueField){t.byText=t.byValue}else{p.byText={rootProperty:"data",unique:false};p.byText.property=o.displayField;t.setExtraKeys(p)}u={rootProperty:"data",extraKeys:{byInternalId:{property:"internalId"},byValue:{property:o.valueField,rootProperty:"data"}},listeners:{beginupdate:o.onValueCollectionBeginUpdate,endupdate:o.onValueCollectionEndUpdate,scope:o}};o.valueCollection=new Ext.util.Collection(u);o.pickerSelectionModel=new Ext.selection.DataViewModel({mode:o.multiSelect?"SIMPLE":"SINGLE",ordered:true,deselectOnContainerClick:false,enableInitialSelection:false,pruneRemoved:false,selected:o.valueCollection,store:t,listeners:{scope:o,lastselectedchanged:o.updateBindSelection}});if(!q){o.resetToDefault()}if(s){o.pickerSelectionModel.on({scope:o,beforeselect:o.onBeforeSelect,beforedeselect:o.onBeforeDeselect});s.setSelectionModel(o.pickerSelectionModel);if(s.getStore()!==t){s.bindStore(t)}}}},bindStore:function(s,n,q){var o=this,p=o.queryFilter;o.mixins.storeholder.bindStore.call(o,s,q);s=o.getStore();if(s&&p&&!n){s.getFilters().add(p)}if(!q&&s&&!s.isEmptyStore){o.setValueOnData()}},getStoreListeners:function(m){if(!m.isEmptyStore){var l=this,n={datachanged:l.onDataChanged,load:l.onLoad,exception:l.onException,update:l.onStoreUpdate,remove:l.checkValueOnChange};if(!m.getRemoteFilter()){n.filterchange=l.checkValueOnChange}return n}},onDataChanged:function(){if(this.grow&&this.growToLongestValue){this.autoSize()}},checkValueOnChange:function(){var f=this;if(!f.destroying&&f.getStore().isLoaded()){if(f.multiSelect){}else{if(f.forceSelection&&!f.changingFilters&&!f.findRecordByValue(f.value)){if(f.queryMode!="local"&&f.hasFocus){return}f.setValue(null)}}}},onStoreUpdate:function(g,l){this.updateValue()},onException:function(){this.collapse()},onLoad:function(p,q,n){var o=this,s=!o.valueCollection.byValue.get(o.value);if(n&&s&&!(p.lastOptions&&"rawQuery" in p.lastOptions)){o.setValueOnData()}o.checkValueOnChange()},setValueOnData:function(){var f=this;f.setValue(f.value);if(f.isExpanded&&f.getStore().getCount()){f.doAutoSelect()}},doRawQuery:function(){var l=this,g=l.inputEl.dom.value;if(l.multiSelect){g=g.split(l.delimiter).pop()}l.doQuery(g,false,true)},doQuery:function(w,t,x){var q=this,v=q.getStore(),s=v.getFilters(),u=q.beforeQuery({lastQuery:q.lastQuery||"",query:w||"",rawQuery:x,forceAll:t,combo:q,cancel:false}),y;if(u!==false&&!u.cancel){y=!!w&&(!q.queryFilter||q.queryFilter&&(s.indexOf(q.queryFilter)<0));if(q.queryCaching&&!y&&u.query===q.lastQuery){q.getPicker().refresh();q.expand();q.afterQuery(u)}else{q.lastQuery=u.query;if(q.queryMode==="local"){q.doLocalQuery(u)}else{q.doRemoteQuery(u)}}return true}else{q.startCheckChangeTask()}return false},beforeQuery:function(l){var g=this;if(g.fireEvent("beforequery",l)===false){l.cancel=true}else{if(!l.cancel){if(l.query.length<g.minChars&&!l.forceAll){l.cancel=true}}}return l},doLocalQuery:function(s){var e=this,u=s.query,t=e.getStore(),w=u,q;e.clearLocalFilter();if(u){if(e.enableRegEx){try{w=new RegExp(w)}catch(v){w=null}}if(w!==null){e.changingFilters=true;q=e.queryFilter=new Ext.util.Filter({id:e.id+"-filter",anyMatch:e.anyMatch,caseSensitive:e.caseSensitive,root:"data",property:e.displayField,value:w});t.addFilter(q,true);e.changingFilters=false}}if(e.store.getCount()||e.getPicker().emptyText){e.getPicker().refresh();e.expand()}else{e.collapse()}e.afterQuery(s)},doRemoteQuery:function(m){var l=this,n=function(){if(!l.destroyed){l.afterQuery(m)}};l.expand();if(l.pageSize){l.loadPage(1,{rawQuery:m.rawQuery,callback:n})}else{l.store.load({params:l.getParams(m.query),rawQuery:m.rawQuery,callback:n})}},afterQuery:function(l){var g=this;if(g.store.getCount()){if(g.typeAhead){g.doTypeAhead(l)}if(l.rawQuery){if(g.picker&&!g.picker.getSelectionModel().hasSelection()){g.doAutoSelect()}}else{g.doAutoSelect()}}g.startCheckChangeTask()},loadPage:function(g,l){this.store.loadPage(g,Ext.apply({params:this.getParams(this.lastQuery)},l))},onPageChange:function(g,l){this.loadPage(l);return false},getParams:function(l){var m={},n=this.queryParam;if(n){m[n]=l}return m},doAutoSelect:function(){var p=this,s=p.store,q=p.picker,u=0,t,o;if(q&&p.autoSelect&&s.getCount()>0){if(p.autoSelectLast){t=q.getSelectionModel();o=t.lastSelected;if(o&&t.selected.length&&s.indexOf(o)>-1){u=o}}q.getNavigationModel().setPosition(u)}},doTypeAhead:function(l){var g=this;if(!g.typeAheadTask){g.typeAheadTask=new Ext.util.DelayedTask(g.onTypeAhead,g)}if(l.query.length>l.lastQuery.length||!Ext.String.startsWith(l.lastQuery,l.query)){g.typeAheadTask.delay(g.typeAheadDelay)}},onTriggerClick:function(e){var m=this,n;if(!m.readOnly&&!m.disabled){if(m.isExpanded){m.collapse()}else{if(e&&e.type==="keydown"&&e.altKey){n=m.autoSelect;m.autoSelect=false;m.expand();m.autoSelect=n}else{if(m.triggerAction==="all"){m.doQuery(m.allQuery,true)}else{if(m.triggerAction==="last"){m.doQuery(m.lastQuery,true)}else{m.doQuery(m.getRawValue(),false,true)}}}}}},onFieldMutation:function(t){var e=this,q=t.getKey(),p=q===t.BACKSPACE||q===t.DELETE,u=e.inputEl.dom.value,s=u.length;if(!e.readOnly&&(u!==e.lastMutatedValue||p)&&q!==t.TAB){e.lastMutatedValue=u;e.refreshEmptyText();if(s&&(t.type!=="keyup"||(!t.isSpecialKey()||p))){e.doQueryTask.delay(e.queryDelay)}else{if(!s&&(!q||p)){++e.suspendCheckChange;if(!e.multiSelect){e.value=null;e.displayTplData=undefined}if(e.clearValueOnEmpty){e.valueCollection.beginUpdate();e.pickerSelectionModel.deselectAll();e.valueCollection.removeAll();e.valueCollection.endUpdate()}e.collapse();if(e.queryFilter){e.clearLocalFilter()}e.lastQuery=null;--e.suspendCheckChange}Ext.form.field.Picker.prototype.onFieldMutation.call(this,t)}}},doDestroy:function(){var f=this;f.doQueryTask.cancel();if(f.typeAheadTask){f.typeAheadTask.cancel();f.typeAheadTask=null}f.bindStore(null);Ext.destroy(f.altArrowKeyNav,f.valueCollection);Ext.form.field.Picker.prototype.doDestroy.call(this)},onAdded:function(){var f=this;Ext.form.field.Picker.prototype.onAdded.apply(this,arguments);if(f.picker){f.picker.ownerCt=f.up("[floating]");f.picker.registerWithOwnerCt()}},createPicker:function(){var l=this,m,n=Ext.apply({xtype:"boundlist",id:l.id+"-picker",pickerField:l,selectionModel:l.pickerSelectionModel,floating:true,hidden:true,store:l.getPickerStore(),displayField:l.displayField,preserveScrollOnRefresh:true,pageSize:l.pageSize,tpl:l.tpl,ariaSelectable:l.ariaSelectable},l.listConfig,l.defaultListConfig);m=l.picker=Ext.widget(n);if(l.pageSize){m.pagingToolbar.on("beforechange",l.onPageChange,l)}if(!m.initialConfig.maxHeight){m.on({beforeshow:l.onBeforePickerShow,scope:l})}m.getSelectionModel().on({beforeselect:l.onBeforeSelect,beforedeselect:l.onBeforeDeselect,focuschange:l.onFocusChange,scope:l});m.getNavigationModel().navigateOnSpace=false;return m},getPickerStore:function(){return this.store},onBeforePickerShow:function(p){var o=this,m=o.getPosition()[1]-Ext.getBody().getScroll().top,n=Ext.Element.getViewportHeight()-m-o.getHeight();p.maxHeight=Math.max(m,n)-5},onBeforeSelect:function(l,n,m){return this.fireEvent("beforeselect",this,n,m)},onBeforeDeselect:function(l,n,m){return this.fireEvent("beforedeselect",this,n,m)},onFocusChange:function(q,t,s){var p=this.picker,u=this.inputEl,o;if(s){o=Ext.get(p.getNodeByRecord(s));if(o){u.dom.setAttribute("aria-activedescendant",o.id)}else{u.dom.removeAttribute("aria-activedescendant")}}},getSelection:function(){var l=this.getPicker().getSelectionModel(),g=l.getSelection();return g.length?l.getLastSelected():null},updateSelection:function(n){var m=this,l;if(!m.ignoreNextSelection){m.ignoreNextSelection=true;l=m.getPicker().getSelectionModel();if(n){l.select(n);m.hasHadSelection=true}else{l.deselectAll()}m.ignoreNextSelection=false}},updateBindSelection:function(p,n){var m=this,o=null;if(!m.ignoreNextSelection){m.ignoreNextSelection=true;if(n.length){o=p.getLastSelected();m.hasHadSelection=true}if(m.hasHadSelection){m.setSelection(o)}m.ignoreNextSelection=false}},onValueCollectionBeginUpdate:Ext.emptyFn,onValueCollectionEndUpdate:function(){var o=this,p=o.store,n=o.valueCollection.getRange(),q=n[0],s=n.length;o.updateBindSelection(o.pickerSelectionModel,n);if(o.isSelectionUpdating()){return}Ext.suspendLayouts();o.lastSelection=n;if(s){o.lastSelectedRecords=n}o.updateValue();if(s&&((!o.multiSelect&&p.contains(q))||o.collapseOnSelect||!p.getCount())){o.updatingValue=true;o.collapse();o.updatingValue=false}Ext.resumeLayouts(true);if(!o.suspendCheckChange){if(!o.multiSelect){n=q}o.fireEvent("select",o,n)}},isSelectionUpdating:function(){var f=this.pickerSelectionModel;return f.deselectingDuringSelect||f.refreshing},onExpand:function(){var m=this,o=m.getPicker(),p=o.getNavigationModel(),n;if(p){p.enable()}m.doAutoSelect();n=Ext.get(o.highlightedItem);if(n){m.inputEl.dom.setAttribute("aria-activedescendant",n.id)}},onCollapse:function(){var g=this,l=g.getPicker().getNavigationModel();if(l){l.disable()}if(g.updatingValue){g.doQueryTask.cancel()}g.inputEl.dom.removeAttribute("aria-activedescendant")},select:function(o,s){var p=this,q=p.picker,n;if(o&&o.isModel&&s===true&&q){n=!q.getSelectionModel().isSelected(o)}if(!n){p.suspendEvent("select")}p.setValue(o);p.resumeEvent("select")},findRecord:function(m,n){var o=this.store,p=o.findExact(m,n);return p!==-1?o.getAt(p):false},getSelectedRecord:function(){return this.findRecordByValue(this.value)||null},findRecordByValue:function(l){var n=this.store.byValue.get(l),m=false;if(n){m=n[0]||n}return m},findRecordByDisplay:function(l){var n=this.store.byText.get(l),m=false;if(n){m=n[0]||n}return m},addValue:function(f){if(f!=null){return this.doSetValue(f,true)}},setValue:function(n){var o=this,m,p;if(o.hasFocus){m=o.getBind();p=m&&m.value;if(p&&p.syncing){if((Ext.isEmpty(n)&&Ext.isEmpty(o.value))||n===o.value){return o}else{if(Ext.isArray(n)&&Ext.isArray(o.value)&&Ext.Array.equals(n,o.value)){return o}}}}else{o.lastSelectedRecords=null}if(n!=null){o.doSetValue(n)}else{o.suspendEvent("select");o.valueCollection.beginUpdate();o.pickerSelectionModel.deselectAll();o.valueCollection.endUpdate();o.resumeEvent("select")}return o},setRawValue:function(f){Ext.form.field.Picker.prototype.setRawValue.call(this,f);this.lastMutatedValue=f},doSetValue:function(H,M){var O=this,U=O.getStore(),T=U.getModel(),S=[],V=[],F=O.autoLoadOnValue,W=U.getCount()>0||U.isLoaded(),aa=U.hasPendingLoad(),K=F&&!W&&!aa,N=O.forceSelection,I=O.pickerSelectionModel,Z=O.displayField===O.valueField,J=U.isEmptyStore,R=O.lastSelection,Q,P,Y,G,X,L;if(aa||K||!W||J){if(!H.isModel){if(M){O.value=Ext.Array.from(O.value).concat(H)}else{O.value=H}O.setHiddenValue(O.value);O.setRawValue(Z?H:"");if(Z&&!Ext.isEmpty(H)&&O.inputEl&&O.emptyText){O.inputEl.removeCls(O.emptyUICls)}}if(K&&!J){U.load()}if(!H.isModel||J){return O}}H=M?Ext.Array.from(O.value).concat(H):Ext.Array.from(H);for(Q=0,P=H.length;Q<P;Q++){Y=H[Q];if(!Y||!Y.isModel){Y=O.findRecordByValue(L=Y);if(!Y){Y=O.valueCollection.find(O.valueField,L)}}if(!Y){if(!N){if(!Y&&H[Q]){G={};G[O.displayField]=H[Q];if(O.valueField&&O.displayField!==O.valueField){G[O.valueField]=H[Q]}Y=new T(G)}}else{if(O.valueNotFoundRecord){Y=O.valueNotFoundRecord}}}if(Y){S.push(Y);V.push(Y.get(O.valueField))}}if(R){P=R.length;if(P===S.length){for(Q=0;!X&&Q<P;Q++){if(Ext.Array.indexOf(O.lastSelection,S[Q])===-1){X=true}}}else{X=true}}else{X=S.length}if(X){O.suspendEvent("select");O.valueCollection.beginUpdate();if(S.length){I.select(S,false)}else{I.deselectAll()}O.valueCollection.endUpdate();O.resumeEvent("select")}else{O.updateValue()}return O},updateValue:function(){var u=this,x=u.valueCollection.getRange(),w=x.length,t=[],A=u.displayTplData||(u.displayTplData=[]),s=u.inputEl,z,y,v;A.length=0;for(z=0;z<w;z++){y=x[z];A.push(u.getRecordDisplayData(y));if(y!==u.valueNotFoundRecord){t.push(y.get(u.valueField))}}u.setHiddenValue(t);u.value=u.multiSelect?t:t[0];if(!Ext.isDefined(u.value)){u.value=undefined}u.displayTplData=A;v=u.getDisplayValue();u.setRawValue(v);u.refreshEmptyText();u.checkChange();if(s&&u.typeAhead&&u.hasFocus){u.selectText(v.length)}},setHiddenValue:function(t){var w=this,A=w.hiddenName,x,z,s,u,v,y;if(!w.hiddenDataEl||!A){return}t=Ext.Array.from(t);z=w.hiddenDataEl.dom;s=z.childNodes;u=s[0];v=t.length;y=s.length;if(!u&&v>0){w.hiddenDataEl.setHtml(Ext.DomHelper.markup({tag:"input",type:"hidden",name:A}));y=1;u=z.firstChild}while(y>v){z.removeChild(s[0]);--y}while(y<v){z.appendChild(u.cloneNode(true));++y}for(x=0;x<v;x++){s[x].value=t[x]}},getDisplayValue:function(l){l=l||this.displayTplData;var g=this.getDisplayTpl().apply(l)||"";return g.replace(this.newlineRe,"")},getRecordDisplayData:function(f){return f.data},getValue:function(){var p=this,s=p.getStore(),q=p.picker,n=p.getRawValue(),o=p.value;if(!s.isEmptyStore&&p.getDisplayValue()!==n){p.displayTplData=undefined;if(q){p.valueCollection.suspendEvents();q.getSelectionModel().deselectAll();p.valueCollection.resumeEvents();p.lastSelection=null}if(s.isLoaded()&&(p.multiSelect||p.forceSelection)){o=p.value=undefined}else{o=p.value=n}}p.value=o==null?null:o;return p.value},getSubmitValue:function(){var f=this.getValue();if(Ext.isEmpty(f)){f=""}return f},isEqual:function(n,o){var q=Ext.Array.from,p,s;n=q(n);o=q(o);s=n.length;if(s!==o.length){return false}for(p=0;p<s;p++){if(o[p]!==n[p]){return false}}return true},clearValue:function(){this.setValue(null)}},0,["combo","combobox"],["component","box","field","textfield","pickerfield","combobox","combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true},["widget.combo","widget.combobox"],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.form.field,"ComboBox",Ext.form,"ComboBox"],0));(Ext.cmd.derive("Ext.container.Monitor",Ext.Base,{target:null,selector:"",scope:null,addHandler:null,removeHandler:null,invalidateHandler:null,clearPropertiesOnDestroy:false,clearPrototypeOnDestroy:false,disabled:0,constructor:function(f){Ext.apply(this,f)},destroy:function(){this.unbind();this.callParent()},bind:function(g){var l=this;l.target=g;g.on("beforedestroy",l.disable,l);l.onContainerAdd(g)},unbind:function(){var l=this,g=l.target;if(g&&!g.destroyed){l.onContainerRemove(g,g);g.un("beforedestroy",l.disable,l)}l.items=Ext.destroy(l.items)},disable:function(){++this.disabled},enable:function(){if(this.disabled>0){--this.disabled}},handleAdd:function(g,l){if(!this.disabled){if(Ext.ComponentQuery.is(l,this.selector)){this.onItemAdd(l.ownerCt,l)}if(l.isQueryable){this.onContainerAdd(l)}}},onItemAdd:function(p,q){var n=this,s=n.items,o=n.addHandler;if(!n.disabled){if(o){o.call(n.scope||q,q)}if(s){s.add(q)}}q.clearPropertiesOnDestroy=q.clearPrototypeOnDestroy=false},onItemRemove:function(p,q){var n=this,s=n.items,o=n.removeHandler;if(!n.disabled){if(o){o.call(n.scope||q,q)}if(s){s.remove(q)}}},onContainerAdd:function(p,w){var v=this,s,u,q,t;if(p.isContainer){p.on({scope:v,add:v.handleAdd,dockedadd:v.handleAdd,remove:v.handleRemove,dockedremove:v.handleRemove})}if(w!==true){s=p.query(v.selector);for(q=0,u=s.length;q<u;++q){t=s[q];v.onItemAdd(t.ownerCt,t)}}s=p.query(">container");for(q=0,u=s.length;q<u;++q){v.onContainerAdd(s[q],true)}p.clearPropertiesOnDestroy=p.clearPrototypeOnDestroy=false},handleRemove:function(m,n){var l=this;if(!l.disabled){if(Ext.ComponentQuery.is(n,l.selector)){l.onItemRemove(m,n)}if(n.isQueryable){l.onContainerRemove(m,n)}}},onContainerRemove:function(p,s){var v=this,t,q,u,w;if(!s.destroyed&&s.isContainer){v.removeCtListeners(s);if(!s.destroying){t=s.query(v.selector);for(q=0,u=t.length;q<u;++q){w=t[q];v.onItemRemove(w.ownerCt,w)}t=s.query("container");for(q=0,u=t.length;q<u;++q){v.removeCtListeners(t[q])}}}v.invalidateItems(true)},removeCtListeners:function(l){var g=this;l.un({scope:g,add:g.handleAdd,dockedadd:g.handleAdd,remove:g.handleRemove,dockedremove:g.handleRemove})},getItems:function(){var g=this,l=g.items;if(!l){l=g.items=new Ext.util.MixedCollection();l.addAll(g.target.query(g.selector))}return l},invalidateItems:function(l){var m=this,n=m.invalidateHandler;if(l&&n){n.call(m.scope||m,m)}m.items=Ext.destroy(m.items)}},1,0,0,0,0,0,[Ext.container,"Monitor"],0));(Ext.cmd.derive("Ext.form.FieldAncestor",Ext.Mixin,{mixinConfig:{id:"fieldAncestor",after:{initInheritedState:"initFieldInheritedState"},before:{doDestroy:"onBeforeDestroy"}},initFieldAncestor:function(){var f=this;f.monitor=new Ext.container.Monitor({scope:f,selector:"[isFormField]:not([excludeForm])",addHandler:f.onChildFieldAdd,removeHandler:f.onChildFieldRemove});f.initFieldDefaults()},initMonitor:function(){this.monitor.bind(this)},initFieldInheritedState:function(m){var n=m.fieldDefaults,l=this.fieldDefaults;if(l){if(n){m.fieldDefaults=Ext.apply(Ext.Object.chain(n),l)}else{m.fieldDefaults=l}}},onChildFieldAdd:function(g){var l=this;l.mon(g,"errorchange",l.handleFieldErrorChange,l);l.mon(g,"validitychange",l.handleFieldValidityChange,l)},onChildFieldRemove:function(g){var l=this;l.mun(g,"errorchange",l.handleFieldErrorChange,l);l.mun(g,"validitychange",l.handleFieldValidityChange,l)},initFieldDefaults:function(){if(!this.fieldDefaults){this.fieldDefaults={}}},handleFieldValidityChange:function(l,m){var n=this;if(l!==n){n.fireEvent("fieldvaliditychange",n,l,m);n.onFieldValidityChange(l,m)}},handleFieldErrorChange:function(m,n){var l=this;if(m!==l){l.fireEvent("fielderrorchange",l,m,n);l.onFieldErrorChange(m,n)}},onFieldValidityChange:Ext.emptyFn,onFieldErrorChange:Ext.emptyFn,onBeforeDestroy:function(){this.monitor=Ext.destroy(this.monitor)}},0,0,0,0,0,0,[Ext.form,"FieldAncestor"],0));(Ext.cmd.derive("Ext.layout.component.field.FieldContainer",Ext.layout.component.Auto,{type:"fieldcontainer",waitForOuterHeightInDom:true,waitForOuterWidthInDom:true,beginLayout:function(g){var l=this.owner.containerEl;Ext.layout.component.Auto.prototype.beginLayout.call(this,g);g.hasRawContent=true;l.setStyle("width","");l.setStyle("height","");g.containerElContext=g.getEl("containerEl")},calculateOwnerHeightFromContentHeight:function(l,m){var n=Ext.layout.component.Auto.prototype.calculateOwnerHeightFromContentHeight.call(this,l,m);return n+this.getHeightAdjustment()},calculateOwnerWidthFromContentWidth:function(l,m){var n=Ext.layout.component.Auto.prototype.calculateOwnerWidthFromContentWidth.call(this,l,m);return n+this.getWidthAdjustment()},measureContentHeight:function(f){return f.hasDomProp("containerLayoutDone")?Ext.layout.component.Auto.prototype.measureContentHeight.call(this,f):NaN},measureContentWidth:function(f){return f.hasDomProp("containerLayoutDone")?Ext.layout.component.Auto.prototype.measureContentWidth.call(this,f):NaN},publishInnerHeight:function(g,l){l-=this.getHeightAdjustment();g.containerElContext.setHeight(l)},publishInnerWidth:function(g,l){l-=this.getWidthAdjustment();g.containerElContext.setWidth(l)},privates:{getHeightAdjustment:function(){var l=this.owner,g=0;if(l.labelAlign==="top"&&l.hasVisibleLabel()){g+=l.labelEl.getHeight()}if(l.msgTarget==="under"&&l.hasActiveError()){g+=l.errorWrapEl.getHeight()}return g+l.bodyEl.getPadding("tb")},getWidthAdjustment:function(){var l=this.owner,g=0;if(l.labelAlign!=="top"&&l.hasVisibleLabel()){g+=(l.labelWidth+(l.labelPad||0))}if(l.msgTarget==="side"&&l.hasActiveError()){g+=l.errorWrapEl.getWidth()}return g+l.bodyEl.getPadding("lr")}}},0,0,0,0,["layout.fieldcontainer"],0,[Ext.layout.component.field,"FieldContainer"],0));(Ext.cmd.derive("Ext.form.FieldContainer",Ext.container.Container,{componentLayout:"fieldcontainer",componentCls:"x-form-fieldcontainer",shrinkWrap:true,autoEl:{tag:"div",role:"presentation"},childEls:["containerEl"],combineLabels:false,labelConnector:", ",combineErrors:false,maskOnDisable:false,invalidCls:"",fieldSubTpl:['<div id="{id}-containerEl" data-ref="containerEl" class="{containerElCls}"','<tpl if="ariaAttributes">','<tpl foreach="ariaAttributes"> {$}="{.}"</tpl>',"<tpl else>",' role="presentation"',"</tpl>",">","{%this.renderContainer(out,values)%}","</div>"],initComponent:function(){var f=this;f.initLabelable();f.initFieldAncestor();Ext.container.Container.prototype.initComponent.call(this);f.initMonitor()},onAdd:function(l){var g=this;if(l.isLabelable&&Ext.isGecko&&Ext.firefoxVersion<37&&g.layout.type==="absolute"&&!g.hideLabel&&g.labelAlign!=="top"){l.x+=(g.labelWidth+g.labelPad)}Ext.container.Container.prototype.onAdd.apply(this,arguments);if(l.isLabelable&&g.combineLabels){l.oldHideLabel=l.hideLabel;l.hideLabel=true}g.updateLabel()},onRemove:function(n,m){var l=this;Ext.container.Container.prototype.onRemove.apply(this,arguments);if(!m){if(n.isLabelable&&l.combineLabels){n.hideLabel=n.oldHideLabel}l.updateLabel()}},initRenderData:function(){var l=this,g=Ext.container.Container.prototype.initRenderData.call(this);g.containerElCls=l.containerElCls;g=Ext.applyIf(g,l.getLabelableRenderData());if(l.labelAlign==="top"||l.msgTarget==="under"){g.extraFieldBodyCls+=" x-field-container-body-vertical"}g.tipAnchorTarget=l.id+"-containerEl";return g},getFieldLabel:function(){var f=this.fieldLabel||"";if(!f&&this.combineLabels){f=Ext.Array.map(this.query("[isFieldLabelable]"),function(e){return e.getFieldLabel()}).join(this.labelConnector)}return f},getSubTplData:function(){var f=this.initRenderData();Ext.apply(f,this.subTplData);return f},getSubTplMarkup:function(o){var m=this,p=m.lookupTpl("fieldSubTpl"),n;if(!p.renderContent){m.setupRenderTpl(p)}n=p.apply(m.getSubTplData(o));return n},updateLabel:function(){var g=this,l=g.labelEl;if(l){g.setFieldLabel(g.getFieldLabel())}},onFieldErrorChange:function(){if(this.combineErrors){var n=this,m=n.getActiveError(),o=Ext.Array.filter(n.query("[isFormField]"),function(e){return e.hasActiveError()}),p=n.getCombinedErrors(o);if(p){n.setActiveErrors(p)}else{n.unsetActiveError()}if(m!==n.getActiveError()){n.updateLayout()}}},getCombinedErrors:function(x){var C=[],z,B=x.length,u,y,f,A,w,v;for(z=0;z<B;z++){u=x[z];y=u.getActiveErrors();A=y.length;for(f=0;f<A;f++){w=y[f];v=u.getFieldLabel();C.push((v?v+": ":"")+w)}}return C},privates:{applyTargetCls:function(g){var l=this.containerElCls;this.containerElCls=l?l+" "+g:g},getTargetEl:function(){return this.containerEl},initRenderTpl:function(){var f=this;if(!f.hasOwnProperty("renderTpl")){f.renderTpl=f.lookupTpl("labelableRenderTpl")}return Ext.container.Container.prototype.initRenderTpl.call(this)}}},0,["fieldcontainer"],["component","box","container","fieldcontainer"],{component:true,box:true,container:true,fieldcontainer:true},["widget.fieldcontainer"],[["labelable",Ext.form.Labelable],["fieldAncestor",Ext.form.FieldAncestor]],[Ext.form,"FieldContainer"],0));(Ext.cmd.derive("Ext.tip.Tip",Ext.panel.Panel,{alternateClassName:"Ext.Tip",minWidth:40,maxWidth:500,shadow:"sides",constrainPosition:true,autoRender:true,hidden:true,baseCls:"x-tip",focusOnToFront:false,maskOnDisable:false,closeAction:"hide",alwaysFramed:true,frameHeader:false,initComponent:function(){var f=this;f.floating=Ext.apply({},{shadow:f.shadow},f.self.prototype.floating);Ext.panel.Panel.prototype.initComponent.apply(this,arguments);f.constrain=f.constrain||f.constrainPosition},showAt:function(g){var l=this;l.calledFromShowAt=true;Ext.panel.Panel.prototype.showAt.apply(this,arguments);if(l.isVisible()){l.doAlignment(l.getRegion().alignTo({target:new Ext.util.Point(g[0],g[1]),inside:l.constrainPosition?Ext.getBody().getRegion().adjust(5,-5,-5,5):null,align:"tl-tl",overlap:true}))}l.calledFromShowAt=0},doAlignment:function(m){var o=this,n=o.anchorEl,p=m.anchor;o.setPagePosition([m.x,m.y]);if(n){n.removeCls(o.anchorCls);if(p){o.anchorCls="x-tip-anchor-"+p.position;n.addCls(o.anchorCls);n.show();if(p.align&1){n.setTop(m.anchor.y-m.y);n.dom.style.left=""}else{n.setLeft(m.anchor.x-m.x);n.dom.style.top=""}}else{n.hide()}}},privates:{initDraggable:function(){var f=this;f.draggable={el:f.getDragEl(),delegate:f.header.el,constrain:f,constrainTo:f.el.dom.parentNode};Ext.Component.prototype.initDraggable.call(f)}},ghost:undefined,unghost:undefined},0,["tip"],["component","box","container","panel","tip"],{component:true,box:true,container:true,panel:true,tip:true},["widget.tip"],0,[Ext.tip,"Tip",Ext,"Tip"],0));(Ext.cmd.derive("Ext.tip.ToolTip",Ext.tip.Tip,{alternateClassName:"Ext.ToolTip",autoHide:true,showDelay:500,hideDelay:200,dismissDelay:5000,mouseOffset:[15,18],trackMouse:false,anchorToTarget:true,targetCounter:0,quickShowInterval:250,hideAction:"hide",fadeOutDuration:1000,defaultAlign:"bl-tl",ariaRole:"tooltip",alwaysOnTop:true,initComponent:function(){var f=this;Ext.tip.Tip.prototype.initComponent.call(this);f.setTarget(f.target);f.currentTarget=new Ext.dom.Fly()},onRender:function(m,n){var l=this;Ext.tip.Tip.prototype.onRender.apply(this,arguments);l.anchorEl=l.el.createChild({role:"presentation",cls:"x-tip-anchor"})},show:function(){if(!this.currentTarget.dom&&this.target){return this.showBy(this.target)}Ext.tip.Tip.prototype.show.call(this)},setTarget:function(l){var m=this,n;if(m.targetListeners){m.targetListeners.destroy()}if(l){m.target=l=Ext.get(l.el||l);n={mouseover:"onTargetOver",mouseout:"onTargetOut",mousemove:"onMouseMove",tap:"onTargetTap",scope:m,destroyable:true};m.targetListeners=l.on(n)}else{m.target=null}},onMouseMove:function(e){var m=this,n=m.dismissDelay;m.pointerEvent=e;if(m.isVisible()&&m.currentTarget.contains(e.target)){if(n&&m.autoHide!==false){m.clearTimer("dismiss");m.dismissTimer=Ext.defer(m.hide,n,m)}if(m.trackMouse){m.doAlignment(m.getAlignRegion())}}},getAlignRegion:function(){var t=this,p=t.anchorEl,v=t.getAnchorAlign(),u,w,q,s=t.mouseOffset;if(!t.anchorSize){p.addCls("x-tip-anchor-top");p.show();t.anchorSize=new Ext.util.Offset(p.getWidth(),p.getHeight());p.removeCls("x-tip-anchor-top");p.hide()}if((t.anchor||t.align)&&t.anchorToTarget&&!t.trackMouse){q=t.currentTarget.getRegion()}else{q=t.pointerEvent?t.pointerEvent.getPoint().adjust(-s[1],s[0],s[1],-s[0]):new Ext.util.Point();if(!t.anchor){u=true;if(s[0]>0){if(s[1]>0){v="tl-br"}else{v="bl-tr"}}else{if(s[1]>0){v="tr-bl"}else{v="br-tl"}}}}w={align:t.convertPositionSpec(v),axisLock:t.axisLock,target:q,overlap:u,offset:t.targetOffset,inside:t.constrainPosition?Ext.getBody().getRegion().adjust(5,-5,-5,5):null};if(t.anchor){w.anchorSize=t.anchorSize}return t.getRegion().alignTo(w)},fadeOut:function(){var f=this;f.el.fadeOut({duration:f.fadeOutDuration,callback:function(){f.hide();f.el.setOpacity("")}})},getAnchorAlign:function(){switch(this.anchor){case"top":return"tl-bl";case"left":return"tl-tr";case"right":return"tr-tl";default:return this.defaultAlign}},onTargetTap:function(e){if(this.showOnTap&&e.pointerType!=="mouse"){this.onTargetOver(e)}},onTargetOver:function(w){var q=this,s=q.delegate,e=q.currentTarget,u=w.relatedTarget||w.fromElement,v,t=q.hasListeners;if(q.disabled){return}if(s){if(e.contains(w.target)){return}v=w.getTarget(s);if(v&&Ext.fly(v).contains(w.fromElement)){return}}else{if(!q.target.contains(u)){v=q.target.dom}else{return}}if(v){if((t.beforeshow||t.show)&&q.isVisible()){q.hide()}q.triggerElement=v;q.pointerEvent=w;e.attach(v);q.handleTargetOver(v,w)}else{if(e.dom){q.handleTargetOut()}}},handleTargetOver:function(g,l){if(l.pointerType!=="mouse"){this.showFromDelay()}else{this.delayShow()}},delayShow:function(){var f=this;f.clearTimer("hide");if(f.hidden&&!f.showTimer){if(f.delegate&&Ext.Date.getElapsed(f.lastHidden)<f.quickShowInterval){f.showFromDelay()}else{f.showTimer=Ext.defer(f.showFromDelay,f.pointerEvent.pointerType!=="mouse"?0:f.showDelay,f)}}else{if(!f.hidden&&f.autoHide!==false){f.showFromDelay()}}},showFromDelay:function(){var f=this;if(!f.disabled){f.fireEvent("hovertarget",f,f.currentTarget,f.currentTarget.dom);if(f.isVisible()){f.handleAfterShow()}else{f.triggerElement=f.currentTarget.dom;f.fromDelayShow=true;f.show();f.fromDelayShow=false}}},onTargetOut:function(e){if(this.currentTarget.dom&&!this.currentTarget.contains(e.relatedTarget)){this.handleTargetOut()}},handleTargetOut:function(){var f=this;if(f.showTimer){f.clearTimer("show")}if(f.isVisible()&&f.autoHide){f.delayHide()}},delayHide:function(){var f=this;if(!f.hidden&&!f.hideTimer){f.clearTimer("dismiss");f.hideTimer=Ext.defer(f[f.hideAction],f.hideDelay,f)}},hide:function(){var f=this;f.currentTarget.detach();f.clearTimer("dismiss");f.lastHidden=new Date();if(f.anchorEl){f.anchorEl.hide()}Ext.tip.Tip.prototype.hide.apply(this,arguments);f.triggerElement=null},afterShow:function(){Ext.tip.Tip.prototype.afterShow.call(this);this.handleAfterShow()},handleAfterShow:function(){var f=this;f.clearTimers();if(!f.calledFromShowAt){f.doAlignment(f.getAlignRegion())}if(f.dismissDelay&&f.autoHide!==false){f.dismissTimer=Ext.defer(f.hide,f.dismissDelay,f)}},showBy:function(f){this.align=this.defaultAlign;this.currentTarget.attach(Ext.getDom(f.el||f));this.triggerElement=this.currentTarget.dom;this.show()},_timerNames:{},clearTimer:function(s){var q=this,o=q._timerNames,p=o[s]||(o[s]=s+"Timer"),n=q[p];if(n){clearTimeout(n);q[p]=null;if(s==="show"&&q.isHidden()){q.currentTarget.detach()}}},clearTimers:function(){var f=this;f.clearTimer("show");f.clearTimer("dismiss");f.clearTimer("hide")},onShow:function(){var f=this;Ext.tip.Tip.prototype.onShow.call(this);f.mon(Ext.getDoc(),"mousedown",f.onDocMouseDown,f)},onHide:function(){var f=this;Ext.tip.Tip.prototype.onHide.call(this);f.mun(Ext.getDoc(),"mousedown",f.onDocMouseDown,f)},onDocMouseDown:function(e){var l=this;if(!l.closable&&!e.within(l.el.dom)){l.disable();Ext.defer(l.doEnable,100,l)}},doEnable:function(){if(!this.destroyed){this.enable()}},onDisable:function(){Ext.tip.Tip.prototype.onDisable.call(this);this.clearTimers();this.hide()},doDestroy:function(){var f=this;f.clearTimers();Ext.getDoc().un("mousedown",f.onDocMouseDown,f);Ext.destroy(f.anchorEl);Ext.tip.Tip.prototype.doDestroy.call(this)},privates:{clipTo:function(m,l){var n;if(m.isRegion){n=m}else{n=(m.isComponent?m.el:Ext.fly(m)).getConstrainRegion()}Ext.tip.Tip.prototype.clipTo.call(this,n,l);this.anchorEl.clipTo(n,l)}}},0,["tooltip"],["component","box","container","panel","tip","tooltip"],{component:true,box:true,container:true,panel:true,tip:true,tooltip:true},["widget.tooltip"],0,[Ext.tip,"ToolTip",Ext,"ToolTip"],0));(Ext.cmd.derive("Ext.tip.QuickTip",Ext.tip.ToolTip,{alternateClassName:"Ext.QuickTip",interceptTitles:false,title:"&#160;",tagConfig:{namespace:"data-",attribute:"qtip",width:"qwidth",target:"target",title:"qtitle",hide:"hide",cls:"qclass",align:"qalign",anchor:"anchor",showDelay:"qshowDelay",hideAction:"hideAction",anchorTarget:"anchorTarget"},isQuickTip:true,shrinkWrapDock:true,initComponent:function(){var l=this,m=l.tagConfig,n=m.attr||(m.attr=m.namespace+m.attribute);l.delegate=Ext.Function.bind(l.delegate,l);l.target=l.target||Ext.getDoc();l.targets=l.targets||{};Ext.tip.ToolTip.prototype.initComponent.call(this)},setTagConfig:function(f){this.tagConfig=Ext.apply({},f);delete this.tagConfig.attr},text:null,register:function(s){var v=Ext.isArray(s)?s:arguments,q=0,u=v.length,w,t,p;for(;q<u;q++){s=v[q];w=s.target;if(w){if(Ext.isArray(w)){for(t=0,p=w.length;t<p;t++){this.targets[Ext.id(w[t])]=s}}else{this.targets[Ext.id(w)]=s}}}},unregister:function(f){delete this.targets[Ext.id(f)]},cancelShow:function(n){var m=this,l=m.currentTarget;n=Ext.getDom(n);if(m.isVisible()){if(l.dom===n){m.hide()}}else{if(l.dom===n){m.clearTimer("show")}}},delegate:function(o){var p=this,q=p.tagConfig,s=q.attr||(q.attr=q.namespace+q.attribute),n;n=o.getAttribute(s)||(p.interceptTitles&&o.title);return !!n},getTipText:function(o){var p=o.title,q=this.tagConfig,s=q.attr||(q.attr=q.namespace+q.attribute),n;if(this.interceptTitles&&p){o.setAttribute(s,p);o.removeAttribute("title");return p}else{return o.getAttribute(s)}},onTargetOver:function(q){var s=this,w=s.currentTarget,p=q.target,u,v,t;if(!p||p.nodeType!==1||p===document.documentElement||p===document.body){return}s.pointerEvent=q;u=s.targets;for(t in u){if(u.hasOwnProperty(t)){v=u[t];if(v.target&&Ext.fly(v.target).contains(p)&&!Ext.fly(v.target).contains(q.relatedTarget)){p=Ext.getDom(v.target);w.attach(p);s.activeTarget=v;v.el=w;s.anchor=v.anchor;s.activateTarget();return}}}Ext.tip.ToolTip.prototype.onTargetOver.call(this,q)},handleTargetOver:function(w,y){var q=this,x=q.currentTarget,t=q.tagConfig,s=t.namespace,u=q.getTipText(w,y),v;if(u){v=x.getAttribute(s+t.hide);q.activeTarget={el:x,text:u,width:+x.getAttribute(s+t.width)||null,autoHide:v!=="user"&&v!=="false",title:x.getAttribute(s+t.title),cls:x.getAttribute(s+t.cls),align:x.getAttribute(s+t.align),showDelay:x.getAttribute(s+t.showDelay),hideAction:x.getAttribute(s+t.hideAction),alignTarget:x.getAttribute(s+t.anchorTarget)};if(!q.initialConfig.hasOwnProperty("anchor")){q.anchor=x.getAttribute(s+t.anchor)}if(q.anchor&&!q.initialConfig.hasOwnProperty("anchorTarget")){q.alignTarget=q.activeTarget.alignTarget||w}q.activateTarget()}},activateTarget:function(){var n=this,m=n.activeTarget,o=m.showDelay,p=m.hideAction;if(n.isVisible()){n.updateContent();n.handleAfterShow()}else{if(m.showDelay){o=n.showDelay;n.showDelay=parseInt(m.showDelay,10)}n.delayShow();if(m.showDelay){n.showDelay=o}if(!(p=m.hideAction)){delete n.hideAction}else{n.hideAction=p}}},getAnchorAlign:function(){var f=this.activeTarget;return(f&&f.align)||Ext.tip.ToolTip.prototype.getAnchorAlign.call(this)},getAlignRegion:function(){var n=this,m=n.activeTarget,o=n.currentTarget.dom,p;if(m&&m.alignTarget&&n.anchor&&!n.initialConfig.hasOwnProperty("anchorTarget")){n.currentTarget.attach(Ext.getDom(m.alignTarget))}n.anchorToTarget=!!(m.align||n.anchor);p=Ext.tip.ToolTip.prototype.getAlignRegion.call(this);n.currentTarget.attach(o);return p},handleTargetOut:function(s){var o=this,e=o.activeTarget,q=o.autoHide,p=o.hideDelay;if(e&&q!==false){o.autoHide=true;if(e.hideDelay){o.hideDelay=parseInt(e.hideDelay,10)}Ext.tip.ToolTip.prototype.handleTargetOut.call(this,s);o.autoHide=q;o.hideDelay=p}},targetTextEmpty:function(){var p=this,o=p.activeTarget,s=p.tagConfig,q,n;if(o){q=o.el;if(q){n=q.getAttribute(s.namespace+s.attribute);if(!n&&!p.targets[Ext.id(o.el.dom)]){return true}}}return false},show:function(){var g=this,l=g.fromDelayShow;if(l&&g.targetTextEmpty()){g.activeTarget=null;g.currentTarget.detach();return}Ext.tip.ToolTip.prototype.show.apply(this,arguments)},beforeShow:function(){this.updateContent();Ext.tip.ToolTip.prototype.beforeShow.apply(this,arguments)},updateContent:function(){var p=this,o=p.activeTarget,n=p.header,q,s;if(o){p.suspendLayouts();if(o.title){p.setTitle(o.title);n.show()}else{if(n){n.hide()}}p.update(o.text);p.autoHide=o.autoHide;q=o.dismissDelay;p.dismissDelay=Ext.isNumber(q)?q:p.dismissDelay;s=p.lastCls;if(s){p.removeCls(s);delete p.lastCls}s=o.cls;if(s){p.addCls(s);p.lastCls=s}p.setWidth(o.width);p.align=o.align;p.resumeLayouts(true)}},hide:function(){this.activeTarget=null;Ext.tip.ToolTip.prototype.hide.call(this)}},0,["quicktip"],["component","box","container","panel","tip","tooltip","quicktip"],{component:true,box:true,container:true,panel:true,tip:true,tooltip:true,quicktip:true},["widget.quicktip"],0,[Ext.tip,"QuickTip",Ext,"QuickTip"],0));(Ext.cmd.derive("Ext.tip.QuickTipManager",Ext.Base,{singleton:true,alternateClassName:"Ext.QuickTips",disabled:false,init:function(o,s){var p=this;if(!p.tip){if(!Ext.isReady){Ext.onInternalReady(function(){Ext.tip.QuickTipManager.init(o,s)});return false}var t=Ext.apply({disabled:p.disabled,id:"ext-quicktips-tip"},s),q=t.className,u=t.xtype;if(q){delete t.className}else{if(u){q="widget."+u;delete t.xtype}}if(o!==false){t.renderTo=document.body}p.tip=Ext.create(q||"Ext.tip.QuickTip",t);p.tip.destroy=Ext.emptyFn;Ext.quickTipsActive=true}},destroy:function(){var f=this.tip;if(f){delete f.destroy;f.destroy();this.tip=null}Ext.quickTipsActive=false},ddDisable:function(){var l=this,g=l.tip;if(g&&!l.disabled){g.disable()}},ddEnable:function(){var l=this,g=l.tip;if(g&&!l.disabled){g.enable()}},enable:function(){var l=this,g=l.tip;if(g){g.enable()}l.disabled=false},disable:function(){var l=this,g=l.tip;if(g){g.disable()}l.disabled=true},isEnabled:function(){var f=this.tip;return f!==undefined&&!f.disabled},getQuickTip:function(){return this.tip},register:function(){var f=this.tip;f.register.apply(f,arguments)},unregister:function(){var f=this.tip;f.unregister.apply(f,arguments)},tips:function(){var f=this.tip;f.register.apply(f,arguments)}},0,0,0,0,0,0,[Ext.tip,"QuickTipManager",Ext,"QuickTips"],0));(Ext.cmd.derive("Ext.picker.Color",Ext.Component,{alternateClassName:"Ext.ColorPalette",focusable:true,componentCls:"x-color-picker",selectedCls:"x-color-picker-selected",itemCls:"x-color-picker-item",value:null,clickEvent:"click",allowReselect:false,colors:["000000","993300","333300","003300","003366","000080","333399","333333","800000","FF6600","808000","008000","008080","0000FF","666699","808080","FF0000","FF9900","99CC00","339966","33CCCC","3366FF","800080","969696","FF00FF","FFCC00","FFFF00","00FF00","00FFFF","00CCFF","993366","C0C0C0","FF99CC","FFCC99","FFFF99","CCFFCC","CCFFFF","99CCFF","CC99FF","FFFFFF"],colorRe:/(?:^|\s)color-(.{6})(?:\s|$)/,renderTpl:['<tpl for="colors">','<a href="#" role="button" class="color-{.} {parent.itemCls}" hidefocus="on">','<span class="{parent.itemCls}-inner" style="background:#{.}">&#160;</span>',"</a>","</tpl>"],initComponent:function(){var f=this;Ext.Component.prototype.initComponent.apply(this,arguments);if(f.handler){f.on("select",f.handler,f.scope,true)}},initRenderData:function(){var f=this;return Ext.apply(Ext.Component.prototype.initRenderData.call(this),{itemCls:f.itemCls,colors:f.colors})},onRender:function(){var g=this,l=g.clickEvent;Ext.Component.prototype.onRender.apply(this,arguments);g.mon(g.el,l,g.handleClick,g,{delegate:"a"});if(l!=="click"){g.mon(g.el,"click",Ext.emptyFn,g,{delegate:"a",stopEvent:true})}},afterRender:function(){var l=this,g;Ext.Component.prototype.afterRender.apply(this,arguments);if(l.value){g=l.value;l.value=null;l.select(g,true)}},handleClick:function(l){var m=this,n;l.stopEvent();if(!m.disabled){n=l.currentTarget.className.match(m.colorRe)[1];m.select(n.toUpperCase())}},select:function(t,u){var p=this,v=p.selectedCls,w=p.value,s,q;t=t.replace("#","");if(!p.rendered){p.value=t;return}if(t!==w||p.allowReselect){s=p.el;if(p.value){q=s.down("a.color-"+w,true);Ext.fly(q).removeCls(v)}q=s.down("a.color-"+t,true);Ext.fly(q).addCls(v);p.value=t;if(u!==true){p.fireEvent("select",p,t)}}},clear:function(){var m=this,l=m.value,n;if(l&&m.rendered){n=m.el.down("a.color-"+l,true);Ext.fly(n).removeCls(m.selectedCls)}m.value=null},getValue:function(){return this.value||null}},0,["colorpicker"],["component","box","colorpicker"],{component:true,box:true,colorpicker:true},["widget.colorpicker"],0,[Ext.picker,"Color",Ext,"ColorPalette"],0));(Ext.cmd.derive("Ext.layout.component.field.HtmlEditor",Ext.layout.component.field.FieldContainer,{type:"htmleditor",naturalHeight:150,naturalWidth:300,beginLayout:function(m){var n=this.owner,l;if(Ext.isGecko){l=n.textareaEl.dom;this.lastValue=l.value;l.value=""}Ext.layout.component.field.FieldContainer.prototype.beginLayout.apply(this,arguments);m.toolbarContext=m.context.getCmp(n.toolbar);m.inputCmpContext=m.context.getCmp(n.inputCmp);m.bodyCellContext=m.getEl("bodyEl");m.textAreaContext=m.getEl("textareaEl");m.iframeContext=m.getEl("iframeEl")},beginLayoutCycle:function(w){var x=this,s=w.widthModel,t=w.heightModel,u=x.owner,y=u.iframeEl,q=u.textareaEl,v=(t.natural||t.shrinkWrap)?x.naturalHeight:"";Ext.layout.component.field.FieldContainer.prototype.beginLayoutCycle.apply(this,arguments);if(s.shrinkWrap){y.setStyle("width","");q.setStyle("width","")}else{if(s.natural){w.bodyCellContext.setWidth(x.naturalWidth)}}y.setStyle("height",v);q.setStyle("height",v)},finishedLayout:function(){var f=this.owner;Ext.layout.component.field.FieldContainer.prototype.finishedLayout.apply(this,arguments);if(Ext.isGecko){f.textareaEl.dom.value=this.lastValue}}},0,0,0,0,["layout.htmleditor"],0,[Ext.layout.component.field,"HtmlEditor"],0));(Ext.cmd.derive("Ext.toolbar.Separator",Ext.toolbar.Item,{alternateClassName:"Ext.Toolbar.Separator",baseCls:"x-toolbar-separator",ariaRole:"separator"},0,["tbseparator"],["component","box","tbitem","tbseparator"],{component:true,box:true,tbitem:true,tbseparator:true},["widget.tbseparator"],0,[Ext.toolbar,"Separator",Ext.Toolbar,"Separator"],0));(Ext.cmd.derive("Ext.layout.container.boxOverflow.Menu",Ext.layout.container.boxOverflow.None,{alternateClassName:"Ext.layout.boxOverflow.Menu",noItemsMenuText:'<div class="x-toolbar-no-items" role="menuitem">(None)</div>',menuCls:"x-box-menu",constructor:function(l){var g=this;Ext.layout.container.boxOverflow.None.prototype.constructor.call(this,l);g.menuItems=[]},beginLayout:function(f){Ext.layout.container.boxOverflow.None.prototype.beginLayout.call(this,f);this.clearOverflow(f)},beginLayoutCycle:function(g,l){Ext.layout.container.boxOverflow.None.prototype.beginLayoutCycle.call(this,g,l);if(!l){this.clearOverflow(g);this.layout.cacheChildItems(g)}},onRemove:function(f){Ext.Array.remove(this.menuItems,f)},clearItem:function(l){var g=l.menu;if(l.isButton&&g){l.setMenu(g,false)}},getSuffixConfig:function(){var m=this,n=m.layout,p=n.owner,o=p.id;m.menu=new Ext.menu.Menu({listeners:{scope:m,beforeshow:m.beforeMenuShow}});m.menuTrigger=new Ext.button.Button({id:o+"-menu-trigger",cls:m.menuCls+"-after x-toolbar-item",plain:p.usePlainButtons,ownerCt:p,ownerLayout:n,iconCls:"x-"+m.getOwnerType(p)+"-more-icon",ui:p.defaultButtonUI||"default",menu:m.menu,showEmptyMenu:true,getSplitCls:function(){return""}});return m.menuTrigger.getRenderTree()},getOverflowCls:function(f){return this.menuCls+"-body-"+f},handleOverflow:function(l){var m=this,n=m.layout;m.showTrigger(l);if(n.direction!=="vertical"){m.menuTrigger.setLocalY((l.state.boxPlan.maxSize-m.menuTrigger[n.names.getHeight]())/2)}return{reservedSpace:m.triggerTotalWidth}},captureChildElements:function(){var n=this,l=n.menuTrigger,m=n.layout.names;if(l.rendering){l.finishRender();n.triggerTotalWidth=l[m.getWidth]()+l.el.getMargin(m.parallelMargins)}},clearOverflow:function(x){var y=this,u=y.menuItems,q=u.length,w=y.layout.owner,v=w._asLayoutRoot,s,t;w.suspendLayouts();y.captureChildElements();y.hideTrigger();w.resumeLayouts();for(t=0;t<q;t++){s=u[t];s.suspendLayouts();s.show();y.clearItem(s);s.resumeLayouts(v)}u.length=0},showTrigger:function(F){var M=this,Q=M.layout,H=Q.owner,N=Q.names,J=N.x,D=N.width,L=F.state.boxPlan,G=L.targetSize[D],B=F.childItems,C=M.menuTrigger,I=M.menuItems,K,A,E,O,P;C.suspendLayouts();C.show();C.resumeLayouts(M._asLayoutRoot);G-=M.triggerTotalWidth;H.suspendLayouts();for(E=0,P=I.length;E<P;++E){M.clearItem(I[E])}I.length=0;for(E=0,P=B.length;E<P;E++){K=B[E];O=K.props;if(O[J]+O[D]>G){A=K.target;M.menuItems.push(A);A.hide()}}H.resumeLayouts()},hideTrigger:function(){var f=this.menuTrigger;if(f){f.hide()}},beforeMenuShow:function(w){var x=this,u=x.menuItems,s=0,v=u.length,y,q,t=function(e,f){return e.isXType("buttongroup")&&!(f instanceof Ext.toolbar.Separator)};w.suspendLayouts();w.removeAll(false);for(;s<v;s++){y=u[s];if(!s&&(y instanceof Ext.toolbar.Separator)){continue}if(q&&(t(y,q)||t(q,y))){w.add("-")}x.addComponentToMenu(w,y);q=y}if(w.items.length<1){w.add(x.noItemsMenuText)}w.resumeLayouts()},createMenuConfig:function(n,p){var o=Ext.apply({},n.initialConfig),m=n.toggleGroup;Ext.copy(o,n,["iconCls","icon","itemId","disabled","handler","scope","menu","tabIndex"]);Ext.applyIf(o,{hideOnClick:p,destroyMenu:false,listeners:null});o.text=n.overflowText||n.text;o.masterComponent=n;if(n.isFormField){o.value=n.getValue();if(n instanceof Ext.form.field.Checkbox){o={xtype:"menucheckitem",group:n.isRadio?n.name+"_clone":undefined,text:n.boxLabel||n.fieldLabel,name:n.name,masterComponent:n,checked:n.getValue(),hideOnClick:false,checkChangeDisabled:true}}o.listeners={change:function(f,g,e){f.masterComponent.setValue(g)}};n.on("change",function(f,g,e){f.overflowClone.setValue(g)})}else{if(m||n.enableToggle){Ext.apply(o,{hideOnClick:false,group:m,checked:n.pressed,handler:function(e,f){e.masterComponent.onClick(f)}})}}if(n.isButton&&!n.changeListenersAdded){n.on({textchange:this.onButtonAttrChange,iconchange:this.onButtonAttrChange,toggle:this.onButtonToggle});n.changeListenersAdded=true}n.on({enable:this.onComponentStatusChange,disable:this.onComponentStatusChange});delete o.margin;delete o.ownerCt;delete o.xtype;delete o.id;delete o.itemId;return o},onButtonAttrChange:function(l){var g=l.overflowClone;g.suspendLayouts();g.setText(l.text);g.setIcon(l.icon);g.setIconCls(l.iconCls);g.resumeLayouts(true)},onButtonToggle:function(l,g){if(l.overflowClone.checked!==g){l.overflowClone.setChecked(g)}},onComponentStatusChange:function(l){var g=l.overflowClone;if(g){g.setDisabled(l.disabled)}},addComponentToMenu:function(u,q){var o=this,p,s,t;if(q instanceof Ext.toolbar.Fill){return}else{if(q instanceof Ext.toolbar.Separator){u.add("-")}else{if(q.overflowClone){u.add(q.overflowClone)}else{if(q.isComponent){if(q.isXType("splitbutton")){q.overflowClone=u.add(o.createMenuConfig(q,true))}else{if(q.isXType("button")){q.overflowClone=u.add(o.createMenuConfig(q,!q.menu))}else{if(q.isXType("buttongroup")){s=q.items.items;t=s.length;for(p=0;p<t;p++){o.addComponentToMenu(u,s[p])}}else{if(q instanceof Ext.form.field.Checkbox){q.overflowClone=u.add(o.createMenuConfig(q));Ext.apply(q.overflowClone,{getValue:function(){return q.overflowClone.checked},setValue:function(){q.overflowClone.setChecked(q.getValue())}});q.overflowClone.on("click",function(e){e.setChecked(true);e.fireEvent("change",e,e.checked)})}else{q.overflowClone=u.add(Ext.create(Ext.getClassName(q),o.createMenuConfig(q)))}}}}}}}}},destroy:function(){Ext.destroy(this.menu,this.menuTrigger);this.callParent()}},1,0,0,0,["box.overflow.Menu","box.overflow.menu"],0,[Ext.layout.container.boxOverflow,"Menu",Ext.layout.boxOverflow,"Menu"],0));(Ext.cmd.derive("Ext.form.field.HtmlEditor",Ext.form.FieldContainer,{alternateClassName:"Ext.form.HtmlEditor",focusable:true,componentLayout:"htmleditor",textareaCls:"x-htmleditor-textarea",componentTpl:["{beforeTextAreaTpl}",'<textarea id="{id}-textareaEl" data-ref="textareaEl" name="{name}" tabindex="-1" {inputAttrTpl}',' class="{textareaCls}" autocomplete="off">',"{[Ext.util.Format.htmlEncode(values.value)]}","</textarea>","{afterTextAreaTpl}","{beforeIFrameTpl}",'<iframe id="{id}-iframeEl" data-ref="iframeEl" name="{iframeName}" frameBorder="0" {iframeAttrTpl}',' src="{iframeSrc}" class="{iframeCls}"></iframe>',"{afterIFrameTpl}",{disableFormats:true}],stretchInputElFixed:true,subTplInsertions:["beforeTextAreaTpl","afterTextAreaTpl","beforeIFrameTpl","afterIFrameTpl","iframeAttrTpl","inputAttrTpl"],enableFormat:true,enableFontSize:true,enableColors:true,enableAlignments:true,enableLists:true,enableSourceEdit:true,enableLinks:true,enableFont:true,createLinkText:"Please enter the URL for the link:",defaultLinkValue:"http://",fontFamilies:["Arial","Courier New","Tahoma","Times New Roman","Verdana"],defaultValue:Ext.isOpera?"&#160;":"&#8203;",extraFieldBodyCls:"x-html-editor-wrap",defaultButtonUI:"default-toolbar",buttonDefaults:null,initialized:false,activated:false,sourceEditMode:false,iframePad:3,hideMode:"offsets",maskOnDisable:true,containerElCls:"x-html-editor-container",reStripQuotes:/^['"]*|['"]*$/g,textAlignRE:/text-align:(.*?);/i,safariNonsenseRE:/\sclass="(?:Apple-style-span|Apple-tab-span|khtml-block-placeholder)"/gi,nonDigitsRE:/\D/g,initComponent:function(){var f=this;f.items=[f.createToolbar(),f.createInputCmp()];f.layout={type:"vbox",align:"stretch"};if(f.value==null){f.value=""}Ext.form.FieldContainer.prototype.initComponent.apply(this,arguments);f.initField()},createInputCmp:function(){this.inputCmp=Ext.widget(this.getInputCmpCfg());return this.inputCmp},getInputCmpCfg:function(){var n=this,l=n.id+"-inputCmp",m={id:l,name:n.name,textareaCls:n.textareaCls+" x-hidden",value:n.value,iframeName:Ext.id(),iframeSrc:Ext.SSL_SECURE_URL,iframeCls:"x-htmleditor-iframe"};n.getInsertionRenderData(m,n.subTplInsertions);return{flex:1,xtype:"component",tpl:n.lookupTpl("componentTpl"),childEls:["iframeEl","textareaEl"],id:l,cls:"x-html-editor-input",data:m}},createToolbar:function(){this.toolbar=Ext.widget(this.getToolbarCfg());return this.toolbar},getToolbarCfg:function(){var x=this,u=[],q,w=Ext.quickTipsActive&&Ext.tip.QuickTipManager.isEnabled(),s="x-",v,y;function t(e,g,f){return Ext.merge({itemId:e,cls:s+"btn-icon",iconCls:s+"edit-"+e,enableToggle:g!==false,scope:x,handler:f||x.relayBtnCmd,clickEvent:"mousedown",tooltip:w?x.buttonTips[e]:y,overflowText:x.buttonTips[e].title||y,tabIndex:-1},x.buttonDefaults)}if(x.enableFont&&!Ext.isSafari2){v=Ext.widget("component",{itemId:"fontSelect",renderTpl:['<select id="{id}-selectEl" data-ref="selectEl" class="'+s+'font-select">',"</select>"],childEls:["selectEl"],afterRender:function(){x.fontSelect=this.selectEl;Ext.Component.prototype.afterRender.apply(this,arguments)},onDisable:function(){var e=this.selectEl;if(e){e.dom.disabled=true}Ext.Component.prototype.onDisable.apply(this,arguments)},onEnable:function(){var e=this.selectEl;if(e){e.dom.disabled=false}Ext.Component.prototype.onEnable.apply(this,arguments)},listeners:{change:function(){x.win.focus();x.relayCmd("fontName",x.fontSelect.dom.value);x.deferFocus()},element:"selectEl"}});u.push(v,"-")}if(x.enableFormat){u.push(t("bold"),t("italic"),t("underline"))}if(x.enableFontSize){u.push("-",t("increasefontsize",false,x.adjustFont),t("decreasefontsize",false,x.adjustFont))}if(x.enableColors){u.push("-",Ext.merge({itemId:"forecolor",cls:s+"btn-icon",iconCls:s+"edit-forecolor",overflowText:x.buttonTips.forecolor.title,tooltip:w?x.buttonTips.forecolor||y:y,tabIndex:-1,menu:Ext.widget("menu",{plain:true,items:[{xtype:"colorpicker",allowReselect:true,focus:Ext.emptyFn,value:"000000",plain:true,clickEvent:"mousedown",handler:function(e,f){x.relayCmd("forecolor",Ext.isWebKit||Ext.isIE?"#"+f:f);this.up("menu").hide()}}]})},x.buttonDefaults),Ext.merge({itemId:"backcolor",cls:s+"btn-icon",iconCls:s+"edit-backcolor",overflowText:x.buttonTips.backcolor.title,tooltip:w?x.buttonTips.backcolor||y:y,tabIndex:-1,menu:Ext.widget("menu",{plain:true,items:[{xtype:"colorpicker",focus:Ext.emptyFn,value:"FFFFFF",plain:true,allowReselect:true,clickEvent:"mousedown",handler:function(e,f){if(Ext.isGecko){x.execCmd("useCSS",false);x.execCmd("hilitecolor","#"+f);x.execCmd("useCSS",true);x.deferFocus()}else{x.relayCmd(Ext.isOpera?"hilitecolor":"backcolor",Ext.isWebKit||Ext.isIE||Ext.isOpera?"#"+f:f)}this.up("menu").hide()}}]})},x.buttonDefaults))}if(x.enableAlignments){u.push("-",t("justifyleft"),t("justifycenter"),t("justifyright"))}if(!Ext.isSafari2){if(x.enableLinks){u.push("-",t("createlink",false,x.createLink))}if(x.enableLists){u.push("-",t("insertorderedlist"),t("insertunorderedlist"))}if(x.enableSourceEdit){u.push("-",t("sourceedit",true,function(){x.toggleSourceEdit(!x.sourceEditMode)}))}}for(q=0;q<u.length;q++){if(u[q].itemId!=="sourceedit"){u[q].disabled=true}}return{xtype:"toolbar",defaultButtonUI:x.defaultButtonUI,cls:"x-html-editor-tb",enableOverflow:true,items:u,listeners:{click:function(e){e.preventDefault()},element:"el"}}},getMaskTarget:function(){return Ext.isGecko?this.inputCmp.el:this.bodyEl},setReadOnly:function(n){var o=this,p=o.textareaEl,q=o.iframeEl,s;o.readOnly=n;if(p){p.dom.readOnly=n}if(o.initialized){s=o.getEditorBody();if(Ext.isIE){q.setDisplayed(false);s.contentEditable=!n;q.setDisplayed(true)}else{o.setDesignMode(!n)}if(s){s.style.cursor=n?"default":"text"}o.disableItems(n)}},getDocMarkup:function(){var g=this,l=g.iframeEl.getHeight()-g.iframePad*2;return Ext.String.format('<!DOCTYPE html><html><head><style type="text/css">'+(Ext.isOpera||Ext.isIE?"p{margin:0;}":"")+"body{border:0;margin:0;padding:{0}px;direction:"+(g.rtl?"rtl;":"ltr;")+(Ext.isIE8?Ext.emptyString:"min-")+"height:{1}px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;cursor:text;background-color:white;"+(Ext.isIE?"":"font-size:12px;font-family:{2}")+"}</style></head><body></body></html>",g.iframePad,l,g.defaultFont)},getEditorBody:function(){var f=this.getDoc();return f.body||f.documentElement},getDoc:function(){return this.iframeEl.dom.contentDocument||this.getWin().document},getWin:function(){return this.iframeEl.dom.contentWindow||window.frames[this.iframeEl.dom.name]},initDefaultFont:function(){var u=this,A=0,t,z,s,w,x,v,y;if(!u.defaultFont){z=u.textareaEl.getStyle("font-family");z=Ext.String.capitalize(z.split(",")[0]);t=Ext.Array.clone(u.fontFamilies);Ext.Array.include(t,z);t.sort();u.defaultFont=z;s=u.down("#fontSelect").selectEl.dom;for(x=0,v=t.length;x<v;++x){z=t[x];y=z.toLowerCase();w=new Option(z,y);if(z===u.defaultFont){A=x}w.style.fontFamily=y;if(Ext.isIE){s.add(w)}else{s.options.add(w)}}s.options[A].selected=true}},isEqual:function(g,l){return this.isEqualAsString(g,l)},afterRender:function(){var g=this,l=g.inputCmp;Ext.form.FieldContainer.prototype.afterRender.apply(this,arguments);g.iframeEl=l.iframeEl;g.textareaEl=l.textareaEl;g.inputEl=g.iframeEl;if(g.enableFont){g.initDefaultFont()}g.monitorTask=Ext.TaskManager.start({run:g.checkDesignMode,scope:g,interval:100})},initFrameDoc:function(){var m=this,l,n;Ext.TaskManager.stop(m.monitorTask);l=m.getDoc();m.win=m.getWin();l.open();l.write(m.getDocMarkup());l.close();n={run:function(){var e=m.getDoc();if(e.body||e.readyState==="complete"){Ext.TaskManager.stop(n);m.setDesignMode(true);Ext.defer(m.initEditor,10,m)}},interval:10,duration:10000,scope:m};Ext.TaskManager.start(n)},checkDesignMode:function(){var l=this,g=l.getDoc();if(g&&(!g.editorInitialized||l.getDesignMode()!=="on")){l.initFrameDoc()}},setDesignMode:function(l){var n=this,m=n.getDoc();if(m){if(n.readOnly){l=false}m.designMode=(/on|true/i).test(String(l).toLowerCase())?"on":"off"}},getDesignMode:function(){var f=this.getDoc();return !f?"":String(f.designMode).toLowerCase()},disableItems:function(o){var q=this.getToolbar().items.items,p,s=q.length,n;for(p=0;p<s;p++){n=q[p];if(n.getItemId()!=="sourceedit"){n.setDisabled(o)}}},toggleSourceEdit:function(s){var u=this,p=u.iframeEl,t=u.textareaEl,o="x-hidden",q=u.getToolbar().getComponent("sourceedit");if(!Ext.isBoolean(s)){s=!u.sourceEditMode}u.sourceEditMode=s;if(q.pressed!==s){q.toggle(s)}if(s){u.disableItems(true);u.syncValue();p.addCls(o);t.removeCls(o);t.dom.removeAttribute("tabIndex");t.focus();u.inputEl=t}else{if(u.initialized){u.disableItems(u.readOnly)}u.pushValue();p.removeCls(o);t.addCls(o);t.dom.setAttribute("tabIndex",-1);u.deferFocus();u.inputEl=p}u.fireEvent("editmodechange",u,s);u.updateLayout()},createLink:function(){var f=prompt(this.createLinkText,this.defaultLinkValue);if(f&&f!=="http://"){this.relayCmd("createlink",f)}},clearInvalid:Ext.emptyFn,setValue:function(l){var m=this,n=m.textareaEl;if(l===null||l===undefined){l=""}if(m.value!==l){if(n){n.dom.value=l}m.pushValue();if(!m.rendered&&m.inputCmp){m.inputCmp.data.value=l}m.mixins.field.setValue.call(m,l)}return m},cleanHtml:function(f){f=String(f);if(Ext.isWebKit){f=f.replace(this.safariNonsenseRE,"")}if(f.charCodeAt(0)===parseInt(this.defaultValue.replace(this.nonDigitsRE,""),10)){f=f.substring(1)}return f},syncValue:function(){var w=this,t,v,q,u,s,p;if(w.initialized){t=w.getEditorBody();q=t.innerHTML;p=w.textareaEl.dom;if(Ext.isWebKit){u=t.getAttribute("style");s=u.match(w.textAlignRE);if(s&&s[1]){q='<div style="'+s[0]+'">'+q+"</div>"}}q=w.cleanHtml(q);if(w.fireEvent("beforesync",w,q)!==false){if(Ext.isGecko&&p.value===""&&q==="<br>"){q=""}if(p.value!==q){p.value=q;v=true}w.fireEvent("sync",w,q);if(v){w.checkChange()}}}},getValue:function(){var l=this,g;if(!l.sourceEditMode){l.syncValue()}g=l.rendered?l.textareaEl.dom.value:l.value;l.value=g;return g},pushValue:function(){var g=this,l;if(g.initialized){l=g.textareaEl.dom.value||"";if(!g.activated&&l.length<1){l=g.defaultValue}if(g.fireEvent("beforepush",g,l)!==false){g.getEditorBody().innerHTML=l;if(Ext.isGecko){g.setDesignMode(false);g.setDesignMode(true)}g.fireEvent("push",g,l)}}},focus:function(o,q){var p=this,n,s;if(q){if(!p.focusTask){p.focusTask=new Ext.util.DelayedTask(p.focus)}p.focusTask.delay(Ext.isNumber(q)?q:10,null,p,[o,false])}else{if(o){if(p.textareaEl&&p.textareaEl.dom){n=p.textareaEl.dom.value}if(n&&n.length){p.execCmd("selectall",true)}}s=p.getFocusEl();if(s&&s.focus){s.focus()}}return p},initEditor:function(){var e=this,q,t,v,u,s;if(e.destroying||e.destroyed){return}q=e.getEditorBody();if(!q){setTimeout(function(){e.initEditor()},10);return}t=e.textareaEl.getStyle(["font-size","font-family","background-image","background-repeat","background-color","color"]);t["background-attachment"]="fixed";q.bgProperties="fixed";Ext.DomHelper.applyStyles(q,t);v=e.getDoc();u=Ext.get(v);if(u){try{u.clearListeners()}catch(w){}s=e.onEditorEvent.bind(e);u.on({mousedown:s,dblclick:s,click:s,keyup:s,delegated:false,buffer:100});s=e.onRelayedEvent;u.on({mousedown:s,mousemove:s,mouseup:s,click:s,dblclick:s,delegated:false,scope:e});if(Ext.isGecko){u.on("keypress",e.applyCommand,e)}if(e.fixKeys){u.on("keydown",e.fixKeys,e,{delegated:false})}if(e.fixKeysAfter){u.on("keyup",e.fixKeysAfter,e,{delegated:false})}if(Ext.isIE9){Ext.get(v.documentElement).on("focus",e.focus,e)}if(Ext.isIE8){u.on("focusout",function(){e.savedSelection=v.selection.type!=="None"?v.selection.createRange():null},e);u.on("focusin",function(){if(e.savedSelection){e.savedSelection.select()}},e)}Ext.getWin().on("unload",e.destroyEditor,e);v.editorInitialized=true;e.initialized=true;e.pushValue();e.setReadOnly(e.readOnly);e.fireEvent("initialize",e)}},destroyEditor:function(){var q=this,e=q.monitorTask,o,s;if(e){Ext.TaskManager.stop(e)}if(q.rendered){Ext.getWin().un("unload",q.destroyEditor,q);o=q.getDoc();if(o){Ext.get(o).destroy();if(o.hasOwnProperty){for(s in o){try{if(o.hasOwnProperty(s)){delete o[s]}}catch(p){}}}}delete q.iframeEl;delete q.textareaEl;delete q.toolbar;delete q.inputCmp}},doDestroy:function(){this.destroyEditor();Ext.form.FieldContainer.prototype.doDestroy.call(this)},onRelayedEvent:function(p){var q=this.iframeEl,o=Ext.fly(q).getTrueXY(),n=p.getXY(),s=p.getXY();p.xy=[o[0]+s[0],o[1]+s[1]];p.injectEvent(q);p.xy=n},onFirstFocus:function(){var n=this,o,p;n.activated=true;n.disableItems(n.readOnly);if(Ext.isGecko){n.win.focus();o=n.win.getSelection();if(o.focusNode&&!n.getValue().length){p=o.getRangeAt(0);p.selectNodeContents(n.getEditorBody());p.collapse(true);n.deferFocus()}try{n.execCmd("useCSS",true);n.execCmd("styleWithCSS",false)}catch(e){}}n.fireEvent("activate",n)},adjustFont:function(o){var n=o.getItemId()==="increasefontsize"?1:-1,p=this.getDoc().queryCommandValue("FontSize")||"2",s=Ext.isString(p)&&p.indexOf("px")!==-1,q;p=parseInt(p,10);if(s){if(p<=10){p=1+n}else{if(p<=13){p=2+n}else{if(p<=16){p=3+n}else{if(p<=18){p=4+n}else{if(p<=24){p=5+n}else{p=6+n}}}}}p=Ext.Number.constrain(p,1,6)}else{q=Ext.isSafari;if(q){n*=2}p=Math.max(1,p+n)+(q?"px":0)}this.relayCmd("FontSize",p)},onEditorEvent:function(){this.updateToolbar()},updateToolbar:function(){var l=this,w,y,x,C,z,v,A,u;if(l.readOnly){return}if(!l.activated){l.onFirstFocus();return}x=l.getToolbar().items.map;C=l.getDoc();if(l.enableFont&&!Ext.isSafari2){v=C.queryCommandValue("fontName");z=(v?v.split(",")[0].replace(l.reStripQuotes,""):l.defaultFont).toLowerCase();A=l.fontSelect.dom;if(z!==A.value||z!==v){A.value=z}}function B(){var e;for(w=0,y=arguments.length,z;w<y;w++){z=arguments[w];try{e=C.queryCommandState(z)}catch(f){e=false}x[z].toggle(e)}}if(l.enableFormat){B("bold","italic","underline")}if(l.enableAlignments){B("justifyleft","justifycenter","justifyright")}if(!Ext.isSafari2&&l.enableLists){B("insertorderedlist","insertunorderedlist")}u=l.toolbar.query("menu");for(w=0;w<u.length;w++){u[w].hide()}l.syncValue()},relayBtnCmd:function(f){this.relayCmd(f.getItemId())},relayCmd:function(g,l){Ext.defer(function(){var e=this;if(!this.destroyed){e.win.focus();e.execCmd(g,l);e.updateToolbar()}},10,this)},execCmd:function(n,o){var p=this,m=p.getDoc();m.execCommand(n,false,(o===undefined?null:o));p.syncValue()},applyCommand:function(n){if(n.ctrlKey){var p=this,e=n.getCharCode(),o;if(e>0){e=String.fromCharCode(e);switch(e){case"b":o="bold";break;case"i":o="italic";break;case"u":o="underline";break}if(o){p.win.focus();p.execCmd(o);p.deferFocus();n.preventDefault()}}}},insertAtCursor:function(E){var v=this,w=v.getWin(),u=v.getDoc(),A,x,z,D,y,B,C;if(v.activated){w.focus();if(w.getSelection){A=w.getSelection();if(A.getRangeAt&&A.rangeCount){x=A.getRangeAt(0);x.deleteContents();z=u.createElement("div");z.innerHTML=E;D=u.createDocumentFragment();while((y=z.firstChild)){B=D.appendChild(y)}C=D.firstChild;x.insertNode(D);if(B){x=x.cloneRange();x.setStartAfter(B);x.collapse(true);A.removeAllRanges();A.addRange(x)}}}else{if(u.selection&&A.type!=="Control"){A=u.selection;x=A.createRange();x.collapse(true);A.createRange().pasteHTML(E)}}v.deferFocus()}},fixKeys:(function(){var f;if(Ext.isIE10m){return function(v){var q=this,s=v.getKey(),w=q.getDoc(),u=q.readOnly,t,e;if(s===v.TAB){v.stopEvent();if(!u){t=w.selection.createRange();if(t){if(t.collapse){t.collapse(true);t.pasteHTML("&#160;&#160;&#160;&#160;")}q.deferFocus()}}}}}if(Ext.isOpera){return function(n){var o=this,p=n.getKey(),e=o.readOnly;if(p===n.TAB){n.stopEvent();if(!e){o.win.focus();o.execCmd("InsertHTML","&#160;&#160;&#160;&#160;");o.deferFocus()}}}}return null}()),fixKeysAfter:(function(){if(Ext.isIE){return function(e){var q=this,s=e.getKey(),p=q.getDoc(),t=q.readOnly,u;if(!t&&(s===e.BACKSPACE||s===e.DELETE)){u=p.body.innerHTML;if(u==="<p>&nbsp;</p>"||u==="<P>&nbsp;</P>"){p.body.innerHTML=""}}}}return null}()),getToolbar:function(){return this.toolbar},buttonTips:{bold:{title:"Bold (Ctrl+B)",text:"Make the selected text bold.",cls:"x-html-editor-tip"},italic:{title:"Italic (Ctrl+I)",text:"Make the selected text italic.",cls:"x-html-editor-tip"},underline:{title:"Underline (Ctrl+U)",text:"Underline the selected text.",cls:"x-html-editor-tip"},increasefontsize:{title:"Grow Text",text:"Increase the font size.",cls:"x-html-editor-tip"},decreasefontsize:{title:"Shrink Text",text:"Decrease the font size.",cls:"x-html-editor-tip"},backcolor:{title:"Text Highlight Color",text:"Change the background color of the selected text.",cls:"x-html-editor-tip"},forecolor:{title:"Font Color",text:"Change the color of the selected text.",cls:"x-html-editor-tip"},justifyleft:{title:"Align Text Left",text:"Align text to the left.",cls:"x-html-editor-tip"},justifycenter:{title:"Center Text",text:"Center text in the editor.",cls:"x-html-editor-tip"},justifyright:{title:"Align Text Right",text:"Align text to the right.",cls:"x-html-editor-tip"},insertunorderedlist:{title:"Bullet List",text:"Start a bulleted list.",cls:"x-html-editor-tip"},insertorderedlist:{title:"Numbered List",text:"Start a numbered list.",cls:"x-html-editor-tip"},createlink:{title:"Hyperlink",text:"Make the selected text a hyperlink.",cls:"x-html-editor-tip"},sourceedit:{title:"Source Edit",text:"Switch to source editing mode.",cls:"x-html-editor-tip"}},privates:{deferFocus:function(){this.focus(false,true)},getFocusEl:function(){return this.sourceEditMode?this.textareaEl:this.iframeEl}}},0,["htmleditor"],["component","box","container","fieldcontainer","htmleditor"],{component:true,box:true,container:true,fieldcontainer:true,htmleditor:true},["widget.htmleditor"],[["field",Ext.form.field.Field]],[Ext.form.field,"HtmlEditor",Ext.form,"HtmlEditor"],0));Ext.define("Ext.theme.neptune.form.field.HtmlEditor",{override:"Ext.form.field.HtmlEditor",defaultButtonUI:"plain-toolbar"});Ext.onReady(function(){var l=Ext.ClassManager,g=Ext.Function.bind(l.get,l);if(Ext.Updater){Ext.Updater.defaults.indicatorText='<div class="loading-indicator">Pemuatan...</div>'}if(Ext.Date){Ext.Date.monthNames=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"];Ext.Date.getShortMonthName=function(e){return Ext.Date.monthNames[e].substring(0,3)};Ext.Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,Mei:4,Jun:5,Jul:6,Agu:7,Sep:8,Okt:9,Nov:10,Des:11};Ext.Date.getMonthNumber=function(e){return Ext.Date.monthNumbers[e.substring(0,1).toUpperCase()+e.substring(1,3).toLowerCase()]};Ext.Date.dayNames=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"];Ext.Date.getShortDayName=function(e){return Ext.Date.dayNames[e].substring(0,3)}}if(Ext.MessageBox){Ext.MessageBox.buttonText={ok:"OK",cancel:"Batal",yes:"Ya",no:"Tidak"}}if(Ext.util&&Ext.util.Format){Ext.apply(Ext.util.Format,{thousandSeparator:".",decimalSeparator:",",currencySign:"Rp",dateFormat:"d/m/Y"})}});Ext.define("Ext.locale.id.view.View",{override:"Ext.view.View",emptyText:""});Ext.define("Ext.locale.id.grid.plugin.DragDrop",{override:"Ext.grid.plugin.DragDrop",dragText:"{0} baris terpilih"});Ext.define("Ext.locale.id.tab.Tab",{override:"Ext.tab.Tab",closeText:"Tutup tab ini"});Ext.define("Ext.locale.id.form.field.Base",{override:"Ext.form.field.Base",invalidText:"Isian belum benar"});Ext.define("Ext.locale.id.view.AbstractView",{override:"Ext.view.AbstractView",loadingText:"Pemuatan..."});Ext.define("Ext.locale.id.picker.Date",{override:"Ext.picker.Date",todayText:"Hari ini",minText:"Tanggal ini sebelum batas tanggal minimal",maxText:"Tanggal ini setelah batas tanggal maksimal",disabledDaysText:"",disabledDatesText:"",nextText:"Bulan Berikut (Kontrol+Kanan)",prevText:"Bulan Sebelum (Kontrol+Kiri)",monthYearText:"Pilih bulan (Kontrol+Atas/Bawah untuk pindah tahun)",todayTip:"{0} (Spacebar)",format:"d/m/y",startDay:1});Ext.define("Ext.locale.id.picker.Month",{override:"Ext.picker.Month",okText:"&#160;OK&#160;",cancelText:"Batal"});Ext.define("Ext.locale.id.toolbar.Paging",{override:"Ext.PagingToolbar",beforePageText:"Hal",afterPageText:"dari {0}",firstText:"Hal. Pertama",prevText:"Hal. Sebelum",nextText:"Hal. Berikut",lastText:"Hal. Akhir",refreshText:"Segarkan",displayMsg:"Menampilkan {0} - {1} dari {2}",emptyMsg:"Data tidak ditemukan"});Ext.define("Ext.locale.id.form.field.Text",{override:"Ext.form.field.Text",minLengthText:"Panjang minimal untuk field ini adalah {0}",maxLengthText:"Panjang maksimal untuk field ini adalah {0}",blankText:"Field ini wajib diisi",regexText:"",emptyText:null});Ext.define("Ext.locale.id.form.field.Number",{override:"Ext.form.field.Number",minText:"Nilai minimal untuk field ini adalah {0}",maxText:"Nilai maksimal untuk field ini adalah {0}",nanText:"{0} bukan angka"});Ext.define("Ext.locale.id.form.field.Date",{override:"Ext.form.field.Date",disabledDaysText:"Disfungsi",disabledDatesText:"Disfungsi",minText:"Tanggal dalam field ini harus setelah {0}",maxText:"Tanggal dalam field ini harus sebelum {0}",invalidText:"{0} tanggal salah - Harus dalam format {1}",format:"d/m/y",altFormats:"d/m/Y|d-m-y|d-m-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d"});Ext.define("Ext.locale.id.form.field.ComboBox",{override:"Ext.form.field.ComboBox",valueNotFoundText:undefined},function(){Ext.apply(Ext.form.field.ComboBox.prototype.defaultListConfig,{loadingText:"Pemuatan..."})});Ext.define("Ext.locale.id.form.field.VTypes",{override:"Ext.form.field.VTypes",emailText:'Field ini harus dalam format email seperti "user@example.com"',urlText:'Field ini harus dalam format URL seperti "http://www.example.com"',alphaText:"Field ini harus terdiri dari huruf dan _",alphanumText:"Field ini haris terdiri dari huruf, angka dan _"});Ext.define("Ext.locale.id.form.field.HtmlEditor",{override:"Ext.form.field.HtmlEditor",createLinkText:"Silakan masukkan URL untuk tautan:"},function(){Ext.apply(Ext.form.field.HtmlEditor.prototype,{buttonTips:{bold:{title:"Tebal (Ctrl+B)",text:"Buat tebal teks terpilih",cls:"x-html-editor-tip"},italic:{title:"Miring (CTRL+I)",text:"Buat miring teks terpilih",cls:"x-html-editor-tip"},underline:{title:"Garisbawah (CTRl+U)",text:"Garisbawahi teks terpilih",cls:"x-html-editor-tip"},increasefontsize:{title:"Perbesar teks",text:"Perbesar ukuran fonta",cls:"x-html-editor-tip"},decreasefontsize:{title:"Perkecil teks",text:"Perkecil ukuran fonta",cls:"x-html-editor-tip"},backcolor:{title:"Sorot Warna Teks",text:"Ubah warna latar teks terpilih",cls:"x-html-editor-tip"},forecolor:{title:"Warna Fonta",text:"Ubah warna teks terpilih",cls:"x-html-editor-tip"},justifyleft:{title:"Rata Kiri",text:"Ratakan teks ke kiri",cls:"x-html-editor-tip"},justifycenter:{title:"Rata Tengah",text:"Ratakan teks ke tengah editor",cls:"x-html-editor-tip"},justifyright:{title:"Rata Kanan",text:"Ratakan teks ke kanan",cls:"x-html-editor-tip"},insertunorderedlist:{title:"Daftar Bulet",text:"Membuat daftar berbasis bulet",cls:"x-html-editor-tip"},insertorderedlist:{title:"Daftar Angka",text:"Membuat daftar berbasis angka",cls:"x-html-editor-tip"},createlink:{title:"Hipertaut",text:"Buat teks terpilih sebagai Hipertaut",cls:"x-html-editor-tip"},sourceedit:{title:"Edit Kode Sumber",text:"Pindah dalam mode kode sumber",cls:"x-html-editor-tip"}}})});Ext.define("Ext.locale.id.grid.header.Container",{override:"Ext.grid.header.Container",sortAscText:"Urut Naik",sortDescText:"Urut Turun",lockText:"Kancing Kolom",unlockText:"Lepas Kunci Kolom",columnsText:"Kolom"});Ext.define("Ext.locale.id.grid.GroupingFeature",{override:"Ext.grid.feature.Grouping",emptyGroupText:"(Kosong)",groupByText:"Kelompokkan Berdasar Field Ini",showGroupsText:"Tampil Dalam Kelompok"});Ext.define("Ext.locale.id.grid.PropertyColumnModel",{override:"Ext.grid.PropertyColumnModel",nameText:"Nama",valueText:"Nilai",dateFormat:"d/m/Y"});Ext.define("Ext.locale.id.window.MessageBox",{override:"Ext.window.MessageBox",buttonText:{ok:"OK",cancel:"Batal",yes:"Ya",no:"Tidak"}});Ext.define("Ext.locale.id.Component",{override:"Ext.Component"});Ext.define("Ext.overrides.app.domain.Component",{override:"Ext.app.domain.Component"},function(f){f.monitor(Ext.Component)});(Ext.cmd.derive("Ext.app.EventBus",Ext.Base,{singleton:true,constructor:function(){var g=this,l=Ext.app.EventDomain.instances;g.callParent();g.domains=l;g.bus=l.component.bus},control:function(g,l){return this.domains.component.listen(g,l)},listen:function(m,o){var p=this.domains,n;for(n in m){if(m.hasOwnProperty(n)){p[n].listen(m[n],o)}}},unlisten:function(l){var n=Ext.app.EventDomain.instances,m;for(m in n){n[m].unlisten(l)}}},1,0,0,0,0,0,[Ext.app,"EventBus"],0));(Ext.cmd.derive("Ext.app.domain.Global",Ext.app.EventDomain,{singleton:true,type:"global",constructor:function(){var f=this;f.callParent();f.monitor(Ext.GlobalEvents)},listen:function(g,l){this.callParent([{global:g},l])},match:Ext.returnTrue},1,0,0,0,0,0,[Ext.app.domain,"Global"],0));(Ext.cmd.derive("Ext.app.BaseController",Ext.Base,{isController:true,config:{id:undefined,control:null,listen:null,routes:null,before:null},constructor:function(l){var g=this;Ext.apply(g,l);delete g.control;delete g.listen;g.eventbus=Ext.app.EventBus;g.mixins.observable.constructor.call(g,l)},updateId:function(f){this.id=f},applyListen:function(f){if(Ext.isObject(f)){f=Ext.clone(f)}return f},applyControl:function(f){if(Ext.isObject(f)){f=Ext.clone(f)}return f},updateControl:function(f){this.getId();if(f){this.control(f)}},updateListen:function(f){this.getId();if(f){this.listen(f)}},updateRoutes:function(t){if(t){var p=this,w=p.getBefore()||{},u=Ext.app.route.Router,q,s,v;for(q in t){s=t[q];if(Ext.isString(s)){s={action:s}}v=s.action;if(!s.before){s.before=w[v]}u.connect(q,s,p)}}},isActive:function(){return true},control:function(s,q,t){var p=this,o=t,u;if(Ext.isString(s)){u={};u[s]=q}else{u=s;o=q}p.eventbus.control(u,o||p)},listen:function(g,l){this.eventbus.listen(g,l||this)},destroy:function(){var g=this,l=g.eventbus;Ext.app.route.Router.disconnectAll(g);if(l){l.unlisten(g);g.eventbus=null}g.callParent()},redirectTo:function(n,m){if(n.isModel){n=n.toUrl()}var p=Ext.util.History.getToken()===n,o=false;if(!p){o=true;Ext.util.History.add(n)}else{if(m){o=true;Ext.app.route.Router.onStateChange(n)}}return o}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.app,"BaseController"],0));(Ext.cmd.derive("Ext.app.Util",Ext.Base,{},0,0,0,0,0,0,[Ext.app,"Util"],function(){Ext.apply(Ext.app,{namespaces:{Ext:{}},addNamespaces:function(n){var l=Ext.app.namespaces,o,p;if(!Ext.isArray(n)){n=[n]}for(o=0,p=n.length;o<p;o++){l[n[o]]=true}},clearNamespaces:function(){Ext.app.namespaces={}},getNamespace:function(o){var m=Ext.apply({},Ext.ClassManager.paths,Ext.app.namespaces),p="",n;for(n in m){if(m.hasOwnProperty(n)&&n.length>p.length&&(n+"."===o.substring(0,n.length+1))){p=n}}return p===""?undefined:p},setupPaths:function(s,q,n){var o=Ext.manifest,p;if(s&&q!==null){o=o&&o.paths;if(!o||q!==undefined){Ext.Loader.setPath(s,(q===undefined)?"app":q)}}if(n){for(p in n){if(n.hasOwnProperty(p)){Ext.Loader.setPath(p,n[p])}}}}});Ext.getNamespace=Ext.app.getNamespace}));(Ext.cmd.derive("Ext.app.domain.Store",Ext.app.EventDomain,{singleton:true,type:"store",prefix:"store.",idMatchRe:/^\#/,constructor:function(){var f=this;f.callParent();f.monitor(Ext.data.AbstractStore)},match:function(m,o){var p=false,n=m.alias;if(o==="*"){p=true}else{if(this.idMatchRe.test(o)){p=m.getStoreId()===o.substring(1)}else{if(n){p=Ext.Array.indexOf(n,this.prefix+o)>-1}}}return p}},1,0,0,0,0,0,[Ext.app.domain,"Store"],0));(Ext.cmd.derive("Ext.app.route.Queue",Ext.Base,{queue:null,token:null,constructor:function(f){Ext.apply(this,f);this.queue=new Ext.util.MixedCollection()},queueAction:function(l,g){this.queue.add({route:l,args:g})},clearQueue:function(){this.queue.removeAll()},runQueue:function(){var n=this.queue,l=n.removeAt(0),m;if(l){m=l&&l.route;m.execute(this.token,l.args,this.onActionExecute,this)}},onActionExecute:function(f){if(f){this.clearQueue()}else{this.runQueue()}}},1,0,0,0,0,0,[Ext.app.route,"Queue"],0));(Ext.cmd.derive("Ext.app.route.Route",Ext.Base,{action:null,conditions:null,controller:null,allowInactive:false,url:null,before:null,caseInsensitive:false,matcherRegex:null,paramMatchingRegex:null,paramsInMatchString:null,constructor:function(m){var l=this,n;Ext.apply(l,m,{conditions:{}});n=l.url;l.paramMatchingRegex=new RegExp(/:([0-9A-Za-z\_]*)/g);l.paramsInMatchString=n.match(l.paramMatchingRegex)||[];l.matcherRegex=l.createMatcherRegex(n)},recognize:function(p){var o=this,s=o.controller,n,q;if((o.allowInactive||s.isActive())&&o.recognizes(p)){n=o.matchesFor(p);q=p.match(o.matcherRegex);q.shift();return Ext.applyIf(n,{controller:s,action:o.action,historyUrl:p,args:q})}return false},recognizes:function(f){return this.matcherRegex.test(f)},execute:function(t,x,w,s){var u=x.args||[],y=this.before,v=this.controller,q=this.createCallback(x,w,s);if(y){u.push(q);if(Ext.isString(y)){y=this.before=v[y]}if(y){y.apply(v,u)}}else{q.resume()}},matchesFor:function(q){var u={},o=this.paramsInMatchString,s=q.match(this.matcherRegex),p=0,t=o.length;s.shift();for(;p<t;p++){u[o[p].replace(":","")]=s[p]}return u},createMatcherRegex:function(B){var z=this.paramsInMatchString,u=this.conditions,y=0,w=z.length,t=Ext.util.Format.format,C=this.caseInsensitive?"i":"",A,v,x;for(;y<w;y++){A=z[y];v=u[A];x=t("{0}",v||"([%a-zA-Z0-9\\-\\_\\s,]+)");B=B.replace(new RegExp(A),x)}return new RegExp("^"+B+"$",C)},createCallback:function(p,m,o){var n=this;o=o||n;return{resume:function(){var e=n.controller,f=n.action,g;if(Ext.isString(f)){f=e[f]}p=p&&p.args?p.args:[];g=p.pop();if(g&&!Ext.isObject(g)){p.push(g)}if(f){n.action=f;f.apply(e,p)}if(m){m.call(o)}},stop:function(e){if(m){m.call(o,e)}}}}},1,0,0,0,0,0,[Ext.app.route,"Route"],0));(Ext.cmd.derive("Ext.util.History",Ext.Base,{singleton:true,alternateClassName:"Ext.History",useTopWindow:false,constructor:function(){var f=this;f.hiddenField=null;f.ready=false;f.currentToken=null;f.mixins.observable.constructor.call(f)},getHash:function(){return this.win.location.hash.substr(1)},setHash:function(e){try{this.win.location.hash=e;this.currentToken=e}catch(l){}},handleStateChange:function(f){this.currentToken=f;this.fireEvent("change",f)},startUp:function(){var f=this;f.currentToken=f.getHash();if(Ext.supports.Hashchange){Ext.get(f.win).on("hashchange",f.onHashChange,f)}else{Ext.TaskManager.start({fireIdleEvent:false,run:f.onHashChange,interval:50,scope:f})}f.ready=true;f.fireEvent("ready",f)},onHashChange:function(){var g=this,l=g.getHash();if(l!==g.hash){g.hash=l;g.handleStateChange(l)}},init:function(l,n){var m=this;if(m.ready){Ext.callback(l,n,[m]);return}if(!Ext.isReady){Ext.onInternalReady(function(){m.init(l,n)});return}m.win=m.useTopWindow?window.top:window;m.hash=m.getHash();if(l){m.on("ready",l,n,{single:true})}m.startUp()},add:function(p,o){var n=this,m=false;if(o===false||n.getToken()!==p){n.setHash(p);m=true}return m},back:function(){var f=this.useTopWindow?window.top:window;f.history.go(-1)},forward:function(){var f=this.useTopWindow?window.top:window;f.history.go(1)},getToken:function(){return this.ready?this.currentToken:this.getHash()}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.util,"History",Ext,"History"],0));(Ext.cmd.derive("Ext.app.route.Router",Ext.Base,{singleton:true,multipleToken:"|",queueRoutes:true,constructor:function(){var f=Ext.util.History;if(!f.ready){f.init()}f.on("change",this.onStateChange,this);this.clear()},onStateChange:function(C){var K=this,D=K.application,I=K.routes,z=I.length,G=K.queueRoutes,t=C.split(K.multipleToken),H=0,E=t.length,B,A,J,y,F;for(;H<E;H++){C=t[H];F=false;if(G){A=new Ext.app.route.Queue({token:C})}for(B=0;B<z;B++){J=I[B];y=J.recognize(C);if(y){F=true;if(G){A.queueAction(J,y)}else{J.execute(C,y)}}}if(G){A.runQueue()}if(!F&&D){D.fireEvent("unmatchedroute",C)}}},connect:function(n,m,p){var o={url:n,action:m,controller:p};if(Ext.isObject(m)){Ext.merge(o,m)}this.routes.push(new Ext.app.route.Route(o))},disconnectAll:function(q){var s=this.routes,t=s.length,o=[],u,p;for(u=0;u<t;++u){p=s[u];if(p.controller!==q){o.push(p)}}this.routes=o},recognize:function(o){var s=this.routes||[],u=0,t=s.length,q,p;for(;u<t;u++){q=s[u];p=q.recognize(o);if(p){return{route:q,args:p}}}return false},draw:function(f){f.call(this,this)},clear:function(){this.routes=[]}},1,0,0,0,0,0,[Ext.app.route,"Router"],0));(Ext.cmd.derive("Ext.app.Controller",Ext.app.BaseController,{statics:{strings:{model:{getter:"getModel",upper:"Model"},view:{getter:"getView",upper:"View"},controller:{getter:"getController",upper:"Controller"},store:{getter:"getStore",upper:"Store"},profile:{getter:"getProfile",upper:"Profiles"}},controllerRegex:/^(.*)\.controller\./,profileRegex:/^(.*)\.profile\./,createGetter:function(l,g){return function(){return this[l](g)}},getGetterName:function(q,t){var p="get",o=q.split("."),u=o.length,s;for(s=0;s<u;s++){p+=Ext.String.capitalize(o[s])}p+=t;return p},resolveNamespace:function(u,w){var v=Ext.app.Controller,p=u.prototype.isProfile?v.profileRegex:v.controllerRegex,q,s,t;q=Ext.getClassName(u);s=w.$namespace||w.namespace||Ext.app.getNamespace(q)||((t=p.exec(q))&&t[1]);return s},processDependencies:function(I,H,D,C,O,F){if(!O||!O.length){return}var N=this,J=N.strings[C],E,K,L,G,B,A,M,o;if(!Ext.isArray(O)){O=[O]}for(B=0,A=O.length;B<A;B++){G=O[B];E=N.getFullName(G,C,D,F);O[B]=K=E.absoluteName;L=E.shortName;H.push(K);M=N.getGetterName(L,J.upper);if(!I[M]){I[M]=o=N.createGetter(J.getter,G)}if(o&&C!=="controller"){o["Ext.app.getter"]=true}}},getFullName:function(s,w,p,q){var u=s,t,v;if((t=s.indexOf("@"))>0){u=s.substring(0,t);v=s.substring(t+1)+"."+u}else{if(s.indexOf(".")>0&&(Ext.ClassManager.isCreated(s)||this.hasRegisteredPrefix(s))){v=s;u=s.replace(p+"."+w+".","")}else{if(p){v=p+"."+w+"."+(q?q+"."+s:s);u=s}else{v=s}}}return{absoluteName:v,shortName:u}},hasRegisteredPrefix:function(n){var l=Ext.ClassManager,m=l.getPrefix(n);return m&&m!==n}},models:null,views:null,stores:null,controllers:null,config:{application:null,refs:null,active:true,moduleClassName:null},onClassExtended:function(o,n,p){var m=p.onBeforeCreated;p.onBeforeCreated=function(e,g){var f=Ext.app.Controller,t=[],u,l;l=e.prototype;u=f.resolveNamespace(e,g);if(u){l.$namespace=u}f.processDependencies(l,t,u,"model",g.models);f.processDependencies(l,t,u,"view",g.views);f.processDependencies(l,t,u,"store",g.stores);f.processDependencies(l,t,u,"controller",g.controllers);Ext.require(t,Ext.Function.pass(m,arguments,this))}},constructor:function(f){this.initAutoGetters();Ext.app.BaseController.prototype.constructor.call(this,f)},normalizeRefs:function(m){var l=this,n=[];if(m){if(Ext.isObject(m)){Ext.Object.each(m,function(f,e){if(Ext.isString(e)){e={selector:e}}e.ref=f;n.push(e)})}else{if(Ext.isArray(m)){n=Ext.Array.merge(n,m)}}}m=l.refs;if(m){l.refs=null;m=l.normalizeRefs(m);if(m){n=Ext.Array.merge(n,m)}}return n},getRefMap:function(){var u=this,q=u._refMap,t,o,p,s;if(!q){t=u.getRefs();q=u._refMap={};if(t){for(s=0,p=t.length;s<p;s++){o=t[s];q[o.ref]=o.selector}}}return q},applyId:function(f){return f||Ext.app.Controller.getFullName(this.$className,"controller",this.$namespace).shortName},applyRefs:function(f){return this.normalizeRefs(Ext.clone(f))},updateRefs:function(f){if(f){this.ref(f)}},initAutoGetters:function(){var m=this.self.prototype,l,n;for(l in m){n=m[l];if(n&&n["Ext.app.getter"]){n.call(this)}}},doInit:function(g){var l=this;if(!l._initialized){l.init(g);l._initialized=true}},finishInit:function(t){var l=this,u=l.controllers,q,p,s;if(l._initialized&&u&&u.length){for(p=0,s=u.length;p<s;p++){q=l.getController(u[p]);q.finishInit(t)}}},init:Ext.emptyFn,onLaunch:Ext.emptyFn,activate:function(){this.setActive(true)},deactivate:function(){this.setActive(false)},isActive:function(){return this.getActive()},ref:function(u){var w=this,t=0,p=u.length,v,q,s;u=Ext.Array.from(u);w.references=w.references||[];for(;t<p;t++){v=u[t];q=v.ref;s="get"+Ext.String.capitalize(q);if(!w[s]){w[s]=Ext.Function.pass(w.getRef,[q,v],w)}w.references.push(q.toLowerCase())}},addRef:function(f){this.ref(f)},getRef:function(p,u,t){var q=this,o=q.refCache||(q.refCache={}),s=o[p];u=u||{};t=t||{};Ext.apply(u,t);if(u.forceCreate){return Ext.ComponentManager.create(u,"component")}if(!s){if(u.selector){o[p]=s=Ext.ComponentQuery.query(u.selector)[0]}if(!s&&u.autoCreate){o[p]=s=Ext.ComponentManager.create(u,"component")}if(s){s.on("destroy",function(){o[p]=null})}}return s},hasRef:function(g){var l=this.references;return l&&Ext.Array.indexOf(l,g.toLowerCase())!==-1},getController:function(g){var l=this.getApplication();if(g===this.getId()){return this}return l&&l.getController(g)},getStore:function(l){var n,m;n=(l.indexOf("@")===-1)?l:l.split("@")[0];m=Ext.StoreManager.get(n);if(!m){l=Ext.app.Controller.getFullName(l,"store",this.$namespace);if(l){m=Ext.create(l.absoluteName,{id:n})}}return m},getModel:function(l){var m=Ext.app.Controller.getFullName(l,"model",this.$namespace),n=Ext.ClassManager.get(m.absoluteName);if(!n){n=Ext.data.schema.Schema.lookupEntity(l)}return n},getProfile:function(f){f=Ext.app.Controller.getFullName(f,"profile",this.$namespace);return f},getView:function(l){var g=Ext.app.Controller.getFullName(l,"view",this.$namespace);return g&&Ext.ClassManager.get(g.absoluteName)},destroy:function(t,s){var p=this,u=p.application,o,q;if(!s&&u){u.unregister(p)}p.application=null;if(t){o=p.refCache;for(q in o){if(o.hasOwnProperty(q)){Ext.destroy(o[q])}}}Ext.app.BaseController.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.app,"Controller"],0));(Ext.cmd.derive("Ext.app.Application",Ext.app.Controller,{isApplication:true,scope:undefined,namespaces:[],paths:null,config:{name:"",appProperty:"app",profiles:[],currentProfile:null,mainView:{$value:null,lazy:true},defaultToken:null,glyphFontFamily:null,quickTips:true},onClassExtended:function(u,z,v){var A=Ext.app.Controller,y=u.prototype,C=[],x,t,B,w;B=z.name||u.superclass.name;if(B){z.$namespace=B;Ext.app.addNamespaces(B)}if(z.namespaces){Ext.app.addNamespaces(z.namespaces)}if(z["paths processed"]){delete z["paths processed"]}else{Ext.app.setupPaths(B,("appFolder" in z)?z.appFolder:u.superclass.appFolder,z.paths)}A.processDependencies(y,C,B,"profile",z.profiles);y.getDependencies(u,z,C);if(C.length){x=v.onBeforeCreated;v.onBeforeCreated=function(g,e){var f=Ext.Array.clone(arguments);Ext.require(C,function(){return x.apply(this,f)})}}},getDependencies:Ext.emptyFn,constructor:function(l){var g=this;Ext.app.route.Router.application=g;Ext.app.Controller.prototype.constructor.call(this,l);g.doInit(g);g.initNamespace();Ext.on("appupdate",g.onAppUpdate,g,{single:true});this.onProfilesReady()},applyId:function(f){return f||this.$className},onAppUpdate:Ext.emptyFn,onProfilesReady:function(){var o=this,s=o.getProfiles(),p=s.length,u,q,t;for(q=0;q<p;q++){t=Ext.create(s[q],{application:o});if(t.isActive()&&!u){u=t;o.setCurrentProfile(u)}}if(u){u.init()}o.initControllers();o.onBeforeLaunch();o.finishInitControllers()},initNamespace:function(){var l=this,n=l.getAppProperty(),m;m=Ext.namespace(l.getName());if(m){m.getApplication=function(){return l};if(n){if(!m[n]){m[n]=l}}}},initControllers:function(){var o=this,n=Ext.Array.from(o.controllers),q=o.getCurrentProfile(),s,p;o.controllers=new Ext.util.MixedCollection();for(s=0,p=n.length;s<p;s++){o.getController(n[s])}if(q){n=q.getControllers();for(s=0,p=n.length;s<p;s++){o.getController(n[s])}}},finishInitControllers:function(){var n=this,l,o,p;l=n.controllers.getRange();for(o=0,p=l.length;o<p;o++){l[o].finishInit(n)}},launch:Ext.emptyFn,onBeforeLaunch:function(){var t=this,x=Ext.util.History,A=t.getDefaultToken(),v=t.getCurrentProfile(),z,u,s,w,y;t.initMainView();if(v){v.launch()}t.launch.call(t.scope||t);t.launched=true;t.fireEvent("launch",t);z=t.controllers.items;s=z.length;for(u=0;u<s;u++){w=z[u];w.onLaunch(t)}if(!x.ready){x.init()}y=x.getToken();if(y||y===A){Ext.app.route.Router.onStateChange(y)}else{if(A){x.add(A)}}if(Ext.Microloader&&Ext.Microloader.appUpdate&&Ext.Microloader.appUpdate.updated){Ext.Microloader.fireAppUpdate()}Ext.defer(Ext.ClassManager.clearNamespaceCache,2000,Ext.ClassManager)},getModuleClassName:function(l,g){return Ext.app.Controller.getFullName(l,g,this.getName()).absoluteName},initMainView:function(){var l=this,m=l.getCurrentProfile(),n;if(m){n=m.getMainView()}if(n){l.setMainView(n)}else{l.getMainView()}},applyMainView:function(g){var l=this.getView(g);return l.create({$initParent:this.viewport})},createController:function(f){return this.getController(f)},destroyController:function(f){if(typeof f==="string"){f=this.getController(f,true)}Ext.destroy(f)},getController:function(A,B){var t=this,z=t.controllers,v,x,w,y,u,C;x=z.get(A);if(!x){C=z.items;for(y=0,w=C.length;y<w;++y){u=C[y];v=u.getModuleClassName();if(v&&v===A){x=u;break}}}if(!x&&!B){v=t.getModuleClassName(A,"controller");x=Ext.create(v,{application:t,moduleClassName:v});z.add(x);if(t._initialized){x.doInit(t)}}return x},unregister:function(f){this.controllers.remove(f)},getApplication:function(){return this},destroy:function(s){var p=this,n=p.controllers,q=Ext.namespace(p.getName()),o=p.getAppProperty();Ext.un("appupdate",p.onAppUpdate,p);Ext.destroy(p.viewport);if(n){n.each(function(e){e.destroy(s,true)})}p.controllers=null;Ext.app.Controller.prototype.destroy.call(this,s,true);if(q&&q[o]===p){delete q[o]}if(Ext.app.route.Router.application===p){Ext.app.route.Router.application=null}if(Ext.app.Application.instance===p){Ext.app.Application.instance=null}},updateGlyphFontFamily:function(f){Ext.setGlyphFontFamily(f)},applyProfiles:function(l){var g=this;return Ext.Array.map(l,function(e){return g.getModuleClassName(e,"profile")})}},1,0,0,0,0,0,[Ext.app,"Application"],0));Ext.application=function(l){var g=function(e){Ext.onReady(function(){var f=Ext.viewport;f=f&&f.Viewport;if(f&&f.setup){f.setup(e.prototype.config.viewport)}Ext.app.Application.instance=new e()})};if(typeof l==="string"){Ext.require(l,function(){g(Ext.ClassManager.get(l))})}else{l=Ext.apply({extend:"Ext.app.Application"},l);Ext.app.setupPaths(l.name,l.appFolder,l.paths);l["paths processed"]=true;Ext.define(l.name+".$application",l,function(){g(this)})}};Ext.define("Ext.overrides.app.Application",{override:"Ext.app.Application",autoCreateViewport:false,config:{enableQuickTips:null},quickTips:true,updateEnableQuickTips:function(f){this.setQuickTips(f)},applyMainView:function(n){var q,o,p,s;if(typeof n==="string"){q=this.getView(n)}else{q=Ext.ClassManager.getByConfig(n)}o=q.prototype;if(!o.isViewport){s=o.plugins;s=["viewport"].concat(s?Ext.Array.from(s,true):[]);p={plugins:s}}return q.create(p)},getDependencies:function(u,w,q){var v=Ext.app.Controller,p=u.prototype,s=w.$namespace,t=w.autoCreateViewport;if(t){if(t===true){t="Viewport"}else{q.push("Ext.plugin.Viewport")}v.processDependencies(p,q,s,"view",t)}},onBeforeLaunch:function(){var g=this,l=g.autoCreateViewport;if(g.getQuickTips()){g.initQuickTips()}if(l){g.initViewport()}arguments.callee.$previous.apply(this,arguments)},getViewportName:function(){var l=null,g=this.autoCreateViewport;if(g){l=(g===true)?"Viewport":g}return l},initViewport:function(){this.setMainView(this.getViewportName())},initQuickTips:function(){Ext.tip.QuickTipManager.init()}});(Ext.cmd.derive("Ext.app.domain.View",Ext.app.EventDomain,{isInstance:true,constructor:function(f){Ext.app.EventDomain.prototype.constructor.call(this,f);this.controller=f;this.monitoredClasses=[Ext.Widget]},match:function(m,p,o){var n=false;if(p==="#"){n=o===m.getController()}else{n=m.is(p)}return n},destroy:function(){this.controller=null;Ext.app.EventDomain.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.app.domain,"View"],0));Ext.define("Ext.overrides.app.domain.View",{override:"Ext.app.domain.View",constructor:function(f){(arguments.callee.$previous||Ext.app.EventDomain.prototype.constructor).call(this,f);this.monitoredClasses.push(Ext.Component)}});(Ext.cmd.derive("Ext.app.ViewController",Ext.app.BaseController,{isViewController:true,factoryConfig:{type:"controller"},config:{closeViewAction:"destroy"},view:null,constructor:function(){this.compDomain=new Ext.app.domain.View(this);Ext.app.BaseController.prototype.constructor.apply(this,arguments)},beforeInit:Ext.emptyFn,init:Ext.emptyFn,initViewModel:Ext.emptyFn,destroy:function(){var l=this,g=l.compDomain;if(g){g.unlisten(l);g.destroy()}l.compDomain=l.view=null;Ext.app.BaseController.prototype.destroy.call(this)},closeView:function(){var l=this.getView(),g;if(l){g=this.getCloseViewAction();l[g]()}},control:function(n,m){var l=n;if(Ext.isString(n)){l={};l[n]=m}this.compDomain.listen(l,this)},listen:function(l,n){var m=l.component;if(m){l=Ext.apply({},l);delete l.component;this.control(m)}this.callParent([l,n])},applyId:function(f){if(!f){f=Ext.id(null,"controller-")}return f},getReferences:function(){var f=this.view;return f&&f.getReferences()},getView:function(){return this.view},lookup:function(g){var l=this.view;return l&&l.lookup(g)},lookupReference:function(f){return this.lookup(f)},getSession:function(){var f=this.view;return f&&f.lookupSession()},getViewModel:function(){var f=this.view;return f&&f.lookupViewModel()},getStore:function(g){var l=this.getViewModel();return l?l.getStore(g):null},fireViewEvent:function(o,q){var p=this.view,s=false,n=arguments;if(p){if(p!==q){n=Ext.Array.slice(n);n.splice(1,0,p)}s=p.fireEvent.apply(p,n)}return s},privates:{view:null,attachReference:function(g){var l=this.view;if(l){l.attachReference(g)}},clearReference:function(g){var l=this.view;if(l){l.clearReference(g)}},clearReferences:function(){var f=this.view;if(f){f.clearReferences()}},setView:function(f){this.view=f;if(!this.beforeInit.$nullFn){this.beforeInit(f)}}}},1,0,0,0,["controller.controller"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.app,"ViewController"],0));(Ext.cmd.derive("Ext.util.Scheduler",Ext.Base,{busyCounter:0,lastBusyCounter:0,destroyed:false,firing:null,notifyIndex:-1,nextId:0,orderedItems:null,passes:0,scheduledCount:0,validIdRe:null,config:{cycleLimit:5,preSort:null,tickDelay:5},suspendOnNotify:true,constructor:function(f){this.mixins.observable.constructor.call(this,f);this.items=new Ext.util.Bag()},destroy:function(){var l=this,g=l.timer;if(g){window.clearTimeout(g);l.timer=null}l.items.destroy();l.items=l.orderedItems=null;l.callParent()},add:function(l){var m=this,n=m.items;if(n===m.firing){m.items=n=n.clone()}l.id=l.id||++m.nextId;l.scheduler=m;n.add(l);if(!m.sortMap){m.orderedItems=null}},remove:function(l){var m=this,n=m.items;if(m.destroyed){return}if(n===m.firing){m.items=n=n.clone()}if(l.scheduled){m.unscheduleItem(l);l.scheduled=false}n.remove(l);m.orderedItems=null},sort:function(){var p=this,t=p.items,o={},u=p.getPreSort(),s,q;p.orderedItems=[];p.sortMap=o;if(u){t.sort(u)}t=t.items;for(s=0;s<t.length;++s){q=t[s];if(!o[q.id]){p.sortItem(q)}}p.sortMap=null},sortItem:function(p){var q=this,o=q.sortMap,s=q.orderedItems,n;if(!p.scheduler){q.add(p)}n=p.id;if(!(n in o)){o[n]=0;if(!p.sort.$nullFn){p.sort()}o[n]=1;p.order=q.orderedItems.length;s.push(p)}return q},sortItems:function(n){var m=this,l=m.sortItem;if(n){if(n instanceof Array){Ext.each(n,l,m)}else{Ext.Object.eachValue(n,l,m)}}return m},applyPreSort:function(w){if(typeof w==="function"){return w}var p=w.split(","),q=[],s=p.length,v,u,t;for(u=0;u<s;++u){q[u]=1;t=p[u];if((v=t.charAt(0))==="-"){q[u]=-1}else{if(v!=="+"){v=0}}if(v){p[u]=t.substring(1)}}return function(o,e){var n=0,m,f,g,l;for(m=0;!n&&m<s;++m){f=p[m];g=o[f];l=e[f];n=q[m]*((g<l)?-1:((l<g)?1:0))}return n}},notify:function(){var u=this,B=u.timer,z=u.getCycleLimit(),A=Ext.GlobalEvents,w=u.suspendOnNotify,D,y,E,v,x,C;if(B){window.clearTimeout(B);u.timer=null}if(!u.firing&&u.scheduledCount){if(w){Ext.suspendLayouts()}while(u.scheduledCount){if(z){--z}else{u.firing=null;break}if(!C){C=true;if(A.hasListeners.beforebindnotify){A.fireEvent("beforebindnotify",u)}}++u.passes;if(!(x=u.orderedItems)){u.sort();x=u.orderedItems}v=x.length;if(v){u.firing=u.items;for(y=0;y<v;++y){E=x[y];if(E.scheduled){E.scheduled=false;--u.scheduledCount;u.notifyIndex=y;E.react();if(!u.scheduledCount){break}}}}}u.firing=null;u.notifyIndex=-1;if(w){Ext.resumeLayouts(true)}}if((D=u.busyCounter)!==u.lastBusyCounter){if(!(u.lastBusyCounter=D)){u.fireEvent("idle",u)}}},onTick:function(){this.timer=null;this.notify()},scheduleItem:function(g){var l=this;++l.scheduledCount;if(!l.timer&&!l.firing){l.scheduleTick()}},scheduleTick:function(){var f=this;if(!f.destroyed&&!f.timer){f.timer=Ext.Function.defer(f.onTick,f.getTickDelay(),f)}},unscheduleItem:function(f){if(this.scheduledCount){--this.scheduledCount}},adjustBusy:function(n){var m=this,l=m.busyCounter+n;m.busyCounter=l;if(l){if(!m.lastBusyCounter){m.lastBusyCounter=l;m.fireEvent("busy",m)}}else{if(m.lastBusyCounter&&!m.timer){m.scheduleTick()}}},isBusy:function(){return !this.isIdle()},isIdle:function(){return !(this.busyCounter+this.lastBusyCounter)}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.util,"Scheduler"],0));(Ext.cmd.derive("Ext.data.Batch",Ext.Base,{config:{pauseOnException:false},current:-1,total:0,running:false,complete:false,exception:false,constructor:function(l){var g=this;g.mixins.observable.constructor.call(g,l);g.operations=[];g.exceptions=[]},add:function(o){var m=this,n,p;if(Ext.isArray(o)){for(n=0,p=o.length;n<p;++n){m.add(o[n])}}else{m.total++;o.setBatch(m);m.operations.push(o)}return m},sort:function(){this.operations.sort(this.sortFn)},sortFn:function(q,t){var s=q.order-t.order;if(s){return s}var u=q.entityType,p=t.entityType,o;if(!u||!p){return 0}if(!(o=u.rank)){u.schema.rankEntities();o=u.rank}return(o-p.rank)*q.foreignKeyDirection},start:function(l){var g=this;if(!g.operations.length||g.running){return g}g.exceptions.length=0;g.exception=false;g.running=true;return g.runOperation(Ext.isDefined(l)?l:g.current+1)},retry:function(){return this.start(this.current)},runNextOperation:function(){var f=this;if(f.running){f.runOperation(f.current+1)}return f},pause:function(){this.running=false;return this},getOperations:function(){return this.operations},getExceptions:function(){return this.exceptions},getCurrent:function(){var l=null,g=this.current;if(!(g===-1||this.complete)){l=this.operations[g]}return l},getTotal:function(){return this.total},isRunning:function(){return this.running},isComplete:function(){return this.complete},hasException:function(){return this.exception},runOperation:function(n){var m=this,o=m.operations,p=o[n];if(p===undefined){m.running=false;m.complete=true;m.fireEvent("complete",m,o[o.length-1])}else{m.current=n;p.setInternalCallback(m.onOperationComplete);p.setInternalScope(m);p.execute()}return m},onOperationComplete:function(n){var l=this,m=n.hasException();if(m){l.exception=true;l.exceptions.push(n);l.fireEvent("exception",l,n)}if(m&&l.getPauseOnException()){l.pause()}else{l.fireEvent("operationcomplete",l,n);l.runNextOperation()}}},1,0,0,0,0,[["observable",Ext.mixin.Observable]],[Ext.data,"Batch"],0));(Ext.cmd.derive("Ext.data.matrix.Slice",Ext.Base,{constructor:function(l,g){this.id=g;this.side=l;this.members={}},attach:function(l){var g=this;g.store=l;l.matrix=g;l.on("load",g.onStoreLoad,g,{single:true})},commit:function(){var l=this.members,g;for(g in l){l[g][2]=0}},onStoreLoad:function(f){this.update(f.getData().items,0)},update:function(G,N){var K=this,L=Ext.data.matrix.Slice,Q=K.side,J=Q.index,O=G.length,H=K.id,B=K.members,R=Q.inverse,C=R.slices,M,E,F,D,S,I,P;for(F=0;F<O;++F){E=P=null;D=G[F];S=D.isEntity?(P=D).id:D;M=B[S];if(N<0&&M&&M[2]===1){delete B[S];I=C[S];if(I){delete I.members[H]}E=1}else{if(!M){M=[S,S,N];M[J]=H;B[S]=M;I=C[S];if(!I){C[S]=I=new L(R,S)}I.members[H]=M;E=1}else{if(N!==M[2]&&N!==0){M[2]=N;I=C[S];E=1}}}if(E){if(K.notify){K.notify.call(K.scope,K,S,N)}if(I&&I.notify){I.notify.call(I.scope,I,H,N)}}}},updateId:function(C){var v=this,D=v.id,w=v.side,E=w.slices,F=E[D],B=F.members,y=w.index,A=w.inverse.slices,x,z,G;v.id=C;E[C]=F;delete E[D];for(z in B){x=B[z];x[y]=C;G=A[z].members;G[C]=G[D];delete G[D]}},destroy:function(){var g=this,l=g.store;if(l){l.matrix=null;l.un("load",g.onStoreLoad,g)}g.notify=g.scope=g.store=g.side=g.members=null;g.callParent()}},1,0,0,0,0,0,[Ext.data.matrix,"Slice"],0));(Ext.cmd.derive("Ext.data.matrix.Side",Ext.Base,{constructor:function(p,o,m){var n=this;n.matrix=p;n.index=o;n.role=m;n.slices={}},commit:function(){var l=this.slices,g;for(g in l){l[g].commit()}},get:function(q,s){var p=this,n=p.slices,o=n[q]||(n[q]=new Ext.data.matrix.Slice(p,q));return(s||s===0)?o.members[s]:o},update:function(o,p,n){var m=this.get(o);return m.update(p,n)},updateId:function(l,n){var m=this.get(l);if(m){m.updateId(n)}},destroy:function(){var n=this,m=n.slices,l;for(l in m){m[l].destroy()}n.inverse=n.matrix=n.role=n.slices=null;n.callParent()}},1,0,0,0,0,0,[Ext.data.matrix,"Side"],0));(Ext.cmd.derive("Ext.data.matrix.Matrix",Ext.Base,{constructor:function(v,s){var p=this,t=s.isManyToMany?s:v.getSchema().getAssociation(s),u=Ext.data.matrix.Side,w=new u(p,0,t.left),q=new u(p,1,t.right);p.association=t;p.session=v;p.left=w;p.right=q;w.inverse=q;q.inverse=w},commit:function(){this.left.commit();this.right.commit()},update:function(m,n,l){return this.left.update(m,n,l)},updateId:function(u,v,s){var t=u.self,w=this.left,q=this.right,p;if(t===w.role.cls){p=w}if(t===q.role.cls){p=q}if(p){p.updateId(v,s)}},destroy:function(){var f=this;f.left.destroy();f.right.destroy();f.association=f.session=f.left=f.right=null;f.callParent()}},1,0,0,0,0,0,[Ext.data.matrix,"Matrix"],0));(Ext.cmd.derive("Ext.data.session.ChangesVisitor",Ext.Base,{constructor:function(l){var n=this,m;n.session=l;m=l.getCrudProperties();n.result=null;n.writerOptions={};n.createKey=m.create;n.readKey=m.read;n.updateKey=m.update;n.dropKey=m.drop},onDirtyRecord:function(A){var x=this,I=x.crud,B=A.phantom,D=A.dropped,z=!B&&!D,K=A.$className,E=(B||D)?"allDataOptions":"partialDataOptions",y=x.writerOptions,F=A.entityName,G,C,J,H;if(B&&D){return false}I=B?x.createKey:(D?x.dropKey:x.updateKey);y=y[K]||(y[K]={});if(D){if(!(G=y.drop)){y.drop=G={all:A.getProxy().getWriter().getWriteAllFields()}}if(!G.all){J=A.id}}if(!J){if(!(G=y[E])){G=A.getProxy().getWriter().getConfig(E);y[E]=G=Ext.Object.chain(G);x.setupOptions(G)}J=A.getData(G)}H=x.result||(x.result={});C=H[F]||(H[F]={});C=C[I]||(C[I]=[]);C.push(J)},setupOptions:function(f){f.serialize=true},onMatrixChange:function(y,t,u,B){var v=this,A=y.left.type,w=y.right.role,x=B<0?v.dropKey:v.createKey,z,C;C=v.result||(v.result={});z=C[A]||(C[A]={});z=z[w]||(z[w]={});z=z[x]||(z[x]={});z=z[t]||(z[t]=[]);z.push(u)}},1,0,0,0,0,0,[Ext.data.session,"ChangesVisitor"],0));(Ext.cmd.derive("Ext.data.session.ChildChangesVisitor",Ext.data.session.ChangesVisitor,{constructor:function(){this.seen={};Ext.data.session.ChangesVisitor.prototype.constructor.apply(this,arguments)},setupOptions:function(f){Ext.data.session.ChangesVisitor.prototype.setupOptions.call(this,f);f.serialize=false},onDirtyRecord:function(f){if(Ext.data.session.ChangesVisitor.prototype.onDirtyRecord.apply(this,arguments)!==false){if(!f.$source&&(f.dropped||!f.phantom)){this.readEntity(f)}}},readEntity:function(v){var u=this,w=u.readKey,z=v.entityName,y=v.id,A=u.seen,t=z+y,s,x;if(A[t]){return}A[t]=true;s=u.result||(u.result={});x=s[z]||(s[z]={});x=x[w]||(x[w]=[]);x.push(Ext.apply({},v.modified,v.data))}},1,0,0,0,0,0,[Ext.data.session,"ChildChangesVisitor"],0));(Ext.cmd.derive("Ext.data.session.BatchVisitor",Ext.Base,{map:null,constructor:function(f){this.batch=f},getBatch:function(y){var x=this.map,s=this.batch,w,u,t,v,q;if(x){if(!s){s=new Ext.data.Batch()}for(t in x){w=x[t];u=w.entity;q=u.getProxy();delete w.entity;for(v in w){v=q.createOperation(v,{records:w[v]});v.entityType=u;s.add(v)}}}if(s&&y!==false){s.sort()}return s},onDirtyRecord:function(t){var p=this,s=t.phantom?"create":(t.dropped?"destroy":"update"),q=t.$className,o=(p.map||(p.map={})),u=(o[q]||(o[q]={entity:t.self}));u=u[s]||(u[s]=[]);u.push(t)}},1,0,0,0,0,0,[Ext.data.session,"BatchVisitor"],0));(Ext.cmd.derive("Ext.mixin.Dirty",Ext.Base,{mixinId:"dirty",config:{dirty:null},dirty:false,_dirtyRecordCount:0,ignoreDirty:false,recordStateIsDirtyState:true,isDirty:function(){return this.getDirty()},applyDirty:function(f){return this.ignoreDirty?false:f},updateDirty:function(m,n){var l=this;l.dirty=m;if(!l.ignoreDirty&&l.fireEvent){l.fireEvent("dirtychange",l,m)}},clearRecordStates:function(){var g=this,l=g._crudCounters;if(l){l.C=l.U=l.D=0}g._dirtyRecordCount=0;if(g.recordStateIsDirtyState){g.setDirty(false)}},trackRecordState:function(w,u){var q=this,s=q._crudCounters||(q._crudCounters={C:0,R:0,U:0,D:0}),v=q._dirtyRecordCount,x,t,y;if(!u&&(y=w.crudStateWas)!==null){--s[y]}++s[w.crudState];q._dirtyRecordCount=t=s.C+s.U+s.D;x=!t!==!v;if(x&&q.recordStateIsDirtyState){q.setDirty(t>0)}return x},untrackRecordState:function(t){var p=this,q=p._crudCounters,u=p._dirtyRecordCount,o,s;if(q){--q[t.crudState];p._dirtyRecordCount=s=q.C+q.U+q.D;o=!s!==!u;if(o&&p.recordStateIsDirtyState){p.setDirty(s>0)}}return o}},0,0,0,0,0,0,[Ext.mixin,"Dirty"],0));(Ext.cmd.derive("Ext.data.Session",Ext.Base,{isSession:true,config:{schema:"default",parent:null,autoDestroy:true,crudProperties:{create:"C",read:"R",update:"U",drop:"D"}},crudOperations:[{type:"R",entityMethod:"readEntities"},{type:"C",entityMethod:"createEntities"},{type:"U",entityMethod:"updateEntities"},{type:"D",entityMethod:"dropEntities"}],crudKeys:{C:1,R:1,U:1,D:1},statics:{nextId:1},constructor:function(l){var g=this;g.data={};g.matrices={};g.id=Ext.data.Session.nextId++;g.identifierCache={};g.recordCreator=g.recordCreator.bind(g);g.mixins.observable.constructor.call(g,l)},destroy:function(){var q=this,t=q.matrices,p=q.data,s,w,u,v;for(v in t){t[v].destroy()}for(s in p){w=p[s];for(v in w){u=w[v].record;if(u){u.$source=null;u.unjoin(q)}}}q.identifierCache=q.recordCreator=q.matrices=q.data=null;q.setSchema(null);q.callParent()},adopt:function(o){var m=this,n=o.associations,p;if(o.session!==m){o.session=m;m.add(o);if(n){for(p in n){n[p].adoptAssociated(o,m)}}}},commit:function(){var q=this,p=q.data,t=q.matrices,s,w,v,u;for(s in p){w=p[s];for(v in w){u=w[v].record;if(u){u.commit()}}}for(v in t){t[v].commit()}q.clearRecordStates()},createRecord:function(q,p){var o=q.$isClass?q:this.getSchema().getEntity(q),s=this.getParent(),n;if(p&&s){n=o.getIdFromData(p);if(s.peekRecord(o,n)){Ext.raise("A parent session already contains an entry for "+o.entityName+": "+n)}}return new o(p,this)},getChanges:function(){var f=new Ext.data.session.ChangesVisitor(this);this.visitData(f);return f.result},getChangesForParent:function(){var f=new Ext.data.session.ChildChangesVisitor(this);this.visitData(f);return f.result},getRecord:function(t,A,y){var u=this,z=t.isModel,v,x,s,w;if(z){z=t;A=t.id;t=t.self}v=u.peekRecord(t,A);if(!v){x=t.$isClass?t:u.getSchema().getEntity(t);s=u.getParent();if(s){w=s.peekRecord(x,A)}if(w){if(w.isLoading()){z=false}else{v=w.copy(undefined,u);v.$source=w}}if(!v){if(z){v=z;u.adopt(v)}else{v=x.createWithId(A,null,u);if(y!==false){v.load(Ext.isObject(y)?y:undefined)}}}}return v},getSaveBatch:function(l){var g=new Ext.data.session.BatchVisitor();this.visitData(g);return g.getBatch(l)},onInvalidAssociationEntity:function(l,g){Ext.raise("Unable to read association entity: "+this.getModelIdentifier(l,g))},onInvalidEntityCreate:function(l,g){Ext.raise("Cannot create, record already not exists: "+this.getModelIdentifier(l,g))},onInvalidEntityDrop:function(l,g){Ext.raise("Cannot drop, record does not exist: "+this.getModelIdentifier(l,g))},onInvalidEntityRead:function(l,g){Ext.raise("Cannot read, record already not exists: "+this.getModelIdentifier(l,g))},onInvalidEntityUpdate:function(n,l,m){if(m){Ext.raise("Cannot update, record dropped: "+this.getModelIdentifier(n,l))}else{Ext.raise("Cannot update, record does not exist: "+this.getModelIdentifier(n,l))}},peekRecord:function(q,w,v){var x=q.$isClass?q:this.getSchema().getEntity(q),t=x.entityName,y=this.data[t],u,s;y=y&&y[w];u=y&&y.record;if(!u&&v){s=this.getParent();u=s&&s.peekRecord(q,w,v)}return u||null},save:function(){var m=this,n=m.getParent(),l;if(n){l=new Ext.data.session.ChildChangesVisitor(m);m.visitData(l);n.update(l.result);m.commit()}},spawn:function(){return new this.self({schema:this.getSchema(),parent:this})},update:function(z){var N=this,D=N.getSchema(),H=N.crudOperations,O=H.length,M=N.crudKeys,L,C,J,A,E,I,F,K,B,G;N.getSchema().processKeyChecks(true);for(L in z){C=D.getEntity(L);J=z[L];for(A=0;A<O;++A){E=H[A];I=J[E.type];if(I){N[E.entityMethod](C,I)}}}for(L in z){C=D.getEntity(L);F=C.associations;J=z[L];for(K in J){if(M[K]){continue}B=F[K];G=J[B.role];B.processUpdate(N,G)}}},privates:{add:function(s){var o=this,u=s.id,p=o.getEntry(s.self,u),q,t;p.record=s;o.trackRecordState(s,true);o.registerReferences(s);q=s.associations;for(t in q){q[t].checkMembership(o,s)}},afterCommit:function(f){this.trackRecordState(f)},afterDrop:function(f){this.trackRecordState(f)},afterEdit:function(f){this.trackRecordState(f)},afterErase:function(f){this.evict(f)},applySchema:function(f){return Ext.data.schema.Schema.get(f)},createEntities:function(q,t){var u=t.length,s,p,w,v;for(s=0;s<u;++s){p=t[s];v=q.getIdFromData(p);w=this.peekRecord(q,v);if(!w){w=this.createRecord(q,p)}else{this.onInvalidEntityCreate(q,v)}w.phantom=true}},dropEntities:function(p,q){var t=q.length,s,w,v,u;if(t){u=Ext.isObject(q[0])}for(s=0;s<t;++s){v=q[s];if(u){v=p.getIdFromData(v)}w=this.peekRecord(p,v);if(w){w.drop()}else{this.onInvalidEntityDrop(p,v)}}},evict:function(s){var p=this,q=s.entityName,o=p.data[q],n=s.id;if(o&&o[n]){p.untrackRecordState(s);s.unjoin(p);delete o[n]}},getEntityList:function(q,s){var u=s.length,t,v,w,p;for(t=0;t<u;++t){v=s[t];w=this.peekRecord(q,v);if(w){s[t]=w}else{p=true;s[t]=null;this.onInvalidAssociationEntity(q,v)}}if(p){s=Ext.Array.clean(s)}return s},getEntry:function(s,u){if(s.isModel){u=s.getId();s=s.self}var p=s.$isClass?s:this.getSchema().getEntity(s),t=p.entityName,o=this.data,q;q=o[t]||(o[t]={});q=q[u]||(q[u]={});return q},getRefs:function(x,y,t){var v=this.getEntry(x),w=v&&v.refs&&v.refs[y.role],u=t&&this.getParent(),s,A,z;if(u){s=u.getRefs(x,y);if(s){for(A in s){z=s[A];if((!w||!w[A])){this.getRecord(z.self,z.id)}}w=v&&v.refs&&v.refs[y.role]}}return w||null},getIdentifier:function(u){var o=this.getParent(),t,q,p,s;if(o){s=o.getIdentifier(u)}else{t=this.identifierCache;q=u.identifier;p=q.getId()||u.entityName;s=t[p];if(!s){if(q.clone){s=q.clone({id:null})}else{s=q}t[p]=s}}return s},getMatrix:function(s,n){var o=s.isManyToMany?s.name:s,p=this.matrices,q;q=p[o];if(!q&&!n){q=p[o]=new Ext.data.matrix.Matrix(this,s)}return q||null},getMatrixSlice:function(m,n){var p=this.getMatrix(m.association),o=p[m.side];return o.get(n)},getModelIdentifier:function(l,g){return g+"@"+l.entityName},onIdChanged:function(R,I,P){var D=this,V=D.matrices,N=R.entityName,H=R.id,L=D.data[N],U=L[I],E=R.associations,T=U.refs,W=D._setNoRefs,Q,S,F,K,M,J,G,O;delete L[I];L[P]=U;for(O in V){V[O].updateId(R,I,P)}if(T){for(J in T){G=T[J];M=E[J];Q=M.association;if(!Q.isManyToMany){S=Q.field.name;for(K in G){G[K].set(S,H,W)}}}}D.registerReferences(R,I)},processManyBlock:function(x,w,u,z){var t=this,A,v,y,s;if(u){for(A in u){v=t.peekRecord(x,A);if(v){y=t.getEntityList(w.cls,u[A]);s=w.getAssociatedItem(v);t[z](w,s,v,y)}else{t.onInvalidAssociationEntity(x,A)}}}},processManyCreate:function(m,n,p,o){if(n){n.add(o)}else{p[m.getterName](null,null,o)}},processManyDrop:function(m,n,p,o){if(n){n.remove(o)}},processManyRead:function(m,n,p,o){if(n){n.setRecords(o)}else{p[m.getterName](null,null,o)}},readEntities:function(q,t){var u=t.length,s,p,w,v;for(s=0;s<u;++s){p=t[s];v=q.getIdFromData(p);w=this.peekRecord(q,v);if(!w){w=this.createRecord(q,p)}else{this.onInvalidEntityRead(q,v)}w.phantom=false}},recordCreator:function(p,o){var q=this,n=o.getIdFromData(p),s=q.peekRecord(o,n,true);if(!s){s=new o(p,q)}else{s=q.getRecord(o,n)}return s},registerReferences:function(y,D){var J=y.entityName,E=y.id,F=y.data,z=D||D===0,I,A,G,x,C,H,K,B;x=(H=y.references).length;for(A=0;A<x;++A){C=H[A];G=F[C.name];if(G||G===0){C=C.reference;J=C.type;B=C.inverse.role;I=this.getEntry(C.cls,G);K=I.refs||(I.refs={});K=K[B]||(K[B]={});K[E]=y;if(z){delete K[D]}}}},updateEntities:function(q,u){var w=u.length,s,y,x,v,t;if(Ext.isArray(u)){for(s=0;s<w;++s){y=u[s];v=q.getIdFromData(y);x=this.peekRecord(q,v);if(x){x.set(y)}else{this.onInvalidEntityUpdate(q,v)}}}else{for(v in u){y=u[v];x=this.peekRecord(q,v);if(x&&!x.dropped){t=x.set(y)}else{this.onInvalidEntityUpdate(q,v,!!x)}}}},updateReference:function(w,u,z,B){var y=u.reference,t=y.type,x=y.inverse.role,A=w.id,C,v;if(B||B===0){v=this.getEntry(t,B).refs[x];delete v[A]}if(z||z===0){C=this.getEntry(t,z);v=C.refs||(C.refs={});v=v[x]||(v[x]={});v[A]=w}},visitData:function(A){var y=this,C=y.data,J=y.matrices,K,z,E,H,M,D,F,B,L,I,G;y.getSchema().processKeyChecks(true);for(F in C){K=C[F];for(E in K){B=K[E].record;if(B){if(B.phantom||B.dirty||B.dropped){if(A.onDirtyRecord){A.onDirtyRecord(B)}}else{if(A.onCleanRecord){A.onCleanRecord(B)}}}}}if(A.onMatrixChange){for(F in J){M=J[F].left;I=M.slices;z=M.role.association;for(E in I){L=I[E];D=L.members;for(H in D){G=(B=D[H])[2];if(G){A.onMatrixChange(z,B[0],B[1],G)}}}}}return A},_setNoRefs:{refs:false}}},1,0,0,0,0,[[Ext.mixin.Dirty.prototype.mixinId||Ext.mixin.Dirty.$className,Ext.mixin.Dirty],[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.data,"Session"],0));(Ext.cmd.derive("Ext.util.Schedulable",Ext.Base,{"abstract":true,isSchedulable:true,scheduled:false,constructor:function(){this.getScheduler().add(this)},destroy:function(){var g=this,l=g.getScheduler();if(l){l.remove(g)}g.scheduler=null;g.schedule=g.react=Ext.emptyFn;g.callParent()},getFullName:function(){return this.name||this.id},privates:{getScheduler:function(){return this.scheduler},schedule:function(){var g=this,l;if(!g.scheduled){l=g.getScheduler();if(l){g.scheduled=true;if(g.onSchedule){g.onSchedule()}l.scheduleItem(g)}}},unschedule:function(){var g=this,l;if(g.scheduled){l=g.getScheduler();if(l){l.unscheduleItem(g)}g.scheduled=false}},sort:function(){}}},1,0,0,0,0,0,[Ext.util,"Schedulable"],0));(Ext.cmd.derive("Ext.app.bind.BaseBinding",Ext.util.Schedulable,{calls:0,kind:20,defaultOptions:{},lastValue:undefined,constructor:function(s,n,p,q){var o=this;o.options=q;o.owner=s;o.scope=p;o.callback=n;o.lateBound=Ext.isString(n);if(q&&q.deep){o.deep=true}Ext.util.Schedulable.prototype.constructor.call(this)},destroy:function(){var g=this,l=g.owner;if(l){l.onBindDestroy(g)}Ext.util.Schedulable.prototype.destroy.call(this);g.scope=g.callback=g.owner=null},isReadOnly:function(){return true},privates:{getScheduler:function(){var f=this.owner;return f&&f.getScheduler()},getSession:function(){var f=this.owner;return f.isSession?f:f.getSession()},notify:function(m){var n=this,p=n.options||n.defaultOptions,o=n.lastValue;if(!n.calls||n.deep||n.valueChanged(m,o)){++n.calls;n.lastValue=m;if(n.lateBound){n.scope[n.callback](m,o,n)}else{n.callback.call(n.scope,m,o,n)}if(p.single){n.destroy()}}},valueChanged:function(l,m){var n=true;if(m!==l){if(l&&m&&l instanceof Date&&m instanceof Date){n=l.getTime()!==m.getTime()}}else{n=Ext.isArray(l)}return n}}},1,0,0,0,0,0,[Ext.app.bind,"BaseBinding"],0));(Ext.cmd.derive("Ext.app.bind.Binding",Ext.app.bind.BaseBinding,{constructor:function(o,n,q,s){var p=this;Ext.app.bind.BaseBinding.prototype.constructor.call(this,o.owner,n,q,s);p.stub=o;p.depth=o.depth;if(!o.isLoading()&&!o.scheduled){p.schedule()}},destroy:function(l){var n=this,m=n.stub;if(m&&!l){m.unbind(n);n.stub=null}Ext.app.bind.BaseBinding.prototype.destroy.call(this)},bindValidation:function(l,n){var m=this.stub;return m&&m.bindValidation(l,n)},bindValidationField:function(l,n){var m=this.stub;return m&&m.bindValidationField(l,n)},getFullName:function(){return this.fullName||(this.fullName="@("+this.stub.getFullName()+")")},getValue:function(){var l=this,g=l.stub;return g&&g.getValue()},isLoading:function(){var f=this.stub;return f&&f.isLoading()},isReadOnly:function(){var l=this.stub,m=this.options,n=true;if(!(m&&m.twoWay===false)){if(l){n=l.isReadOnly()}}return n},refresh:function(){},setValue:function(f){this.stub.set(f)},privates:{getDataObject:function(){var f=this.stub;return f&&f.getDataObject()},getRawValue:function(){var l=this,g=l.stub;return g&&g.getRawValue()},isDescendantOf:function(l){var g=this.stub;return g?(l===g)||g.isDescendantOf(l):false},react:function(){this.notify(this.getValue())},schedule:function(){if(!this.stub.scheduled){Ext.app.bind.BaseBinding.prototype.schedule.call(this)}},sort:function(){var f=this.stub;f.scheduler.sortItem(f)}}},1,0,0,0,0,0,[Ext.app.bind,"Binding"],0));(Ext.cmd.derive("Ext.app.bind.AbstractStub",Ext.util.Schedulable,{children:null,depth:0,generation:1,kind:10,parent:null,constructor:function(n,m){var l=this;l.owner=n;l.name=m;Ext.util.Schedulable.prototype.constructor.call(this)},destroy:function(){var o=this,p=o.children,u=o.bindings,t,q,s;if(u){for(q=0,t=u.length;q<t;++q){u[q].destroy(true)}}for(s in p){p[s].destroy()}if(o.scheduled){o.unschedule()}Ext.util.Schedulable.prototype.destroy.call(this)},add:function(g){var l=this;(l.children||(l.children={}))[g.name]=g;g.depth=l.depth+1;g.parent=l},getChild:function(g){var l=Ext.isString(g)?g.split("."):g;if(l&&l.length){return this.descend(l,0)}return this},getFullName:function(){var m=this,p=m.fullName,n=m.parent,o;if(!p){p=m.name||m.id;if(n&&(o=n.getFullName())){p=((o.charAt(o.length-1)!==":")?o+".":o)+p}m.fullName=p}return p},getSession:function(){var f=this.owner;return f.isSession?f:f.getSession()},bind:function(u,s,t){var q=this,p=new Ext.app.bind.Binding(q,u,s,t),o=(q.bindings||(q.bindings=[]));p.depth=q.depth;o.push(p);return p},getValue:function(){return this.isLoading()?null:this.getRawValue()},graft:function(p){var o=this,n=o.bindings,s=o.name,q;o.parent=o.bindings=null;o.destroy();p.depth=o.depth;p.bindings=n;p.generation=o.generation+1;p.name=s;p.id=o.id;p.path=o.path;if(n){for(q=n.length;q-->0;){n[q].stub=p}}return p},isDescendantOf:function(g){for(var l=this;l=l.parent;){if(l===g){return true}}return false},onSchedule:function(){for(var q,s,o,n,p=this.parent;p;p=p.parent){n=p.bindings;if(n){for(q=0,s=n.length;q<s;++q){o=n[q];if(o.deep&&!o.scheduled){o.schedule()}}}}},react:function(){var m=this.bindings,n,o,p;if(m){for(o=0,p=m.length;o<p;++o){n=m[o];if(!n.scheduled){n.schedule()}}}},unbind:function(l){var g=this.bindings;if(g&&g.length){Ext.Array.remove(g,l)}},privates:{collect:function(){var q=this.children,u=this.bindings,t=0,p=0,o,s;if(q){for(s in q){o=q[s];p=o.collect();if(p===0){o.destroy();delete q[s]}t+=p}}if(u){t+=u.length}return t},getScheduler:function(){var f=this.owner;return f&&f.getScheduler()},sort:function(){var f=this.parent;if(f){this.scheduler.sortItem(f)}}}},1,0,0,0,0,0,[Ext.app.bind,"AbstractStub"],0));(Ext.cmd.derive("Ext.app.bind.Stub",Ext.app.bind.AbstractStub,{isStub:true,dirty:true,formula:null,validationKey:"validation",constructor:function(s,q,p){var o=this,n=q;Ext.app.bind.AbstractStub.prototype.constructor.call(this,s,q);o.boundValue=null;if(p){p.add(o);if(!p.isRootStub){n=p.path+"."+q}o.checkHadValue()}o.path=n},destroy:function(){var m=this,l=m.formula,n=m.storeBinding;if(l){l.destroy()}if(n){n.destroy()}m.detachBound();Ext.app.bind.AbstractStub.prototype.destroy.call(this)},bindValidation:function(l,m){var n=this.parent;return n&&n.descend([this.validationKey,this.name]).bind(l,m)},bindValidationField:function(u,p){var q=this.parent,s=this.name,o=typeof u==="string",t;if(q){t=q.bind(function(f){var e=null;if(f&&f.isModel){e=f.getField(s)}if(o){p[u](e,f,this)}else{u.call(p,e,f,this)}})}return t||null},descend:function(w,s){var p=this,q=p.children||(p.children={}),v=s||0,t=w[v++],u;if(!(u=q[t])){u=new Ext.app.bind.Stub(p.owner,t,p)}if(v<w.length){u=u.descend(w,v)}return u},getChildValue:function(p){var m=this,n=m.name,o;if(!p&&!Ext.isString(p)){o=m.hadValue?null:undefined}else{o=m.inspectValue(p);if(!o){if(p.isEntity){o=p.data[n]}else{o=p[n]}}}return o},getDataObject:function(){var n=this,s=n.parent.getDataObject(),p=n.name,q=s?s[p]:null,o;if(!q&&s&&s.isEntity){o=s.associations;if(o&&p in o){q=s[o[p].getterName]()}}if(!q||!(q.$className||Ext.isObject(q))){s[p]=q={};n.hadValue=true;n.invalidate(true,true)}return q},getRawValue:function(){return this.getChildValue(this.getParentValue())},graft:function(o){var u=this,p=u.parent,q=u.children,t=u.name,s;o.parent=p;o.children=q;if(p){p.children[t]=o}if(q){for(s in q){q[s].parent=o}}u.children=null;o.checkHadValue();return Ext.app.bind.AbstractStub.prototype.graft.call(this,o)},isLoading:function(){var q=this,s=q.parent,v=false,t,w,p,u;if(s&&!(v=s.isLoading())){w=q.getParentValue();p=q.inspectValue(w);if(p){v=p.isLoading()}else{if(w&&w.isModel){t=w.associations;if(!(t&&q.name in t)){v=false;u=true}}if(!u){v=!q.hadValue&&q.getRawValue()===undefined}}}return v},invalidate:function(q,s){var n=this,o=n.children,p;n.checkHadValue();n.dirty=true;if(!s&&!n.isLoading()){if(!n.scheduled){n.schedule()}}if(q&&o){for(p in o){o[p].invalidate(q,s)}}},isReadOnly:function(){var f=this.formula;return !!(f&&!f.set)},set:function(t){var u=this,C=u.parent,B=u.name,w=u.formula,v,z,A,y,x;if(w&&!w.settingValue&&w.set){w.setValue(t);return}else{if(u.isLinkStub){y=u.getLinkFormulaStub();w=y?y.formula:null;if(w){w.setValue(t);return}}}v=C.getDataObject();if(v.isEntity){z=v.associations;if(z&&(B in z)){A=z[B];x=A.setterName;if(x){v[x](t)}u.invalidate(true)}else{v.set(B,t)}}else{if((t&&t.constructor===Object)||t!==v[B]){if(!u.setByLink(t)){if(t===undefined){delete v[B]}else{v[B]=t}u.inspectValue(v);u.invalidate(true)}}}},onStoreLoad:function(){this.invalidate(true)},afterLoad:function(f){this.invalidate(true)},afterCommit:function(f){this.afterEdit(f,null)},afterEdit:function(u,x){var y=this.children,w=x&&x.length,q=u.associations,s,t,v;if(y){if(w){for(t=0;t<w;++t){v=y[x[t]];if(v){v.invalidate()}}}else{for(s in y){if(!(q&&s in q)){y[s].invalidate()}}}}this.invalidate()},afterReject:function(f){this.afterEdit(f,null)},afterAssociatedRecordSet:function(s,o,n){var p=this.children,q=n.role;if(p&&q in p){p[q].invalidate(true)}},setByLink:function(q){var s=this,v=0,u,t,w,n;for(n=s;n;n=n.parent){if(n.isLinkStub){t=n;if(v){for(w=[],u=0,n=s;n!==t;n=n.parent){++u;w[v-u]=n.name}}break}++v}if(!t||!(n=t.getTargetStub())){return false}if(w){n=n.descend(w)}n.set(q);return true},setFormula:function(l){var n=this,m=n.formula;if(m){m.destroy()}n.formula=new Ext.app.bind.Formula(n,l)},react:function(){var n=this,o=this.boundValue,p=n.children,m;if(o){if(o.isValidation){o.refresh();m=o.generation;if(n.lastValidationGeneration===m){return}n.lastValidationGeneration=m}else{if(o.isModel){if(p&&p[n.validationKey]){o.isValid()}}else{if(o.isStore){if(o.isLoading()&&!o.loadCount){return}}}}}Ext.app.bind.AbstractStub.prototype.react.call(this)},privates:{checkHadValue:function(){if(!this.hadValue){this.hadValue=this.getRawValue()!==undefined}},collect:function(){var n=this,p=Ext.app.bind.AbstractStub.prototype.collect.call(this),o=n.storeBinding?1:0,m=n.formula?1:0;return p+o+m},getLinkFormulaStub:function(){var f=this;while(f.isLinkStub){f=f.binding.stub}return f.formula?f:null},getParentValue:function(){var f=this;if(f.dirty){f.parentValue=f.parent.getValue();f.dirty=false}return f.parentValue},setStore:function(f){this.storeBinding=f},inspectValue:function(u){var t=this,A=t.name,w=t.boundValue,z=null,y,s,x,v;if(u&&u.isEntity){y=u.associations;if(y&&(A in y)){z=u[y[A].getterName]();if(z&&z.isStore){z.$associatedStore=true}}else{if(A===t.validationKey){z=u.getValidation();t.lastValidationGeneration=null}}}else{if(u){s=u[A];if(s&&(s.isModel||s.isStore)){z=s}}}x=w!==z;if(x){if(w){t.detachBound()}if(z){if(z.isModel){z.join(t)}else{v=z.associatedEntity;if(v&&z.autoLoad!==false&&!z.complete&&!z.hasPendingLoad()){z.load()}z.on({scope:t,load:{fn:"onStoreLoad",single:true},destroy:"onDestroyBound"})}}t.boundValue=z}return z},detachBound:function(){var l=this,g=l.boundValue;if(g){if(g.isModel){g.unjoin(l)}else{g.un({scope:l,load:"onStoreLoad",destroy:"onDestroyBound"})}}},onDestroyBound:function(){if(!this.owner.destroying){this.set(null)}},sort:function(){var n=this,m=n.formula,p=n.scheduler,o=n.storeBinding;Ext.app.bind.AbstractStub.prototype.sort.call(this);if(o){p.sortItem(o)}if(m){p.sortItem(m)}}}},1,0,0,0,0,0,[Ext.app.bind,"Stub"],0));(Ext.cmd.derive("Ext.app.bind.LinkStub",Ext.app.bind.Stub,{isLinkStub:true,binding:null,destroy:function(){var m=this,l=m.binding,n=m.owner;if(l){m.binding=null;l.destroy();if(n){delete n.linkData[m.name]}}m.target=null;Ext.app.bind.Stub.prototype.destroy.call(this)},getFullName:function(){var f=this;return f.fullName||(f.fullName="("+Ext.app.bind.Stub.prototype.getFullName.call(this)+" -> "+f.binding.getFullName()+")")},getDataObject:function(){var f=this.binding;return f&&f.getDataObject()},getRawValue:function(){var f=this.binding;return f&&f.getRawValue()},getValue:function(){var f=this.binding;return f&&f.getValue()},getTargetStub:function(){var f=this.binding;return f&&f.stub},isLoading:function(){var f=this.binding;return f?f.isLoading():false},link:function(m,o){var p=this,n=p.binding;if(n){n.destroy()}o=p.target=o||p.owner;p.linkDescriptor=m;p.binding=o.bind(m,p.onChange,p);p.binding.deep=true},onChange:function(){this.invalidate(true)},react:function(){var g=this,l=g.owner.linkData;l[g.name]=g.getValue();Ext.app.bind.Stub.prototype.react.call(this)},privates:{collect:function(){var m=this,n=Ext.app.bind.Stub.prototype.collect.call(this),l=m.binding?1:0;return n+l},sort:function(){var f=this.binding;if(f){this.scheduler.sortItem(f)}}}},0,0,0,0,0,0,[Ext.app.bind,"LinkStub"],0));(Ext.cmd.derive("Ext.app.bind.RootStub",Ext.app.bind.AbstractStub,{isRootStub:true,depth:0,createRootChild:function(B,x){var t=this,A=t.owner,w=A.getData(),z=t.children,u=z&&z[B],v=u?null:t,C,y;if(x||w.hasOwnProperty(B)||!(C=A.getParent())){y=new Ext.app.bind.Stub(A,B,v)}else{y=new Ext.app.bind.LinkStub(A,B,u?null:v);y.link("{"+B+"}",C)}if(u){u.graft(y)}return y},createStubChild:function(f){return this.createRootChild(f,true)},descend:function(w,s){var p=this,q=p.children,v=s||0,t=w[v++],u=(q&&q[t])||p.createRootChild(t);if(v<w.length){u=u.descend(w,v)}return u},getFullName:function(){return this.fullName||(this.fullName=this.owner.id+":")},getDataObject:function(){return this.owner.data},getRawValue:function(){return this.owner.data},getValue:function(){return this.owner.data},isDescendantOf:function(){return false},isLoading:function(){return false},set:function(v){var w=this,A=w.children||(w.children={}),B=w.owner,y=B.data,C=B.getParent(),x,z,t,u;for(u in v){if((t=v[u])!==undefined){if(!(z=A[u])){z=new Ext.app.bind.Stub(B,u,w)}else{if(z.isLinkStub){if(!z.getLinkFormulaStub()){x=z;z=new Ext.app.bind.Stub(B,u);x.graft(z)}}}z.set(t)}else{if(y.hasOwnProperty(u)){delete y[u];z=A[u];if(z){if(!z.isLinkStub&&C){z=w.createRootChild(u)}z.invalidate(true)}}}}},schedule:Ext.emptyFn,unschedule:Ext.emptyFn},0,0,0,0,0,0,[Ext.app.bind,"RootStub"],0));(Ext.cmd.derive("Ext.app.bind.Multi",Ext.app.bind.BaseBinding,{isMultiBinding:true,missing:1,deep:true,constructor:function(p,u,v,s,t){var q=this,w=t&&t.trackStatics;Ext.app.bind.BaseBinding.prototype.constructor.call(this,u,v,s,t);q.bindings=[];q.literal=p.$literal;if(p.constructor===Object){if(w){q.staticKeys=[]}q.addObject(p,q.lastValue={},q.staticKeys)}else{q.addArray(p,q.lastValue=[])}if(!--q.missing&&!q.scheduled){q.schedule()}},destroy:function(){var f=this;f.bindings=Ext.destroy(f.bindings);Ext.app.bind.BaseBinding.prototype.destroy.call(this)},add:function(z,v,s){var t=this,x=t.owner,y=t.bindings,A=t.literal?(z.reference?"bindEntity":"bindExpression"):"bind",u,w;++t.missing;u=x[A](z,function(e){v[s]=e;if(u.calls===1){--t.missing}if(!t.missing&&!t.scheduled){t.schedule()}},t,null);w=u.depth;if(!y.length||w<t.depth){t.depth=w}y.push(u);return !this.isBindingStatic(u)},addArray:function(v,u){var n=this,x=v.length,t=false,y,w,s;for(s=0;s<x;++s){w=v[s];if(w&&(w.reference||Ext.isString(w))){y=n.add(w,u,s)}else{if(Ext.isArray(w)){y=n.addArray(w,u[s]=[])}else{if(w&&w.constructor===Object){y=n.addObject(w,u[s]={})}else{u[s]=w;y=false}}}t=t||y}return t},addObject:function(u,q,x){var y=this,s=false,w,v,t;for(t in u){v=u[t];if(v&&(v.reference||Ext.isString(v))){w=y.add(v,q,t)}else{if(Ext.isArray(v)){w=y.addArray(v,q[t]=[])}else{if(v&&v.constructor===Object){w=y.addObject(v,q[t]={})}else{q[t]=v;w=false}}}if(x&&!w){x.push(t)}s=s||w}return s},getFullName:function(){var p=this,o=p.fullName,n=p.bindings,q=n.length,s;if(!o){o="@[";for(s=0;s<q;++s){if(s){o+=","}o+=n[s].getFullName()}o+="]";p.fullName=o}return o},getRawValue:function(){return this.lastValue},isDescendantOf:function(){return false},isLoading:function(){for(var g=this.bindings,l=g.length;l-->0;){if(g[l].isLoading()){return true}}return false},isBindingStatic:function(f){return f.isTemplateBinding&&f.isStatic},isStatic:function(){var m=this.bindings,p=m.length,o,n;for(o=0;o<p;++o){n=m[o];if(!this.isBindingStatic(n)){return false}}return true},pruneStaticKeys:function(){var m=Ext.apply({},this.lastValue),n=this.staticKeys,p=n.length,o;for(o=0;o<p;++o){delete m[n[o]]}return m},react:function(){this.notify(this.lastValue)},refresh:function(){},privates:{sort:function(){this.scheduler.sortItems(this.bindings)}}},1,0,0,0,0,0,[Ext.app.bind,"Multi"],0));(Ext.cmd.derive("Ext.app.bind.Formula",Ext.util.Schedulable,{statics:{getFormulaParser:function(o){var p=this.formulaCache,m,n;if(!p){p=this.formulaCache=new Ext.util.LruCache({maxSize:20})}m=p.get(o);if(!m){n="[^\\.a-z0-9_]"+o+"\\(\\s*(['\"])(.*?)\\1\\s*\\)";m=new RegExp(n,"gi");p.add(o,m)}return m}},isFormula:true,calculation:null,explicit:false,set:null,single:false,argumentNamesRe:/^function\s*\(\s*([^,\)\s]+)/,constructor:function(x,w){var y=this,u=x.owner,s,q,v,t;y.owner=u;y.stub=x;Ext.util.Schedulable.prototype.constructor.call(this);if(w instanceof Function){y.get=v=w}else{y.get=v=w.get;y.set=w.set;q=w.bind;if(w.single){y.single=w.single}if(q){s=q.bindTo;if(s){t=Ext.apply({},q);delete t.bindTo;q=s}}}if(q){y.explicit=true}else{q=v.$expressions||y.parseFormula(v)}y.binding=u.bind(q,y.onChange,y,t)},destroy:function(){var n=this,l=n.binding,m=n.stub;if(l){l.destroy();n.binding=null}if(m){m.formula=null}Ext.util.Schedulable.prototype.destroy.call(this);n.getterFn=n.owner=null},getFullName:function(){return this.fullName||(this.fullName=this.stub.getFullName()+"="+Ext.util.Schedulable.prototype.getFullName.call(this)+")")},getRawValue:function(){return this.calculation},onChange:function(){if(!this.scheduled){this.schedule()}},parseFormula:function(v){var w=v.toString(),q={$literal:true},s,t,u,p;s=this.argumentNamesRe.exec(w);t=s?s[1]:"get";u=Ext.app.bind.Formula.getFormulaParser(t);while((s=u.exec(w))){p=s[2];q[p]=p}q.$literal=true;v.$expressions=q;return q},react:function(){var p=this,q=p.owner,o=p.binding.lastValue,n=p.getterFn,s;if(p.explicit){s=o}else{s=q.getFormulaFn(o)}p.settingValue=true;p.stub.set(p.calculation=p.get.call(q,s));p.settingValue=false;if(p.single){p.destroy()}},setValue:function(f){this.set.call(this.stub.owner,f)},privates:{getScheduler:function(){var f=this.owner;return f&&f.getScheduler()},sort:function(){var l=this,g=l.binding;if(!g.destroyed){l.scheduler.sortItem(g)}}}},1,0,0,0,0,0,[Ext.app.bind,"Formula"],0));(Ext.cmd.derive("Ext.util.Fly",Ext.Base,{inheritableStatics:{flyPoolSize:2,fly:function(){var l=this,m=l.flyweights||(l.flyweights=[]),n=m.length?m.pop():new l();n.reset.apply(n,arguments);return n}},release:function(){var l=this,m=l.self,n=m.flyweights||(m.flyweights=[]);l.reset();if(n.length<m.flyPoolSize){n.push(l)}},reset:Ext.emptyFn},0,0,0,0,0,0,[Ext.util,"Fly"],0));(Ext.cmd.derive("Ext.parse.Tokenizer",Ext.util.Fly,function(s){var t=(s.flyweights=[]),x={literal:true,"boolean":true},v={error:true},A={ident:true},z={literal:true},w={literal:true,nil:true},y={literal:true,number:true},u={literal:true,string:true};return{isTokenizer:true,statics:{BOOLEAN:x,ERROR:v,IDENT:A,LITERAL:z,NULL:w,NUMBER:y,STRING:u},config:{keywords:{"null":{type:"literal",is:w,value:null},"false":{type:"literal",is:x,value:false},"true":{type:"literal",is:x,value:true}},operators:{"+":"plus","-":"minus","*":"multiply","/":"divide","!":"bang",",":"comma",":":"colon","[":"arrayOpen","]":"arrayClose","{":"curlyOpen","}":"curlyClose","(":"parenOpen",")":"parenClose"}},error:null,index:-1,constructor:function(e){this.operators={};this.initConfig(e)},next:function(){var e=this.peek();this.head=undefined;return e},peek:function(){var e=this,g=e.error,f=e.head;if(g){return g}if(f===undefined){e.head=f=e.advance()}return f},release:function(){this.reset();if(t.length<s.flyPoolSize){t.push(this)}},reset:function(f,e,l){var g=this;g.error=null;g.head=undefined;g.index=-1;g.text=f||null;g.pos=e||0;g.end=(f&&l==null)?f.length:l;return g},privates:{digitRe:/[0-9]/,identFirstRe:/[a-z_$]/i,identRe:/[0-9a-z_$]/i,spaceRe:/[ \t]/,end:0,head:undefined,pos:0,text:null,applyOperators:function(o){var m=this.operators,n,e,p,l,f,q,g;for(g in o){n=m;q=o[g];f=g.length;for(l=0;l<f;++l){e=g.charAt(l);n=n[e]||(n[e]={})}if(q){n.token=p={type:"operator",value:g,is:{operator:true}};p.is[q]=true}else{n.token=null}}},advance:function(){var g=this,m=g.spaceRe,f=g.text,l=g.end,e;while(g.pos<l){e=f.charAt(g.pos);if(m.test(e)){++g.pos;continue}g.index=g.pos;return g.parse(e)}return null},parse:function(e){var g=this,m=g.digitRe,f=g.text,l=g.end,n;if(e==="."&&g.pos+1<l){if(m.test(f.charAt(g.pos+1))){n=g.parseNumber()}}if(!n&&g.operators[e]){n=g.parseOperator(e)}if(!n){if(e==='"'||e==="'"){n=g.parseString()}else{if(m.test(e)){n=g.parseNumber()}else{if(g.identFirstRe.test(e)){n=g.parseIdent()}else{n=g.syntaxError("Unexpected character")}}}}return n},parseIdent:function(){var g=this,o=g.identRe,n=g.getKeywords(),m=!g.operators["."],e=g.text,E=g.pos,p=E,D=g.end,q=0,l,f;while(p<D){l=e.charAt(p);if(m&&l==="."){if(q==="."){return g.syntaxError(p,"Unexpected dot operator")}++p}else{if(o.test(l)){++p}else{break}}q=l}if(q==="."){return g.syntaxError(p-1,"Unexpected dot operator")}f=e.substring(E,g.pos=p);return(n&&n[f])||{type:"ident",is:A,value:f}},parseNumber:function(){var f=this,m=f.digitRe,e=f.text,q=f.pos,p=f.end,g,l,n,o;while(f.pos<p){g=e.charAt(f.pos);if(g==="-"||g==="+"){if(f.pos!==q){return f.syntaxError(q,"Invalid number")}++f.pos}else{if(g==="."){if(l){break}l=true;++f.pos}else{if(g==="e"||g==="E"){if(n){break}l=n=true;g=e.charAt(++f.pos);if(g==="-"||g==="+"){++f.pos}}else{if(m.test(g)){++f.pos}else{break}}}}}o={type:"literal",is:y,value:+e.substring(q,f.pos)};if(!isFinite(o.value)){o=f.syntaxError(q,"Invalid number")}return o},parseOperator:function(g){var f=this,o=f.operators,e=f.text,q=f.end,n=f.pos,l,m,p;while(o[g]){o=o[g];p=o.token;++n;if(p){l=p;m=n}if(n<q){g=e.charAt(n)}else{break}}if(l){f.pos=m}return l},parseString:function(){var g=this,e=g.text,f=g.pos,p=f,o=g.end,l="",m,n,q;q=e.charAt(f++);while(f<o){m=e.charAt(f++);if(m===q){n=true;break}if(m==="\\"&&f<o){m=e.charAt(f++)}l+=m}g.pos=f;if(!n){return g.syntaxError(p,"Unterminated string")}return{type:"literal",is:u,value:l}},syntaxError:function(l,f){if(typeof l==="string"){f=l;l=this.pos}var e=(l==null)?"":(" (at index "+l+")"),g=new Error(f+e);g.type="error";g.is=v;if(e){g.at=l}return this.error=g}}}},1,0,0,0,0,0,[Ext.parse,"Tokenizer"],0));(Ext.cmd.derive("Ext.parse.Symbol",Ext.Base,{priority:0,constructor:function(m,p){var o=this,n=o.defaultProperty;if(p&&typeof p==="object"){Ext.apply(o,p)}else{if(p!==undefined&&n){o[n]=p}}o.id=m},led:function(){this.parser.syntaxError(this.at,"Missing operator")},nud:function(){this.parser.syntaxError(this.at,"Undefined")},update:function(q){if(q&&typeof q==="object"){var o=this,p=q.priority,n=q.led,s=q.nud;if(o.priority<=p){o.priority=p}if(n){o.led=n}if(s){o.nud=s}}}},1,0,0,0,0,0,[Ext.parse,"Symbol"],0));(Ext.cmd.derive("Ext.parse.symbol.Constant",Ext.parse.Symbol,{arity:"literal",isLiteral:true,defaultProperty:"value",constructor:function(g,l){Ext.parse.Symbol.prototype.constructor.call(this,g,l);this._value=this.value},nud:function(){var f=this;f.value=f._value;f.arity="literal";f.isLiteral=true;return f}},1,0,0,0,0,0,[Ext.parse.symbol,"Constant"],0));(Ext.cmd.derive("Ext.parse.symbol.Infix",Ext.parse.Symbol,{arity:"binary",isBinary:true,defaultProperty:"priority",led:function(g){var l=this;l.lhs=g;l.rhs=l.parser.parseExpression(l.priority);l.arity="binary";l.isBinary=true;return l}},0,0,0,0,0,0,[Ext.parse.symbol,"Infix"],0));(Ext.cmd.derive("Ext.parse.symbol.InfixRight",Ext.parse.symbol.Infix,{led:function(g){var l=this;l.lhs=g;l.rhs=l.parser.parseExpression(l.priority-1);l.arity="binary";l.isBinary=true;return l}},0,0,0,0,0,0,[Ext.parse.symbol,"InfixRight"],0));(Ext.cmd.derive("Ext.parse.symbol.Paren",Ext.parse.Symbol,{arity:"binary",isBinary:true,priority:80,led:function(p){var q=this,t=[],u=q.parser,o=p.id,s=p.arity;if(o!=="."&&o!=="["){if((s!=="unary"||o!=="function")&&s!=="ident"&&o!=="("&&o!=="&&"&&o!=="||"&&o!=="?"){u.syntaxError(p.at,"Expected a variable name.")}}q.arity="invoke";q.isInvoke=true;q.operand=p;q.args=t;while(u.token.id!==")"){if(t.length){u.advance(",")}t.push(u.parseExpression())}u.advance(")");return q},nud:function(){var g=this.parser,l=g.parseExpression();g.advance(")");return l}},0,0,0,0,0,0,[Ext.parse.symbol,"Paren"],0));(Ext.cmd.derive("Ext.parse.symbol.Prefix",Ext.parse.Symbol,{arity:"unary",isUnary:true,priority:70,nud:function(){var f=this;f.operand=f.parser.parseExpression(f.priority);f.arity="unary";f.isUnary=true;return f}},0,0,0,0,0,0,[Ext.parse.symbol,"Prefix"],0));(Ext.cmd.derive("Ext.parse.Parser",Ext.util.Fly,function(){var f=function(){return this};return{isParser:true,config:{constants:{"null":null,"false":false,"true":true},infix:{"+":50,"-":50,"*":60,"/":60},infixRight:{"&&":30,"||":30},prefix:{"!":0,"-":0,"+":0},symbols:{":":0,",":0,")":0,"[":0,"]":0,"{":0,"}":0,"(end)":0,"(ident)":{arity:"ident",isIdent:true,nud:f},"(literal)":{arity:"literal",isLiteral:true,nud:f},"(":{xclass:"Ext.parse.symbol.Paren"}},tokenizer:{keywords:null}},token:null,constructor:function(e){this.symbols={};this.initConfig(e)},advance:function(v){var t=this,A=t.tokenizer,x=A.peek(),z=t.symbols,u=A.index,w,y,e;if(t.error){throw t.error}if(v){t.expect(v)}if(!x){return t.token=z["(end)"]}A.next();w=x.is;e=x.value;if(w.ident){y=z[e]||z["(ident)"]}else{if(w.operator){if(!(y=z[e])){t.syntaxError(x.at,'Unknown operator "'+e+'"')}}else{if(w.literal){y=z["(literal)"]}else{t.syntaxError(x.at,"Unexpected token")}}}t.token=y=Ext.Object.chain(y);y.at=u;y.value=e;if(!y.arity){y.arity=x.type}return y},expect:function(e){var l=this.token;if(e!==l.id){this.syntaxError(l.at,'Expected "'+e+'"')}return this},parseExpression:function(p){var n=this,o=n.token,e;p=p||0;n.advance();e=o.nud();while(p<(o=n.token).priority){n.advance();e=o.led(e)}return e},reset:function(n,e,p){var o=this;o.error=o.token=null;o.tokenizer.reset(n,e,p);o.advance();return o},syntaxError:function(p,n){if(typeof p==="string"){n=p;p=this.pos}var e=(p==null)?"":(" (at index "+p+")"),o=new Error(n+e);o.type="error";if(e){o.at=p}throw this.error=o},privates:{error:null,addSymbol:function(z,w,A,u){var y=this.symbols,v=y[z],e,x,t;if(v){if(typeof w==="object"){e=w}else{if(u&&A){u=Ext.Array.from(u);x=u.length;e={};for(t=0;t<x;t++){e[u[t]]=A.prototype[u[t]]}}else{return v}}v.update(e)}else{if(w&&w.xclass){A=Ext.ClassManager.get(w.xclass)}else{A=A||Ext.parse.Symbol}y[z]=v=new A(z,w);v.parser=this}return v},addSymbols:function(p,o,e){for(var n in p){this.addSymbol(n,p[n],o,e)}},applyConstants:function(e){this.addSymbols(e,Ext.parse.symbol.Constant,"nud")},applyInfix:function(e){this.addSymbols(e,Ext.parse.symbol.Infix,"led")},applyInfixRight:function(e){this.addSymbols(e,Ext.parse.symbol.InfixRight,"led")},applyPrefix:function(e){this.addSymbols(e,Ext.parse.symbol.Prefix,"nud")},applySymbols:function(e){this.addSymbols(e)},applyTokenizer:function(e){var l=e;if(e&&!e.isTokenizer){l=new Ext.parse.Tokenizer(e)}this.tokenizer=l}}}},1,0,0,0,0,0,[Ext.parse,"Parser"],0));(Ext.cmd.derive("Ext.app.bind.Parser",Ext.parse.Parser,{infix:{":":{priority:70,led:function(g){var l=this;l.arity="formatter";l.operand=g;l.fmt=l.parser.parseFmt();return l}},"?":{priority:20,led:function(o){var q=this,n=q.parser,p=n.symbols[":"],s;q.condition=o;s=p.priority;p.priority=0;q.tv=n.parseExpression(0);q.parser.advance(":");p.priority=s;q.fv=n.parseExpression(0);q.arity="ternary";return q}},"===":40,"!==":40,"==":40,"!=":40,"<":40,"<=":40,">":40,">=":40},symbols:{"(":{nud:function(){var m=this.parser,n=m.symbols[":"],o,p;p=n.priority;n.priority=70;o=m.parseExpression();m.advance(")");n.priority=p;return o}}},prefix:{"@":0},tokenizer:{operators:{"@":"at","?":"qmark","===":"feq","!==":"fneq","==":"eq","!=":"neq","<":"lt","<=":"lte",">":"gt",">=":"gte","&&":"and","||":"or"}},compileExpression:function(n,o){var p=this,s,q;p.tokens=n;p.tokensMap=o;q=p.parseSlot(p.parseExpression(),s);p.tokens=p.tokensMap=null;return q},compileFormat:function(){var f;f=this.parseSlot({arity:"formatter",fmt:this.parseFmt(),operand:{arity:"ident",value:"dummy"}});this.expect("(end)");return f},privates:{useEval:Ext.isGecko,escapeRe:/("|'|\\)/g,parseFmt:function(){var n=this,p=[],o=n.symbols[":"].priority,m;do{if(p.length){n.advance()}m=n.parseExpression(o);if(m.isIdent||m.isInvoke){p.push(m)}else{n.syntaxError(m.at,"Expected formatter name")}}while(n.token.id===":");return p},parseSlot:function(E,C){var v=this,z=[],x=[],w=v.tokens||[],u,B,y,A,D;v.definitions=z;v.body=x;x.push("return "+v.compile(E)+";");A=w.length;B="var fm = Ext.util.Format,\nme,";D="var a = Ext.Array.from(values);\nme = scope;\n";if(w.length){for(y=0;y<A;y++){B+="v"+y+((y==A-1)?";":",");D+="v"+y+" = a["+y+"]; "}}else{B+="v0;";D+="v0 = a[0];"}z=Ext.Array.insert(z,0,[B]);x=Ext.Array.insert(x,0,[D]);x=x.join("\n");z.push((v.useEval?"$=":"return")+" function (values, scope) {",x,"}");B=z.join("\n");u=v.useEval?v.evalFn(B):(new Function("Ext",B))(Ext);v.definitions=v.body=null;return u},compile:function(l){var m=this,n;switch(l.arity){case"ident":return m.addToken(l.value);case"literal":n=l.value;return(typeof n==="string")?'"'+String(n).replace(m.escapeRe,"\\$1")+'"':n;case"unary":return m.compileUnary(l);case"binary":return m.compileBinary(l);case"ternary":return m.compileTernary(l);case"formatter":return m.compileFormatter(l)}return this.syntaxError(l.at,"Compile error! Unknown symbol")},compileUnary:function(m){var n=m.value,l=m.operand;if(n==="!"||n==="-"||n==="+"){return n+"("+this.compile(l)+")"}else{if(n==="@"){if(!l.isIdent){return this.syntaxError(m.at,"Compile error! Unexpected symbol")}return l.value}}return""},compileBinary:function(f){return"("+this.compile(f.lhs)+" "+f.value+" "+this.compile(f.rhs)+")"},compileTernary:function(f){return"("+this.compile(f.condition)+" ? "+this.compile(f.tv)+" : "+this.compile(f.fv)+")"},compileFormatter:function(u){var o=this,s=u.fmt,p=s.length,t=["var ret;"],q;if(s.length){t.push("ret = "+o.compileFormatFn(s[0],o.compile(u.operand))+";");for(q=1;q<p;q++){t.push("ret = "+o.compileFormatFn(s[q],"ret")+";")}}t.push("return ret;");return o.addFn(t.join("\n"))},compileFormatFn:function(v,w){var u,t=[],p="",q,s;if(v.isIdent){u=v.value}else{if(v.isInvoke){u=v.operand.value;t=v.args}}if(u.substring(0,5)==="this."){u="me."+u.substring(5)}else{if(!(u in Ext.util.Format)){return this.syntaxError(v.at,'Compile error! Invalid format specified "'+u+'"')}u="fm."+u}p+=w;q=t.length;for(s=0;s<q;s++){p+=", "+this.compile(t[s])}return u+"("+p+")"},addFn:function(m){var n=this.definitions,l="f"+n.length;n.push("function "+l+"() {",m,"}");return l+"()"},evalFn:function($){eval($);return $},addToken:function(p){var o=this.tokensMap,n=this.tokens,m=0;if(o&&n){if(p in o){m=o[p]}else{o[p]=m=n.length;n.push(p)}}return"v"+m}}},0,0,0,0,0,0,[Ext.app.bind,"Parser"],0));(Ext.cmd.derive("Ext.app.bind.Template",Ext.Base,{buffer:null,slots:null,tokens:null,constructor:function(m){var n=this,o=n._initters,p;n.text=m;for(p in o){n[p]=o[p]}},_initters:{apply:function(l,g){return this.parse().apply(l,g)},getTokens:function(){return this.parse().getTokens()}},apply:function(u,q){var x=this,s=x.slots,w=x.buffer,y=s.length,t,v;for(t=0;t<y;++t){v=s[t];if(v){w[t]=v(u,q)}}if(v&&x.single){return w[0]}return w.join("")},getTokens:function(){return this.tokens},isStatic:function(){var g=this.getTokens(),l=this.slots;return(g.length===0&&l.length===0)},privates:{parse:function(){var v=this,s=v.text,A=Ext.app.bind.Parser.fly(),y=(v.buffer=[]),w=(v.slots=[]),t=0,z=s.length,u=0,x;for(x in v._initters){delete v[x]}v.tokens=[];v.tokensMap={};for(x=0;x<z;){t=x;if((x=s.indexOf("{",t))<0){y[u++]=s.substring(t);break}if(t<x){y[u++]=s.substring(t,x)}A.reset(s,x+1);w[u++]=A.compileExpression(v.tokens,v.tokensMap);x=A.token.at+1;A.expect("}")}A.release();v.single=y.length===0&&w.length===1;return v}}},1,0,0,0,0,0,[Ext.app.bind,"Template"],0));(Ext.cmd.derive("Ext.app.bind.TemplateBinding",Ext.app.bind.BaseBinding,{isTemplateBinding:true,lastValue:undefined,value:undefined,constructor:function(q,w,v,s,t){var y=this,u=new Ext.app.bind.Template(q),x=u.getTokens();Ext.app.bind.BaseBinding.prototype.constructor.call(this,w,v,s,t);y.tpl=u;y.tokens=x;x.$literal=true;if(!u.isStatic()){y.multiBinding=new Ext.app.bind.Multi(x,w,y.onBindData,y)}else{y.isStatic=true;y.onData(u.text)}},destroy:function(){var f=this;Ext.destroy(f.multiBinding);f.tpl=f.multiBinding=null;Ext.app.bind.BaseBinding.prototype.destroy.call(this)},getFullName:function(){var f=this.multiBinding;return this.fullName||(this.fullName="$"+(f?f.getFullName():Ext.app.bind.BaseBinding.prototype.getFullName.call(this)))},getRawValue:function(){return this.value},getTemplateScope:function(){return null},isDescendantOf:function(){return false},isLoading:function(){var f=this.multiBinding;return f?f.isLoading():false},onBindData:function(f){this.onData(this.tpl.apply(f,this.getTemplateScope()))},onData:function(l){var m=this,n=m.value;if(n!==(m.value=l)){m.lastValue=n;m.schedule()}},react:function(){this.notify(this.value)},refresh:function(){var f=this.multiBinding;if(f){f.refresh()}},privates:{sort:function(){var f=this.multiBinding;if(f){this.scheduler.sortItem(f)}}}},1,0,0,0,0,0,[Ext.app.bind,"TemplateBinding"],0));(Ext.cmd.derive("Ext.data.ChainedStore",Ext.data.AbstractStore,{config:{source:null,remoteFilter:false,remoteSort:false},remove:function(){var f=this.getSource();return f.remove.apply(f,arguments)},removeAll:function(){var f=this.getSource();return f.removeAll()},getData:function(){var l=this,g=l.data;if(!g){l.data=g=l.constructDataCollection()}return g},getTotalCount:function(){return this.getCount()},getSession:function(){return this.getSource().getSession()},applySource:function(f){if(f){f=Ext.data.StoreManager.lookup(f)}return f},updateSource:function(m,o){var p=this,n;if(o&&!o.destroyed){o.removeObserver(p)}if(m){n=p.getData();n.setSource(m.getData());if(!p.isInitializing){p.fireEvent("refresh",p);p.fireEvent("datachanged",p)}m.addObserver(p)}},getModel:function(){return this.getSource().getModel()},getProxy:function(){return null},onCollectionAdd:function(o,p){var q=this,s=p.items,n=!p.next;if(q.ignoreCollectionAdd){return}q.fireEvent("add",q,s,p.at);if(n){q.fireEvent("datachanged",q)}},onCollectionItemChange:function(u,o){var p=this,t=o.item,q=o.modified||null,s=o.meta;p.onUpdate(t,s,q,o);p.fireEvent("update",p,t,s,q,o)},onCollectionUpdateKey:function(g,l){this.fireEvent("idchanged",this,l.item,l.oldKey,l.newKey)},onUpdate:Ext.emptyFn,onCollectionRemove:function(o,p){var q=this,s=p.items,n=!p.next;if(q.ignoreCollectionRemove){return}q.fireEvent("remove",q,s,p.at,false);if(n){q.fireEvent("datachanged",q)}},onSourceBeforeLoad:function(g,l){this.fireEvent("beforeload",this,l)},onSourceAfterLoad:function(n,o,m,p){this.fireEvent("load",this,o,m,p)},onFilterEndUpdate:function(){Ext.data.AbstractStore.prototype.onFilterEndUpdate.apply(this,arguments);this.callObservers("Filter")},onSourceBeforePopulate:function(){this.ignoreCollectionAdd=true;this.callObservers("BeforePopulate")},onSourceAfterPopulate:function(){var f=this;f.ignoreCollectionAdd=false;f.fireEvent("datachanged",f);f.fireEvent("refresh",f);this.callObservers("AfterPopulate")},onSourceBeforeClear:function(){this.ignoreCollectionRemove=true;this.callObservers("BeforeClear")},onSourceAfterClear:function(){this.ignoreCollectionRemove=false;this.callObservers("AfterClear")},onSourceBeforeRemoveAll:function(){this.ignoreCollectionRemove=true;this.callObservers("BeforeRemoveAll")},onSourceAfterRemoveAll:function(l,n){var m=this;m.ignoreCollectionRemove=false;if(!n){m.fireEvent("clear",m);m.fireEvent("datachanged",m)}this.callObservers("AfterRemoveAll",[n])},onSourceFilter:function(){var f=this;f.fireEvent("refresh",f);f.fireEvent("datachanged",f)},hasPendingLoad:function(){return this.getSource().hasPendingLoad()},isLoaded:function(){return this.getSource().isLoaded()},isLoading:function(){return this.getSource().isLoading()},doDestroy:function(){var f=this;f.observers=null;f.setSource(null);f.getData().destroy(true);f.data=null;Ext.data.AbstractStore.prototype.doDestroy.call(this)},privates:{isMoving:function(){var f=this.getSource();return f.isMoving?f.isMoving.apply(f,arguments):false},loadsSynchronously:function(){return this.getSource().loadsSynchronously()}}},0,0,0,0,["store.chained"],[[Ext.data.LocalStore.prototype.mixinId||Ext.data.LocalStore.$className,Ext.data.LocalStore]],[Ext.data,"ChainedStore"],0));(Ext.cmd.derive("Ext.app.ViewModel",Ext.Base,{isViewModel:true,factoryConfig:{name:"viewModel"},collectTimeout:100,expressionRe:/^(?:\{(?:(\d+)|([a-z_][\w\-\.]*))\})$/i,$configStrict:false,config:{data:true,formulas:{$value:null,merge:function(m,p,n,o){return this.mergeNew(m,p,n,o)}},links:null,parent:null,root:true,scheduler:null,schema:"default",session:null,stores:null,view:null},constructor:function(f){this.bindings={};this.initConfig(f)},destroy:function(){var w=this,y=w._scheduler,C=w.storeInfo,u=w.getParent(),z=w.collectTask,A=w.children,B=w.bindings,t,v,x;w.destroying=true;if(z){z.cancel();w.collectTask=null}if(A){for(t in A){A[t].destroy()}}if(C){for(t in C){v=C[t];x=v.autoDestroy;if(x||(!v.$wasInstance&&x!==false)){v.destroy()}Ext.destroy(v.$binding)}}if(u){u.unregisterChild(w)}w.getRoot().destroy();for(t in B){B[t].destroy()}if(y&&y.$owner===w){y.$owner=null;y.destroy()}w.children=w.storeInfo=w._session=w._view=w._scheduler=w.bindings=w._root=w._parent=w.formulaFn=w.$formulaData=null;w.destroying=false;w.callParent()},bind:function(p,v,s,t){var q=this,u=true,w;s=s||q;if(!t&&p.bindTo!==undefined&&!Ext.isString(p)){t=p;p=t.bindTo}if(!Ext.isString(p)){w=new Ext.app.bind.Multi(p,q,v,s,t)}else{if(q.expressionRe.test(p)){p=p.substring(1,p.length-1);w=q.bindExpression(p,v,s,t);u=false}else{w=new Ext.app.bind.TemplateBinding(p,q,v,s,t)}}if(u){q.bindings[w.id]=w}return w},getSession:function(){var m=this,l=m._session,n;if(!l&&(n=m.getParent())){m.setSession(l=n.getSession())}return l||null},getStore:function(m){var l=this.storeInfo,n;if(l){n=l[m]}return n||null},linkTo:function(s,x){var t=this,y,v,A,z,u,w;if(x.isModel){x={type:x.entityName,id:x.id}}z=x.type||x.reference;v=x.create;if(z){A=x.id;if(v){A=undefined}w=t.getRecord(z,A);if(Ext.isObject(v)){w.set(v);w.commit();w.phantom=true}y=t.getRoot().createStubChild(s);y.set(w)}else{y=t.getStub(s);if(!y.isLinkStub){u=new Ext.app.bind.LinkStub(t,y.name);y.graft(u);y=u}y.link(x)}},notify:function(){var f=this.getScheduler();if(!f.firing){f.notify()}},get:function(f){return this.getStub(f).getValue()},set:function(n,q){var s=this,o,p;s.getData();if(q===undefined&&n&&n.constructor===Object){p=s.getRoot();q=n}else{if(n&&n.indexOf(".")<0){o={};o[n]=q;q=o;p=s.getRoot()}else{p=s.getStub(n)}}p.set(q)},privates:{registerChild:function(g){var l=this.children;if(!l){this.children=l={}}l[g.getId()]=g},unregisterChild:function(g){var l=this.children;if(!this.destroying&&l){delete l[g.getId()]}},getRecord:function(s,u){var p=this.getSession(),o=s,q=u!==undefined,t;if(p){if(q){t=p.getRecord(s,u)}else{t=p.createRecord(s)}}else{if(!o.$isClass){o=this.getSchema().getEntity(o)}if(q){t=o.createWithId(u);t.load()}else{t=new o()}}return t},bindExpression:function(o,n,q,s){var p=this.getStub(o);return p.bind(n,q,s)},applyScheduler:function(f){if(f&&!f.isInstance){f=new Ext.util.Scheduler(f);f.$owner=this}return f},getScheduler:function(){var l=this,n=l._scheduler,m;if(!n){if(!(m=l.getParent())){n=new Ext.util.Scheduler({preSort:"kind,-depth"});n.$owner=l}else{n=m.getScheduler()}l.setScheduler(n)}return n},getStub:function(g){var l=this.getRoot();return g?l.getChild(g):l},collect:function(){var l=this,m=l.getParent(),n=l.collectTask;if(m){m.collect();return}if(!n){n=l.collectTask=new Ext.util.DelayedTask(l.doCollect,l)}if(l.collectTimeout===0){l.doCollect()}else{n.delay(l.collectTimeout)}},doCollect:function(){var g=this.children,l;if(g){for(l in g){g[l].doCollect()}}this.getRoot().collect()},onBindDestroy:function(m,p){var n=this,o;if(n.destroying){return}if(!p){delete n.bindings[m.id]}o=n.getParent();if(o){o.onBindDestroy(m,true)}else{n.collect()}},applyData:function(p,n){var o=this,s,q;o.getSession();if(!n){q=o.getParent();o.linkData=s=q?Ext.Object.chain(q.getData()):{};o.data=o._data=Ext.Object.chain(s)}if(p&&p.constructor===Object){o.getRoot().set(p)}},applyParent:function(f){if(f){f.registerChild(this)}return f},applyStores:function(t){var y=this,u=y.getRoot(),s,w,v,x,q;y.storeInfo={};y.listenerScopeFn=function(){return y.getView().getInheritedConfig("defaultListenerScope")};for(s in t){w=t[s];if(w.isStore){w.$wasInstance=true;y.setupStore(w,s);continue}else{if(Ext.isString(w)){w={source:w}}else{w=Ext.apply({},w)}}q=w.listeners;delete w.listeners;v=y.bind(w,y.onStoreBind,y,{trackStatics:true});if(v.isStatic()){v.destroy();y.createStore(s,w,q)}else{v.$storeKey=s;v.$listeners=q;x=u.createStubChild(s);x.setStore(v)}}},onStoreBind:function(u,s,v){var w=this.storeInfo,p=v.$storeKey,t=w[p],q;if(!t){this.createStore(p,u,v.$listeners,v)}else{u=Ext.merge({},v.pruneStaticKeys());q=u.proxy;delete u.type;delete u.model;delete u.fields;delete u.proxy;delete u.listeners;if(q){delete q.reader;delete q.writer;t.getProxy().setConfig(q)}t.setConfig(u)}},createStore:function(q,t,p,u){var o=this.getSession(),s;t=Ext.apply({},t);if(t.session){t.session=o}if(t.source){t.type=t.type||"chained"}t.listeners=p;t.resolveListenerScope=this.listenerScopeFn;s=Ext.Factory.store(t);s.$binding=u;this.setupStore(s,q)},setupStore:function(l,g){l.resolveListenerScope=this.listenerScopeFn;this.storeInfo[g]=l;this.set(g,l)},applyFormulas:function(p){var o=this,s=o.getRoot(),q,n;o.getData();for(q in p){s.createStubChild(q);n=o.getStub(q);n.setFormula(p[q])}return p},applyLinks:function(l){for(var g in l){this.linkTo(g,l[g])}},applySchema:function(f){return Ext.data.schema.Schema.get(f)},applyRoot:function(){var l=new Ext.app.bind.RootStub(this),g=this.getParent();if(g){l.depth=g.getRoot().depth-1000}return l},getFormulaFn:function(l){var m=this,n=m.formulaFn;if(!n){n=m.formulaFn=function(e){return m.$formulaData[e]}}m.$formulaData=l;return n}}},1,0,0,0,["viewmodel.default"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable],[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.app,"ViewModel"],0));(Ext.cmd.derive("Ext.app.domain.Controller",Ext.app.EventDomain,{singleton:true,type:"controller",prefix:"controller.",idMatchRe:/^\#/,constructor:function(){var f=this;f.callParent();f.monitor(Ext.app.BaseController)},match:function(m,o){var p=false,n=m.alias;if(o==="*"){p=true}else{if(o==="#"){p=!!m.isApplication}else{if(this.idMatchRe.test(o)){p=m.getId()===o.substring(1)}else{if(n){p=Ext.Array.indexOf(n,this.prefix+o)>-1}}}}return p}},1,0,0,0,0,0,[Ext.app.domain,"Controller"],0));(Ext.cmd.derive("Ext.data.PageMap",Ext.util.LruCache,{config:{store:null,pageSize:0,rootProperty:""},clear:function(l){var g=this;g.pageMapGeneration=(g.pageMapGeneration||0)+1;g.indexMap={};Ext.util.LruCache.prototype.clear.call(this,l)},forEach:function(u,D){var w=this,z=Ext.Object.getKeys(w.map),C=z.length,v=w.getPageSize(),A,B,E,x,y;for(A=0;A<C;A++){z[A]=+z[A]}Ext.Array.sort(z,Ext.Array.numericSortFn);D=D||w;for(A=0;A<C;A++){E=z[A];x=w.getPage(E);y=x.length;for(B=0;B<y;B++){if(u.call(D,x[B],(E-1)*v+B)===false){return}}}},findBy:function(n,o){var m=this,p=null;o=o||m;m.forEach(function(f,e){if(n.call(o,f,e)){p=f;return false}});return p},findIndexBy:function(n,o){var m=this,p=-1;o=o||m;m.forEach(function(f,e){if(n.call(o,f)){p=e;return false}});return p},find:function(x,y,w,s,t,u){if(Ext.isEmpty(y,false)){return null}var q=Ext.String.createRegex(y,s,t,u),v=this.getRootProperty();return this.findBy(function(e){return e&&q.test((v?e[v]:e)[x])},null,w)},findIndex:function(x,y,w,s,t,u){if(Ext.isEmpty(y,false)){return null}var q=Ext.String.createRegex(y,s,t,u),v=this.getRootProperty();return this.findIndexBy(function(e){return e&&q.test((v?e[v]:e)[x])},null,w)},getPageFromRecordIndex:function(f){return Math.floor(f/this.getPageSize())+1},addAll:function(f){this.addPage(1,f)},addPage:function(D,C){var u=this,E=u.getPageSize(),A=D+Math.floor((C.length-1)/E),v=(D-1)*E,x=u.indexMap,y,B,z,w;for(w=0;D<=A;D++,w+=E){y=Ext.Array.slice(C,w,w+E);for(B=0,z=y.length;B<z;B++){x[y[B].internalId]=v++}u.add(D,y);u.fireEvent("pageadd",u,D,y)}},getCount:function(){var f=Ext.util.LruCache.prototype.getCount.call(this);if(f){f=(f-1)*this.getPageSize()+this.last.value.length}return f},getByInternalId:function(l){var g=this.indexMap[l];if(g!=null){return this.getAt(g)}},indexOf:function(g){var l=-1;if(g){l=this.indexMap[g.internalId];if(l==null){l=-1}}return l},insert:function(){},remove:function(){},removeAt:function(){},removeAtKey:function(u){var o=this,q=o.getPage(u),s,p,t;if(q){if(o.fireEvent("beforepageremove",o,u,q)!==false){s=q.length;for(p=0;p<s;p++){delete o.indexMap[q[p].internalId]}t=Ext.util.LruCache.prototype.removeAtKey.apply(this,arguments);o.fireEvent("pageremove",o,u,q);q.length=0}}return t},getPage:function(f){return this.get(f)},hasRange:function(n,q){var p=this,s=p.getPageFromRecordIndex(n),o=p.getPageFromRecordIndex(q);for(;s<=o;s++){if(!p.hasPage(s)){return false}}return(o-1)*p._pageSize+p.getPage(o).length>q},hasPage:function(f){return !!this.get(f)},peekPage:function(f){return this.map[f]},getAt:function(f){return this.getRange(f,f+1)[0]},getRange:function(F,E){E--;if(!this.hasRange(F,E)){Ext.raise("PageMap asked for range which it does not have")}var z=this,C=Ext.Array,y=z.getPageSize(),J=z.getPageFromRecordIndex(F),B=z.getPageFromRecordIndex(E),D=(J-1)*y,H=(B*y)-1,x=J,G=[],I,A,K;for(;x<=B;x++){if(x===J){I=F-D;K=I>0}else{I=0;K=false}if(x===B){A=y-(H-E);K=K||A<y}if(K){C.push(G,C.slice(z.getPage(x),I,A))}else{C.push(G,z.getPage(x))}}return G}},0,0,0,0,0,0,[Ext.data,"PageMap"],0));(Ext.cmd.derive("Ext.data.BufferedStore",Ext.data.ProxyStore,{isBufferedStore:true,buffered:true,config:{data:0,pageSize:25,remoteSort:true,remoteFilter:true,sortOnLoad:false,purgePageCount:5,trailingBufferZone:25,leadingBufferZone:200,defaultViewSize:100,viewSize:0,trackRemoved:false},applyData:function(g){var l=this.data||(this.data=this.createDataCollection());return l},applyProxy:function(f){f=Ext.data.ProxyStore.prototype.applyProxy.call(this,f);if(f&&f.setEnablePaging){f.setEnablePaging(true)}return f},applyAutoSort:function(){},createFiltersCollection:function(){return new Ext.util.FilterCollection()},createSortersCollection:function(){return new Ext.util.SorterCollection()},updateGroupField:function(f){this.group(f)},getGrouper:function(){return this.grouper},isGrouped:function(){return !!this.grouper},createDataCollection:function(){var g=this,l=new Ext.data.PageMap({store:g,rootProperty:"data",pageSize:g.getPageSize(),maxSize:g.getPurgePageCount(),listeners:{clear:g.onPageMapClear,scope:g}});g.relayEvents(l,["beforepageremove","pageadd","pageremove"]);g.pageRequests={};return l},removeAll:function(n){var m=this,l=m.getData();if(l){if(n){m.suspendEvent("clear")}l.clear();if(n){m.resumeEvent("clear")}}},flushLoad:function(){var g=this,l=g.pendingLoadOptions;g.clearLoadTask();if(!l){return}g.getData().clear();l.page=1;l.start=0;l.limit=g.getViewSize()||g.getDefaultViewSize();l.loadCallback=l.callback;l.callback=null;return g.loadToPrefetch(l)},reload:function(E){var x=this,z=x.getData(),v=Number.MAX_VALUE,w,C,y,F,A,D,G,B;if(!E){E={}}if(x.loading||x.fireEvent("beforeload",x,E)===false){return}D=function(){var e=x.totalCount,f=C-w;if(C>=e){C=e-1;w=Math.max(C-f,0)}if(x.rangeCached(w,C,false)){x.loadCount=(x.loadCount||0)+1;x.loading=false;z.un("pageadd",D);B=z.getRange(w,C);x.fireEvent("load",x,B,true);x.fireEvent("refresh",x)}};G=Math.ceil((x.getLeadingBufferZone()+x.getTrailingBufferZone())/2);if(x.lastRequestStart&&x.preserveScrollOnReload){w=x.lastRequestStart;C=x.lastRequestEnd;v=x.getTotalCount()}else{w=E.start||0;C=w+(E.count||x.getPageSize())-1}z.clear(true);delete x.totalCount;w=Math.max(w-G,0);C=Math.min(C+G,v);w=w===0?0:w-1;C=C===v?C:C+1;y=x.getPageFromRecordIndex(w);F=x.getPageFromRecordIndex(C);x.loading=true;E.waitForReload=D;z.on("pageadd",D);for(A=y;A<=F;A++){x.prefetchPage(A,E)}},filter:function(){Ext.data.ProxyStore.prototype.filter.apply(this,arguments)},filterBy:function(g,l){},loadData:function(g,l){},loadPage:function(l,n){var m=this;n=n||{};n.page=m.currentPage=l;n.start=(l-1)*m.getPageSize();n.limit=m.getViewSize()||m.getDefaultViewSize();n.loadCallback=n.callback;n.callback=null;return m.loadToPrefetch(n)},clearData:function(l){var n=this,m=n.getData();if(m){m.clear()}},getCount:function(){return this.totalCount||0},getRange:function(B,y,G){var H=this,A=H.totalCount-1,z=H.lastRequestStart,F=[],x=H.getData(),C,I,D,E,w;G=Ext.apply({prefetchStart:B,prefetchEnd:y},G);y=(y>=H.totalCount)?A:y;if(G.forRender!==false){I=B===0?0:B-1;D=y===A?y:y+1}else{I=B;D=y}H.lastRequestStart=B;H.lastRequestEnd=y;if(H.rangeCached(B,y,G.forRender)){H.onRangeAvailable(G);F=x.getRange(B,y+1)}else{H.fireEvent("cachemiss",H,B,y);E=H.getPageFromRecordIndex(I);w=H.getPageFromRecordIndex(D);C=function(f,g,e){if(g>=E&&g<=w&&H.rangeCached(B,y)){H.fireEvent("cachefilled",H,B,y);x.un("pageadd",C);H.onRangeAvailable(G)}};x.on("pageadd",C);H.prefetchRange(B,y)}H.primeCache(B,y,B<z?-1:1);return F},getById:function(g){var l=this.data.findBy(function(e){return e.getId()===g});return l},getAt:function(l){var g=this.getData();if(g.hasRange(l,l)){return g.getAt(l)}},getByInternalId:function(f){return this.data.getByInternalId(f)},contains:function(f){return this.indexOf(f)>-1},indexOf:function(f){return this.getData().indexOf(f)},indexOfId:function(f){return this.indexOf(this.getById(f))},group:function(o,m){var n=this,p;if(o&&typeof o==="string"){p=n.grouper;if(p&&m!==undefined){p.setDirection(m)}else{n.grouper=new Ext.util.Grouper({property:o,direction:m||"ASC",root:"data"})}}else{n.grouper=o?n.getSorters().decodeSorter(o,"Ext.util.Grouper"):null}n.getData().clear();n.loadPage(1,{callback:function(){n.fireEvent("groupchange",n,n.getGrouper())}})},getPageFromRecordIndex:function(f){return Math.floor(f/this.getPageSize())+1},calculatePageCacheSize:function(n){var l=this,m=l.getPurgePageCount();return m?Math.max(l.getData().getMaxSize()||0,Math.ceil((n+l.getTrailingBufferZone()+l.getLeadingBufferZone())/l.getPageSize())*2+m):0},loadToPrefetch:function(J){var P=this,G=J,C,H,N,O=J.start,I=J.start+J.limit-1,K=(P.getViewSize()||J.limit),B=Math.min(I,J.start+K-1),A=P.getPageFromRecordIndex(Math.max(O-P.getTrailingBufferZone(),0)),L=P.getPageFromRecordIndex(I+P.getLeadingBufferZone()),D=P.getData(),Q=function(){H=H||[];if(J.loadCallback){J.loadCallback.call(J.scope||P,H,E,true)}if(J.callback){J.callback.call(J.scope||P,H,O||0,I||0,J)}},M=function(){P.loadCount=(P.loadCount||0)+1;P.fireEvent("datachanged",P);P.fireEvent("refresh",P);P.fireEvent("load",P,H,true)},F=function(){if(P.rangeCached(O,B)){P.loading=false;H=D.getRange(O,B+1);D.un("pageadd",F);if(P.hasListeners.guaranteedrange){P.guaranteeRange(O,B,J.callback,J.scope)}Q();M()}},E;D.setMaxSize(P.calculatePageCacheSize(K));if(P.fireEvent("beforeload",P,J)!==false){delete P.totalCount;P.loading=true;if(J.callback){G=Ext.apply({},J);delete G.callback}P.on("prefetch",function(l,e,f,g){E=g;if(f){if((N=P.getTotalCount())){D.on("pageadd",F);B=Math.min(B,N-1);L=P.getPageFromRecordIndex(Math.min(B+P.getLeadingBufferZone(),N-1));for(C=A+1;C<=L;++C){P.prefetchPage(C,G)}}else{Q();M()}}else{P.loading=false;Q();P.fireEvent("load",P,e,false)}},null,{single:true});P.prefetchPage(A,G)}},prefetch:function(p){var o=this,s=o.getPageSize(),u=o.getData(),q,t;if(s){if(o.lastPageSize&&s!=o.lastPageSize){Ext.raise("pageSize cannot be dynamically altered")}if(!u.getPageSize()){u.setPageSize(s)}}else{o.pageSize=u.setPageSize(s=p.limit)}o.lastPageSize=s;if(!p.page){p.page=o.getPageFromRecordIndex(p.start);p.start=(p.page-1)*s;p.limit=Math.ceil(p.limit/s)*s}t=o.pageRequests[p.page];if(!t||t.getOperation().pageMapGeneration!==u.pageMapGeneration){p=Ext.apply({action:"read",filters:o.getFilters().items,sorters:o.getSorters().items,grouper:o.getGrouper(),internalCallback:o.onProxyPrefetch,internalScope:o},p);q=o.createOperation("read",p);q.pageMapGeneration=u.pageMapGeneration;if(o.fireEvent("beforeprefetch",o,q)!==false){o.pageRequests[p.page]=q.execute();if(o.getProxy().isSynchronous){delete o.pageRequests[p.page]}}}return o},onPageMapClear:function(){var p=this,q=p.wasLoading,s=p.pageRequests,n=p.getData(),o;n.clearListeners();n.on("clear",p.onPageMapClear,p);p.relayEvents(n,["beforepageremove","pageadd","pageremove"]);p.loading=true;p.totalCount=0;for(o in s){if(s.hasOwnProperty(o)){s[o].getOperation().abort()}}p.fireEvent("clear",p);p.loading=q},prefetchPage:function(o,s){var p=this,t=p.getPageSize(),u=(o-1)*t,q=p.totalCount;if(q!==undefined&&p.data.getCount()===q){return}p.prefetch(Ext.applyIf({page:o,start:u,limit:t},s))},onProxyPrefetch:function(z){if(this.destroying||this.destroyed){return}var v=this,u=z.getResultSet(),A=z.getRecords(),x=z.wasSuccessful(),w=z.getPage(),B=z.waitForReload,D=v.totalCount,C=v.pageRequests,E,y;if(z.pageMapGeneration===v.getData().pageMapGeneration){if(u){v.totalCount=u.getTotal();if(v.totalCount!==D){v.fireEvent("totalcountchange",v.totalCount)}}if(w!==undefined){delete v.pageRequests[w]}v.loading=false;v.fireEvent("prefetch",v,A,x,z);if(x){if(v.totalCount===0){if(B){for(E in C){y=C[E].getOperation();if(y.waitForReload===B){delete y.waitForReload}}v.getData().un("pageadd",B);v.fireEvent("load",v,[],true);v.fireEvent("refresh",v)}}else{v.cachePage(A,z.getPage())}}Ext.callback(z.getCallback(),z.getScope()||v,[A,z,x])}},cachePage:function(q,n){var o=this,s=q.length,p;if(!Ext.isDefined(o.totalCount)){o.totalCount=q.length;o.fireEvent("totalcountchange",o.totalCount)}for(p=0;p<s;p++){q[p].join(o)}o.getData().addPage(n,q)},rangeCached:function(n,s,o){var p=n,q=s;if(o!==false){p=n===0?0:n-1,q=s===this.totalCount-1?s:s+1}return this.getData().hasRange(p,q)},pageCached:function(f){return this.getData().hasPage(f)},pagePending:function(f){return !!this.pageRequests[f]},rangeSatisfied:function(g,l){return this.rangeCached(g,l)},onRangeAvailable:function(p){var o=this,s=o.getTotalCount(),u=p.prefetchStart,t=(p.prefetchEnd>s-1)?s-1:p.prefetchEnd,q;t=Math.max(0,t);q=o.getData().getRange(u,t+1);if(p.fireEvent!==false){o.fireEvent("guaranteedrange",q,u,t,p)}if(p.callback){p.callback.call(p.scope||o,q,u,t,p)}},guaranteeRange:function(n,s,o,p,q){q=Ext.apply({callback:o,scope:p},q);this.getRange(n,s+1,q)},prefetchRange:function(v,t){var q=this,s,u,w,p=q.getData();if(!q.rangeCached(v,t)){s=q.getPageFromRecordIndex(v);u=q.getPageFromRecordIndex(t);p.setMaxSize(q.calculatePageCacheSize(t-v+1));for(w=s;w<=u;w++){if(!q.pageCached(w)){q.prefetchPage(w)}}}},primeCache:function(w,t,x){var y=this,q=y.getLeadingBufferZone(),s=y.getTrailingBufferZone(),u=y.getPageSize(),v=y.totalCount;if(x===-1){w=Math.max(w-q,0);t=Math.min(t+s,v-1)}else{if(x===1){w=Math.max(Math.min(w-s,v-u),0);t=Math.min(t+q,v-1)}else{w=Math.min(Math.max(Math.floor(w-((q+s)/2)),0),v-y.pageSize);t=Math.min(Math.max(Math.ceil(t+((q+s)/2)),0),v-1)}}y.prefetchRange(w,t)},sort:function(m,n,l){if(arguments.length===0){this.clearAndLoad()}else{this.getSorters().addSort(m,n,l)}},onSorterEndUpdate:function(){var l=this,g=l.getSorters().getRange();if(g.length){l.fireEvent("beforesort",l,g);l.clearAndLoad({callback:function(){l.fireEvent("sort",l,g)}})}else{l.fireEvent("sort",l,g)}},clearAndLoad:function(l){var g=this;g.clearing=true;g.getData().clear();g.clearing=false;g.loadPage(1,l)},privates:{isLast:function(f){return this.indexOf(f)===this.getTotalCount()-1},isMoving:function(){return false}}},0,0,0,0,["store.buffered"],0,[Ext.data,"BufferedStore"],0));(Ext.cmd.derive("Ext.data.NodeInterface",Ext.Base,{statics:{decorate:function(s){var p=Ext.data.schema.Schema.lookupEntity(s),u=p.prototype,t,q,o;if(!p.prototype.isObservable){p.mixin(Ext.mixin.Observable.prototype.mixinId,Ext.mixin.Observable)}if(u.isNode){return}t=u.idProperty;q=p.getField(t);o=q.type;p.override(this.getPrototypeBody());p.addFields([{name:"parentId",type:o,defaultValue:null,allowNull:q.allowNull},{name:"index",type:"int",defaultValue:-1,persist:false,convert:null},{name:"depth",type:"int",defaultValue:0,persist:false,convert:null},{name:"expanded",type:"bool",defaultValue:false,persist:false,convert:null},{name:"expandable",type:"bool",defaultValue:true,persist:false,convert:null},{name:"checked",type:"auto",defaultValue:null,persist:false,convert:null},{name:"leaf",type:"bool",defaultValue:false},{name:"cls",type:"string",defaultValue:"",persist:false,convert:null},{name:"iconCls",type:"string",defaultValue:"",persist:false,convert:null},{name:"icon",type:"string",defaultValue:"",persist:false,convert:null},{name:"glyph",type:"string",defaultValue:"",persist:false,convert:null},{name:"root",type:"boolean",defaultValue:false,persist:false,convert:null},{name:"isLast",type:"boolean",defaultValue:false,persist:false,convert:null},{name:"isFirst",type:"boolean",defaultValue:false,persist:false,convert:null},{name:"allowDrop",type:"boolean",defaultValue:true,persist:false,convert:null},{name:"allowDrag",type:"boolean",defaultValue:true,persist:false,convert:null},{name:"loaded",type:"boolean",defaultValue:false,persist:false,convert:null},{name:"loading",type:"boolean",defaultValue:false,persist:false,convert:null},{name:"href",type:"string",defaultValue:"",persist:false,convert:null},{name:"hrefTarget",type:"string",defaultValue:"",persist:false,convert:null},{name:"qtip",type:"string",defaultValue:"",persist:false,convert:null},{name:"qtitle",type:"string",defaultValue:"",persist:false,convert:null},{name:"qshowDelay",type:"int",defaultValue:0,persist:false,convert:null},{name:"children",type:"auto",defaultValue:null,persist:false,convert:null},{name:"visible",type:"boolean",defaultValue:true,persist:false},{name:"text",type:"string",persist:false}])},getPrototypeBody:function(){var l={idchanged:true,append:true,remove:true,move:true,insert:true,beforeappend:true,beforeremove:true,beforemove:true,beforeinsert:true,expand:true,collapse:true,beforeexpand:true,beforecollapse:true,sort:true},g={silent:true};return{isNode:true,firstChild:null,lastChild:null,parentNode:null,previousSibling:null,nextSibling:null,constructor:function(){var e=this;e.mixins.observable.constructor.call(e);e.callParent(arguments);e.childNodes=[];return e},createNode:function(z){var e=this,v=e.childType,A,C,x,B,f,w,y=e.self;if(!z.isModel){if(v){y=e.schema.getEntity(v)}else{A=e.getTreeStore();C=A&&A.getProxy().getReader();x=e.getProxy();B=x?x.getReader():null;f=!C||(B&&B.initialConfig.typeProperty)?B:C;if(f){w=f.getTypeProperty();if(w){y=f.getChildType(e.schema,z,w)}}}z=new y(z)}if(!z.childNodes){z.firstChild=z.lastChild=z.parentNode=z.previousSibling=z.nextSibling=null;z.childNodes=[]}return z},isLeaf:function(){return this.get("leaf")===true},setFirstChild:function(e){this.firstChild=e},setLastChild:function(e){this.lastChild=e},updateInfo:function(f,x){var e=this,w=e.phantom,z;f={silent:true,commit:f};if(x.depth!==e.data.depth){var A={depth:e.data.depth+1},y=e.childNodes,v=y.length,u;for(u=0;u<v;u++){y[u].set(A)}}z=e.set(x,f);e.phantom=w;return z},isLast:function(){return this.get("isLast")},isFirst:function(){return this.get("isFirst")},hasChildNodes:function(){return !this.isLeaf()&&this.childNodes.length>0},isExpandable:function(){var e=this;if(e.get("expandable")){return !(e.isLeaf()||(e.isLoaded()&&!e.phantom&&!e.hasChildNodes()))}return false},triggerUIUpdate:function(){this.callJoined("afterEdit",[])},appendChild:function(E,J,e){var M=this,Q,N,O,K,I,C={isLast:true,parentId:M.getId(),depth:(M.data.depth||0)+1},D,F=M.getTreeStore(),G=F&&F.triStateCheckbox?1:false,H=F&&F.bulkUpdate,P,f,L;Ext.suspendLayouts();if(Ext.isArray(E)){N=E.length;D=new Array(N);M.callTreeStore("beginFill");for(Q=0;Q<N;Q++){D[Q]=M.appendChild(E[Q],J,e)}M.callTreeStore("endFill",[D])}else{E=M.createNode(E);if(J!==true&&M.fireBubbledEvent("beforeappend",[M,E])===false){Ext.resumeLayouts(true);return false}O=M.childNodes.length;K=E.parentNode;if(K){if(J!==true&&E.fireBubbledEvent("beforemove",[E,K,M,O])===false){Ext.resumeLayouts(true);return false}if(K.removeChild(E,false,J,K.getTreeStore()===F)===false){Ext.resumeLayouts(true);return false}}F&&F.beginUpdate();O=M.childNodes.length;if(O===0){M.setFirstChild(E)}M.childNodes[O]=E;E.parentNode=M;E.nextSibling=null;M.setLastChild(E);I=M.childNodes[O-1];if(I){E.previousSibling=I;I.nextSibling=E;I.updateInfo(e,{isLast:false});if(!H){I.triggerUIUpdate()}}else{E.previousSibling=null}C.isFirst=O===0;C.index=O;L=E.updateInfo(e,C);if(M.isLeaf()){M.set("leaf",false)}if(!M.isLoaded()){if(H){M.data.loaded=true}else{M.set("loaded",true)}}else{if(M.childNodes.length===1&&!H){M.triggerUIUpdate()}}if(O&&M.childNodes[O-1].isExpanded()&&!H){M.childNodes[O-1].cascade(M.triggerUIUpdate)}if(F){F.registerNode(M,!H);if(H){F.registerNode(E)}}if(J!==true){M.fireBubbledEvent("append",[M,E,O]);if(K){E.fireBubbledEvent("move",[E,K,M,O])}}M.callTreeStore("onNodeAppend",[E,O]);if(L){E.callJoined("afterEdit",[L])}D=E;if(F){F.endUpdate()}}Ext.resumeLayouts(true);return D},getOwnerTree:function(){var e=this.getTreeStore();if(e){return e.ownerTree}},getTreeStore:function(){var e=this;while(e&&!e.treeStore){e=e.parentNode}return e&&e.treeStore},removeChild:function(f,z,D,E){var F=this,G=F.indexOf(f),I,e,B,y=F.getTreeStore(),A=y&&y.bulkUpdate,H,C=[];if(G===-1||(D!==true&&F.fireBubbledEvent("beforeremove",[F,f,!!E])===false)){return false}Ext.suspendLayouts();y&&y.beginUpdate();Ext.Array.erase(F.childNodes,G,1);if(F.firstChild===f){F.setFirstChild(f.nextSibling)}if(F.lastChild===f){F.setLastChild(f.previousSibling)}B=f.previousSibling;if(B){f.previousSibling.nextSibling=f.nextSibling}if(f.nextSibling){f.nextSibling.previousSibling=f.previousSibling;if(G===0){f.nextSibling.updateInfo(false,{isFirst:true})}for(I=G,e=F.childNodes.length;I<e;I++){F.childNodes[I].updateInfo(false,{index:I})}}else{if(B){B.updateInfo(false,{isLast:true});if(!A){if(B.isExpanded()){B.cascade(F.triggerUIUpdate)}else{B.triggerUIUpdate()}}}}if(!F.childNodes.length&&!A){F.triggerUIUpdate()}Ext.resumeLayouts(true);if(D!==true){H={parentNode:f.parentNode,previousSibling:f.previousSibling,nextSibling:f.nextSibling};F.callTreeStore("beforeNodeRemove",[[f],!!E,C]);f.previousSibling=f.nextSibling=f.parentNode=null;F.fireBubbledEvent("remove",[F,f,!!E,H]);F.callTreeStore("onNodeRemove",[[f],!!E,C])}if(z){f.erase(true)}else{f.clear()}if(!E){f.set({parentId:null,lastParentId:F.getId()},g)}if(y){y.endUpdate()}return f},copy:function(x,t,e){var v=this,f,y=[x],u=v.childNodes?v.childNodes.length:0,w;if(t&&t.isSession){y.push(t)}else{if(arguments.length<3){e=t}}f=v.callParent(y);if(e){for(w=0;w<u;w++){f.appendChild(v.childNodes[w].copy(undefined,true))}}return f},clear:function(f,o){var e=this,p;e.parentNode=e.previousSibling=e.nextSibling=null;if(f){e.firstChild=e.lastChild=e.childNodes=null}if(o){e.firstChild=e.lastChild=null;e.childNodes.length=0;if(e.data){e.data.children=null}}},drop:function(){var v=this,t=v.childNodes,f=v.parentNode,s,e,w,u=v.getTreeStore();v.callParent();if(f){f.removeChild(v)}else{if(v.get("root")){u.setRoot(null)}}u&&u.beginUpdate();for(e=0,s=t?t.length:0;e<s;e++){w=t[e];w.clear();w.drop()}u&&u.endUpdate()},erase:function(f){var t=this,s=t.childNodes,q=s&&s.length,e,u;t.remove();t.clear(true);t.callParent([f]);for(e=0;e<q;e++){u=s[e];u.parentNode=null;u.erase(f)}},insertBefore:function(A,L,F){var K=this,M=K.indexOf(L),I=A.parentNode,G=M,f,E,e,B=K.getTreeStore(),D=B&&B.bulkUpdate,J,H,C;if(!L){return K.appendChild(A)}if(A===L){return false}A=K.createNode(A);if(F!==true&&K.fireBubbledEvent("beforeinsert",[K,A,L])===false){return false}if(I===K&&K.indexOf(A)<M){G--}if(I){if(F!==true&&A.fireBubbledEvent("beforemove",[A,I,K,M,L])===false){return false}if(I.removeChild(A,false,F,I.getTreeStore()===B)===false){return false}}B&&B.beginUpdate();if(G===0){K.setFirstChild(A)}Ext.Array.splice(K.childNodes,G,0,A);A.parentNode=K;A.nextSibling=L;L.previousSibling=A;E=K.childNodes[G-1];if(E){A.previousSibling=E;E.nextSibling=A}else{A.previousSibling=null}J=A.updateInfo(false,{parentId:K.getId(),index:G,isFirst:G===0,isLast:false,depth:(K.data.depth||0)+1});for(e=G+1,f=K.childNodes.length;e<f;e++){H=K.childNodes[e];C=H.updateInfo(false,{index:e});if(C){H.callJoined("afterEdit",[C])}}if(!K.isLoaded()){if(D){K.data.loaded=true}else{K.set("loaded",true)}}else{if(K.childNodes.length===1&&!D){K.triggerUIUpdate()}}if(B){B.registerNode(K,!D)}if(F!==true){K.fireBubbledEvent("insert",[K,A,L]);if(I){A.fireBubbledEvent("move",[A,I,K,G,L])}}K.callTreeStore("onNodeInsert",[A,G]);if(J){A.callJoined("afterEdit",[J])}if(B){B.endUpdate()}return A},insertChild:function(n,e){var f=this.childNodes[n];if(f){return this.insertBefore(e,f)}else{return this.appendChild(e)}},isLastVisible:function(){var e=this,n=e.data.isLast,f=e.nextSibling;if(!n&&e.getTreeStore().isFiltered()){while(f){if(f.data.visible){return false}f=f.nextSibling}return true}return n},remove:function(f,e){var p=this,o=p.parentNode;if(o){o.removeChild(p,f,e)}else{if(f){p.erase(true)}}return p},removeAll:function(y,A,v){var C=this,B=C.childNodes,e=B.length,w,x,f,z=[];if(!e){return}if(!v){x=C.getTreeStore();if(x){x.beginUpdate();x.suspendEvent("remove");C.callTreeStore("beforeNodeRemove",[B,false,z])}}for(f=0;f<e;++f){w=B[f];w.previousSibling=w.nextSibling=w.parentNode=null;C.fireBubbledEvent("remove",[C,w,false]);if(y){w.erase(true)}else{w.removeAll(false,A,true)}}if(!v&&x){x.resumeEvent("remove");C.callTreeStore("onNodeRemove",[B,false,z]);x.endUpdate()}C.firstChild=C.lastChild=null;B.length=0;if(!v){C.triggerUIUpdate()}return C},getChildAt:function(e){return this.childNodes[e]},replaceChild:function(o,p,e){var f=p?p.nextSibling:null;this.removeChild(p,false,e);this.insertBefore(o,f,e);return p},indexOf:function(e){return Ext.Array.indexOf(this.childNodes,e)},indexOfId:function(p){var e=this.childNodes,o=e.length,f=0;for(;f<o;++f){if(e[f].getId()===p){return f}}return -1},getPath:function(p,e){p=p||this.idProperty;e=e||"/";var f=[this.get(p)],o=this.parentNode;while(o){f.unshift(o.get(p));o=o.parentNode}return e+f.join(e)},getDepth:function(){return this.get("depth")},bubble:function(e,f,o){var p=this;while(p){if(e.apply(f||p,o||[p])===false){break}p=p.parentNode}},cascade:function(w,e,u,t){var x=this;if(arguments.length===1&&!Ext.isFunction(w)){t=w.after;e=w.scope;u=w.args;w=w.before}if(!w||w.apply(e||x,u||[x])!==false){var v=x.childNodes,y=v.length,f;for(f=0;f<y;f++){v[f].cascade.call(v[f],w,e,u,t)}if(t){t.apply(e||x,u||[x])}}},cascadeBy:function(){return this.cascade.apply(this,arguments)},eachChild:function(u,e,q){var s=this.childNodes,t=s.length,f;for(f=0;f<t;f++){if(u.apply(e||this,q||[s[f]])===false){break}}},findChild:function(f,e,n){return this.findChildBy(function(){return this.get(f)==e},null,n)},findChildBy:function(u,w,f){var x=this.childNodes,v=x.length,y=0,n,e;for(;y<v;y++){n=x[y];if(u.call(w||n,n)===true){return n}else{if(f){e=n.findChildBy(u,w,f);if(e!==null){return e}}}}return null},contains:function(e){return e.isAncestor(this)},isAncestor:function(f){var e=this.parentNode;while(e){if(e===f){return true}e=e.parentNode}return false},sort:function(y,v,z){var e=this,A=e.childNodes,f=A.length,n,w,x={isFirst:true};if(f>0){if(!y){y=e.getTreeStore().getSortFn()}Ext.Array.sort(A,y);e.setFirstChild(A[0]);e.setLastChild(A[f-1]);for(n=0;n<f;n++){w=A[n];w.previousSibling=A[n-1];w.nextSibling=A[n+1];x.isLast=(n===f-1);x.index=n;w.updateInfo(false,x);x.isFirst=false;if(v&&!w.isLeaf()){w.sort(y,true,true)}}if(z!==true){e.fireBubbledEvent("sort",[e,A]);e.callTreeStore("onNodeSort",[A])}}},isExpanded:function(){return this.get("expanded")},isLoaded:function(){return this.get("loaded")},isBranchLoaded:function(){var e=!this.isLeaf()&&this.isLoaded();if(e){this.cascade(function(f){if(!f.isLeaf()){e=e||f.isBranchLoaded()}return e})}return e},isLoading:function(){return this.get("loading")},isRoot:function(){return !this.parentNode},isVisible:function(){var e=this.parentNode;while(e){if(!e.isExpanded()){return false}e=e.parentNode}return true},expand:function(q,s,f){var e=this,u,t;if(!e.isLeaf()){if(e.isLoading()){e.on("expand",function(){e.expand(q,s,f)},e,{single:true})}else{if(!e.isExpanded()){if(e.fireBubbledEvent("beforeexpand",[e])!==false){if(q){if(e.parentNode&&e.parentNode.isSynchronousRecursiveExpand){e.isSynchronousRecursiveExpand=true}else{u=e.getTreeStore();if(u.getProxy().isSynchronous||e.isBranchLoaded()){e.isSynchronousRecursiveExpand=true;u.suspendEvent("add","datachanged");t=true}}}e.callTreeStore("onBeforeNodeExpand",[e.onChildNodesAvailable,e,[q,s,f]]);if(t){u.resumeEvent("add","datachanged");u.fireEvent("datachanged",u);u.fireEvent("refresh",u)}e.isSynchronousRecursiveExpand=false}}else{if(q){e.expandChildren(true,s,f)}else{Ext.callback(s,f||e,[e.childNodes])}}}}else{Ext.callback(s,f||e)}},onChildNodesAvailable:function(w,x,B,A){var e=this,y=e.getTreeStore(),z=y&&y.bulkUpdate,f,v,C;Ext.suspendLayouts();for(f=e.parentNode;f;f=f.parentNode){if(!f.isExpanded()){(C||(C=[])).unshift(f)}}if(z||!y.isVisible(e)){e.data.expanded=true}else{e.set("expanded",true)}if(C){for(v=1;v<C.length;v++){f=C[v];if(z||!y.isVisible(f)){f.data.expanded=true}else{f.set("expanded",true)}}C[0].expand();for(v=1;v<C.length;v++){f=C[v];f.fireBubbledEvent("expand",[f,f.childNodes])}}else{e.callTreeStore("onNodeExpand",[w,false])}e.fireBubbledEvent("expand",[e,w]);if(x){e.expandChildren(true,B,A)}else{Ext.callback(B,A||e,[e.childNodes])}Ext.resumeLayouts(true)},expandChildren:function(x,D,C,f){var F=this,E,e,A,B,G,y,z;if(Ext.isBoolean(D)){E=D;D=C;C=f;f=E}if(f===undefined){z=F.getTreeStore();f=z&&z.singleExpand}A=F.childNodes;B=[];G=f?Math.min(A.length,1):A.length;for(e=0;e<G;++e){y=A[e];if(!y.isLeaf()){B[B.length]=y}}G=B.length;for(e=0;e<G;++e){B[e].expand(x)}if(D){Ext.callback(D,C||F,[F.childNodes])}},collapse:function(x,B,A){var C=this,f=C.isExpanded(),y=C.getTreeStore(),z=y&&y.bulkUpdate,e=C.childNodes.length,w,v;if(!C.isLeaf()&&((!f&&x)||C.fireBubbledEvent("beforecollapse",[C])!==false)){Ext.suspendLayouts();if(C.isExpanded()){if(x){v=function(){for(w=0;w<e;w++){C.childNodes[w].setCollapsed(true)}};if(B){B=Ext.Function.createSequence(v,Ext.Function.bind(B,A,[C.childNodes]))}else{B=v}}else{if(B){B=Ext.Function.bind(B,A,[C.childNodes])}}if(z||!y.contains(C)){C.data.expanded=false}else{C.set("expanded",false)}C.callTreeStore("onNodeCollapse",[C.childNodes,B,A]);C.fireBubbledEvent("collapse",[C,C.childNodes]);B=null}else{if(x){for(w=0;w<e;w++){C.childNodes[w].setCollapsed(true)}}}Ext.resumeLayouts(true)}Ext.callback(B,A||C,[C.childNodes])},setCollapsed:function(f){var p=this,o=p.childNodes.length,e;if(!p.isLeaf()&&p.fireBubbledEvent("beforecollapse",[p])!==false){p.data.expanded=false;p.fireBubbledEvent("collapse",[p,p.childNodes]);if(f){for(e=0;e<o;e++){p.childNodes[e].setCollapsed(true)}}}},collapseChildren:function(w,A,z){var e=this,u,y=e.childNodes,f=y.length,v=[],x;for(u=0;u<f;++u){x=y[u];if(!x.isLeaf()&&x.isLoaded()&&x.isExpanded()){v.push(x)}}f=v.length;if(f){for(u=0;u<f;++u){x=v[u];if(u===f-1){x.collapse(w,A,z)}else{x.collapse(w)}}}else{Ext.callback(A,z)}},fireEvent:function(e){return this.fireBubbledEvent(e,Ext.Array.slice(arguments,1))},fireBubbledEvent:function(f,s){var p,q,e;if(l[f]){for(q=this;p!==false&&q;q=(e=q).parentNode){p=q.fireEventArgs.call(q,f,s)}if(p!==false){q=e.getTreeStore();if(q&&q.hasListeners&&q.hasListeners[f="node"+f]){p=q.fireEventArgs(f,s)}}return p}else{return this.fireEventArgs.apply(this,arguments)}},serialize:function(e){var u=e||new Ext.data.writer.Json({writeAllFields:true}),f=u.getRecordData(this),t=this.childNodes,s=t.length,v,w;if(s>0){f.children=v=[];for(w=0;w<s;w++){v.push(t[w].serialize(u))}}return f},callTreeStore:function(q,p){var e=this,s=e.getTreeStore(),f=s&&s[q];if(s&&f){p=p||[];if(p[0]!==e){p.unshift(e)}f.apply(s,p)}},addCls:function(e){this.replaceCls(null,e)},removeCls:function(e){this.replaceCls(e)},replaceCls:function(o,e){var f=this._parseCls(this.data.cls),p=this._parseCls(o);if(p.length){f=Ext.Array.difference(f,p)}p=this._parseCls(e);if(p.length){f=Ext.Array.unique(f.concat(p))}this.set("cls",f.join(" "))},toggleCls:function(f,v){if(v===undefined){var w=this._parseCls(this.data.cls),p=this._parseCls(f),t=p.length,e,u;for(e=0;e<t;++e){u=p[e];if(Ext.Array.contains(w,u)){Ext.Array.remove(w,u)}else{w.push(u)}}this.set("cls",w.join(" "))}else{if(v){this.addCls(f)}else{this.removeCls(f)}}},privates:{_noCls:[],spacesRe:/\s+/,join:function(e){if(e.isTreeStore){if(this.isRoot()){this.treeStore=this.store=e}}else{this.callParent([e])}},callJoined:function(e,f){this.callParent([e,f]);this.callTreeStore(e,f)},_parseCls:function(e){if(!e){return this._noCls}if(typeof e==="string"){return e.split(this.spacesRe)}return e}}}}}},0,0,0,0,0,0,[Ext.data,"NodeInterface"],0));(Ext.cmd.derive("Ext.data.TreeModel",Ext.data.Model,{getRefItems:function(){return this.childNodes},getRefOwner:function(){return this.parentNode},statics:{defaultProxy:"memory"}},0,0,0,0,0,[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.data,"TreeModel"],function(){Ext.data.NodeInterface.decorate(this)}));(Ext.cmd.derive("Ext.data.Request",Ext.Base,{isDataRequest:true,config:{action:undefined,params:undefined,method:"GET",url:null,operation:null,proxy:null,disableCaching:false,headers:{},callbackKey:null,rawRequest:null,jsonData:undefined,xmlData:undefined,withCredentials:false,username:null,password:null,binary:false,callback:null,scope:null,timeout:30000,records:null,directFn:null,args:null,useDefaultXhrHeader:null},constructor:function(f){this.initConfig(f)},getParam:function(n){var l=this.getParams(),m;if(l){return l[n]}return m},setParam:function(n,m){var l=this.getParams()||{};l[n]=m;this.setParams(l)}},1,0,0,0,0,0,[Ext.data,"Request"],0));(Ext.cmd.derive("Ext.data.TreeStore",Ext.data.Store,{isTreeStore:true,config:{root:null,rootVisible:false,defaultRootProperty:"children",parentIdProperty:null,clearOnLoad:true,clearRemovedOnLoad:true,nodeParam:"node",defaultRootId:"root",defaultRootText:"Root",folderSort:false,pageSize:null},filterer:"topdown",lazyFill:false,fillCount:0,bulkUpdate:0,nodesToUnregister:0,_silentOptions:{silent:true},implicitModel:"Ext.data.TreeModel",constructor:function(l){var g=this;g.byIdMap={};Ext.data.Store.prototype.constructor.call(this,l)},applyFields:function(n,l){var m=this;if(n){if(m.defaultRootProperty!==m.self.prototype.config.defaultRootProperty){n=n.concat({name:m.defaultRootProperty,type:"auto",defaultValue:null,persist:false})}}Ext.data.Store.prototype.applyFields.call(this,n,l)},onSorterEndUpdate:function(){var p=this,s=p.getSorters(),o=s.getRange(),q=p.getRoot(),n=p.getFolderSort();p.fireEvent("beforesort",p,o);if(q&&(n||o.length)){if(p.getRemoteSort()){if(o.length){p.load({callback:function(){p.fireEvent("sort",p,o)}})}}else{q.sort(this.getSortFn(),true);p.fireEvent("datachanged",p);p.fireEvent("refresh",p);p.fireEvent("sort",p,o)}}else{p.fireEvent("sort",p,o)}},updateFolderSort:function(f){this.needsFolderSort=f;this.onSorterEndUpdate()},getSortFn:function(){return this._sortFn||(this._sortFn=this.createSortFn())},createSortFn:function(){var l=this,g=this.sorters.getSortFn();return function(e,f){var s,q,p=0;if(l.needsFolderSort){s=e.data.leaf?1:0;q=f.data.leaf?1:0;p=s-q}if(l.needsIndexSort&&p===0){p=e.data.index-f.data.index}return p||g(e,f)}},getTotalCount:function(){return this.getCount()},afterEdit:function(B,A){var u=this,z=B.parentNode,t=u.getRootVisible(),x=!z&&!t,w,y=B.get("visible"),C,v;if(!x&&y!==u.contains(B)){if(y){if(!z||u.isVisible(B)){C=[B];if(B.isExpanded()){u.handleNodeExpand(B,B.childNodes,C)}w=B.previousSibling?u.indexOfPreviousVisibleNode(B.previousSibling):(z?u.indexOf(z):-1);u.insert(w+1,C)}}else{v=u.indexOf(B);u.removeAt(v,u.indexOfNextVisibleNode(B)-v)}}else{if(u.getRoot()&&u.needsLocalFilter()){u.onFilterEndUpdate(u.getFilters())}}Ext.data.Store.prototype.afterEdit.call(this,B,A)},afterReject:function(l){var g=this;if(g.contains(l)){g.onUpdate(l,Ext.data.Model.REJECT,null);g.fireEvent("update",g,l,Ext.data.Model.REJECT,null)}},afterCommit:function(n,l){var m=this;if(!l){l=null}if(m.contains(n)){m.onUpdate(n,Ext.data.Model.COMMIT,l);m.fireEvent("update",m,n,Ext.data.Model.COMMIT,l)}},updateRootVisible:function(m){var n=this.getRoot(),l;if(n){l=this.getData();if(m){l.insert(0,n)}else{l.remove(n)}}},updateTrackRemoved:function(f){Ext.data.Store.prototype.updateTrackRemoved.apply(this,arguments);this.removedNodes=this.removed;this.removed=null},onDestroyRecords:function(m,n,l){if(l){this.removedNodes.length=0}},updateProxy:function(g){var l;if(g){if(g.setIdParam){g.setIdParam(this.getNodeParam())}l=g.getReader();if(Ext.isEmpty(l.getRootProperty())){l.setRootProperty(this.getDefaultRootProperty())}}},setProxy:function(f){this.changingProxy=true;(arguments.callee.$previous||Ext.data.Store.prototype.setProxy).call(this,f);this.changingProxy=false},updateModel:function(l){if(l){var g=l.prototype.isNode;Ext.data.NodeInterface.decorate(l);if(!g&&!this.changingProxy){this.getProxy().getReader().buildExtractors(true)}}},onCollectionFilter:Ext.emptyFn,onFilterEndUpdate:function(y){var q=this,s=y.length,w=q.getRoot(),v,t,x,u;if(!q.getRemoteFilter()){if(s){q.doFilter(w)}else{w.cascade({after:function(e){e.set("visible",true,q._silentOptions)}})}if(s){x=[];v=w.childNodes;for(u=0,s=v.length;u<s;u++){t=v[u];if(t.get("visible")){x.push(t)}}}else{x=w.childNodes}q.onNodeFilter(w,x);w.fireEvent("filterchange",w,x);q.suppressNextFilter=true;Ext.data.Store.prototype.onFilterEndUpdate.call(this,y);q.suppressNextFilter=false}else{Ext.data.Store.prototype.onFilterEndUpdate.call(this,y)}},onNodeFilter:function(s,n){var p=this,o=p.getData(),q=[];if(p.getRootVisible()&&s.get("visible")){q.push(s)}p.handleNodeExpand(s,n,q);p.suspendEvents();o.splice(0,o.getCount(),q);p.resumeEvents();if(!p.suppressNextFilter){p.fireEvent("datachanged",p);p.fireEvent("refresh",p)}},onBeforeNodeExpand:function(B,E,D,x){var w=this,v,z,u,y,C,A;if(B.isLoaded()){A=[B.childNodes];if(x){A.push.apply(A,x)}Ext.callback(E,D||B,A)}else{if(B.isLoading()){w.on("load",function(){A=[B.childNodes];if(x){A.push.apply(A,x)}Ext.callback(E,D||B,A)},w,{single:true,priority:1001})}else{v=w.getProxy().getReader();z=B.getProxy();u=z?z.getReader():null;y=u&&u.initialConfig.rootProperty?u:v;C=y.getRoot(B.raw||B.data);if(C||(B.phantom&&!B.isRoot())){if(C){w.fillNode(B,y.extractData(C,{model:B.childType,recordCreator:w.recordCreator}))}A=[B.childNodes];if(x){A.push.apply(A,x)}Ext.callback(E,D||B,A)}else{w.read({node:B,onChildNodesAvailable:function(){delete w.lastOptions.onChildNodesAvailable;A=[B.childNodes];if(x){A.push.apply(A,x)}Ext.callback(E,D||B,A)}});w.flushLoad()}}}},onNodeExpand:function(o,q){var n=this,s=n.indexOf(o)+1,p=[];n.handleNodeExpand(o,q,p);if(!n.refreshCounter&&o.isRoot()&&!o.get("visible")){n.loadRecords(p)}else{n.insert(s,p)}},handleNodeExpand:function(p,t,q){var v=this,w=t?t.length:0,s,u;if(p!==this.getRoot()&&!v.isVisible(p)){return}if(w){for(s=0;s<w;s++){u=t[s];if(u.get("visible")){q.push(u);if(u.isExpanded()){if(u.isLoaded()){v.handleNodeExpand(u,u.childNodes,q)}else{u.set("expanded",false);u.expand()}}}}}},onNodeCollapse:function(q,u,v,s){var p=this,t=p.indexOf(q)+1,w;if(p.needsLocalFilter()){u=Ext.Array.filter(u,p.filterVisible)}if(u.length&&p.isVisible(q)){w=p.indexOfNextVisibleNode(q);p.removeAt(t,w-t)}Ext.callback(v,s)},indexOfNextVisibleNode:function(g){var l;while(g.parentNode){for(l=g.nextSibling;l&&!l.get("visible");l=l.nextSibling){}if(l){return this.indexOf(l)}g=g.parentNode}return this.getCount()},indexOfPreviousVisibleNode:function(g){var l;for(l=g;l&&!l.get("visible");l=l.previousSibling){}if(l){if(l.isExpanded()&&l.lastChild){return this.indexOfPreviousVisibleNode(l.lastChild)}}else{l=g.parentNode}return this.indexOf(l)},filterNew:function(f){return !f.get("root")&&Ext.data.Store.prototype.filterNew.call(this,f)},filterRejects:function(f){return !f.get("root")&&Ext.data.Store.prototype.filterRejects.call(this,f)},getNewRecords:function(){return Ext.Array.filter(Ext.Object.getValues(this.byIdMap),this.filterNew,this)},getRejectRecords:function(){return Ext.Array.filter(Ext.Object.getValues(this.byIdMap),this.filterRejects,this)},getUpdatedRecords:function(){return Ext.Array.filter(Ext.Object.getValues(this.byIdMap),this.filterUpdated)},beforeNodeRemove:function(x,s,t,A){if(!Ext.isArray(s)){s=[s]}var u=this,v=s.length,w=u.removedNodes,y,z;for(y=0;!z&&y<v;y++){if(s[y].get("visible")){z=s[y]}}if(z){A[0]=u.indexOf(s[0]);A[1]=u.indexOfNextVisibleNode(s[s.length-1])-A[0]}else{A[0]=-1;A[1]=0}for(y=0;y<v;y++){s[y].cascade(function(e){u.unregisterNode(e,true);if(w&&!t){if(!e.phantom&&!e.erasing&&!u.loading){e.removedFrom=u.indexOf(e);w.push(e);u.needsSync=true}}})}},afterDrop:Ext.emptyFn,onNodeRemove:function(s,n,q,p){var o=this;o.suspendAutoSync();if(p[0]!==-1){o.removeIsMove=q;o.removeAt.apply(o,p);o.removeIsMove=false}o.resumeAutoSync()},onNodeAppend:function(m,l,n){this.onNodeInsert(m,l,n)},onNodeInsert:function(E,D,y){var x=this,B=D.raw||D.data,z=x.removedNodes,w,C,v,A,F,G;if(E&&x.needsLocalFilter()){x.doFilter(E)}x.beginUpdate();if(x.isVisible(D)){if(y===0||!D.previousSibling){G=x.indexOf(E)}else{G=x.indexOfPreviousVisibleNode(D.previousSibling)}x.insert(G+1,D);if(!D.isLeaf()&&D.isExpanded()){if(D.isLoaded()){x.onNodeExpand(D,D.childNodes)}else{if(!x.fillCount){D.set("expanded",false);D.expand()}}}}Ext.Array.remove(z,D);x.needsSync=x.needsSync||D.phantom||D.dirty;if(!D.isLeaf()&&!D.isLoaded()&&!x.lazyFill){w=x.getProxy().getReader();C=D.getProxy();v=C?C.getReader():null;A=v&&v.initialConfig.rootProperty?v:w;F=A.getRoot(B);if(F){x.fillNode(D,A.extractData(F,{model:D.childType,recordCreator:x.recordCreator}))}}x.endUpdate()},registerNode:function(w,u){var p=this,v=p.byIdMap[w.id],s,q,t;p.byIdMap[w.id]=w;if(w.onRegisterTreeNode&&w!==v){w.onRegisterTreeNode(p)}if(w.onUnregisterTreeNode){p.nodesToUnregister++}if(u===true){s=w.childNodes;q=s.length;for(t=0;t<q;t++){p.registerNode(s[t],true)}}},unregisterNode:function(w,u){var p=this,v=p.byIdMap[w.id],s,q,t;delete p.byIdMap[w.id];if(u===true){s=w.childNodes;q=s.length;for(t=0;t<q;t++){p.unregisterNode(s[t],true)}}if(w.onUnregisterTreeNode&&w===v){w.onUnregisterTreeNode(p);p.nodesToUnregister--}},onNodeSort:function(m,l){var n=this;n.suspendAutoSync();if((n.indexOf(m)!==-1&&m.isExpanded())||(m===n.getRoot()&&!n.getRootVisible())){Ext.suspendLayouts();n.onNodeCollapse(m,l);n.onNodeExpand(m,l);Ext.resumeLayouts(true)}n.resumeAutoSync(n.autoSync)},applyRoot:function(n){var q=this,o=q.getModel(),s=o.prototype.idProperty,p=q.getDefaultRootId();if(n&&!n.isNode){n=Ext.apply({text:q.getDefaultRootText(),root:true,isFirst:true,isLast:true,depth:0,index:0,parentId:null,allowDrag:false},n);if(p&&n[s]===undefined){n[s]=p}n=new o(n)}return n},updateRoot:function(v,t){var p=this,w,u=!t,q,s=[];p.getTrackRemoved();p.suspendEvent("add","remove");if(t&&t.isModel){if(p.getRootVisible()){q=[t]}else{q=t.childNodes}p.beforeNodeRemove(null,q,false,s);t.set("root",false);p.onNodeRemove(null,q,false,s);t.fireEvent("remove",null,t,false);t.fireEvent("rootchange",null);t.clearListeners();t.store=t.treeStore=null;p.unregisterNode(t)}p.getData().clear();if(v){if(v.fireEventArgs("beforeappend",[null,v])===false){v=null}else{w=v.parentNode;if(w){if(!w.removeChild(v,false,false,w.getTreeStore()===p)){return}}else{if((w=v.getTreeStore())&&w!==p&&v===w.getRoot()){w.setRoot(null)}}v.store=v.treeStore=p;v.set("root",true);v.updateInfo(true,{isFirst:true,isLast:true,depth:0,index:0,parentId:null});p.registerNode(v,true);v.fireEvent("append",null,v,false);v.fireEvent("rootchange",v);p.onNodeAppend(null,v,0);v.phantom=true}}p.fireEvent("rootchange",v,t);if(v&&(p.getAutoLoad()||v.isExpanded())){if(v.isLoaded()){p.onNodeExpand(v,v.childNodes);p.fireEvent("datachanged",p);p.fireEvent("refresh",p)}else{v.data.expanded=false;v.expand(false);if(v.isLoaded&&!p.getProxy().isSynchronous){p.fireEvent("datachanged",p);p.fireEvent("refresh",p)}}}else{if(!u){p.fireEvent("datachanged",p);p.fireEvent("refresh",p)}}p.resumeEvent("add","remove")},doDestroy:function(){var g=this,l=g.getRoot();if(l&&g.nodesToUnregister){l.cascade(function(e){if(e.onUnregisterTreeNode){e.onUnregisterTreeNode(g)}})}Ext.data.Store.prototype.doDestroy.call(this)},each:function(o,p,n){var s,q=0;if(n&&typeof n==="object"){s=n.collapsed;n=n.filtered}if(s){this.getRoot().cascade(function(e){if(n===true||e.get("visible")){return o.call(p||e,e,q++)}})}else{return Ext.data.Store.prototype.each.call(this,o,p,n)}},collect:function(s,u,y){var t,x={},w=[],v,q;if(u&&typeof u==="object"){t=u.collapsed;y=u.filtered;u=u.allowNull}if(t||y){this.getRoot().cascade(function(e){if(y===true||e.get("visible")){q=e.get(s);v=String(q);if((u||!Ext.isEmpty(q))&&!x[v]){x[v]=1;w.push(q)}}if(!t&&!e.isExpanded()){return false}})}else{w=Ext.data.Store.prototype.collect.call(this,s,u,y)}return w},getNodeById:function(f){return this.byIdMap[f]||null},findNode:function(v,w,q,s,t){if(Ext.isEmpty(w,false)){return null}if(v===this.model.idProperty&&arguments.length<3){return this.byIdMap[w]}var p=Ext.String.createRegex(w,q,s,t),u=null;Ext.Object.eachValue(this.byIdMap,function(e){if(e&&p.test(e.get(v))){u=e;return false}});return u},load:function(l){var g=l&&l.node;if(!g&!(g=this.getRoot())){g=this.setRoot({expanded:true});return}if(g.isLoading()){return}return Ext.data.Store.prototype.load.call(this,l)},reload:function(l){var g=Ext.apply({},l,this.lastOptions);g.node=this.getRoot();return this.load(g)},flushLoad:function(){var v=this,s=v.pendingLoadOptions,A,u,t,x=v.getClearOnLoad(),w,z,y;v.clearLoadTask();if(!s){return}A=s.node||v.getRoot();w=A&&A.isRoot();u=s.callback;t=s.scope;s.params=s.params||{};if(A.data.expanded&&!w){A.data.loaded=false;if(x){A.data.expanded=false}s.callback=function(f,g,e){if(!x){A.collapse()}A.expand();Ext.callback(u,t,[f,g,e])}}s.id=A.getId();v.setLoadOptions(s);if(v.getRemoteSort()&&s.sorters){v.fireEvent("beforesort",v,s.sorters)}s=Ext.apply({node:s.node||A,internalScope:v,internalCallback:v.onProxyLoad},s);v.lastOptions=Ext.apply({},s);s.isRootLoad=w;z=v.createOperation("read",s);if(v.fireEvent("beforeload",v,z)!==false){v.loading=true;if(w){if(v.getClearRemovedOnLoad()){v.removedNodes.length=0}if(x){v.unregisterNode(A,true);A.clear(false,true);v.registerNode(A);y=true}}else{if(v.getTrackRemoved()&&v.getClearRemovedOnLoad()){v.clearRemoved(A)}if(x){A.removeAll(false)}}if(v.loading&&A){A.set("loading",true)}if(y){v.clearData(true);if(v.getRootVisible()){v.suspendEvents();v.add(A);v.resumeEvents()}}z.execute()}return v},onProxyLoad:function(y){var u=this,s=y.initialConfig,x=y.wasSuccessful(),z=y.getRecords(),A=s.node,w=s.isRootLoad,t=y.getScope()||u,v=[z,y,x];if(u.destroyed){return}u.loading=false;A.set("loading",false);if(x){++u.loadCount;if(!u.getClearOnLoad()){z=u.cleanRecords(A,z)}if(u.getParentIdProperty()){z=u.treeify(A,z)}if(w){u.suspendEvent("add","update")}z=u.fillNode(A,z)}Ext.callback(s.onChildNodesAvailable,t,v);if(w){u.resumeEvent("add","update");u.callObservers("BeforePopulate");u.fireEvent("datachanged",u);u.fireEvent("refresh",u);u.callObservers("AfterPopulate")}u.fireEvent("load",u,z,x,y,A)},clearRemoved:function(C){var v=this,z=v.removedNodes,D=C.getId(),A=z.length,B=A,E={},x=[],F={},w,y,G;if(C===v.getRoot()){v.removedNodes.length=0;return}for(;B--;){w=z[B];F[w.getId()]=w}for(B=A;B--;){w=z[B];y=w;while(y&&y.getId()!==D){G=y.get("parentId")||y.get("lastParentId");y=y.parentNode||v.getNodeById(G)||F[G]}if(y){E[w.getId()]=w}}for(B=0;B<A;B++){w=z[B];if(!E[w.getId()]){x.push(w)}}v.removedNodes=x},fillNode:function(n,p){var o=this,m=p?p.length:0;if(++o.bulkUpdate===1){o.suspendEvent("datachanged")}if(m){o.setupNodes(p)}if(o.bulkUpdate===1){n.set("loaded",true)}else{n.data.loaded=true}if(p.length){n.appendChild(p,undefined,true)}if(!--o.bulkUpdate){o.resumeEvent("datachanged")}return p},setupNodes:function(y){var v=this,w=v.getSorters(),u=false,A=y.length,B=v.sortOnLoad&&A>1&&!v.getRemoteSort()&&v.getFolderSort()||w.length,z=v.needsLocalFilter(),C,t,x;if(z){v.doFilter(y[0])}for(x=1;x<A;x++){C=y[x];t=y[x-1];if(z){v.doFilter(C)}u=C.data.index!==t.data.index}if(B){v.needsIndexSort=true;Ext.Array.sort(y,v.getSortFn());v.needsIndexSort=false}else{if(u){Ext.Array.sort(y,v.sortByIndex)}}},beginFill:function(){var f=this;if(!f.fillCount++){f.beginUpdate();f.suspendEvent("add","update");f.suspendAutoSync();f.fillArray=[]}},endFill:function(p,t){var w=this,v=w.fillArray,q,u,s;v.push(t);if(!--w.fillCount){w.resumeAutoSync();w.resumeEvent("add","update");for(q=0,u=v.length;q<u;q++){s=w.indexOf(v[q][0]);if(s!==-1){w.fireEvent("add",w,v[q],s)}}w.fillArray=null;w.endUpdate()}},sortByIndex:function(g,l){return g.data.index-l.data.index},onIdChanged:function(p,u,s){var o=p.childNodes,t=o&&o.length,q;Ext.data.Store.prototype.onIdChanged.apply(this,arguments);delete this.byIdMap[u];this.byIdMap[s]=p;for(q=0;q<t;q++){o[q].set("parentId",s)}},treeify:function(y,B){var J=this,H=y.getId(),D=J.getParentIdProperty(),x=B.length,G=[],K={},A,C,z,I,F,E;for(A=0;A<x;A++){C=B[A];C.data.depth=1;K[C.id]=C}for(A=0;A<x;A++){C=B[A];z=C.data[D];if(!(z||z===0)||z===H){G.push(C)}else{I=K[z];I.$children=I.$children||[];I.$children.push(C);C.data.depth=I.data.depth+1}}for(F in K){C=K[F];E=C.$children;if(E){delete C.$children;J.setupNodes(E);C.appendChild(E)}J.registerNode(C)}J.setupNodes(G);return G},cleanRecords:function(y,u){var q={},w=y.childNodes,s=0,v=w.length,t=[],x;for(;s<v;++s){q[w[s].getId()]=true}for(s=0,v=u.length;s<v;++s){x=u[s];if(!q[x.getId()]){t.push(x)}}return t},removeAll:function(){this.suspendEvents();this.setRoot(null);this.resumeEvents();Ext.data.Store.prototype.removeAll.call(this)},doSort:function(l){var g=this;if(g.getRemoteSort()){g.load()}else{g.tree.sort(l,true);g.fireEvent("datachanged",g);g.fireEvent("refresh",g)}g.fireEvent("sort",g,g.sorters.getRange())},filterVisible:function(f){return f.get("visible")},isVisible:function(n){var p=n.parentNode,m=n.data.visible,o=this.getRoot();while(m&&p){m=p.data.expanded&&p.data.visible;p=p.parentNode}return m&&!(n===o&&!this.getRootVisible())},commitChanges:function(){var f=this.removedNodes;if(f){f.length=0}Ext.data.Store.prototype.commitChanges.call(this)},getRootNode:function(){return this.getRoot()},setRootNode:function(f){this.setRoot(f);return this.getRoot()},privates:{fireChangeEvent:function(f){return !!this.byIdMap[f.id]},getRawRemovedRecords:function(){return this.removedNodes},createOperation:function(p,s){var n=this,o=s.node,q;if(n.useModelProxy&&o&&o!==n.getRootNode()){q=o.getProxy()}if(q&&q!==n.getProxy()){return q.createOperation(p,s)}else{return Ext.data.Store.prototype.createOperation.call(this,p,s)}},recordCreator:function(l,g){return new g(l)},doFilter:function(f){this.filterNodes(f,this.getFilters().getFilterFn(),true)},filterNodes:function(A,C,w){var v=this,B=v.filterer==="bottomup",y=C(A)&&w||(A.isRoot()&&!v.getRootVisible()),t=A.childNodes,x=t&&t.length,z,u;if(x){for(z=0;z<x;++z){u=v.filterNodes(t[z],C,y||B)||u}if(B){y=u||y}}A.set("visible",y,v._silentOptions);return y},needsLocalFilter:function(){return !this.getRemoteFilter()&&this.getFilters().length},onRemoteFilterSet:function(n,l){var m=this.getData();m.setFilters(null);if(n){n.on("endupdate",this.onFilterEndUpdate,this)}},onRemoteSortSet:function(m,l){var n=this.getData();n.setSorters(null);if(m){m.on("endupdate",this.onSorterEndUpdate,this)}}},deprecated:{5:{properties:{tree:null}}}},1,0,0,0,["store.tree"],0,[Ext.data,"TreeStore"],0));(Ext.cmd.derive("Ext.data.Validation",Ext.data.Model,{isValidation:true,syncGeneration:0,attach:function(f){this.record=f;this.isBase=f.self===Ext.data.Model;delete this.data.id},getValidation:function(){return null},isValid:function(){var f=this;if(f.syncGeneration!==f.record.generation){f.refresh()}return !f.dirty},refresh:function(X){if(this.isBase){return}var Q=this,O=Q.data,V=Q.record,P=V.fields,J=V.generation,E=V.data,R=V.validationSeparator,W=null,U,S,M,Y,G,I,K,F,H,T,L,N;if(X||Q.syncGeneration!==J){Q.syncGeneration=J;for(I=0,H=P.length;I<H;++I){Y=P[I];N=Y.name;L=E[N];U=Y.defaultInvalidMessage;M=0;if(!(N in O)){O[N]=S=true}else{S=O[N]}if(Y.validate!==Ext.emptyFn){T=Y.validate(L,R,null,V);if(T!==true){M=T||U}}if(!M){M=true}if(M!==S){(W||(W={}))[N]=M}}if(W){Q.set(W)}}}},0,0,0,0,0,0,[Ext.data,"Validation"],0));(Ext.cmd.derive("Ext.dom.Helper",Ext.Base,function(){var w="afterbegin",y="afterend",x="beforebegin",s="beforeend",v=["BeforeBegin","previousSibling"],q=["AfterEnd","nextSibling"],t={beforebegin:v,afterend:q},u={beforebegin:v,afterend:q,afterbegin:["AfterBegin","firstChild"],beforeend:["BeforeEnd","lastChild"]};return{singleton:true,alternateClassName:["Ext.DomHelper","Ext.core.DomHelper"],emptyTags:/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,confRe:/^(?:tag|children|cn|html|tpl|tplData)$/i,endRe:/end/i,attributeTransform:{cls:"class",htmlFor:"for"},closeTags:{},detachedDiv:document.createElement("div"),decamelizeName:function(){var e=/([a-z])([A-Z])/g,f={};function g(n,l,m){return l+"-"+m.toLowerCase()}return function(l){return f[l]||(f[l]=l.replace(e,g))}}(),generateMarkup:function(g,A){var l=this,m=typeof g,n,e,f,o,p;if(m==="string"||m==="number"){A.push(g)}else{if(Ext.isArray(g)){for(o=0;o<g.length;o++){if(g[o]){l.generateMarkup(g[o],A)}}}else{f=g.tag||"div";A.push("<",f);for(n in g){if(g.hasOwnProperty(n)){e=g[n];if(e!==undefined&&!l.confRe.test(n)){if(e&&e.join){e=e.join(" ")}if(typeof e==="object"){A.push(" ",n,'="');l.generateStyles(e,A,true).push('"')}else{A.push(" ",l.attributeTransform[n]||n,'="',e,'"')}}}}if(l.emptyTags.test(f)){A.push("/>")}else{A.push(">");if((e=g.tpl)){e.applyOut(g.tplData,A)}if((e=g.html)){A.push(e)}if((e=g.cn||g.children)){l.generateMarkup(e,A)}p=l.closeTags;A.push(p[f]||(p[f]="</"+f+">"))}}}return A},generateStyles:function(f,m,g){var n=m||[],l,e;for(l in f){if(f.hasOwnProperty(l)){e=f[l];l=this.decamelizeName(l);if(g&&Ext.String.hasHtmlCharacters(e)){e=Ext.String.htmlEncode(e)}n.push(l,":",e,";")}}return m||n.join("")},markup:function(f){if(typeof f==="string"){return f}var e=this.generateMarkup(f,[]);return e.join("")},applyStyles:function(f,e){Ext.fly(f).applyStyles(e)},createContextualFragment:function(l){var e=this.detachedDiv,m=document.createDocumentFragment(),g,f;e.innerHTML=l;f=e.childNodes;g=f.length;while(g--){m.appendChild(f[0])}return m},createDom:function(g,n){var l=this,m=l.markup(g),e=l.detachedDiv,f;e.innerHTML=m;f=e.firstChild;return Ext.supports.ChildContentClearedWhenSettingInnerHTML?f.cloneNode(true):f},insertHtml:function(p,e,o){var g=this,C,n,B,l,f;p=p.toLowerCase();if(e.insertAdjacentHTML){if(g.ieInsertHtml){f=g.ieInsertHtml(p,e,o);if(f){return f}}C=u[p];if(C){e.insertAdjacentHTML(C[0],o);return e[C[1]]}}else{if(e.nodeType===3){p=p===w?x:p;p=p===s?y:p}n=Ext.supports.CreateContextualFragment?e.ownerDocument.createRange():undefined;l="setStart"+(this.endRe.test(p)?"After":"Before");if(t[p]){if(n){n[l](e);f=n.createContextualFragment(o)}else{f=this.createContextualFragment(o)}e.parentNode.insertBefore(f,p===x?e:e.nextSibling);return e[(p===x?"previous":"next")+"Sibling"]}else{B=(p===w?"first":"last")+"Child";if(e.firstChild){if(n){try{n[l](e[B]);f=n.createContextualFragment(o)}catch(m){f=this.createContextualFragment(o)}}else{f=this.createContextualFragment(o)}if(p===w){e.insertBefore(f,e.firstChild)}else{e.appendChild(f)}}else{e.innerHTML=o}return e[B]}}},insertBefore:function(g,e,f){return this.doInsert(g,e,f,x)},insertAfter:function(g,e,f){return this.doInsert(g,e,f,y)},insertFirst:function(g,e,f){return this.doInsert(g,e,f,w)},append:function(g,e,f){return this.doInsert(g,e,f,s)},overwrite:function(g,l,e){var f=this,m;g=Ext.getDom(g);l=f.markup(l);if(f.ieOverwrite){m=f.ieOverwrite(g,l)}if(!m){g.innerHTML=l;m=g.firstChild}return e?Ext.get(m):m},doInsert:function(l,e,f,n){var g=this,m;l=l.dom||Ext.getDom(l);if("innerHTML" in l){m=g.insertHtml(n,l,g.markup(e))}else{m=g.createDom(e,null);if(l.nodeType===3){n=n===w?x:n;n=n===s?y:n}if(t[n]){l.parentNode.insertBefore(m,n===x?l:l.nextSibling)}else{if(l.firstChild&&n===w){l.insertBefore(m,l.firstChild)}else{l.appendChild(m)}}}return f?Ext.get(m):m},createTemplate:function(e){var f=this.markup(e);return new Ext.Template(f)},createHtml:function(e){return this.markup(e)}}},0,0,0,0,0,0,[Ext.dom,"Helper",Ext,"DomHelper",Ext.core,"DomHelper"],0));Ext.define("Ext.overrides.dom.Helper",(function(){var t=/^(?:table|thead|tbody|tr|td)$/i,x=/td|tr|tbody|thead/i,y="<table>",w="</table>",u=y+"<tbody>",q="</tbody>"+w,v=u+"<tr>",s="</tr>"+q;return{override:"Ext.dom.Helper",ieInsertHtml:function(l,f,g){var e=null;if(Ext.isIE9m&&t.test(f.tagName)){e=this.insertIntoTable(f.tagName.toLowerCase(),l,f,g)}return e},ieOverwrite:function(e,f){if(Ext.isIE9m&&t.test(e.tagName)){while(e.firstChild){e.removeChild(e.firstChild)}if(f){return this.insertHtml("afterbegin",e,f)}}},ieTable:function(e,n,p,f){var m=-1,g=this.detachedDiv,l,o;g.innerHTML=[n,p,f].join("");while(++m<e){g=g.firstChild}l=g.nextSibling;if(l){l=g;g=document.createDocumentFragment();while(l){o=l.nextSibling;g.appendChild(l);l=o}}return g},insertIntoTable:function(f,B,C,p){var e,m,n=B==="beforebegin",g=B==="afterbegin",o=B==="beforeend",l=B==="afterend";if(f==="td"&&(g||o)||!x.test(f)&&(n||l)){return null}m=n?C:l?C.nextSibling:g?C.firstChild:null;if(n||l){C=C.parentNode}if(f==="td"||(f==="tr"&&(o||g))){e=this.ieTable(4,v,p,s)}else{if(((f==="tbody"||f==="thead")&&(o||g))||(f==="tr"&&(n||l))){e=this.ieTable(3,u,p,q)}else{e=this.ieTable(2,y,p,w)}}C.insertBefore(e,m);return e}}})());(Ext.cmd.derive("Ext.data.proxy.Rest",Ext.data.proxy.Ajax,{alternateClassName:"Ext.data.RestProxy",defaultActionMethods:{create:"POST",read:"GET",update:"PUT",destroy:"DELETE"},slashRe:/\/$/,periodRe:/\.$/,config:{appendId:true,format:null,batchActions:false,actionMethods:{create:"POST",read:"GET",update:"PUT",destroy:"DELETE"}},buildUrl:function(v){var t=this,w=v.getOperation(),y=w.getRecords(),u=y?y[0]:null,s=t.getFormat(),A=t.getUrl(v),z,x;if(u&&!u.phantom){z=u.getId()}else{z=w.getId()}if(t.getAppendId()&&t.isValidId(z)){if(!A.match(t.slashRe)){A+="/"}A+=encodeURIComponent(z);x=v.getParams();if(x){delete x[t.getIdParam()]}}if(s){if(!A.match(t.periodRe)){A+="."}A+=s}v.setUrl(A);return Ext.data.proxy.Ajax.prototype.buildUrl.call(this,v)},isValidId:function(f){return f||f===0}},0,0,0,0,["proxy.rest"],0,[Ext.data.proxy,"Rest",Ext.data,"RestProxy"],0));(Ext.cmd.derive("Ext.dom.GarbageCollector",Ext.Base,{singleton:true,interval:30000,constructor:function(){var f=this;f.lastTime=Ext.now();f.onTick=f.onTick.bind(f);f.resume()},collect:function(){var e=this,z=Ext.cache,y,v,x,A,u,w;for(y in z){if(!z.hasOwnProperty(y)){continue}x=z[y];if(x.skipGarbageCollection){continue}v=x.dom;try{u=Ext.isGarbage(v)}catch(t){delete z[y];continue}if(u){if(x&&x.dom){x.collect()}}}if(Ext.isIE9m){A={};for(y in z){if(z.hasOwnProperty(y)){A[y]=z[y]}}Ext.cache=Ext.dom.Element.cache=A}e.lastTime=Ext.now()},onTick:function(){this.timerId=null;if(Ext.enableGarbageCollector){this.collect()}this.resume()},pause:function(){var f=this.timerId;if(f){this.timerId=null;clearTimeout(f)}},resume:function(){var l=this,g=l.lastTime;if(Ext.enableGarbageCollector&&(Ext.now()-g)>l.interval){l.collect()}if(!l.timerId){l.timerId=Ext.defer(l.onTick,l.interval)}}},1,0,0,0,0,0,[Ext.dom,"GarbageCollector"],0));(Ext.cmd.derive("Ext.dom.TouchAction",Ext.Base,{singleton:true,lastTouchStartTime:0,minMoveDistance:8,spaceRe:/\s+/,preventSingle:null,preventMulti:null,disabledOverflowDom:null,panXCls:"x-touch-action-pan-x",panYCls:"x-touch-action-pan-y",cssValues:["none","pan-x","pan-y","pan-x pan-y","pinch-zoom","pan-x pinch-zoom","pan-y pinch-zoom","manipulation","double-tap-zoom","pan-x double-tap-zoom","pan-y double-tap-zoom","pan-x pan-y double-tap-zoom","pinch-zoom double-tap-zoom","pan-x pinch-zoom double-tap-zoom","pan-y pinch-zoom double-tap-zoom",""],objectValues:[{panX:false,panY:false,pinchZoom:false,doubleTapZoom:false},{panX:true,panY:false,pinchZoom:false,doubleTapZoom:false},{panX:false,panY:true,pinchZoom:false,doubleTapZoom:false},{panX:true,panY:true,pinchZoom:false,doubleTapZoom:false},{panX:false,panY:false,pinchZoom:true,doubleTapZoom:false},{panX:true,panY:false,pinchZoom:true,doubleTapZoom:false},{panX:false,panY:true,pinchZoom:true,doubleTapZoom:false},{panX:true,panY:true,pinchZoom:true,doubleTapZoom:false},{panX:false,panY:false,pinchZoom:false,doubleTapZoom:true},{panX:true,panY:false,pinchZoom:false,doubleTapZoom:true},{panX:false,panY:true,pinchZoom:false,doubleTapZoom:true},{panX:true,panY:true,pinchZoom:false,doubleTapZoom:true},{panX:false,panY:false,pinchZoom:true,doubleTapZoom:true},{panX:true,panY:false,pinchZoom:true,doubleTapZoom:true},{panX:false,panY:true,pinchZoom:true,doubleTapZoom:true},{panX:true,panY:true,pinchZoom:true,doubleTapZoom:true}],attributeName:"data-extTouchAction",constructor:function(){var g=this,l=Ext.supports;if(l.PointerEvents){g.cssProp="touch-action"}else{if(l.MSPointerEvents){g.cssProp="-ms-touch-action"}else{if(l.TouchEvents){Ext.getWin().on({touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",scope:g,translate:false,capture:true,priority:5000});Ext.on({scroll:"onScroll",scope:g,destroyable:true})}}}},containsTargets:function(t,u){var q=true,e=u.type==="touchend"?u.changedTouches:u.touches,s,p;for(s=0,p=e.length;s<p;s++){if(!t.contains(e[s].target)){q=false;break}}return q},disableOverflow:function(o,q){var p=this,u=q?"overflow-y":"overflow-x",t,s;if(!p.disabledOverflowDom&&!Ext.isiOS&&!Ext.getScrollbarSize().width){p.disabledOverflowDom=o;s=q?p.panXCls:p.panYCls;while(o){t=Ext.fly(o).getStyle(u);if(t==="auto"||t==="scroll"){Ext.fly(o).addCls(s)}o=o.parentNode}}},get:function(l){var n=l.getAttribute(this.attributeName),m=null;if(n!=null){m=this.objectValues[n]}return m},getFlags:function(g){var l;if(typeof g==="number"){l=g}else{l=0;if(g.panX!==false){l|=1}if(g.panY!==false){l|=2}if(g.pinchZoom!==false){l|=4}if(g.doubleTapZoom!==false){l|=8}}return l},lookupFlags:function(f){return f.getAttribute&&f.getAttribute(this.attributeName)},onScroll:function(){this.scrollOccurred=true;this.isDoubleTap=false},onTouchEnd:function(u){var e=this,t=u.target,s,q,p;s=u.touches.length;if(s===0){if(e.isDoubleTap){while(t){q=e.lookupFlags(t);if(q!=null){p=q&8;if(!p){u.preventDefault()}}t=t.parentNode}}e.isDoubleTap=false;e.preventSingle=null;e.preventMulti=null;e.resetOverflow()}},onTouchMove:function(N){var M=this,K=null,e=N.target,E,L,I,J,H,F,C,G,A,B,O,D;O=M.preventSingle;D=M.preventMulti;L=N.touches.length;if((L===1&&(O===false))||(D===false)){return}if((L>1&&(D===true))||(L===1&&(O===true))){K=true}else{while(e){E=M.lookupFlags(e);if(E!=null){if(!E){K=true}else{if(L===1){I=!!(E&1);J=!!(E&2);if(I&&J){K=false}else{if(!I&&!J){K=true}else{H=N.getPoint();F=M.startPoint;C=Ext.Element.getViewportScale();G=Math.abs(H.getDistanceTo(M.startPoint)*C);if(G>=M.minMoveDistance){A=Math.abs(H.x-F.x);B=Math.abs(H.y-F.y);K=!!((I&&(B>A))||(J&&(A>B)))}}}}else{if(M.containsTargets(e,N)){K=!(E&4)}else{K=false}}}if(K){break}}e=e.parentNode}}if(L===1){M.preventSingle=K}else{if(L>1){M.preventMulti=K}}if(K){N.preventDefault()}},onTouchStart:function(v){var e=this,w,q,u,s,t;if(v.touches.length===1){w=v.time;if(!e.scrollOccurred&&((w-e.lastTouchStartTime)<=500)){e.isDoubleTap=true}e.lastTouchStartTime=w;e.scrollOccurred=false;e.startPoint=v.getPoint();u=v.target;while(u){q=e.lookupFlags(u);if(q!=null){s=!!(q&1);t=!!(q&2);if(s!==t){e.disableOverflow(u,s);break}}u=u.parentNode}}else{e.isDoubleTap=false}},resetOverflow:function(){var l=this,g=l.disabledOverflowDom;while(g){Ext.fly(g).removeCls([l.panXCls,l.panYCls]);g=g.parentNode}l.disabledOverflowDom=null},set:function(u,o){var p=this,q=p.cssProp,t=p.getFlags(o),s=p.attributeName;if(q){Ext.fly(u).setStyle(q,p.cssValues[t])}if(t===15){u.removeAttribute(s)}else{u.setAttribute(s,t)}}},1,0,0,0,0,0,[Ext.dom,"TouchAction"],0));(Ext.cmd.derive("Ext.event.gesture.Recognizer",Ext.Base,{priority:0,handledEvents:[],isStarted:false,config:{onRecognized:Ext.emptyFn,callbackScope:null},constructor:function(f){this.initConfig(f);Ext.event.publisher.Gesture.instance.registerRecognizer(this)},onStart:Ext.emptyFn,onEnd:Ext.emptyFn,onTouchStart:Ext.emptyFn,onTouchMove:Ext.emptyFn,onTouchEnd:function(){return this.reset()},onTouchCancel:function(e){return this.cancel(e)},fire:function(p,e,n,o){this.getOnRecognized().call(this.getCallbackScope(),this,p,e,n,o)},cancel:function(e){if(this.isStarted){this.onCancel(e)}return this.reset()},onCancel:Ext.emptyFn,reset:function(){this.isStarted=false;return false}},1,0,0,0,0,[[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.event.gesture,"Recognizer"],0));(Ext.cmd.derive("Ext.event.gesture.SingleTouch",Ext.event.gesture.Recognizer,{isSingleTouch:true,onTouchStart:function(e){if(e.touches.length>1){return this.cancel(e)}}},0,0,0,0,0,0,[Ext.event.gesture,"SingleTouch"],0));(Ext.cmd.derive("Ext.event.gesture.DoubleTap",Ext.event.gesture.SingleTouch,{priority:300,config:{moveDistance:8,tapDistance:24,maxDuration:300},handledEvents:["singletap","doubletap"],singleTapTimer:null,startTime:0,lastTapTime:0,onTouchStart:function(e){var n=this,o=Ext.event.gesture.SingleTouch.prototype.onTouchStart.call(this,e),p;if(o!==false){n.isStarted=true;p=n.lastStartPoint=e.changedTouches[0].point;n.startPoint=n.startPoint||p;n.startTime=e.time;clearTimeout(n.singleTapTimer)}return o},onTouchMove:function(o){var p=this,q=o.changedTouches[0].point,e=Ext.Element.getViewportScale(),s=Math.round(Math.abs(q.getDistanceTo(p.lastStartPoint)*e));if(s>=p.getMoveDistance()){return p.cancel(o)}},onTouchEnd:function(v){var E=this,w=E.getMaxDuration(),A=v.time,e=v.target,D=E.lastTapTime,y=E.lastTarget,C=v.changedTouches[0].point,x,z,B;E.lastTapTime=A;E.lastTarget=e;if(D){x=A-D;if(x<=w){z=Ext.Element.getViewportScale();B=Math.round(Math.abs(C.getDistanceTo(E.startPoint)*z));if(B<=E.getTapDistance()){if(e!==y){return E.cancel(v)}E.lastTarget=null;E.lastTapTime=0;E.fire("doubletap",v,{touch:v.changedTouches[0],duration:x});return Ext.event.gesture.SingleTouch.prototype.onTouchEnd.call(this,v)}}}if(A-E.startTime>w){E.fire("singletap",v);E.reset()}else{E.setSingleTapTimer(v)}},setSingleTapTimer:function(e){var l=this;l.singleTapTimer=Ext.defer(function(){l.fire("singletap",e);l.reset()},l.getMaxDuration())},reset:function(){var f=this;clearTimeout(f.singleTapTimer);f.startTime=f.lastTapTime=0;f.lastStartPoint=f.startPoint=f.singleTapTimer=null;return Ext.event.gesture.SingleTouch.prototype.reset.call(this)}},0,0,0,0,0,0,[Ext.event.gesture,"DoubleTap"],function(l){var g=Ext.manifest.gestures;l.instance=new l(g&&g.doubleTap)}));(Ext.cmd.derive("Ext.event.gesture.Drag",Ext.event.gesture.SingleTouch,{priority:100,startPoint:null,previousPoint:null,lastPoint:null,handledEvents:["dragstart","drag","dragend","dragcancel"],config:{minDistance:8},constructor:function(){Ext.event.gesture.SingleTouch.prototype.constructor.apply(this,arguments);this.initInfo()},initInfo:function(){this.info={touch:null,previous:{x:0,y:0},x:0,y:0,delta:{x:0,y:0},absDelta:{x:0,y:0},flick:{velocity:{x:0,y:0}},direction:{x:0,y:0},time:0,previousTime:{x:0,y:0},longpress:false}},onTouchStart:function(e){var m=this,n=Ext.event.gesture.SingleTouch.prototype.onTouchStart.call(this,e);if(n!==false){m.startTime=e.time;m.startPoint=e.changedTouches[0].point}return n},tryDragStart:function(p){var q=this,s=p.changedTouches[0].point,u=q.getMinDistance(),e=Ext.Element.getViewportScale(),t=Math.round(Math.abs(s.getDistanceTo(q.startPoint)*e));if(t>=u){q.doDragStart(p)}},doDragStart:function(v,s){var q=this,u=v.changedTouches[0],t=u.point,w=q.info,e;if(s){e=Ext.now();q.startTime=e;q.startPoint=t;w.longpress=true}else{e=v.time}q.isStarted=true;q.previousPoint=q.lastPoint=t;q.resetInfo("x",v,u);q.resetInfo("y",v,u);w.time=e;q.fire("dragstart",v,w)},onTouchMove:function(n){var o=this,e,p;if(!o.startPoint){return}if(!o.isStarted){o.tryDragStart(n)}if(!o.isStarted){return}e=n.changedTouches[0];p=e.point;if(o.lastPoint){o.previousPoint=o.lastPoint}o.lastPoint=p;o.lastMoveEvent=n;o.updateInfo("x",n,e);o.updateInfo("y",n,e);o.info.time=n.time;o.fire("drag",n,o.info)},onAxisDragEnd:function(n,l){var m=l.time-l.previousTime[n];if(m>0){l.flick.velocity[n]=(l[n]-l.previous[n])/m}},resetInfo:function(x,u,v){var t=this,e=t.lastPoint[x],z=t.startPoint[x],A=e-z,w=x.toUpperCase(),y=t.info;y.touch=v;y.delta[x]=A;y.absDelta[x]=Math.abs(A);y.previousTime[x]=t.startTime;y.previous[x]=z;y[x]=e;y.direction[x]=0;y["start"+w]=t.startPoint[x];y["previous"+w]=y.previous[x];y["page"+w]=y[x];y["delta"+w]=y.delta[x];y["absDelta"+w]=y.absDelta[x];y["previousDelta"+w]=0;y.startTime=t.startTime},updateInfo:function(z,e,w){var G=this,E=G.lastPoint[z],y=G.previousPoint[z],C=G.startPoint[z],D=E-C,A=G.info,F=A.direction,x=z.toUpperCase(),B=A.previous[z];A.touch=w;A.delta[z]=D;A.absDelta[z]=Math.abs(D);if(E!==B&&E!==A[z]){A.previous[z]=A[z];A.previousTime[z]=A.time}A[z]=E;if(E>y){F[z]=1}else{if(E<y){F[z]=-1}}A["start"+x]=C;A["previous"+x]=A.previous[z];A["page"+x]=A[z];A["delta"+x]=A.delta[z];A["absDelta"+x]=A.absDelta[z];A["previousDelta"+x]=A.previous[z]-C;A.startTime=G.startTime},onTouchEnd:function(e){var p=this,s,q,o;if(p.isStarted){s=e.changedTouches[0];q=s.point;o=p.info;p.lastPoint=q;p.updateInfo("x",e,s);p.updateInfo("y",e,s);o.time=e.time;p.onAxisDragEnd("x",o);p.onAxisDragEnd("y",o);p.fire("dragend",e,o)}return Ext.event.gesture.SingleTouch.prototype.onTouchEnd.call(this,e)},onCancel:function(n){var p=this,e=n.changedTouches[0],o=p.info;if(!n.touches.length){p.lastPoint=e.point}p.updateInfo("x",n,e);p.updateInfo("y",n,e);o.time=n.time;p.fire("dragcancel",n,o,true)},reset:function(){var f=this;f.lastPoint=f.startPoint=f.previousPoint=f.lastPoint=f.lastMoveEvent=null;f.initInfo();return Ext.event.gesture.SingleTouch.prototype.reset.call(this)}},1,0,0,0,0,0,[Ext.event.gesture,"Drag"],function(l){var g=Ext.manifest.gestures;l.instance=new l(g&&g.drag)}));(Ext.cmd.derive("Ext.event.gesture.Swipe",Ext.event.gesture.SingleTouch,{priority:600,handledEvents:["swipestart","swipe","swipecancel"],config:{minDistance:80,maxOffset:35,maxDuration:1000},onTouchStart:function(n){var o=this,p=Ext.event.gesture.SingleTouch.prototype.onTouchStart.call(this,n),e;if(p!==false){e=n.changedTouches[0];o.startTime=n.time;o.isHorizontal=true;o.isVertical=true;o.startX=e.pageX;o.startY=e.pageY}return p},onTouchMove:function(e){var I=this,x=e.changedTouches[0],F=x.pageX,H=x.pageY,y=F-I.startX,z=H-I.startY,B=Math.abs(F-I.startX),C=Math.abs(H-I.startY),A=e.time-I.startTime,E,G,D;if((B===0&&C===0)||(A>I.getMaxDuration())){return I.cancel(e)}if(I.isHorizontal&&C>I.getMaxOffset()){I.isHorizontal=false}if(I.isVertical&&B>I.getMaxOffset()){I.isVertical=false}if(!I.isVertical||!I.isHorizontal){E=I.getMinDistance();if(I.isHorizontal&&B<E){G=(y<0)?"left":"right";D=B}else{if(I.isVertical&&C<E){G=(z<0)?"up":"down";D=C}}}if(!I.isHorizontal&&!I.isVertical){return I.cancel(e)}if(G&&!I.isStarted){I.isStarted=true;I.fire("swipestart",e,{touch:x,direction:G,distance:D,duration:A})}},onTouchEnd:function(e){var I=this,x,F,H,y,z,B,C,E,A,G,D;if(I.onTouchMove(e)!==false){x=e.changedTouches[0];F=x.pageX;H=x.pageY;y=F-I.startX;z=H-I.startY;B=Math.abs(y);C=Math.abs(z);E=I.getMinDistance();A=e.time-I.startTime;if(I.isVertical&&C<E){I.isVertical=false}if(I.isHorizontal&&B<E){I.isHorizontal=false}if(I.isHorizontal){G=(y<0)?"left":"right";D=B}else{if(I.isVertical){G=(z<0)?"up":"down";D=C}}I.fire("swipe",e,{touch:x,direction:G,distance:D,duration:A})}return Ext.event.gesture.SingleTouch.prototype.onTouchEnd.call(this,e)},onCancel:function(e){this.fire("swipecancel",e,null,true)},reset:function(){var f=this;f.startTime=f.isHorizontal=f.isVertical=f.startX=f.startY=null;return Ext.event.gesture.SingleTouch.prototype.reset.call(this)}},0,0,0,0,0,0,[Ext.event.gesture,"Swipe"],function(l){var g=Ext.manifest.gestures;l.instance=new l(g&&g.swipe)}));(Ext.cmd.derive("Ext.event.gesture.EdgeSwipe",Ext.event.gesture.Swipe,{priority:500,handledEvents:["edgeswipe","edgeswipestart","edgeswipeend","edgeswipecancel"],config:{minDistance:60},onTouchStart:function(n){var o=this,p=Ext.event.gesture.Swipe.prototype.onTouchStart.call(this,n),e;if(p!==false){e=n.changedTouches[0];o.direction=null;o.isHorizontal=true;o.isVertical=true;o.startX=e.pageX;o.startY=e.pageY}return p},onTouchMove:function(N){var M=this,e=N.changedTouches[0],D=e.pageX,L=e.pageY,y=D-M.startX,C=L-M.startY,H=Math.abs(L-M.startY),G=Math.abs(D-M.startX),x=M.getMinDistance(),E=M.getMaxOffset(),F=N.time-M.startTime,J=Ext.Viewport&&Ext.Element.getViewportWidth(),O=Ext.Viewport&&Ext.Element.getViewportHeight(),K,I;if(M.isVertical&&G>E){M.isVertical=false}if(M.isHorizontal&&H>E){M.isHorizontal=false}if(M.isVertical&&M.isHorizontal){if(H>G){M.isHorizontal=false}else{M.isVertical=false}}if(M.isHorizontal){K=(y<0)?"left":"right";I=y}else{if(M.isVertical){K=(C<0)?"up":"down";I=C}}K=M.direction||(M.direction=K);if(K==="up"){I=C*-1}else{if(K==="left"){I=y*-1}}M.distance=I;if(!I){return M.cancel(N)}if(!M.isStarted){if((K==="right"&&M.startX>x)||(K==="down"&&M.startY>x)||(K==="left"&&(J-M.startX)>x)||(K==="up"&&(O-M.startY)>x)){return M.cancel(N)}M.isStarted=true;M.startTime=N.time;M.fire("edgeswipestart",N,{touch:e,direction:K,distance:I,duration:F})}else{M.fire("edgeswipe",N,{touch:e,direction:K,distance:I,duration:F})}},onTouchEnd:function(e){var n=this,m;if(n.onTouchMove(e)!==false){m=e.time-n.startTime;n.fire("edgeswipeend",e,{touch:e.changedTouches[0],direction:n.direction,distance:n.distance,duration:m})}return this.reset()},onCancel:function(e){this.fire("edgeswipecancel",e,{touch:e.changedTouches[0]},true)},reset:function(){var f=this;f.direction=f.isHorizontal=f.isVertical=f.startX=f.startY=f.startTime=f.distance=null;return Ext.event.gesture.Swipe.prototype.reset.call(this)}},0,0,0,0,0,0,[Ext.event.gesture,"EdgeSwipe"],function(l){var g=Ext.manifest.gestures;l.instance=new l(g&&g.edgeSwipe)}));(Ext.cmd.derive("Ext.event.gesture.LongPress",Ext.event.gesture.SingleTouch,{priority:400,config:{moveDistance:8,minDuration:1000},handledEvents:["longpress","taphold"],onTouchStart:function(e){var m=this,n=Ext.event.gesture.SingleTouch.prototype.onTouchStart.call(this,e);if(n!==false){m.startPoint=e.changedTouches[0].point;m.setLongPressTimer(e)}return n},setLongPressTimer:function(e){var l=this;l.timer=Ext.defer(l.fireLongPress,l.getMinDuration(),l,[e])},onTouchMove:function(o){var p=this,q=o.changedTouches[0].point,e=Ext.Element.getViewportScale(),s=Math.round(Math.abs(q.getDistanceTo(p.startPoint)*e));if(s>=p.getMoveDistance()){return p.cancel(o)}},reset:function(){var f=this;clearTimeout(f.timer);f.timer=f.startPoint=null;return Ext.event.gesture.SingleTouch.prototype.reset.call(this)},fireLongPress:function(e){var n=this,m={touch:e.changedTouches[0],duration:n.getMinDuration(),startDrag:n.startDrag};this.fire("taphold",e,m);this.fire("longpress",e,m);this.reset()},startDrag:function(){var g=Ext.event.gesture.Drag.instance,l=this.parentEvent;g.doDragStart(l,true);Ext.event.publisher.Gesture.instance.claimRecognizer(g,l)}},0,0,0,0,0,0,[Ext.event.gesture,"LongPress"],function(l){var g=Ext.manifest.gestures;l.instance=new l(g&&g.longPress)}));(Ext.cmd.derive("Ext.event.gesture.MultiTouch",Ext.event.gesture.Recognizer,{requiredTouchesCount:2,isTracking:false,isMultiTouch:true,onTouchStart:function(s){var p=this,q=p.requiredTouchesCount,e=s.touches,o=e.length;if(o===q){p.isTracking=true}else{if(o>q){return p.cancel(s)}}},reset:function(){this.isTracking=false;return Ext.event.gesture.Recognizer.prototype.reset.call(this)}},0,0,0,0,0,0,[Ext.event.gesture,"MultiTouch"],0));(Ext.cmd.derive("Ext.event.gesture.Pinch",Ext.event.gesture.MultiTouch,{priority:700,handledEvents:["pinchstart","pinch","pinchend","pinchcancel"],startDistance:0,lastTouches:null,onTouchMove:function(e){var q=this,p,u,s,t;if(q.isTracking){p=e.touches;u=p[0].point;s=p[1].point;t=u.getDistanceTo(s);if(t===0){return}if(!q.isStarted){q.isStarted=true;q.startDistance=t;q.fire("pinchstart",e,{touches:p,distance:t,scale:1})}else{q.fire("pinch",e,{touches:p,distance:t,scale:t/q.startDistance})}}},onTouchEnd:function(e){if(this.isStarted){this.fire("pinchend",e)}return Ext.event.gesture.MultiTouch.prototype.onTouchEnd.call(this,e)},onCancel:function(e){this.fire("pinchcancel",e,null,true)},reset:function(){this.lastTouches=null;this.startDistance=0;return Ext.event.gesture.MultiTouch.prototype.reset.call(this)}},0,0,0,0,0,0,[Ext.event.gesture,"Pinch"],function(l){var g=Ext.manifest.gestures;l.instance=new l(g&&g.pinch)}));(Ext.cmd.derive("Ext.event.gesture.Rotate",Ext.event.gesture.MultiTouch,{priority:800,handledEvents:["rotatestart","rotate","rotateend","rotatecancel"],startAngle:0,lastTouches:null,lastAngle:null,onTouchMove:function(u){var e=this,v,z,x,w,y,A,C,B;if(e.isTracking){v=u.touches;z=e.lastAngle;x=v[0].point;w=v[1].point;y=x.getAngleTo(w);if(z!==null){B=Math.abs(z-y);A=y+360;C=y-360;if(Math.abs(A-z)<B){y=A}else{if(Math.abs(C-z)<B){y=C}}}e.lastAngle=y;if(!e.isStarted){e.isStarted=true;e.startAngle=y;e.fire("rotatestart",u,{touches:v,angle:y,rotation:0})}else{e.fire("rotate",u,{touches:v,angle:y,rotation:y-e.startAngle})}e.lastTouches=Ext.Array.clone(v)}},onTouchEnd:function(e){if(this.isStarted){this.fire("rotateend",e)}return Ext.event.gesture.MultiTouch.prototype.onTouchEnd.call(this,e)},onCancel:function(e){this.fire("rotatecancel",e,null,true)},reset:function(){var f=this;f.lastTouches=f.lastAngle=f.startAngle=null;return Ext.event.gesture.MultiTouch.prototype.reset.call(this)}},0,0,0,0,0,0,[Ext.event.gesture,"Rotate"],function(l){var g=Ext.manifest.gestures;l.instance=new l(g&&g.rotate)}));(Ext.cmd.derive("Ext.event.gesture.Tap",Ext.event.gesture.SingleTouch,{priority:200,handledEvents:["tap","tapcancel"],config:{moveDistance:8},onTouchStart:function(e){var m=this,n=Ext.event.gesture.SingleTouch.prototype.onTouchStart.call(this,e);if(n!==false){m.isStarted=true;m.startPoint=e.changedTouches[0].point}return n},onTouchMove:function(o){var p=this,q=o.changedTouches[0].point,e=Ext.Element.getViewportScale(),s=Math.round(Math.abs(q.getDistanceTo(p.startPoint)*e));if(s>=p.getMoveDistance()){return p.cancel(o)}},onTouchEnd:function(e){this.fire("tap",e,{touch:e.changedTouches[0]});return Ext.event.gesture.SingleTouch.prototype.onTouchEnd.call(this,e)},onCancel:function(e){this.fire("tapcancel",e,{touch:e.changedTouches[0]},true)},reset:function(){this.startPoint=null;return Ext.event.gesture.SingleTouch.prototype.reset.call(this)}},0,0,0,0,0,0,[Ext.event.gesture,"Tap"],function(g){var l=Ext.manifest.gestures;g.instance=new g(l&&l.tap)}));(Ext.cmd.derive("Ext.event.publisher.Focus",Ext.event.publisher.Dom,{type:"focus",handledEvents:["focusenter","focusleave","focusmove"],handledDomEvents:["focusin","focusout"],publishDelegatedDomEvent:function(e){var m=this,n=e.relatedTarget;if(e.type==="focusout"){if(n==null){m.processFocusIn(e,e.target,document.body)}}else{if(n==null||!n.tagName){n=document.body}m.processFocusIn(e,n,e.target)}},processFocusIn:function(e,E,z){var D=this,C,A,v=[],B,w,x,y;x=Ext.fly(E);y=Ext.fly(z);if((x&&x.isFocusSuspended())||(y&&y.isFocusSuspended())){return}for(A=E,C=Ext.dom.Element.getCommonAncestor(z,E,true);A&&A!==C;A=A.parentNode){v.push(A)}if(v.length){B=D.createSyntheticEvent("focusleave",e,E,z);D.publish(B,v);if(B.stopped){return}}v.length=0;for(A=z;A&&A!==C;A=A.parentNode){v.push(A)}w=D.createSyntheticEvent("focusenter",e,z,E);if(v.length){D.publish(w,v);if(w.stopped){return}}v=D.getPropagatingTargets(C);if(v.length){B=D.createSyntheticEvent("focusmove",e,z,E);D.publish(B,v);if(B.stopped){return}}Ext.GlobalEvents.fireEvent("focus",{event:w,toElement:z,fromElement:E})},createSyntheticEvent:function(q,n,o,s){var p=new Ext.event.Event(n);p.type=q;p.relatedTarget=s;p.target=o;return p}},0,0,0,0,0,0,[Ext.event.publisher,"Focus"],function(g){var l;g.instance=new g();if(!Ext.supports.FocusinFocusoutEvents){this.override({handledDomEvents:["focus","blur"],publishDelegatedDomEvent:function(f){var n=this,e;n.callSuper([f]);e=f.target!==window&&f.target!==document;if(f.type==="blur"){if(!e){if(f.explicitOriginalTarget===g.previousActiveElement){if(f.target===window){clearTimeout(l);l=0;n.processFocusIn(f,g.previousActiveElement,document.body);g.previousActiveElement=null}}}else{l=setTimeout(function(){l=0;n.processFocusIn(f,f.target,document.body);g.previousActiveElement=null},0)}g.previousActiveElement=e?f.target:null}else{clearTimeout(l);l=0;n.processFocusIn(f,g.previousActiveElement||document.body,e?f.target:document.body)}}})}}));(Ext.cmd.derive("Ext.fx.State",Ext.Base,{isAnimatable:{"background-color":true,"background-image":true,"background-position":true,"border-bottom-color":true,"border-bottom-width":true,"border-color":true,"border-left-color":true,"border-left-width":true,"border-right-color":true,"border-right-width":true,"border-spacing":true,"border-top-color":true,"border-top-width":true,"border-width":true,bottom:true,color:true,crop:true,"font-size":true,"font-weight":true,height:true,left:true,"letter-spacing":true,"line-height":true,"margin-bottom":true,"margin-left":true,"margin-right":true,"margin-top":true,"max-height":true,"max-width":true,"min-height":true,"min-width":true,opacity:true,"outline-color":true,"outline-offset":true,"outline-width":true,"padding-bottom":true,"padding-left":true,"padding-right":true,"padding-top":true,right:true,"text-indent":true,"text-shadow":true,top:true,"vertical-align":true,visibility:true,width:true,"word-spacing":true,"z-index":true,zoom:true,transform:true},constructor:function(f){this.data={};this.set(f)},setConfig:function(f){this.set(f);return this},setRaw:function(f){this.data=f;return this},clear:function(){return this.setRaw({})},setTransform:function(s,v){var w=this.data,u=Ext.isArray(v),t=w.transform,p,q;if(!t){t=w.transform={translateX:0,translateY:0,translateZ:0,scaleX:1,scaleY:1,scaleZ:1,rotate:0,rotateX:0,rotateY:0,rotateZ:0,skewX:0,skewY:0}}if(typeof s=="string"){switch(s){case"translate":if(u){p=v.length;if(p==0){break}t.translateX=v[0];if(p==1){break}t.translateY=v[1];if(p==2){break}t.translateZ=v[2]}else{t.translateX=v}break;case"rotate":if(u){p=v.length;if(p==0){break}t.rotateX=v[0];if(p==1){break}t.rotateY=v[1];if(p==2){break}t.rotateZ=v[2]}else{t.rotate=v}break;case"scale":if(u){p=v.length;if(p==0){break}t.scaleX=v[0];if(p==1){break}t.scaleY=v[1];if(p==2){break}t.scaleZ=v[2]}else{t.scaleX=v;t.scaleY=v}break;case"skew":if(u){p=v.length;if(p==0){break}t.skewX=v[0];if(p==1){break}t.skewY=v[1]}else{t.skewX=v}break;default:t[s]=v}}else{for(q in s){if(s.hasOwnProperty(q)){v=s[q];this.setTransform(q,v)}}}},set:function(p,m){var n=this.data,o;if(typeof p!="string"){for(o in p){m=p[o];if(o==="transform"){this.setTransform(m)}else{n[o]=m}}}else{if(p==="transform"){this.setTransform(m)}else{n[p]=m}}return this},unset:function(l){var g=this.data;if(g.hasOwnProperty(l)){delete g[l]}return this},getData:function(){return this.data}},1,0,0,0,0,0,[Ext.fx,"State"],0));(Ext.cmd.derive("Ext.fx.animation.Abstract",Ext.Evented,{isAnimation:true,config:{name:"",element:null,before:null,from:{},to:{},after:null,states:{},duration:300,easing:"linear",iteration:1,direction:"normal",delay:0,onBeforeStart:null,callback:null,onEnd:null,onBeforeEnd:null,scope:null,reverse:null,preserveEndState:false,replacePrevious:true},STATE_FROM:"0%",STATE_TO:"100%",DIRECTION_UP:"up",DIRECTION_DOWN:"down",DIRECTION_LEFT:"left",DIRECTION_RIGHT:"right",stateNameRegex:/^(?:[\d\.]+)%$/,constructor:function(){this.states={};Ext.Evented.prototype.constructor.apply(this,arguments);return this},applyElement:function(f){return Ext.get(f)},applyBefore:function(l,g){if(l){return Ext.factory(l,Ext.fx.State,g)}},applyAfter:function(g,l){if(g){return Ext.factory(g,Ext.fx.State,l)}},setFrom:function(f){return this.setState(this.STATE_FROM,f)},setTo:function(f){return this.setState(this.STATE_TO,f)},getFrom:function(){return this.getState(this.STATE_FROM)},getTo:function(){return this.getState(this.STATE_TO)},setStates:function(n){var l=this.stateNameRegex,m;for(m in n){if(l.test(m)){this.setState(m,n[m])}}return this},getStates:function(){return this.states},updateCallback:function(f){if(f){this.setOnEnd(f)}},end:function(){this.stop()},stop:function(){this.fireEvent("stop",this)},destroy:function(){this.stop();Ext.Evented.prototype.destroy.call(this)},setState:function(o,m){var p=this.getStates(),n;n=Ext.factory(m,Ext.fx.State,p[o]);if(n){p[o]=n}return this},getState:function(f){return this.getStates()[f]},getData:function(){var x=this,E=x.getStates(),z={},w=x.getBefore(),B=x.getAfter(),v=E[x.STATE_FROM],G=E[x.STATE_TO],F=v.getData(),y=G.getData(),A,C,D;for(C in E){if(E.hasOwnProperty(C)){D=E[C];A=D.getData();z[C]=A}}return{before:w?w.getData():{},after:B?B.getData():{},states:z,from:F,to:y,duration:x.getDuration(),iteration:x.getIteration(),direction:x.getDirection(),easing:x.getEasing(),delay:x.getDelay(),onEnd:x.getOnEnd(),onBeforeEnd:x.getOnBeforeEnd(),onBeforeStart:x.getOnBeforeStart(),scope:x.getScope(),preserveEndState:x.getPreserveEndState(),replacePrevious:x.getReplacePrevious()}}},1,0,0,0,0,0,[Ext.fx.animation,"Abstract"],0));(Ext.cmd.derive("Ext.fx.animation.Slide",Ext.fx.animation.Abstract,{alternateClassName:"Ext.fx.animation.SlideIn",config:{direction:"left",out:false,offset:0,easing:"auto",containerBox:"auto",elementBox:"auto",isElementBoxFit:true,useCssTransform:true},reverseDirectionMap:{up:"down",down:"up",left:"right",right:"left"},applyEasing:function(f){if(f==="auto"){return"ease-"+((this.getOut())?"in":"out")}return f},getContainerBox:function(){var f=this._containerBox;if(f==="auto"){f=this.getElement().getParent().getBox()}return f},getElementBox:function(){var f=this._elementBox;if(this.getIsElementBoxFit()){return this.getContainerBox()}if(f==="auto"){f=this.getElement().getBox()}return f},getData:function(){var I=this.getElementBox(),F=this.getContainerBox(),B=I?I:F,K=this.getFrom(),J=this.getTo(),C=this.getOut(),D=this.getOffset(),L=this.getDirection(),G=this.getUseCssTransform(),A=this.getReverse(),E=0,H=0,M,O,N,z;if(A){L=this.reverseDirectionMap[L]}switch(L){case this.DIRECTION_UP:if(C){H=F.top-B.top-B.height-D}else{H=F.bottom-B.bottom+B.height+D}break;case this.DIRECTION_DOWN:if(C){H=F.bottom-B.bottom+B.height+D}else{H=F.top-B.height-B.top-D}break;case this.DIRECTION_RIGHT:if(C){E=F.right-B.right+B.width+D}else{E=F.left-B.left-B.width-D}break;case this.DIRECTION_LEFT:if(C){E=F.left-B.left-B.width-D}else{E=F.right-B.right+B.width+D}break}M=(C)?0:E;O=(C)?0:H;if(G){K.setTransform({translateX:M,translateY:O})}else{K.set("left",M);K.set("top",O)}N=(C)?E:0;z=(C)?H:0;if(G){J.setTransform({translateX:N,translateY:z})}else{J.set("left",N);J.set("top",z)}return Ext.fx.animation.Abstract.prototype.getData.apply(this,arguments)}},0,0,0,0,["animation.slide","animation.slideIn"],0,[Ext.fx.animation,"Slide",Ext.fx.animation,"SlideIn"],0));(Ext.cmd.derive("Ext.fx.animation.SlideOut",Ext.fx.animation.Slide,{config:{out:true}},0,0,0,0,["animation.slideOut"],0,[Ext.fx.animation,"SlideOut"],0));(Ext.cmd.derive("Ext.fx.animation.Fade",Ext.fx.animation.Abstract,{alternateClassName:"Ext.fx.animation.FadeIn",config:{out:false,before:{display:null,opacity:0},after:{opacity:null},reverse:null},updateOut:function(n){var l=this.getTo(),m=this.getFrom();if(n){m.set("opacity",1);l.set("opacity",0)}else{m.set("opacity",0);l.set("opacity",1)}}},0,0,0,0,["animation.fade","animation.fadeIn"],0,[Ext.fx.animation,"Fade",Ext.fx.animation,"FadeIn"],0));(Ext.cmd.derive("Ext.fx.animation.FadeOut",Ext.fx.animation.Fade,{config:{out:true,before:{}}},0,0,0,0,["animation.fadeOut"],0,[Ext.fx.animation,"FadeOut"],0));(Ext.cmd.derive("Ext.fx.animation.Flip",Ext.fx.animation.Abstract,{config:{easing:"ease-in",direction:"right",half:false,out:null},getData:function(){var y=this,w=y.getFrom(),I=y.getTo(),x=y.getDirection(),D=y.getOut(),F=y.getHalf(),C=F?90:180,A=1,E=1,G=0,H=0,z=0,B=0;if(D){E=0.8}else{A=0.8}switch(x){case this.DIRECTION_UP:if(D){z=C}else{G=-C}break;case this.DIRECTION_DOWN:if(D){z=-C}else{G=C}break;case this.DIRECTION_RIGHT:if(D){B=C}else{H=-C}break;case this.DIRECTION_LEFT:if(D){B=-C}else{H=C}break}w.setTransform({rotateX:G,rotateY:H,scale:A});I.setTransform({rotateX:z,rotateY:B,scale:E});return Ext.fx.animation.Abstract.prototype.getData.call(this)}},0,0,0,0,["animation.flip"],0,[Ext.fx.animation,"Flip"],0));(Ext.cmd.derive("Ext.fx.animation.Pop",Ext.fx.animation.Abstract,{alternateClassName:"Ext.fx.animation.PopIn",config:{out:false,before:{display:null,opacity:0},after:{opacity:null}},getData:function(){var l=this.getTo(),m=this.getFrom(),n=this.getOut();if(n){m.set("opacity",1);m.setTransform({scale:1});l.set("opacity",0);l.setTransform({scale:0})}else{m.set("opacity",0);m.setTransform({scale:0});l.set("opacity",1);l.setTransform({scale:1})}return Ext.fx.animation.Abstract.prototype.getData.apply(this,arguments)}},0,0,0,0,["animation.pop","animation.popIn"],0,[Ext.fx.animation,"Pop",Ext.fx.animation,"PopIn"],0));(Ext.cmd.derive("Ext.fx.animation.PopOut",Ext.fx.animation.Pop,{config:{out:true,before:{}}},0,0,0,0,["animation.popOut"],0,[Ext.fx.animation,"PopOut"],0));(Ext.cmd.derive("Ext.fx.Animation",Ext.Base,{constructor:function(m){var n=Ext.fx.animation.Abstract,l;if(typeof m=="string"){l=m;m={}}else{if(m&&m.type){l=m.type}}if(l){n=Ext.ClassManager.getByAlias("animation."+l)}return Ext.factory(m,n)}},1,0,0,0,0,0,[Ext.fx,"Animation"],0));(Ext.cmd.derive("Ext.fx.runner.Css",Ext.Evented,{prefixedProperties:{transform:true,"transform-origin":true,perspective:true,"transform-style":true,transition:true,"transition-property":true,"transition-duration":true,"transition-timing-function":true,"transition-delay":true,animation:true,"animation-name":true,"animation-duration":true,"animation-iteration-count":true,"animation-direction":true,"animation-timing-function":true,"animation-delay":true},lengthProperties:{top:true,right:true,bottom:true,left:true,width:true,height:true,"max-height":true,"max-width":true,"min-height":true,"min-width":true,"margin-bottom":true,"margin-left":true,"margin-right":true,"margin-top":true,"padding-bottom":true,"padding-left":true,"padding-right":true,"padding-top":true,"border-bottom-width":true,"border-left-width":true,"border-right-width":true,"border-spacing":true,"border-top-width":true,"border-width":true,"outline-width":true,"letter-spacing":true,"line-height":true,"text-indent":true,"word-spacing":true,"font-size":true,translate:true,translateX:true,translateY:true,translateZ:true,translate3d:true,x:true,y:true},durationProperties:{"transition-duration":true,"transition-delay":true,"animation-duration":true,"animation-delay":true},angleProperties:{rotate:true,rotateX:true,rotateY:true,rotateZ:true,skew:true,skewX:true,skewY:true},lengthUnitRegex:/([a-z%]*)$/,DEFAULT_UNIT_LENGTH:"px",DEFAULT_UNIT_ANGLE:"deg",DEFAULT_UNIT_DURATION:"ms",customProperties:{x:true,y:true},formattedNameCache:{x:"left",y:"top"},transformMethods3d:["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","skewX","skewY","scaleX","scaleY","scaleZ"],transformMethodsNo3d:["translateX","translateY","rotate","skewX","skewY","scaleX","scaleY"],constructor:function(){var f=this;f.transformMethods=Ext.feature.has.Css3dTransforms?f.transformMethods3d:f.transformMethodsNo3d;f.vendorPrefix=Ext.browser.getStyleDashPrefix();f.ruleStylesCache={};Ext.Evented.prototype.constructor.call(this)},getStyleSheet:function(){var l=this.styleSheet,n,m;if(!l){n=document.createElement("style");n.type="text/css";(document.head||document.getElementsByTagName("head")[0]).appendChild(n);m=document.styleSheets;this.styleSheet=l=m[m.length-1]}return l},applyRules:function(u){var w=this.getStyleSheet(),D=this.ruleStylesCache,E=w.cssRules,A,y,v,B,z,C,x;for(A in u){y=u[A];v=D[A];if(v===undefined){z=E.length;w.insertRule(A+"{}",z);v=D[A]=E.item(z).style}B=v.$cache;if(!B){B=v.$cache={}}for(C in y){x=this.formatValue(y[C],C);C=this.formatName(C);if(B[C]!==x){B[C]=x;if(x===null){v.removeProperty(C)}else{v.setProperty(C,x,"important")}}}}return this},applyStyles:function(q){var v,s,w,t,u,p;for(v in q){if(q.hasOwnProperty(v)){this.activeElement=s=document.getElementById(v);if(!s){continue}w=s.style;t=q[v];for(u in t){if(t.hasOwnProperty(u)){p=this.formatValue(t[u],u);u=this.formatName(u);if(p===null){w.removeProperty(u)}else{w.setProperty(u,p,"important")}}}}}this.activeElement=null;return this},formatName:function(m){var n=this.formattedNameCache,l=n[m];if(!l){if((Ext.os.is.Tizen||!Ext.feature.has.CssTransformNoPrefix)&&this.prefixedProperties[m]){l=this.vendorPrefix+m}else{l=m}n[m]=l}return l},formatValue:function(G,C){var x=typeof G,E=this.DEFAULT_UNIT_LENGTH,w=this.customProperties[C],z,D,A,y,B,F,v;if(G===null){return""}if(x==="string"){if(this.lengthProperties[C]){v=G.match(this.lengthUnitRegex)[1];if(v.length>0){}else{G=G+E;if(w){G=this.getCustomValue(G,C)}return G}}return G}else{if(x==="number"){if(G==0){return"0"}if(this.lengthProperties[C]){G=G+E;if(w){G=this.getCustomValue(G,C)}return G}if(this.angleProperties[C]){return G+this.DEFAULT_UNIT_ANGLE}if(this.durationProperties[C]){return G+this.DEFAULT_UNIT_DURATION}}else{if(C==="transform"){z=this.transformMethods;B=[];for(A=0,y=z.length;A<y;A++){D=z[A];B.push(D+"("+this.formatValue(G[D],D)+")")}return B.join(" ")}else{if(Ext.isArray(G)){F=[];for(A=0,y=G.length;A<y;A++){F.push(this.formatValue(G[A],C))}return(F.length>0)?F.join(", "):"none"}}}}return G},getCustomValue:function(m,p){var o=Ext.fly(this.activeElement),n=m.match(this.lengthUnitRegex)[1];if(p==="x"){m=o.translateXY(parseInt(m,10)).x}else{if(p==="y"){m=o.translateXY(null,parseInt(m,10)).y}}return m+n}},1,0,0,0,0,0,[Ext.fx.runner,"Css"],0));(Ext.cmd.derive("Ext.fx.runner.CssTransition",Ext.fx.runner.Css,{alternateClassName:"Ext.Animator",singleton:true,listenersAttached:false,constructor:function(){this.runningAnimationsData={};return this.callParent(arguments)},attachListeners:function(){this.listenersAttached=true;Ext.getWin().on("transitionend","onTransitionEnd",this)},onTransitionEnd:function(m){var n=m.target,e=n.id;if(e&&this.runningAnimationsData.hasOwnProperty(e)){this.refreshRunningAnimationsData(Ext.get(n),[m.browserEvent.propertyName])}},getElementId:function(f){return f.getId?f.getId():f.id},onAnimationEnd:function(z,A,C,x,H){var D=this.getElementId(z),K=this.runningAnimationsData[D],G={},I={},E,y,B,J,F;C.un("stop","onAnimationStop",this);if(K){E=K.nameMap}G[D]=I;if(A.onBeforeEnd){A.onBeforeEnd.call(A.scope||this,z,x)}C.fireEvent("animationbeforeend",C,z,x);this.fireEvent("animationbeforeend",this,C,z,x);if(H||(!x&&!A.preserveEndState)){y=A.toPropertyNames;for(B=0,J=y.length;B<J;B++){F=y[B];if(E&&!E.hasOwnProperty(F)){I[F]=null}}}if(A.after){Ext.merge(I,A.after)}this.applyStyles(G);if(A.onEnd){A.onEnd.call(A.scope||this,z,x)}C.fireEvent("animationend",C,z,x);this.fireEvent("animationend",this,C,z,x);Ext.AnimationQueue.stop(Ext.emptyFn,C)},onAllAnimationsEnd:function(m){var l=this.getElementId(m),n={};delete this.runningAnimationsData[l];n[l]={"transition-property":null,"transition-duration":null,"transition-timing-function":null,"transition-delay":null};this.applyStyles(n);this.fireEvent("animationallend",this,m)},hasRunningAnimations:function(n){var l=this.getElementId(n),m=this.runningAnimationsData;return m.hasOwnProperty(l)&&m[l].sessions.length>0},refreshRunningAnimationsData:function(R,L,M,F){var O=this.getElementId(R),E=this.runningAnimationsData,U=E[O];if(!U){return}var I=U.nameMap,C=U.nameList,T=U.sessions,P,N,Q,K,J,S,D,G,H=false;M=Boolean(M);F=Boolean(F);if(!T){return this}P=T.length;if(P===0){return this}if(F){U.nameMap={};C.length=0;for(J=0;J<P;J++){S=T[J];this.onAnimationEnd(R,S.data,S.animation,M,F)}T.length=0}else{for(J=0;J<P;J++){S=T[J];D=S.map;G=S.list;for(N=0,Q=L.length;N<Q;N++){K=L[N];if(D[K]){delete D[K];Ext.Array.remove(G,K);S.length--;if(--I[K]==0){delete I[K];Ext.Array.remove(C,K)}}}if(S.length==0){T.splice(J,1);J--;P--;H=true;this.onAnimationEnd(R,S.data,S.animation,M)}}}if(!F&&!M&&T.length==0&&H){this.onAllAnimationsEnd(R)}},getRunningData:function(g){var l=this.runningAnimationsData;if(!l.hasOwnProperty(g)){l[g]={nameMap:{},nameList:[],sessions:[]}}return l[g]},getTestElement:function(){var p=this,o=p.testElement,q=p.iframe,n,s;if(o){if(o.ownerDocument.defaultView!==q.contentWindow){q.contentDocument.body.appendChild(o);p.testElementComputedStyle=n.defaultView.getComputedStyle(o)}}else{q=p.iframe=document.createElement("iframe");q.setAttribute("tabIndex",-1);s=q.style;s.setProperty("visibility","hidden","important");s.setProperty("width","0px","important");s.setProperty("height","0px","important");s.setProperty("position","absolute","important");s.setProperty("border","0px","important");s.setProperty("zIndex","-1000","important");document.body.appendChild(q);n=q.contentDocument;n.open();n.writeln("</body>");n.close();p.testElement=o=n.createElement("div");o.style.setProperty("position","absolute","important");n.body.appendChild(o);p.testElementComputedStyle=n.defaultView.getComputedStyle(o)}return o},getCssStyleValue:function(q,n){var o=this.getTestElement(),s=this.testElementComputedStyle,p=o.style;p.setProperty(q,n);if(Ext.browser.is.Firefox){o.offsetHeight}n=s.getPropertyValue(q);p.removeProperty(q);return n},run:function(V){var ap=this,ak=Ext.Function,ai=ap.lengthProperties,aj={},ax={},X={},ad={},av,aD,au,U,ag,W,al,aq,aA,aB,aC,Z,aa,ah,T,Y,af,am,ar,ay,aw,ao,ac,an,at,az,ab,ae;if(!ap.listenersAttached){ap.attachListeners()}V=Ext.Array.from(V);for(Z=0,ah=V.length;Z<ah;Z++){T=V[Z];T=Ext.factory(T,Ext.fx.Animation);ap.activeElement=av=T.getElement();Ext.AnimationQueue.start(Ext.emptyFn,T);am=window.getComputedStyle(av.dom);aD=ap.getElementId(av);X[aD]=X=Ext.merge({},T.getData());if(T.onBeforeStart){T.onBeforeStart.call(T.scope||ap,av)}T.fireEvent("animationstart",T,X);ap.fireEvent("animationstart",ap,T,X);ag=X.before;au=X.from;U=X.to;X.fromPropertyNames=W=[];X.toPropertyNames=al=[];for(ay in U){if(U.hasOwnProperty(ay)){U[ay]=aw=ap.formatValue(U[ay],ay);ar=ap.formatName(ay);an=ai.hasOwnProperty(ay);if(!an){aw=ap.getCssStyleValue(ar,aw)}if(au.hasOwnProperty(ay)){au[ay]=ac=ap.formatValue(au[ay],ay);if(!an){ac=ap.getCssStyleValue(ar,ac)}if(aw!==ac){W.push(ar);al.push(ar)}}else{ao=am.getPropertyValue(ar);if(aw!==ao){al.push(ar)}}}}Y=al.length;if(Y===0){ap.onAnimationEnd(av,X,T);continue}aB=ap.getRunningData(aD);ab=aB.sessions;if(ab.length>0){ap.refreshRunningAnimationsData(av,Ext.Array.merge(W,al),true,X.replacePrevious)}at=aB.nameMap;az=aB.nameList;af={};for(aa=0;aa<Y;aa++){ay=al[aa];af[ay]=true;if(!at.hasOwnProperty(ay)){at[ay]=1;az.push(ay)}else{at[ay]++}}ae={element:av,map:af,list:al.slice(),length:Y,data:X,animation:T};ab.push(ae);T.on("stop","onAnimationStop",ap);aC=Ext.apply({},ag);Ext.apply(aC,au);if(az.length>0){W=Ext.Array.difference(az,W);al=Ext.Array.merge(W,al);aC["transition-property"]=W}aj[aD]=aC;ax[aD]=Ext.apply({},U);ad[aD]={"transition-property":al,"transition-duration":X.duration,"transition-timing-function":X.easing,"transition-delay":X.delay};T.startTime=Date.now()}ap.activeElement=null;aA=ap.$className;ap.applyStyles(aj);aq=function(e){if(e.data===aA&&e.source===window){window.removeEventListener("message",aq,false);ap.applyStyles(ax)}};ak.requestAnimationFrame(function(){if(Ext.isIE){ap.applyStyles(ad);ak.requestAnimationFrame(function(){window.addEventListener("message",aq,false);window.postMessage(aA,"*")})}else{Ext.merge(ax,ad);window.addEventListener("message",aq,false);window.postMessage(aA,"*")}})},onAnimationStop:function(s){var y=this.runningAnimationsData,w,v,x,u,t,q;for(w in y){if(y.hasOwnProperty(w)){v=y[w];x=v.sessions;for(u=0,t=x.length;u<t;u++){q=x[u];if(q.animation===s){this.refreshRunningAnimationsData(q.element,q.list.slice(),false)}}}}}},1,0,0,0,0,0,[Ext.fx.runner,"CssTransition",Ext,"Animator"],0));(Ext.cmd.derive("Ext.list.AbstractTreeItem",Ext.Widget,{isTreeListItem:true,cachedConfig:{expandable:false,expanded:false,iconCls:"",leaf:true,loading:false,selected:false,selectedParent:false},config:{iconClsProperty:"iconCls",indent:null,owner:null,node:null,over:null,parentItem:null,text:{lazy:true,$value:""},textProperty:"text"},updateNode:function(x){if(x){var u=this,A=u.itemMap,t,z,v,w,s,y;u.element.dom.setAttribute("data-recordId",x.internalId);if(!A){t=x.childNodes;z=u.getOwner();u.itemMap=A={};for(w=0,v=t.length;w<v;++w){y=t[w];if(y.data.visible){s=z.createItem(y,u);A[y.internalId]=s;u.insertItem(s,null)}}}u.setExpanded(x.isExpanded());u.doNodeUpdate(x)}},updateSelected:function(g){if(!this.isConfiguring){var l=this.getParentItem();while(l&&!l.isRootListItem){l.setSelectedParent(g);l=l.getParentItem()}}},collapse:function(){this.getNode().collapse()},expand:function(){this.getNode().expand()},getToolElement:Ext.emptyFn,insertItem:Ext.emptyFn,isExpanded:function(){return this.getExpanded()},isSelectionEvent:Ext.emptyFn,isToggleEvent:Ext.emptyFn,nodeCollapse:function(p,n){var q=this,s=q.getOwner(),o=q.preventAnimation?null:s.getAnimation();q.nodeCollapseBegin(o,n);if(!o){q.nodeCollapseEnd(n)}},nodeCollapseBegin:function(n,m){var o=this,p=o.getOwner();o.setExpanded(false);p.fireEvent("itemcollapse",p,o)},nodeCollapseEnd:function(f){if(!f){this.getOwner().updateLayout()}},nodeExpand:function(p){var q=this,s=q.getOwner(),n=q.getFloated(),o=!n&&s.getAnimation();q.nodeExpandBegin(o);if(!o){q.nodeExpandEnd()}},nodeExpandBegin:function(l){var m=this,n=m.getOwner();m.setExpanded(true);n.fireEvent("itemexpand",n,m)},nodeExpandEnd:function(){this.getOwner().updateLayout()},nodeInsert:function(x,v){var u=this,y=u.getOwner(),A=u.itemMap,z=x.internalId,s=y.getItem(x),w=null,t;if(s){t=s.getParentItem();t.removeItem(s);if(t!==u){t.doUpdateExpandable();s.setParentItem(u)}}else{s=u.getOwner().createItem(x,u)}A[z]=s;if(v){w=A[v.internalId]}u.insertItem(s,w);u.doUpdateExpandable();y.fireEvent("iteminsert",y,u,s,w);y.updateLayout()},nodeRemove:function(p){var q=this,o=q.itemMap,t=q.getOwner(),u=p.internalId,s=o[u];if(s){delete o[u];q.removeItem(s);s.destroy();q.doUpdateExpandable();t.fireEvent("itemremove",t,q,s);t.updateLayout()}},nodeUpdate:function(g,l){this.doNodeUpdate(g)},removeItem:Ext.emptyFn,destroy:function(){var n=this,m=n.itemMap,p=n.getOwner(),o;if(m){for(o in m){m[o].destroy()}n.itemMap=null}if(p){p.removeItem(n.getNode())}n.setNode(null);n.setParentItem(null);n.setOwner(null);Ext.Widget.prototype.destroy.call(this)},privates:{doNodeUpdate:function(m){var n=this,o=this.getTextProperty(),p=this.getIconClsProperty();if(o){n.setText(m.data[o])}if(p){n.setIconCls(m.data[p])}n.setLoading(m.isLoading());n.setLeaf(m.isLeaf());n.doUpdateExpandable()},doUpdateExpandable:function(){var f=this.getNode();this.setExpandable(f.isExpandable())},onClick:function(s){var o=this,q=o.getOwner(),p=o.getNode(),e={event:s,item:o,node:p,tree:q,select:p.get("selectable")!==false&&o.isSelectionEvent(s),toggle:o.isToggleEvent(s)};if(q.fireEvent("itemclick",q,e)!==false){if(e.toggle){o.toggleExpanded();s.preventDefault()}if(e.select){q.setSelection(o.getNode())}}},toggleExpanded:function(){if(this.isExpanded()){this.collapse()}else{this.expand()}},updateIndent:function(m){var n=this.itemMap,l;for(l in n){n[l].setIndent(m)}},updateOwner:function(f){this.parent=f}}},0,0,["widget"],{widget:true},0,0,[Ext.list,"AbstractTreeItem"],0));(Ext.cmd.derive("Ext.list.RootTreeItem",Ext.list.AbstractTreeItem,{isRootListItem:true,element:{reference:"element",tag:"ul",cls:"x-treelist-root-container"},insertItem:function(g,l){if(l){g.element.insertBefore(l.element)}else{this.element.appendChild(g.element)}},isToggleEvent:function(e){return false}},0,0,["widget"],{widget:true},0,0,[Ext.list,"RootTreeItem"],0));(Ext.cmd.derive("Ext.list.TreeItem",Ext.list.AbstractTreeItem,{collapsedCls:"x-treelist-item-collapsed",expandedCls:"x-treelist-item-expanded",floatedCls:[Ext.Widget.prototype.floatedCls,"x-treelist-item-floated"],floatedToolCls:"x-treelist-item-tool-floated",leafCls:"x-treelist-item-leaf",expandableCls:"x-treelist-item-expandable",hideIconCls:"x-treelist-item-hide-icon",loadingCls:"x-treelist-item-loading",selectedCls:"x-treelist-item-selected",selectedParentCls:"x-treelist-item-selected-parent",withIconCls:"x-treelist-item-with-icon",hoverCls:"x-treelist-item-over",rowHoverCls:"x-treelist-row-over",isTreeListItem:true,config:{rowCls:null},rowClsProperty:"rowCls",element:{reference:"element",tag:"li",cls:"x-treelist-item",children:[{reference:"rowElement",cls:"x-treelist-row",children:[{reference:"wrapElement",cls:"x-treelist-item-wrap",children:[{reference:"iconElement",cls:"x-treelist-item-icon"},{reference:"textElement",cls:"x-treelist-item-text"},{reference:"expanderElement",cls:"x-treelist-item-expander"}]}]},{reference:"itemContainer",tag:"ul",cls:"x-treelist-container"},{reference:"toolElement",cls:"x-treelist-item-tool"}]},constructor:function(l){Ext.list.AbstractTreeItem.prototype.constructor.call(this,l);var g=this.toolElement.dom;g.parentNode.removeChild(g)},getToolElement:function(){return this.toolElement},insertItem:function(g,l){if(l){g.element.insertBefore(l.element)}else{this.itemContainer.appendChild(g.element)}},isSelectionEvent:function(e){var l=this.getOwner();return(!this.isToggleEvent(e)||!l.getExpanderOnly()||l.getSelectOnExpander())},isToggleEvent:function(e){var l=false;if(this.getOwner().getExpanderOnly()){l=e.target===this.expanderElement.dom}else{l=!this.itemContainer.contains(e.target)}return l},nodeCollapseBegin:function(o,n){var p=this,q=p.itemContainer,s;if(p.expanding){p.stopAnimation(p.expanding)}s=o&&q.getHeight();Ext.list.AbstractTreeItem.prototype.nodeCollapseBegin.call(this,o,n);if(o){q.dom.style.display="block";p.collapsingForExpand=n;p.collapsing=this.runAnimation(Ext.merge({from:{height:s},to:{height:0},callback:p.nodeCollapseDone,scope:p},o))}},nodeCollapseDone:function(l){var m=this,n=m.itemContainer;m.collapsing=null;n.dom.style.display="";n.setHeight(null);m.nodeCollapseEnd(m.collapsingForExpand)},nodeExpandBegin:function(m){var n=this,o=n.itemContainer,p;if(n.collapsing){n.stopAnimation(n.collapsing)}Ext.list.AbstractTreeItem.prototype.nodeExpandBegin.call(this,m);if(m){p=o.getHeight();o.setHeight(0);n.expanding=n.runAnimation(Ext.merge({to:{height:p},callback:n.nodeExpandDone,scope:n},m))}},nodeExpandDone:function(){this.expanding=null;this.itemContainer.setHeight(null);this.nodeExpandEnd()},removeItem:function(f){this.itemContainer.removeChild(f.element)},updateNode:function(l,g){this.syncIndent();Ext.list.AbstractTreeItem.prototype.updateNode.call(this,l,g)},updateExpandable:function(){this.updateExpandCls()},updateExpanded:function(){this.updateExpandCls()},updateIconCls:function(o,p){var m=this,n=m.element;m.doIconCls(m.iconElement,o,p);m.doIconCls(m.toolElement,o,p);n.toggleCls(m.withIconCls,!!o);n.toggleCls(m.hideIconCls,o===null)},updateLeaf:function(f){this.element.toggleCls(this.leafCls,f)},updateLoading:function(f){this.element.toggleCls(this.loadingCls,f)},updateOver:function(g){var l=this;l.element.toggleCls(l.hoverCls,!!g);l.rowElement.toggleCls(l.rowHoverCls,g>1)},updateRowCls:function(g,l){this.rowElement.replaceCls(l,g)},updateSelected:function(p,n){var o=this,s=o.selectedCls,q=o.getToolElement();Ext.list.AbstractTreeItem.prototype.updateSelected.call(this,p,n);o.element.toggleCls(s,p);if(q){q.toggleCls(s,p)}},updateSelectedParent:function(m){var l=this;l.element.toggleCls(l.selectedParentCls,m);var n=l.getToolElement();if(n){n.toggleCls(l.selectedCls,m)}},updateText:function(f){this.textElement.update(f)},privates:{doNodeUpdate:function(f){Ext.list.AbstractTreeItem.prototype.doNodeUpdate.call(this,f);this.setRowCls(f&&f.data[this.rowClsProperty])},doIconCls:function(l,m,n){if(n){l.removeCls(n)}if(m){l.addCls(m)}},syncIndent:function(){var n=this,p=n.getIndent(),o=n.getNode(),m;if(o){m=o.data.depth-1;n.wrapElement.dom.style.marginLeft=(m*p)+"px"}},updateExpandCls:function(){if(!this.updatingExpandCls){var o=this,q=o.getExpandable(),p=o.element,s=o.getExpanded(),t=o.expandedCls,u=o.collapsedCls;o.updatingExpandCls=true;p.toggleCls(o.expandableCls,q);if(q){p.toggleCls(t,s);p.toggleCls(u,!s)}else{p.removeCls([t,u])}o.updatingExpandCls=false}},updateIndent:function(g,l){this.syncIndent();Ext.list.AbstractTreeItem.prototype.updateIndent.call(this,g,l)}}},1,["treelistitem"],["widget","treelistitem"],{widget:true,treelistitem:true},["widget.treelistitem"],0,[Ext.list,"TreeItem"],0));Ext.define("Ext.overrides.list.TreeItem",{override:"Ext.list.TreeItem",config:{floated:null},setFloated:function(o){var p=this,s=p.element,u=p.placeholder,q,t;if(p.treeItemFloated!==o){if(o){u=s.clone(false,true);u.id+="-placeholder";p.placeholder=Ext.get(u);p.wasExpanded=p.getExpanded();p.setExpanded(true);s.addCls(p.floatedCls);s.dom.parentNode.insertBefore(u,s.dom);p.floater=p.createFloater()}else{if(u){t=p.wasExpanded;q=p.getNode();p.setExpanded(t);if(!t&&q.isExpanded()){p.preventAnimation=true;q.collapse();p.preventAnimation=false}p.floater.remove(p,false);s.removeCls(p.floatedCls);u.dom.parentNode.insertBefore(s.dom,u.dom);u.destroy();p.floater.destroy();p.placeholder=p.floater=null}}p.treeItemFloated=o}},getFloated:function(){return this.treeItemFloated},runAnimation:function(f){return this.itemContainer.addAnimation(f)},stopAnimation:function(f){f.jumpToEnd()},privates:{createFloater:function(){var o=this,s=o.getOwner(),q=o.up("treelist"),p,n=o.getToolElement();o.floater=p=new Ext.container.Container({cls:q.self.prototype.element.cls+" "+q.uiPrefix+q.getUi()+" x-treelist-floater",floating:true,width:Ext.isIE8?200:(q.expandedWidth-n.getWidth()),shadow:false,renderTo:Ext.getBody(),listeners:{element:"el",click:function(e){return s.onClick(e)}}});p.add(o);p.show();p.el.alignTo(n,"tr?");return p}}});Ext.define("Ext.theme.triton.list.TreeItem",{override:"Ext.list.TreeItem",compatibility:Ext.isIE8,setFloated:function(g,l){arguments.callee.$previous.call(this,g,l);this.toolElement.syncRepaint()}});(Ext.cmd.derive("Ext.list.Tree",Ext.Widget,{expanderFirstCls:"x-treelist-expander-first",expanderOnlyCls:"x-treelist-expander-only",highlightPathCls:"x-treelist-highlight-path",microCls:"x-treelist-micro",uiPrefix:"x-treelist-",element:{reference:"element",cls:"x-treelist x-unselectable",listeners:{click:"onClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseover:"onMouseOver"},children:[{reference:"toolsElement",cls:"x-treelist-toolstrip",listeners:{click:"onToolStripClick",mouseover:"onToolStripMouseOver"}}]},cachedConfig:{animation:{duration:500,easing:"ease"},expanderFirst:true,expanderOnly:true},config:{defaults:{xtype:"treelistitem"},highlightPath:null,iconSize:null,indent:null,micro:false,overItem:null,selection:null,selectOnExpander:false,singleExpand:null,store:null,ui:null},twoWayBindable:{selection:1},publishes:{selection:1},defaultBindProperty:"store",constructor:function(l){var g=this;Ext.Widget.prototype.constructor.call(this,l);g.publishState("selection",g.getSelection());if(!Ext.isIE8){g.el.on({resize:g.onElResize,buffer:300,scope:g})}},beforeLayout:function(){this.syncIconSize()},destroy:function(){var f=this;f.destroying=true;f.unfloatAll();f.activeFloater=null;f.setSelection(null);f.setStore(null);Ext.Widget.prototype.destroy.call(this)},updateOverItem:function(o,t){var p={},q=2,u,s;for(u=o;u;u=this.getItem(s.parentNode)){s=u.getNode();p[s.internalId]=true;u.setOver(q);q=1}if(t){for(u=t;u;u=this.getItem(s.parentNode)){s=u.getNode();if(p[s.internalId]){break}u.setOver(0)}}},applyMicro:function(f){return Boolean(f)},applySelection:function(l,n){var m=this.getStore();if(!m){l=null}if(l&&l.get("selectable")===false){l=n}return l},updateSelection:function(o,p){var m=this,n;if(!m.destroying){n=m.getItem(p);if(n){n.setSelected(false)}n=m.getItem(o);if(n){n.setSelected(true)}m.fireEvent("selectionchange",m,o)}},applyStore:function(f){return f&&Ext.StoreManager.lookup(f,"tree")},updateStore:function(o,m){var n=this,p;if(m){if(!m.destroyed){if(m.getAutoDestroy()){m.destroy()}else{n.storeListeners.destroy()}}n.removeRoot();n.storeListeners=null}if(o){n.storeListeners=o.on({destroyable:true,scope:n,filterchange:"onFilterChange",nodeappend:"onNodeAppend",nodecollapse:"onNodeCollapse",nodeexpand:"onNodeExpand",nodeinsert:"onNodeInsert",noderemove:"onNodeRemove",rootchange:"onRootChange",update:"onNodeUpdate"});p=o.getRoot();if(p){n.createRootItem(p)}}if(!n.destroying){n.updateLayout()}},updateExpanderFirst:function(f){this.element.toggleCls(this.expanderFirstCls,f)},updateExpanderOnly:function(f){this.element.toggleCls(this.expanderOnlyCls,!f)},updateHighlightPath:function(f){this.element.toggleCls(this.highlightPathCls,f)},onElResize:function(g,l){if(!this.getMicro()){this.expandedWidth=l.width}},updateMicro:function(l){var g=this;if(!l){g.unfloatAll();g.activeFloater=null}g.element.toggleCls(g.microCls,l)},updateUi:function(m,p){var n=this.element,o=this.uiPrefix;if(p){n.removeCls(o+p)}if(m){n.addCls(o+m)}delete this.iconSize;this.syncIconSize()},getItem:function(m){var l=this.itemMap,n;if(m&&l){n=l[m.internalId]}return n||null},getItemConfig:function(g,l){return Ext.apply({parentItem:l.isRootListItem?null:l,owner:this,node:g,indent:this.getIndent()},this.getDefaults())},privates:{checkForOutsideClick:function(e){var l=this.activeFloater;if(!l.element.contains(e.target)){this.unfloatAll()}},collapsingForExpand:false,createItem:function(w,t){var p=this,q=Ext.create(p.getItemConfig(w,t)),v=p.toolsElement,u,s;if(t.isRootListItem){u=q.getToolElement();if(u){s=p.findVisiblePreviousSibling(w);if(!s){v.insertFirst(u)}else{s=p.getItem(s);u.insertAfter(s.getToolElement())}u.dom.setAttribute("data-recordId",w.internalId);u.isTool=true}}p.itemMap[w.internalId]=q;return q},createRootItem:function(n){var l=this,m;l.itemMap={};l.rootItem=m=new Ext.list.RootTreeItem({indent:l.getIndent(),node:n,owner:l});l.element.appendChild(m.element);l.itemMap[n.internalId]=m},findVisiblePreviousSibling:function(g){var l=g.previousSibling;while(l){if(l.data.visible){return l}l=l.previousSibling}return null},floatItem:function(m,o){var n=this,p;if(m.getFloated()){return}if(n.toolMouseListeners){n.toolMouseListeners.destroy();n.floaterMouseListeners.destroy()}n.unfloatAll();n.activeFloater=p=m;n.floatedByHover=o;m.setFloated(true);if(o){n.toolMouseListeners=m.getToolElement().monitorMouseLeave(300,n.checkForMouseLeave,n);n.floaterMouseListeners=(m.floater||m).el.monitorMouseLeave(300,n.checkForMouseLeave,n)}else{Ext.on("mousedown","checkForOutsideClick",n)}},onClick:function(m){var n=m.getTarget("[data-recordId]"),e;if(n){e=n.getAttribute("data-recordId");n=this.itemMap[e];if(n){n.onClick(m)}}},onMouseEnter:function(e){this.onMouseOver(e)},onMouseLeave:function(){this.setOverItem(null)},onMouseOver:function(e){var l=Ext.Component.fromElement(e.getTarget());this.setOverItem(l&&l.isTreeListItem&&l)},checkForMouseLeave:function(e){var m=this.activeFloater,n=e.getRelatedTarget();if(m){if(n!==m.getToolElement().dom&&!m.element.contains(n)){this.unfloatAll()}}},onFilterChange:function(f){this.onRootChange(f.getRoot())},onNodeAppend:function(n,l){if(n){var m=this.itemMap[n.internalId];if(m){m.nodeInsert(l,null)}}},onNodeCollapse:function(g){var l=this.itemMap[g.internalId];if(l){l.nodeCollapse(g,this.collapsingForExpand)}},onNodeExpand:function(y){var q=this,s=q.itemMap[y.internalId],x,u,t,w,v;if(s){if(!s.isRootItem&&q.getSingleExpand()){q.collapsingForExpand=true;w=(s.getParentItem()||q.rootItem).getNode();x=w.childNodes;for(t=0,u=x.length;t<u;++t){v=x[t];if(v!==y){v.collapse()}}q.collapsing=false}s.nodeExpand(y)}},onNodeInsert:function(p,m,o){var n=this.itemMap[p.internalId];if(n){n.nodeInsert(m,o)}},onNodeRemove:function(p,m,o){if(p&&!o){var n=this.itemMap[p.internalId];if(n){n.nodeRemove(m)}}},onNodeUpdate:function(s,n,q,o){var p=this.itemMap[n.internalId];if(p){p.nodeUpdate(n,o)}},onRootChange:function(l){var g=this;g.removeRoot();if(l){g.createRootItem(l)}g.updateLayout();g.fireEvent("refresh",g)},removeItem:function(p){var o=this.itemMap,n=p.internalId,q,s;if(o){q=o[n];if(q.getParentItem()===null){s=q.getToolElement();if(s){this.toolsElement.removeChild(s)}}delete o[n]}},removeRoot:function(){var g=this,l=g.rootItem;if(l){g.element.removeChild(l.element);g.rootItem=g.itemMap=Ext.destroy(l)}},onToolStripClick:function(m){var n=m.getTarget("[data-recordId]"),e;if(n){e=n.getAttribute("data-recordId");n=this.itemMap[e];if(n){if(n===this.activeFloater){this.unfloatAll()}else{this.floatItem(n,false)}}}},onToolStripMouseOver:function(m){var n=m.getTarget("[data-recordId]"),e;if(n){e=n.getAttribute("data-recordId");n=this.itemMap[e];if(n){this.floatItem(n,true)}}},syncIconSize:function(){var g=this,l=g.iconSize||(g.iconSize=parseInt(g.element.getStyle("background-position"),10));g.setIconSize(l)},unfloatAll:function(){var g=this,l=g.activeFloater;if(l){l.setFloated(false);g.activeFloater=null;if(g.floatedByHover){l.getToolElement().un("mouseleave","checkForMouseLeave",g);l.element.un({scope:g,mouseleave:"checkForMouseLeave",mouseover:"onMouseOver"})}else{Ext.un("mousedown","checkForOutsideClick",g)}}},defaultIconSize:22,updateIconSize:function(f){this.setIndent(f||this.defaultIconSize)},updateIndent:function(g){var l=this.rootItem;if(l){l.setIndent(g)}}}},1,["treelist"],["widget","treelist"],{widget:true,treelist:true},["widget.treelist"],0,[Ext.list,"Tree"],0));(Ext.cmd.derive("Ext.mixin.Responsive",Ext.Mixin,function(f){return{mixinConfig:{id:"responsive",after:{destroy:"destroy"}},config:{responsiveConfig:{$value:undefined,merge:function(t,q,u,e){if(!t){return q}var s=q?Ext.Object.chain(q):{},p;for(p in t){if(!e||!(p in s)){s[p]={fn:null,config:t[p]}}}return s}},responsiveFormulas:{$value:0,merge:function(e,p,n,o){return this.mergeNew(e,p,n,o)}}},destroy:function(){f.unregister(this)},privates:{statics:{active:false,all:{},context:Ext.Object.chain(Ext.platformTags),count:0,nextId:0,activate:function(){f.active=true;f.updateContext();Ext.on("resize",f.onResize,f)},deactivate:function(){f.active=false;Ext.un("resize",f.onResize,f)},notify:function(){var o=f.all,p=f.context,q=Ext.GlobalEvents,s=f.timer,e;if(s){f.timer=null;Ext.asapCancel(s)}f.updateContext();Ext.suspendLayouts();q.fireEvent("beforeresponsiveupdate",p);for(e in o){o[e].setupResponsiveContext()}q.fireEvent("beginresponsiveupdate",p);for(e in o){o[e].updateResponsiveState()}q.fireEvent("responsiveupdate",p);Ext.resumeLayouts(true)},onResize:function(){if(!f.timer){f.timer=Ext.asap(f.onTimer)}},onTimer:function(){f.timer=null;f.notify()},processConfig:function(t,u,w){var v=u&&u[w],e=t.config,s,q;if(v){q=t.self.getConfigurator();s=q.configs[w];e[w]=s.merge(v,e[w],t)}},register:function(l){var e=l.$responsiveId;if(!e){l.$responsiveId=e=++f.nextId;f.all[e]=l;if(++f.count===1){f.activate()}}},unregister:function(l){var e=l.$responsiveId;if(e in f.all){l.$responsiveId=null;delete f.all[e];if(--f.count===0){f.deactivate()}}},updateContext:function(){var e=Ext.Element,n=e.getViewportWidth(),p=e.getViewportHeight(),o=f.context;o.width=n;o.height=p;o.tall=n<p;o.wide=!o.tall;o.landscape=o.portrait=false;if(!o.platform){o.platform=Ext.platformTags}o[Ext.dom.Element.getOrientation()]=true}},afterClassMixedIn:function(s){var e=s.prototype,q=e.responsiveConfig,o=e.responsiveFormulas,p;if(q||o){p={};if(q){delete e.responsiveConfig;p.responsiveConfig=q}if(o){delete e.responsiveFormulas;p.responsiveFormulas=o}s.getConfigurator().add(p)}},applyResponsiveConfig:function(e){for(var l in e){e[l].fn=Ext.createRuleFn(l)}return e},applyResponsiveFormulas:function(n){var o={},e,p;if(n){for(p in n){if(Ext.isString(e=n[p])){e=Ext.createRuleFn(e)}o[p]=e}}return o},getResponsiveState:function(){var p=f.context,s=this.getResponsiveConfig(),q={},o,e;if(s){for(e in s){o=s[e];if(o.fn.call(this,p)){Ext.merge(q,o.config)}}}return q},setupResponsiveContext:function(){var m=this.getResponsiveFormulas(),e=f.context,n;if(m){for(n in m){e[n]=m[n].call(this,e)}}},transformInstanceConfig:function(e){var m=this,n;f.register(m);if(e){f.processConfig(m,e,"responsiveConfig");f.processConfig(m,e,"responsiveFormulas")}m.setupResponsiveContext();n=m.getResponsiveState();if(e){n=Ext.merge({},e,n);delete n.responsiveConfig;delete n.responsiveFormulas}return n},updateResponsiveState:function(){var e=this.getResponsiveState();this.setConfig(e)}}}},0,0,0,0,0,0,[Ext.mixin,"Responsive"],0));(Ext.cmd.derive("Ext.mixin.StyleCacher",Ext.Mixin,{mixinConfig:{id:"stylecacher"},getCachedStyle:function(l,m){var n=this.$styleCache;if(!n){n=this.$styleCache={}}if(!(m in n)){n[m]=Ext.fly(l).getStyle(m)}return n[m]}},0,0,0,0,0,0,[Ext.mixin,"StyleCacher"],0));(Ext.cmd.derive("Ext.perf.Accumulator",Ext.Base,function(){var y=null,u=Ext.global.chrome,x,z=function(){z=Ext.now;var g,f;if(Ext.isChrome&&u&&u.Interval){g=new u.Interval();g.start();z=function(){return g.microseconds()/1000}}else{if(window.ActiveXObject){try{f=new ActiveXObject("SenchaToolbox.Toolbox");Ext.senchaToolbox=f;z=function(){return f.milliseconds}}catch(e){}}}Ext.perf.getTimestamp=Ext.perf.Accumulator.getTimestamp=z;return z()};function t(e,f){e.sum+=f;e.min=Math.min(e.min,f);e.max=Math.max(e.max,f)}function w(e){var g=e?e:(z()-this.time),f=this,l=f.accum;++l.count;if(!--l.depth){t(l.total,g)}t(l.pure,g-f.childTime);y=f.parent;if(y){++y.accum.childCount;y.childTime+=g}}function A(){return{min:Number.MAX_VALUE,max:0,sum:0}}function s(e,f){return function(){var g=e.enter(),l=f.apply(this,arguments);g.leave();return l}}function v(g,l,m,e){var f={avg:0,min:e.min,max:e.max,sum:0};if(g){m=m||0;f.sum=e.sum-l*m;f.avg=f.sum/g}return f}return{constructor:function(f){var e=this;e.count=e.childCount=e.depth=e.maxDepth=0;e.pure=A();e.total=A();e.name=f},statics:{getTimestamp:z},format:function(f){if(!x){x=new Ext.XTemplate(["{name} - {count} call(s)",'<tpl if="count">','<tpl if="childCount">'," ({childCount} children)","</tpl>",'<tpl if="depth - 1">'," ({depth} deep)","</tpl>",'<tpl for="times">',", {type}: {[this.time(values.sum)]} msec (","avg={[this.time(values.sum / parent.count)]}",")","</tpl>","</tpl>"].join(""),{time:function(g){return Math.round(g*100)/100}})}var e=this.getData(f);e.name=this.name;e.pure.type="Pure";e.total.type="Total";e.times=[e.pure,e.total];return x.apply(e)},getData:function(f){var e=this;return{count:e.count,childCount:e.childCount,depth:e.maxDepth,pure:v(e.count,e.childCount,f,e.pure),total:v(e.count,e.childCount,f,e.total)}},enter:function(){var f=this,e={accum:f,leave:w,childTime:0,parent:y};++f.depth;if(f.maxDepth<f.depth){f.maxDepth=f.depth}y=e;e.time=z();return e},monitor:function(f,g,l){var e=this.enter();if(l){f.apply(g,l)}else{f.call(g)}e.leave()},report:function(){Ext.log(this.format())},tap:function(l,f){var g=this,q=typeof f==="string"?[f]:f,m,e,o,p,E,F,G,n;n=function(){if(typeof l==="string"){m=Ext.global;p=l.split(".");for(o=0,E=p.length;o<E;++o){m=m[p[o]]}}else{m=l}for(o=0,E=q.length;o<E;++o){F=q[o];e=F.charAt(0)==="!";if(e){F=F.substring(1)}else{e=!(F in m.prototype)}G=e?m:m.prototype;G[F]=s(g,G[F])}};Ext.ClassManager.onCreated(n,g,l);return g}}},1,0,0,0,0,0,[Ext.perf,"Accumulator"],function(){Ext.perf.getTimestamp=this.getTimestamp}));(Ext.cmd.derive("Ext.perf.Monitor",Ext.Base,{singleton:true,alternateClassName:"Ext.Perf",constructor:function(){this.accumulators=[];this.accumulatorsByName={}},calibrate:function(){var t=new Ext.perf.Accumulator("$"),w=t.total,s=Ext.perf.Accumulator.getTimestamp,p=0,v,u,q;q=s();do{v=t.enter();v.leave();++p}while(w.sum<100);u=s();return(u-q)/p},get:function(m){var l=this,n=l.accumulatorsByName[m];if(!n){l.accumulatorsByName[m]=n=new Ext.perf.Accumulator(m);l.accumulators.push(n)}return n},enter:function(f){return this.get(f).enter()},monitor:function(n,l,m){this.get(n).monitor(l,m)},report:function(){var l=this,m=l.accumulators,n=l.calibrate();m.sort(function(e,f){return(e.name<f.name)?-1:((f.name<e.name)?1:0)});l.updateGC();Ext.log("Calibration: "+Math.round(n*100)/100+" msec/sample");Ext.each(m,function(e){Ext.log(e.format(n))})},getData:function(l){var m={},n=this.accumulators;Ext.each(n,function(e){if(l||e.count){m[e.name]=e.getData()}});return m},reset:function(){Ext.each(this.accumulators,function(l){var g=l;g.count=g.childCount=g.depth=g.maxDepth=0;g.pure={min:Number.MAX_VALUE,max:0,sum:0};g.total={min:Number.MAX_VALUE,max:0,sum:0}})},updateGC:function(){var n=this.accumulatorsByName.GC,m=Ext.senchaToolbox,l;if(n){n.count=m.garbageCollectionCounter||0;if(n.count){l=n.pure;n.total.sum=l.sum=m.garbageCollectionMilliseconds;l.min=l.max=l.sum/n.count;l=n.total;l.min=l.max=l.sum/n.count}}},watchGC:function(){Ext.perf.getTimestamp();var f=Ext.senchaToolbox;if(f){this.get("GC");f.watchGarbageCollector(false)}},setup:function(q){if(!q){q={render:{"Ext.Component":"render"},layout:{"Ext.layout.Context":"run"}}}this.currentConfig=q;var p,u,s,o,t;for(p in q){if(q.hasOwnProperty(p)){u=q[p];s=Ext.Perf.get(p);for(o in u){if(u.hasOwnProperty(o)){t=u[o];s.tap(o,t)}}}}this.watchGC()},setupLog:function(q){var o,t,s,u,p;for(o in q){if(q.hasOwnProperty(o)){t=Ext.ClassManager.get(o);if(t){s=q[o];p={};for(u in s){p[u]=(function(f,e){return function(){var m,l,g,n,w;m=+Date.now();w=this.callParent(arguments);l=+Date.now()-m;if(window.console&&l>0){n=e==="this"?this:typeof e==="string"?this[e]:typeof e==="number"?arguments[e]:null;if(n){g=n.id}if(g!=null){console.log(f+" for "+g+": "+l+"ms")}else{console.log(f+" for unknown: "+l+"ms")}if(console.trace){console.trace()}}return w}})(u,s[u])}Ext.override(t,p)}}}}},1,0,0,0,0,0,[Ext.perf,"Monitor",Ext,"Perf"],0));(Ext.cmd.derive("Ext.plugin.Abstract",Ext.Base,{alternateClassName:"Ext.AbstractPlugin",isPlugin:true,constructor:function(f){if(f){this.pluginConfig=f;this.initConfig(f)}},clonePlugin:function(f){return new this.self(Ext.apply({},f,this.pluginConfig))},getCmp:function(){return this.cmp},setCmp:function(f){this.cmp=f},init:Ext.emptyFn,destroy:function(){this.cmp=this.pluginConfig=null;this.callParent()},onClassExtended:function(q,n,s){var o=n.alias,p=q.prototype;if(o&&!n.ptype){if(Ext.isArray(o)){o=o[0]}p.ptype=o.split("plugin.")[1]}},resolveListenerScope:function(m){var n=this,o=n.getCmp(),p;if(o){p=o.resolveSatelliteListenerScope(n,m)}return p||n.mixins.observable.resolveListenerScope.call(n,m)}},1,0,0,0,0,0,[Ext.plugin,"Abstract",Ext,"AbstractPlugin"],0));Ext.define("Ext.overrides.plugin.Abstract",{override:"Ext.plugin.Abstract",$configStrict:false,$configPrefixed:false,disabled:false,getState:null,applyState:null,enable:function(){this.disabled=false},disable:function(){this.disabled=true}});(Ext.cmd.derive("Ext.util.Base64",Ext.Base,{singleton:true,_str:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(z){var A=this;var D="",E,G,w,F,v,x,y,C=0;z=A._utf8_encode(z);var B=z.length;while(C<B){E=z.charCodeAt(C++);G=z.charCodeAt(C++);w=z.charCodeAt(C++);F=E>>2;v=((E&3)<<4)|(G>>4);x=((G&15)<<2)|(w>>6);y=w&63;if(isNaN(G)){x=y=64}else{if(isNaN(w)){y=64}}D=D+A._str.charAt(F)+A._str.charAt(v)+A._str.charAt(x)+A._str.charAt(y)}return D},decode:function(z){var A=this;var D="",E,G,w,F,v,x,y,C=0;z=z.replace(/[^A-Za-z0-9\+\/\=]/g,"");var B=z.length;while(C<B){F=A._str.indexOf(z.charAt(C++));v=A._str.indexOf(z.charAt(C++));x=A._str.indexOf(z.charAt(C++));y=A._str.indexOf(z.charAt(C++));E=(F<<2)|(v>>4);G=((v&15)<<4)|(x>>2);w=((x&3)<<6)|y;D=D+String.fromCharCode(E);if(x!==64){D=D+String.fromCharCode(G)}if(y!==64){D=D+String.fromCharCode(w)}}D=A._utf8_decode(D);return D},_utf8_encode:function(p){p=p.replace(/\r\n/g,"\n");var q="",n=0,s=p.length;for(;n<s;n++){var o=p.charCodeAt(n);if(o<128){q+=String.fromCharCode(o)}else{if((o>127)&&(o<2048)){q+=String.fromCharCode((o>>6)|192);q+=String.fromCharCode((o&63)|128)}else{q+=String.fromCharCode((o>>12)|224);q+=String.fromCharCode(((o>>6)&63)|128);q+=String.fromCharCode((o&63)|128)}}}return q},_utf8_decode:function(t){var q="",w=0,v=0,s=0,p=0,u=t.length;while(w<u){v=t.charCodeAt(w);if(v<128){q+=String.fromCharCode(v);w++}else{if((v>191)&&(v<224)){p=t.charCodeAt(w+1);q+=String.fromCharCode(((v&31)<<6)|(p&63));w+=2}else{p=t.charCodeAt(w+1);s=t.charCodeAt(w+2);q+=String.fromCharCode(((v&15)<<12)|((p&63)<<6)|(s&63));w+=3}}}return q}},0,0,0,0,0,0,[Ext.util,"Base64"],0));(Ext.cmd.derive("Ext.util.LocalStorage",Ext.Base,{id:null,destroyed:false,lazyKeys:true,prefix:"",session:false,_keys:null,_store:null,_users:0,statics:{cache:{},get:function(n){var o=this,q=o.cache,p={_users:1},s;if(Ext.isString(n)){p.id=n}else{Ext.apply(p,n)}if(!(s=q[p.id])){s=new o(p)}else{++s._users}return s},supported:true},constructor:function(l){var g=this;Ext.apply(g,l);if(g._users){Ext.util.LocalStorage.cache[g.id]=g}g.init()},init:function(){var l=this,g=l.id;if(!l.prefix&&g){l.prefix=g+"-"}l._store=(l.session?window.sessionStorage:window.localStorage)},destroy:function(){var f=this;delete Ext.util.LocalStorage.cache[f.id];f._store=f._keys=null;f.callParent()},getKeys:function(){var n=this,v=n._store,w=n.prefix,q=n._keys,u=w.length,s,t;if(!q){n._keys=q=[];for(s=v.length;s--;){t=v.key(s);if(t.length>u){if(w===t.substring(0,u)){q.push(t.substring(u))}}}}return q},release:function(){if(!--this._users){this.destroy()}},save:Ext.emptyFn,clear:function(){var o=this,s=o._store,n=o.prefix,p=o._keys||o.getKeys(),q;for(q=p.length;q--;){s.removeItem(n+p[q])}p.length=0},key:function(l){var g=this._keys||this.getKeys();return(0<=l&&l<g.length)?g[l]:null},getItem:function(g){var l=this.prefix+g;return this._store.getItem(l)},removeItem:function(q){var u=this,s=u.prefix+q,t=u._store,o=u._keys,p=t.length;t.removeItem(s);if(o&&p!==t.length){if(u.lazyKeys){u._keys=null}else{Ext.Array.remove(o,q)}}},setItem:function(s,v){var w=this,t=w.prefix+s,u=w._store,p=u.length,q=w._keys;u.setItem(t,v);if(q&&p!==u.length){q.push(s)}}},1,0,0,0,0,0,[Ext.util,"LocalStorage"],function(){var f=this;if("localStorage" in window){return}if(!Ext.isIE){f.supported=false;return}f.override({data:null,flushDelay:1,init:function(){var m=this,e=m.data,n;m.el=n=document.createElement("div");n.id=(m.id||(m.id="extjs-localstore"));n.addBehavior("#default#userdata");Ext.getHead().dom.appendChild(n);n.load(m.id);e=n.getAttribute("xdata");m.data=e=(e?Ext.decode(e):{});m._flushFn=function(){m._timer=null;m.save(0)}},destroy:function(){var e=this,l=e.el;if(l){if(e._timer){e.save()}l.parentNode.removeChild(l);e.data=e.el=null;e.callParent()}},getKeys:function(){var e=this,l=e._keys;if(!l){e._keys=l=Ext.Object.getKeys(e.data)}return l},save:function(l){var e=this;if(!l){if(e._timer){clearTimeout(e._timer);e._timer=null}e.el.setAttribute("xdata",Ext.encode(e.data));e.el.save(e.id)}else{if(!e._timer){e._timer=Ext.defer(e._flushFn,l)}}},clear:function(){var e=this;e.data={};e._keys=null;e.save(e.flushDelay)},getItem:function(l){var e=this.data;return(l in e)?e[l]:null},removeItem:function(p){var n=this,o=n._keys,e=n.data;if(p in e){delete e[p];if(o){if(n.lazyKeys){n._keys=null}else{Ext.Array.remove(o,p)}}n.save(n.flushDelay)}},setItem:function(q,s){var o=this,e=o.data,p=o._keys;if(p&&!(q in e)){p.push(q)}e[q]=s;o.save(o.flushDelay)}})}));Ext.define(null,{override:"Ext.event.publisher.Focus",compatibility:Ext.isIE10m,publishDelegatedDomEvent:function(e){var n=document.body,m=Ext.synchronouslyFocusing;if(m&&((e.type==="focusout"&&(e.srcElement===m||e.srcElement===window)&&e.toElement===n)||(e.type==="focusin"&&(e.srcElement===n||e.srcElement===window)&&e.fromElement===m&&e.toElement===null))){return}this.callParent([e])}});Ext.define(null,{override:"Ext.form.field.Checkbox",compatibility:Ext.isIE8,changeEventName:"propertychange",onChangeEvent:function(e){if(this.duringSetRawValue||e.browserEvent.propertyName!=="checked"){return}this.callParent([e])},updateCheckedCls:function(m){var n=this,l=n.displayEl;n.callParent([m]);if(l&&m!==n.lastValue){l.repaint()}}});Ext.define(null,{override:"Ext.form.field.Radio",compatibility:Ext.isIE8,getSubTplData:function(l){var g=this.callParent([l]);delete g.checked;return g},afterRender:function(){this.callParent();if(this.checked){this.inputEl.dom.checked=true}},onChange:function(g,l){this.callSuper([g,l])}});Ext.define(null,{override:"Ext.scroll.Scroller",compatibility:Ext.isIE8,privates:{doScrollTo:function(u,v,B){var w=this,z=w.getElement(),y,A,t,C,x;if(z&&!z.destroyed){A=this.getElement().dom;C=(u===Infinity);x=(v===Infinity);if(C||x){y=w.getMaxPosition();if(C){u=y.x}if(x){v=y.y}}u=w.convertX(u);if(B){t={};if(v!=null){t.scrollTop=v}if(u!=null){t.scrollLeft=u}z.animate(Ext.mergeIf({to:{scrollTop:v,scrollLeft:u}},B))}else{if(u!=null&&v!=null){w.deferDomScroll=true}if(v!=null){A.scrollTop=v}if(u!=null){A.scrollLeft=u}if(w.deferDomScroll){w.deferDomScroll=false;+A.scrollLeft;A.scrollLeft=u}}w.positionDirty=true}},onDomScroll:function(){var f=this;if(f.deferDomScroll){return}f.callParent()}}});(Ext.cmd.derive("Ext.ElementLoader",Ext.Base,{statics:{Renderer:{Html:function(n,m,l){n.getTarget().setHtml(m.responseText,l.scripts===true,l.rendererScope);return true}}},url:null,params:null,baseParams:null,autoLoad:false,target:null,loadMask:false,ajaxOptions:null,scripts:false,isLoader:true,constructor:function(m){var l=this,n;l.mixins.observable.constructor.call(l,m);l.setTarget(l.target);if(l.autoLoad){n=l.autoLoad;if(n===true){n=null}l.load(n)}},setTarget:function(g){var l=this;g=Ext.get(g);if(l.target&&l.target!==g){l.abort()}l.target=g},getTarget:function(){return this.target||null},abort:function(){var f=this.active;if(f!==undefined){Ext.Ajax.abort(f.request);if(f.mask){this.removeMask()}delete this.active}},removeMask:function(){this.target.unmask()},addMask:function(f){this.target.mask(f===true?null:f)},load:function(s){s=Ext.apply({},s);var p=this,u=Ext.isDefined(s.loadMask)?s.loadMask:p.loadMask,w=Ext.apply({},s.params),t=Ext.apply({},s.ajaxOptions),v=s.callback||p.callback,q=s.scope||p.scope||p;Ext.applyIf(t,p.ajaxOptions);Ext.applyIf(s,t);Ext.applyIf(w,p.params);Ext.apply(w,p.baseParams);Ext.applyIf(s,{url:p.url});Ext.apply(s,{scope:p,params:w,callback:p.onComplete});if(p.fireEvent("beforeload",p,s)===false){return}if(u){p.addMask(u)}p.active={options:s,mask:u,scope:q,callback:v,success:s.success||p.success,failure:s.failure||p.failure,renderer:s.renderer||p.renderer,scripts:Ext.isDefined(s.scripts)?s.scripts:p.scripts};p.active.request=Ext.Ajax.request(s);p.setOptions(p.active,s)},setOptions:function(g,l){g.rendererScope=l.rendererScope||this.rendererScope||this},onComplete:function(t,w,u){var q=this,p=q.active,v,s;if(p){s=p.scope;v=p.rendererScope;if(w){w=q.getRenderer(p.renderer).call(v,q,u,p)!==false}if(w){Ext.callback(p.success,s,[q,u,t]);q.fireEvent("load",q,u,t)}else{Ext.callback(p.failure,s,[q,u,t]);q.fireEvent("exception",q,u,t)}Ext.callback(p.callback,s,[q,w,u,t]);if(p.mask){q.removeMask()}}delete q.active},getRenderer:function(f){if(Ext.isFunction(f)){return f}return this.statics().Renderer.Html},startAutoRefresh:function(n,m){var l=this;l.stopAutoRefresh();l.autoRefresh=Ext.interval(function(){l.load(m)},n)},stopAutoRefresh:function(){clearInterval(this.autoRefresh);this.autoRefresh=null},isAutoRefreshing:function(){return !!this.autoRefresh},destroy:function(){var f=this;f.stopAutoRefresh();f.abort();f.callParent()}},1,0,0,0,0,[[Ext.util.Observable.prototype.mixinId||Ext.util.Observable.$className,Ext.util.Observable]],[Ext,"ElementLoader"],0));(Ext.cmd.derive("Ext.ComponentLoader",Ext.ElementLoader,{statics:{Renderer:{Data:function(q,p,e){var s=true;try{q.getTarget().update(Ext.decode(p.responseText))}catch(o){s=false}return s},Component:function(t,q,v){var u=true,w=t.getTarget(),s=[];try{s=Ext.decode(q.responseText)}catch(e){u=false}if(u){w.suspendLayouts();if(v.removeAll){w.removeAll()}w.add(s);w.resumeLayouts(true)}return u}}},target:null,loadOnRender:false,loadMask:false,renderer:"html",setTarget:function(g){var l=this;if(Ext.isString(g)){g=Ext.getCmp(g)}if(l.target&&l.target!==g){l.abort()}l.target=g;if(g&&l.loadOnRender){if(g.rendered){l.doLoadOnRender()}else{l.mon(g,"render",l.doLoadOnRender,l)}}},doLoadOnRender:function(){var f=this.loadOnRender;this.load(Ext.isObject(f)?f:null)},removeMask:function(){this.target.setLoading(false)},addMask:function(f){this.target.setLoading(f)},setOptions:function(g,l){g.removeAll=Ext.isDefined(l.removeAll)?l.removeAll:this.removeAll;g.rendererScope=l.rendererScope||this.rendererScope||this.target},getRenderer:function(g){if(Ext.isFunction(g)){return g}var l=this.statics().Renderer;switch(g){case"component":return l.Component;case"data":return l.Data;default:return Ext.ElementLoader.Renderer.Html}}},0,0,0,0,0,0,[Ext,"ComponentLoader"],0));(Ext.cmd.derive("Ext.layout.container.Editor",Ext.layout.container.Container,{autoSizeDefault:{width:"field",height:"field"},sizePolicies:{$:{$:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},boundEl:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1}},boundEl:{$:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},boundEl:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}}},getItemSizePolicy:function(o){var p=this,s=p.owner.autoSize,q=s&&s.width,n=p.sizePolicies;n=n[q]||n.$;q=s&&s.height;n=n[q]||n.$;return n},calculate:function(u){var o=this,s=o.owner,t=s.autoSize,p,q;if(t===true){t=o.autoSizeDefault}if(t){p=o.getDimension(s,t.width,"getWidth",s.width);q=o.getDimension(s,t.height,"getHeight",s.height)}u.childItems[0].setSize(p,q);u.setWidth(p);u.setHeight(q);u.setContentSize(p||s.field.getWidth(),q||s.field.getHeight())},getDimension:function(p,o,m,n){switch(o){case"boundEl":return p.boundEl[m]();case"field":return undefined;default:return n}}},0,0,0,0,["layout.editor"],0,[Ext.layout.container,"Editor"],0));(Ext.cmd.derive("Ext.Editor",Ext.container.Container,{layout:"editor",allowBlur:true,revertInvalid:true,value:"",alignment:"c-c?",offsets:[0,0],shadow:"frame",constrain:false,swallowKeys:true,completeOnEnter:true,cancelOnEsc:true,updateEl:false,focusOnToFront:false,baseCls:"x-editor",editing:false,preventDefaultAlign:true,useBoundValue:true,specialKeyDelay:1,initComponent:function(){var l=this,g=l.field=Ext.ComponentManager.create(l.field||{},"textfield");g.msgTarget=g.msgTarget||"qtip";l.mon(g,{scope:l,specialkey:l.onSpecialKey});if(g.grow){l.mon(g,"autosize",l.onFieldAutosize,l,{delay:1})}l.floating={constrain:l.constrain};l.items=g;Ext.container.Container.prototype.initComponent.call(this)},onAdded:function(f){this.ownerCmp=f},onFieldAutosize:function(){this.updateLayout()},afterRender:function(q,s){var p=this,n=p.field,o=n.inputEl;Ext.container.Container.prototype.afterRender.apply(this,arguments);if(o){o.dom.name="";if(p.swallowKeys){o.swallowEvent(["keypress","keydown"])}}},onSpecialKey:function(v,w){var p=this,s=w.getKey(),u=p.completeOnEnter&&s===w.ENTER,q=p.cancelOnEsc&&s===w.ESC,t=p.specialKeyTask;if(u||q){w.stopEvent();if(!t){p.specialKeyTask=t=new Ext.util.DelayedTask()}t.delay(p.specialKeyDelay,u?p.completeEdit:p.cancelEdit,p)}p.fireEvent("specialkey",p,v,w)},startEdit:function(t,q,w){var s=this,y=s.field,v,u,x;s.completeEdit(true);s.boundEl=Ext.get(t);v=s.boundEl.dom;if(s.useBoundValue&&!Ext.isDefined(q)){q=Ext.String.trim(v.textContent||v.innerText||v.innerHTML)}if(s.fireEvent("beforestartedit",s,s.boundEl,q)!==false){if(s.context){q=s.context.value}Ext.suspendLayouts();if(!s.rendered){u=s.ownerCt;x=s.renderTo||(u&&u.getEl())||Ext.getBody();Ext.fly(x).position();s.renderTo=x}s.startValue=q;s.show();s.realign(true);y.suspendEvents();y.setValue(q);y.resetOriginalValue();y.resumeEvents();if(w!==false){y.focus(y.selectOnFocus?true:[Number.MAX_VALUE])}if(y.autoSize){y.autoSize()}Ext.resumeLayouts(true);s.toggleBoundEl(false);s.editing=true}},realign:function(l){var g=this;if(l===true){g.updateLayout()}g.alignTo(g.boundEl,g.alignment,g.offsets)},completeEdit:function(t){var p=this,u=p.field,s=p.startValue,q=p.context&&p.context.cancel,o;if(!p.editing){return}if(u.assertValue){u.assertValue()}o=p.getValue();if(!u.isValid()){if(p.revertInvalid!==false){p.cancelEdit(t)}return}if(p.ignoreNoChange&&!u.didValueChange(o,s)){p.onEditComplete(t);return}if(p.fireEvent("beforecomplete",p,o,s)!==false){o=p.getValue();if(p.updateEl&&p.boundEl){p.boundEl.setHtml(o)}p.onEditComplete(t,q);p.fireEvent("complete",p,o,s)}},onShow:function(){var f=this;Ext.container.Container.prototype.onShow.apply(this,arguments);f.fireEvent("startedit",f,f.boundEl,f.startValue)},cancelEdit:function(s){var p=this,q=p.startValue,n=p.field,o;if(p.editing){if(n){o=p.editedValue=p.getValue();n.suspendEvents();p.setValue(q);n.resumeEvents()}p.onEditComplete(s,true);p.fireEvent("canceledit",p,o,q);delete p.editedValue}},onEditComplete:function(g,l){this.editing=false;if(g!==true){this.hide();this.toggleBoundEl(true)}},onFocusLeave:function(e){var l=this;if(l.allowBlur===true&&l.editing){l.completeEdit()}Ext.container.Container.prototype.onFocusLeave.call(this,e)},onHide:function(){var l=this,g=l.field;if(l.editing){l.completeEdit()}else{if(g.collapse){g.collapse()}}Ext.container.Container.prototype.onHide.apply(this,arguments)},getValue:function(){return this.field.getValue()},setValue:function(f){this.field.setValue(f)},toggleBoundEl:function(f){if(this.hideEl!==false){this.boundEl.setVisible(f)}},doDestroy:function(){var g=this,l=g.specialKeyTask;if(l){l.cancel()}Ext.destroy(g.field);Ext.container.Container.prototype.doDestroy.call(this)}},0,["editor"],["component","box","container","editor"],{component:true,box:true,container:true,editor:true},["widget.editor"],0,[Ext,"Editor"],0));(Ext.cmd.derive("Ext.Img",Ext.Component,{autoEl:"img",baseCls:"x-img",config:{src:null,glyph:null},alt:"",title:"",imgCls:"",maskOnDisable:false,applySrc:function(f){return f&&Ext.resolveResource(f)},getElConfig:function(){var o=this,n=o.autoEl,q=Ext.Component.prototype.getElConfig.call(this),p=o.glyph,s;if(p){q.tag="div";q.html=p.character;q.style=q.style||{};q.style.fontFamily=p.fontFamily;q.role="img"}else{if(n==="img"||(Ext.isObject(n)&&n.tag==="img")){s=q}else{q.cn=[s={tag:"img",id:o.id+"-img"}]}}if(s){if(o.imgCls){s.cls=(s.cls?s.cls+" ":"")+o.imgCls}s.src=o.src||Ext.BLANK_IMAGE_URL}if(o.alt){(s||q).alt=o.alt}else{(s||q).alt=""}if(o.title){(s||q).title=o.title}return q},onRender:function(){var m=this,l=m.autoEl,n;Ext.Component.prototype.onRender.apply(this,arguments);n=m.el;if(l==="img"||(Ext.isObject(l)&&l.tag==="img")){m.imgEl=n}else{m.imgEl=n.getById(m.id+"-img")}},doDestroy:function(){var l=this,g=l.imgEl;if(g&&l.el!==g){g.destroy()}l.imgEl=null;Ext.Component.prototype.doDestroy.call(this)},getTitle:function(){return this.title},setTitle:function(l){var n=this,m=n.imgEl;n.title=l||"";if(m){m.dom.title=l||""}},afterComponentLayout:function(o,t,q,u){var s=this.getSizeModel().height,p;if((s.calculated||s.configured)&&t&&this.glyph){p=t+"px";this.setStyle({"line-height":p,"font-size":p})}Ext.Component.prototype.afterComponentLayout.call(this,o,t,q,u)},getAlt:function(){return this.alt},setAlt:function(l){var n=this,m=n.imgEl;n.alt=l||"";if(m){m.dom.alt=l||""}},_naturalSize:null,getNaturalSize:function(){var o=this,s=o.imgEl,u=o._naturalSize,p,t,q;if(s&&!u){s=s.dom;o._naturalSize=u={width:t=s.naturalWidth,height:s.naturalHeight};if(!t){p=s.style;t=p.width;q=p.height;p.width=p.height="auto";u.width=s.width;u.height=s.height;p.width=t;p.height=q}u.aspect=u.width/u.height}return u},updateSrc:function(g){var l=this.imgEl;if(l){l.dom.src=g||Ext.BLANK_IMAGE_URL}},applyGlyph:function(g,l){if(g){if(!g.isGlyph){g=new Ext.Glyph(g)}if(g.isEqual(l)){g=undefined}}return g},updateGlyph:function(l,n){var m=this.el;if(m){m.dom.innerHTML=l.character;m.setStyle(l.getStyle())}}},0,["image","imagecomponent"],["component","box","image","imagecomponent"],{component:true,box:true,image:true,imagecomponent:true},["widget.image","widget.imagecomponent"],0,[Ext,"Img"],0));(Ext.cmd.derive("Ext.button.Split",Ext.button.Button,{alternateClassName:"Ext.SplitButton",isSplitButton:true,arrowCls:"split",split:true,getTemplateArgs:function(){var m=this,n,l;l=Ext.button.Button.prototype.getTemplateArgs.call(this);if(m.disabled){l.tabIndex=null}n=m.ariaArrowElAttributes||{};n["aria-hidden"]=!!m.hidden;n["aria-disabled"]=!!m.disabled;if(m.arrowTooltip){n["aria-label"]=m.arrowTooltip}else{n["aria-labelledby"]=m.id}l.arrowElAttributes=n;return l},onRender:function(){var g=this,l;Ext.button.Button.prototype.onRender.call(this);l=g.getFocusEl();if(l){l.on({scope:g,focus:g.onMainElFocus,blur:g.onMainElBlur})}l=g.arrowEl;if(l){l.dom.setAttribute("data-componentid",g.id);l.setVisibilityMode(Ext.dom.Element.DISPLAY);l.on({scope:g,focus:g.onArrowElFocus,blur:g.onArrowElBlur})}},setArrowHandler:function(g,l){this.arrowHandler=g;this.scope=l},onClick:function(e){var m=this,n=e.type==="keydown"&&e.target===m.arrowEl.dom;m.doPreventDefault(e);if(!m.disabled){if(n||m.isWithinTrigger(e)){e.preventDefault();m.maybeShowMenu(e);m.fireEvent("arrowclick",m,e);if(m.arrowHandler){m.arrowHandler.call(m.scope||m,m,e)}}else{m.doToggle();m.fireHandler(e)}}},enable:function(m){var l=this,n=l.arrowEl;Ext.button.Button.prototype.enable.call(this,m);if(n){n.dom.setAttribute("tabIndex",l.tabIndex);n.dom.setAttribute("aria-disabled","false")}},disable:function(m){var l=this,n=l.arrowEl;Ext.button.Button.prototype.disable.call(this,m);if(n){n.dom.removeAttribute("tabIndex");n.dom.setAttribute("aria-disabled","true")}},afterHide:function(l,g){Ext.button.Button.prototype.afterHide.call(this,l,g);this.arrowEl.dom.setAttribute("aria-hidden","true")},afterShow:function(l,n,m){Ext.button.Button.prototype.afterShow.call(this,l,n,m);this.arrowEl.dom.setAttribute("aria-hidden","false")},privates:{isFocusing:function(e){var p=this,t=e.fromElement,u=e.toElement,q=p.focusEl&&p.focusEl.dom,s=p.arrowEl&&p.arrowEl.dom;if(p.focusable){if(u===q){return t===s?false:true}else{if(u===s){return t===q?false:true}}return true}return false},isBlurring:function(e){var p=this,t=e.fromElement,u=e.toElement,q=p.focusEl&&p.focusEl.dom,s=p.arrowEl&&p.arrowEl.dom;if(p.focusable){if(t===q){return u===s?false:true}else{if(t===s){return u===q?false:true}}return true}return false},getFocusClsEl:Ext.privateFn,onMainElFocus:function(e){this.el.addCls(this._focusCls)},onMainElBlur:function(e){this.el.removeCls(this._focusCls)},onArrowElFocus:function(e){this.el.addCls(this._arrowFocusCls)},onArrowElBlur:function(){this.el.removeCls(this._arrowFocusCls)},setTabIndex:function(f){Ext.button.Button.prototype.setTabIndex.call(this,f);if(this.arrowEl){this.arrowEl.set({tabIndex:f})}},_addSplitCls:function(){var f=this.arrowEl;Ext.button.Button.prototype._addSplitCls.call(this);f.dom.setAttribute("tabIndex",this.tabIndex);f.setVisible(true)},_removeSplitCls:function(){var f=this.arrowEl;Ext.button.Button.prototype._removeSplitCls.call(this);f.dom.removeAttribute("tabIndex");f.setVisible(false)}}},0,["splitbutton"],["component","box","button","splitbutton"],{component:true,box:true,button:true,splitbutton:true},["widget.splitbutton"],0,[Ext.button,"Split",Ext,"SplitButton"],0));(Ext.cmd.derive("Ext.layout.container.SegmentedButton",Ext.layout.container.Container,{needsItemSize:false,setsItemSize:false,_btnRowCls:"x-segmented-button-row",getRenderTree:function(){var m=this,p=Ext.layout.container.Container.prototype.getRenderTree.call(this),o,n;if(m.owner.getVertical()){for(o=0,n=p.length;o<n;o++){p[o]={cls:m._btnRowCls,cn:p[o]}}}return p},getItemLayoutEl:function(l){var g=l.el.dom;return this.owner.getVertical()?g.parentNode:g},onDestroy:function(){if(this.rendered){var g=this.getRenderTarget(),l;while((l=g.last())){l.destroy()}}}},0,0,0,0,["layout.segmentedbutton"],0,[Ext.layout.container,"SegmentedButton"],0));(Ext.cmd.derive("Ext.button.Segmented",Ext.container.Container,{config:{allowDepress:false,allowMultiple:false,forceSelection:false,allowToggle:true,vertical:false,defaultUI:"default"},beforeRenderConfig:{value:undefined},defaultBindProperty:"value",publishes:["value"],twoWayBindable:["value"],layout:"segmentedbutton",defaultType:"button",maskOnDisable:false,isSegmentedButton:true,baseCls:"x-segmented-button",itemCls:"x-segmented-button-item",_firstCls:"x-segmented-button-first",_lastCls:"x-segmented-button-last",_middleCls:"x-segmented-button-middle",applyValue:function(v,D){var w=this,E=w.getAllowMultiple(),A,z,G,F,x,B,y,C;G=(v instanceof Array)?v:(v==null)?[]:[v];F=(D instanceof Array)?D:(D==null)?[]:[D];w._isApplyingValue=true;if(!w.rendered){x=w.items.items;for(B=x.length-1;B>=0;B--){z=x[B];if(w.forceSelection&&!B&&!C){z.pressed=true}if(z.pressed){C=true;A=z.value;if(A==null){A=w.items.indexOf(z)}if(!Ext.Array.contains(G,A)){G.unshift(A)}}}}y=G.length;for(B=0;B<y;B++){v=G[B];z=w._lookupButtonByValue(v);if(z){A=z.value;if((A!=null)&&A!==v){G[B]=A}if(!z.pressed){z.setPressed(true)}}}v=E?G:y?G[0]:null;for(B=0,y=F.length;B<y;B++){D=F[B];if(!Ext.Array.contains(G,D)){w._lookupButtonByValue(D).setPressed(false)}}w._isApplyingValue=false;return v},updateValue:function(n,p){var o=this,m;if(o.hasListeners.change){if(n&&p&&o.getAllowMultiple()){m=Ext.Array.equals(n,p)}if(!m){o.fireEvent("change",o,n,p)}}},beforeRender:function(){var f=this;f.addCls(f.baseCls+f._getClsSuffix());f._syncItemClasses(true);Ext.container.Container.prototype.beforeRender.call(this)},onAdd:function(l){var m=this,n="_syncItemClasses";m.mon(l,{hide:n,show:n,beforetoggle:"_onBeforeItemToggle",toggle:"_onItemToggle",scope:m});if(m.getAllowToggle()){l.enableToggle=true;if(!m.getAllowMultiple()){l.toggleGroup=m.getId();l.allowDepress=m.getAllowDepress()}}l.addCls(m.itemCls+m._getClsSuffix());m._syncItemClasses();Ext.container.Container.prototype.onAdd.call(this,l)},onRemove:function(g){var l=this;g.removeCls(l.itemCls+l._getClsSuffix());l._syncItemClasses();Ext.container.Container.prototype.onRemove.call(this,g)},beforeLayout:function(){if(Ext.isChrome){this.el.dom.offsetWidth}Ext.container.Container.prototype.beforeLayout.call(this)},updateDefaultUI:function(n){var s=this.items,o,q,p;if(this.rendered){Ext.raise("Changing the ui config of a segmented button after render is not supported.")}else{if(s){if(s.items){s=s.items}for(q=0,p=s.length;q<p;q++){o=s[q];if(o.ui==="default"&&n!=="default"&&!o.hasOwnProperty("ui")){s[q].ui=n}}}}},privates:{_getClsSuffix:function(){return this.getVertical()?"-vertical":"-horizontal"},_getFirstCls:function(){return this._firstCls},_getLastCls:function(){return this._lastCls},_lookupButtonByValue:function(v){var t=this.items.items,w=t.length,p=0,q=null,u,s;for(;p<w;p++){s=t[p];u=s.value;if((u!=null)&&u===v){q=s;break}}if(!q&&typeof v==="number"){q=t[v]}return q},_onBeforeItemToggle:function(l,g){if(this.allowMultiple&&this.forceSelection&&!g&&this.getValue().length===1){return false}},_onItemToggle:function(t,x){if(this._isApplyingValue){return}var q=this,s=Ext.Array,u=q.allowMultiple,w=(t.value!=null)?t.value:q.items.indexOf(t),y=q.getValue(),v;if(u){v=s.indexOf(y,w)}if(x){if(u){if(v===-1){y=s.slice(y);y.push(w)}}else{y=w}}else{if(u){if(v>-1){y=s.slice(y);y.splice(v,1)}}else{if(y===w){y=null}}}q.setValue(y);q.fireEvent("toggle",q,t,x)},_syncItemClasses:function(B){var v=this,A,y,t,w,x,C,u,z;if(!B&&!v.rendered){return}A=v._getFirstCls();y=v._middleCls;t=v._getLastCls();w=v.items.items;x=w.length;C=[];for(z=0;z<x;z++){u=w[z];if(!u.hidden){C.push(u)}}x=C.length;for(z=0;z<x;z++){C[z].removeCls([A,y,t])}if(x>1){C[0].addCls(A);for(z=1;z<x-1;z++){C[z].addCls(y)}C[x-1].addCls(t)}}}},0,["segmentedbutton"],["component","box","container","segmentedbutton"],{component:true,box:true,container:true,segmentedbutton:true},["widget.segmentedbutton"],0,[Ext.button,"Segmented"],0));(Ext.cmd.derive("Ext.plugin.Responsive",Ext.mixin.Responsive,{id:"responsive",isPlugin:true,constructor:function(p){var n=this,o=p.cmp,m=Ext.apply({responsiveConfig:o.responsiveConfig,responsiveFormulas:o.responsiveFormulas},p);delete m.cmp;n.cmp=o;n.initConfig(m);if(n.transformed){o.setConfig(n.transformed);n.transformed=null}},init:Ext.emptyFn,privates:{transformInstanceConfig:function(l){var m=Ext.mixin.Responsive.prototype.transformInstanceConfig.call(this,l);if(m.ptype){m=Ext.apply({},m);delete m.ptype}this.transformed=m;var n=Ext.apply({},l);delete n.ptype;delete n.responsiveConfig;delete n.responsiveFormulas;return n},updateResponsiveState:function(){var f=this.getResponsiveState();this.cmp.setConfig(f)}}},1,0,0,0,["plugin.responsive"],0,[Ext.plugin,"Responsive"],0));(Ext.cmd.derive("Ext.plugin.Viewport",Ext.plugin.Responsive,{setCmp:function(f){this.cmp=f;if(f&&!f.isViewport){this.decorate(f);if(f.renderConfigs){f.flushRenderConfigs()}f.setupViewport()}},statics:{decorate:function(f){Ext.applyIf(f.prototype||f,{ariaRole:"application",viewportCls:"x-viewport"});Ext.override(f,{isViewport:true,preserveElOnDestroy:true,initComponent:function(){this.callParent();this.setupViewport()},getSizeModel:function(){var e=Ext.layout.SizeModel.configured;return e.pairsByHeightOrdinal[e.ordinal]},handleViewportResize:function(){var e=this,o=Ext.dom.Element,n=o.getViewportWidth(),p=o.getViewportHeight();if(n!==e.width||p!==e.height){e.setSize(n,p)}},setupViewport:function(){var e=this,l=document.body;if(!l.id){l.id=e.id}l.setAttribute("data-componentid",e.id);if(!e.ariaStaticRoles[e.ariaRole]){l.setAttribute("role",e.ariaRole)}l=e.el=Ext.getBody();Ext.fly(document.documentElement).addCls(e.viewportCls);l.setHeight=l.setWidth=Ext.emptyFn;l.dom.scroll="no";e.allowDomMove=false;e.renderTo=l;if(Ext.supports.Touch){e.addMeta("apple-mobile-web-app-capable","yes")}Ext.getScrollbarSize();e.width=e.height=undefined;e.initialViewportHeight=Ext.Element.getViewportHeight();e.initialViewportWidth=Ext.Element.getViewportWidth()},afterLayout:function(e){if(Ext.supports.Touch){document.body.scrollTop=0}this.callParent([e])},onRender:function(){var m=this,e=m.getOverflowEl(),n=Ext.getBody();m.callParent(arguments);Ext.setViewportScroller(m.getScrollable()||{x:false,y:false,element:n});if(m.getOverflowEl()!==n){n.setStyle("overflow","hidden")}m.width=m.initialViewportWidth;m.height=m.initialViewportHeight;m.initialViewportWidth=m.initialViewportHeight=null},initInheritedState:function(n,o){var e=this,p=Ext.rootInheritedState;if(n!==p){e.initInheritedState(e.inheritedState=p,e.inheritedStateInner=Ext.Object.chain(p))}else{e.callParent([n,o])}},doDestroy:function(){var e=this,n=Ext.rootInheritedState,m;for(m in n){if(m!=="rtl"){delete n[m]}}e.removeUIFromElement();e.el.removeCls(e.baseCls);Ext.fly(document.body.parentNode).removeCls(e.viewportCls);e.callParent()},addMeta:function(n,m){var e=document.createElement("meta");e.setAttribute("name",n);e.setAttribute("content",m);Ext.getHead().appendChild(e)},privates:{applyTargetCls:function(e){var l=this.el;if(l===this.getTargetEl()){this.el.addCls(e)}else{this.callParent([e])}},disableTabbing:function(){var e=this.el;if(e){e.saveTabbableState({skipSelf:true})}},enableTabbing:function(){var e=this.el;if(e){e.restoreTabbableState(true)}}}})}},privates:{updateResponsiveState:function(){this.cmp.handleViewportResize();Ext.plugin.Responsive.prototype.updateResponsiveState.call(this)}}},0,0,0,0,["plugin.viewport"],0,[Ext.plugin,"Viewport"],function(f){f.prototype.decorate=f.decorate}));(Ext.cmd.derive("Ext.resizer.SplitterTracker",Ext.dd.DragTracker,{enabled:true,overlayCls:"x-resizable-overlay",createDragOverlay:function(){var l,g=Ext.dom.Element;l=this.overlay=Ext.getBody().createChild({role:"presentation",cls:this.overlayCls,html:"&#160;"});l.unselectable();l.setSize(g.getDocumentWidth(),g.getDocumentHeight());l.show()},getPrevCmp:function(){var f=this.getSplitter();return f.previousSibling(":not([hidden])")},getNextCmp:function(){var f=this.getSplitter();return f.nextSibling(":not([hidden])")},onBeforeStart:function(u){var e=this,w=e.getPrevCmp(),t=e.getNextCmp(),q=e.getSplitter().collapseEl,v=u.getTarget(),s;if(!w||!t){return false}if(q&&v===q.dom){return false}if(t.collapsed||w.collapsed){return false}e.prevBox=w.getEl().getBox();e.nextBox=t.getEl().getBox();e.constrainTo=s=e.calculateConstrainRegion();if(!s){return false}return s},onMouseDown:function(e,l){Ext.dd.DragTracker.prototype.onMouseDown.call(this,e,l);if(this.mouseIsDown&&this.getSplitter().el.dom===l){Ext.dom.Element.maskIframes()}},onMouseUp:function(e){Ext.dd.DragTracker.prototype.onMouseUp.call(this,e);Ext.dom.Element.unmaskIframes()},onStart:function(e){var l=this.getSplitter();this.createDragOverlay();l.addCls(l.baseCls+"-active")},onResizeKeyDown:function(w){var s=this,e=s.getSplitter(),t=w.getKey(),q=e.orientation==="vertical"?0:1,u=t===w.UP||t===w.LEFT?-1:1,v;if(!s.active&&s.onBeforeStart(w)){Ext.fly(w.target).on("keyup",s.onResizeKeyUp,s);s.triggerStart(w);s.onMouseDown(w);s.startXY=e.getXY();s.lastKeyDownXY=Ext.Array.slice(s.startXY);v=s.easing=new Ext.fx.easing.Linear();v.setStartTime(Ext.Date.now());v.setStartValue(1);v.setEndValue(4);v.setDuration(2000)}if(s.active){s.lastKeyDownXY[q]=Math.round(s.lastKeyDownXY[q]+(u*s.easing.getValue()));s.lastXY=s.lastKeyDownXY;e.setXY(s.getXY("dragTarget"))}},onResizeKeyUp:function(e){this.onMouseUp(e)},calculateConstrainRegion:function(){var x=this,D=x.getSplitter(),w=D.getWidth(),v=D.defaultSplitMin,C=D.orientation,z=x.prevBox,G=x.getPrevCmp(),B=x.nextBox,y=x.getNextCmp(),E,F,A;if(C==="vertical"){A={prevCmp:G,nextCmp:y,prevBox:z,nextBox:B,defaultMin:v,splitWidth:w};E=new Ext.util.Region(z.y,x.getVertPrevConstrainRight(A),z.bottom,x.getVertPrevConstrainLeft(A));F=new Ext.util.Region(B.y,x.getVertNextConstrainRight(A),B.bottom,x.getVertNextConstrainLeft(A))}else{E=new Ext.util.Region(z.y+(G.minHeight||v),z.right,(G.maxHeight?z.y+G.maxHeight:B.bottom-(y.minHeight||v))+w,z.x);F=new Ext.util.Region((y.maxHeight?B.bottom-y.maxHeight:z.y+(G.minHeight||v))-w,B.right,B.bottom-(y.minHeight||v),B.x)}return E.intersect(F)},performResize:function(M,B){var K=this,G=K.getSplitter(),A=G.orientation,J=K.getPrevCmp(),L=K.getNextCmp(),F=G.ownerCt,O=F.query(">[flex]"),N=O.length,E=A==="vertical",e=0,C=E?"width":"height",D=0,I,H;for(;e<N;e++){I=O[e];H=E?I.getWidth():I.getHeight();D+=H;I.flex=H}B=E?B[0]:B[1];if(J){H=K.prevBox[C]+B;if(J.flex){J.flex=H}else{J[C]=H}}if(L){H=K.nextBox[C]-B;if(L.flex){L.flex=H}else{L[C]=H}}F.updateLayout()},endDrag:function(){var f=this;if(f.overlay){f.overlay.destroy();delete f.overlay}Ext.dd.DragTracker.prototype.endDrag.apply(this,arguments)},onEnd:function(e){var n=this,m=n.getSplitter();m.removeCls(m.baseCls+"-active");n.performResize(e,n.getResizeOffset())},onDrag:function(u){var p=this,t=p.getOffset("dragTarget"),e=p.getSplitter(),q=e.getEl(),s=e.orientation;if(s==="vertical"){q.setX(p.startRegion.left+t[0])}else{q.setY(p.startRegion.top+t[1])}},getSplitter:function(){return this.splitter},getVertPrevConstrainRight:function(f){return(f.prevCmp.maxWidth?f.prevBox.x+f.prevCmp.maxWidth:f.nextBox.right-(f.nextCmp.minWidth||f.defaultMin))+f.splitWidth},getVertPrevConstrainLeft:function(f){return f.prevBox.x+(f.prevCmp.minWidth||f.defaultMin)},getVertNextConstrainRight:function(f){return f.nextBox.right-(f.nextCmp.minWidth||f.defaultMin)},getVertNextConstrainLeft:function(f){return(f.nextCmp.maxWidth?f.nextBox.right-f.nextCmp.maxWidth:f.prevBox.x+(f.prevBox.minWidth||f.defaultMin))-f.splitWidth},getResizeOffset:function(){return this.getOffset("dragTarget")}},0,0,0,0,0,0,[Ext.resizer,"SplitterTracker"],0));(Ext.cmd.derive("Ext.dd.DDTarget",Ext.dd.DragDrop,{constructor:function(l,n,m){if(l){this.initTarget(l,n,m)}},getDragEl:Ext.emptyFn,isValidHandleChild:Ext.emptyFn,startDrag:Ext.emptyFn,endDrag:Ext.emptyFn,onDrag:Ext.emptyFn,onDragDrop:Ext.emptyFn,onDragEnter:Ext.emptyFn,onDragOut:Ext.emptyFn,onDragOver:Ext.emptyFn,onInvalidDrop:Ext.emptyFn,onMouseDown:Ext.emptyFn,onMouseUp:Ext.emptyFn,setXConstraint:Ext.emptyFn,setYConstraint:Ext.emptyFn,resetConstraints:Ext.emptyFn,clearConstraints:Ext.emptyFn,clearTicks:Ext.emptyFn,setInitPosition:Ext.emptyFn,setDragElId:Ext.emptyFn,setHandleElId:Ext.emptyFn,setOuterHandleElId:Ext.emptyFn,addInvalidHandleClass:Ext.emptyFn,addInvalidHandleId:Ext.emptyFn,addInvalidHandleType:Ext.emptyFn,removeInvalidHandleClass:Ext.emptyFn,removeInvalidHandleId:Ext.emptyFn,removeInvalidHandleType:Ext.emptyFn,toString:function(){return("DDTarget "+this.id)}},3,0,0,0,0,0,[Ext.dd,"DDTarget"],0));(Ext.cmd.derive("Ext.dd.ScrollManager",Ext.Base,{singleton:true,dirTrans:{up:-1,left:-1,down:1,right:1},constructor:function(){var f=Ext.dd.DragDropManager;f.fireEvents=Ext.Function.createSequence(f.fireEvents,this.onFire,this);f.stopDrag=Ext.Function.createSequence(f.stopDrag,this.onStop,this);this.doScroll=this.doScroll.bind(this);this.ddmInstance=f;this.els={};this.dragEl=null;this.proc={}},onStop:function(l){var e=Ext.dd.ScrollManager;e.dragEl=null;e.clearProc()},triggerRefresh:function(){if(this.ddmInstance.dragCurrent){this.ddmInstance.refreshCache(this.ddmInstance.dragCurrent.groups)}},doScroll:function(){var y=this;if(y.ddmInstance.dragCurrent){var w=y.proc,q=w.el,t=w.component,x=w.el.ddScrollConfig,v=x&&x.increment?x.increment:y.increment,u=x&&"animate" in x?x.animate:y.animate,s=function(){y.triggerRefresh()};if(u){if(u===true){u={callback:s}}else{u.callback=u.callback?Ext.Function.createSequence(u.callback,s):s}}if(t){v=v*y.dirTrans[w.dir];if(w.dir==="up"||w.dir==="down"){t.scrollBy(0,v,u)}else{t.scrollBy(v,0,u)}}else{q.scroll(w.dir,v,u)}if(!u){s()}}},clearProc:function(){var f=this.proc;if(f.id){clearInterval(f.id)}f.id=0;f.el=null;f.dir=""},startProc:function(q,s){var p=this,t=p.proc,u,o;p.clearProc();t.el=q;t.dir=s;u=q.ddScrollConfig?q.ddScrollConfig.ddGroup:undefined;o=(q.ddScrollConfig&&q.ddScrollConfig.frequency)?q.ddScrollConfig.frequency:p.frequency;if(u===undefined||p.ddmInstance.dragCurrent.ddGroup===u){t.id=Ext.interval(p.doScroll,o)}},onFire:function(v,C){var e=this,B,u,x,A,z,w,y;if(C||!e.ddmInstance.dragCurrent){return}if(!e.dragEl||e.dragEl!==e.ddmInstance.dragCurrent){e.dragEl=e.ddmInstance.dragCurrent;e.refreshCache()}B=v.getPoint();u=e.proc;x=e.els;for(A in x){z=x[A];w=z._region;y=z.ddScrollConfig||e;if(w&&w.contains(B)&&z.isScrollable()){if(w.bottom-B.y<=y.vthresh){if(u.el!==z){e.startProc(z,"down")}return}else{if(w.right-B.x<=y.hthresh){if(u.el!==z){e.startProc(z,"right")}return}else{if(B.y-w.top<=y.vthresh){if(u.el!==z){e.startProc(z,"up")}return}else{if(B.x-w.left<=y.hthresh){if(u.el!==z){e.startProc(z,"left")}return}}}}}}e.clearProc()},register:function(l){if(Ext.isArray(l)){for(var m=0,n=l.length;m<n;m++){this.register(l[m])}}else{l=Ext.get(l);this.els[l.id]=l}},unregister:function(l){if(Ext.isArray(l)){for(var m=0,n=l.length;m<n;m++){this.unregister(l[m])}}else{l=Ext.get(l);delete this.els[l.id]}},vthresh:25*(window.devicePixelRatio||1),hthresh:25*(window.devicePixelRatio||1),increment:100,frequency:500,animate:true,animDuration:0.4,ddGroup:undefined,refreshCache:function(){var l=this.els,g;for(g in l){if(typeof l[g]==="object"){l[g]._region=l[g].getRegion()}}}},1,0,0,0,0,0,[Ext.dd,"ScrollManager"],0));(Ext.cmd.derive("Ext.dd.DropTarget",Ext.dd.DDTarget,{constructor:function(g,l){this.el=Ext.get(g);Ext.apply(this,l);if(this.containerScroll){Ext.dd.ScrollManager.register(this.el)}Ext.dd.DDTarget.prototype.constructor.call(this,this.el.dom,this.ddGroup||this.group,{isTarget:true})},containerScroll:false,dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",isTarget:true,isNotifyTarget:true,notifyEnter:function(n,e,m){if(this.overClass){this.el.addCls(this.overClass)}return this.dropAllowed},notifyOver:function(n,e,m){return this.dropAllowed},notifyOut:function(n,e,m){if(this.overClass){this.el.removeCls(this.overClass)}},notifyDrop:function(n,e,m){if(this.overClass){this.el.removeCls(this.overClass)}return false},destroy:function(){if(this.containerScroll){Ext.dd.ScrollManager.unregister(this.el)}Ext.dd.DDTarget.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.dd,"DropTarget"],0));(Ext.cmd.derive("Ext.dd.DragZone",Ext.dd.DragSource,{constructor:function(n,o){var m=this,p;Ext.dd.DragSource.prototype.constructor.call(this,n,o);p=m.containerScroll;if(p){n=m.scrollEl||n;n=Ext.get(n);if(Ext.isObject(p)){n.ddScrollConfig=p}Ext.dd.ScrollManager.register(n)}},getDragData:function(e){return Ext.dd.Registry.getHandleFromEvent(e)},onInitDrag:function(l,g){this.proxy.update(this.dragData.ddel.cloneNode(true));this.onStartDrag(l,g);return true},getRepairXY:function(e){return Ext.fly(this.dragData.ddel).getXY()},destroy:function(){if(this.containerScroll){Ext.dd.ScrollManager.unregister(this.scrollEl||this.el)}Ext.dd.DragSource.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.dd,"DragZone"],0));(Ext.cmd.derive("Ext.dd.Registry",Ext.Base,{singleton:true,constructor:function(){this.elements={};this.handles={};this.autoIdSeed=0},getId:function(m,n){if(typeof m==="string"){return m}var l=m.id;if(!l&&n!==false){l="extdd-"+(++this.autoIdSeed);m.id=l}return l},register:function(o,n){n=n||{};if(typeof o==="string"){o=document.getElementById(o)}n.ddel=o;this.elements[this.getId(o)]=n;if(n.isHandle!==false){this.handles[n.ddel.id]=n}if(n.handles){var p=n.handles,q,s;for(q=0,s=p.length;q<s;q++){this.handles[this.getId(p[q])]=n}}},unregister:function(p){var u=this.getId(p,false),o=this.elements[u],q,s,t;if(o){delete this.elements[u];if(o.handles){q=o.handles;for(s=0,t=q.length;s<t;s++){delete this.handles[this.getId(q[s],false)]}}}},getHandle:function(f){if(typeof f!=="string"){f=f.id}return this.handles[f]},getHandleFromEvent:function(e){var l=e.getTarget();return l?this.handles[l.id]:null},getTarget:function(f){if(typeof f!=="string"){f=f.id}return this.elements[f]},getTargetFromEvent:function(e){var l=e.getTarget();return l?this.elements[l.id]||this.handles[l.id]:null}},1,0,0,0,0,0,[Ext.dd,"Registry"],0));(Ext.cmd.derive("Ext.dd.DropZone",Ext.dd.DropTarget,{getTargetFromEvent:function(e){return Ext.dd.Registry.getTargetFromEvent(e)},onNodeEnter:function(e,p,n,o){},onNodeOver:function(e,p,n,o){return this.dropAllowed},onNodeOut:function(e,p,n,o){},onNodeDrop:function(e,p,n,o){return false},onContainerOver:function(n,e,m){return this.dropNotAllowed},onContainerDrop:function(n,e,m){return false},notifyEnter:function(n,e,m){Ext.dd.DropTarget.prototype.notifyEnter.call(this,n,e,m);return this.dropNotAllowed},notifyOver:function(q,e,n){var p=this,s=p.getTargetFromEvent(e);if(!s){if(p.lastOverNode){p.onNodeOut(p.lastOverNode,q,e,n);p.lastOverNode=null}return p.onContainerOver(q,e,n)}if(p.lastOverNode!==s){if(p.lastOverNode){p.onNodeOut(p.lastOverNode,q,e,n)}p.onNodeEnter(s,q,e,n);p.lastOverNode=s}return p.onNodeOver(s,q,e,n)},notifyOut:function(n,e,m){Ext.dd.DropTarget.prototype.notifyOut.call(this,n,e,m);if(this.lastOverNode){this.onNodeOut(this.lastOverNode,n,e,m);this.lastOverNode=null}},notifyDrop:function(q,u,e){var n=this,t=n.getTargetFromEvent(u),s=t?n.onNodeDrop(t,q,u,e):n.onContainerDrop(q,u,e);if(n.lastOverNode){n.onNodeOut(n.lastOverNode,q,u,e);n.lastOverNode=null}return s},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)}},0,0,0,0,0,0,[Ext.dd,"DropZone"],0));(Ext.cmd.derive("Ext.event.publisher.MouseEnterLeave",Ext.event.publisher.Dom,{type:"mouseEnterLeave"},0,0,0,0,0,0,[Ext.event.publisher,"MouseEnterLeave"],function(l){var g={mouseover:"mouseenter",mouseout:"mouseleave"};if(!Ext.supports.MouseEnterLeave){l.override({handledDomEvents:["mouseover","mouseout"],handledEvents:["mouseenter","mouseleave"],publishDelegatedDomEvent:function(u){var v,s,t,e,f,w;u=this.callParent([u]);v=u.getTarget();s=u.getRelatedTarget();if(s&&Ext.fly(v).contains(s)){return}t=v.id;if(t){e=Ext.cache[t];if(e){f=g[u.type];u=u.chain({type:f});if(e.hasListeners[f]){w=e.events[f];if(w){w=w.directs;if(w){u.setCurrentTarget(e.dom);w.fire(u,u.target)}}}}}}})}l.instance=new l()}));(Ext.cmd.derive("Ext.form.action.Action",Ext.Base,{alternateClassName:"Ext.form.Action",submitEmptyText:true,constructor:function(l){if(l){Ext.apply(this,l)}var g=l.params;if(Ext.isString(g)){this.params=Ext.Object.fromQueryString(g)}},run:Ext.emptyFn,onFailure:function(n){var l=this.form,m=l&&!l.destroying&&!l.destroyed;this.response=n;this.failureType=Ext.form.action.Action.CONNECT_FAILURE;if(m){l.afterAction(this,false)}},processResponse:function(f){this.response=f;if(!f.responseText&&!f.responseXML){return true}return(this.result=this.handleResponse(f))},getUrl:function(){return this.url||this.form.url},getMethod:function(){return(this.method||this.form.method||"POST").toUpperCase()},getParams:function(){return Ext.apply({},this.params,this.form.baseParams)},createCallback:function(){var f=this;return{success:f.onSuccess,failure:f.onFailure,scope:f,timeout:(f.timeout||f.form.timeout)*1000}},statics:{CLIENT_INVALID:"client",SERVER_INVALID:"server",CONNECT_FAILURE:"connect",LOAD_FAILURE:"load"}},1,0,0,0,0,0,[Ext.form.action,"Action",Ext.form,"Action"],0));(Ext.cmd.derive("Ext.form.action.Load",Ext.form.action.Action,{alternateClassName:"Ext.form.Action.Load",type:"load",run:function(){Ext.Ajax.request(Ext.apply(this.createCallback(),{method:this.getMethod(),url:this.getUrl(),headers:this.headers,params:this.getParams()}))},onSuccess:function(o){var p=this.processResponse(o),m=this.form,n=m&&!m.destroying&&!m.destroyed;if(p===true||!p.success||!p.data){this.failureType=Ext.form.action.Action.LOAD_FAILURE;if(n){m.afterAction(this,false)}return}if(n){m.clearInvalid();m.setValues(p.data);m.afterAction(this,true)}},handleResponse:function(n){var p=this.form.reader,o,m;if(p){o=p.read(n);m=o.records&&o.records[0]?o.records[0].data:null;return{success:o.success,data:m}}return Ext.decode(n.responseText)}},0,0,0,0,["formaction.load"],0,[Ext.form.action,"Load",Ext.form.Action,"Load"],0));(Ext.cmd.derive("Ext.form.action.Submit",Ext.form.action.Action,{alternateClassName:"Ext.form.Action.Submit",type:"submit",run:function(){var g=this,l=g.form;if(g.clientValidation===false||l.isValid()){g.doSubmit()}else{g.failureType=Ext.form.action.Action.CLIENT_INVALID;l.afterAction(g,false)}},doSubmit:function(){var p=this,s=Ext.apply(p.createCallback(),{url:p.getUrl(),method:p.getMethod(),headers:p.headers}),q=p.form,o=p.jsonSubmit||q.jsonSubmit,t=o?"jsonData":"params",u;if(q.hasUpload()){u=p.buildForm();s.form=u.formEl;s.isUpload=true}else{s[t]=p.getParams(o)}Ext.Ajax.request(s);if(u){p.cleanup(u)}},cleanup:function(v){var p=v.formEl,q=v.uploadEls,t=v.uploadFields,u=t.length,s,w;for(s=0;s<u;++s){w=t[s];if(!w.clearOnSubmit){w.restoreInput(q[s])}}if(p){Ext.removeNode(p)}},getParams:function(m){var n=false,o=Ext.form.action.Action.prototype.getParams.call(this),p=this.form.getValues(n,n,this.submitEmptyText!==n,m,true);return Ext.apply({},p,o)},buildForm:function(){var v=this,O=[],Q,D,C=v.form,G=v.getParams(),H=[],J=[],E=C.getFields().items,F,B=E.length,P,K,M,L,N,I;for(F=0;F<B;++F){P=E[F];if(P.isFileUpload()){H.push(P)}}for(K in G){if(G.hasOwnProperty(K)){M=G[K];if(Ext.isArray(M)){N=M.length;for(L=0;L<N;L++){O.push(v.getFieldConfig(K,M[L]))}}else{O.push(v.getFieldConfig(K,M))}}}Q={tag:"form",role:"presentation",action:v.getUrl(),method:v.getMethod(),target:v.target?(Ext.isString(v.target)?v.target:Ext.fly(v.target).dom.name):"_self",style:"display:none",cn:O};if(H.length){Q.encoding=Q.enctype="multipart/form-data"}D=Ext.DomHelper.append(Ext.getBody(),Q);B=H.length;for(F=0;F<B;++F){I=H[F].extractFileInput();D.appendChild(I);J.push(I)}return{formEl:D,uploadFields:H,uploadEls:J}},getFieldConfig:function(l,g){return{tag:"input",type:"hidden",name:l,value:Ext.String.htmlEncode(g)}},onSuccess:function(q){var o=this.form,p=o&&!o.destroying&&!o.destroyed,n=true,s=this.processResponse(q);if(s!==true&&!s.success){if(s.errors&&p){o.markInvalid(s.errors)}this.failureType=Ext.form.action.Action.SERVER_INVALID;n=false}if(p){o.afterAction(this,n)}},handleResponse:function(x){var A=this.form,y=A.errorReader,w,C,v,u,z,B;if(y){w=y.read(x);z=w.records;C=[];if(z){for(v=0,u=z.length;v<u;v++){C[v]=z[v].data}}if(C.length<1){C=null}B={success:w.success,errors:C}}else{try{B=Ext.decode(x.responseText)}catch(e){B={success:false,errors:[]}}}return B}},0,0,0,0,["formaction.submit"],0,[Ext.form.action,"Submit",Ext.form.Action,"Submit"],0));(Ext.cmd.derive("Ext.form.action.StandardSubmit",Ext.form.action.Submit,{doSubmit:function(){var f=this.buildForm();f.formEl.submit();this.cleanup(f)}},0,0,0,0,["formaction.standardsubmit"],0,[Ext.form.action,"StandardSubmit"],0));(Ext.cmd.derive("Ext.form.Basic",Ext.util.Observable,{alternateClassName:"Ext.form.BasicForm",taskDelay:10,constructor:function(o,n){var m=this,p;m.owner=o;m.fieldMonitors={validitychange:m.checkValidityDelay,enable:m.checkValidityDelay,disable:m.checkValidityDelay,dirtychange:m.checkDirtyDelay,errorchange:m.checkErrorDelay,scope:m};m.checkValidityTask=new Ext.util.DelayedTask(m.checkValidity,m);m.checkDirtyTask=new Ext.util.DelayedTask(m.checkDirty,m);m.checkErrorTask=new Ext.util.DelayedTask(m.checkError,m);m.monitor=new Ext.container.Monitor({selector:"[isFormField]:not([excludeForm])",scope:m,addHandler:m.onFieldAdd,removeHandler:m.onFieldRemove,invalidateHandler:m.onMonitorInvalidate});m.monitor.bind(o);Ext.apply(m,n);if(Ext.isString(m.paramOrder)){m.paramOrder=m.paramOrder.split(/[\s,|]/)}p=m.reader;if(p&&!p.isReader){if(typeof p==="string"){p={type:p}}m.reader=Ext.createByAlias("reader."+p.type,p)}p=m.errorReader;if(p&&!p.isReader){if(typeof p==="string"){p={type:p}}m.errorReader=Ext.createByAlias("reader."+p.type,p)}Ext.util.Observable.prototype.constructor.call(this)},initialize:function(){this.initialized=true;this.onValidityChange(!this.hasInvalidField())},timeout:30,paramsAsHash:false,waitTitle:"Please Wait...",trackResetOnLoad:false,wasDirty:false,destroy:function(){var g=this,l=g.monitor;if(l){l.unbind();g.monitor=null}g.clearListeners();g.checkValidityTask.cancel();g.checkDirtyTask.cancel();g.checkErrorTask.cancel();g.checkValidityTask=g.checkDirtyTask=g.checkErrorTask=null;Ext.util.Observable.prototype.destroy.call(this)},onFieldAdd:function(f){f.on(this.fieldMonitors);this.onMonitorInvalidate()},onFieldRemove:function(f){f.un(this.fieldMonitors);this.onMonitorInvalidate()},onMonitorInvalidate:function(){if(this.initialized){this.checkValidityDelay()}},getFields:function(){return this.monitor.getItems()},getBoundItems:function(){var f=this._boundItems;if(!f||f.getCount()===0){f=this._boundItems=new Ext.util.MixedCollection();f.addAll(this.owner.query("[formBind]"))}return f},hasInvalidField:function(){return !!this.getFields().findBy(function(l){var n=l.preventMark,m;l.preventMark=true;m=l.isValid();l.preventMark=n;return !m})},isValid:function(){var l=this,g;Ext.suspendLayouts();g=l.getFields().filterBy(function(e){return !e.validate()});Ext.resumeLayouts(true);return g.length<1},checkValidity:function(){var g=this,l;if(g.destroyed){return}l=!g.hasInvalidField();if(l!==g.wasValid){g.onValidityChange(l);g.fireEvent("validitychange",g,l);g.wasValid=l}},checkValidityDelay:function(){var f=this.taskDelay;if(f){this.checkValidityTask.delay(f)}else{this.checkValidity()}},checkError:function(){this.fireEvent("errorchange",this)},checkErrorDelay:function(){var f=this.taskDelay;if(f){this.checkErrorTask.delay(f)}else{this.checkError()}},onValidityChange:function(u){var p=this.getBoundItems(),s,q,t,o;if(p){s=p.items;t=s.length;for(q=0;q<t;q++){o=s[q];if(o.disabled===u){o.setDisabled(!u)}}}},isDirty:function(){return !!this.getFields().findBy(function(f){return f.isDirty()})},checkDirtyDelay:function(){var f=this.taskDelay;if(f){this.checkDirtyTask.delay(f)}else{this.checkDirty()}},checkDirty:function(){var g=this,l;if(g.destroyed){return}l=this.isDirty();if(l!==this.wasDirty){this.fireEvent("dirtychange",this,l);this.wasDirty=l}},hasUpload:function(){return !!this.getFields().findBy(function(f){return f.isFileUpload()})},doAction:function(g,l){if(Ext.isString(g)){g=Ext.ClassManager.instantiateByAlias("formaction."+g,Ext.apply({},l,{form:this}))}if(this.fireEvent("beforeaction",this,g)!==false){this.beforeAction(g);Ext.defer(g.run,100,g)}return this},submit:function(n){n=n||{};var m=this,l;if(n.standardSubmit||m.standardSubmit){l="standardsubmit"}else{l=m.api?"directsubmit":"submit"}return m.doAction(l,n)},load:function(f){return this.doAction(this.api?"directload":"load",f)},updateRecord:function(s){s=s||this._record;if(!s){return this}var t=s.self.fields,q=this.getFieldValues(),v={},w=0,u=t.length,p;for(;w<u;++w){p=t[w].name;if(q.hasOwnProperty(p)){v[p]=q[p]}}s.beginEdit();s.set(v);s.endEdit();return this},loadRecord:function(f){this._record=f;return this.setValues(f.getData())},getRecord:function(){return this._record},beforeAction:function(x){var u=this,y=x.waitMsg,A="x-mask-loading",w=u.getFields().items,v,f=w.length,t,z;for(v=0;v<f;v++){t=w[v];if(t.isFormField&&t.syncValue){t.syncValue()}}if(y){z=u.waitMsgTarget;if(z===true){u.owner.el.mask(y,A)}else{if(z){z=u.waitMsgTarget=Ext.get(z);z.mask(y,A)}else{u.floatingAncestor=u.owner.up("[floating]");if(u.floatingAncestor){u.savePreventFocusOnActivate=u.floatingAncestor.preventFocusOnActivate;u.floatingAncestor.preventFocusOnActivate=true}Ext.MessageBox.wait(y,x.waitTitle||u.waitTitle)}}}},afterAction:function(p,n){var s=this;if(p.waitMsg){var q=Ext.MessageBox,o=s.waitMsgTarget;if(o===true){s.owner.el.unmask()}else{if(o){o.unmask()}else{q.hide()}}}if(s.floatingAncestor){s.floatingAncestor.preventFocusOnActivate=s.savePreventFocusOnActivate}if(n){if(p.reset){s.reset()}Ext.callback(p.success,p.scope||p,[s,p]);s.fireEvent("actioncomplete",s,p)}else{Ext.callback(p.failure,p.scope||p,[s,p]);s.fireEvent("actionfailed",s,p)}},findField:function(f){return this.getFields().findBy(function(e){return e.id===f||e.name===f||e.dataIndex===f})},markInvalid:function(v){var e=this,x,u,t,y,s;function w(l,f){var g=e.findField(l);if(g){g.markInvalid(f)}}if(Ext.isArray(v)){u=v.length;for(x=0;x<u;x++){t=v[x];w(t.id||t.field,t.msg||t.message)}}else{if(v instanceof Ext.data.ErrorCollection){u=v.items.length;for(x=0;x<u;x++){t=v.items[x];w(t.field,t.message)}}else{for(s in v){if(v.hasOwnProperty(s)){y=v[s];w(s,y,v)}}}}return this},setValues:function(s){var p=this,t,q,u;function o(g,e){var f=p.findField(g);if(f){f.setValue(e);if(p.trackResetOnLoad){f.resetOriginalValue()}}}Ext.suspendLayouts();if(Ext.isArray(s)){q=s.length;for(t=0;t<q;t++){u=s[t];o(u.id,u.value)}}else{Ext.iterate(s,o)}Ext.resumeLayouts(true);return this},getValues:function(M,L,H,J,D){var I={},z=this.getFields().items,G=z.length,A=Ext.isArray,K,B,C,E,F,f;for(f=0;f<G;f++){K=z[f];if(!L||K.isDirty()){B=K[J?"getModelData":"getSubmitData"](H,D);if(Ext.isObject(B)){for(F in B){if(B.hasOwnProperty(F)){C=B[F];if(H&&C===""){C=K.emptyText||""}if(!K.isRadio){if(K.isCheckbox&&C===null){continue}if(I.hasOwnProperty(F)){E=I[F];if(!A(E)){E=I[F]=[E]}if(A(C)){I[F]=E.concat(C)}else{E.push(C)}}else{I[F]=C}}else{I[F]=I[F]||C}}}}}}if(M){I=Ext.Object.toQueryString(I)}return I},getFieldValues:function(f){return this.getValues(false,f,false,true)},clearInvalid:function(){Ext.suspendLayouts();var o=this,p=o.getFields().items,n,f=p.length;for(n=0;n<f;n++){p[n].clearInvalid()}Ext.resumeLayouts(true);return o},reset:function(p){Ext.suspendLayouts();var o=this,q=o.getFields().items,f,s=q.length;for(f=0;f<s;f++){q[f].reset()}Ext.resumeLayouts(true);if(p===true){delete o._record}return o},applyToFields:function(n){var p=this.getFields().items,o,f=p.length;for(o=0;o<f;o++){Ext.apply(p[o],n)}return this},applyIfToFields:function(n){var p=this.getFields().items,o,f=p.length;for(o=0;o<f;o++){Ext.applyIf(p[o],n)}return this}},1,0,0,0,0,0,[Ext.form,"Basic",Ext.form,"BasicForm"],0));(Ext.cmd.derive("Ext.layout.container.CheckboxGroup",Ext.layout.container.Container,{autoFlex:true,type:"checkboxgroup",createsInnerCt:true,childEls:["innerCt"],renderTpl:'<table id="{ownerId}-innerCt" data-ref="innerCt" class="x-table-plain" cellpadding="0"role="presentation" style="{tableStyle}"><tbody role="presentation"><tr role="presentation"><tpl for="columns"><td class="{parent.colCls}" valign="top" style="{style}" role="presentation">{% this.renderColumn(out,parent,xindex-1) %}</td></tpl></tr></tbody></table>',lastOwnerItemsGeneration:null,initLayout:function(){var g=this,l=g.owner;g.columnsArray=Ext.isArray(l.columns);g.autoColumns=!l.columns||l.columns==="auto";if(!g.autoColumns){g.vertical=l.vertical||(l.columns===1||l.columns.length===1)}Ext.layout.container.Container.prototype.initLayout.call(this)},beginLayout:function(B){var u=this,y,z,w,C,v,x=0,D=0,E=u.autoFlex,A=u.innerCt.dom.style;Ext.layout.container.Container.prototype.beginLayout.apply(this,arguments);y=u.rowNodes[0].children;B.innerCtContext=B.getEl("innerCt",u);if(!B.widthModel.shrinkWrap){z=y.length;if(u.columnsArray){for(w=0;w<z;w++){C=u.owner.columns[w];if(C<1){x+=C;D++}}for(w=0;w<z;w++){C=u.owner.columns[w];if(C<1){v=((C/x)*100)+"%"}else{v=C+"px"}y[w].style.width=v}}else{for(w=0;w<z;w++){v=E?(1/z*100)+"%":"";y[w].style.width=v;D++}}if(!D){A.tableLayout="fixed";A.width=""}else{if(D<z){A.tableLayout="fixed";A.width="100%"}else{A.tableLayout="auto";if(E){A.width="100%"}else{A.width=""}}}}else{A.tableLayout="auto";A.width=""}},cacheElements:function(){var f=this;Ext.layout.container.Container.prototype.cacheElements.call(this);f.rowNodes=f.innerCt.query("tr",true);f.tBodyNode=f.rowNodes[0].parentNode},calculate:function(x){var q=this,t,u,w,v,s,y;if(!x.getDomProp("containerChildrenSizeDone")){q.done=false}else{t=x.innerCtContext;u=x.widthModel.shrinkWrap;w=x.heightModel.shrinkWrap;v=w||u;s=t.el.dom;y=v&&t.getPaddingInfo();if(u){x.setContentWidth(s.offsetWidth+y.width,true)}if(w){x.setContentHeight(s.offsetHeight+y.height,true)}}},doRenderColumn:function(B,H,z){var x=H.$layout,C=x.owner,A=H.columnCount,y=C.items.items,D=y.length,G,E,w,I,F;if(C.vertical){w=Math.ceil(D/A);E=z*w;D=Math.min(D,E+w);I=1}else{E=z;I=A}for(;E<D;E+=I){G=y[E];x.configureItem(G);F=G.getRenderTree();Ext.DomHelper.generateMarkup(F,B)}},getColumnCount:function(){var m=this,n=m.owner,l=n.columns;if(m.columnsArray){return l.length}if(Ext.isNumber(l)){return l}return n.items.length},getItemSizePolicy:function(f){return this.autoSizePolicy},getRenderData:function(){var u=this,x=Ext.layout.container.Container.prototype.getRenderData.call(this),B=u.owner,w,z=u.getColumnCount(),C,A,v,E=u.autoFlex,y=0,D=0;if(u.columnsArray){for(w=0;w<z;w++){C=u.owner.columns[w];if(C<1){y+=C;D++}}}x.colCls=B.groupCls;x.columnCount=z;x.columns=[];for(w=0;w<z;w++){A=(x.columns[w]={});if(u.columnsArray){C=u.owner.columns[w];if(C<1){v=((C/y)*100)+"%"}else{v=C+"px"}A.style="width:"+v}else{A.style="width:"+(1/z*100)+"%";D++}}x.tableStyle=!D?"table-layout:fixed;":(D<z)?"table-layout:fixed;width:100%":(E)?"table-layout:auto;width:100%":"table-layout:auto;";return x},isValidParent:Ext.returnTrue,setupRenderTpl:function(f){Ext.layout.container.Container.prototype.setupRenderTpl.apply(this,arguments);f.renderColumn=this.doRenderColumn},renderChildren:function(){var l=this,g=l.owner.items.generation;if(l.lastOwnerItemsGeneration!==g){l.lastOwnerItemsGeneration=g;l.renderItems(l.getLayoutItems())}},renderItems:function(w){var v=this,A=w.length,s,t,y,u,x,z;if(A){Ext.suspendLayouts();if(v.autoColumns){y=A;t=1}else{y=v.columnsArray?v.owner.columns.length:v.owner.columns;t=Math.ceil(A/y)}for(z=0;z<A;z++){s=w[z];u=v.getRenderRowIndex(z,t,y);x=v.getRenderColumnIndex(z,t,y);if(!s.rendered){v.renderItem(s,u,x)}else{if(!v.isItemAtPosition(s,u,x)){v.moveItem(s,u,x)}}}v.pruneRows(t,y);Ext.resumeLayouts(true)}},isItemAtPosition:function(m,l,n){return m.el.dom===this.getItemNodeAt(l,n)},getRenderColumnIndex:function(m,n,l){if(this.vertical){return Math.floor(m/n)}else{return m%l}},getRenderRowIndex:function(m,n,l){if(this.vertical){return m%n}else{return Math.floor(m/l)}},getItemNodeAt:function(l,m){var n=this.getColumnNodeAt(l,m);return this.vertical?n.children[l]:n.children[0]},getRowNodeAt:function(l){var n=this,m;l=n.vertical?0:l;m=n.rowNodes[l];if(!m){m=n.rowNodes[l]=document.createElement("tr");m.role="presentation";n.tBodyNode.appendChild(m)}return m},getColumnNodeAt:function(m,o,n){var p;n=n||this.getRowNodeAt(m);p=n.children[o];if(!p){p=Ext.fly(n).appendChild({tag:"td",cls:this.owner.groupCls,vAlign:"top",role:"presentation"},true)}return p},pruneRows:function(u,w){var v=this,s=v.tBodyNode.children,z,t,A,x,y;u=v.vertical?1:u;while(s.length>u){t=s[s.length-1];t.parentNode.removeChild(t)}for(x=u-1;x>=0;x--){t=s[x];z=t.children;while(z.length>w){A=z[z.length-1];t.removeChild(A)}if(x>0){for(y=z.length-1;y>=0;y--){A=z[y];if(A.children.length===0){t.removeChild(A)}else{break}}}}},renderItem:function(o,u,q){var p=this,s,t;p.configureItem(o);t=p.vertical?u:0;s=Ext.get(p.getColumnNodeAt(u,q));o.render(s,t)},moveItem:function(p,v,s){var q=this,t,u,w;u=q.vertical?v:0;t=q.getColumnNodeAt(v,s);w=t.children[u];t.insertBefore(p.el.dom,w||null)}},0,0,0,0,["layout.checkboxgroup"],0,[Ext.layout.container,"CheckboxGroup"],0));(Ext.cmd.derive("Ext.form.CheckboxManager",Ext.util.MixedCollection,{singleton:true,getByName:function(l,g){return this.filterBy(function(e){return e.name===l&&e.getFormId()===g})}},0,0,0,0,0,0,[Ext.form,"CheckboxManager"],0));(Ext.cmd.derive("Ext.form.field.Checkbox",Ext.form.field.Base,{alternateClassName:"Ext.form.Checkbox",stretchInputElFixed:false,childEls:["boxLabelEl","innerWrapEl","displayEl"],fieldSubTpl:['<div id="{cmpId}-innerWrapEl" data-ref="innerWrapEl" role="presentation"',' class="{wrapInnerCls}">','<tpl if="labelAlignedBefore">',"{beforeBoxLabelTpl}",'<label id="{cmpId}-boxLabelEl" data-ref="boxLabelEl" {boxLabelAttrTpl} class="{boxLabelCls} ','{boxLabelCls}-{ui} {boxLabelCls}-{boxLabelAlign} {noBoxLabelCls} {childElCls}" for="{id}">',"{beforeBoxLabelTextTpl}","{boxLabel}","{afterBoxLabelTextTpl}","</label>","{afterBoxLabelTpl}","</tpl>",'<span id="{cmpId}-displayEl" data-ref="displayEl" role="presentation" class="{fieldCls} {typeCls} ','{typeCls}-{ui} {inputCls} {inputCls}-{ui} {childElCls} {afterLabelCls}">','<input type="{inputType}" id="{id}" name="{inputName}" data-ref="inputEl" {inputAttrTpl}','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="checked"> checked="checked"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{checkboxCls}" autocomplete="off" hidefocus="true" ','<tpl foreach="ariaElAttributes"> {$}="{.}"</tpl>','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>',"/>","</span>",'<tpl if="!labelAlignedBefore">',"{beforeBoxLabelTpl}",'<label id="{cmpId}-boxLabelEl" data-ref="boxLabelEl" {boxLabelAttrTpl} class="{boxLabelCls} ','{boxLabelCls}-{ui} {boxLabelCls}-{boxLabelAlign} {noBoxLabelCls} {childElCls}" for="{id}">',"{beforeBoxLabelTextTpl}","{boxLabel}","{afterBoxLabelTextTpl}","</label>","{afterBoxLabelTpl}","</tpl>","</div>",{disableFormats:true,compiled:true}],publishes:{checked:1},subTplInsertions:["beforeBoxLabelTpl","afterBoxLabelTpl","beforeBoxLabelTextTpl","afterBoxLabelTextTpl","boxLabelAttrTpl","inputAttrTpl"],isCheckbox:true,focusCls:"form-checkbox-focus",fieldBodyCls:"x-form-cb-wrap",checked:false,checkedCls:"x-form-cb-checked",boxLabelCls:"x-form-cb-label",boxLabelAlign:"after",afterLabelCls:"x-form-cb-after",wrapInnerCls:"x-form-cb-wrap-inner",noBoxLabelCls:"x-form-cb-no-box-label",inputValue:"on",checkChangeEvents:[],changeEventName:"change",inputType:"checkbox",isTextInput:false,ariaRole:"native",onRe:/^on$/i,inputCls:"x-form-cb",_checkboxCls:"x-form-cb-input",initComponent:function(){var l=this,g=l.value;if(g!==undefined){l.checked=l.isChecked(g,l.inputValue)}Ext.form.field.Base.prototype.initComponent.call(this);l.getManager().add(l)},initDefaultName:Ext.emptyFn,initValue:function(){var g=this,l=!!g.checked;g.originalValue=g.initialValue=g.lastValue=l;g.setValue(l)},getElConfig:function(){var f=this;if(f.isChecked(f.rawValue,f.inputValue)){f.addCls(f.checkedCls)}if(!f.fieldLabel){f.skipLabelForAttribute=true}return Ext.form.field.Base.prototype.getElConfig.call(this)},getModelData:function(){var f=Ext.form.field.Base.prototype.getModelData.apply(this,arguments);if(f){f[this.getName()]=this.getSubmitValue()}return f},getSubTplData:function(t){var q=this,s=q.boxLabel,v=q.boxLabelAlign,w=v==="before",p,u;p=Ext.apply(Ext.form.field.Base.prototype.getSubTplData.call(this,t),{inputType:q.inputType,checkboxCls:q._checkboxCls,disabled:q.readOnly||q.disabled,checked:!!q.checked,wrapInnerCls:q.wrapInnerCls,boxLabel:s,boxLabelCls:q.boxLabelCls,boxLabelAlign:v,labelAlignedBefore:w,afterLabelCls:w?q.afterLabelCls:"",noBoxLabelCls:!s?q.noBoxLabelCls:"",inputName:q.name||q.id});u=p.inputElAriaAttributes;if(u){delete u["aria-readonly"]}return p},initEvents:function(){var f=this;Ext.form.field.Base.prototype.initEvents.call(this);f.inputEl.on(f.changeEventName,f.onChangeEvent,f,{delegated:false});if(Ext.isIE){f.bodyEl.on("mousedown",f.onBodyElMousedown,f)}else{if(Ext.isMac&&(Ext.isGecko||Ext.isSafari)){f.boxLabelEl.on("mousedown",f.onBoxLabelOrInputMousedown,f);f.inputEl.on("mousedown",f.onBoxLabelOrInputMousedown,f)}}},setBoxLabel:function(l){var g=this;g.boxLabel=l;if(g.rendered){g.boxLabelEl.setHtml(l);g.boxLabelEl[l?"removeCls":"addCls"](g.noBoxLabelCls);g.updateLayout()}},onBodyElMousedown:function(e){if(e.target!==this.inputEl.dom){e.preventDefault()}},onBoxLabelOrInputMousedown:function(e){this.inputEl.focus();e.preventDefault()},onChangeEvent:function(e){this.updateValueFromDom()},updateValueFromDom:function(){var l=this,g=l.inputEl&&l.inputEl.dom;if(g){l.checked=l.rawValue=l.value=g.checked;l.checkChange()}},updateCheckedCls:function(g){var l=this;g=g!=null?g:l.getValue();l[g?"addCls":"removeCls"](l.checkedCls)},getRawValue:function(){var f=this.inputEl&&this.inputEl.dom;return f?f.checked:this.checked},getValue:function(){var f=this.inputEl&&this.inputEl.dom;return f?f.checked:this.checked},getSubmitValue:function(){var l=this.uncheckedValue,g=Ext.isDefined(l)?l:null;return this.getValue()?this.inputValue:g},isChecked:function(l,n){var m=false;if(l===true||l==="true"){m=true}else{if(n!=="on"&&(n||n===0)&&(Ext.isString(l)||Ext.isNumber(l))){m=l==n}else{m=l==="1"||l===1||this.onRe.test(l)}}return m},setRawValue:function(n){var o=this,m=o.inputEl&&o.inputEl.dom,p=o.isChecked(n,o.inputValue);if(m){o.duringSetRawValue=true;m.checked=p;o.duringSetRawValue=false;o.updateCheckedCls(p)}o.checked=o.rawValue=p;if(!o.duringSetValue){o.lastValue=p}return p},setValue:function(u){var o=this,q,s,t,p;if(Ext.isArray(u)){q=o.getManager().getByName(o.name,o.getFormId()).items;t=q.length;for(s=0;s<t;++s){p=q[s];p.setValue(Ext.Array.contains(u,p.inputValue))}}else{o.duringSetValue=true;Ext.form.field.Base.prototype.setValue.apply(this,arguments);delete o.duringSetValue}return o},valueToRaw:Ext.identityFn,onChange:function(o,p){var m=this,n=m.handler;m.updateCheckedCls(o);if(n){Ext.callback(n,m.scope,[m,o],0,m)}Ext.form.field.Base.prototype.onChange.apply(this,arguments);if(m.reference&&m.publishState){m.publishState("checked",o)}},resetOriginalValue:function(s){var u=this,p,o,t,q;if(!s){p=u.getManager().getByName(u.name,u.getFormId()).items;t=p.length;for(q=0;q<t;++q){o=p[q];if(o!==u){p[q].resetOriginalValue(true)}}}Ext.form.field.Base.prototype.resetOriginalValue.call(this)},doDestroy:function(){this.getManager().removeAtKey(this.id);Ext.form.field.Base.prototype.doDestroy.call(this)},getManager:function(){return Ext.form.CheckboxManager},onEnable:function(){var l=this,g=l.inputEl&&l.inputEl.dom;Ext.form.field.Base.prototype.onEnable.call(this);if(g){g.disabled=l.readOnly}},setReadOnly:function(l){var n=this,m=n.inputEl&&n.inputEl.dom;if(m){m.disabled=!!l||n.disabled}Ext.form.field.Base.prototype.setReadOnly.apply(this,arguments)},getFormId:function(){var g=this,l;if(!g.formId){l=g.up("form");if(l){g.formId=l.id}}return g.formId},getFocusClsEl:function(){return this.displayEl}},0,["checkbox","checkboxfield"],["component","box","field","checkboxfield","checkbox"],{component:true,box:true,field:true,checkboxfield:true,checkbox:true},["widget.checkbox","widget.checkboxfield"],0,[Ext.form.field,"Checkbox",Ext.form,"Checkbox"],0));Ext.define("Ext.theme.triton.form.field.Checkbox",{override:"Ext.form.field.Checkbox",compatibility:Ext.isIE8,initComponent:function(){(arguments.callee.$previous||Ext.form.field.Base.prototype.initComponent).call(this);Ext.on({show:"onGlobalShow",scope:this})},onFocus:function(e){var l;(arguments.callee.$previous||Ext.form.field.Base.prototype.onFocus).call(this,e);l=this.getFocusClsEl();if(l){l.syncRepaint()}},onBlur:function(e){var l;(arguments.callee.$previous||Ext.form.field.Base.prototype.onBlur).call(this,e);l=this.getFocusClsEl();if(l){l.syncRepaint()}},onGlobalShow:function(f){if(f.isAncestor(this)){this.getFocusClsEl().syncRepaint()}}});(Ext.cmd.derive("Ext.form.CheckboxGroup",Ext.form.FieldContainer,{isCheckboxGroup:true,columns:"auto",vertical:false,allowBlank:true,blankText:"You must select at least one item in this group",defaultType:"checkboxfield",defaultBindProperty:"value",groupCls:"x-form-check-group",extraFieldBodyCls:"x-form-checkboxgroup-body",layout:"checkboxgroup",componentCls:"x-form-checkboxgroup",ariaRole:"group",ariaEl:"containerEl",skipLabelForAttribute:true,ariaRenderAttributes:{"aria-invalid":false},initComponent:function(){var f=this;f.name=f.name||f.id;Ext.form.FieldContainer.prototype.initComponent.call(this);f.initField()},initRenderData:function(){var w=this,v,t,q,s,u,p;v=Ext.form.FieldContainer.prototype.initRenderData.call(this);v.inputId=w.id+"-"+w.ariaEl;t=v.ariaAttributes;if(t){if(!t["aria-labelledby"]){t["aria-labelledby"]=w.id+"-labelTextEl"}}return v},initValue:function(){var g=this,l=g.value;g.originalValue=g.lastValue=l||g.getValue();if(l){g.setValue(l)}},onAdd:function(n){var o=this,q,s,p;if(n.isCheckbox){if(n.name==null){n.name=o.name}o.mon(n,"change",o.checkChange,o)}else{if(n.isContainer){q=n.items.items;for(p=0,s=q.length;p<s;p++){o.onAdd(q[p])}}}Ext.form.FieldContainer.prototype.onAdd.apply(this,arguments)},onRemove:function(n){var o=this,q,s,p;if(n.isCheckbox){o.mun(n,"change",o.checkChange,o)}else{if(n.isContainer){q=n.items.items;for(p=0,s=q.length;p<s;p++){o.onRemove(q[p])}}}Ext.form.FieldContainer.prototype.onRemove.apply(this,arguments)},isEqual:function(m,n){var l=Ext.Object.toQueryString;return l(m)===l(n)},getErrors:function(){var f=[];if(!this.allowBlank&&Ext.isEmpty(this.getChecked())){f.push(this.blankText)}return f},getBoxes:function(f){return this.query("[isCheckbox]"+(f||""))},eachBox:function(g,l){Ext.Array.forEach(this.getBoxes(),g,l||this)},getChecked:function(){return this.getBoxes("[checked]")},isDirty:function(){var m=this.getBoxes(),n,l=m.length;for(n=0;n<l;n++){if(m[n].isDirty()){return true}}},setReadOnly:function(m){var o=this.getBoxes(),p,n=o.length;for(p=0;p<n;p++){o[p].setReadOnly(m)}this.readOnly=m},reset:function(){var l=this,m=l.hasActiveError(),n=l.preventMark;l.preventMark=true;l.batchChanges(function(){var e=l.getBoxes(),f,g=e.length;for(f=0;f<g;f++){e[f].reset()}});l.preventMark=n;l.unsetActiveError();if(m){l.updateLayout()}},resetOriginalValue:function(){var n=this,o=n.getBoxes(),p,m=o.length;for(p=0;p<m;p++){o[p].resetOriginalValue()}n.originalValue=n.getValue();n.checkDirty()},setValue:function(y){var q=this,t=q.getBoxes(),w,v=t.length,s,u,x;q.batchChanges(function(){Ext.suspendLayouts();for(w=0;w<v;w++){s=t[w];u=s.getName();x=false;if(y){if(Ext.isArray(y[u])){x=Ext.Array.contains(y[u],s.inputValue)}else{x=y[u]}}s.setValue(x)}Ext.resumeLayouts(true)});return q},getValue:function(){var t={},q=this.getBoxes(),u,w=q.length,y,s,v,x;for(u=0;u<w;u++){y=q[u];s=y.getName();v=y.inputValue;if(y.getValue()){if(t.hasOwnProperty(s)){x=t[s];if(!Ext.isArray(x)){x=t[s]=[x]}x.push(v)}else{t[s]=v}}}return t},getSubmitData:function(){return null},getModelData:function(){return null},validate:function(){var p=this,m,n,o;if(p.disabled){n=true}else{m=p.getErrors();n=Ext.isEmpty(m);o=p.wasValid;if(n){p.unsetActiveError()}else{p.setActiveError(m)}}if(n!==o){p.wasValid=n;p.fireEvent("validitychange",p,n);p.updateLayout()}return n}},0,["checkboxgroup"],["component","box","container","fieldcontainer","checkboxgroup"],{component:true,box:true,container:true,fieldcontainer:true,checkboxgroup:true},["widget.checkboxgroup"],[["field",Ext.form.field.Field]],[Ext.form,"CheckboxGroup"],function(){this.borrow(Ext.form.field.Base,["markInvalid","clearInvalid","setError"])}));(Ext.cmd.derive("Ext.form.FieldSet",Ext.container.Container,{checkboxUI:"default",collapsed:false,toggleOnTitleClick:true,baseCls:"x-fieldset",layout:"anchor",descriptionText:"{0} field set",expandText:"Expand field set",componentLayout:"fieldset",ariaRole:"group",focusable:false,autoEl:"fieldset",checkbox:null,childEls:["body"],renderTpl:["{%this.renderLegend(out,values);%}",'<div id="{id}-body" data-ref="body" class="{baseCls}-body {baseCls}-body-{ui} {bodyTargetCls}" ','role="presentation"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{%this.renderContainer(out,values);%}","</div>"],stateEvents:["collapse","expand"],maskOnDisable:false,initComponent:function(){var g=this,l=g.baseCls;if(g.ariaRole&&!g.ariaLabel){g.ariaLabel=Ext.String.formatEncode(g.descriptionText,g.title||"")}g.ariaRenderAttributes=g.ariaRenderAttributes||{};g.ariaRenderAttributes["aria-expanded"]=!g.collapsed;g.initFieldAncestor();Ext.container.Container.prototype.initComponent.call(this);g.layout.managePadding=g.layout.manageOverflow=false;if(g.collapsed){g.addCls(l+"-collapsed");g.collapse()}if(g.title||g.checkboxToggle||g.collapsible){g.addTitleClasses();g.legend=g.createLegendCt()}g.initMonitor()},initRenderData:function(){var l=this,g=Ext.container.Container.prototype.initRenderData.call(this);g.bodyTargetCls=l.bodyTargetCls;l.protoBody.writeTo(g);delete l.protoBody;return g},doDestroy:function(){var g=this,l=g.legend;if(l){delete l.ownerCt;l.destroy();g.legend=null}Ext.container.Container.prototype.doDestroy.call(this)},getState:function(){var f=Ext.container.Container.prototype.getState.call(this);f=this.addPropertyToState(f,"collapsed");return f},afterCollapse:Ext.emptyFn,afterExpand:Ext.emptyFn,collapsedHorizontal:function(){return true},collapsedVertical:function(){return true},createLegendCt:function(){var n=this,p=[],m={baseCls:n.baseCls+"-header",layout:"container",ui:n.ui,id:n.id+"-legend",autoEl:"legend",ariaRole:null,items:p,ownerCt:n,shrinkWrap:true,ownerLayout:n.componentLayout},o;if(n.checkboxToggle){p.push(n.createCheckboxCmp())}else{if(n.collapsible){p.push(n.createToggleCmp())}}p.push(n.createTitleCmp());o=new Ext.container.Container(m);return o},createTitleCmp:function(){var g=this,l={html:g.title,ui:g.ui,cls:g.baseCls+"-header-text",id:g.id+"-legendTitle",ariaRole:"presentation"};if(g.collapsible&&g.toggleOnTitleClick){l.listeners={click:{element:"el",scope:g,fn:g.toggle}};l.cls+=" "+g.baseCls+"-header-text-collapsible"}g.titleCmp=new Ext.Component(l);return g.titleCmp},createCheckboxCmp:function(){var o=this,m="-checkbox",p=o.baseCls+"-header"+m,n;p+=" "+p+"-"+o.ui;o.checkboxCmp=n=new Ext.form.field.Checkbox(Ext.apply({hideEmptyLabel:true,name:o.checkboxName||o.id+m,cls:p,id:o.id+"-legendChk",ui:o.checkboxUI,checked:!o.collapsed,msgTarget:"none",listeners:{change:o.onCheckChange,scope:o},ariaLabel:o.expandText},o.checkbox));return n},createToggleCmp:function(){var l=this,g;l.toggleCmp=g=new Ext.panel.Tool({cacheHeight:false,cls:l.baseCls+"-header-tool-"+l.ui,type:"toggle",handler:l.toggle,id:l.id+"-legendToggle",scope:l,ariaRole:"checkbox",ariaLabel:l.expandText,ariaRenderAttributes:{"aria-checked":!l.collapsed}});return g},doRenderLegend:function(q,n){var o=n.$comp,p=o.legend,s;if(p){p.ownerLayout.configureItem(p);o.setLegendCollapseImmunity(p);s=p.getRenderTree();Ext.DomHelper.generateMarkup(s,q)}},getCollapsed:function(){return this.collapsed?"top":false},getCollapsedDockedItems:function(){var f=this.legend;return f?[f]:[]},setTitle:function(l){var m=this,n=m.legend;m.title=l;m.ariaLabel=Ext.String.formatEncode(m.descriptionText,l||"");if(m.rendered){if(!n){m.legend=n=m.createLegendCt();m.addTitleClasses();n.ownerLayout.configureItem(n);m.setLegendCollapseImmunity(n);n.render(m.el,0)}m.titleCmp.update(l);m.ariaEl.dom.setAttribute("aria-label",m.ariaLabel)}else{if(n){m.titleCmp.update(l)}else{m.addTitleClasses();m.legend=m.createLegendCt()}}return m},addTitleClasses:function(){var m=this,l=m.title,n=m.baseCls;if(l){m.addCls(n+"-with-title")}if(l||m.checkboxToggle||m.collapsible){m.addCls(n+"-with-legend")}},expand:function(){return this.setExpanded(true)},collapse:function(){return this.setExpanded(false)},setCollapsed:function(f){this.setExpanded(!f)},setExpanded:function(q){var p=this,o=p.checkboxCmp,n=p.toggleCmp,s=q?"expand":"collapse";if(!p.rendered||p.fireEvent("before"+s,p)!==false){q=!!q;if(o){o.setValue(q)}else{if(n&&n.ariaEl.dom){n.ariaEl.dom.setAttribute("aria-checked",q)}}if(q){p.removeCls(p.baseCls+"-collapsed")}else{p.addCls(p.baseCls+"-collapsed")}if(p.ariaEl.dom){p.ariaEl.dom.setAttribute("aria-expanded",!!q)}p.collapsed=!q;if(q){delete p.getInherited().collapsed}else{p.getInherited().collapsed=true}if(p.rendered){p.updateLayout({isRoot:false});p.fireEvent(s,p)}}return p},getRefItems:function(n){var l=Ext.container.Container.prototype.getRefItems.apply(this,arguments),m=this.legend;if(m){l.unshift(m);if(n){l.unshift.apply(l,m.getRefItems(true))}}return l},toggle:function(){this.setExpanded(!!this.collapsed)},privates:{applyTargetCls:function(f){this.bodyTargetCls=f},finishRender:function(){var f=this.legend;Ext.container.Container.prototype.finishRender.call(this);if(f){f.finishRender()}},getProtoBody:function(){var g=this,l=g.protoBody;if(!l){g.protoBody=l=new Ext.util.ProtoElement({styleProp:"bodyStyle",styleIsText:true})}return l},getDefaultContentTarget:function(){return this.body},getTargetEl:function(){return this.body||this.frameBody||this.el},initPadding:function(n){var p=this,s=p.getProtoBody(),o=p.padding,q;if(o!==undefined){if(Ext.isIE8){o=p.parseBox(o);q=Ext.Element.parseBox(0);q.top=o.top;o.top=0;s.setStyle("padding",p.unitizeBox(q))}n.setStyle("padding",p.unitizeBox(o))}},onCheckChange:function(g,l){this.setExpanded(l)},setLegendCollapseImmunity:function(f){f.collapseImmune=true;f.getInherited().collapseImmune=true},setupRenderTpl:function(f){Ext.container.Container.prototype.setupRenderTpl.apply(this,arguments);f.renderLegend=this.doRenderLegend}}},0,["fieldset"],["component","box","container","fieldset"],{component:true,box:true,container:true,fieldset:true},["widget.fieldset"],[["fieldAncestor",Ext.form.FieldAncestor]],[Ext.form,"FieldSet"],0));(Ext.cmd.derive("Ext.form.Label",Ext.Component,{autoEl:"label",maskOnDisable:false,getElConfig:function(){var f=this;f.html=f.text?Ext.util.Format.htmlEncode(f.text):(f.html||"");return Ext.apply(Ext.Component.prototype.getElConfig.call(this),{htmlFor:f.forId||""})},setText:function(l,m){var n=this;m=m!==false;if(m){n.text=l;delete n.html}else{n.html=l;delete n.text}if(n.rendered){n.el.dom.innerHTML=m!==false?Ext.util.Format.htmlEncode(l):l;n.updateLayout()}return n}},0,["label"],["component","box","label"],{component:true,box:true,label:true},["widget.label"],0,[Ext.form,"Label"],0));(Ext.cmd.derive("Ext.form.Panel",Ext.panel.Panel,{alternateClassName:["Ext.FormPanel","Ext.form.FormPanel"],layout:"anchor",bodyAriaRole:"form",basicFormConfigs:["api","baseParams","errorReader","jsonSubmit","method","paramOrder","paramsAsHash","reader","standardSubmit","timeout","trackResetOnLoad","url","waitMsgTarget","waitTitle"],initComponent:function(){var f=this;if(f.frame){f.border=false}f.initFieldAncestor();Ext.panel.Panel.prototype.initComponent.call(this);f.relayEvents(f.form,["beforeaction","actionfailed","actioncomplete","validitychange","dirtychange"]);if(f.pollForChanges){f.startPolling(f.pollInterval||500)}},initItems:function(){Ext.panel.Panel.prototype.initItems.call(this);this.initMonitor();this.form=this.createForm()},afterFirstLayout:function(){Ext.panel.Panel.prototype.afterFirstLayout.apply(this,arguments);this.form.initialize()},createForm:function(){var q={},o=this.basicFormConfigs,s=o.length,p=0,n;for(;p<s;++p){n=o[p];q[n]=this[n]}return new Ext.form.Basic(this,q)},getForm:function(){return this.form},loadRecord:function(f){return this.getForm().loadRecord(f)},getRecord:function(){return this.getForm().getRecord()},updateRecord:function(f){return this.getForm().updateRecord(f)},getValues:function(m,o,n,p){return this.getForm().getValues(m,o,n,p)},isDirty:function(){return this.form.isDirty()},isValid:function(){return this.form.isValid()},reset:function(f){return this.form.reset(f)},hasInvalidField:function(){return this.form.hasInvalidField()},doDestroy:function(){this.stopPolling();this.form.destroy();Ext.panel.Panel.prototype.doDestroy.call(this)},load:function(f){this.form.load(f)},submit:function(f){this.form.submit(f)},startPolling:function(g){this.stopPolling();var l=new Ext.util.TaskRunner(g);l.start({interval:0,run:this.checkChange,scope:this});this.pollTask=l},stopPolling:function(){var f=this.pollTask;if(f){f.stopAll();delete this.pollTask}},checkChange:function(){var n=this.form.getFields().items,m,f=n.length;for(m=0;m<f;m++){n[m].checkChange()}}},0,["form"],["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},["widget.form"],[["fieldAncestor",Ext.form.FieldAncestor]],[Ext.form,"Panel",Ext,"FormPanel",Ext.form,"FormPanel"],0));(Ext.cmd.derive("Ext.form.RadioManager",Ext.util.MixedCollection,{singleton:true,getByName:function(l,g){return this.filterBy(function(e){return e.name===l&&e.getFormId()===g})},getWithValue:function(n,m,l){return this.filterBy(function(e){return e.name===n&&e.inputValue==m&&e.getFormId()===l})},getChecked:function(l,g){return this.findBy(function(e){return e.name===l&&e.checked&&e.getFormId()===g})}},0,0,0,0,0,0,[Ext.form,"RadioManager"],0));(Ext.cmd.derive("Ext.form.field.Radio",Ext.form.field.Checkbox,{alternateClassName:"Ext.form.Radio",isRadio:true,inputType:"radio",formId:null,getGroupValue:function(){var f=this.getManager().getChecked(this.name,this.getFormId());return f?f.inputValue:null},onRemoved:function(){Ext.form.field.Checkbox.prototype.onRemoved.apply(this,arguments);this.formId=null},setValue:function(m){var n=this,l;if(Ext.isBoolean(m)){Ext.form.field.Checkbox.prototype.setValue.apply(this,arguments)}else{l=n.getManager().getWithValue(n.name,m,n.getFormId()).getAt(0);if(l){l.setValue(true)}}return n},getSubmitValue:function(){return this.checked?this.inputValue:null},onChange:function(t,w){var x=this,s=x.ownerCt,y,q,u,v;Ext.form.field.Checkbox.prototype.onChange.apply(this,arguments);if(t){v=x.getManager().getByName(x.name,x.getFormId()).items;q=v.length;for(y=0;y<q;y++){u=v[y];if(u!==x){u.updateValueFromDom()}}}if(s&&s.isRadioGroup&&s.simpleValue){s.checkChange()}},getManager:function(){return Ext.form.RadioManager}},0,["radiofield","radio"],["component","box","field","checkboxfield","checkbox","radiofield","radio"],{component:true,box:true,field:true,checkboxfield:true,checkbox:true,radiofield:true,radio:true},["widget.radio","widget.radiofield"],0,[Ext.form.field,"Radio",Ext.form,"Radio"],0));(Ext.cmd.derive("Ext.form.RadioGroup",Ext.form.CheckboxGroup,{isRadioGroup:true,allowBlank:true,blankText:"You must select one item in this group",defaultType:"radiofield",local:false,simpleValue:false,defaultBindProperty:"value",groupCls:"x-form-radio-group",ariaRole:"radiogroup",initRenderData:function(){var m=this,l,n;l=Ext.form.CheckboxGroup.prototype.initRenderData.call(this);n=l.ariaAttributes;if(n){n["aria-required"]=!m.allowBlank;n["aria-invalid"]=false}return l},lookupComponent:function(g){var l=Ext.form.CheckboxGroup.prototype.lookupComponent.call(this,g);if(this.local){l.formId=this.getId()}return l},getBoxes:function(g,l){return(l||this).query("[isRadio]"+(g||""))},checkChange:function(){var m=this,l,n;l=m.getValue();n=typeof l==="object"&&Ext.Object.getKeys(l)[0];if(m.simpleValue||(n&&!Ext.isArray(l[n]))){Ext.form.CheckboxGroup.prototype.checkChange.apply(this,arguments)}},isEqual:function(g,l){if(this.simpleValue){return g===l}return Ext.form.CheckboxGroup.prototype.isEqual.call(this,g,l)},getValue:function(){var n=this,s=n.items.items,p,o,q;if(n.simpleValue){for(p=s.length;p-->0;){o=s[p];if(o.checked){q=o.inputValue;break}}}else{q=Ext.form.CheckboxGroup.prototype.getValue.call(this)}return q},setValue:function(t){var v=this.items,z,u,s,w,y,x,A;Ext.suspendLayouts();if(this.simpleValue){for(y=0,x=v.length;y<x;++y){u=v.items[y];if(u.inputValue===t){u.setValue(true);break}}}else{if(Ext.isObject(t)){u=v.first();s=u?u.getFormId():null;for(A in t){z=t[A];w=Ext.form.RadioManager.getWithValue(A,z,s).items;x=w.length;for(y=0;y<x;++y){w[y].setValue(true)}}}}Ext.resumeLayouts(true);return this},markInvalid:function(g){var l=this.ariaEl.dom;Ext.form.CheckboxGroup.prototype.markInvalid.call(this,g);if(l){l.setAttribute("aria-invalid",true)}},clearInvalid:function(){var f=this.ariaEl.dom;Ext.form.CheckboxGroup.prototype.clearInvalid.call(this);if(f){f.setAttribute("aria-invalid",false)}}},0,["radiogroup"],["component","box","container","fieldcontainer","checkboxgroup","radiogroup"],{component:true,box:true,container:true,fieldcontainer:true,checkboxgroup:true,radiogroup:true},["widget.radiogroup"],0,[Ext.form,"RadioGroup"],function(){if(Ext.isGecko){this.override({onFocusEnter:function(e){var o=e.toComponent,s,p,q;if(o.isRadio){s=o.getManager().getByName(o.name,o.getFormId()).items;for(p=0,q=s.length;p<q;p++){s[p].disableTabbing()}}},onFocusLeave:function(e){var o=e.fromComponent,s,p,q;if(o.isRadio){s=o.getManager().getByName(o.name,o.getFormId()).items;for(p=0,q=s.length;p<q;p++){s[p].enableTabbing()}}}})}}));(Ext.cmd.derive("Ext.picker.Month",Ext.Component,{alternateClassName:"Ext.MonthPicker",isMonthPicker:true,focusable:true,childEls:["bodyEl","prevEl","nextEl","monthEl","yearEl"],renderTpl:['<div id="{id}-bodyEl" data-ref="bodyEl" class="{baseCls}-body">','<div id="{id}-monthEl" data-ref="monthEl" class="{baseCls}-months">','<tpl for="months">','<div class="{parent.baseCls}-item {parent.baseCls}-month">','<a style="{parent.monthStyle}" role="button" hidefocus="on" class="{parent.baseCls}-item-inner">{.}</a>',"</div>","</tpl>","</div>",'<div id="{id}-yearEl" data-ref="yearEl" class="{baseCls}-years">','<div class="{baseCls}-yearnav">','<div class="{baseCls}-yearnav-button-ct">','<a id="{id}-prevEl" data-ref="prevEl" class="{baseCls}-yearnav-button {baseCls}-yearnav-prev" hidefocus="on" role="button"></a>',"</div>",'<div class="{baseCls}-yearnav-button-ct">','<a id="{id}-nextEl" data-ref="nextEl" class="{baseCls}-yearnav-button {baseCls}-yearnav-next" hidefocus="on" role="button"></a>',"</div>","</div>",'<tpl for="years">','<div class="{parent.baseCls}-item {parent.baseCls}-year">','<a hidefocus="on" class="{parent.baseCls}-item-inner" role="button">{.}</a>',"</div>","</tpl>","</div>",'<div class="x-clear"></div>','<tpl if="showButtons">','<div class="{baseCls}-buttons">{%',"var me=values.$comp, okBtn=me.okBtn, cancelBtn=me.cancelBtn;","okBtn.ownerLayout = cancelBtn.ownerLayout = me.componentLayout;","okBtn.ownerCt = cancelBtn.ownerCt = me;","Ext.DomHelper.generateMarkup(okBtn.getRenderTree(), out);","Ext.DomHelper.generateMarkup(cancelBtn.getRenderTree(), out);","%}</div>","</tpl>","</div>"],okText:"OK",cancelText:"Cancel",baseCls:"x-monthpicker",showButtons:true,footerButtonUI:"default",measureWidth:35,measureMaxHeight:20,smallCls:"x-monthpicker-small",totalYears:10,yearOffset:5,monthOffset:6,alignOnScroll:false,initComponent:function(){var f=this;f.selectedCls=f.baseCls+"-selected";if(f.small){f.addCls(f.smallCls)}f.setValue(f.value);f.activeYear=f.getYear(new Date().getFullYear()-4,-4);if(f.showButtons){f.okBtn=new Ext.button.Button({ui:f.footerButtonUI,text:f.okText,handler:f.onOkClick,scope:f});f.cancelBtn=new Ext.button.Button({ui:f.footerButtonUI,text:f.cancelText,handler:f.onCancelClick,scope:f})}Ext.Component.prototype.initComponent.call(this)},beforeRender:function(){var w=this,s=0,t=[],u=Ext.Date.getShortMonthName,p=w.monthOffset,v=w.monthMargin,q="";if(w.padding&&!w.width){w.cacheWidth()}Ext.Component.prototype.beforeRender.call(this);for(;s<p;++s){t.push(u(s),u(s+p))}if(Ext.isDefined(v)){q="margin: 0 "+v+"px;"}Ext.apply(w.renderData,{months:t,years:w.getYears(),showButtons:w.showButtons,monthStyle:q})},cacheWidth:function(){var n=this,m=n.parseBox(n.padding),l=Ext.getBody().createChild({cls:n.baseCls+" "+n.borderBoxCls,style:"position:absolute;top:-1000px;left:-1000px;",html:"&nbsp;"});n.self.prototype.width=l.getWidth()+m.left+m.right;l.destroy()},afterRender:function(){var g=this,l=g.bodyEl;Ext.Component.prototype.afterRender.call(this);if(g.up("[floating=true]")){g.el.on("mousedown",g.onElClick,g,{translate:false})}l.on({scope:g,click:"onBodyClick",dblclick:"onBodyClick"});g.years=l.select("."+g.baseCls+"-year a");g.months=l.select("."+g.baseCls+"-month a");g.backRepeater=new Ext.util.ClickRepeater(g.prevEl,{handler:Ext.Function.bind(g.adjustYear,g,[-g.totalYears])});g.prevEl.addClsOnOver(g.baseCls+"-yearnav-prev-over");g.nextRepeater=new Ext.util.ClickRepeater(g.nextEl,{handler:Ext.Function.bind(g.adjustYear,g,[g.totalYears])});g.nextEl.addClsOnOver(g.baseCls+"-yearnav-next-over");g.updateBody();if(!Ext.isDefined(g.monthMargin)){Ext.picker.Month.prototype.monthMargin=g.calculateMonthMargin()}},calculateMonthMargin:function(){var n=this,p=n.months,m=p.first(),o=m.getMargin("l");while(o&&n.getLargest()>n.measureMaxHeight){--o;p.setStyle("margin","0 "+o+"px")}return o},getLargest:function(l){var g=0;this.months.each(function(e){var f=e.getHeight();if(f>g){g=f}});return g},setValue:function(n){var o=this,m=o.activeYear,p;if(!n){o.value=[null,null]}else{if(Ext.isDate(n)){o.value=[n.getMonth(),n.getFullYear()]}else{o.value=[n[0],n[1]]}}if(o.rendered){p=o.value[1];if(p!==null){if((p<m||p>m+o.yearOffset)){o.activeYear=p-o.yearOffset+1}}o.updateBody()}return o},getValue:function(){return this.value},hasSelection:function(){var f=this.value;return f[0]!==null&&f[1]!==null},getYears:function(){var p=this,o=p.yearOffset,u=p.activeYear,t=u+o,q=u,s=[];for(;q<t;++q){s.push(q,q+o)}return s},updateBody:function(){var x=this,A=x.years,D=x.months,G=x.getYears(),F=x.selectedCls,I=x.getYear(null),z=x.value[0],H=x.monthOffset,y,B,w,E,C;if(x.rendered){A.removeCls(F);D.removeCls(F);B=A.elements;E=B.length;for(w=0;w<E;w++){C=Ext.fly(B[w]);y=G[w];C.dom.innerHTML=y;if(y===I){C.addCls(F)}}if(z!==null){if(z<H){z=z*2}else{z=(z-H)*2+1}D.item(z).addCls(F)}}},getYear:function(n,l){var m=this.value[1];l=l||0;return m===null?n:m+l},onElClick:function(e){e.stopEvent()},onBodyClick:function(e,o){var n=this,p=e.type==="dblclick";if(e.getTarget("."+n.baseCls+"-month")){e.stopEvent();n.onMonthClick(o,p)}else{if(e.getTarget("."+n.baseCls+"-year")){e.stopEvent();n.onYearClick(o,p)}}},adjustYear:function(f){if(typeof f!=="number"){f=this.totalYears}this.activeYear+=f;this.updateBody()},onOkClick:function(){this.fireEvent("okclick",this,this.value)},onCancelClick:function(){this.fireEvent("cancelclick",this)},onMonthClick:function(l,n){var m=this;m.value[0]=m.resolveOffset(m.months.indexOf(l),m.monthOffset);m.updateBody();m.fireEvent("month"+(n?"dbl":"")+"click",m,m.value);m.fireEvent("select",m,m.value)},onYearClick:function(l,n){var m=this;m.value[1]=m.activeYear+m.resolveOffset(m.years.indexOf(l),m.yearOffset);m.updateBody();m.fireEvent("year"+(n?"dbl":"")+"click",m,m.value);m.fireEvent("select",m,m.value)},resolveOffset:function(l,g){if(l%2===0){return(l/2)}else{return g+Math.floor(l/2)}},doDestroy:function(){Ext.destroy(this.backRepeater,this.nextRepeater,this.okBtn,this.cancelBtn);Ext.Component.prototype.doDestroy.call(this)},privates:{finishRenderChildren:function(){var f=this;Ext.Component.prototype.finishRenderChildren.apply(this,arguments);if(this.showButtons){f.okBtn.finishRender();f.cancelBtn.finishRender()}}}},0,["monthpicker"],["component","box","monthpicker"],{component:true,box:true,monthpicker:true},["widget.monthpicker"],0,[Ext.picker,"Month",Ext,"MonthPicker"],0));Ext.define("Ext.theme.neptune.picker.Month",{override:"Ext.picker.Month",measureMaxHeight:36});Ext.define("Ext.theme.triton.picker.Month",{override:"Ext.picker.Month",footerButtonUI:"default-toolbar",calculateMonthMargin:Ext.emptyFn});(Ext.cmd.derive("Ext.picker.Date",Ext.Component,{alternateClassName:"Ext.DatePicker",todayText:"Today",ariaTitle:"Date Picker: {0}",ariaTitleDateFormat:"F d",todayTip:"{0} (Spacebar)",minText:"This date is before the minimum date",ariaMinText:"This date is before the minimum date",maxText:"This date is after the maximum date",ariaMaxText:"This date is after the maximum date",disabledDaysText:"Disabled",ariaDisabledDaysText:"This day of week is disabled",disabledDatesText:"Disabled",ariaDisabledDatesText:"This date is disabled",nextText:"Next Month (Control+Right)",prevText:"Previous Month (Control+Left)",monthYearText:"Choose a month (Control+Up/Down to move years)",monthYearFormat:"F Y",startDay:0,showToday:true,disableAnim:false,baseCls:"x-datepicker",longDayFormat:"F d, Y",footerButtonUI:"default",isDatePicker:true,alignOnScroll:false,ariaRole:"region",focusable:true,childEls:["innerEl","eventEl","prevEl","nextEl","middleBtnEl","footerEl"],border:true,renderTpl:['<div id="{id}-innerEl" data-ref="innerEl" role="presentation">','<div class="{baseCls}-header">','<div id="{id}-prevEl" data-ref="prevEl" class="{baseCls}-prev {baseCls}-arrow" role="presentation" title="{prevText}"></div>','<div id="{id}-middleBtnEl" data-ref="middleBtnEl" class="{baseCls}-month" role="heading">{%this.renderMonthBtn(values, out)%}</div>','<div id="{id}-nextEl" data-ref="nextEl" class="{baseCls}-next {baseCls}-arrow" role="presentation" title="{nextText}"></div>',"</div>",'<table role="grid" id="{id}-eventEl" data-ref="eventEl" class="{baseCls}-inner" cellspacing="0" tabindex="0" aria-readonly="true">',"<thead>",'<tr role="row">','<tpl for="dayNames">','<th role="columnheader" class="{parent.baseCls}-column-header" aria-label="{.}">','<div role="presentation" class="{parent.baseCls}-column-header-inner">{.:this.firstInitial}</div>',"</th>","</tpl>","</tr>","</thead>","<tbody>",'<tr role="row">','<tpl for="days">',"{#:this.isEndOfWeek}",'<td role="gridcell">','<div hidefocus="on" class="{parent.baseCls}-date"></div>',"</td>","</tpl>","</tr>","</tbody>","</table>",'<tpl if="showToday">','<div id="{id}-footerEl" data-ref="footerEl" role="presentation" class="{baseCls}-footer">{%this.renderTodayBtn(values, out)%}</div>',"</tpl>",'<div id="{id}-todayText" class="x-hidden-clip">{todayText}.</div>','<div id="{id}-ariaMinText" class="x-hidden-clip">{ariaMinText}.</div>','<div id="{id}-ariaMaxText" class="x-hidden-clip">{ariaMaxText}.</div>','<div id="{id}-ariaDisabledDaysText" class="x-hidden-clip">{ariaDisabledDaysText}.</div>','<div id="{id}-ariaDisabledDatesText" class="x-hidden-clip">{ariaDisabledDatesText}.</div>',"</div>",{firstInitial:function(f){return Ext.picker.Date.prototype.getDayInitial(f)},isEndOfWeek:function(g){g--;var l=g%7===0&&g!==0;return l?'</tr><tr role="row">':""},renderTodayBtn:function(l,g){Ext.DomHelper.generateMarkup(l.$comp.todayBtn.getRenderTree(),g)},renderMonthBtn:function(l,g){Ext.DomHelper.generateMarkup(l.$comp.monthBtn.getRenderTree(),g)}}],initHour:12,numDays:42,initComponent:function(){var g=this,l=Ext.Date.clearTime;g.selectedCls=g.baseCls+"-selected";g.disabledCellCls=g.baseCls+"-disabled";g.prevCls=g.baseCls+"-prevday";g.activeCls=g.baseCls+"-active";g.cellCls=g.baseCls+"-cell";g.nextCls=g.baseCls+"-prevday";g.todayCls=g.baseCls+"-today";if(!g.format){g.format=Ext.Date.defaultFormat}if(!g.dayNames){g.dayNames=Ext.Date.dayNames}g.dayNames=g.dayNames.slice(g.startDay).concat(g.dayNames.slice(0,g.startDay));Ext.Component.prototype.initComponent.call(this);g.value=g.value?l(g.value,true):l(new Date());g.initDisabledDays()},getRefOwner:function(){return this.pickerField||Ext.Component.prototype.getRefOwner.call(this)},getRefItems:function(){var n=[],l=this.monthBtn,m=this.todayBtn;if(l){n.push(l)}if(m){n.push(m)}return n},beforeRender:function(){var n=this,o=Ext.String.htmlEncode,m=new Array(n.numDays),p=Ext.Date.format(new Date(),n.format);if(n.padding&&!n.width){n.cacheWidth()}n.monthBtn=new Ext.button.Split({ownerCt:n,ownerLayout:n.getComponentLayout(),text:"",tooltip:n.monthYearText,tabIndex:-1,ariaRole:"presentation",listeners:{click:n.doShowMonthPicker,arrowclick:n.doShowMonthPicker,scope:n}});if(n.showToday){n.todayBtn=new Ext.button.Button({ui:n.footerButtonUI,ownerCt:n,ownerLayout:n.getComponentLayout(),text:Ext.String.format(n.todayText,p),tooltip:Ext.String.format(n.todayTip,p),tooltipType:"title",tabIndex:-1,ariaRole:"presentation",handler:n.selectToday,scope:n})}Ext.Component.prototype.beforeRender.call(this);Ext.applyIf(n,{renderData:{}});Ext.apply(n.renderData,{dayNames:n.dayNames,showToday:n.showToday,prevText:o(n.prevText),nextText:o(n.nextText),todayText:o(n.todayText),ariaMinText:o(n.ariaMinText),ariaMaxText:o(n.ariaMaxText),ariaDisabledDaysText:o(n.ariaDisabledDaysText),ariaDisabledDatesText:o(n.ariaDisabledDatesText),days:m});n.protoEl.unselectable()},cacheWidth:function(){var n=this,m=n.parseBox(n.padding),l=Ext.getBody().createChild({cls:n.baseCls+" "+n.borderBoxCls,style:"position:absolute;top:-1000px;left:-1000px;"});n.self.prototype.width=l.getWidth()+m.left+m.right;l.destroy()},onRender:function(o,p){var n=this,m="div."+n.baseCls+"-date";Ext.Component.prototype.onRender.apply(this,arguments);n.cells=n.eventEl.select("tbody td");n.textNodes=n.eventEl.query(m);n.eventEl.set({"aria-labelledby":n.monthBtn.id});n.mon(n.eventEl,{scope:n,mousewheel:n.handleMouseWheel,click:{fn:n.handleDateClick,delegate:m}})},initEvents:function(){var f=this;Ext.Component.prototype.initEvents.call(this);if(f.pickerField){f.el.on("mousedown",f.onMouseDown,f)}f.monthBtn.el.on("mousedown",f.onMouseDown,f);f.prevRepeater=new Ext.util.ClickRepeater(f.prevEl,{handler:f.showPrevMonth,scope:f,mousedownStopEvent:true});f.nextRepeater=new Ext.util.ClickRepeater(f.nextEl,{handler:f.showNextMonth,scope:f,mousedownStopEvent:true});f.keyNav=new Ext.util.KeyNav(f.eventEl,Ext.apply({scope:f,left:function(e){if(e.ctrlKey){this.showPrevMonth()}else{this.update(Ext.Date.add(this.activeDate,Ext.Date.DAY,-1))}e.preventDefault()},right:function(e){if(e.ctrlKey){this.showNextMonth()}else{this.update(Ext.Date.add(this.activeDate,Ext.Date.DAY,1))}e.preventDefault()},up:function(e){if(e.ctrlKey){this.showNextYear()}else{this.update(Ext.Date.add(this.activeDate,Ext.Date.DAY,-7))}e.preventDefault()},down:function(e){if(e.ctrlKey){this.showPrevYear()}else{this.update(Ext.Date.add(this.activeDate,Ext.Date.DAY,7))}e.preventDefault()},pageUp:function(e){if(e.ctrlKey){this.showPrevYear()}else{this.showPrevMonth()}e.preventDefault()},pageDown:function(e){if(e.ctrlKey){this.showNextYear()}else{this.showNextMonth()}e.preventDefault()},home:function(e){this.update(Ext.Date.getFirstDateOfMonth(this.activeDate));e.preventDefault()},end:function(e){this.update(Ext.Date.getLastDateOfMonth(this.activeDate));e.preventDefault()},tab:function(e){this.handleTabKey(e);return true},enter:function(e){this.handleDateClick(e,this.activeCell.firstChild)},space:function(e){var q=this,t=q.pickerField,s,p,u;q.setValue(new Date(q.activeCell.firstChild.dateValue));if(t){s=q.startValue;p=q.value;u=t.getValue();if(u&&s&&u.getTime()===p.getTime()){t.setValue(s)}else{t.setValue(p)}}e.preventDefault()}},f.keyNavConfig));if(f.disabled){f.syncDisabled(true,true)}f.update(f.value)},onMouseDown:function(e){e.preventDefault()},handleTabKey:function(e){var n=this,p=n.getSelectedDate(n.activeDate),o=n.handler;if(!n.disabled&&p.dateValue&&!Ext.fly(p.parentNode).hasCls(n.disabledCellCls)){n.setValue(new Date(p.dateValue));n.fireEvent("select",n,n.value);if(o){Ext.callback(o,n.scope,[n,n.value],null,n,n)}n.onSelect()}else{n.fireEventArgs("tabout",[n])}},getSelectedDate:function(A){var y=this,u=A.getTime(),t=y.cells,s=y.selectedCls,w=t.elements,x=w.length,v,z;t.removeCls(s);for(z=0;z<x;z++){v=w[z].firstChild;if(v.dateValue===u){return v}}return null},initDisabledDays:function(){var w=this,t=w.disabledDates,p="(?:",u,v,s,q;if(!w.disabledDatesRE&&t){u=t.length-1;s=t.length;for(v=0;v<s;v++){q=t[v];p+=Ext.isDate(q)?"^"+Ext.String.escapeRegex(Ext.Date.dateFormat(q,w.format))+"$":q;if(v!==u){p+="|"}}w.disabledDatesRE=new RegExp(p+")")}},setDisabledDates:function(l){var g=this;if(Ext.isArray(l)){g.disabledDates=l;g.disabledDatesRE=null}else{g.disabledDatesRE=l}g.initDisabledDays();g.update(g.value,true);return g},setDisabledDays:function(f){this.disabledDays=f;return this.update(this.value,true)},setMinDate:function(f){this.minDate=f;return this.update(this.value,true)},setMaxDate:function(f){this.maxDate=f;return this.update(this.value,true)},setValue:function(f){this.value=Ext.Date.clearTime(f||new Date(),true);return this.update(this.value)},getValue:function(){return this.value},getDayInitial:function(f){return f.substr(0,1)},onEnable:function(){var f=this;Ext.Component.prototype.onEnable.call(this);f.syncDisabled(false,true);f.update(f.activeDate)},onShow:function(){var f=this;Ext.Component.prototype.onShow.call(this);f.syncDisabled(false);if(f.pickerField){f.startValue=f.pickerField.getValue()}},onHide:function(){Ext.Component.prototype.onHide.call(this);this.syncDisabled(true)},onDisable:function(){Ext.Component.prototype.onDisable.call(this);this.syncDisabled(true,true)},getActive:function(){return this.activeDate||this.value},runAnimation:function(l){var m=this.monthPicker,n={duration:200,callback:function(){m.setVisible(!l)}};if(l){m.el.slideOut("t",n)}else{m.el.slideIn("t",n)}},hideMonthPicker:function(n){var l=this,m=l.monthPicker;if(m&&m.isVisible()){if(l.shouldAnimate(n)){l.runAnimation(true)}else{m.hide()}}return l},doShowMonthPicker:function(){this.showMonthPicker()},doHideMonthPicker:function(){this.hideMonthPicker()},showMonthPicker:function(p){var m=this,n=m.el,o;if(m.rendered&&!m.disabled){o=m.createMonthPicker();if(!o.isVisible()){o.setValue(m.getActive());o.setSize(n.getSize());o.floatParent=null;o.setPosition(-n.getBorderWidth("l"),-n.getBorderWidth("t"));if(m.shouldAnimate(p)){m.runAnimation(false)}else{o.show()}}}return m},shouldAnimate:function(f){return Ext.isDefined(f)?f:!this.disableAnim},createMonthPicker:function(){var g=this,l=g.monthPicker;if(!l){g.monthPicker=l=new Ext.picker.Month({renderTo:g.el,ownerCmp:g,floating:true,padding:g.padding,shadow:false,small:g.showToday===false,footerButtonUI:g.footerButtonUI,listeners:{scope:g,cancelclick:g.onCancelClick,okclick:g.onOkClick,yeardblclick:g.onOkClick,monthdblclick:g.onOkClick}});if(!g.disableAnim){l.el.setStyle("display","none")}l.hide();g.on("beforehide",g.doHideMonthPicker,g)}return l},onOkClick:function(s,o){var p=this,u=o[0],q=o[1],t=new Date(q,u,p.getActive().getDate());if(t.getMonth()!==u){t=Ext.Date.getLastDateOfMonth(new Date(q,u,1))}p.setValue(t);p.hideMonthPicker()},onCancelClick:function(){this.selectedUpdate(this.activeDate);this.hideMonthPicker()},showPrevMonth:function(e){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.MONTH,-1))},showNextMonth:function(e){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.MONTH,1))},showPrevYear:function(){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.YEAR,-1))},showNextYear:function(){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.YEAR,1))},handleMouseWheel:function(l){var e;l.stopEvent();if(!this.disabled){e=l.getWheelDelta();if(e>0){this.showPrevMonth()}else{if(e<0){this.showNextMonth()}}}},handleDateClick:function(e,p){var n=this,o=n.handler;e.stopEvent();if(!n.disabled&&p.dateValue&&!Ext.fly(p.parentNode).hasCls(n.disabledCellCls)){n.setValue(new Date(p.dateValue));n.fireEvent("select",n,n.value);if(o){Ext.callback(o,n.scope,[n,n.value],null,n,n)}n.onSelect()}},onSelect:function(){if(this.hideOnSelect){this.hide()}},selectToday:function(){var l=this,n=l.todayBtn,m=l.handler;if(n&&!n.disabled){l.setValue(Ext.Date.clearTime(new Date()));l.fireEvent("select",l,l.value);if(m){Ext.callback(m,l.scope,[l,l.value],null,l,l)}l.onSelect()}return l},selectedUpdate:function(s){var y=this,q=s.getTime(),t=y.cells,u=y.selectedCls,w,x=t.getCount(),v;y.eventEl.dom.setAttribute("aria-busy","true");v=y.activeCell;if(v){Ext.fly(v).removeCls(u);v.setAttribute("aria-selected",false)}for(w=0;w<x;w++){v=t.item(w);if(y.textNodes[w].dateValue===q){y.activeCell=v.dom;y.eventEl.dom.setAttribute("aria-activedescendant",v.dom.id);v.dom.setAttribute("aria-selected",true);v.addCls(u);y.fireEvent("highlightitem",y,v);break}}y.eventEl.dom.removeAttribute("aria-busy")},fullUpdate:function(aa){var R=this,ap=R.cells.elements,aq=R.textNodes,P=R.disabledCellCls,ae=Ext.Date,ah=0,U=0,aj=+ae.clearTime(aa,true),ac=+ae.clearTime(new Date()),al=R.minDate?ae.clearTime(R.minDate,true):Number.NEGATIVE_INFINITY,ai=R.maxDate?ae.clearTime(R.maxDate,true):Number.POSITIVE_INFINITY,W=R.disabledDatesRE,S=R.disabledDatesText,O=R.disabledDays?R.disabledDays.join(""):false,Y=R.disabledDaysText,ag=R.format,ak=ae.getDaysInMonth(aa),X=ae.getFirstDateOfMonth(aa),ao=X.getDay()-R.startDay,ad=ae.add(aa,ae.MONTH,-1),Z=R.ariaTitleDateFormat,am,V,at,Q,af,ab,ar,an,T;if(ao<0){ao+=7}ak+=ao;am=ae.getDaysInMonth(ad)-ao;V=new Date(ad.getFullYear(),ad.getMonth(),am,R.initHour);if(R.showToday){Q=ae.clearTime(new Date());at=(Q<al||Q>ai||(W&&ag&&W.test(ae.dateFormat(Q,ag)))||(O&&O.indexOf(Q.getDay())!==-1));R.todayDisabled=at;if(!R.disabled){R.todayBtn.setDisabled(at)}}af=function(f,g){var l=ap[f],e=[];if(!l.hasAttribute("id")){l.setAttribute("id",R.id+"-cell-"+f)}T=+ae.clearTime(V,true);l.firstChild.dateValue=T;l.setAttribute("aria-label",ae.format(V,Z));l.removeAttribute("aria-describedby");l.removeAttribute("data-qtip");if(T===ac){g+=" "+R.todayCls;e.push(R.id+"-todayText")}if(T===aj){R.activeCell=l;R.eventEl.dom.setAttribute("aria-activedescendant",l.id);l.setAttribute("aria-selected",true);g+=" "+R.selectedCls;R.fireEvent("highlightitem",R,l)}else{l.setAttribute("aria-selected",false)}if(T<al){g+=" "+P;e.push(R.id+"-ariaMinText");l.setAttribute("data-qtip",R.minText)}else{if(T>ai){g+=" "+P;e.push(R.id+"-ariaMaxText");l.setAttribute("data-qtip",R.maxText)}else{if(O&&O.indexOf(V.getDay())!==-1){l.setAttribute("data-qtip",Y);e.push(R.id+"-ariaDisabledDaysText");g+=" "+P}else{if(W&&ag){an=ae.dateFormat(V,ag);if(W.test(an)){l.setAttribute("data-qtip",S.replace("%0",an));e.push(R.id+"-ariaDisabledDatesText");g+=" "+P}}}}}if(e.length){l.setAttribute("aria-describedby",e.join(" "))}l.className=g+" "+R.cellCls};R.eventEl.dom.setAttribute("aria-busy","true");for(;ah<R.numDays;++ah){if(ah<ao){ab=(++am);ar=R.prevCls}else{if(ah>=ak){ab=(++U);ar=R.nextCls}else{ab=ah-ao+1;ar=R.activeCls}}aq[ah].innerHTML=ab;V.setDate(V.getDate()+1);af(ah,ar)}R.eventEl.dom.removeAttribute("aria-busy");R.monthBtn.setText(Ext.Date.format(aa,R.monthYearFormat))},update:function(p,m){var o=this,n=o.activeDate;if(o.rendered){o.activeDate=p;if(!m&&n&&o.el&&n.getMonth()===p.getMonth()&&n.getFullYear()===p.getFullYear()){o.selectedUpdate(p,n)}else{o.fullUpdate(p,n)}}return o},doDestroy:function(){var f=this;if(f.rendered){Ext.destroy(f.keyNav,f.monthPicker,f.monthBtn,f.nextRepeater,f.prevRepeater,f.todayBtn,f.todayElSpan)}Ext.Component.prototype.doDestroy.call(this)},privates:{finishRenderChildren:function(){var f=this;Ext.Component.prototype.finishRenderChildren.call(this);f.monthBtn.finishRender();if(f.showToday){f.todayBtn.finishRender()}},getFocusEl:function(){return this.eventEl},syncDisabled:function(p,q){var n=this,s=n.keyNav,o=n.todayBtn;if(s){s.setDisabled(p);n.prevRepeater.setDisabled(p);n.nextRepeater.setDisabled(p)}if(q&&o){o.setDisabled(n.todayDisabled||p)}}}},0,["datepicker"],["component","box","datepicker"],{component:true,box:true,datepicker:true},["widget.datepicker"],0,[Ext.picker,"Date",Ext,"DatePicker"],0));Ext.define("Ext.theme.triton.picker.Date",{override:"Ext.picker.Date",footerButtonUI:"default-toolbar"});(Ext.cmd.derive("Ext.form.field.Date",Ext.form.field.Picker,{alternateClassName:["Ext.form.DateField","Ext.form.Date"],format:"m/d/Y",ariaFormat:"M j Y",altFormats:"m/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d|n-j|n/j",disabledDaysText:"Disabled",ariaDisabledDaysText:"This day of week is disabled",disabledDatesText:"Disabled",ariaDisabledDatesText:"This date cannot be selected",minText:"The date in this field must be equal to or after {0}",ariaMinText:"The date must be equal to or after {0}",maxText:"The date in this field must be equal to or before {0}",ariaMaxText:"The date must be equal to or before {0}",invalidText:"{0} is not a valid date - it must be in the format {1}",formatText:"Expected date format {0}.",triggerCls:"x-form-date-trigger",showToday:true,useStrict:undefined,initTime:"12",initTimeFormat:"H",matchFieldWidth:false,startDay:0,valuePublishEvent:["select","blur"],componentCls:"x-form-field-date",ariaRole:"combobox",rawDate:null,rawDateText:"",initComponent:function(){var m=this,o=Ext.isString,n,p;n=m.minValue;p=m.maxValue;if(o(n)){m.minValue=m.parseDate(n)}if(o(p)){m.maxValue=m.parseDate(p)}m.disabledDatesRE=null;m.initDisabledDays();Ext.form.field.Picker.prototype.initComponent.call(this)},getSubTplData:function(o){var n=this,m,p;m=Ext.form.field.Picker.prototype.getSubTplData.call(this,o);if(!n.ariaStaticRoles[n.ariaRole]){p=m.ariaElAttributes;if(p){p["aria-owns"]=n.id+"-inputEl "+n.id+"-picker-eventEl";p["aria-autocomplete"]="none"}}return m},initValue:function(){var l=this,g=l.value;if(Ext.isString(g)){l.value=l.rawToValue(g);l.rawDate=l.value;l.rawDateText=l.parseDate(l.value)}else{l.value=g||null;l.rawDate=l.value;l.rawDateText=l.value?l.parseDate(l.value):""}Ext.form.field.Picker.prototype.initValue.call(this)},initDisabledDays:function(){if(this.disabledDates){var s=this.disabledDates,t=s.length-1,o="(?:",u,p=s.length,q;for(u=0;u<p;u++){q=s[u];o+=Ext.isDate(q)?"^"+Ext.String.escapeRegex(q.dateFormat(this.format))+"$":q;if(u!==t){o+="|"}}this.disabledDatesRE=new RegExp(o+")")}},setDisabledDates:function(l){var m=this,n=m.picker;m.disabledDates=l;m.initDisabledDays();if(n){n.setDisabledDates(m.disabledDatesRE)}},setDisabledDays:function(g){var l=this.picker;this.disabledDays=g;if(l){l.setDisabledDays(g)}},setMinValue:function(m){var o=this,p=o.picker,n=(Ext.isString(m)?o.parseDate(m):m);o.minValue=n;if(p){p.minText=Ext.String.format(o.minText,o.formatDate(o.minValue));p.setMinDate(n)}},setMaxValue:function(n){var o=this,p=o.picker,m=(Ext.isString(n)?o.parseDate(n):n);o.maxValue=m;if(p){p.maxText=Ext.String.format(o.maxText,o.formatDate(o.maxValue));p.setMaxDate(m)}},getErrors:function(H){H=arguments.length>0?H:this.formatDate(this.processRawValue(this.getRawValue()));var z=this,I=Ext.String.format,y=Ext.Date.clearTime,J=Ext.form.field.Picker.prototype.getErrors.call(this,H),K=z.disabledDays,D=z.disabledDatesRE,L=z.minValue,A=z.maxValue,B=K?K.length:0,C=0,G,F,M,E;if(H===null||H.length<1){return J}G=H;H=z.parseDate(H);if(!H){J.push(I(z.invalidText,G,Ext.Date.unescapeFormat(z.format)));return J}E=H.getTime();if(L&&E<y(L).getTime()){J.push(I(z.minText,z.formatDate(L)))}if(A&&E>y(A).getTime()){J.push(I(z.maxText,z.formatDate(A)))}if(K){M=H.getDay();for(;C<B;C++){if(M===K[C]){J.push(z.disabledDaysText);break}}}F=z.formatDate(H);if(D&&D.test(F)){J.push(I(z.disabledDatesText,F))}return J},rawToValue:function(g){var l=this;if(g===l.rawDateText){return l.rawDate}return l.parseDate(g)||g||null},valueToRaw:function(f){return this.formatDate(this.parseDate(f))},setValue:function(l){var g=this;g.lastValue=g.rawDateText;g.lastDate=g.rawDate;if(Ext.isDate(l)){g.rawDate=l;g.rawDateText=g.formatDate(l)}else{g.rawDate=g.rawToValue(l);g.rawDateText=g.formatDate(l);if(g.rawDate===l){g.rawDate=null;g.rawDateText=""}}Ext.form.field.Picker.prototype.setValue.apply(this,arguments)},checkChange:function(){var m=this,n,p,o;if(!m.suspendCheckChange){n=m.getRawValue();p=m.lastValue;o=m.lastDate;if(!m.destroyed&&m.didValueChange(n,p)){m.rawDate=m.rawToValue(n);m.rawDateText=m.formatDate(n);m.lastValue=n;m.lastDate=m.rawDate;m.fireEvent("change",m,m.getValue(),o);m.onChange(n,p)}}},safeParse:function(w,v){var p=this,s=Ext.Date,u=null,t=p.useStrict,q;if(s.formatContainsHourInfo(v)){u=s.parse(w,v,t)}else{q=s.parse(w+" "+p.initTime,v+" "+p.initTimeFormat,t);if(q){u=s.clearTime(q)}}return u},getSubmitValue:function(){var g=this.submitFormat||this.format,l=this.rawDate;return l?Ext.Date.format(l,g):""},getValue:function(){return this.rawDate||null},setRawValue:function(g){var l=this;Ext.form.field.Picker.prototype.setRawValue.call(this,g);l.rawDate=Ext.isDate(g)?g:l.rawToValue(g);l.rawDateText=this.formatDate(g)},parseDate:function(p){if(!p||Ext.isDate(p)){return p}var q=this,v=q.safeParse(p,q.format),t=q.altFormats,w=q.altFormatsArray,s=0,u;if(!v&&t){w=w||t.split("|");u=w.length;for(;s<u&&!v;++s){v=q.safeParse(p,w[s])}}return v},formatDate:function(l,g){return Ext.isDate(l)?Ext.Date.dateFormat(l,g||this.format):l},createPicker:function(){var l=this,g=Ext.String.format;return new Ext.picker.Date({id:l.id+"-picker",pickerField:l,floating:true,preventRefocus:true,hidden:true,minDate:l.minValue,maxDate:l.maxValue,disabledDatesRE:l.disabledDatesRE,disabledDatesText:l.disabledDatesText,ariaDisabledDatesText:l.ariaDisabledDatesText,disabledDays:l.disabledDays,disabledDaysText:l.disabledDaysText,ariaDisabledDaysText:l.ariaDisabledDaysText,format:l.format,showToday:l.showToday,startDay:l.startDay,minText:g(l.minText,l.formatDate(l.minValue)),ariaMinText:g(l.ariaMinText,l.formatDate(l.minValue,l.ariaFormat)),maxText:g(l.maxText,l.formatDate(l.maxValue)),ariaMaxText:g(l.ariaMaxText,l.formatDate(l.maxValue,l.ariaFormat)),listeners:{scope:l,select:l.onSelect,tabout:l.onTabOut},keyNavConfig:{esc:function(){l.inputEl.focus();l.collapse()}}})},onSelect:function(n,l){var m=this;m.setValue(l);m.rawDate=l;m.fireEvent("select",m,l);m.onTabOut(n)},onTabOut:function(f){this.inputEl.focus();this.collapse()},onExpand:function(){var f=this.rawDate;this.picker.setValue(Ext.isDate(f)?f:new Date())},onBlur:function(e){var m=this,n=m.rawToValue(m.getRawValue());if(n===""||Ext.isDate(n)){m.setValue(n)}Ext.form.field.Picker.prototype.onBlur.call(this,e)}},0,["datefield"],["component","box","field","textfield","pickerfield","datefield"],{component:true,box:true,field:true,textfield:true,pickerfield:true,datefield:true},["widget.datefield"],0,[Ext.form.field,"Date",Ext.form,"DateField",Ext.form,"Date"],0));(Ext.cmd.derive("Ext.form.field.Display",Ext.form.field.Base,{alternateClassName:["Ext.form.DisplayField","Ext.form.Display"],fieldSubTpl:['<div id="{id}" data-ref="inputEl" role="textbox" aria-readonly="true"',' aria-labelledby="{cmpId}-labelEl" {inputAttrTpl}',' tabindex="<tpl if="tabIdx != null">{tabIdx}<tpl else>-1</tpl>"','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{fieldCls} {fieldCls}-{ui}">{value}</div>',{compiled:true,disableFormats:true}],ariaRole:undefined,focusable:false,skipLabelForAttribute:true,readOnly:true,fieldCls:"x-form-display-field",fieldBodyCls:"x-form-display-field-body",htmlEncode:false,noWrap:false,validateOnChange:false,initEvents:Ext.emptyFn,submitValue:false,getValue:function(){return this.value},valueToRaw:function(f){if(f||f===0||f===false){return f}else{return""}},isDirty:function(){return false},isValid:Ext.returnTrue,validate:Ext.returnTrue,getRawValue:function(){return this.rawValue},setRawValue:function(g){var l=this;g=Ext.valueFrom(g,"");l.rawValue=g;if(l.rendered){l.inputEl.dom.innerHTML=l.getDisplayValue();l.updateLayout()}return g},getDisplayValue:function(){var n=this,m=this.getRawValue(),l;if(n.renderer){l=n.renderer.call(n.scope||n,m,n)}else{l=n.htmlEncode?Ext.util.Format.htmlEncode(m):m}return l},getSubTplData:function(g){var l=Ext.form.field.Base.prototype.getSubTplData.apply(this,arguments);l.value=this.getDisplayValue();return l}},0,["displayfield"],["component","box","field","displayfield"],{component:true,box:true,field:true,displayfield:true},["widget.displayfield"],0,[Ext.form.field,"Display",Ext.form,"DisplayField",Ext.form,"Display"],0));(Ext.cmd.derive("Ext.form.field.FileButton",Ext.button.Button,{childEls:["fileInputEl"],inputCls:"x-form-file-input",cls:"x-form-file-btn",preventDefault:false,tabIndex:undefined,useTabGuards:Ext.isIE||Ext.isEdge,promptCalled:false,autoEl:{tag:"div",unselectable:"on"},afterTpl:['<input id="{id}-fileInputEl" data-ref="fileInputEl" class="{childElCls} {inputCls}" ','type="file" size="1" name="{inputName}" unselectable="on" ','<tpl if="accept != null">accept="{accept}"</tpl>','<tpl if="tabIndex != null">tabindex="{tabIndex}"</tpl>',">"],keyMap:null,ariaEl:"fileInputEl",getAfterMarkup:function(f){return this.lookupTpl("afterTpl").apply(f)},getTemplateArgs:function(){var g=this,l;l=Ext.button.Button.prototype.getTemplateArgs.call(this);l.inputCls=g.inputCls;l.inputName=g.inputName||g.id;l.tabIndex=g.tabIndex!=null?g.tabIndex:null;l.accept=g.accept||null;l.role=g.ariaRole;return l},afterRender:function(){var l=this,m,n;Ext.button.Button.prototype.afterRender.apply(this,arguments);m={scope:l,mousedown:l.handlePrompt,keydown:l.handlePrompt,change:l.fireChange,focus:l.onFileFocus,blur:l.onFileBlur};if(l.useTabGuards){n={tag:"span",role:"button","aria-hidden":"true","data-tabguard":"true",style:{height:0,width:0}};n.tabIndex=l.tabIndex!=null?l.tabIndex:0;l.beforeInputGuard=l.el.createChild(n,l.fileInputEl);l.afterInputGuard=l.el.createChild(n);l.afterInputGuard.insertAfter(l.fileInputEl);l.beforeInputGuard.on("focus",l.onInputGuardFocus,l);l.afterInputGuard.on("focus",l.onInputGuardFocus,l);m.keydown=l.onFileInputKeydown}l.fileInputEl.on(m)},fireChange:function(e){this.fireEvent("change",this,e,this.fileInputEl.dom.value)},createFileInput:function(n){var m=this,p,o;p=m.fileInputEl=m.el.createChild({name:m.inputName||m.id,id:!n?m.id+"-fileInputEl":undefined,cls:m.inputCls+(m.getInherited().rtl?" x-rtl":""),tag:"input",type:"file",size:1,unselectable:"on"},m.afterInputGuard);p.dom.setAttribute("data-componentid",m.id);if(m.tabIndex!=null){m.setTabIndex(m.tabIndex)}if(m.accept){p.dom.setAttribute("accept",m.accept)}o={scope:m,change:m.fireChange,mousedown:m.handlePrompt,keydown:m.handlePrompt,focus:m.onFileFocus,blur:m.onFileBlur};if(m.useTabGuards){o.keydown=m.onFileInputKeydown}p.on(o)},handlePrompt:function(e){var l;if(e.type=="keydown"){l=e.getKey();this.promptCalled=((!Ext.isIE&&l===e.ENTER)||l===e.SPACE)?true:false}else{this.promptCalled=true}},onFileFocus:function(e){var l=this.ownerCt;if(!this.hasFocus){this.onFocus(e)}if(l&&!l.hasFocus){l.onFocus(e)}},onFileBlur:function(e){var l=this.ownerCt;if(this.promptCalled){this.promptCalled=false;e.preventDefault();return}if(this.hasFocus){this.onBlur(e)}if(l&&l.hasFocus){l.onBlur(e)}},onInputGuardFocus:function(e){this.fileInputEl.focus()},onFileInputKeydown:function(e){var n=e.getKey(),m;if(n===e.TAB){m=e.shiftKey?this.beforeInputGuard:this.afterInputGuard;if(m){m.suspendEvent("focus");m.focus();setTimeout(function(){m.resumeEvent("focus")},0)}}else{if(n===e.ENTER||n===e.SPACE){this.handlePrompt(e)}}return true},reset:function(l){var g=this;if(l){g.fileInputEl.destroy()}g.createFileInput(!l);if(l){g.ariaEl=g.fileInputEl}},restoreInput:function(l){var g=this;g.fileInputEl.destroy();l=Ext.get(l);if(g.useTabGuards){l.insertBefore(g.afterInputGuard)}else{g.el.appendChild(l)}g.fileInputEl=l},onDisable:function(){Ext.button.Button.prototype.onDisable.call(this);this.fileInputEl.dom.disabled=true},onEnable:function(){Ext.button.Button.prototype.onEnable.call(this);this.fileInputEl.dom.disabled=false},privates:{getFocusEl:function(){return this.fileInputEl},getFocusClsEl:function(){return this.el},setTabIndex:function(l){var g=this;if(!g.focusable){return}g.tabIndex=l;if(!g.rendered||g.destroying||g.destroyed){return}if(g.useTabGuards){g.fileInputEl.dom.setAttribute("tabIndex",-1);g.beforeInputGuard.dom.setAttribute("tabIndex",l);g.afterInputGuard.dom.setAttribute("tabIndex",l)}else{g.fileInputEl.dom.setAttribute("tabIndex",l)}}}},0,["filebutton"],["component","box","button","filebutton"],{component:true,box:true,button:true,filebutton:true},["widget.filebutton"],0,[Ext.form.field,"FileButton"],0));(Ext.cmd.derive("Ext.form.trigger.Component",Ext.form.trigger.Trigger,{cls:"x-form-trigger-cmp",onFieldRender:function(){var g=this,l=g.component;Ext.form.trigger.Trigger.prototype.onFieldRender.call(this);if(!l.isComponent&&!l.isWidget){l=Ext.widget(l)}g.component=l;l.render(g.el)},destroy:function(){var f=this.component;if(f.isComponent||f.isWidget){f.destroy()}this.component=null;Ext.form.trigger.Trigger.prototype.destroy.call(this)}},0,0,0,0,["trigger.component"],0,[Ext.form.trigger,"Component"],0));(Ext.cmd.derive("Ext.form.field.File",Ext.form.field.Text,{alternateClassName:["Ext.form.FileUploadField","Ext.ux.form.FileUploadField","Ext.form.File"],emptyText:undefined,needArrowKeys:false,triggers:{filebutton:{type:"component",hideOnReadOnly:false,preventMouseDown:false}},buttonText:"Browse...",buttonOnly:false,buttonMargin:3,clearOnSubmit:true,extraFieldBodyCls:"x-form-file-wrap",inputCls:"x-form-text-file",readOnly:true,editable:false,submitValue:false,triggerNoEditCls:"",childEls:["browseButtonWrap"],applyTriggers:function(n){var m=this,l=(n||{}).filebutton;if(l){l.component=Ext.apply({xtype:"filebutton",ownerCt:m,id:m.id+"-button",ui:m.ui,disabled:m.disabled,tabIndex:m.tabIndex,text:m.buttonText,style:m.buttonOnly?"":m.getButtonMarginProp()+m.buttonMargin+"px",accept:m.accept,inputName:m.getName(),listeners:{scope:m,change:m.onFileChange}},m.buttonConfig);return Ext.form.field.Text.prototype.applyTriggers.call(this,n)}},getSubTplData:function(l){var g=Ext.form.field.Text.prototype.getSubTplData.call(this,l);g.tabIdx=-1;return g},onRender:function(){var o=this,n,p,s,q;(arguments.callee.$previous||Ext.form.field.Text.prototype.onRender).apply(this,arguments);n=o.inputEl;n.dom.name="";n.on("focus",o.onInputFocus,o);n.on("mousedown",o.onInputMouseDown,o);q=o.getTrigger("filebutton");p=o.button=q.component;o.fileInputEl=p.fileInputEl;s=p.el;if(o.buttonOnly){o.inputWrap.setDisplayed(false);o.shrinkWrap=3}q.el.setWidth(s.getWidth()+s.getMargin("lr"));if(Ext.isIE){o.button.getEl().repaint()}},getTriggerMarkup:function(){return'<td id="'+this.id+'-browseButtonWrap" data-ref="browseButtonWrap" role="presentation"></td>'},onFileChange:function(n,e,m){this.duringFileSelect=true;Ext.form.field.File.superclass.setValue.call(this,m);delete this.duringFileSelect},didValueChange:function(){return !!this.duringFileSelect},setEmptyText:Ext.emptyFn,setValue:Ext.emptyFn,reset:function(){var g=this,l=g.clearOnSubmit;if(g.rendered){g.button.reset(l);g.fileInputEl=g.button.fileInputEl;if(l){g.inputEl.dom.value="";Ext.form.field.File.superclass.setValue.call(this,null)}}Ext.form.field.Text.prototype.reset.call(this)},onShow:function(){Ext.form.field.Text.prototype.onShow.call(this);this.button.updateLayout()},onDisable:function(){Ext.form.field.Text.prototype.onDisable.call(this);this.button.disable()},onEnable:function(){Ext.form.field.Text.prototype.onEnable.call(this);this.button.enable()},isFileUpload:Ext.returnTrue,extractFileInput:function(){var g=this,l;if(g.rendered){l=g.button.fileInputEl.dom;g.reset()}else{l=document.createElement("input");l.type="file";l.className="x-hidden-display";l.name=g.getName()}return l},restoreInput:function(g){if(this.rendered){var l=this.button;l.restoreInput(g);this.fileInputEl=l.fileInputEl}},doDestroy:function(){this.fileInputEl=this.button=null;Ext.form.field.Text.prototype.doDestroy.call(this)},getButtonMarginProp:function(){return this.getInherited().rtl?"margin-right:":"margin-left:"},onInputFocus:function(e){var l=this;if(l.selectOnFocus&&document.activeElement===l.inputEl.dom){l.inputEl.dom.select()}l.focus();if(Ext.isIE9m){l.fileInputEl.addCls("x-position-relative");l.fileInputEl.removeCls("x-position-relative")}},onInputMouseDown:function(e){e.preventDefault();this.focus()},privates:{getFocusEl:function(){return this.button},getFocusClsEl:Ext.privateFn}},0,["fileuploadfield","filefield"],["component","box","field","textfield","filefield","fileuploadfield"],{component:true,box:true,field:true,textfield:true,filefield:true,fileuploadfield:true},["widget.filefield","widget.fileuploadfield"],0,[Ext.form.field,"File",Ext.form,"FileUploadField",Ext.ux.form,"FileUploadField",Ext.form,"File"],0));(Ext.cmd.derive("Ext.form.field.Hidden",Ext.form.field.Base,{alternateClassName:"Ext.form.Hidden",focusable:false,inputType:"hidden",isTextInput:false,hideLabel:true,hidden:true,ariaRole:"presentation",initComponent:function(){this.formItemCls+="-hidden";Ext.form.field.Base.prototype.initComponent.call(this)},isEqual:function(g,l){return this.isEqualAsString(g,l)},initEvents:Ext.emptyFn,setSize:Ext.emptyFn,setWidth:Ext.emptyFn,setHeight:Ext.emptyFn,setPosition:Ext.emptyFn,setPagePosition:Ext.emptyFn,markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn},0,["hiddenfield","hidden"],["component","box","field","hiddenfield","hidden"],{component:true,box:true,field:true,hiddenfield:true,hidden:true},["widget.hidden","widget.hiddenfield"],0,[Ext.form.field,"Hidden",Ext.form,"Hidden"],0));(Ext.cmd.derive("Ext.view.TagKeyNav",Ext.view.BoundListKeyNav,{onKeySpace:function(e){var n=this,m=n.view.pickerField;if(m.isExpanded&&m.inputEl.dom.value===""){m.preventKeyUpEvent=true;n.navigateOnSpace=true;Ext.view.BoundListKeyNav.prototype.onKeySpace.call(this,e);e.stopEvent();return false}return true}},0,0,0,0,["view.navigation.tagfield"],0,[Ext.view,"TagKeyNav"],0));(Ext.cmd.derive("Ext.form.field.Tag",Ext.form.field.ComboBox,{noWrap:false,multiSelect:true,delimiter:",",tipTpl:undefined,forceSelection:true,createNewOnEnter:false,createNewOnBlur:false,encodeSubmitValue:false,triggerOnClick:true,stacked:false,filterPickList:false,clearOnBackspace:true,grow:true,growMin:false,growMax:false,simulatePlaceholder:true,selectOnFocus:true,ariaHelpText:"Use Up and Down arrows to view available values, Enter to select. Use Left and Right arrows to view selected values, Delete key to deselect.",ariaHelpTextEditable:"Use Up and Down arrows to view available values, Enter to select. Type and press Enter to create a new value. Use Left and Right arrows to view selected values, Delete key to deselect.",ariaSelectedText:"Selected {0}.",ariaDeselectedText:"{0} removed from selection.",ariaNoneSelectedText:"No value selected.",ariaSelectedListLabel:"Selected values",ariaAvailableListLabel:"Available values",fieldSubTpl:['<div id="{cmpId}-listWrapper" data-ref="listWrapper"'+(Ext.isGecko?' tabindex="-1"':""),'<tpl foreach="ariaElAttributes"> {$}="{.}"</tpl>',' class="x-tagfield {fieldCls} {typeCls} {typeCls}-{ui}"<tpl if="wrapperStyle"> style="{wrapperStyle}"</tpl>>','<span id="{cmpId}-selectedText" data-ref="selectedText" aria-hidden="true" class="x-hidden-clip"></span>','<ul id="{cmpId}-itemList" data-ref="itemList" role="presentation" class="x-tagfield-list{itemListCls}">','<li id="{cmpId}-inputElCt" data-ref="inputElCt" role="presentation" class="x-tagfield-input">','<input id="{cmpId}-inputEl" data-ref="inputEl" type="{type}" ','<tpl if="name">name="{name}" </tpl>','<tpl if="value"> value="{[Ext.util.Format.htmlEncode(values.value)]}"</tpl>','<tpl if="size">size="{size}" </tpl>','<tpl if="tabIdx != null">tabindex="{tabIdx}" </tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>','class="x-tagfield-input-field {inputElCls} {emptyCls}" autocomplete="off">',"</li>","</ul>",'<ul id="{cmpId}-ariaList" data-ref="ariaList" role="listbox"','<tpl if="ariaSelectedListLabel"> aria-label="{ariaSelectedListLabel}"</tpl>','<tpl if="multiSelect"> aria-multiselectable="true"</tpl>',' class="x-tagfield-arialist">',"</ul>","</div>",{disableFormats:true}],postSubTpl:['<label id="{cmpId}-placeholderLabel" data-ref="placeholderLabel" for="{cmpId}-inputEl" class="{placeholderCoverCls} {placeholderCoverCls}-{ui} {emptyCls}">{emptyText}</label>',"</div>",'<tpl for="triggers">{[values.renderTrigger(parent)]}</tpl>',"</div>"],extraFieldBodyCls:"x-tagfield-body",childEls:["listWrapper","itemList","inputEl","inputElCt","selectedText","ariaList"],clearValueOnEmpty:false,ariaSelectable:true,ariaEl:"listWrapper",tagItemCls:"x-tagfield-item",tagItemTextCls:"x-tagfield-item-text",tagItemCloseCls:"x-tagfield-item-close",tagItemSelector:".x-tagfield-item",tagItemCloseSelector:".x-tagfield-item-close",tagSelectedCls:"x-tagfield-item-selected",initComponent:function(){var l=this,m=l.typeAhead,n=l.delimiter;if(l.createNewOnEnter||l.createNewOnBlur){l.forceSelection=false}l.typeAhead=false;if(l.value==null){l.value=[]}l.selectionModel=new Ext.selection.Model({mode:"MULTI",onSelectChange:function(f,p,e,g){g()},listeners:{scope:l,selectionchange:l.onSelectionChange,focuschange:l.onFocusChange}});if(!l.ariaHelp){l.ariaHelp=l.createNewOnEnter?l.ariaHelpTextEditable:l.ariaHelpText}Ext.form.field.ComboBox.prototype.initComponent.call(this);l.typeAhead=m;if(n&&l.multiSelect){l.delimiterRegexp=new RegExp(Ext.String.escapeRegex(n))}},initEvents:function(){var l=this,g=l.inputEl;Ext.form.field.ComboBox.prototype.initEvents.apply(this,arguments);if(!l.enableKeyEvents){g.on("keydown",l.onKeyDown,l);g.on("keyup",l.onKeyUp,l)}l.listWrapper.on({scope:l,click:l.onItemListClick,mousedown:l.onItemMouseDown})},createPicker:function(){var g=this,l;l=Ext.apply({navigationModel:"tagfield"},g.defaultListConfig);if(g.ariaAvailableListLabel){l.ariaRenderAttributes={"aria-label":Ext.String.htmlEncode(g.ariaAvailableListLabel)}}g.defaultListConfig=l;return Ext.form.field.ComboBox.prototype.createPicker.call(this)},isValid:function(){var m=this,n=m.disabled,l=m.forceValidation||!n;return l?m.validateValue(m.getValue()):n},onBindStore:function(l){var g=this;Ext.form.field.ComboBox.prototype.onBindStore.call(this,l);if(l){g.valueStore=new Ext.data.Store({model:l.getModel(),proxy:"memory",useModelWarning:false});g.selectionModel.bindStore(g.valueStore);if(g.filterPickList){g.listFilter=new Ext.util.Filter({scope:g,filterFn:g.filterPicked});g.changingFilters=true;l.filter(g.listFilter);g.changingFilters=false}}},filterPicked:function(f){return !this.valueCollection.contains(f)},onUnbindStore:function(p){var n=this,m=n.valueStore,o=n.picker;if(o){o.bindStore(null)}if(m){m.destroy();n.valueStore=null}if(n.filterPickList&&!p.destroyed){n.changingFilters=true;p.removeFilter(n.listFilter);n.changingFilters=false}Ext.form.field.ComboBox.prototype.onUnbindStore.apply(this,arguments)},clearInput:function(){var n=this,m=n.getValueRecords(),p=n.inputEl&&n.inputEl.dom.value,o;if(m.length&&p){o=m[m.length-1].get(n.displayField);if(!Ext.String.startsWith(o,p,true)){return}n.inputEl.dom.value="";if(n.queryMode=="local"){n.clearLocalFilter();n.getPicker().refresh()}}},onValueCollectionEndUpdate:function(){var n=this,l=n.valueCollection.items,m=n.valueStore;if(n.isSelectionUpdating()){return}if(n.filterPickList){n.changingFilters=true;n.store.filter(n.listFilter);n.changingFilters=false}Ext.form.field.ComboBox.prototype.onValueCollectionEndUpdate.call(this);Ext.suspendLayouts();if(m){m.suspendEvents();m.loadRecords(l);m.resumeEvents()}n.refreshEmptyText();n.clearInput();Ext.resumeLayouts(true);n.alignPicker()},checkValueOnDataChange:Ext.emptyFn,onSelectionChange:function(s,n){var p=this,o=p.inputEl,q;p.applyMultiselectItemMarkup();p.applyAriaListMarkup();p.applyAriaSelectedText();if(o){if(n.length===0){o.dom.removeAttribute("aria-activedescendant")}else{q=p.getAriaListNode(n[0]);if(q){o.dom.setAttribute("aria-activedescendant",q.id)}}}p.fireEvent("valueselectionchange",p,n)},onFocusChange:function(p,m,o){var n=this;Ext.form.field.ComboBox.prototype.onFocusChange.call(this,p,m,o);n.fireEvent("valuefocuschange",n,m,o)},getAriaListNode:function(n){var l=this.ariaList,m;if(l&&n){m=l.selectNode('[data-recordid="'+n.internalId+'"]')}return m},doDestroy:function(){Ext.destroy(this.selectionModel);Ext.form.field.ComboBox.prototype.doDestroy.call(this)},getSubTplData:function(y){var t=this,A=t.id,v=Ext.form.field.ComboBox.prototype.getSubTplData.apply(this,arguments),x=t.emptyText,w=x&&v.value.length<1,C=t.growMin,B=t.growMax,z="",u;v.value="";v.emptyText=w?x:"";v.itemListCls="";v.emptyCls=w?t.emptyUICls:"";if(t.grow){if(Ext.isNumber(C)&&C>0){z+="min-height:"+C+"px;"}if(Ext.isNumber(B)&&B>0){z+="max-height:"+B+"px;"}}else{z+="max-height: 1px;"}v.wrapperStyle=z;if(t.stacked===true){v.itemListCls+=" x-tagfield-stacked"}if(!t.multiSelect){v.itemListCls+=" x-tagfield-singleselect"}if(!t.ariaStaticRoles[t.ariaRole]){v.multiSelect=t.multiSelect;v.ariaSelectedListLabel=Ext.String.htmlEncode(t.ariaSelectedListLabel);u=v.ariaElAttributes;if(u){u["aria-owns"]=A+"-inputEl "+A+"-picker "+A+"-ariaList"}u=v.inputElAriaAttributes;if(u){u.role="textbox";u["aria-describedby"]=A+"-selectedText "+(u["aria-describedby"]||"")}}return v},afterRender:function(){var m=this,l=m.inputEl,n=m.emptyText;if(n){if(Ext.supports.Placeholder&&l){l.dom.removeAttribute("placeholder")}}m.applyMultiselectItemMarkup();m.applyAriaListMarkup();m.applyAriaSelectedText();Ext.form.field.ComboBox.prototype.afterRender.apply(this,arguments);m.emptyClsElements.push(m.listWrapper,m.placeholderLabel)},findRecord:function(l,m){var n=this.getStore().queryRecords(l,m);return n.length?n[0]:false},getCursorPosition:function(){var f;if(document.selection){f=document.selection.createRange();f.collapse(true);f.moveStart("character",-this.inputEl.dom.value.length);f=f.text.length}else{f=this.inputEl.dom.selectionStart}return f},hasSelectedText:function(){var l=this.inputEl.dom,m,n;if(document.selection){m=document.selection;n=m.createRange();return(n.parentElement()===l)}else{return l.selectionStart!==l.selectionEnd}},onKeyDown:function(e){var K=this,G=e.getKey(),H=K.inputEl,B=H&&H.dom.value,E=K.valueCollection,z=K.selectionModel,C=false,J,I,D,F,A,y;if(K.destroyed||K.readOnly||K.disabled||!K.editable){return}J=E.getCount();if(J>0&&B===""){I=(z.getCount()>0)?E.indexOf(z.getLastSelected()):-1;if((G===e.BACKSPACE&&K.clearOnBackspace)||(G===e.DELETE&&I>-1)){if(I>-1){if(z.getCount()>1){I=-1}D=z.getSelection();F=[];for(A=0,y=D.length;A<y;A++){F.push(D[A].get(K.displayField))}F=F.join(", ")}else{D=E.last();F=D.get(K.displayField)}E.remove(D);if(F){K.ariaErrorEl.dom.innerHTML=Ext.String.formatEncode(K.ariaDeselectedText,F)}z.clearSelections();if(I===(J-1)){z.select(E.last())}else{if(I>-1){z.select(I)}else{if(E.getCount()){z.select(E.last())}}}C=true}else{if(G===e.RIGHT||G===e.LEFT){if(I===-1&&G===e.LEFT){z.select(E.last());C=true}else{if(I>-1){if(G===e.RIGHT){if(I<(J-1)){z.select(I+1,e.shiftKey);C=true}else{if(!e.shiftKey){z.deselectAll();C=true}}}else{if(G===e.LEFT&&(I>0)){z.select(I-1,e.shiftKey);C=true}}}}}else{if(G===e.A&&e.ctrlKey){z.selectAll();C=e.A}}}}if(C){K.preventKeyUpEvent=C;e.stopEvent();return}if(K.isExpanded&&G===e.ENTER&&K.picker.highlightedItem){K.preventKeyUpEvent=true}if(K.enableKeyEvents){Ext.form.field.ComboBox.prototype.onKeyDown.apply(this,arguments)}if(!e.isSpecialKey()&&!e.hasModifier()){z.deselectAll()}},onKeyUp:function(t,q){var p=this,u=p.inputEl,e=u.dom.value,s=p.preventKeyUpEvent;if(p.preventKeyUpEvent){t.stopEvent();if(s===true||t.getKey()===s){delete p.preventKeyUpEvent}return}if(p.multiSelect&&p.delimiterRegexp&&p.delimiterRegexp.test(e)||(p.createNewOnEnter&&t.getKey()===t.ENTER)){if(p.createNewOnEnter&&e){p.ariaErrorEl.dom.innerHTML=Ext.String.formatEncode(p.ariaSelectedText,e)}e=Ext.Array.clean(e.split(p.delimiterRegexp));u.dom.value="";p.setValue(p.valueStore.getRange().concat(e));u.focus()}Ext.form.field.ComboBox.prototype.onKeyUp.call(this,t,q)},onEsc:function(n){var o=this,p=o.selectionModel,e=o.isExpanded;Ext.form.field.ComboBox.prototype.onEsc.call(this,n);if(!e&&p.getCount()>0){p.deselectAll()}n.stopEvent()},onTypeAhead:function(){var p=this,q=p.displayField,s=p.inputEl.dom,t=p.getStore().findRecord(q,s.value),w,u,v;if(t){w=t.get(q);u=w.length;v=s.value.length;if(v!==0&&v!==u){p.lastMutatedValue=w;s.value=w;p.selectText(v,w.length)}}},onItemListClick:function(e){var o=this,q=o.selectionModel,p=e.getTarget(o.tagItemSelector),s=p?e.getTarget(o.tagItemCloseSelector):false;if(o.readOnly||o.disabled){return}e.stopPropagation();if(p){if(s){o.removeByListItemNode(p);if(o.valueStore.getCount()>0){o.fireEvent("select",o,o.valueStore.getRange())}}else{o.toggleSelectionByListItemNode(p,e.shiftKey)}if(!Ext.supports.TouchEvents){o.inputEl.focus()}}else{if(q.getCount()>0){q.deselectAll()}o.inputEl.focus();if(o.triggerOnClick){o.onTriggerClick()}}},onItemMouseDown:function(e){e.preventDefault()},getMultiSelectItemMarkup:function(){var g=this,l=(g._getChildElCls&&g._getChildElCls())||"";if(!g.multiSelectItemTpl){if(!g.labelTpl){g.labelTpl="{"+g.displayField+"}"}g.labelTpl=g.lookupTpl("labelTpl");if(g.tipTpl){g.tipTpl=g.lookupTpl("tipTpl")}g.multiSelectItemTpl=new Ext.XTemplate(['<tpl for=".">','<li data-selectionIndex="{[xindex - 1]}" data-recordId="{internalId}" role="presentation" class="'+g.tagItemCls+l,'<tpl if="this.isSelected(values)">'," "+g.tagSelectedCls,"</tpl>","{%","values = values.data;","%}",g.tipTpl?'" data-qtip="{[this.getTip(values)]}">':'">','<div role="presentation" class="'+g.tagItemTextCls+'">{[this.getItemLabel(values)]}</div>','<div role="presentation" class="'+g.tagItemCloseCls+l+'"></div>',"</li>","</tpl>",{isSelected:function(e){return g.selectionModel.isSelected(e)},getItemLabel:function(e){return Ext.String.htmlEncode(g.labelTpl.apply(e))},getTip:function(e){return Ext.String.htmlEncode(g.tipTpl.apply(e))},strict:true}])}if(!g.multiSelectItemTpl.isTemplate){g.multiSelectItemTpl=this.lookupTpl("multiSelectItemTpl")}return g.multiSelectItemTpl.apply(g.valueCollection.getRange())},applyMultiselectItemMarkup:function(){var g=this,l=g.itemList;if(l){l.select(".x-tagfield-item").destroy();g.inputElCt.insertHtml("beforeBegin",g.getMultiSelectItemMarkup());g.autoSize()}},getAriaListMarkup:function(){var l=this,m,n;if(!l.ariaListItemTpl){l.ariaListItemTpl=new Ext.XTemplate(['<tpl for=".">','<li id="'+l.id+'-{internalId}" role="option"',' class="x-tagfield-arialist-item"',' aria-selected="{[this.isPicked(values)]}"','  data-recordId="{internalId}"',">","{[this.getItemLabel(values.data)]}","</li>","</tpl>",{isPicked:function(e){return l.filterPicked(e)?"false":"true"},isSelected:function(e){return l.selectionModel.isSelected(e)?"true":"false"},getItemLabel:function(e){return Ext.String.htmlEncode(l.labelTpl.apply(e))},strict:true}])}if(!l.ariaListItemTpl.isTemplate){l.ariaListtemTpl=l.lookupTpl("ariaListItemTpl")}n=l.valueCollection.getRange();return l.ariaListItemTpl.apply(n)},applyAriaListMarkup:function(){var l=this,g=l.ariaList;if(g){g.select("*").destroy();g.insertHtml("afterBegin",l.getAriaListMarkup())}},getAriaSelectedText:function(l){var g=this;if(!g.ariaSelectedItemTpl){g.ariaSelectedItemTpl=new Ext.XTemplate(['<tpl for="." between=", ">',"{[this.getItemLabel(values.data)]}","</tpl>",{getItemLabel:function(e){return Ext.String.htmlEncode(g.labelTpl.apply(e))},strict:true}])}if(!g.ariaSelectedItemTpl.isTemplate){g.ariaSelectedItemTpl=g.lookupTpl("ariaSelectedItemTpl")}return Ext.String.format(g.ariaSelectedText,g.ariaSelectedItemTpl.apply(l))},applyAriaSelectedText:function(){var o=this,m=o.selectedText,p,n;if(m){p=o.valueCollection.getRange();n=p.length?o.getAriaSelectedText(p):o.ariaNoneSelectedText;m.dom.innerHTML=Ext.String.htmlEncode(n)}},getRecordByListItemNode:function(f){return this.valueCollection.items[Number(f.getAttribute("data-selectionIndex"))]},toggleSelectionByListItemNode:function(q,o){var p=this,n=p.getRecordByListItemNode(q),s=p.selectionModel;if(n){if(s.isSelected(n)){s.deselect(n)}else{s.select(n,o)}}},removeByListItemNode:function(n){var m=this,l=m.getRecordByListItemNode(n);if(l){m.pickerSelectionModel.deselect(l)}},getDisplayValue:function(){return this.getRawValue()},getRawValue:function(){var n=this,p=n.getValueRecords(),q=[],o,s;for(o=0,s=p.length;o<s;o++){q.push(p[o].data[n.displayField])}return q.join(",")},setRawValue:function(f){return},removeValue:function(v){var w=this,t=w.valueCollection,u,s,p,q=[];if(v){v=Ext.Array.from(v);for(s=0,u=v.length;s<u;++s){p=v[s];if(!p.isModel){p=t.byValue.get(p)}if(p){q.push(p)}}w.valueCollection.beginUpdate();w.pickerSelectionModel.deselect(q);w.valueCollection.endUpdate()}},setValue:function(G,J,R){var K=this,O=K.valueStore,U=K.valueField,L=[],N=K.store,E=K.autoLoadOnValue,P=N.getCount()>0||N.isLoaded(),T=N.hasPendingLoad(),I=E&&!P&&!T,Q,C,D,F,S,M,H;if(Ext.isEmpty(G)){G=null;H=true}else{if(Ext.isString(G)&&K.multiSelect){G=G.split(K.delimiter)}else{G=Ext.Array.from(G,true)}}if(!H&&K.queryMode==="remote"&&!N.isEmptyStore&&R!==true&&I){for(D=0,C=G.length;D<C;D++){Q=G[D];if(!Q||!Q.isModel){F=O.findExact(U,Q);if(F>-1){G[D]=O.getAt(F)}else{F=K.findRecord(U,Q);if(!F){if(K.forceSelection){L.push(Q)}else{F={};F[K.valueField]=Q;F[K.displayField]=Q;S=K.valueStore.getModel();F=new S(F)}}if(F){G[D]=F}}}}if(L.length){M={};M[K.valueParam||K.valueField]=L.join(K.delimiter);N.load({params:M,callback:function(){K.setValue(G,J,true);K.autoSize();K.lastQuery=false}});return false}}if(!H&&!K.multiSelect&&G.length>0){for(D=G.length-1;D>=0;D--){if(G[D].isModel){G=G[D];break}}if(Ext.isArray(G)){G=G[G.length-1]}}return Ext.form.field.ComboBox.prototype.setValue.call(this,G,J)},updateValue:function(){var m=this,n=m.valueCollection.getRange(),p=n.length,o;for(o=0;o<p;o++){n[o]=n[o].get(m.valueField)}m.setHiddenValue(n);m.value=m.multiSelect?n:n[0];if(!Ext.isDefined(m.value)){m.value=undefined}m.applyMultiselectItemMarkup();m.applyAriaListMarkup();m.applyAriaSelectedText();m.checkChange()},getValueRecords:function(){return this.valueCollection.getRange()},getSubmitData:function(){var l=this,g=Ext.form.field.ComboBox.prototype.getSubmitData.apply(this,arguments);if(l.multiSelect&&l.encodeSubmitValue&&g&&g[l.name]){g[l.name]=Ext.encode(g[l.name])}return g},assertValue:function(){var p=this,n=p.inputEl.dom.value,m=!Ext.isEmpty(n)?p.findRecordByDisplay(n):false,o=false;if(!m&&!p.forceSelection&&p.createNewOnBlur&&!Ext.isEmpty(n)){o=n}else{if(m){o=m}}if(o){p.addValue(o)}p.inputEl.dom.value="";p.collapse();p.refreshEmptyText()},isEqual:function(w,x){var u=Ext.Array.from,t=this.valueField,s,v,y,q;w=u(w);x=u(x);v=w.length;if(v!==x.length){return false}for(s=0;s<v;s++){y=w[s].isModel?w[s].get(t):w[s];q=x[s].isModel?x[s].get(t):x[s];if(y!==q){return false}}return true},onFocus:function(){var l=this,m=l.focusCls,n=l.itemList;if(m&&n){n.addCls(m)}Ext.form.field.ComboBox.prototype.onFocus.apply(this,arguments)},onBlur:function(){var l=this,m=l.focusCls,n=l.itemList;if(m&&n){n.removeCls(m)}Ext.form.field.ComboBox.prototype.onBlur.apply(this,arguments)},renderActiveError:function(){var m=this,n=m.invalidCls,o=m.itemList,p=m.hasActiveError();if(n&&o){o[p?"addCls":"removeCls"](m.invalidCls+"-field")}Ext.form.field.ComboBox.prototype.renderActiveError.apply(this,arguments)},autoSize:function(){var f=this;if(f.grow&&f.rendered){f.autoSizing=true;f.updateLayout()}return f},afterComponentLayout:function(){var g=this,l;if(g.autoSizing){l=g.getHeight();if(l!==g.lastInputHeight){if(g.isExpanded){g.alignPicker()}g.fireEvent("autosize",g,l);g.lastInputHeight=l;g.autoSizing=false}}}},0,["tagfield"],["component","box","field","textfield","pickerfield","combobox","combo","tagfield"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,tagfield:true},["widget.tagfield"],0,[Ext.form.field,"Tag"],0));(Ext.cmd.derive("Ext.picker.Time",Ext.view.BoundList,{config:{store:true},statics:{createStore:function(x,t){var u=Ext.Date,s=u.clearTime,y=this.prototype.initDate,w=[],q=s(new Date(y[0],y[1],y[2])),v=u.add(s(new Date(y[0],y[1],y[2])),"mi",(24*60)-1);while(q<=v){w.push({disp:u.dateFormat(q,x),date:q});q=u.add(q,"mi",t)}return new Ext.data.Store({model:Ext.picker.Time.prototype.modelType,data:w})}},increment:15,format:"g:i A",displayField:"disp",initDate:[2008,0,1],componentCls:"x-timepicker",alignOnScroll:false,loadMask:false,initComponent:function(){var n=this,p=Ext.Date,o=p.clearTime,m=n.initDate;n.absMin=o(new Date(m[0],m[1],m[2]));n.absMax=p.add(o(new Date(m[0],m[1],m[2])),"mi",(24*60)-1);n.updateList();Ext.view.BoundList.prototype.initComponent.call(this)},setStore:function(f){this.store=(f===true)?Ext.picker.Time.createStore(this.format,this.increment):f},setMinValue:function(f){this.minValue=f;this.updateList()},setMaxValue:function(f){this.maxValue=f;this.updateList()},normalizeDate:function(l){var g=this.initDate;l.setFullYear(g[0],g[1],g[2]);return l},updateList:function(){var n=this,q=n.normalizeDate(n.minValue||n.absMin),s=n.normalizeDate(n.maxValue||n.absMax),o=n.getStore().getFilters(),p=n.rangeFilter;o.beginUpdate();if(p){o.remove(p)}p=n.rangeFilter=new Ext.util.Filter({filterFn:function(f){var e=f.get("date");return e>=q&&e<=s}});o.add(p);o.endUpdate()}},0,["timepicker"],["component","box","dataview","boundlist","timepicker"],{component:true,box:true,dataview:true,boundlist:true,timepicker:true},["widget.timepicker"],0,[Ext.picker,"Time"],function(){this.prototype.modelType=Ext.define(null,{extend:"Ext.data.Model",fields:["disp","date"]})}));(Ext.cmd.derive("Ext.form.field.Time",Ext.form.field.ComboBox,{alternateClassName:["Ext.form.TimeField","Ext.form.Time"],triggerCls:"x-form-time-trigger",minText:"The time in this field must be equal to or after {0}",maxText:"The time in this field must be equal to or before {0}",invalidText:"{0} is not a valid time",format:"g:i A",altFormats:"g:ia|g:iA|g:i a|g:i A|h:i|g:i|H:i|ga|ha|gA|h a|g a|g A|gi|hi|gia|hia|g|H|gi a|hi a|giA|hiA|gi A|hi A",formatText:"Expected time format HH:MM space AM or PM",increment:15,pickerMaxHeight:300,selectOnTab:true,snapToIncrement:false,valuePublishEvent:["select","blur"],initDate:"1/1/2008",initDateParts:[2008,0,1],initDateFormat:"j/n/Y",queryMode:"local",displayField:"disp",valueField:"date",initComponent:function(){var l=this,m=l.minValue,n=l.maxValue;if(m){l.setMinValue(m)}if(n){l.setMaxValue(n)}l.displayTpl=new Ext.XTemplate('<tpl for=".">{[typeof values === "string" ? values : this.formatDate(values["'+l.displayField+'"])]}<tpl if="xindex < xcount">'+l.delimiter+"</tpl></tpl>",{formatDate:l.formatDate.bind(l)});l.store=Ext.picker.Time.createStore(l.format,l.increment);Ext.form.field.ComboBox.prototype.initComponent.call(this);l.getPicker()},afterQuery:function(l){var g=this;Ext.form.field.ComboBox.prototype.afterQuery.call(this,l);if(g.value===null&&g.getRawValue()&&g.validateOnChange){g.validate()}},isEqual:function(u,o){var s=Ext.Array.from,p=Ext.Date.isEqual,q,t;u=s(u);o=s(o);t=u.length;if(t!==o.length){return false}for(q=0;q<t;q++){if(!(o[q] instanceof Date)||!(u[q] instanceof Date)||!p(o[q],u[q])){return false}}return true},setMinValue:function(l){var m=this,n=m.picker;m.setLimit(l,true);if(n){n.setMinValue(m.minValue)}},setMaxValue:function(l){var m=this,n=m.picker;m.setLimit(l,false);if(n){n.setMaxValue(m.maxValue)}},setLimit:function(q,n){var s=this,o,p;if(Ext.isString(q)){o=s.parseDate(q)}else{if(Ext.isDate(q)){o=q}}if(o){p=s.getInitDate();p.setHours(o.getHours(),o.getMinutes(),o.getSeconds(),o.getMilliseconds())}else{p=null}s[n?"minValue":"maxValue"]=p},getInitDate:function(p,o,m){var n=this.initDateParts;return new Date(n[0],n[1],n[2],p||0,o||0,m||0,0)},valueToRaw:function(f){return this.formatDate(this.parseDate(f))},getErrors:function(G){G=arguments.length>0?G:this.getRawValue();var y=this,v=Ext.String.format,w=Ext.form.field.ComboBox.prototype.getErrors.call(this,G),x=y.minValue,z=y.maxValue,B=y.displayTplData,F=y.getRawValue(),C,A,D,E;if(B&&B.length>0){for(C=0,A=B.length;C<A;C++){E=B[C];E=E.date||E.disp;D=y.parseDate(E);if(!D){w.push(v(y.invalidText,E,Ext.Date.unescapeFormat(y.format)));continue}}}else{if(F.length){D=y.parseDate(F);if(!D){w.push(v(y.invalidText,F,Ext.Date.unescapeFormat(y.format)))}}}if(!w.length){if(x&&D<x){w.push(v(y.minText,y.formatDate(x)))}if(z&&D>z){w.push(v(y.maxText,y.formatDate(z)))}}return w},formatDate:function(o){var m=[],n,p;o=Ext.Array.from(o);for(n=0,p=o.length;n<p;n++){m.push(Ext.form.field.Date.prototype.formatDate.call(this,o[n]))}return m.join(this.delimiter)},parseDate:function(p){var q=this,v=p,t=q.altFormats,w=q.altFormatsArray,s=0,u;if(p&&!Ext.isDate(p)){v=q.safeParse(p,q.format);if(!v&&t){w=w||t.split("|");u=w.length;for(;s<u&&!v;++s){v=q.safeParse(p,w[s])}}}if(v&&q.snapToIncrement){v=new Date(Ext.Number.snap(v.getTime(),q.increment*60*1000))}return v},safeParse:function(o,u){var p=this,s=Ext.Date,q,t=null;if(s.formatContainsDateInfo(u)){t=s.parse(o,u)}else{q=s.parse(p.initDate+" "+o,p.initDateFormat+" "+u);if(q){t=q}}return t},getSubmitValue:function(){var n=this,l=n.submitFormat||n.format,m=n.getValue();return m?Ext.Date.format(m,l):null},createPicker:function(){var f=this;f.listConfig=Ext.apply({xtype:"timepicker",pickerField:f,cls:undefined,minValue:f.minValue,maxValue:f.maxValue,increment:f.increment,format:f.format,maxHeight:f.pickerMaxHeight},f.listConfig);return Ext.form.field.ComboBox.prototype.createPicker.call(this)},completeEdit:function(){var l=this,g=l.getValue();Ext.form.field.ComboBox.prototype.completeEdit.apply(this,arguments);if(l.validateValue(g)){l.setValue(g)}},findRecordByValue:function(f){if(typeof f==="string"){f=this.parseDate(f)}return Ext.form.field.ComboBox.prototype.findRecordByValue.call(this,f)},rawToValue:function(u){var o=this,q,s,p,t;if(o.multiSelect){s=[];q=Ext.Array.from(u);for(p=0,t=q.length;p<t;p++){s.push(o.parseDate(q[p]))}return s}return o.parseDate(u)},setValue:function(l){var g=this;if(g.creatingPicker){return}g.getPicker();if(Ext.isDate(l)){l=g.getInitDate(l.getHours(),l.getMinutes(),l.getSeconds())}return Ext.form.field.ComboBox.prototype.setValue.call(this,l)},getValue:function(){return this.rawToValue(Ext.form.field.ComboBox.prototype.getValue.apply(this,arguments))}},0,["timefield"],["component","box","field","textfield","pickerfield","combobox","combo","timefield"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,timefield:true},["widget.timefield"],0,[Ext.form.field,"Time",Ext.form,"TimeField",Ext.form,"Time"],0));(Ext.cmd.derive("Ext.grid.CellContext",Ext.Base,{isCellContext:true,generation:0,constructor:function(f){this.view=f},setPosition:function(l,n){var m=this;if(arguments.length===1){if(l.length){n=l[0];l=l[1]}else{if(l.isCellContext){return m.setAll(l.view,l.rowIdx,l.colIdx,l.record,l.column)}else{if(l.view){m.view=l.view}n=l.column;l=l.row}}}m.setRow(l);m.setColumn(n);return m},setAll:function(s,q,p,t,u){var o=this;o.view=s;o.rowIdx=q;o.colIdx=p;o.record=t;o.column=u;o.generation++;return o},setRow:function(n){var p=this,o=p.view.dataSource,s=p.record,q;if(n!==undefined){if(typeof n==="number"){q=o.getCount();n=n<0?Math.max(q+n,0):Math.max(Math.min(n,q-1),0);p.rowIdx=n;p.record=o.getAt(n)}else{if(n.isModel){p.record=n;p.rowIdx=o.indexOf(n)}else{if(n.tagName||n.isElement){p.record=p.view.getRecord(n);p.rowIdx=o.indexOf(p.record)}}}}if(p.record!==s){p.generation++}return p},setColumn:function(p){var m=this,n=m.view.getVisibleColumnManager(),o=m.column;if(p!==undefined){if(typeof p==="number"){m.colIdx=p;m.column=n.getHeaderAtIndex(p)}else{if(p.isHeader){m.column=p;m.colIdx=n.indexOf(p)}}}if(m.column!==o){m.generation++}return m},getCell:function(f){return this.view.getCellByPosition(this,f)},getRow:function(g){var l=this.view.getRow(this.record);return g?l:Ext.get(l)},getNode:function(g){var l=this.view.getNode(this.record);return g?l:Ext.get(l)},isEqual:function(f){return(f&&f.isCellContext&&f.record===this.record&&f.column===this.column)},clone:function(){var g=this,l=new g.self(g.view);l.rowIdx=g.rowIdx;l.colIdx=g.colIdx;l.record=g.record;l.column=g.column;return l},privates:{isFirstColumn:function(){var f=this.getCell(true);if(f){return !f.previousSibling}},isLastColumn:function(){var f=this.getCell(true);if(f){return !f.nextSibling}},isLastRenderedRow:function(){return this.view.all.endIndex===this.rowIdx},getLastColumnIndex:function(){var f=this.getRow(true);if(f){return f.lastChild.cellIndex}return -1},refresh:function(){var m=this,l=m.view.dataSource.indexOf(m.record),n=m.view.getVisibleColumnManager().indexOf(m.column);m.setRow(l===-1?m.rowIdx:m.record);m.setColumn(n===-1?m.colIdx:m.column)},navigate:function(l){var m=this,n=m.view.getVisibleColumnManager().getColumns();switch(l){case -1:do{if(!m.colIdx){m.colIdx=n.length-1}else{m.colIdx--}m.setColumn(m.colIdx)}while(!m.getCell(true));break;case 1:do{if(m.colIdx>=n.length){m.colIdx=0}else{m.colIdx++}m.setColumn(m.colIdx)}while(!m.getCell(true));break}}},statics:{compare:function(g,l){return g.rowIdx-l.rowIdx||g.colIdx-l.colIdx}}},1,0,0,0,0,0,[Ext.grid,"CellContext"],0));(Ext.cmd.derive("Ext.grid.CellEditor",Ext.Editor,{isCellEditor:true,alignment:"l-l!",hideEl:false,cls:"x-small-editor x-grid-editor x-grid-cell-editor",treeNodeSelector:".x-tree-node-text",shim:false,shadow:false,floating:true,alignOnScroll:false,useBoundValue:false,focusLeaveAction:"completeEdit",setGrid:function(f){this.grid=f},startEdit:function(m,l,n){this.context=this.editingPlugin.context;Ext.Editor.prototype.startEdit.call(this,m,l,n)},onShow:function(){var l=this,g=l.boundEl.down(l.context.view.innerSelector);if(g){if(l.isForTree){g=g.child(l.treeNodeSelector)}g.hide()}Ext.Editor.prototype.onShow.apply(this,arguments)},onFocusEnter:function(){var l=this,m=l.context,n=m.view;m.node=n.getNode(m.record);m.row=n.getRow(m.record);m.cell=m.getCell(true);m.rowIdx=n.indexOf(m.row);l.realign(true);Ext.Editor.prototype.onFocusEnter.apply(this,arguments);l.focusEnterEvent=null},onFocusLeave:function(e){var o=this,p=o.context.view,n=Ext.fly(e.relatedTarget);if(o[o.focusLeaveAction]()===false){e.event.stopEvent();return}delete o.focusLeaveAction;if(!p.destroyed&&p.el.contains(n)&&(!n.isAncestor(e.target)||n===p.el)&&!n.up(p.getCellSelector(),p.el)){o.context.grid.setActionableMode(false,p.actionPosition)}o.cacheElement();Ext.container.Container.prototype.onFocusLeave.apply(o,arguments)},completeEdit:function(n){var l=this,m=l.context;if(l.editing){m.value=l.field.value;if(l.editingPlugin.validateEdit(m)===false){if(m.cancel){m.value=l.originalValue;l.editingPlugin.cancelEdit()}return !!m.cancel}}Ext.Editor.prototype.completeEdit.call(this,n)},onEditComplete:function(q,s){var n=this,o=Ext.Element.getActiveElement(),p;n.editing=false;p=n.boundEl=n.context.getCell();if(p){n.restoreCell();if(p.contains(o)&&p.dom!==o){p.focus()}}Ext.Editor.prototype.onEditComplete.apply(this,arguments);if(s){n.editingPlugin.cancelEdit(n)}else{n.editingPlugin.onEditComplete(n,n.getValue(),n.startValue)}},cacheElement:function(){if(!this.editing&&!this.destroyed){Ext.getDetachedBody().dom.appendChild(this.el.dom)}},onHide:function(){Ext.Editor.superclass.onHide.apply(this,arguments)},onSpecialKey:function(w,x,s){var y=this,t=x.getKey(),u=y.completeOnEnter&&t===x.ENTER&&(!s||!s.fromBoundList),q=y.cancelOnEsc&&t===x.ESC,v=y.editingPlugin.view;if(u||q){x.stopEvent();if(q){y.focusLeaveAction="cancelEdit"}v.ownerGrid.setActionableMode(false)}},getRefOwner:function(){return this.column&&this.column.getView()},restoreCell:function(){var l=this,g=l.boundEl.down(l.context.view.innerSelector);if(g){if(l.isForTree){g=g.child(l.treeNodeSelector)}g.show()}},afterRender:function(){var l=this,g=l.field;Ext.Editor.prototype.afterRender.apply(this,arguments);if(g.isCheckbox){g.mon(g.inputEl,{mousedown:l.onCheckBoxMouseDown,click:l.onCheckBoxClick,scope:l})}},onCheckBoxMouseDown:function(){this.completeEdit=Ext.emptyFn},onCheckBoxClick:function(){delete this.completeEdit;this.field.focus(false,10)},realign:function(z){var u=this,x=u.boundEl,w=x.down(u.context.view.innerSelector),D=w.dom.firstChild,B=x.getWidth(),A=Ext.Array.clone(u.offsets),C=u.grid,v,E="",y=!D||(D.nodeType===3&&!(Ext.String.trim(E=D.data).length));if(u.isForTree){v=u.getTreeNodeOffset(w);B-=Math.abs(v);A[0]+=v}if(C.columnLines){B-=x.getBorderWidth("rl")}if(z===true){u.field.setWidth(B)}if(y){w.dom.innerHTML="X"}u.alignTo(x,u.alignment,A);if(y){w.dom.firstChild.data=E}},getTreeNodeOffset:function(f){return f.child(this.treeNodeSelector).getOffsetsTo(f)[0]}},0,0,["component","box","container","editor"],{component:true,box:true,container:true,editor:true},0,0,[Ext.grid,"CellEditor"],0));(Ext.cmd.derive("Ext.grid.ColumnComponentLayout",Ext.layout.component.Auto,{type:"columncomponent",setWidthInDom:true,_paddingReset:{paddingTop:"",paddingBottom:""},columnAutoCls:"x-column-header-text-container-auto",beginLayout:function(f){Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);f.titleContext=f.getEl("titleEl")},beginLayoutCycle:function(n){var o=this,p=o.owner,m=n.widthModel.shrinkWrap;Ext.layout.component.Auto.prototype.beginLayoutCycle.apply(this,arguments);if(m){p.el.setWidth("")}p.textContainerEl[m&&!p.isGroupHeader?"addCls":"removeCls"](o.columnAutoCls);p.titleEl.setStyle(o._paddingReset)},publishInnerHeight:function(o,p){var q=this,s=q.owner,n;if(s.getRootHeaderCt().hiddenHeaders){o.setProp("innerHeight",0);return}if(!o.hasRawContent){if(s.headerWrap&&!o.hasDomProp("width")){q.done=false;return}n=p-o.getBorderInfo().height;o.setProp("innerHeight",n-s.titleEl.getHeight(),false)}},measureContentHeight:function(f){return f.el.dom.offsetHeight},publishInnerWidth:function(l,g){if(!l.hasRawContent){l.setProp("innerWidth",g-l.getBorderInfo().width,false)}},calculateOwnerHeightFromContentHeight:function(m,n){var o=Ext.layout.component.Auto.prototype.calculateOwnerHeightFromContentHeight.apply(this,arguments),p=this.owner;if(!m.hasRawContent){if(!p.headerWrap||m.hasDomProp("width")){return n+p.titleEl.getHeight()+m.getBorderInfo().height}return null}return o},calculateOwnerWidthFromContentWidth:function(u,s){var t=this.owner,o=u.getPaddingInfo().width,p=this.getTriggerOffset(t,u),q;if(t.isGroupHeader){q=s}else{q=Math.max(s,t.textEl.getWidth()+u.titleContext.getPaddingInfo().width)}return q+o+p},getTriggerOffset:function(n,l){var m=0;if(l.widthModel.shrinkWrap&&!n.menuDisabled){if(n.query(">:not([hidden])").length===0){m=n.getTriggerElWidth()}}return m}},0,0,0,0,["layout.columncomponent"],0,[Ext.grid,"ColumnComponentLayout"],0));(Ext.cmd.derive("Ext.layout.container.Fit",Ext.layout.container.Container,{alternateClassName:"Ext.layout.FitLayout",itemCls:"x-fit-item",type:"fit",manageMargins:true,sizePolicies:[{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}],getItemSizePolicy:function(o,n){var p=n||this.owner.getSizeModel(),m=(p.width.shrinkWrap?0:1)|(p.height.shrinkWrap?0:2);return this.sizePolicies[m]},beginLayoutCycle:function(L,O){var B=this,K=B.lastHeightModel&&B.lastHeightModel.calculated,N=B.lastWidthModel&&B.lastWidthModel.calculated,G=N||K,J=0,I=0,C,R,F,D,P,S,M,H,E,Q;Ext.layout.container.Container.prototype.beginLayoutCycle.apply(this,arguments);if(G&&L.targetContext.el.dom.tagName.toUpperCase()!=="TD"){G=N=K=false}R=L.childItems;P=R.length;for(F=0;F<P;++F){D=R[F];if(O){C=D.target;M=C.minHeight;H=C.minWidth;if(H||M){S=D.marginInfo||D.getMarginInfo();M+=S.height;H+=S.height;if(J<M){J=M}if(I<H){I=H}}}if(G){E=D.el.dom.style;if(K){E.height=""}if(N){E.width=""}}}if(O){L.maxChildMinHeight=J;L.maxChildMinWidth=I}C=L.target;L.overflowX=(!L.widthModel.shrinkWrap&&L.maxChildMinWidth&&C.scrollFlags.x)||Q;L.overflowY=(!L.heightModel.shrinkWrap&&L.maxChildMinHeight&&C.scrollFlags.y)||Q},calculate:function(C){var L=this,O=C.childItems,E=O.length,F=L.getContainerSize(C),D={length:E,ownerContext:C,targetSize:F},I=C.widthModel.shrinkWrap,N=C.heightModel.shrinkWrap,z=C.overflowX,B=C.overflowY,M,G,K,A,H,J;C.state.info=D;if(z||B){M=L.getScrollbarsNeeded(z&&F.width,B&&F.height,C.maxChildMinWidth,C.maxChildMinHeight);if(M){G=Ext.getScrollbarSize();if(M&1){F.height-=G.height}if(M&2){F.width-=G.width}}}if(E>0){for(A=0;A<E;++A){D.index=A;L.fitItem(O[A],D)}}else{D.contentWidth=D.contentHeight=0}if(N||I){K=C.targetContext.getPaddingInfo();if(I){if(B&&!F.gotHeight){L.done=false}else{H=D.contentWidth+K.width;if(M&2){H+=G.width}if(!C.setContentWidth(H)){L.done=false}}}if(N){if(z&&!F.gotWidth){L.done=false}else{J=D.contentHeight+K.height;if(M&1){J+=G.height}if(!C.setContentHeight(J)){L.done=false}}}}},fitItem:function(m,l){var n=this;if(m.invalid){n.done=false;return}l.margins=m.getMarginInfo();l.needed=l.got=0;n.fitItemWidth(m,l);n.fitItemHeight(m,l);if(l.got!==l.needed){n.done=false}},fitItemWidth:function(n,m){var p,o;if(m.ownerContext.widthModel.shrinkWrap){o=n.getProp("width")+m.margins.width;p=m.contentWidth;if(p===undefined){m.contentWidth=o}else{m.contentWidth=Math.max(p,o)}}else{if(n.widthModel.calculated){++m.needed;if(m.targetSize.gotWidth){++m.got;this.setItemWidth(n,m)}else{return}}}this.positionItemX(n,m)},fitItemHeight:function(n,m){var o,p;if(m.ownerContext.heightModel.shrinkWrap){p=n.getProp("height")+m.margins.height;o=m.contentHeight;if(o===undefined){m.contentHeight=p}else{m.contentHeight=Math.max(o,p)}}else{if(n.heightModel.calculated){++m.needed;if(m.targetSize.gotHeight){++m.got;this.setItemHeight(n,m)}else{return}}}this.positionItemY(n,m)},positionItemX:function(n,l){var m=l.margins;if(l.index||m.left){n.setProp("x",m.left)}if(m.width&&l.ownerContext.widthModel.shrinkWrap){n.setProp("margin-right",m.width)}},positionItemY:function(n,l){var m=l.margins;if(l.index||m.top){n.setProp("y",m.top)}if(m.height&&l.ownerContext.heightModel.shrinkWrap){n.setProp("margin-bottom",m.height)}},setItemHeight:function(l,g){l.setHeight(g.targetSize.height-g.margins.height)},setItemWidth:function(l,g){l.setWidth(g.targetSize.width-g.margins.width)}},0,0,0,0,["layout.fit"],0,[Ext.layout.container,"Fit",Ext.layout,"FitLayout"],0));(Ext.cmd.derive("Ext.panel.Table",Ext.panel.Panel,{extraBaseCls:"x-grid",extraBodyCls:"x-grid-body",actionableModeCls:"x-grid-actionable",noHeaderBordersCls:"x-no-header-borders",defaultBindProperty:"store",layout:"fit",manageLayoutScroll:false,ariaRole:"presentation",config:{selection:null,focused:null,headerBorders:true,hideHeaders:null},publishes:["selection"],twoWayBindable:["selection"],autoLoad:false,variableRowHeight:false,numFromEdge:2,trailingBufferZone:10,leadingBufferZone:20,hasView:false,viewType:null,deferRowRender:false,sortableColumns:true,multiColumnSort:false,enableLocking:false,scrollerOwner:true,enableColumnMove:true,sealedColumns:false,enableColumnResize:true,rowLines:true,bufferedRenderer:true,ownerGrid:null,colLinesCls:"x-grid-with-col-lines",rowLinesCls:"x-grid-with-row-lines",noRowLinesCls:"x-grid-no-row-lines",hiddenHeaderCtCls:"x-grid-header-ct-hidden",hiddenHeaderCls:"x-grid-header-hidden",resizeMarkerCls:"x-grid-resize-marker",emptyCls:"x-grid-empty",focusable:true,constructor:function(n){var m=this,p=n&&n.ownerGrid,o;m.ownerGrid=p||m;m.actionables=p?p.actionables:[];Ext.panel.Panel.prototype.constructor.call(this,n);o=m.store;o.trackStateChanges=true;if(m.autoLoad){if(!o.isEmptyStore){o.load()}}},registerActionable:function(f){Ext.Array.include(this.actionables,f)},initComponent:function(){var v=this,x=v.columns||v.colModel||[],E,u,y,w,D,z,A,B,C;E=v.store=Ext.data.StoreManager.lookup(v.store||"ext-empty-store");v.enableLocking=v.enableLocking||v.hasLockedColumns(x);if(v.plugins){v.plugins=v.constructPlugins()}if(v.columnLines){v.addBodyCls(v.colLinesCls)}v.addBodyCls(v.rowLines?v.rowLinesCls:v.noRowLinesCls);v.addBodyCls(v.extraBodyCls);if(v.enableLocking){v.self.mixin("lockable",Ext.grid.locking.Lockable);v.injectLockable();B=v.headerCt}else{if(x.isRootHeader){v.headerCt=B=x;B.grid=v;B.forceFit=!!v.forceFit;B.$initParent=v;v.columnManager=B.columnManager;v.visibleColumnManager=B.visibleColumnManager}else{if(Ext.isArray(x)){x={items:x}}v.headerCt=B=new Ext.grid.header.Container(Ext.apply(x,{grid:v,$initParent:v,forceFit:v.forceFit,sortable:v.sortableColumns,enableColumnMove:v.enableColumnMove,enableColumnResize:v.enableColumnResize,columnLines:v.columnLines,sealed:v.sealedColumns}))}if(Ext.isDefined(v.enableColumnHide)){B.enableColumnHide=v.enableColumnHide}}v.columns=z=B.getGridColumns();v.scrollTask=new Ext.util.DelayedTask(v.syncHorizontalScroll,v);v.cls=(v.cls||"")+(" "+v.extraBaseCls);delete v.autoScroll;D=v.plugins&&Ext.Array.findBy(v.plugins,function(e){return e.isBufferedRenderer});if(D){v.bufferedRenderer=D}if(!v.hasView){if(E.isBufferedStore&&!E.getRemoteSort()){for(y=0,w=z.length;y<w;y++){z[y].sortable=false}}v.relayHeaderCtEvents(B);v.features=v.features||[];if(!Ext.isArray(v.features)){v.features=[v.features]}v.dockedItems=[].concat(v.dockedItems||[]);v.dockedItems.unshift(B);v.viewConfig=v.viewConfig||{};u=v.getView();v.items=[u];v.hasView=true;v.bindStore(E,true);v.mon(u,{viewready:v.onViewReady,refresh:v.onRestoreHorzScroll,scope:v});v.syncHeaderVisibility()}v.selModel=v.view.getSelectionModel();v.selModel.on({scope:v,lastselectedchanged:v.updateBindSelection,selectionchange:v.updateBindSelection});v.relayEvents(v.view,["beforeitemlongpress","beforeitemmousedown","beforeitemmouseup","beforeitemmouseenter","beforeitemmouseleave","beforeitemclick","beforeitemdblclick","beforeitemcontextmenu","itemlongpress","itemmousedown","itemmouseup","itemmouseenter","itemmouseleave","itemclick","itemdblclick","itemcontextmenu","beforecellclick","cellclick","beforecelldblclick","celldblclick","beforecellcontextmenu","cellcontextmenu","beforecellmousedown","cellmousedown","beforecellmouseup","cellmouseup","beforecellkeydown","cellkeydown","rowclick","rowdblclick","rowcontextmenu","rowmousedown","rowmouseup","rowkeydown","beforeitemkeydown","itemkeydown","beforeitemkeyup","itemkeyup","beforeitemkeypress","itemkeypress","beforecontainermousedown","beforecontainermouseup","beforecontainermouseover","beforecontainermouseout","beforecontainerclick","beforecontainerdblclick","beforecontainercontextmenu","beforecontainerkeydown","beforecontainerkeyup","beforecontainerkeypress","containermouseup","containermousedown","containermouseover","containermouseout","containerclick","containerdblclick","containercontextmenu","containerkeydown","containerkeyup","containerkeypress","beforeselect","select","beforedeselect","deselect","beforerowexit"]);if(!v.selModel.isSpreadsheetModel){v.relayEvents(v.view,["selectionchange"])}Ext.panel.Panel.prototype.initComponent.call(this);if(v.enableLocking){v.afterInjectLockable()}else{delete B.$initParent}v.addStateEvents(["columnresize","columnmove","columnhide","columnshow","sortchange","filterchange","groupchange"])},syncHeaderVisibility:function(){var t=this,A=t.headerCt,y=A.items.items,v=y.length,w=A.height===0,C=!!v,z,u,x,B;if(t.hideHeaders!=null){C=t.hideHeaders}else{for(x=0;C&&x<v;x++){z=y[x];u=z.text;if((u&&u!=="\xa0")||z.columns||(z.isGroupHeader&&z.items.items.length)){C=false}}}if(!A.rendered||C!==w){A.setHeight(C?0:null);A.hiddenHeaders=C;t.headerCt.toggleCls(t.hiddenHeaderCtCls,C);t.toggleCls(t.hiddenHeaderCls,C);if(!C){A.setScrollable({x:false,y:false});B=t.view.getScrollable();if(B){A.getScrollable().addPartner(B,"x")}}}},updateHideHeaders:function(f){if(!this.isConfiguring){this.syncHeaderVisibility()}},beforeRender:function(){var m=this,l=m.bufferedRenderer,n;if(m.lockable){m.getProtoBody().addCls(m.lockingBodyCls)}else{if(l&&m.getSizeModel().height.auto){m.bufferedRenderer=l=false}if(l&&!l.isBufferedRenderer){l={xclass:"Ext.grid.plugin.BufferedRenderer"};Ext.copy(l,m,"variableRowHeight,numFromEdge,trailingBufferZone,leadingBufferZone,scrollToLoadBuffer",true);m.bufferedRenderer=m.addPlugin(l)}n=m.ariaRenderAttributes||(m.ariaRenderAttributes={});n["aria-readonly"]=!m.isEditable;n["aria-multiselectable"]=m.selModel.selectionMode!=="SINGLE"}Ext.panel.Panel.prototype.beforeRender.apply(this,arguments)},beforeLayout:function(){var f=this.mixins.lockable;if(f){f.beforeLayout.call(this)}Ext.panel.Panel.prototype.beforeLayout.call(this)},afterLayout:function(g){var l=this.mixins.lockable;if(l){l.syncLockableLayout.call(this,g)}Ext.panel.Panel.prototype.afterLayout.call(this,g)},onHide:function(l,n,m){this.getView().onOwnerGridHide();Ext.panel.Panel.prototype.onHide.call(this,l,n,m)},onShow:function(){Ext.panel.Panel.prototype.onShow.call(this);this.getView().onOwnerGridShow()},getHeaderContainer:function(){return this.getView().getHeaderCt()},getColumns:function(){return this.getColumnManager().getColumns()},getVisibleColumns:function(){return this.getVisibleColumnManager().getColumns()},getScrollable:function(){return this.scrollable||this.view.getScrollable()},focus:function(){this.getView().focus()},disableColumnHeaders:function(){this.headerCt.disable()},enableColumnHeaders:function(){this.headerCt.enable()},hasLockedColumns:function(n){var o,p,m;if(n.isRootHeader){n=n.items.items}else{if(Ext.isObject(n)){n=n.items}}for(o=0,p=n.length;o<p;o++){m=n[o];if(!m.processed&&m.locked){return true}}},relayHeaderCtEvents:function(f){this.relayEvents(f,["columnresize","columnmove","columnhide","columnshow","columnschanged","sortchange","headerclick","headercontextmenu","headertriggerclick"])},getState:function(){var m=this,l=Ext.panel.Panel.prototype.getState.call(this),n=m.store.getState();l=m.addPropertyToState(l,"columns",m.headerCt.getColumnsState());if(n){l.storeState=n}return l},applyState:function(o){var p=this,u=o.sort,t=o.storeState,s=p.store,q=o.columns=p.buildColumnHash(o.columns);Ext.panel.Panel.prototype.applyState.apply(this,arguments);if(q){p.headerCt.applyColumnsState(q,t)}if(u){if(s.getRemoteSort()){s.sort({property:u.property,direction:u.direction,root:u.root},null,false)}else{s.sort(u.property,u.direction)}}else{if(t){s.applyState(t)}}},buildColumnHash:function(o){var q=o.length,n,p,s;if(o){s={};for(p=0,q=o.length;p<q;p++){n=o[p];n.index=p;if(n.columns){n.columns=this.buildColumnHash(n.columns)}s[n.id]=n}return s}},getStore:function(){return this.store},onViewRefresh:function(l,g){this.onItemAdd(g,0)},onItemAdd:function(A,w,C,E){var u=this,D=A.length,x=u.freeRowContexts,v=u.liveRowContexts||(u.liveRowContexts={}),B,z,y;for(z=0;z<D;z++){y=A[z];if(!v[y.internalId]){B=x&&x.shift();if(!B){B=new Ext.grid.RowContext({ownerGrid:u})}u.liveRowContexts[y.internalId]=B;B.setRecord(y,w++)}}},onItemRemove:function(z,w,C,D){var E=this,x=E.freeRowContexts||(E.freeRowContexts=[]),u=E.liveRowContexts,v=C.length,y,A,B;for(y=0;y<v;y++){A=C[y].getAttribute("data-recordId");B=u[A];if(B){B.free();x.push(B);delete u[A]}}},createManagedWidget:function(n,l,m){return this.liveRowContexts[m.internalId].getWidget(n,l)},destroyManagedWidgets:function(t){var y=this,w=y.liveRowContexts,u=y.freeRowContexts,v=u&&u.length,q,s,x;for(s in w){x=w[s].widgets;if(x){Ext.destroy(x[t]);delete x[t]}}for(q=0;q<v;q++){x=u[q].widgets;if(x){Ext.destroy(x[t]);delete x[t]}}},getManagedWidgets:function(q){var o=this,n=o.liveRowContexts,p,s=[];for(p in n){s.push(n[p].widgets[q])}return s},getView:function(){var n=this,p,m,o;if(!n.view){o=n.viewConfig;p=o.scroll||n.scroll;m=n.scrollable;if(m==null&&o.scrollable==null&&p!==null){if(p===true||p==="both"){m=true}else{if(p===false||p==="none"){m=false}else{if(p==="vertical"){m={x:false,y:true}}else{if(p==="horizontal"){m={x:true,y:false}}}}}}o=Ext.apply({grid:n,ownerGrid:n.ownerGrid,deferInitialRefresh:n.deferRowRender,variableRowHeight:n.variableRowHeight,preserveScrollOnRefresh:true,trackOver:n.trackMouseOver!==false,throttledUpdate:n.throttledUpdate===true,xtype:n.viewType,store:n.store,headerCt:n.headerCt,columnLines:n.columnLines,rowLines:n.rowLines,navigationModel:"grid",features:n.features,panel:n,emptyText:n.emptyText||""},n.viewConfig);if(!("scrollable" in o||"scroll" in o||"autoScroll" in o)&&m!=null){o.scrollable=m}Ext.create(o);if(n.view.emptyText){n.view.emptyText='<div class="'+n.emptyCls+'">'+n.view.emptyText+"</div>"}n.view.getComponentLayout().headerCt=n.headerCt;n.mon(n.view,{uievent:n.processEvent,scope:n});n.headerCt.view=n.view;if(n.hasListeners.viewcreated){n.fireEvent("viewcreated",n,n.view)}}return n.view},getEmptyText:function(){return this.view.emptyText},setEmptyText:function(f){this.emptyText=f;this.view.setEmptyText('<div class="'+this.emptyCls+'">'+f+"</div>");return this},getColumnManager:function(){return this.columnManager},getVisibleColumnManager:function(){return this.visibleColumnManager},getTopLevelColumnManager:function(){return this.ownerGrid.getColumnManager()},getTopLevelVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},setAutoScroll:Ext.emptyFn,applyScrollable:function(g){var l=this.view;l=l&&(l.normalView||l);if(l){l.setScrollable(g)}return g},processEvent:function(v,t,e,z,u,w,x,A){var y=w.position.column;if(y){return y.processEvent.apply(y,arguments)}},ensureVisible:function(l,g){this.doEnsureVisible(l,g)},scrollByDeltaY:function(g,l){this.getView().scrollBy(null,g,l)},scrollByDeltaX:function(g,l){this.getView().scrollBy(g,null,l)},afterCollapse:function(){this.saveScrollPos();Ext.panel.Panel.prototype.afterCollapse.apply(this,arguments)},afterExpand:function(){Ext.panel.Panel.prototype.afterExpand.apply(this,arguments);this.restoreScrollPos()},saveScrollPos:Ext.emptyFn,restoreScrollPos:Ext.emptyFn,onHeaderResize:Ext.emptyFn,onHeaderMove:function(o,u,t,s,p){var q=this;if(q.optimizedColumnMove===false){q.view.refreshView()}else{q.view.moveColumn(s,p,t)}q.delayScroll()},onHeaderHide:function(m,l){var n=this.view;if(!m.childHideCount&&n.refreshCounter){n.refreshView()}},onHeaderShow:function(m,l){var n=this.view;if(n.refreshCounter){n.refreshView()}},onHeadersChanged:function(m,l){var n=this;if(n.rendered&&!n.reconfiguring){n.view.refreshView();n.delayScroll()}},delayScroll:function(){var f=this.view;if(f){this.scrollTask.delay(10,null,null,[f])}},onViewReady:function(){this.fireEvent("viewready",this)},onRestoreHorzScroll:function(){var g=this,l=g.scrollXPos;if(l){g.syncHorizontalScroll(g,true)}},getScrollerOwner:function(){var f=this;if(!this.scrollerOwner){f=this.up("[scrollerOwner]")}return f},getLhsMarker:function(){var f=this;return f.lhsMarker||(f.lhsMarker=Ext.DomHelper.append(f.el,{role:"presentation",cls:f.resizeMarkerCls},true))},getRhsMarker:function(){var f=this;return f.rhsMarker||(f.rhsMarker=Ext.DomHelper.append(f.el,{role:"presentation",cls:f.resizeMarkerCls},true))},getSelection:function(){return this.getSelectionModel().getSelection()},updateSelection:function(n){var m=this,l;if(!m.ignoreNextSelection){m.ignoreNextSelection=true;l=m.getSelectionModel();if(n){l.select(n)}else{l.deselectAll()}m.ignoreNextSelection=false}},updateBindSelection:function(p,n){var m=this,o=null;if(!m.ignoreNextSelection){m.ignoreNextSelection=true;if(n.length){o=p.getLastSelected();m.hasHadSelection=true}if(m.hasHadSelection){m.setSelection(o)}m.ignoreNextSelection=false}},updateFocused:function(f){this.getNavigationModel().setPosition(f)},updateHeaderBorders:function(f){this[f?"removeCls":"addCls"](this.noHeaderBordersCls)},getNavigationModel:function(){return this.getView().getNavigationModel()},getSelectionModel:function(){return this.getView().getSelectionModel()},getScrollTarget:function(){var f=this.getScrollerOwner().query("tableview");return f[f.length-1]},syncHorizontalScroll:function(n,p){var o=this,s=o.view.getScrollX(),q;p=p===true;if(o.rendered&&(p||s!==o.scrollXPos)){if(p){q=o.getScrollTarget();q.setScrollX(s)}o.headerCt.setScrollX(s);o.scrollXPos=s}},onStoreLoad:Ext.emptyFn,getEditorParent:function(){return this.body},bindStore:function(q,p){var o=this,s=o.getView(),n=o.getStore();if(q){o.store=q;if(s.store!==q){s.bindStore(q,false)}o.mon(q,{load:o.onStoreLoad,scope:o});o.storeRelayers=o.relayEvents(q,["filterchange","groupchange"]);if(!o.reconfiguring&&o.hasListeners.storechange&&q!==n){o.fireEvent("storechange",o,q,n)}}else{o.unbindStore()}},unbindStore:function(){var l=this,m=l.store,n;if(m){m.trackStateChanges=false;l.store=null;l.mun(m,{load:l.onStoreLoad,scope:l});Ext.destroy(l.storeRelayers);n=l.view;if(n.store){n.bindStore(null)}if(!l.reconfiguring&&l.hasListeners.storechange){l.fireEvent("storechange",l,null,m)}}},setColumns:function(f){if(f.length||this.getColumnManager().getColumns().length){this.reconfigure(undefined,f)}},setStore:function(l){var g=this;g.reconfigure(l,undefined,true);if(g.isVisible(true)){if(l&&g.autoLoad&&!l.isEmptyStore&&!(l.loading||l.isLoaded())){l.load()}}else{if(!g.globalShowListener){g.globalShowListener=Ext.GlobalEvents.on({show:g.onGlobalShow,scope:g,destroyable:true})}}},onGlobalShow:function(m){var l=this,n=l.store;if(m===l||(m.isAncestor(l)&&l.isVisible(true))){if(n&&l.autoLoad&&!n.isEmptyStore&&!(n.loading||n.isLoaded())){n.load()}Ext.destroy(l.globalShowListener)}},reconfigure:function(G,C,y){var J=this,F=J.store,D=J.headerCt,H=J.lockable,A=D?D.items.getRange():J.columns,I=J.getView(),B,K,E,z,x;if(arguments.length===1&&Ext.isArray(G)){C=G;G=null}if(C){C=Ext.Array.slice(C)}J.reconfiguring=true;if(G){G=Ext.StoreManager.lookup(G);E=G&&G!==F}else{if(y){G=Ext.StoreManager.lookup("ext-empty-store");E=G!==F}}J.fireEvent("beforereconfigure",J,G,C,F,A);Ext.suspendLayouts();if(H){J.reconfigureLockable(G,C,y)}else{B=I.blockRefresh;I.blockRefresh=true;x=I.saveFocusState();if(E){J.unbindStore();J.bindStore(G)}if(C){delete J.scrollXPos;D.removeAll();D.add(C);z=true}D.onOwnerGridReconfigure(E,z);K=I.refreshCounter}Ext.resumeLayouts(true);J.reconfiguring=false;if(H){J.afterReconfigureLockable()}else{I.blockRefresh=B;if(I.refreshCounter===K){I.refreshView();x()}}J.fireEvent("reconfigure",J,G,C,F,A);delete J.reconfiguring;if(E){J.fireEvent("storechange",J,G,F)}},doDestroy:function(){var g=this,l=g.scrollTask;if(g.lockable){g.destroyLockable()}if(l){l.cancel()}Ext.destroy(g.plugins,g.focusEnterLeaveListeners,g.freeRowContexts,Ext.Object.getValues(g.liveRowContexts));Ext.panel.Panel.prototype.doDestroy.call(this);g.unbindStore()},privates:{initFocusableElement:function(){},doEnsureVisible:function(B,G){if(this.lockable){return this.ensureLockedVisible(B,G)}if(typeof B!=="number"&&!B.isEntity){B=this.store.getById(B)}var A=this,y=A.getView(),C=y.getNode(B),J,I,F,E,x,H,z,D,K;if(G){J=G.callback;I=G.scope;F=G.animate;E=G.highlight;x=G.select;H=G.focus;D=G.column}if(A.deferredEnsureVisible){A.deferredEnsureVisible.destroy()}if(!y.componentLayoutCounter){A.deferredEnsureVisible=y.on({resize:A.doEnsureVisible,args:Ext.Array.slice(arguments),scope:A,single:true,destroyable:true});return}if(typeof D==="number"){D=A.ownerGrid.getVisibleColumnManager().getColumns()[D]}if(C){z=y.getScrollable();if(D){K=Ext.fly(C).selectNode(D.getCellSelector())}if(z){z.scrollIntoView(K||C,!!D,F,E)}if(!B.isEntity){B=y.getRecord(C)}if(x){y.getSelectionModel().select(B)}if(H){y.getNavigationModel().setPosition(B,0)}Ext.callback(J,I||A,[true,B,C])}else{if(y.bufferedRenderer){y.bufferedRenderer.scrollTo(B,{animate:F,highlight:E,select:x,focus:H,column:D,callback:function(f,e,g){Ext.callback(J,I||A,[true,e,g])}})}else{Ext.callback(J,I||A,[false,null])}}},getFocusEl:function(){return this.getView().getFocusEl()},setActionableMode:function(m,n){var l=this.ownerGrid;if(!l.destroying&&l.view.setActionableMode(m,n)!==false){l.fireEvent("actionablemodechange",m);l[m?"addCls":"removeCls"](l.actionableModeCls);return true}},getOverflowStyle:function(){this.scrollFlags=this._scrollFlags["false"]["false"];return{overflowX:"hidden",overflowY:"hidden"}},getOverflowEl:function(){return null}}},1,["tablepanel"],["component","box","container","panel","tablepanel"],{component:true,box:true,container:true,panel:true,tablepanel:true},["widget.tablepanel"],0,[Ext.panel,"Table"],0));Ext.define("Ext.theme.neptune.panel.Table",{override:"Ext.panel.Table",lockableBodyBorder:true,initComponent:function(){var f=this;(arguments.callee.$previous||Ext.panel.Panel.prototype.initComponent).call(this);if(!f.hasOwnProperty("bodyBorder")&&!f.hideHeaders&&(f.lockableBodyBorder||!f.lockable)){f.bodyBorder=true}}});(Ext.cmd.derive("Ext.grid.ColumnLayout",Ext.layout.container.HBox,{type:"gridcolumn",firstHeaderCls:"x-column-header-first",lastHeaderCls:"x-column-header-last",initLayout:function(){Ext.layout.container.HBox.prototype.initLayout.call(this);if(this.scrollbarWidth===undefined){this.self.prototype.scrollbarWidth=Ext.getScrollbarSize().width}},beginLayout:function(z){var u=this,B=u.owner,y=u.firstHeaderCls,C=u.lastHeaderCls,A=[y,C],v=u.getVisibleItems(),w=v.length,x,t;Ext.layout.container.HBox.prototype.beginLayout.call(this,z);for(x=0;x<w;x++){t=v[x];if(w===1){t.addCls(A)}else{if(x===0){t.addCls(y);t.removeCls(C)}else{if(x===w-1){t.removeCls(y);t.addCls(C)}else{t.removeCls(A)}}}}u.scrollbarWidth=0;if(B.isRootHeader&&!B.grid.isLocked){u.determineScrollbarWidth(z)}if(!u.scrollbarWidth){z.manageScrollbar=false}},moveItemBefore:function(o,m){var p=o.ownerCt,n=m&&m.nextSibling();if(o!==m&&p){p.remove(o,{destroy:false,detach:false});if(m&&m.destroyed){m=n}}return Ext.layout.container.HBox.prototype.moveItemBefore.call(this,o,m)},determineScrollbarWidth:function(v){var p=this,u=p.owner,q=u.grid,t=q.reserveScrollbar,w=q.view.getScrollable(),s=!t&&w&&w.getY();v.manageScrollbar=s;if(!q.ownerGrid.collapsed&&(t||s)){delete p.scrollbarWidth}},calculate:function(C){var H=this,D=H.owner,G=D.grid,L=C.viewContext,F=C.state,E=C.context,M,K,z,I,J,A,y,B;Ext.layout.container.HBox.prototype.calculate.call(this,C);if(G&&D.isRootHeader&&F.parallelDone){M=L.lockingPartnerContext;if(G.forceFit&&!F.reflexed){if(H.convertWidthsToFlexes(C)){H.cacheFlexes(C);H.done=false;C.invalidate({state:{reflexed:true,scrollbarAdjustment:H.getScrollbarAdjustment(C)}});return}}if((K=F.columnsChanged)===undefined){z=C.target.getVisibleGridColumns();K=false;for(J=0,I=z.length;J<I;J++){A=E.getCmp(z[J]);if(!A.lastBox||A.props.width!==A.lastBox.width){(K||(K=[]))[J]=A}}F.columnsChanged=K;C.setProp("columnsChanged",K)}if(C.manageScrollbar){y=H.getScrollbarAdjustment(C);if(y){B=L.getProp("viewOverflowY");if(B===undefined){H.done=false;return}if(!B){if(M){M.invalidate();M.headerContext.invalidate()}L.invalidate();C.invalidate({state:{scrollbarAdjustment:0}})}}}}},finishedLayout:function(f){Ext.layout.container.HBox.prototype.finishedLayout.call(this,f);if(this.owner.ariaRole==="rowgroup"){this.innerCt.dom.setAttribute("role","row")}f.props.columnsChanged=null},convertWidthsToFlexes:function(A){var v=this,x=0,u=v.sizeModels.calculated,y,w,z,s,t;y=A.childItems;w=y.length;for(z=0;z<w;z++){s=y[z];t=s.target;x+=s.props.width;if(!(t.fixed||t.resizable===false)){t.flex=A.childItems[z].flex=s.props.width;t.width=null;s.widthModel=u}}return x!==A.props.width},getScrollbarAdjustment:function(o){var q=this,p=o.state,s=q.owner.grid,n=p.scrollbarAdjustment;if(n===undefined){n=0;if(s.reserveScrollbar||(o.manageScrollbar&&!s.ownerGrid.getSizeModel().height.shrinkWrap)){n=q.scrollbarWidth}p.scrollbarAdjustment=n}return n},getContainerSize:function(A){var x=this,w,u,v,z,y,B,t,C;if(x.owner.isRootHeader){C=Ext.layout.container.HBox.prototype.getContainerSize.call(this,A);if(C.gotWidth){C.width-=x.getScrollbarAdjustment(A)}}else{v=A.paddingContext.getPaddingInfo();w=u=0;if(!A.widthModel.shrinkWrap){++u;B=A.getProp("innerWidth");z=(typeof B==="number");if(z){++w;B-=v.width;if(B<0){B=0}}}if(!A.heightModel.shrinkWrap){++u;t=A.getProp("innerHeight");y=(typeof t==="number");if(y){++w;t-=v.height;if(t<0){t=0}}}return{width:B,height:t,needed:u,got:w,gotAll:w===u,gotWidth:z,gotHeight:y}}return C},publishInnerCtSize:function(n){var o=this,s=o.owner,q=n.peek("contentWidth"),p=0;if(q!=null&&s.isRootHeader){p=-n.state.scrollbarAdjustment}return Ext.layout.container.HBox.prototype.publishInnerCtSize.call(this,n,p)}},0,0,0,0,["layout.gridcolumn"],0,[Ext.grid,"ColumnLayout"],0));(Ext.cmd.derive("Ext.grid.ColumnManager",Ext.Base,{alternateClassName:["Ext.grid.ColumnModel"],columns:null,constructor:function(m,l,n){this.headerCt=l;if(n){this.secondHeaderCt=n}this.visibleOnly=!!m},getColumns:function(){if(!this.columns){this.cacheColumns()}return this.columns},hasVariableRowHeight:function(){var m=this,n=m.getColumns(),p=n.length,o;if(m.variableRowHeight==null){m.variableRowHeight=false;for(o=0;!m.variableRowHeight&&o<p;o++){m.variableRowHeight=!!n[o].variableRowHeight}}return m.variableRowHeight},getHeaderIndex:function(f){if(f.isGroupHeader){f=this.getHeaderColumns(f)[0]}return Ext.Array.indexOf(this.getColumns(),f)},getHeaderAtIndex:function(m){var l=this.getColumns(),n=l[m];return n||null},getPreviousSibling:function(l){var m=this.getHeaderIndex(l),n=null;if(m>0){n=this.getColumns()[m-1]}return n},getNextSibling:function(l){var m=this.getHeaderIndex(l),n;if(m!==-1){n=this.getColumns()[m+1]}return n||null},getFirst:function(){var f=this.getColumns();return f.length>0?f[0]:null},getLast:function(){var g=this.getColumns(),l=g.length;return l>0?g[l-1]:null},getHeaderByDataIndex:function(o){var p=this.getColumns(),s=p.length,q,n;if(Ext.isEmpty(o)){return null}for(q=0;q<s;++q){n=p[q];if(n.dataIndex===o){return n}}return null},getHeaderById:function(n){var p=this.getColumns(),s=p.length,q,o;for(q=0;q<s;++q){o=p[q];if(o.getItemId()===n){return o}}return null},getVisibleHeaderClosestToIndex:function(g){var l=this.getHeaderAtIndex(g);if(l&&l.hidden){l=l.next(":not([hidden])")||l.prev(":not([hidden])")}return l},cacheColumns:function(){var g=this.getHeaderColumns(this.headerCt),l=this.secondHeaderCt;if(l){g=g.concat(this.getHeaderColumns(l))}this.columns=g},getHeaderColumns:function(g){var l=this.visibleOnly?g.getVisibleGridColumns():g.getGridColumns();return Ext.Array.clone(l)},invalidate:function(){var f=this.rootColumns;this.columns=this.variableRowHeight=null;if(f){f.invalidate()}},destroy:function(){this.columns=this.rootColumns=null;this.callParent()}},1,0,0,0,0,0,[Ext.grid,"ColumnManager",Ext.grid,"ColumnModel"],function(){this.createAlias("indexOf","getHeaderIndex")}));(Ext.cmd.derive("Ext.grid.NavigationModel",Ext.view.NavigationModel,{focusCls:"x-grid-item-focused",getViewListeners:function(){var f=this;return{focusmove:{element:"el",fn:f.onFocusMove},containermousedown:f.onContainerMouseDown,cellmousedown:f.onCellMouseDown,cellclick:f.onCellClick,itemmousedown:f.onItemMouseDown,itemclick:f.onItemClick,itemcontextmenu:f.onItemClick,scope:f}},initKeyNav:function(n){var m=this,l;if(!m.keyNav){m.keyNav=[];m.position=new Ext.grid.CellContext(n)}l=new Ext.util.KeyNav({target:n,ignoreInputFields:true,eventName:Ext.supports.SpecialKeyDownRepeat?"itemkeydown":"itemkeypress",defaultEventAction:"stopEvent",processEvent:m.processViewEvent,up:m.onKeyUp,down:m.onKeyDown,right:m.onKeyRight,left:m.onKeyLeft,pageDown:m.onKeyPageDown,pageUp:m.onKeyPageUp,home:m.onKeyHome,end:m.onKeyEnd,space:m.onKeySpace,enter:m.onKeyEnter,esc:m.onKeyEsc,113:m.onKeyF2,tab:m.onKeyTab,A:{ctrl:true,handler:m.onSelectAllKeyPress},scope:m});m.keyNav.push(l);m.onKeyNavCreate(l)},onKeyNavCreate:Ext.emptyFn,addKeyBindings:function(l){var n=this.keyNav.length,m;for(m=0;m<n;m++){this.keyNav[m].addBindings(l)}},enable:function(){var l=this.keyNav.length,g;for(g=0;g<l;g++){this.keyNav[g].enable()}this.disabled=false},disable:function(){var l=this.keyNav.length,g;for(g=0;g<l;g++){this.keyNav[g].disable()}this.disabled=true},processViewEvent:function(s,t,u,q,o){var p=o.getKey();if(s.actionableMode){this.map.ignoreInputFields=false;if(p===o.TAB||p===o.ESC||p===o.F2){return o}}else{this.map.ignoreInputFields=true;return p===o.TAB?null:o}},onCellMouseDown:function(w,v,x,z,D,A,B){var C=Ext.Component.fromElement(B.target,v),u=B.getTarget(null,null,true),y=u.isFocusable()&&!u.is(w.getCellSelector()),E;if(w.actionableMode){if(!y){y=(E=Ext.ComponentManager.getActiveComponent())&&E!==w&&E.owns(B)}if(y){w.setActionableMode(true,B.position)}else{w.setActionableMode(false,B.position)}return}if(B.pointerType!=="touch"){if(B.position.column.cellFocusable!==false){if(y){if(!w.containsFocus){w.containsFocus=true;w.toggleChildrenTabbability(false)}w.setActionableMode(true,B.position)}else{v.focus()}if(B.button===2){this.fireNavigateEvent(B)}}else{B.preventDefault(true)}if(C&&C.isFocusable&&C.isFocusable()){w.setActionableMode(true,B.position);C.focus()}}},onCellClick:function(w,v,x,z,C,A,u){var y=this,B=Ext.Component.fromElement(u.target,v),t=B&&B.isFocusable&&B.isFocusable();if(!Ext.isIE10m&&!w.el.contains(Ext.Element.getActiveElement())&&u.pointerType!=="touch"){return}if(w.actionableMode){if(!u.position.isEqual(w.actionPosition)){if(!t){w.setActionableMode(false,u.position)}}y.fireEvent("navigate",{view:w,navigationModel:y,keyEvent:u,previousPosition:y.previousPosition,previousRecordIndex:y.previousRecordIndex,previousRecord:y.previousRecord,previousItem:y.previousItem,previousCell:y.previousCell,previousColumnIndex:y.previousColumnIndex,previousColumn:y.previousColumn,position:u.position,recordIndex:u.position.rowIdx,record:u.position.record,selectionStart:y.selectionStart,item:u.item,cell:u.position.cellElement,columnIndex:u.position.colIdx,column:u.position.column})}else{if(y.position.isEqual(u.position)||t){if(Ext.isIE10m&&!y.record){return}y.fireNavigateEvent(u)}else{if(u.position.column.cellFocusable!==false){y.setPosition(u.position,null,u)}else{u.preventDefault()}}}},onFocusMove:function(u){var e=Ext.Component.fromElement(u.delegatedTarget,null,"tableview"),t=u.target,q=Ext.fly(t).is(e.cellSelector),s,v,w;if(e){if(!e.actionableMode&&q){s=e.getRecord(t);v=e.getHeaderByCell(t);if(s&&v){w=new Ext.grid.CellContext(e).setPosition(s,v);if(!w.isEqual(this.position)){this.setPosition(w)}}}else{if((e.actionableMode||e.activating)&&!q&&e.el.contains(u.target)&&e.el.dom!==u.target){e.ownerGrid.fireEvent("cellactivate",e.ownerGrid,e.actionPosition)}}}},onItemMouseDown:function(s,t,u,p,q){var o=this;if(!q.position.cellElement&&(q.pointerType!=="touch")){q.preventDefault();o.getClosestCell(q);if(!o.position.isEqual(q.position)){o.setPosition(q.position,null,q)}s.getScrollable().restoreState()}},onItemClick:function(p,q,n,o,s){if(!s.position.cellElement){this.getClosestCell(s);if(s.pointerType==="touch"){this.setPosition(s.position,null,s)}this.fireNavigateEvent(s)}},getClosestCell:function(A){var v=A.position,z=v.cellElement,s,x,u,w,y,t;if(!z){s=A.getX();x=v.view.getVisibleColumnManager().getColumns();u=x.length;for(w=0;w<u;w++){y=x[w];t=x[w].getBox();if(s>=t.left&&s<t.right){v.setColumn(x[w]);v.rowElement=v.getRow(true);v.cellElement=v.getCell(true);return}}}},deferSetPosition:function(s,t,q,w,u,v){var p=this.view.getFocusTask();p.delay(s,this.setPosition,this,[t,q,w,u,v]);return p},setPosition:function(Q,C,F,P,H){var B=this,K=Q==null&&C==null,G=B.record==null&&B.recordIndex==null&&B.item==null,J,E,I,D,O,L,R,N,M,S;if(Q&&Q.isCellContext){J=Q.view}else{if(F&&F.view){J=F.view}else{if(B.lastFocused){J=B.lastFocused.view}else{J=B.view}}}J.getFocusTask().cancel();if(J.destroyed||!J.refreshCounter||!J.ownerCt||K&&G||!J.all.getCount()){return}I=J.getSelectionModel();D=J.dataSource;O=J.getVisibleColumnManager();S=O.getColumns();if(Q&&Q.isCellContext){N=Q.record;L=Q.rowIdx;R=Math.min(Q.colIdx,S.length-1);M=S[R];if(D.indexOf(N)===-1){E=J.getScrollable();B.recordIndex=-1;if(E&&(E.getPosition().y>=E.getMaxPosition().y-J.all.last(true).offsetHeight)){Q.rowIdx--}L=Math.min(Q.rowIdx,D.getCount()-1);N=D.getAt(L)}}else{if(K){N=L=null}else{if(C==null){C=B.lastFocused?B.lastFocused.column:0}if(typeof Q==="number"){L=Math.max(Math.min(Q,D.getCount()-1),0);N=D.getAt(Q)}else{if(Q.isEntity){N=Q;L=D.indexOf(N)}else{if(Q.tagName){N=J.getRecord(Q);L=D.indexOf(N);if(L===-1){N=null}}else{if(G){return}K=true;N=L=null}}}}if(N){if(L===-1){B.recordIndex=-1;N=D.getAt(0);L=0;C=null}if(C==null){if(!(M=B.column)){R=0;M=S[0]}}else{if(typeof C==="number"){M=S[C];R=C}else{M=C;R=O.indexOf(C)}}}else{K=true;M=R=null}}if(M&&O.indexOf(M)===-1){if(R===-1){R=0}else{R=Math.min(R,S.length-1)}M=S[R]}if(J.actionableMode&&!K){return J.ownerGrid.setActionableMode(false,new Ext.grid.CellContext(J).setPosition(N,M))}if(L===B.recordIndex&&R===B.columnIndex&&J===B.position.view){return B.focusPosition(B.position)}if(B.cell){B.cell.removeCls(B.focusCls)}B.previousRecordIndex=B.recordIndex;B.previousRecord=B.record;B.previousItem=B.item;B.previousCell=B.cell;B.previousColumn=B.column;B.previousColumnIndex=B.columnIndex;B.previousPosition=B.position.clone();B.selectionStart=I.selectionStart;B.position.setAll(J,B.recordIndex=L,B.columnIndex=R,B.record=N,B.column=M);if(K){B.item=B.cell=null}else{B.focusPosition(B.position,H)}if(!P){I.fireEvent("focuschange",I,B.previousRecord,B.record);J.fireEvent("rowfocus",B.record,B.item,B.recordIndex);J.fireEvent("cellfocus",B.record,B.cell,B.position)}if(F&&!H&&B.cell!==B.previousCell){B.fireNavigateEvent(F)}},focusPosition:function(q){var o=this,p,n,s;o.item=o.cell=null;if(q&&q.record&&q.column){p=q.view;if(q.rowElement){n=o.item=q.rowElement}else{n=p.getRowByRecord(q.record)}if(n){o.cell=q.cellElement||Ext.fly(n).down(q.column.getCellSelector(),true);if(o.cell){o.cell=new Ext.dom.Fly(o.cell);p.lastFocused=o.lastFocused=o.position.clone();s=p.getScrollable();if(s){s.scrollIntoView(o.cell)}o.focusItem(o.cell);p.focusEl=o.cell}else{o.position.setAll();o.record=o.column=o.recordIndex=o.columnIndex=null}}else{n=p.dataSource.indexOf(q.record);o.position.setAll();o.record=o.column=o.recordIndex=o.columnIndex=null;if(n!==-1&&p.bufferedRenderer){o.lastKeyEvent=null;p.bufferedRenderer.scrollTo(n,false,o.afterBufferedScrollTo,o)}}}},focusItem:function(f){f.addCls(this.focusCls);f.focus()},getCell:function(){return this.cell},getPosition:function(q){var o=this,t=o.position,p,s,u;if(t.record&&t.column){if(q){return t}s=t.view;u=s.dataSource;p=u.indexOf(t.record);if(p===-1){p=t.rowIdx;if(!(t.record=u.getAt(p))){p=-1}}if(p===-1||s.getVisibleColumnManager().indexOf(t.column)===-1){t.setAll();o.record=o.column=o.recordIndex=o.columnIndex=null}else{return t}}return null},getLastFocused:function(){var l=this,n,m=l.lastFocused;if(m&&m.record&&m.column){n=m.view;if(n.dataSource.indexOf(m.record)!==-1&&n.getVisibleColumnManager().indexOf(m.column)!==-1){return m}}},onKeyTab:function(u){var o=!u.shiftKey,q=u.position.view,p,s,t;p=q.findFocusPosition(u.target,u.position,o,u);s=p.target;t=p.position;if(s){this.actionPosition=t.view.actionPosition=t;Ext.fly(s).focus()}else{q.onRowExit(u,u.item,u.item[o?"nextSibling":"previousSibling"],o)}u.preventDefault()},onKeyUp:function(m){var n=m.view.walkRecs(m.record,-1),l=this.getPosition();if(n){l.setRow(n);if(!l.getCell(true)){l.navigate(-1)}this.setPosition(l,null,m)}},onKeyDown:function(m){var n=m.record.isExpandingOrCollapsing?null:m.view.walkRecs(m.record,1),l=this.getPosition();if(n){l.setRow(n);if(!l.getCell(true)){l.navigate(-1)}this.setPosition(l,null,m)}},onKeyRight:function(g){var l=this.move("right",g);if(l){this.setPosition(l,null,g)}},onKeyLeft:function(g){var l=this.move("left",g);if(l){this.setPosition(l,null,g)}},onKeyEnter:function(m){var n=["cellclick",m.view,m.position.cellElement,m.position.colIdx,m.record,m.position.rowElement,m.recordIndex,m],l=m.position.getCell();if(l){if(!l.query('[tabIndex="-1"]').length){m.stopEvent();m.view.fireEvent.apply(m.view,n);n[0]="celldblclick";m.view.fireEvent.apply(m.view,n)}if(!this.view.actionableMode){this.view.ownerGrid.setActionableMode(true,this.getPosition())}}},onKeyF2:function(m){var n=this.view.ownerGrid,l=n.actionableMode;n.setActionableMode(!l,l?null:this.getPosition())},onKeyEsc:function(g){var l=this.view.ownerGrid;if(l.actionableMode){l.setActionableMode(false)}else{return true}},move:function(p,n){var o=this,q=o.getPosition(),s=q;if(q&&q.record){while(s){s=q.view.walkCells(s,p,n.shiftKey&&(p==="right"||p==="left")?o.vetoRowChange:null,o);if(s&&s.column.cellFocusable!==false){return s}}}},vetoRowChange:function(f){return this.getPosition().record===f.record},onKeyPageDown:function(o){var p=this,t=o.view,u=p.getRowsVisible(),q,s;if(u){if(t.bufferedRenderer){q=Math.min(o.recordIndex+u,t.dataSource.getCount()-1);p.lastKeyEvent=o;t.bufferedRenderer.scrollTo(q,false,p.afterBufferedScrollTo,p)}else{s=t.walkRecs(o.record,u);p.setPosition(s,null,o)}}},onKeyPageUp:function(o){var p=this,t=o.view,u=p.getRowsVisible(),q,s;if(u){if(t.bufferedRenderer){q=Math.max(o.recordIndex-u,0);p.lastKeyEvent=o;t.bufferedRenderer.scrollTo(q,false,p.afterBufferedScrollTo,p)}else{s=t.walkRecs(o.record,-u);p.setPosition(s,null,o)}}},onKeyHome:function(l){var m=this,n=l.view;if(l.altKey){if(n.bufferedRenderer){m.lastKeyEvent=l;n.bufferedRenderer.scrollTo(0,false,m.afterBufferedScrollTo,m)}else{m.setPosition(n.walkRecs(l.record,-n.dataSource.indexOf(l.record)),null,l)}}else{m.setPosition(l.record,0,l)}},afterBufferedScrollTo:function(g,l){this.setPosition(l,null,this.lastKeyEvent,null,!this.lastKeyEvent)},onKeyEnd:function(l){var m=this,n=l.view;if(l.altKey){if(n.bufferedRenderer){m.lastKeyEvent=l;n.bufferedRenderer.scrollTo(n.store.getCount()-1,false,m.afterBufferedScrollTo,m)}else{m.setPosition(n.walkRecs(l.record,n.dataSource.getCount()-1-n.dataSource.indexOf(l.record)),null,l)}}else{m.setPosition(l.record,l.view.getVisibleColumnManager().getColumns().length-1,l)}},getRowsVisible:function(){var n=false,s=this.view,o=s.all.first(),q,p;if(o){q=o.getHeight();p=s.el.getHeight();n=Math.floor(p/q)}return n},fireNavigateEvent:function(g){var l=this;l.fireEvent("navigate",{view:l.position.view,navigationModel:l,keyEvent:g||new Ext.event.Event({}),previousPosition:l.previousPosition,previousRecordIndex:l.previousRecordIndex,previousRecord:l.previousRecord,previousItem:l.previousItem,previousCell:l.previousCell,previousColumnIndex:l.previousColumnIndex,previousColumn:l.previousColumn,position:l.position,recordIndex:l.recordIndex,record:l.record,selectionStart:l.selectionStart,item:l.item,cell:l.cell,columnIndex:l.columnIndex,column:l.column})}},0,0,0,0,["view.navigation.grid"],0,[Ext.grid,"NavigationModel"],0));(Ext.cmd.derive("Ext.view.TableLayout",Ext.layout.component.Auto,{type:"tableview",beginLayout:function(x){var q=this,w=q.owner,y=w.ownerGrid,s=w.lockingPartner,t=x.lockingPartnerContext,v=s&&s.grid.isVisible()&&!s.grid.collapsed,u=x.context;x.doSyncRowHeights=v&&(y.syncRowHeight||y.syncRowHeightOnNextLayout);if(!q.columnFlusherId){q.columnFlusherId=q.id+"-columns";q.rowHeightFlusherId=q.id+"-rows"}Ext.layout.component.Auto.prototype.beginLayout.call(this,x);if(v){if(!t&&s.componentLayout.isRunning()){(t=x.lockingPartnerContext=u.getCmp(s)).lockingPartnerContext=x;if(!t.lockingPartnerContext){t.lockingPartnerContext=x}}if(x.doSyncRowHeights){if(t&&!t.rowHeightSynchronizer){t.rowHeightSynchronizer=t.target.syncRowHeightBegin()}x.rowHeightSynchronizer=q.owner.syncRowHeightBegin()}}(x.headerContext=u.getCmp(q.headerCt)).viewContext=x},beginLayoutCycle:function(g,l){Ext.layout.component.Auto.prototype.beginLayoutCycle.call(this,g,l);if(g.syncRowHeights){g.target.syncRowHeightClear(g.rowHeightSynchronizer);g.syncRowHeights=false}},calculate:function(E){var N=this,H=E.context,C=E.lockingPartnerContext,F=E.headerContext,Q=E.ownerCtContext,G=N.owner,A=F.getProp("columnsChanged"),I=E.state,M,D,K,L,P=G.body.dom,J,O,B;if(!G.all.getCount()&&(!P||!G.body.child("table"))){E.setProp("viewOverflowY",false);Ext.layout.component.Auto.prototype.calculate.call(this,E);return}if(N.calcCount===1&&N.owner.bufferedRenderer){N.owner.bufferedRenderer.beforeTableLayout(E)}if(A===undefined){N.done=false;return}if(A){if(!(M=I.columnFlusher)){H.queueFlush(I.columnFlusher=M={ownerContext:E,columnsChanged:A,layout:N,id:N.columnFlusherId,flush:N.flushColumnWidths},true)}if(!M.flushed){N.done=false;return}}if(E.doSyncRowHeights){if(!(L=I.rowHeightFlusher)){if(!(K=I.rowHeights)){I.rowHeights=K=E.rowHeightSynchronizer;N.owner.syncRowHeightMeasure(K);E.setProp("rowHeights",K)}if(!(D=C.getProp("rowHeights"))){N.done=false;return}H.queueFlush(I.rowHeightFlusher=L={ownerContext:E,synchronizer:K,otherSynchronizer:D,layout:N,id:N.rowHeightFlusherId,flush:N.flushRowHeights},true)}if(!L.flushed){N.done=false;return}}Ext.layout.component.Auto.prototype.calculate.call(this,E);if(!E.heightModel.shrinkWrap){B=false;if(!Q.heightModel.shrinkWrap){O=Q.target.layout.getContainerSize(Q);if(!O.gotHeight){N.done=false;return}J=P.offsetHeight;B=J>O.height}E.setProp("viewOverflowY",B)}if(N.done&&Ext.getScrollbarSize().height){if(!G.lockingPartner){E.setProp("overflowX",!!E.headerContext.state.boxPlan.tooNarrow)}}},measureContentHeight:function(o){var s=this.owner,p=s.body.dom,q=s.emptyEl,n=0;if(q){n+=q.offsetHeight}if(p){n+=p.offsetHeight}if(o.headerContext.state.boxPlan.tooNarrow){n+=Ext.getScrollbarSize().height}return n},flushColumnWidths:function(){var C=this,t=C.layout,A=C.ownerContext,y=C.columnsChanged,B=A.target,u=y.length,z,w,x,v;if(A.state.columnFlusher!==C){return}for(w=0;w<u;w++){if(!(z=y[w])){continue}x=z.props.width;B.body.select(B.getColumnSizerSelector(z.target)).setWidth(x);if(z.target.onCellsResized){z.target.onCellsResized(x)}v=z.lastBox;if(v){v.width=x}}C.flushed=true;if(!t.pending){A.context.queueLayout(t)}},flushRowHeights:function(){var n=this,m=n.layout,l=n.ownerContext;if(l.state.rowHeightFlusher!==n){return}l.target.syncRowHeightFinish(n.synchronizer,n.otherSynchronizer);n.flushed=true;l.syncRowHeights=true;if(!m.pending){l.context.queueLayout(m)}},finishedLayout:function(n){var p=this,o=p.owner.ownerGrid,m=Ext.fly(p.owner.getNodeContainer());Ext.layout.component.Auto.prototype.finishedLayout.call(this,n);if(m){m.setWidth(n.headerContext.props.contentWidth)}if(p.owner.bufferedRenderer){p.owner.bufferedRenderer.afterTableLayout(n)}if(o){o.syncRowHeightOnNextLayout=false}},getLayoutItems:function(){return this.owner.getRefItems()},isValidParent:function(){return true}},0,0,0,0,["layout.tableview"],0,[Ext.view,"TableLayout"],0));(Ext.cmd.derive("Ext.grid.locking.RowSynchronizer",Ext.Base,{constructor:function(p,o){var n=this,m;n.view=p;n.rowEl=o;n.els={};n.add("data",p.rowSelector);for(m=p.rowTpl;m;m=m.nextTpl){if(m.beginRowSync){m.beginRowSync(n)}}},add:function(m,n){var l=Ext.fly(this.rowEl).down(n,true);if(l){this.els[m]={el:l}}},finish:function(w){var v=this,z=v.els,t=w.els,x,u=0,A=0,C,B,y;for(B in z){x=t[B];y=x?x.height:0;C=y-z[B].height;if(C>0){u+=C;Ext.fly(z[B].el).setHeight(y)}else{A-=C}}y=w.rowHeight+A;if(Ext.isIE9&&v.view.ownerGrid.rowLines){y--}if(v.rowHeight+u<y){Ext.fly(v.rowEl).setHeight(y)}},measure:function(){var l=this,m=l.els,n;l.rowHeight=l.rowEl.offsetHeight;for(n in m){m[n].height=m[n].el.offsetHeight}},reset:function(){var g=this.els,l;this.rowEl.style.height="";for(l in g){g[l].el.style.height=""}}},1,0,0,0,0,0,[Ext.grid.locking,"RowSynchronizer"],0));(Ext.cmd.derive("Ext.view.NodeCache",Ext.Base,{statics:{range:document.createRange&&document.createRange()},constructor:function(f){this.view=f;this.clear();this.el=new Ext.dom.Fly()},destroy:function(){var f=this;if(!f.destroyed){f.el.destroy();f.el=f.view=null;f.destroyed=true}f.callParent()},clear:function(n){var p=this,o=p.elements,s=p.statics().range,q;if(p.count&&n){if(s&&Ext.getBody().contains(o[0])){s.setStartBefore(o[p.startIndex]);s.setEndAfter(o[p.endIndex]);s.deleteContents()}else{for(q in o){Ext.removeNode(o[q])}}}p.elements={};p.count=p.startIndex=0;p.endIndex=-1},fill:function(t,v,w){w=w||0;var q=this,p=q.elements={},s,u=t.length-w;if(!v){v=0}for(s=0;s<u;s++){p[v+s]=t[s+w]}q.startIndex=v;q.endIndex=v+u-1;q.count=u;return this},insert:function(u,s){var p=this,o=p.elements,q,t=s.length;if(p.count){if(u<p.count){for(q=p.endIndex+t;q>=u+t;q--){o[q]=o[q-t];o[q].setAttribute("data-recordIndex",q)}}p.endIndex=p.endIndex+t}else{p.startIndex=u;p.endIndex=u+t-1}for(q=0;q<t;q++,u++){o[u]=s[q];o[u].setAttribute("data-recordIndex",u)}p.count+=t},invoke:function(o,s){var n=this,p,q;o=Ext.dom.Element.prototype[o];for(q=n.startIndex;q<=n.endIndex;q++){p=n.item(q);if(p){o.apply(p,s)}}return n},item:function(n,o){var m=this.elements[n],p=null;if(m){p=o?this.elements[n]:this.el.attach(this.elements[n])}return p},first:function(f){return this.item(this.startIndex,f)},last:function(f){return this.item(this.endIndex,f)},moveBlock:function(u){var w=this,v=w.elements,p,t,q,s;if(!u){return}if(u<0){s=w.startIndex-1;t=w.endIndex;q=1}else{s=w.endIndex+1;t=w.startIndex;q=-1}w.startIndex+=u;w.endIndex+=u;do{s+=q;p=v[s+u]=v[s];p.setAttribute("data-recordIndex",s+u);if(s<w.startIndex||s>w.endIndex){delete v[s]}}while(s!==t);delete v[s]},getCount:function(){return this.count},slice:function(n,q){var o=this.elements,s=[],p;if(!q){q=this.endIndex}else{q=Math.min(this.endIndex,q-1)}for(p=n||this.startIndex;p<=q;p++){s.push(o[p])}return s},replaceElement:function(o,p,s){var n=this.elements,q=(typeof o==="number")?o:this.indexOf(o);if(q>-1){p=Ext.getDom(p);if(s){o=n[q];o.parentNode.insertBefore(p,o);Ext.removeNode(o);p.setAttribute("data-recordIndex",q)}this.elements[q]=p}return this},indexOf:function(m){var l=this.elements,n;m=Ext.getDom(m);for(n=this.startIndex;n<=this.endIndex;n++){if(l[n]===m){return n}}return -1},clip:function(x,y){var s=this,A=s.elements,t=[],z,v,w,u;if(x===1){z=s.startIndex;s.startIndex+=y}else{s.endIndex-=y;z=s.endIndex+1}for(u=z,v=z+y-1;u<=v;u++){w=A[u];t.push(w);Ext.removeNode(w);delete A[u]}s.count-=y;s.view.fireItemMutationEvent("itemremove",s.view.dataSource.getRange(z,v),z,t,s.view)},removeRange:function(z,w,y){var t=this,B=t.elements,u=[],x,v,A,C;if(w==null){w=t.endIndex+1}else{w=Math.min(t.endIndex+1,w+1)}if(z==null){z=t.startIndex}A=w-z;for(v=z,C=w;v<=t.endIndex;v++,C++){x=B[v];if(v<w){u.push(x);if(y){Ext.removeNode(x)}}if(C<=t.endIndex){x=B[v]=B[C];x.setAttribute("data-recordIndex",v)}else{delete B[v]}}t.count-=A;t.endIndex-=A;return u},removeElement:function(D,A){var w=this,E,u,C=w.elements,z,y,B=0,x,v;if(Ext.isArray(D)){E=D;D=[];y=E.length;for(B=0;B<y;B++){u=E[B];if(typeof u!=="number"){u=w.indexOf(u)}if(u>=w.startIndex&&u<=w.endIndex){D[D.length]=u}}Ext.Array.sort(D);y=D.length}else{if(D<w.startIndex||D>w.endIndex){return}y=1;D=[D]}for(x=v=D[0],B=0;x<=w.endIndex;x++,v++){if(B<y&&x===D[B]){v++;B++;if(A){Ext.removeNode(C[x])}}if(v<=w.endIndex&&v>=w.startIndex){z=C[x]=C[v];z.setAttribute("data-recordIndex",x)}else{delete C[x]}}w.endIndex-=y;w.count-=y},scroll:function(E,C,O){var M=this,L=M.view,D=L.lookupViewModel(),P=L.store,J=M.elements,U=E.length,G=L.getNodeContainer(),I=M.statics().range,F,T,S,R,N,Q,H,K;if(!(E.length||O)){return}if(C===-1){if(O){H=[];K=[];Q=(M.endIndex-O)+1;if(I){I.setStartBefore(J[Q]);I.setEndAfter(J[M.endIndex]);I.deleteContents();for(F=Q;F<=M.endIndex;F++){T=J[F];delete J[F];H.push(P.getByInternalId(T.getAttribute("data-recordId")));K.push(T)}}else{for(F=Q;F<=M.endIndex;F++){T=J[F];delete J[F];Ext.removeNode(T);H.push(P.getByInternalId(T.getAttribute("data-recordId")));K.push(T)}}L.fireItemMutationEvent("itemremove",H,Q,K,L);M.endIndex-=O}if(E.length){N=L.bufferRender(E,M.startIndex-=U);R=N.children;for(F=0;F<U;F++){J[M.startIndex+F]=R[F]}G.insertBefore(N.fragment,G.firstChild);L.fireItemMutationEvent("itemadd",E,M.startIndex,R,L)}}else{if(O){H=[];K=[];S=M.startIndex+O;if(I){I.setStartBefore(J[M.startIndex]);I.setEndAfter(J[S-1]);I.deleteContents();for(F=M.startIndex;F<S;F++){T=J[F];delete J[F];H.push(P.getByInternalId(T.getAttribute("data-recordId")));K.push(T)}}else{for(F=M.startIndex;F<S;F++){T=J[F];delete J[F];Ext.removeNode(T);H.push(P.getByInternalId(T.getAttribute("data-recordId")));K.push(T)}}L.fireItemMutationEvent("itemremove",H,M.startIndex,K,L);M.startIndex=S}N=L.bufferRender(E,M.endIndex+1);R=N.children;for(F=0;F<U;F++){J[M.endIndex+=1]=R[F]}G.appendChild(N.fragment);L.fireItemMutationEvent("itemadd",E,M.endIndex+1,R,L)}M.count=M.endIndex-M.startIndex+1;if(D){D.notify()}return R},sumHeights:function(){var n=0,l=this.elements,m;for(m=this.startIndex;m<=this.endIndex;m++){n+=l[m].offsetHeight}return n}},1,0,0,0,0,0,[Ext.view,"NodeCache"],function(){Ext.dom.CompositeElementLite.importElementMethods.call(this)}));(Ext.cmd.derive("Ext.scroll.TableScroller",Ext.scroll.Scroller,{config:{lockingScroller:null},"private":{doScrollTo:function(p,m,n){var o;if(m!=null){o=this.getLockingScroller();if(o){o.doScrollTo(null,m,n);m=null}}this.callParent([p,m,n])}}},0,0,0,0,["scroller.table"],0,[Ext.scroll,"TableScroller"],0));(Ext.cmd.derive("Ext.view.Table",Ext.view.View,{alternateClassName:"Ext.grid.View",isTableView:true,config:{selectionModel:{type:"rowmodel"}},inheritableStatics:{normalSideEvents:["deselect","select","beforedeselect","beforeselect","selectionchange"],events:["blur","focus","move","resize","destroy","beforedestroy","boxready","afterrender","render","beforerender","removed","hide","beforehide","show","beforeshow","enable","disable","added","deactivate","beforedeactivate","activate","beforeactivate","cellkeydown","beforecellkeydown","cellmouseup","beforecellmouseup","cellmousedown","beforecellmousedown","cellcontextmenu","beforecellcontextmenu","celldblclick","beforecelldblclick","cellclick","beforecellclick","refresh","itemremove","itemadd","beforeitemupdate","itemupdate","viewready","beforerefresh","unhighlightitem","highlightitem","focuschange","containerkeydown","containercontextmenu","containerdblclick","containerclick","containermouseout","containermouseover","containermouseup","containermousedown","beforecontainerkeydown","beforecontainercontextmenu","beforecontainerdblclick","beforecontainerclick","beforecontainermouseout","beforecontainermouseover","beforecontainermouseup","beforecontainermousedown","itemkeydown","itemcontextmenu","itemdblclick","itemclick","itemmouseleave","itemmouseenter","itemmouseup","itemmousedown","rowclick","rowcontextmenu","rowdblclick","rowkeydown","rowmouseup","rowmousedown","rowkeydown","beforeitemkeydown","beforeitemcontextmenu","beforeitemdblclick","beforeitemclick","beforeitemmouseleave","beforeitemmouseenter","beforeitemmouseup","beforeitemmousedown","statesave","beforestatesave","staterestore","beforestaterestore","uievent","groupcollapse","groupexpand","scroll"]},scrollable:true,componentLayout:"tableview",baseCls:"x-grid-view",unselectableCls:"x-unselectable",firstCls:"x-grid-cell-first",lastCls:"x-grid-cell-last",itemCls:"x-grid-item",selectedItemCls:"x-grid-item-selected",selectedCellCls:"x-grid-cell-selected",focusedItemCls:"x-grid-item-focused",overItemCls:"x-grid-item-over",altRowCls:"x-grid-item-alt",dirtyCls:"x-grid-dirty-cell",rowClsRe:new RegExp("(?:^|\\s*)x-grid-item-alt(?:\\s+|$)","g"),cellRe:new RegExp("x-grid-cell-([^\\s]+)(?:\\s|$)",""),positionBody:true,positionCells:false,stripeOnUpdate:null,actionableMode:false,trackOver:true,getRowClass:null,stripeRows:true,markDirty:true,ariaRole:"rowgroup",rowAriaRole:"row",cellAriaRole:"gridcell",tpl:["{%","view = values.view;","if (!(columns = values.columns)) {","columns = values.columns = view.ownerCt.getVisibleColumnManager().getColumns();","}","values.fullWidth = 0;","for (i = 0, len = columns.length; i < len; i++) {","column = columns[i];","values.fullWidth += (column.cellWidth = column.lastBox ? column.lastBox.width : column.width || column.minWidth);","}","tableCls=values.tableCls=[];","%}",'<div class="x-grid-item-container" role="presentation" style="width:{fullWidth}px">',"{[view.renderTHead(values, out, parent)]}","{%","view.renderRows(values.rows, values.columns, values.viewStartIndex, out);","%}","{[view.renderTFoot(values, out, parent)]}","</div>","{% ","view = columns = column = null;","%}",{definitions:"var view, tableCls, columns, i, len, column;",priority:0}],outerRowTpl:['<table id="{rowId}" role="presentation" ','data-boundView="{view.id}" ','data-recordId="{record.internalId}" ','data-recordIndex="{recordIndex}" ','class="{[values.itemClasses.join(" ")]}" cellpadding="0" cellspacing="0" style="{itemStyle};width:0">',"{%","this.nextTpl.applyOut(values, out, parent)","%}","</table>",{priority:9999}],rowTpl:["{%",'var dataRowCls = values.recordIndex === -1 ? "" : " x-grid-row";',"%}",'<tr class="{[values.rowClasses.join(" ")]} {[dataRowCls]}"',' role="{rowRole}" {rowAttr:attributes}>','<tpl for="columns">{%',"parent.view.renderCell(values, parent.record, parent.recordIndex, parent.rowIndex, xindex - 1, out, parent)","%}","</tpl>","</tr>",{priority:0}],cellTpl:['<td class="{tdCls}" {tdAttr} {cellAttr:attributes}',' style="width:{column.cellWidth}px;<tpl if="tdStyle">{tdStyle}</tpl>"','<tpl if="column.cellFocusable === false">',' role="presentation"',"<tpl else>",' role="{cellRole}" tabindex="-1"',"</tpl>",'  data-columnid="{[values.column.getItemId()]}">','<div {unselectableAttr} class="x-grid-cell-inner {innerCls}" ','style="text-align:{align};<tpl if="style">{style}</tpl>" ',"{cellInnerAttr:attributes}>{value}</div>","</td>",{priority:0}],refreshSelmodelOnRefresh:false,scrollableType:"table",tableValues:{},rowValues:{itemClasses:[],rowClasses:[]},cellValues:{classes:["x-grid-cell x-grid-td"]},constructor:function(f){if(f.grid.isTree){f.baseCls="x-tree-view"}Ext.view.View.prototype.constructor.call(this,f)},hasVariableRowHeight:function(l){var g=this;return g.variableRowHeight||g.store.isGrouped()||g.getVisibleColumnManager().hasVariableRowHeight()||(!l&&g.lockingPartner&&g.lockingPartner.hasVariableRowHeight(true))},initComponent:function(){var f=this;if(f.columnLines){f.addCls(f.grid.colLinesCls)}if(f.rowLines){f.addCls(f.grid.rowLinesCls)}f.body=new Ext.dom.Fly();f.body.id=f.id+"gridBody";if(!f.trackOver){f.overItemCls=null}f.headerCt.view=f;f.grid.view=f;f.initFeatures(f.grid);f.itemSelector=f.getItemSelector();f.all=new Ext.view.NodeCache(f);Ext.view.View.prototype.initComponent.call(this)},applySelectionModel:function(s,o){var p=this,q=p.ownerGrid,u=s.type,t=p.disableSelection||q.disableSelection;if(!o){if(!(s&&s.isSelectionModel)){s=q.selModel||s}}if(s){if(s.isSelectionModel){s.allowDeselect=q.allowDeselect||s.selectionMode!=="SINGLE";s.locked=t}else{if(typeof s==="string"){s={type:s}}else{s.type=q.selType||s.selType||s.type||u}if(!s.mode){if(q.simpleSelect){s.mode="SIMPLE"}else{if(q.multiSelect){s.mode="MULTI"}}}s=Ext.Factory.selection(Ext.apply({allowDeselect:q.allowDeselect,locked:t},s))}}return s},updateSelectionModel:function(n,l){var m=this;if(l){l.un({scope:m,lastselectedchanged:m.updateBindSelection,selectionchange:m.updateBindSelection});Ext.destroy(m.selModelRelayer)}m.selModelRelayer=m.relayEvents(n,["selectionchange","beforeselect","beforedeselect","select","deselect","focuschange"]);n.on({scope:m,lastselectedchanged:m.updateBindSelection,selectionchange:m.updateBindSelection});m.selModel=n},getVisibleColumnManager:function(){return this.ownerCt.getVisibleColumnManager()},getColumnManager:function(){return this.ownerCt.getColumnManager()},getTopLevelVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},moveColumn:function(S,K,L){var B=this,D=L>1,I=D&&document.createRange?document.createRange():null,R=D&&!I?document.createDocumentFragment():null,J=K,H=B.getGridColumns().length,C=H-1,O=(B.firstCls||B.lastCls)&&(K===0||K===H||S===0||S===C),F,G,M,E,Q,P,N;if(B.rendered&&K!==S){M=B.el.query(B.rowSelector);for(F=0,E=M.length;F<E;F++){Q=M[F];P=Q.childNodes;if(O){if(P.length===1){Ext.fly(P[0]).addCls(B.firstCls);Ext.fly(P[0]).addCls(B.lastCls);continue}if(S===0){Ext.fly(P[0]).removeCls(B.firstCls);Ext.fly(P[1]).addCls(B.firstCls)}else{if(S===C){Ext.fly(P[C]).removeCls(B.lastCls);Ext.fly(P[C-1]).addCls(B.lastCls)}}if(K===0){Ext.fly(P[0]).removeCls(B.firstCls);Ext.fly(P[S]).addCls(B.firstCls)}else{if(K===H){Ext.fly(P[C]).removeCls(B.lastCls);Ext.fly(P[S]).addCls(B.lastCls)}}}if(D){if(I){I.setStartBefore(P[S]);I.setEndAfter(P[S+L-1]);R=I.extractContents()}else{for(G=0;G<L;G++){R.appendChild(P[S])}}Q.insertBefore(R,P[J]||null)}else{Q.insertBefore(P[S],P[J]||null)}}N=B.el.query("colgroup");for(F=0,E=N.length;F<E;F++){Q=N[F];if(D){if(I){I.setStartBefore(Q.childNodes[S]);I.setEndAfter(Q.childNodes[S+L-1]);R=I.extractContents()}else{for(G=0;G<L;G++){R.appendChild(Q.childNodes[S])}}Q.insertBefore(R,Q.childNodes[J]||null)}else{Q.insertBefore(Q.childNodes[S],Q.childNodes[J]||null)}}}},scrollToTop:Ext.emptyFn,addElListener:function(n,l,m){this.mon(this,n,l,m,{element:"el"})},getGridColumns:function(){return this.ownerCt.getVisibleColumnManager().getColumns()},getHeaderAtIndex:function(f){return this.ownerCt.getVisibleColumnManager().getHeaderAtIndex(f)},getCell:function(n,m){var l=this.getRow(n);if(l){if(typeof m==="number"){m=this.getHeaderAtIndex(m)}return Ext.fly(l).down(m.getCellSelector())}},getFeature:function(g){var l=this.featuresMC;if(l){return l.get(g)}},findFeature:function(f){if(this.features){return Ext.Array.findBy(this.features,function(e){if(e.ftype===f){return true}})}},initFeatures:function(p){var u=this,q,o,s,t;u.tpl=this.lookupTpl("tpl");u.rowTpl=u.lookupTpl("rowTpl");u.addRowTpl(u.lookupTpl("outerRowTpl"));u.cellTpl=u.lookupTpl("cellTpl");u.featuresMC=new Ext.util.MixedCollection();o=u.features=u.constructFeatures();t=o?o.length:0;for(q=0;q<t;q++){s=o[q];s.view=u;s.grid=p;u.featuresMC.add(s);s.init(p)}},renderTHead:function(s,q,o){var u=s.view.headerFns,t,p;if(u){for(p=0,t=u.length;p<t;++p){u[p].call(this,s,q,o)}}},addHeaderFn:function(l){var g=this.headerFns;if(!g){g=this.headerFns=[]}g.push(l)},renderTFoot:function(s,q,o){var u=s.view.footerFns,t,p;if(u){for(p=0,t=u.length;p<t;++p){u[p].call(this,s,q,o)}}},addFooterFn:function(l){var g=this.footerFns;if(!g){g=this.footerFns=[]}g.push(l)},addTpl:function(f){return this.insertTpl("tpl",f)},addRowTpl:function(f){return this.insertTpl("rowTpl",f)},addCellTpl:function(f){return this.insertTpl("cellTpl",f)},insertTpl:function(n,o){var p=this,s,q;if(o.isTemplate){o=Ext.Object.chain(o)}else{o=new Ext.XTemplate("{%this.nextTpl.applyOut(values, out, parent);%}",o)}for(s=p[n];o.priority<s.priority;s=s.nextTpl){q=s}if(q){q.nextTpl=o}else{p[n]=o}o.nextTpl=s;return o},tplApplyOut:function(n,m,l){if(this.before){if(this.before(n,m,l)===false){return}}this.nextTpl.applyOut(n,m,l);if(this.after){this.after(n,m,l)}},constructFeatures:function(){var u=this,o=u.features,p,s,q=0,t;if(o){s=[];t=o.length;for(;q<t;q++){p=o[q];if(!p.isFeature){p=Ext.create("feature."+p.ftype,p)}s[q]=p}}return s},beforeRender:function(){Ext.view.View.prototype.beforeRender.call(this);if(!this.enableTextSelection){this.protoEl.unselectable()}},getElConfig:function(){var f=Ext.view.View.prototype.getElConfig.call(this);delete f["aria-hidden"];delete f["aria-disabled"];return f},onBindStore:function(n){var m=this,l=m.bufferedRenderer;if(l&&l.store!==n){l.bindStore(n)}if(m.all&&m.all.getCount()&&!m.grid.reconfiguring){m.clearViewEl()}Ext.view.View.prototype.onBindStore.apply(this,arguments)},onOwnerGridHide:function(){var l=this.getScrollable(),g=this.bufferedRederer;if(l){l.suspendPartnerSync()}if(g){g.disable()}},onOwnerGridShow:function(){var l=this.getScrollable(),g=this.bufferedRederer;if(l){l.resumePartnerSync()}if(g){g.enable()}},getStoreListeners:function(o){var n=this,p=Ext.view.View.prototype.getStoreListeners.call(this,o),m=n.dataSource;if(m&&m.isFeatureStore){delete p.add;delete p.remove}if(n.bufferedRenderer){delete p.clear}p.beforepageremove=n.beforePageRemove;return p},beforePageRemove:function(n,o){var m=this.all,p=n.getPageSize();if(m.startIndex>=(o-1)*p&&m.endIndex<=(o*p-1)){n.get(o);return false}},onViewScroll:function(m,n,l){if(!this.ignoreScroll){Ext.view.View.prototype.onViewScroll.call(this,m,n,l)}},createRowElement:function(s,q,p){var o=this,u=o.renderBuffer,t=o.collectData([s],q);t.columns=p;o.tpl.overwrite(u,t);o.cleanupData();return Ext.fly(u).down(o.getNodeContainerSelector(),true).firstChild},bufferRender:function(q,p){var o=this,u=o.renderBuffer,t,s=document.createRange?document.createRange():null;o.tpl.overwrite(u,o.collectData(q,p));o.cleanupData();Ext.fly(u).saveTabbableState({skipSelf:true,includeHidden:true});u=Ext.fly(u).down(o.getNodeContainerSelector(),true);if(s){s.selectNodeContents(u);t=s.extractContents()}else{t=document.createDocumentFragment();while(u.firstChild){t.appendChild(u.firstChild)}}return{fragment:t,children:Ext.Array.toArray(t.childNodes)}},collectData:function(p,m){var n=this,o=n.tableValues;n.rowValues.view=n;o.view=n;o.rows=p;o.columns=null;o.viewStartIndex=m;o.tableStyle="width:"+n.headerCt.getTableWidth()+"px";return o},cleanupData:function(){var f=this.tableValues;f.view=f.columns=f.rows=this.rowValues.view=null},refreshSize:function(n){var p=this,s=p.getBodySelector(),q=p.lockingPartner,o=p.saveFocusState();if(s){p.body.attach(p.el.down(s,true))}if(!p.hasLoadingHeight){Ext.suspendLayouts();Ext.view.View.prototype.refreshSize.apply(this,arguments);if(n||(p.hasVariableRowHeight()&&p.dataSource.getCount())){p.grid.updateLayout()}Ext.resumeLayouts(!q||!q.grid.isVisible()||(q.all.getCount()===p.all.getCount()));o()}},isLayoutRoot:function(){return false},clearViewEl:function(l){var n=this,m;if(n.rendered){Ext.view.View.prototype.clearViewEl.call(this);if(!l){m=Ext.get(n.getNodeContainer());if(m&&m.dom!==n.getTargetEl().dom){m.destroy()}}}},getRefItems:function(t){var v=this,w=v.ownerGrid.liveRowContexts,y,z,u,x,A,s=Ext.view.View.prototype.getRefItems.apply(this,arguments);for(A in w){u=w[A].getWidgets();y=u.length;for(z=0;z<y;z++){x=u[z];if(v.isAncestor(x)){s[s.length]=x;if(t&&x.getRefItems){s.push.apply(s,x.getRefItems(true))}}}}return s},getMaskTarget:function(){return this.ownerCt.body},statics:{getBoundView:function(f){return Ext.getCmp(f.getAttribute("data-boundView"))}},getRecord:function(f){if(this.store.destroyed){return}if(f.isModel){return f}f=this.getNode(f);if(f){return this.dataSource.getByInternalId(f.getAttribute("data-recordId"))}},indexOf:function(f){f=this.getNode(f);if(!f&&f!==0){return -1}return this.all.indexOf(f)},indexInStore:function(f){return f?this.dataSource.indexOf(this.getRecord(f)):-1},indexOfRow:function(m){var l=this.dataSource,n;if(m.isCollapsedPlaceholder){n=l.indexOfPlaceholder(m)}else{n=l.indexOf(m)}return n},renderRows:function(x,q,s,u){var y=this,w=y.rowValues,v=x.length,t;w.view=y;w.columns=q;w.rowRole=y.rowAriaRole;y.cellValues.cellRole=y.cellAriaRole;for(t=0;t<v;t++,s++){w.itemClasses.length=w.rowClasses.length=0;y.renderRow(x[t],s,u)}w.view=w.columns=w.record=null},renderColumnSizer:function(t,s){var p=t.columns||this.getGridColumns(),u=p.length,q,v,w;s.push('<colgroup role="presentation">');for(q=0;q<u;q++){v=p[q];w=v.cellWidth?v.cellWidth:Ext.grid.header.Container.prototype.defaultWidth;s.push('<col role="presentation" class="',"x-","grid-cell-",p[q].getItemId(),'" style="width:'+w+'px">')}s.push("</colgroup>")},renderRow:function(x,D,y){var v=this,z=D===-1,w=v.selectionModel,E=v.rowValues,A=E.itemClasses,B=E.rowClasses,C=v.itemCls,F,G=v.rowTpl;E.rowAttr={};E.record=x;E.recordId=x.internalId;E.recordIndex=v.store.indexOf(x);E.rowIndex=D;E.rowId=v.getRowId(x);E.itemCls=E.rowCls="";if(!E.columns){E.columns=v.ownerCt.getVisibleColumnManager().getColumns()}A.length=B.length=0;if(!z){A[0]=C;if(!v.ownerCt.disableSelection&&w.isRowSelected){if(w.isRowSelected(x)){A.push(v.selectedItemCls)}}if(v.stripeRows&&D%2!==0){A.push(v.altRowCls)}if(v.getRowClass){F=v.getRowClass(x,D,null,v.dataSource);if(F){B.push(F)}}}if(y){G.applyOut(E,y,v.tableValues)}else{return G.apply(E,v.tableValues)}},renderCell:function(E,B,C,M,Q,D){var O=this,G,A=O.selectionModel,P=O.cellValues,F=P.classes,I=B.data[E.dataIndex],L=O.cellTpl,H=E.enableTextSelection,K,N,J=O.navigationModel.getPosition();if(H==null){H=O.enableTextSelection}P.record=B;P.column=E;P.recordIndex=C;P.rowIndex=M;P.columnIndex=P.cellIndex=Q;P.align=E.textAlign;P.innerCls=E.innerCls;P.tdCls=P.tdStyle=P.tdAttr=P.style="";P.unselectableAttr=H?"":'unselectable="on"';F[1]=E.getCellId();N=2;if(E.renderer&&E.renderer.call){G=O.ownerCt.columnManager.getHeaderIndex(E);K=E.renderer.call(E.usingDefaultRenderer?E:E.scope||O.ownerCt,I,P,B,C,G,O.dataSource,O);if(P.css){B.cssWarning=true;P.tdCls+=" "+P.css;P.css=null}if(P.tdCls){F[N++]=P.tdCls}}else{K=I}P.value=(K==null||K.length===0)?E.emptyCellText:K;if(E.tdCls){F[N++]=E.tdCls}if(O.markDirty&&B.dirty&&B.isModified(E.dataIndex)){F[N++]=O.dirtyCls;if(E.dirtyTextElementId){P.tdAttr=(P.tdAttr?P.tdAttr+" ":"")+'aria-describedby="'+E.dirtyTextElementId+'"'}}if(E.isFirstVisible){F[N++]=O.firstCls}if(E.isLastVisible){F[N++]=O.lastCls}if(!H){F[N++]=O.unselectableCls}if(A&&(A.isCellModel||A.isSpreadsheetModel)&&A.isCellSelected(O,C,E)){F[N++]=O.selectedCellCls}if(J&&J.record.id===B.id&&J.column===E){F[N++]=O.focusedItemCls}F.length=N;P.tdCls=F.join(" ");L.applyOut(P,D);P.column=P.record=null},getRow:function(l){var g;if((!l&&l!==0)||!this.rendered){return null}if(l.target){l=l.target}if(Ext.isString(l)){return Ext.fly(l).down(this.rowSelector,true)}if(Ext.isNumber(l)){g=this.all.item(l);return g&&g.down(this.rowSelector,true)}if(l.isModel){return this.getRowByRecord(l)}g=Ext.fly(l);if(g.is(this.itemSelector)){return this.getRowFromItem(g)}return g.findParent(this.rowSelector,this.getTargetEl())},getRowId:function(f){return this.id+"-record-"+f.internalId},constructRowId:function(f){return this.id+"-record-"+f},getNodeById:function(f){f=this.constructRowId(f);return this.retrieveNode(f,false)},getRowById:function(f){f=this.constructRowId(f);return this.retrieveNode(f,true)},getNodeByRecord:function(f){return this.retrieveNode(this.getRowId(f),false)},getRowByRecord:function(f){return this.retrieveNode(this.getRowId(f),true)},getRowFromItem:function(n){var m=Ext.getDom(n).tBodies[0].childNodes,p=m.length,o;for(o=0;o<p;o++){if(Ext.fly(m[o]).is(this.rowSelector)){return m[o]}}},retrieveNode:function(l,m){var n=this.el.getById(l,true);if(m&&n){return Ext.fly(n).down(this.rowSelector,true)}return n},updateIndexes:Ext.emptyFn,bodySelector:"div.x-grid-item-container",nodeContainerSelector:"div.x-grid-item-container",itemSelector:"table.x-grid-item",rowSelector:"tr.x-grid-row",cellSelector:"td.x-grid-cell",sizerSelector:".x-grid-cell",innerSelector:"div.x-grid-cell-inner",getBodySelector:function(){return this.bodySelector},getColumnSizerSelector:function(g){var l=this.sizerSelector+"-"+g.getItemId();return"td"+l+",col"+l},getItemSelector:function(){return this.itemSelector},getCellSelector:function(f){return f?f.getCellSelector():this.cellSelector},getCellInnerSelector:function(f){return this.getCellSelector(f)+" "+this.innerSelector},addRowCls:function(m,n){var l=this.getRow(m);if(l){Ext.fly(l).addCls(n)}},removeRowCls:function(m,n){var l=this.getRow(m);if(l){Ext.fly(l).removeCls(n)}},onRowSelect:function(l){var m=this,n;m.addItemCls(l,m.selectedItemCls);n=m.getRow(l);if(n){n.setAttribute("aria-selected",true)}if(Ext.isIE8){m.repaintBorder(l+1)}},onRowDeselect:function(l){var m=this,n;m.removeItemCls(l,m.selectedItemCls);n=m.getRow(l);if(n){n.removeAttribute("aria-selected")}if(Ext.isIE8){m.repaintBorder(l+1)}},onCellSelect:function(g){var l=this.getCellByPosition(g);if(l){l.addCls(this.selectedCellCls);l.dom.setAttribute("aria-selected",true)}},onCellDeselect:function(g){var l=this.getCellByPosition(g,true);if(l){Ext.fly(l).removeCls(this.selectedCellCls);l.removeAttribute("aria-selected")}},getCellInclusive:function(p,o){if(p){var n=this.getRow(p.row),m=this.ownerCt.getColumnManager().getHeaderAtIndex(p.column);if(m&&n){return Ext.fly(n).down(this.getCellSelector(m),o)}}return false},getColumnByPosition:function(n){var m,l;if(n){l=n.column;if(l&&!l.destroyed&&l.isColumn){return l}else{m=n.view||this;l=typeof l==="number"?l:n.colIdx;return m.getVisibleColumnManager().getHeaderAtIndex(l)}}return false},getCellByPosition:function(s,p){if(s){var q=s.view||this,o=q.getRow(s.record||s.row),n;n=q.getColumnByPosition(s);if(n&&o){return Ext.fly(o).down(q.getCellSelector(n),p)}}return false},onFocusEnter:function(u){var v=this,q=u.fromComponent,w=v.getNavigationModel(),e,s,t;if(v.containsFocus){return Ext.Component.prototype.onFocusEnter.call(v,u)}if(v.actionableMode){if(v.actionPosition){v.el.dom.setAttribute("tabIndex","-1");v.cellFocused=true;return}v.ownerGrid.setActionableMode(false)}u=u.event;if(!v.cellFocused&&v.all.getCount()&&v.dataSource.getCount()){t=u.getTarget();if(t===v.el.dom){if(v.lastFocused==="scrollbar"){u.relatedTarget.focus();return}e=v.getDefaultFocusPosition(q);if(!e){u.stopEvent();v.el.focus();return}t=null}else{if(t===v.tabGuardEl){e=new Ext.grid.CellContext(v).setPosition(v.all.endIndex,v.getVisibleColumnManager().getColumns().length-1);t=null}else{if(s=u.getTarget(v.getCellSelector())){if(t===s){e=new Ext.grid.CellContext(v).setPosition(v.getRecord(t),v.getHeaderByCell(s));t=null}else{if(t&&Ext.fly(t).isFocusable()&&v.el.contains(t)){e=new Ext.grid.CellContext(v).setPosition(v.getRecord(t),v.getHeaderByCell(s))}}}}}}if(e){v.toggleChildrenTabbability(false);if(t){if(v.ownerGrid.setActionableMode(true,e)){e=null;Ext.fly(t).focus()}}if(e){w.setPosition(e,null,u,null,true)}v.cellFocused=v.el.contains(Ext.Element.getActiveElement());if(v.cellFocused){v.el.dom.setAttribute("tabIndex","-1")}}Ext.Component.prototype.onFocusEnter.call(v,u)},onFocusLeave:function(e){var m=this,n=!m.lockingPartner||!e.toComponent||(e.toComponent!==m.lockingPartner&&!m.lockingPartner.isAncestor(e.toComponent));if(!m.refreshing){if(m.cellFocused){if(n){m.getNavigationModel().setPosition(null,null,e.event,null,true)}m.cellFocused=false;m.focusEl=m.el;m.focusEl.dom.setAttribute("tabIndex",0)}if(n){if(m.ownerGrid.actionableMode){m.lastFocused=m.actionPosition;m.ownerGrid.setActionableMode(false)}}else{m.actionPosition=null}Ext.Component.prototype.onFocusLeave.call(m,e)}},onRowFocus:function(m,o,p){var n=this;if(o){n.addItemCls(m,n.focusedItemCls);if(!p){n.focusRow(m)}}else{n.removeItemCls(m,n.focusedItemCls)}if(Ext.isIE8){n.repaintBorder(m+1)}},focusRow:function(m,p){var n=this,o=n.getFocusTask();if(p){o.delay(Ext.isNumber(p)?p:10,n.focusRow,n,[m,false]);return}o.cancel();if(n.isVisible(true)){n.getNavigationModel().setPosition(n.getRecord(m))}},focusNode:function(g,l){this.focusRow(g,l)},scrollRowIntoView:function(g,l){g=this.getRow(g);if(g){this.scrollElIntoView(g,false,l)}},focusCell:function(q,p){var n=this,s,o=n.getFocusTask();if(p){o.delay(Ext.isNumber(p)?p:10,n.focusCell,n,[q,false]);return}o.cancel();if(n.isVisible(true)&&(s=n.getCellByPosition(q))){n.getNavigationModel().setPosition(q)}},findFocusPosition:function(G,D,A,y){var x=this,E=D.cellElement,F=x.ownerGrid.actionables,z=F.length,B,v,w,C;B=D.clone();v=Ext.fly(E).findTabbableElements();w=v[Ext.Array.indexOf(v,G)+(A?1:-1)];while(!w&&(E=E[A?"nextSibling":"previousSibling"])){B.setColumn(x.getHeaderByCell(E));for(C=0;C<z;C++){F[C].activateCell(B)}E=B.getCell(true);if(E&&(v=Ext.fly(E).findTabbableElements()).length){w=v[A?0:v.length-1]}}return{target:w,position:B}},getDefaultFocusPosition:function(t){var v=this,q=v.dataSource,w=v.lastFocused,p=new Ext.grid.CellContext((v.isNormalView&&v.lockingPartner.grid.isVisible()&&!v.lockingPartner.grid.collapsed)?v.lockingPartner:v).setPosition(0,0),s,u;if(t){if(t.isColumn&&t.cellFocusable!==false&&t.getView()===v){if(!w){w=p}w.setColumn(t)}else{if(t.isTableView){w=new Ext.grid.CellContext(v).setPosition(t.lastFocused.record,0)}}}if(w){u=v.getScrollable();if(!q.contains(w.record)||(u&&!u.isInView(w.getRow()).y)){w.setRow(q.getAt(Math.min(w.rowIdx,q.getCount()-1)))}}else{w=p;s=v.ownerGrid.view.el.down(v.getCellSelector()+'[tabIndex="-1"]');if(s){w.setPosition(v.getRecord(s),v.getHeaderByCell(s))}else{w=null}}return w},getLastFocused:function(){var g=this,l=g.lastFocused;if(l&&l.record&&l.column){if(g.dataSource.indexOf(l.record)!==-1&&g.getVisibleColumnManager().indexOf(l.column)!==-1&&g.getNode(l.record)){return l}}},scrollCellIntoView:function(l,g){if(l.isCellContext){l=this.getCellByPosition(l)}if(l){this.scrollElIntoView(l,null,g)}},scrollElIntoView:function(n,m,o){var p=this.getScrollable();if(p){p.scrollIntoView(n,m,o)}},syncRowHeightBegin:function(){var y=this,w=y.all,q=w.count,t=[],x=Ext.grid.locking.RowSynchronizer,u,v,s;for(u=0,v=w.startIndex;u<q;u++,v++){t[u]=s=new x(y,w.elements[v]);s.reset()}return t},syncRowHeightClear:function(q){var o=this,n=o.all,p=n.count,s;for(s=0;s<p;s++){q[s].reset()}},syncRowHeightMeasure:function(m){var l=m.length,n;for(n=0;n<l;n++){m[n].measure()}},syncRowHeightFinish:function(q,o){var p=q.length,n=this.bufferedRenderer,s;for(s=0;s<p;s++){q[s].finish(o[s])}if(n){n.syncRowHeightsFinish()}},refreshNode:function(f){if(Ext.isNumber(f)){f=this.store.getAt(f)}this.handleUpdate(this.dataSource,f,null,null,null,true)},handleUpdate:function(aD,af,ak,ao,U,aa){ak=ak||Ext.data.Model.EDIT;var ay=this,V=ay.store.indexOf(af),X=ay.rowTpl,ai=ay.markDirty,am=ay.dirtyCls,ag=ak!==Ext.data.Model.EDIT,al=[],at=ay.variableRowHeight,aE=0,ae=ay.ownerCt,ap=ay.cellFly||(ay.self.prototype.cellFly=new Ext.dom.Fly()),ab,aB,aC,aA,aF,aq,W,Z,az,ac,aw,Y,ar,an,au,ad,aj,ah,ax,av;if(ay.viewReady){ay.updatingRows=true;ab=ay.getNodeByRecord(af);if(ab){if(af.isCollapsedPlaceholder){Ext.fly(ab).syncContent(ay.createRowElement(af,ay.indexOfRow(af)));return}Z=ay.overItemCls;az=ay.ownerCt.getVisibleColumnManager().getColumns();if(aa){al=az;aE=1}else{for(Y=0,aw=az.length;Y<aw;Y++){ac=az[Y];if(ac.preventUpdate){an=Ext.fly(ab).down(ac.getCellSelector(),true);if(an&&!ag&&ai){ap.attach(an);if(af.isModified(ac.dataIndex)){ap.addCls(am);if(ac.dirtyTextElementId){an.setAttribute("aria-describedby",ac.dirtyTextElementId)}}else{ap.removeCls(am);an.removeAttribute("aria-describedby")}}}else{ar=ay.shouldUpdateCell(af,ac,ao);if(ar){aE=aE|ar;al[al.length]=ac;at=at||ac.variableRowHeight}}}}ay.fireEvent("beforeitemupdate",af,V,ab,al);if(ay.getRowClass||!ay.getRowFromItem(ab)||(aE&1)||(ab.tBodies[0].childNodes.length>1)){ax=ab._extData;aC=ay.createRowElement(af,ay.indexOfRow(af),al);if(Ext.fly(ab,"_internal").hasCls(Z)){Ext.fly(aC).addCls(Z)}if(Ext.isIE9m&&ab.mergeAttributes){ab.mergeAttributes(aC,true)}else{aA=aC.attributes;aF=aA.length;for(W=0;W<aF;W++){aq=aA[W].name;if(aq!=="id"){ab.setAttribute(aq,aA[W].value)}}}if(ax){ax.isSynchronized=false}if(az.length&&(aB=ay.getRow(ab))){ay.updateColumns(aB,Ext.fly(aC).down(ay.rowSelector,true),al)}while(X){if(X.syncContent){if(X.syncContent(ab,aC,ao?al:null)===false){break}}X=X.nextTpl}}else{for(Y=0,aw=al.length;Y<aw;Y++){ac=al[Y];au=ac.dataIndex;ad=af.get(au);an=Ext.fly(ab).down(ac.getCellSelector(),true);ap.attach(an);if(!ag&&ai){if(af.isModified(ac.dataIndex)){ap.addCls(am);if(ac.dirtyTextElementId){an.setAttribute("aria-describedby",ac.dirtyTextElementId)}}else{ap.removeCls(am);an.removeAttribute("aria-describedby")}}aj=ac.usingDefaultRenderer;ah=aj?ac:ac.scope;if(ac.updater){Ext.callback(ac.updater,ah,[an,ad,af,ay,ay.dataSource],0,ac,ae)}else{if(ac.renderer){ad=Ext.callback(ac.renderer,ah,[ad,null,af,0,0,ay.dataSource,ay],0,ac,ae)}av=ad==null||ad.length===0;ad=av?ac.emptyCellText:ad;if(ac.producesHTML||av){ap.down(ay.innerSelector,true).innerHTML=ad}else{ap.down(ay.innerSelector,true).childNodes[0].data=ad}}if(ay.highlightClass){Ext.fly(an).addCls(ay.highlightClass);if(!ay.changedCells){ay.self.prototype.changedCells=[];ay.prototype.clearChangedTask=new Ext.util.DelayedTask(ay.clearChangedCells,ay.prototype);ay.clearChangedTask.delay(ay.unhighlightDelay)}ay.changedCells.push({cell:an,cls:ay.highlightClass,expires:Ext.Date.now()+1000})}}}if(ag&&ai&&!af.dirty){Ext.fly(ab,"_internal").select("."+am).removeCls(am).set({"aria-describedby":undefined})}if(at){Ext.suspendLayouts()}ay.fireEvent("itemupdate",af,V,ab,ay);if(at){ay.ownerGrid.updateLayout();Ext.resumeLayouts(true)}}ay.updatingRows=false}},clearChangedCells:function(){var o=this,q=Ext.Date.now(),n;for(var p=0,s=o.changedCells.length;p<s;){n=o.changedCells[p];if(n.expires<=q){Ext.fly(n.cell).removeCls(n.highlightClass);Ext.Array.erase(o.changedCells,p,1);s--}else{break}}if(s){o.clearChangedTask.delay(o.unhighlightDelay)}},updateColumns:function(y,H,L){var M=this,F,G,z,E,J=L.length,K,D,I,A,B=M.getCellSelector(),C;if(y.mergeAttributes){y.mergeAttributes(H,true)}else{F=H.attributes;G=F.length;for(E=0;E<G;E++){z=F[E].name;if(z!=="id"){y.setAttribute(z,F[E].value)}}}C=y._extData;if(C){C.isSynchronized=false}y=Ext.get(y);H=Ext.get(H);for(K=0;K<J;K++){D=L[K];B=M.getCellSelector(D);I=y.selectNode(B);A=H.selectNode(B);F=A.attributes;G=F.length;for(E=0;E<G;E++){z=F[E].name;if(z!=="id"){I.setAttribute(z,F[E].value)}}C=I._extData;if(C){C.isSynchronized=false}I=Ext.fly(I).selectNode(M.innerSelector);A=Ext.fly(A).selectNode(M.innerSelector);Ext.fly(I).syncContent(A)}},shouldUpdateCell:function(n,l,m){return l.shouldUpdateCell(n,m)},refresh:function(){var g=this,l;if(g.destroying){return}if(g.getVisibleColumnManager().getColumns().length){Ext.view.View.prototype.refresh.apply(this,arguments);g.headerCt.setSortState()}else{if(g.refreshCounter){g.clearViewEl(true)}}},processContainerEvent:function(e){var l=Ext.Component.fromElement(e.target.parentNode);if(l&&l.up(this.ownerCt)){return false}},processItemEvent:function(R,C,I,D){var J=this,G=J.self,L=G.EventMap,P=D.type,N=J.features,E=N.length,F,K,H,O,Q,e=D.position=J.eventPosition||(J.eventPosition=new Ext.grid.CellContext()),M,S;if(Ext.isIE&&P==="mouseup"&&!D.within(J.el)){return false}if(J.indexInStore(C)!==-1){M=e.rowElement=Ext.fly(C).down(J.rowSelector,true);S=D.getTarget(J.getCellSelector(),M);P=G.TouchEventMap[P]||P;if(S){if(!S.parentNode){return false}Q=J.getHeaderByCell(S);if(Q){K=J.ownerCt.getColumnManager().getHeaderIndex(Q)}else{Q=S=null;K=-1}}else{K=-1}e.setAll(J,I,Q?J.getVisibleColumnManager().getHeaderIndex(Q):-1,R,Q);e.cellElement=S;H=J.fireEvent("uievent",P,J,S,I,K,D,R,M);if((H===false||Ext.view.View.prototype.processItemEvent.apply(this,arguments)===false)){return false}for(F=0;F<E;++F){O=N[F];if(O.wrapsItem){if(O.vetoEvent(R,M,I,D)===false){J.processSpecialEvent(D);return false}}}if(S&&P!=="mouseover"&&P!=="mouseout"){H=!((J["onBeforeCell"+L[P]](S,K,R,M,I,D)===false)||(J.fireEvent("beforecell"+P,J,S,K,R,M,I,D)===false)||(J["onCell"+L[P]](S,K,R,M,I,D)===false)||(J.fireEvent("cell"+P,J,S,K,R,M,I,D)===false))}if(H!==false){H=J.fireEvent("row"+P,J,R,M,I,D)}return H}else{J.processSpecialEvent(D);if(D.pointerType==="mouse"){D.preventDefault()}return false}},processSpecialEvent:function(w){var F=this,A=F.features,G=A.length,E=w.type,z,D,y,x,B,e,C=F.ownerCt;Ext.view.View.prototype.processSpecialEvent.apply(this,arguments);if(E==="mouseover"||E==="mouseout"){return}E=F.self.TouchEventMap[E]||E;for(z=0;z<G;z++){D=A[z];if(D.hasFeatureEvent){x=w.getTarget(D.eventSelector,F.getTargetEl());if(x){y=D.eventPrefix;B=D.getFireEventArgs("before"+y+E,F,x,w);e=D.getFireEventArgs(y+E,F,x,w);if((F.fireEvent.apply(F,B)===false)||(C.fireEvent.apply(C,B)===false)||(F.fireEvent.apply(F,e)===false)||(C.fireEvent.apply(C,e)===false)){return false}}}}return true},onCellMouseDown:Ext.emptyFn,onCellLongPress:Ext.emptyFn,onCellMouseUp:Ext.emptyFn,onCellClick:Ext.emptyFn,onCellDblClick:Ext.emptyFn,onCellContextMenu:Ext.emptyFn,onCellKeyDown:Ext.emptyFn,onCellKeyUp:Ext.emptyFn,onCellKeyPress:Ext.emptyFn,onBeforeCellMouseDown:Ext.emptyFn,onBeforeCellLongPress:Ext.emptyFn,onBeforeCellMouseUp:Ext.emptyFn,onBeforeCellClick:Ext.emptyFn,onBeforeCellDblClick:Ext.emptyFn,onBeforeCellContextMenu:Ext.emptyFn,onBeforeCellKeyDown:Ext.emptyFn,onBeforeCellKeyUp:Ext.emptyFn,onBeforeCellKeyPress:Ext.emptyFn,expandToFit:function(f){this.autoSizeColumn(f)},autoSizeColumn:function(f){if(Ext.isNumber(f)){f=this.getGridColumns()[f]}if(f){if(f.isGroupHeader){f.autoSize();return}delete f.flex;f.setWidth(this.getMaxContentWidth(f))}},getMaxContentWidth:function(y){var w=this,C=w.el.query(y.getCellInnerSelector()),A=y.getWidth(),z=0,x=C.length,B=w.body.select(w.getColumnSizerSelector(y)),u=Math.max,v=0,t;if(x>0){if(Ext.supports.ScrollWidthInlinePaddingBug){v+=w.getCellPaddingAfter(C[0])}if(w.columnLines){v+=Ext.fly(C[0].parentNode).getBorderWidth("lr")}}B.setWidth(1);y.textEl.setStyle({"text-overflow":"clip",display:"table-cell"});t=y.textEl.dom.offsetWidth+y.titleEl.getPadding("lr");y.textEl.setStyle({"text-overflow":"",display:""});for(;z<x;z++){t=u(t,C[z].scrollWidth)}t+=v;t=u(t+1,40);B.setWidth(A);return t},getPositionByEvent:function(u){var e=this,q=u.getTarget(e.cellSelector),p=u.getTarget(e.itemSelector),s=e.getRecord(p),t=e.getHeaderByCell(q);return e.getPosition(s,t)},getHeaderByCell:function(f){if(f){return this.ownerGrid.getVisibleColumnManager().getHeaderById(Ext.getDom(f).getAttribute("data-columnId"))}return false},walkCells:function(v,u,z,t){var w=this,C=v.clone(),x=w.lockingPartner&&w.lockingPartner.grid.isVisible()?w.lockingPartner:null,A=v.rowIdx,B=w.dataSource.getCount()-1,y=w.ownerCt.getVisibleColumnManager().getColumns();switch(u.toLowerCase()){case"right":if(v.isLastColumn()){A=x&&w.isLockedView?A:A+1;if(A>B){return false}if(x){C.view=x}C.setPosition(A,0)}else{C.navigate(+1)}break;case"left":if(v.isFirstColumn()){A=x&&w.isNormalView?A:A-1;if(A<0){return false}if(x){C.view=x;y=x.getVisibleColumnManager().getColumns()}C.setPosition(A,y[y.length-1])}else{C.navigate(-1)}break;case"up":if(A===0){return false}else{C.setRow(A-1)}break;case"down":if(A===B){return false}else{C.setRow(A+1)}break}if(z&&z.call(t||w,C)!==true){return false}return C},walkRows:function(u,B){var y=this,v=y.dataSource,x=0,C=u,A,z=(B<0)?0:v.getCount()-1,w=z?1:-1,t=u;do{if(z?t>=z:t<=z){return C||z}t+=w;if((A=Ext.fly(y.getRow(t)))&&A.isVisible(true)){x+=w;C=t}}while(x!==B);return t},walkRecs:function(B,C){var w=this,E=w.dataSource,v=0,D=B,A,y=(C<0)?0:(E.isBufferedStore?E.getTotalCount():E.getCount())-1,u=y?1:-1,x=E.indexOf(B),z;do{if(y?x>=y:x<=y){return D}x+=u;z=E.getAt(x);if(!z.isCollapsedPlaceholder&&(A=Ext.fly(w.getNodeByRecord(z)))&&A.isVisible(true)){v+=u;D=z}}while(v!==C);return D},getFirstVisibleRowIndex:function(){var l=this,m=(l.dataSource.isBufferedStore?l.dataSource.getTotalCount():l.dataSource.getCount()),n=l.indexOf(l.all.first())-1;do{n+=1;if(n===m){return}}while(!Ext.fly(l.getRow(n)).isVisible(true));return n},getLastVisibleRowIndex:function(){var g=this,l=g.indexOf(g.all.last());do{l-=1;if(l===-1){return}}while(!Ext.fly(g.getRow(l)).isVisible(true));return l},getHeaderCt:function(){return this.headerCt},getPosition:function(l,g){return new Ext.grid.CellContext(this).setPosition(l,g)},doDestroy:function(){var n=this,o=n.featuresMC,p,q,s;n.bindStore(null);if(o){for(q=0,s=o.getCount();q<s;++q){p=o.getAt(q);if(p&&!p.destroyed){p.destroy()}}}n.all.destroy();n.body.destroy();Ext.view.View.prototype.doDestroy.call(this)},onReplace:function(t,w,u,p){var s=this,v=s.bufferedRenderer,q;if(s.rendered&&v){q=s.saveFocusState();v.onReplace(t,w,u,p);q()}else{Ext.view.View.prototype.onReplace.apply(this,arguments)}s.setPendingStripe(w)},onResize:function(q,t,s,u){var p=this,o=p.bufferedRenderer;if(o){o.onViewResize(p,q,t,s,u)}Ext.view.View.prototype.onResize.call(this,q,t,s,u)},onAdd:function(q,s,p){var o=this,n=o.bufferedRenderer;o.addingRows=true;if(o.rendered&&n&&(n.bodyTop||o.dataSource.getCount()+s.length>=n.viewSize)){n.onReplace(q,p,[],s)}else{Ext.view.View.prototype.onAdd.apply(this,arguments)}o.setPendingStripe(p);o.addingRows=false},onRemove:function(s,t,q){var p=this,u=p.bufferedRenderer,o;if(p.rendered&&u&&p.dataSource.getCount()+t.length>=u.viewSize){o=p.saveFocusState();u.onReplace(s,q,t,[]);o()}else{Ext.view.View.prototype.onRemove.apply(this,arguments)}if(p.actionPosition&&Ext.Array.indexOf(t,p.actionPosition.record)!==-1){p.actionPosition=null}p.setPendingStripe(q)},saveFocusState:function(){var v=this,u=v.dataSource,A=v.actionableMode,y=v.getNavigationModel(),x=A?v.actionPosition:y.getPosition(true),z=Ext.Element.getActiveElement(true),s=x&&x.view===v&&x.getCell(),w,t;if(s&&s.contains(z)){x=x.clone();z.suspendFocusEvents();if(A&&s!==z){v.suspendActionableMode()}else{A=false;y.setPosition()}z.resumeFocusEvents();return function(){u=v.dataSource;if(u.getCount()){w=Math.min(x.rowIdx,v.all.getCount()-1);t=Math.min(x.colIdx,v.getVisibleColumnManager().getColumns().length-1);x=new Ext.grid.CellContext(v).setPosition(u.contains(x.record)?x.record:w,t);if(A){v.resumeActionableMode(x)}else{y.setPosition(x,null,null,null,true)}}else{x.column.focus()}}}return Ext.emptyFn},onDataRefresh:function(m){var l=this,n=l.ownerCt;if(n&&n.isCollapsingOrExpanding===2){n.on("expand",l.onDataRefresh,l,{single:true});return}Ext.view.View.prototype.onDataRefresh.call(this,m)},getViewRange:function(){var f=this;if(f.bufferedRenderer){return f.bufferedRenderer.getViewRange()}return Ext.view.View.prototype.getViewRange.call(this)},setPendingStripe:function(l){var g=this.stripeOnUpdate;if(g===null){g=l}else{g=Math.min(g,l)}this.stripeOnUpdate=g},onEndUpdate:function(){var n=this,l=n.stripeOnUpdate,m=n.all.startIndex;if(n.rendered&&(l||l===0)){if(l<m){l=m}n.doStripeRows(l);n.stripeOnUpdate=null}Ext.view.View.prototype.onEndUpdate.apply(this,arguments)},doStripeRows:function(t,u){var q=this,p,v,s,w;if(q.rendered&&q.stripeRows){p=q.getNodes(t,u);for(s=0,v=p.length;s<v;s++){w=p[s];w.className=w.className.replace(q.rowClsRe," ");t++;if(t%2===0){w.className+=(" "+q.altRowCls)}}}},hasActiveFeature:function(){return(this.isGrouping&&this.store.isGrouped())||this.isRowWrapped},getCellPaddingAfter:function(f){return Ext.fly(f).getPadding("r")},privates:{collectNodes:function(f){this.all.fill(this.getNodeContainer().childNodes,this.all.startIndex)},setActionableMode:function(x,z){var I=this,E=I.getNavigationModel(),C,G=I.grid.actionables,y=G.length,B,A,D,F=false,w,H;if(I.actionableMode===x){if(!x||z.isEqual(I.actionPosition)){return false}}if(x){if(z&&(z.view===I||(z.view===(w=I.lockingPartner)&&w.actionableMode))){F=I.activateCell(z)}return F}else{C=Ext.fly(Ext.Element.getActiveElement());if(I.el.contains(C)&&!Ext.fly(C).is(I.getCellSelector())){A=(I.actionPosition&&I.actionPosition.record)||I.getRecord(C);D=I.getHeaderByCell(C.findParent(I.getCellSelector()));H=z&&z.getCell();if(!z||!H){z=new Ext.grid.CellContext(I).setPosition(A||0,D||0);H=z.getCell()}H.focus();C=Ext.fly(Ext.Element.getActiveElement());if(!(I.el.contains(C)&&C.is(I.getCellSelector()))){z=null}}for(B=0;B<y;B++){if(G[B].deactivate){G[B].deactivate()}}if(I.actionRow){I.actionRow.saveTabbableState({skipSelf:true,includeSaved:false})}if(I.destroyed){return false}I.actionableMode=I.ownerGrid.actionableMode=false;I.actionPosition=E.actionPosition=I.actionRow=null;if(z){E.setPosition(z)}}},activateCell:function(z){var w=this,x=z.view!==w?w.lockingPartner:null,H=w.grid.actionables,y=H.length,D=w.getNavigationModel(),A,E,C,F,B,G,I;z=z.clone();A=z.record;z.view.grid.ensureVisible(A,{column:z.column});C=w.all.item(z.rowIdx);if(w.actionPosition){E=Ext.get(w.all.item(w.actionPosition.rowIdx,true));if(E&&C!==E){E.saveTabbableState({skipSelf:true,includeSaved:false})}}w.activating=true;if(!x){F=z.getCell();w.actionPosition=z;for(B=0;B<y;B++){G=G||H[B].activateCell(z,null,true)}}if(x||(F&&(F.restoreTabbableState(true).length|(I=F.findTabbableElements()).length))||G){for(B=0;B<y;B++){if(H[B].activateRow){H[B].activateRow(C)}}if(x||I.length){C.restoreTabbableState(true);if(x){w.actionableMode=true;w.actionPosition=null;w.activating=false;return true}if(I){w.actionRow=C;w.actionableMode=w.ownerGrid.actionableMode=true;D.setPosition();D.actionPosition=w.actionPosition=z;Ext.fly(I[0]).focus();w.activating=false;return true}}}w.activating=false},suspendActionableMode:function(){var m=this,o=m.grid.actionables,p=o.length,n;for(n=0;n<p;n++){o[n].suspend()}},resumeActionableMode:function(q){var u=this,p=u.grid.actionables,s=p.length,o,t;u.toggleChildrenTabbability(false);for(o=0;o<s;o++){t=t||p[o].resume(q)}if(!t){u.activateCell(q)}},onRowExit:function(w,z,C,x,y){var u=this,t=x?"nextSibling":"previousSibling",v=u.lockingPartner,A,B;if(v&&v.grid.isVisible()){A=u.all.indexOf(z);if(x){B=0;if(u.isNormalView){A++}}else{B=v.getVisibleColumnManager().getColumns().length-1;if(u.isLockedView){A--}}u.actionPosition=null;u=v;C=u.all.item(A,true)}if(!u.hasListeners.beforerowexit||u.fireEvent("beforerowexit",u,w,z,C,x)!==false){u.findFirstActionableElement(w,C,t,x,y)}else{return false}},findFirstActionableElement:function(F,R,D,L,O){var M=this,U=M.getVisibleColumnManager().getColumns(),C=U.length,N=M.grid.actionables,P=N.length,K=new Ext.grid.CellContext(M),H,T,G,I,S,J,E,Q;if(R){K.setRow(R);for(G=0;G<P;G++){if(N[G].activateRow){N[G].activateRow(R)}}for(G=(L?0:C-1);(L?G<C:G>-1)&&!T;G=G+(L?1:-1)){S=U[G];K.setColumn(S);H=Ext.fly(R).down(K.column.getCellSelector());for(I=0;I<P;I++){J=J||N[I].activateCell(K)}H=K.getCell();if(H){R=K.getNode(true);H.restoreTabbableState(true);if((E=H.findTabbableElements()).length||J){Q=M.actionRow;M.actionRow=Ext.get(R);M.actionRow.restoreTabbableState(true);T=E[L?0:E.length-1]}}}if(T){M.actionPosition=M.getNavigationModel().actionPosition=K;Ext.fly(T).focus(Ext.asyncFocus?1:0);if(Q&&R!==Q.dom){Q.saveTabbableState({skipSelf:true,includeSaved:false})}}else{M.onRowExit(F,R,M.all.item(K.rowIdx+(L?1:-1)),L,O)}}else{if(!O){M.grid.ensureVisible(L?0:M.dataSource.getCount()-1,{callback:function(e,g,f){if(e){M.findFirstActionableElement(F,f,D,L,true)}else{M.ownerGrid.setActionableMode(false)}}})}else{M.ownerGrid.setActionableMode(false)}}},stretchHeight:function(q){var o=this,s=o.getScrollable(),p=o.stretchers,n;if(q&&o.tabGuardEl){if(p){p[0].style.marginTop=p[1].style.marginTop=o.el.dom.style.height=0}o.el.dom.style.height=s.constrainScrollRange(q)+"px";n=q-o.el.dom.offsetHeight;if(n>0){o.el.dom.style.height="";p=o.getStretchers();n=q-o.el.dom.offsetHeight;if(n>0){p[0].style.marginTop=s.constrainScrollRange(n)+"px";n=q-o.el.dom.offsetHeight;if(n>0){p[1].style.marginTop=Math.min(n,s.maxSpacerMargin||0)+"px"}}}}},getStretchers:function(){var l=this,n=l.stretchers,m;if(n){l.el.appendChild(n)}else{m={cls:"x-scroller-spacer",style:"position:relative"};n=l.stretchers=l.el.appendChild([m,m],true)}return n}}},1,["tableview","gridview"],["component","box","dataview","tableview","gridview"],{component:true,box:true,dataview:true,tableview:true,gridview:true},["widget.gridview","widget.tableview"],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.view,"Table",Ext.grid,"View"],0));(Ext.cmd.derive("Ext.grid.Panel",Ext.panel.Table,{alternateClassName:["Ext.list.ListView","Ext.ListView","Ext.grid.GridPanel"],viewType:"tableview",ariaRole:"grid",lockable:false,rowLines:true},0,["grid","gridpanel"],["component","box","container","panel","tablepanel","gridpanel","grid"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true},["widget.grid","widget.gridpanel"],0,[Ext.grid,"Panel",Ext.list,"ListView",Ext,"ListView",Ext.grid,"GridPanel"],0));(Ext.cmd.derive("Ext.grid.RowContext",Ext.Base,{constructor:function(f){Ext.apply(this,f);this.widgets={}},setRecord:function(n,m){var l=this.viewModel;this.record=n;this.recordIndex=m;if(l){l.set("record",n);l.set("recordIndex",m)}},free:function(){var o=this,q=o.widgets,p,u,t,s=o.viewModel;o.record=null;if(s){s.set("record");s.set("recordIndex")}for(p in q){u=q[p];t=u.getFocusEl();if(t){if(t.isTabbable(true)){t.saveTabbableState({includeHidden:true})}t.blur()}u.detachFromBody();u.hidden=true}},getWidget:function(q,n){var o=this,p=o.widgets||(o.widgets={}),s;if(n.bind&&!o.viewModel){o.viewModel=Ext.Factory.viewModel({parent:o.ownerGrid.lookupViewModel(),data:{record:o.record,recordIndex:o.recordIndex}},o.ownerGrid.rowViewModel)}if(!(s=p[q])){s=p[q]=Ext.widget(Ext.apply({viewModel:o.viewModel,_rowContext:o},n));if(s.isWidget){s.initBindable()}}else{s.hidden=false}return s},getWidgets:function(){var m=this.widgets,l,n=[];for(l in m){n.push(m[l])}return n},destroy:function(){var n=this,p=n.widgets,o,m;for(o in p){m=p[o];m._rowContext=null;m.destroy()}Ext.destroy(n.viewModel);n.callParent()}},1,0,0,0,0,0,[Ext.grid,"RowContext"],0));(Ext.cmd.derive("Ext.view.DropZone",Ext.dd.DropZone,{indicatorCls:"x-grid-drop-indicator",indicatorHtml:['<div class="',"x-",'grid-drop-indicator-left" role="presentation"></div>','<div class="x-grid-drop-indicator-right" role="presentation"></div>'].join(""),constructor:function(l){var g=this;Ext.apply(g,l);if(!g.ddGroup){g.ddGroup="view-dd-zone-"+g.view.id}Ext.dd.DropZone.prototype.constructor.call(this,g.view.el)},fireViewEvent:function(){var g=this,l;g.lock();l=g.view.fireEvent.apply(g.view,arguments);g.unlock();return l},getTargetFromEvent:function(v){var w=v.getTarget(this.view.getItemSelector()),e,s,t,y,u,x;if(!w){e=v.getY();for(y=0,s=this.view.getNodes(),u=s.length;y<u;y++){t=s[y];x=Ext.fly(t).getBox();if(e<=x.bottom){return t}}}return w},getIndicator:function(){var f=this;if(!f.indicator){f.indicator=new Ext.Component({ariaRole:"presentation",html:f.indicatorHtml,cls:f.indicatorCls,ownerCt:f.view,floating:true,alignOnScroll:false,shadow:false})}return f.indicator},getPosition:function(o,q){var s=o.getXY()[1],p=Ext.fly(q).getRegion(),e;if((p.bottom-s)>=(p.bottom-p.top)/2){e="before"}else{e="after"}return e},containsRecordAtOffset:function(q,t,w){if(!t){return false}var u=this.view,s=u.indexOf(t),p=u.getNode(s+w),v=p?u.getRecord(p):null;return v&&Ext.Array.contains(q,v)},positionIndicator:function(y,x,w){var v=this,t=v.view,u=v.getPosition(w,y),A=t.getRecord(y),z=x.records,e;if(!Ext.Array.contains(z,A)&&(u==="before"&&!v.containsRecordAtOffset(z,A,-1)||u==="after"&&!v.containsRecordAtOffset(z,A,1))){v.valid=true;if(v.overRecord!==A||v.currentPosition!==u){e=Ext.fly(y).getY()-t.el.getY()-1;if(u==="after"){e+=Ext.fly(y).getHeight()}v.getIndicator().setWidth(Ext.fly(t.el).getWidth()).showAt(0,e);v.overRecord=A;v.currentPosition=u}}else{v.invalidateDrop()}},invalidateDrop:function(){if(this.valid){this.valid=false;this.getIndicator().hide()}},onNodeOver:function(o,q,s,e){var p=this;if(!Ext.Array.contains(e.records,p.view.getRecord(o))){p.positionIndicator(o,e,s)}return p.valid?p.dropAllowed:p.dropNotAllowed},notifyOut:function(o,q,s,e){var p=this;Ext.dd.DropZone.prototype.notifyOut.apply(this,arguments);p.overRecord=p.currentPosition=null;p.valid=false;if(p.indicator){p.indicator.hide()}},onContainerOver:function(s,t,u){var e=this,q=e.view,p=q.dataSource.getCount();if(p){e.positionIndicator(q.all.last(),u,t)}else{e.overRecord=e.currentPosition=null;e.getIndicator().setWidth(Ext.fly(q.el).getWidth()).showAt(0,0);e.valid=true}return e.dropAllowed},onContainerDrop:function(n,e,m){return this.onNodeDrop(n,null,e,m)},onNodeDrop:function(w,v,x,y){var e=this,s=false,t={wait:false,processDrop:function(){e.invalidateDrop();e.handleNodeDrop(y,e.overRecord,e.currentPosition);s=true;e.fireViewEvent("drop",w,y,e.overRecord,e.currentPosition)},cancelDrop:function(){e.invalidateDrop();s=true}},u=false;if(e.valid){u=e.fireViewEvent("beforedrop",w,y,e.overRecord,e.currentPosition,t);if(t.wait){return}if(u!==false){if(!s){t.processDrop()}}}return u},destroy:function(){this.indicator=Ext.destroy(this.indicator);Ext.dd.DropZone.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.view,"DropZone"],0));(Ext.cmd.derive("Ext.grid.ViewDropZone",Ext.view.DropZone,{indicatorHtml:'<div class="x-grid-drop-indicator-left" role="presentation"></div><div class="x-grid-drop-indicator-right" role="presentation"></div>',indicatorCls:"x-grid-drop-indicator",handleNodeDrop:function(z,y,x){var u=this.view,t=u.getStore(),C=u!==z.view,v,B,A,w;if(z.copy){B=z.records;for(A=0,w=B.length;A<w;A++){B[A]=B[A].copy()}}else{if(C){z.view.store.remove(z.records)}}if(y&&x){v=t.indexOf(y);if(x!=="before"){v++}t.insert(v,z.records)}else{t.add(z.records)}if(C){u.getSelectionModel().select(z.records)}u.getNavigationModel().setPosition(z.records[0])}},0,0,0,0,0,0,[Ext.grid,"ViewDropZone"],0));(Ext.cmd.derive("Ext.grid.plugin.HeaderResizer",Ext.plugin.Abstract,{disabled:false,config:{dynamic:false},colHeaderCls:"x-column-header",minColWidth:40,maxColWidth:1000,eResizeCursor:"col-resize",init:function(g){var l=this;l.headerCt=g;g.on("render",l.afterHeaderRender,l,{single:l});if(!l.minColWidth){l.self.prototype.minColWidth=Ext.grid.column.Column.prototype.minWidth}},destroy:function(){var g=this,l=g.tracker;if(l){l.destroy();g.tracker=null}g.headerCt.un("render",g.afterHeaderRender,g);g.headerCt=null;Ext.plugin.Abstract.prototype.destroy.call(this)},afterHeaderRender:function(){var m=this,l=m.headerCt,n=l.el;l.mon(n,"mousemove",m.onHeaderCtMouseMove,m);m.markerOwner=m.ownerGrid=m.headerCt.up("tablepanel").ownerGrid;m.tracker=new Ext.dd.DragTracker({disabled:m.disabled,onBeforeStart:m.onBeforeStart.bind(m),onStart:m.onStart.bind(m),onDrag:m.onDrag.bind(m),onEnd:m.onEnd.bind(m),onCancel:m.onCancel.bind(m),tolerance:3,autoStart:300,el:n});l.setTouchAction({panX:false})},onHeaderCtMouseMove:function(e){var l=this;if(l.headerCt.dragging||l.disabled){if(l.activeHd){l.activeHd.el.dom.style.cursor="";delete l.activeHd}}else{if(e.pointerType!=="touch"){l.findActiveHeader(e)}}},findActiveHeader:function(w){var v=this,y=v.headerCt,e=w.getTarget("."+v.colHeaderCls,y.el,true),C=v.ownerGrid,A=C.ownerLockable,B,u,z,x;v.activeHd=null;if(e){B=Ext.getCmp(e.id);if(B.isAtEndEdge(w)){if(y.visibleColumnManager.getColumns().length===1&&y.forceFit){return}u=B}else{if(B.isAtStartEdge(w)){z=y.visibleColumnManager.getColumns();x=B.isGroupHeader?B.getGridColumns()[0]:B;u=z[Ext.Array.indexOf(z,x)-1];if(!u&&A&&!C.isLocked){z=A.lockedGrid.headerCt.visibleColumnManager.getColumns();u=z[z.length-1]}}}if(u){if(u.isGroupHeader){z=u.getGridColumns();u=z[z.length-1]}if(u&&!(u.fixed||(u.resizable===false))){v.activeHd=u;B.el.dom.style.cursor=v.eResizeCursor;if(B.triggerEl){B.triggerEl.dom.style.cursor=v.eResizeCursor}}}else{B.el.dom.style.cursor="";if(B.triggerEl){B.triggerEl.dom.style.cursor=""}}}return v.activeHd},onBeforeStart:function(e){var l=this;l.dragHd=l.activeHd||e.pointerType==="touch"&&l.findActiveHeader(e);if(l.dragHd&&!l.headerCt.dragging){e.claimGesture();l.xDelta=l.dragHd.getX()+l.dragHd.getWidth()-l.tracker.getXY()[0];l.tracker.constrainTo=l.getConstrainRegion();return true}else{l.headerCt.dragging=false;return false}},onCancel:function(e){this.dragHd=this.activeHd=null;this.headerCt.dragging=false},getConstrainRegion:function(){var w=this,t=w.dragHd.el,p,v=w.ownerGrid,q=v.getSizeModel().width,s=q.shrinkWrap?w.headerCt.getWidth()-w.headerCt.visibleColumnManager.getColumns().length*w.minColWidth:w.maxColWidth,u;if(w.headerCt.forceFit){p=w.dragHd.nextNode("gridcolumn:not([hidden]):not([isGroupHeader])");if(p&&w.headerInSameGrid(p)){s=t.getWidth()+(p.getWidth()-w.minColWidth)}}else{if(v.isLocked&&q.shrinkWrap){s=w.dragHd.up("[scrollerOwner]").getTargetEl().getWidth(true)-v.getWidth()-(v.ownerLockable.normalGrid.visibleColumnManager.getColumns().length*w.minColWidth+Ext.getScrollbarSize().width)}}u=w.adjustConstrainRegion(t.getRegion(),0,0,0,w.minColWidth);u.right=t.getX()+s;return u},onStart:function(w){var v=this,x=v.dragHd,A=x.el.getWidth(),y=x.getRootHeaderCt(),D,E,z,B,e,C;v.headerCt.dragging=true;v.origWidth=A;if(!v.dynamic){z=v.markerOwner;if(z.frame&&z.resizable){v.gridOverflowSetting=z.el.dom.style.overflow;z.el.dom.style.overflow="hidden"}D=v.getLeftMarkerX(z);B=z.getLhsMarker();e=z.getRhsMarker();C=v.ownerGrid.body.getHeight()+y.getHeight();E=y.getOffsetsTo(z)[1]-z.el.getBorderWidth("t");B.dom.style.cursor=v.eResizeCursor;e.dom.style.cursor=v.eResizeCursor;B.setLocalY(E);e.setLocalY(E);B.setHeight(C);e.setHeight(C);v.setMarkerX(B,D);v.setMarkerX(e,D+A)}},onDrag:function(e){var l=this;if(l.dynamic){l.doResize()}else{l.setMarkerX(l.getMovingMarker(l.markerOwner),l.calculateDragX(l.markerOwner))}},getMovingMarker:function(f){return f.getRhsMarker()},onEnd:function(m){var n=this,e=n.markerOwner;n.headerCt.dragging=false;if(n.dragHd){if(!n.dynamic){if("gridOverflowSetting" in n){e.el.dom.style.overflow=n.gridOverflowSetting}n.setMarkerX(e.getLhsMarker(),-9999);n.setMarkerX(e.getRhsMarker(),-9999)}n.doResize();if(m.pointerType!=="touch"){n.dragHd=null;n.activeHd.el.dom.style.cursor=n.eResizeCursor}else{n.dragHd=n.activeHd=null}}n.headerCt.blockNextEvent()},doResize:function(){var n=this,o=n.dragHd,p,m=n.tracker.getOffset("point");if(o&&m[0]){if(o.flex){delete o.flex}Ext.suspendLayouts();n.adjustColumnWidth(m[0]-n.xDelta);if(n.headerCt.forceFit){p=o.nextNode("gridcolumn:not([hidden]):not([isGroupHeader])");if(p&&!n.headerInSameGrid(p)){p=null}if(p){delete p.flex;p.setWidth(p.getWidth()-m[0])}}Ext.resumeLayouts(true)}},headerInSameGrid:function(g){var l=this.dragHd.up("tablepanel");return !!g.up(l)},disable:function(){var f=this.tracker;this.disabled=true;if(f){f.disable()}},enable:function(){var f=this.tracker;this.disabled=false;if(f){f.enable()}},calculateDragX:function(f){return this.tracker.getXY("point")[0]+this.xDelta-f.getX()-f.el.getBorderWidth("l")},getLeftMarkerX:function(f){return this.dragHd.getX()-f.getX()-f.el.getBorderWidth("l")-1},setMarkerX:function(g,l){g.setLocalX(l)},adjustConstrainRegion:function(s,o,l,q,p){return s.adjust(o,l,q,p)},adjustColumnWidth:function(f){this.dragHd.setWidth(this.origWidth+f)}},0,0,0,0,["plugin.gridheaderresizer"],0,[Ext.grid.plugin,"HeaderResizer"],0));(Ext.cmd.derive("Ext.grid.header.DragZone",Ext.dd.DragZone,{colHeaderSelector:".x-column-header",colInnerSelector:".x-column-header-inner",maxProxyWidth:120,constructor:function(g){var l=this;l.headerCt=g;l.ddGroup=l.getDDGroup();l.autoGroup=true;Ext.dd.DragZone.prototype.constructor.call(this,g.el);l.proxy.el.addCls("x-grid-col-dd")},getDDGroup:function(){return"header-dd-zone-"+this.headerCt.up("[scrollerOwner]").id},getDragData:function(o){if(o.getTarget(this.colInnerSelector)){var e=o.getTarget(this.colHeaderSelector),p,n;if(e){p=Ext.getCmp(e.id);if(!this.headerCt.dragging&&p.draggable&&!(p.isAtStartEdge(o)||p.isAtEndEdge(o))){n=document.createElement("div");n.role="presentation";n.innerHTML=p.text;return{ddel:n,header:p}}}}return false},onBeforeDrag:function(){return !(this.headerCt.dragging||this.disabled)},onInitDrag:function(){this.headerCt.dragging=true;this.headerCt.hideMenu();Ext.dd.DragZone.prototype.onInitDrag.apply(this,arguments)},onDragDrop:function(){this.headerCt.dragging=false;Ext.dd.DragZone.prototype.onDragDrop.apply(this,arguments)},afterRepair:function(){Ext.dd.DragZone.prototype.afterRepair.call(this);this.headerCt.dragging=false},getRepairXY:function(){return this.dragData.header.el.getXY()},disable:function(){this.disabled=true},enable:function(){this.disabled=false}},1,0,0,0,0,0,[Ext.grid.header,"DragZone"],0));(Ext.cmd.derive("Ext.grid.header.DropZone",Ext.dd.DropZone,{colHeaderCls:"x-column-header",proxyOffsets:[-4,-9],constructor:function(g){var l=this;l.headerCt=g;l.ddGroup=l.getDDGroup();l.autoGroup=true;Ext.dd.DropZone.prototype.constructor.call(this,g.el)},destroy:function(){Ext.destroy(this.topIndicator,this.bottomIndicator);Ext.dd.DropZone.prototype.destroy.call(this)},getDDGroup:function(){return"header-dd-zone-"+this.headerCt.up("[scrollerOwner]").id},getTargetFromEvent:function(e){return e.getTarget("."+this.colHeaderCls)},getTopIndicator:function(){if(!this.topIndicator){this.topIndicator=Ext.getBody().createChild({role:"presentation",cls:"x-col-move-top",html:"&#160;"});this.indicatorXOffset=Math.floor((this.topIndicator.dom.offsetWidth+1)/2)}return this.topIndicator},getBottomIndicator:function(){if(!this.bottomIndicator){this.bottomIndicator=Ext.getBody().createChild({role:"presentation",cls:"x-col-move-bottom",html:"&#160;"})}return this.bottomIndicator},getLocation:function(e,p){var q=e.getXY()[0],o=Ext.fly(p).getRegion(),s;if((o.right-q)<=(o.right-o.left)/2){s="after"}else{s="before"}return{pos:s,header:Ext.getCmp(p.id),node:p}},positionIndicator:function(L,J,S){var M=this,I=L.header,Y=M.getLocation(S,J),U=Y.header,Z=Y.pos,aa,T,P,e,W,ac,ab,R,N,O,Q,K,V,H,X;if(U===M.lastTargetHeader&&Z===M.lastDropPos){return}aa=I.nextSibling("gridcolumn:not([hidden])");T=I.previousSibling("gridcolumn:not([hidden])");M.lastTargetHeader=U;M.lastDropPos=Z;if(!U.draggable&&Z==="before"&&U.getIndex()===0){return false}L.dropLocation=Y;if((I!==U)&&((Z==="before"&&aa!==U)||(Z==="after"&&T!==U))&&!U.isDescendantOf(I)){K=Ext.dd.DragDropManager.getRelated(M);V=K.length;H=0;for(;H<V;H++){X=K[H];if(X!==M&&X.invalidateDrop){X.invalidateDrop()}}M.valid=true;P=M.getTopIndicator();e=M.getBottomIndicator();if(Z==="before"){W="bc-tl";ac="tc-bl"}else{W="bc-tr";ac="tc-br"}ab=P.getAlignToXY(U.el,W);R=e.getAlignToXY(U.el,ac);N=M.headerCt.el;O=N.getX()-M.indicatorXOffset;Q=N.getX()+N.getWidth();ab[0]=Ext.Number.constrain(ab[0],O,Q);R[0]=Ext.Number.constrain(R[0],O,Q);P.setXY(ab);e.setXY(R);P.show();e.show()}else{M.invalidateDrop()}},invalidateDrop:function(){this.valid=false;this.hideIndicators()},onNodeOver:function(y,v,w,x){var u=this,C=x.header,A,B,z,e;if(x.header.el.dom===y){A=false}else{x.isLock=x.isUnlock=x.crossPanel=false;B=u.getLocation(w,y).header;A=(C.ownerCt===B.ownerCt);if(!A&&(!C.ownerCt.sealed&&!B.ownerCt.sealed)){A=true;z=C.up("tablepanel");e=B.up("tablepanel");if(z!==e){x.crossPanel=true;x.isLock=e.isLocked&&!z.isLocked;x.isUnlock=!e.isLocked&&z.isLocked;if((x.isUnlock&&C.lockable===false)||(x.isLock&&!C.isLockable())){A=false}}}}if(A){u.positionIndicator(x,y,w)}else{u.valid=false}return u.valid?u.dropAllowed:u.dropNotAllowed},hideIndicators:function(){var f=this;f.getTopIndicator().hide();f.getBottomIndicator().hide();f.lastTargetHeader=f.lastDropPos=null},onNodeOut:function(){this.hideIndicators()},getNestedHeader:function(m,o){var p=m.items,n;if(m.isGroupHeader&&p.length){n=!o?"first":"last";m=this.getNestedHeader(p[n](),o)}return m},onNodeDrop:function(G,Q,C,J){this.headerCt.blockNextEvent();if(!this.valid){return}var e=this,F=J.header,N=J.dropLocation,D=N.pos,K=N.header,L=F.ownerCt,H=L.getRootHeaderCt(),S=K.ownerCt,P=e.headerCt.visibleColumnManager,E=P.getHeaderIndex(F),R,I,M,O;if(J.isLock||J.isUnlock){M=L.up("[scrollerOwner]");R=S.items.indexOf(K);if(D==="after"){R++}if(J.isLock){M.lock(F,R,S)}else{M.unlock(F,R,S)}}else{R=D==="after"?P.getHeaderIndex(e.getNestedHeader(K,1))+1:P.getHeaderIndex(e.getNestedHeader(K,0));e.invalidateDrop();O=F.getWidth();Ext.suspendLayouts();H.isDDMoveInGrid=!J.crossPanel;if(F.isGroupHeader&&K.isGroupHeader){F.setNestedParent(K)}if(D==="before"){S.moveBefore(F,K)}else{S.moveAfter(F,K)}if(R>=0&&!(K.isGroupHeader&&(!K.items||!K.items.length))&&E!==R){I=F.isGroupHeader?F.query(":not([hidden]):not([isGroupHeader])").length:1;if((E<=R)&&I>1){R-=I}S.getRootHeaderCt().grid.view.moveColumn(E,R,I)}H.fireEvent("columnmove",L,F,E,R);H.isDDMoveInGrid=false;if(S.isGroupHeader&&!L.isGroupHeader){if(L!==S){F.savedFlex=F.flex;delete F.flex;F.width=O}}else{if(!L.isGroupHeader){if(F.savedFlex){F.flex=F.savedFlex;delete F.width}}}Ext.resumeLayouts(true);if(e.headerCt.grid.floated){e.headerCt.grid.updateLayout()}}}},1,0,0,0,0,0,[Ext.grid.header,"DropZone"],0));(Ext.cmd.derive("Ext.grid.plugin.HeaderReorderer",Ext.plugin.Abstract,{init:function(f){this.headerCt=f;f.on({boxready:this.onHeaderCtRender,single:true,scope:this})},destroy:function(){var f=this;f.headerCt.un("boxready",f.onHeaderCtRender,f);Ext.destroy(f.dragZone,f.dropZone);f.headerCt=f.dragZone=f.dropZone=null;Ext.plugin.Abstract.prototype.destroy.call(this)},onHeaderCtRender:function(g){var l=this;l.dragZone=new Ext.grid.header.DragZone(l.headerCt);l.dropZone=new Ext.grid.header.DropZone(l.headerCt);if(l.disabled){l.dragZone.disable()}g.setTouchAction({panX:false})},enable:function(){this.disabled=false;if(this.dragZone){this.dragZone.enable()}},disable:function(){this.disabled=true;if(this.dragZone){this.dragZone.disable()}}},0,0,0,0,["plugin.gridheaderreorderer"],0,[Ext.grid.plugin,"HeaderReorderer"],0));(Ext.cmd.derive("Ext.grid.header.Container",Ext.container.Container,{border:true,baseCls:"x-grid-header-ct",dock:"top",weight:100,defaultType:"gridcolumn",defaultWidth:100,sortAscText:"Sort Ascending",sortDescText:"Sort Descending",sortClearText:"Clear Sort",columnsText:"Columns",headerOpenCls:"x-column-header-open",menuSortAscCls:"x-hmenu-sort-asc",menuSortDescCls:"x-hmenu-sort-desc",menuColsIcon:"x-cols-icon",blockEvents:false,dragging:false,sortOnClick:true,enableFocusableContainer:false,childHideCount:0,sortable:true,enableColumnHide:true,initComponent:function(){var f=this;f.plugins=f.plugins||[];f.defaults=f.defaults||{};if(!f.isColumn){f.isRootHeader=true;if(f.enableColumnResize){f.resizer=new Ext.grid.plugin.HeaderResizer();f.plugins.push(f.resizer)}if(f.enableColumnMove){f.reorderer=new Ext.grid.plugin.HeaderReorderer();f.plugins.push(f.reorderer)}}if(f.isColumn&&!f.isGroupHeader){if(!f.items||f.items.length===0){f.isContainer=f.isFocusableContainer=false;if(!f.hasOwnProperty("focusable")){f.focusable=true}f.layout={type:"container",calculate:Ext.emptyFn}}}else{f.layout=Ext.apply({type:"gridcolumn",align:"stretch"},f.initialConfig.layout);f.defaults.columnLines=f.columnLines;if(f.isRootHeader){if(!f.hiddenHeaders){f.enableFocusableContainer=true;f.ariaRole="rowgroup"}f.columnManager=new Ext.grid.ColumnManager(false,f);f.visibleColumnManager=new Ext.grid.ColumnManager(true,f);if(f.grid){f.grid.columnManager=f.columnManager;f.grid.visibleColumnManager=f.visibleColumnManager}}else{f.visibleColumnManager=new Ext.grid.ColumnManager(true,f);f.columnManager=new Ext.grid.ColumnManager(false,f)}}f.menuTask=new Ext.util.DelayedTask(f.updateMenuDisabledState,f);Ext.container.Container.prototype.initComponent.call(this)},isNested:function(){return !!this.getRootHeaderCt().down("[isNestedParent]")},isNestedGroupHeader:function(){var g=this,l=g.getRefOwner().query(">:not([hidden])");return(l.length===1&&l[0]===g)},maybeShowNestedGroupHeader:function(){var l=this.items,g;if(l&&l.length===1&&(g=l.getAt(0))&&g.hidden){g.show()}},setNestedParent:function(f){f.isNestedParent=false;f.ownerCt.isNestedParent=!!(this.ownerCt.items.length===1&&f.ownerCt.items.length===1)},initEvents:function(){var l=this,n,m;Ext.container.Container.prototype.initEvents.call(this);if(!l.isColumn&&!l.isGroupHeader){n=l.onHeaderCtEvent;m={click:n,dblclick:n,contextmenu:n,mousedown:l.onHeaderCtMouseDown,mouseover:l.onHeaderCtMouseOver,mouseout:l.onHeaderCtMouseOut,scope:l};if(Ext.supports.Touch){m.longpress=l.onHeaderCtLongPress}l.mon(l.el,m)}},onHeaderCtEvent:function(e,s){var q=this,u=q.getHeaderElByEvent(e),v,w,t;if(q.longPressFired){q.longPressFired=false;return}if(u&&!q.blockEvents){v=Ext.getCmp(u.id);if(v){w=v[v.clickTargetName];if((!v.isGroupHeader&&!v.isContainer)||e.within(w)){if(e.type==="click"||e.type==="tap"){t=v.onTitleElClick(e,w,q.sortOnClick);if(t){q.onHeaderTriggerClick(t,e,e.pointerType==="touch"?t.el:t.triggerEl)}else{q.onHeaderClick(v,e,s)}}else{if(e.type==="contextmenu"){q.onHeaderContextMenu(v,e,s)}else{if(e.type==="dblclick"&&v.resizable){v.onTitleElDblClick(e,w.dom)}}}}}}},blockNextEvent:function(){this.blockEvents=true;Ext.asap(this.unblockEvents,this)},unblockEvents:function(){this.blockEvents=false},onHeaderCtMouseDown:function(v,w){var t=Ext.Component.fromElement(w),x,e,u,y,s;if(t!==this){if(t.isGroupHeader){x=t.getVisibleGridColumns();y=this.getScrollable();for(e=0,u=x.length;e<u;++e){s=x[e];if(y.doIsInView(s.el,true).x){t=s;break}}}t.focus()}},onHeaderCtMouseOver:function(p,q){var s,e,o;if(!p.within(this.el,true)){s=p.getTarget("."+Ext.grid.column.Column.prototype.baseCls);e=s&&Ext.getCmp(s.id);if(e){o=e[e.clickTargetName];if(p.within(o)){e.onTitleMouseOver(p,o.dom)}}}},onHeaderCtMouseOut:function(w,q){var e="."+Ext.grid.column.Column.prototype.baseCls,s=w.getTarget(e),t=w.getRelatedTarget(e),u,v;if(s!==t){if(s){u=Ext.getCmp(s.id);if(u){v=u[u.clickTargetName];u.onTitleMouseOut(w,v.dom)}}if(t){u=Ext.getCmp(t.id);if(u){v=u[u.clickTargetName];u.onTitleMouseOver(w,v.dom)}}}},onHeaderCtLongPress:function(o){var p=this,e=p.getHeaderElByEvent(o),n;if(e){n=Ext.getCmp(e.id);if(n&&!n.menuDisabled){p.longPressFired=true;p.showMenuBy(o,e,n)}}},getHeaderElByEvent:function(e){return e.getTarget("."+Ext.grid.column.Column.prototype.baseCls)},isLayoutRoot:function(){if(this.hiddenHeaders){return false}return Ext.container.Container.prototype.isLayoutRoot.call(this)},getRootHeaderCt:function(){var f=this;return f.isRootHeader?f:f.up("[isRootHeader]")},doDestroy:function(){var f=this;if(f.menu){f.menu.un("hide",f.onMenuHide,f)}f.menuTask.cancel();Ext.destroy(f.visibleColumnManager,f.columnManager,f.menu);Ext.container.Container.prototype.doDestroy.call(this)},applyColumnsState:function(G,C){if(!G){return}var I=this,K=I.items.items,x=K.length,A=0,E,J,D,F,y,H=false,z=[],B=[];for(A=0;A<x;A++){D=K[A];F=G[D.getStateId()];if(F){y=F.index;z[y]=D;if(A!==y){H=true}if(D.applyColumnState){D.applyColumnState(F,C)}}else{B.push({index:A,column:D})}}z=Ext.Array.clean(z);E=B.length;if(E){for(A=0;A<E;A++){F=B[A];y=F.index;if(y<z.length){H=true;Ext.Array.splice(z,y,0,F.column)}else{z.push(F.column)}}}if(H){I.applyingState=true;I.removeAll(false);delete I.applyingState;I.add(z);I.purgeCache()}},getColumnsState:function(){var m=this,n=[],l;m.items.each(function(e){l=e.getColumnState&&e.getColumnState();if(l){n.push(l)}});return n},onAdd:function(l){var m=this,n;Ext.container.Container.prototype.onAdd.apply(this,arguments);n=m.getRootHeaderCt();m.onHeadersChanged(l,n&&n.isDDMoveInGrid)},move:function(p,n){var o=this,q=o.items,s;if(p.isComponent){s=p;p=q.indexOf(s)}else{s=q.getAt(p)}s.visibleFromIdx=o.getRootHeaderCt().visibleColumnManager.indexOf(s);Ext.container.Container.prototype.move.apply(this,arguments)},onMove:function(w,s,x){var y=this,q=y.getRootHeaderCt(),u=q.visibleColumnManager,v=1,t;y.onHeadersChanged(w,true);t=u.indexOf(w);if(t>=w.visibleFromIdx){t++}Ext.container.Container.prototype.onMove.apply(this,arguments);if(w.isGroupHeader){v=w.visibleColumnManager.getColumns().length}q.onHeaderMoved(w,v,w.visibleFromIdx,t)},maybeContinueRemove:function(){var f=this;return(f.isGroupHeader&&!f.applyingState)&&!f.isNestedParent&&f.ownerCt&&!f.items.getCount()},onRemove:function(m,o){var n=this,p=n.ownerCt;Ext.container.Container.prototype.onRemove.call(this,m,o);if(!n.destroying){if(!n.getRootHeaderCt().isDDMoveInGrid){n.onHeadersChanged(m,false)}if(n.maybeContinueRemove()){if(m.rendered){n.detachComponent(m)}n.destroyAfterRemoving=true;Ext.suspendLayouts();p.remove(n,false);Ext.resumeLayouts(true)}}},onHeadersChanged:function(m,p){var o,n=this.getRootHeaderCt();this.purgeHeaderCtCache(this);if(n){n.onColumnsChanged();o=n.ownerCt;if(o&&!p){o.onHeadersChanged(n,m)}}},onHeaderMoved:function(u,t,q,o){var p=this,s=p.ownerCt;if(p.rendered){if(s&&s.onHeaderMove){s.onHeaderMove(p,u,t,q,o)}p.fireEvent("columnmove",p,u,q,o)}},onColumnsChanged:function(){var n=this,m=n.menu,p,o;if(n.rendered){n.fireEvent("columnschanged",n);if(m){p=m.child("#columnItemSeparator");o=m.child("#columnItem");if(p){p.destroy()}if(o){o.destroy()}}}},lookupComponent:function(g){var l=Ext.container.Container.prototype.lookupComponent.apply(this,arguments);if(!l.isGroupHeader&&l.width===undefined&&!l.flex){l.width=this.defaultWidth}return l},setSortState:function(){var s=this.up("[store]").store,p=this.visibleColumnManager.getColumns(),t=p.length,q,u,o;for(q=0;q<t;q++){u=p[q];o=u.getSorter();if(o){if(!s.getSorters().contains(o)){o=null}}else{o=s.getSorters().get(u.getSortParam())}u.setSortState(o)}},getHeaderMenu:function(){var g=this.getMenu(),l;if(g){l=g.child("#columnItem");if(l){return l.menu}}return null},onHeaderVisibilityChange:function(n,o){var q=this,p=q.getHeaderMenu(),s;q.purgeHeaderCtCache(n.ownerCt);if(p){s=q.getMenuItemForHeader(p,n);if(s){s.setChecked(o,true)}if(p.isVisible()){q.menuTask.delay(50)}}},updateMenuDisabledState:function(x){var y=this,s=y.query("gridcolumn:not([hidden])"),t,w=s.length,q,u,v;if(!x){x=y.getMenu()}for(t=0;t<w;++t){q=s[t];u=y.getMenuItemForHeader(x,q);if(u){v=q.isHideable()?"enable":"disable";if(u.menu){v+="CheckChange"}u[v]()}}},getMenuItemForHeader:function(l,g){return g?l.down("menucheckitem[headerId="+g.id+"]"):null},onHeaderShow:function(m){var n=this,o=n.ownerCt,p=m.lastHiddenHeader;if(!o){return}if(n.forceFit){delete n.flex}if(p&&!m.query("[hidden=false]").length){p.show();m.lastHiddenHeader=null}n.onHeaderVisibilityChange(m,true);o.onHeaderShow(n,m);n.fireEvent("columnshow",n,m);n.fireEvent("columnschanged",this)},onHeaderHide:function(l){var m=this,n=m.ownerCt;if(!n){return}m.onHeaderVisibilityChange(l,false);n.onHeaderHide(m,l);m.fireEvent("columnhide",m,l);m.fireEvent("columnschanged",this)},onHeaderResize:function(m,p){var n=this,o=n.ownerCt;if(o){o.onHeaderResize(n,m,p)}n.fireEvent("columnresize",n,m,p)},onHeaderClick:function(t,u,p){var e=this,s=t.getView().getSelectionModel(),q;t.fireEvent("headerclick",e,t,u,p);q=e.fireEvent("headerclick",e,t,u,p);if(q!==false){if(s.onHeaderClick){s.onHeaderClick(e,t,u)}}return q},onHeaderContextMenu:function(e,m,n){e.fireEvent("headercontextmenu",this,e,m,n);this.fireEvent("headercontextmenu",this,e,m,n)},onHeaderTriggerClick:function(e,n,p){var o=this;if(e.fireEvent("headertriggerclick",o,e,n,p)!==false&&o.fireEvent("headertriggerclick",o,e,n,p)!==false){if(e.activeMenu){if(n.pointerType){e.activeMenu.hide()}else{e.activeMenu.focus()}}else{o.showMenuBy(n,p,e)}}},showMenuBy:function(w,s,v){var y=this.getMenu(),x=y.down("#ascItem"),q=y.down("#descItem"),t,u=w&&w.pointerType==="touch";y.activeHeader=y.ownerCmp=v;v.setMenuActive(y);t=v.sortable?"enable":"disable";if(x){x[t]()}if(q){q[t]()}y.autoFocus=!w||w.keyCode;y.showBy(s,"tl-bl?");if(!y.isVisible()){this.onMenuHide(y)}},hideMenu:function(){if(this.menu){this.menu.hide()}},onMenuHide:function(f){f.activeHeader.setMenuActive(false)},purgeHeaderCtCache:function(f){while(f){f.purgeCache();if(f.isRootHeader){return}f=f.ownerCt}},purgeCache:function(){var l=this,m=l.visibleColumnManager,n=l.columnManager;l.gridVisibleColumns=l.gridDataColumns=l.hideableColumns=null;if(m){m.invalidate();n.invalidate()}},getMenu:function(){var g=this,l=g.view&&g.view.ownerGrid;if(!g.menu){g.menu=new Ext.menu.Menu({hideOnParentHide:false,items:g.getMenuItems(),listeners:{beforeshow:g.beforeMenuShow,hide:g.onMenuHide,scope:g}});g.fireEvent("menucreate",g,g.menu);if(l){l.fireEvent("headermenucreate",l,g.menu,g)}}return g.menu},beforeMenuShow:function(n){var p=this,q=n.child("#columnItem"),s,o;if(!q){s=p.enableColumnHide?p.getColumnMenu(p):null;o=p.sortable?2:0;if(s&&s.length){n.insert(o,[{itemId:"columnItemSeparator",xtype:"menuseparator"},{itemId:"columnItem",text:p.columnsText,iconCls:p.menuColsIcon,menu:{items:s},hideOnClick:false}])}}p.updateMenuDisabledState(p.menu)},getMenuItems:function(){var l=this,m=[],n=l.enableColumnHide?l.getColumnMenu(l):null;if(l.sortable){m=[{itemId:"ascItem",text:l.sortAscText,iconCls:l.menuSortAscCls,handler:l.onSortAscClick,scope:l},{itemId:"descItem",text:l.sortDescText,iconCls:l.menuSortDescCls,handler:l.onSortDescClick,scope:l}]}if(n&&n.length){if(l.sortable){m.push({itemId:"columnItemSeparator",xtype:"menuseparator"})}m.push({itemId:"columnItem",text:l.columnsText,iconCls:l.menuColsIcon,menu:n,hideOnClick:false})}return m},onSortAscClick:function(){var g=this.getMenu(),l=g.activeHeader;l.sort("ASC")},onSortDescClick:function(){var g=this.getMenu(),l=g.activeHeader;l.sort("DESC")},getColumnMenu:function(w){var s=[],t=0,p,u=w.query(">gridcolumn[hideable]"),v=u.length,q;for(;t<v;t++){p=u[t];q=new Ext.menu.CheckItem({text:p.menuText||p.text,checked:!p.hidden,hideOnClick:false,headerId:p.id,menu:p.isGroupHeader?this.getColumnMenu(p):undefined,checkHandler:this.onColumnCheckChange,scope:this});s.push(q)}return s.length?s:null},onColumnCheckChange:function(n,m){var l=Ext.getCmp(n.headerId);if(l.rendered){l[m?"show":"hide"]()}else{l.hidden=!m}},getColumnCount:function(){return this.getGridColumns().length},getTableWidth:function(){var n=0,o=this.getVisibleGridColumns(),m=o.length,p;for(p=0;p<m;p++){n+=o[p].getCellWidth()||0}return n},getVisibleGridColumns:function(){var v=this,s,p,t,u,q,w;if(v.gridVisibleColumns){return v.gridVisibleColumns}s=v.getGridColumns();p=v.getRootHeaderCt();t=[];u=s.length;for(q=0;q<u;q++){w=s[q];if(!w.hidden&&!w.isColumnHidden(p)){t[t.length]=w}}v.gridVisibleColumns=t;return t},isColumnHidden:function(g){var l=this.getRefOwner();while(l&&l!==g){if(l.hidden){return true}l=l.getRefOwner()}return false},getGridColumns:function(u,A){if(!u&&this.gridDataColumns){return this.gridDataColumns}var v=this,s=u||[],w,z,x,t,y;A=A||v.hidden;if(v.items){w=v.items.items;if(w){for(z=0,x=w.length;z<x;z++){t=w[z];if(t.isGroupHeader){t.visibleIndex=s.length;t.getGridColumns(s,A)}else{t.hiddenAncestor=A;s.push(t)}}}}if(!u){v.gridDataColumns=s}if(!u&&x){for(z=0,x=s.length;z<x;z++){t=s[z];t.fullColumnIndex=z;t.isFirstVisible=t.isLastVisible=false;if(!(t.hidden||t.hiddenAncestor)){if(!y){t.isFirstVisible=true}y=t}}if(y){y.isLastVisible=true}}return s},getHideableColumns:function(){var g=this,l=g.hideableColumns;if(!l){l=g.hideableColumns=g.query("[hideable]")}return l},getHeaderIndex:function(f){if(!this.columnManager){this.columnManager=this.getRootHeaderCt().columnManager}return this.columnManager.getHeaderIndex(f)},getHeaderAtIndex:function(f){if(!this.columnManager){this.columnManager=this.getRootHeaderCt().columnManager}return this.columnManager.getHeaderAtIndex(f)},getVisibleHeaderClosestToIndex:function(f){if(!this.visibleColumnManager){this.visibleColumnManager=this.getRootHeaderCt().visibleColumnManager}return this.visibleColumnManager.getVisibleHeaderClosestToIndex(f)},applyForceFit:function(C){var O=this,N=O.view,H=Ext.grid.plugin.HeaderResizer.prototype.minColWidth,F=false,J=Ext.grid.header.Container.prototype.defaultWidth,I=O.el.dom.clientWidth-(N.el.dom.scrollHeight>N.el.dom.clientHeight?Ext.getScrollbarSize().width:0),E=0,P=O.getVisibleGridColumns(),B=C.hidden,Q,D,K,A,G;function M(){for(D=0,Q=P.length;D<Q;D++){K=P[D];if(K===C){continue}K.flex=K.flex||K.width||K.getWidth();E+=K.flex;K.width=null}}function L(){var e;for(D=0,Q=P.length;D<Q;D++){K=P[D];e=(K===C);if(F&&!e){K.flex=H;K.width=null}else{if(!e){G=K.flex||J;K.flex=Math.max(Math.ceil((G/E)*I),H);K.width=null}}K.setWidth(K.width||K.flex)}}Ext.suspendLayouts();A=(I-((P.length+1)*H));C.flex=null;if(B){G=C.width||C.savedWidth||Math.floor(A/(P.length+1));C.savedWidth=null}else{G=N.getMaxContentWidth(C)}if(G>A){C.width=A;F=true}else{C.width=G;I-=G+J;M()}L();Ext.resumeLayouts(true)},autoSizeColumn:function(g){var l=this.view;if(l){l.autoSizeColumn(g);if(this.forceFit){this.applyForceFit(g)}}},getRefItems:function(g){var l=Ext.container.Container.prototype.getRefItems.call(this,g);if(this.menu){l.push(this.menu)}return l},privates:{beginChildHide:function(){++this.childHideCount},endChildHide:function(){--this.childHideCount},getFocusables:function(){return this.isRootHeader?this.getVisibleGridColumns():this.items.items},createFocusableContainerKeyNav:function(l){var g=this;return new Ext.util.KeyNav(l,{scope:g,down:g.showHeaderMenu,left:g.onFocusableContainerLeftKey,right:g.onFocusableContainerRightKey,home:g.onHomeKey,end:g.onEndKey,space:g.onHeaderActivate,enter:g.onHeaderActivate})},onHomeKey:function(e){return this.focusChild(null,true,e)},onEndKey:function(e){return this.focusChild(null,false,e)},showHeaderMenu:function(e){var l=this.getFocusableFromEvent(e);if(l&&l.isColumn&&l.triggerEl){this.onHeaderTriggerClick(l,e,l.triggerEl)}},onHeaderActivate:function(e){var n=this.getFocusableFromEvent(e),p,o;if(n&&n.isColumn){p=n.getView();if(n.sortable&&this.sortOnClick){o=p.getNavigationModel().getLastFocused();n.toggleSortState();if(o){p.ownerCt.ensureVisible(o.record)}}else{if(e.getKey()===e.SPACE){n.onTitleElClick(e,e.target,this.sortOnClick)}}return this.onHeaderClick(n,e,n.el)}},onOwnerGridReconfigure:function(n,m){var l=this;if(!l.rendered||l.destroying||l.destroyed){return}if(n||m){l.initFocusableContainer()}}}},0,["headercontainer"],["component","box","container","headercontainer"],{component:true,box:true,container:true,headercontainer:true},["widget.headercontainer"],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.grid.header,"Container"],0));(Ext.cmd.derive("Ext.grid.column.Column",Ext.grid.header.Container,{alternateClassName:"Ext.grid.Column",config:{triggerVisible:false,sorter:null,align:"start"},baseCls:"x-column-header",hoverCls:"x-column-header-over",ariaRole:"columnheader",enableFocusableContainer:false,sortState:null,possibleSortStates:["ASC","DESC"],ariaSortStates:{ASC:"ascending",DESC:"descending"},childEls:["titleEl","triggerEl","textEl","textContainerEl","textInnerEl"],headerWrap:false,renderTpl:['<div id="{id}-titleEl" data-ref="titleEl" role="presentation"','{tipMarkup}class="',"x-",'column-header-inner<tpl if="!$comp.isContainer"> ',"x-","leaf-column-header</tpl>",'<tpl if="empty"> ',"x-",'column-header-inner-empty</tpl>">','<div id="{id}-textContainerEl" data-ref="textContainerEl" role="presentation" class="',"x-",'column-header-text-container">','<div role="presentation" class="',"x-",'column-header-text-wrapper">','<div id="{id}-textEl" data-ref="textEl" role="presentation" class="',"x-","column-header-text",'{childElCls}">','<span id="{id}-textInnerEl" data-ref="textInnerEl" role="presentation" class="',"x-",'column-header-text-inner">{text}</span>',"</div>","{%","values.$comp.afterText(out, values);","%}","</div>","</div>",'<tpl if="!menuDisabled">','<div id="{id}-triggerEl" data-ref="triggerEl" role="presentation" unselectable="on" class="',"x-","column-header-trigger",'{childElCls}" style="{triggerStyle}"></div>',"</tpl>","</div>","{%this.renderContainer(out,values)%}"],dataIndex:null,text:"\xa0",menuText:null,emptyCellText:"\xa0",sortable:true,resizable:true,hideable:true,menuDisabled:false,renderer:false,draggable:true,tooltipType:"qtip",initDraggable:Ext.emptyFn,tdCls:"",dirtyText:"Cell value has been edited",producesHTML:true,ignoreExport:false,exportStyle:null,isHeader:true,isColumn:true,scrollable:false,requiresMenu:false,tabIndex:-1,ascSortCls:"x-column-header-sort-ASC",descSortCls:"x-column-header-sort-DESC",componentLayout:"columncomponent",groupSubHeaderCls:"x-group-sub-header",groupHeaderCls:"x-group-header",clickTargetName:"titleEl",detachOnRemove:true,initResizable:Ext.emptyFn,rendererNames:{column:"renderer",edit:"editRenderer",summary:"summaryRenderer"},formatterNames:{column:"formatter",edit:"editFormatter",summary:"summaryFormatter"},initComponent:function(){var f=this;if(!f.rendererScope){f.rendererScope=f.scope}if(f.header!=null){f.text=f.header;f.header=null}if(f.cellWrap){f.tdCls=(f.tdCls||"")+" x-wrap-cell"}if(f.columns!=null){f.isGroupHeader=true;f.ariaRole="presentation";f.items=f.columns;f.columns=null;f.cls=(f.cls||"")+" "+f.groupHeaderCls;f.sortable=f.resizable=false;f.align="center"}else{if(f.flex){f.minWidth=f.minWidth||Ext.grid.plugin.HeaderResizer.prototype.minColWidth}}f.addCls("x-column-header-align-"+f.align);f.setupRenderer();f.setupRenderer("edit");f.setupRenderer("summary");Ext.grid.header.Container.prototype.initComponent.apply(this,arguments)},beforeLayout:function(){var n=this.items,o,m,p;if(!Ext.isArray(n)){n=n.items}o=n.length;if(o){for(m=0;!p&&m<o;m++){p=n[m].flex}if(!p){this.flex=null}}Ext.grid.header.Container.prototype.beforeLayout.call(this)},onAdded:function(o,m,p){var n=this;Ext.grid.header.Container.prototype.onAdded.call(this,o,m,p);if(!n.headerId){n.calculateHeaderId()}n.configureStateInfo()},_initSorterFn:function(u,w){var v=this,x=v.column,y=x.resolveListenerScope(),s=v.methodName,q=y&&y[s],t=0;if(q){v.setSorterFn(q);v.column=null;t=q.call(y,u,w)}return t},applySorter:function(m){var n=this,o=m?m.sorterFn:null,p;if(typeof o==="string"){p=new Ext.util.Sorter(Ext.applyIf({sorterFn:n._initSorterFn},m));p.methodName=o;p.column=n}else{p=n.getRootHeaderCt().up("tablepanel").store.getData().getSorters().decodeSorter(m)}return p},updateAlign:function(f){this.textAlign=this._alignMap[f]||f},bindFormatter:function(g){var l=this;return function(e){return g(e,l.rendererScope||l.resolveListenerScope())}},bindRenderer:function(g){var l=this;l.hasCustomRenderer=true;return function(){return Ext.callback(g,l.rendererScope,arguments,0,l)}},setupRenderer:function(t){t=t||"column";var s=this,w=s[s.formatterNames[t]],q=s[s.rendererNames[t]],u=t==="column",v,p;if(!w){if(q){if(typeof q==="string"){q=s[s.rendererNames[t]]=s.bindRenderer(q);p=true}if(u){s.hasCustomRenderer=p||q.length>1}}else{if(u&&s.defaultRenderer){s.renderer=s.defaultRenderer;s.usingDefaultRenderer=true}}}else{v=Ext.app.bind.Parser.fly(w);w=v.compileFormat();v.release();s[s.formatterNames[t]]=null;s[s.rendererNames[t]]=s.bindFormatter(w)}},getView:function(){var f=this.getRootHeaderCt();if(f){return f.view}},onFocusLeave:function(e){Ext.grid.header.Container.prototype.onFocusLeave.call(this,e);if(this.activeMenu){this.activeMenu.hide()}},initItems:function(){var f=this;Ext.grid.header.Container.prototype.initItems.apply(this,arguments);if(f.isGroupHeader){if(f.config.hidden||!f.hasVisibleChildColumns()){f.hide()}}},hasVisibleChildColumns:function(){var o=this.items.items,p=o.length,n,m;for(n=0;n<p;++n){m=o[n];if(m.isColumn&&!m.hidden){return true}}return false},onAdd:function(g){var l=this;if(g.isColumn){g.isSubHeader=true;g.addCls(l.groupSubHeaderCls)}if(l.isGroupHeader&&l.hidden&&l.hasVisibleChildColumns()){l.show()}Ext.grid.header.Container.prototype.onAdd.call(this,g)},onRemove:function(l,n){var m=this;if(l.isSubHeader){l.isSubHeader=false;l.removeCls(m.groupSubHeaderCls)}Ext.grid.header.Container.prototype.onRemove.call(this,l,n);if(!(m.destroyed||m.destroying)&&!m.hasVisibleChildColumns()&&(m.ownerCt&&!m.ownerCt.isNested())){m.hide()}},initRenderData:function(){var q=this,n="",p=q.tooltip,o=q.text,s=q.tooltipType==="qtip"?"data-qtip":"title";if(!Ext.isEmpty(p)){n=s+'="'+p+'" '}return Ext.applyIf(Ext.grid.header.Container.prototype.initRenderData.apply(this,arguments),{text:o,empty:q.isEmptyText(o),menuDisabled:q.menuDisabled,tipMarkup:n,triggerStyle:this.getTriggerVisible()?"display:block":""})},applyColumnState:function(A,y){var u=this,s=u.getSorter(),v=y&&y.sorters,w,x,z,t;if(s&&v&&(w=v.length)){t=s.getId();for(x=0;!z&&x<w;x++){if(v[x].id===t){s.setDirection(v[x].direction);v[x]=s;break}}}u.applyColumnsState(A.columns);if(A.hidden!=null){u.hidden=A.hidden}if(A.locked!=null){u.locked=A.locked}if(A.sortable!=null){u.sortable=A.sortable}if(A.width!=null){u.flex=null;u.width=A.width}else{if(A.flex!=null){u.width=null;u.flex=A.flex}}},getColumnState:function(){var m=this,n=m.items.items,l={id:m.getStateId()};m.savePropsToState(["hidden","sortable","locked","flex","width"],l);if(m.isGroupHeader&&n&&n.length){l.columns=m.getColumnsState()}if("width" in l){delete l.flex}return l},setText:function(l){var m=this,n;m.text=l;if(m.rendered){n=m.getView().ownerGrid;m.textInnerEl.setHtml(l);m.titleEl.toggleCls("x-column-header-inner-empty",m.isEmptyText(l));n.syncHeaderVisibility()}},getIndex:function(){return this.isGroupColumn?false:this.getRootHeaderCt().getHeaderIndex(this)},getVisibleIndex:function(){return this.visibleIndex!=null?this.visibleIndex:this.isGroupColumn?false:Ext.Array.indexOf(this.getRootHeaderCt().getVisibleGridColumns(),this)},getLabelChain:function(){var l=this,m=[],n;while((n=l.up("headercontainer"))){if(n.text){m.unshift(Ext.util.Format.stripTags(n.text))}l=n}return m},beforeRender:function(){var p=this,s=p.getRootHeaderCt(),o=p.isSortable(),n=[],q;Ext.grid.header.Container.prototype.beforeRender.call(this);if(!p.requiresMenu&&!o&&!p.groupable&&!p.lockable&&(s.grid.enableColumnHide===false||!s.getHideableColumns().length)){p.menuDisabled=true}if(p.cellWrap){p.variableRowHeight=true}q=p.ariaRenderAttributes||(p.ariaRenderAttributes={});q["aria-readonly"]=true;if(o){q["aria-sort"]=p.ariaSortStates[p.sortState]}if(p.isSubHeader){n=p.getLabelChain();if(p.text){n.push(Ext.util.Format.stripTags(p.text))}if(n.length){q["aria-label"]=n.join(" ")}}p.protoEl.unselectable()},getTriggerElWidth:function(){var l=this,m=l.triggerEl,n=l.self.triggerElWidth;if(m&&n===undefined){m.setStyle("display","block");n=l.self.triggerElWidth=m.getWidth();m.setStyle("display","")}return n},afterComponentLayout:function(p,t,s,u){var o=this,q=o.getRootHeaderCt();Ext.grid.header.Container.prototype.afterComponentLayout.apply(this,arguments);if(q&&(s!=null||o.flex)&&p!==s){q.onHeaderResize(o,p)}},doDestroy:function(){Ext.destroy(this.field,this.editor);Ext.grid.header.Container.prototype.doDestroy.call(this)},onTitleMouseOver:function(){this.titleEl.addCls(this.hoverCls)},onTitleMouseOut:function(){this.titleEl.removeCls(this.hoverCls)},onDownKey:function(e){if(this.triggerEl){this.onTitleElClick(e,this.triggerEl.dom||this.el.dom)}},onEnterKey:function(e){this.onTitleElClick(e,this.el.dom)},onTitleElDblClick:function(e){var p=this,q,o,s;if(p.isAtStartEdge(e)){q=p.previousNode("gridcolumn:not([hidden]):not([isGroupHeader])");if(q&&q.getRootHeaderCt()===p.getRootHeaderCt()){q.autoSize()}}else{if(p.isAtEndEdge(e)){if(p.isGroupHeader&&e.getPoint().isContainedBy(p.layout.innerCt)){o=p.query("gridcolumn:not([hidden]):not([isGroupHeader])");p.getRootHeaderCt().autoSizeColumn(o[o.length-1]);return}else{s=p.getRootHeaderCt();if(s.visibleColumnManager.getColumns().length===1&&s.forceFit){return}}p.autoSize()}}},autoSize:function(){var q=this,p,n,s,o;if(q.isGroupHeader){p=q.query("gridcolumn:not([hidden]):not([isGroupHeader])");n=p.length;o=q.getRootHeaderCt();Ext.suspendLayouts();for(s=0;s<n;s++){o.autoSizeColumn(p[s])}Ext.resumeLayouts(true);if(grid.ownerGrid.lockable&&grid.isLayoutRoot()){grid.ownerGrid.syncLockableLayout()}return}q.getRootHeaderCt().autoSizeColumn(q)},isEmptyText:function(f){return f==null||f==="&#160;"||f===" "||f===""},onTitleElClick:function(u,q,e){var w=this,t,s,v;if(u.pointerType==="touch"){s=w.previousSibling(":not([hidden])");if(!w.menuDisabled){v=parseInt(w.triggerEl.getStyle("width"),10);if(isNaN(v)){v=w.getHandleWidth(u)*3}if(w.isAtEndEdge(u,v)){t=w}}if(!t&&s&&!s.menuDisabled&&w.isAtStartEdge(u)){t=s}}else{t=w.triggerEl&&(u.target===w.triggerEl.dom||q===w.triggerEl||u.within(w.triggerEl))?w:null}if(e!==false&&(!t&&!w.isAtStartEdge(u)&&!w.isAtEndEdge(u)||u.getKey())){w.toggleSortState()}return t},processEvent:function(u,q,s,p,e,t){return this.fireEvent.apply(this,arguments)},isSortable:function(){var m=this.getRootHeaderCt(),n=m?m.grid:null,l=this.sortable;if(n&&n.sortableColumns===false){l=false}return l},toggleSortState:function(){if(this.isSortable()){this.sort()}},sort:function(o){var p=this,q=p.up("tablepanel"),s=q.store,n=p.getSorter();Ext.suspendLayouts();if(n){if(o){n.setDirection(o)}s.sort(n,q.multiColumnSort?"multi":"replace")}else{s.sort(p.getSortParam(),o,q.multiColumnSort?"multi":"replace")}Ext.resumeLayouts(true);if(q.ownerGrid.lockable&&q.isLayoutRoot()){q.ownerGrid.syncLockableLayout()}},getSortParam:function(){return this.dataIndex},setSortState:function(w){var s=this,q=w&&w.getDirection(),x=s.ascSortCls,u=s.descSortCls,t=s.getRootHeaderCt(),v=s.ariaEl.dom,y;switch(q){case"DESC":if(!s.hasCls(u)){s.addCls(u);s.sortState="DESC";y=true}s.removeCls(x);break;case"ASC":if(!s.hasCls(x)){s.addCls(x);s.sortState="ASC";y=true}s.removeCls(u);break;default:s.removeCls([x,u]);s.sortState=null;break}if(v){if(s.sortState){v.setAttribute("aria-sort",s.ariaSortStates[s.sortState])}else{v.removeAttribute("aria-sort")}}if(y){t.fireEvent("sortchange",t,s,q)}},isHideable:function(){var f={hideCandidate:this,result:this.hideable};if(f.result){this.ownerCt.bubble(this.hasOtherMenuEnabledChildren,null,[f])}return f.result},hasOtherMenuEnabledChildren:function(n){var m,l;if(!this.isXType("headercontainer")){n.result=false;return false}m=this.query(">gridcolumn:not([hidden]):not([menuDisabled])");l=m.length;if(Ext.Array.contains(m,n.hideCandidate)){l--}if(l){return false}n.hideCandidate=this},isLockable:function(){var f={result:this.lockable!==false};if(f.result){this.ownerCt.bubble(this.hasMultipleVisibleChildren,null,[f])}return f.result},isLocked:function(){return this.locked||!!this.up("[isColumn][locked]","[isRootHeader]")},hasMultipleVisibleChildren:function(f){if(!this.isXType("headercontainer")){f.result=false;return false}if(this.query(">gridcolumn:not([hidden])").length>1){return false}},hide:function(){var l=this,m=l.getRootHeaderCt(),n=l.getRefOwner();if(n.constructing){Ext.grid.header.Container.prototype.hide.call(this);return l}if(l.rendered&&!l.isVisible()){return l}if(m.forceFit){l.visibleSiblingCount=m.getVisibleGridColumns().length-1;if(l.flex){l.savedWidth=l.getWidth();l.flex=null}}m.beginChildHide();Ext.suspendLayouts();if(n.isGroupHeader){if(l.isNestedGroupHeader()){n.hide()}if(l.isSubHeader&&!l.isGroupHeader&&n.query(">gridcolumn:not([hidden])").length===1){n.lastHiddenHeader=l}}Ext.grid.header.Container.prototype.hide.call(this);m.endChildHide();m.onHeaderHide(l);Ext.resumeLayouts(true);if(m.grid.ownerGrid.lockable&&m.grid.isLayoutRoot()){m.grid.ownerGrid.syncLockableLayout()}return l},show:function(){var l=this,n=l.getRootHeaderCt(),m=l.getRefOwner();if(l.isVisible()){return l}if(m.isGroupHeader){m.lastHiddenHeader=null}if(l.rendered){if(n.forceFit){n.applyForceFit(l)}}Ext.suspendLayouts();if(l.isSubHeader&&m.hidden){m.show(false,true)}Ext.grid.header.Container.prototype.show.apply(this,arguments);if(l.isGroupHeader){l.maybeShowNestedGroupHeader()}m=l.getRootHeaderCt();if(m){m.onHeaderShow(l)}Ext.resumeLayouts(true);if(n.grid.ownerGrid.lockable&&n.grid.isLayoutRoot()){n.grid.ownerGrid.syncLockableLayout()}return l},shouldUpdateCell:function(q,o){if(!this.preventUpdate){if(this.hasCustomRenderer){return 1}if(o){var s=o.length,p,n;for(p=0;p<s;++p){n=o[p];if(n===this.dataIndex||n===q.idProperty){return 2}}}else{return 2}}},getCellWidth:function(){var g=this,l;if(g.rendered&&g.componentLayout&&g.componentLayout.lastComponentSize){l=g.componentLayout.lastComponentSize.width}else{if(g.width){l=g.width}else{if(!g.isColumn){l=g.getTableWidth()}}}return l},getCellId:function(){return"x-grid-cell-"+this.getItemId()},getCellSelector:function(){var f=this.getView();return(f?f.getCellSelector():"")+"."+this.getCellId()},getCellInnerSelector:function(){return this.getCellSelector()+" .x-grid-cell-inner"},isAtStartEdge:function(l){var e=l.getXY()[0]-this.getX();if(e<0&&this.getIndex()===0){return false}return(e<this.getHandleWidth(l))},isAtEndEdge:function(e,l){return(this.getX()+this.getWidth()-e.getXY()[0]<=(l||this.getHandleWidth(e)))},getHandleWidth:function(e){return e.pointerType==="touch"?10:4},setMenuActive:function(f){this.activeMenu=f;this.titleEl[f?"addCls":"removeCls"](this.headerOpenCls)},privates:{_alignMap:{start:"left",end:"right"},afterText:function(g,l){if(this.dirtyText){this.dirtyTextElementId=this.id+"-dirty-cell-text";g.push('<span id="'+this.dirtyTextElementId+'" class="x-hidden-offsets">'+this.dirtyText+"</span>")}},calculateHeaderId:function(){var p=this,w,v,t,q,s,u;if(!p.headerId){w=p.up("tablepanel");if(!w){return}t=p.items.items;if(t){for(s=0,u=t.length;s<u;++s){q=t[s];if(q.isColumn){q.calculateHeaderId()}}}v=w?w.ownerGrid:p.getRootHeaderCt();v.headerCounter=(v.headerCounter||0)+1;p.headerId="h"+v.headerCounter}p.configureStateInfo()},configureStateInfo:function(){var l=this,g;if(!l.stateId){l.stateId=l.initialConfig.id||l.headerId}g=l.getSorter();if(!l.hasSetSorter&&g&&!g.initialConfig.id){if(l.dataIndex||l.stateId){g.setId((l.dataIndex||l.stateId)+"-sorter");l.hasSetSorter=true}}}},deprecated:{5:{methods:{bindRenderer:function(f){return function(e){return Ext.util.Format[f](e)}}}}}},0,["gridcolumn"],["component","box","container","headercontainer","gridcolumn"],{component:true,box:true,container:true,headercontainer:true,gridcolumn:true},["widget.gridcolumn"],0,[Ext.grid.column,"Column",Ext.grid,"Column"],0));Ext.define("Ext.theme.triton.grid.column.Column",{override:"Ext.grid.column.Column",compatibility:Ext.isIE8,onTitleMouseOver:function(){var f=this.triggerEl;arguments.callee.$previous.apply(this,arguments);if(f){f.syncRepaint()}}});(Ext.cmd.derive("Ext.grid.column.ActionProxy",Ext.Base,{constructor:function(m,l,n){this.column=m;this.item=l;this.itemIndex=n},setHandler:function(f){this.item.handler=f},setDisabled:function(f){if(f){this.column.disableAction(this.itemIndex)}else{this.column.enableAction(this.itemIndex)}},setIconCls:function(f){this.item.iconCls=f;this.column.getView().refreshView()},setIconGlyph:function(f){this.item.glyph=f;this.column.getView().refreshView()},setHidden:function(f){this.item.hidden=f;this.column.getView().refreshView()},setVisible:function(f){this.setHidden(!f)},on:function(){return this.column.on.apply(this.column,arguments)}},1,0,0,0,0,0,[Ext.grid.column,"ActionProxy"],0));(Ext.cmd.derive("Ext.grid.column.Action",Ext.grid.column.Column,{alternateClassName:"Ext.grid.ActionColumn",stopSelection:true,actionIdRe:new RegExp("x-action-col-(\\d+)"),altText:"",menuText:"<i>Actions</i>",itemTabIndex:0,itemAriaRole:"button",maskOnDisable:false,ignoreExport:true,sortable:false,innerCls:"x-grid-cell-inner-action-col",actionIconCls:"x-action-col-icon",constructor:function(s){var x=this,u=Ext.apply({},s),t=u.items||x.items||[x],w,q,v,y;x.origRenderer=u.renderer||x.renderer;x.origScope=u.scope||x.scope;x.renderer=x.scope=u.renderer=u.scope=null;u.items=null;Ext.grid.column.Column.prototype.constructor.call(this,u);x.items=t;for(q=0,v=t.length;q<v;++q){y=t[q];if(y.substr&&y[0]==="@"){y=x.getAction(y.substr(1))}if(y.isAction){t[q]=y.initialConfig;y.addComponent(new Ext.grid.column.ActionProxy(x,t[q],q))}if(y.getClass){w=true}}if(x.origRenderer||w){x.hasCustomRenderer=true}},initComponent:function(){var f=this;Ext.grid.column.Column.prototype.initComponent.call(this);if(f.sortable&&!f.dataIndex){f.sortable=false}},defaultRenderer:function(L,G,W,X,H,S,I){var M=this,Y=M.origScope||M,F=M.items,Q=F.length,v,N,K,U,T,R,P,O,V,J;K=Ext.isFunction(M.origRenderer)?M.origRenderer.apply(Y,arguments)||"":"";G.tdCls+=" x-action-col-cell";for(v=0;v<Q;v++){N=F[v];P=N.icon;O=N.glyph;U=N.disabled||(N.isDisabled?Ext.callback(N.isDisabled,N.scope||M.origScope,[I,X,H,N,W],0,M):false);T=N.tooltip||(N.getTip?Ext.callback(N.getTip,N.scope||M.origScope,arguments,0,M):null);R=N.getAltText?Ext.callback(N.getAltText,N.scope||M.origScope,arguments,0,M):N.altText||M.altText;if(!N.hasActionConfiguration){N.stopSelection=M.stopSelection;N.disable=Ext.Function.bind(M.disableAction,M,[v],0);N.enable=Ext.Function.bind(M.enableAction,M,[v],0);N.hasActionConfiguration=true}if(O){O=Ext.Glyph.fly(O)}V=(N!==M&&N.tabIndex!==undefined)?N.tabIndex:M.itemTabIndex;J=(N!==M&&N.ariaRole!==undefined)?N.ariaRole:M.itemAriaRole;K+="<"+(P?"img":"div")+(typeof V==="number"?' tabIndex="'+V+'"':"")+(J?' role="'+J+'"':' role="presentation"')+(P?(' alt="'+R+'" src="'+N.icon+'"'):"")+' class="'+M.actionIconCls+" x-action-col-"+String(v)+" "+(U?M.disabledCls+" ":" ")+(N.hidden?"x-hidden-display ":"")+(N.getClass?Ext.callback(N.getClass,N.scope||M.origScope,arguments,undefined,M):(N.iconCls||M.iconCls||""))+'"'+(T?' data-qtip="'+T+'"':"")+(P?"/>":O?(' style="font-family:'+O.fontFamily+'">'+O.character+"</div>"):"></div>")}return K},updater:function(t,o,q,s,u){var p={};Ext.fly(t).addCls(p.tdCls).down(this.getView().innerSelector,true).innerHTML=this.defaultRenderer(o,p,q,null,null,u,s)},enableAction:function(m,n){var l=this;if(!m){m=0}else{if(!Ext.isNumber(m)){m=Ext.Array.indexOf(l.items,m)}}l.items[m].disabled=false;l.up("tablepanel").el.select(".x-action-col-"+m).removeCls(l.disabledCls);if(!n){l.fireEvent("enable",l)}},disableAction:function(m,n){var l=this;if(!m){m=0}else{if(!Ext.isNumber(m)){m=Ext.Array.indexOf(l.items,m)}}l.items[m].disabled=true;l.up("tablepanel").el.select(".x-action-col-"+m).addCls(l.disabledCls);if(!n){l.fireEvent("disable",l)}},doDestroy:function(){this.renderer=this.items=null;return Ext.grid.column.Column.prototype.doDestroy.call(this)},processEvent:function(M,K,I,E,L,z,C,G){var e=this,A=z.getTarget(),J=M==="keydown"&&z.getKey(),D,H,F,B=Ext.fly(I);z.stopSelection=!J&&e.stopSelection;if(J&&(A===I||!B.contains(A))){A=B.query("."+e.actionIconCls,true);if(A.length===1){A=A[0]}else{return}}if(A&&(D=A.className.match(e.actionIdRe))){H=e.items[parseInt(D[1],10)];F=H.disabled||(H.isDisabled?Ext.callback(H.isDisabled,H.scope||e.origScope,[K,E,L,H,C],0,e):false);if(H&&!F){if(M==="mousedown"&&!e.getView().actionableMode){z.preventDefault()}else{if(M==="click"||(J===z.ENTER||J===z.SPACE)){Ext.callback(H.handler||e.handler,H.scope||e.origScope,[K,E,L,H,z,C,G],undefined,e);if(K.destroyed){return false}else{if(!z.position.getNode()){z.position.refresh()}if(!K.el.contains(Ext.Element.getActiveElement())){return false}}}}}}return Ext.grid.column.Column.prototype.processEvent.apply(this,arguments)},cascade:function(g,l){g.call(l||this,this)},getRefItems:function(){return[]},privates:{getFocusables:function(){return[]},shouldUpdateCell:function(){return 2}}},1,["actioncolumn"],["component","box","container","headercontainer","gridcolumn","actioncolumn"],{component:true,box:true,container:true,headercontainer:true,gridcolumn:true,actioncolumn:true},["widget.actioncolumn"],0,[Ext.grid.column,"Action",Ext.grid,"ActionColumn"],0));(Ext.cmd.derive("Ext.grid.column.Check",Ext.grid.column.Column,{alternateClassName:["Ext.ux.CheckColumn","Ext.grid.column.CheckColumn"],isCheckColumn:true,config:{headerCheckbox:false},align:"center",triggerEvent:"click",invert:false,ignoreExport:true,stopSelection:true,headerCheckedCls:"x-grid-hd-checker-on",headerCheckboxCls:"x-column-header-checkbox",checkboxCls:"x-grid-checkcolumn",checkboxCheckedCls:"x-grid-checkcolumn-checked",innerCls:"x-grid-checkcolumn-cell-inner",clickTargetName:"el",defaultFilterType:"boolean",checkboxAriaRole:"button",constructor:function(f){this.updateHeaderState=Ext.Function.createAnimationFrame(f.updateHeaderState||this.updateHeaderState);this.scope=this;Ext.grid.column.Column.prototype.constructor.apply(this,arguments)},afterComponentLayout:function(){var f=this;Ext.grid.column.Column.prototype.afterComponentLayout.apply(this,arguments);if(f.useAriaElements&&f.headerCheckbox){f.updateHeaderAriaDescription(f.areAllChecked())}if(!f.storeListeners){f.updateHeaderState();f.storeListeners=f.getView().dataSource.on({datachanged:f.onDataChanged,scope:f,destroyable:true})}},onRemoved:function(){Ext.grid.column.Column.prototype.onRemoved.apply(this,arguments);this.storeListeners=Ext.destroy(this.storeListeners)},onDataChanged:function(g,l){this.updateHeaderState()},updateHeaderCheckbox:function(m){var l=this,n="x-column-header-checkbox";if(m){l.addCls(n);l.sortable=false;if(l.useAriaElements){l.updateHeaderAriaDescription(l.areAllChecked())}}else{l.removeCls(n);if(l.useAriaElements&&l.ariaEl.dom){l.ariaEl.dom.removeAttribute("aria-describedby")}}l.updateHeaderState()},processEvent:function(y,K,G,D,e,A,C,F){var z=this,H=y==="keydown"&&A.getKey(),I=y===z.triggerEvent,E=z.disabled,B,J;A.stopSelection=!H&&z.stopSelection;if(!E&&(I||(H===A.ENTER||H===A.SPACE))){J=!z.isRecordChecked(C);if(z.fireEvent("beforecheckchange",z,D,J,C,A)!==false){z.setRecordCheck(C,D,J,G,A);if(I&&!K.actionableMode){A.preventDefault()}if(z.hasListeners.checkchange){z.fireEvent("checkchange",z,D,J,C,A)}}}else{B=Ext.grid.column.Column.prototype.processEvent.apply(this,arguments)}return B},onTitleElClick:function(e,p,o){var n=this;if(!n.disabled&&(e.keyCode||!n.text||(Ext.fly(e.target).hasCls(n.headerCheckboxCls)))){n.toggleAll(e)}else{return Ext.grid.column.Column.prototype.onTitleElClick.call(this,e,p,o)}},toggleAll:function(w){var x=this,s=x.getView(),e=s.getStore(),y=!x.allChecked,t,v,u;if(x.fireEvent("beforeheadercheckchange",x,y,w)!==false){if(x.hasListeners.checkchange||x.hasListeners.beforecheckchange){t=w.position=new Ext.grid.CellContext(s)}e.each(function(g,f){x.setRecordCheck(g,f,y,s.getCell(g,x))});x.setHeaderStatus(y,w);x.fireEvent("headercheckchange",x,y,w)}},setHeaderStatus:function(m,e){var n=this;if(n.allChecked!==m){n.allChecked=m;if(n.headerCheckbox){n[m?"addCls":"removeCls"](n.headerCheckedCls);if(n.useAriaElements){n.updateHeaderAriaDescription(m)}}}},updateHeaderState:function(e){if(!this.destroyed&&this.headerCheckbox){this.setHeaderStatus(this.areAllChecked(),e)}},onEnable:function(){Ext.grid.column.Column.prototype.onEnable.apply(this,arguments);this._setDisabled(false)},onDisable:function(){this._setDisabled(true)},_setDisabled:function(n){var m=this,p=m.disabledCls,o;o=m.up("tablepanel").el.select(m.getCellSelector());if(n){o.addCls(p)}else{o.removeCls(p)}},defaultRenderer:function(n,q){var p=this,s=p.checkboxCls,o=p.tooltip;if(p.invert){n=!n}if(p.disabled){q.tdCls+=" "+p.disabledCls}if(n){s+=" "+p.checkboxCheckedCls;o=p.checkedTooltip||o}if(p.useAriaElements){q.tdAttr+=' aria-describedby="'+p.id+"-cell-description"+(!n?"-not":"")+'-selected"'}p.updateHeaderState();return"<span "+(o||"")+' class="'+s+'" role="'+p.checkboxAriaRole+'"'+(!p.ariaStaticRoles[p.checkboxAriaRole]?' tabIndex="0"':"")+"></span>"},isRecordChecked:function(l){var g=this.property;if(g){return l[g]}return l.get(this.dataIndex)},areAllChecked:function(){var n=this,p=n.getView().getStore(),q,s,o;if(!p.isBufferedStore&&p.getCount()>0){q=p.getData().items;s=q.length;for(o=0;o<s;++o){if(!n.isRecordChecked(q[o])){return false}}return true}},setRecordCheck:function(s,q,w,t){var p=this,v=p.property,u;if(v?s[v]:s.get(p.dataIndex)!=w){if(v){s[v]=w;p.updater(t,w)}else{s.set(p.dataIndex,w)}}},updater:function(p,m){var o=this,n=o.tooltip;if(o.invert){m=!m}if(m){n=o.checkedTooltip||n}if(n){p.setAttribute("data-qtip",n)}else{p.removeAttribute("data-qtip")}p=Ext.fly(p);if(o.useAriaElements){o.updateCellAriaDescription(null,m,p)}p[o.disabled?"addCls":"removeCls"](o.disabledCls);Ext.fly(p.down(o.getView().innerSelector,true).firstChild)[m?"addCls":"removeCls"]("x-grid-checkcolumn-checked");o.updateHeaderState()},updateHeaderAriaDescription:function(l){var g=this;if(g.useAriaElements&&g.ariaEl.dom){g.ariaEl.dom.setAttribute("aria-describedby",g.id+"-header-description"+(!l?"-not":"")+"-selected")}},updateCellAriaDescription:function(o,n,p){var m=this;if(m.useAriaElements){p=p||m.getView().getCell(o,m);if(p){p.dom.setAttribute("aria-describedby",m.id+"-cell-description"+(!n?"-not":"")+"-selected")}}},privates:{afterText:function(o,p){var n=this,m=n.id;o.push('<span role="presentation" class="',n.headerCheckboxCls,'"></span>');if(n.useAriaElements){o.push('<span id="'+m+'-header-description-selected" class="x-hidden-offsets">'+n.headerDeselectText+'</span><span id="'+m+'-header-description-not-selected" class="x-hidden-offsets">'+n.headerSelectText+'</span><span id="'+m+'-cell-description-selected" class="x-hidden-offsets">'+n.rowDeselectText+'</span><span id="'+m+'-cell-description-not-selected" class="x-hidden-offsets">'+n.rowSelectText+"</span>")}}}},1,["checkcolumn"],["component","box","container","headercontainer","gridcolumn","checkcolumn"],{component:true,box:true,container:true,headercontainer:true,gridcolumn:true,checkcolumn:true},["widget.checkcolumn"],0,[Ext.grid.column,"Check",Ext.ux,"CheckColumn",Ext.grid.column,"CheckColumn"],0));Ext.define("Ext.theme.triton.grid.column.Check",{override:"Ext.grid.column.Check",compatibility:Ext.isIE8,setRecordCheck:function(m,l,n){arguments.callee.$previous.call(this,m,l,n);n.syncRepaint()}});(Ext.cmd.derive("Ext.grid.column.Date",Ext.grid.column.Column,{alternateClassName:"Ext.grid.DateColumn",isDateColumn:true,defaultFilterType:"date",producesHTML:false,initComponent:function(){if(!this.format){this.format=Ext.Date.defaultFormat}Ext.grid.column.Column.prototype.initComponent.apply(this,arguments)},defaultRenderer:function(f){return Ext.util.Format.date(f,this.format)},updater:function(l,g){Ext.fly(l).down(this.getView().innerSelector,true).innerHTML=Ext.grid.column.Date.prototype.defaultRenderer.call(this,g)}},0,["datecolumn"],["component","box","container","headercontainer","gridcolumn","datecolumn"],{component:true,box:true,container:true,headercontainer:true,gridcolumn:true,datecolumn:true},["widget.datecolumn"],0,[Ext.grid.column,"Date",Ext.grid,"DateColumn"],0));(Ext.cmd.derive("Ext.grid.column.Number",Ext.grid.column.Column,{alternateClassName:"Ext.grid.NumberColumn",defaultFilterType:"number",format:"0,000.00",producesHTML:false,defaultRenderer:function(f){return Ext.util.Format.number(f,this.format)},updater:function(l,g){Ext.fly(l).down(this.getView().innerSelector,true).innerHTML=Ext.grid.column.Number.prototype.defaultRenderer.call(this,g)}},0,["numbercolumn"],["component","box","container","headercontainer","gridcolumn","numbercolumn"],{component:true,box:true,container:true,headercontainer:true,gridcolumn:true,numbercolumn:true},["widget.numbercolumn"],0,[Ext.grid.column,"Number",Ext.grid,"NumberColumn"],0));(Ext.cmd.derive("Ext.grid.column.RowNumberer",Ext.grid.column.Column,{alternateClassName:"Ext.grid.RowNumberer",isRowNumberer:true,text:"&#160;",width:23,sortable:false,draggable:false,autoLock:true,lockable:false,align:"right",producesHTML:false,ignoreExport:true,constructor:function(l){var g=this;g.width=g.width;Ext.grid.column.Column.prototype.constructor.apply(this,arguments);g.sortable=false;g.scope=g},resizable:false,hideable:false,menuDisabled:true,dataIndex:"",cls:"x-row-numberer",tdCls:"x-grid-cell-row-numberer x-grid-cell-special",innerCls:"x-grid-cell-inner-row-numberer",rowspan:undefined,defaultRenderer:function(t,A,w,z,x,B,u){var y=this.rowspan,v=B.currentPage,C=u.store.indexOf(w);if(A&&y){A.tdAttr='rowspan="'+y+'"'}if(v>1){C+=(v-1)*B.pageSize}return C+1},updater:function(s,o,p,q,n){Ext.fly(s).down(this.getView().innerSelector,true).innerHTML=this.defaultRenderer(o,null,p,null,null,n,q)}},1,["rownumberer"],["component","box","container","headercontainer","gridcolumn","rownumberer"],{component:true,box:true,container:true,headercontainer:true,gridcolumn:true,rownumberer:true},["widget.rownumberer"],0,[Ext.grid.column,"RowNumberer",Ext.grid,"RowNumberer"],0));Ext.define("Ext.theme.neptune.grid.column.RowNumberer",{override:"Ext.grid.column.RowNumberer",width:25});Ext.define("Ext.theme.triton.grid.column.RowNumberer",{override:"Ext.grid.column.RowNumberer",width:32});(Ext.cmd.derive("Ext.grid.column.Template",Ext.grid.column.Column,{alternateClassName:"Ext.grid.TemplateColumn",initComponent:function(){var f=this;f.tpl=(!Ext.isPrimitive(f.tpl)&&f.tpl.compile)?f.tpl:new Ext.XTemplate(f.tpl);f.hasCustomRenderer=true;Ext.grid.column.Column.prototype.initComponent.apply(this,arguments)},defaultRenderer:function(n,m,p){var o=Ext.apply({},p.data,p.getAssociatedData());return this.tpl.apply(o)},updater:function(l,g){Ext.fly(l).down(this.getView().innerSelector,true).innerHTML=Ext.grid.column.CheckColumn.prototype.defaultRenderer.call(this,g)}},0,["templatecolumn"],["component","box","container","headercontainer","gridcolumn","templatecolumn"],{component:true,box:true,container:true,headercontainer:true,gridcolumn:true,templatecolumn:true},["widget.templatecolumn"],0,[Ext.grid.column,"Template",Ext.grid,"TemplateColumn"],0));(Ext.cmd.derive("Ext.grid.column.Widget",Ext.grid.column.Column,{config:{defaultWidgetUI:{}},ignoreExport:true,sortable:false,onWidgetAttach:null,preventUpdate:true,innerCls:"x-grid-widgetcolumn-cell-inner",stopSelection:true,initComponent:function(){var l=this,g;Ext.grid.column.Column.prototype.initComponent.apply(this,arguments);g=l.widget;l.widget=g=Ext.apply({},g);if(!g.ui){g.ui=l.getDefaultWidgetUI()[g.xtype]||"default"}l.isFixedSize=Ext.isNumber(g.width)},processEvent:function(v,t,e,z,u,w,y,A){var x;if(this.stopSelection&&v==="click"){x=w.getTarget(t.innerSelector);if(x&&x!==w.target){w.stopSelection=true}}},beforeRender:function(){var n=this,l=n.tdCls,m;n.listenerScopeFn=function(e){if(e==="this"){return this}return n.resolveListenerScope(e)};m=Ext.widget(n.widget);n.bindDataIndex=n.dataIndex&&m.defaultBindProperty&&!m.bind;l=l?l+" ":"";n.tdCls=l+m.getTdCls();n.setupViewListeners(n.getView());Ext.grid.column.Column.prototype.beforeRender.call(this);m.destroy()},afterRender:function(){var f=this.getView();Ext.grid.column.Column.prototype.afterRender.call(this);if(f&&f.viewReady&&!f.ownerGrid.reconfiguring){this.onViewRefresh(f,f.getViewRange())}},defaultRenderer:Ext.emptyFn,updater:function(n,l,m){this.updateWidget(m)},onCellsResized:function(v){var w=this,s=w.ownerGrid.getManagedWidgets(w.getId()),t=s.length,q=w.getView(),p,u;if(!w.isFixedSize&&w.rendered&&q&&q.viewReady){u=q.getEl().down(w.getCellInnerSelector());if(u){v-=parseInt(w.getCachedStyle(u,"padding-left"),10)+parseInt(w.getCachedStyle(u,"padding-right"),10);for(p=0;p<t;++p){s[p].ownerLayout=null;s[p].setWidth(v);s[p].ownerLayout=q.componentLayout}}}},onAdded:function(){var g=this,l;Ext.grid.column.Column.prototype.onAdded.apply(this,arguments);g.ownerGrid=g.up("tablepanel").ownerGrid;l=g.getView();if(l){g.setupViewListeners(l)}},onRemoved:function(g){var l=this.viewListeners;if(l){Ext.destroy(l)}if(g){this.ownerGrid.destroyManagedWidgets(this.getId())}Ext.grid.column.Column.prototype.onRemoved.apply(this,arguments)},doDestroy:function(){this.ownerGrid.destroyManagedWidgets(this.getId());Ext.grid.column.Column.prototype.doDestroy.call(this)},privates:{getWidget:function(m){var l=this,n=null;if(m){n=l.ownerGrid.createManagedWidget(l.getId(),l.widget,m);n.resolveListenerScope=l.listenerScopeFn;n.getWidgetRecord=l.widgetRecordDecorator;n.getWidgetColumn=l.widgetColumnDecorator;n.measurer=l;n.ownerCmp=l.getView();n.isLayoutChild=l.returnFalse}return n},onItemAdd:function(D){var K=this,J=K.getView(),x=!!K.onWidgetAttach,I=K.dataIndex,H=K.isFixedSize,y=D.length,C,A,G,B,E,z,F;if(K.isVisible(true)){for(C=0;C<y;C++){A=D[C];if(A.isNonData){continue}G=J.getCell(A,K);if(G){G=G.dom.firstChild;if(!H&&!F&&K.lastBox){F=K.lastBox.width-parseInt(K.getCachedStyle(G,"padding-left"),10)-parseInt(K.getCachedStyle(G,"padding-right"),10)}B=K.getWidget(A);B.$widgetColumn=K;B.$widgetRecord=A;Ext.fly(G).empty();if(B.defaultBindProperty&&I){B.setConfig(B.defaultBindProperty,A.get(I))}E=B.el||B.element;if(E){G.appendChild(E.dom);if(!H){B.setWidth(F)}B.reattachToBody()}else{if(!H){B.width=F||100}B.render(G)}if(x){Ext.callback(K.onWidgetAttach,K.scope,[K,B,A],0,K)}z=B.getFocusEl();if(z){if(J.actionableMode){if(!z.isTabbable()){z.restoreTabbableState()}}else{if(z.isTabbable()){z.saveTabbableState()}}}}}}else{J.refreshNeeded=true}},onItemUpdate:function(n,m,l){this.updateWidget(n)},onViewRefresh:function(l,g){Ext.suspendLayouts();this.onItemAdd(g);Ext.resumeLayouts(true)},returnFalse:function(){return false},setupViewListeners:function(n){var l=this,m={refresh:l.onViewRefresh,itemadd:l.onItemAdd,scope:l,destroyable:true};if(l.bindDataIndex){m.itemUpdate=l.onItemUpdate}l.viewListeners=n.on(m)},updateWidget:function(n){var m=this.dataIndex,l;if(this.rendered&&this.bindDataIndex){l=this.getWidget(n);if(l){l.setConfig(l.defaultBindProperty,n.get(m))}}},widgetRecordDecorator:function(){return this.$widgetRecord},widgetColumnDecorator:function(){return this.$widgetColumn}}},0,["widgetcolumn"],["component","box","container","headercontainer","gridcolumn","widgetcolumn"],{component:true,box:true,container:true,headercontainer:true,gridcolumn:true,widgetcolumn:true},["widget.widgetcolumn"],[[Ext.mixin.StyleCacher.prototype.mixinId||Ext.mixin.StyleCacher.$className,Ext.mixin.StyleCacher]],[Ext.grid.column,"Widget"],0));(Ext.cmd.derive("Ext.grid.feature.Feature",Ext.util.Observable,{wrapsItem:false,isFeature:true,disabled:false,hasFeatureEvent:true,eventPrefix:null,eventSelector:null,view:null,grid:null,constructor:function(f){this.initialConfig=f;Ext.util.Observable.prototype.constructor.apply(this,arguments)},clone:function(){return new this.self(this.initialConfig)},init:Ext.emptyFn,getFireEventArgs:function(o,p,n,e){return[o,p,n,e]},vetoEvent:Ext.emptyFn,enable:function(){this.disabled=false},disable:function(){this.disabled=true}},1,0,0,0,["feature.feature"],0,[Ext.grid.feature,"Feature"],0));(Ext.cmd.derive("Ext.grid.feature.AbstractSummary",Ext.grid.feature.Feature,{summaryRowCls:"x-grid-row-summary",readDataOptions:{recordCreator:Ext.identityFn},summaryRowTpl:{fn:function(m,n,l){if(n.record.isSummary&&this.summaryFeature.showSummaryRow){this.summaryFeature.outputSummaryRecord(n.record,n,m,l)}else{this.nextTpl.applyOut(n,m,l)}},priority:1000},showSummaryRow:true,init:function(){var f=this;f.view.summaryFeature=f;f.rowTpl=f.view.self.prototype.rowTpl;f.view.addRowTpl(f.summaryRowTpl).summaryFeature=f;f.summaryData={};f.groupInfo={};if(!f.summaryTableCls){f.summaryTableCls="x-grid-item"}f.summaryRowSelector="."+f.summaryRowCls},bindStore:function(m,n){var l=this;Ext.destroy(l.readerListeners);if(l.remoteRoot){l.readerListeners=n.getProxy().getReader().on({scope:l,destroyable:true,rawdata:l.onReaderRawData})}},onReaderRawData:function(f){this.summaryRows=null;this.readerRawData=f},toggleSummaryRow:function(n,s){var o=this,p=o.showSummaryRow,q;n=n!=null?!!n:!o.showSummaryRow;o.showSummaryRow=n;if(n&&n!==p){o.updateSummaryRow=true}if(o.lockingPartner){if(!s){o.lockingPartner.toggleSummaryRow(n,true);q=true}}else{q=true}if(q){o.grid.ownerGrid.getView().refresh()}},createRenderer:function(o,s){var u=this,q=s.ownerGroup,t=q?u.summaryData[q]:u.summaryData,p=o.dataIndex||o.getItemId();return function(e,f){return o.summaryRenderer?o.summaryRenderer(s.data[p],t,p,f):s.data[p]}},outputSummaryRecord:function(w,C,y){var v=C.view,B=v.rowValues,z=C.columns||v.headerCt.getVisibleGridColumns(),t=z.length,x,A,u={view:v,record:w,rowStyle:"",rowClasses:[this.summaryRowCls],itemClasses:[],recordIndex:-1,rowId:v.getRowId(w),columns:z};for(x=0;x<t;x++){A=z[x];A.savedRenderer=A.renderer;if(A.summaryType||A.summaryRenderer){A.renderer=this.createRenderer(A,w)}else{A.renderer=Ext.emptyFn}}v.rowValues=u;v.self.prototype.rowTpl.applyOut(u,y,parent);v.rowValues=B;for(x=0;x<t;x++){A=z[x];A.renderer=A.savedRenderer;A.savedRenderer=null}},getSummary:function(t,s,u,o){var p=!!o,q=p?o:t;if(s){if(Ext.isFunction(s)){if(p){return q.aggregate(u,s)}else{return q.aggregate(s,null,false,[u])}}switch(s){case"count":return q.count();case"min":return q.min(u);case"max":return q.max(u);case"sum":return q.sum(u);case"average":return q.average(u);default:return""}}},getRawData:function(){var f=this.readerRawData;if(f){return f}return this.view.getStore().getProxy().getReader().rawData},generateSummaryData:function(C){var y=this,E=y.summaryRows,v={},w={},x,A,D,B,z,E,F,G;if(!E){D=y.getRawData();if(!D){return}x=y.view.store.getProxy().getReader();A=Ext.create("reader."+x.type,x.getConfig());A.setRootProperty(y.remoteRoot);E=A.getRoot(D);if(E){F=[];if(!Ext.isArray(E)){E=[E]}z=E.length;for(B=0;B<z;++B){G=A.extractRecordData(E[B],y.readDataOptions);F.push(G)}y.summaryRows=E=F}A.destroy();y.readerRawData=null}if(E){for(B=0,z=E.length;B<z;B++){v=E[B];if(C){w[v[C]]=v}}}return C?w:v},setSummaryData:function(p,o,q,n){var s=this.summaryData;if(n){if(!s[n]){s[n]={}}s[n][o]=q}else{s[o]=q}},destroy:function(){Ext.destroy(this.readerListeners);this.readerRawData=this.summaryRows=null;Ext.grid.feature.Feature.prototype.destroy.call(this)}},0,0,0,0,["feature.abstractsummary"],0,[Ext.grid.feature,"AbstractSummary"],0));(Ext.cmd.derive("Ext.grid.feature.Summary",Ext.grid.feature.AbstractSummary,{dock:undefined,summaryItemCls:"x-grid-row-summary-item",dockedSummaryCls:"x-docked-summary",panelBodyCls:"x-summary-",hasFeatureEvent:false,fullSummaryTpl:["{%","var me = this.summaryFeature,","    record = me.summaryRecord,","    view = values.view,","    bufferedRenderer = view.bufferedRenderer;","this.nextTpl.applyOut(values, out, parent);","if (!me.disabled && me.showSummaryRow &&","!view.addingRows && view.store.isLast(values.record)) {","if (bufferedRenderer) {","    bufferedRenderer.variableRowHeight = true;","}","me.outputSummaryRecord((record && record.isModel) ? record : me.createSummaryRecord(view), values, out, parent);","}","%}",{priority:300,beginRowSync:function(f){f.add("fullSummary",this.summaryFeature.summaryRowSelector)},syncContent:function(s,v,t){s=Ext.fly(s,"syncDest");v=Ext.fly(v,"sycSrc");var q=this.summaryFeature,u=q.summaryRowSelector,w=s.down(u,true),p=v.down(u,true);if(w&&p){if(t){this.summaryFeature.view.updateColumns(w,p,t)}else{Ext.fly(w).syncContent(p)}}}}],init:function(o){var m=this,p=m.view,n=m.dock;Ext.grid.feature.AbstractSummary.prototype.init.apply(this,arguments);if(n){o.addBodyCls(m.panelBodyCls+n);o.headerCt.on({add:m.onStoreUpdate,afterlayout:m.onStoreUpdate,scope:m});o.on({beforerender:function(){var e=[m.summaryTableCls];if(p.columnLines){e[e.length]=p.ownerCt.colLinesCls}m.summaryBar=o.addDocked({childEls:["innerCt","item"],renderTpl:['<div id="{id}-innerCt" data-ref="innerCt" role="presentation">','<table id="{id}-item" data-ref="item" cellPadding="0" cellSpacing="0" class="'+e.join(" ")+'">','<tr class="'+m.summaryRowCls+'"></tr>',"</table>","</div>"],scrollable:{x:false,y:false},hidden:!m.showSummaryRow,itemId:"summaryBar",cls:[m.dockedSummaryCls,m.dockedSummaryCls+"-"+n],xtype:"component",dock:n,weight:10000000})[0]},afterrender:function(){o.getView().getScrollable().addPartner(m.summaryBar.getScrollable(),"x");m.onStoreUpdate()},single:true});o.headerCt.afterComponentLayout=Ext.Function.createSequence(o.headerCt.afterComponentLayout,function(){var e=this.getTableWidth(),f=m.summaryBar.innerCt;m.summaryBar.item.setWidth(e);if(this.tooNarrow){e+=Ext.getScrollbarSize().width}f.setWidth(e)})}else{if(o.bufferedRenderer){m.wrapsItem=true;p.addRowTpl(Ext.XTemplate.getTpl(m,"fullSummaryTpl")).summaryFeature=m;p.on("refresh",m.onViewRefresh,m)}else{m.wrapsItem=false;m.view.addFooterFn(m.renderSummaryRow)}}o.ownerGrid.on({beforereconfigure:m.onBeforeReconfigure,columnmove:m.onStoreUpdate,scope:m});m.bindStore(o,o.getStore())},onBeforeReconfigure:function(g,l){this.summaryRecord=null;if(l){this.bindStore(g,l)}},bindStore:function(m,n){var l=this;Ext.destroy(l.storeListeners);l.storeListeners=n.on({scope:l,destroyable:true,update:l.onStoreUpdate,datachanged:l.onStoreUpdate});Ext.grid.feature.AbstractSummary.prototype.bindStore.call(this,m,n)},renderSummaryRow:function(s,q,p){var t=s.view,w=t.findFeature("summary"),u,v;if(!w.disabled&&w.showSummaryRow&&!t.addingRows&&!t.updatingRows){u=w.summaryRecord;q.push('<table cellpadding="0" cellspacing="0" class="'+w.summaryItemCls+'" style="table-layout: fixed; width: 100%;">');w.outputSummaryRecord((u&&u.isModel)?u:w.createSummaryRecord(t),s,q,p);q.push("</table>")}},toggleSummaryRow:function(m,p){var n=this,o=n.summaryBar;Ext.grid.feature.AbstractSummary.prototype.toggleSummaryRow.call(this,m,p);if(o){o.setVisible(n.showSummaryRow);n.onViewScroll()}},getSummaryBar:function(){return this.summaryBar},getSummaryRowPlaceholder:function(p){var o=this.summaryItemCls,n,m;n=Ext.fly(p.getNodeContainer());if(!n){return null}m=n.down("."+o,true);if(!m){m=n.createChild({tag:"table",cellpadding:0,cellspacing:0,cls:o,style:"table-layout: fixed; width: 100%",children:[{tag:"tbody"}]},false,true)}return m},vetoEvent:function(p,n,e,o){return !o.getTarget(this.summaryRowSelector)},onViewScroll:function(){this.summaryBar.setScrollX(this.view.getScrollX())},onViewRefresh:function(o){var n=this,p,m;if(!n.disabled&&n.showSummaryRow&&!o.all.getCount()){p=n.createSummaryRecord(o);m=n.getSummaryRowPlaceholder(o);m.appendChild(Ext.fly(o.createRowElement(p,-1)).down(n.summaryRowSelector,true))}},createSummaryRecord:function(v){var w=this,z=v.headerCt.getGridColumns(),C=w.remoteRoot,x=w.summaryRecord,E=z.length,y,A,u,B,D;if(!x){D={id:v.id+"-summary-record"};x=w.summaryRecord=new Ext.data.Model(D)}x.beginEdit();if(C){B=w.generateSummaryData();if(B){x.set(B)}}else{for(y=0;y<E;y++){A=z[y];u=A.dataIndex||A.getItemId();B=w.getSummary(v.store,A.summaryType,u);x.set(u,B);w.setSummaryData(x,A.getItemId(),B)}}x.endEdit(true);x.commit(true);x.isSummary=true;return x},onStoreUpdate:function(){var x=this,t=x.view,w=x.summaryRowSelector,y=x.dock,v,p,s,u;if(!t.rendered){return}v=x.createSummaryRecord(t);p=Ext.fly(t.createRowElement(v,-1)).down(w,true);if(!p){return}if(y){u=x.summaryBar.item.dom.firstChild;s=u.firstChild;u.insertBefore(p,s);u.removeChild(s);x.onColumnHeaderLayout()}else{s=t.el.down(w,true);u=s&&s.parentNode;if(u){u.removeChild(s)}u=t.getRow(t.all.last());if(u){u=u.parentElement}else{u=x.getSummaryRowPlaceholder(t);u=u&&u.tBodies&&u.tBodies[0]}if(u){u.appendChild(p)}}},onColumnHeaderLayout:function(){var t=this.view,q=t.headerCt.getVisibleGridColumns(),w,u=q.length,s,v=this.summaryBar.el,p;for(s=0;s<u;s++){w=q[s];p=v.down(t.getCellSelector(w),true);if(p){Ext.fly(p).setWidth(w.width||(w.lastBox?w.lastBox.width:100))}}},destroy:function(){var f=this;f.summaryRecord=f.storeListeners=Ext.destroy(f.storeListeners);Ext.grid.feature.AbstractSummary.prototype.destroy.call(this)}},0,0,0,0,["feature.summary"],0,[Ext.grid.feature,"Summary"],0));(Ext.cmd.derive("Ext.menu.Item",Ext.Component,{alternateClassName:"Ext.menu.TextItem",isMenuItem:true,config:{glyph:null},activated:false,activeCls:"x-menu-item-active",clickHideDelay:0,destroyMenu:true,disabledCls:"x-menu-item-disabled",hideOnClick:true,menuAlign:"tl-tr?",menuExpandDelay:200,menuHideDelay:200,tooltipType:"qtip",focusable:true,ariaRole:"menuitem",ariaEl:"itemEl",baseCls:"x-menu-item",arrowCls:"x-menu-item-arrow",baseIconCls:"x-menu-item-icon",textCls:"x-menu-item-text",indentCls:"x-menu-item-indent",indentNoSeparatorCls:"x-menu-item-indent-no-separator",indentRightIconCls:"x-menu-item-indent-right-icon",indentRightArrowCls:"x-menu-item-indent-right-arrow",linkCls:"x-menu-item-link",linkHrefCls:"x-menu-item-link-href",childEls:["itemEl","iconEl","textEl","arrowEl"],renderTpl:'<tpl if="plain">{text}<tpl else><a id="{id}-itemEl" data-ref="itemEl" class="{linkCls}<tpl if="hasHref"> {linkHrefCls}</tpl>{childElCls}" href="{href}" <tpl if="hrefTarget"> target="{hrefTarget}"</tpl> hidefocus="true" unselectable="on"<tpl if="tabIndex != null"> tabindex="{tabIndex}"</tpl><tpl foreach="ariaAttributes"> {$}="{.}"</tpl>><span id="{id}-textEl" data-ref="textEl" class="{textCls} {textCls}-{ui} {indentCls}{childElCls}" unselectable="on" role="presentation">{text}</span><tpl if="hasIcon"><div role="presentation" id="{id}-iconEl" data-ref="iconEl" class="{baseIconCls}-{ui} {baseIconCls}{[values.rightIcon ? "-right" : ""]} {iconCls}{childElCls} {glyphCls}" style="<tpl if="icon">background-image:url({icon});</tpl><tpl if="glyph"><tpl if="glyphFontFamily">font-family:{glyphFontFamily};</tpl>">{glyph}<tpl else>"></tpl></div></tpl><tpl if="showCheckbox"><div role="presentation" id="{id}-checkEl" data-ref="checkEl" class="{baseIconCls}-{ui} {baseIconCls}{[(values.hasIcon && !values.rightIcon) ? "-right" : ""]} {groupCls} {checkboxCls}{childElCls}"></div></tpl><tpl if="hasMenu"><div role="presentation" id="{id}-arrowEl" data-ref="arrowEl" class="{arrowCls} {arrowCls}-{ui}{childElCls}"></div></tpl></a></tpl>',autoEl:{role:"presentation"},maskOnDisable:false,iconAlign:"left",initComponent:function(){var m=this,n=m.cls?[m.cls]:[],l;if(m.hasOwnProperty("canActivate")){m.focusable=m.canActivate}if(m.plain){n.push("x-menu-item-plain")}if(n.length){m.cls=n.join(" ")}if(m.menu){l=m.menu;m.menu=null;m.setMenu(l)}Ext.Component.prototype.initComponent.apply(this,arguments)},canFocus:function(){var f=this;return f.focusable&&f.rendered&&f.canActivate!==false&&!f.destroying&&!f.destroyed&&f.isVisible(true)},onFocus:function(e){var l=this;Ext.Component.prototype.onFocus.call(this,e);if(!l.plain){l.addCls(l.activeCls)}l.activated=true;if(l.hasListeners.activate){l.fireEvent("activate",l)}},onFocusLeave:function(e){var l=this;Ext.Component.prototype.onFocusLeave.call(this,e);if(!l.plain){l.removeCls(l.activeCls)}l.doHideMenu();l.activated=false;if(l.hasListeners.deactivate){l.fireEvent("deactivate",l)}},doHideMenu:function(){var f=this.menu;this.cancelDeferExpand();if(f&&f.isVisible()){f.hide()}},deferHideParentMenus:function(){for(var f=this.getRefOwner();f&&((f.isMenu&&f.floating)||f.isMenuItem);f=f.getRefOwner()){if(f.isMenu){f.hide()}}},expandMenu:function(l,n){var m=this;if(!m.disabled&&m.activated&&m.menu){m.hideOnClick=false;m.cancelDeferHide();n=n==null?m.menuExpandDelay:n;if(n===0){m.doExpandMenu(l)}else{m.cancelDeferExpand();m.expandMenuTimer=Ext.defer(m.doExpandMenu,n,m,[l])}}},doExpandMenu:function(n){var m=this,l=m.menu;if(!l.isVisible()){m.parentMenu.activeChild=l;l.ownerCmp=m;l.parentMenu=m.parentMenu;l.constrainTo=document.body;l.autoFocus=!n||!n.pointerType;l.showBy(m,m.menuAlign)}else{if(n&&n.type==="keydown"){l.focus()}}},getRefItems:function(n){var l=this.menu,m;if(l){m=l.getRefItems(n);m.unshift(l)}return m||[]},getValue:function(){return this.value},hideMenu:function(l){var g=this;if(g.menu){g.cancelDeferExpand();g.hideMenuTimer=Ext.defer(g.doHideMenu,Ext.isNumber(l)?l:g.menuHideDelay,g)}},onClick:function(u){var e=this,p=e.clickHideDelay,t=u.browserEvent,q,s;if(!e.href||e.disabled){u.stopEvent();if(e.disabled){return false}}if(e.disabled||e.handlingClick){return}if(e.hideOnClick&&!e.menu){if(!p){e.deferHideParentMenus()}else{e.deferHideParentMenusTimer=Ext.defer(e.deferHideParentMenus,p,e)}}q=e.fireEvent("click",e,u);if(e.destroyed){return}if(q!==false&&e.handler){Ext.callback(e.handler,e.scope,[e,u],0,e)}if(e.destroyed){return}if(Ext.isIE9m){s=t.returnValue===false?true:false}else{s=!!t.defaultPrevented}if(e.href&&u.type!=="click"&&!s){e.handlingClick=true;e.itemEl.dom.click();e.handlingClick=false}if(!e.hideOnClick&&!e.hasFocus){e.focus()}return q},onRemoved:function(){var f=this;if(f.activated&&f.parentMenu.activeItem===f){f.parentMenu.deactivateActiveItem()}Ext.Component.prototype.onRemoved.apply(this,arguments);f.parentMenu=f.ownerCmp=null},doDestroy:function(){var f=this;if(f.rendered){f.clearTip()}f.cancelDeferExpand();f.cancelDeferHide();clearTimeout(f.deferHideParentMenusTimer);f.setMenu(null);Ext.Component.prototype.doDestroy.call(this)},beforeRender:function(){var u=this,t=u.glyph,v,y=!!(u.icon||u.iconCls||t),C=!!u.menu,x=((u.iconAlign==="right")&&!C),A=u.isMenuCheckItem,B=[],z=u.ownerCt,w=z.plain;if(u.plain){u.ariaEl="el"}Ext.Component.prototype.beforeRender.call(this);if(y){if(C&&u.showCheckbox){y=false}}if(t){v=t.fontFamily;t=t.character}if(!w||(y&&!x)||A){if(z.showSeparator&&!w){B.push(u.indentCls)}else{B.push(u.indentNoSeparatorCls)}}if(C){B.push(u.indentRightArrowCls)}else{if(y&&(x||A)){B.push(u.indentRightIconCls)}}Ext.applyIf(u.renderData,{hasHref:!!u.href,href:u.href||"#",hrefTarget:u.hrefTarget,icon:u.icon,iconCls:u.iconCls,glyph:t,glyphCls:t?"x-menu-item-glyph":undefined,glyphFontFamily:v,hasIcon:y,hasMenu:C,indent:!w||y||A,isCheckItem:A,rightIcon:x,plain:u.plain,text:u.text,arrowCls:u.arrowCls,baseIconCls:u.baseIconCls,textCls:u.textCls,indentCls:B.join(" "),linkCls:u.linkCls,linkHrefCls:u.linkHrefCls,groupCls:u.group?u.groupCls:"",tabIndex:u.tabIndex})},onRender:function(){var f=this;Ext.Component.prototype.onRender.apply(this,arguments);if(f.tooltip){f.setTooltip(f.tooltip,true)}},getMenu:function(){return this.menu||null},setMenu:function(w,x){var y=this,t=y.menu,u=y.arrowEl,v=y.ariaEl.dom,q,s;if(t){t.ownerCmp=t.parentMenu=null;if(x===true||(x!==false&&y.destroyMenu)){Ext.destroy(t)}if(v){v.removeAttribute("aria-haspopup");v.removeAttribute("aria-owns")}else{q=(y.ariaRenderAttributes||(y.ariaRenderAttributes={}));delete q["aria-haspopup"];delete q["aria-owns"]}}if(w){s=w.isMenu;w=y.menu=Ext.menu.Manager.get(w,{ownerCmp:y,focusOnToFront:false});w.setOwnerCmp(y,s);if(v){v.setAttribute("aria-haspopup",true);v.setAttribute("aria-owns",w.id)}else{q=(y.ariaRenderAttributes||(y.ariaRenderAttributes={}));q["aria-haspopup"]=true;q["aria-owns"]=w.id}}else{w=y.menu=null}if(w&&y.rendered&&!y.destroying&&u){u[w?"addCls":"removeCls"](y.arrowCls)}},setHandler:function(g,l){this.handler=g||null;this.scope=l},setIcon:function(o){var n=this,p=n.iconEl,m=n.icon;if(n.glyph){n.setGlyph(null)}if(p){p.setStyle("background-image",o?"url("+o+")":"")}n.icon=o;n.fireEvent("iconchange",n,m,o)},setIconCls:function(o){var m=this,p=m.iconEl,n=m.iconCls;if(m.glyph){m.setGlyph(null)}if(p){p.setStyle("background-image","");if(m.iconCls){p.removeCls(m.iconCls)}if(o){p.addCls(o)}}m.iconCls=o;m.fireEvent("iconchange",m,n,o)},setText:function(m){var n=this,o=n.textEl||n.el,p=n.text;n.text=m;if(n.rendered){o.setHtml(m||"");n.updateLayout()}n.fireEvent("textchange",n,p,m)},getTipAttr:function(){return this.tooltipType==="qtip"?"data-qtip":"title"},clearTip:function(){if(Ext.quickTipsActive&&Ext.isObject(this.tooltip)){Ext.tip.QuickTipManager.unregister(this.itemEl)}},setTooltip:function(l,n){var m=this;if(m.rendered){if(!n){m.clearTip()}if(Ext.quickTipsActive&&Ext.isObject(l)){Ext.tip.QuickTipManager.register(Ext.apply({target:m.itemEl.id},l));m.tooltip=l}else{m.itemEl.dom.setAttribute(m.getTipAttr(),l)}}else{m.tooltip=l}return m},getFocusEl:function(){return this.plain?this.el:this.itemEl},getFocusClsEl:function(){return this.el},privates:{cancelDeferExpand:function(){window.clearTimeout(this.expandMenuTimer)},cancelDeferHide:function(){window.clearTimeout(this.hideMenuTimer)}},applyGlyph:function(g,l){if(g){if(!g.isGlyph){g=new Ext.Glyph(g)}if(g.isEqual(l)){g=undefined}}return g},updateGlyph:function(l,m){var n=this.iconEl;if(n){n.setStyle("background-image","none");this.icon=null;if(l){n.dom.innerHTML=l.character;n.setStyle(l.getStyle())}else{n.dom.innerHTML=""}}}},0,["menuitem"],["component","box","menuitem"],{component:true,box:true,menuitem:true},["widget.menuitem"],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.menu,"Item",Ext.menu,"TextItem"],0));Ext.define("Ext.theme.triton.menu.Item",{override:"Ext.menu.Item",compatibility:Ext.isIE8,onFocus:function(e){(arguments.callee.$previous||Ext.Component.prototype.onFocus).call(this,e);this.repaintIcons()},onFocusLeave:function(e){(arguments.callee.$previous||Ext.Component.prototype.onFocusLeave).call(this,e);this.repaintIcons()},privates:{repaintIcons:function(){var l=this.iconEl,m=this.arrowEl,n=this.checkEl;if(l){l.syncRepaint()}if(m){m.syncRepaint()}if(n){n.syncRepaint()}}}});(Ext.cmd.derive("Ext.menu.CheckItem",Ext.menu.Item,{checkedCls:"x-menu-item-checked",uncheckedCls:"x-menu-item-unchecked",groupCls:"x-menu-group-icon",hideOnClick:false,checkChangeDisabled:false,submenuText:"{0} submenu",ariaRole:"menuitemcheckbox",childEls:["checkEl"],defaultBindProperty:"checked",showCheckbox:true,isMenuCheckItem:true,checkboxCls:"x-menu-item-checkbox",initComponent:function(){var f=this;f.checked=!!f.checked;Ext.menu.Item.prototype.initComponent.apply(this,arguments);if(f.group){Ext.menu.Manager.registerCheckable(f);if(f.initialConfig.hideOnClick!==false){f.hideOnClick=true}}},beforeRender:function(){var g=this,l;Ext.menu.Item.prototype.beforeRender.call(this);Ext.apply(g.renderData,{checkboxCls:g.checkboxCls,showCheckbox:g.showCheckbox});l=(g.ariaRenderAttributes||(g.ariaRenderAttributes={}));l["aria-checked"]=g.menu?"mixed":g.checked;if(g.menu){l["aria-label"]=Ext.String.formatEncode(g.submenuText,g.text)}},afterRender:function(){var f=this;Ext.menu.Item.prototype.afterRender.call(this);f.checked=!f.checked;f.setChecked(!f.checked,true);if(f.checkChangeDisabled){f.disableCheckChange()}if(Ext.isGecko&&f.checkEl){f.checkEl.on("mousedown",f.onMouseDownCheck)}},disableCheckChange:function(){var g=this,l=g.checkEl;if(l){l.addCls(g.disabledCls)}if(Ext.isIE8&&g.rendered){g.el.repaint()}g.checkChangeDisabled=true},enableCheckChange:function(){var g=this,l=g.checkEl;if(l){l.removeCls(g.disabledCls)}g.checkChangeDisabled=false},onMouseDownCheck:function(e){e.preventDefault()},onClick:function(e){var l=this;if(!(l.disabled||l.checkChangeDisabled||l.checked&&l.group||l.menu&&"touch"===e.pointerType&&!l.checkEl.contains(e.target))){l.setChecked(!l.checked);if(e.type==="keydown"&&l.menu){return false}}Ext.menu.Item.prototype.onClick.call(this,e)},doDestroy:function(){Ext.menu.Manager.unregisterCheckable(this);Ext.menu.Item.prototype.doDestroy.call(this)},setText:function(l){var m=this,n=m.ariaEl.dom;Ext.menu.Item.prototype.setText.call(this,l);if(n&&m.menu){n.setAttribute("aria-label",Ext.String.formatEncode(m.submenuText,l))}},setChecked:function(p,s){var q=this,w=q.checkedCls,v=q.uncheckedCls,t=q.el,u=q.ariaEl.dom;if(q.checked!==p&&(s||q.fireEvent("beforecheckchange",q,p)!==false)){if(t){if(p){t.addCls(w);t.removeCls(v)}else{t.addCls(v);t.removeCls(w)}}if(u){u.setAttribute("aria-checked",q.menu?"mixed":!!p)}q.checked=p;Ext.menu.Manager.onCheckChange(q,p);q.publishState("checked",p);if(!s){Ext.callback(q.checkHandler,q.scope,[q,p],0,q);q.fireEvent("checkchange",q,p)}}}},0,["menucheckitem"],["component","box","menuitem","menucheckitem"],{component:true,box:true,menuitem:true,menucheckitem:true},["widget.menucheckitem"],0,[Ext.menu,"CheckItem"],0));(Ext.cmd.derive("Ext.menu.Separator",Ext.menu.Item,{focusable:false,canActivate:false,hideOnClick:false,plain:true,separatorCls:"x-menu-item-separator",text:"&#160;",ariaRole:"separator",beforeRender:function(){this.addCls(this.separatorCls);Ext.menu.Item.prototype.beforeRender.call(this)}},0,["menuseparator"],["component","box","menuitem","menuseparator"],{component:true,box:true,menuitem:true,menuseparator:true},["widget.menuseparator"],0,[Ext.menu,"Separator"],0));Ext.define("Ext.theme.neptune.menu.Separator",{override:"Ext.menu.Separator",border:true});(Ext.cmd.derive("Ext.menu.Menu",Ext.panel.Panel,{defaultType:"menuitem",enableKeyNav:true,allowOtherMenus:false,ariaRole:"menu",floating:true,constrain:true,hidden:true,hideMode:"visibility",ignoreParentClicks:false,mouseLeaveDelay:100,isMenu:true,showSeparator:true,minWidth:undefined,defaultMinWidth:120,defaultAlign:"tl-bl?",focusOnToFront:false,bringParentToFront:false,alignOnScroll:false,focusable:true,tabIndex:-1,defaultFocus:":focusable",allowFocusingDisabledChildren:true,menuClickBuffer:0,baseCls:"x-menu",_iconSeparatorCls:"x-menu-icon-separator",_itemCmpCls:"x-menu-item-cmp",layout:{type:"vbox",align:"stretchmax",overflowHandler:"Scroller"},initComponent:function(){var p=this,s=["x-menu"],o=p.bodyCls?[p.bodyCls]:[],n=p.floating!==false,q={element:"el",click:p.onClick,mouseover:p.onMouseOver,scope:p};if(Ext.supports.Touch){q.pointerdown=p.onMouseOver}p.on(q);p.on({beforeshow:p.onBeforeShow,scope:p});if(p.plain){s.push("x-menu-plain")}p.cls=s.join(" ");o.push("x-menu-body",Ext.dom.Element.unselectableCls);p.bodyCls=o.join(" ");if(n){if(p.minWidth===undefined){p.minWidth=p.defaultMinWidth}}else{p.hidden=!!p.initialConfig.hidden;p.constrain=false}Ext.panel.Panel.prototype.initComponent.apply(this,arguments);Ext.override(p.getLayout(),{configureItem:p.configureItem});p.itemOverTask=new Ext.util.DelayedTask(p.handleItemOver,p)},initFloatConstrain:Ext.emptyFn,getInherited:function(){var f=Ext.panel.Panel.prototype.getInherited.call(this);if(this.floating){f.hidden=this.hidden}return f},beforeRender:function(){var f=this;Ext.panel.Panel.prototype.beforeRender.apply(this,arguments);if(!f.getSizeModel().width.shrinkWrap){f.layout.align="stretch"}if(f.floating){f.ariaRenderAttributes=f.ariaRenderAttributes||{};f.ariaRenderAttributes["aria-expanded"]=!!f.autoShow}},onBoxReady:function(){var m=this,l=m._iconSeparatorCls,n=m.focusableKeyNav;if(n){n.map.processEventScope=m;n.map.processEvent=function(e){if(e.keyCode===e.ESC){e.target=this.el.dom}return e};n.map.addBinding([{key:Ext.event.Event.ESC,handler:m.onEscapeKey,scope:m},{key:/[\w]/,handler:m.onShortcutKey,scope:m,shift:false,ctrl:false,alt:false}])}else{m.escapeKeyNav=new Ext.util.KeyNav(m.el,{eventName:"keydown",scope:m,esc:m.onEscapeKey})}Ext.panel.Panel.prototype.onBoxReady.apply(this,arguments);if(m.showSeparator){m.iconSepEl=m.body.insertFirst({role:"presentation",cls:l+" "+l+"-"+m.ui,html:"&#160;"})}if(Ext.supports.Touch||Ext.supports.MSPointerEvents||Ext.supports.PointerEvents){m.el.on({scope:m,click:m.preventClick,translate:false})}m.mouseMonitor=m.el.monitorMouseLeave(m.mouseLeaveDelay,m.onMouseLeave,m)},onFocusEnter:function(m){var n=this,e;Ext.panel.Panel.prototype.onFocusEnter.call(this,m);n.mixins.focusablecontainer.onFocusEnter.call(n,m);if(n.floating){e=n.getInherited();if(!e.topmostFocusEvent){e.topmostFocusEvent=m}}},onFocusLeave:function(e){var l=this;Ext.panel.Panel.prototype.onFocusLeave.call(this,e);l.lastFocusedChild=null;l.mixins.focusablecontainer.onFocusLeave.call(l,e);if(l.floating){l.hide()}},handleItemOver:function(e,l){if(!l.containsFocus&&(e.pointerType==="mouse"||l.isMenuItem)){l.focus()}if(l.expandMenu){l.expandMenu(e)}},canActivateItem:function(f){return f&&f.isFocusable()},deactivateActiveItem:function(){var l=this,g=l.lastFocusedChild;if(g){g.blur()}},getItemFromEvent:function(e){var p=this,n=p.layout.getRenderTarget().dom,o=e.getTarget();while(o.parentNode!==n){o=o.parentNode;if(!o){return}}return Ext.getCmp(o.id)},lookupComponent:function(g){var l=this;if(typeof g==="string"){if(g[0]==="@"){g=Ext.panel.Panel.prototype.lookupComponent.call(this,g)}else{g=l.lookupItemFromString(g)}}else{if(Ext.isObject(g)){g=l.lookupItemFromObject(g)}}if(!g.dock){g.minWidth=g.minWidth||l.minWidth}return g},lookupItemFromObject:function(g){var l=this.defaultType;if(!g.isComponent){if(!g.xtype&&Ext.isBoolean(g.checked)){l="menucheckitem"}g=Ext.ComponentManager.create(g,l)}if(g.isMenuItem){g.parentMenu=this}return g},lookupItemFromString:function(f){return(f==="separator"||f==="-")?new Ext.menu.Separator():new Ext.menu.Item({canActivate:false,hideOnClick:false,plain:true,text:f})},configureItem:function(q){var s=this.owner,o="x-",p=s.ui,t,u;if(q.isMenuItem){q.setUI(p)}else{if(s.items.getCount()>1&&!q.rendered&&!q.dock){u=s._itemCmpCls;t=[u+" "+u+"-"+p];if(!s.plain&&(q.indent!==false||q.iconCls==="no-icon")){t.push(o+"menu-item-indent-"+p)}if(q.rendered){q.el.addCls(t)}else{q.cls=(q.cls||"")+" "+t.join(" ")}q.$extraMenuCls=t}}this.callParent(arguments)},onRemove:function(f){Ext.panel.Panel.prototype.onRemove.call(this,f);if(!f.destroyed&&f.$extraMenuCls){f.el.removeCls(f.$extraMenuCls)}},onClick:function(t){var u=this,p=t.type,e,q,s=p==="keydown";if(u.disabled){t.stopEvent();return}e=u.getItemFromEvent(t);if(e&&e.isMenuItem){if(!e.menu||!u.ignoreParentClicks){q=e.onClick(t)}else{t.stopEvent()}if(u.destroyed){return}if(e.menu&&q!==false&&s){e.expandMenu(t,0)}}if(!e||e.disabled){e=undefined}u.fireEvent("click",u,e,t)},doDestroy:function(){var f=this;if(f.escapeKeyNav){f.escapeKeyNav.destroy()}f.parentMenu=f.ownerCmp=f.escapeKeyNav=null;if(f.rendered){f.el.un(f.mouseMonitor);Ext.destroy(f.iconSepEl)}Ext.menu.Manager.onHide(f);Ext.panel.Panel.prototype.doDestroy.call(this)},onMouseLeave:function(e){var l=this;if(l.itemOverTask){l.itemOverTask.cancel()}if(l.disabled){return}l.fireEvent("mouseleave",l,e)},onMouseOver:function(v){var w=this,u=v.getRelatedTarget(),s=!w.el.contains(u),e=w.getItemFromEvent(v),q=w.parentMenu,t=w.ownerCmp;if(s&&q){q.setActiveItem(t);t.cancelDeferHide();q.mouseMonitor.mouseenter();q.itemOverTask.cancel()}if(w.disabled){return}if(e){w.itemOverTask.delay(w.mouseLeaveDelay,null,null,[v,e])}if(s){w.fireEvent("mouseenter",w,v)}w.fireEvent("mouseover",w,e,v)},setActiveItem:function(g){var l=this;if(g&&(g!==l.lastFocusedChild)){l.focusChild(g,1)}},onEscapeKey:function(){if(this.floating){this.hide()}},onShortcutKey:function(w,x){var t=String.fromCharCode(x.getCharCode()),s=this.query(">[text]"),v=s.length,y=this.lastFocusedChild,u=Ext.Array.indexOf(s,y),e=u;if(v===0){return}for(;;){if(++e===v){e=0}y=s[e];if(e===u){return}if(y.text&&y.text[0].toUpperCase()===t){y.focus();return}}},onBeforeShow:function(){if(Ext.Date.getElapsed(this.lastHide)<this.menuClickBuffer){return false}},beforeShow:function(){var g=this,l;if(g.floating){l=g.hasFloatMenuParent();if(!l&&!g.allowOtherMenus){Ext.menu.Manager.hideAll()}}Ext.panel.Panel.prototype.beforeShow.apply(this,arguments)},afterShow:function(){var g=this,l=g.ariaEl.dom;Ext.panel.Panel.prototype.afterShow.apply(this,arguments);Ext.menu.Manager.onShow(g);if(g.floating&&l){l.setAttribute("aria-expanded",true)}if(g.floating){g.maxHeight=g.savedMaxHeight}if(g.autoFocus){g.focus()}},onHide:function(n,q,p){var o=this,s=o.ariaEl.dom;Ext.panel.Panel.prototype.onHide.call(this,n,q,p);o.lastHide=Ext.Date.now();Ext.menu.Manager.onHide(o);if(o.floating&&s){s.setAttribute("aria-expanded",false)}},afterHide:function(l,g){Ext.panel.Panel.prototype.afterHide.call(this,l,g);delete this.getInherited().topmostFocusEvent},preventClick:function(e){var l=this.getItemFromEvent(e);if(l&&l.isMenuItem&&!l.href){e.preventDefault()}},privates:{applyDefaults:function(f){if(!Ext.isString(f)){f=Ext.panel.Panel.prototype.applyDefaults.apply(this,arguments)}return f},initFocusableElement:function(){var l=this,n=l.tabIndex,m=l.el;if(l.floating&&n!=null&&m&&m.dom){m.dom.setAttribute("tabIndex",n);m.dom.setAttribute("data-componentid",l.id)}},onFocusableContainerTabKey:function(e){var l=this;if(l.floating){if(e.shiftKey){e.preventDefault()}else{l.focusEnterEvent=l.getInherited().topmostFocusEvent}l.hide()}},onFocusableContainerEnterKey:function(e){this.onClick(e)},onFocusableContainerSpaceKey:function(e){this.onClick(e)},onFocusableContainerLeftKey:function(e){e.preventDefault();if(this.parentMenu){this.ownerCmp.focus();this.hide()}},onFocusableContainerRightKey:function(m){var n=this,e=n.lastFocusedChild;m.preventDefault();if(e&&e.expandMenu){e.expandMenu(m,0)}},hasFloatMenuParent:function(){return this.parentMenu||this.up("menu[floating=true]")},setOwnerCmp:function(m,n){var l=this;l.parentMenu=m.isMenuItem?m:null;l.ownerCmp=m;l.registerWithOwnerCt();delete l.hierarchicallyHidden;l.onInheritedAdd(m,n);l.containerOnAdded(m,n)}}},0,["menu"],["component","box","container","panel","menu"],{component:true,box:true,container:true,panel:true,menu:true},["widget.menu"],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.menu,"Menu"],0));Ext.define("Ext.theme.neptune.menu.Menu",{override:"Ext.menu.Menu",showSeparator:false});Ext.define("Ext.theme.triton.menu.Menu",{override:"Ext.menu.Menu",compatibility:Ext.isIE8,afterShow:function(){var n=this,q,o,p,s;(arguments.callee.$previous||Ext.panel.Panel.prototype.afterShow).apply(this,arguments);q=n.items.getRange();for(p=0,s=q.length;p<s;p++){o=q[p];if(o&&o.repaintIcons){o.repaintIcons()}}}});(Ext.cmd.derive("Ext.grid.locking.HeaderContainer",Ext.grid.header.Container,{headerCtRelayEvents:["blur","focus","move","resize","destroy","beforedestroy","boxready","afterrender","render","beforerender","removed","hide","beforehide","show","beforeshow","enable","disable","added","deactivate","beforedeactivate","activate","beforeactivate","remove","add","beforeremove","beforeadd","afterlayout","menucreate","sortchange","columnschanged","columnshow","columnhide","columnmove","headertriggerclick","headercontextmenu","headerclick","columnresize","statesave","beforestatesave","staterestore","beforestaterestore"],constructor:function(o){var p=this,m=o.lockedGrid,n=o.normalGrid;p.lockable=o;Ext.grid.header.Container.prototype.constructor.call(this);m.visibleColumnManager.rootColumns=n.visibleColumnManager.rootColumns=o.visibleColumnManager=p.visibleColumnManager=new Ext.grid.ColumnManager(true,m.headerCt,n.headerCt);m.columnManager.rootColumns=n.columnManager.rootColumns=o.columnManager=p.columnManager=new Ext.grid.ColumnManager(false,m.headerCt,n.headerCt);p.lockedEventRelayers=p.relayEvents(m.headerCt,p.headerCtRelayEvents);p.normalEventRelayers=p.relayEvents(n.headerCt,p.headerCtRelayEvents)},destroy:function(){var f=this;Ext.destroy(f.lockedEventRelayers,f.normalEventRelayers);f.lockedEventRelayers=f.normalEventRelayers=null;Ext.grid.header.Container.prototype.destroy.call(this)},getRefItems:function(){return this.lockable.lockedGrid.headerCt.getRefItems().concat(this.lockable.normalGrid.headerCt.getRefItems())},getGridColumns:function(){return this.lockable.lockedGrid.headerCt.getGridColumns().concat(this.lockable.normalGrid.headerCt.getGridColumns())},getColumnsState:function(){var m=this,n=m.lockable.lockedGrid.headerCt.getColumnsState(),l=m.lockable.normalGrid.headerCt.getColumnsState();return n.concat(l)},applyColumnsState:function(F,D){var I=this,B=I.lockable.lockedGrid,A=B.headerCt,w=I.lockable.normalGrid.headerCt,z=A.items.items.concat(w.items.items),E=z.length,x,C,G,y,H;for(x=0;x<E;x++){C=z[x];y=F[C.getStateId()];if(y){G=y.locked!=null&&Boolean(C.locked)!==y.locked;if(C.applyColumnState){C.applyColumnState(y,D)}if(G){(C.locked?A:w).add(C)}}}H=A.items.items.length;for(x=0;x<E;x++){C=z[x];y=F[C.getStateId()];if(y&&!C.locked){y.index-=H}}A.applyColumnsState(F,D);w.applyColumnsState(F,D)},disable:function(){var f=this.lockable;f.lockedGrid.headerCt.disable();f.normalGrid.headerCt.disable()},enable:function(){var f=this.lockable;f.lockedGrid.headerCt.enable();f.normalGrid.headerCt.enable()}},1,0,["component","box","container","headercontainer"],{component:true,box:true,container:true,headercontainer:true},0,0,[Ext.grid.locking,"HeaderContainer"],0));(Ext.cmd.derive("Ext.grid.locking.View",Ext.Base,{alternateClassName:"Ext.grid.LockingView",isLockingView:true,loadMask:true,eventRelayRe:/^(beforeitem|beforecontainer|item|container|cell|refresh)/,constructor:function(s){var p=Ext,n=this,o,q;n.ownerGrid=s.ownerGrid;n.ownerGrid.view=n;n.navigationModel=s.locked.xtype==="treepanel"?new p.tree.NavigationModel(n):new p.grid.NavigationModel(n);s.locked.viewConfig.bindStore=p.emptyFn;s.normal.viewConfig.bindStore=n.subViewBindStore;s.normal.viewConfig.isNormalView=s.locked.viewConfig.isLockedView=true;s.locked.viewConfig.navigationModel=s.normal.viewConfig.navigationModel=n.navigationModel;n.lockedGrid=n.ownerGrid.lockedGrid=p.ComponentManager.create(s.locked);n.lockedView=o=n.lockedGrid.getView();n.selModel=s.normal.viewConfig.selModel=o.getSelectionModel();if(n.lockedGrid.isTree){n.lockedView.animate=false;s.normal.store=o.store;s.normal.viewConfig.stripeRows=n.lockedView.stripeRows;s.normal.rowLines=n.lockedGrid.rowLines}n.normalGrid=n.ownerGrid.normalGrid=p.ComponentManager.create(s.normal);o.lockingPartner=q=n.normalView=n.normalGrid.getView();q.lockingPartner=o;Ext.override(n.normalGrid,{beforeRender:n.beforeNormalGridRender});n.loadMask=(s.loadMask!==undefined)?s.loadMask:n.loadMask;n.mixins.observable.constructor.call(n);n.lockedViewEventRelayers=n.relayEvents(o,p.view.Table.events);n.normalViewEventRelayers=n.relayEvents(q,p.view.Table.events.concat(p.view.Table.normalSideEvents));q.on({scope:n,itemmouseleave:n.onItemMouseLeave,itemmouseenter:n.onItemMouseEnter});o.on({scope:n,itemmouseleave:n.onItemMouseLeave,itemmouseenter:n.onItemMouseEnter});n.loadingText=q.loadingText;n.loadingCls=q.loadingCls;n.loadingUseMsg=q.loadingUseMsg;n.itemSelector=n.getItemSelector();n.all=q.all;n.bindStore(q.dataSource,true,"dataSource")},subViewBindStore:function(q,p){var n=this,o=n.ownerGrid,s;if(n.destroying||n.destroyed||o.destroying||o.destroyed){return}s=n.getSelectionModel();s.bindStore(q,p);s.bindComponent(n)},beforeNormalGridRender:function(){if(this.ownerGrid.lockedGrid.getHeader()&&!this.title){this.title="\xa0"}this.callParent()},onPanelRender:function(n){var m=this,o=m.loadMask,p={target:m.ownerGrid,msg:m.loadingText,msgCls:m.loadingCls,useMsg:m.loadingUseMsg,store:m.ownerGrid.store};m.el=n;m.rendered=true;m.fireEvent("render",m);if(o){if(Ext.isObject(o)){p=Ext.apply(p,o)}m.loadMask=new Ext.LoadMask(p)}},getRefOwner:function(){return this.ownerGrid},getVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},getTopLevelVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},getGridColumns:function(){return this.getVisibleColumnManager().getColumns()},getEl:function(f){return this.getViewForColumn(f).getEl()},getCellSelector:function(){return this.normalView.getCellSelector()},getItemSelector:function(){return this.normalView.getItemSelector()},getViewForColumn:function(m){var n=this.lockedView,l;n.headerCt.cascade(function(e){if(e===m){l=true;return false}});return l?n:this.normalView},onItemMouseEnter:function(q,s){var u=this,p=u.lockedView,t=u.normalView,o;if(q.trackOver){if(q!==p){t=p}o=t.getNode(s);t.highlightItem(o)}},onItemMouseLeave:function(p,q){var n=this,o=n.lockedView,s=n.normalView;if(p.trackOver){if(p!==o){s=o}s.clearHighlight()}},relayFn:function(n,o){o=o||[];var m=this,p=m.lockedView;m.relayingOperation=true;p[n].apply(p,o);p=m.normalView;p[n].apply(p,o);m.relayingOperation=false},getSelectionModel:function(){return this.normalView.getSelectionModel()},getNavigationModel:function(){return this.navigationModel},getStore:function(){return this.ownerGrid.store},onBindStore:function(t,s,u){var o=this,p=o.lockedView,q=o.normalView;if(q.componentLayoutCounter&&!(p.blockRefresh&&q.blockRefresh)){Ext.suspendLayouts();p.doFirstRefresh(t);q.doFirstRefresh(t);Ext.resumeLayouts(true)}},getStoreListeners:function(){var f=this;return{priority:1000,refresh:f.onDataRefresh,replace:f.onReplace,add:f.onAdd,remove:f.onRemove,update:f.onUpdate,clear:f.onDataRefresh,beginupdate:f.onBeginUpdate,endupdate:f.onEndUpdate}},onOwnerGridHide:function(){Ext.suspendLayouts();this.relayFn("onOwnerGridHide",arguments);Ext.resumeLayouts(true)},onOwnerGridShow:function(){Ext.suspendLayouts();this.relayFn("onOwnerGridShow",arguments);Ext.resumeLayouts(true)},onBeginUpdate:function(){Ext.suspendLayouts();this.relayFn("onBeginUpdate",arguments);Ext.resumeLayouts(true)},onEndUpdate:function(){Ext.suspendLayouts();this.relayFn("onEndUpdate",arguments);Ext.resumeLayouts(true)},onDataRefresh:function(){Ext.suspendLayouts();this.relayFn("onDataRefresh",arguments);Ext.resumeLayouts(true)},onReplace:function(){Ext.suspendLayouts();this.relayFn("onReplace",arguments);Ext.resumeLayouts(true)},onAdd:function(){Ext.suspendLayouts();this.relayFn("onAdd",arguments);Ext.resumeLayouts(true)},onRemove:function(){Ext.suspendLayouts();this.relayFn("onRemove",arguments);Ext.resumeLayouts(true)},setActionableMode:function(m,o){var p,n;if(m){if(!o){o=this.getNavigationModel().getPosition()}if(o){o=o.clone();o.view=n=o.column.getView();p=n.setActionableMode(m,o);if(p!==false&&n.lockingPartner.grid.isVisible()){n.lockingPartner.setActionableMode(m,o);if(!n.lockingPartner.actionableMode){n.setActionableMode(false);p=false}}return p}else{return false}}else{this.relayFn("setActionableMode",[false])}},onUpdate:function(){Ext.suspendLayouts();this.relayFn("onUpdate",arguments);Ext.resumeLayouts(true)},refresh:function(){var g=this.lockedView,l=this.normalView;Ext.suspendLayouts();g.clearViewEl(true);l.clearViewEl(true);l.refresh();g.refresh();Ext.resumeLayouts(true)},refreshView:function(){var m=this.lockedView,n=this.normalView,l=n.all.startIndex;Ext.suspendLayouts();m.clearViewEl(true);n.clearViewEl(true);n.refreshView(l);m.refreshView(l);Ext.resumeLayouts(true)},setScrollable:function(f){Ext.suspendLayouts();this.lockedView.setScrollable(f);if(f.isScroller){f=new Ext.scroll.Scroller(f.initialConfig)}this.normalView.setScrollable(f);Ext.resumeLayouts(true)},getNode:function(f){return this.normalView.getNode(f)},getRow:function(f){return this.normalView.getRow(f)},getCell:function(o,n){var p=this.getViewForColumn(n),m=p.getRow(o);return Ext.fly(m).down(n.getCellSelector())},indexOf:function(g){var l=this.lockedView.indexOf(g);if(!l){l=this.normalView.indexOf(g)}return l},focus:function(){var f=this.ownerGrid.down(">tablepanel:not(hidden)>tableview");if(f){f.focus()}},focusRow:function(l){var n,m=this.getNavigationModel().lastFocused;n=m?m.view:this.normalView;n.focusRow(l)},focusCell:function(f){f.view.focusCell(f)},onRowFocus:function(){this.relayFn("onRowFocus",arguments)},isVisible:function(f){return this.ownerGrid.isVisible(f)},getCellInclusive:function(m,o){var p=m.column,n=this.lockedGrid.getColumnManager().getColumns().length;if(p>=n){m=Ext.apply({},m);m.column-=n;return this.normalView.getCellInclusive(m,o)}else{return this.lockedView.getCellInclusive(m,o)}},getHeaderByCell:function(f){if(f){return this.getVisibleColumnManager().getHeaderById(f.getAttribute("data-columnId"))}return false},onRowSelect:function(){this.relayFn("onRowSelect",arguments)},onRowDeselect:function(){this.relayFn("onRowDeselect",arguments)},onCellSelect:function(f){f.column.getView().onCellSelect({record:f.record,column:f.column})},onCellDeselect:function(f){f.column.getView().onCellDeselect({record:f.record,column:f.column})},getCellByPosition:function(n,p){var o=this,s=n.view,q=n.column;if(s===o){n=new Ext.grid.CellContext(q.getView()).setPosition(n.record,n.column)}return s.getCellByPosition(n,p)},getRecord:function(g){var l=this.lockedView.getRecord(g);if(!l){l=this.normalView.getRecord(g)}return l},scrollBy:function(){var f=this.ownerGrid.getScrollable();f.scrollBy.apply(f,arguments)},ensureVisible:function(){var f=this.normalView;f.ensureVisible.apply(f,arguments)},disable:function(){this.relayFn("disable",arguments)},enable:function(){this.relayFn("enable",arguments)},addElListener:function(){this.relayFn("addElListener",arguments)},refreshNode:function(){this.relayFn("refreshNode",arguments)},addRowCls:function(){this.relayFn("addRowCls",arguments)},removeRowCls:function(){this.relayFn("removeRowCls",arguments)},destroy:function(){var f=this;f.rendered=false;f.bindStore(null,false,"dataSource");Ext.destroy(f.selModel,f.navigationModel,f.loadMask,f.lockedViewEventRelayers,f.normalViewEventRelayers);f.lockedView.lockingPartner=f.normalView.lockingPartner=null;f.callParent()}},1,0,0,0,0,[[Ext.util.Observable.prototype.mixinId||Ext.util.Observable.$className,Ext.util.Observable],[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder],[Ext.util.Focusable.prototype.mixinId||Ext.util.Focusable.$className,Ext.util.Focusable]],[Ext.grid.locking,"View",Ext.grid,"LockingView"],function(){this.borrow(Ext.Component,["up"]);this.borrow(Ext.view.AbstractView,["doFirstRefresh","applyFirstRefresh"]);this.borrow(Ext.view.Table,["cellSelector","selectedCellCls","selectedItemCls"])}));(Ext.cmd.derive("Ext.scroll.LockingScroller",Ext.scroll.Scroller,{config:{lockedScroller:null,normalScroller:null},scrollTo:function(p,m,n){var o;if(Ext.isObject(p)){o=p.lockedX;if(o){this.getLockedScroller().scrollTo(o,null,n)}}Ext.scroll.Scroller.prototype.scrollTo.call(this,p,m,n)},updateLockedScroller:function(f){f.on("scroll","onLockedScroll",this);f.setLockingScroller(this)},updateNormalScroller:function(f){f.on("scroll","onNormalScroll",this);f.setLockingScroller(this)},getPosition:function(){var g=this,l=Ext.scroll.Scroller.prototype.getPosition.call(this);l.x=g.getNormalScroller().getPosition().x;l.lockedX=g.getLockedScroller().getPosition().x;return l},privates:{updateSpacerXY:function(v){var w=this,t=w.getLockedScroller(),q=w.getNormalScroller(),p=t.component,s=q.component,u=v.y+((s.headerCt.tooNarrow||p.headerCt.tooNarrow)?Ext.getScrollbarSize().height:0);s.stretchHeight(u);p.stretchHeight(u);Ext.scroll.Scroller.prototype.updateSpacerXY.call(this,v)},doScrollTo:function(n,l,m){if(n!=null){this.getNormalScroller().scrollTo(n,null,m);n=null}Ext.scroll.Scroller.prototype.doScrollTo.call(this,n,l,m)},onLockedScroll:function(m,n,l){this.position.lockedX=n},onNormalScroll:function(m,n,l){this.position.x=n}}},0,0,0,0,["scroller.locking"],0,[Ext.scroll,"LockingScroller"],0));(Ext.cmd.derive("Ext.grid.locking.Lockable",Ext.Base,{alternateClassName:"Ext.grid.Lockable",syncRowHeight:true,headerCounter:0,lockedGridCls:"x-grid-inner-locked",normalGridCls:"x-grid-inner-normal",lockingBodyCls:"x-grid-locking-body",scrollContainerCls:"x-grid-scroll-container",scrollBodyCls:"x-grid-scroll-body",scrollbarClipperCls:"x-grid-scrollbar-clipper",scrollbarCls:"x-grid-scrollbar",scrollbarVisibleCls:"x-grid-scrollbar-visible",unlockText:"Unlock",lockText:"Lock",bothCfgCopy:["hideHeaders","enableColumnHide","enableColumnMove","enableColumnResize","sortableColumns","multiColumnSort","columnLines","rowLines","variableRowHeight","numFromEdge","trailingBufferZone","leadingBufferZone","scrollToLoadBuffer","syncRowHeight"],normalCfgCopy:["scroll"],lockedCfgCopy:[],determineXTypeToCreate:function(p){var s=this,v,q,t,w,u;if(s.subGridXType){v=s.subGridXType}else{if(!p){return"gridpanel"}q=s.getXTypes().split("/");t=q.length;w=q[t-1];u=q[t-2];if(u!=="tablepanel"){v=u}else{v=w}}return v},injectLockable:function(){this.focusable=false;this.lockable=true;this.hasView=true;var M=this,K=M.store=Ext.StoreManager.lookup(M.store),A=M.lockedViewConfig,L=M.normalViewConfig,B=Ext.Object,P,H,E,N,D,F,G,C,Q=M.viewConfig,O=Q&&Q.loadMask,I=(O!==undefined)?O:M.loadMask,J=M.bufferedRenderer;P=M.constructLockableFeatures();M.scrollable=new Ext.scroll.LockingScroller({component:M,x:false,y:true});M.features=null;H=M.constructLockablePlugins();M.plugins=H.topPlugins;E={id:M.id+"-locked",$initParent:M,isLocked:true,bufferedRenderer:J,ownerGrid:M,ownerLockable:M,xtype:M.determineXTypeToCreate(true),store:K,scrollerOwner:false,animate:false,border:false,cls:M.lockedGridCls,isLayoutRoot:function(){return this.floatedFromCollapse||this.ownerGrid.normalGrid.floatedFromCollapse},features:P.lockedFeatures,plugins:H.lockedPlugins};N={id:M.id+"-normal",$initParent:M,isLocked:false,bufferedRenderer:J,ownerGrid:M,ownerLockable:M,xtype:M.determineXTypeToCreate(),store:K,reserveScrollbar:M.reserveScrollbar,scrollerOwner:false,border:false,cls:M.normalGridCls,isLayoutRoot:function(){return this.floatedFromCollapse||this.ownerGrid.lockedGrid.floatedFromCollapse},features:P.normalFeatures,plugins:H.normalPlugins};M.addCls("x-grid-locked");Ext.copy(N,M,M.bothCfgCopy,true);Ext.copy(E,M,M.bothCfgCopy,true);Ext.copy(N,M,M.normalCfgCopy,true);Ext.copy(E,M,M.lockedCfgCopy,true);Ext.apply(N,M.normalGridConfig);Ext.apply(E,M.lockedGridConfig);for(D=0;D<M.normalCfgCopy.length;D++){delete M[M.normalCfgCopy[D]]}for(D=0;D<M.lockedCfgCopy.length;D++){delete M[M.lockedCfgCopy[D]]}M.addStateEvents(["lockcolumn","unlockcolumn"]);F=M.processColumns(M.columns||[],E);E.columns=F.locked;if(!E.columns.items.length){E.hidden=true}N.columns=F.normal;if(!N.columns.items.length){N.hidden=true}N.flex=1;E.viewConfig=A=(A?B.chain(A):{});N.viewConfig=L=(L?B.chain(L):{});A.loadingUseMsg=false;A.loadMask=false;L.loadMask=false;Ext.applyIf(A,Q);Ext.applyIf(L,Q);if(M.layout===Ext.panel.Table.prototype.layout){M.layout={type:"hbox",align:"stretch"}}M.getLayout();if(M.layout.type==="border"){if(M.split){E.split=M.split}if(!E.region){E.region="west"}if(!N.region){N.region="center"}M.addCls("x-grid-locked-split")}if(!(M.layout instanceof Ext.layout.container.Box)){M.split=false}M.view=new Ext.grid.locking.View({loadMask:I,locked:E,normal:N,ownerGrid:M});E=M.lockedGrid;N=M.normalGrid;E.on({beginfloat:M.onBeginLockedFloat,endfloat:M.onEndLockedFloat,scope:M});if(!E.getVisibleColumnManager().getColumns().length){E.hide()}if(!N.getVisibleColumnManager().getColumns().length){N.hide()}G=E.headerCt;C=N.headerCt;M.headerCt=M.view.headerCt=new Ext.grid.locking.HeaderContainer(M);G.lockedCt=true;G.lockableInjected=true;C.lockableInjected=true;G.on({add:M.delaySyncLockedWidth,remove:M.delaySyncLockedWidth,columnshow:M.delaySyncLockedWidth,columnhide:M.delaySyncLockedWidth,sortchange:M.onLockedHeaderSortChange,columnresize:M.delaySyncLockedWidth,scope:M});C.on({add:M.delaySyncLockedWidth,remove:M.delaySyncLockedWidth,columnshow:M.delaySyncLockedWidth,columnhide:M.delaySyncLockedWidth,sortchange:M.onNormalHeaderSortChange,scope:M});M.modifyHeaderCt();M.items=[E];if(M.split){M.addCls("x-grid-locked-split");M.items[1]=Ext.apply({xtype:"splitter"},M.split)}M.items.push(N);M.relayHeaderCtEvents(G);M.relayHeaderCtEvents(C);M.storeRelayers=M.relayEvents(K,["filterchange","groupchange","beforeload","load"]);M.gridRelayers=M.relayEvents(N,["viewready"])},afterInjectLockable:function(){delete this.lockedGrid.$initParent;delete this.normalGrid.$initParent},getLockingViewConfig:function(){return{xclass:"Ext.grid.locking.View",locked:this.lockedGrid,normal:this.normalGrid,panel:this}},onBeginLockedFloat:function(s){var p=s.getContentTarget().dom,n=this.lockedGrid.headerCt,q=this.normalGrid.headerCt,o=Math.max(q.getHeight(),n.getHeight());n.minHeight=o;q.minHeight=o;s.el.addCls(Ext.panel.Panel.floatCls);if(p.firstChild!==s.view.el.dom){p.appendChild(s.view.el.dom)}s.body.dom.style.overflowX=this.normalGrid.headerCt.tooNarrow?"scroll":"";s.body.dom.scrollTop=this.getScrollable().getPosition().y},onEndLockedFloat:function(){var l=this.lockedGrid,g=l.getContentTarget().dom;if(l.collapsed){l.el.removeCls(Ext.panel.Panel.floatCls)}else{this.lockedGrid.headerCt.minHeight=this.normalGrid.headerCt.minHeight=null}this.lockedScrollbarClipper.appendChild(l.view.el.dom);this.syncLockableLayout()},beforeLayout:function(){var p=this,n=p.lockedGrid,o=p.normalGrid,m;if(n&&o){if(!n.layoutCounter&&n.getSizeModel().width.shrinkWrap){n.gridPanelBorderWidth=n.el.getBorderWidth("lr");n.shrinkWrapColumns=true}if(n.shrinkWrapColumns){m=n.headerCt.getTableWidth();n.setWidth(m+n.gridPanelBorderWidth)}if(!p.scrollContainer){p.initScrollContainer()}p.lastScrollPos=p.getScrollable().getPosition();n.view.el.setStyle("margin-bottom","");o.view.el.setStyle("margin-bottom","")}},syncLockableLayout:function(){var N=this,T=N.lockedGrid,U=N.normalGrid,S,Y,am,M,aa,al,ad,X,af,ag,O,W,aj,ah,ac,ab,Q,P,V,Z,R,ak,ae,L,ai;if(!N.isCollapsingOrExpanding&&T&&U){R=T.isVisible(true)&&!T.collapsed;ak=U.isVisible(true);S=T.view.el;Y=U.view.el;am=S.dom;M=Y.dom;ae=N.scrollBody.dom;aa=R?T.body.getRegion(true):new Ext.util.Region(0,0,0,0);al=ak?U.body.getRegion(true):new Ext.util.Region(0,0,0,0);ad=Ext.getScrollbarSize();X=ad.width;af=ad.height;ag=ak?al.width:0;O=R?aa.width:0;W=R?al.x-aa.x:0;ah=(U.headerCt.tooNarrow||T.headerCt.tooNarrow)?af:0;ac=al.height;ab=ac;Q=N.lockedScrollbar;P=N.normalScrollbar;V=N.scrollbarVisibleCls,ai=Y._rtlScrollbarOnRight;if(ah){S.setStyle("margin-bottom",-af+"px");Y.setStyle("margin-bottom",-af+"px");ab-=af;if(R&&T.view.body.dom){N.lockedScrollbarScroller.setSize({x:T.headerCt.getTableWidth()})}if(U.view.body.dom){N.normalScrollbarScroller.setSize({x:U.headerCt.getTableWidth()})}}N.scrollBody.setHeight(ab);S.dom.style.height=Y.dom.style.height="";Z=(N.scrollable.getSize().y+ah);U.view.stretchHeight(Z);T.view.stretchHeight(Z);aj=X&&ae.scrollHeight>ae.clientHeight;if(aj&&ag){ag-=X;Y.setStyle("width",ag+"px")}Q.toggleCls(V,R&&!!ah);P.toggleCls(V,!!ah);N.normalScrollbarClipper.toggleCls(N.scrollbarClipperCls+"-floated",!!N.normalGrid.floatedFromCollapse);N.normalScrollbar.toggleCls(N.scrollbarCls+"-floated",!!N.normalGrid.floatedFromCollapse);N.lockedScrollbarClipper.toggleCls(N.scrollbarClipperCls+"-floated",!!N.lockedGrid.floatedFromCollapse);N.lockedScrollbar.toggleCls(N.scrollbarCls+"-floated",!!N.lockedGrid.floatedFromCollapse);Q.setSize(N.lockedScrollbarClipper.dom.offsetWidth,af);P.setSize(ag,af);if(N.getInherited().rtl){P.rtlSetLocalX(W);N.normalScrollbarClipper.rtlSetLocalX(W)}else{P.setLocalX(W);N.normalScrollbarClipper.setLocalX(W)}N.scrollContainer.setBox(L=R?aa.union(al):al);if(ai){if(aj){ae.style.width=(L+X)+"px";ae.style.right=-X+"px";U.headerCt.layout.innerCt.setWidth(U.headerCt.layout.innerCt.getWidth()+X);N.verticalScrollbarScroller.setSize({y:N.scrollable.getSize().y});N.verticalScrollbar.show()}else{N.verticalScrollbar.hide()}}N.getScrollable().scrollTo(N.lastScrollPos)}},initScrollContainer:function(){var z=this,L=z.scrollContainer=z.body.insertFirst({cls:[z.scrollContainerCls,z._rtlCls]}),A=z.scrollBody=L.appendChild({cls:z.scrollBodyCls}),H=z.lockedScrollbar=L.appendChild({cls:[z.scrollbarCls,z.scrollbarCls+"-locked",z._rtlCls]}),E=z.normalScrollbar=L.appendChild({cls:[z.scrollbarCls,z._rtlCls]}),I=z.lockedGrid.view,F=z.normalGrid.view,K=I.getScrollable(),M=F.getScrollable(),G=Ext.scroll.Scroller,C,D,J,B,y;I.stretchHeight(0);F.stretchHeight(0);z.scrollable.setConfig({element:A,lockedScroller:K,normalScroller:M});J=z.lockedScrollbarClipper=A.appendChild({cls:[z.scrollbarClipperCls,z.scrollbarClipperCls+"-locked",z._rtlCls]});B=z.normalScrollbarClipper=A.appendChild({cls:[z.scrollbarClipperCls,z._rtlCls]});J.appendChild(I.el);B.appendChild(F.el);I.ignoreDomPosition=true;F.ignoreDomPosition=true;C=z.lockedScrollbarScroller=new G({element:H,x:"scroll",y:false,rtl:K.getRtl&&K.getRtl()});D=z.normalScrollbarScroller=new G({element:E,x:"scroll",y:false,rtl:M.getRtl&&M.getRtl()});if(F.el._rtlScrollbarOnRight){z.verticalScrollbar=L.appendChild({cls:z.scrollbarCls,style:{top:0,left:0,bottom:0,width:Ext.getScrollbarSize().width+"px"}});z.verticalScrollbarScroller=new G({element:z.verticalScrollbar,x:false,y:true});z.verticalScrollbarScroller.addPartner(z.scrollable,"y")}C.addPartner(K,"x");D.addPartner(M,"x");y=z.lockedGrid.headerCt.getScrollable();if(y){C.addPartner(y,"x")}y=z.normalGrid.headerCt.getScrollable();if(y){D.addPartner(y,"x")}z.view.onPanelRender(A)},processColumns:function(z,B){var G=this,y,w,A,H=new Ext.grid.header.Container({"$initParent":G}),I=[],C=[],D={itemId:"lockedHeaderCt",stretchMaxPartner:"^^>>#normalHeaderCt",items:I},x={itemId:"normalHeaderCt",stretchMaxPartner:"^^>>#lockedHeaderCt",items:C},F={locked:D,normal:x},E;if(Ext.isObject(z)){Ext.applyIf(D,z);Ext.applyIf(x,z);E=Ext.apply({},z);delete E.items;Ext.apply(H,E);z=z.items}H.constructing=true;for(y=0,w=z.length;y<w;++y){A=z[y];if(!A.isComponent){A=H.applyDefaults(A);A.$initParent=H;A=H.lookupComponent(A);delete A.$initParent}A.processed=true;if(A.locked||A.autoLock){I.push(A)}else{C.push(A)}}G.fireEvent("processcolumns",G,I,C);H.destroy();return F},ensureLockedVisible:function(){this.lockedGrid.ensureVisible.apply(this.lockedGrid,arguments);this.normalGrid.ensureVisible.apply(this.normalGrid,arguments)},syncRowHeights:function(){if(!this.destroyed){var p=this,s=p.normalGrid.getView(),q=p.lockedGrid.getView(),u=s.syncRowHeightBegin(),t=q.syncRowHeightBegin(),o;s.syncRowHeightMeasure(u);q.syncRowHeightMeasure(t);s.syncRowHeightFinish(u,t);q.syncRowHeightFinish(t,u);o=s.getScrollY();q.setScrollY(o)}},modifyHeaderCt:function(){var f=this;f.lockedGrid.headerCt.getMenuItems=f.getMenuItems(f.lockedGrid.headerCt.getMenuItems,true);f.normalGrid.headerCt.getMenuItems=f.getMenuItems(f.normalGrid.headerCt.getMenuItems,false);f.lockedGrid.headerCt.showMenuBy=Ext.Function.createInterceptor(f.lockedGrid.headerCt.showMenuBy,f.showMenuBy);f.normalGrid.headerCt.showMenuBy=Ext.Function.createInterceptor(f.normalGrid.headerCt.showMenuBy,f.showMenuBy)},onUnlockMenuClick:function(){this.unlock()},onLockMenuClick:function(){this.lock()},showMenuBy:function(u,s,v){var w=this.getMenu(),q=w.down("#unlockItem"),p=w.down("#lockItem"),t=q.prev();if(v.lockable===false){t.hide();q.hide();p.hide()}else{t.show();q.show();p.show();if(!q.initialConfig.disabled){q.setDisabled(v.lockable===false)}if(!p.initialConfig.disabled){p.setDisabled(!v.isLockable())}}},getMenuItems:function(v,y){var u=this,t=u.unlockText,A=u.lockText,s="x-hmenu-unlock",z="x-hmenu-lock",w=u.onUnlockMenuClick.bind(u),x=u.onLockMenuClick.bind(u);return function(){var e=v.call(this);e.push("-",{itemId:"unlockItem",iconCls:s,text:t,handler:w,disabled:!y});e.push({itemId:"lockItem",iconCls:z,text:A,handler:x,disabled:y});return e}},delaySyncLockedWidth:function(){var g=this,l=g.syncLockedWidthTask||(g.syncLockedWidthTask=new Ext.util.DelayedTask(g.syncLockedWidth,g));if(g.reconfiguring){return}if(!Ext.Component.layoutSuspendCount||g.syncTaskDelay===0){g.syncLockedWidth()}else{l.delay(1)}},syncLockedWidth:function(){var u=this,x=u.rendered,w=u.lockedGrid,s=w.view,t=s.getScrollable(),v=u.normalGrid,y=w.getVisibleColumnManager().getColumns().length,A=v.getVisibleColumnManager().getColumns().length,z=u.syncLockedWidthTask;if(z){z.cancel()}if(u.reconfiguring){return}Ext.suspendLayouts();if(A){v.show();if(y){if(u.layout.type==="border"){w.region=w.initialConfig.region}if(x&&w.shrinkWrapColumns&&!w.headerCt.forceFit){delete w.flex;w.width=w.headerCt.getTableWidth()+w.gridPanelBorderWidth;w.updateLayout()}w.addCls(u.lockedGridCls);w.show();if(w.split){u.child("splitter").show();u.addCls("x-grid-locked-split")}}else{w.hide();if(x){w.getView().clearViewEl(true)}if(w.split){u.child("splitter").hide();u.removeCls("x-grid-locked-split")}}}else{v.hide();delete w.width;if(u.layout.type==="border"){w.region="center";v.region="west"}else{w.flex=1}w.removeCls(u.lockedGridCls);w.show()}Ext.resumeLayouts(true);return{locked:!!y,normal:!!A}},onLockedHeaderSortChange:Ext.emptyFn,onNormalHeaderSortChange:Ext.emptyFn,lock:function(B,J,C){var z=this,A=z.normalGrid,E=z.lockedGrid,D=A.view,H=E.view,I=D.all.startIndex,L=D.getScrollable(),K=H.getScrollable(),M=A.headerCt,y,G,F=z.componentLayoutCounter;B=B||M.getMenu().activeHeader;B.unlockedWidth=B.width;if(B.flex){if(B.lockedWidth){B.width=B.lockedWidth;B.lockedWidth=null}else{B.width=B.lastBox.width}B.flex=null}C=C||E.headerCt;G=B.ownerCt;if(G&&!B.isLockable()){return}Ext.suspendLayouts();if(L){L.suspendPartnerSync();K.suspendPartnerSync()}if(E.hidden){if(!E.componentLayoutCounter){E.height=A.lastBox.height;if(H.bufferedRenderer){H.bufferedRenderer.onViewResize(H,0,A.body.lastBox.height)}}E.show()}E.reconfiguring=A.reconfiguring=true;B.ownerCmp=B.ownerCt;if(G){G.remove(B,false)}B.locked=true;if(Ext.isDefined(J)){C.insert(J,B)}else{C.add(B)}E.reconfiguring=A.reconfiguring=false;B.ownerCmp=null;y=z.syncLockedWidth();if(y.locked){H.clearViewEl(true)}if(y.normal){D.clearViewEl(true)}if(y.normal){A.getView().refreshView(I)}if(y.locked){E.getView().refreshView(I)}z.fireEvent("lockcolumn",z,B);Ext.resumeLayouts(true);if(L){L.resumePartnerSync(true);K.resumePartnerSync()}if(z.componentLayoutCounter===F){z.syncLockableLayout()}},unlock:function(z,G,A){var x=this,y=x.normalGrid,C=x.lockedGrid,B=y.view,E=C.view,F=B.all.startIndex,v=C.headerCt,w,D=x.componentLayoutCounter;if(!Ext.isDefined(G)){G=0}z=z||v.getMenu().activeHeader;z.lockedWidth=z.width;if(z.flex){if(z.unlockedWidth){z.width=z.unlockedWidth;z.unlockedWidth=null}else{z.width=z.lastBox.width}z.flex=null}A=A||y.headerCt;Ext.suspendLayouts();C.reconfiguring=y.reconfiguring=true;z.ownerCmp=z.ownerCt;if(z.ownerCt){z.ownerCt.remove(z,false)}z.locked=false;A.insert(G,z);C.reconfiguring=y.reconfiguring=false;z.ownerCmp=null;w=x.syncLockedWidth();if(w.locked){E.clearViewEl(true)}if(w.normal){B.clearViewEl(true)}if(w.normal){y.getView().refreshView(F)}if(w.locked){C.getView().refreshView(F)}x.fireEvent("unlockcolumn",x,z);Ext.resumeLayouts(true);if(x.componentLayoutCounter===D){x.syncLockableLayout()}},reconfigureLockable:function(s,x,w){var u=this,A=u.store,y=u.lockedGrid,v=u.normalGrid,t,z;if(!s&&w){s=Ext.StoreManager.lookup("ext-empty-store")}if(s&&s!==A){s=Ext.data.StoreManager.lookup(s);u.store=s;y.view.blockRefresh=v.view.blockRefresh=true;y.bindStore(s);t=y.view;t.store=s;if(!t.dataSource.isFeatureStore){t.dataSource=s}if(t.bufferedRenderer){t.bufferedRenderer.bindStore(s)}v.bindStore(s);t=v.view;t.store=s;if(!t.dataSource.isFeatureStore){t.dataSource=s}if(t.bufferedRenderer){t.bufferedRenderer.bindStore(s)}u.view.store=s;z=u.view.loadMask;if(z&&z.isLoadMask){z.bindStore(s)}u.view.bindStore(v.view.dataSource,false,"dataSource");y.view.blockRefresh=v.view.blockRefresh=false}if(x){y.reconfiguring=v.reconfiguring=true;y.headerCt.removeAll();v.headerCt.removeAll();x=u.processColumns(x,y);y.headerCt.add(x.locked.items);v.headerCt.add(x.normal.items);y.reconfiguring=v.reconfiguring=false;u.syncLockedWidth()}u.refreshCounter=v.view.refreshCounter},afterReconfigureLockable:function(){this.syncLockedWidth();if(this.refreshCounter===this.normalGrid.getView().refreshCounter){this.view.refreshView()}},constructLockableFeatures:function(){var p=this.features,s,q,w,v,t=0,u;if(p){if(!Ext.isArray(p)){p=[p]}w=[];v=[];u=p.length;for(;t<u;t++){s=p[t];if(!s.isFeature){s=Ext.create("feature."+s.ftype,s)}switch(s.lockableScope){case"locked":w.push(s);break;case"normal":v.push(s);break;default:s.lockableScope="both";w.push(s);v.push(q=s.clone());q.lockingPartner=s;s.lockingPartner=q}}}return{normalFeatures:v,lockedFeatures:w}},constructLockablePlugins:function(){var A=this.plugins,w,B,C,u,E,y,x=0,v,D,z;if(A){if(!Ext.isArray(A)){A=[A]}u=[];E=[];y=[];v=A.length;for(;x<v;x++){w=A[x];if(w.init){D=w.lockableScope}else{z=w.ptype?Ext.ClassManager.getByAlias(("plugin."+w.ptype)):Ext.ClassManager.get(w.xclass);D=z.prototype.lockableScope}switch(D){case"both":E.push(C=w.clonePlugin());y.push(B=w.clonePlugin());C.lockingPartner=B;B.lockingPartner=C;Ext.destroy(w);break;case"locked":E.push(w);break;case"normal":y.push(w);break;default:u.push(w)}}}return{topPlugins:u,normalPlugins:y,lockedPlugins:E}},destroyLockable:function(){var g=this,l=g.syncLockedWidthTask;if(l){l.cancel();g.syncLockedWidthTask=null}if(g.lockedGrid&&g.lockedGrid.headerCt){g.lockedGrid.headerCt.showMenuBy=null}if(g.normalGrid&&g.normalGrid.headerCt){g.normalGrid.headerCt.showMenuBy=null}Ext.destroy(g.view,g.headerCt)}},0,0,0,0,0,0,[Ext.grid.locking,"Lockable",Ext.grid,"Lockable"],function(){this.borrow(Ext.Component,["constructPlugin"])}));(Ext.cmd.derive("Ext.grid.plugin.BufferedRenderer",Ext.AbstractPlugin,{isBufferedRenderer:true,lockableScope:"both",numFromEdge:2,trailingBufferZone:10,leadingBufferZone:20,synchronousRender:true,scrollToLoadBuffer:200,viewSize:100,rowHeight:21,position:0,scrollTop:0,lastScrollDirection:1,bodyTop:0,scrollHeight:0,loadId:0,init:function(p){var o=this,t=p.view,q={refresh:o.onViewRefresh,columnschanged:o.checkVariableRowHeight,boxready:o.onViewBoxReady,scope:o,destroyable:true},s={scroll:o.onViewScroll,scope:o},u=t.initialConfig;o.scroller=t.lockingPartner?t.ownerGrid.scrollable:t.getScrollable();if(p.isTree||(p.ownerLockable&&p.ownerLockable.isTree)){t.blockRefresh=false;if(u&&u.loadMask===undefined){t.loadMask=true}}if(t.positionBody){q.refresh=o.onViewRefresh}if(Ext.isWebKit){o.needsPointerEventsFix=true;s.scrollend=o.onViewScrollEnd;q.itemmousedown=o.onViewItemMouseDown}o.grid=p;o.view=t;o.isRTL=t.getInherited().rtl;t.bufferedRenderer=o;t.preserveScrollOnRefresh=true;t.animate=false;o.bindStore(t.dataSource);if(t.hasOwnProperty("rowHeight")){o.rowHeight=t.rowHeight}o.position=0;o.viewListeners=t.on(q);if(o.scroller){o.scrollListeners=o.scroller.on(s)}},checkVariableRowHeight:function(){var f=this.variableRowHeight;this.variableRowHeight=this.view.hasVariableRowHeight();if(Boolean(this.variableRowHeight)!==Boolean(f)){delete this.rowHeight}},bindStore:function(m){var l=this,n=l.store;if(n&&n.isFeatureStore){return}if(n){l.unbindStore()}l.storeListeners=m.on({scope:l,groupchange:l.onStoreGroupChange,clear:l.onStoreClear,beforeload:l.onBeforeStoreLoad,load:l.onStoreLoad,destroyable:true});l.store=m;l.setBodyTop(0);delete l.viewSize;delete l.rowHeight;if(m.isBufferedStore){m.setViewSize(l.viewSize)}},unbindStore:function(){this.storeListeners.destroy();this.storeListeners=this.store=null},onBeforeStoreLoad:function(m){var l=this,n=l.view;if(n&&n.refreshCounter){if(m.isTreeStore||n.preserveScrollOnReload){l.nextRefreshStartIndex=n.all.startIndex}else{if(l.scrollTop!==0){l.setBodyTop(l.bodyTop=l.scrollTop=l.position=l.scrollHeight=l.nextRefreshStartIndex=0);l.scroller.scrollTo(null,0)}}l.lastScrollDirection=l.scrollOffset=null}l.disable()},onStoreLoad:function(){this.enable()},onStoreClear:function(){var g=this,l=g.view;if(l.rendered&&!g.store.destroyed){if(g.scrollTop!==0){g.bodyTop=g.scrollTop=g.position=g.scrollHeight=0;g.nextRefreshStartIndex=null;g.scroller.scrollTo(null,0)}l.refresh();g.lastScrollDirection=g.scrollOffset=null}},onStoreGroupChange:function(f){this.refreshSize()},onViewBoxReady:function(f){this.refreshScroller(f,this.scrollHeight)},onViewRefresh:function(q,p){var o=this,n=q.all,s;o.checkVariableRowHeight();if(!q.componentLayoutCounter&&(q.headerCt.down("{flex}")||o.variableRowHeight)){q.on({boxready:Ext.Function.pass(o.onViewRefresh,[q,p],o),single:true});o.skipNextRefreshSize=true;return}o.skipNextRefreshSize=false;if(o.refreshing){return}o.refreshSize();if(o.scroller){if(o.scrollTop!==o.scroller.getPosition().y){o.onViewScroll();o.onViewScrollEnd()}else{if(!o.hasOwnProperty("bodyTop")){o.bodyTop=n.startIndex*o.rowHeight;o.scroller.scrollTo(null,o.bodyTop)}o.setBodyTop(o.bodyTop);s=q.lastBox&&q.lastBox.height;if(s&&n.getCount()){o.onViewResize(q,null,s);if(p&&(n.getCount()!==p.length)){p.length=0;p.push.apply(p,o.store.getRange(n.startIndex,n.endIndex))}}}}},beforeTableLayout:function(l){var g=this.view.body.dom;if(g){l.bodyHeight=g.offsetHeight;l.bodyWidth=g.offsetWidth}},afterTableLayout:function(m){var o=this,p=o.view,n;if(m.bodyHeight&&p.body.dom){delete o.rowHeight;o.refreshSize();n=p.body.dom.offsetHeight;if(n!==m.bodyHeight){o.onViewResize(p,null,p.el.lastBox.height);n=o.bodyHeight;if(n<m.bodyHeight){if(o.viewSize>=o.store.getCount()){o.setBodyTop(0)}else{if(o.bodyTop>o.scrollTop||o.bodyTop+n<o.scrollTop+o.viewClientHeight){o.setBodyTop(o.scrollTop-o.trailingBufferZone*o.rowHeight)}}}if(p.all.endIndex===(p.dataSource.getCount())-1){o.stretchView(p,o.scrollHeight=o.bodyTop+n-1)}}}},refreshSize:function(){var m=this,n=m.view,l=m.skipNextRefreshSize||(Ext.Component.pendingLayouts&&Ext.Component.layoutSuspendCount)||!n.body.dom;m.skipNextRefreshSize=false;if(l){return}m.bodyHeight=n.body.dom.offsetHeight;m.scrollHeight=m.getScrollHeight();m.stretchView(n,m.scrollHeight)},onViewResize:function(s,p,u,t,v){var w=this,q;w.refreshSize();if(!v||u!==v){w.viewClientHeight=s.lockingPartner?((w.scroller&&w.scroller.getClientSize().y)||u):s.el.dom.clientHeight;q=Math.ceil(u/w.rowHeight)+w.trailingBufferZone+w.leadingBufferZone;w.viewSize=w.setViewSize(q)}},stretchView:function(m,n){var l=this;if(l.scrollTop>n){l.position=l.scrollTop=Math.max(n-l.bodyHeight,0);l.scroller.scrollTo(null,l.scrollTop)}if(l.bodyTop>n){m.body.translate(null,l.bodyTop=l.position)}if(m.getScrollable()){l.refreshScroller(m,n)}},refreshScroller:function(l,m){var n=l.getScrollable();if(n){if(n.setElementSize){n.setElementSize()}n.setSize({x:l.headerCt.getTableWidth(),y:m});if(l.lockingPartner){this.scroller.setSize({x:0,y:m})}}},setViewSize:function(O,G){var z=this,L=z.store,N=z.view,J,I=N.all,C=I.getCount(),A=L.getCount(),H,D,B=z.view.lockingPartner&&z.view.lockingPartner.bufferedRenderer,M=C-O,E=0,F=Math.max(0,A-1),K=Ext.Number.sign((z.getFirstVisibleRowIndex()-I.startIndex)-(I.endIndex-z.getLastVisibleRowIndex()));if(B&&!G&&B.view.componentLayoutCounter){if(B.viewSize>O){O=B.viewSize}else{if(N.componentLayoutCounter){B.setViewSize(O,true)}}}M=C-O;if(M){z.scrollTop=z.scroller?z.scroller.getPosition().y:0;z.viewSize=O;if(L.isBufferedStore){L.setViewSize(O)}if(C){H=Math.max(0,Math.min(I.startIndex,A-O));D=Math.min(H+O-1,F);if(H===I.startIndex&&D===I.endIndex){if(M<0){z.handleViewScroll(K)}}else{if(B){B.disable()}if(M<0){if(A>O&&A>C){L.getRange(H,D,{callback:function(e,g,f){J=N.ownerGrid;if(f>I.endIndex){I.scroll(Ext.Array.slice(e,I.endIndex+1,Infinity),1,0)}if(g<I.startIndex){E=I.first(true);I.scroll(Ext.Array.slice(e,0,I.startIndex-g),-1,0);z.bodyTop-=E.offsetTop}z.setBodyTop(z.bodyTop);if(B&&!G&&(J.syncRowHeight||J.syncRowHeightOnNextLayout)){B.setViewSize(O,true);J.syncRowHeights()}}})}else{z.refreshView(0)}}else{if(K===1){E=I.item(I.startIndex+M,true).offsetTop}I.clip(K,M);z.setBodyTop(z.bodyTop+E)}if(B){B.enable()}}}z.refreshSize()}return O},getViewRange:function(){var q=this,w=q.view,x=w.all,t=x.getCount(),s=w.lockingPartner&&w.lockingPartner.all,u=q.store,v=0,y;if(!q.hasOwnProperty("viewSize")&&q.ownerCt&&q.ownerCt.height){q.viewSize=Math.ceil(q.ownerCt.height/q.rowHeight)}if(!u.data.getCount()){return[]}if(!t&&s&&s.getCount()){v=s.startIndex;y=Math.min(s.endIndex,v+q.viewSize-1,u.getCount()-1)}else{if(t){v=x.startIndex}else{if(u.isBufferedStore){if(!u.currentPage){u.currentPage=1}v=x.startIndex=(u.currentPage-1)*(u.pageSize||1);u.currentPage=1}}y=v+(q.viewSize||u.defaultViewSize)-1}return u.getRange(v,y)},onReplace:function(I,H,A,z){var x=this,y=x.scroller,w=x.view,F=w.all,E,B=F.getCount(),C=H+A.length-1,G=z.length-A.length,D=G*x.rowHeight;if(H>=F.startIndex+x.viewSize){x.refreshSize();return}if(B&&C<F.startIndex&&F.getCount()>=x.viewSize){F.moveBlock(G);x.refreshSize();E=F.startIndex;if(G>0){x.doNotMirror=true;x.handleViewScroll(-1);x.doNotMirror=false}if(F.startIndex===E){if(F.startIndex){x.setBodyTop(x.bodyTop+=D);w.suspendEvent("scroll");w.scrollBy(0,D);w.resumeEvent("scroll");x.position=x.scrollTop=x.scroller.getPosition().y}}else{w.suspendEvent("scroll");w.scrollBy(0,(E-F.startIndex)*x.rowHeight);w.resumeEvent("scroll")}w.refreshSize(F.getCount()!==B);return}if(B&&H>F.endIndex){x.refreshSize();if(G>0){x.onRangeFetched(null,F.startIndex,Math.min(I.getCount(),F.startIndex+x.viewSize)-1,null,true)}w.refreshSize(F.getCount()!==B);return}if(H<F.startIndex&&C<=F.endIndex){x.refreshView(F.startIndex-A.length+z.length);return}if(H<F.startIndex&&C<=F.endIndex&&D){y.suspendEvent("scroll");y.scrollTo(null,x.position=x.scrollTop+=D);y.resumeEvent("scroll")}x.refreshView()},scrollTo:function(L,I){var B=arguments,z=this,N=z.view,C=N.lockingPartner&&N.lockingPartner.grid.isVisible()&&N.lockingPartner.bufferedRenderer,K=z.store,O=K.getCount(),A,G,H,J,F,E,D,M;if(I!==undefined&&!(I instanceof Object)){I={select:B[1],callback:B[2],scope:B[3]}}if((F=N.dataSource.groupingFeature)&&(F.collapsible)){if(L.isEntity){D=L}else{D=N.store.getAt(Math.min(Math.max(L,0),N.store.getCount()-1))}E=F.getMetaGroup(D);if(E&&E.isCollapsed){if(!F.isExpandingOrCollapsing&&D!==E.placeholder){F.expand(F.getGroup(D).getGroupKey());O=K.getCount();L=F.indexOf(D)}else{D=E.placeholder;L=F.indexOfPlaceholder(D)}}else{L=F.indexOf(D)}}else{if(L.isEntity){D=L;L=K.indexOf(D);if(L===-1){return}}else{L=Math.min(Math.max(L,0),O-1);D=K.getAt(L)}}if(D&&(H=N.getNode(D))){N.grid.ensureVisible(D,I);z.onViewScroll();z.onViewScrollEnd();return}if(L<N.all.startIndex){M=-1;A=Math.max(Math.min(L-(Math.floor((z.leadingBufferZone+z.trailingBufferZone)/2)),O-z.viewSize+1),0);G=Math.min(A+z.viewSize-1,O-1)}else{M=1;G=Math.min(L+(Math.floor((z.leadingBufferZone+z.trailingBufferZone)/2)),O-1);A=Math.max(G-(z.viewSize-1),0)}J=Math.max(A*z.rowHeight,0);K.getRange(A,G,{callback:function(e,g,f){z.renderRange(g,f,true,true);D=K.data.getRange(L,L+1)[0];H=N.getNode(D);N.body.translate(null,z.bodyTop=J);if(M===1){z.refreshSize()}if(C){C.renderRange(g,f,true,true);z.syncRowHeights();C.view.body.translate(null,C.bodyTop=J);if(M===1){C.refreshSize()}}if(!H){return}N.grid.ensureVisible(D,I);z.scrollTop=z.position=z.scroller.getPosition().y;if(C){C.position=C.scrollTop=z.scrollTop}}})},onViewItemMouseDown:function(){var f=this;Ext.getDoc().on({mouseup:f.onDocumentMouseUp,scope:f,single:true});f.preservePointerEvents=true},onDocumentMouseUp:function(){this.preservePointerEvents=false},onViewScroll:function(y,u,v){var w=this,z=w.view.body.dom,t=w.store,C=(t.getCount()),x,A,B=w.scrollTop=w.scroller.getPosition().y;if(z){if(w.needsPointerEventsFix&&!w.preservePointerEvents){z.style.pointerEvents="none"}if(!(w.disabled||C<w.viewSize)){x=B-w.position;A=x>0?1:-1;if(Math.abs(x)>=20||(A!==w.lastScrollDirection)){w.lastScrollDirection=A;w.handleViewScroll(w.lastScrollDirection,x)}}}},onViewScrollEnd:function(){var g=this,l=g.view.body.dom;if(l){if(g.needsPointerEventsFix){l.style.pointerEvents="";g.preservePointerEvents=false}}},handleViewScroll:function(w,B){var y=this,D=y.view.all,u=y.store,z=u.getCount(),x=y.viewSize,A=z-1,v=Math.max(0,z-x),C,E;if(w===-1){if(D.startIndex){if(y.topOfViewCloseToEdge()){C=Math.max(0,y.getLastVisibleRowIndex()+y.trailingBufferZone-x);if(C>D.startIndex){C=D.startIndex+Math.floor(B/y.rowHeight)}}}}else{if(D.endIndex<A){if(y.bottomOfViewCloseToEdge()){C=Math.max(0,Math.min(y.getFirstVisibleRowIndex()-y.trailingBufferZone,v))}}}if(C==null){y.position=y.scrollTop;y.loadId++}else{E=Math.min(C+x-1,A);if(y.variableRowHeight&&E===D.endIndex&&E<A){E++;C++}if(C!==D.startIndex||E!==D.endIndex){y.renderRange(C,E);return true}}},bottomOfViewCloseToEdge:function(){var f=this;if(f.variableRowHeight){return f.bodyTop+f.bodyHeight<f.scrollTop+f.view.lastBox.height+(f.numFromEdge*f.rowHeight)}else{return(f.view.all.endIndex-f.getLastVisibleRowIndex())<f.numFromEdge}},topOfViewCloseToEdge:function(){var f=this;if(f.variableRowHeight){return f.bodyTop>f.scrollTop-(f.numFromEdge*f.rowHeight)}else{return(f.getFirstVisibleRowIndex()-f.view.all.startIndex)<f.numFromEdge}},refreshView:function(t){var x=this,w=x.viewSize,v=x.view,C=v.all,u=x.store,y=u.getCount(),B=Math.max(0,y-1),A=v.lockingPartner&&v.lockingPartner.all,z;if(!y){return x.doRefreshView([],0,0)}else{if(y<w){t=0;z=B}else{if(t==null&&!C.getCount()&&A&&A.getCount()){t=A.startIndex;z=Math.min(A.endIndex,t+w-1,B)}else{if(t==null){if(x.nextRefreshStartIndex!=null){t=x.nextRefreshStartIndex;x.nextRefreshStartIndex=null}else{t=C.startIndex}}t=Math.max(0,Math.min(t,B-w+1));z=Math.min(t+w-1,B);if(z-t+1>w){t=z-w+1}}}}if(t===0&&z===-1){x.doRefreshView([],0,0)}else{u.getRange(t,z,{callback:x.doRefreshView,scope:x})}},doRefreshView:function(F,M,P,O){var K=this,G=K.view,C=K.scroller,I=G.all,B=I.startIndex,N=I.endIndex,L,S,R=I.getCount(),H,J=M!==I.startIndex,D,E,Q;G.refreshing=K.refreshing=true;if(G.refreshCounter){if(G.hasListeners.beforerefresh&&G.fireEvent("beforerefresh",G)===false){return G.refreshNeeded=G.refreshing=K.refreshing=false}Q=G.saveFocusState();G.clearViewEl(true);G.refreshCounter++;if(F.length){H=G.doAdd(F,M);if(J){L=I.item(B,true);S=I.item(N,true);if(L){E=-L.offsetTop}else{if(S){E=I.last(true).offsetTop-S.offsetTop}}if(E){D=Math.max(K.bodyTop+E,0);K.scrollTop=D?K.scrollTop+E:0}else{D=M*K.rowHeight;K.scrollTop=Math.max(D+K.rowHeight*(D<K.bodyTop?K.leadingBufferZone:K.trailingBufferZone),0)}}}else{if(K.scrollTop){D=K.scrollTop=0}G.addEmptyText()}if(J){K.setBodyTop(D);C.suspendEvent("scroll");C.scrollTo(null,K.position=K.scrollTop);C.resumeEvent("scroll")}K.refreshSize();G.refreshSize(I.getCount()!==R);G.fireItemMutationEvent("refresh",G,F);Q();G.headerCt.setSortState()}else{G.refresh()}G.refreshNeeded=G.refreshing=K.refreshing=false},renderRange:function(v,u,w,s){var q=this,p=q.view.all,t=q.store;if(!(v===p.startIndex&&u===p.endIndex)){if(t.rangeCached(v,u)){q.cancelLoad();if(q.synchronousRender||w){q.onRangeFetched(null,v,u,null,s)}else{if(!q.renderTask){q.renderTask=new Ext.util.DelayedTask(q.onRangeFetched,q,null,false)}q.renderTask.delay(1,null,null,[null,v,u,null,s])}}else{q.attemptLoad(v,u,q.scrollTop)}}},onRangeFetched:function(O,ah,aj,ak,af){var M=this,Q=M.view,Y=M.scroller,aa=Q.el,S=Q.all,N=0,Z,W=(Q.lockingPartner&&!af&&!M.doNotMirror)&&Q.lockingPartner.bufferedRenderer,ad=M.variableRowHeight,an=M.bodyHeight,V=Q.componentLayoutCounter,ai,ag,ac,U,X,T,P,al,am,ae,ab,R,ao;if(Q.destroyed){return}if(O){if(!af){M.scrollTop=M.scroller.getPosition().y}}else{O=M.store.getRange(ah,aj);if(!O){return}}ai=Ext.Element.getActiveElement(true);ag=aa.contains(ai);if(ag){ai.suspendFocusEvents()}Z=ah*M.rowHeight;if(ah<S.startIndex&&aj>S.endIndex){R=S.startIndex-ah;Q.clearViewEl(true);U=Q.doAdd(O,ah);Q.fireItemMutationEvent("itemadd",O,ah,U,Q);for(ac=0;ac<R;ac++){N-=U[ac].offsetHeight}X=M.bodyTop+N}else{P=M.teleported||ah>S.endIndex||aj<S.startIndex;if(P){Q.clearViewEl(true);M.teleported=false}if(!S.getCount()){U=Q.doAdd(O,ah);Q.fireItemMutationEvent("itemadd",O,ah,U,Q);X=Z;if(P&&ad){ao=M.scrollTop<M.position?M.leadingBufferZone:M.trailingBufferZone;X=Math.max(M.scrollTop-S.item(S.startIndex+ao-1,true).offsetTop,0)}}else{if(aj>S.endIndex){ab=Math.max(ah-S.startIndex,0);if(ad){N=S.item(S.startIndex+ab,true).offsetTop}U=S.scroll(Ext.Array.slice(O,S.endIndex+1-ah),1,ab);if(ad){X=M.bodyTop+N}else{X=Z}}else{ab=Math.max(S.endIndex-aj,0);al=S.startIndex;U=S.scroll(Ext.Array.slice(O,0,S.startIndex-ah),-1,ab);if(ad){X=M.bodyTop-S.item(al,true).offsetTop;if(!S.startIndex){if(X){Y.scrollTo(null,M.position=(M.scrollTop-=X));X=0}}else{if(X<0){N=S.startIndex*M.rowHeight;Y.scrollTo(null,M.position=(M.scrollTop+=N));X=M.bodyTop+N}}}else{X=Z}}}M.position=M.scrollTop}if(ag){ai.resumeFocusEvents();if(!aa.contains(ai)){ae=Q.actionableMode?Q.actionPosition:Q.lastFocused;if(ae&&ae.column){Q.renderingRows=true;Q.onFocusLeave({});Q.renderingRows=false;if(ae.column.focusable){T=ae.column}else{T=ae.column.el.findTabbableElements()[0]}if(!T){T=Q.el}T.focus()}}}X=Math.max(Math.floor(X),0);if(Q.positionBody){M.setBodyTop(X)}if(U&&W&&!W.disabled){W.scrollTop=W.position=M.scrollTop;if(W.view.ownerCt.isVisible()){am=W.onRangeFetched(O,ah,aj,ak,true);if(Q.ownerGrid.syncRowHeight||Q.ownerGrid.syncRowHeightOnNextLayout||(W.variableRowHeight!==ad)){M.syncRowHeights(U,am);Q.ownerGrid.syncRowHeightOnNextLayout=false}}if(W.bodyTop!==X){W.setBodyTop(X)}W.scroller.scrollTo(null,M.scrollTop)}if(M.variableRowHeight&&M.bodyHeight!==an&&Q.componentLayoutCounter===V){delete M.rowHeight;M.refreshSize()}return U},syncRowHeights:function(w,B){var u=this,v=0,C=1,t=[],A=[],y=Ext.grid.locking.RowSynchronizer,z,x;if(w&&B){v=w.length;C=B.length}if(v!==C){w=u.view.all.slice();B=u.view.lockingPartner.all.slice();v=C=w.length}for(z=0;z<v;z++){t[z]=x=new y(u.view,w[z]);x.measure()}for(z=0;z<C;z++){A[z]=x=new y(u.view.lockingPartner,B[z]);x.measure()}for(z=0;z<v;z++){t[z].finish(A[z]);A[z].finish(t[z])}u.syncRowHeightsFinish()},syncRowHeightsFinish:function(){var l=this,n=l.view,m=n.lockingPartner.bufferedRenderer;if(n.componentLayoutCounter){delete l.rowHeight;l.refreshSize();if(m.rowHeight!==l.rowHeight){delete m.rowHeight;m.refreshSize()}}l.bodyHeight=m.bodyHeight=n.body.dom.offsetHeight},setBodyTop:function(p){var o=this,s=o.view,u=s.all,q=o.store,t=s.body;if(!t.dom){return}o.translateBody(t,p);if(o.variableRowHeight){o.bodyHeight=t.dom.offsetHeight;if(u.endIndex===q.getCount()-1){o.scrollHeight=p+o.bodyHeight-1}else{o.scrollHeight=o.getScrollHeight()}o.stretchView(s,o.scrollHeight)}else{o.bodyHeight=u.getCount()*o.rowHeight}},translateBody:function(l,g){l.translate(null,this.bodyTop=g)},getFirstVisibleRowIndex:function(G,B,C,y){var x=this,w=x.view,E=w.all,D=E.elements,A=x.viewClientHeight,z,F,v=x.bodyTop;if(E.getCount()&&x.variableRowHeight){if(!arguments.length){G=E.startIndex;B=E.endIndex;C=x.scrollTop;y=C+A;if(v>y||v+x.bodyHeight<C){x.teleported=true;return Math.floor(x.scrollTop/x.rowHeight)}z=G+Math.min(x.numFromEdge+((x.lastScrollDirection===-1)?x.leadingBufferZone:x.trailingBufferZone),Math.floor((B-G)/2))}else{if(G===B){return B}z=G+Math.floor((B-G)/2)}F=v+D[z].offsetTop;if(F+D[z].offsetHeight<=C){return x.getFirstVisibleRowIndex(z+1,B,C,y)}if(F<=C){return z}else{if(z!==G){return x.getFirstVisibleRowIndex(G,z-1,C,y)}}}return Math.floor(x.scrollTop/x.rowHeight)},getLastVisibleRowIndex:function(H,C,D,z){var x=this,w=x.view,F=w.all,E=F.elements,B=x.viewClientHeight,A,G,y,I=x.bodyTop;if(F.getCount()&&x.variableRowHeight){if(!arguments.length){H=F.startIndex;C=F.endIndex;D=x.scrollTop;z=D+B;if(I>z||I+x.bodyHeight<D){x.teleported=true;return Math.floor(x.scrollTop/x.rowHeight)+Math.ceil(B/x.rowHeight)}A=C-Math.min(x.numFromEdge+((x.lastScrollDirection===1)?x.leadingBufferZone:x.trailingBufferZone),Math.floor((C-H)/2))}else{if(H===C){return C}A=H+Math.floor((C-H)/2)}G=I+E[A].offsetTop;if(G>z){return x.getLastVisibleRowIndex(H,A-1,D,z)}y=G+E[A].offsetHeight;if(y>=z){return A}else{if(A!==C){return x.getLastVisibleRowIndex(A+1,C,D,z)}}}return x.getFirstVisibleRowIndex()+Math.ceil(B/x.rowHeight)},getScrollHeight:function(){var z=this,x=z.view,t=x.all,w=z.store,C=w.getCount(),y=t.getCount(),u,A,B,v;if(!C){return 0}if(!z.hasOwnProperty("rowHeight")){if(y){if(z.variableRowHeight){z.rowHeight=Math.floor(z.bodyHeight/y)}else{u=t.first();A=u.getHeight();if(Ext.isIE8){B=u.getBorderWidth("b");if(B>0){A-=B}}z.rowHeight=A}}else{delete z.rowHeight}}if(z.variableRowHeight){if(t.endIndex===C-1){v=z.bodyTop+z.bodyHeight-1}else{v=Math.floor((C-y)*z.rowHeight)+z.bodyHeight;v+=z.bodyTop-t.startIndex*z.rowHeight}}else{v=Math.floor(C*z.rowHeight)}return(z.scrollHeight=v)},attemptLoad:function(m,p,n){var o=this;if(o.scrollToLoadBuffer){if(!o.loadTask){o.loadTask=new Ext.util.DelayedTask()}o.loadTask.delay(o.scrollToLoadBuffer,o.doAttemptLoad,o,[m,p,n])}else{o.doAttemptLoad(m,p,n)}},cancelLoad:function(){if(this.loadTask){this.loadTask.cancel()}},doAttemptLoad:function(m,p,n){var o=this;if(!o.destroyed){o.store.getRange(m,p,{loadId:++o.loadId,callback:function(l,f,e,g){if(g.loadId===o.loadId&&o.scrollTop===n){o.onRangeFetched(l,f,e,g)}},fireEvent:false})}},destroy:function(){var g=this,l=g.view;g.cancelLoad();if(l&&l.el){l.un("scroll",g.onViewScroll,g)}if(g.store){g.unbindStore()}Ext.destroy(g.viewListeners,g.stretcher,g.gridListeners,g.scrollListeners);Ext.plugin.Abstract.prototype.destroy.call(this)}},0,0,0,0,["plugin.bufferedrenderer"],0,[Ext.grid.plugin,"BufferedRenderer"],0));(Ext.cmd.derive("Ext.grid.plugin.Editing",Ext.plugin.Abstract,{clicksToEdit:2,triggerEvent:undefined,relayedEvents:["beforeedit","edit","validateedit","canceledit"],defaultFieldUI:"default",defaultFieldXType:"textfield",editStyle:"",constructor:function(l){var g=this;Ext.plugin.Abstract.prototype.constructor.call(this,l);g.mixins.observable.constructor.call(g);g.on("edit",function(f,e){g.fireEvent("afteredit",f,e)})},init:function(n){var m=this,l=n.ownerLockable;m.grid=n;m.view=n.view;m.initEvents();if(n.rendered){m.setup()}else{m.mon(n,{beforereconfigure:m.onBeforeReconfigure,reconfigure:m.onReconfigure,scope:m,beforerender:{fn:m.onBeforeRender,single:true,scope:m}})}n.editorEventRelayers=n.relayEvents(m,m.relayedEvents);if(l){l.editorEventRelayers=l.relayEvents(m,m.relayedEvents)}n.isEditable=true;n.editingPlugin=n.view.editingPlugin=m},onBeforeReconfigure:function(){this.reconfiguring=true},onReconfigure:function(){this.setup();delete this.reconfiguring},onBeforeRender:function(){this.setup()},setup:function(){this.initFieldAccessors(this.grid.getTopLevelColumnManager().getColumns())},destroy:function(){var g=this,l=g.grid;Ext.destroy(g.keyNav);g.clearListeners();if(l){if(l.ownerLockable){Ext.destroy(l.ownerLockable.editorEventRelayers);l.ownerLockable.editorEventRelayers=null}Ext.destroy(l.editorEventRelayers);l.editorEventRelayers=null;l.editingPlugin=l.view.editingPlugin=null}Ext.plugin.Abstract.prototype.destroy.call(this)},getEditStyle:function(){return this.editStyle},initFieldAccessors:function(t){if(t.isGroupHeader){t=t.getGridColumns()}else{if(!Ext.isArray(t)){t=[t]}}var y=this,w,x=t.length,u=function(f,e){return y.getColumnField(this,e)},v=function(){return y.hasColumnField(this)},q=function(e){y.setColumnField(this,e)},s;for(w=0;w<x;w++){s=t[w];if(!s.getEditor){s.getEditor=u}if(!s.hasEditor){s.hasEditor=v}if(!s.setEditor){s.setEditor=q}}},removeFieldAccessors:function(p){if(p.isGroupHeader){p=p.getGridColumns()}else{if(!Ext.isArray(p)){p=[p]}}var m,n=p.length,o;for(m=0;m<n;m++){o=p[m];o.getEditor=o.hasEditor=o.setEditor=o.field=o.editor=null}},getColumnField:function(n,p){var o=this,m=n.field;if(!(m&&m.isFormField)){m=n.field=o.createColumnField(n,p)}if(m&&m.ui==="default"&&!m.hasOwnProperty("ui")){m.ui=o.defaultFieldUI}return m},hasColumnField:function(f){return !!(f.field&&f.field.isComponent)},setColumnField:function(l,g){l.field=g;l.field=this.createColumnField(l)},createColumnField:function(n,p){var m=n.field,o;if(!m&&n.editor){m=n.editor=Ext.clone(n.editor);if(m.field){m=m.field;m.editorCfg=n.editor;delete m.editorCfg.field}n.editor=null}if(!m&&p){m=p}if(m){o=n.dataIndex;if(m.isComponent){m.column=n}else{if(Ext.isString(m)){m={name:o,xtype:m,column:n}}else{m=Ext.apply({name:o,column:n},m)}m=Ext.ComponentManager.create(m,this.defaultFieldXType)}m.dataIndex=o;m.isEditorComponent=true;n.field=m}return m},initEvents:function(){var f=this;f.initEditTriggers();f.initCancelTriggers()},initCancelTriggers:Ext.emptyFn,initEditTriggers:function(){var g=this,l=g.view;if(g.triggerEvent==="cellfocus"){g.mon(l,"cellfocus",g.onCellFocus,g)}else{if(g.triggerEvent==="rowfocus"){g.mon(l,"rowfocus",g.onRowFocus,g)}else{if(l.getSelectionModel().isCellModel){l.onCellFocus=g.beforeViewCellFocus.bind(g)}g.mon(l,g.triggerEvent||("cell"+(g.clicksToEdit===1?"click":"dblclick")),g.onCellClick,g)}}g.initAddRemoveHeaderEvents();g.view.getNavigationModel().addKeyBindings({esc:g.onEscKey,scope:g})},beforeViewCellFocus:function(f){if(this.view.selModel.keyNavigation||!this.editing||!this.isCellEditable||!this.isCellEditable(f.row,f.columnHeader)){this.view.focusCell.apply(this.view,arguments)}},onRowFocus:function(n,l,m){this.startEdit(l,0)},onCellFocus:function(l,m,n){this.startEdit(n.row,n.column)},onCellClick:function(e,G,z,y,D,C,w){var E=e.ownerGrid,A=e.expanderSelector,B=e.ownerCt.getColumnManager().getHeaderAtIndex(z),x=B.getEditor(y),F;if(this.shouldStartEdit(x)&&(!A||!w.getTarget(A))){E.setActionableMode(true,w.position)}else{if(E.actionableMode&&e.owns(w.target)&&(F=Ext.Component.fromElement(w.target,G)&&F.focusable)){return}else{if(E.actionableMode){E.setActionableMode(false)}}}},initAddRemoveHeaderEvents:function(){var l=this,g=l.grid.headerCt;l.mon(g,{scope:l,add:l.onColumnAdd,columnmove:l.onColumnMove,beforedestroy:l.beforeGridHeaderDestroy})},onColumnAdd:function(l,g){this.initFieldAccessors(g)},onColumnMove:Ext.emptyFn,onEscKey:function(e){if(this.editing){var l=Ext.getCmp(e.getTarget().getAttribute("componentId"));if(!(l&&l.isPickerField&&l.isExpanded)){return this.cancelEdit()}}},beforeEdit:Ext.emptyFn,shouldStartEdit:function(f){return !!f},getEditingContext:function(y,A){var w=this,C=w.grid,x=C.visibleColumnManager,v,u,B,z,D,E=w.grid.lockable?w.grid:w.view;if(!E.componentLayoutCounter){E.on({boxready:Ext.Function.bind(w.startEdit,w,[y,A]),single:true});return}if(w.disabled||w.grid.collapsed||!w.grid.view.isVisible(true)){return}if(Ext.isNumber(A)){A=x.getHeaderAtIndex(Math.min(A,x.getColumns().length))}if(!A){return}if(A.hidden){A=A.next(":not([hidden])")||A.prev(":not([hidden])")}v=A.getView();C=v.ownerCt;if(Ext.isNumber(y)){B=Math.min(y,v.dataSource.getCount()-1);y=v.dataSource.getAt(B)}else{B=v.dataSource.indexOf(y)}C.ensureVisible(y,{column:A});u=v.getRow(y);if(!u){return}z=v.getVisibleColumnManager().indexOf(A);if(!y){return}D=new Ext.grid.CellContext(v).setAll(v,B,z,y,A);D.grid=C;D.store=v.dataSource;D.field=A.dataIndex;D.value=D.originalValue=y.get(A.dataIndex);D.row=u;D.node=v.getNode(y);D.cell=D.getCell(true);return D},cancelEdit:function(){var f=this;f.editing=false;f.fireEvent("canceledit",f,f.context)},completeEdit:function(){var f=this;if(f.editing&&f.validateEdit()){f.fireEvent("edit",f,f.context)}f.context=null;f.editing=false},validateEdit:function(l){var g=this;return g.fireEvent("validateedit",g,l)!==false&&!l.cancel}},1,0,0,0,["editing.editing"],[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.grid.plugin,"Editing"],0));(Ext.cmd.derive("Ext.grid.plugin.CellEditing",Ext.grid.plugin.Editing,{init:function(l){var g=this;l.registerActionable(g);Ext.grid.plugin.Editing.prototype.init.apply(this,arguments);g.editors=new Ext.util.MixedCollection(false,function(e){return e.editorId})},beforeGridHeaderDestroy:function(v){var w=this,s=w.grid.getColumnManager().getColumns(),u=s.length,t,p,q;for(t=0;t<u;t++){p=s[t];q=w.editors.getByKey(p.getItemId());if(!q){q=p.editor||p.field}Ext.destroy(q);w.removeFieldAccessors(p)}},onReconfigure:function(l,n,m){if(m){this.editors.clear()}Ext.grid.plugin.Editing.prototype.onReconfigure.call(this)},destroy:function(){var f=this;if(f.editors){f.editors.each(Ext.destroy,Ext);f.editors.clear()}Ext.grid.plugin.Editing.prototype.destroy.call(this)},initCancelTriggers:function(){var g=this,l=g.grid;g.mon(l,{columnresize:g.cancelEdit,columnmove:g.cancelEdit,scope:g})},isCellEditable:function(p,m){var n=this,o=n.getEditingContext(p,m);if(o.view.isVisible(true)&&o){m=o.column;p=o.record;if(m&&n.getEditor(p,m)){return true}}},activateCell:function(p,D,E){var J=this,z=p.record,A=p.column,B,I,H,e,G=J.getActiveEditor(),C,F;B=J.getEditingContext(z,A);if(!B||!A.getEditor(z)){return}if(G&&G.editing){J.view.actionPosition=null;I=B.generation;if(G.completeEdit()===false){return}if(B.generation===I){B.refresh()}}if(!D){I=B.generation;if(J.beforeEdit(B)===false||J.fireEvent("beforeedit",J,B)===false||B.cancel){return}if(B.generation===I){B.refresh()}}e=J.getEditor(z,A);if(B.cell!==B.getCell(true)){B=J.getEditingContext(B.rowIdx,B.colIdx);p.setPosition(B)}if(e){H=Ext.get(B.cell);if(!e.rendered){e.hidden=true;e.render(H)}else{C=e.el.dom.parentNode;if(C!==H.dom){try{C.removeChild(e.el.dom)}catch(K){}e.container=H;H.dom.appendChild(e.el.dom,H.dom.firstChild)}}F=B.record.get(B.column.dataIndex);if(F!==B.originalValue){B.value=B.originalValue=F}J.setEditingContext(B);e.startEdit(H,B.value,E||false);if(e.editing){J.setActiveEditor(e);J.setActiveRecord(B.record);J.setActiveColumn(B.column);J.editing=true;J.scroll=p.view.el.getScroll()}return e.editing}},activateRow:Ext.emptyFn,deactivate:function(){var u=this,q=u.context,o=u.editors.items,t=o.length,p,s;for(s=0;s<t;s++){p=o[s];if(q.view.renderingRows){if(p.editing){u.cancelEdit()}p.cacheElement()}}},suspend:function(){var g=this,l=g.activeEditor;if(l&&l.editing){g.suspendedEditor=l;g.suspendEvents();l.suspendEvents();l.cancelEdit(true);l.resumeEvents();g.resumeEvents()}},resume:function(o){var m=this,n=m.activeEditor=m.suspendedEditor,p;if(n){m.suspendEvents();n.suspendEvents();p=m.activateCell(o,true,true);n.resumeEvents();m.resumeEvents()}return p},startEdit:function(l,g){this.startEditByPosition(new Ext.grid.CellContext(this.view).setPosition(l,g))},completeEdit:function(l){var g=this.getActiveEditor();if(g){g.completeEdit(l)}},setEditingContext:function(f){this.context=f},setActiveEditor:function(f){this.activeEditor=f},getActiveEditor:function(){return this.activeEditor},setActiveColumn:function(f){this.activeColumn=f},getActiveColumn:function(){return this.activeColumn},setActiveRecord:function(f){this.activeRecord=f},getActiveRecord:function(){return this.activeRecord},getEditor:function(t,p){var u=this,o=u.editors,q=p.getItemId(),s=o.getByKey(q);if(!s){s=p.getEditor(t);if(!s){return false}if(!(s instanceof Ext.grid.CellEditor)){s=new Ext.grid.CellEditor(Ext.apply({floating:true,editorId:q,field:s},s.editorCfg))}s.field.excludeForm=true;if(s.column!==p){s.column=p;p.on("removed",u.onColumnRemoved,u)}o.add(s)}s.ownerCmp=u.grid.ownerGrid;if(p.isTreeColumn){s.isForTree=p.isTreeColumn;s.addCls("x-tree-cell-editor")}s.setGrid(u.grid);s.editingPlugin=u;return s},onColumnRemoved:function(m){var l=this,n=l.context;if(n&&n.column===m){l.cancelEdit()}m.un("removed",l.onColumnRemoved,l)},setColumnField:function(m,l){var n=this.editors.getByKey(m.getItemId());Ext.destroy(n,m.field);this.editors.removeAtKey(m.getItemId());Ext.grid.plugin.Editing.prototype.setColumnField.apply(this,arguments)},getCell:function(l,g){return this.grid.getView().getCell(l,g)},onEditComplete:function(q,v,s){var w=this,p=q.context,t,u;t=p.view;u=p.record;p.value=v;if(!u.isEqual(v,s)){u.set(p.column.dataIndex,v);p.rowIdx=t.indexOf(u)}if(w.context===p){w.setActiveEditor(null);w.setActiveColumn(null);w.setActiveRecord(null);w.editing=false}w.fireEvent("edit",w,p)},cancelEdit:function(l){var m=this,n=m.context;if(l&&l.isCellEditor){m.context.value=("editedValue" in l)?l.editedValue:l.getValue();Ext.grid.plugin.Editing.prototype.cancelEdit.apply(this,arguments);if(l.context===n){m.setActiveEditor(null);m.setActiveColumn(null);m.setActiveRecord(null)}else{m.editing=true}}else{l=m.getActiveEditor();if(l&&l.field){l.cancelEdit()}}},startEditByPosition:function(q){var n=this,s=n.grid.getColumnManager(),p,o=n.getActiveEditor();if(!q.isCellContext){q=new Ext.grid.CellContext(n.view).setPosition(q.row,n.grid.getColumnManager().getColumns()[q.column])}p=s.getHeaderIndex(q.column);q.column=s.getVisibleHeaderClosestToIndex(p);if(n.grid.actionableMode){if(n.editing&&q.isEqual(n.context)){return}if(o){o.completeEdit()}}if(n.grid.actionableMode){if(n.activateCell(q)){n.activateRow(n.view.all.item(q.rowIdx,true));o=n.getEditor(q.record,q.column);if(o){o.field.focus()}}}else{return n.grid.setActionableMode(true,q)}}},0,0,0,0,["plugin.cellediting"],0,[Ext.grid.plugin,"CellEditing"],0));(Ext.cmd.derive("Ext.grid.plugin.DragDrop",Ext.plugin.Abstract,{dragText:"{0} selected row{1}",ddGroup:"GridDD",enableDrop:true,enableDrag:true,containerScroll:false,init:function(f){Ext.applyIf(f,{copy:this.copy,allowCopy:this.allowCopy});f.on("render",this.onViewRender,this,{single:true})},destroy:function(){var f=this;f.dragZone=f.dropZone=Ext.destroy(f.dragZone,f.dropZone);Ext.plugin.Abstract.prototype.destroy.call(this)},enable:function(){var f=this;if(f.dragZone){f.dragZone.unlock()}if(f.dropZone){f.dropZone.unlock()}(arguments.callee.$previous||Ext.plugin.Abstract.prototype.enable).call(this)},disable:function(){var f=this;if(f.dragZone){f.dragZone.lock()}if(f.dropZone){f.dropZone.lock()}(arguments.callee.$previous||Ext.plugin.Abstract.prototype.disable).call(this)},onViewRender:function(p){var o=this,n=p.ownerCt.ownerGrid||p.ownerCt,m;n.relayEvents(p,["beforedrop","drop"]);if(o.enableDrag){if(o.containerScroll){m=p.getEl()}o.dragZone=new Ext.view.DragZone(Ext.apply({view:p,ddGroup:o.dragGroup||o.ddGroup,dragText:o.dragText,containerScroll:o.containerScroll,scrollEl:m},o.dragZone))}if(o.enableDrop){o.dropZone=new Ext.grid.ViewDropZone(Ext.apply({view:p,ddGroup:o.dropGroup||o.ddGroup},o.dropZone))}}},0,0,0,0,["plugin.gridviewdragdrop"],0,[Ext.grid.plugin,"DragDrop"],0));(Ext.cmd.derive("Ext.util.Queue",Ext.Base,{constructor:function(){this.clear()},add:function(n,q){var p=this,s=p.getKey(n),o;if(!(o=p.map[s])){++p.length;p.items.push(n);p.map[s]=n}else{if(q){p.map[s]=n;p.items[Ext.Array.indexOf(p.items,o)]=n}}return n},clear:function(){var g=this,l=g.items;g.items=[];g.map={};g.length=0;return l},contains:function(g){var l=this.getKey(g);return this.map.hasOwnProperty(l)},getCount:function(){return this.length},getKey:function(f){return f.id},remove:function(n){var o=this,p=o.getKey(n),s=o.items,q;if(o.map[p]){q=Ext.Array.indexOf(s,n);Ext.Array.erase(s,q,1);delete o.map[p];--o.length}return n}},1,0,0,0,0,0,[Ext.util,"Queue"],0));(Ext.cmd.derive("Ext.layout.ContextItem",Ext.Base,{heightModel:null,widthModel:null,sizeModel:null,optOut:false,ownerSizePolicy:null,boxChildren:null,boxParent:null,children:[],dirty:null,dirtyCount:0,hasRawContent:true,isContextItem:true,isTopLevel:false,consumersContentHeight:0,consumersContentWidth:0,consumersContainerHeight:0,consumersContainerWidth:0,consumersHeight:0,consumersWidth:0,ownerCtContext:null,remainingChildDimensions:0,props:null,state:null,wrapsComponent:false,constructor:function(C){var M=this,E=Ext.layout.SizeModel.sizeModels,J=E.configured,L=E.shrinkWrap,T,D,G,H,P,R,K,Q,F,I,S,N,O,U;Ext.apply(M,C);K=M.target;T=M.el;M.id=K.id;M.flushedProps={};M.props=P={};M.styles={};if(!K.isComponent){D=T.lastBox}else{M.wrapsComponent=true;M.framing=K.frameSize||null;M.isComponentChild=K.ownerLayout&&K.ownerLayout.isComponentLayout;D=K.lastBox;G=K.ownerCt;if(G&&(H=G.el&&M.context.items[G.el.id])){M.ownerCtContext=H}M.sizeModel=R=K.getSizeModel(H&&H.widthModel.pairsByHeightOrdinal[H.heightModel.ordinal]);M.widthModel=N=R.width;M.heightModel=O=R.height;if(D&&D.invalid===false){I=(K.width===(Q=D.width));S=(K.height===(F=D.height));if(N===L&&O===L){U=true}else{if(N===J&&I){U=O===L||(O===J&&S)}}if(U){M.optOut=true;P.width=Q;P.height=F}}}M.lastBox=D},init:function(O,U){var P=this,W=P.props,T=P.dirty,J=P.ownerCtContext,G=P.target.ownerLayout,Q=!P.state,N=O||Q,S,H,I,F,V,M,L=P.heightModel,R=P.widthModel,K,E,n=0;P.dirty=P.invalid=false;P.props={};P.remainingChildDimensions=0;if(P.boxChildren){P.boxChildren.length=0}if(!Q){P.clearAllBlocks("blocks");P.clearAllBlocks("domBlocks")}if(!P.wrapsComponent){return N}M=P.target;P.state={};if(Q){if(M.beforeLayout&&M.beforeLayout!==Ext.emptyFn){M.beforeLayout()}if(!J&&(F=M.ownerCt)){J=P.context.items[F.el.id]}if(J){P.ownerCtContext=J;P.isBoxParent=G&&G.isItemBoxParent(P)}else{P.isTopLevel=true}P.frameBodyContext=P.getEl("frameBody")}else{J=P.ownerCtContext;P.isTopLevel=!J;S=P.children;for(H=0,I=S.length;H<I;++H){S[H].init(true)}}P.hasRawContent=!(M.isContainer&&M.items.items.length>0);if(O){P.widthModel=P.heightModel=null;V=M.getSizeModel(J&&J.widthModel.pairsByHeightOrdinal[J.heightModel.ordinal]);if(Q){P.sizeModel=V}P.widthModel=V.width;P.heightModel=V.height;if(J&&!P.isComponentChild){if(G.needsItemSize||!M.liquidLayout){J.remainingChildDimensions+=2}else{if(P.widthModel.calculated){++J.remainingChildDimensions}if(P.heightModel.calculated){++J.remainingChildDimensions}}}}else{if(W){P.recoverProp("x",W,T);P.recoverProp("y",W,T);if(P.widthModel.calculated){P.recoverProp("width",W,T)}else{if("width" in W){++n}}if(P.heightModel.calculated){P.recoverProp("height",W,T)}else{if("height" in W){++n}}if(J&&!P.isComponentChild){J.remainingChildDimensions+=n}}}if(W&&G&&G.manageMargins){P.recoverProp("margin-top",W,T);P.recoverProp("margin-right",W,T);P.recoverProp("margin-bottom",W,T);P.recoverProp("margin-left",W,T)}if(U){K=U.heightModel;E=U.widthModel;if(E&&K&&R&&L){if(R.shrinkWrap&&L.shrinkWrap){if(E.constrainedMax&&K.constrainedMin){K=null}}}if(E){P.widthModel=E}if(K){P.heightModel=K}if(U.state){Ext.apply(P.state,U.state)}}return N},initContinue:function(p){var v=this,q=v.ownerCtContext,u=v.target,s=v.widthModel,w=u.getInherited(),t;if(s.fixed){w.inShrinkWrapTable=false}else{delete w.inShrinkWrapTable}if(p){if(q&&s.shrinkWrap){t=q.isBoxParent?q:q.boxParent;if(t){t.addBoxChild(v)}}else{if(s.natural){v.boxParent=q}}}return p},initDone:function(m){var o=this,p=o.props,n=o.state;if(o.remainingChildDimensions===0){p.containerChildrenSizeDone=true}if(m){p.containerLayoutDone=true}if(o.boxChildren&&o.boxChildren.length&&o.widthModel.shrinkWrap){o.el.setWidth(10000);n.blocks=(n.blocks||0)+1}},initAnimation:function(){var m=this,l=m.target,n=m.ownerCtContext;if(n&&n.isTopLevel){m.animatePolicy=l.ownerLayout.getAnimatePolicy(m)}else{if(!n&&l.isCollapsingOrExpanding&&l.animCollapse){m.animatePolicy=l.componentLayout.getAnimatePolicy(m)}}if(m.animatePolicy){m.context.queueAnimation(m)}},addBlock:function(s,p,o){var q=this,u=q[s]||(q[s]={}),t=u[o]||(u[o]={});if(!t[p.id]){t[p.id]=p;++p.blockCount;++q.context.blockCount}},addBoxChild:function(m){var n=this,o,p=m.widthModel;m.boxParent=this;m.measuresBox=p.shrinkWrap?m.hasRawContent:p.natural;if(m.measuresBox){o=n.boxChildren;if(o){o.push(m)}else{n.boxChildren=[m]}}},addPositionStyles:function(o,q){var s=q.x,n=q.y,p=0;if(s!==undefined){o.left=s+"px";++p}if(n!==undefined){o.top=n+"px";++p}return p},addTrigger:function(y,x){var q=this,w=x?"domTriggers":"triggers",v=q[w]||(q[w]={}),u=q.context,s=u.currentLayout,t=v[y]||(v[y]={});if(!t[s.id]){t[s.id]=s;++s.triggerCount;t=u.triggers[x?"dom":"data"];(t[s.id]||(t[s.id]=[])).push({item:this,prop:y});if(q.props[y]!==undefined){if(!x||!(q.dirty&&(y in q.dirty))){++s.firedTriggers}}}},boxChildMeasured:function(){var m=this,l=m.state,n=(l.boxesMeasured=(l.boxesMeasured||0)+1);if(n===m.boxChildren.length){l.clearBoxWidth=1;++m.context.progressCount;m.markDirty()}},borderNames:["border-top-width","border-right-width","border-bottom-width","border-left-width"],marginNames:["margin-top","margin-right","margin-bottom","margin-left"],paddingNames:["padding-top","padding-right","padding-bottom","padding-left"],trblNames:["top","right","bottom","left"],cacheMissHandlers:{borderInfo:function(l){var g=l.getStyles(l.borderNames,l.trblNames);g.width=g.left+g.right;g.height=g.top+g.bottom;return g},marginInfo:function(l){var g=l.getStyles(l.marginNames,l.trblNames);g.width=g.left+g.right;g.height=g.top+g.bottom;return g},paddingInfo:function(m){var n=m.frameBodyContext||m,l=n.getStyles(m.paddingNames,m.trblNames);l.width=l.left+l.right;l.height=l.top+l.bottom;return l}},checkCache:function(f){return this.cacheMissHandlers[f](this)},clearAllBlocks:function(n){var l=this[n],m;if(l){for(m in l){this.clearBlocks(n,m)}}},clearBlocks:function(s,w){var v=this[s],t=v&&v[w],q,p,u;if(t){delete v[w];q=this.context;for(u in t){p=t[u];--q.blockCount;if(!--p.blockCount&&!p.pending&&!p.done){q.queueLayout(p)}}}},block:function(l,g){this.addBlock("blocks",l,g)},domBlock:function(l,g){this.addBlock("domBlocks",l,g)},fireTriggers:function(t,w){var v=this[t],q=v&&v[w],s=this.context,p,u;if(q){for(u in q){p=q[u];++p.firedTriggers;if(!p.done&&!p.blockCount&&!p.pending){s.queueLayout(p)}}}},flush:function(){var o=this,p=o.dirty,n=o.state,m=o.el;o.dirtyCount=0;if("attributes" in o){m.set(o.attributes);delete o.attributes}if("innerHTML" in o){m.innerHTML=o.innerHTML;delete o.innerHTML}if(n&&n.clearBoxWidth){n.clearBoxWidth=0;o.el.setStyle("width",null);if(!--n.blocks){o.context.queueItemLayouts(o)}}if(p){delete o.dirty;o.writeProps(p,true)}},flushAnimations:function(){var F=this,C=F.previousSize,I,G,A,y,z,B,x,H,w,E,D;if(C){I=F.target;G=I.getAnimationProps();A=G.duration;y=Ext.Object.getKeys(F.animatePolicy);z=Ext.apply({},{from:{},to:{},duration:A||Ext.fx.Anim.prototype.duration},G);for(B=0,x=0,H=y.length;x<H;x++){w=y[x];E=C[w];D=F.peek(w);if(E!==D&&D!=null){w=F.translateProps[w]||w;z.from[w]=E;z.to[w]=D;++B}}if(B){if(F.isCollapsingOrExpanding===1){I.componentLayout.undoLayout(F)}else{F.writeProps(z.from)}F.el.animate(z);z=Ext.fx.Manager.getFxQueue(F.el.id)[0];I.$layoutAnim=z;z.on({afteranimate:function(){delete I.$layoutAnim;if(I.destroying||I.destroyed){return}if(F.isCollapsingOrExpanding===1){I.componentLayout.redoLayout(F);I.afterCollapse(true)}else{if(F.isCollapsingOrExpanding===2){I.afterExpand(true)}}if(I.hasListeners.afterlayoutanimation){I.fireEvent("afterlayoutanimation",I)}}})}else{if(F.isCollapsingOrExpanding===2){I.afterExpand(true)}}}},getBorderInfo:function(){var l=this,g=l.borderInfo;if(!g){l.borderInfo=g=l.checkCache("borderInfo")}return g},getEl:function(q,t){var o=this,u,p,s;if(q){if(q.dom){p=q}else{u=o.target;if(t){u=t}p=u[q];if(typeof p==="function"){p=p.call(u);if(p===o.el){return this}}}if(p){s=o.context.getEl(o,p)}}return s||null},getFrameInfo:function(){var n=this,m=n.frameInfo,o,p;if(!m){o=n.framing;p=n.getBorderInfo();n.frameInfo=m=o?{top:o.top+p.top,right:o.right+p.right,bottom:o.bottom+p.bottom,left:o.left+p.left,width:o.width+p.width,height:o.height+p.height}:p}return m},getMarginInfo:function(){var p=this,u=p.marginInfo,s,t,o,q;if(!u){if(!p.wrapsComponent){u=p.checkCache("marginInfo")}else{s=p.target;o=s.ownerLayout;q=o?o.id:null;t=o&&o.manageMargins;u=s.margin$;if(u&&u.ownerId!==q){u=null}if(!u){u=p.parseMargins(s,s.margin)||p.checkCache("marginInfo");if(t){p.setProp("margin-top",0);p.setProp("margin-right",0);p.setProp("margin-bottom",0);p.setProp("margin-left",0)}u.ownerId=q;s.margin$=u}u.width=u.left+u.right;u.height=u.top+u.bottom}p.marginInfo=u}return u},clearMarginCache:function(){delete this.marginInfo;delete this.target.margin$},getPaddingInfo:function(){var l=this,g=l.paddingInfo;if(!g){l.paddingInfo=g=l.checkCache("paddingInfo")}return g},getProp:function(l){var m=this,n=m.props[l];m.addTrigger(l);return n},getDomProp:function(l){var m=this,n=(m.dirty&&(l in m.dirty))?undefined:m.props[l];m.addTrigger(l,true);return n},getStyle:function(s){var p=this,q=p.styles,n,o;if(s in q){o=q[s]}else{n=p.styleInfo[s];o=p.el.getStyle(s);if(n&&n.parseInt){o=parseInt(o,10)||0}q[s]=o}return o},getStyles:function(I,E){var K=this,B=K.styles,H={},A=0,C=I.length,M,n,L,F,D,z,G,J;E=E||I;for(M=0;M<C;++M){F=I[M];if(F in B){H[E[M]]=B[F];++A;if(M&&A===1){n=I.slice(0,M);L=E.slice(0,M)}}else{if(A){(n||(n=[])).push(F);(L||(L=[])).push(E[M])}}}if(A<C){n=n||I;L=L||E;z=K.styleInfo;G=K.el.getStyle(n);for(M=n.length;M--;){F=n[M];D=z[F];J=G[F];if(D&&D.parseInt){J=parseInt(J,10)||0}H[L[M]]=J;B[F]=J}}return H},hasProp:function(f){return this.getProp(f)!=null},hasDomProp:function(f){return this.getDomProp(f)!=null},invalidate:function(f){this.context.queueInvalidate(this,f)},markDirty:function(){if(++this.dirtyCount===1){this.context.queueFlush(this)}},onBoxMeasured:function(){var l=this.boxParent,g=this.state;if(l&&l.widthModel.shrinkWrap&&!g.boxMeasured&&this.measuresBox){g.boxMeasured=1;l.boxChildMeasured()}},parseMargins:function(p,m){if(m===true){m=5}var n=typeof m,o;if(n==="string"||n==="number"){o=p.parseBox(m)}else{if(m){o={top:0,right:0,bottom:0,left:0};if(m){m=Ext.apply(o,p.parseBox(m))}}}return o},peek:function(f){return this.props[f]},recalculateSizeModel:function(){var o=this,u=o.target,q=u.componentLayout,s=o.ownerCtContext,t=q.ownerContext,p;q.ownerContext=null;o.sizeModel=p=u.getSizeModel(s&&s.widthModel.pairsByHeightOrdinal[s.heightModel.ordinal]);o.widthModel=p.width;o.heightModel=p.height;if(t){q.ownerContext=o}},recoverProp:function(u,s,t){var o=this,p=o.props,q;if(u in s){p[u]=s[u];if(t&&u in t){q=o.dirty||(o.dirty={});q[u]=t[u]}}},redo:function(q){var n=this,p,s,o;n.revertProps(n.props);if(q&&n.wrapsComponent){if(n.childItems){for(o=0,p=n.childItems,s=p.length;o<s;o++){p[o].redo(q)}}for(o=0,p=n.children,s=p.length;o<s;o++){p[o].redo()}}},removeEl:function(q,s){var o=this,n,p;if(q){if(q.dom){p=q}else{n=o.target;if(s){n=s}p=n[q];if(typeof p==="function"){p=p.call(n);if(p===o.el){return this}}}if(p){o.context.removeEl(p,o)}}},revertProps:function(m){var p,o=this.flushedProps,n={};for(p in m){if(o.hasOwnProperty(p)){n[p]=m[p]}}this.writeProps(n)},setAttribute:function(n,l){var m=this;if(!m.attributes){m.attributes={}}m.attributes[n]=l;m.markDirty()},setBox:function(g){var l=this;if("left" in g){l.setProp("x",g.left)}if("top" in g){l.setProp("y",g.top)}l.setSize(g.width,g.height)},setContentHeight:function(l,g){if(!g&&this.hasRawContent){return 1}return this.setProp("contentHeight",l)},setContentWidth:function(g,l){if(!l&&this.hasRawContent){return 1}return this.setProp("contentWidth",g)},setContentSize:function(l,n,m){return this.setContentWidth(l,m)+this.setContentHeight(n,m)===2},setProp:function(p,q,t){var s=this,u=typeof q,o;if(u==="undefined"||(u==="number"&&isNaN(q))){return 0}if(s.props[p]===q){return 1}s.props[p]=q;++s.context.progressCount;if(t===false){s.fireTriggers("domTriggers",p);s.clearBlocks("domBlocks",p)}else{o=s.styleInfo[p];if(o){if(!s.dirty){s.dirty={}}s.dirty[p]=q;s.markDirty()}}s.fireTriggers("triggers",p);s.clearBlocks("blocks",p);return 1},setHeight:function(C,B){var w=this,y=w.target,z=w.ownerCtContext,v,x,A,t,u;if(C<0){C=0}if(!w.wrapsComponent){if(!w.setProp("height",C,B)){return NaN}}else{A=w.collapsedVert?0:(y.minHeight||0);C=Ext.Number.constrain(C,A,y.maxHeight);t=w.props.height;if(!w.setProp("height",C,B)){return NaN}if(z&&!w.isComponentChild&&isNaN(t)){u=--z.remainingChildDimensions;if(!u){z.setProp("containerChildrenSizeDone",true)}}v=w.frameBodyContext;if(v){x=w.getFrameInfo();v[w.el.vertical?"setWidth":"setHeight"](C-x.height,B)}}return C},setWidth:function(A,B){var u=this,w=u.target,x=u.ownerCtContext,t,v,y,z,C;if(A<0){A=0}if(!u.wrapsComponent){if(!u.setProp("width",A,B)){return NaN}}else{y=u.collapsedHorz?0:(w.minWidth||0);A=Ext.Number.constrain(A,y,w.maxWidth);z=u.props.width;if(!u.setProp("width",A,B)){return NaN}if(x&&!u.isComponentChild&&isNaN(z)){C=--x.remainingChildDimensions;if(!C){x.setProp("containerChildrenSizeDone",true)}}t=u.frameBodyContext;if(t){v=u.getFrameInfo();t.setWidth(A-v.width,B)}}return A},setSize:function(l,n,m){this.setWidth(l,m);this.setHeight(n,m)},translateProps:{x:"left",y:"top"},undo:function(q){var n=this,p,s,o;n.revertProps(n.lastBox);if(q&&n.wrapsComponent){if(n.childItems){for(o=0,p=n.childItems,s=p.length;o<s;o++){p[o].undo(q)}}for(o=0,p=n.children,s=p.length;o<s;o++){p[o].undo()}}},unsetProp:function(g){var l=this.dirty;delete this.props[g];if(l){delete l[g]}},writeProps:function(S,T){if(!(S&&typeof S==="object")){return}var M=this,U=M.el,P={},R=0,V=M.styleInfo,O,N,I,G=S.width,K=S.height,L=M.target,Q,W,H,F,E,J,D;if("displayed" in S){U.setDisplayed(S.displayed)}for(N in S){if(T){M.fireTriggers("domTriggers",N);M.clearBlocks("domBlocks",N);M.flushedProps[N]=1}O=V[N];if(O&&O.dom){if(O.suffix&&(I=parseInt(S[N],10))){P[N]=I+O.suffix}else{P[N]=S[N]}++R}}if("x" in S||"y" in S){if(L.isComponent){L.setPosition(S.x,S.y)}else{R+=M.addPositionStyles(P,S)}}if("overflowX" in S){D=L.getScrollable();if(D){D.setX(S.overflowX)}}if("overflowY" in S){if(D||(D=L.getScrollable())){D.setY(S.overflowY)}}if(M.wrapsComponent&&Ext.isIE9){if((Q=G!==undefined&&M.hasOverflowY)||(W=K!==undefined&&M.hasOverflowX)){H=M.isAbsolute;if(H===undefined){H=false;J=M.target.getTargetEl();E=J.getStyle("position");M.isAbsolute=H=(E==="absolute")}if(H){F=Ext.getScrollbarSize();if(Q){G=parseInt(G,10)+F.width;P.width=G+"px";++R}if(W){K=parseInt(K,10)+F.height;P.height=K+"px";++R}}}}if(R){U.setStyle(P)}}},1,0,0,0,0,0,[Ext.layout,"ContextItem"],function(){var l={dom:true,parseInt:true,suffix:"px"},m={dom:true},n={dom:false};this.prototype.styleInfo={containerChildrenSizeDone:n,containerLayoutDone:n,displayed:n,done:n,x:n,y:n,columnsChanged:n,rowHeights:n,viewOverflowY:n,overflowX:n,overflowY:n,left:l,top:l,right:l,bottom:l,width:l,height:l,"border-top-width":l,"border-right-width":l,"border-bottom-width":l,"border-left-width":l,"margin-top":l,"margin-right":l,"margin-bottom":l,"margin-left":l,"padding-top":l,"padding-right":l,"padding-bottom":l,"padding-left":l,"line-height":m,display:m,clear:m}}));(Ext.cmd.derive("Ext.layout.Context",Ext.Base,{remainingLayouts:0,state:0,cycleWatchDog:200,constructor:function(l){var g=this;Ext.apply(g,l);g.items={};g.layouts={};g.blockCount=0;g.cycleCount=0;g.flushCount=0;g.calcCount=0;g.animateQueue=g.newQueue();g.completionQueue=g.newQueue();g.finalizeQueue=g.newQueue();g.finishQueue=g.newQueue();g.flushQueue=g.newQueue();g.invalidateData={};g.layoutQueue=g.newQueue();g.invalidQueue=[];g.triggers={data:{},dom:{}}},callLayout:function(g,l){this.currentLayout=g;g[l](this.getCmp(g.owner))},cancelComponent:function(B,I,Q){var N=this,C=B,A=!B.isComponent,H=A?C.length:1,F,G,O,P,D,K,M,L,J,E;for(F=0;F<H;++F){if(A){B=C[F]}if(Q){if(B.ownerCt){E=this.items[B.ownerCt.el.id];if(E){Ext.Array.remove(E.childItems,N.getCmp(B))}}else{if(B.rendered){N.removeEl(B.el)}}}if(!I){M=N.invalidQueue;O=M.length;if(O){N.invalidQueue=K=[];for(G=0;G<O;++G){L=M[G];J=L.item.target;if(J!==B&&!J.up(B)){K.push(L)}}}}D=B.componentLayout;N.cancelLayout(D);if(!B.destroying){if(D.getLayoutItems){P=D.getLayoutItems();if(P.length){N.cancelComponent(P,true)}}if(B.isContainer&&!B.collapsed){D=B.layout;N.cancelLayout(D);P=D.getVisibleItems();if(P.length){N.cancelComponent(P,true)}}}}},cancelLayout:function(g){var l=this;l.completionQueue.remove(g);l.finalizeQueue.remove(g);l.finishQueue.remove(g);l.layoutQueue.remove(g);if(g.running){l.layoutDone(g)}g.ownerContext=null},clearTriggers:function(v,u){var A=v.id,w=this.triggers[u?"dom":"data"],t=w&&w[A],z=(t&&t.length)||0,x,s,y;for(x=0;x<z;++x){y=t[x];s=y.item;w=u?s.domTriggers:s.triggers;delete w[y.prop][A]}},flush:function(){var m=this,p=m.flushQueue.clear(),n=p.length,o;if(n){++m.flushCount;for(o=0;o<n;++o){p[o].flush()}}},flushAnimations:function(){var m=this,o=m.animateQueue.clear(),p=o.length,n;if(p){for(n=0;n<p;n++){if(o[n].target.animate!==false){o[n].flushAnimations()}}Ext.fx.Manager.runner()}},flushInvalidates:function(){var v=this,u=v.invalidQueue,w=u&&u.length,t,p,q,s;v.invalidQueue=[];if(w){p=[];for(s=0;s<w;++s){t=(q=u[s]).item.target;if(!t.container.isDetachedBody){p.push(t);if(q.options){v.invalidateData[t.id]=q.options}}}v.invalidate(p,null)}},flushLayouts:function(x,w,t){var y=this,v=t?y[x].items:y[x].clear(),q=v.length,u,s;if(q){for(u=0;u<q;++u){s=v[u];if(!s.running){y.callLayout(s,w)}}y.currentLayout=null}},getCmp:function(f){return this.getItem(f,f.el)},getEl:function(m,n){var l=this.getItem(n,n);if(!l.parent){l.parent=m;if(m.children.length){m.children.push(l)}else{m.children=[l]}}return l},getItem:function(o,q){var n=q.id,s=this.items,p=s[n]||(s[n]=new Ext.layout.ContextItem({context:this,target:o,el:q}));return p},handleFailure:function(){var l=this.layouts,m,n;Ext.failedLayouts=(Ext.failedLayouts||0)+1;for(n in l){m=l[n];if(l.hasOwnProperty(n)){m.running=false;m.ownerContext=null}}},invalidate:function(Q,O){var M=this,P=!Q.isComponent,G,L,I,D,A,K,N,H,C,B,E,F,J;for(D=0,H=P?Q.length:1;D<H;++D){A=P?Q[D]:Q;if(A.rendered&&!A.hidden){L=A.ownerLayout;C=A.componentLayout;J=false;if((!L||!L.needsItemSize)&&A.liquidLayout){J=true}if(!J||(L&&L.setsItemSize)){K=M.getCmp(A);I=!K.state;B=(A.isContainer&&!A.collapsed)?A.layout:null;E=M.invalidateData[K.id];delete M.invalidateData[K.id];F=K.init(O,E)}if(J){continue}if(E){M.processInvalidate(E,K,"before")}if(C.beforeLayoutCycle){C.beforeLayoutCycle(K)}if(B&&B.beforeLayoutCycle){B.beforeLayoutCycle(K)}F=K.initContinue(F);G=true;if(C.getLayoutItems){C.renderChildren();N=C.getLayoutItems();if(N.length){M.invalidate(N,true)}}if(B){G=false;B.renderChildren();if(B.needsItemSize||B.activeItemCount){N=B.getVisibleItems();if(N.length){M.invalidate(N,true)}}}K.initDone(G);M.resetLayout(C,K,I);if(B){M.resetLayout(B,K,I)}K.initAnimation();if(E){M.processInvalidate(E,K,"after")}}}M.currentLayout=null},isDescendant:function(n,m){if(n.isContainer){for(var l=m.ownerCt;l;l=l.ownerCt){if(l===n){return true}}}return false},layoutDone:function(l){var g=l.ownerContext;l.running=false;if(l.isComponentLayout){if(g.measuresBox){g.onBoxMeasured()}g.setProp("done",true)}else{g.setProp("containerLayoutDone",true)}--this.remainingLayouts;++this.progressCount},newQueue:function(){return new Ext.util.Queue()},processInvalidate:function(q,n,s){if(q[s]){var o=this,p=o.currentLayout;o.currentLayout=q.layout||null;q[s](n,q);o.currentLayout=p}},queueAnimation:function(f){this.animateQueue.add(f)},queueCompletion:function(f){this.completionQueue.add(f)},queueFinalize:function(f){this.finalizeQueue.add(f)},queueFlush:function(g,l){this.flushQueue.add(g,l)},chainFns:function(w,v,y){var s=this,t=w.layout,q=v.layout,u=w[y],x=v[y];return function(f){var e=s.currentLayout;if(u){s.currentLayout=t;u.call(w.scope||w,f,w)}s.currentLayout=q;x.call(v.scope||v,f,v);s.currentLayout=e}},purgeInvalidates:function(){var w=this,E=[],v=w.invalidQueue,y=v.length,u,D,z,A,B,x,C;for(u=0;u<y;++u){B=v[u];x=B.item.target;C=true;for(D=E.length;D--;){z=E[D];A=z.item.target;if(x.isLayoutChild(A)){C=false;break}if(A.isLayoutChild(x)){Ext.Array.erase(E,D,1)}}if(C){E.push(B)}}w.invalidQueue=E},queueInvalidate:function(E,D){var w=this,u=[],v=w.invalidQueue,x=v.length,z,B,y,C,A;if(E.isComponent){z=E;E=w.items[z.el.id];if(E){E.recalculateSizeModel()}else{E=w.getCmp(z)}}else{z=E.target}E.invalid=true;while(x--){B=v[x];y=B.item.target;if(!z.isFloating&&z.up(y)){return}if(y===z){if(!(C=B.options)){B.options=D}else{if(D){if(D.widthModel){C.widthModel=D.widthModel}if(D.heightModel){C.heightModel=D.heightModel}if(!(A=C.state)){C.state=D.state}else{if(D.state){Ext.apply(A,D.state)}}if(D.before){C.before=w.chainFns(C,D,"before")}if(D.after){C.after=w.chainFns(C,D,"after")}}}return}if(!y.isLayoutChild(z)){u.push(B)}}u.push({item:E,options:D});w.invalidQueue=u},queueItemLayouts:function(l){var n=l.isComponent?l:l.target,m=n.componentLayout;if(!m.pending&&!m.invalid&&!m.done){this.queueLayout(m)}m=n.layout;if(m&&!m.pending&&!m.invalid&&!m.done&&!n.collapsed){this.queueLayout(m)}},queueLayout:function(f){this.layoutQueue.add(f);f.pending=true},removeEl:function(o,p){var n=o.id,q=p?p.children:null,s=this.items;if(q){Ext.Array.remove(q,s[n])}delete s[n]},resetLayout:function(o,n,m){var p=this;p.currentLayout=o;o.done=false;o.pending=true;o.firedTriggers=0;p.layoutQueue.add(o);if(m){p.layouts[o.id]=o;o.running=true;if(o.finishedLayout){p.finishQueue.add(o)}++p.remainingLayouts;++o.layoutCount;o.ownerContext=n;o.beginCount=0;o.blockCount=0;o.calcCount=0;o.triggerCount=0;if(!o.initialized){o.initLayout()}o.beginLayout(n)}else{++o.beginCount;if(!o.running){++p.remainingLayouts;o.running=true;o.ownerContext=n;if(o.isComponentLayout){n.unsetProp("done")}p.completionQueue.remove(o);p.finalizeQueue.remove(o)}}o.beginLayoutCycle(n,m)},run:function(){var l=this,m=false,n=l.cycleWatchDog;l.purgeInvalidates();l.flushInvalidates();l.state=1;l.totalCount=l.layoutQueue.getCount();l.flush();while((l.remainingLayouts||l.invalidQueue.length)&&n--){if(l.invalidQueue.length){l.flushInvalidates()}if(l.runCycle()){m=false}else{if(!m){l.flush();m=true;l.flushLayouts("completionQueue","completeLayout")}else{if(!l.invalidQueue.length){l.state=2;break}}}if(!(l.remainingLayouts||l.invalidQueue.length)){l.flush();l.flushLayouts("completionQueue","completeLayout");l.flushLayouts("finalizeQueue","finalizeLayout")}}return l.runComplete()},runComplete:function(){var f=this;f.state=2;if(f.remainingLayouts){f.handleFailure();return false}f.flush();f.flushLayouts("finishQueue","finishedLayout",true);f.flushLayouts("finishQueue","notifyOwner");f.flush();f.flushAnimations();return true},runCycle:function(){var n=this,m=n.layoutQueue.clear(),o=m.length,p;++n.cycleCount;n.progressCount=0;for(p=0;p<o;++p){n.runLayout(n.currentLayout=m[p])}n.currentLayout=null;return n.progressCount>0},runLayout:function(m){var n=this,l=n.getCmp(m.owner);m.pending=false;if(l.state.blocks){return}m.done=true;++m.calcCount;++n.calcCount;m.calculate(l);if(m.done){n.layoutDone(m);if(m.completeLayout){n.queueCompletion(m)}if(m.finalizeLayout){n.queueFinalize(m)}}else{if(!m.pending&&!m.invalid&&!(m.blockCount+m.triggerCount-m.firedTriggers)){n.queueLayout(m)}}},setItemSize:function(v,w,t){var q=v,u=1,s,p;if(v.isComposite){q=v.elements;u=q.length;v=q[0]}else{if(!v.dom&&!v.el){u=q.length;v=q[0]}}for(p=0;p<u;){s=this.get(v);s.setSize(w,t);v=q[++p]}}},1,0,0,0,0,0,[Ext.layout,"Context"],0));(Ext.cmd.derive("Ext.layout.component.Body",Ext.layout.component.Auto,{type:"body",beginLayout:function(f){Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);f.bodyContext=f.getEl("body")},beginLayoutCycle:function(p,s){var q=this,u=q.lastWidthModel,o=q.lastHeightModel,t=q.owner.body;Ext.layout.component.Auto.prototype.beginLayoutCycle.apply(this,arguments);if(u&&u.fixed&&p.widthModel.shrinkWrap){t.setWidth(null)}if(o&&o.fixed&&p.heightModel.shrinkWrap){t.setHeight(null)}},calculateOwnerHeightFromContentHeight:function(l,m){var n=Ext.layout.component.Auto.prototype.calculateOwnerHeightFromContentHeight.apply(this,arguments);if(l.targetContext!==l){n+=l.getPaddingInfo().height}return n},calculateOwnerWidthFromContentWidth:function(l,n){var m=Ext.layout.component.Auto.prototype.calculateOwnerWidthFromContentWidth.apply(this,arguments);if(l.targetContext!==l){m+=l.getPaddingInfo().width}return m},measureContentWidth:function(f){return f.bodyContext.setWidth(f.bodyContext.el.dom.offsetWidth,false)},measureContentHeight:function(f){return f.bodyContext.setHeight(f.bodyContext.el.dom.offsetHeight,false)},publishInnerHeight:function(n,p){var m=p-n.getFrameInfo().height,o=n.targetContext;if(o!==n){m-=n.getPaddingInfo().height}return n.bodyContext.setHeight(m,!n.heightModel.natural)},publishInnerWidth:function(m,n){var p=n-m.getFrameInfo().width,o=m.targetContext;if(o!==m){p-=m.getPaddingInfo().width}m.bodyContext.setWidth(p,!m.widthModel.natural)}},0,0,0,0,["layout.body"],0,[Ext.layout.component,"Body"],0));(Ext.cmd.derive("Ext.layout.component.FieldSet",Ext.layout.component.Body,{type:"fieldset",defaultCollapsedWidth:100,beforeLayoutCycle:function(f){if(f.target.collapsed){f.heightModel=this.sizeModels.shrinkWrap}},beginLayout:function(g){var l=this.owner.legend;Ext.layout.component.Body.prototype.beginLayout.call(this,g);if(l){g.legendContext=g.context.getCmp(l)}},beginLayoutCycle:function(m){var l=m.target,n;Ext.layout.component.Body.prototype.beginLayoutCycle.apply(this,arguments);if(l.collapsed){m.setContentHeight(0);m.restoreMinHeight=l.minHeight;delete l.minHeight;if(m.widthModel.shrinkWrap){n=this.lastComponentSize;m.setContentWidth((n&&n.contentWidth)||this.defaultCollapsedWidth)}}},finishedLayout:function(l){var n=this.owner,m=l.restoreMinHeight;Ext.layout.component.Body.prototype.finishedLayout.apply(this,arguments);if(m){n.minHeight=m}},calculateOwnerWidthFromContentWidth:function(l,n){var m=l.legendContext;if(m){n=Math.max(n,m.getProp("width"))}return Ext.layout.component.Body.prototype.calculateOwnerWidthFromContentWidth.call(this,l,n)},calculateOwnerHeightFromContentHeight:function(m,n){var p=m.getBorderInfo(),o=m.legendContext;return m.getProp("contentHeight")+m.getPaddingInfo().height+(Ext.isIE8?m.bodyContext.getPaddingInfo().top:0)+(o?o.getProp("height"):p.top)+p.bottom},publishInnerHeight:function(m,p){var n=m.legendContext,o=0;if(n){o=n.getProp("height")}if(o===undefined){this.done=false}else{Ext.layout.component.Body.prototype.publishInnerHeight.call(this,m,p-o)}},getLayoutItems:function(){var f=this.owner.legend;return f?[f]:[]}},0,0,0,0,["layout.fieldset"],0,[Ext.layout.component,"FieldSet"],0));(Ext.cmd.derive("Ext.resizer.BorderSplitter",Ext.resizer.Splitter,{collapseTarget:null,getTrackerConfig:function(){var f=Ext.resizer.Splitter.prototype.getTrackerConfig.call(this);f.xclass="Ext.resizer.BorderSplitterTracker";return f},onTargetCollapse:function(f){Ext.resizer.Splitter.prototype.onTargetCollapse.call(this,f);if(this.performCollapse!==false&&f.collapseMode=="mini"){f.addCls(f.baseCls+"-"+f.collapsedCls+"-mini")}},onTargetExpand:function(f){Ext.resizer.Splitter.prototype.onTargetExpand.call(this,f);if(this.performCollapse!==false&&f.collapseMode=="mini"){f.removeCls(f.baseCls+"-"+f.collapsedCls+"-mini")}}},0,["bordersplitter"],["component","box","splitter","bordersplitter"],{component:true,box:true,splitter:true,bordersplitter:true},["widget.bordersplitter"],0,[Ext.resizer,"BorderSplitter"],0));(Ext.cmd.derive("Ext.layout.container.Border",Ext.layout.container.Container,{alternateClassName:"Ext.layout.BorderLayout",targetCls:"x-border-layout-ct",itemCls:["x-border-item","x-box-item"],type:"border",isBorderLayout:true,padding:undefined,percentageRe:/(\d+)%/,horzPositionProp:"left",padOnContainerProp:"left",padNotOnContainerProp:"right",axisProps:{horz:{borderBegin:"west",borderEnd:"east",horizontal:true,posProp:"x",sizeProp:"width",sizePropCap:"Width"},vert:{borderBegin:"north",borderEnd:"south",horizontal:false,posProp:"y",sizeProp:"height",sizePropCap:"Height"}},centerRegion:null,manageMargins:true,panelCollapseAnimate:true,panelCollapseMode:"placeholder",regionWeights:{north:20,south:10,center:0,west:-10,east:-20},beginAxis:function(K,X,M){var O=this,W=O.axisProps[M],F=!W.horizontal,L=W.sizeProp,H=0,Y=K.childItems,T=Y.length,R,G,I,S,E,U,P,J,V,N,Q;for(G=0;G<T;++G){I=Y[G];E=I.target;I.layoutPos={};if(E.region){I.region=U=E.region;I.isCenter=E.isCenter;I.isHorz=E.isHorz;I.isVert=E.isVert;I.weight=E.weight||O.regionWeights[U]||0;E.weight=I.weight;X[E.id]=I;if(E.isCenter){R=I;S=E.flex;K.centerRegion=R;continue}if(F!==I.isVert){continue}I.reverseWeighting=(U===W.borderEnd);J=E[L];V=typeof J;if(!E.collapsed){if(V==="string"&&(P=O.percentageRe.exec(J))){I.percentage=parseInt(P[1],10)}else{if(E.flex){H+=I.flex=E.flex}}}}}if(R){N=R.target;if((Q=N.placeholderFor)){if(!S&&F===Q.collapsedVertical()){S=0;R.collapseAxis=M}}else{if(N.collapsed&&(F===N.collapsedVertical())){S=0;R.collapseAxis=M}}}if(S==null){S=1}H+=S;return Ext.apply({before:F?"top":"left",totalFlex:H},W)},beginLayout:function(D){var M=this,y=M.getLayoutItems(),C=M.padding,L=typeof C,I=false,H,J,F,A,B,G,E,z,K;if(C){if(L==="string"||L==="number"){C=Ext.util.Format.parseBox(C)}}else{C=D.getEl("getTargetEl").getPaddingInfo();I=true}D.outerPad=C;D.padOnContainer=I;for(A=0,F=y.length;A<F;++A){J=y[A];G=M.getSplitterTarget(J);if(G){E=undefined;z=!!J.hidden;if(!G.split){if(G.isCollapsingOrExpanding){E=!!G.collapsed}}else{if(z!==G.hidden){E=!G.hidden}}if(E){J.show()}else{if(E===false){J.hide()}}}}Ext.layout.container.Container.prototype.beginLayout.apply(this,arguments);y=D.childItems;F=y.length;B={};D.borderAxisHorz=M.beginAxis(D,B,"horz");D.borderAxisVert=M.beginAxis(D,B,"vert");for(A=0;A<F;++A){H=y[A];G=M.getSplitterTarget(H.target);if(G){K=B[G.id];if(!K){K=D.getEl(G.el,M);K.region=G.region}H.collapseTarget=G=K;H.weight=G.weight;H.reverseWeighting=G.reverseWeighting;G.splitter=H;H.isHorz=G.isHorz;H.isVert=G.isVert}}M.sortWeightedItems(y,"reverseWeighting");M.setupSplitterNeighbors(y)},calculate:function(D){var L=this,G=L.getContainerSize(D),z=D.childItems,E=z.length,F=D.borderAxisHorz,y=D.borderAxisVert,C=D.outerPad,J=D.padOnContainer,A,H,M,I,K,B;F.begin=C[L.padOnContainerProp];y.begin=C.top;K=F.end=F.flexSpace=G.width+(J?C[L.padOnContainerProp]:-C[L.padNotOnContainerProp]);B=y.end=y.flexSpace=G.height+(J?C.top:-C.bottom);for(A=0;A<E;++A){H=z[A];M=H.getMarginInfo();if(H.isHorz||H.isCenter){F.addUnflexed(M.width);K-=M.width}if(H.isVert||H.isCenter){y.addUnflexed(M.height);B-=M.height}if(!H.flex&&!H.percentage){if(H.isHorz||(H.isCenter&&H.collapseAxis==="horz")){I=H.getProp("width");F.addUnflexed(I);if(H.collapseTarget){K-=I}}else{if(H.isVert||(H.isCenter&&H.collapseAxis==="vert")){I=H.getProp("height");y.addUnflexed(I);if(H.collapseTarget){B-=I}}}}}for(A=0;A<E;++A){H=z[A];M=H.getMarginInfo();if(H.percentage){if(H.isHorz){I=Math.ceil(K*H.percentage/100);I=H.setWidth(I);F.addUnflexed(I)}else{if(H.isVert){I=Math.ceil(B*H.percentage/100);I=H.setHeight(I);y.addUnflexed(I)}}}}for(A=0;A<E;++A){H=z[A];if(!H.isCenter){L.calculateChildAxis(H,F);L.calculateChildAxis(H,y)}}if(L.finishAxis(D,y)+L.finishAxis(D,F)<2){L.done=false}else{L.finishPositions(z)}},calculateChildAxis:function(D,A){var C=D.collapseTarget,w="set"+A.sizePropCap,y=A.sizeProp,z=D.getMarginInfo()[y],u,B,x,v,E;if(C){u=C.region}else{u=D.region;x=D.flex}B=u===A.borderBegin;if(!B&&u!==A.borderEnd){D[w](A.end-A.begin-z);v=A.begin}else{if(x){E=Math.ceil(A.flexSpace*(x/A.totalFlex));E=D[w](E)}else{if(D.percentage){E=D.peek(y)}else{E=D.getProp(y)}}E+=z;if(B){v=A.begin;A.begin+=E}else{A.end=v=A.end-E}}D.layoutPos[A.posProp]=v},eachItem:function(v,q,s){var w=this,u=w.getLayoutItems(),t=0,p;if(Ext.isFunction(v)){q=v;s=q}for(t;t<u.length;t++){p=u[t];if(!v||p.region===v){if(q.call(s,p)===false){break}}}},finishAxis:function(m,n){var o=n.end-n.begin,p=m.centerRegion;if(p){p["set"+n.sizePropCap](o-p.getMarginInfo()[n.sizeProp]);p.layoutPos[n.posProp]=n.begin}return Ext.isNumber(o)?1:0},finishPositions:function(n){var p=n.length,q,s,o=this.horzPositionProp;for(q=0;q<p;++q){s=n[q];s.setProp("x",s.layoutPos.x+s.marginInfo[o]);s.setProp("y",s.layoutPos.y+s.marginInfo.top)}},getLayoutItems:function(){var u=this.owner,p=(u&&u.items&&u.items.items)||[],q=p.length,t=[],s=0,w,v;for(;s<q;s++){w=p[s];v=w.placeholderFor;if(w.hidden||((!w.floated||w.isCollapsingOrExpanding===2)&&!(v&&v.isCollapsingOrExpanding===2))){t.push(w)}}return t},getPlaceholder:function(f){return f.getPlaceholder&&f.getPlaceholder()},getMaxWeight:function(f){return this.getMinMaxWeight(f)},getMinWeight:function(f){return this.getMinMaxWeight(f,true)},getMinMaxWeight:function(m,p){var o=this,n=null;o.eachItem(m,function(e){if(e.hasOwnProperty("weight")){if(n===null){n=e.weight;return}if((p&&e.weight<n)||e.weight>n){n=e.weight}}},this);return n},getSplitterTarget:function(g){var l=g.collapseTarget;if(l&&l.collapsed){return l.placeholder||l}return l},isItemBoxParent:function(f){return true},isItemShrinkWrap:function(f){return true},insertSplitter:function(q,s,w,t){var v=q.region,p=Ext.apply({xtype:"bordersplitter",collapseTarget:q,id:q.id+"-splitter",hidden:w,canResize:q.splitterResize!==false,splitterFor:q,synthetic:true},t),u=s+((v==="south"||v==="east")?0:1);if(q.collapseMode==="mini"){p.collapsedCls=q.collapsedCls}q.splitter=this.owner.add(u,p)},getMoveAfterIndex:function(g){var l=Ext.layout.container.Container.prototype.getMoveAfterIndex.apply(this,arguments);if(g.splitter){l++}return l},moveItemBefore:function(n,l){var m;if(l&&l.splitter){m=l.region;if(m==="south"||m==="east"){l=l.splitter}}return Ext.layout.container.Container.prototype.moveItemBefore.call(this,n,l)},onAdd:function(s,x){var v=this,y=s.placeholderFor,t=s.region,w,u,A,z;Ext.layout.container.Container.prototype.onAdd.apply(this,arguments);if(t){Ext.apply(s,v.regionFlags[t]);if(v.owner.isViewport){s.isViewportBorderChild=true}if(s.initBorderRegion){s.initBorderRegion()}w=t==="center";if(w){v.centerRegion=s}else{u=s.split;A=!!s.hidden;if(typeof u==="object"){z=u;u=true}if((s.isHorz||s.isVert)&&(u||s.collapseMode==="mini")){v.insertSplitter(s,x,A||!u,z)}}if(!w&&!s.hasOwnProperty("collapseMode")){s.collapseMode=v.panelCollapseMode}if(!s.hasOwnProperty("animCollapse")){if(s.collapseMode!=="placeholder"){s.animCollapse=false}else{s.animCollapse=v.panelCollapseAnimate}}if(A&&s.placeholder&&s.placeholder.isVisible()){v.owner.insert(x,s.placeholder)}}else{if(y){Ext.apply(s,v.regionFlags[y.region]);s.region=y.region;s.weight=y.weight}}},onDestroy:function(){this.centerRegion=null;Ext.layout.container.Container.prototype.onDestroy.call(this)},onRemove:function(u,s){var q=this,w=u.region,y=u.splitter,v=q.owner,x=v.destroying,t;if(w){if(u.isCenter){q.centerRegion=null}delete u.isCenter;delete u.isHorz;delete u.isVert;if(y&&!v.destroying){v.doRemove(y,true)}delete u.splitter}Ext.layout.container.Container.prototype.onRemove.apply(this,arguments);if(!x&&!s&&u.rendered){t=u.getEl();if(t){t.setStyle("top","");t.setStyle(q.horzPositionProp,"")}}},regionMeta:{center:{splitterDelta:0},north:{splitterDelta:1},south:{splitterDelta:-1},west:{splitterDelta:1},east:{splitterDelta:-1}},regionFlags:{center:{isCenter:true,isHorz:false,isVert:false},north:{isCenter:false,isHorz:false,isVert:true,collapseDirection:"top"},south:{isCenter:false,isHorz:false,isVert:true,collapseDirection:"bottom"},west:{isCenter:false,isHorz:true,isVert:false,collapseDirection:"left"},east:{isCenter:false,isHorz:true,isVert:false,collapseDirection:"right"}},setupSplitterNeighbors:function(I){var F={},A=I.length,G=this.touchedRegions,y,z,E,w,B,x,H,D,C;for(y=0;y<A;++y){x=I[y].target;H=x.region;if(x.isCenter){E=x}else{if(H){C=G[H];for(z=0,w=C.length;z<w;++z){B=F[C[z]];if(B){B.neighbors.push(x)}}if(x.placeholderFor){D=x.placeholderFor.splitter}else{D=x.splitter}if(D){D.neighbors=[]}F[H]=D}}}if(E){C=G.center;for(z=0,w=C.length;z<w;++z){B=F[C[z]];if(B){B.neighbors.push(E)}}}},touchedRegions:{center:["north","south","east","west"],north:["north","east","west"],south:["south","east","west"],east:["east","north","south"],west:["west","north","south"]},sizePolicies:{vert:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},horz:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},flexAll:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}},getItemSizePolicy:function(p){var q=this,u=this.sizePolicies,s,t,w,v;if(p.isCenter){v=p.placeholderFor;if(v){if(v.collapsedVertical()){return u.vert}return u.horz}if(p.collapsed){if(p.collapsedVertical()){return u.vert}return u.horz}return u.flexAll}s=p.collapseTarget;if(s){return s.isVert?u.vert:u.horz}if(p.region){if(p.isVert){t=p.height;w=u.vert}else{t=p.width;w=u.horz}if(p.flex||(typeof t==="string"&&q.percentageRe.test(t))){return u.flexAll}return w}return q.autoSizePolicy}},0,0,0,0,["layout.border"],0,[Ext.layout.container,"Border",Ext.layout,"BorderLayout"],function(){var l={addUnflexed:function(e){this.flexSpace=Math.max(this.flexSpace-e,0)}},g=this.prototype.axisProps;Ext.apply(g.horz,l);Ext.apply(g.vert,l)}));(Ext.cmd.derive("Ext.layout.container.Card",Ext.layout.container.Fit,{alternateClassName:"Ext.layout.CardLayout",type:"card",hideInactive:true,deferredRender:false,getRenderTree:function(){var l=this,g=l.getActiveItem();if(g){if(g.hasListeners.beforeactivate&&g.fireEvent("beforeactivate",g)===false){g=l.activeItem=l.owner.activeItem=null}else{if(g.hasListeners.activate){g.on({boxready:function(){g.fireEvent("activate",g)},single:true})}}if(l.deferredRender){if(g){return l.getItemsRenderTree([g])}}else{return Ext.layout.container.Fit.prototype.getRenderTree.apply(this,arguments)}}},renderChildren:function(){var l=this,g=l.getActiveItem();if(!l.deferredRender){Ext.layout.container.Fit.prototype.renderChildren.call(this)}else{if(g){l.renderItems([g],l.getRenderTarget())}}},isValidParent:function(n,m,p){var o=n.el?n.el.dom:Ext.getDom(n);return(o&&o.parentNode===(m.dom||m))||false},getActiveItem:function(){var l=this,m=l.activeItem===undefined?(l.owner&&l.owner.activeItem):l.activeItem,n=l.parseActiveItem(m);if(n&&l.owner.items.indexOf(n)!==-1){l.activeItem=n}return n==null?null:(l.activeItem||l.owner.activeItem)},parseActiveItem:function(l){var g;if(l&&l.isComponent){g=l}else{if(typeof l==="number"||l===undefined){g=this.getLayoutItems()[l||0]}else{if(l===null){g=null}else{g=this.owner.getComponent(l)}}}return g},configureItem:function(f){f.setHiddenState(f!==this.getActiveItem());Ext.layout.container.Fit.prototype.configureItem.apply(this,arguments)},onAdd:function(l,g){Ext.layout.container.Fit.prototype.onAdd.call(this,l,g);this.setItemHideMode(l)},onRemove:function(l){var g=this;Ext.layout.container.Fit.prototype.onRemove.call(this,l);g.resetItemHideMode(l);if(l===g.activeItem){g.activeItem=undefined}},getAnimation:function(m,n){var l=(m||{}).cardSwitchAnimation;if(l===false){return false}return l||n.cardSwitchAnimation},getNext:function(){var l=arguments[0],n=this.getLayoutItems(),m=Ext.Array.indexOf(n,this.activeItem);return n[m+1]||(l?n[0]:false)},next:function(){var g=arguments[0],l=arguments[1];return this.setActiveItem(this.getNext(l),g)},getPrev:function(){var l=arguments[0],n=this.getLayoutItems(),m=Ext.Array.indexOf(n,this.activeItem);return n[m-1]||(l?n[n.length-1]:false)},prev:function(){var g=arguments[0],l=arguments[1];return this.setActiveItem(this.getPrev(l),g)},setActiveItem:function(t){var p=this,u=p.owner,q=p.activeItem,v=u.rendered,s,w;t=p.parseActiveItem(t);s=u.items.indexOf(t);if(s===-1){s=u.items.items.length;Ext.suspendLayouts();t=u.add(t);Ext.resumeLayouts()}if(t&&q!==t){if(t.fireEvent("beforeactivate",t,q)===false){return false}if(q&&q.fireEvent("beforedeactivate",q,t)===false){return false}if(v){Ext.suspendLayouts();if(!t.rendered){p.renderItem(t,p.getRenderTarget(),u.items.length)}if(q){if(p.hideInactive){w=q.el.contains(Ext.Element.getActiveElement());q.hide();if(q.hidden){q.hiddenByLayout=true;q.fireEvent("deactivate",q,t)}else{return false}}}if(t.hidden){t.show()}if(t.hidden){p.activeItem=t=null}else{p.activeItem=t;if(w){if(!t.defaultFocus){t.defaultFocus=":focusable"}t.focus()}}Ext.resumeLayouts(true)}else{p.activeItem=t}t.fireEvent("activate",t,q);return p.activeItem}return false},resetItemHideMode:function(f){f.hideMode=f.originalHideMode;delete f.originalHideMode},setItemHideMode:function(f){f.originalHideMode=f.hideMode;f.hideMode="offsets"}},0,0,0,0,["layout.card"],0,[Ext.layout.container,"Card",Ext.layout,"CardLayout"],0));(Ext.cmd.derive("Ext.plugin.Manager",Ext.Base,{alternateClassName:["Ext.PluginManager","Ext.PluginMgr"],singleton:true,typeName:"ptype",create:function(q,n,o){var s,p;if(q.init){s=q}else{if(o){q=Ext.apply({},q);q.cmp=o}else{o=q.cmp}if(q.xclass){s=Ext.create(q)}else{p="plugin."+(q.ptype||n);s=Ext.ClassManager.instantiateByAlias(p,q)}}if(s&&o&&s.setCmp&&!s.setCmpCalled){s.setCmp(o);s.setCmpCalled=true}return s}},0,0,0,0,0,0,[Ext.plugin,"Manager",Ext,"PluginManager",Ext,"PluginMgr"],0));(Ext.cmd.derive("Ext.resizer.BorderSplitterTracker",Ext.resizer.SplitterTracker,{getPrevCmp:null,getNextCmp:null,calculateConstrainRegion:function(){var L=this,ae=L.splitter,M=ae.collapseTarget,ab=ae.defaultSplitMin,Y=ae.vertical?"Width":"Height",ac="min"+Y,T="max"+Y,X="get"+Y,U=ae.neighbors,aa=U.length,O=M.el.getBox(),Z=O.x,K=O.y,N=O.right,V=O.bottom,I=ae.vertical?(N-Z):(V-K),Q,S,H,P,R,W,J,ad;P=(M[ac]||Math.min(I,ab))-I;R=M[T];if(!R){R=1000000000}else{R-=I}ad=I;for(Q=0;Q<aa;++Q){S=U[Q];I=S[X]();H=S[T];if(H===null){H=undefined}W=I-H;J=I-(S[ac]||Math.min(I,ab));if(!isNaN(W)){if(P<W){P=W}}if(R>J){R=J}}if(R-P<2){return null}O=new Ext.util.Region(K,N,V,Z);L.constraintAdjusters[L.getCollapseDirection()](O,P,R,ae);L.dragInfo={minRange:P,maxRange:R,targetSize:ad};return O},constraintAdjusters:{left:function(n,p,o,m){n[0]=n.x=n.left=n.right+p;n.right+=o+m.getWidth()},top:function(n,p,o,m){n[1]=n.y=n.top=n.bottom+p;n.bottom+=o+m.getHeight()},bottom:function(n,p,o,m){n.bottom=n.top-p;n.top-=o+m.getHeight()},right:function(n,p,o,m){n.right=n.left-p;n[0]=n.x=n.left=n.x-o+m.getWidth()}},onBeforeStart:function(v){var y=this,x=y.splitter,e=x.collapseTarget,t=x.neighbors,s=t.length,u,w;if(e.collapsed){return false}for(u=0;u<s;++u){w=t[u];if(w.collapsed&&w.isHorz===e.isHorz){return false}}if(!(y.constrainTo=y.calculateConstrainRegion())){return false}return true},performResize:function(e,u){var C=this,z=C.splitter,v=z.getCollapseDirection(),A=z.collapseTarget,w=C.splitAdjusters[z.vertical?"horz":"vert"],B=u[w.index],x=C.dragInfo,y;if(v==="right"||v==="bottom"){B=-B}B=Math.min(Math.max(x.minRange,B),x.maxRange);if(B){(y=z.ownerCt).suspendLayouts();w.adjustTarget(A,x.targetSize,B);y.resumeLayouts(true)}},splitAdjusters:{horz:{index:0,adjustTarget:function(m,n,l){m.flex=null;m.setSize(n+l)}},vert:{index:1,adjustTarget:function(m,n,l){m.flex=null;m.setSize(undefined,n+l)}}},getCollapseDirection:function(){return this.splitter.getCollapseDirection()}},0,0,0,0,0,0,[Ext.resizer,"BorderSplitterTracker"],0));(Ext.cmd.derive("Ext.resizer.ResizeTracker",Ext.dd.DragTracker,{dynamic:true,preserveRatio:false,preventDefault:false,constrainTo:null,proxyCls:"x-resizable-proxy",constructor:function(q){var o=this,p,s,n;if(!q.el){if(q.target.isComponent){o.el=q.target.getEl()}else{o.el=q.target}}Ext.dd.DragTracker.prototype.constructor.apply(this,arguments);if(o.preserveRatio&&o.minWidth&&o.minHeight){p=o.minWidth/o.el.getWidth();s=o.minHeight/o.el.getHeight();if(s>p){o.minWidth=o.el.getWidth()*s}else{o.minHeight=o.el.getHeight()*p}}if(o.throttle){n=Ext.Function.createThrottled(function(){Ext.resizer.ResizeTracker.prototype.resize.apply(o,arguments)},o.throttle);o.resize=function(f,e,g){if(g){Ext.resizer.ResizeTracker.prototype.resize.apply(o,arguments)}else{n.apply(null,arguments)}}}},onBeforeStart:function(e){this.startBox=this.target.getBox()},getProxy:function(){var f=this;if(!f.dynamic&&!f.proxy){f.proxy=f.createProxy(f.target||f.el);f.hideProxy=true}if(f.proxy){f.proxy.show();return f.proxy}},createProxy:function(l){var m,n=this.proxyCls;if(l.isComponent){m=l.getProxy().addCls(n)}else{m=l.createProxy({tag:"div",role:"presentation",cls:n,id:l.id+"-rzproxy"},Ext.getBody())}m.removeCls("x-proxy-el");return m},onStart:function(e){this.activeResizeHandle=Ext.get(this.getDragTarget().id);if(!this.dynamic){this.resize(this.startBox)}},onMouseDown:function(e,l){Ext.dd.DragTracker.prototype.onMouseDown.call(this,e,l);Ext.dom.Element.maskIframes()},onMouseUp:function(e){Ext.dd.DragTracker.prototype.onMouseUp.call(this,e);Ext.dom.Element.unmaskIframes()},onDrag:function(e){if(this.dynamic||this.proxy){this.updateDimensions(e)}},updateDimensions:function(D,H){var e=this,S=e.activeResizeHandle.region,Q=e.getOffset(e.constrainTo?"dragTarget":null),J=e.startBox,P,F=0,N=0,M,E,U=0,K=0,L,O,T,R,G,I;S=e.convertRegionName(S);switch(S){case"south":N=Q[1];T=2;break;case"north":N=-Q[1];K=-N;T=2;break;case"east":F=Q[0];T=1;break;case"west":F=-Q[0];U=-F;T=1;break;case"northeast":N=-Q[1];K=-N;F=Q[0];O=[J.x,J.y+J.height];T=3;break;case"southeast":N=Q[1];F=Q[0];O=[J.x,J.y];T=3;break;case"southwest":F=-Q[0];U=-F;N=Q[1];O=[J.x+J.width,J.y];T=3;break;case"northwest":N=-Q[1];K=-N;F=-Q[0];U=-F;O=[J.x+J.width,J.y+J.height];T=3;break}R={width:J.width+F,height:J.height+N,x:J.x+U,y:J.y+K};M=Ext.Number.snap(R.width,e.widthIncrement);E=Ext.Number.snap(R.height,e.heightIncrement);if(M!==R.width||E!==R.height){switch(S){case"northeast":R.y-=E-R.height;break;case"north":R.y-=E-R.height;break;case"southwest":R.x-=M-R.width;break;case"west":R.x-=M-R.width;break;case"northwest":R.x-=M-R.width;R.y-=E-R.height}R.width=M;R.height=E}if(R.width<e.minWidth||R.width>e.maxWidth){R.width=Ext.Number.constrain(R.width,e.minWidth,e.maxWidth);if(U){R.x=J.x+(J.width-R.width)}}else{e.lastX=R.x}if(R.height<e.minHeight||R.height>e.maxHeight){R.height=Ext.Number.constrain(R.height,e.minHeight,e.maxHeight);if(K){R.y=J.y+(J.height-R.height)}}else{e.lastY=R.y}if(e.preserveRatio||D.shiftKey){P=e.startBox.width/e.startBox.height;G=Math.min(Math.max(e.minHeight,R.width/P),e.maxHeight);I=Math.min(Math.max(e.minWidth,R.height*P),e.maxWidth);if(T===1){R.height=G}else{if(T===2){R.width=I}else{L=Math.abs(O[0]-this.lastXY[0])/Math.abs(O[1]-this.lastXY[1]);if(L>P){R.height=G}else{R.width=I}if(S==="northeast"){R.y=J.y-(R.height-J.height)}else{if(S==="northwest"){R.y=J.y-(R.height-J.height);R.x=J.x-(R.width-J.width)}else{if(S==="southwest"){R.x=J.x-(R.width-J.width)}}}}}}e.setPosition=R.x!==e.startBox.x||R.y!==e.startBox.y;e.resize(R,H)},resize:function(o,s){var p=this,n,q=p.setPosition;if(p.dynamic||(!p.dynamic&&s)){if(q){p.target.setBox(o)}else{p.target.setSize(o.width,o.height)}}if(!s){n=p.getProxy();if(n&&n!==p.target){if(q||p.hideProxy){n.setBox(o)}else{n.setSize(o.width,o.height)}}}},onEnd:function(e){this.updateDimensions(e,true);if(this.proxy&&this.hideProxy){this.proxy.hide()}},convertRegionName:function(f){return f}},1,0,0,0,0,0,[Ext.resizer,"ResizeTracker"],0));(Ext.cmd.derive("Ext.resizer.Resizer",Ext.Base,{alternateClassName:"Ext.Resizable",handleCls:"x-resizable-handle",overCls:"x-resizable-handle-over",pinnedCls:"x-resizable-pinned",wrapCls:"x-resizable-wrap",wrappedCls:"x-resizable-wrapped",delimiterRe:/(?:\s*[,;]\s*)|\s+/,dynamic:true,handles:"s e se",height:null,width:null,heightIncrement:0,widthIncrement:0,minHeight:20,minWidth:20,maxHeight:10000,maxWidth:10000,pinned:false,preserveRatio:false,transparent:false,possiblePositions:{n:"north",s:"south",e:"east",w:"west",se:"southeast",sw:"southwest",nw:"northwest",ne:"northeast"},touchActionMap:{n:{panY:false},s:{panY:false},e:{panX:false},w:{panX:false},se:{panX:false,panY:false},sw:{panX:false,panY:false},nw:{panX:false,panY:false},ne:{panX:false,panY:false}},ariaRole:"presentation",constructor:function(C){var B=this,H=Ext.dom.Element.unselectableCls,G=[],M,I,R,K,E,F,N,L,D,S,J,Q,P,O;if(Ext.isString(C)||Ext.isElement(C)||C.dom){M=C;C=arguments[1]||{};C.target=M}B.mixins.observable.constructor.call(B,C);M=B.target;if(M){if(M.isComponent){M.addClsWithUI("resizable");if(M.minWidth){B.minWidth=M.minWidth}if(M.minHeight){B.minHeight=M.minHeight}if(M.maxWidth){B.maxWidth=M.maxWidth}if(M.maxHeight){B.maxHeight=M.maxHeight}if(M.floating){if(!B.hasOwnProperty("handles")){B.handles="n ne e se s sw w nw"}}B.el=M.getEl()}else{M=B.el=B.target=Ext.get(M)}}else{M=B.target=B.el=Ext.get(B.el)}B.el.addCls(Ext.Component.prototype.borderBoxCls);if(Ext.isNumber(B.width)){B.width=Ext.Number.constrain(B.width,B.minWidth,B.maxWidth)}if(Ext.isNumber(B.height)){B.height=Ext.Number.constrain(B.height,B.minHeight,B.maxHeight)}if(B.width!==null||B.height!==null){B.target.setSize(B.width,B.height)}K=B.el.dom.tagName.toUpperCase();if(K==="TEXTAREA"||K==="IMG"||K==="TABLE"){B.originalTarget=B.target;Q=M.isComponent?M.getEl():M;B.el.addCls(B.wrappedCls);B.target=B.el=B.el.wrap({role:"presentation",cls:B.wrapCls,id:B.el.id+"-rzwrap",style:Q.getStyle(["margin-top","margin-bottom"])});P=Q.getPositioning();B.el.setPositioning(P);Q.clearPositioning();L=Q.getBox();if(P.position!=="absolute"){L.x=0;L.y=0}B.el.setBox(L);Q.setStyle("position","absolute");B.isTargetWrapped=true}B.el.position();if(B.pinned){B.el.addCls(B.pinnedCls)}B.resizeTracker=new Ext.resizer.ResizeTracker({disabled:B.disabled,target:M,el:B.el,constrainTo:B.constrainTo,handleCls:B.handleCls,overCls:B.overCls,throttle:B.throttle,proxy:B.originalTarget?B.el:null,dynamic:B.originalTarget?true:B.dynamic,originalTarget:B.originalTarget,delegate:"."+B.handleCls,preserveRatio:B.preserveRatio,heightIncrement:B.heightIncrement,widthIncrement:B.widthIncrement,minHeight:B.minHeight,maxHeight:B.maxHeight,minWidth:B.minWidth,maxWidth:B.maxWidth});B.resizeTracker.on({mousedown:B.onBeforeResize,drag:B.onResize,dragend:B.onResizeEnd,scope:B});if(B.handles==="all"){B.handles="n s e w ne nw se sw"}S=B.handles=B.handles.split(B.delimiterRe);R=B.possiblePositions;E=S.length;I=B.handleCls+" "+B.handleCls+"-{0}";if(B.target.isComponent){O=B.target.baseCls;I+=" "+O+"-handle "+O+"-handle-{0}";if(Ext.supports.CSS3BorderRadius){I+=" "+O+"-handle-{0}-br"}}for(F=0;F<E;F++){D=S[F];if(D&&R[D]){N=R[D];J=B[N]=B.el.createChild({id:B.el.id+"-"+N+"-handle",cls:Ext.String.format(I,N)+" "+H,unselectable:"on",role:"presentation"});J.region=N;if(B.transparent){J.setOpacity(0)}J.setTouchAction(B.touchActionMap[D]);G.push(J)}}B.resizeTracker.handleEls=G},disable:function(){this.disabled=true;this.resizeTracker.disable()},enable:function(){this.disabled=false;this.resizeTracker.enable()},onBeforeResize:function(l,e){return this.fireResizeEvent("beforeresize",l,e)},onResize:function(l,e){return this.fireResizeEvent("resizedrag",l,e)},onResizeEnd:function(l,e){return this.fireResizeEvent("resize",l,e)},fireResizeEvent:function(q,e,s){var o=this,p;if(o.hasListeners[q]){p=o.el.getBox();return o.fireEvent(q,o,p.width,p.height,s)}},resizeTo:function(m,n){var l=this;l.target.setSize(m,n);l.fireEvent("resize",l,m,n,null)},getEl:function(){return this.el},getTarget:function(){return this.target},destroy:function(){var p=this,q=p.handles,u=q.length,t=p.possiblePositions,w,v,s;p.resizeTracker.destroy();if(p.isTargetWrapped){p.target.destroy()}for(s=0;s<u;s++){v=t[q[s]];if((w=p[v])){w.destroy();p[v]=null}}p.callParent()}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.resizer,"Resizer",Ext,"Resizable"],0));(Ext.cmd.derive("Ext.selection.CellModel",Ext.selection.DataViewModel,{isCellModel:true,deselectOnContainerClick:false,enableKeyNav:true,preventWrap:false,bindComponent:function(n){var l=this,m;if(l.view&&l.gridListeners){l.gridListeners.destroy()}Ext.selection.DataViewModel.prototype.bindComponent.call(this,n);if(n){m=n.grid||n.ownerCt;if(m.optimizedColumnMove!==false){l.gridListeners=m.on({columnmove:l.onColumnMove,scope:l,destroyable:true})}}},getViewListeners:function(){var f=Ext.selection.DataViewModel.prototype.getViewListeners.call(this);f.refresh=this.onViewRefresh;return f},getHeaderCt:function(){var g=this.navigationModel.getPosition(),l=g?g.view:this.primaryView;return l.headerCt},onNavigate:function(e){if(!e.record||e.keyEvent.stopSelection){return}this.setPosition(e.position)},selectWithEvent:function(l,e){this.select(l)},select:function(v,p,t){var q=this,w,s=q.getPosition(),u=q.view.store;if(v||v===0){if(v.isModel){w=u.indexOf(v);if(w!==-1){v={row:w,column:s?s.column:0}}else{v=null}}else{if(typeof v==="number"){v={row:v,column:0}}}}if(v){q.selectByPosition(v,t)}else{q.deselect()}},getCurrentPosition:function(){var f=this.selecting?this.nextSelection:this.selection;return f?{view:f.view,record:f.record,row:f.rowIdx,columnHeader:f.column,column:f.view.getColumnManager().indexOf(f.column)}:f},getPosition:function(){return(this.selecting?this.nextSelection:this.selection)||null},setCurrentPosition:function(l,n,m){if(l&&!l.isCellContext){l=new Ext.grid.CellContext(this.view).setPosition({row:l.row,column:typeof l.column==="number"?this.view.getColumnManager().getColumns()[l.column]:l.column})}return this.setPosition(l,n,m)},setPosition:function(n,s,o){var p=this,q=p.selection;if(n){n=n.isCellContext?n.clone():new Ext.grid.CellContext(p.view).setPosition(n)}if(!o&&q){if(n&&(n.record===q.record&&n.column===q.column&&n.view===q.view)){n=null}else{p.onCellDeselect(p.selection,s)}}if(n){p.nextSelection=n;p.selecting=true;p.onCellSelect(p.nextSelection,s);p.selecting=false;return(p.selection=n)}},isCellSelected:function(t,o,q){var p=this,s,u=p.getPosition();if(u&&u.view===t){s=new Ext.grid.CellContext(t).setPosition({row:o,column:typeof q==="number"?t.getColumnManager().getColumns()[q]:q});return(s.record===u.record)&&(s.column===u.column)}},onStoreRemove:function(q,s,o){var p=this,n=p.getPosition();Ext.selection.DataViewModel.prototype.onStoreRemove.apply(this,arguments);if(n&&q.isMoving(n.record)){return}if(n&&q.getCount()&&q.indexOf(n.record)!==-1){n.setRow(n.record)}else{p.selection=null}},onStoreClear:function(){Ext.selection.DataViewModel.prototype.onStoreClear.apply(this,arguments);this.selection=null},onStoreAdd:function(){var l=this,g=l.getPosition();Ext.selection.DataViewModel.prototype.onStoreAdd.apply(this,arguments);if(g){g.setRow(g.record)}else{l.selection=null}},updateSelectedInstances:function(n){var l=this.getPosition(),m=n.getAt(0);if(m&&l&&l.record.id===m.id){l.setRow(m)}Ext.selection.DataViewModel.prototype.updateSelectedInstances.call(this,n)},onCellClick:function(q,t,w,s,u,e,v){if(e!==-1){this.setPosition(v.position)}},onCellSelect:function(l,g){if(l&&l.rowIdx!==undefined&&l.rowIdx>-1){this.doSelect(l.record,false,g)}},onCellDeselect:function(l,g){if(l&&l.rowIdx!==undefined){this.doDeselect(l.record,g)}},onSelectChange:function(u,q,s,x){var y=this,w,t,v;if(q){w=y.nextSelection;t="select"}else{w=y.selection;t="deselect"}v=w.view||y.primaryView;if((s||y.fireEvent("before"+t,y,u,w.rowIdx,w.colIdx))!==false&&x()!==false){if(q){v.onCellSelect(w)}else{v.onCellDeselect(w);delete y.selection}if(!s){y.fireEvent(t,y,u,w.rowIdx,w.colIdx)}}},refresh:function(){var g=this.getPosition(),l;if(g&&(l=this.store.indexOf(this.selected.last()))!==-1){g.rowIdx=l}},onColumnMove:function(o,n,q,p){var s=o.up("tablepanel");if(s){this.onViewRefresh(s.view)}},onUpdate:function(n){var m=this,l;if(m.isSelected(n)){l=m.selecting?m.nextSelection:m.selection;m.view.onCellSelect(l)}},onViewRefresh:function(t){var p=this,v=p.getPosition(),s,w=t.headerCt,u,q;if(v&&v.view===t){u=v.record;q=t.getColumnByPosition(v);if(!q.isDescendantOf(w)){q=w.queryById(q.id)||w.down('[text="'+q.text+'"]')||w.down('[dataIndex="'+q.dataIndex+'"]')}if(v.record){if(q&&(t.store.indexOfId(u.getId())!==-1)){s=new Ext.grid.CellContext(t).setPosition({row:u,column:q});p.setPosition(s)}}else{p.selection=null}}},selectByPosition:function(l,g){this.setPosition(l,g)}},0,0,0,0,["selection.cellmodel"],0,[Ext.selection,"CellModel"],0));(Ext.cmd.derive("Ext.selection.RowModel",Ext.selection.DataViewModel,{enableKeyNav:true,isRowModel:true,deselectOnContainerClick:false,onUpdate:function(o){var m=this,p=m.view,n;if(p&&m.isSelected(o)){n=p.indexOf(o);p.onRowSelect(n);if(o===m.lastFocused){p.onRowFocus(n,true)}}},onSelectChange:function(x,B,E,C){var v=this,D=v.views||[v.view],A=D.length,z=v.store.indexOf(x),w=B?"select":"deselect",y,u;if((E||v.fireEvent("before"+w,v,x,z))!==false&&C()!==false){for(y=0;y<A;y++){u=D[y];z=u.indexOf(x);if(u.indexOf(x)!==-1){if(B){u.onRowSelect(z,E)}else{u.onRowDeselect(z,E)}}}if(!E){v.fireEvent(w,v,x,z)}}},getCurrentPosition:function(){var f=this.selected.getAt(0);if(f){return new Ext.grid.CellContext(this.view).setPosition(this.store.indexOf(f),0)}},selectByPosition:function(l,g){if(!l.isCellContext){l=new Ext.grid.CellContext(this.view).setPosition(l.row,l.column)}this.select(l.record,g)},selectNext:function(x,t){var y=this,u=y.store,q=y.getSelection(),w=q[q.length-1],s=y.view.indexOf(w)+1,v;if(s===u.getCount()||s===0){v=false}else{y.doSelect(s,x,t);v=true}return v},selectPrevious:function(w,t){var p=this,q=p.getSelection(),u=q[0],s=p.view.indexOf(u)-1,v;if(s<0){v=false}else{p.doSelect(s,w,t);v=true}return v},isRowSelected:function(f){return this.isSelected(f)},isCellSelected:function(m,n,l){return this.isSelected(n)},vetoSelection:function(n){var o=this.view.getNavigationModel(),p=n.getKey(),e=p===n.RIGHT||p===n.LEFT;return(e&&o.previousRecord===o.record)||Ext.selection.DataViewModel.prototype.vetoSelection.call(this,n)}},0,0,0,0,["selection.rowmodel"],0,[Ext.selection,"RowModel"],0));(Ext.cmd.derive("Ext.selection.CheckboxModel",Ext.selection.RowModel,{mode:"MULTI",injectCheckbox:0,checkOnly:false,showHeaderCheckbox:undefined,headerText:undefined,headerAriaLabel:"Row selector",headerSelectText:"Press Space to select all rows",headerDeselectText:"Press Space to deselect all rows",rowSelectText:"Press Space to select this row",rowDeselectText:"Press Space to deselect this row",allowDeselect:true,headerWidth:24,checkerOnCls:"x-grid-hd-checker-on",tdCls:"x-grid-cell-special x-selmodel-column",constructor:function(){var f=this;Ext.selection.RowModel.prototype.constructor.apply(this,arguments);if(f.mode==="SINGLE"){f.showHeaderCheckbox=false}},beforeViewRender:function(o){var n=this,p,m=o.grid.ownerLockable;Ext.selection.RowModel.prototype.beforeViewRender.apply(this,arguments);if(n.injectCheckbox!==false){if(m&&!n.lockListeners){n.lockListeners=m.mon(m,{lockcolumn:n.onColumnLock,unlockcolumn:n.onColumnUnlock,scope:n,destroyable:true})}if(!m||(o.isLockedView&&n.hasLockedHeader())||(o.isNormalView&&!n.column)){n.addCheckbox(o);p=o.ownerCt;if(o.headerCt.lockedCt){p=p.ownerCt}n.mon(o.ownerGrid,{beforereconfigure:n.onBeforeReconfigure,reconfigure:n.onReconfigure,scope:n})}}},onColumnUnlock:function(p,s){var q=this,o=q.injectCheckbox,n=p.lockedGrid.visibleColumnManager.getColumns();if(n.length===1&&n[0]===q.column){if(o==="first"){o=0}else{if(o==="last"){o=p.normalGrid.visibleColumnManager.getColumns().length}}p.unlock(q.column,o)}},onColumnLock:function(p,s){var q=this,o=q.injectCheckbox,n=p.lockedGrid.visibleColumnManager.getColumns();if(n.length===1){if(o==="first"){o=0}else{if(o==="last"){o=p.lockedGrid.visibleColumnManager.getColumns().length}}p.lock(q.column,o)}},bindComponent:function(f){this.sortable=false;Ext.selection.RowModel.prototype.bindComponent.apply(this,arguments)},hasLockedHeader:function(){var l=this.view.ownerGrid.getVisibleColumnManager().getColumns(),n=l.length,m;for(m=0;m<n;m++){if(l[m].locked){return true}}return false},addCheckbox:function(o){var n=this,p=n.injectCheckbox,m=o.headerCt;if(p!==false){if(p==="first"){p=0}else{if(p==="last"){p=m.getColumnCount()}}Ext.suspendLayouts();if(o.getStore().isBufferedStore){n.showHeaderCheckbox=false}n.column=m.add(p,n.column||n.getHeaderConfig());Ext.resumeLayouts()}},onBeforeReconfigure:function(q,u,s,v,t){var p=this.column,w=p.ownerCt;if(s&&w){w.remove(p,false)}},onReconfigure:function(n,p,o){var m=this;if(o){if(n.lockable){if(n.lockedGrid.isVisible()){n.lock(m.column,0)}else{n.unlock(m.column,0)}}else{m.addCheckbox(m.view)}n.view.refreshView()}},onHeaderClick:function(B,w,G){var F=this,D=F.store,y=F.column,z,A,x,e,C,E;if(F.showHeaderCheckbox!==false&&w===F.column&&F.mode!=="SINGLE"){G.stopEvent();z=w.el.hasCls("x-grid-hd-checker-on");if(z){A=[];C=this.getSelection();for(x=0,e=C.length;x<e;++x){E=C[x];if(D.indexOf(E)>-1){A.push(E)}}if(A.length>0){F.deselect(A)}}else{F.selectAll()}}},getHeaderConfig:function(){var o=this,m=o.showHeaderCheckbox!==false,n=Ext.String.htmlEncode,p;p={xtype:"checkcolumn",headerCheckbox:m,isCheckerHd:m,ignoreExport:true,text:o.headerText,width:o.headerWidth,sortable:false,draggable:false,resizable:false,hideable:false,menuDisabled:true,checkOnly:o.checkOnly,checkboxAriaRole:"presentation",tdCls:o.tdCls,cls:"x-selmodel-column",editRenderer:o.editRenderer||o.renderEmpty,locked:o.hasLockedHeader(),processEvent:o.processColumnEvent,toggleAll:Ext.emptyFn,setRecordCheck:Ext.emptyFn,isRecordChecked:o.isRowSelected.bind(o)};if(!o.checkOnly){p.tabIndex=undefined;p.ariaRole="presentation";p.focusable=false;p.cellFocusable=false}else{p.useAriaElements=true;p.ariaLabel=n(o.headerAriaLabel);p.headerSelectText=n(o.headerSelectText);p.headerDeselectText=n(o.headerDeselectText);p.rowSelectText=n(o.rowSelectText);p.rowDeselectText=n(o.rowDeselectText)}return p},processColumnEvent:function(v,t,e,y,u,w,x,A){var z=t.getNavigationModel();if((w.type==="keydown"&&t.actionableMode&&w.getKey()===w.SPACE)||(!this.checkOnly&&w.type===this.triggerEvent)){z.fireEvent("navigate",{view:t,navigationModel:z,keyEvent:w,position:w.position,recordIndex:y,record:x,item:w.item,cell:w.position.cellElement,columnIndex:w.position.colIdx,column:w.position.column})}},toggleRecord:function(o,n,m,p){this[m?"select":"deselect"]([o],this.mode!=="SINGLE")},renderEmpty:function(){return"&#160;"},refresh:function(){Ext.selection.RowModel.prototype.refresh.apply(this,arguments);this.updateHeaderState()},selectByPosition:function(l,g){if(!l.isCellContext){l=new Ext.grid.CellContext(this.view).setPosition(l.row,l.column)}if(!this.checkOnly||l.column===this.column){Ext.selection.RowModel.prototype.selectByPosition.call(this,l,g)}},onSelectChange:function(p,n){var m=this,o;Ext.selection.RowModel.prototype.onSelectChange.apply(this,arguments);if(m.column){m.column.updateCellAriaDescription(p,n)}if(!m.suspendChange){m.updateHeaderState()}},onStoreLoad:function(){Ext.selection.RowModel.prototype.onStoreLoad.apply(this,arguments);this.updateHeaderState()},onStoreAdd:function(){Ext.selection.RowModel.prototype.onStoreAdd.apply(this,arguments);this.updateHeaderState()},onStoreRemove:function(){Ext.selection.RowModel.prototype.onStoreRemove.apply(this,arguments);this.updateHeaderState()},onStoreRefresh:function(){Ext.selection.RowModel.prototype.onStoreRefresh.apply(this,arguments);this.updateHeaderState()},maybeFireSelectionChange:function(f){if(f&&!this.suspendChange){this.updateHeaderState()}Ext.selection.RowModel.prototype.maybeFireSelectionChange.apply(this,arguments)},resumeChanges:function(){Ext.selection.RowModel.prototype.resumeChanges.call(this);if(!this.suspendChange){this.updateHeaderState()}},updateHeaderState:function(){var v=this,u=v.store,w=u.getCount(),t=v.views,s=false,A=0,z,x,y;if(!u.isBufferedStore&&w>0){z=v.selected;s=true;for(y=0,x=z.getCount();y<x;++y){if(u.indexOfId(z.getAt(y).id)>-1){++A}}s=w===A}if(t&&t.length){v.column.setHeaderStatus(s)}},vetoSelection:function(u){var p=this,q=p.column,s,e,t;if(p.checkOnly){e=u.type===q.triggerEvent&&u.getTarget(p.column.getCellSelector());t=u.getKey()===u.SPACE&&u.position.column===q;s=!(e||t)}return s||Ext.selection.RowModel.prototype.vetoSelection.call(this,u)},privates:{onBeforeNavigate:function(l){var e=l.keyEvent;if(this.selectionMode!=="SINGLE"){l.ctrlKey=l.ctrlKey||e.ctrlKey||(e.type===this.column.triggerEvent&&!e.shiftKey)||e.getKey()===e.SPACE}},selectWithEventMulti:function(p,e,o){var n=this;if(!e.shiftKey&&!e.ctrlKey&&e.getTarget(n.column.getCellSelector())){if(o){n.doDeselect(p)}else{n.doSelect(p,true)}}else{Ext.selection.RowModel.prototype.selectWithEventMulti.call(this,p,e,o)}}}},1,0,0,0,["selection.checkboxmodel"],0,[Ext.selection,"CheckboxModel"],function(f){f.prototype.checkSelector="."+Ext.grid.column.Check.prototype.checkboxCls}));Ext.define("Ext.theme.triton.selection.CheckboxModel",{override:"Ext.selection.CheckboxModel",headerWidth:32,onHeaderClick:function(m,e,n){(arguments.callee.$previous||Ext.selection.RowModel.prototype.onHeaderClick).call(this,m,e,n);if(Ext.isIE8){e.getView().ownerGrid.el.syncRepaint()}}});(Ext.cmd.derive("Ext.selection.TreeModel",Ext.selection.RowModel,{selectOnExpanderClick:false,constructor:function(l){var g=this;Ext.selection.RowModel.prototype.constructor.call(this,l);if(g.pruneRemoved){g.pruneRemoved=false;g.pruneRemovedNodes=true}},getStoreListeners:function(){var g=this,l=Ext.selection.RowModel.prototype.getStoreListeners.call(this);l.noderemove=g.onNodeRemove;return l},onNodeRemove:function(n,m,p){if(!p){var o=[];this.gatherSelected(m,o);if(o.length){this.deselect(o)}}},pruneRemovedOnRefresh:function(){return this.pruneRemovedNodes},vetoSelection:function(e){var n=this.view,o=this.selectOnExpanderClick,p=!o&&e.type==="click"&&e.getTarget(n.expanderSelector||(n.lockingPartner&&n.lockingPartner.expanderSelector));return p||Ext.selection.RowModel.prototype.vetoSelection.call(this,e)},privates:{gatherSelected:function(p,q){var o=p.childNodes,s,t,u;if(this.selected.containsKey(p.id)){q.push(p)}if(o){for(s=0,t=o.length;s<t;++s){u=o[s];this.gatherSelected(u,q)}}}}},1,0,0,0,["selection.treemodel"],0,[Ext.selection,"TreeModel"],0));(Ext.cmd.derive("Ext.slider.Thumb",Ext.Base,{overCls:"x-slider-thumb-over",constructor:function(l){var g=this;Ext.apply(g,l||{},{cls:"x-slider-thumb",constrain:false});g.callParent([l])},render:function(){var f=this;f.el=f.slider.innerEl.insertFirst(f.getElConfig());f.onRender()},onRender:function(){var m=this,n=m.slider.vertical?"panY":"panX",l={};l[n]=false;m.el.setTouchAction(l);if(m.disabled){m.disable()}m.initEvents()},getElConfig:function(){var l=this,m=l.slider,n={};n[m.vertical?"bottom":m.horizontalProp]=m.calculateThumbPosition(m.normalizeValue(l.value))+"%";return{style:n,id:l.id,cls:l.cls,role:"presentation"}},move:function(s,z){var v=this,y=v.el,A=v.slider,x=A.vertical?"bottom":A.horizontalProp,u,t,w;s+="%";if(!z){y.dom.style[x]=s}else{u={};u[x]=s;if(!Ext.supports.GetPositionPercentage){t={};t[x]=y.dom.style[x]}w={target:y,duration:350,from:t,to:u,scope:v,callback:v.onAnimComplete};if(z!==true){Ext.apply(w,z)}v.anim=new Ext.fx.Anim(w)}},onAnimComplete:function(){this.anim=null},enable:function(){var f=this.el;this.disabled=false;if(f){f.removeCls(this.slider.disabledCls)}},disable:function(){var f=this.el;this.disabled=true;if(f){f.addCls(this.slider.disabledCls)}},initEvents:function(){var f=this;f.tracker=new Ext.dd.DragTracker({el:f.el,onBeforeStart:f.onBeforeDragStart.bind(f),onStart:f.onDragStart.bind(f),onDrag:f.onDrag.bind(f),onEnd:f.onDragEnd.bind(f),tolerance:3,autoStart:300});f.el.hover(f.addOverCls,f.removeOverCls,f)},addOverCls:function(){var f=this;if(!f.disabled){f.el.addCls(f.overCls)}},removeOverCls:function(){this.el.removeCls(this.overCls)},onBeforeDragStart:function(e){var o=this,p=o.el,q=o.tracker.getXY(),s=o.pointerOffset=p.getXY();if(o.disabled){return false}else{s[0]+=Math.floor(p.getWidth()/2)-q[0];s[1]+=Math.floor(p.getHeight()/2)-q[1];o.slider.promoteThumb(o);return true}},onDragStart:function(e){var m=this,n=m.slider;n.onDragStart(m,e);m.el.addCls("x-slider-thumb-drag");m.dragging=m.slider.dragging=true;m.dragStartValue=m.value;n.fireEvent("dragstart",n,e,m)},onDrag:function(v){var e=this,q=e.slider,s=e.index,w=e.getValueFromTracker(),t,u;if(w!==undefined){if(e.constrain){t=q.thumbs[s+1];u=q.thumbs[s-1];if(u!==undefined&&w<=u.value){w=u.value}if(t!==undefined&&w>=t.value){w=t.value}}q.setValue(s,w,false);q.fireEvent("drag",q,v,e)}},getValueFromTracker:function(){var m=this.slider,n=this.tracker.getXY(),l;n[0]+=this.pointerOffset[0];n[1]+=this.pointerOffset[1];l=m.getTrackpoint(n);if(l!==undefined){return m.reversePixelValue(l)}},onDragEnd:function(e){var o=this,p=o.slider,n=o.value;p.onDragEnd(o,e);o.el.removeCls("x-slider-thumb-drag");o.dragging=p.dragging=false;p.fireEvent("dragend",p,e);if(o.dragStartValue!==n){p.fireEvent("changecomplete",p,n,o)}},destroy:function(){var l=this,g=this.anim;if(g){g.end()}l.el=l.tracker=l.anim=Ext.destroy(l.el,l.tracker);l.callParent()}},1,0,0,0,0,0,[Ext.slider,"Thumb"],0));(Ext.cmd.derive("Ext.slider.Tip",Ext.tip.Tip,{minWidth:10,offsets:null,align:null,position:"",defaultVerticalPosition:"left",defaultHorizontalPosition:"top",isSliderTip:true,init:function(n){var o=this,m,p;if(!o.position){o.position=n.vertical?o.defaultVerticalPosition:o.defaultHorizontalPosition}switch(o.position){case"top":p=[0,-10];m="b-t?";break;case"bottom":p=[0,10];m="t-b?";break;case"left":p=[-10,0];m="r-l?";break;case"right":p=[10,0];m="l-r?"}if(!o.align){o.align=m}if(!o.offsets){o.offsets=p}n.on({scope:o,dragstart:o.onSlide,drag:o.onSlide,dragend:o.hide,destroy:o.destroy})},onSlide:function(n,e,p){var o=this;o.update(o.getText(p));o.show();o.el.alignTo(p.el,o.align,o.offsets)},getText:function(f){return String(f.value)}},0,["slidertip"],["component","box","container","panel","tip","slidertip"],{component:true,box:true,container:true,panel:true,tip:true,slidertip:true},["widget.slidertip"],0,[Ext.slider,"Tip"],0));(Ext.cmd.derive("Ext.slider.Multi",Ext.form.field.Base,{alternateClassName:"Ext.slider.MultiSlider",vertical:false,minValue:0,maxValue:100,decimalPrecision:0,keyIncrement:1,pageSize:10,increment:0,clickRange:[5,15],clickToChange:true,animate:true,dragging:false,constrainThumbs:true,useTips:true,tipText:null,defaultBindProperty:"values",ariaRole:"slider",focusable:true,needArrowKeys:true,tabIndex:0,skipLabelForAttribute:true,focusCls:"slider-focus",childEls:["endEl","innerEl"],fieldSubTpl:['<div id="{id}" data-ref="inputEl" {inputAttrTpl}',' class="',"x-","slider {fieldCls} {vertical}",'{childElCls}"','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl foreach="ariaElAttributes"> {$}="{.}"</tpl>','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>',">",'<div id="{cmpId}-endEl" data-ref="endEl" class="x-slider-end" role="presentation">','<div id="{cmpId}-innerEl" data-ref="innerEl" class="x-slider-inner" role="presentation">',"{%this.renderThumbs(out, values)%}","</div>","</div>","</div>",{renderThumbs:function(y,q){var w=q.$comp,x=0,t=w.thumbs,u=t.length,s,v;for(;x<u;x++){s=t[x];v=s.getElConfig();v.id=w.id+"-thumb-"+x;Ext.DomHelper.generateMarkup(v,y)}},disableFormats:true}],horizontalProp:"left",initValue:function(){var n=this,q=Ext.valueFrom,p=q(n.values,[q(n.value,q(n.minValue,0))]),o=0,s=p.length;n.originalValue=p;for(;o<s;o++){n.addThumb(n.normalizeValue(p[o]))}},initComponent:function(){var w=this,s=w.tipText,q,p,v,t,u;w.thumbs=[];w.keyIncrement=Math.max(w.increment,w.keyIncrement);w.extraFieldBodyCls="x-slider-ct-"+(w.vertical?"vert":"horz");Ext.form.field.Base.prototype.initComponent.call(this);if(w.useTips){q={};if(Ext.isObject(w.useTips)){Ext.apply(q,w.useTips)}else{if(s){q.getText=s}}if(typeof(s=q.getText)==="string"){q.getText=function(e){return Ext.callback(s,null,[e],0,w,w)}}u=w.plugins=w.plugins||[];t=u.length;for(v=0;v<t;v++){if(u[v].isSliderTip){p=true;break}}if(!p){w.plugins.push(new Ext.slider.Tip(q))}}},addThumb:function(l){var m=this,n=new Ext.slider.Thumb({ownerCt:m,value:l,slider:m,index:m.thumbs.length,constrain:m.constrainThumbs,disabled:!!m.readOnly});m.thumbs.push(n);if(m.rendered){n.render()}return n},promoteThumb:function(q){var s=this.thumbStack||(this.thumbStack=Ext.Array.slice(this.thumbs)),o=s.length,n=10000,p;if(s[0]!==q){Ext.Array.remove(s,q);s.unshift(q)}for(p=0;p<o;p++){s[p].el.setStyle("zIndex",n);n-=1000}},getSubTplData:function(o){var n=this,m,p;m=Ext.apply(Ext.form.field.Base.prototype.getSubTplData.call(this,o),{$comp:n,vertical:n.vertical?"x-slider-vert":"x-slider-horz",minValue:n.minValue,maxValue:n.maxValue,value:n.value,tabIdx:n.tabIndex,childElCls:""});p=m.inputElAriaAttributes;if(p){if(!p["aria-labelledby"]){p["aria-labelledby"]=n.id+"-labelEl"}p["aria-orientation"]=n.vertical?"vertical":"horizontal";p["aria-valuemin"]=n.minValue;p["aria-valuemax"]=n.maxValue;p["aria-valuenow"]=n.value}return m},onRender:function(){var n=this,q=n.thumbs,s=q.length,o=0,p;(arguments.callee.$previous||Ext.form.field.Base.prototype.onRender).apply(this,arguments);for(o=0;o<s;o++){p=q[o];p.el=n.el.getById(n.id+"-thumb-"+o);p.onRender()}},initEvents:function(){var f=this;Ext.form.field.Base.prototype.initEvents.call(this);f.mon(f.el,{scope:f,mousedown:f.onMouseDown,keydown:f.onKeyDown})},onDragStart:Ext.emptyFn,onDragEnd:Ext.emptyFn,getTrackpoint:function(v){var w=this,q=w.vertical,s=w.innerEl,t,u,p;if(q){p="top";t=s.getHeight()}else{p=w.horizontalProp;t=s.getWidth()}v=w.transformTrackPoints(s.translatePoints(v));u=Ext.Number.constrain(v[p],0,t);return q?t-u:u},transformTrackPoints:Ext.identityFn,checkChange:Ext.emptyFn,onMouseDown:function(u){var e=this,v=false,q=0,s=e.thumbs,t=s.length,w;if(e.disabled){return}for(;!v&&q<t;q++){v=v||u.target===s[q].el.dom}e.focus();if(e.clickToChange&&!v){w=e.getTrackpoint(u.getXY());if(w!==undefined){e.onClickChange(w)}}},onClickChange:function(m){var n=this,p,o;p=n.getNearest(m);if(!p.disabled){o=p.index;n.setValue(o,Ext.util.Format.round(n.reversePixelValue(m),n.decimalPrecision),undefined,true)}},getNearest:function(v){var u=this,x=u.reversePixelValue(v),E=u.getRange()+5,B=null,y=u.thumbs,A=0,z=y.length,C,D,w;for(;A<z;A++){C=u.thumbs[A];D=C.value;w=Math.abs(D-x);if(Math.abs(w)<=E){if(B&&B.value==D&&D>x&&C.index>B.index){continue}B=C;E=w}}return B},onKeyDown:function(e){var o=this,q=o.ariaEl.dom,p,s;p=e.getKey();if(o.disabled||o.thumbs.length!==1){if(p!==e.TAB){e.preventDefault()}return}switch(p){case e.UP:case e.RIGHT:s=e.ctrlKey?o.maxValue:o.getValue(0)+o.keyIncrement;break;case e.DOWN:case e.LEFT:s=e.ctrlKey?o.minValue:o.getValue(0)-o.keyIncrement;break;case e.HOME:s=o.minValue;break;case e.END:s=o.maxValue;break;case e.PAGE_UP:s=o.getValue(0)+o.pageSize;break;case e.PAGE_DOWN:s=o.getValue(0)-o.pageSize;break}if(s!==undefined){e.stopEvent();s=o.normalizeValue(s);o.setValue(0,s,undefined,true);if(q){q.setAttribute("aria-valuenow",s)}}},normalizeValue:function(m){var l=this,n=l.zeroBasedSnapping?"snap":"snapInRange";m=Ext.Number[n](m,l.increment,l.minValue,l.maxValue);m=Ext.util.Format.round(m,l.decimalPrecision);m=Ext.Number.constrain(m,l.minValue,l.maxValue);return m},setMinValue:function(v){var w=this,s=w.thumbs,t=s.length,u=w.ariaEl.dom,q,p;w.minValue=v;for(p=0;p<t;++p){q=s[p];if(q.value<v){w.setValue(p,v,false)}}if(u){u.setAttribute("aria-valuemin",v)}w.syncThumbs()},setMaxValue:function(v){var w=this,s=w.thumbs,t=s.length,u=w.ariaEl.dom,q,p;w.maxValue=v;for(p=0;p<t;++p){q=s[p];if(q.value>v){w.setValue(p,v,false)}}if(u){u.setAttribute("aria-valuemax",v)}w.syncThumbs()},setValue:function(x,E,B,z){var u=this,v=u.thumbs,w=u.ariaEl.dom,C,y,A,D;if(Ext.isArray(x)){D=x;B=E;for(A=0,y=D.length;A<y;++A){C=v[A];if(C){u.setValue(A,D[A],B)}}return u}C=u.thumbs[x];E=u.normalizeValue(E);if(E!==C.value&&u.fireEvent("beforechange",u,E,C.value,C)!==false){C.value=E;if(u.rendered){if(Ext.isDefined(B)){B=B===false?false:B}else{B=u.animate}C.move(u.calculateThumbPosition(E),B);if(x===0&&w){w.setAttribute("aria-valuenow",E)}u.fireEvent("change",u,E,C);u.checkDirty();if(z){u.fireEvent("changecomplete",u,E,C)}}}return u},calculateThumbPosition:function(p){var o=this,n=o.minValue,m=(p-n)/o.getRange()*100;if(isNaN(m)){m=0}return m},getRatio:function(){var o=this,m=o.innerEl,p=o.vertical?m.getHeight():m.getWidth(),n=o.getRange();return n===0?p:(p/n)},getRange:function(){return this.maxValue-this.minValue},reversePixelValue:function(f){return this.minValue+(f/this.getRatio())},reversePercentageValue:function(f){return this.minValue+this.getRange()*(f/100)},onDisable:function(){var w=this,q=0,t=w.thumbs,u=t.length,s,p,v;Ext.form.field.Base.prototype.onDisable.call(this);for(;q<u;q++){s=t[q];p=s.el;s.disable();if(Ext.isIE){v=p.getXY();p.hide();w.innerEl.addCls(w.disabledCls).dom.disabled=true;if(!w.thumbHolder){w.thumbHolder=w.endEl.createChild({role:"presentation",cls:"x-slider-thumb "+w.disabledCls})}w.thumbHolder.show().setXY(v)}}},onEnable:function(){var u=this,p=0,s=u.thumbs,t=s.length,q,o;Ext.form.field.Base.prototype.onEnable.call(this);for(;p<t;p++){q=s[p];o=q.el;q.enable();if(Ext.isIE){u.innerEl.removeCls(u.disabledCls).dom.disabled=false;if(u.thumbHolder){u.thumbHolder.hide()}o.show();u.syncThumbs()}}},syncThumbs:function(){if(this.rendered){var n=this.thumbs,l=n.length,m=0;for(;m<l;m++){n[m].move(this.calculateThumbPosition(n[m].value))}}},getValue:function(f){return Ext.isNumber(f)?this.thumbs[f].value:this.getValues()},getValues:function(){var n=[],m=0,o=this.thumbs,p=o.length;for(;m<p;m++){n.push(o[m].value)}return n},getSubmitValue:function(){var f=this;return(f.disabled||!f.submitValue)?null:f.getValue()},reset:function(){var o=this,s=[].concat(o.originalValue),q=0,p=s.length,n;for(;q<p;q++){n=s[q];o.setValue(q,n)}o.clearInvalid();delete o.wasValid},setReadOnly:function(n){var o=this,q=o.thumbs,s=q.length,p=0;Ext.form.field.Base.prototype.setReadOnly.apply(this,arguments);n=o.readOnly;for(;p<s;++p){if(n){q[p].disable()}else{q[p].enable()}}},doDestroy:function(){if(this.rendered){Ext.destroy(this.thumbs)}Ext.form.field.Base.prototype.doDestroy.call(this)}},0,["multislider"],["component","box","field","multislider"],{component:true,box:true,field:true,multislider:true},["widget.multislider"],0,[Ext.slider,"Multi",Ext.slider,"MultiSlider"],0));(Ext.cmd.derive("Ext.slider.Single",Ext.slider.Multi,{alternateClassName:["Ext.Slider","Ext.form.SliderField","Ext.slider.SingleSlider","Ext.slider.Slider"],defaultBindProperty:"value",initComponent:function(){if(this.publishOnComplete){this.valuePublishEvent="changecomplete"}Ext.slider.Multi.prototype.initComponent.call(this)},publishOnComplete:true,getValue:function(){return Ext.slider.Multi.prototype.getValue.call(this,0)},setValue:function(m,o){var n=arguments,p=n.length;if(p===1||(p<=3&&typeof n[1]!=="number")){n=Ext.toArray(n);n.unshift(0)}return Ext.slider.Multi.prototype.setValue.apply(this,n)},getNearest:function(){return this.thumbs[0]}},0,["slider","sliderfield"],["component","box","field","multislider","slider","sliderfield"],{component:true,box:true,field:true,multislider:true,slider:true,sliderfield:true},["widget.slider","widget.sliderfield"],0,[Ext.slider,"Single",Ext,"Slider",Ext.form,"SliderField",Ext.slider,"SingleSlider",Ext.slider,"Slider"],0));(Ext.cmd.derive("Ext.tab.Tab",Ext.button.Button,{isTab:true,baseCls:"x-tab",closeElOverCls:"x-tab-close-btn-over",closeElPressedCls:"x-tab-close-btn-pressed",config:{rotation:"default",tabPosition:"top"},closable:true,closeText:"removable",active:false,childEls:["closeEl"],scale:false,ariaRole:"tab",tabIndex:-1,keyMap:{scope:"this",DELETE:"onDeleteKey"},_btnWrapCls:"x-tab-wrap",_btnCls:"x-tab-button",_baseIconCls:"x-tab-icon-el",_glyphCls:"x-tab-glyph",_innerCls:"x-tab-inner",_textCls:"x-tab-text",_noTextCls:"x-tab-no-text",_hasIconCls:"x-tab-icon",_activeCls:"x-tab-active",_closableCls:"x-tab-closable",overCls:"x-tab-over",_pressedCls:"x-tab-pressed",_disabledCls:"x-tab-disabled",_rotateClasses:{1:"x-tab-rotate-right",2:"x-tab-rotate-left"},_positions:{top:{"default":"top",0:"top",1:"left",2:"right"},right:{"default":"top",0:"right",1:"top",2:"bottom"},bottom:{"default":"bottom",0:"bottom",1:"right",2:"left"},left:{"default":"top",0:"left",1:"bottom",2:"top"}},_defaultRotations:{top:0,right:1,bottom:0,left:2},initComponent:function(){var f=this;if(f.card){f.setCard(f.card)}Ext.button.Button.prototype.initComponent.apply(this,arguments)},getActualRotation:function(){var f=this.getRotation();return(f!=="default")?f:this._defaultRotations[this.getTabPosition()]},updateRotation:function(){this.syncRotationAndPosition()},updateTabPosition:function(){this.syncRotationAndPosition()},syncRotationAndPosition:function(){var x=this,t=x._rotateClasses,u=x.getTabPosition(),y=x.getActualRotation(),q=x._rotateCls,w=x._rotateCls=t[y],s=x._positionCls,v=x._positionCls=x._positions[u][y];if(q!==w){if(q){x.removeCls(q)}if(w){x.addCls(w)}}if(s!==v){if(s){x.removeClsWithUI(s)}if(v){x.addClsWithUI(v)}if(x.rendered){x.updateFrame()}}if(x.rendered){x.setElOrientation()}},onAdded:function(m,l,n){Ext.button.Button.prototype.onAdded.call(this,m,l,n);this.syncRotationAndPosition()},getTemplateArgs:function(){var g=this,l=Ext.button.Button.prototype.getTemplateArgs.call(this);l.closable=g.closable;l.closeText=g.closeText;return l},beforeRender:function(){var m=this,n=m.up("tabbar"),l=m.up("tabpanel");Ext.button.Button.prototype.beforeRender.call(this);m.ariaRenderAttributes=m.ariaRenderAttributes||{};if(m.active){m.ariaRenderAttributes["aria-selected"]=true;m.addCls(m._activeCls)}else{m.ariaRenderAttributes["aria-selected"]=false}m.syncClosableCls();if(!m.minWidth){m.minWidth=(n)?n.minTabWidth:m.minWidth;if(!m.minWidth&&l){m.minWidth=l.minTabWidth}if(m.minWidth&&m.iconCls){m.minWidth+=25}}if(!m.maxWidth){m.maxWidth=(n)?n.maxTabWidth:m.maxWidth;if(!m.maxWidth&&l){m.maxWidth=l.maxTabWidth}}},onRender:function(){var f=this;f.setElOrientation();Ext.button.Button.prototype.onRender.apply(this,arguments);if(f.closable){f.closeEl.addClsOnOver(f.closeElOverCls);f.closeEl.addClsOnClick(f.closeElPressedCls)}},setElOrientation:function(){var l=this,n=l.getActualRotation(),m=l.el;if(n){m.setVertical(n===1?90:270)}else{m.setHorizontal()}},enable:function(l){var g=this;Ext.button.Button.prototype.enable.apply(this,arguments);g.removeCls(g._disabledCls);return g},disable:function(l){var g=this;Ext.button.Button.prototype.disable.apply(this,arguments);g.addCls(g._disabledCls);return g},setClosable:function(l){var g=this;l=(!arguments.length||!!l);if(g.closable!==l){g.closable=l;if(g.card){g.card.closable=l}g.syncClosableCls();if(g.rendered){g.syncClosableElements();g.updateLayout()}}},syncClosableElements:function(){var l=this,g=l.closeEl;if(l.closable){if(!g){g=l.closeEl=l.btnWrap.insertSibling({tag:"span",id:l.id+"-closeEl",cls:l.baseCls+"-close-btn",html:l.closeText},"after")}g.addClsOnOver(l.closeElOverCls);g.addClsOnClick(l.closeElPressedCls)}else{if(g){g.destroy();delete l.closeEl}}},syncClosableCls:function(){var g=this,l=g._closableCls;if(g.closable){g.addCls(l)}else{g.removeCls(l)}},setCard:function(l){var g=this;g.card=l;if(l.iconAlign){g.setIconAlign(l.iconAlign)}if(l.textAlign){g.setTextAlign(l.textAlign)}g.setText(g.title||l.title);g.setIconCls(g.iconCls||l.iconCls);g.setIcon(g.icon||l.icon);g.setGlyph(g.glyph||l.glyph)},onCloseClick:function(){var f=this;if(f.fireEvent("beforeclose",f)!==false){if(f.tabBar){if(f.tabBar.closeTab(f)===false){return}}else{f.fireClose()}}},fireClose:function(){this.fireEvent("close",this)},onEnterKey:function(e){var l=this;if(l.tabBar){l.tabBar.onClick(e,l.el);e.stopEvent();return false}},onDeleteKey:function(e){if(this.closable){this.onCloseClick();e.stopEvent();return false}},beforeClick:function(f){if(!f){this.focus()}},activate:function(m){var n=this,o=n.card,p=n.ariaEl.dom;n.active=true;n.addCls(n._activeCls);if(p){p.setAttribute("aria-selected",true)}else{n.ariaRenderAttributes=n.ariaRenderAttributes||{};n.ariaRenderAttributes["aria-selected"]=true}if(o){if(o.ariaEl.dom){o.ariaEl.dom.setAttribute("aria-expanded",true)}else{o.ariaRenderAttributes=o.ariaRenderAttributes||{};o.ariaRenderAttributes["aria-expanded"]=true}}if(m!==true){n.fireEvent("activate",n)}},deactivate:function(m){var n=this,o=n.card,p=n.ariaEl.dom;n.active=false;n.removeCls(n._activeCls);if(p){p.setAttribute("aria-selected",false)}else{n.ariaRenderAttributes=n.ariaRenderAttributes||{};n.ariaRenderAttributes["aria-selected"]=false}if(o){if(o.ariaEl.dom){o.ariaEl.dom.setAttribute("aria-expanded",false)}else{o.ariaRenderAttributes=o.ariaRenderAttributes||{};o.ariaRenderAttributes["aria-expanded"]=false}}if(m!==true){n.fireEvent("deactivate",n)}},privates:{getFramingInfoCls:function(){return this.baseCls+"-"+this.ui+"-"+this._positionCls},wrapPrimaryEl:function(f){Ext.Button.superclass.wrapPrimaryEl.call(this,f)}}},0,["tab"],["component","box","button","tab"],{component:true,box:true,button:true,tab:true},["widget.tab"],0,[Ext.tab,"Tab"],0));(Ext.cmd.derive("Ext.tab.Bar",Ext.panel.Bar,{baseCls:"x-tab-bar",componentLayout:"body",isTabBar:true,config:{tabRotation:"default",tabStretchMax:true,activateOnFocus:true},defaultType:"tab",plain:false,ensureActiveVisibleOnChange:true,ariaRole:"tablist",childEls:["body","strip"],_stripCls:"x-tab-bar-strip",_baseBodyCls:"x-tab-bar-body",renderTpl:'<tpl if="hasTabGuard">{% this.renderTabGuard(out, values, \'before\'); %}</tpl><div id="{id}-body" data-ref="body" role="presentation" class="{baseBodyCls} {baseBodyCls}-{ui} {bodyCls} {bodyTargetCls}{childElCls}"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>{%this.renderContainer(out,values)%}</div><tpl if="hasTabGuard">{% this.renderTabGuard(out, values, \'after\'); %}</tpl><div id="{id}-strip" data-ref="strip" role="presentation" class="{stripCls} {stripCls}-{ui}{childElCls}"></div>',_reverseDockNames:{left:"right",right:"left"},_layoutAlign:{top:"end",right:"begin",bottom:"begin",left:"end"},initComponent:function(){var m=this,p=m.initialConfig.layout,n=p&&p.align,o=p&&p.overflowHandler;if(m.plain){m.addCls(m.baseCls+"-plain")}Ext.panel.Bar.prototype.initComponent.call(this);m.setLayout({align:n||(m.getTabStretchMax()?"stretchmax":m._layoutAlign[m.dock]),overflowHandler:o||"scroller"});m.on({click:m.onClick,element:"el",scope:m})},ensureTabVisible:function(o){var n=this,m=n.tabPanel,p=n.layout.overflowHandler;if(n.rendered&&p&&n.tooNarrow&&p.scrollToItem){if(o||o===0){if(!o.isTab){if(Ext.isNumber(o)){o=this.items.getAt(o)}else{if(o.isComponent&&m&&m.items.contains(o)){o=o.tab}}}}if(!o){o=n.activeTab}if(o){p.scrollToItem(o)}}},initRenderData:function(){var f=this;return Ext.apply(Ext.panel.Bar.prototype.initRenderData.call(this),{bodyCls:f.bodyCls,baseBodyCls:f._baseBodyCls,bodyTargetCls:f.bodyTargetCls,stripCls:f._stripCls,dock:f.dock})},setDock:function(v){var w=this,u=w.items,s=w.ownerCt,p,t,q;u=u&&u.items;if(u){for(t=0,q=u.length;t<q;t++){p=u[t];if(p.isTab){p.setTabPosition(v)}}}if(w.rendered){w.resetItemMargins();if(s&&s.isHeader){s.resetItemMargins()}w.needsScroll=true}Ext.panel.Bar.prototype.setDock.call(this,v)},updateTabRotation:function(u){var o=this,t=o.items,s,p,q;t=t&&t.items;if(t){for(s=0,p=t.length;s<p;s++){q=t[s];if(q.isTab){q.setRotation(u)}}}if(o.rendered){o.resetItemMargins();o.needsScroll=true;o.updateLayout()}},onRender:function(){var g=this,l=this.layout.overflowHandler;Ext.panel.Bar.prototype.onRender.call(this);if(Ext.isIE8&&g.vertical){g.el.on({mousemove:g.onMouseMove,scope:g})}if(l&&l.type==="menu"){l.menu.on("click","onOverflowMenuItemClick",g)}},afterLayout:function(){this.adjustTabPositions();Ext.panel.Bar.prototype.afterLayout.apply(this,arguments)},onAdd:function(m,l){var n=this.onTabContentChange;if(this.ensureActiveVisibleOnChange){m.barListeners=m.on({scope:this,destroyable:true,glyphchange:n,iconchange:n,textchange:n})}Ext.panel.Bar.prototype.onAdd.call(this,m,l)},onAdded:function(m,l,n){if(m.isHeader){this.addCls(m.baseCls+"-"+m.ui+"-tab-bar")}Ext.panel.Bar.prototype.onAdded.call(this,m,l,n)},onRemove:function(n,l){var m=this;if(m.ensureActiveVisibleOnChange){if(!l){n.barListeners.destroy()}n.barListeners=null}if(n===m.previousTab){m.previousTab=null}Ext.panel.Bar.prototype.onRemove.call(this,n,l)},onRemoved:function(g){var l=this.ownerCt;if(l.isHeader){this.removeCls(l.baseCls+"-"+l.ui+"-tab-bar")}Ext.panel.Bar.prototype.onRemoved.call(this,g)},onTabContentChange:function(f){if(f===this.activeTab){this.ensureTabVisible(f)}},afterComponentLayout:function(n){var m=this,o=m.needsScroll,p=m.layout.overflowHandler;Ext.panel.Bar.prototype.afterComponentLayout.apply(this,arguments);if(p&&o&&m.tooNarrow&&p.scrollToItem){p.scrollToItem(m.activeTab)}delete m.needsScroll},onMouseMove:function(s){var e=this,p=e._overTab,q,o;if(s.getTarget(".x-box-scroller")){return}q=e.getTabInfoFromPoint(s.getXY());o=q.tab;if(o!==p){if(p&&p.rendered){p.onMouseLeave(s);e._overTab=null}if(o){o.onMouseEnter(s);e._overTab=o;if(!o.disabled){e.el.setStyle("cursor","pointer")}}else{e.el.setStyle("cursor","default")}}},onMouseLeave:function(e){var l=this._overTab;if(l&&l.rendered){l.onMouseLeave(e)}},getTabInfoFromPoint:function(ab){var L=this,U=L.items.items,ac=U.length,O=L.layout.innerCt,X=O.getXY(),Y=new Ext.util.Point(ab[0],ab[1]),V=0,S,af,ag,M,Q,Z,aa,ad,J,T,W,P,R,I,K,N,ae;for(;V<ac;V++){ae=U[V];S=ae.lastBox;if(!S||!ae.isTab){continue}T=X[0]+S.x;W=X[1]-O.dom.scrollTop+S.y;P=S.width;R=S.height;af=new Ext.util.Region(W,T+P,W+R,T);if(af.contains(Y)){ag=ae.closeEl;if(ag){if(L._isTabReversed===undefined){L._isTabReversed=K=(ae.btnWrap.dom.currentStyle.filter.indexOf("rotation=2")!==-1)}N=K?this._reverseDockNames[L.dock]:L.dock;ad=ag.getWidth();J=ag.getHeight();Q=L.getCloseXY(ag,T,W,P,R,ad,J,N);Z=Q[0];aa=Q[1];I=new Ext.util.Region(aa,Z+ad,aa+J,Z);M=I.contains(Y)}break}}return{tab:ae,close:M}},getCloseXY:function(A,E,v,x,D,u,z,w){var y=A.getXY(),B,C;if(w==="right"){B=E+x-((y[1]-v)+z);C=v+(y[0]-E)}else{B=E+(y[1]-v);C=v+E+D-y[0]-u}return[B,C]},closeTab:function(p){var o=this,q=p.card,n=o.tabPanel,s;if(q&&q.fireEvent("beforeclose",q)===false){return false}s=o.findNextActivatable(p);Ext.suspendLayouts();if(s){if(n){n.setActiveTab(s.card)}else{o.setActiveTab(s)}s.focus()}if(n&&q){delete p.ownerCt;q.fireEvent("close",q);n.remove(q);if(q.ownerCt!==n){p.fireClose();o.remove(p)}else{p.ownerCt=o;Ext.resumeLayouts(true);return false}}Ext.resumeLayouts(true)},findNextActivatable:function(o){var n=this,m=n.previousTab,p;if(o.active&&n.items.getCount()>1){if(m&&m!==o&&!m.disabled){p=m}else{p=o.next("tab[disabled=false]")||o.prev("tab[disabled=false]")}}return p||n.activeTab},setActiveTab:function(m,n){var l=this;if(!m.disabled&&m!==l.activeTab){if(l.activeTab){if(l.activeTab.destroyed){l.previousTab=null}else{l.previousTab=l.activeTab;l.activeTab.deactivate();l.deactivateFocusable(l.activeTab)}}m.activate();l.activateFocusable(m);l.activeTab=m;l.needsScroll=true;if(!n){l.fireEvent("change",l,m,m.card);l.updateLayout()}}},privates:{adjustTabPositions:function(){var x=this,w=x.items.items,s=w.length,y,u,q,t,v;if(!Ext.isIE8){v=x._getTabAdjustProp();while(s--){y=w[s];q=y.el;u=y.lastBox;t=y.isTab?y.getActualRotation():0;if(t===1&&y.isVisible()){q.setStyle(v,(u.x+u.width)+"px")}else{if(t===2&&y.isVisible()){q.setStyle(v,(u.x-u.height)+"px")}}}}},applyTargetCls:function(f){this.bodyTargetCls=f},_getTabAdjustProp:function(){return"left"},getTargetEl:function(){return this.body||this.frameBody||this.el},onClick:function(v,w){var e=this,u,q,s,t;if(v.getTarget(".x-box-scroller")){return}if(Ext.isIE8&&e.vertical){t=e.getTabInfoFromPoint(v.getXY());q=t.tab;s=t.close}else{u=v.getTarget("."+Ext.tab.Tab.prototype.baseCls);q=u&&Ext.getCmp(u.id);s=q&&q.closeEl&&(w===q.closeEl.dom)}if(s){v.preventDefault()}if(q&&q.isDisabled&&!q.isDisabled()){q.beforeClick(s);if(q.closable&&s){q.onCloseClick()}else{e.doActivateTab(q)}}},onOverflowMenuItemClick:function(t,e,u,q){var p=e&&e.masterComponent,s=this.layout.overflowHandler;if(p&&!p.isDisabled()){this.doActivateTab(p);if(s.menuTrigger){s.menuTrigger.focus()}}},doActivateTab:function(l){var g=this.tabPanel;if(g){if(!l.disabled){g.setActiveTab(l.card)}}else{this.setActiveTab(l)}},onFocusableContainerFocus:function(n){var o=this,p=o.mixins.focusablecontainer,e;e=p.onFocusableContainerFocus.call(o,n);if(e&&e.isTab){o.doActivateTab(e)}},onFocusableContainerFocusEnter:function(n){var o=this,p=o.mixins.focusablecontainer,e;e=p.onFocusableContainerFocusEnter.call(o,n);if(e&&e.isTab){o.doActivateTab(e)}},focusChild:function(n,q){var p=this,s=p.mixins.focusablecontainer,o;o=s.focusChild.call(p,n,q);if(p.activateOnFocus&&o&&o.isTab){p.doActivateTab(o)}}}},0,["tabbar"],["component","box","container","tabbar"],{component:true,box:true,container:true,tabbar:true},["widget.tabbar"],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.tab,"Bar"],0));(Ext.cmd.derive("Ext.tab.Panel",Ext.panel.Panel,{alternateClassName:["Ext.TabPanel"],config:{tabBar:undefined,tabPosition:"top",tabRotation:"default",tabStretchMax:true},removePanelHeader:true,plain:false,itemCls:"x-tabpanel-child",minTabWidth:undefined,maxTabWidth:undefined,deferredRender:true,_defaultTabRotation:{top:0,right:1,bottom:0,left:2},initComponent:function(){var w=this,s=w.activeTab!==null?(w.activeTab||0):null,p=w.dockedItems,v=w.header,q=w.tabBarHeaderPosition,t=w.getTabBar(),u;w.layout=new Ext.layout.container.Card(Ext.apply({owner:w,deferredRender:w.deferredRender,itemCls:w.itemCls,activeItem:s},w.layout));if(q!=null){v=w.header=Ext.apply({},v);u=v.items=(v.items?v.items.slice():[]);v.itemPosition=q;u.push(t);v.hasTabBar=true}else{p=[].concat(w.dockedItems||[]);p.push(t);w.dockedItems=p}Ext.panel.Panel.prototype.initComponent.apply(this,arguments);s=w.activeTab=w.getComponent(s);if(s){t.setActiveTab(s.tab,true)}},onRender:function(){var m=this.items.items,n=m.length,l;Ext.panel.Panel.prototype.onRender.apply(this,arguments);for(l=0;l<n;++l){m[l].getBind()}},setActiveTab:function(n){var l=this,m;if(!Ext.isObject(n)||n.isComponent){n=l.getComponent(n)}m=l.getActiveTab();if(n){Ext.suspendLayouts();if(!n.isComponent){n=l.add(n)}if(m===n||l.fireEvent("beforetabchange",l,n,m)===false){Ext.resumeLayouts(true);return m}l.activeTab=n;l.layout.setActiveItem(n);n=l.activeTab=l.layout.getActiveItem();if(n&&n!==m){l.tabBar.setActiveTab(n.tab);Ext.resumeLayouts(true);if(m!==n){l.fireEvent("tabchange",l,n,m)}}else{Ext.resumeLayouts(true)}return n}return m},setActiveItem:function(f){return this.setActiveTab(f)},getActiveTab:function(){var g=this,l=g.getComponent(g.activeTab);if(l&&g.items.indexOf(l)!==-1){g.activeTab=l}else{g.activeTab=undefined}return g.activeTab},applyTabBar:function(n){var l=this,m=(l.tabBarHeaderPosition!=null)?l.getHeaderPosition():l.getTabPosition();return new Ext.tab.Bar(Ext.apply({ui:l.ui,dock:m,tabRotation:l.getTabRotation(),vertical:(m==="left"||m==="right"),plain:l.plain,tabStretchMax:l.getTabStretchMax(),tabPanel:l},n))},updateHeaderPosition:function(l,m){var n=this.getTabBar();if(n&&(this.tabBarHeaderPosition!=null)){n.setDock(l)}Ext.panel.Panel.prototype.updateHeaderPosition.call(this,l,m)},updateTabPosition:function(g){var l=this.getTabBar();if(l&&(this.tabBarHeaderPosition==null)){l.setDock(g)}},updateTabRotation:function(g){var l=this.getTabBar();if(l){l.setTabRotation(g)}},onAdd:function(v,p){var w=this,q=Ext.apply({},v.tabConfig),s=w.getTabBar(),t,u={xtype:"tab",title:v.title,icon:v.icon,iconCls:v.iconCls,glyph:v.glyph,ui:s.ui,card:v,disabled:v.disabled,closable:v.closable,hidden:v.hidden&&!v.hiddenByLayout,tooltip:v.tooltip,tabBar:s,tabPosition:s.dock,rotation:s.getTabRotation()};if(v.closeText!==undefined){u.closeText=v.closeText}q=Ext.applyIf(q,u);v.tab=w.tabBar.insert(p,q);v.ariaRole="tabpanel";t=v.ariaEl.dom;if(t){t.setAttribute("aria-labelledby",v.tab.id)}else{v.ariaRenderAttributes=v.ariaRenderAttributes||{};v.ariaRenderAttributes["aria-labelledby"]=v.tab.id}v.on({scope:w,enable:w.onItemEnable,disable:w.onItemDisable,beforeshow:w.onItemBeforeShow,iconchange:w.onItemIconChange,iconclschange:w.onItemIconClsChange,glyphchange:w.onItemGlyphChange,titlechange:w.onItemTitleChange});if(v.isPanel){if(w.removePanelHeader){if(v.rendered){if(v.header){v.header.hide()}}else{v.header=false}}if(v.isPanel&&w.border){v.setBorder(false)}}if(w.rendered){v.getBind()}if(w.rendered&&w.loader&&w.activeTab===undefined&&w.layout.activeItem!==null){w.setActiveTab(0)}},onMove:function(n,o,m){var p=this.getTabBar();Ext.panel.Panel.prototype.onMove.call(this,n,o,m);if(p.items.indexOf(n.tab)!==m){p.move(n.tab,m)}},onItemEnable:function(f){f.tab.enable()},onItemDisable:function(f){f.tab.disable()},onItemBeforeShow:function(f){if(f!==this.activeTab){this.setActiveTab(f);return false}},onItemGlyphChange:function(l,g){l.tab.setGlyph(g)},onItemIconChange:function(g,l){g.tab.setIcon(l)},onItemIconClsChange:function(g,l){g.tab.setIconCls(l)},onItemTitleChange:function(l,g){l.tab.setText(g)},onRemove:function(m,l){var n=this;m.un({scope:n,enable:n.onItemEnable,disable:n.onItemDisable,beforeshow:n.onItemBeforeShow,iconchange:n.onItemIconChange,iconclschange:n.onItemIconClsChange,glyphchange:n.onItemGlyphChange,titlechange:n.onItemTitleChange});if(m.tab&&!n.destroying&&m.tab.ownerCt===n.tabBar){n.tabBar.remove(m.tab)}},enable:function(){var l=this,n=l.activeTab!==null?(l.activeTab||0):null,m=l.disabled;Ext.panel.Panel.prototype.enable.apply(this,arguments);if(m){n=n.isComponent?n:l.getComponent(n);if(n){l.getTabBar().setActiveTab(n.tab)}}},privates:{doRemove:function(m,o){var n=this,p;if(n.removingAll||n.destroying||n.items.getCount()===1){n.activeTab=null}else{if(m.tab&&(p=n.tabBar.items.indexOf(n.tabBar.findNextActivatable(m.tab)))!==-1){n.setActiveTab(p)}}Ext.panel.Panel.prototype.doRemove.call(this,m,o);if(m.tab){delete m.tab.card;delete m.tab}}}},0,["tabpanel"],["component","box","container","panel","tabpanel"],{component:true,box:true,container:true,panel:true,tabpanel:true},["widget.tabpanel"],0,[Ext.tab,"Panel",Ext,"TabPanel"],0));(Ext.cmd.derive("Ext.toolbar.Fill",Ext.Component,{alternateClassName:"Ext.Toolbar.Fill",ariaRole:"presentation",isFill:true,flex:1},0,["tbfill"],["component","box","tbfill"],{component:true,box:true,tbfill:true},["widget.tbfill"],0,[Ext.toolbar,"Fill",Ext.Toolbar,"Fill"],0));(Ext.cmd.derive("Ext.toolbar.Spacer",Ext.Component,{alternateClassName:"Ext.Toolbar.Spacer",baseCls:"x-toolbar-spacer",ariaRole:"presentation"},0,["tbspacer"],["component","box","tbspacer"],{component:true,box:true,tbspacer:true},["widget.tbspacer"],0,[Ext.toolbar,"Spacer",Ext.Toolbar,"Spacer"],0));(Ext.cmd.derive("Ext.tree.Column",Ext.grid.column.Column,{tdCls:"x-grid-cell-treecolumn",autoLock:true,lockable:false,draggable:false,hideable:false,iconCls:"x-tree-icon",checkboxCls:"x-tree-checkbox",elbowCls:"x-tree-elbow",expanderCls:"x-tree-expander",textCls:"x-tree-node-text",innerCls:"x-grid-cell-inner-treecolumn",customIconCls:"x-tree-icon-custom",isTreeColumn:true,cellTpl:['<tpl for="lines">','<div class="{parent.childCls} {parent.elbowCls}-img ','{parent.elbowCls}-<tpl if=".">line<tpl else>empty</tpl>" role="presentation"></div>',"</tpl>",'<div class="{childCls} {elbowCls}-img {elbowCls}','<tpl if="isLast">-end</tpl><tpl if="expandable">-plus {expanderCls}</tpl>" role="presentation"></div>','<tpl if="checked !== null">','<div role="button" {ariaCellCheckboxAttr}',' class="{childCls} {checkboxCls}<tpl if="checked"> {checkboxCls}-checked</tpl>"></div>',"</tpl>",'<tpl if="glyph">','<span class="{baseIconCls}" ','<tpl if="glyphFontFamily">','style="font-family:{glyphFontFamily}"',"</tpl>",">{glyph}</span>","<tpl else>",'<tpl if="icon">','<img src="{blankUrl}"',"<tpl else>","<div","</tpl>",' role="presentation" class="{childCls} {baseIconCls} {customIconCls} ','{baseIconCls}-<tpl if="leaf">leaf<tpl else><tpl if="expanded">parent-expanded<tpl else>parent</tpl></tpl> {iconCls}" ','<tpl if="icon">style="background-image:url({icon})"/><tpl else>></div></tpl>',"</tpl>",'<tpl if="href">','<a href="{href}" role="link" target="{hrefTarget}" class="{textCls} {childCls}">{value}</a>',"<tpl else>",'<span class="{textCls} {childCls}">{value}</span>',"</tpl>"],uiFields:{checked:1,icon:1,iconCls:1},rowFields:{expanded:1,loaded:1,expandable:1,leaf:1,loading:1,qtip:1,qtitle:1,cls:1},initComponent:function(){var f=this;f.rendererScope=f.scope;f.setupRenderer();f.innerRenderer=f.renderer;f.renderer=f.treeRenderer;Ext.grid.column.Column.prototype.initComponent.call(this);f.scope=f;f.hasCustomRenderer=f.innerRenderer&&f.innerRenderer.length>1},treeRenderer:function(u,B,x,A,z,t,v){var w=this,C=x.get("cls"),y;if(B&&C){B.tdCls+=" "+C}y=w.initTemplateRendererData(u,B,x,A,z,t,v);return w.lookupTpl("cellTpl").apply(y)},initTemplateRendererData:function(L,H,C,G,D,K,N){var O=this,F=O.innerRenderer,E=C.data,M=C.parentNode,J=N.rootVisible,I=[],B,z,A;while(M&&(J||M.data.depth>0)){B=M.data;I[J?B.depth:B.depth-1]=M.isLastVisible()?0:1;M=M.parentNode}if(H){H.iconCls=H.icon=H.glyph=null}else{H={}}L=F?F.apply(O.rendererScope,arguments):L;z=H.glyph||E.glyph;if(z){z=Ext.Glyph.fly(z);A=z.fontFamily;z=z.character}return{record:C,baseIconCls:O.iconCls,customIconCls:(E.icon||E.iconCls)?O.customIconCls:"",glyph:z,glyphFontFamily:A,iconCls:H.iconCls||E.iconCls,icon:H.icon||E.icon,checkboxCls:O.checkboxCls,checked:E.checked,elbowCls:O.elbowCls,expanderCls:O.expanderCls,textCls:O.textCls,leaf:E.leaf,expandable:C.isExpandable(),expanded:E.expanded,isLast:C.isLastVisible(),blankUrl:Ext.BLANK_IMAGE_URL,href:E.href,hrefTarget:E.hrefTarget,lines:I,metaData:H,childCls:O.getChildCls?O.getChildCls()+" ":"",value:L}},shouldUpdateCell:function(s,p){var o=this,q=0,t,u;if(o.hasCustomRenderer){return 1}if(p){t=p.length;for(;q<t;++q){u=p[q];if(o.rowFields[u]){return 1}if(o.uiFields[u]){return 2}}}return Ext.grid.column.Column.prototype.shouldUpdateCell.call(this,s,p)}},0,["treecolumn"],["component","box","container","headercontainer","gridcolumn","treecolumn"],{component:true,box:true,container:true,headercontainer:true,gridcolumn:true,treecolumn:true},["widget.treecolumn"],0,[Ext.tree,"Column"],0));(Ext.cmd.derive("Ext.tree.NavigationModel",Ext.grid.NavigationModel,{initKeyNav:function(n){var l=this,m=l.view.ownerGrid.columns;l.isTreeGrid=m&&m.length>1;Ext.grid.NavigationModel.prototype.initKeyNav.call(this,n);l.view.grid.on({columnschanged:l.onColumnsChanged,scope:l})},onKeyNavCreate:function(l){var g=this.onAsterisk;l.map.addBinding([{key:"8",shift:true,handler:g,scope:this},{key:Ext.event.Event.NUM_MULTIPLY,handler:g,scope:this}])},onColumnsChanged:function(){this.isTreeGrid=this.view.ownerGrid.getVisibleColumnManager().getColumns().length>1},onCellClick:function(q,t,w,s,v,p,u){Ext.grid.NavigationModel.prototype.onCellClick.call(this,q,t,w,s,v,p,u);return !u.nodeToggled},onKeyLeft:function(m){var n=this,o=m.view,p=n.record;if(n.isTreeGrid&&!m.ctrlKey){return Ext.grid.NavigationModel.prototype.onKeyLeft.call(this,m)}if(m.position.column.isTreeColumn&&p.isExpanded()){o.collapse(p)}else{p=p.parentNode;if(p&&!(p.isRoot()&&!o.rootVisible)){n.setPosition(p,null,m)}}},onKeyRight:function(l){var m=this,n=m.record;if(m.isTreeGrid&&!l.ctrlKey){return Ext.grid.NavigationModel.prototype.onKeyRight.call(this,l)}if(!n.isLeaf()){if(l.position.column.isTreeColumn&&!n.isExpanded()){l.view.expand(n)}else{if(n.isExpanded()){n=n.childNodes[0];if(n){m.setPosition(n)}}}}},onKeyEnter:function(f){if(this.record.data.checked!=null){this.toggleCheck(f)}else{Ext.grid.NavigationModel.prototype.onKeyEnter.call(this,f)}},onKeySpace:function(f){if(this.record.data.checked!=null){this.toggleCheck(f)}else{Ext.grid.NavigationModel.prototype.onKeySpace.call(this,f)}},toggleCheck:function(f){this.view.onCheckChange(f)},onAsterisk:function(f){this.view.ownerGrid.expandAll()}},0,0,0,0,["view.navigation.tree"],0,[Ext.tree,"NavigationModel"],0));(Ext.cmd.derive("Ext.tree.View",Ext.view.Table,{config:{selectionModel:{type:"treemodel"}},isTreeView:true,loadingCls:"x-grid-tree-loading",expandedCls:"x-grid-tree-node-expanded",leafCls:"x-grid-tree-node-leaf",expanderSelector:".x-tree-expander",checkboxSelector:".x-tree-checkbox",expanderIconOverCls:"x-tree-expander-over",nodeAnimWrapCls:"x-tree-animator-wrap",ariaRole:"treegrid",loadMask:false,rootVisible:true,expandDuration:250,collapseDuration:250,toggleOnDblClick:true,stripeRows:false,treeRowTpl:["{%","this.processRowValues(values);","this.nextTpl.applyOut(values, out, parent);","%}",{priority:10,processRowValues:function(l){var m=l.record,n=l.view;l.rowAttr["data-qtip"]=m.get("qtip")||"";l.rowAttr["data-qtitle"]=m.get("qtitle")||"";l.rowAttr["aria-level"]=m.getDepth()+1;if(m.isLeaf()){l.rowClasses.push(n.leafCls)}else{if(m.isExpanded()){l.rowClasses.push(n.expandedCls);l.rowAttr["aria-expanded"]=true}else{l.rowAttr["aria-expanded"]=false}}if(m.isLoading()){l.rowClasses.push(n.loadingCls)}}}],initComponent:function(){var f=this;if(f.bufferedRenderer){f.animate=false}else{if(f.initialConfig.animate===undefined){f.animate=Ext.enableFx}}f.store=f.panel.getStore();f.onRootChange(f.store.getRoot());f.animQueue={};f.animWraps={};Ext.view.Table.prototype.initComponent.call(this);f.store.setRootVisible(f.rootVisible);f.addRowTpl(f.lookupTpl("treeRowTpl"))},onFillComplete:function(o,p,s){var q=this,t=q.store,u=t.indexOf(s[0]);p.triggerUIUpdate();if(!s.length||u===-1){return}q.onAdd(q.store,s,u);q.refreshPartner()},refreshPartner:function(){var f=this.lockingPartner;if(f){f.refresh()}},afterRender:function(){var f=this;Ext.view.Table.prototype.afterRender.call(this);f.el.on({scope:f,delegate:f.expanderSelector,mouseover:f.onExpanderMouseOver,mouseout:f.onExpanderMouseOut})},processUIEvent:function(e){if(e.getTarget("."+this.nodeAnimWrapCls,this.el)){return false}return Ext.view.Table.prototype.processUIEvent.call(this,e)},setRootNode:function(f){this.node=f},getChecked:function(){var f=[];this.node.cascade(function(e){if(e.get("checked")){f.push(e)}});return f},isItemChecked:function(f){return f.get("checked")},createAnimWrap:function(s,q){var n=this,o=n.getNode(s),p;p=Ext.fly(o).insertSibling({role:"presentation",tag:"div",cls:n.nodeAnimWrapCls},"after");return{record:s,node:o,el:p,expanding:false,collapsing:false,animateEl:p,targetEl:p}},getAnimWrap:function(m,p){if(!this.animate){return null}var o=this.animWraps,n=o[m.internalId];if(p!==false){while(!n&&m){m=m.parentNode;if(m){n=o[m.internalId]}}}return n},doAdd:function(D,z){var y=this,B=D[0],x=B.parentNode,w=y.all,F,C=y.getAnimWrap(x),H,I,A,G,E;if(!C||!C.expanding){return Ext.view.Table.prototype.doAdd.call(this,D,z)}G=y.bufferRender(D,z,true);E=G.children;x=C.record;H=C.targetEl;I=H.dom.childNodes;A=I.length;F=z-y.indexInStore(x)-1;if(!A||F>=A){H.appendChild(G.fragment,true)}else{Ext.fly(I[F]).insertSibling(E,"before",true)}w.insert(z,E);return E},onRemove:function(y,w,u){var s=this,q,t,v=s.hasListeners.remove,x;if(s.viewReady){q=s.store.getCount()===0;if(s.bufferedRenderer){return Ext.view.Table.prototype.onRemove.call(this,y,w,u)}if(v){x=this.all.slice(u,u+w.length)}if(q){s.refresh()}else{for(t=w.length-1,u+=t;t>=0;--t,--u){s.doRemove(w[t],u)}s.refreshSizePending=true}if(v){s.fireItemMutationEvent("itemremove",w,u,x,s)}}},doRemove:function(u,s){var v=this,q=v.all,t=v.getAnimWrap(u),w=q.item(s),p=w?w.dom:null;if(!p||!t||!t.collapsing){return Ext.view.Table.prototype.doRemove.call(this,u,s)}t.targetEl.dom.insertBefore(p,t.targetEl.dom.firstChild);q.removeElement(s)},onBeforeExpand:function(o,q,p){var n=this,s;if(n.rendered&&n.all.getCount()&&n.animate){if(n.getNode(o)){s=n.getAnimWrap(o,false);if(!s){s=n.animWraps[o.internalId]=n.createAnimWrap(o);s.animateEl.setHeight(0)}else{if(s.collapsing){s.targetEl.select(n.itemSelector).destroy()}}s.expanding=true;s.collapsing=false}}},onExpand:function(t){var u=this,w=u.animQueue,A=t.getId(),y=u.getNode(t),v=y?u.indexOf(y):-1,x,z,s;if(u.singleExpand){u.ensureSingleExpand(t)}if(v===-1){return}x=u.getAnimWrap(t,false);if(!x){t.isExpandingOrCollapsing=false;u.fireEvent("afteritemexpand",t,v,y);return}z=x.animateEl;s=x.targetEl;z.stopAnimation();w[A]=true;Ext.on("idle",function(){z.dom.style.height="0px"},null,{single:true});z.animate({from:{height:0},to:{height:s.dom.scrollHeight},duration:u.expandDuration,listeners:{afteranimate:function(){var f=s.dom.childNodes,e=Ext.Element.getActiveElement();if(f.length){if(!s.contains(e)){e=null}x.el.insertSibling(f,"before",true);if(e){Ext.fly(e).focus()}}x.el.destroy();u.animWraps[x.record.internalId]=w[A]=null}},callback:function(){t.isExpandingOrCollapsing=false;if(!u.destroyed){u.refreshSize(true)}u.fireEvent("afteritemexpand",t,v,y)}})},onBeforeCollapse:function(p,t,s,v,q){var w=this,u;if(w.rendered&&w.all.getCount()){if(w.animate){if(p.isVisible()){u=w.getAnimWrap(p);if(!u){u=w.animWraps[p.internalId]=w.createAnimWrap(p,s)}else{if(u.expanding){u.targetEl.select(this.itemSelector).destroy()}}u.expanding=false;u.collapsing=true;u.callback=v;u.scope=q}}else{w.onCollapseCallback=v;w.onCollapseScope=q}}},onCollapse:function(s){var y=this,w=y.animQueue,v=s.getId(),q=y.getNode(s),t=q?y.indexOf(q):-1,u=y.getAnimWrap(s),x;if(!y.all.getCount()||!s.isVisible()){return}if(!u){s.isExpandingOrCollapsing=false;y.fireEvent("afteritemcollapse",s,t,q);Ext.callback(y.onCollapseCallback,y.onCollapseScope);y.onCollapseCallback=y.onCollapseScope=null;return}x=u.animateEl;w[v]=true;x.stopAnimation();x.animate({to:{height:0},duration:y.collapseDuration,listeners:{afteranimate:function(){u.el.destroy();y.animWraps[u.record.internalId]=w[v]=null}},callback:function(){s.isExpandingOrCollapsing=false;if(!y.destroyed){y.refreshSize(true)}y.fireEvent("afteritemcollapse",s,t,q);Ext.callback(u.callback,u.scope);u.callback=u.scope=null}})},isAnimating:function(f){return !!this.animQueue[f.getId()]},expand:function(q,s,v,p){var w=this,t=!!w.animate,u;if(!t||!q.isExpandingOrCollapsing){if(!q.isLeaf()){q.isExpandingOrCollapsing=t}Ext.suspendLayouts();u=q.expand(s,v,p);Ext.resumeLayouts(true);return u}},collapse:function(q,s,u,p){var o=this,t=!!o.animate;if(!t||!q.isExpandingOrCollapsing){if(!q.isLeaf()){q.isExpandingOrCollapsing=t}return q.collapse(s,u,p)}},toggle:function(o,p,m,n){if(o.isExpanded()){this.collapse(o,p,m,n)}else{this.expand(o,p,m,n)}},onItemDblClick:function(s,u,p,t){var e=this,q=e.editingPlugin;Ext.view.Table.prototype.onItemDblClick.call(this,s,u,p,t);if(e.toggleOnDblClick&&s.isExpandable()&&!(q&&q.clicksToEdit===2)){e.toggle(s)}},onCellClick:function(v,s,t,w,u,x){var y=this,e=x.position.column;if(e.isTreeColumn){if(x.getTarget(y.checkboxSelector,v)&&t.get("checked")!=null){y.onCheckChange(x);if(e.stopSelection){x.stopSelection=true}}else{if(x.getTarget(y.expanderSelector,v)&&t.isExpandable()){y.getNavigationModel().setPosition(x.position);y.toggle(t,x.ctrlKey);x.nodeToggled=true}}return Ext.view.Table.prototype.onCellClick.call(this,v,s,t,w,u,x)}},onCheckChange:function(s){var e=this,p=s.record,q=p.get("checked"),o;if(q===1){o=true}else{o=!q}e.setChecked(p,o,s)},setChecked:function(Q,E,e,P){var J=this,K=J.checkPropagationFlags[J.ownerGrid.checkPropagation.toLowerCase()],G=Q.data.checked,N=J.ownerGrid.triStateCheckbox?1:false,L=(!P||P.propagateCheck!==false)&&(K&1),S=(!P||P.checkParent!==false)&&(K&2),O,M,D,I,R,H=0,C,F;if(J.fireEvent("beforecheckchange",Q,G,e)===false){return}if(E!==1&&L){R=Q.childNodes;C=R.length;for(F=0;F<C;F++){J.setChecked(R[F],E,e,{checkParent:false});if(R[F].get("checked")===E){H++}}if(H!==C){E=H?N:false}}if(Q.get("data")!==E){Q.set("checked",E,P);J.fireEvent("checkchange",Q,E,e);if(S&&(O=Q.parentNode)&&(M=O.data.checked)!=null){R=O.childNodes;C=R.length;if(E===N){M=N}else{if(C===1){M=E}else{D=I=false;for(F=0;!(D&&I)&F<C;F++){if(R[F].data.checked===1){D=I=true}else{if(!R[F].data.checked){I=true}else{D=true}}}M=D&&I?N:(D?true:false)}}J.setChecked(O,M,e,{propagateCheck:false})}}},onExpanderMouseOver:function(e){e.getTarget(this.cellSelector,10,true).addCls(this.expanderIconOverCls)},onExpanderMouseOut:function(e){e.getTarget(this.cellSelector,10,true).removeCls(this.expanderIconOverCls)},getStoreListeners:function(){return Ext.apply(Ext.view.Table.prototype.getStoreListeners.call(this),{rootchange:this.onRootChange,fillcomplete:this.onFillComplete})},onBindStore:function(t,q,p,o){var s=o&&o.getRootNode(),u=t&&t.getRootNode();Ext.view.Table.prototype.onBindStore.call(this,t,q,p,o);if(u!==s){this.onRootChange(u,s)}},onRootChange:function(m,p){var n=this,o=n.grid;if(p){n.rootListeners.destroy();n.rootListeners=null}if(m){n.rootListeners=m.on({beforeexpand:n.onBeforeExpand,expand:n.onExpand,beforecollapse:n.onBeforeCollapse,collapse:n.onCollapse,destroyable:true,scope:n});o.addRelayers(m)}},ensureSingleExpand:function(g){var l=g.parentNode;if(l){l.eachChild(function(e){if(e!==g&&e.isExpanded()){e.collapse()}})}},privates:{checkPropagationFlags:{none:0,down:1,up:2,both:3},deferRefreshForLoad:function(p){var n=Ext.view.Table.prototype.deferRefreshForLoad.call(this,p),o,m;if(n){o=p.lastOptions;m=o&&o.node;if(m&&m!==p.getRoot()){n=false}}return n}}},0,["treeview"],["component","box","dataview","tableview","gridview","treeview"],{component:true,box:true,dataview:true,tableview:true,gridview:true,treeview:true},["widget.treeview"],0,[Ext.tree,"View"],0));(Ext.cmd.derive("Ext.tree.Panel",Ext.panel.Table,{alternateClassName:["Ext.tree.TreePanel","Ext.TreePanel"],viewType:"treeview",treeCls:"x-tree-panel",rowLines:false,lines:true,useArrows:false,singleExpand:false,ddConfig:{enableDrag:true,enableDrop:true},rootVisible:true,displayField:"text",root:null,checkPropagation:"none",normalCfgCopy:["displayField","root","singleExpand","useArrows","lines","rootVisible","scroll"],lockedCfgCopy:["displayField","root","singleExpand","useArrows","lines","rootVisible"],isTree:true,arrowCls:"x-tree-arrows",linesCls:"x-tree-lines",noLinesCls:"x-tree-no-lines",autoWidthCls:"x-autowidth-table",constructor:function(f){f=f||{};if(f.animate===undefined){f.animate=Ext.isBoolean(this.animate)?this.animate:Ext.enableFx}this.enableAnimations=f.animate;delete f.animate;Ext.panel.Table.prototype.constructor.call(this,f)},initComponent:function(){var o=this,q=[o.treeCls],p,n,s;if(o.useArrows){q.push(o.arrowCls);o.lines=false}if(o.lines){q.push(o.linesCls)}else{if(!o.useArrows){q.push(o.noLinesCls)}}p=o.applyStore(o.store);if(!p.getRoot()){p.setRoot({})}p.setRootVisible(o.rootVisible);if(!o.columns){o.isAutoTree=n=true}o.viewConfig=Ext.apply({rootVisible:o.rootVisible,animate:o.enableAnimations,singleExpand:o.singleExpand,node:p.getRoot(),navigationModel:"tree",isAutoTree:n},o.viewConfig);if(n){o.addCls(o.autoWidthCls);o.columns=[{xtype:"treecolumn",text:o.hideHeaders===true?"Name":null,flex:1,dataIndex:o.displayField}]}if(o.cls){q.push(o.cls)}o.cls=q.join(" ");Ext.panel.Table.prototype.initComponent.call(this);s=o.getView();o.relayEvents(s,["beforecheckchange","checkchange","afteritemexpand","afteritemcollapse"])},applyStore:function(l){var g=this;if(Ext.isString(l)){l=g.store=Ext.StoreMgr.lookup(l)}else{if(!l||!l.isStore){l=Ext.apply({type:"tree",proxy:"memory"},l);if(g.root){l.root=g.root}if(g.fields){l.fields=g.fields}else{if(g.model){l.model=g.model}}if(g.folderSort){l.folderSort=g.folderSort}l=g.store=Ext.StoreMgr.lookup(l)}else{if(g.root){l=g.store=Ext.data.StoreManager.lookup(l);l.setRoot(g.root);if(g.folderSort!==undefined){l.folderSort=g.folderSort;l.sort()}}}}return l},setRoot:function(f){this.store.setRoot(f)},setStore:function(l){var g=this;l=g.applyStore(l);if(!l.getRoot()){l.setRoot({})}l.setRootVisible(g.rootVisible);if(g.enableLocking){g.reconfigure(l)}else{if(g.view){g.view.setRootNode(l.getRootNode())}g.bindStore(l)}},bindStore:function(o,n){var m=this,p=o.getRoot();Ext.panel.Table.prototype.bindStore.apply(this,arguments);o.singleExpand=m.singleExpand;m.storeListeners=m.mon(o,{destroyable:true,rootchange:m.onRootChange,scope:m});m.storeRelayers=m.relayEvents(o,["beforeload","load"]);if(!m.rootVisible&&!o.autoLoad&&!(p.isExpanded()||p.isLoading())){if(p.isLoaded()){p.data.expanded=true;o.onNodeExpand(p,p.childNodes)}else{if(o.autoLoad!==false&&!o.hasPendingLoad()){p.data.expanded=false;p.expand()}}}o.ownerTree=m;if(!n){m.view.setRootNode(p)}},addRelayers:function(g){var l=this;if(l.rootRelayers){l.rootRelayers.destroy();l.rootRelayers=null}l.rootRelayers=l.mon(g,{destroyable:true,append:l.createRelayer("itemappend"),remove:l.createRelayer("itemremove"),move:l.createRelayer("itemmove",[0,4]),insert:l.createRelayer("iteminsert"),beforeappend:l.createRelayer("beforeitemappend"),beforeremove:l.createRelayer("beforeitemremove"),beforemove:l.createRelayer("beforeitemmove"),beforeinsert:l.createRelayer("beforeiteminsert"),expand:l.createRelayer("itemexpand",[0,1]),collapse:l.createRelayer("itemcollapse",[0,1]),beforeexpand:l.createRelayer("beforeitemexpand",[0,1]),beforecollapse:l.createRelayer("beforeitemcollapse",[0,1]),scope:l})},unbindStore:function(){var g=this,l=g.store;if(l){Ext.panel.Table.prototype.unbindStore.call(this);Ext.destroy(g.storeListeners,g.storeRelayers,g.rootRelayers);delete l.ownerTree;l.singleExpand=null}},setRootNode:function(){return this.store.setRoot.apply(this.store,arguments)},getRootNode:function(){return this.store.getRoot()},onRootChange:function(f){this.view.setRootNode(f)},getChecked:function(){return this.getView().getChecked()},isItemChecked:function(f){return f.get("checked")},expandNode:function(o,p,m,n){return this.getView().expand(o,p,m,n||this)},collapseNode:function(o,p,m,n){return this.getView().collapse(o,p,m,n||this)},expandAll:function(m,o){var n=this,p=n.getRootNode();if(p){Ext.suspendLayouts();p.expand(true,m,o||n);Ext.resumeLayouts(true)}},collapseAll:function(n,p){var o=this,q=o.getRootNode(),s=o.getView();if(q){Ext.suspendLayouts();p=p||o;if(s.rootVisible){q.collapse(true,n,p)}else{q.collapseChildren(true,n,p)}Ext.resumeLayouts(true)}},expandPath:function(K,I){var D=arguments,C=this,B=C.view,A=(I&&I.field)||C.store.model.idProperty,z,J,G=(I&&I.separator)||"/",O,L,E,F,M,H,N;if(I&&typeof I==="object"){A=I.field||C.store.model.idProperty;G=I.separator||"/";O=I.callback;L=I.scope;z=I.select;J=I.focus}else{A=D[1]||C.store.model.idProperty;G=D[2]||"/";O=D[3];L=D[4]}if(Ext.isEmpty(K)){return Ext.callback(O,L||C,[false,null])}M=K.split(G);H=!M[0];if(H){E=C.getRootNode();F=1}else{E=C.store.findNode(A,M[0]);F=0}if(!E||(H&&(E.get(A)+"")!==M[1])){return Ext.callback(O,L||C,[false,E])}N=function(f){var m=this,l,e,g;if(++F===M.length){if(z){B.getSelectionModel().select(m)}if(J){B.getNavigationModel().setPosition(m,0)}return Ext.callback(O,L||C,[true,m,B.getNode(m)])}for(e=0,l=f?f.length:0;e<l;e++){m=f[e];g=m.get(A);if(g||g===0){g=g.toString()}if(g===M[F]){return m.expand(false,N)}}m=this;Ext.callback(O,L||C,[false,m,B.getNode(m)])};E.expand(false,N)},ensureVisible:function(G,F){if(G.isEntity||typeof G==="number"){return Ext.panel.Table.prototype.ensureVisible.call(this,G,F)}var z=this,y=(F&&F.field)||z.store.model.idProperty,A=(F&&F.separator)||"/",w,H,I,E,x,D,B,C=function(g,e,f,l){if(!l&&g&&e){l=e.findChild(y,x)}if(l){z.doEnsureVisible(l,F)}else{Ext.callback(w,H||z,[false,e])}};if(F){w=F.callback;H=F.scope}I=G.split(A);E=!I[0];x=I.pop();if(I.length&&!(E&&I.length===1)){z.expandPath(I.join(A),y,A,C)}else{D=z.store.findNode(y,x);if(D){B=D.parentNode;if(B&&!B.isExpanded()){B.expand()}C(true,null,null,D)}else{Ext.callback(w,H||z,[false,null])}}},selectPath:function(o,p,q,n,s){this.ensureVisible(o,{field:p,separator:q,select:true,callback:n,scope:s})}},1,["treepanel"],["component","box","container","panel","tablepanel","treepanel"],{component:true,box:true,container:true,panel:true,tablepanel:true,treepanel:true},["widget.treepanel"],0,[Ext.tree,"Panel",Ext.tree,"TreePanel",Ext,"TreePanel"],0));(Ext.cmd.derive("Ext.view.DragZone",Ext.dd.DragZone,{containerScroll:false,constructor:function(q){var n=this,s,o,p;Ext.apply(n,q);if(!n.ddGroup){n.ddGroup="view-dd-zone-"+n.view.id}s=n.view;s.setItemsDraggable(true);o=s.ownerCt;if(o){p=o.getTargetEl().dom}else{p=s.el.dom.parentNode}Ext.dd.DragZone.prototype.constructor.call(this,p);n.ddel=document.createElement("div");n.ddel.className="x-grid-dd-wrap"},init:function(n,s,p){var o=this,q={itemmousedown:o.onItemMouseDown,scope:o};if(Ext.supports.Touch){q.itemlongpress=o.onItemLongPress;q.contextmenu={element:"el",fn:o.onViewContextMenu}}o.initTarget(n,s,p);o.view.mon(o.view,q)},onValidDrop:function(m,n,e){Ext.dd.DragZone.prototype.onValidDrop.call(this,m,n,e);if(!m.el.contains(Ext.Element.getActiveElement())){m.el.focus()}},onViewContextMenu:function(e){if(e.pointerType!=="mouse"){e.preventDefault()}},onItemMouseDown:function(p,q,e,o,s){if(s.pointerType==="mouse"){this.onTriggerGesture(p,q,e,o,s)}},onItemLongPress:function(p,q,e,o,s){if(s.pointerType!=="mouse"){this.onTriggerGesture(p,q,e,o,s)}},onTriggerGesture:function(q,s,u,p,t){var e;if((t.pointerType==="touch"&&t.type!=="longpress")||(t.position&&t.position.isEqual(t.view.actionPosition))){return}if(!this.isPreventDrag(t,s,u,p)){e=q.getNavigationModel();if(t.position){e.setPosition(t.position)}else{e.setPosition(p)}this.handleMouseDown(t)}},isPreventDrag:function(e,p,n,o){return !!e.isInputFieldEvent},getDragData:function(e){var n=this.view,m=e.getTarget(n.getItemSelector());if(m){return{copy:n.copy||(n.allowCopy&&e.ctrlKey),event:e,view:n,ddel:this.ddel,item:m,records:n.getSelectionModel().getSelection(),fromPosition:Ext.fly(m).getXY()}}},onInitDrag:function(t,v){var p=this,w=p.dragData,q=w.view,u=q.getSelectionModel(),s=q.getRecord(w.item);if(!u.isSelected(s)){u.selectWithEvent(s,p.DDMInstance.mousedownEvent)}w.records=u.getSelection();Ext.fly(p.ddel).setHtml(p.getDragText());p.proxy.update(p.ddel);p.onStartDrag(t,v);return true},getDragText:function(){var f=this.dragData.records.length;return Ext.String.format(this.dragText,f,f===1?"":"s")},getRepairXY:function(e,l){return l?l.fromPosition:false}},1,0,0,0,0,0,[Ext.view,"DragZone"],0));(Ext.cmd.derive("Ext.window.Toast",Ext.window.Window,{isToast:true,cls:"x-toast",bodyPadding:10,autoClose:true,plain:false,draggable:false,resizable:false,shadow:false,focus:Ext.emptyFn,anchor:null,useXAxis:false,align:"t",alwaysOnTop:true,spacing:6,paddingX:30,paddingY:10,slideInAnimation:"easeIn",slideBackAnimation:"bounceOut",slideInDuration:500,slideBackDuration:500,hideDuration:500,autoCloseDelay:3000,stickOnClick:false,stickWhileHover:true,closeOnMouseDown:false,closable:false,focusable:false,isHiding:false,isFading:false,destroyAfterHide:false,closeOnMouseOut:false,xPos:0,yPos:0,constructor:function(f){f=f||{};if(f.animate===undefined){f.animate=Ext.isBoolean(this.animate)?this.animate:Ext.enableFx}this.enableAnimations=f.animate;delete f.animate;Ext.window.Window.prototype.constructor.call(this,f)},initComponent:function(){var f=this;if(f.autoClose&&f.closable==null){f.closable=false}f.updateAlignment(f.align);f.setAnchor(f.anchor);Ext.window.Window.prototype.initComponent.call(this)},onRender:function(){var f=this;Ext.window.Window.prototype.onRender.apply(this,arguments);f.el.hover(f.onMouseEnter,f.onMouseLeave,f);if(f.closeOnMouseDown){Ext.getDoc().on("mousedown",f.onDocumentMousedown,f)}},alignmentProps:{br:{paddingFactorX:-1,paddingFactorY:-1,siblingAlignment:"br-br",anchorAlign:"tr-br"},bl:{paddingFactorX:1,paddingFactorY:-1,siblingAlignment:"bl-bl",anchorAlign:"tl-bl"},tr:{paddingFactorX:-1,paddingFactorY:1,siblingAlignment:"tr-tr",anchorAlign:"br-tr"},tl:{paddingFactorX:1,paddingFactorY:1,siblingAlignment:"tl-tl",anchorAlign:"bl-tl"},b:{paddingFactorX:0,paddingFactorY:-1,siblingAlignment:"b-b",useXAxis:0,anchorAlign:"t-b"},t:{paddingFactorX:0,paddingFactorY:1,siblingAlignment:"t-t",useXAxis:0,anchorAlign:"b-t"},l:{paddingFactorX:1,paddingFactorY:0,siblingAlignment:"l-l",useXAxis:1,anchorAlign:"r-l"},r:{paddingFactorX:-1,paddingFactorY:0,siblingAlignment:"r-r",useXAxis:1,anchorAlign:"l-r"},x:{br:{anchorAlign:"bl-br"},bl:{anchorAlign:"br-bl"},tr:{anchorAlign:"tl-tr"},tl:{anchorAlign:"tr-tl"}}},updateAlignment:function(n){var p=this,s=p.alignmentProps,q=s[n],o=s.x[n];if(o&&p.useXAxis){Ext.applyIf(p,o)}Ext.applyIf(p,q)},getXposAlignedToAnchor:function(){var q=this,u=q.align,t=q.anchor,p=t&&t.el,s=q.el,o=0;if(p&&p.dom){if(!q.useXAxis){o=s.getLeft()}else{if(u==="br"||u==="tr"||u==="r"){o+=p.getAnchorXY("r")[0];o-=(s.getWidth()+q.paddingX)}else{o+=p.getAnchorXY("l")[0];o+=q.paddingX}}}return o},getYposAlignedToAnchor:function(){var p=this,u=p.align,t=p.anchor,o=t&&t.el,s=p.el,q=0;if(o&&o.dom){if(p.useXAxis){q=s.getTop()}else{if(u==="br"||u==="bl"||u==="b"){q+=o.getAnchorXY("b")[1];q-=(s.getHeight()+p.paddingY)}else{q+=o.getAnchorXY("t")[1];q+=p.paddingY}}}return q},getXposAlignedToSibling:function(q){var p=this,n=p.align,s=p.el,o;if(!p.useXAxis){o=s.getLeft()}else{if(n==="tl"||n==="bl"||n==="l"){o=(q.xPos+q.el.getWidth()+q.spacing)}else{o=(q.xPos-s.getWidth()-p.spacing)}}return o},getYposAlignedToSibling:function(q){var o=this,n=o.align,s=o.el,p;if(o.useXAxis){p=s.getTop()}else{if(n==="tr"||n==="tl"||n==="t"){p=(q.yPos+q.el.getHeight()+q.spacing)}else{p=(q.yPos-s.getHeight()-q.spacing)}}return p},getToasts:function(){var n=this.anchor,l=this.anchorAlign,m=n.activeToasts||(n.activeToasts={});return m[l]||(m[l]=[])},setAnchor:function(n){var l=this,m;l.anchor=n=((typeof n==="string")?Ext.getCmp(n):n);if(!n){m=Ext.window.Toast;l.anchor=m.bodyAnchor||(m.bodyAnchor={el:Ext.getBody()})}},beforeShow:function(){var f=this;if(f.stickOnClick){f.body.on("click",function(){f.cancelAutoClose()})}if(f.autoClose){if(!f.closeTask){f.closeTask=new Ext.util.DelayedTask(f.doAutoClose,f)}}f.el.setX(-10000);f.el.setOpacity(1)},afterShow:function(){var o=this,s=o.el,p,t,q,u;Ext.window.Window.prototype.afterShow.apply(this,arguments);p=o.getToasts();q=p.length;t=q&&p[q-1];if(t){s.alignTo(t.el,o.siblingAlignment,[0,0]);o.xPos=o.getXposAlignedToSibling(t);o.yPos=o.getYposAlignedToSibling(t)}else{s.alignTo(o.anchor.el,o.anchorAlign,[(o.paddingX*o.paddingFactorX),(o.paddingY*o.paddingFactorY)],false);o.xPos=o.getXposAlignedToAnchor();o.yPos=o.getYposAlignedToAnchor()}Ext.Array.include(p,o);if(o.enableAnimations){u=s.getXY();s.animate({from:{x:u[0],y:u[1]},to:{x:o.xPos,y:o.yPos,opacity:1},easing:o.slideInAnimation,duration:o.slideInDuration,dynamic:true,callback:o.afterPositioned,scope:o})}else{o.setLocalXY(o.xPos,o.yPos);o.afterPositioned()}},afterPositioned:function(){var f=this;if(!f.destroying&&!f.destroyed&&f.autoClose){f.closeTask.delay(f.autoCloseDelay)}},onDocumentMousedown:function(e){if(this.isVisible()&&!this.owns(e.getTarget())){this.hide()}},slideBack:function(){var o=this,s=o.anchor,u=s&&s.el,q=o.el,p=o.getToasts(),t=Ext.Array.indexOf(p,o);if(!o.isHiding&&q&&q.dom&&u&&u.isVisible()){if(t){o.xPos=o.getXposAlignedToSibling(p[t-1]);o.yPos=o.getYposAlignedToSibling(p[t-1])}else{o.xPos=o.getXposAlignedToAnchor();o.yPos=o.getYposAlignedToAnchor()}o.stopAnimation();if(o.enableAnimations){q.animate({to:{x:o.xPos,y:o.yPos},easing:o.slideBackAnimation,duration:o.slideBackDuration,dynamic:true})}}},update:function(){var f=this;if(f.isVisible()){f.isHiding=true;f.hide()}Ext.window.Window.prototype.update.apply(this,arguments);f.show()},cancelAutoClose:function(){var f=this.closeTask;if(f){f.cancel()}},doAutoClose:function(){var f=this;if(!(f.stickWhileHover&&f.mouseIsOver)){f.close()}else{f.closeOnMouseOut=true}},doDestroy:function(){this.removeFromAnchor();this.cancelAutoClose();Ext.window.Window.prototype.doDestroy.call(this)},onMouseEnter:function(){this.mouseIsOver=true},onMouseLeave:function(){var f=this;f.mouseIsOver=false;if(f.closeOnMouseOut){f.closeOnMouseOut=false;f.close()}},removeFromAnchor:function(){var l=this,m,n;if(l.anchor){m=l.getToasts();n=Ext.Array.indexOf(m,l);if(n!==-1){Ext.Array.erase(m,n,1);for(;n<m.length;n++){m[n].slideBack()}}}},getFocusEl:Ext.emptyFn,hide:function(){var g=this,l=g.el;g.cancelAutoClose();if(g.isHiding){if(!g.isFading){Ext.window.Window.prototype.hide.apply(this,arguments);g.isHiding=false}}else{g.isHiding=true;g.isFading=true;g.cancelAutoClose();if(l){if(g.enableAnimations&&!g.destroying&&!g.destroyed){l.fadeOut({opacity:0,easing:"easeIn",duration:g.hideDuration,listeners:{scope:g,afteranimate:function(){var e=this;e.isFading=false;if(!e.destroying&&!e.destroyed){e.hide(e.animateTarget,e.doClose,e)}}}})}else{g.isFading=false;g.hide(g.animateTarget,g.doClose,g)}}}return g}},1,["toast"],["component","box","container","panel","window","toast"],{component:true,box:true,container:true,panel:true,window:true,toast:true},["widget.toast"],0,[Ext.window,"Toast"],function(f){Ext.toast=function(e,u,t,p){var q=e,s;if(Ext.isString(e)){q={title:u,html:e,iconCls:p};if(t){q.align=t}}s=new f(q);s.show();return s}}));(Ext.cmd.derive("Ext.ux.DataView.Animated",Ext.Base,{defaults:{duration:750,idProperty:"id"},constructor:function(f){Ext.apply(this,f||{},this.defaults)},init:function(u){var p=this,q=u.store,s=u.all,t={interval:20},v=p.duration;p.dataview=u;u.blockRefresh=true;u.updateIndexes=Ext.Function.createSequence(u.updateIndexes,function(){this.getTargetEl().select(this.itemSelector).each(function(f,e,g){f.dom.id=Ext.util.Format.format("{0}-{1}",u.id,q.getAt(g).internalId)},this)},u);p.dataviewID=u.id;p.cachedStoreData={};p.cacheStoreData(q.data||q.snapshot);u.on("resize",function(){var e=u.store;if(e.getCount()>0){}},this);u.store.on({datachanged:w,scope:this,buffer:50});function w(){var M=u.getTargetEl(),g=M.getY(),f=M.getPadding("t"),J=p.getAdded(q),K=p.getRemoved(q),e=p.getRemaining(q),n,N,P,m=new Ext.dom.Fly(),L=p.dataview.getInherited().rtl,O,S,o=L?"right":"left",R={};if(!M){return}Ext.iterate(K,function(x,y){P=p.dataviewID+"-"+x;Ext.fx.Manager.stopAnimation(P);y.dom=Ext.getDom(P);if(!y.dom){delete K[x]}});p.cacheStoreData(q);var Q={},l={};Ext.iterate(e,function(x,y){if(m.attach(Ext.getDom(p.dataviewID+"-"+x))){O=Q[x]={top:m.getY()-g-m.getMargin("t")-f};O[o]=p.getItemX(m)}else{delete e[x]}});u.refresh();Ext.iterate(K,function(x,y){M.dom.appendChild(y.dom);m.attach(y.dom).animate({duration:v,opacity:0,callback:function(z){var A=Ext.get(z.target.id);if(A){A.destroy()}}});delete y.dom});if(!q.getCount()){return}n=s.slice();for(N=n.length-1;N>=0;N--){P=q.getAt(N).internalId;m.attach(n[N]);l[P]={dom:m.dom,top:m.getY()-g-m.getMargin("t")-f};l[P][o]=p.getItemX(m);S=Q[P]||l[P];R.position="absolute";R.top=S.top+"px";R[o]=S.left+"px";m.applyStyles(R)}var I=function(){var A=new Date()-t.taskStartTime,y=A/v;if(y>=1){R.position=R.top=R[o]="";for(P in l){m.attach(l[P].dom).applyStyles(R)}Ext.TaskManager.stop(t)}else{for(P in e){var G=Q[P],D=l[P],F=G.top,C=D.top,H=G[o],B=D[o],E=y*Math.abs(F-C),z=y*Math.abs(H-B),x=F>C?F-E:F+E,U=H>B?H-z:H+z;R.top=x+"px";R[o]=U+"px";m.attach(D.dom).applyStyles(R)}}};Ext.iterate(J,function(x,y){if(m.attach(Ext.getDom(p.dataviewID+"-"+x))){m.setOpacity(0);m.animate({duration:v,opacity:1})}});Ext.TaskManager.stop(t);t.run=I;Ext.TaskManager.start(t);p.cacheStoreData(q)}},getItemX:function(m){var l=this.dataview.getInherited().rtl,n=m.up("");if(l){return n.getViewRegion().right-m.getRegion().right+m.getMargin("r")}else{return m.getX()-n.getX()-m.getMargin("l")-n.getPadding("l")}},cacheStoreData:function(l){var g=this.cachedStoreData={};l.each(function(e){g[e.internalId]=e})},getExisting:function(){return this.cachedStoreData},getExistingCount:function(){var l=0,m=this.getExisting();for(var n in m){l++}return l},getAdded:function(n){var l=this.cachedStoreData,m={};n.each(function(e){if(l[e.internalId]==null){m[e.internalId]=e}});return m},getRemoved:function(p){var o=this.cachedStoreData,n={},m;for(m in o){if(p.findBy(function(e){return e.internalId==m})==-1){n[m]=o[m]}}return n},getRemaining:function(n){var l=this.cachedStoreData,m={};n.each(function(e){if(l[e.internalId]!=null){m[e.internalId]=e}});return m}},1,0,0,0,["plugin.ux-animated-dataview"],0,[Ext.ux.DataView,"Animated"],0));(Ext.cmd.derive("Ext.ux.IFrame",Ext.Component,{loadMask:"Loading...",src:"about:blank",renderTpl:['<iframe src="{src}" id="{id}-iframeEl" data-ref="iframeEl" name="{frameName}" width="100%" height="100%" frameborder="0"></iframe>'],childEls:["iframeEl"],initComponent:function(){Ext.Component.prototype.initComponent.call(this);this.frameName=this.frameName||this.id+"-frame"},initEvents:function(){var f=this;Ext.Component.prototype.initEvents.call(this);f.iframeEl.on("load",f.onLoad,f)},initRenderData:function(){return Ext.apply(Ext.Component.prototype.initRenderData.call(this),{src:this.src,frameName:this.frameName})},getBody:function(){var f=this.getDoc();return f.body||f.documentElement},getDoc:function(){try{return this.getWin().document}catch(f){return null}},getWin:function(){var m=this,n=m.frameName,l=Ext.isIE?m.iframeEl.dom.contentWindow:window.frames[n];return l},getFrame:function(){var f=this;return f.iframeEl.dom},onLoad:function(){var l=this,g=l.getDoc();if(g){this.el.unmask();this.fireEvent("load",this)}else{if(l.src){this.el.unmask();this.fireEvent("error",this)}}},load:function(m){var p=this,n=p.loadMask,o=p.getFrame();if(p.fireEvent("beforeload",p,m)!==false){if(n&&p.el){p.el.mask(n)}o.src=p.src=(m||p.src)}}},0,["uxiframe"],["component","box","uxiframe"],{component:true,box:true,uxiframe:true},["widget.uxiframe"],0,[Ext.ux,"IFrame"],0));(Ext.cmd.derive("Ext.ux.TabCloseMenu",Ext.plugin.Abstract,{closeTabText:"Close Tab",showCloseOthers:true,closeOthersTabsText:"Close Other Tabs",showCloseAll:true,closeAllTabsText:"Close All Tabs",extraItemsHead:null,extraItemsTail:null,constructor:function(f){Ext.plugin.Abstract.prototype.constructor.call(this,f);this.mixins.observable.constructor.call(this,f)},init:function(f){this.tabPanel=f;this.tabBar=f.down("tabbar");this.mon(this.tabPanel,{scope:this,afterlayout:this.onAfterLayout,single:true})},onAfterLayout:function(){this.mon(this.tabBar.el,{scope:this,contextmenu:this.onContextMenu,delegate:".x-tab"})},destroy:function(){Ext.destroy(this.menu);Ext.plugin.Abstract.prototype.destroy.call(this)},onContextMenu:function(s,y){var t=this,x=t.createMenu(),q=true,w=true,u=t.tabBar.getChildByElement(y),v=t.tabBar.items.indexOf(u);t.item=t.tabPanel.getComponent(v);x.child("#close").setDisabled(!t.item.closable);if(t.showCloseAll||t.showCloseOthers){t.tabPanel.items.each(function(e){if(e.closable){q=false;if(e!==t.item){w=false;return false}}return true});if(t.showCloseAll){x.child("#closeAll").setDisabled(q)}if(t.showCloseOthers){x.child("#closeOthers").setDisabled(w)}}s.preventDefault();t.fireEvent("beforemenu",x,t.item,t);x.showAt(s.getXY())},createMenu:function(){var g=this;if(!g.menu){var l=[{itemId:"close",text:g.closeTabText,scope:g,handler:g.onClose}];if(g.showCloseAll||g.showCloseOthers){l.push("-")}if(g.showCloseOthers){l.push({itemId:"closeOthers",text:g.closeOthersTabsText,scope:g,handler:g.onCloseOthers})}if(g.showCloseAll){l.push({itemId:"closeAll",text:g.closeAllTabsText,scope:g,handler:g.onCloseAll})}if(g.extraItemsHead){l=g.extraItemsHead.concat(l)}if(g.extraItemsTail){l=l.concat(g.extraItemsTail)}g.menu=Ext.create("Ext.menu.Menu",{items:l,listeners:{hide:g.onHideMenu,scope:g}})}return g.menu},onHideMenu:function(){var f=this;f.fireEvent("aftermenu",f.menu,f)},onClose:function(){this.tabPanel.remove(this.item)},onCloseOthers:function(){this.doClose(true)},onCloseAll:function(){this.doClose(false)},doClose:function(g){var l=[];this.tabPanel.items.each(function(e){if(e.closable){if(!g||e!==this.item){l.push(e)}}},this);Ext.suspendLayouts();Ext.Array.forEach(l,function(e){this.tabPanel.remove(e)},this);Ext.resumeLayouts(true)}},1,0,0,0,["plugin.tabclosemenu"],[["observable",Ext.util.Observable]],[Ext.ux,"TabCloseMenu"],0));(Ext.cmd.derive("Ext.ux.form.MultiSelect",Ext.form.FieldContainer,{alternateClassName:"Ext.ux.Multiselect",layout:"anchor",ddReorder:false,appendOnly:false,displayField:"text",allowBlank:true,minSelections:0,maxSelections:Number.MAX_VALUE,blankText:"This field is required",minSelectionsText:"Minimum {0} item(s) required",maxSelectionsText:"Maximum {0} item(s) required",delimiter:",",dragText:"{0} Item{1}",ignoreSelectChange:0,pageSize:10,initComponent:function(){var f=this;f.items=f.setupItems();f.bindStore(f.store,true);Ext.form.FieldContainer.prototype.initComponent.call(this);f.initField()},setupItems:function(){var f=this;f.boundList=new Ext.view.BoundList(Ext.apply({anchor:"none 100%",border:1,multiSelect:true,store:f.store,displayField:f.displayField,disabled:f.disabled,tabIndex:0,navigationModel:{type:"default"}},f.listConfig));f.boundList.getNavigationModel().addKeyBindings({pageUp:f.onKeyPageUp,pageDown:f.onKeyPageDown,scope:f});f.boundList.getSelectionModel().on("selectionchange",f.onSelectChange,f);f.boundList.pickerField=f;if(!f.title){return f.boundList}f.boundList.border=false;return{xtype:"panel",isAriaRegion:false,border:true,anchor:"none 100%",layout:"anchor",title:f.title,tbar:f.tbar,items:f.boundList}},onSelectChange:function(l,g){if(!this.ignoreSelectChange){this.setValue(g)}},getSelected:function(){return this.boundList.getSelectionModel().getSelection()},isEqual:function(n,o){var q=Ext.Array.from,p=0,s;n=q(n);o=q(o);s=n.length;if(s!==o.length){return false}for(;p<s;p++){if(o[p]!==n[p]){return false}}return true},afterRender:function(){var m=this,n=m.boundList,o,p;Ext.form.FieldContainer.prototype.afterRender.call(this);if(m.selectOnRender){o=m.getRecordsForValue(m.value);if(o.length){++m.ignoreSelectChange;m.boundList.getSelectionModel().select(o);--m.ignoreSelectChange}delete m.toSelect}if(m.ddReorder&&!m.dragGroup&&!m.dropGroup){m.dragGroup=m.dropGroup="MultiselectDD-"+Ext.id()}if(m.draggable||m.dragGroup){m.dragZone=Ext.create("Ext.view.DragZone",{view:m.boundList,ddGroup:m.dragGroup,dragText:m.dragText})}if(m.droppable||m.dropGroup){m.dropZone=Ext.create("Ext.view.DropZone",{view:m.boundList,ddGroup:m.dropGroup,handleNodeDrop:function(f,g,e){var w=this.view,u=w.getStore(),v=f.records,l;f.view.store.remove(v);l=u.indexOf(g);if(e==="after"){l++}u.insert(l,v);w.getSelectionModel().select(v);m.fireEvent("drop",m,v)}})}p=m.down("panel");if(p&&n){n.ariaEl.dom.setAttribute("aria-labelledby",p.header.id+"-title-textEl")}},onKeyPageUp:function(u){var v=this,s=v.pageSize,q=v.boundList,t=q.getNavigationModel(),e,w;e=t.recordIndex;w=e>s?e-s:0;t.setPosition(w,u)},onKeyPageDown:function(v){var w=this,t=w.pageSize,s=w.boundList,u=s.getNavigationModel(),x,e,y;x=s.getStore().getCount();e=u.recordIndex;y=e<(x-t)?e+t:x-1;u.setPosition(y,v)},isValid:function(){var m=this,n=m.disabled,l=m.forceValidation||!n;return l?m.validateValue(m.value):n},validateValue:function(o){var p=this,m=p.getErrors(o),n=Ext.isEmpty(m);if(!p.preventMark){if(n){p.clearInvalid()}else{p.markInvalid(m)}}return n},markInvalid:function(l){var m=this,n=m.getActiveError();m.setActiveErrors(Ext.Array.from(l));if(n!==m.getActiveError()){m.updateLayout()}},clearInvalid:function(){var g=this,l=g.hasActiveError();g.unsetActiveError();if(l){g.updateLayout()}},getSubmitData:function(){var n=this,m=null,l;if(!n.disabled&&n.submitValue&&!n.isFileUpload()){l=n.getSubmitValue();if(l!==null){m={};m[n.getName()]=l}}return m},getSubmitValue:function(){var m=this,n=m.delimiter,l=m.getValue();return Ext.isString(n)?l.join(n):l},getValue:function(){return this.value||[]},getRecordsForValue:function(v){var w=this,B=[],u=w.store.getRange(),C=w.valueField,y=0,t=u.length,A,z,x;for(x=v.length;y<x;++y){for(z=0;z<t;++z){A=u[z];if(A.get(C)==v[y]){B.push(A)}}}return B},setupValue:function(v){var t=this.delimiter,q=this.valueField,p=0,s,u,w;if(Ext.isDefined(v)){if(t&&Ext.isString(v)){v=v.split(t)}else{if(!Ext.isArray(v)){v=[v]}}for(u=v.length;p<u;++p){w=v[p];if(w&&w.isModel){v[p]=w.get(q)}}s=Ext.Array.unique(v)}else{s=[]}return s},setValue:function(m){var n=this,o=n.boundList.getSelectionModel(),p=n.store;if(!p.getCount()){p.on({load:Ext.Function.bind(n.setValue,n,[m]),single:true});return}m=n.setupValue(m);n.mixins.field.setValue.call(n,m);if(n.rendered){++n.ignoreSelectChange;o.deselectAll();if(m.length){o.select(n.getRecordsForValue(m))}--n.ignoreSelectChange}else{n.selectOnRender=true}},clearValue:function(){this.setValue([])},onEnable:function(){var f=this.boundList;Ext.form.FieldContainer.prototype.onEnable.call(this);if(f){f.enable()}},onDisable:function(){var f=this.boundList;Ext.form.FieldContainer.prototype.onDisable.call(this);if(f){f.disable()}},getErrors:function(q){var s=this,p=Ext.String.format,n=[],o;q=Ext.Array.from(q||s.getValue());o=q.length;if(!s.allowBlank&&o<1){n.push(s.blankText)}if(o<s.minSelections){n.push(p(s.minSelectionsText,s.minSelections))}if(o>s.maxSelections){n.push(p(s.maxSelectionsText,s.maxSelections))}return n},doDestroy:function(){var f=this;f.bindStore(null);Ext.destroy(f.dragZone,f.dropZone,f.keyNav);Ext.form.FieldContainer.prototype.doDestroy.call(this)},onBindStore:function(n){var l=this,m=this.boundList;if(n.autoCreated){l.resolveDisplayField()}if(!Ext.isDefined(l.valueField)){l.valueField=l.displayField}if(m){m.bindStore(n)}},resolveDisplayField:function(){var l=this,m=l.boundList,n=l.getStore();l.valueField=l.displayField="field1";if(!n.expanded){l.displayField="field2"}if(m){m.setDisplayField(l.displayField)}}},0,["multiselectfield","multiselect"],["component","box","container","fieldcontainer","multiselectfield","multiselect"],{component:true,box:true,container:true,fieldcontainer:true,multiselectfield:true,multiselect:true},["widget.multiselect","widget.multiselectfield"],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder],[Ext.form.field.Field.prototype.mixinId||Ext.form.field.Field.$className,Ext.form.field.Field]],[Ext.ux.form,"MultiSelect",Ext.ux,"Multiselect"],0));(Ext.cmd.derive("Ext.ux.layout.ResponsiveColumn",Ext.layout.container.Auto,{states:{small:1000,large:0},_responsiveCls:"x-responsivecolumn",initLayout:function(){this.innerCtCls+=" "+this._responsiveCls;Ext.layout.container.Auto.prototype.initLayout.call(this)},beginLayout:function(y){var t=this,u=Ext.Element.getViewportWidth(),C=t.states,v=Infinity,A=t.innerCt,z=t._currentState,B,w,x;for(B in C){w=C[B]||Infinity;if(u<=w&&w<=v){v=w;x=B}}if(x!==z){A.replaceCls(z,x,t._responsiveCls);t._currentState=x}Ext.layout.container.Auto.prototype.beginLayout.apply(this,arguments)},onAdd:function(l){Ext.layout.container.Auto.prototype.onAdd.call(this,l);var g=l.responsiveCls;if(g){l.addCls(g)}}},0,0,0,0,["layout.responsivecolumn"],0,[Ext.ux.layout,"ResponsiveColumn"],function(f){if(Ext.isIE8){f.override({responsiveSizePolicy:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:0},setsItemSize:true,calculateItems:function(B,E){var G=this,A=B.targetContext,H=B.childItems,J=H.length,z=E.gotWidth,D=E.width,e,F,y,C,K,I;if(z===false){A.domBlock(G,"width");return false}if(!z){return true}for(y=0;y<J;++y){C=H[y];I=parseInt(C.el.getStyle("background-position-x"),10);K=parseInt(C.el.getStyle("background-position-y"),10);C.setWidth((I/100*(D-K))-K)}B.setContentWidth(D+B.paddingContext.getPaddingInfo().width);return true},getItemSizePolicy:function(){return this.responsiveSizePolicy}})}}));(Ext.cmd.derive("data.model.Model",Ext.data.Model,{serviceName:null,showError:false,animateTarget:null,scope:this,timeout:30000,save:function(s){s=Ext.apply({},s);var v=this,x=v.phantom,A=v.dropped,y=A?"destroy":(x?"create":"update"),t=s.scope||v,u=s.callback,w=v.getProxy(),z;s.records=[v];s.internalCallback=function(g){var f=[v,g],e=g.wasSuccessful();if(e){Ext.callback(s.success,t,f)}else{Ext.callback(s.failure,t,f)}f.push(e);if(v.showError){v.doShowError(f)}Ext.callback(u,t,f)};delete s.callback;z=w.createOperation(y,s);if(A&&x){z.setResultSet(Ext.data.reader.Reader.prototype.nullResultSet);v.setErased();z.setSuccessful(true)}else{z.execute()}return z},privates:{doShowError:function(f){this.handleException(f[1])},handleException:function(t){var w=this;if(t.hasException()){try{var s=t.getError(),x=s?s.response.responseText:t.getResponse().responseText,v=Ext.JSON.decode(x),y=v.detail?(Ext.isObject(v.detail)?Ext.JSON.encode(v.detail):v.detail):"Koneksi Gagal";if(!s){s={status:v.status,statusText:""}}if(y!="Koneksi Gagal"){e=Ext.create("Ext.window.MessageBox",{ui:"window-red",title:s.status+" - "+s.statusText});e.show({msg:y,buttons:Ext.MessageBox.OK,animateTarget:w.animateTarget,scope:w.scope,icon:Ext.Msg.ERROR})}}catch(u){var e=Ext.create("Ext.window.MessageBox",{ui:"window-red",title:"Error"});e.show({msg:"Koneksi Gagal",buttons:Ext.MessageBox.OK,animateTarget:w.animateTarget,scope:w.scope,icon:Ext.Msg.ERROR})}}}},inheritableStatics:{getProxy:function(){var m=this,n=m.proxy,l;if(!n){n=m.proxyConfig||{type:"rest",url:webservice.location+m.serviceName,timeout:m.timeout,reader:{type:"json",rootProperty:"data"},useDefaultXhrHeader:false,withCredentials:true,listeners:{exception:function(g,f,e,p){}}};if(!n||!n.isProxy){if(typeof n==="string"){n={type:n}}l=m.schema.constructProxy(m);n=n?Ext.merge(l,n):l}n=m.setProxy(n)}return n}}},0,0,0,0,0,0,[data.model,"Model"],function(){var f=this;f.onExtended(function(l,e){l.serviceName=e.serviceName})}));(Ext.cmd.derive("data.model.Administrasi",data.model.Model,{serviceName:"general/administrasi",fields:[{name:"ID",type:"int"},{name:"NAMA",type:"string"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"Administrasi"],0));(Ext.cmd.derive("data.model.Aksi",data.model.Model,{serviceName:"general/aksi",fields:[{name:"ID",type:"int"},{name:"NAMA",type:"string"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"Aksi"],0));(Ext.cmd.derive("data.model.AntrianRuangan",data.model.Model,{serviceName:"pendaftaran/antrianruangan",fields:[{name:"RUANGAN",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"NOMOR",type:"int"},{name:"JENIS",type:"int"},{name:"REF",type:"string"},{name:"STATUS",type:"int",defaultValue:1}]},0,0,0,0,0,0,[data.model,"AntrianRuangan"],0));(Ext.cmd.derive("data.model.AturanPakai",data.model.Model,{serviceName:"general/referensi?JENIS=41",fields:[{name:"ID",type:"int"},{name:"DESKRIPSI",type:"string"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"AturanPakai"],0));(Ext.cmd.derive("data.model.Barang",data.model.Model,{serviceName:"inventory/barang",fields:[{name:"ID",type:"int"},{name:"NAMA",type:"string"},{name:"KATEGORI",type:"string"},{name:"SATUAN",type:"int"},{name:"MERK",type:"int"},{name:"PENYEDIA",type:"int"},{name:"GENERIK",type:"int"},{name:"STOK",type:"int"},{name:"JENIS_GENERIK",type:"int"},{name:"FORMULARIUM",type:"int"},{name:"JENIS_PENGGUNAAN_OBAT",type:"int"},{name:"HARGA_BELI",type:"float"},{name:"PPN",type:"float"},{name:"HARGA_JUAL",type:"float"},{name:"MASA_BERLAKU",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"Barang"],0));(Ext.cmd.derive("data.model.BarangRuangan",data.model.Model,{serviceName:"inventory/barangruangan",fields:[{name:"ID",type:"int"},{name:"RUANGAN",type:"string"},{name:"BARANG",type:"int"},{name:"STOK",type:"float"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"BarangRuangan"],0));(Ext.cmd.derive("data.model.CatatanHasilLab",data.model.Model,{serviceName:"layanan/catatanhasillab",fields:[{name:"KUNJUNGAN",type:"string"},{name:"TANGGAL",type:"date",defaultValue:new Date(),dateFormat:"Y-m-d H:i:s"},{name:"CATATAN",type:"string"},{name:"DOKTER",type:"int"},{name:"OLEH",type:"string"},{name:"STATUS",type:"string"}],idProperty:"KUNJUNGAN"},0,0,0,0,0,0,[data.model,"CatatanHasilLab"],0));(Ext.cmd.derive("data.model.Deposit",data.model.Model,{serviceName:"pembayaran/deposit",fields:[{name:"ID",type:"int"},{name:"TAGIHAN",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"JENIS",type:"int"},{name:"NAMA",type:"string"},{name:"TOTAL",type:"float"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"Deposit"],0));(Ext.cmd.derive("data.model.Diagnosa",data.model.Model,{serviceName:"general/diagnosa",fields:[{name:"CODE",type:"string"},{name:"STR",type:"string"}],idProperty:"CODE"},0,0,0,0,0,0,[data.model,"Diagnosa"],0));(Ext.cmd.derive("data.model.DiagnosaMasuk",data.model.Model,{serviceName:"general/diagnosamasuk",fields:[{name:"ID",type:"int"},{name:"ICD",type:"string"},{name:"DIAGNOSA",type:"string"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"DiagnosaMasuk"],0));(Ext.cmd.derive("data.model.Diskon",data.model.Model,{serviceName:"pembayaran/diskon",fields:[{name:"ID",type:"int"},{name:"TAGIHAN",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"ADMINISTRASI",type:"float"},{name:"AKOMODASI",type:"float"},{name:"SARANA_NON_AKOMODASI",type:"float"},{name:"PARAMEDIS",type:"float"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"Diskon"],0));(Ext.cmd.derive("data.model.DiskonDokter",data.model.Model,{serviceName:"pembayaran/diskondokter",fields:[{name:"ID",type:"int"},{name:"TAGIHAN",type:"string"},{name:"DOKTER",type:"int"},{name:"TOTAL",type:"float"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"DiskonDokter"],0));(Ext.cmd.derive("data.model.DistribusiTarifPaket",data.model.Model,{serviceName:"general/distribusitarifpaket",fields:[{name:"ID",type:"int"},{name:"PAKET",type:"int"},{name:"ADMINISTRASI",type:"int"},{name:"SARANA",type:"int"},{name:"BHP",type:"int"},{name:"DOKTER_OPERATOR",type:"int"},{name:"DOKTER_ANASTESI",type:"int"},{name:"DOKTER_LAINNYA",type:"int"},{name:"PENATA_ANASTESI",type:"int"},{name:"PARAMEDIS",type:"int"},{name:"NON_MEDIS",type:"int"},{name:"TARIF",type:"int"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"TANGGAL_SK",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"NOMOR_SK",type:"string"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"DistribusiTarifPaket"],0));(Ext.cmd.derive("data.model.Dokter",data.model.Model,{serviceName:"general/dokter",fields:[{name:"ID",type:"int"},{name:"NAMA",type:"string"},{name:"NIP",type:"string"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"Dokter"],0));(Ext.cmd.derive("data.model.DokterRuangan",data.model.Model,{serviceName:"general/dokterruangan",fields:[{name:"ID",type:"int"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"DOKTER"},{name:"RUANGAN",type:"string"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"DokterRuangan"],0));(Ext.cmd.derive("data.model.DokterSmf",data.model.Model,{serviceName:"general/doktersmf",fields:[{name:"ID",type:"int"},{name:"TANGGAL",type:"date"},{name:"DOKTER",type:"int"},{name:"SMF",type:"int"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"DokterSmf"],0));(Ext.cmd.derive("data.model.Edc",data.model.Model,{serviceName:"pembayaran/edc",fields:[{name:"ID",type:"int"},{name:"TAGIHAN",type:"string"},{name:"BANK",type:"int"},{name:"JENIS_KARTU",type:"int"},{name:"NOMOR",type:"string"},{name:"PEMILIK",type:"string"},{name:"APRV_CODE",type:"string"},{name:"TOTAL",type:"float"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"Edc"],0));(Ext.cmd.derive("data.model.GabungTagihan",data.model.Model,{serviceName:"pembayaran/gabungtagihan",fields:[{name:"ID",type:"int"},{name:"DARI",type:"string"},{name:"KE",type:"string"},{name:"TANGGAL",type:"date"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"GabungTagihan"],0));(Ext.cmd.derive("data.model.GroupLab",data.model.Model,{serviceName:"general/grouplab",fields:[{name:"ID",type:"string"},{name:"JENIS",type:"int"},{name:"DESKRIPSI",type:"string"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"GroupLab"],0));(Ext.cmd.derive("data.model.GroupLabTree",Ext.data.TreeModel,{entityName:"GroupLabTree",fields:[{name:"ID",type:"string"},{name:"JENIS",type:"int"},{name:"DESKRIPSI",type:"string"},{name:"text",type:"string",convert:function(g,l){return l.get("DESKRIPSI")}},"children","leaf",{name:"expanded",type:"boolean",defautlValue:"true"},"cls",{name:"STATUS",type:"int"}],root:{expanded:true},proxy:{type:"ajax",url:webservice.location+"general/grouplab",reader:{type:"json",rootProperty:"children"}}},0,0,0,0,0,0,[data.model,"GroupLabTree"],0));(Ext.cmd.derive("data.model.GroupPenggunaAksesModule",data.model.Model,{serviceName:"aplikasi/grouppenggunaaksesmodule",fields:[{name:"ID",type:"int"},{name:"GROUP_PENGGUNA",type:"int"},{name:"MODUL",type:"string"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"GroupPenggunaAksesModule"],0));(Ext.cmd.derive("data.model.GroupTindakanLab",data.model.Model,{serviceName:"general/grouptindakanlab",fields:[{name:"GROUP_LAB",type:"string"},{name:"TINDAKAN",type:"int"},{name:"STATUS",type:"int"}]},0,0,0,0,0,0,[data.model,"GroupTindakanLab"],0));(Ext.cmd.derive("data.model.HargaBarang",data.model.Model,{serviceName:"inventory/hargabarang",fields:[{name:"ID",type:"int"},{name:"BARANG",type:"int"},{name:"HARGA_BELI",type:"float"},{name:"HARGA_JUAL",type:"float"},{name:"PPN",type:"int"},{name:"MASA_BERLAKU",type:"date",dateFormat:"Y-m-d"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"HargaBarang"],0));(Ext.cmd.derive("data.model.HasilLab",data.model.Model,{serviceName:"layanan/hasillab",fields:[{name:"ID",type:"string"},{name:"TINDAKAN_MEDIS",type:"string"},{name:"PARAMETER_TINDAKAN",type:"string"},{name:"TANGGAL",type:"date",defaultValue:new Date(),dateFormat:"Y-m-d H:i:s"},{name:"HASIL",type:"string"},{name:"NILAI_NORMAL",type:"string"},{name:"SATUAN",type:"string"},{name:"KETERANGAN",type:"string"},{name:"DOKTER",type:"int"},{name:"OLEH",type:"string"},{name:"STATUS",type:"string"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"HasilLab"],0));(Ext.cmd.derive("data.model.HasilPa",data.model.Model,{serviceName:"layanan/hasilpa",fields:[{name:"KUNJUNGAN",type:"string"},{name:"JENIS_PEMERIKSAAN",type:"integer"},{name:"LOKASI",type:"string"},{name:"DIDAPAT_DENGAN",type:"string"},{name:"CAIRAN_FIKSASI",type:"string"},{name:"DIAGNOSA_KLINIK",type:"string"},{name:"KETERANGAN_KLINIK",type:"string"},{name:"MAKROSOKOPIK",type:"string"},{name:"MIKROSKOPIK",type:"string"},{name:"KESIMPULAN",type:"string"},{name:"IMUNO_HISTOKIMIA",type:"string"},{name:"REEVOLUSI",type:"string"},{name:"TANGGAL_IMUNO",type:"date",defaultValue:new Date(),dateFormat:"Y-m-d H:i:s"},{name:"DOKTER",type:"integer"},{name:"TANGGAL",type:"date",defaultValue:new Date(),dateFormat:"Y-m-d H:i:s"},{name:"OLEH",type:"integer"},{name:"STATUS",type:"integer",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"HasilPa"],0));(Ext.cmd.derive("data.model.HasilRad",data.model.Model,{serviceName:"layanan/hasilrad",fields:[{name:"TINDAKAN_MEDIS",type:"string"},{name:"TANGGAL",type:"date",defaultValue:new Date(),dateFormat:"Y-m-d H:i:s"},{name:"KLINIS",type:"string"},{name:"KESAN",type:"string"},{name:"USUL",type:"string"},{name:"HASIL",type:"string"},{name:"BTK",type:"string"}],idProperty:"TINDAKAN_MEDIS"},0,0,0,0,0,0,[data.model,"HasilRad"],0));(Ext.cmd.derive("data.model.Icd",data.model.Model,{serviceName:"medicalrecord/icd10",fields:[{name:"ID",type:"int"},{name:"NOPEN",type:"string"},{name:"KODE",type:"string"},{name:"DIAGNOSA",type:"string"},{name:"UTAMA",type:"int"},{name:"INACBG",type:"int"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"Icd"],0));(Ext.cmd.derive("data.model.Icd9",data.model.Model,{serviceName:"medicalrecord/icd9cm",fields:[{name:"ID",type:"int"},{name:"NOPEN",type:"string"},{name:"KODE",type:"string"},{name:"TINDAKAN",type:"string"},{name:"INACBG",type:"int"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"Icd9"],0));(Ext.cmd.derive("data.model.InfoTeks",data.model.Model,{serviceName:"aplikasi/infoteks",fields:[{name:"ID",type:"int"},{name:"TEKS",type:"string"}]},0,0,0,0,0,0,[data.model,"InfoTeks"],0));(Ext.cmd.derive("data.model.InformasiRuangKamarTidur",data.model.Model,{serviceName:"informasi/ruangkamartidur",fields:[{name:"ID",type:"int"},{name:"RUANGAN",type:"string"},{name:"KAMAR",type:"string"},{name:"TEMPAT_TIDUR",type:"string"},{name:"KELAS",type:"string"},{name:"NORM",type:"int"},{name:"NAMA",type:"string"},{name:"STATUS",type:"string"}]},0,0,0,0,0,0,[data.model,"InformasiRuangKamarTidur"],0));(Ext.cmd.derive("data.model.Instansi",data.model.Model,{serviceName:"general/instansi",fields:[{name:"PPK",type:"string"}]},0,0,0,0,0,0,[data.model,"Instansi"],0));(Ext.cmd.derive("data.model.JawabKonsul",data.model.Model,{serviceName:"pendaftaran/jawabankonsul",fields:[{name:"NOMOR",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"JAWABAN",type:"string"},{name:"ANJURAN",type:"string"},{name:"DOKTER",type:"int"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}]},0,0,0,0,0,0,[data.model,"JawabKonsul"],0));(Ext.cmd.derive("data.model.JenisLaporan",data.model.Model,{serviceName:"general/jenislaporan",fields:[{name:"ID",type:"string"},{name:"DESKRIPSI",type:"string"},{name:"NAMA_KLAS",type:"string"},{name:"MODULE",type:"string"},{name:"LEVEL",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"JenisLaporan"],0));(Ext.cmd.derive("data.model.JenisReferensi",data.model.Model,{serviceName:"general/jenisreferensi",fields:[{name:"ID",type:"int"},{name:"DESKRIPSI",type:"string"},{name:"SINGKATAN",type:"string"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"JenisReferensi"],0));(Ext.cmd.derive("data.model.JenisRuangan",data.model.Model,{serviceName:"general/jenisruangan",fields:[{name:"ID",type:"int"},{name:"DESKRIPSI",type:"string"},{name:"DIGIT",type:"int"},{name:"DELIMITER",type:"string"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"JenisRuangan"],0));(Ext.cmd.derive("data.model.JenisWilayah",data.model.Model,{serviceName:"general/jeniswilayah",fields:[{name:"ID",type:"int"},{name:"DESKRIPSI",type:"string"},{name:"DIGIT",type:"int"},{name:"DELIMITER",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"JenisWilayah"],0));(Ext.cmd.derive("data.model.KAP",data.model.Model,{serviceName:"general/kap",fields:[{name:"JENIS",type:"int"},{name:"NORM",type:"int"},{name:"NOMOR",type:"string"}],idProperty:"NORM"},0,0,0,0,0,0,[data.model,"KAP"],0));(Ext.cmd.derive("data.model.KIP",data.model.Model,{serviceName:"general/kip",fields:[{name:"JENIS",type:"int",defaultValue:1,convert:function(f){return f==0?null:f}},{name:"NORM",type:"int",defaultValue:null,convert:function(f){return f==0?null:f}},{name:"NOMOR",type:"string",defaultValue:null,convert:function(f){return f==""?null:f}},{name:"ALAMAT",type:"string",defaultValue:null,convert:function(f){return f==""?null:f}},{name:"RT",type:"string",defaultValue:null,convert:function(f){return f==""?null:f}},{name:"RW",type:"string",defaultValue:null,convert:function(f){return f==""?null:f}},{name:"KODEPOS",type:"string",defaultValue:null,convert:function(f){return f==""?null:f}},{name:"WILAYAH",type:"string",defaultValue:null,convert:function(f){return f==""?null:f}}]},0,0,0,0,0,0,[data.model,"KIP"],0));(Ext.cmd.derive("data.model.KarcisPasien",data.model.Model,{serviceName:"cetakan/karcispasien",fields:[{name:"ID",type:"string"},{name:"NOPEN",type:"string"},{name:"JENIS",type:"int"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"KarcisPasien"],0));(Ext.cmd.derive("data.model.KartuPasien",data.model.Model,{serviceName:"cetakan/kartupasien",fields:[{name:"ID",type:"string"},{name:"NORM",type:"int"},{name:"JENIS",type:"int"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"KartuPasien"],0));(Ext.cmd.derive("data.model.Kategori",data.model.Model,{serviceName:"inventory/kategori",fields:[{name:"ID",type:"int"},{name:"NAMA",type:"string"},{name:"JENIS",type:"int"},{name:"TANGGAL",type:"date",defaultValue:new Date(),dateFormat:"Y-m-d H:i:s"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"Kategori"],0));(Ext.cmd.derive("data.model.KeluargaPasien",data.model.Model,{serviceName:"general/keluargapasien",fields:[{name:"SHDK",type:"int"},{name:"NORM",type:"int"},{name:"JENIS_KELAMIN",type:"int"},{name:"ID",type:"int"},{name:"NAMA",type:"string"},{name:"ALAMAT",type:"string"},{name:"PENDIDIKAN",type:"int"},{name:"PEKERJAAN",type:"int"}]},0,0,0,0,0,0,[data.model,"KeluargaPasien"],0));(Ext.cmd.derive("data.model.Konsul",data.model.Model,{serviceName:"pendaftaran/konsul",fields:[{name:"NOMOR",type:"string"},{name:"KUNJUNGAN",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"DOKTER_ASAL",type:"int"},{name:"ALASAN",type:"string"},{name:"TUJUAN",type:"string"},{name:"PERMINTAAN_TINDAKAN",type:"string"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"NOMOR"},0,0,0,0,0,0,[data.model,"Konsul"],0));(Ext.cmd.derive("data.model.KontakPasien",data.model.Model,{serviceName:"general/kontakpasien",fields:[{name:"JENIS",type:"int",defaultValue:3,convert:function(f){return f==0?null:f}},{name:"NORM",type:"int",defaultValue:null,convert:function(f){return f==0?null:f}},{name:"NOMOR",type:"string",defaultValue:null,convert:function(f){return f==""?null:f}}]},0,0,0,0,0,0,[data.model,"KontakPasien"],0));(Ext.cmd.derive("data.model.KontakPenanggungJawab",data.model.Model,{serviceName:"pendaftaran/kontakpenanggungjawab",fields:[{name:"JENIS",type:"int"},{name:"ID",type:"int"},{name:"NOMOR",type:"string"}]},0,0,0,0,0,0,[data.model,"KontakPenanggungJawab"],0));(Ext.cmd.derive("data.model.Kunjungan",data.model.Model,{serviceName:"pendaftaran/kunjungan",entityName:"Kunjungan",fields:[{name:"NOMOR",type:"string"},{name:"NOPEN",type:"string"},{name:"RUANGAN",type:"string"},{name:"MASUK",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"KELUAR",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"RUANG_KAMAR_TIDUR",type:"int"},{name:"DITERIMA_OLEH",type:"int",defaultValue:null,convert:function(f){return f==0?null:f}},{name:"BARU",type:"int"},{name:"TITIPAN",type:"int"},{name:"TITIPAN_KELAS",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"NOMOR"},0,0,0,0,0,0,[data.model,"Kunjungan"],0));(Ext.cmd.derive("data.model.KwitansiPembayaran",data.model.Model,{serviceName:"cetakan/kwitansipembayaran",fields:[{name:"TAGIHAN",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"NOMOR",type:"string"},{name:"NAMA",type:"string"},{name:"TUNAI",type:"int",defaultValue:1},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}]},0,0,0,0,0,0,[data.model,"KwitansiPembayaran"],0));(Ext.cmd.derive("data.model.LaporanDetil",data.model.Model,{serviceName:"general/jenislaporandetil",fields:[{name:"DESKRIPSI",type:"string"},{name:"KODE",type:"string"},{name:"REPORT_PARAMS",type:"string"}]},0,0,0,0,0,0,[data.model,"LaporanDetil"],0));(Ext.cmd.derive("data.model.LayananFarmasi",data.model.Model,{serviceName:"layanan/farmasi",fields:[{name:"ID",type:"string"},{name:"KUNJUNGAN",type:"string"},{name:"FARMASI",type:"int"},{name:"TANGGAL",type:"date",defaultValue:new Date(),dateFormat:"Y-m-d H:i:s"},{name:"JUMLAH",type:"int"},{name:"ATURAN_PAKAI",type:"string"},{name:"KETERANGAN",type:"string"},{name:"ALASAN_TIDAK_TERLAYANI",type:"string"},{name:"HARI",type:"int"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int"},{name:"REF",type:"string"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"LayananFarmasi"],0));(Ext.cmd.derive("data.model.MaterialRequest",data.model.Model,{serviceName:"inventory/materialrequest",fields:[{name:"NO_MR",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d"},{name:"RUMUS_KATEGORI_A",type:"int"},{name:"RUMUS_KATEGORI_B",type:"int"},{name:"RUMUS_KATEGORI_C",type:"int"},{name:"STATUS",type:"int",defaultValue:1},{name:"OLEH",type:"int"}],idProperty:"NO_MR"},0,0,0,0,0,0,[data.model,"MaterialRequest"],0));(Ext.cmd.derive("data.model.MaterialRequestDetil",data.model.Model,{serviceName:"inventory/materialrequestdetil",fields:[{name:"ID",type:"int"},{name:"NO_MR",type:"string"},{name:"BARANG",type:"int"},{name:"KATEGORI",type:"string"},{name:"SISA_STOK",type:"float"},{name:"BARANG_KELUAR",type:"float"},{name:"JML_RUMUS",type:"float"},{name:"JUMLAH",type:"float"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"MaterialRequestDetil"],0));(Ext.cmd.derive("data.model.Mutasi",data.model.Model,{serviceName:"pendaftaran/mutasi",fields:[{name:"NOMOR",type:"string"},{name:"KUNJUNGAN",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"TUJUAN",type:"string"},{name:"RESERVASI",type:"string"},{name:"IKUT_IBU",type:"int"},{name:"KUNJUNGAN_IBU",type:"string"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"NOMOR"},0,0,0,0,0,0,[data.model,"Mutasi"],0));(Ext.cmd.derive("data.model.Negara",data.model.Model,{serviceName:"general/negara",fields:[{name:"ID",type:"int"},{name:"DESKRIPSI",type:"string"},{name:"SINGKATAN",type:"string"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"Negara"],0));(Ext.cmd.derive("data.model.O2",data.model.Model,{serviceName:"layanan/o2",fields:[{name:"ID",type:"int"},{name:"KUNJUNGAN",type:"string"},{name:"FLOW",type:"float"},{name:"PASANG",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"LEPAS",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"PEMAKAIAN",type:"float"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s",defaultValue:new Date()},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"O2"],0));(Ext.cmd.derive("data.model.Operasi",data.model.Model,{serviceName:"medicalrecord/operasi",fields:[{name:"ID",type:"int"},{name:"DOKTER",type:"string"},{name:"ASISTEN_DOKTER",type:"string"},{name:"ANASTESI",type:"string"},{name:"ASISTEN_ANASTESI",type:"string"},{name:"JENIS_ANASTESI",type:"string"},{name:"GOLONGAN_OPERASI",type:"string"},{name:"PRA_BEDAH",type:"string"},{name:"PASCA_BEDAH",type:"string"},{name:"INDIKASI",type:"string"},{name:"NAMA_OPERASI",type:"string"},{name:"PA",type:"string"},{name:"JARINGAN_DIEKSISI",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d"},{name:"WAKTU_MULAI",type:"date",dateFormat:"H:i:s"},{name:"WAKTU_SELESAI",type:"date",dateFormat:"H:i:s"},{name:"DURASI",type:"date",dateFormat:"H:i:s"},{name:"KOMPLIKASI",type:"string"},{name:"PERDARAHAN",type:"string"},{name:"RUANGAN_PASCA_OPERASI",type:"string"},{name:"DIBUAT_TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"Operasi"],0));(Ext.cmd.derive("data.model.OperasiDiTindakan",data.model.Model,{serviceName:"medicalrecord/operasiditindakan",fields:[{name:"ID",type:"int"},{name:"TINDAKAN_MEDIS",type:"string"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"OperasiDiTindakan"],0));(Ext.cmd.derive("data.model.Order",data.model.Model,{fields:[{name:"NOMOR",type:"string"},{name:"KUNJUNGAN",type:"string"},{name:"TANGGAL",type:"date",defaultValue:new Date(),dateFormat:"Y-m-d H:i:s"},{name:"DOKTER_ASAL",type:"int"},{name:"TUJUAN",type:"string"},{name:"OLEH",type:"int"},{name:"ALASAN",type:"string"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"NOMOR"},0,0,0,0,0,0,[data.model,"Order"],0));(Ext.cmd.derive("data.model.OrderDetil",data.model.Model,{fields:[{name:"ORDER_ID",type:"string"},{name:"TINDAKAN",type:"int"}]},0,0,0,0,0,0,[data.model,"OrderDetil"],0));(Ext.cmd.derive("data.model.OrderDetilLab",data.model.OrderDetil,{serviceName:"layanan/orderdetillab"},0,0,0,0,0,0,[data.model,"OrderDetilLab"],0));(Ext.cmd.derive("data.model.OrderDetilRad",data.model.OrderDetil,{serviceName:"layanan/orderdetilrad"},0,0,0,0,0,0,[data.model,"OrderDetilRad"],0));(Ext.cmd.derive("data.model.OrderDetilResep",data.model.Model,{serviceName:"layanan/orderdetilresep",fields:[{name:"ORDER_ID",type:"string"},{name:"FARMASI",type:"int"},{name:"JUMLAH",type:"float"},{name:"ATURAN_PAKAI",type:"string"},{name:"KETERANGAN",type:"string"},{name:"RACIKAN",type:"int"},{name:"GROUP_RACIKAN",type:"int"},{name:"PETUNJUK_RACIKAN",type:"string"},{name:"JUMLAH_RACIKAN",type:"float"},{name:"REF",type:"string"}]},0,0,0,0,0,0,[data.model,"OrderDetilResep"],0));(Ext.cmd.derive("data.model.OrderLab",data.model.Order,{serviceName:"layanan/orderlab"},0,0,0,0,0,0,[data.model,"OrderLab"],0));(Ext.cmd.derive("data.model.OrderRad",data.model.Order,{serviceName:"layanan/orderrad"},0,0,0,0,0,0,[data.model,"OrderRad"],0));(Ext.cmd.derive("data.model.OrderResep",data.model.Model,{serviceName:"layanan/orderresep",fields:[{name:"NOMOR",type:"string"},{name:"NOPEN",type:"string"},{name:"KUNJUNGAN",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"DOKTER_DPJP",type:"int"},{name:"PEMBERI_RESEP",type:"string"},{name:"BERAT_BADAN",type:"boolean"},{name:"TINGGI_BADAN",type:"boolean"},{name:"DIAGNOSA",type:"string"},{name:"ALERGI_OBAT",type:"string"},{name:"GANGGUAN_FUNGSI_GINJAL",type:"int"},{name:"MENYUSUI",type:"int"},{name:"HAMIL",type:"int"},{name:"RESEP_PASIEN_PULANG",type:"int"},{name:"TUJUAN",type:"string"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"NOMOR"},0,0,0,0,0,0,[data.model,"OrderResep"],0));(Ext.cmd.derive("data.model.Paket",data.model.Model,{serviceName:"general/paket",fields:[{name:"ID",type:"int"},{name:"NAMA",type:"string"},{name:"KELAS",type:"int"},{name:"LAMA",type:"int"},{name:"UNTUK_KUNJUNGAN",type:"string"},{name:"TARIF",type:"int"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"Paket"],0));(Ext.cmd.derive("data.model.PaketDetil",data.model.Model,{serviceName:"general/paketdetil",fields:[{name:"ID",type:"int"},{name:"PAKET",type:"int"},{name:"JENIS",type:"int"},{name:"ITEM"},{name:"QTY",type:"float"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"PaketDetil"],0));(Ext.cmd.derive("data.model.PanggilanAntrianRuangan",data.model.Model,{serviceName:"pendaftaran/panggilanantrianruangan",fields:[{name:"ID",type:"int"},{name:"ANTRIAN_RUANGAN",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"PanggilanAntrianRuangan"],0));(Ext.cmd.derive("data.model.ParameterTindakanLab",data.model.Model,{serviceName:"general/parametertindakanlab",fields:[{name:"ID",type:"int"},{name:"TINDAKAN",type:"int"},{name:"PARAMETER",type:"string"},{name:"NILAI_RUJUKAN",type:"string"},{name:"SATUAN",type:"int"},{name:"INDEKS",type:"int"},{name:"TANGGAL",type:"date",defaultValue:new Date(),dateFormat:"Y-m-d H:i:s"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"ParameterTindakanLab"],0));(Ext.cmd.derive("data.model.Pasien",data.model.Model,{serviceName:"general/pasien",fields:[{name:"NORM",type:"int"},{name:"NAMA",type:"string"},{name:"PANGGILAN",type:"string",defaultValue:null,convert:function(f){return f==""?null:f}},{name:"GELAR_DEPAN",type:"string",defaultValue:null,convert:function(f){return f==""?null:f}},{name:"GELAR_BELAKANG",type:"string",defaultValue:null,convert:function(f){return f==""?null:f}},{name:"TEMPAT_LAHIR",type:"string",defaultValue:null,convert:function(f){return f==""?null:f}},{name:"TANGGAL_LAHIR",type:"date",defaultValue:new Date(),dateFormat:"Y-m-d H:i:s"},{name:"JENIS_KELAMIN",type:"int",defaultValue:1},{name:"ALAMAT",type:"string",defaultValue:null,convert:function(f){return f==""?null:f}},{name:"RT",type:"string",defaultValue:null,convert:function(f){return f==""?null:f}},{name:"RW",type:"string",defaultValue:null,convert:function(f){return f==""?null:f}},{name:"KODEPOS",type:"string",defaultValue:null,convert:function(f){return f==""?null:f}},{name:"WILAYAH",type:"string",defaultValue:null,convert:function(f){return f==""?null:f}},{name:"AGAMA",type:"int",defaultValue:null,convert:function(f){return f==0?null:f}},{name:"PENDIDIKAN",type:"int",defaultValue:null,convert:function(f){return f==0?null:f}},{name:"PEKERJAAN",type:"int",defaultValue:null,convert:function(f){return f==0?null:f}},{name:"STATUS_PERKAWINAN",type:"int",defaultValue:null,convert:function(f){return f==0?null:f}},{name:"GOLONGAN_DARAH",type:"int",defaultValue:13,convert:function(f){return f==0?null:f}},{name:"KEWARGANEGARAAN",type:"int",defaultValue:71},{name:"SUKU",type:"int",defaultValue:0},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"NORM"},0,0,0,0,0,0,[data.model,"Pasien"],0));(Ext.cmd.derive("data.model.PasienMeninggal",data.model.Model,{serviceName:"layanan/pasienmeninggal",fields:[{name:"KUNJUNGAN",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"DIAGNOSA",type:"string"},{name:"DOKTER",type:"int"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}]},0,0,0,0,0,0,[data.model,"PasienMeninggal"],0));(Ext.cmd.derive("data.model.PasienPulang",data.model.Model,{serviceName:"layanan/pasienpulang",fields:[{name:"ID",type:"int"},{name:"KUNJUNGAN",type:"string"},{name:"NOPEN",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"CARA",type:"int"},{name:"KEADAAN",type:"int"},{name:"DIAGNOSA",type:"string"},{name:"DOKTER",type:"int"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"PasienPulang"],0));(Ext.cmd.derive("data.model.Pegawai",data.model.Model,{serviceName:"general/pegawai",fields:[{name:"NIP",type:"string"},{name:"NAMA",type:"string"},{name:"PANGGILAN",type:"string"},{name:"GELAR_DEPAN",type:"string"},{name:"GELAR_BELAKANG",type:"string"},{name:"TEMPAT_LAHIR",type:"string"},{name:"TANGGAL_LAHIR",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"JENIS_KELAMIN",type:"int"},{name:"ALAMAT",type:"string"},{name:"RT",type:"string"},{name:"RW",type:"string"},{name:"KODEPOS",type:"string"},{name:"WILAYAH",type:"string"},{name:"AGAMA",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"NIP"},0,0,0,0,0,0,[data.model,"Pegawai"],0));(Ext.cmd.derive("data.model.PembatalanKunjungan",data.model.Model,{serviceName:"pembatalan/pembatalankunjungan",fields:[{name:"ID",type:"int"},{name:"KUNJUNGAN",type:"string"},{name:"JENIS",type:"int"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"PembatalanKunjungan"],0));(Ext.cmd.derive("data.model.PembayaranTagihan",data.model.Model,{serviceName:"pembayaran/pembayarantagihan",fields:[{name:"TAGIHAN",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"JENIS",type:"int"},{name:"REF",type:"string"},{name:"DESKRIPSI",type:"string"},{name:"TOTAL",type:"float"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}]},0,0,0,0,0,0,[data.model,"PembayaranTagihan"],0));(Ext.cmd.derive("data.model.PenanggungJawab",data.model.Model,{serviceName:"pendaftaran/penanggungjawabpasien",fields:[{name:"ID",type:"int"},{name:"NOPEN",type:"string"},{name:"REF",type:"int"},{name:"SHDK",type:"int"},{name:"JENIS_KELAMIN",type:"int"},{name:"NAMA",type:"string"},{name:"ALAMAT",type:"string"},{name:"PENDIDIKAN",type:"int"},{name:"PEKERJAAN",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"PenanggungJawab"],0));(Ext.cmd.derive("data.model.Pendaftaran",data.model.Model,{serviceName:"pendaftaran/pendaftaran",fields:[{name:"NOMOR",type:"string"},{name:"NORM",type:"int",defaultValue:null,convert:function(f){return f==0?null:f}},{name:"DIAGNOSA_MASUK",type:"int",defaultValue:null,convert:function(f){return f==0?null:f}},{name:"RUJUKAN",type:"string",defaultValue:null,convert:function(f){return f==""?null:f}},{name:"PAKET",type:"int",defaultValue:null,convert:function(f){return f==0?null:f}},{name:"BERAT_BAYI",type:"int",defaultValue:null,convert:function(f){return f==0?null:f}},{name:"PANJANG_BAYI",type:"int",defaultValue:null,convert:function(f){return f==0?null:f}},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"LAKA_LANTAS",type:"int",defaultValue:0},{name:"LOKASI_LAKA",type:"string"},{name:"OLEH",type:"int",defaultValue:null,convert:function(f){return f==0?null:f}},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"NOMOR"},0,0,0,0,0,0,[data.model,"Pendaftaran"],0));(Ext.cmd.derive("data.model.Penerimaan",data.model.Model,{serviceName:"inventory/penerimaan",fields:[{name:"NOMOR",type:"string"},{name:"RUANGAN",type:"string"},{name:"JENIS",type:"int"},{name:"REF",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"NOMOR"},0,0,0,0,0,0,[data.model,"Penerimaan"],0));(Ext.cmd.derive("data.model.PengembalianBarang",data.model.Model,{serviceName:"inventory/pengembalianbarang",fields:[{name:"ID",type:"int"},{name:"RUANGAN",type:"string"},{name:"REKANAN",type:"int"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"PengembalianBarang"],0));(Ext.cmd.derive("data.model.PengembalianBarangDetil",data.model.Model,{serviceName:"inventory/pengembalianbarangdetil",fields:[{name:"ID",type:"int"},{name:"PENGEMBALIAN",type:"int"},{name:"BARANG",type:"int"},{name:"JUMLAH",type:"float"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"PengembalianBarangDetil"],0));(Ext.cmd.derive("data.model.PengembalianDeposit",data.model.Model,{serviceName:"pembayaran/pengembaliandeposit",fields:[{name:"TAGIHAN",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"NAMA PENERIMA",type:"string"},{name:"TOTAL",type:"float"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"TAGIHAN"},0,0,0,0,0,0,[data.model,"PengembalianDeposit"],0));(Ext.cmd.derive("data.model.Pengguna",data.model.Model,{serviceName:"aplikasi/pengguna",fields:[{name:"ID",type:"int"},{name:"LOGIN",type:"string"},{name:"PASSWORD",type:"string"},{name:"NAMA",type:"string"},{name:"NIP",type:"string"},{name:"NIK",type:"string"},{name:"JENIS",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"Pengguna"],0));(Ext.cmd.derive("data.model.PenggunaAkses",data.model.Model,{serviceName:"aplikasi/penggunaakses",fields:[{name:"ID",type:"int"},{name:"PENGGUNA",type:"int"},{name:"GROUP_PENGGUNA_AKSES_MODULE",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"PenggunaAkses"],0));(Ext.cmd.derive("data.model.PenggunaAksesPencarian",data.model.Model,{serviceName:"aplikasi/modules",fields:[{name:"ID",type:"int"},{name:"NAMA",type:"string"},{name:"LEVEL",type:"int"},{name:"DESKRIPSI",type:"string"},{name:"CLASS",type:"string"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"PenggunaAksesPencarian"],0));(Ext.cmd.derive("data.model.PenggunaAksesRuangan",data.model.Model,{serviceName:"aplikasi/penggunaaksesruangan",fields:[{name:"ID",type:"int"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"PENGGUNA",type:"int"},{name:"RUANGAN",type:"string"},{name:"DIBERIKAN_OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"PenggunaAksesRuangan"],0));(Ext.cmd.derive("data.model.Pengiriman",data.model.Model,{serviceName:"inventory/pengiriman",fields:[{name:"NOMOR",type:"string"},{name:"ASAL",type:"string"},{name:"TUJUAN",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"NOMOR"},0,0,0,0,0,0,[data.model,"Pengiriman"],0));(Ext.cmd.derive("data.model.PengirimanDetil",data.model.Model,{serviceName:"inventory/pengirimandetil",fields:[{name:"ID",type:"int"},{name:"PENGIRIMAN",type:"string"},{name:"PERMINTAAN_BARANG_DETIL",type:"string"},{name:"JUMLAH",type:"float"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"PengirimanDetil"],0));(Ext.cmd.derive("data.model.Penjamin",data.model.Model,{serviceName:"pendaftaran/penjamin",fields:[{name:"JENIS",type:"int",defaultValue:1},{name:"NOPEN",type:"string"},{name:"NOMOR",type:"string"},{name:"KELAS",type:"int"},{name:"COB",type:"int",defaultValue:0},{name:"KATARAK",type:"int",defaultValue:0},{name:"NO_SURAT",type:"string"},{name:"DPJP",type:"string"},{name:"CATATAN",type:"string"}],idProperty:"NOPEN"},0,0,0,0,0,0,[data.model,"Penjamin"],0));(Ext.cmd.derive("data.model.PenjaminRuangan",data.model.Model,{serviceName:"general/penjaminruangan",fields:[{name:"ID",type:"int"},{name:"PENJAMIN",type:"int"},{name:"RUANGAN_PENJAMIN",type:"string"},{name:"RUANGAN_RS",type:"string"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"PenjaminRuangan"],0));(Ext.cmd.derive("data.model.PenjaminTagihan",data.model.Model,{serviceName:"pembayaran/penjamintagihan",fields:[{name:"TAGIHAN",type:"string"},{name:"PENJAMIN",type:"int"},{name:"KE",type:"int"},{name:"TOTAL",type:"float"},{name:"TOTAL_NAIK_KELAS",type:"float"},{name:"NAIK_KELAS",type:"int"},{name:"NAIK_KELAS_VIP",type:"int"},{name:"NAIK_DIATAS_VIP",type:"int"},{name:"TOTAL_TAGIHAN_HAK",type:"float"},{name:"TARIF_INACBG_KELAS1",type:"float"},{name:"SUBSIDI_TAGIHAN",type:"int"},{name:"KELAS_KLAIM",type:"int"},{name:"KELAS",type:"int"},{name:"LAMA_NAIK",type:"int"}]},0,0,0,0,0,0,[data.model,"PenjaminTagihan"],0));(Ext.cmd.derive("data.model.Penjualan",data.model.Model,{serviceName:"penjualan/penjualan",fields:[{name:"NOMOR",type:"string"},{name:"RUANGAN",type:"string"},{name:"PENGUNJUNG",type:"string"},{name:"JENIS",type:"int"},{name:"DOKTER",type:"string"},{name:"KETERANGAN",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"NOMOR"},0,0,0,0,0,0,[data.model,"Penjualan"],0));(Ext.cmd.derive("data.model.PenjualanDetil",data.model.Model,{serviceName:"penjualan/penjualandetil",fields:[{name:"ID",type:"int"},{name:"PENJUALAN_ID",type:"string"},{name:"BARANG",type:"int"},{name:"HARGA_BARANG",type:"int"},{name:"ATURAN_PAKAI",type:"string"},{name:"JUMLAH",type:"float"},{name:"MARGIN",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"PenjualanDetil"],0));(Ext.cmd.derive("data.model.PenyebabKematian",data.model.Model,{serviceName:"medicalrecord/icd10kematian",fields:[{name:"ID",type:"int"},{name:"NOPEN",type:"string"},{name:"KODE",type:"string"},{name:"DIAGNOSA",type:"string"},{name:"UTAMA",type:"int"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"PenyebabKematian"],0));(Ext.cmd.derive("data.model.Penyedia",data.model.Model,{serviceName:"inventory/penyedia",fields:[{name:"ID",type:"int"},{name:"NAMA",type:"string"},{name:"ALAMAT",type:"string"},{name:"TELEPON",type:"string"},{name:"FAX",type:"string"},{name:"TANGGAL",type:"date",defaultValue:new Date(),dateFormat:"y-m-d H:i:s"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"Penyedia"],0));(Ext.cmd.derive("data.model.Perawat",data.model.Model,{serviceName:"general/perawat",fields:[{name:"ID",type:"int"},{name:"NIP",type:"string"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"Perawat"],0));(Ext.cmd.derive("data.model.PerawatRuangan",data.model.Model,{serviceName:"general/perawatruangan",fields:[{name:"ID",type:"int"},{name:"TANGGAL",type:"date"},{name:"PERAWAT",type:"int"},{name:"RUANGAN",type:"string"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"PerawatRuangan"],0));(Ext.cmd.derive("data.model.Permintaan",data.model.Model,{serviceName:"inventory/permintaan",fields:[{name:"NOMOR",type:"string"},{name:"ASAL",type:"string"},{name:"TUJUAN",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1},{name:"TERIMA",type:"int"}],idProperty:"NOMOR"},0,0,0,0,0,0,[data.model,"Permintaan"],0));(Ext.cmd.derive("data.model.PermintaanDetil",data.model.Model,{serviceName:"inventory/permintaandetil",fields:[{name:"ID",type:"int"},{name:"PERMINTAAN",type:"string"},{name:"BARANG",type:"int"},{name:"JUMLAH",type:"float"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"PermintaanDetil"],0));(Ext.cmd.derive("data.model.PetugasTindakanMedis",data.model.Model,{serviceName:"layanan/petugastindakanmedis",entityName:"PetugasTindakanMedis",fields:[{name:"TINDAKAN_MEDIS",type:"int"},{name:"JENIS",type:"int"},{name:"MEDIS",type:"int"},{name:"KE",type:"int"},{name:"STATUS",type:"int",defaultValue:1},{name:"id",type:"string",convert:function(l,g){return g.data.TINDAKAN_MEDIS+"-"+g.data.JENIS+"-"+g.data.MEDIS}}]},0,0,0,0,0,0,[data.model,"PetugasTindakanMedis"],0));(Ext.cmd.derive("data.model.PiutangPasien",data.model.Model,{serviceName:"pembayaran/piutangpasien",fields:[{name:"TAGIHAN",type:"string"},{name:"NAMA",type:"string"},{name:"SHDK",type:"int"},{name:"NO_KARTU_IDENTITAS",type:"string"},{name:"JENIS_KARTU",type:"int"},{name:"ALAMAT_KARTU",type:"string"},{name:"ALAMAT_TEMPAT_TINGGAL",type:"string"},{name:"TELEPON",type:"string"},{name:"ALASAN",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"TOTAL",type:"float"},{name:"JENIS_PEMBAYARAN",type:"int"},{name:"LAMA_ANGSURAN",type:"int"},{name:"BESAR_ANGSURAN",type:"float"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}]},0,0,0,0,0,0,[data.model,"PiutangPasien"],0));(Ext.cmd.derive("data.model.PiutangPerusahaan",data.model.Model,{serviceName:"pembayaran/piutangperusahaan",fields:[{name:"TAGIHAN",type:"string"},{name:"PENJAMIN",type:"int"},{name:"ALAMAT",type:"string"},{name:"TELEPON",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"TOTAL",type:"float"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}]},0,0,0,0,0,0,[data.model,"PiutangPerusahaan"],0));(Ext.cmd.derive("data.model.Ppk",data.model.Model,{serviceName:"general/ppk",fields:[{name:"ID",type:"int"},{name:"KODE",type:"string",defaultValue:null},{name:"BPJS",type:"string",defaultValue:null},{name:"JENIS",type:"int"},{name:"KEPEMILIKAN",type:"int"},{name:"JPK",type:"int"},{name:"NAMA",type:"string"},{name:"KELAS",type:"string"},{name:"ALAMAT",type:"string"},{name:"RT",type:"string"},{name:"RW",type:"string"},{name:"KODEPOS",type:"string"},{name:"TELEPON",type:"string"},{name:"FAX",type:"string"},{name:"WILAYAH",type:"string"},{name:"DESWILAYAH",type:"string"},{name:"MULAI",type:"date"},{name:"BERAKHIR",type:"date"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"Ppk"],0));(Ext.cmd.derive("data.model.PurchaseOrder",data.model.Model,{serviceName:"inventory/purchaseorder",fields:[{name:"NO_PO",type:"string"},{name:"NO_MR",type:"string"},{name:"SUPPLIER",type:"int"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"KETERANGAN",type:"string"},{name:"STATUS",type:"int",defaultValue:1},{name:"OLEH",type:"int"},{name:"UPDATE_TIME",type:"date",dateFormat:"Y-m-d H:i:s"}],idProperty:"NO_PO"},0,0,0,0,0,0,[data.model,"PurchaseOrder"],0));(Ext.cmd.derive("data.model.PurchaseOrderDetil",data.model.Model,{serviceName:"inventory/purchaseorderdetil",fields:[{name:"ID",type:"int"},{name:"ID_PO",type:"string"},{name:"BARANG",type:"int"},{name:"JUMLAH",type:"float"},{name:"ID_MR_DETIL",type:"int"},{name:"ID_SPH",type:"int"},{name:"STATUS",type:"int",defaultValue:1},{name:"OLEH",type:"int"},{name:"UPDATE_TIME",type:"date",dateFormat:"Y-m-d H:i:s"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"PurchaseOrderDetil"],0));(Ext.cmd.derive("data.model.Referensi",data.model.Model,{serviceName:"general/referensi",fields:[{name:"JENIS",type:"int"},{name:"ID",type:"int"},{name:"DESKRIPSI",type:"string"},{name:"REF_ID",type:"string"},{name:"STATUS",type:"int"}]},0,0,0,0,0,0,[data.model,"Referensi"],0));(Ext.cmd.derive("data.model.RequestReport",Ext.data.Model,{fields:[{name:"NAME",type:"string"},{name:"CONNECTION_NUMBER",type:"int",defaultValue:0},{name:"TYPE",type:"string",defaultValue:"Pdf"},{name:"EXT",type:"string",defaultValue:"pdf"},"PARAMETER",{name:"REQUEST_FOR_PRINT",type:"boolean",defaultValue:false},"PRINT_NAME",{name:"COPIES",type:"int",defaultValue:1}],proxy:{type:"rest",url:webservice.location+"plugins/request-report",reader:{type:"json",rootProperty:"content"}}},0,0,0,0,0,0,[data.model,"RequestReport"],0));(Ext.cmd.derive("data.model.Reservasi",data.model.Model,{serviceName:"pendaftaran/reservasi",fields:[{name:"NOMOR",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"RUANG_KAMAR_TIDUR",type:"int"},{name:"BERAKHIR",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"ATAS_NAMA",type:"string"},{name:"KONTAK_INFO",type:"string"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int"}],idProperty:"NOMOR"},0,0,0,0,0,0,[data.model,"Reservasi"],0));(Ext.cmd.derive("data.model.ReturLayananFarmasi",data.model.Model,{serviceName:"layanan/returfarmasi",fields:[{name:"ID",type:"int"},{name:"ID_FARMASI",type:"string"},{name:"JUMLAH",type:"float"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"OLEH",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"ReturLayananFarmasi"],0));(Ext.cmd.derive("data.model.ReturPenjualan",data.model.Model,{serviceName:"penjualan/returpenjualan",fields:[{name:"ID",type:"int"},{name:"PENJUALAN_ID",type:"string"},{name:"PENJUALAN_DETIL_ID",type:"string"},{name:"BARANG",type:"int"},{name:"JUMLAH",type:"float"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"ReturPenjualan"],0));(Ext.cmd.derive("data.model.RincianTagihan",data.model.Model,{serviceName:"pembayaran/rinciantagihan",fields:[{name:"TAGIHAN",type:"string"},{name:"REF_ID",type:"string"},{name:"JENIS",type:"int"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"TARIF_ID",type:"int"},{name:"JUMLAH",type:"float"},{name:"TOTAL_BIAYA",type:"float"},{name:"STATUS",type:"int",defaultValue:1}]},0,0,0,0,0,0,[data.model,"RincianTagihan"],0));(Ext.cmd.derive("data.model.RincianTagihanPaket",data.model.Model,{serviceName:"pembayaran/rinciantagihanpaket",fields:[{name:"TAGIHAN",type:"string"},{name:"PAKET_DETIL",type:"int"},{name:"REF_ID",type:"string"},{name:"STATUS",type:"int",defaultValue:1}]},0,0,0,0,0,0,[data.model,"RincianTagihanPaket"],0));(Ext.cmd.derive("data.model.RuangKamar",data.model.Model,{serviceName:"general/ruangkamar",fields:[{name:"ID",type:"int"},{name:"RUANGAN",type:"string"},{name:"KAMAR",type:"string"},{name:"KELAS",type:"int"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"RuangKamar"],0));(Ext.cmd.derive("data.model.RuangKamarTidur",data.model.Model,{serviceName:"general/ruangkamartidur",fields:[{name:"ID",type:"int"},{name:"RUANG_KAMAR",type:"int"},{name:"TEMPAT_TIDUR",type:"string"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"RuangKamarTidur"],0));(Ext.cmd.derive("data.model.Ruangan",data.model.Model,{serviceName:"general/ruangan",fields:[{name:"ID",type:"string"},{name:"JENIS",type:"int"},{name:"JENIS_KUNJUNGAN",type:"int"},{name:"REF_ID",type:"int"},{name:"DESKRIPSI",type:"string"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"Ruangan"],0));(Ext.cmd.derive("data.model.RuanganFarmasi",data.model.Model,{serviceName:"general/ruanganfarmasi",fields:[{name:"RUANGAN",type:"string"},{name:"FARMASI",type:"string"},{name:"STATUS",type:"int",defaultValue:1}]},0,0,0,0,0,0,[data.model,"RuanganFarmasi"],0));(Ext.cmd.derive("data.model.RuanganKonsul",data.model.Model,{serviceName:"general/ruangankonsul",fields:[{name:"RUANGAN",type:"string"},{name:"KONSUL",type:"string"},{name:"STATUS",type:"int",defaultValue:1}]},0,0,0,0,0,0,[data.model,"RuanganKonsul"],0));(Ext.cmd.derive("data.model.RuanganLab",data.model.Model,{serviceName:"general/ruanganlaboratorium",fields:[{name:"RUANGAN",type:"string"},{name:"LABORATORIUM",type:"string"},{name:"STATUS",type:"int",defaultValue:1}]},0,0,0,0,0,0,[data.model,"RuanganLab"],0));(Ext.cmd.derive("data.model.RuanganMutasi",data.model.Model,{serviceName:"general/ruanganmutasi",fields:[{name:"RUANGAN",type:"string"},{name:"MUTASI",type:"string"},{name:"STATUS",type:"int",defaultValue:1}]},0,0,0,0,0,0,[data.model,"RuanganMutasi"],0));(Ext.cmd.derive("data.model.RuanganOperasi",data.model.Model,{serviceName:"general/ruanganoperasi",fields:[{name:"RUANGAN",type:"string"},{name:"OPERASI",type:"string"},{name:"STATUS",type:"int",defaultValue:1}]},0,0,0,0,0,0,[data.model,"RuanganOperasi"],0));(Ext.cmd.derive("data.model.RuanganRad",data.model.Model,{serviceName:"general/ruanganradiologi",fields:[{name:"RUANGAN",type:"string"},{name:"RADIOLOGI",type:"string"},{name:"STATUS",type:"int",defaultValue:1}]},0,0,0,0,0,0,[data.model,"RuanganRad"],0));(Ext.cmd.derive("data.model.RuanganTree",Ext.data.TreeModel,{entityName:"RuanganTree",fields:[{name:"ID",type:"string"},{name:"JENIS",type:"int"},{name:"DESKRIPSI",type:"string"},{name:"text",type:"string",convert:function(g,l){return l.get("DESKRIPSI")}},"children","leaf",{name:"expanded",type:"boolean",defautlValue:"true"},"cls",{name:"STATUS",type:"int"}],root:{expanded:true},proxy:{type:"ajax",url:webservice.location+"general/ruangan",reader:{type:"json",rootProperty:"children"}}},0,0,0,0,0,0,[data.model,"RuanganTree"],0));(Ext.cmd.derive("data.model.RumusPerencanaan",data.model.Model,{serviceName:"inventory/rumusperencanaan",fields:[{name:"ID_RUMUS",type:"int"},{name:"KATEGORI",type:"string"},{name:"PERIODE_PERENCANAAN",type:"int"},{name:"VOLUME_PRESENTASE",type:"int"},{name:"LEAD_TIME",type:"int"},{name:"STATUS",type:"int",defaultValue:1},{name:"OLEH",type:"int"},{name:"UPDATE_TIME",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID_RUMUS"},0,0,0,0,0,0,[data.model,"RumusPerencanaan"],0));(Ext.cmd.derive("data.model.Satuan",data.model.Model,{serviceName:"inventory/satuan",fields:[{name:"ID",type:"int"},{name:"NAMA",type:"string"},{name:"DESKRIPSI",type:"string"},{name:"TANGGAL",type:"date"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}]},0,0,0,0,0,0,[data.model,"Satuan"],0));(Ext.cmd.derive("data.model.SmfRuangan",data.model.Model,{serviceName:"general/smfruangan",fields:[{name:"ID",type:"int"},{name:"TANGGAL",type:"date"},{name:"RUANGAN",type:"string"},{name:"SMF"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"SmfRuangan"],0));(Ext.cmd.derive("data.model.Staff",data.model.Model,{serviceName:"general/staff",fields:[{name:"ID",type:"int"},{name:"NIP",type:"string"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"Staff"],0));(Ext.cmd.derive("data.model.StaffRuangan",data.model.Model,{serviceName:"general/staffruangan",fields:[{name:"ID",type:"int"},{name:"TANGGAL",type:"date"},{name:"STAFF",type:"int"},{name:"RUANGAN",type:"string"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"StaffRuangan"],0));(Ext.cmd.derive("data.model.StokOpname",data.model.Model,{serviceName:"inventory/stokopname",fields:[{name:"ID",type:"int"},{name:"RUANGAN",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d"},{name:"TANGGAL_DIBUAT",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"KETERANGAN",type:"string"},{name:"OLEH",type:"int"},{name:"STATUS",type:"string",defaultValue:2}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"StokOpname"],0));(Ext.cmd.derive("data.model.StokOpnameDetil",data.model.Model,{serviceName:"inventory/stokopnamedetil",fields:[{name:"ID",type:"int"},{name:"STOK_OPNAME",type:"int"},{name:"BARANG_RUANGAN",type:"int"},{name:"SISTEM",type:"float"},{name:"MANUAL",type:"float",allowNull:true},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"StokOpnameDetil"],0));(Ext.cmd.derive("data.model.SuratPenawaranHarga",data.model.Model,{serviceName:"inventory/suratpenawaranharga",fields:[{name:"NOMOR",type:"string"},{name:"SUPPLIER",type:"int"},{name:"PERIODE_AWAL",type:"date",dateFormat:"Y-m-d"},{name:"PERIODE_AKHIR",type:"date",dateFormat:"Y-m-d"},{name:"EXPIRED",type:"date",dateFormat:"Y-m-d"},{name:"STATUS",type:"int",defaultValue:1},{name:"OLEH",type:"int"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"}],idProperty:"NOMOR"},0,0,0,0,0,0,[data.model,"SuratPenawaranHarga"],0));(Ext.cmd.derive("data.model.SuratPenawaranHargaDetil",data.model.Model,{serviceName:"inventory/suratpenawaranhargadetil",fields:[{name:"ID",type:"int"},{name:"ID_PENAWARAN",type:"string"},{name:"BARANG",type:"int"},{name:"HARGA",type:"float"},{name:"DISKON_PERSEN",type:"float"},{name:"DISKON_RUPIAH",type:"float"},{name:"STATUS",type:"int",defaultValue:1},{name:"OLEH",type:"int"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"SuratPenawaranHargaDetil"],0));(Ext.cmd.derive("data.model.SuratRujukan",data.model.Model,{serviceName:"pendaftaran/suratrujukanpasien",fields:[{name:"ID",type:"int"},{name:"PPK",type:"int"},{name:"NORM",type:"int"},{name:"NOMOR",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"DOKTER",type:"string"},{name:"BAGIAN_DOKTER",type:"string"},{name:"DIAGNOSA_MASUK",type:"int"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"SuratRujukan"],0));(Ext.cmd.derive("data.model.Tagihan",data.model.Model,{serviceName:"pembayaran/tagihan",fields:[{name:"ID",type:"int"},{name:"REF",type:"int"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"JENIS",type:"int"},{name:"TOTAL",type:"float"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1},{name:"HITUNGULANG",type:"int",defaultValue:0},{name:"REDISTRIBUSI",type:"int",defaultValue:0}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"Tagihan"],0));(Ext.cmd.derive("data.model.TagihanPendaftaran",data.model.Model,{serviceName:"pembayaran/tagihanpendaftaran",fields:[{name:"TAGIHAN",type:"string"},{name:"PENDAFTARAN",type:"string"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"TAGIHAN"},0,0,0,0,0,0,[data.model,"TagihanPendaftaran"],0));(Ext.cmd.derive("data.model.TarifAdministrasi",data.model.Model,{serviceName:"general/tarifadministrasi",fields:[{name:"ID",type:"int"},{name:"ADMINISTRASI",type:"int"},{name:"JENIS_KUNJUNGAN",type:"int"},{name:"PASIEN_BARU",type:"int",defaultValue:0},{name:"TARIF",type:"int"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"TANGGAL_SK",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"NOMOR_SK",type:"string"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"TarifAdministrasi"],0));(Ext.cmd.derive("data.model.TarifFarmasiPerKelas",data.model.Model,{serviceName:"general/tariffarmasiperkelas",fields:[{name:"ID",type:"int"},{name:"KELAS",type:"int"},{name:"FARMASI",type:"float"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"TarifFarmasiPerKelas"],0));(Ext.cmd.derive("data.model.TarifO2",data.model.Model,{serviceName:"general/tarifo2",fields:[{name:"ID",type:"int"},{name:"TARIF",type:"int"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"TANGGAL_SK",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"NOMOR_SK",type:"string"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"TarifO2"],0));(Ext.cmd.derive("data.model.TarifRuangRawat",data.model.Model,{serviceName:"general/tarifruangrawat",fields:[{name:"ID",type:"int"},{name:"KELAS",type:"int"},{name:"SARANA",type:"int"},{name:"JASA_PELAYANAN",type:"int"},{name:"TARIF",type:"int"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"TANGGAL_SK",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"NOMOR_SK",type:"string"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"TarifRuangRawat"],0));(Ext.cmd.derive("data.model.TarifTindakan",data.model.Model,{serviceName:"general/tariftindakan",fields:[{name:"ID",type:"int"},{name:"TINDAKAN",type:"int"},{name:"KELAS",type:"int"},{name:"ADMINISTRASI",type:"int"},{name:"SARANA",type:"int"},{name:"BHP",type:"int"},{name:"DOKTER_OPERATOR",type:"int"},{name:"DOKTER_ANASTESI",type:"int"},{name:"DOKTER_LAINNYA",type:"int"},{name:"PENATA_ANASTESI",type:"int"},{name:"PARAMEDIS",type:"int"},{name:"NON_MEDIS",type:"int"},{name:"TARIF",type:"int"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"TANGGAL_SK",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"NOMOR_SK",type:"string"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"TarifTindakan"],0));(Ext.cmd.derive("data.model.TempatLahir",data.model.Model,{serviceName:"general/tempatlahir",fields:[{name:"ID",type:"string"},{name:"DESKRIPSI",type:"string"}]},0,0,0,0,0,0,[data.model,"TempatLahir"],0));(Ext.cmd.derive("data.model.TenagaMedis",data.model.Model,{serviceName:"general/tenagamedis",fields:[{name:"ID",type:"int"},{name:"NAMA",type:"string"},{name:"NIP",type:"string"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"TenagaMedis"],0));(Ext.cmd.derive("data.model.Tindakan",data.model.Model,{serviceName:"general/tindakan",fields:[{name:"ID",type:"int"},{name:"JENIS",type:"int"},{name:"NAMA",type:"string"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"Tindakan"],0));(Ext.cmd.derive("data.model.TindakanMedis",data.model.Model,{serviceName:"layanan/tindakanmedis",fields:[{name:"ID",type:"string"},{name:"KUNJUNGAN",type:"string"},{name:"TINDAKAN",type:"int"},{name:"TANGGAL",type:"date",defaultValue:new Date(),dateFormat:"Y-m-d H:i:s"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"TindakanMedis"],0));(Ext.cmd.derive("data.model.TindakanRuangan",data.model.Model,{serviceName:"general/tindakanruangan",fields:[{name:"ID",type:"int"},{name:"TANGGAL",type:"date"},{name:"STAFF",type:"int"},{name:"RUANGAN",type:"int"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"TindakanRuangan"],0));(Ext.cmd.derive("data.model.TransaksiKasir",data.model.Model,{serviceName:"pembayaran/transaksikasir",fields:[{name:"NOMOR",type:"int"},{name:"KASIR",type:"int"},{name:"BUKA",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"TUTUP",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"NOMOR"},0,0,0,0,0,0,[data.model,"TransaksiKasir"],0));(Ext.cmd.derive("data.model.TreeModules",Ext.data.TreeModel,{entityName:"TreeModules",fields:[{name:"ID",type:"string"},{name:"NAMA",type:"string"},{name:"LEVEL",type:"int"},{name:"DESKRIPSI",type:"string"},{name:"text",type:"string",convert:function(g,l){return l.get("NAMA")}},"children","leaf",{name:"expanded",type:"boolean",defautlValue:true},"cls",{name:"STATUS",type:"int"},{name:"checked",type:"bool",defaultValue:false}],autoLoad:false,root:{expanded:true},proxy:{type:"ajax",url:webservice.location+"aplikasi/modules",reader:{type:"json",rootProperty:"children"}}},0,0,0,0,0,0,[data.model,"TreeModules"],0));(Ext.cmd.derive("data.model.TujuanPasien",data.model.Model,{serviceName:"pendaftaran/tujuanpasien",fields:[{name:"NOPEN",type:"string"},{name:"RUANGAN",type:"string"},{name:"RESERVASI",type:"string"},{name:"DOKTER",type:"int"},{name:"IKUT_IBU",type:"int"},{name:"KUNJUNGAN_IBU",type:"string"},{name:"STATUS",type:"int"}],idProperty:"NOPEN"},0,0,0,0,0,0,[data.model,"TujuanPasien"],0));(Ext.cmd.derive("data.model.Wilayah",data.model.Model,{serviceName:"general/wilayah",fields:[{name:"ID",type:"int"},{name:"JENIS",type:"int"},{name:"DESKRIPSI",type:"string"},{name:"KOTA",type:"int"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[data.model,"Wilayah"],0));(Ext.cmd.derive("data.store.Store",Ext.data.Store,{config:{queryParams:undefined},setQueryParams:function(f){this.queryParams=f||{}},doAfterLoad:Ext.emptyFn,load:function(o){var n=this,p=n.getPageSize(),m;if(typeof o==="function"){o={callback:o}}else{o=Ext.apply({},o)}if(n.getRemoteSort()&&!o.grouper&&n.getGrouper()){o.grouper=n.getGrouper()}if(p||"start" in o||"limit" in o||"page" in o){o.page=o.page!=null?o.page:n.currentPage;o.start=(o.start!==undefined)?o.start:(o.page-1)*p;o.limit=o.limit!=null?o.limit:p}o.addRecords=o.addRecords||false;if(!o.recordCreator){m=n.getSession();if(m){o.recordCreator=m.recordCreator}}o=o||{};o.params=o.params||{};if(n.queryParams!=undefined){Ext.Object.merge(o.params,n.queryParams)}return Ext.data.Store.prototype.load.call(this,o)},onProxyLoad:function(q){var o=this,p=q.getResultSet(),s=q.getRecords(),n=q.wasSuccessful();if(o.destroyed){return}if(p){o.totalCount=p.getTotal()}if(n){s=o.processAssociation(s);o.loadRecords(s,q.getAddRecords()?{addRecords:true}:undefined)}else{o.loading=false}if(o.hasListeners.load){o.fireEvent("load",o,s,n,q)}o.doAfterLoad(o,s,n,q);o.callObservers("AfterLoad",[s,n,q])},getArrayData:function(){var l=this,g=[];l.each(function(e){g.push(e.data)});return g},initStore:function(t,u){var s=this,o=Ext.getStore(t);if(o){if(o.data){if(o.getCount()>0){var q=o.getArrayData();s.loadData(q);if(Ext.isFunction(u)){u()}return}}}var p=Ext.Factory.store({type:s.type,queryParams:s.queryParams});Ext.data.StoreManager.add(t,p);p.load(function(f,g,e){if(e){s.loadData(f);if(Ext.isFunction(u)){u()}}})}},0,0,0,0,0,0,[data.store,"Store"],0));(Ext.cmd.derive("data.store.Administrasi",data.store.Store,{model:"data.model.Administrasi"},0,0,0,0,["store.administrasi-store"],0,[data.store,"Administrasi"],0));(Ext.cmd.derive("data.store.Aksi",data.store.Store,{model:"data.model.Aksi"},0,0,0,0,["store.aksi-store"],0,[data.store,"Aksi"],0));(Ext.cmd.derive("data.store.AntrianRuangan",data.store.Store,{model:"data.model.AntrianRuangan"},0,0,0,0,["store.antrian-ruangan-store"],0,[data.store,"AntrianRuangan"],0));(Ext.cmd.derive("data.store.AturanPakai",data.store.Store,{model:"data.model.AturanPakai"},0,0,0,0,["store.aturan-pakai-store"],0,[data.store,"AturanPakai"],0));(Ext.cmd.derive("data.store.Barang",data.store.Store,{model:"data.model.Barang"},0,0,0,0,["store.barang-store"],0,[data.store,"Barang"],0));(Ext.cmd.derive("data.store.BarangRuangan",data.store.Store,{model:"data.model.BarangRuangan"},0,0,0,0,["store.barang-ruangan-store"],0,[data.store,"BarangRuangan"],0));(Ext.cmd.derive("data.store.CatatanHasilLab",data.store.Store,{model:"data.model.HasilLab"},0,0,0,0,["store.catatan-hasil-lab-store"],0,[data.store,"CatatanHasilLab"],0));(Ext.cmd.derive("data.store.Deposit",data.store.Store,{model:"data.model.Deposit"},0,0,0,0,["store.deposit-store"],0,[data.store,"Deposit"],0));(Ext.cmd.derive("data.store.Diagnosa",data.store.Store,{model:"data.model.Diagnosa"},0,0,0,0,["store.diagnosa-store"],0,[data.store,"Diagnosa"],0));(Ext.cmd.derive("data.store.DiagnosaMasuk",data.store.Store,{model:"data.model.DiagnosaMasuk"},0,0,0,0,["store.diagnosa-masuk-store"],0,[data.store,"DiagnosaMasuk"],0));(Ext.cmd.derive("data.store.Diskon",data.store.Store,{model:"data.model.Diskon"},0,0,0,0,["store.diskon-store"],0,[data.store,"Diskon"],0));(Ext.cmd.derive("data.store.DiskonDokter",data.store.Store,{model:"data.model.DiskonDokter"},0,0,0,0,["store.diskon-dokter-store"],0,[data.store,"DiskonDokter"],0));(Ext.cmd.derive("data.store.DistribusiTarifPaket",data.store.Store,{model:"data.model.DistribusiTarifPaket"},0,0,0,0,["store.distribusi-tarif-paket-store"],0,[data.store,"DistribusiTarifPaket"],0));(Ext.cmd.derive("data.store.Dokter",data.store.Store,{model:"data.model.Dokter"},0,0,0,0,["store.dokter-store"],0,[data.store,"Dokter"],0));(Ext.cmd.derive("data.store.DokterRuangan",data.store.Store,{model:"data.model.DokterRuangan"},0,0,0,0,["store.dokter-ruangan-store"],0,[data.store,"DokterRuangan"],0));(Ext.cmd.derive("data.store.DokterSmf",data.store.Store,{model:"data.model.DokterSmf"},0,0,0,0,["store.dokter-smf-store"],0,[data.store,"DokterSmf"],0));(Ext.cmd.derive("data.store.Edc",data.store.Store,{model:"data.model.Edc"},0,0,0,0,["store.edc-store"],0,[data.store,"Edc"],0));(Ext.cmd.derive("data.store.GroupLab",data.store.Store,{model:"data.model.GroupLab"},0,0,0,0,["store.grouplab-store"],0,[data.store,"GroupLab"],0));(Ext.cmd.derive("data.store.GroupPenggunaAksesModule",data.store.Store,{model:"data.model.GroupPenggunaAksesModule"},0,0,0,0,["store.grouppenggunaaksesmodule-store"],0,[data.store,"GroupPenggunaAksesModule"],0));(Ext.cmd.derive("data.store.GroupTindakanLab",data.store.Store,{model:"data.model.GroupTindakanLab"},0,0,0,0,["store.group-tindakan-lab-store"],0,[data.store,"GroupTindakanLab"],0));(Ext.cmd.derive("data.store.HargaBarang",data.store.Store,{model:"data.model.HargaBarang"},0,0,0,0,["store.harga-barang-store"],0,[data.store,"HargaBarang"],0));(Ext.cmd.derive("data.store.HasilLab",data.store.Store,{model:"data.model.HasilLab"},0,0,0,0,["store.hasillab-store"],0,[data.store,"HasilLab"],0));(Ext.cmd.derive("data.store.HasilPa",data.store.Store,{model:"data.model.HasilPa"},0,0,0,0,["store.hasilpa-store"],0,[data.store,"HasilPa"],0));(Ext.cmd.derive("data.store.HasilRad",data.store.Store,{model:"data.model.HasilRad"},0,0,0,0,["store.hasilrad-store"],0,[data.store,"HasilRad"],0));(Ext.cmd.derive("data.store.History",data.store.Store,{},0,0,0,0,["store.history-store"],0,[data.store,"History"],0));(Ext.cmd.derive("data.store.Icd",data.store.Store,{model:"data.model.Icd"},0,0,0,0,["store.icd-store"],0,[data.store,"Icd"],0));(Ext.cmd.derive("data.store.Icd9",data.store.Store,{model:"data.model.Icd9"},0,0,0,0,["store.icd9-store"],0,[data.store,"Icd9"],0));(Ext.cmd.derive("data.store.InfoTeks",data.store.Store,{model:"data.model.InfoTeks"},0,0,0,0,["store.info-teks-store"],0,[data.store,"InfoTeks"],0));(Ext.cmd.derive("data.store.InformasiRuangKamarTidur",data.store.Store,{model:"data.model.InformasiRuangKamarTidur"},0,0,0,0,["store.informasiruangkamartidur-store"],0,[data.store,"InformasiRuangKamarTidur"],0));(Ext.cmd.derive("data.store.Instansi",data.store.Store,{model:"data.model.Instansi"},0,0,0,0,["store.instansi-store"],0,[data.store,"Instansi"],0));(Ext.cmd.derive("data.store.JenisLaporan",data.store.Store,{model:"data.model.JenisLaporan"},0,0,0,0,["store.jenis-laporan-store"],0,[data.store,"JenisLaporan"],0));(Ext.cmd.derive("data.store.JenisReferensi",data.store.Store,{model:"data.model.JenisReferensi"},0,0,0,0,["store.jenisreferensi-store"],0,[data.store,"JenisReferensi"],0));(Ext.cmd.derive("data.store.JenisRuangan",data.store.Store,{model:"data.model.JenisRuangan"},0,0,0,0,["store.jenis-ruangan-store"],0,[data.store,"JenisRuangan"],0));(Ext.cmd.derive("data.store.JenisWilayah",data.store.Store,{model:"data.model.JenisWilayah"},0,0,0,0,["store.jeniswilayah-store"],0,[data.store,"JenisWilayah"],0));(Ext.cmd.derive("data.store.KAP",data.store.Store,{model:"data.model.KAP"},0,0,0,0,["store.kap-store"],0,[data.store,"KAP"],0));(Ext.cmd.derive("data.store.KIP",data.store.Store,{model:"data.model.KIP"},0,0,0,0,["store.kip-store"],0,[data.store,"KIP"],0));(Ext.cmd.derive("data.store.Kategori",data.store.Store,{model:"data.model.Kategori"},0,0,0,0,["store.kategori-store"],0,[data.store,"Kategori"],0));(Ext.cmd.derive("data.store.KeluargaPasien",data.store.Store,{model:"data.model.KeluargaPasien"},0,0,0,0,["store.keluarga-pasien-store"],0,[data.store,"KeluargaPasien"],0));(Ext.cmd.derive("data.store.Konsul",data.store.Store,{model:"data.model.Konsul"},0,0,0,0,["store.konsul-store"],0,[data.store,"Konsul"],0));(Ext.cmd.derive("data.store.KontakPasien",data.store.Store,{model:"data.model.KontakPasien"},0,0,0,0,["store.kontak-pasien-store"],0,[data.store,"KontakPasien"],0));(Ext.cmd.derive("data.store.KontakPenanggungJawab",data.store.Store,{model:"data.model.KontakPenanggungJawab"},0,0,0,0,["store.kontakpenanggungjawab-store"],0,[data.store,"KontakPenanggungJawab"],0));(Ext.cmd.derive("data.store.Kunjungan",data.store.Store,{model:"data.model.Kunjungan"},0,0,0,0,["store.kunjungan-store"],0,[data.store,"Kunjungan"],0));(Ext.cmd.derive("data.store.LaporanDetil",data.store.Store,{model:"data.model.LaporanDetil"},0,0,0,0,["store.laporan-detil-store"],0,[data.store,"LaporanDetil"],0));(Ext.cmd.derive("data.store.LayananFarmasi",data.store.Store,{model:"data.model.LayananFarmasi"},0,0,0,0,["store.layananfarmasi-store"],0,[data.store,"LayananFarmasi"],0));(Ext.cmd.derive("data.store.MaterialRequest",data.store.Store,{model:"data.model.MaterialRequest"},0,0,0,0,["store.material-request-store"],0,[data.store,"MaterialRequest"],0));(Ext.cmd.derive("data.store.MaterialRequestDetil",data.store.Store,{model:"data.model.MaterialRequestDetil"},0,0,0,0,["store.material-request-detil-store"],0,[data.store,"MaterialRequestDetil"],0));(Ext.cmd.derive("data.store.Mutasi",data.store.Store,{model:"data.model.Mutasi"},0,0,0,0,["store.mutasi-store"],0,[data.store,"Mutasi"],0));(Ext.cmd.derive("data.store.Negara",data.store.Store,{model:"data.model.Negara"},0,0,0,0,["store.negara-store"],0,[data.store,"Negara"],0));(Ext.cmd.derive("data.store.O2",data.store.Store,{model:"data.model.O2"},0,0,0,0,["store.o2-store"],0,[data.store,"O2"],0));(Ext.cmd.derive("data.store.Operasi",data.store.Store,{model:"data.model.Operasi"},0,0,0,0,["store.operasi-store"],0,[data.store,"Operasi"],0));(Ext.cmd.derive("data.store.OperasiDiTindakan",data.store.Store,{model:"data.model.OperasiDiTindakan"},0,0,0,0,["store.operasi-ditindakan-store"],0,[data.store,"OperasiDiTindakan"],0));(Ext.cmd.derive("data.store.OrderDetilLab",data.store.Store,{model:"data.model.OrderDetilLab"},0,0,0,0,["store.order-detil-lab-store"],0,[data.store,"OrderDetilLab"],0));(Ext.cmd.derive("data.store.OrderDetilRad",data.store.Store,{model:"data.model.OrderDetilRad"},0,0,0,0,["store.order-detil-rad-store"],0,[data.store,"OrderDetilRad"],0));(Ext.cmd.derive("data.store.OrderDetilResep",data.store.Store,{model:"data.model.OrderDetilResep"},0,0,0,0,["store.order-detil-resep-store"],0,[data.store,"OrderDetilResep"],0));(Ext.cmd.derive("data.store.OrderLab",data.store.Store,{model:"data.model.OrderLab",pageSize:2000},0,0,0,0,["store.order-lab-store"],0,[data.store,"OrderLab"],0));(Ext.cmd.derive("data.store.OrderRad",data.store.Store,{model:"data.model.OrderRad",pageSize:2000},0,0,0,0,["store.order-rad-store"],0,[data.store,"OrderRad"],0));(Ext.cmd.derive("data.store.OrderResep",data.store.Store,{model:"data.model.OrderResep",pageSize:2000},0,0,0,0,["store.order-resep-store"],0,[data.store,"OrderResep"],0));(Ext.cmd.derive("data.store.Paket",data.store.Store,{model:"data.model.Paket"},0,0,0,0,["store.paket-store"],0,[data.store,"Paket"],0));(Ext.cmd.derive("data.store.PaketDetil",data.store.Store,{model:"data.model.PaketDetil"},0,0,0,0,["store.paketdetil-store"],0,[data.store,"PaketDetil"],0));(Ext.cmd.derive("data.store.PanggilanAntrianRuangan",data.store.Store,{model:"data.model.PanggilanAntrianRuangan"},0,0,0,0,["store.panggilan-antrian-ruangan-store"],0,[data.store,"PanggilanAntrianRuangan"],0));(Ext.cmd.derive("data.store.ParameterTindakanLab",data.store.Store,{model:"data.model.ParameterTindakanLab"},0,0,0,0,["store.parametertindakanlab-store"],0,[data.store,"ParameterTindakanLab"],0));(Ext.cmd.derive("data.store.Pasien",data.store.Store,{model:"data.model.Pasien"},0,0,0,0,["store.pasien-store"],0,[data.store,"Pasien"],0));(Ext.cmd.derive("data.store.PasienMeninggal",data.store.Store,{model:"data.model.PasienMeninggal"},0,0,0,0,["store.pasienmeninggal-store"],0,[data.store,"PasienMeninggal"],0));(Ext.cmd.derive("data.store.PasienPulang",data.store.Store,{model:"data.model.PasienPulang"},0,0,0,0,["store.pasienpulang-store"],0,[data.store,"PasienPulang"],0));(Ext.cmd.derive("data.store.Pegawai",data.store.Store,{model:"data.model.Pegawai"},0,0,0,0,["store.pegawai-store"],0,[data.store,"Pegawai"],0));(Ext.cmd.derive("data.store.PembatalanKunjungan",data.store.Store,{model:"data.model.PembatalanKunjungan"},0,0,0,0,["store.pembatalankunjungan-store"],0,[data.store,"PembatalanKunjungan"],0));(Ext.cmd.derive("data.store.PembayaranTagihan",data.store.Store,{model:"data.model.PembayaranTagihan"},0,0,0,0,["store.pembayaran-tagihan-store"],0,[data.store,"PembayaranTagihan"],0));(Ext.cmd.derive("data.store.PenanggungJawab",data.store.Store,{model:"data.model.PenanggungJawab"},0,0,0,0,["store.penanggungjawab-store"],0,[data.store,"PenanggungJawab"],0));(Ext.cmd.derive("data.store.Pendaftaran",data.store.Store,{model:"data.model.Pendaftaran"},0,0,0,0,["store.pendaftaran-store"],0,[data.store,"Pendaftaran"],0));(Ext.cmd.derive("data.store.Penerimaan",data.store.Store,{model:"data.model.Penerimaan"},0,0,0,0,["store.penerimaan-store"],0,[data.store,"Penerimaan"],0));(Ext.cmd.derive("data.store.PengembalianBarang",data.store.Store,{model:"data.model.PengembalianBarang"},0,0,0,0,["store.pengembalian-barang-store"],0,[data.store,"PengembalianBarang"],0));(Ext.cmd.derive("data.store.PengembalianBarangDetil",data.store.Store,{model:"data.model.PengembalianBarangDetil"},0,0,0,0,["store.pengembalian-barang-detil-store"],0,[data.store,"PengembalianBarangDetil"],0));(Ext.cmd.derive("data.store.PengembalianDeposit",data.store.Store,{model:"data.model.PengembalianDeposit"},0,0,0,0,["store.pengembalian-deposit-store"],0,[data.store,"PengembalianDeposit"],0));(Ext.cmd.derive("data.store.Pengguna",data.store.Store,{model:"data.model.Pengguna"},0,0,0,0,["store.pengguna-store"],0,[data.store,"Pengguna"],0));(Ext.cmd.derive("data.store.PenggunaAkses",data.store.Store,{model:"data.model.PenggunaAkses"},0,0,0,0,["store.pengguna-akses-store"],0,[data.store,"PenggunaAkses"],0));(Ext.cmd.derive("data.store.PenggunaAksesPencarian",data.store.Store,{model:"data.model.PenggunaAksesPencarian"},0,0,0,0,["store.pengguna-akses-pencarian-store"],0,[data.store,"PenggunaAksesPencarian"],0));(Ext.cmd.derive("data.store.PenggunaAksesRuangan",data.store.Store,{model:"data.model.PenggunaAksesRuangan"},0,0,0,0,["store.pengguna-akses-ruangan-store"],0,[data.store,"PenggunaAksesRuangan"],0));(Ext.cmd.derive("data.store.Pengiriman",data.store.Store,{model:"data.model.Pengiriman"},0,0,0,0,["store.pengiriman-store"],0,[data.store,"Pengiriman"],0));(Ext.cmd.derive("data.store.PengirimanDetil",data.store.Store,{model:"data.model.PengirimanDetil"},0,0,0,0,["store.pengirimandetil-store"],0,[data.store,"PengirimanDetil"],0));(Ext.cmd.derive("data.store.Penjamin",data.store.Store,{model:"data.model.Penjamin"},0,0,0,0,["store.penjamin-store"],0,[data.store,"Penjamin"],0));(Ext.cmd.derive("data.store.PenjaminRuangan",data.store.Store,{model:"data.model.PenjaminRuangan"},0,0,0,0,["store.penjamin-ruangan-store"],0,[data.store,"PenjaminRuangan"],0));(Ext.cmd.derive("data.store.PenjaminTagihan",data.store.Store,{model:"data.model.PenjaminTagihan"},0,0,0,0,["store.penjamin-tagihan-store"],0,[data.store,"PenjaminTagihan"],0));(Ext.cmd.derive("data.store.Penjualan",data.store.Store,{model:"data.model.Penjualan"},0,0,0,0,["store.penjualan-store"],0,[data.store,"Penjualan"],0));(Ext.cmd.derive("data.store.PenjualanDetil",data.store.Store,{model:"data.model.PenjualanDetil"},0,0,0,0,["store.penjualan-detil-store"],0,[data.store,"PenjualanDetil"],0));(Ext.cmd.derive("data.store.PenyebabKematian",data.store.Store,{model:"data.model.PenyebabKematian"},0,0,0,0,["store.penyebabkematian-store"],0,[data.store,"PenyebabKematian"],0));(Ext.cmd.derive("data.store.Penyedia",data.store.Store,{model:"data.model.Penyedia"},0,0,0,0,["store.penyedia-store"],0,[data.store,"Penyedia"],0));(Ext.cmd.derive("data.store.Perawat",data.store.Store,{model:"data.model.Perawat"},0,0,0,0,["store.perawat-store"],0,[data.store,"Perawat"],0));(Ext.cmd.derive("data.store.PerawatRuangan",data.store.Store,{model:"data.model.PerawatRuangan"},0,0,0,0,["store.perawat-ruangan-store"],0,[data.store,"PerawatRuangan"],0));(Ext.cmd.derive("data.store.Permintaan",data.store.Store,{model:"data.model.Permintaan"},0,0,0,0,["store.permintaan-store"],0,[data.store,"Permintaan"],0));(Ext.cmd.derive("data.store.PermintaanDetil",data.store.Store,{model:"data.model.PermintaanDetil"},0,0,0,0,["store.permintaan-detil-store"],0,[data.store,"PermintaanDetil"],0));(Ext.cmd.derive("data.store.PetugasTindakanMedis",data.store.Store,{model:"data.model.PetugasTindakanMedis"},0,0,0,0,["store.petugas-tindakan-medis-store"],0,[data.store,"PetugasTindakanMedis"],0));(Ext.cmd.derive("data.store.PiutangPasien",data.store.Store,{model:"data.model.PiutangPasien"},0,0,0,0,["store.piutang-pasien-store"],0,[data.store,"PiutangPasien"],0));(Ext.cmd.derive("data.store.PiutangPerusahaan",data.store.Store,{model:"data.model.PiutangPerusahaan"},0,0,0,0,["store.piutang-perusahaan-store"],0,[data.store,"PiutangPerusahaan"],0));(Ext.cmd.derive("data.store.Ppk",data.store.Store,{model:"data.model.Ppk"},0,0,0,0,["store.ppk-store"],0,[data.store,"Ppk"],0));(Ext.cmd.derive("data.store.PurchaseOrder",data.store.Store,{model:"data.model.PurchaseOrder"},0,0,0,0,["store.purchase-order-store"],0,[data.store,"PurchaseOrder"],0));(Ext.cmd.derive("data.store.PurchaseOrderDetil",data.store.Store,{model:"data.model.PurchaseOrderDetil"},0,0,0,0,["store.purchase-order-detil-store"],0,[data.store,"PurchaseOrderDetil"],0));(Ext.cmd.derive("data.store.Referensi",data.store.Store,{model:"data.model.Referensi"},0,0,0,0,["store.referensi-store"],0,[data.store,"Referensi"],0));(Ext.cmd.derive("data.store.Reservasi",data.store.Store,{model:"data.model.Reservasi"},0,0,0,0,["store.reservasi-store"],0,[data.store,"Reservasi"],0));(Ext.cmd.derive("data.store.ReturLayananFarmasi",data.store.Store,{model:"data.model.ReturLayananFarmasi"},0,0,0,0,["store.returlayananfarmasi-store"],0,[data.store,"ReturLayananFarmasi"],0));(Ext.cmd.derive("data.store.ReturPenjualan",data.store.Store,{model:"data.model.ReturPenjualan"},0,0,0,0,["store.returpenjualan-store"],0,[data.store,"ReturPenjualan"],0));(Ext.cmd.derive("data.store.RincianTagihan",data.store.Store,{model:"data.model.RincianTagihan"},0,0,0,0,["store.rincian-tagihan-store"],0,[data.store,"RincianTagihan"],0));(Ext.cmd.derive("data.store.RincianTagihanPaket",data.store.Store,{model:"data.model.RincianTagihanPaket"},0,0,0,0,["store.rincian-tagihan-paket-store"],0,[data.store,"RincianTagihanPaket"],0));(Ext.cmd.derive("data.store.RuangKamar",data.store.Store,{model:"data.model.RuangKamar"},0,0,0,0,["store.ruang-kamar-store"],0,[data.store,"RuangKamar"],0));(Ext.cmd.derive("data.store.RuangKamarTidur",data.store.Store,{model:"data.model.RuangKamarTidur"},0,0,0,0,["store.ruangkamartidur-store"],0,[data.store,"RuangKamarTidur"],0));(Ext.cmd.derive("data.store.Ruangan",data.store.Store,{model:"data.model.Ruangan"},0,0,0,0,["store.ruangan-store"],0,[data.store,"Ruangan"],0));(Ext.cmd.derive("data.store.RuanganFarmasi",data.store.Store,{model:"data.model.RuanganFarmasi"},0,0,0,0,["store.ruangan-farmasi-store"],0,[data.store,"RuanganFarmasi"],0));(Ext.cmd.derive("data.store.RuanganKonsul",data.store.Store,{model:"data.model.RuanganKonsul"},0,0,0,0,["store.ruangan-konsul-store"],0,[data.store,"RuanganKonsul"],0));(Ext.cmd.derive("data.store.RuanganLab",data.store.Store,{model:"data.model.RuanganLab"},0,0,0,0,["store.ruangan-lab-store"],0,[data.store,"RuanganLab"],0));(Ext.cmd.derive("data.store.RuanganMutasi",data.store.Store,{model:"data.model.RuanganMutasi"},0,0,0,0,["store.ruangan-mutasi-store"],0,[data.store,"RuanganMutasi"],0));(Ext.cmd.derive("data.store.RuanganOperasi",data.store.Store,{model:"data.model.RuanganOperasi"},0,0,0,0,["store.ruangan-operasi-store"],0,[data.store,"RuanganOperasi"],0));(Ext.cmd.derive("data.store.RuanganRad",data.store.Store,{model:"data.model.RuanganRad"},0,0,0,0,["store.ruangan-rad-store"],0,[data.store,"RuanganRad"],0));(Ext.cmd.derive("data.store.RumusPerencanaan",data.store.Store,{model:"data.model.RumusPerencanaan"},0,0,0,0,["store.rumus-perencanaan-store"],0,[data.store,"RumusPerencanaan"],0));(Ext.cmd.derive("data.store.Satuan",data.store.Store,{model:"data.model.Satuan"},0,0,0,0,["store.satuan-store"],0,[data.store,"Satuan"],0));(Ext.cmd.derive("data.store.SmfRuangan",data.store.Store,{model:"data.model.SmfRuangan"},0,0,0,0,["store.smf-ruangan-store"],0,[data.store,"SmfRuangan"],0));(Ext.cmd.derive("data.store.Staff",data.store.Store,{model:"data.model.Staff"},0,0,0,0,["store.staff-store"],0,[data.store,"Staff"],0));(Ext.cmd.derive("data.store.StaffRuangan",data.store.Store,{model:"data.model.StaffRuangan"},0,0,0,0,["store.staff-ruangan-store"],0,[data.store,"StaffRuangan"],0));(Ext.cmd.derive("data.store.StokOpname",data.store.Store,{model:"data.model.StokOpname"},0,0,0,0,["store.stok-opname-store"],0,[data.store,"StokOpname"],0));(Ext.cmd.derive("data.store.StokOpnameDetil",data.store.Store,{model:"data.model.StokOpnameDetil"},0,0,0,0,["store.stok-opname-detil-store"],0,[data.store,"StokOpnameDetil"],0));(Ext.cmd.derive("data.store.SuratPenawaranHarga",data.store.Store,{model:"data.model.SuratPenawaranHarga"},0,0,0,0,["store.surat-penawaran-harga-store"],0,[data.store,"SuratPenawaranHarga"],0));(Ext.cmd.derive("data.store.SuratPenawaranHargaDetil",data.store.Store,{model:"data.model.SuratPenawaranHargaDetil"},0,0,0,0,["store.surat-penawaran-harga-detil-store"],0,[data.store,"SuratPenawaranHargaDetil"],0));(Ext.cmd.derive("data.store.SuratRujukan",data.store.Store,{model:"data.model.SuratRujukan"},0,0,0,0,["store.suratrujukan-store"],0,[data.store,"SuratRujukan"],0));(Ext.cmd.derive("data.store.Tagihan",data.store.Store,{model:"data.model.Tagihan"},0,0,0,0,["store.tagihan-store"],0,[data.store,"Tagihan"],0));(Ext.cmd.derive("data.store.TagihanPendaftaran",data.store.Store,{model:"data.model.TagihanPendaftaran"},0,0,0,0,["store.tagihan-pendaftaran-store"],0,[data.store,"TagihanPendaftaran"],0));(Ext.cmd.derive("data.store.TarifAdministrasi",data.store.Store,{model:"data.model.TarifAdministrasi"},0,0,0,0,["store.tarif-administrasi-store"],0,[data.store,"TarifAdministrasi"],0));(Ext.cmd.derive("data.store.TarifFarmasiPerKelas",data.store.Store,{model:"data.model.TarifFarmasiPerKelas"},0,0,0,0,["store.tariffarmasiperkelas-store"],0,[data.store,"TarifFarmasiPerKelas"],0));(Ext.cmd.derive("data.store.TarifO2",data.store.Store,{model:"data.model.TarifO2"},0,0,0,0,["store.tarifo2-store"],0,[data.store,"TarifO2"],0));(Ext.cmd.derive("data.store.TarifRuangRawat",data.store.Store,{model:"data.model.TarifRuangRawat"},0,0,0,0,["store.tarifruangrawat-store"],0,[data.store,"TarifRuangRawat"],0));(Ext.cmd.derive("data.store.TarifTindakan",data.store.Store,{model:"data.model.TarifTindakan"},0,0,0,0,["store.tariftindakan-store"],0,[data.store,"TarifTindakan"],0));(Ext.cmd.derive("data.store.TempatLahir",data.store.Store,{model:"data.model.TempatLahir"},0,0,0,0,["store.tempat-lahir-store"],0,[data.store,"TempatLahir"],0));(Ext.cmd.derive("data.store.TenagaMedis",data.store.Store,{model:"data.model.TenagaMedis"},0,0,0,0,["store.tenaga-medis-store"],0,[data.store,"TenagaMedis"],0));(Ext.cmd.derive("data.store.Tindakan",data.store.Store,{model:"data.model.Tindakan"},0,0,0,0,["store.tindakan-store"],0,[data.store,"Tindakan"],0));(Ext.cmd.derive("data.store.TindakanMedis",data.store.Store,{model:"data.model.TindakanMedis"},0,0,0,0,["store.tindakan-medis-store"],0,[data.store,"TindakanMedis"],0));(Ext.cmd.derive("data.store.TindakanRuangan",data.store.Store,{model:"data.model.TindakanRuangan"},0,0,0,0,["store.tindakan-ruangan-store"],0,[data.store,"TindakanRuangan"],0));(Ext.cmd.derive("data.store.TransaksiKasir",data.store.Store,{model:"data.model.TransaksiKasir"},0,0,0,0,["store.transaksi-kasir-store"],0,[data.store,"TransaksiKasir"],0));(Ext.cmd.derive("data.store.TreeStore",Ext.data.TreeStore,{config:{queryParams:undefined},setQueryParams:function(f){this.queryParams=f||{}},load:function(x){x=x||{};x.params=x.params||{};var g=this,y=x.node||g.getRoot(),v=x.callback,w=x.scope,e=g.getClearOnLoad(),f=y&&y.isRoot()&&y.isLoaded()&&e,z,A;if(g.queryParams!=undefined){Ext.Object.merge(x.params,g.queryParams)}if(!y){g.setRoot({expanded:true});return}if(y.data.expanded&&!f){y.data.loaded=false;if(e){y.data.expanded=false}x.callback=function(m,l,n){if(!e){y.collapse()}y.expand();Ext.callback(v,w,[m,l,n])}}x.id=y.getId();x=Ext.apply({filters:g.getFilters().items,sorters:g.getSorters().items,node:x.node||y,internalScope:g,internalCallback:g.onProxyLoad},x);g.lastOptions=Ext.apply({},x);x.isReload=f;z=g.createOperation("read",x);if(g.fireEvent("beforeload",g,z)!==false){g.loading=true;g.clearLoadTask();if(f){if(g.getClearRemovedOnLoad()){g.removedNodes.length=0}g.unregisterNode(y,true);y.childNodes.length=0;A=true}else{if(e){if(g.getTrackRemoved()&&g.getClearRemovedOnLoad()){g.clearRemoved(y)}y.removeAll(false)}}if(g.loading&&y){y.set("loading",true)}if(A){g.clearData(true);if(g.getRootVisible()){g.suspendEvents();g.add(y);g.resumeEvents()}}z.execute()}return g}},0,0,0,0,0,0,[data.store,"TreeStore"],0));(Ext.cmd.derive("data.store.TreeGroupLab",data.store.TreeStore,{model:"data.model.GroupLabTree"},0,0,0,0,["store.tree-grouplab-store"],0,[data.store,"TreeGroupLab"],0));(Ext.cmd.derive("data.store.TreeModules",data.store.TreeStore,{model:"data.model.TreeModules"},0,0,0,0,["store.tree-modules-store"],0,[data.store,"TreeModules"],0));(Ext.cmd.derive("data.store.TreeRuangan",data.store.TreeStore,{model:"data.model.RuanganTree"},0,0,0,0,["store.tree-ruangan-store"],0,[data.store,"TreeRuangan"],0));(Ext.cmd.derive("data.store.TujuanPasien",data.store.Store,{model:"data.model.TujuanPasien"},0,0,0,0,["store.tujuanpasien-store"],0,[data.store,"TujuanPasien"],0));(Ext.cmd.derive("data.store.Wilayah",data.store.Store,{model:"data.model.Wilayah"},0,0,0,0,["store.wilayah-store"],0,[data.store,"Wilayah"],0));Ext.define(null,{override:"Ext.form.field.Date",containFormatTime:false,minimalAddMinuteToMaxValue:5,initComponent:function(){var o=this,q=Ext.isString,p,s,n=webservice.app?webservice.app:false;o.app=n;p=o.minValue;s=o.maxValue;if(q(p)){o.minValue=o.parseDate(p)}if(q(s)){o.maxValue=o.parseDate(s)}if(o.containFormatTime){if(o.maxValue){o.maxValue=Ext.Date.add(o.maxValue,Ext.Date.MINUTE,o.minimalAddMinuteToMaxValue);if(o.minimalAddMinuteToMaxValue>0){o.maxValue.setSeconds(59)}}}o.disabledDatesRE=null;o.initDisabledDays();o.callParent()},createPicker:function(){var l=this,g=Ext.String.format;return new Ext.picker.Date({id:l.id+"-picker",pickerField:l,floating:true,preventRefocus:true,hidden:true,minDate:l.minValue,maxDate:l.maxValue,disabledDatesRE:l.disabledDatesRE,disabledDatesText:l.disabledDatesText,ariaDisabledDatesText:l.ariaDisabledDatesText,disabledDays:l.disabledDays,disabledDaysText:l.disabledDaysText,ariaDisabledDaysText:l.ariaDisabledDaysText,containFormatTime:l.containFormatTime,format:l.format,showToday:l.showToday,startDay:l.startDay,minText:g(l.minText,l.formatDate(l.minValue)),ariaMinText:g(l.ariaMinText,l.formatDate(l.minValue,l.ariaFormat)),maxText:g(l.maxText,l.formatDate(l.maxValue)),ariaMaxText:g(l.ariaMaxText,l.formatDate(l.maxValue,l.ariaFormat)),listeners:{scope:l,select:l.onSelect,tabout:l.onTabOut},keyNavConfig:{esc:function(){l.inputEl.focus();l.collapse()}}})},getErrors:function(H){H=arguments.length>0?H:this.formatDate(this.processRawValue(this.getRawValue()));var z=this,I=Ext.String.format,y=Ext.Date.clearTime,J=[],K=z.disabledDays,D=z.disabledDatesRE,L=z.minValue?Ext.Date.clone(z.minValue):z.minValue,A=z.maxValue?Ext.Date.clone(z.maxValue):z.maxValue,B=K?K.length:0,C=0,G,F,M,E;if(!z.containFormatTime){L=L?y(L):L;A=A?y(A):A}if(H===null||H.length<1){return J}G=H;H=z.parseDate(H);if(!H){J.push(I(z.invalidText,G,Ext.Date.unescapeFormat(z.format)));return J}E=H.getTime();if(L&&E<L.getTime()){J.push(I(z.minText,z.formatDate(L)))}if(A&&E>A.getTime()){J.push(I(z.maxText,z.formatDate(A)))}if(K){M=H.getDay();for(;C<B;C++){if(M===K[C]){J.push(z.disabledDaysText);break}}}F=z.formatDate(H);if(D&&D.test(F)){J.push(I(z.disabledDatesText,F))}return J},onExpand:function(){var f=this.rawDate;this.picker.setValue(Ext.isDate(f)?f:this.getSysdate())},getSysdate:function(){var l=this;if(l.app){var g=Ext.isDate(l.app.sysdate)?Ext.Date.clone(l.app.sysdate):new Date();if(g){return g}}return new Date()}});Ext.define(null,{override:"Ext.form.field.Number",tooltipType:"qtip",defaultAlignTooltip:"tl-tr",setTooltip:function(l,n){var m=this;if(m.rendered){if(!n||!l){m.clearTip()}if(l){if(Ext.quickTipsActive&&Ext.isObject(l)){Ext.tip.QuickTipManager.register(Ext.apply({target:m.el.id,floating:true,defaultAlign:m.defaultAlignTooltip},l));m.tooltip=l}else{m.el.dom.setAttribute(m.getTipAttr(),l)}}}else{m.tooltip=l}return m},getTipAttr:function(){return this.tooltipType==="qtip"?"data-qtip":"title"},clearTip:function(){var g=this,l=g.el;if(Ext.quickTipsActive&&Ext.isObject(g.tooltip)){Ext.tip.QuickTipManager.unregister(l)}else{l.dom.removeAttribute(g.getTipAttr())}},onRender:function(){var f=this;f.callParent();if(f.tooltip){f.setTooltip(f.tooltip,true)}else{if(f.fieldLabel==undefined){if(f.emptyText){f.setTooltip(f.emptyText.replace("[","").replace("]","").trim(),true)}}}},doDestroy:function(){var f=this;if(f.rendered){f.clearTip()}f.callParent()}});Ext.define(null,{override:"Ext.form.field.Text",tooltipType:"qtip",defaultAlignTooltip:"tl-tr",setTooltip:function(l,n){var m=this;if(m.rendered){if(!n||!l){m.clearTip()}if(l){if(Ext.quickTipsActive&&Ext.isObject(l)){Ext.tip.QuickTipManager.register(Ext.apply({target:m.el.id,floating:true,defaultAlign:m.defaultAlignTooltip},l));m.tooltip=l}else{m.el.dom.setAttribute(m.getTipAttr(),l)}}}else{m.tooltip=l}return m},getTipAttr:function(){return this.tooltipType==="qtip"?"data-qtip":"title"},clearTip:function(){var g=this,l=g.el;if(Ext.quickTipsActive&&Ext.isObject(g.tooltip)){Ext.tip.QuickTipManager.unregister(l)}else{l.dom.removeAttribute(g.getTipAttr())}},onRender:function(){var f=this;f.callParent();if(f.tooltip){f.setTooltip(f.tooltip,true)}else{if(f.fieldLabel==undefined){if(f.emptyText){f.setTooltip(f.emptyText.replace("[","").replace("]","").trim(),true)}}}},doDestroy:function(){var f=this;if(f.rendered){f.clearTip()}f.callParent()}});Ext.define(null,{override:"Ext.picker.Date",containFormatTime:false,initComponent:function(){var m=this,n=Ext.Date.clearTime,l=webservice.app?webservice.app:false;m.app=l;m.selectedCls=m.baseCls+"-selected";m.disabledCellCls=m.baseCls+"-disabled";m.prevCls=m.baseCls+"-prevday";m.activeCls=m.baseCls+"-active";m.cellCls=m.baseCls+"-cell";m.nextCls=m.baseCls+"-prevday";m.todayCls=m.baseCls+"-today";if(!m.format){m.format=Ext.Date.defaultFormat}if(!m.dayNames){m.dayNames=Ext.Date.dayNames}m.dayNames=m.dayNames.slice(m.startDay).concat(m.dayNames.slice(0,m.startDay));if(m.value){if(!m.containFormatTime){n(m.value,true)}}else{if(m.containFormatTime){m.value=m.getSysdate()}else{m.value=n(m.getSysdate())}}m.initDisabledDays()},setValue:function(f){this.value=this.containFormatTime?(f?f:this.getSysdate()):(Ext.Date.clearTime(f||this.getSysdate(),true));return this.update(this.value)},beforeRender:function(){var n=this,o=Ext.String.htmlEncode,m=new Array(n.numDays),p=Ext.Date.format(n.getSysdate(),n.format);if(n.padding&&!n.width){n.cacheWidth()}n.monthBtn=new Ext.button.Split({ownerCt:n,ownerLayout:n.getComponentLayout(),text:"",tooltip:n.monthYearText,tabIndex:-1,ariaRole:"presentation",listeners:{click:n.doShowMonthPicker,arrowclick:n.doShowMonthPicker,scope:n}});if(n.showToday){n.todayBtn=new Ext.button.Button({ui:n.footerButtonUI,ownerCt:n,ownerLayout:n.getComponentLayout(),text:Ext.String.format(n.todayText,p),tooltip:Ext.String.format(n.todayTip,p),tooltipType:"title",tabIndex:-1,ariaRole:"presentation",handler:n.selectToday,scope:n})}n.callParent();Ext.applyIf(n,{renderData:{}});Ext.apply(n.renderData,{dayNames:n.dayNames,showToday:n.showToday,prevText:o(n.prevText),nextText:o(n.nextText),todayText:o(n.todayText),ariaMinText:o(n.ariaMinText),ariaMaxText:o(n.ariaMaxText),ariaDisabledDaysText:o(n.ariaDisabledDaysText),ariaDisabledDatesText:o(n.ariaDisabledDatesText),days:m});n.protoEl.unselectable()},selectToday:function(){var l=this,n=l.todayBtn,m=l.handler;if(n&&!n.disabled){l.setValue(l.containFormatTime?l.getSysdate():Ext.Date.clearTime(l.getSysdate()));l.fireEvent("select",l,l.value);if(m){Ext.callback(m,l.scope,[l,l.value],null,l,l)}l.onSelect()}return l},fullUpdate:function(aa){var R=this,ap=R.cells.elements,aq=R.textNodes,P=R.disabledCellCls,ae=Ext.Date,ah=0,U=0,aj=+ae.clearTime(aa,true),ac=+ae.clearTime(R.getSysdate()),al=R.minDate?ae.clearTime(R.minDate,true):Number.NEGATIVE_INFINITY,ai=R.maxDate?ae.clearTime(R.maxDate,true):Number.POSITIVE_INFINITY,W=R.disabledDatesRE,S=R.disabledDatesText,O=R.disabledDays?R.disabledDays.join(""):false,Y=R.disabledDaysText,ag=R.format,ak=ae.getDaysInMonth(aa),X=ae.getFirstDateOfMonth(aa),ao=X.getDay()-R.startDay,ad=ae.add(aa,ae.MONTH,-1),Z=R.ariaTitleDateFormat,am,V,at,Q,af,ab,ar,an,T;if(ao<0){ao+=7}ak+=ao;am=ae.getDaysInMonth(ad)-ao;V=new Date(ad.getFullYear(),ad.getMonth(),am,R.initHour);if(R.showToday){Q=ae.clearTime(R.getSysdate());at=(Q<al||Q>ai||(W&&ag&&W.test(ae.dateFormat(Q,ag)))||(O&&O.indexOf(Q.getDay())!==-1));R.todayDisabled=at;if(!R.disabled){R.todayBtn.setDisabled(at)}}af=function(f,g){var l=ap[f],e=[];if(!l.hasAttribute("id")){l.setAttribute("id",R.id+"-cell-"+f)}T=+ae.clearTime(V,true);l.firstChild.dateValue=T;l.setAttribute("aria-label",ae.format(V,Z));l.removeAttribute("aria-describedby");l.removeAttribute("data-qtip");if(T===ac){g+=" "+R.todayCls;e.push(R.id+"-todayText")}if(T===aj){R.activeCell=l;R.eventEl.dom.setAttribute("aria-activedescendant",l.id);l.setAttribute("aria-selected",true);g+=" "+R.selectedCls;R.fireEvent("highlightitem",R,l)}else{l.setAttribute("aria-selected",false)}if(T<al){g+=" "+P;e.push(R.id+"-ariaMinText");l.setAttribute("data-qtip",R.minText)}else{if(T>ai){g+=" "+P;e.push(R.id+"-ariaMaxText");l.setAttribute("data-qtip",R.maxText)}else{if(O&&O.indexOf(V.getDay())!==-1){l.setAttribute("data-qtip",Y);e.push(R.id+"-ariaDisabledDaysText");g+=" "+P}else{if(W&&ag){an=ae.dateFormat(V,ag);if(W.test(an)){l.setAttribute("data-qtip",S.replace("%0",an));e.push(R.id+"-ariaDisabledDatesText");g+=" "+P}}}}}if(e.length){l.setAttribute("aria-describedby",e.join(" "))}l.className=g+" "+R.cellCls};R.eventEl.dom.setAttribute("aria-busy","true");for(;ah<R.numDays;++ah){if(ah<ao){ab=(++am);ar=R.prevCls}else{if(ah>=ak){ab=(++U);ar=R.nextCls}else{ab=ah-ao+1;ar=R.activeCls}}aq[ah].innerHTML=ab;V.setDate(V.getDate()+1);af(ah,ar)}R.eventEl.dom.removeAttribute("aria-busy");R.monthBtn.setText(Ext.Date.format(aa,R.monthYearFormat))},handleDateClick:function(t,p){var u=this,e=u.handler;t.stopEvent();if(!u.disabled&&p.dateValue&&!Ext.fly(p.parentNode).hasCls(u.disabledCellCls)){var s=new Date(p.dateValue),q=u.getSysdate();if(s.getFullYear()==q.getFullYear()&&s.getMonth()==q.getMonth()&&s.getDate()==q.getDate()){s=q}u.setValue(s);u.fireEvent("select",u,u.value);if(e){Ext.callback(e,u.scope,[u,u.value],null,u,u)}u.onSelect()}},getSysdate:function(){var l=this;if(l.app){var g=Ext.isDate(l.app.sysdate)?Ext.Date.clone(l.app.sysdate):new Date();if(g){return g}}return new Date()}});Ext.define(null,{override:"Ext.view.Table",onFocusEnter:function(u){var v=this,q=u.fromComponent,w=v.getNavigationModel(),e,s,t;if(v.containsFocus){return Ext.Component.prototype.onFocusEnter.call(v,u)}if(v.actionableMode){if(v.actionPosition){v.el.dom.setAttribute("tabIndex","-1");v.cellFocused=true;return}v.ownerGrid.setActionableMode(false)}u=u.event;if(!v.cellFocused&&v.all.getCount()&&v.dataSource.getCount()){t=u.getTarget();if(t===v.el.dom){if(v.lastFocused==="scrollbar"){u.relatedTarget.focus();return}try{e=v.getDefaultFocusPosition(q)}catch(u){e=false}if(!e){u.stopEvent();v.el.focus();return}t=null}else{if(t===v.tabGuardEl){e=new Ext.grid.CellContext(v).setPosition(v.all.endIndex,v.getVisibleColumnManager().getColumns().length-1);t=null}else{if(s=u.getTarget(v.getCellSelector())){if(t===s){e=new Ext.grid.CellContext(v).setPosition(v.getRecord(t),v.getHeaderByCell(s));t=null}else{if(t&&Ext.fly(t).isFocusable()&&v.el.contains(t)){e=new Ext.grid.CellContext(v).setPosition(v.getRecord(t),v.getHeaderByCell(s))}}}}}}if(e){v.toggleChildrenTabbability(false);if(t){if(v.ownerGrid.setActionableMode(true,e)){e=null;Ext.fly(t).focus()}}if(e){w.setPosition(e,null,u,null,true)}v.cellFocused=v.el.contains(Ext.Element.getActiveElement());if(v.cellFocused){v.el.dom.setAttribute("tabIndex","-1")}}Ext.Component.prototype.onFocusEnter.call(v,u)}});
/*!
* Ext JS Library
* Copyright(c) 2006-2015 Sencha Inc.
* licensing@sencha.com
* http://www.sencha.com/license
*/
(Ext.cmd.derive("com.Audio",Ext.panel.Panel,{layout:"fit",autoplay:false,controls:true,loop:false,volume:1,html:"",src:"",autoload:false,preload:"none",bodyStyle:"background-color:#000;color:#fff",tpl:['<audio id="{id}-audio" ','<tpl if="controls">controls</tpl> ','<tpl if="autoplay">autoplay</tpl> ','<tpl if="loop">loop</tpl> ','volume="{volume}" ','preload="{preload}" ','style="{style}">','<source src="{src}"/>',"{html}","</audio>"],initComponent:function(){var o=this,u,q,s,p;if(o.fallbackHTML){u=o.fallbackHTML}else{u="Your browser does not support HTML5 Audio. ";if(Ext.isChrome){u+="Upgrade Chrome."}else{if(Ext.isGecko){u+="Upgrade to Firefox 3.5 or newer."}else{var t='<a href="http://www.google.com/chrome">Chrome</a>';u+='Please try <a href="http://www.mozilla.com">Firefox</a>';if(Ext.isIE){u+=", "+t+' or <a href="http://www.apple.com/safari/">Safari</a>.'}else{u+=" or "+t+"."}}}}o.fallbackHTML=u;s=o.data=Ext.copyTo({tag:"audio",html:u},o,"id,autoplay,controls,loop,volume,preload,style,srcs");if(o.autoplay){s.autoplay=o.autoplay}if(o.controls){s.controls=o.controls}if(o.loop){s.loop=o.loop}if(o.volume){s.volume=o.volume}if(o.preload){s.preload=o.preload}if(o.src){s.src=o.src}Ext.panel.Panel.prototype.initComponent.call(this)},afterRender:function(){var f=this;Ext.panel.Panel.prototype.afterRender.call(this);f.audio=f.el.getById(f.id+"-audio");el=f.audio.dom;f.supported=(el&&el.tagName.toLowerCase()=="audio");if(f.supported){f.audio.on("error",f.onAudioError,f);el.addEventListener("ended",function(e){f.fireEvent(e.type,e)});if(f.autoload){f.audio.load()}}},getFallback:function(){return'<h1 style="background-color:#ff4f4f;padding: 10px;">'+this.fallbackHTML+"</h1>"},onAudioError:function(){var f=this;f.audio.remove();f.supported=false;f.body.createChild(f.getFallback())},play:function(){this.audio.dom.play()},pause:function(){this.audio.dom.pause()},load:function(){this.audio.dom.load()},setSrc:function(f){this.audio.dom.src=f},destroy:function(){var l=this,m=l.audio;if(l.supported&&m){var n=m.dom;if(n&&n.pause){n.pause()}m.dom.removeEventListener("ended",function(e){});m.remove();l.audio=null}Ext.panel.Panel.prototype.destroy.call(this)}},0,["com-audio"],["component","box","container","panel","com-audio"],{component:true,box:true,container:true,panel:true,"com-audio":true},["widget.com-audio"],0,[com,"Audio"],0));(Ext.cmd.derive("com.Combo",Ext.form.field.ComboBox,{viewModel:{stores:{store:undefined}},config:{params:{},defaultValue:0,firstLoad:false,linkTo:""},doAfterLoad:Ext.emptyFn,doBeforeQuery:Ext.emptyFn,bind:{store:"{store}"},displayField:"DESKRIPSI",valueField:"ID",queryMode:"local",forceSelection:true,initComponent:function(){var l=this,m=l.getViewModel(),n=m.get("store");l.store=n;n.setQueryParams(l.params);n.on("load",function(f,e,g){if(!g){return}if(e.length>0){if(l.defaultValue>0){var p=n.findRecord(l.valueField,l.defaultValue,0,false,true);if(p){new Ext.util.DelayedTask(function(){l.select(p);l.fireEvent("select",l,p)}).delay(100)}}}l.doAfterLoad(e,l,n)});l.on("beforequery",function(e){if(l.queryMode=="local"){e.query=new RegExp(e.query,"i");e.forceAll=true}l.doBeforeQuery(e)});Ext.form.field.ComboBox.prototype.initComponent.apply(this,arguments);if(l.firstLoad){n.load()}},load:function(){var g=this.getViewModel(),l=g?g.get("store"):null;if(l){l.load()}},loadStore:function(){this.load()}},0,["com-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true},["widget.com-combo"],0,[com,"Combo"],0));(Ext.cmd.derive("com.ICom",Ext.Mixin,{showCloseButton:false,fullscreenEnabled:false,closeButtonConfig:undefined,fullscreenConfig:undefined,titleFieldConfig:undefined,menuConfig:undefined,initHeader:function(){var y=this,D=y.getViewModel(),v=y.title?y.title:y.header?(y.header.title?y.header.title:""):"",A={enabled:false,buttonConfig:undefined,width:250,expand:true,treelist:{},menus:[]},B={xtype:"title",text:v,margin:"0 1 0 3"},z={xtype:"button",buttonType:"close",margin:"0 0 0 1",ui:"soft-red",tooltip:"Tutup "+v,iconCls:"x-fa fa-close",hidden:!y.showCloseButton,handler:function(){y.fireEvent("close");if(Ext.getClassName(y.ownerCt)=="Ext.window.Window"){try{if(y.ownerCt){y.ownerCt.close()}}catch(e){}}}},E={xtype:"button",margin:"0 0 0 1",btnFullscreen:true,bind:{tooltip:"{fullscreen ? 'Exit Full Screen' : 'Full Screen'}",iconCls:"{fullscreen ? 'x-fa fa-compress' : 'x-fa fa-expand'}"},hidden:!y.fullscreenEnabled,handler:function(){if(!D.get("fullscreen")){y.ownerCtBefore=y.ownerCt;y.openDialog("",true,0,0,y,function(e,f){D.set("fullscreen",true);y.win=f;f.fireEvent("fullscreen",y);f.on({beforeclose:function(){D.set("fullscreen",false);y.win.items.clear();y.ownerCtBefore.add(y);f.fireEvent("exitfullscreen",y)}})})}else{if(y.win){y.win.close()}}}};y.menuConfig=Ext.apply(A,y.menuConfig);if(y.titleFieldConfig){B=Ext.apply(B,y.titleFieldConfig)}var G={iconCls:"x-fa fa-navicon",scope:y,tooltip:"Menu",hidden:!y.menuConfig.enabled,handler:"onMenuBarClick"};if(y.menuConfig.buttonConfig){G=Ext.apply(G,y.menuConfig.buttonConfig);if(G.fontColorCls){G.iconCls=G.iconCls+" "+G.fontColorCls}}y.titleField=Ext.create("Ext.panel.Title",B);var C=y.menuConfig.enabled?{xtype:"toolbar",padding:"0 5 0 5",defaults:{margin:"0 1 0 0"},items:[G,y.titleField,"->"]}:{items:[]};if(y.fullscreenConfig){E=Ext.apply(E,y.fullscreenConfig);if(E.fontColorCls){E.bind.iconCls="{fullscreen ? 'x-fa fa-compress "+E.fontColorCls+"' : 'x-fa fa-expand "+E.fontColorCls+"'}"}}if(y.closeButtonConfig){z=Ext.apply(z,y.closeButtonConfig)}if(y.header){if(y.header.items){y.headerItemsBefore=y.header.items;Ext.Array.each(y.headerItemsBefore,function(e){C.items.push(e)})}delete y.header.items;C=Ext.apply(C,y.header);y.header.items=y.headerItemsBefore}if(y.fullscreenEnabled){C.items.push(E)}if(y.showCloseButton){C.items.push(z)}if(C.items.length>0){y.header=C}if(y.menuConfig.enabled){var x=y.layout,F=y.items,w={xtype:"treelist",ui:"navigation",expanderFirst:false,expanderOnly:false,cls:"x-nav-border",reference:"windownav",selectOnExpander:true,width:y.menuConfig.expand?y.menuConfig.width:0,scrollable:"y",bind:{store:"{storeMenu}"},listeners:{scope:y,selectionchange:"onNavSelectionChange"}};w=Ext.apply(w,y.menuConfig.treelist);y.layout={type:"border"};y.bodyPadding="0px";y.border=false;y.items=[{region:"west",reference:"treelistcontainer",split:{size:2},layout:{type:"vbox",align:"stretch"},border:false,scrollable:"y",items:[w]},{xtype:"container",reference:"contentitem",region:"center",layout:"card",items:F}]}},setMenus:function(p){var m=this,n=m.down("treelist"),o=m.getViewModel();if(m.menuConfig){m.menuConfig.menus=p;o.set("storeMenu",Ext.create("Ext.data.TreeStore",{root:{expanded:true,children:m.menuConfig.menus}}));(new Ext.util.DelayedTask(function(){var e=n.getStore();n.setSelection(e.getAt(0))})).delay(500)}},onMenuBarClick:function(){var l=this,m=l.down("[reference=treelistcontainer]"),n=l.down("treelist");content=l,width=m.getWidth()>0?0:l.menuConfig.width;Ext.suspendLayouts();m.setWidth(width);Ext.resumeLayouts();content.updateLayout()},onNavSelectionChange:function(E,B){var v=this,C=v.getViewModel(),w=v.down("[reference=contentitem]"),t=null,y=B.get("text"),z=v.titleField.getText(),D=B.get("options")||{},x=B.get("record")||{};if(B){var A=B.get("className")||"Ext.panel.Panel";t=w.getComponent(B.get("idClassName"));z=z.indexOf("-")<0?z:z.substring(0,z.indexOf("-")).trim();v.titleField.setText(z+" - "+y);if(t!=null){w.getLayout().setActiveItem(t);return}D.itemId=B.get("idClassName");t=Ext.create(A,D);Ext.suspendLayouts();w.add(t);w.getLayout().setActiveItem(t);if(t.loadStore){t.loadStore(x)}else{if(t.load){t.load(x)}}Ext.resumeLayouts()}},notifyMessage:function(g,l){var l=l||"danger-blue";Ext.toast({html:g,headerPosition:"left",style:"padding: 0px 0px 0px 4px",border:false,header:{width:13},ui:l,align:"t"})},cetak:function(p,n,q){var o=this;if(!o.app){return}if(o.getPropertyConfig(21)=="TRUE"){p.TYPE="Pdf";p.EXT="pdf"}var s=new Ext.util.DelayedTask(function(){if(n){o.app.requestPrint(p,n)}else{if(!p.REQUEST_FOR_PRINT){o.app.requestPrint(p,function(e){o.printPreview(p.TITLE?p.TITLE:p.NAME,e)})}else{o.app.requestPrint(p,n)}}delete s});s.delay(q?q:0)},openDialog:function(y,x,E,G,A,H,D,C,I){var z=this,B=(E==0&&G==0)?true:false,w=C?true:false,F={modal:x,closable:true,maximized:B,animateTarget:D,constrain:true,layout:"fit",minWidth:350,minHeight:150,border:w,width:E,height:G,items:[A]};if(y!=""){F.title=y;if(I){F.iconCls=I}}else{F.header=false;delete F.animateTarget}return z.openWindow(F,H)},openWindow:function(q,n){var p=this,s={modal:true,maximized:true,constrain:false,layout:"fit"};s=Ext.apply(s,q);var o=Ext.create("Ext.Window",s);o.on("show",function(){if(Ext.isFunction(n)){n("onshow",o)}});o.show();return o},printPreview:function(l,n){var m=this;m.openWindow({title:l,iconCls:"x-fa fa-print",ui:"window-green",header:{margin:0,padding:"5 10 5 10",items:[{xtype:"button",iconCls:"x-fa fa-refresh",ui:"soft-green",tooltip:"Perbarui Report",handler:function(e){e.ownerCt.ownerCt.fireEvent("reload")}}]},modal:true,closable:true,maximized:true,constrain:true,layout:"fit",border:false,items:[{xtype:"panel"}]},function(p,g){var f=g.down("panel"),e="<iframe style='width: 100%; height: 100%' src='"+n+"'></iframe>";f.update(e);g.on({reload:function(){f.update(e)}})})},printList:function(s,o,n){var q=this,p={title:"Daftar Print",iconCls:"x-fa fa-list",ui:"window-green",header:{margin:0,padding:"10 15 10 15"},modal:true,maximized:false,closable:true,constrain:true,layout:"fit",border:false,buttons:[{text:"Cetak Semua",iconCls:"x-fa fa-print",handler:function(f){var e=f.ownerCt.ownerCt,g=0;Ext.Array.each(o,function(l){var m=s?(s.maxDelay||500):500;if(l.TIPE!=1&&l.CETAK){l.DATA.MULTI_PRINT=true;q.cetak(l.DATA,null,g*m);g++}});e.fireEvent("cetaklist",o)}}]};p=Ext.apply(p,s);p.items=[{xtype:"com-grid",viewModel:{stores:{store:{fields:["ID","NAMA","TIPE","DATA","KETERANGAN","CETAK"],data:o}}},columns:[{xtype:"rownumberer",text:"No",width:40},{text:"Nama",flex:1,dataIndex:"NAMA"},{text:"Keterangan",flex:1,dataIndex:"KETERANGAN"},{xtype:"widgetcolumn",text:"#",align:"center",widget:{xtype:"button",iconCls:"x-fa fa-print",text:"Cetak",handler:function(g){var f=g.getWidgetColumn().ownerCt.ownerCt.ownerCt,e=g.getWidgetRecord();if(e.get("TIPE")!=1&&e.get("CETAK")){q.cetak(e.get("DATA"))}f.fireEvent("cetaklist",e)}},onWidgetAttach:function(g,f,e){f.setHidden(e.get("CETAK")==0)}}]}];q.openWindow(p,n)},getPenggunaRuangan:function(){var f=this;if(f.app){return f.app.penggunaRuangan?f.app.penggunaRuangan:[]}return[]},getPrivPencarian:function(){var f=this;if(f.app){return f.app.privPencarian?f.app.privPencarian:[]}return[]},getPropertyConfig:function(n){var q=this,o=q.app.pc,p="FALSE";for(var s=0;s<o.length;s++){if(o[s].ID==n){p=o[s].VALUE;break}}return p},getSysdate:function(){var l=this;if(l.app){var g=Ext.isDate(l.app.sysdate)?Ext.Date.clone(l.app.sysdate):new Date();if(g){return g}}return new Date()},showMessageBox:function(l){var g=l?(l.ui?{ui:l.ui,constrain:true}:{}):{};if(l.header){g.header=l.header}dialog=Ext.create("Ext.window.MessageBox",g);dialog.show(l);return dialog},setTitleField:function(f){if(this.titleField){if(this.titleField.setText){this.titleField.setText(f)}if(this.titleField.text){this.titleField.text=f}}},getReferensi:function(p,u,t){var s=p?(p.REFERENSI?p.REFERENSI:{}):{},o="",q=null;Ext.Object.each(s,function(f,e){if(f==u){Ext.Object.each(e,function(l,g){if(l==t){o=g;return}});q=e;return}});return t==undefined?q:o},replaceAll:function(n,m,l){n=String(n).replace(m,l);if(n.indexOf(m)>-1){return this.replaceAll(n,m,l)}else{return n}}},0,0,0,0,0,0,[com,"ICom"],0));(Ext.cmd.derive("com.Dashboard",Ext.container.Container,{scrollable:"y",layout:"responsivecolumn",defaultType:"container",defaults:{layout:"responsivecolumn",responsiveCls:"big-50 small-100"},initComponent:function(){var m=this,l=webservice.app?webservice.app:false,n=Ext.getStore("instansi");n=n?n.getAt(0):null;if(n){m.kode=n.get("REFERENSI").PPK.KODE}m.kode=m.kode+(m.kode==""?m.kode:"-");m.app=l;Ext.container.Container.prototype.initComponent.call(this)}},0,["com-dashboard"],["component","box","container","com-dashboard"],{component:true,box:true,container:true,"com-dashboard":true},["widget.com-dashboard"],[[com.ICom.prototype.mixinId||com.ICom.$className,com.ICom]],[com,"Dashboard"],0));(Ext.cmd.derive("com.Form",Ext.form.Panel,{model:Ext.emptyString,kode:"",viewModel:{data:{fullscreen:false,formConfig:{viewOnly:false,simpan:true}},stores:{storeMenu:{type:"tree"}}},bodyPadding:5,onLoadRecord:Ext.emptyFn,onBeforeGetRecord:Ext.emptyFn,initComponent:function(){var n=this,p=n.getViewModel(),m=webservice.app?webservice.app:false,o=Ext.getStore("instansi");o=o?o.getAt(0):null;if(o){n.kode=o.get("REFERENSI").PPK.KODE}n.kode=n.kode+(n.kode==""?n.kode:"-");n.app=m;n.initHeader();Ext.form.Panel.prototype.initComponent.apply(this,arguments)},loadRecord:function(s){var o=this;try{var p=o.getForm(),q=o.getViewModel();if(p){if(p.loadRecord){if(p.getFields()){p=p.loadRecord(s)}}if(s){o.onLoadRecord(o,s);if(q){q.set("record",s)}}}return p}catch(e){o.onLoadRecord(o,s)}},load:function(f){return this.loadRecord(f)},createRecord:function(m){var l=this,m=m||{},n=Ext.create(l.model,m);l.loadRecord(n)},setFormConfig:function(n){var l=this,m=l.getViewModel();cnf=m.get("formConfig")||{};cnf=Ext.apply(cnf,n);m.set("formConfig",cnf);m.notify()},getRecord:function(){var n=this,m=n.getForm().getValues(),l=n.getViewModel().get("record");if(n.getForm().isValid()){n.onBeforeGetRecord(n,m);l.set(m);return l}return false},focus:function(l,m,n){if(Ext.isBoolean(l)){}else{m=m||false;n=n||100;this.down("[name="+l+"]").focus(m,n)}},save:function(s,o,n){var p=this,q=p.getRecord(),o=o||{};if(!q){p.setLoading(false);return}o.success=o.success||"Data telah tersimpan";o.showError=o.showError||true;o.showSuccessMessage=o.showSuccessMessage||true;o.failed=o.failed||"Data gagal tersimpan";q.animateTarget=s;q.scope=p;q.showError=true;q.save({callback:function(e,g,f){if(f){if(o.success){if(o.showSuccessMessage){p.notifyMessage(o.success)}}p.fireEvent("save",e)}else{if(!o.showError){p.notifyMessage(o.failed)}}if(Ext.isFunction(n)){n(e,g,f)}p.setLoading(false)}})},reload:function(n){var m=this,l=m.getViewModel().get("record");if(l){l.load(n)}}},0,["com-form"],["component","box","container","panel","form","com-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true},["widget.com-form"],[[com.ICom.prototype.mixinId||com.ICom.$className,com.ICom]],[com,"Form"],0));(Ext.cmd.derive("com.ITable",Ext.Mixin,{waitRefresh:true,onBeforeLoad:Ext.emptyFn,doAfterLoad:Ext.emptyFn,task:undefined,load:function(m){var n=this,o=n.getViewModel(),p=o?o.get("store"):null;n.onBeforeLoad(n,o,p);if(p){if(m){n.setParams(m)}p.removeAll();this.waitRefresh=false;p.load()}},loadStore:function(f){this.load(f)},loadPage:function(m){var n=this,o=n.getViewModel(),p=o?o.get("store"):null;if(p){p.loadPage(m)}},setParams:function(m){var n=this,o=n.getViewModel(),p=o?o.get("store"):null;if(p){p.queryParams=Ext.apply(p.queryParams,m)}},getParams:function(){var g=this,l=g.getStore();if(l){return l.queryParams}},clearParams:function(){var g=this,l=g.getStore();if(l){l.setQueryParams({})}},reload:function(){var f=this.getStore();this.suspendLayouts();if(!this.waitRefresh){if(f){f.reload()}}this.getView().refresh();this.resumeLayouts()},refresh:function(){this.reload()},start:function(l){var g=this;if(g.task==undefined){g.task={run:function(){g.reload()}}}g.task.interval=l;Ext.TaskManager.start(g.task)},stop:function(){Ext.TaskManager.stop(this.task)},getArrayData:function(){var f=this.getStore();if(f){return f.getArrayData()}return[]},removeDataStore:function(){var f=this.getStore();if(f){f.removeAll()}}},0,0,0,0,0,0,[com,"ITable"],0));(Ext.cmd.derive("com.Grid",Ext.grid.Panel,{viewModel:{data:{fullscreen:false,listConfig:{paging:false}},stores:{store:{type:"store"},storeMenu:{type:"tree"}}},bind:{store:"{store}"},initComponent:function(){var n=this,o=n.getViewModel(),m=webservice.app?webservice.app:false,p=o?o.get("store"):null;p=n.store=Ext.data.StoreManager.lookup(n.store||p||"ext-empty-store");n.app=m;if(p){p.doAfterLoad=function(e,g,f,l){n.setLoading(false);if(Ext.isArray(g)){if(g.length==0){p.removeAll()}}n.doAfterLoad(n,g,f,l);n.waitRefresh=false}}n.initHeader();Ext.grid.Panel.prototype.initComponent.call(this)},dockedItems:[{xtype:"pagingtoolbar",hidden:true,bind:{store:"{store}",hidden:"{!listConfig.paging}"},dock:"bottom",beforePageText:"Hal.",afterPageText:"dari {0}",displayMsg:"Menampilkan {0} - {1} dari {2}",displayInfo:true}],setGridConfig:function(n){var l=this,m=l.getViewModel();_config=m.get("listConfig");n=Ext.apply(_config,n);m.set("listConfig",n);m.notify()},setListConfig:function(f){this.setGridConfig(f)}},0,["com-grid"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true},["widget.com-grid"],[[com.ICom.prototype.mixinId||com.ICom.$className,com.ICom],[com.ITable.prototype.mixinId||com.ITable.$className,com.ITable]],[com,"Grid"],0));(Ext.cmd.derive("com.HtmlEditor",Ext.form.FieldContainer,{focusable:true,componentLayout:"htmleditor",textareaCls:"x-htmleditor-textarea",componentTpl:["{beforeTextAreaTpl}",'<textarea id="{id}-textareaEl" data-ref="textareaEl" name="{name}" tabindex="-1" {inputAttrTpl}',' class="{textareaCls}" autocomplete="off">',"{[Ext.util.Format.htmlEncode(values.value)]}","</textarea>","{afterTextAreaTpl}","{beforeIFrameTpl}",'<iframe id="{id}-iframeEl" data-ref="iframeEl" name="{iframeName}" frameBorder="0" {iframeAttrTpl}',' src="{iframeSrc}" class="{iframeCls}"></iframe>',"{afterIFrameTpl}",{disableFormats:true}],stretchInputElFixed:true,subTplInsertions:["beforeTextAreaTpl","afterTextAreaTpl","beforeIFrameTpl","afterIFrameTpl","iframeAttrTpl","inputAttrTpl"],enableFormat:true,enableFontSize:true,enableColors:true,enableAlignments:true,enableLists:true,enableSourceEdit:true,enableLinks:true,enableFont:true,createLinkText:"Please enter the URL for the link:",defaultLinkValue:"http://",fontFamilies:["Arial","Courier New","Tahoma","Times New Roman","Verdana"],defaultValue:Ext.isOpera?"&#160;":"&#8203;",extraFieldBodyCls:"x-html-editor-wrap",defaultButtonUI:"default-toolbar",buttonDefaults:null,initialized:false,activated:false,sourceEditMode:false,iframePad:3,hideMode:"offsets",maskOnDisable:true,containerElCls:"x-html-editor-container",reStripQuotes:/^['"]*|['"]*$/g,textAlignRE:/text-align:(.*?);/i,safariNonsenseRE:/\sclass="(?:Apple-style-span|Apple-tab-span|khtml-block-placeholder)"/gi,nonDigitsRE:/\D/g,initComponent:function(){var f=this;f.items=[f.createToolbar(),f.createInputCmp()];f.layout={type:"vbox",align:"stretch"};if(f.value==null){f.value=""}Ext.form.FieldContainer.prototype.initComponent.apply(this,arguments);f.initField()},createInputCmp:function(){this.inputCmp=Ext.widget(this.getInputCmpCfg());return this.inputCmp},getInputCmpCfg:function(){var n=this,l=n.id+"-inputCmp",m={id:l,name:n.name,textareaCls:n.textareaCls+" x-hidden",value:n.value,iframeName:Ext.id(),iframeSrc:Ext.SSL_SECURE_URL,iframeCls:"x-htmleditor-iframe"};n.getInsertionRenderData(m,n.subTplInsertions);return{flex:1,xtype:"component",tpl:n.lookupTpl("componentTpl"),childEls:["iframeEl","textareaEl"],id:l,cls:"x-html-editor-input",data:m}},createToolbar:function(){this.toolbar=Ext.widget(this.getToolbarCfg());return this.toolbar},getToolbarCfg:function(){var x=this,u=[],q,w=Ext.quickTipsActive&&Ext.tip.QuickTipManager.isEnabled(),s="x-",v,y;function t(e,g,f){return Ext.merge({itemId:e,cls:s+"btn-icon",iconCls:s+"edit-"+e,enableToggle:g!==false,scope:x,handler:f||x.relayBtnCmd,clickEvent:"mousedown",tooltip:w?x.buttonTips[e]:y,overflowText:x.buttonTips[e].title||y,tabIndex:-1},x.buttonDefaults)}if(x.enableFont&&!Ext.isSafari2){v=Ext.widget("component",{itemId:"fontSelect",renderTpl:['<select id="{id}-selectEl" data-ref="selectEl" class="'+s+'font-select">',"</select>"],childEls:["selectEl"],afterRender:function(){x.fontSelect=this.selectEl;Ext.Component.prototype.afterRender.apply(this,arguments)},onDisable:function(){var e=this.selectEl;if(e){e.dom.disabled=true}Ext.Component.prototype.onDisable.apply(this,arguments)},onEnable:function(){var e=this.selectEl;if(e){e.dom.disabled=false}Ext.Component.prototype.onEnable.apply(this,arguments)},listeners:{change:function(){x.win.focus();x.relayCmd("fontName",x.fontSelect.dom.value);x.deferFocus()},element:"selectEl"}});u.push(v,"-")}if(x.enableFormat){u.push(t("bold"),t("italic"),t("underline"))}if(x.enableFontSize){u.push("-",t("increasefontsize",false,x.adjustFont),t("decreasefontsize",false,x.adjustFont))}if(x.enableColors){u.push("-",Ext.merge({itemId:"forecolor",cls:s+"btn-icon",iconCls:s+"edit-forecolor",overflowText:x.buttonTips.forecolor.title,tooltip:w?x.buttonTips.forecolor||y:y,tabIndex:-1,menu:Ext.widget("menu",{plain:true,items:[{xtype:"colorpicker",allowReselect:true,focus:Ext.emptyFn,value:"000000",plain:true,clickEvent:"mousedown",handler:function(e,f){x.relayCmd("forecolor",Ext.isWebKit||Ext.isIE?"#"+f:f);this.up("menu").hide()}}]})},x.buttonDefaults),Ext.merge({itemId:"backcolor",cls:s+"btn-icon",iconCls:s+"edit-backcolor",overflowText:x.buttonTips.backcolor.title,tooltip:w?x.buttonTips.backcolor||y:y,tabIndex:-1,menu:Ext.widget("menu",{plain:true,items:[{xtype:"colorpicker",focus:Ext.emptyFn,value:"FFFFFF",plain:true,allowReselect:true,clickEvent:"mousedown",handler:function(e,f){if(Ext.isGecko){x.execCmd("useCSS",false);x.execCmd("hilitecolor","#"+f);x.execCmd("useCSS",true);x.deferFocus()}else{x.relayCmd(Ext.isOpera?"hilitecolor":"backcolor",Ext.isWebKit||Ext.isIE||Ext.isOpera?"#"+f:f)}this.up("menu").hide()}}]})},x.buttonDefaults))}if(x.enableAlignments){u.push("-",t("justifyleft"),t("justifycenter"),t("justifyright"))}if(!Ext.isSafari2){if(x.enableLinks){u.push("-",t("createlink",false,x.createLink))}if(x.enableLists){u.push("-",t("insertorderedlist"),t("insertunorderedlist"))}if(x.enableSourceEdit){u.push("-",t("sourceedit",true,function(){x.toggleSourceEdit(!x.sourceEditMode)}))}}for(q=0;q<u.length;q++){if(u[q].itemId!=="sourceedit"){u[q].disabled=true}}return{xtype:"toolbar",defaultButtonUI:x.defaultButtonUI,cls:"x-html-editor-tb",enableOverflow:true,items:u,listeners:{click:function(e){e.preventDefault()},element:"el"}}},getMaskTarget:function(){return Ext.isGecko?this.inputCmp.el:this.bodyEl},setReadOnly:function(n){var o=this,p=o.textareaEl,q=o.iframeEl,s;o.readOnly=n;if(p){p.dom.readOnly=n}if(o.initialized){s=o.getEditorBody();if(Ext.isIE){q.setDisplayed(false);s.contentEditable=!n;q.setDisplayed(true)}else{o.setDesignMode(!n)}if(s){s.style.cursor=n?"default":"text"}o.disableItems(n)}},getDocMarkup:function(){var g=this,l=g.iframeEl.getHeight()-g.iframePad*2;return Ext.String.format('<!DOCTYPE html><html><head><style type="text/css">'+(Ext.isOpera||Ext.isIE?"p{margin:0;}":"")+"body{border:0;margin:0;padding:{0}px;direction:"+(g.rtl?"rtl;":"ltr;")+(Ext.isIE8?Ext.emptyString:"min-")+"height:{1}px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;cursor:text;background-color:white;"+(Ext.isIE?"":"font-size:12px;font-family:{2}")+"}</style></head><body></body></html>",g.iframePad,l,g.defaultFont)},getEditorBody:function(){var f=this.getDoc();return f.body||f.documentElement},getDoc:function(){return this.iframeEl.dom.contentDocument||this.getWin().document},getWin:function(){return this.iframeEl.dom.contentWindow||window.frames[this.iframeEl.dom.name]},initDefaultFont:function(){var u=this,A=0,t,z,s,w,x,v,y;if(!u.defaultFont){z=u.textareaEl.getStyle("font-family");z=Ext.String.capitalize(z.split(",")[0]);t=Ext.Array.clone(u.fontFamilies);Ext.Array.include(t,z);t.sort();u.defaultFont=z;s=u.down("#fontSelect").selectEl.dom;for(x=0,v=t.length;x<v;++x){z=t[x];y=z.toLowerCase();w=new Option(z,y);if(z===u.defaultFont){A=x}w.style.fontFamily=y;if(Ext.isIE){s.add(w)}else{s.options.add(w)}}s.options[A].selected=true}},isEqual:function(g,l){return this.isEqualAsString(g,l)},afterRender:function(){var g=this,l=g.inputCmp;Ext.form.FieldContainer.prototype.afterRender.apply(this,arguments);g.iframeEl=l.iframeEl;g.textareaEl=l.textareaEl;g.inputEl=g.iframeEl;if(g.enableFont){g.initDefaultFont()}g.monitorTask=Ext.TaskManager.start({run:g.checkDesignMode,scope:g,interval:100})},initFrameDoc:function(){var m=this,l,n;Ext.TaskManager.stop(m.monitorTask);l=m.getDoc();m.win=m.getWin();l.open();l.write(m.getDocMarkup());l.close();n={run:function(){var e=m.getDoc();if(e.body||e.readyState==="complete"){Ext.TaskManager.stop(n);m.setDesignMode(true);Ext.defer(m.initEditor,10,m)}},interval:10,duration:10000,scope:m};Ext.TaskManager.start(n)},checkDesignMode:function(){var l=this,g=l.getDoc();if(g&&(!g.editorInitialized||l.getDesignMode()!=="on")){l.initFrameDoc()}},setDesignMode:function(l){var n=this,m=n.getDoc();if(m){if(n.readOnly){l=false}m.designMode=(/on|true/i).test(String(l).toLowerCase())?"on":"off"}},getDesignMode:function(){var f=this.getDoc();return !f?"":String(f.designMode).toLowerCase()},disableItems:function(o){var q=this.getToolbar().items.items,p,s=q.length,n;for(p=0;p<s;p++){n=q[p];if(n.getItemId()!=="sourceedit"){n.setDisabled(o)}}},toggleSourceEdit:function(s){var u=this,p=u.iframeEl,t=u.textareaEl,o="x-hidden",q=u.getToolbar().getComponent("sourceedit");if(!Ext.isBoolean(s)){s=!u.sourceEditMode}u.sourceEditMode=s;if(q.pressed!==s){q.toggle(s)}if(s){u.disableItems(true);u.syncValue();p.addCls(o);t.removeCls(o);t.dom.removeAttribute("tabIndex");t.focus();u.inputEl=t}else{if(u.initialized){u.disableItems(u.readOnly)}u.pushValue();p.removeCls(o);t.addCls(o);t.dom.setAttribute("tabIndex",-1);u.deferFocus();u.inputEl=p}u.fireEvent("editmodechange",u,s);u.updateLayout()},createLink:function(){var f=prompt(this.createLinkText,this.defaultLinkValue);if(f&&f!=="http://"){this.relayCmd("createlink",f)}},clearInvalid:Ext.emptyFn,setValue:function(l){var m=this,n=m.textareaEl;if(l===null||l===undefined){l=""}if(m.value!==l){if(n){n.dom.value=l}m.pushValue();if(!m.rendered&&m.inputCmp){m.inputCmp.data.value=l}m.mixins.field.setValue.call(m,l)}return m},cleanHtml:function(f){f=String(f);if(Ext.isWebKit){f=f.replace(this.safariNonsenseRE,"")}if(f.charCodeAt(0)===parseInt(this.defaultValue.replace(this.nonDigitsRE,""),10)){f=f.substring(1)}return f},syncValue:function(){var w=this,t,v,q,u,s,p;if(w.initialized){t=w.getEditorBody();q=t.innerHTML;p=w.textareaEl.dom;if(Ext.isWebKit){u=t.getAttribute("style");s=u.match(w.textAlignRE);if(s&&s[1]){q='<div style="'+s[0]+'">'+q+"</div>"}}q=w.cleanHtml(q);if(w.fireEvent("beforesync",w,q)!==false){if(Ext.isGecko&&p.value===""&&q==="<br>"){q=""}if(p.value!==q){p.value=q;v=true}w.fireEvent("sync",w,q);if(v){w.checkChange()}}}},getValue:function(){var l=this,g;if(!l.sourceEditMode){l.syncValue()}g=l.rendered?l.textareaEl.dom.value:l.value;l.value=g;return g},pushValue:function(){var g=this,l;if(g.initialized){l=g.textareaEl.dom.value||"";if(!g.activated&&l.length<1){l=g.defaultValue}if(g.fireEvent("beforepush",g,l)!==false){g.getEditorBody().innerHTML=l;if(Ext.isGecko){g.setDesignMode(false);g.setDesignMode(true)}g.fireEvent("push",g,l)}}},focus:function(o,q){var p=this,n,s;if(q){if(!p.focusTask){p.focusTask=new Ext.util.DelayedTask(p.focus)}p.focusTask.delay(Ext.isNumber(q)?q:10,null,p,[o,false])}else{if(o){if(p.textareaEl&&p.textareaEl.dom){n=p.textareaEl.dom.value}if(n&&n.length){p.execCmd("selectall",true)}}s=p.getFocusEl();if(s&&s.focus){s.focus()}}return p},initEditor:function(){var e=this,q,t,v,u,s;if(e.destroying||e.destroyed){return}q=e.getEditorBody();if(!q){setTimeout(function(){e.initEditor()},10);return}t=e.textareaEl.getStyle(["font-size","font-family","background-image","background-repeat","background-color","color"]);t["background-attachment"]="fixed";q.bgProperties="fixed";Ext.DomHelper.applyStyles(q,t);v=e.getDoc();u=Ext.get(v);if(u){try{u.clearListeners()}catch(w){}s=e.onEditorEvent.bind(e);u.on({mousedown:s,dblclick:s,click:s,keyup:s,delegated:false,buffer:100});s=e.onRelayedEvent;u.on({mousedown:s,mousemove:s,mouseup:s,click:s,dblclick:s,delegated:false,scope:e});if(Ext.isGecko){u.on("keypress",e.applyCommand,e)}if(e.fixKeys){u.on("keydown",e.fixKeys,e,{delegated:false})}if(e.fixKeysAfter){u.on("keyup",e.fixKeysAfter,e,{delegated:false})}if(Ext.isIE9){Ext.get(v.documentElement).on("focus",e.focus,e)}if(Ext.isIE8){u.on("focusout",function(){e.savedSelection=v.selection.type!=="None"?v.selection.createRange():null},e);u.on("focusin",function(){if(e.savedSelection){e.savedSelection.select()}},e)}Ext.getWin().on("unload",e.destroyEditor,e);v.editorInitialized=true;e.initialized=true;e.pushValue();e.setReadOnly(e.readOnly);e.fireEvent("initialize",e)}},destroyEditor:function(){var q=this,e=q.monitorTask,o,s;if(e){Ext.TaskManager.stop(e)}if(q.rendered){try{Ext.getWin().un("unload",q.destroyEditor,q);o=q.getDoc();if(o){Ext.get(o).destroy();if(o.hasOwnProperty){for(s in o){try{if(o.hasOwnProperty(s)){delete o[s]}}catch(p){}}}}delete q.iframeEl;delete q.textareaEl;delete q.toolbar;delete q.inputCmp}catch(p){}}},doDestroy:function(){this.destroyEditor();Ext.form.FieldContainer.prototype.doDestroy.call(this)},onRelayedEvent:function(p){var q=this.iframeEl,o=Ext.fly(q).getTrueXY(),n=p.getXY(),s=p.getXY();p.xy=[o[0]+s[0],o[1]+s[1]];p.injectEvent(q);p.xy=n},onFirstFocus:function(){var n=this,o,p;n.activated=true;n.disableItems(n.readOnly);if(Ext.isGecko){n.win.focus();o=n.win.getSelection();if(o.focusNode&&!n.getValue().length){p=o.getRangeAt(0);p.selectNodeContents(n.getEditorBody());p.collapse(true);n.deferFocus()}try{n.execCmd("useCSS",true);n.execCmd("styleWithCSS",false)}catch(e){}}n.fireEvent("activate",n)},adjustFont:function(o){var n=o.getItemId()==="increasefontsize"?1:-1,p=this.getDoc().queryCommandValue("FontSize")||"2",s=Ext.isString(p)&&p.indexOf("px")!==-1,q;p=parseInt(p,10);if(s){if(p<=10){p=1+n}else{if(p<=13){p=2+n}else{if(p<=16){p=3+n}else{if(p<=18){p=4+n}else{if(p<=24){p=5+n}else{p=6+n}}}}}p=Ext.Number.constrain(p,1,6)}else{q=Ext.isSafari;if(q){n*=2}p=Math.max(1,p+n)+(q?"px":0)}this.relayCmd("FontSize",p)},onEditorEvent:function(){this.updateToolbar()},updateToolbar:function(){var l=this,w,y,x,C,z,v,A,u;if(l.readOnly){return}if(!l.activated){l.onFirstFocus();return}x=l.getToolbar().items.map;C=l.getDoc();if(l.enableFont&&!Ext.isSafari2){v=C.queryCommandValue("fontName");z=(v?v.split(",")[0].replace(l.reStripQuotes,""):l.defaultFont).toLowerCase();A=l.fontSelect.dom;if(z!==A.value||z!==v){A.value=z}}function B(){var e;for(w=0,y=arguments.length,z;w<y;w++){z=arguments[w];try{e=C.queryCommandState(z)}catch(f){e=false}x[z].toggle(e)}}if(l.enableFormat){B("bold","italic","underline")}if(l.enableAlignments){B("justifyleft","justifycenter","justifyright")}if(!Ext.isSafari2&&l.enableLists){B("insertorderedlist","insertunorderedlist")}u=l.toolbar.query("menu");for(w=0;w<u.length;w++){u[w].hide()}l.syncValue()},relayBtnCmd:function(f){this.relayCmd(f.getItemId())},relayCmd:function(g,l){Ext.defer(function(){var e=this;if(!this.destroyed){e.win.focus();e.execCmd(g,l);e.updateToolbar()}},10,this)},execCmd:function(n,o){var p=this,m=p.getDoc();m.execCommand(n,false,(o===undefined?null:o));p.syncValue()},applyCommand:function(n){if(n.ctrlKey){var p=this,e=n.getCharCode(),o;if(e>0){e=String.fromCharCode(e);switch(e){case"b":o="bold";break;case"i":o="italic";break;case"u":o="underline";break}if(o){p.win.focus();p.execCmd(o);p.deferFocus();n.preventDefault()}}}},insertAtCursor:function(E){var v=this,w=v.getWin(),u=v.getDoc(),A,x,z,D,y,B,C;if(v.activated){w.focus();if(w.getSelection){A=w.getSelection();if(A.getRangeAt&&A.rangeCount){x=A.getRangeAt(0);x.deleteContents();z=u.createElement("div");z.innerHTML=E;D=u.createDocumentFragment();while((y=z.firstChild)){B=D.appendChild(y)}C=D.firstChild;x.insertNode(D);if(B){x=x.cloneRange();x.setStartAfter(B);x.collapse(true);A.removeAllRanges();A.addRange(x)}}}else{if(u.selection&&A.type!=="Control"){A=u.selection;x=A.createRange();x.collapse(true);A.createRange().pasteHTML(E)}}v.deferFocus()}},fixKeys:(function(){var f;if(Ext.isIE10m){return function(v){var q=this,s=v.getKey(),w=q.getDoc(),u=q.readOnly,t,e;if(s===v.TAB){v.stopEvent();if(!u){t=w.selection.createRange();if(t){if(t.collapse){t.collapse(true);t.pasteHTML("&#160;&#160;&#160;&#160;")}q.deferFocus()}}}}}if(Ext.isOpera){return function(n){var o=this,p=n.getKey(),e=o.readOnly;if(p===n.TAB){n.stopEvent();if(!e){o.win.focus();o.execCmd("InsertHTML","&#160;&#160;&#160;&#160;");o.deferFocus()}}}}return null}()),fixKeysAfter:(function(){if(Ext.isIE){return function(e){var q=this,s=e.getKey(),p=q.getDoc(),t=q.readOnly,u;if(!t&&(s===e.BACKSPACE||s===e.DELETE)){u=p.body.innerHTML;if(u==="<p>&nbsp;</p>"||u==="<P>&nbsp;</P>"){p.body.innerHTML=""}}}}return null}()),getToolbar:function(){return this.toolbar},buttonTips:{bold:{title:"Bold (Ctrl+B)",text:"Make the selected text bold.",cls:"x-html-editor-tip"},italic:{title:"Italic (Ctrl+I)",text:"Make the selected text italic.",cls:"x-html-editor-tip"},underline:{title:"Underline (Ctrl+U)",text:"Underline the selected text.",cls:"x-html-editor-tip"},increasefontsize:{title:"Grow Text",text:"Increase the font size.",cls:"x-html-editor-tip"},decreasefontsize:{title:"Shrink Text",text:"Decrease the font size.",cls:"x-html-editor-tip"},backcolor:{title:"Text Highlight Color",text:"Change the background color of the selected text.",cls:"x-html-editor-tip"},forecolor:{title:"Font Color",text:"Change the color of the selected text.",cls:"x-html-editor-tip"},justifyleft:{title:"Align Text Left",text:"Align text to the left.",cls:"x-html-editor-tip"},justifycenter:{title:"Center Text",text:"Center text in the editor.",cls:"x-html-editor-tip"},justifyright:{title:"Align Text Right",text:"Align text to the right.",cls:"x-html-editor-tip"},insertunorderedlist:{title:"Bullet List",text:"Start a bulleted list.",cls:"x-html-editor-tip"},insertorderedlist:{title:"Numbered List",text:"Start a numbered list.",cls:"x-html-editor-tip"},createlink:{title:"Hyperlink",text:"Make the selected text a hyperlink.",cls:"x-html-editor-tip"},sourceedit:{title:"Source Edit",text:"Switch to source editing mode.",cls:"x-html-editor-tip"}},privates:{deferFocus:function(){this.focus(false,true)},getFocusEl:function(){return this.sourceEditMode?this.textareaEl:this.iframeEl}}},0,["com-htmleditor"],["component","box","container","fieldcontainer","com-htmleditor"],{component:true,box:true,container:true,fieldcontainer:true,"com-htmleditor":true},["widget.com-htmleditor"],[["field",Ext.form.field.Field]],[com,"HtmlEditor"],0));(Ext.cmd.derive("com.SearchField",Ext.form.field.Text,{triggers:{clear:{weight:0,cls:"x-form-clear-trigger",hidden:true,handler:"onClearClick",scope:"this"},search:{weight:1,cls:"x-form-search-trigger",handler:"onSearchClick",scope:"this"}},initComponent:function(){var f=this;Ext.form.field.Text.prototype.initComponent.apply(this,arguments);f.on("specialkey",function(m,e){if(m.getValue()==""){return}if(e.getKey()==e.ENTER){f.onSearchClick()}f.fireEvent("onspecialkey",m,e)})},onClearClick:function(){var f=this;f.isClearButtonShow=false;f.getTrigger("clear").hide();f.setValue("");f.updateLayout();f.fireEvent("clear",f)},onSearchClick:function(){var l=this,g=l.getValue();if(g==""){return}l.getTrigger("clear").show();l.isClearButtonShow=true;l.updateLayout();l.fireEvent("search",l,g)}},0,["search-field"],["component","box","field","textfield","search-field"],{component:true,box:true,field:true,textfield:true,"search-field":true},["widget.search-field"],0,[com,"SearchField"],0));(Ext.cmd.derive("com.Tab",Ext.tab.Panel,{ui:"header-tab",initComponent:function(){var l=this,g=webservice.app?webservice.app:false;l.app=g;Ext.tab.Panel.prototype.initComponent.apply(this,arguments)},load:function(f){this.items.each(function(e){if(e.load){e.load(f)}})}},0,["com-tab"],["component","box","container","panel","tabpanel","com-tab"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true},["widget.com-tab"],[[com.ICom.prototype.mixinId||com.ICom.$className,com.ICom]],[com,"Tab"],0));(Ext.cmd.derive("com.Tag",Ext.form.field.Tag,{viewModel:{stores:{store:undefined}},config:{params:{},defaultValue:0,firstLoad:false,linkTo:""},doAfterLoad:Ext.emptyFn,bind:{store:"{store}"},displayField:"DESKRIPSI",valueField:"ID",queryMode:"local",initComponent:function(){var l=this,m=l.getViewModel(),n=m.get("store");l.store=n;n.setQueryParams(l.params);n.on("load",function(f,e,g){if(!g){return}if(e.length>0){if(l.defaultValue>0){var p=n.findRecord(l.valueField,l.defaultValue,0,false,true);if(p){new Ext.util.DelayedTask(function(){l.select(p);l.fireEvent("select",l,p)}).delay(100)}}}l.doAfterLoad(e,l,n)});Ext.form.field.Tag.prototype.initComponent.apply(this,arguments);if(l.firstLoad){n.load()}},load:function(){var g=this.getViewModel(),l=g?g.get("store"):null;if(l){l.load()}},loadStore:function(){this.load()}},0,["com-tag"],["component","box","field","textfield","pickerfield","combobox","combo","tagfield","com-tag"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,tagfield:true,"com-tag":true},["widget.com-tag"],0,[com,"Tag"],0));(Ext.cmd.derive("com.Tree",Ext.tree.Panel,{autoScroll:true,viewModel:{data:{treeConfig:{}},stores:{store:{type:"store"}}},bind:{store:"{store}"},border:false,scrollable:true,rootVisible:false,collapsible:true,floatable:true,split:true,initComponent:function(){var n=this,o=n.getViewModel(),m=webservice.app?webservice.app:false,p=o?o.get("store"):null;n.store=p;n.app=m;if(p){p.on("load",function(l,g,f,e){n.setLoading(false);if(Ext.isArray(g)){if(g.length==0){p.removeAll()}}n.doAfterLoad(n,g,f,e);n.waitRefresh=false})}Ext.tree.Panel.prototype.initComponent.apply(this,arguments)},setTreeConfig:function(n){var l=this,m=l.getViewModel();_config=m.get("treeConfig");n=Ext.apply(_config,n);m.set("treeConfig",n);m.notify()}},0,["com-tree"],["component","box","container","panel","tablepanel","treepanel","com-tree"],{component:true,box:true,container:true,panel:true,tablepanel:true,treepanel:true,"com-tree":true},["widget.com-tree"],[[com.ICom.prototype.mixinId||com.ICom.$className,com.ICom],[com.ITable.prototype.mixinId||com.ITable.$className,com.ITable]],[com,"Tree"],0));(Ext.cmd.derive("com.View",Ext.view.View,{viewModel:{data:{viewConfig:{}},stores:{store:{type:"store"}}},bind:{store:"{store}"},initComponent:function(){var n=this,o=n.getViewModel(),m=webservice.app?webservice.app:false,p=o?o.get("store"):null;p=n.store=Ext.data.StoreManager.lookup(n.store||p||"ext-empty-store");n.app=m;if(p){p.doAfterLoad=function(e,g,f,l){n.setLoading(false);if(Ext.isArray(g)){if(g.length==0){p.removeAll()}}n.doAfterLoad(n,g,f,l);n.waitRefresh=false}}Ext.view.View.prototype.initComponent.call(this)},setViewConfig:function(n){var l=this,m=l.getViewModel();_config=m.get("viewConfig");n=Ext.apply(_config,n);m.set("viewConfig",n);m.notify()}},0,["com-view"],["component","box","dataview","com-view"],{component:true,box:true,dataview:true,"com-view":true},["widget.com-view"],[[com.ICom.prototype.mixinId||com.ICom.$className,com.ICom]],[com,"View"],0));(Ext.cmd.derive("com.Window",Ext.Window,{cls:"main-modules",viewModel:{data:{windowConfig:{icon:"x-fa fa-gear",title:"tes",phoneMode:false,menus:[]}},stores:{store:{type:"tree"}}},modal:true,maximized:true,header:false,border:false,layout:{type:"vbox",align:"stretch"},initComponent:function(){var f=this;f.items=[{xtype:"toolbar",padding:0,height:52,defaults:{height:50,width:50,margin:"0 0 0 0"},border:true,cls:"main-header shadow-panel",items:[{iconCls:"x-fa fa-navicon",scope:f,tooltip:"Menu",cls:"x-btn-nav",bind:{hidden:"{!windowConfig.phoneMode}"},handler:"onMenuBarClick"},{xtype:"container",cls:"x-br-right",style:"border-right: none",flex:1,padding:"10 0 0 10",layout:{type:"hbox"},items:[{xtype:"component",style:"padding-top: 5px;",plugins:"responsive",height:30,responsiveConfig:{"width < 600":{bind:{html:"<div style='font-size: 15px; font-weight: bold'><span class='{windowConfig.icon}'></span> {windowConfig.title}</div>"}},"width >= 600":{bind:{html:"<div style='font-size: 15px; font-weight: bold'><span class='{windowConfig.icon}'></span> {windowConfig.title}</div>"}}}}]},{iconCls:"x-fa fa-close",scope:f,cls:"x-btn-white",tooltip:"Tutup",handler:"onClose"}]},{xtype:"container",reference:"windowcontent",flex:1,layout:{type:"hbox",align:"stretch",animate:true,animatePolicy:{x:true,width:true}},items:[{xtype:"treelist",ui:"navigation",expanderFirst:false,expanderOnly:false,cls:"x-nav-border",reference:"windownav",width:0,bind:{store:"{store}"},listeners:{scope:f,selectionchange:"onNavSelectionChange"}},{xtype:"container",reference:"contentitem",layout:"card",flex:1}]}];f.setWindowConfig({phoneMode:Ext.os.deviceType=="Phone"});f.listeners={scope:f,afterrender:function(){var e=f.getViewModel();if(!e.get("windowConfig.phoneMode")){f.onMenuBarClick()}}};Ext.window.Window.prototype.initComponent.call(this)},setWindowConfig:function(n){var l=this,m=l.getViewModel();cnf=m.get("windowConfig")||{};cnf=Ext.apply(cnf,n);m.set("windowConfig",cnf);m.notify();l.initMenus()},initMenus:function(){var g=this,l=g.getViewModel();g.getViewModel().set("store",Ext.create("Ext.data.TreeStore",{root:{expanded:true,children:l.get("windowConfig.menus")}}))},initContentItems:function(){},onMenuBarClick:function(){var m=this,n=m.down("treelist"),o=m.down("[reference=windowcontent]"),p=n.getWidth()==250?0:250;Ext.suspendLayouts();n.setStyle("position","absolute");n.setWidth(p);Ext.resumeLayouts();o.layout.animatePolicy=o.layout.animate=null;o.updateLayout()},onNavSelectionChange:function(t,u){var o=this,s=o.getViewModel(),p=o.down("[reference=contentitem]"),q=null;if(u){q=p.getComponent(u.get("idClassName"));if(q!=null){p.getLayout().setActiveItem(q);return}q=Ext.create(u.get("className"));Ext.suspendLayouts();p.add(q);p.getLayout().setActiveItem(q);if(q.loadStore){q.loadStore()}Ext.resumeLayouts();if(s.get("windowConfig.phoneMode")){t.setSelection(null);o.onMenuBarClick()}}},onClose:function(){this.close()}},0,["com-window"],["component","box","container","panel","window","com-window"],{component:true,box:true,container:true,panel:true,window:true,"com-window":true},["widget.com-window"],0,[com,"Window"],0));(Ext.cmd.derive("aplikasi.instansi.Model",data.model.Model,{serviceName:"general/instansi",fields:[{name:"PPK",type:"string"}]},0,0,0,0,0,0,[aplikasi.instansi,"Model"],0));(Ext.cmd.derive("aplikasi.instansi.Store",data.store.Store,{model:"aplikasi.instansi.Model"},0,0,0,0,["store.aplikasi-instansi-store"],0,[aplikasi.instansi,"Store"],0));(Ext.cmd.derive("aplikasi.pengguna.Model",data.model.Model,{serviceName:"aplikasi/pengguna",fields:[{name:"ID",type:"int"},{name:"LOGIN",type:"string"},{name:"PASSWORD",type:"string"},{name:"NAMA",type:"string"},{name:"NIP",type:"string"},{name:"JENIS",type:"int"},{name:"REF",type:"string"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[aplikasi.pengguna,"Model"],0));(Ext.cmd.derive("aplikasi.pengguna.Store",data.store.Store,{model:"aplikasi.pengguna.Model"},0,0,0,0,["store.aplikasi-pengguna-store"],0,[aplikasi.pengguna,"Store"],0));(Ext.cmd.derive("aplikasi.requestreport.Model",Ext.data.Model,{fields:[{name:"NAME",type:"string"},{name:"CONNECTION_NUMBER",type:"int",defaultValue:0},{name:"TYPE",type:"string",defaultValue:"Pdf"},{name:"EXT",type:"string",defaultValue:"pdf"},"PARAMETER",{name:"REQUEST_FOR_PRINT",type:"boolean",defaultValue:false},"PRINT_NAME",{name:"COPIES",type:"int",defaultValue:1}],proxy:{type:"rest",url:webservice.location+"plugins/request-report",reader:{type:"json",rootProperty:"content"}}},0,0,0,0,0,0,[aplikasi.requestreport,"Model"],0));(Ext.cmd.derive("aplikasi.login.FormController",Ext.app.ViewController,{onMasuk:function(){var l=this,n=l.getView(),m=n.getForm();if(m.isValid()){n.setLoading(true);Ext.Ajax.request({url:webservice.location+"authentication/login",method:"POST",jsonData:m.getValues(),useDefaultXhrHeader:false,withCredentials:true,success:function(e){var f=Ext.JSON.decode(e.responseText);n.setLoading(false);if(f.success){webservice.app=webservice.app||{};webservice.app.pauseAutoRefresh=false;webservice.app.usrNm=f.data.NAME;webservice.app.ts=f.data.TIMESTAMP;webservice.app.pc=f.data.PC;webservice.app.usrLg=f.data.LGN;webservice.app.usrTp=f.data.JNS;webservice.app.usrNik=f.data.NIK;webservice.app.penggunaRuangan=f.data.RUANGANS;webservice.app.privPencarian=f.data.XPRIVPENCARIAN;webservice.app.xuam=f.data.XUAM;webservice.app.xpriv=function(g,w){var u=f.data.XPRIV,v=Ext.Object.getValues(u),x=false;if(!w){return u.hasOwnProperty(g)}for(var y=0;y<v.length;y++){if(v[y].indexOf(g)==0){x=true;break}}return x};n.fireEvent("login",f)}else{l.showFailureLoginMessage()}},failure:function(e){l.showFailureLoginMessage()}})}},showFailureLoginMessage:function(){var f=this.getView();f.setLoading(false);Ext.toast({html:"ID Pengguna / Kata Sandi anda salah",headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"})},onSpecialKey:function(l,e){if(e.getKey()==e.ENTER){this.onMasuk()}}},0,0,0,0,["controller.aplikasi-login-form"],0,[aplikasi.login,"FormController"],0));(Ext.cmd.derive("aplikasi.login.Form",com.Form,{cls:"login-form",controller:"aplikasi-login-form",bodyPadding:30,defaultType:"textfield",defaults:{labelWidth:90,labelAlign:"top",labelSeparator:"",submitEmptyText:false,anchor:"100%"},border:false,bodyStyle:"background: transparent;",jsonSubmit:true,items:[{xtype:"component",html:"<h1 style='color: #262626; font-family: 'Nunito', sans-serif;'>LOGIN</h1>",margin:"0 0 40px 0"},{emptyText:"[Masukkan ID Pengguna Anda]",name:"LOGIN",allowBlank:false,fieldStyle:"padding: 10px",margin:"0 0 15px 0",listeners:{specialkey:"onSpecialKey"},triggers:{glyphed:{cls:"x-fa fa-user"}}},{emptyText:"[Masukkan Kata Sandi Anda]",name:"PASSWORD",allowBlank:false,inputType:"password",fieldStyle:"padding: 10px",margin:"0 0 15px 0",listeners:{specialkey:"onSpecialKey"},triggers:{glyphed:{cls:"x-fa fa-lock"}}},{xtype:"button",ui:"soft-saphire",width:90,text:"Masuk",padding:10,iconAlign:"right",iconCls:"x-fa fa-angle-right",handler:"onMasuk"}],reset:function(){this.getForm().reset()},focus:function(){this.down("[name=LOGIN]").focus(false,100)}},0,["aplikasi-login-form"],["component","box","container","panel","form","com-form","aplikasi-login-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"aplikasi-login-form":true},["widget.aplikasi-login-form"],0,[aplikasi.login,"Form"],0));(Ext.cmd.derive("aplikasi.pengguna.info.Panel",com.Form,{controller:"aplikasi-pengguna-info-panel",viewModel:{stores:{pegawai:{type:"pegawai-store"},pengguna:{type:"pengguna-store"}},data:{nama:"",image:"nousuario.jpg"}},layout:{type:"vbox",align:"center"},items:[{xtype:"image",style:"border-radius: 50%; -moz-border-radius: 50%; -webkit-border-radius: 50%; border: 1px solid #eaeaea ",bind:{src:"classic/resources/images/{image}"},width:90,height:90,alt:"no-image",margin:"10 10 0 10"},{style:"font-size:17px; margin-left: 10px; margin-right: 10px; padding-top:9px; padding-bottom:5px;",bind:{html:"{nama}"}},{xtype:"container",layout:"hbox",style:"margin-left: 10px; margin-right: 10px;",items:[{xtype:"button",iconCls:"x-fa fa-lock",padding:0,tooltip:"Ubah Kata Sandi",handler:"onUbahKataSandi"}]}],load:function(){var g=this.getViewModel(),l=g.get("pegawai");pengguna=g.get("pengguna");this.app=webservice.app;if(this.app){pengguna.queryParams={ID:this.app.usrid};pengguna.load({callback:function(f,n,e){if(e){l.queryParams={NIP:f[0].get("NIP")};l.load({callback:function(s,m,q){if(q){if(s[0].get("JENIS_KELAMIN")==2){g.set("image","nophoto-female.jpg")}else{g.set("image","nousuario.jpg")}}else{g.set("image","nousuario.jpg")}}})}}});this.getViewModel().set("nama",this.app.usrNm)}}},0,["aplikasi-pengguna-info-panel"],["component","box","container","panel","form","com-form","aplikasi-pengguna-info-panel"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"aplikasi-pengguna-info-panel":true},["widget.aplikasi-pengguna-info-panel"],0,[aplikasi.pengguna.info,"Panel"],0));(Ext.cmd.derive("aplikasi.pengguna.info.PanelController",Ext.app.ViewController,{onUbahKataSandi:function(p){var n=this,q=n.getView(),s=527,o=275;if(Ext.os.deviceType=="Phone"){s=o=0}q.openDialog("",true,s,o,{xtype:"ubahkatasandi-form",title:"Ubah Kata Sandi",iconCls:"x-fa fa-lock",ui:"panel-red",showCloseButton:true},function(g,e){var f=e.down("ubahkatasandi-form");f.loadRecord(Ext.create("data.model.Pengguna",{ID:q.app.usrid,LOGIN:q.app.usrLg}));f.on({save:function(){e.close()},close:function(){e.close()}})},null,false)}},0,0,0,0,["controller.aplikasi-pengguna-info-panel"],0,[aplikasi.pengguna.info,"PanelController"],0));(Ext.cmd.derive("aplikasi.pengguna.ubahkatasandi.FormController",Ext.app.ViewController,{onReset:function(){this.getView().getForm().reset()},onSimpan:function(p){var n=this,s=n.getView(),o=n.getViewModel(),q=n.getReferences();if(q.pass.getValue()!=q.repeatpass.getValue()){s.notifyMessage("Kata Sandi Baru anda berbeda, Silahkan cek kembali Kata Sandi Baru anda");return}s.save(p,{},function(e,g,f){s.fireEvent("getView",f)})},onBlurPasswordLama:function(q){var o=this,t=o.getView(),p=o.getViewModel(),u=p.get("record"),s=o.getStore("store");s.setQueryParams({ID:u.get("ID"),PASSWORD:q.getValue()});s.doAfterLoad=function(l,f,e,g){p.set("allowChangePwd",false);if(e){p.set("allowChangePwd",f.length>0)}};s.load()}},0,0,0,0,["controller.ubahkatasandi-form"],0,[aplikasi.pengguna.ubahkatasandi,"FormController"],0));(Ext.cmd.derive("aplikasi.pengguna.ubahkatasandi.Form",com.Form,{model:"aplikasi.pengguna.Model",controller:"ubahkatasandi-form",viewModel:{stores:{store:{type:"aplikasi-pengguna-store"}},data:{formConfig:{reset:false,close:false},viewInfoDetil:false,hideForm:true,allowChangePwd:false}},defaultType:"textfield",defaults:{anchor:"100%",allowBlank:false,labelAlign:"right"},title:"Form Input Pengguna dan Kata Sandi",items:[{fieldLabel:"ID Pengguna",reference:"username",emptyText:"Input ID Pengguna",readOnly:true,name:"LOGIN"},{fieldLabel:"Kata Sandi Lama",labelAlign:"right",allowBlank:true,reference:"passlama",emptyText:"Input Kata Sandi Lama",inputType:"password",name:"PASSWORDLAMA",listeners:{blur:"onBlurPasswordLama"}},{fieldLabel:"Kata Sandi Baru",labelAlign:"right",reference:"pass",emptyText:"Input Kata Sandi Baru",inputType:"password",name:"PASSWORD",bind:{readOnly:"{!allowChangePwd}"}},{fieldLabel:"Ulangi Kata Sandi Baru",labelAlign:"right",reference:"repeatpass",inputType:"password",emptyText:"Ulangi Kata Sandi Baru",name:"ULANGPASSWORD",bind:{readOnly:"{!allowChangePwd}"}}],buttons:[{text:"Simpan",ui:"soft-blue",iconCls:"x-fa fa-save",handler:"onSimpan",tooltip:{text:"Simpan",mouseOffset:[0,-75]},bind:{disabled:"{!allowChangePwd}"}},{text:"Reset",ui:"soft-red",iconCls:"x-fa fa-refresh",handler:"onReset",bind:{hidden:"{!formConfig.reset}"},tooltip:{text:"Reset",mouseOffset:[0,-75]}}],storeload:function(u){var o=this,s=o.down("[reference = username]"),q=Ext.create("aplikasi.pengguna.Model",{}),p=o.getVieModel(),t=p.get("store");if(t){t.removeAll();t.queryParams={NIP:u.get("NIP")};t.load({callback:function(l,g,f){if(f){var e=t.getAt(0);q.set(e.data);o.loadRecord(q);p.set("hideForm",false)}else{q.set("NAMA",u.get("NAMA"));q.set("NIP",u.get("NIP"));o.loadRecord(q)}}})}}},0,["ubahkatasandi-form"],["component","box","container","panel","form","com-form","ubahkatasandi-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"ubahkatasandi-form":true},["widget.ubahkatasandi-form"],0,[aplikasi.pengguna.ubahkatasandi,"Form"],0));(Ext.cmd.derive("aplikasi.teams.Form",com.Form,{title:"Team SIMpel",iconCls:"simpel-simpel",layout:"fit",scrollable:"y",items:[{xtype:"dataview",itemSelector:"div.team-view",tpl:['<tpl for=".">','<div class="team-view">','<div class="team-view-bg">','<div class="team-view-item">','<tpl if="IMAGE">','<img src="{IMAGE}"/>',"</tpl>","<strong>{NAMA}</strong>",'<div style="font-size: 12px">{ROLE}</div>',"</div>","</div>","</div>","</tpl>"],plugins:{ptype:"ux-animated-dataview"},store:{autoLoad:true,fields:["ID","NAMA","ROLE","IMAGE"],proxy:{type:"ajax",url:webservice.location+"aplikasi/teams",reader:{type:"json",rootProperty:"data"}}}}]},0,["aplikasi-teams-form"],["component","box","container","panel","form","com-form","aplikasi-teams-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"aplikasi-teams-form":true},["widget.aplikasi-teams-form"],0,[aplikasi.teams,"Form"],0));(Ext.cmd.derive("master.marginpenjaminfarmasi.Model",data.model.Model,{serviceName:"general/marginpenjaminfarmasi",fields:[{name:"ID",type:"int"},{name:"PENJAMIN",type:"int"},{name:"JENIS",type:"int"},{name:"MARGIN",type:"float"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"TANGGAL_SK",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"NOMOR_SK",type:"string"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[master.marginpenjaminfarmasi,"Model"],0));(Ext.cmd.derive("master.marginpenjaminfarmasi.Store",data.store.Store,{model:"master.marginpenjaminfarmasi.Model"},0,0,0,0,["store.master-marginpenjaminfarmasi-store"],0,[master.marginpenjaminfarmasi,"Store"],0));(Ext.cmd.derive("master.negara.Model",data.model.Model,{serviceName:"general/negara",fields:[{name:"ID",type:"int"},{name:"DESKRIPSI",type:"string"},{name:"SINGKATAN",type:"string"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[master.negara,"Model"],0));(Ext.cmd.derive("master.negara.Store",data.store.Store,{model:"master.negara.Model"},0,0,0,0,["store.master-negara-store"],0,[master.negara,"Store"],0));(Ext.cmd.derive("master.paketdetil.distribusitarif.Model",data.model.Model,{serviceName:"general/distribusitarifpaketdetil",fields:[{name:"ID",type:"int"},{name:"PAKET_DETIL",type:"int"},{name:"ADMINISTRASI",type:"int"},{name:"SARANA",type:"int"},{name:"BHP",type:"int"},{name:"DOKTER_OPERATOR",type:"int"},{name:"DOKTER_ANASTESI",type:"int"},{name:"DOKTER_LAINNYA",type:"int"},{name:"PENATA_ANASTESI",type:"int"},{name:"PARAMEDIS",type:"int"},{name:"NON_MEDIS",type:"int"},{name:"TARIF",type:"int"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"TANGGAL_SK",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"NOMOR_SK",type:"string"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[master.paketdetil.distribusitarif,"Model"],0));(Ext.cmd.derive("master.paketdetil.distribusitarif.Store",data.store.Store,{model:"master.paketdetil.distribusitarif.Model"},0,0,0,0,["store.master-paketdetil-distribusitarif-Store"],0,[master.paketdetil.distribusitarif,"Store"],0));(Ext.cmd.derive("master.penyedia.Model",data.model.Model,{serviceName:"inventory/penyedia",fields:[{name:"ID",type:"int"},{name:"NAMA",type:"string"},{name:"ALAMAT",type:"string"},{name:"TELEPON",type:"string"},{name:"FAX",type:"string"},{name:"TANGGAL",type:"date",defaultValue:new Date(),dateFormat:"y-m-d H:i:s"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[master.penyedia,"Model"],0));(Ext.cmd.derive("master.penyedia.Store",data.store.Store,{model:"master.penyedia.Model"},0,0,0,0,["store.master-penyedia-store"],0,[master.penyedia,"Store"],0));(Ext.cmd.derive("master.ruangan.kelas.Model",data.model.Model,{serviceName:"general/ruangan/kelas",fields:[{name:"ID",type:"int"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"RUANGAN",type:"string"},{name:"KELAS",type:"string"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[master.ruangan.kelas,"Model"],0));(Ext.cmd.derive("master.ruangan.kelas.Store",data.store.Store,{model:"master.ruangan.kelas.Model"},0,0,0,0,["store.ruangan-kelas-store"],0,[master.ruangan.kelas,"Store"],0));(Ext.cmd.derive("master.tindakanpaket.Model",data.model.Model,{serviceName:"general/tindakanpaket",fields:[{name:"ID",type:"int"},{name:"NAMA",type:"string"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[master.tindakanpaket,"Model"],0));(Ext.cmd.derive("master.tindakanpaket.Store",data.store.Store,{model:"master.tindakanpaket.Model"},0,0,0,0,["store.tindakan-paket-store"],0,[master.tindakanpaket,"Store"],0));(Ext.cmd.derive("master.Workspace",com.Form,{controller:"workspace-master",layout:"fit",bodyPadding:0,items:[{xtype:"com-form",ui:"panel-black",title:"Master",titleFieldConfig:{},fullscreenEnabled:true,menuConfig:{enabled:true,width:190,buttonConfig:{}},fullscreenConfig:{},header:{items:[{}]}}],load:function(s){var o=this,p=this.down("com-form");var n=[],q=Ext.JSON.decode(Ext.util.Base64.decode(o.app.xuam));q.forEach(function(e,f){e=Ext.JSON.decode(Ext.util.Base64.decode(e));if(e.ID.substring(0,2)=="19"&&e.LEVEL==2){n.push({text:e.DESKRIPSI,leaf:e.HAVE_CHILD==0,iconCls:e.ICON_CLS,className:e.CLASS,idClassName:o.replaceAll(e.CLASS.toLowerCase(),".","_")})}});p.setMenus(n)}},0,["workspace-master"],["component","box","container","panel","form","com-form","workspace-master"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-master":true},["widget.workspace-master"],0,[master,"Workspace"],0));(Ext.cmd.derive("master.WorkspaceController",Ext.app.ViewController,{},0,0,0,0,["controller.workspace-master"],0,[master,"WorkspaceController"],0));(Ext.cmd.derive("master.aturanpakai.Combo",com.Combo,{viewModel:{stores:{store:{type:"referensi-store"}}},bind:{store:"{store}"},emptyText:"[ Pilih Aturan Pakai ]",queryMode:"remote",hideTrigger:true,queryParam:"QUERY",valueField:"ID",minChars:1,tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="x-boundlist-item">','<div style="height: 25px;">[ {ID} ] - <strong>{DESKRIPSI}</strong> </div>',"</div>","</tpl>"),displayTpl:Ext.create("Ext.XTemplate",'<tpl for=".">',"{ID} - {DESKRIPSI}","</tpl>")},0,["aturanpakai-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","aturanpakai-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"aturanpakai-combo":true},["widget.aturanpakai-combo"],0,[master.aturanpakai,"Combo"],0));(Ext.cmd.derive("master.aturanpakai.ViewModel",Ext.app.ViewModel,{formulas:{init:function(f){f("aturanpakaistore").load()}},stores:{aturanpakaistore:{type:"referensi-store",queryParams:{JENIS:41}}}},0,0,0,0,["viewmodel.aturanpakaimodel"],0,[master.aturanpakai,"ViewModel"],0));(Ext.cmd.derive("master.aturanpakai.Workspace",Ext.form.Panel,{layout:{type:"vbox",align:"stretch"},bodyPadding:4,header:false,border:false,defaults:{margin:"0 1 0 1"},initComponent:function(){this.items=[{layout:{type:"hbox",align:"stretch"},defaults:{margin:"0 1 0 1"},bodyPadding:5,defaultType:"combobox",items:[{xtype:"aturanpakai-combo",params:{JENIS:41},flex:1}]}];Ext.form.Panel.prototype.initComponent.apply(this,arguments)}},0,["workspace-combo-aturanpakai"],["component","box","container","panel","form","workspace-combo-aturanpakai"],{component:true,box:true,container:true,panel:true,form:true,"workspace-combo-aturanpakai":true},["widget.workspace-combo-aturanpakai"],0,[master.aturanpakai,"Workspace"],0));(Ext.cmd.derive("master.barang.Combo",com.Combo,{viewModel:{stores:{store:{type:"barang-ruangan-store"}}},bind:{store:"{store}"},emptyText:"[ Masukkan Nama Obat ]",queryMode:"remote",hideTrigger:true,queryParam:"QUERY",displayField:"NAMA",valueField:"BARANG",typeAhead:true,minChars:2,tpl:new Ext.XTemplate('<tpl for=".">','<div class="x-boundlist-item" style="font-size: 12px; line-height: 15px; padding: 3px 10px">','<div style="font-weight: bold; white-space:normal !important;">[ {BARANG} ] - {REFERENSI.BARANG.NAMA}</div>','<div style="white-space:normal !important;">Kategory: {[this.getKategory(values.REFERENSI.BARANG)]}</div>','<div style="white-space:normal !important;">Merk: {[this.getMerk(values.REFERENSI.BARANG)]}</div>','<div style="font-weight: bold; white-space:normal !important;">Stok: {STOK}</div>',"</div>","</tpl>",{getKategory:function(l){var m=l.REFERENSI?l.REFERENSI:null,n=m?(m.KATEGORI?m.KATEGORI.NAMA:"-"):"-";return n},getMerk:function(l){var m=l.REFERENSI?l.REFERENSI:null,n=m?(m.MERK?m.MERK.DESKRIPSI:"-"):"-";return n}}),displayTpl:Ext.create("Ext.XTemplate",'<tpl for=".">',"{BARANG} - {REFERENSI.BARANG.NAMA}","</tpl>")},0,["barang-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","barang-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"barang-combo":true},["widget.barang-combo"],0,[master.barang,"Combo"],0));(Ext.cmd.derive("master.barang.ComboMaster",com.Combo,{viewModel:{stores:{store:{type:"barang-store"}}},bind:{store:"{store}"},emptyText:"[ Masukkan Nama Obat ]",queryMode:"remote",hideTrigger:true,queryParam:"QUERY",displayField:"NAMA",valueField:"ID",typeAhead:true,minChars:2,tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="x-boundlist-item">',"[ {ID} ] - <strong>{NAMA} ~ {REFERENSI.SATUAN.DESKRIPSI}~{REFERENSI.KATEGORI.NAMA} ~ {REFERENSI.MERK.DESKRIPSI}</strong>","</div>","</tpl>"),displayTpl:Ext.create("Ext.XTemplate",'<tpl for=".">',"{ID} - {NAMA} ~ {REFERENSI.SATUAN.DESKRIPSI}~{REFERENSI.KATEGORI.NAMA} ~ {REFERENSI.MERK.DESKRIPSI}","</tpl>")},0,["barang-combo-master"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","barang-combo-master"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"barang-combo-master":true},["widget.barang-combo-master"],0,[master.barang,"ComboMaster"],0));(Ext.cmd.derive("master.barang.Workspace",Ext.form.Panel,{layout:{type:"vbox",align:"stretch"},bodyPadding:4,header:false,border:false,defaults:{margin:"0 1 0 1"},flex:1,initComponent:function(){this.items=[{xtype:"barang-combo",reference:"barangcombo",allowBlank:false,name:"FARMASI"}];Ext.form.Panel.prototype.initComponent.apply(this,arguments)},loadStore:function(n){var q=this,o="101010101",p=q.down("barang-combo"),s=p.getViewModel().get("store");s.queryParams={RUANGAN:o,STATUS:1}}},0,["workspace-combo-barang"],["component","box","container","panel","form","workspace-combo-barang"],{component:true,box:true,container:true,panel:true,form:true,"workspace-combo-barang":true},["widget.workspace-combo-barang"],0,[master.barang,"Workspace"],0));(Ext.cmd.derive("master.barangruangan.Combo",com.Combo,{viewModel:{stores:{store:{type:"barang-ruangan-store"}}},bind:{store:"{store}"},emptyText:"[ Masukkan Nama Obat ]",queryMode:"remote",hideTrigger:true,queryParam:"QUERY",displayField:"NAMA",valueField:"BARANG",minChars:1,tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="x-boundlist-item">','<div style="height: 25px;">[ {BARANG} ] - <strong>{REFERENSI.BARANG.NAMA}</strong> , <strong>{REFERENSI.BARANG.REFERENSI.KATEGORI.NAMA}</strong> , <strong>{REFERENSI.BARANG.REFERENSI.SATUAN.NAMA}</strong>, <strong>{STOK}</strong></div>',"</div>","</tpl>"),displayTpl:Ext.create("Ext.XTemplate",'<tpl for=".">',"{BARANG} - {REFERENSI.BARANG.NAMA}","</tpl>")},0,["barang-ruangan-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","barang-ruangan-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"barang-ruangan-combo":true},["widget.barang-ruangan-combo"],0,[master.barangruangan,"Combo"],0));(Ext.cmd.derive("master.barangruangan.List",com.Grid,{controller:"barang-ruangan-list",flex:1,viewModel:{stores:{store:{type:"barang-ruangan-store"}}},cls:"x-br-top",border:true,ruangan:false,initComponent:function(){var f=this;if(f.ruangan){f.header={items:[{xtype:"search-field",cls:"x-text-border",autoFocus:true,emptyText:"Nama Barang",flex:1,enableKeyEvents:true,listeners:{search:"onSearch",clear:"onClear"}}]}}f.columns=[{xtype:"rownumberer",text:"No",align:"left",width:60},{text:"ID ",dataIndex:"ID",flex:1,hidden:true},{text:"Barang",dataIndex:"ID",flex:4,renderer:"onBarangRender"},{text:"Stok",xtype:"numbercolumn",dataIndex:"STOK",format:"0,00",align:"right",flex:1},{xtype:"checkcolumn",header:"STATUS",dataIndex:"STATUS",width:90,listeners:{checkchange:"onChange"}}];f.dockedItems=[{xtype:"pagingtoolbar",bind:{store:"{store}"},dock:"bottom",items:[{xtype:"search-field",cls:"x-text-border",hidden:f.ruangan,emptyText:"Cari Nama Obat",flex:1,listeners:{search:"onSearch",clear:"onClear"}}]}];com.Grid.prototype.initComponent.apply(this,arguments)},loadHalPertama:function(n,s){var o=this,p=o.getViewModel(),q=p.get("store");if(n){if(s){q.queryParams={RUANGAN:n.get("ID"),start:0,page:1};q.load({callback:function(f,g,e){if(e){delete q.queryParams.start;delete q.queryParams.page}}})}}}},0,["barang-ruangan-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","barang-ruangan-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"barang-ruangan-list":true},["widget.barang-ruangan-list"],0,[master.barangruangan,"List"],0));(Ext.cmd.derive("master.barangruangan.ListController",Ext.app.ViewController,{onBarangRender:function(y,w,x,v,e,g){var u=x.get("REFERENSI"),f=u?(u.BARANG?u.BARANG.NAMA:""):"";return f},onChange:function(u,f,x){var w=this,e=w.getView(),v=w.getViewModel(),g=v.get("store"),y=g.getAt(f);y.set("STATUS",x?1:0);y.scope=this;y.save({callback:function(m,l,n){if(n){e.notifyMessage("Status di"+(x==true?"Aktifkan":"Non Aktifkan"));g.reload()}}})},onSearch:function(q,f){var e=this,s=e.getViewModel(),p=s.get("store");parameter=p.getQueryParams();p.queryParams={QUERY:f,RUANGAN:parameter.RUANGAN,start:0,page:1};p.load()},onClear:function(){var m=this,l=m.getViewModel(),n=l.get("store");delete n.queryParams.QUERY;delete n.queryParams.start;delete n.queryParams.page;n.load()}},0,0,0,0,["controller.barang-ruangan-list"],0,[master.barangruangan,"ListController"],0));(Ext.cmd.derive("master.barangruangan.Workspace",com.Form,{controller:"barang-ruangan-workspace",layout:"border",border:false,defaults:{border:false},initComponent:function(){var f=this;f.items=[{region:"west",title:"Daftar Barang",xtype:"barang-list",collapsible:true,flex:0.7,showSearch:true,reference:"baranglist",hideHeaders:true,split:true,multiSelect:true,viewConfig:{plugins:{ptype:"gridviewdragdrop",enableDrop:false},copy:true},listeners:{itemdblclick:"onItemDblClickBarang"}},{region:"center",ruangan:true,xtype:"barang-ruangan-list",reference:"barangruanganlist",viewConfig:{plugins:{ptype:"gridviewdragdrop",enableDrag:false},listeners:{scope:f.getController(),drop:"onDropBarang"}}}];f.callParent(arguments)},load:function(n){var p=this,q=p.getViewModel(),s=p.down("barang-list"),o=p.down("barang-ruangan-list");if(n){s.loadStore({STATUS:1});p.loadRecord(n);o.loadHalPertama(n,true)}}},0,["barang-ruangan-workspace"],["component","box","container","panel","form","com-form","barang-ruangan-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"barang-ruangan-workspace":true},["widget.barang-ruangan-workspace"],0,[master.barangruangan,"Workspace"],0));(Ext.cmd.derive("master.barangruangan.WorkspaceController",Ext.app.ViewController,{onItemDblClickBarang:function(s,o){var n=this,p=n.getViewModel(),q=new Date();data=p.get("record");o=Ext.create("data.model.BarangRuangan",{BARANG:o.get("ID"),RUANGAN:data.get("ID"),STOK:0,TANGGAL:q,STATUS:1});n.simpanBarangRuangan(o)},onDropBarang:function(E,f,e,A){var D=this,z=D.getViewModel(),g=z.get("record"),C=Ext.Array.clone(f.records),x=g.get("ID"),y=new Date(),B=0;f.records=[];Ext.Array.each(C,function(l){l=Ext.create("data.model.BarangRuangan",{BARANG:l.get("ID"),RUANGAN:x,STOK:0,TANGGAL:y,STATUS:1});B++;D.simpanBarangRuangan(l,false,function(m,n){f.records.push(l);if(B==C.length){D.loadBarangRuangan()}})})},privates:{simpanBarangRuangan:function(s,q,e){var t=this,f=t.getView(),q=q!=undefined?q:true,u=s.get("ID");s.showError=true;s.save({callback:function(n,m,o){if(o){var l=n.get("REFERENSI"),g=l?(l.BARANG?l.BARANG.NAMA:""):"";f.notifyMessage((!Ext.isNumeric(u)?"Barang <b>"+g+"</b>":"Data")+" telah tersimpan");if(q){t.loadBarangRuangan()}}if(Ext.isFunction(e)){e(n,o)}}})},loadBarangRuangan:function(){var m=this,n=m.getReferences(),l=n.barangruanganlist;l.reload()}}},0,0,0,0,["controller.barang-ruangan-workspace"],0,[master.barangruangan,"WorkspaceController"],0));(Ext.cmd.derive("master.pegawai.Combo",com.Combo,{viewModel:{stores:{store:{type:"pegawai-store"}}},emptyText:"[Masukkan NIP/Nama Dokter]",queryMode:"remote",hideTrigger:true,queryParam:"QUERY",displayField:"NAMA",valueField:"NIP",minChars:2,tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="x-boundlist-item">','<div style="height: 17px;"><strong>{NAMA}</strong></div>','<div style="font-size: 12px;">{NIP}</div>',"</div>","</tpl>"),displayTpl:Ext.create("Ext.XTemplate",'<tpl for=".">',"{NIP} - {NAMA}","</tpl>")},0,["pegawai-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","pegawai-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"pegawai-combo":true},["widget.pegawai-combo"],0,[master.pegawai,"Combo"],0));(Ext.cmd.derive("master.dokter.Combo",master.pegawai.Combo,{viewModel:{stores:{store:{type:"dokter-store"}}},valueField:"ID",loadStore:function(){var f=this.getViewModel().get("store");if(f){f.load()}}},0,["dokter-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","pegawai-combo","dokter-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"pegawai-combo":true,"dokter-combo":true},["widget.dokter-combo"],0,[master.dokter,"Combo"],0));(Ext.cmd.derive("master.dokter.List",Ext.form.Panel,{layout:{type:"vbox",align:"stretch"},items:[{xtype:"toolbar",border:false,items:["->",{},{xtype:"button",text:"+"}]},{}]},0,["dokter-list"],["component","box","container","panel","form","dokter-list"],{component:true,box:true,container:true,panel:true,form:true,"dokter-list":true},["widget.dokter-list"],0,[master.dokter,"List"],0));(Ext.cmd.derive("master.dokter.ListController",Ext.app.ViewController,{nama:"",nip:"",init:function(){var o=this,p=o.getView(),n=o.getViewModel(),e=n.get("dokterstore");p.down("pegawai-combo").getViewModel().set("store",e)},onSelectDokter:function(g,l){nip=l.get("NIP");nama=l.get("NAMA")},addDokterClick:function(){var l=this;var g=new data.model.Dokter({NAMA:nama,NIP:nip});l.getStore("doktergridstore").insert(0,g);this.getReferences("combo_pegawai").setValue()},onRemoveClick:function(n,m){var l=this;l.getStore("doktergridstore").removeAt(m)}},0,0,0,0,["controller.dokter-list"],0,[master.dokter,"ListController"],0));(Ext.cmd.derive("master.dokter.ViewModel",Ext.app.ViewModel,{data:{},stores:{dokterstore:{type:"dokter-store"}}},0,0,0,0,["viewmodel.dokter-model"],0,[master.dokter,"ViewModel"],0));(Ext.cmd.derive("master.dokterruangan.Form",com.Form,{controller:"form-dokterruangan",model:"data.model.DokterRuangan",layout:{type:"hbox",align:"stretch"},border:false,bodyPadding:0,defaults:{margin:"0 2 0 2"},defaultType:"button",items:[{xtype:"dokter-combo",name:"DOKTER",reference:"combodokter",hideTrigger:false,forceSelection:true,flex:1,multiSelect:true,emptyText:"[ PILIH DOKTER RUANGAN ]",allowBlank:false,displayTpl:Ext.create("Ext.XTemplate",'<tpl for=".">{NAMA}<tpl if="xindex < xcount">, </tpl></tpl>')},{text:"ADD",width:60,listeners:{click:"onSimpan"}},{text:"ALL",width:60,listeners:{click:"onAllDokter"}}]},0,["form-dokterruangan"],["component","box","container","panel","form","com-form","form-dokterruangan"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-dokterruangan":true},["widget.form-dokterruangan"],0,[master.dokterruangan,"Form"],0));(Ext.cmd.derive("master.dokterruangan.FormController",Ext.app.ViewController,{onSimpan:function(m){var l=this,n=l.getView();n.save(m)},onAllDokter:function(){var l=this,n=l.getView(),m=n.getRecord();if(m){m.set("ALL",1);m.save({callback:function(g,f,e){if(e){n.fireEvent("save",g)}}})}}},0,0,0,0,["controller.form-dokterruangan"],0,[master.dokterruangan,"FormController"],0));(Ext.cmd.derive("master.dokterruangan.List",com.Grid,{controller:"dokterruangan-list",viewModel:{stores:{store:{type:"dokter-ruangan-store"}}},cls:"x-br-top",border:true,columns:[{xtype:"rownumberer",text:"No",align:"left",width:60},{text:"NIP ",dataIndex:"ID",flex:1,renderer:"onNIPDokterRuanganRender"},{text:"NAMA",dataIndex:"ID",flex:4,renderer:"onNamaDokterRuanganRender"},{xtype:"checkcolumn",header:"STATUS",dataIndex:"STATUS",width:90,listeners:{checkchange:"onChange"}}]},0,["dokterruangan-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","dokterruangan-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"dokterruangan-list":true},["widget.dokterruangan-list"],0,[master.dokterruangan,"List"],0));(Ext.cmd.derive("master.dokterruangan.ListController",Ext.app.ViewController,{onChange:function(s,w,x){var y=this,v=y.getView(),q=y.getViewModel(),u=q.get("store"),t=u.getAt(w);if(t){t.set("STATUS",x?1:0);t.scope=y;t.save({callback:function(e,g,f){if(f){v.notifyMessage("Status di "+(x==true?"Aktifkan":"NonAktifkan"))}else{t.set("STATUS",x?0:1)}}})}},onNIPDokterRuanganRender:function(n,q,o){var s=o.get("REFERENSI"),p=s?(s.DOKTER?s.DOKTER.NIP:""):"";return p},onNamaDokterRuanganRender:function(n,p,o){var s=o.get("REFERENSI"),q=s?(s.DOKTER?s.DOKTER.NAMA:""):"";return q}},0,0,0,0,["controller.dokterruangan-list"],0,[master.dokterruangan,"ListController"],0));(Ext.cmd.derive("master.dokterruangan.Workspace",com.Form,{controller:"workspace-dokterruangan",viewModel:{data:{hideForm:true}},border:false,defaults:{border:false},layout:"border",initComponent:function(){var g=this,l=g.getController();g.items=[{region:"north",layout:{type:"hbox",align:"stretch"},margin:"2.2.2.2",items:[{xtype:"form-dokterruangan",reference:"formdokterruangan",hidden:true,flex:1,bind:{hidden:"{hideForm}"},listeners:{scope:l,save:"onSuccess"}},{xtype:"component",flex:0.7},{xtype:"button",margin:2,height:32,cls:"x-fa fa-plus hide-icon-tools",tooltip:"Tambah Dokter Ruangan",listeners:{scope:l,click:"onAddDokterRuangan"}}]},{region:"center",xtype:"dokterruangan-list",reference:"dokterruanganlist"}];com.Form.prototype.initComponent.apply(this,arguments)},load:function(m){var o=this,p=o.getViewModel(),n=o.down("dokterruangan-list");n.setListConfig({paging:true});if(m){o.loadRecord(m);n.load({RUANGAN:m.get("ID")});p.set("hideForm",true)}}},0,["workspace-dokterruangan"],["component","box","container","panel","form","com-form","workspace-dokterruangan"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-dokterruangan":true},["widget.workspace-dokterruangan"],0,[master.dokterruangan,"Workspace"],0));(Ext.cmd.derive("master.dokterruangan.WorkspaceController",Ext.app.ViewController,{onAddDokterRuangan:function(s){var p=this,u=p.getView(),q=p.getViewModel(),t=p.getReferences(),w=q.get("record"),v=q.get("hideForm");q.set("hideForm",!v);t.formdokterruangan.createRecord({RUANGAN:w.get("ID"),STATUS:1});t.formdokterruangan.focus("DOKTER")},onSuccess:function(){var o=this,s=o.getView(),p=o.getViewModel(),q=o.getReferences(),n=p.get("record");q.dokterruanganlist.reload();q.formdokterruangan.createRecord({RUANGAN:n.get("ID"),STATUS:1})}},0,0,0,0,["controller.workspace-dokterruangan"],0,[master.dokterruangan,"WorkspaceController"],0));(Ext.cmd.derive("master.doktersmf.Form",Ext.form.Panel,{controller:"form-doktersmf",border:false,items:[{layout:"border",layout:{type:"hbox",align:"stretch"},border:false,defaults:{margin:"2 2 3 1",flex:1},bodyPadding:2,items:[{xtype:"combo",bodyPadding:2,name:"DOKTER",bind:{store:"{dokterstore}"},displayField:"NAMA",valueField:"ID",flex:4,margin:"2 2 2 2",emptyText:"[ PILIH DOKTER SMF ]",allowBlank:false,tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="x-boundlist-item">','<div style="height: 17px;"><strong>{NAMA}</strong></div>','<div style="font-size: 12px;">{NIP}</div>',"</div>","</tpl>"),displayTpl:Ext.create("Ext.XTemplate",'<tpl for=".">',"{NIP} - {NAMA}","</tpl>")},{xtype:"button",text:"ADD",flex:1,margin:"2 2 2 2",listeners:{click:"onSimpan"}}]}]},0,["form-doktersmf"],["component","box","container","panel","form","form-doktersmf"],{component:true,box:true,container:true,panel:true,form:true,"form-doktersmf":true},["widget.form-doktersmf"],0,[master.doktersmf,"Form"],0));(Ext.cmd.derive("master.doktersmf.FormController",Ext.app.ViewController,{onSimpan:function(n){var o=this,p=o.getView(),e=p.getForm().getValues();model=p.getRecord();if(p.getForm().isValid()){model.set(e);model.showError=true;model.animateTarget=n;model.scope=o;model.save({callback:function(l,g,f){if(g.hasException()||!f){}if(f){Ext.toast({html:"Data telah disimpan",headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"});p.fireEvent("success",l)}}})}}},0,0,0,0,["controller.form-doktersmf"],0,[master.doktersmf,"FormController"],0));(Ext.cmd.derive("master.doktersmf.List",Ext.grid.Panel,{controller:"doktersmf-list",flex:1,bind:{store:"{doktersmfstore}"},cls:"x-br-top",border:true,columns:[{xtype:"rownumberer",text:"No",align:"left",width:60},{text:"ID ",dataIndex:"ID",flex:1},{text:"DOKTER SMF",dataIndex:"DOKTER SMF",flex:4,renderer:"onDokterSmfRender"},{xtype:"checkcolumn",header:"STATUS",dataIndex:"STATUS",width:90,listeners:{checkchange:"onChange"}}],dockedItems:[{xtype:"pagingtoolbar",dock:"bottom",displayInfo:true,items:["-",{},{},{xtype:"textfield",cls:"x-text-border",iconCls:"iconSearch",autoFocus:true,emptyText:"Cari berdasarkan DOKTER SMF",reference:"cari_doktersmf",enableKeyEvents:true,width:275,triggers:{clear:{weight:0,cls:"x-form-clear-trigger",hidden:true,handler:"onClearClick"},search:{weight:1,cls:"x-form-search-trigger",handler:"onSearchClick"}},listeners:{}}]}]},0,["doktersmf-list"],["component","box","container","panel","tablepanel","gridpanel","grid","doktersmf-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"doktersmf-list":true},["widget.doktersmf-list"],0,[master.doktersmf,"List"],0));(Ext.cmd.derive("master.doktersmf.ListController",Ext.app.ViewController,{onSelectDokterSmf:function(g,l){},addDokterSmfClick:function(){},onRemoveClick:function(n,m){var l=this;l.getStore("doktersmfgridstore").removeAt(m)},onDokterSmfRender:function(A,w,f,y,g,x){var v=this,e=v.getViewModel(),z=e.get("doktersmfcombostore");return this.getDeskripsi(z,f.get("DOKTER SMF"))},getDeskripsi:function(n,m){var l=n.findRecord("ID",m,0,false,true);if(l==null){return m}return l.get("DESKRIPSI")}},0,0,0,0,["controller.doktersmf-list"],0,[master.doktersmf,"ListController"],0));(Ext.cmd.derive("master.doktersmf.ViewModel",Ext.app.ViewModel,{formulas:{init:function(f){f("doktersmfcombostore").load()}},stores:{doktersmfcombostore:{type:"referensi-store",queryParams:{JENIS:26,STATUS:1}},doktersmfstore:{type:"dokter-smf-store"},dokterstore:{type:"dokter-store"}}},0,0,0,0,["viewmodel.doktersmfmodel"],0,[master.doktersmf,"ViewModel"],0));(Ext.cmd.derive("master.doktersmf.Workspace",Ext.form.Panel,{controller:"workspace-doktersmf",viewModel:{type:"doktersmfmodel",data:{hideForm:true}},border:false,layout:"border",initComponent:function(){var f=this;f.items=[{region:"north",layout:"hbox",border:false,header:{items:[{xtype:"button",margin:2,height:32,cls:"x-fa fa-plus hide-icon-tools",tooltip:"Tambah Dokter Smf",listeners:{click:"onAddDokterSmf"}}]},bodyPadding:2,items:[{xtype:"form-doktersmf",width:"40%",reference:"formdoktersmf",bind:{hidden:"{hideForm}"},listeners:{success:"onSuccess"}}]},{region:"center",xtype:"doktersmf-list",border:false,reference:"doktersmflist"}];f.callParent(arguments);f.down("form-doktersmf").setHidden(true)},load:function(g){var l=this.getViewModel().get("doktersmfstore");if(g){if(l){l.queryParams={RUANGAN:g.get("ID")};l.removeAll();l.load()}}}},0,["workspace-doktersmf"],["component","box","container","panel","form","workspace-doktersmf"],{component:true,box:true,container:true,panel:true,form:true,"workspace-doktersmf":true},["widget.workspace-doktersmf"],0,[master.doktersmf,"Workspace"],0));(Ext.cmd.derive("master.doktersmf.WorkspaceController",Ext.app.ViewController,{onAddDokterSmf:function(l){var g=this;vm=g.getViewModel(),a=vm.get("hideForm");doktersmf=vm.get("doktersmfstore"),refs=g.getReferences(),model=Ext.create("data.model.DokterSmf",{});model.set(doktersmf.getQueryParams());model.set("STATUS",1);if(a==true){vm.set("hideForm",false)}else{vm.set("hideForm",true)}refs.formdoktersmf.loadRecord(model)},onSuccess:function(){var o=this,p=o.getView(),n=o.getViewModel(),e=o.getReferences();p.getForm().reset();e.doktersmflist.getStore().load();n.set("hideForm",true)}},0,0,0,0,["controller.workspace-doktersmf"],0,[master.doktersmf,"WorkspaceController"],0));(Ext.cmd.derive("master.grouptindakanlab.Detil",com.Form,{controller:"grouptindakanlab-detil",viewModel:{data:{record:undefined,uisAktif:["soft-black","soft-green"]},formulas:{getAktifStatusText:function(f){return f("record.STATUS")==1?"Aktif":""},getNonAktifStatusText:function(f){return f("record.STATUS")==0?"Non Aktif":""}}},bind:{title:"{record.DESKRIPSI}"},header:{iconCls:"x-fa fa-list",margin:0,padding:"5 10 5 10",height:50,layout:{type:"hbox",align:"stretch"},items:[{xtype:"fieldcontainer",defaultType:"button",border:false,layout:"hbox",defaults:{width:80,padding:5,handler:"onStatus"},border:false,items:[{reference:"btnAktif",tooltip:"Aktifkan",bind:{text:"{getAktifStatusText}"},status:1,handler:"onStatus"},{reference:"btnNonAktif",tooltip:"Non Aktifkan",bind:{text:"{getNonAktifStatusText}"},status:0,handler:"onStatus"}]}]},loadRecord:function(g){var u=this,e=u.getForm().loadRecord(g),t=u.getViewModel(),f=t.get("uisAktif"),s=u.getController().getReferences();if(g){t.set("record",g);u.setUiButtons(g.get("STATUS"))}return e},setUiButtons:function(q){var f=this,e=f.getViewModel(),p=e.get("uisAktif"),s=f.getController().getReferences();s.btnAktif.setUI(p[q==1?1:0]);s.btnNonAktif.setUI(p[q==0?1:0])}},0,["grouptindakanlab-detil"],["component","box","container","panel","form","com-form","grouptindakanlab-detil"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"grouptindakanlab-detil":true},["widget.grouptindakanlab-detil"],0,[master.grouptindakanlab,"Detil"],0));(Ext.cmd.derive("master.grouptindakanlab.DetilController",Ext.app.ViewController,{onStatus:function(e){var o="Anda Yakin Ingin"+(e.status==1?"":"Non")+"Aktifkan group tindakan lab Ini ?",n=this.getViewModel().get("record"),p=this.getView();Ext.Msg.show({message:o,title:"Perhatian",ui:"panel-red",buttons:Ext.Msg.YESNO,headerPosition:"left",buttonAlign:"left",icon:Ext.Msg.QUESTION,animateTarget:e,fn:function(f){if(f==="yes"){var g=n.get("STATUS");n.set("STATUS",e.status);n.showError=true;n.animateTarget=e;n.scope=this;n.save({callback:function(m,l,s){if(l.hasException()||!s){n.set("STATUS",g);p.setUiButtons(g)}if(s){p.setUiButtons(e.status);p.notifyMessage((e.status==1?"":"Non ")+"Aktif group tindakan lab berhasil")}}})}}})}},0,0,0,0,["controller.grouptindakanlab-detil"],0,[master.grouptindakanlab,"DetilController"],0));(Ext.cmd.derive("master.grouptindakanlab.Form",com.Form,{controller:"form-grouptindakanlab",bodyPadding:10,items:[{xtype:"textfield",name:"DESKRIPSI",labelWidth:100,width:"100%",fieldLabel:"Deskripsi",allowBlank:false}],buttons:[{text:"Simpan",handler:"onSimpan"}]},0,["form-grouptindakanlab"],["component","box","container","panel","form","com-form","form-grouptindakanlab"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-grouptindakanlab":true},["widget.form-grouptindakanlab"],0,[master.grouptindakanlab,"Form"],0));(Ext.cmd.derive("master.grouptindakanlab.FormController",Ext.app.ViewController,{init:function(){var g=this,l=g.getView();l.down("[name=DESKRIPSI]").focus(false,1000)},onSimpan:function(e){var f=this,p=f.getView(),q=p.getForm().getValues(),s=f.getViewModel().get("record");if(p.getForm().isValid()){s.set(q);s.showError=true;s.animateTarget=e;s.scope=f;s.save({callback:function(g,m,l){if(l){p.notifyMessage("Data telah tersimpan");p.fireEvent("success",l)}}})}}},0,0,0,0,["controller.form-grouptindakanlab"],0,[master.grouptindakanlab,"FormController"],0));(Ext.cmd.derive("master.grouptindakanlab.List",com.Grid,{controller:"list-group-tindakan-lab",viewModel:{stores:{store:{type:"group-tindakan-lab-store"}}},layout:"fit",initComponent:function(){var f=this;f.columns=[{xtype:"rownumberer",text:"No",align:"left",width:40},{text:"Tindakan",dataIndex:"TINDAKAN",renderer:"onRenderNama",flex:2},{xtype:"checkcolumn",header:"STATUS",dataIndex:"STATUS",width:90,listeners:{checkchange:"onChange"}}];com.Grid.prototype.initComponent.apply(this,arguments);f.setGridConfig({paging:true})},load:function(m){var n=this,o=n.getViewModel(),p=o.getStore("store");if(m){p.queryParams={GROUP_LAB:m};p.removeAll();p.load()}}},0,["list-group-tindakan-lab"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","list-group-tindakan-lab"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"list-group-tindakan-lab":true},["widget.list-group-tindakan-lab"],0,[master.grouptindakanlab,"List"],0));(Ext.cmd.derive("master.grouptindakanlab.ListController",Ext.app.ViewController,{onChange:function(t,f,w){var v=this,u=v.getViewModel(),g=u.get("store"),e=g.getAt(f);console.log(e);data=e.get("GROUP_LAB")+"-"+e.get("TINDAKAN");console.log(data);e.setId(data);e.set("STATUS",w?1:0);e.scope=this;e.save({callback:function(m,l,n){if(n){v.getView().notifyMessage("Status di"+(w==true?"Aktifkan":"NonAktifkan "))}}})},onRenderNama:function(v,e,w,u,x,g){var y=w.get("REFERENSI"),t=y?(y.TINDAKAN?y.TINDAKAN.NAMA:""):"";return t}},0,0,0,0,["controller.list-group-tindakan-lab"],0,[master.grouptindakanlab,"ListController"],0));(Ext.cmd.derive("master.grouptindakanlab.Tree",Ext.tree.Panel,{controller:"group-tindakan-lab-tree",autoScroll:true,viewModel:{stores:{store:{type:"tree-grouplab-store",queryParams:{TREE:1}}}},border:false,scrollable:true,rootVisible:false,bind:{store:"{store}"},setParams:function(m){var l=this,n=l.getViewModel().get("store");if(n){n.queryParams=Ext.apply(n.queryParams,m)}},loadStore:function(){var g=this,l=g.getViewModel().get("store");if(l){l.removeAll();l.load()}}},0,["group-tindakan-lab-tree"],["component","box","container","panel","tablepanel","treepanel","group-tindakan-lab-tree"],{component:true,box:true,container:true,panel:true,tablepanel:true,treepanel:true,"group-tindakan-lab-tree":true},["widget.group-tindakan-lab-tree"],0,[master.grouptindakanlab,"Tree"],0));(Ext.cmd.derive("master.grouptindakanlab.TreeController",Ext.app.ViewController,{init:function(){var o=this,p=o.getView(),n=o.getViewModel(),e=n.get("store");e.on("load",function(g,f){if(f.length==0){e.removeAll()}p.expandAll();if(f.length>0){p.setSelection(f[0])}})}},0,0,0,0,["controller.group-tindakan-lab-tree"],0,[master.grouptindakanlab,"TreeController"],0));(Ext.cmd.derive("master.grouptindakanlab.Workspace",com.Form,{controller:"workspace-grouptindakanlab",viewModel:{data:{group:undefined}},layout:"border",initComponent:function(){var f=this;f.items=[{region:"west",iconCls:"x-fa fa-align-left",title:"Daftar Tindakan",xtype:"tindakan-list",ui:"panel-cyan",showSearch:true,collapsible:true,flex:0.7,reference:"tindakanlist",hideHeaders:true,split:true,multiSelect:true,viewConfig:{plugins:{ptype:"gridviewdragdrop",enableDrop:false},copy:true},listeners:{itemdblclick:"onItemDblClickTindakan"}},{region:"center",xtype:"container",cls:"x-br-right",layout:{type:"vbox",align:"stretch"},items:[{xtype:"grouptindakanlab-detil",ui:"panel-cyan",height:37},{xtype:"list-group-tindakan-lab",flex:1,reference:"listtindakangroup",viewConfig:{plugins:{ptype:"gridviewdragdrop",enableDrag:false},listeners:{scope:f.getController(),drop:"onDropTindakan"}}}]},{region:"east",title:"Group",iconCls:"x-fa fa-outdent",flex:0.5,ui:"panel-cyan",split:true,header:{height:37},collapsible:true,xtype:"group-tindakan-lab-tree",border:false,tools:[{xtype:"tool",cls:"x-fa fa-refresh hide-icon-tools",width:20,height:20,tooltip:"Reload Group Lab",reference:"load_grouplab",listeners:{scope:f.getController(),click:"onReload"}},{xtype:"tool",cls:"x-fa fa-plus hide-icon-tools",width:20,height:20,tooltip:"Tambah Group",reference:"tambah_group",listeners:{scope:f.getController(),click:"onAddGroup"}}],listeners:{select:"onGroupSelect"}}];com.Form.prototype.initComponent.apply(this,arguments)},load:function(g){var l=this.down("tindakan-list");l.loadStore({start:0,limit:3000,JENIS_KUNJUNGAN:4,STATUS:1})}},0,["workspace-group-tindakan-lab"],["component","box","container","panel","form","com-form","workspace-group-tindakan-lab"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-group-tindakan-lab":true},["widget.workspace-group-tindakan-lab"],0,[master.grouptindakanlab,"Workspace"],0));(Ext.cmd.derive("master.grouptindakanlab.WorkspaceController",Ext.app.ViewController,{onAddGroup:function(g){var u=this,s=u.getView(),e=Ext.create("data.model.GroupLabTree",{}),q=s.down("group-tindakan-lab-tree"),t=s.down("group-tindakan-lab-tree").getSelection();if(t.length>0){e.set("PARENT",{ID:t[0].get("ID"),JENIS:t[0].get("JENIS")});e.set("JENIS",t[0].get("JENIS")+1);e.set("STATUS",1)}s.openDialog("",true,"30%",30,{xtype:"form-grouptindakanlab",viewModel:{data:{record:e}},iconCls:"x-fa fa-edit",title:"Paket Baru",showCloseButton:true,ui:"panel-cyan"},function(f,l){var m=l.down("form-grouptindakanlab");m.on("success",function(){q.getStore().load();l.close()})},g)},onReload:function(){var m=this,l=m.getView(),n=l.down("group-tindakan-lab-tree");n.getStore().load()},onGroupSelect:function(x,B,E,l,C){var D=this,f=D.getView(),z=D.getViewModel(),y=f.down("group-tindakan-lab-tree"),A=y.getController().getReferences().tambah_group,g=B.get("JENIS");if(A){A.setVisible(g!=2)}z.set("group",B.get("ID"));f.down("grouptindakanlab-detil").loadRecord(Ext.create("data.model.GroupLab",B.data));f.down("list-group-tindakan-lab").load(B.get("ID"))},onItemDblClickTindakan:function(p,n){var m=this,o=m.getViewModel();n=Ext.create("data.model.GroupTindakanLab",{GROUP_LAB:o.get("group"),TINDAKAN:n.get("ID"),STATUS:1});m.simpanGroupTindakan(n,o.get("group"))},onDropTindakan:function(e,g,f,z){var C=this,y=C.getViewModel(),w=y.get("group"),B=Ext.Array.clone(g.records),x=w,A=0;g.records=[];Ext.Array.each(B,function(l){l=Ext.create("data.model.GroupTindakanLab",{GROUP_LAB:x,TINDAKAN:l.get("ID"),STATUS:1});A++;C.simpanGroupTindakan(l,x,false,function(m,n){g.records.push(l);if(A==B.length){C.loadGroupTindakan(x)}})})},privates:{simpanGroupTindakan:function(s,e,q,f){var t=this,q=q!=undefined?q:true,u=s.get("ID");s.showError=true;s.save({callback:function(n,m,o){if(o){var l=n.get("REFERENSI"),g=l?(l.TINDAKAN?l.TINDAKAN.NAMA:""):"";t.getView().notifyMessage((!Ext.isNumeric(u)?"Data <b>"+g+"</b>":"Data")+" telah tersimpan");if(q){t.loadGroupTindakan(e)}}if(Ext.isFunction(f)){f(n,o)}}})},loadGroupTindakan:function(l){var m=this,n=m.getView();n.down("list-group-tindakan-lab").load(l)}}},0,0,0,0,["controller.workspace-grouptindakanlab"],0,[master.grouptindakanlab,"WorkspaceController"],0));(Ext.cmd.derive("master.inventory.barang.Form",com.Form,{controller:"form-barang",viewModel:{stores:{satuankategoristore:{type:"kategori-store",queryParams:{JENIS:1,STATUS:1},autoLoad:true},jeniskategoristore:{type:"kategori-store",queryParams:{JENIS:2,STATUS:1}},kategoristore:{type:"kategori-store",queryParams:{JENIS:3,STATUS:1}},jenispenggunaanstore:{type:"referensi-store",queryParams:{JENIS:55,STATUS:1},autoLoad:true},gologan:Ext.create("Ext.data.Store",{fields:["ID","DESKRIPSI"],data:[{ID:1,DESKRIPSI:"Generik"},{ID:2,DESKRIPSI:"Non Generik"}]}),formularium:Ext.create("Ext.data.Store",{fields:["ID","DESKRIPSI"],data:[{ID:1,DESKRIPSI:"FORMULARIUM"},{ID:2,DESKRIPSI:"Non FORMULARIUM"}]})}},border:false,layout:{type:"vbox"},flex:1,border:false,defaults:{margin:"5 5 0 5",width:"100%"},initComponent:function(){this.items=[{layout:"hbox",border:false,defaults:{flex:3,margin:"1 1 1 1"},defaultType:"textfield",items:[{name:"KATEGORI",reference:"hasil",hidden:true},{name:"NAMA",allowBlank:false,reference:"namabarang",emptyText:"[ NAMA OBAT ]"},{xtype:"numberfield",name:"STOK",flex:1,hideTrigger:true,emptyText:"[ STOK MINIMAL ]"}]},{xtype:"combo",name:"GENERIK",queryMode:"local",bind:{store:"{generikstore}"},emptyText:"[ NAMA GENERIK ]",displayField:"DESKRIPSI",valueField:"ID"},{xtype:"referensi-combo",name:"MERK",params:{JENIS:39},firstLoad:true,allowBlank:false,editable:false,emptyText:"[ MEREK]",displayField:"DESKRIPSI",valueField:"ID"},{layout:"hbox",border:false,defaults:{margin:"1 1 1 1",flex:1},defaultType:"combo",items:[{name:"SATUAN_JENIS",queryMode:"local",bind:{store:"{satuankategoristore}"},displayField:"NAMA",reference:"satuan",valueField:"ID",emptyText:"[ JENIS INVENTORY ]",listeners:{select:"onSelectSBarang",blur:"onBlurSBarang"}},{name:"JENIS",queryMode:"local",bind:{store:"{jeniskategoristore}"},displayField:"NAMA",reference:"jeniskategori",valueField:"ID",validateOnBlur:true,enterFocus:true,typeAhead:true,forceSelection:true,emptyText:"[ JENIS KATEGORI BARANG ]",listeners:{select:"onSelectJenis",blur:"onBlurJenis"}}]},{xtype:"combo",name:"RINCIAN_JENIS",queryMode:"local",reference:"kategori",emptyText:"[ KATEGORI BARANG ]",bind:{store:"{kategoristore}"},displayField:"NAMA",valueField:"ID",listeners:{select:"onSelectKategori"}},{xtype:"combo",name:"JENIS_PENGGUNAAN_OBAT",queryMode:"local",emptyText:"[ JENIS PENGGUNAAN OBAT ]",bind:{store:"{jenispenggunaanstore}"},displayField:"DESKRIPSI",valueField:"ID"},{layout:"hbox",border:false,defaults:{margin:"1 10 1 1"},items:[{xtype:"combo",name:"SATUAN",allowBlank:false,queryMode:"local",flex:1,reference:"combosatuan",bind:{store:"{satuantore}"},displayField:"NAMA",valueField:"ID",emptyText:"[ SATUAN OBAT ]",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="x-boundlist-item">','<div style="height: 30px;"><strong>{NAMA} </strong> ( {DESKRIPSI} )</div>',"</div>","</tpl>"),displayTpl:Ext.create("Ext.XTemplate",'<tpl for=".">',"{NAMA} - {DESKRIPSI} ","</tpl>")},{xtype:"button",iconCls:"x-fa fa-plus",ui:"soft-black",tooltip:"Tambah Satuan Barang",reference:"tambahsatuan",listeners:{click:"onTambahSatuan"}}]},{xtype:"penyedia-combo",name:"PENYEDIA"},{xtype:"combo",name:"JENIS_GENERIK",queryMode:"local",bind:{store:"{gologan}"},displayField:"DESKRIPSI",reference:"jenisgenerik",valueField:"ID",emptyText:"[ JENIS GENERIK ]"},{xtype:"combo",name:"FORMULARIUM",queryMode:"local",bind:{store:"{formularium}"},displayField:"DESKRIPSI",reference:"jenisformularium",valueField:"ID",emptyText:"[ FORMULARIUM ]"}];this.buttons=[{text:"Simpan",ui:"soft-green",iconCls:"x-fa fa-save",listeners:{click:"onSimpan"}},{text:"Reset",ui:"soft-red",iconCls:"x-fa fa-times",listeners:{click:"onBatal"}}];com.Form.prototype.initComponent.apply(this,arguments)},loadData:function(F){var e=this,G=F.get("KATEGORI"),y=F.get("PENYEDIA"),D=e.down("[name = PENYEDIA]"),C=e.getViewModel(),B=e.getController(),g=B.getReferences(),z=C.get("satuankategoristore"),A=C.get("jeniskategoristore"),E=C.get("kategoristore"),f=false;if(!(y==null||y=="")){D.getStore().queryParams={QUERY:F.get("PENYEDIA")};D.getStore().load()}if(!(G==null||G=="")){G=G+"";if(z){if(z.getCount()>0){if(G.length>0&&z!=null){g.satuan.setValue(G.substring(0,1))}if(G.length>2&&A!=null){A.queryParams.ID=G.substring(0,3);A.load()}if(G.length>3&&E!=null){E.queryParams.ID=G.substring(0,5);E.load()}}}else{f=true}}else{f=true}if(f){A.removeAll();g.jeniskategori.select(null);E.removeAll();g.kategori.select(null)}return e.loadRecord(F)}},0,["form-barang"],["component","box","container","panel","form","com-form","form-barang"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-barang":true},["widget.form-barang"],0,[master.inventory.barang,"Form"],0));(Ext.cmd.derive("master.inventory.barang.FormController",Ext.app.ViewController,{init:function(){var u=this,t=u.getViewModel(),f=u.getReferences(),s=t.get("satuankategoristore"),g=t.get("jeniskategoristore"),e=t.get("kategoristore");s.on("load",function(){var l=f.hasil.getValue();if(l.length>0&&s!=null){f.satuan.setValue(l.substring(0,1))}g.removeAll();f.jeniskategori.select(null);e.removeAll();f.kategori.select(null);if(l.length>0&&g!=null){g.queryParams.ID=l.substring(0,1);g.load()}});g.on("load",function(){var l=f.hasil.getValue();if(l.length>2&&g!=null){f.jeniskategori.setValue(l.substring(0,3))}e.removeAll();f.kategori.select(null);if(l.length>2&&e!=null){e.queryParams.ID=l.substring(0,3);e.load()}});e.on("load",function(){var l=f.hasil.getValue();if(l.length>3){f.kategori.setValue(l)}})},onTambahSatuan:function(s){var f=this,q=f.getView(),e=f.getViewModel(),p=e.get("satuantore");refs=f.getReferences();q.openDialog("",true,"70%","65%",{xtype:"workspace-satuan",showCloseButton:true,ui:"panel-gray",iconCls:"x-fa fa-edit",title:"Input Satuan"},function(m,l){var g=l.down("workspace-satuan");g.load({});l.on("close",function(){refs.combosatuan.getStore().load()})},s)},onSelectSBarang:function(s,e){var u=this,t=u.getViewModel(),g=u.getReferences(),f=t.get("jeniskategoristore");if(e){g.jeniskategori.select(null);g.kategori.select(null);g.hasil.setValue(e.get("ID"));f.removeAll();f.queryParams.ID=e.get("ID");f.load()}},onSelectJenis:function(s,e){var u=this,t=u.getViewModel(),g=u.getReferences(),f=t.get("kategoristore");if(e){g.kategori.select(null);g.hasil.setValue(e.get("ID"));f.removeAll();f.queryParams.ID=e.get("ID");f.load()}},onSelectKategori:function(e,o){var n=this,p=n.getReferences();if(o){p.hasil.setValue(o.get("ID"))}},onBlurSBarang:function(l){var g=l.getSelection();if(g==null){this.removeStoreData(this.getReferences().jeniskategori,"jeniskategoristore");this.removeStoreData(this.getReferences().kategori,"kategoristore")}},onBlurJenis:function(l){var g=l.getSelection();if(g==null){this.removeStoreData(this.getReferences().kategori,"kategoristore")}},removeStoreData:function(m,l){var n=this;n.getViewModel().get(l).removeAll();m.select(null)},onSimpan:function(v){var e=this,f=e.getView(),w=e.getViewModel(),t=e.getReferences(),g=f.getForm().getValues(),u=f.getRecord();g.TANGGAL=f.getSysdate();if(f.getForm().isValid()){u.set(g);u.showError=true;u.animateTarget=v;u.scope=e;u.save({callback:function(m,l,n){if(l.hasException()||!n){}if(n){f.notifyMessage("Data Barang Telah Tersimpan");t.namabarang.setDisabled(false);f.fireEvent("success",m)}}})}},onBatal:function(n){var o=this,e=this.getReferences(),p=this.getView();e.namabarang.setDisabled(false);p.fireEvent("batal")}},0,0,0,0,["controller.form-barang"],0,[master.inventory.barang,"FormController"],0));(Ext.cmd.derive("master.inventory.barang.List",com.Grid,{controller:"barang-list",flex:1,viewModel:{stores:{store:{type:"barang-store"},storeCekRuangan:{type:"barang-ruangan-store",queryParams:{STATUS:1,CEKSTOK:"CEK",start:0,limit:1}}}},border:false,showSearch:false,reference:"master-obat",initComponent:function(){var f=this;if(f.showSearch){f.header={items:[{xtype:"search-field",cls:"x-text-border",autoFocus:true,emptyText:"Cari Nama Obat",flex:1,listeners:{search:"onsearch",clear:"onClear"}}]}}f.initColumns();f.dockedItems=[{xtype:"pagingtoolbar",bind:{store:"{store}"},dock:"bottom",displayInfo:true,items:["-",{},{},{xtype:"search-field",hidden:f.hideHeaders,cls:"x-text-border",autoFocus:true,emptyText:"Cari Nama Obat",flex:3,listeners:{search:"onsearch",clear:"onClear"}},{xtype:"combobox",reference:"statusbarang",emptyText:"[ Filter Status ]",store:Ext.create("Ext.data.Store",{fields:["value","desk"],data:[{value:"1",desk:"Aktif"},{value:"0",desk:"Tidak Aktif"}]}),queryMode:"local",displayField:"desk",flex:1,valueField:"value",listeners:{select:"onSelectStatus"}}]}];com.Grid.prototype.initComponent.apply(this,arguments)},privates:{initColumns:function(){var f=this;f.columns=[{xtype:"rownumberer",text:"No",align:"left",hidden:f.hideHeaders,width:40},{text:"NAMA BARANG",dataIndex:"NAMA",hidden:f.hideHeaders,flex:1},{text:"KATEGORI",dataIndex:"KATEGORI",flex:1,hidden:f.hideHeaders,renderer:"onKategoriRender"},{text:"SATUAN",dataIndex:"SATUAN",flex:1,hidden:f.hideHeaders,renderer:"onSatuanRender"},{text:"MERK",dataIndex:"MERK",flex:1,hidden:f.hideHeaders,renderer:"onMerkrender"},{text:"PENYEDIAN",dataIndex:"PENYEDIA",flex:1,hidden:f.hideHeaders,renderer:"onPenyediarender"},{text:"GENERIK",dataIndex:"GENERIK",flex:1,hidden:f.hideHeaders,renderer:"onGenerikrender"},{text:"JENIS PENGGUNAAN",dataIndex:"JENIS_PENGGUNAAN_OBAT",flex:1,hidden:f.hideHeaders,renderer:"onJenisPenggunaanrender"},{text:"STOK MINIMUM",dataIndex:"STOK",flex:1,hidden:f.hideHeaders},{xtype:"checkcolumn",header:"STATUS",hidden:f.hideHeaders,dataIndex:"STATUS",width:90,listeners:{checkchange:"onChange"}},{text:"#",align:"center",width:80,xtype:"widgetcolumn",hidden:f.hideHeaders,widget:{xtype:"button",padding:3,ui:"soft-blue",text:"Harga",listeners:{click:"onClickHarga"}}},{xtype:"templatecolumn",flex:1,hidden:!f.hideHeaders,tpl:'<div style="font-weight: bold; white-space:normal !important;">{NAMA} - {REFERENSI.KATEGORI.NAMA}  ({REFERENSI.SATUAN.NAMA})</div>'}]}},loadStore:function(m){var l=this,n=l.getViewModel().get("store");if(n){n.removeAll();n.queryParams=n.queryParams||{};if(m){n.queryParams=m}n.load()}},isCekStokAda:function(l){var m=this,n=m.getViewModel().get("storeCekRuangan");n.load(function(e,f,g){if(Ext.isArray(e)){l(e.length>0)}})}},0,["barang-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","barang-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"barang-list":true},["widget.barang-list"],0,[master.inventory.barang,"List"],0));(Ext.cmd.derive("master.inventory.barang.ListController",Ext.app.ViewController,{onChange:function(u,f,y){var x=this,v=x.getViewModel(),g=v.get("store"),w=v.get("storeCekRuangan"),e=g.getAt(f);w.queryParams.BARANG=e.get("ID");x.getView().isCekStokAda(function(l){if(l){x.getView().notifyMessage("Gagal NonAktifkan, Masih Ada Ruangan Yang Mempunyai Stok")}else{e.set("STATUS",y?1:0);e.scope=this;e.save({callback:function(n,m,o){if(o){x.getView().notifyMessage("Status di"+(y==true?"Aktifkan":"NonAktifkan"))}else{e.set("STATUS",y?0:1)}}})}})},onsearch:function(s,e){var u=this,f=u.getView(),t=u.getViewModel(),q=t.get("store");if(f.showSearch){q.queryParams={QUERY:e,STATUS:1,page:1,start:0}}else{q.queryParams={QUERY:e,page:1,start:0}}q.removeAll();q.load()},onSelectStatus:function(q,f){var e=this,s=e.getViewModel(),p=s.get("store");p.queryParams={QUERY:"",STATUS:f.get("value")};p.removeAll();p.load()},onClear:function(){var m=this,l=m.getViewModel(),n=l.get("store");delete n.queryParams.QUERY;delete n.queryParams.page;delete n.queryParams.start;n.removeAll();n.load()},onMerkrender:function(y,w,x,v,e,g){var u=x.get("REFERENSI"),f=u?(u.MERK?u.MERK.DESKRIPSI:""):"";return f},onGenerikrender:function(y,w,x,v,e,g){var u=x.get("REFERENSI"),f=u?(u.GENERIK?u.GENERIK.DESKRIPSI:""):"";return f},onPenyediarender:function(y,w,x,v,e,g){var u=x.get("REFERENSI"),f=u?(u.PENYEDIA?u.PENYEDIA.NAMA:""):"";return f},onJenisPenggunaanrender:function(y,w,x,v,e,g){var u=x.get("JENIS_PENGGUNAAN_OBAT");if(u==1){var f="Obat Dalam"}else{if(u==2){var f="Obat Luar"}else{var f=""}}return f},onKategoriRender:function(y,w,x,v,e,g){var u=x.get("REFERENSI"),f=u?(u.KATEGORI?u.KATEGORI.NAMA:""):"";return f},onSatuanRender:function(y,w,x,v,e,g){var u=x.get("REFERENSI"),f=u?(u.SATUAN?u.SATUAN.DESKRIPSI:""):"";return f},onOlehRender:function(y,w,x,v,e,g){var u=x.get("REFERENSI"),f=u?(u.SATUAN?u.SATUAN.OLEH:""):"";return f},onClickHarga:function(u){var v=this,s=v.getView(),w=u.getWidgetRecord(),f=v.getViewModel(),t=w.get("ID");var q=w.get("NAMA");s.openWindow({title:"Tarif Tindakan",iconCls:"x-fa fa-money",ui:"danger-blue",header:{margin:0,padding:"10 15 10 15"},closable:true,maximized:true,constrain:s,layout:"border",border:false,items:[{region:"north",bodyPadding:5,html:"<h2> "+q+" </h2><hr>"},{region:"center",bodyPadding:5,flex:1,xtype:"hargabarang-workspace"}]},function(g,e){e.down("hargabarang-workspace").load(w.get("ID"))})}},0,0,0,0,["controller.barang-list"],0,[master.inventory.barang,"ListController"],0));(Ext.cmd.derive("master.inventory.barang.ViewModel",Ext.app.ViewModel,{stores:{merekstore:{type:"referensi-store",queryParams:{JENIS:39,STATUS:1}},penyediatore:{type:"master-penyedia-store",queryParams:{STATUS:1}},satuantore:{type:"satuan-store",queryParams:{STATUS:1}},generikstore:{type:"referensi-store",queryParams:{JENIS:42,STATUS:1}},listbarangstore:{type:"barang-store"}}},0,0,0,0,["viewmodel.barang-model"],0,[master.inventory.barang,"ViewModel"],0));(Ext.cmd.derive("master.inventory.barang.Workspace",com.Form,{controller:"workspace-barang",viewModel:{type:"barang-model"},layout:"border",bodyPadding:2,defaults:{border:false,margin:"2 2 2 2"},initComponent:function(){var f=this;f.items=[{region:"center",ui:"panel-green",title:"List Barang",iconCls:"x-fa fa-list",xtype:"barang-list",flex:2,reference:"listmasterobat",hideHeaders:false,listeners:{select:"onSelect"}},{region:"east",flex:1,ui:"panel-green",reference:"formbarang",xtype:"form-barang",title:"TAMBAH OBAT BARU",collapsed:true,collapsible:true,split:true,listeners:{batal:"onBatal",success:"onSuccess"}}];f.callParent(arguments)},load:function(g){var l=this.down("barang-list");formbarang=this.down("form-barang");vm=this.getViewModel();b=Ext.create("data.model.Barang",{KATEGORI:"",STATUS:1});formbarang.loadData(b);l.loadStore(g);vm.get("merekstore").load();vm.get("penyediatore").load();vm.get("satuantore").load();vm.get("generikstore").load();vm.get("listbarangstore").load()}},0,["workspace-barang"],["component","box","container","panel","form","com-form","workspace-barang"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-barang":true},["widget.workspace-barang"],0,[master.inventory.barang,"Workspace"],0));(Ext.cmd.derive("master.inventory.barang.WorkspaceController",Ext.app.ViewController,{onSelect:function(s,f,p){var e=this,q=e.getReferences();q.formbarang.setCollapsed(false);q.formbarang.refs.namabarang.setDisabled(true);q.formbarang.loadData(f);q.formbarang.loadRecord(f)},confForm:function(){var l=this.getReferences(),n=this.getView(),m=Ext.create("data.model.Barang",{KATEGORI:"",STATUS:1});l.formbarang.reset();l.formbarang.loadData(m)},onBatal:function(){this.confForm()},onSuccess:function(){var f=this.getReferences();this.confForm();f.listmasterobat.getStore().load()}},0,0,0,0,["controller.workspace-barang"],0,[master.inventory.barang,"WorkspaceController"],0));(Ext.cmd.derive("master.inventory.barang.hargabarang.Form",com.Form,{controller:"hargabarang-form",viewModel:{data:{temp:undefined}},model:"data.model.HargaBarang",layout:"fit",border:false,fieldDefaults:{labelAlign:"top"},initComponent:function(){var f=this;f.items=[{flex:1,layout:{type:"vbox",align:"stretch"},title:"FORM",iconCls:"x-fa fa-file-o",border:false,items:[{layout:"hbox",defaults:{flex:1,margin:"2 2 2 2",bind:{readOnly:"{!formConfig.viewOnly}"},border:false},bodyPadding:10,border:false,items:[{xtype:"numberfield",hideTrigger:true,reference:"hargabeli",fieldLabel:"HARGA BELI",name:"HARGA_BELI",bind:{value:"{record.HARGA_BELI}"}},{xtype:"numberfield",hideTrigger:true,reference:"hargajual",fieldLabel:"HARGA JUAL",name:"HARGA_JUAL",bind:{value:"{record.HARGA_JUAL}"}}]},{layout:"hbox",defaults:{flex:1,margin:"2 2 2 2",border:false,bind:{readOnly:"{!formConfig.viewOnly}"}},bodyPadding:10,border:false,items:[{xtype:"numberfield",hideTrigger:true,reference:"ppn",fieldLabel:"PPN",name:"PPN",bind:{value:"{record.PPN}"}},{xtype:"datefield",fieldLabel:"MASA BERLAKU",format:"Y-m-d",name:"MASA_BERLAKU",bind:{value:"{record.MASA_BERLAKU}"}}]}],buttons:[{text:"Simpan",ui:"soft-blue",iconCls:"x-fa fa-save",handler:"onSimpan",bind:{hidden:"{formConfig.simpan}"},tooltip:{text:"Simpan",mouseOffset:[0,-75]}},{text:"Reset",ui:"soft-red",iconCls:"x-fa fa-refresh",handler:"onReset",bind:{hidden:"{formConfig.simpan}"},tooltip:{text:"Reset",mouseOffset:[0,-75]}},{text:"Ganti Harga",ui:"soft-green",iconCls:"x-fa fa-history",handler:"onGanti",bind:{hidden:"{!formConfig.simpan}"},tooltip:{text:"Ganti Harga",mouseOffset:[0,-75]}}]}];com.Form.prototype.initComponent.apply(this,arguments)}},0,["hargabarang-form"],["component","box","container","panel","form","com-form","hargabarang-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"hargabarang-form":true},["widget.hargabarang-form"],0,[master.inventory.barang.hargabarang,"Form"],0));(Ext.cmd.derive("master.inventory.barang.hargabarang.FormController",Ext.app.ViewController,{onReset:function(){var n=this,p=n.getView(),o=n.getViewModel().get("temp"),m=p.getRecord();if(o){obj={BARANG:o.get("BARANG"),STATUS:1,TANGGAL:p.getSysdate()}}else{obj={BARANG:m.get("BARANG"),STATUS:1,TANGGAL:p.getSysdate()}}p.getForm().reset();p.createRecord(obj)},onSimpan:function(o){var n=this,q=n.getView(),s=q.getRecord(),p=n.getViewModel().get("temp");if(p){p.set("STATUS",0);p.animateTarget=o;p.scope=n;p.showError=true;p.save({callback:function(e,g,f){if(f){q.save(o,{},function(l,u,m){if(m){n.getViewModel().set("temp",undefined)}})}}})}else{q.save(o)}},onGanti:function(p){var u=this,s=u.getView(),o=u.getViewModel(),t=s.getRecord(),q={success:"Data harga barang telah terganti",failed:"Gagal dalam menganti harga barang"};Ext.Msg.show({title:"Konfirmasi",message:"Apakah anda ingin mengganti harga barang?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:function(e){if(e=="yes"){o.set("temp",Ext.create("data.model.HargaBarang",t.data));s.setFormConfig({viewOnly:true,simpan:false});u.onReset()}}})}},0,0,0,0,["controller.hargabarang-form"],0,[master.inventory.barang.hargabarang,"FormController"],0));(Ext.cmd.derive("master.inventory.barang.hargabarang.List",com.Grid,{viewModel:{stores:{store:{type:"harga-barang-store"}}},cls:"x-br-top",border:true,reference:"master-negara",initComponent:function(){var f=this;f.columns=[{xtype:"rownumberer",text:"No",align:"left",width:70},{xtype:"numbercolumn",text:"HARGA JUAL ",dataIndex:"HARGA_JUAL",flex:1,format:"0,00"},{xtype:"numbercolumn",text:"HARGA BELI ",dataIndex:"HARGA_BELI",flex:1,format:"0,00"},{text:"PPN ",dataIndex:"PPN",flex:1},{xtype:"datecolumn",text:"MASA BERLAKU ",dataIndex:"MASA_BERLAKU",flex:1}];com.Grid.prototype.initComponent.apply(this,arguments)}},0,["hargabarang-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","hargabarang-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"hargabarang-list":true},["widget.hargabarang-list"],0,[master.inventory.barang.hargabarang,"List"],0));(Ext.cmd.derive("master.inventory.barang.hargabarang.Workspace",com.Tab,{controller:"harga-barang-tab",viewModel:{stores:{store:{type:"harga-barang-store"}}},defaults:{flex:1,bodyPadding:5},layout:"fit",ui:"header-tab",initComponent:function(){this.items=[{title:"HARGA BARANG ",xtype:"hargabarang-form",layout:"fit",reference:"hargabarangform",history:false,listeners:{reload:"onReload",save:"onSuccess"}},{title:"HISTORY",xtype:"hargabarang-list",reference:"historyharga"}];com.Tab.prototype.initComponent.apply(this,arguments)},load:function(l){var n=this.getViewModel().get("store"),m=this.down("hargabarang-form");list=this.down("hargabarang-list");if(l){n.queryParams={BARANG:l,STATUS:1},n.load({callback:function(e,p,g){if(g){var f=e[0].get("STATUS")==1;m.setFormConfig({viewOnly:!f,simpan:f});m.loadRecord(e[0])}else{m.setFormConfig({viewOnly:!f,simpan:false});m.createRecord({BARANG:l,STATUS:1,TANGGAL:m.getSysdate()})}}});list.setGridConfig({paging:true});list.load({BARANG:l,STATUS:0})}}},0,["hargabarang-workspace"],["component","box","container","panel","tabpanel","com-tab","hargabarang-workspace"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"hargabarang-workspace":true},["widget.hargabarang-workspace"],0,[master.inventory.barang.hargabarang,"Workspace"],0));(Ext.cmd.derive("master.inventory.barang.hargabarang.WorkspaceController",Ext.app.ViewController,{onSuccess:function(l){var m=this,n=m.getView();if(l){n.load(l.get("BARANG"))}}},0,0,0,0,["controller.harga-barang-tab"],0,[master.inventory.barang.hargabarang,"WorkspaceController"],0));(Ext.cmd.derive("master.inventory.groupfilter.Combo",com.Combo,{viewModel:{stores:{store:{type:"referensi-store",autoLoad:true}}},bind:{store:"{store}"},name:"GRUP_FILTER",queryMode:"local",params:{JENIS:79},emptyText:"[ Grup filter ]",displayField:"DESKRIPSI",valueField:"ID",listeners:{select:"onSelectGroupFIlter"}},0,["groupfilter-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","groupfilter-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"groupfilter-combo":true},["widget.groupfilter-combo"],0,[master.inventory.groupfilter,"Combo"],0));(Ext.cmd.derive("master.inventory.kategori.Combo",com.Combo,{viewModel:{stores:{store:{type:"kategori-store",autoLoad:true,params:{STATUS:1,JENIS:3}}}},bind:{store:"{store}"},emptyText:"[ Masukkan Kategori Barang ]",queryMode:"local",displayField:"NAMA",valueField:"ID",allowBlank:false,typeAhead:true,forceSelection:true,validateOnBlur:true},0,["kategori-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","kategori-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"kategori-combo":true},["widget.kategori-combo"],0,[master.inventory.kategori,"Combo"],0));(Ext.cmd.derive("master.inventory.kategori.ComboSelection",Ext.form.Panel,{controller:"kategori-selection",viewModel:{stores:{kategoristore1:{type:"kategori-store",queryParams:{JENIS:1,STATUS:1},autoLoad:true},kategoristore2:{type:"kategori-store",queryParams:{JENIS:2,STATUS:1}},kategoristore3:{type:"kategori-store",queryParams:{JENIS:3,STATUS:1}}}},bodyPadding:5,layout:{type:"vbox",align:"stretch"},defaultType:"fieldcontainer",defaults:{margin:"0 0 2 0 ",layout:{type:"hbox",align:"stretch"}},ruanganSelected:false,items:[{xtype:"combobox",margin:"0 2 2 0",padding:0,labelAlign:"top",enterFocus:true,flex:1,forceSelection:true,name:"JENIS_INVENTORY",emptyText:"[ Pilih Jenis Inventory]",queryMode:"local",typeAhead:true,reference:"instalasi",displayField:"NAMA",valueField:"ID",allowBlank:false,bind:{store:"{kategoristore1}"},listeners:{specialkey:"onFocusEnter",select:"onSelectedJenisInventory",blur:"onBlurJenisInventory"}},{defaultType:"combobox",defaults:{margin:"0 2 0 0",padding:0,labelAlign:"top",enterFocus:true,flex:1,forceSelection:true,queryMode:"local",typeAhead:true,displayField:"NAMA",valueField:"ID",allowBlank:false},items:[{name:"JENIS_KATEGORI",bind:{store:"{kategoristore2}"},emptyText:"[ Pilih Jenis Kategori]",reference:"jenis_kategori",listeners:{specialkey:"onFocusEnter",select:"onSelectedJenisKategori",blur:"onBlurJenisKategori"}},{name:"KATEGORI",bind:{store:"{kategoristore3}"},emptyText:"[Pilih Kategori]",reference:"kategori",listeners:{specialkey:"onFocusEnter",select:"onSelectedKategori",blur:"onBlurKategori"}}]}],getFormData:function(){var f=this.getForm().getValues();delete f.JENIS_INVENTORY;delete f.JENIS_KATEGORI;delete f.KATEGORI;return f},select:function(l){if(Ext.getClassName(l)=="data.model.Ruangan"){var m=this.down("[reference=ruangan]"),n=this.down("[reference=kategori]");m.setValue(l.get("ID"));this.ruanganSelected=l}}},0,["kategori-selection"],["component","box","container","panel","form","kategori-selection"],{component:true,box:true,container:true,panel:true,form:true,"kategori-selection":true},["widget.kategori-selection"],0,[master.inventory.kategori,"ComboSelection"],0));(Ext.cmd.derive("master.inventory.kategori.ComboSelectionController",Ext.app.ViewController,{init:function(){var w=this,f=w.getView(),u=w.getViewModel(),g=w.getReferences(),t=u.get("kategoristore1"),v=u.get("kategoristore2"),e=u.get("kategoristore3");t.on("load",function(){var l=g.ruangan.getValue();if(l==null){return}if(l.length>0&&t!=null){g.instalasi.setValue(l.substring(0,5))}v.removeAll();g.unit.select(null);e.removeAll();g.subunit.select(null);f.fireEvent("load",1);if(l.length>0&&v!=null){v.queryParams.ID=l.substring(0,5);v.load()}});v.on("load",function(l,n){var m=g.ruangan.getValue();if(m==null){return}if(m.length>5&&v!=null){g.unit.setValue(m.substring(0,7))}if(n.length==1){g.unit.select(n[0]);g.unit.fireEvent("select",g.unit,n[0]);g.subunit.focus(false,100)}e.removeAll();g.subunit.select(null);f.fireEvent("load",2);if(m.length>5&&e!=null){e.queryParams.ID=m.substring(0,7);e.load()}});e.on("load",function(l,m){if(m.length==1||f.ruanganSelected){var n=f.ruanganSelected?f.ruanganSelected:m[0];g.subunit.select(n);g.subunit.fireEvent("select",g.subunit,n);f.fireEvent("nextfocus")}})},onFocusEnter:function(g,l){this.getView().fireEvent("specialkey",g,l)},onSelectedInstalasi:function(q,f){var e=this,p=e.getView(),s=e.getViewModel().get("unitstore");e.getReferences().unit.select(null);e.getReferences().subunit.select(null);e.removeStoreData(e.getReferences().unit,"unitstore");e.removeStoreData(e.getReferences().subunit,"ruanganstore");p.fireEvent("selected",f,1);if(f){if(!p.ruanganSelected){e.getReferences().ruangan.setValue(f.get("ID"))}s.queryParams.ID=f.get("ID");s.load()}},onSelectedUnit:function(q,f){var s=this,p=s.getView(),e=s.getViewModel().get("ruanganstore");s.getReferences().subunit.select(null);s.removeStoreData(s.getReferences().subunit,"ruanganstore");p.fireEvent("selected",f,2);if(f){if(!p.ruanganSelected){s.getReferences().ruangan.setValue(f.get("ID"))}e.queryParams.ID=f.get("ID");e.load()}},onSelectedRuangan:function(e,o){var n=this,p=n.getView();p.fireEvent("selected",o,3);if(o){n.getReferences().ruangan.setValue(o.get("ID"));p.ruanganSelected=false}},onBlurJenisInventory:function(l){var g=l.getSelection();if(g==null){this.getView().fireEvent("blurselection",1);this.removeStoreData(this.getReferences().jenis_kategori,"kategoristore2");this.removeStoreData(this.getReferences().kategori,"kategoristore3")}},onBlurJenisKategori:function(l){var g=l.getSelection();if(g==null){this.getView().fireEvent("blurselection",2);this.removeStoreData(this.getReferences().kategori,"kategoristore3")}},onBlurKategori:function(l){var g=l.getSelection();if(g==null){this.getView().fireEvent("blurselection",3)}},removeStoreData:function(m,l){var n=this;n.getViewModel().get(l).removeAll();m.select(null)}},0,0,0,0,["controller.kategori-selection"],0,[master.inventory.kategori,"ComboSelectionController"],0));(Ext.cmd.derive("master.inventory.kategori.Form",com.Form,{controller:"form-kategori",model:"data.model.Kategori",layout:"hbox",items:[{xtype:"textfield",name:"NAMA",labelWidth:120,flex:1,fieldLabel:"Nama / Deskripsi",allowBlank:false}],buttons:[{text:"Simpan",handler:"onSimpan"}]},0,["form-kategori"],["component","box","container","panel","form","com-form","form-kategori"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-kategori":true},["widget.form-kategori"],0,[master.inventory.kategori,"Form"],0));(Ext.cmd.derive("master.inventory.kategori.FormController",Ext.app.ViewController,{init:function(){var g=this,l=g.getView();l.down("[name=NAMA]").focus(false,1000)},onSimpan:function(e){var f=this,p=f.getView(),q=p.getForm().getValues(),s=f.getViewModel().get("record");if(p.getForm().isValid()){s.set(q);s.showError=true;s.animateTarget=e;s.scope=f;s.save({callback:function(g,m,l){if(m.hasException()||!l){}if(l){p.notifyMessage("Data telah tersimpan");p.fireEvent("success",g)}}})}}},0,0,0,0,["controller.form-kategori"],0,[master.inventory.kategori,"FormController"],0));(Ext.cmd.derive("master.inventory.kategori.List",com.Grid,{controller:"kategori-list",flex:1,border:true,viewModel:{stores:{store:{type:"kategori-store"}},data:{record:undefined,hideTambah:true}},header:{items:[{xtype:"tool",cls:"x-fa fa-plus hide-icon-tools",tooltip:"Tambah Kategory",bind:{hidden:"{hideTambah}"},listeners:{click:"onAddKategori"}}]},columns:[{xtype:"rownumberer",text:"No",align:"left",width:70},{text:"NAMA",dataIndex:"NAMA",flex:3},{xtype:"checkcolumn",header:"STATUS",dataIndex:"STATUS",width:90,listeners:{checkchange:"onChange"}}],loadData:function(g){var l=this;vm=l.getViewModel();jenis=g.get("JENIS");jenis=jenis+1;vm.set("hideTambah",false);vm.set("record",g);l.load({JENIS:jenis,ID:g.get("ID")})}},0,["kategori-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","kategori-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"kategori-list":true},["widget.kategori-list"],0,[master.inventory.kategori,"List"],0));(Ext.cmd.derive("master.inventory.kategori.ListController",Ext.app.ViewController,{onAddKategori:function(){var g=this,l=g.getView();vm=g.getViewModel();model={};selects=vm.get("record");if(selects){model.PARENT={ID:selects.get("ID"),JENIS:selects.get("JENIS")};model.JENIS=selects.get("JENIS")+1;model.STATUS=1}l.openDialog("",true,520,150,{xtype:"form-kategori",showCloseButton:true,ui:"panel-blue",iconCls:"x-fa fa-edit",title:"Form Kategori"},function(e,f){var n=f.down("form-kategori");n.createRecord(model);n.focus("NAMA");n.on("success",function(m){l.refresh();f.close()})})},onChange:function(t,f,w){var v=this,u=v.getViewModel(),g=u.get("store"),e=g.getAt(f);e.set("STATUS",w?1:0);e.scope=this;e.save({callback:function(m,l,n){if(n){v.getView().notifyMessage("Status di"+(w==true?"Aktifkan":"NonAktifkan"))}else{e.set("STATUS",w?0:1)}}})}},0,0,0,0,["controller.kategori-list"],0,[master.inventory.kategori,"ListController"],0));(Ext.cmd.derive("master.inventory.kategori.Workspace",com.Form,{controller:"workspace-kategori",layout:"border",defaults:{margin:"2.2.2.2"},initComponent:function(){var f=this;f.items=[{region:"west",ui:"panel-blue",title:"Jenis Inventory",reference:"kategori1",iconCls:"x-fa fa-list",xtype:"kategori-list",listeners:{select:"onSelectJenisKategory"}},{region:"center",reference:"kategori2",ui:"panel-blue",title:"Kategory Barang",iconCls:"x-fa fa-list",xtype:"kategori-list",listeners:{select:"onSelectKategory"}},{region:"east",title:"Jenis Kategory",iconCls:"x-fa fa-list",ui:"panel-blue",reference:"kategori3",xtype:"kategori-list"}];com.Form.prototype.initComponent.apply(this,arguments)},load:function(){var f=this;ref=f.down("[reference=kategori1]");ref.load({JENIS:1})}},0,["workspace-kategory"],["component","box","container","panel","form","com-form","workspace-kategory"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-kategory":true},["widget.workspace-kategory"],0,[master.inventory.kategori,"Workspace"],0));(Ext.cmd.derive("master.inventory.kategori.WorkspaceController",Ext.app.ViewController,{onSelectJenisKategory:function(n,o,s){var p=this,q=p.getReferences();q.kategori2.loadData(o)},onSelectKategory:function(n,o,s){var p=this,q=p.getReferences();q.kategori3.loadData(o)}},0,0,0,0,["controller.workspace-kategori"],0,[master.inventory.kategori,"WorkspaceController"],0));(Ext.cmd.derive("master.inventory.kelompokgroup.Combo",com.Combo,{viewModel:{stores:{store:{type:"referensi-store"}}},bind:{store:"{store}"},name:"KELOMPOK_GRUP",multiSelect:true,queryMode:"local",emptyText:"[ Kelompo Group ]",displayField:"DESKRIPSI",valueField:"ID"},0,["kelompokgroup-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","kelompokgroup-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"kelompokgroup-combo":true},["widget.kelompokgroup-combo"],0,[master.inventory.kelompokgroup,"Combo"],0));(Ext.cmd.derive("master.inventory.satuan.Form",com.Form,{controller:"form-satuan",model:"data.model.Satuan",layout:{type:"hbox"},border:false,defaults:{margin:"2 2 2 2",flex:1},defaultType:"textfield",initComponent:function(){var f=this;f.items=[{maxLength:25,emptyText:"[ SINGKATAN ]",name:"NAMA"},{maxLength:50,emptyText:"[ DESKRIPSI ]",name:"DESKRIPSI"},{xtype:"button",text:"Simpan",flex:0.4,ui:"soft-green",iconCls:"x-fa fa-save",listeners:{click:"onSimpan"}}];com.Form.prototype.initComponent.apply(this,arguments)}},0,["form-satuan"],["component","box","container","panel","form","com-form","form-satuan"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-satuan":true},["widget.form-satuan"],0,[master.inventory.satuan,"Form"],0));(Ext.cmd.derive("master.inventory.satuan.FormController",Ext.app.ViewController,{onSimpan:function(f){this.getView().save(f)}},0,0,0,0,["controller.form-satuan"],0,[master.inventory.satuan,"FormController"],0));(Ext.cmd.derive("master.inventory.satuan.List",com.Grid,{viewModel:{stores:{store:{type:"satuan-store"}}},flex:1,border:false,reference:"master-obat",columns:[{xtype:"rownumberer",text:"No",align:"left",width:40},{text:"SINGKATAN",dataIndex:"NAMA",flex:1},{text:"DESKRIPSI",dataIndex:"DESKRIPSI",flex:2},{xtype:"checkcolumn",header:"STATUS",dataIndex:"STATUS",stopSelection:true}]},0,["satuan-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","satuan-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"satuan-list":true},["widget.satuan-list"],0,[master.inventory.satuan,"List"],0));(Ext.cmd.derive("master.inventory.satuan.Workspace",com.Form,{controller:"workspace-satuan",defaults:{margin:"2 2 2 2"},layout:"border",bodyPadding:2,initComponent:function(){var f=this;f.items=[{region:"north",reference:"form",title:"Form Input",xtype:"form-satuan",listeners:{save:"onSave"}},{region:"center",layout:"fit",xtype:"satuan-list",reference:"satuanlist",title:"Daftar Satuan"}];f.callParent(arguments)},load:function(m){var o=this,n=o.down("satuan-list"),p=o.down("form-satuan");n.setGridConfig({paging:true});n.load({});p.createRecord({STATUS:1,TANGGAL:o.getSysdate()})}},0,["workspace-satuan"],["component","box","container","panel","form","com-form","workspace-satuan"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-satuan":true},["widget.workspace-satuan"],0,[master.inventory.satuan,"Workspace"],0));(Ext.cmd.derive("master.inventory.satuan.WorkspaceController",Ext.app.ViewController,{onSave:function(n){var m=this,p=m.getView(),o=m.getReferences();o.satuanlist.reload();o.form.createRecord({STATUS:1,TANGGAL:p.getSysdate()})}},0,0,0,0,["controller.workspace-satuan"],0,[master.inventory.satuan,"WorkspaceController"],0));(Ext.cmd.derive("master.kamar.Combo",com.Combo,{viewModel:{stores:{store:{type:"ruang-kamar-store"}}},emptyText:"[Pilih Kamar]",displayField:"KAMAR",valueField:"ID",minChars:2,tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="x-boundlist-item">','<div"><strong>{KAMAR}</strong></div>',"</div>","</tpl>"),displayTpl:Ext.create("Ext.XTemplate",'<tpl for=".">',"{KAMAR}","</tpl>")},0,["master-kamar-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","master-kamar-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"master-kamar-combo":true},["widget.master-kamar-combo"],0,[master.kamar,"Combo"],0));(Ext.cmd.derive("master.kamar.Form",com.Form,{controller:"form-kamar",model:"data.model.RuangKamar",border:false,items:[{layout:"border",layout:{type:"hbox",align:"stretch"},border:false,defaults:{margin:"2 2 3 1",flex:1},bodyPadding:1,items:[{xtype:"textfield",name:"KAMAR",emptyText:"[ MASUKKAN KAMAR ]",flex:3,allowBlank:false},{xtype:"combo",flex:3,name:"KELAS",bind:{store:"{kelasstore}"},emptyText:"[ PILIH KELAS]",displayField:"DESKRIPSI",queryMode:"local",forceSelection:true,valueField:"ID",allowBlank:false},{xtype:"button",text:"Simpan",handler:"onSimpan"},{xtype:"button",text:"Batal",handler:"onBatal"}]}]},0,["form-kamar"],["component","box","container","panel","form","com-form","form-kamar"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-kamar":true},["widget.form-kamar"],0,[master.kamar,"Form"],0));(Ext.cmd.derive("master.kamar.FormController",Ext.app.ViewController,{onSimpan:function(e){var m=this,n=m.getView();n.save(e)},onBatal:function(l){var m=this,n=m.getView();n.fireEvent("batal")}},0,0,0,0,["controller.form-kamar"],0,[master.kamar,"FormController"],0));(Ext.cmd.derive("master.kamar.List",com.Grid,{controller:"kamar-list",flex:1,viewModel:{stores:{store:{type:"ruang-kamar-store"}}},border:false,columns:[{text:"Kamar ",dataIndex:"KAMAR",flex:1},{text:"Kelas",dataIndex:"KELAS",flex:1,renderer:"onKelasRender"},{xtype:"checkcolumn",header:"STATUS",dataIndex:"STATUS",listeners:{checkchange:"onChange"}}]},0,["kamar-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","kamar-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"kamar-list":true},["widget.kamar-list"],0,[master.kamar,"List"],0));(Ext.cmd.derive("master.kamar.ListController",Ext.app.ViewController,{onKelasRender:function(v,e,w,u,x,g){var y=w.get("REFERENSI"),t=y?(y.KELAS?y.KELAS.DESKRIPSI:""):"";return t},onChange:function(u,f,x){var w=this,e=w.getView(),v=w.getViewModel(),g=v.get("store"),y=g.getAt(f);y.set("STATUS",x?1:0);y.scope=this;y.save({callback:function(m,l,n){if(n){e.notifyMessage("Status KAMAR di"+(x==true?"Aktifkan":"Non Aktifkan"))}}})}},0,0,0,0,["controller.kamar-list"],0,[master.kamar,"ListController"],0));(Ext.cmd.derive("master.kamar.ViewModel",Ext.app.ViewModel,{formulas:{init:function(f){f("kelasstore").load()}},stores:{kelasstore:{type:"referensi-store",queryParams:{JENIS:19,STATUS:1},autoLoad:true}}},0,0,0,0,["viewmodel.kamarmodel"],0,[master.kamar,"ViewModel"],0));(Ext.cmd.derive("master.kamar.Workspace",com.Form,{controller:"workspace-kamar",viewModel:{type:"kamarmodel",data:{hideForm:true}},layout:"border",defaults:{border:false},initComponent:function(){var f=this;controller=f.getController();f.items=[{region:"north",title:"Kamar",header:{items:[{xtype:"button",margin:2,height:32,cls:"x-fa fa-plus hide-icon-tools",tooltip:"Tambah Kamar",listeners:{click:"onAddKamar"}}]},layout:"fit",items:[{xtype:"form-kamar",bind:{hidden:"{hideForm}"},reference:"formkamar",border:false,listeners:{scope:controller,batal:"onBatal",save:"onSuccess"}}]},{region:"center",cls:"x-br-top x-br-left",xtype:"kamar-list",reference:"kamarlist",title:"Daftar Kamar",flex:1.5,listeners:{scope:f.getController(),select:"onSelectKamar"}},{iconCls:"x-fa fa-list",title:"Tempat Tidur",reference:"tempattidurlist",region:"east",xtype:"tempat-tidur-list",iconCls:"x-fa fa-bed",collapsible:true,split:true,flex:1,border:true,header:{items:[{xtype:"tool",reference:"tomboltidur",cls:"x-fa fa-plus hide-icon-tools",tooltip:"Tambah Tempat Tidur",listeners:{scope:f.getController(),click:"onAddTempatTidur"}}]}}];f.callParent(arguments);f.down("form-kamar").setHidden(true)},load:function(n){var p=this,q=p.getViewModel(),s=p.down("kamar-list"),o=p.down("tempat-tidur-list");if(n){p.loadRecord(n);s.load({RUANGAN:n.get("ID")});o.load({RUANG_KAMAR:0});q.set("hideForm",true)}}},0,["workspace-kamar"],["component","box","container","panel","form","com-form","workspace-kamar"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-kamar":true},["widget.workspace-kamar"],0,[master.kamar,"Workspace"],0));(Ext.cmd.derive("master.kamar.WorkspaceController",Ext.app.ViewController,{idKamar:undefined,onAddKamar:function(w){var e=this,t=e.getView(),q=e.getViewModel(),s=e.getReferences(),v=q.get("record"),u=q.get("hideForm");q.set("hideForm",!u);s.formkamar.createRecord({RUANGAN:v.get("ID"),STATUS:1});s.formkamar.focus("KAMAR")},onBatal:function(){var o=this,p=o.getView(),e=o.getReferences(),n=o.getViewModel();e.formkamar.reset();e.formkamar.createRecord({RUANGAN:rec.get("ID"),STATUS:1});n.set("hideForm",true)},onSuccess:function(){var o=this,s=o.getView(),p=o.getViewModel(),q=o.getReferences(),n=p.get("record");q.kamarlist.reload();q.formkamar.createRecord({RUANGAN:n.get("ID"),STATUS:1})},onSelectKamar:function(w,u,t,v){var e=this,q=e.getViewModel(),s=e.getReferences();if(u){e.idKamar=u.get("ID");s.tempattidurlist.load({RUANG_KAMAR:u.get("ID")})}},onAddTempatTidur:function(n){var m=this,p=m.getView(),o=m.getReferences();if(m.idKamar){p.openDialog("",true,"55%",20,{xtype:"form-tempat-tidur",showCloseButton:true,ui:"panel-cyan",iconCls:"x-fa fa-hospital-o",title:"Input Kamar"},function(e,f){var g=f.down("form-tempat-tidur");g.createRecord({RUANG_KAMAR:m.idKamar,STATUS:1});g.on("save",function(){o.tempattidurlist.reload();f.close()})},n)}else{p.notifyMessage("Silahkan pilih kamar terlebih dahulu","danger-red")}}},0,0,0,0,["controller.workspace-kamar"],0,[master.kamar,"WorkspaceController"],0));(Ext.cmd.derive("master.kamar.tempattidur.Form",com.Form,{controller:"form-tempat-tidur",model:"data.model.RuangKamarTidur",bodyPadding:10,items:[{xtype:"textfield",name:"TEMPAT_TIDUR",labelWidth:100,width:"100%",fieldLabel:"Tempa Tidur",allowBlank:false}],buttons:[{text:"Simpan",handler:"onSimpan"}]},0,["form-tempat-tidur"],["component","box","container","panel","form","com-form","form-tempat-tidur"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-tempat-tidur":true},["widget.form-tempat-tidur"],0,[master.kamar.tempattidur,"Form"],0));(Ext.cmd.derive("master.kamar.tempattidur.FormController",Ext.app.ViewController,{init:function(){var g=this,l=g.getView();l.down("[name=TEMPAT_TIDUR]").focus(false,1000)},onSimpan:function(e){var m=this,n=m.getView();n.save(e)}},0,0,0,0,["controller.form-tempat-tidur"],0,[master.kamar.tempattidur,"FormController"],0));(Ext.cmd.derive("master.kamar.tempattidur.List",com.Grid,{controller:"tempat-tidur-list",viewModel:{stores:{store:{type:"ruangkamartidur-store"}}},flex:1,border:false,columns:[{xtype:"rownumberer",text:"No",align:"left",width:60},{text:"Nama Tempat Tidur ",dataIndex:"TEMPAT_TIDUR",flex:1},{xtype:"checkcolumn",header:"STATUS",dataIndex:"STATUS",width:"20%",listeners:{checkchange:"onChange"}}]},0,["tempat-tidur-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","tempat-tidur-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"tempat-tidur-list":true},["widget.tempat-tidur-list"],0,[master.kamar.tempattidur,"List"],0));(Ext.cmd.derive("master.kamar.tempattidur.ListController",Ext.app.ViewController,{onChange:function(u,f,x){var w=this,e=w.getView(),v=w.getViewModel(),g=v.get("store"),y=g.getAt(f);y.set("STATUS",x?1:0);y.scope=this;y.save({callback:function(m,l,n){if(n){e.notifyMessage("Status KAMAR di"+(x==true?"Aktifkan":"Non Aktifkan"))}}})}},0,0,0,0,["controller.tempat-tidur-list"],0,[master.kamar.tempattidur,"ListController"],0));(Ext.cmd.derive("master.manajemenpengguna.ViewModel",Ext.app.ViewModel,{data:{pegawai:undefined,pengguna:undefined},formulas:{getNamaPegawai:function(n){var l=n("pegawai.GELAR_DEPAN")||"",m=n("pegawai.GELAR_BELAKANG")||"";l=l==""?"":l+". ";m=m==""?"":", "+m;return l+n("pegawai.NAMA")+m},getNipPegawai:function(l){var g=l("pegawai.NIP");return g},getLoginPengguna:function(g){var l=g("pengguna.LOGIN");return l},getPasswordPengguna:function(g){var l=g("pengguna.PASSWORD");return l},getIconSex:function(f){return"x-fa fa-"+(f("pegawai.JENIS_KELAMIN")==1?"male":"female")}},stores:{pegawaistore:{type:"pegawai-store"},smfstore:{type:"referensi-store",queryParams:{JENIS:26,STATUS:1}},jenisprofesistore:{type:"referensi-store",queryParams:{JENIS:36}},grouppenggunaaksesmodulestore:("data.store.GroupPenggunaAksesModule",{}),treemodulesstore:("data.store.TreeModules",{}),penggunastore:("data.store.Pengguna",{}),penggunaaksesstore:("data.store.PenggunaAkses",{}),grouppenggunastore:{type:"referensi-store",queryParams:{JENIS:43}}}},0,0,0,0,["viewmodel.manajemenpenggunamodel"],0,[master.manajemenpengguna,"ViewModel"],0));(Ext.cmd.derive("master.manajemenpengguna.Workspace",Ext.tab.Panel,{controller:"workspace-manajemen-pengguna",layout:"border",border:false,initComponent:function(){var f=this;f.items=[{title:"Daftar Pengguna",iconCls:"x-fa fa-user",layout:"fit",items:[{title:"Daftar Pengguna",ui:"panel-cyan",xtype:"pengguna-list",iconCls:"x-fa fa-list",reference:"penggunalist"}]},{title:"Group Pengguna Akses Modul",iconCls:"x-fa fa-users",xtype:"workspace-groupmodul"}];f.callParent(arguments)},load:function(g){var l=this;c=this.down("pengguna-list"),b=this.down("workspace-groupmodul");c.load(g);b.load()}},0,["workspace-manajemen-pengguna"],["component","box","container","panel","tabpanel","workspace-manajemen-pengguna"],{component:true,box:true,container:true,panel:true,tabpanel:true,"workspace-manajemen-pengguna":true},["widget.workspace-manajemen-pengguna"],0,[master.manajemenpengguna,"Workspace"],0));(Ext.cmd.derive("master.manajemenpengguna.WorkspaceController",Ext.app.ViewController,{},0,0,0,0,["controller.workspace-manajemen-pengguna"],0,[master.manajemenpengguna,"WorkspaceController"],0));(Ext.cmd.derive("master.manajemenpengguna.group.List",com.Grid,{controller:"pengguna-group-list",viewModel:{stores:{store:{type:"referensi-store",queryParams:{JENIS:43,STATUS:1}}}},checkboxModel:false,doAfterLoad:Ext.emptyFn,initComponent:function(){var l=this,g=l.getViewModel().get("store");l.columns=[{xtype:"rownumberer",text:"No",align:"left",width:60,hidden:l.checkboxModel},{text:"Nama Group",flex:1,dataIndex:"DESKRIPSI",renderer:"onRenderer"}];g.on("load",function(e){l.doAfterLoad(e)});l.callParent(arguments)},selectAkses:function(o,q){var p=this,s=p.getSelectionModel(),t=p.getStore("store");if(s&&p.checkboxModel){var u=t.findRecord("ID",o,0,false,true,false);if(u){s.select(u,q)}}}},0,["pengguna-group-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","pengguna-group-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"pengguna-group-list":true},["widget.pengguna-group-list"],0,[master.manajemenpengguna.group,"List"],0));(Ext.cmd.derive("master.manajemenpengguna.group.ListController",Ext.app.ViewController,{onRenderer:function(v,p,w,u){var q=this,t=q.getView().getSelectionModel();if(t&&q.getView().checkboxModel){var s=w.get("checked")?(w.get("checked")==1):false;if(s){t.select(w,true)}}return v}},0,0,0,0,["controller.pengguna-group-list"],0,[master.manajemenpengguna.group,"ListController"],0));(Ext.cmd.derive("master.manajemenpengguna.groupmodul.Workspace",com.Form,{controller:"workspace-groupmodul",viewModel:{stores:{store:{type:"grouppenggunaaksesmodule-store"}}},layout:"border",defaults:{flex:1},border:false,bodyPadding:0,title:"Group Pengguna Akses Modul",initComponent:function(){var f=this;f.items=[{region:"center",xtype:"pengguna-group-list",title:"Group Pengguna",ui:"panel-cyan",iconCls:"x-fa fa-list",reference:"penggunagrouplist",checkboxModel:false,listeners:{select:"onSelectGroup"}},{region:"east",title:"Modul Akses",iconCls:"x-fa fa-bars",ui:"panel-cyan",xtype:"pengguna-modul-check-tree",reference:"penggunamodulchecktree",listeners:{checkchange:"onCheckChange"}}];f.buttons=[{text:"Simpan",ui:"soft-blue",iconCls:"x-fa fa-save",handler:"onSimpan",tooltip:{text:"Simpan",mouseOffset:[0,-75]}},{text:"Refresh",ui:"soft-red",iconCls:"x-fa fa-refresh",handler:"onRefresh",tooltip:{text:"Refresh",mouseOffset:[0,-75]}}];f.callParent(arguments)},load:function(l){var g=this.down("[reference=penggunagrouplist]");g.loadStore(l)}},0,["workspace-groupmodul"],["component","box","container","panel","form","com-form","workspace-groupmodul"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-groupmodul":true},["widget.workspace-groupmodul"],0,[master.manajemenpengguna.groupmodul,"Workspace"],0));(Ext.cmd.derive("master.manajemenpengguna.groupmodul.WorkspaceController",Ext.app.ViewController,{init:function(){var m=this,n=m.getView(),l=m.getViewModel().get("store");if(l){l.on("beforesync",function(){n.setLoading(true)})}},onRefresh:function(){var m=this,l=m.getReferences(),n=m.getViewModel().get("store");if(n){n.reload();l.penggunamodulchecktree.loadStore()}},onCheckChange:function(m,l){var n=this;n.storeData(m,l);m.cascadeBy(function(e){e.set("checked",l);n.storeData(e,l)})},privates:{storeData:function(w,v){var u=this,t=u.getReferences(),f=t.penggunagrouplist.getSelection(),g=u.getViewModel().get("store"),e=g.findRecord("MODUL",w.get("ID"),0,false,true,true);if(e){if(Ext.isNumeric(e.get("ID"))&&e.get("ID")!=0){e.set("STATUS",v?1:0);u.checkGroup(w,v)}else{if(!v){g.remove(e);u.checkGroup(w,v)}}}else{if(v){g.add(Ext.create("data.model.GroupPenggunaAksesModule",{GROUP_PENGGUNA:f[0].get("ID"),MODUL:w.get("ID"),STATUS:1}))}u.checkGroup(w,v)}},checkGroup:function(x,t){var y=this,q=y.getReferences(),w=q.penggunamodulchecktree,u=w.getStore(),s=x.get("ID").length,v=parseInt(s)-2;if(v!=0){id_substr=x.get("ID").substr(0,v);find=u.findRecord("ID",id_substr,0,false,true,true);if(t){find.set("checked",t);if(find){y.storeData(find,t)}}}}},onSelectGroup:function(t,e,f){var u=this,s=u.getReferences(),g=u.getViewModel().get("store");if(g){g.removeAll();g.commitChanges();g.queryParams={GROUP_PENGGUNA:e.get("ID")};g.load()}s.penggunamodulchecktree.setParams({GROUP_PENGGUNA:e.get("ID"),TIPE:1});s.penggunamodulchecktree.loadStore()},onSimpan:function(m){var n=this,o=n.getView(),p=n.getViewModel().get("store");p.sync({callback:function(f,g,e){o.setLoading(false);o.notifyMessage("Data Group Pengguna Akses Module telah disimpan","danger-blue")}})}},0,0,0,0,["controller.workspace-groupmodul"],0,[master.manajemenpengguna.groupmodul,"WorkspaceController"],0));(Ext.cmd.derive("master.manajemenpengguna.modul.CheckTree",Ext.tree.Panel,{controller:"pengguna-modul-check-tree",autoScroll:true,viewModel:{stores:{store:{type:"tree-modules-store",autoLoad:false,queryParams:{TREE:1}}}},border:false,scrollable:true,rootVisible:false,bind:{store:"{store}"},animate:true,setParams:function(m){var l=this,n=l.getViewModel().get("store");if(n){n.queryParams=Ext.apply(n.queryParams,m)}},loadStore:function(){var g=this,l=g.getViewModel().get("store");if(l){l.removeAll();l.load()}}},0,["pengguna-modul-check-tree"],["component","box","container","panel","tablepanel","treepanel","pengguna-modul-check-tree"],{component:true,box:true,container:true,panel:true,tablepanel:true,treepanel:true,"pengguna-modul-check-tree":true},["widget.pengguna-modul-check-tree"],0,[master.manajemenpengguna.modul,"CheckTree"],0));(Ext.cmd.derive("master.manajemenpengguna.modul.CheckTreeController",Ext.app.ViewController,{init:function(){var o=this,p=o.getView(),n=o.getViewModel(),e=n.get("store");e.on("load",function(g,f){if(f.length==0){e.removeAll()}p.expandAll();if(f.length>0){p.setSelection(f[0])}})}},0,0,0,0,["controller.pengguna-modul-check-tree"],0,[master.manajemenpengguna.modul,"CheckTreeController"],0));(Ext.cmd.derive("master.manajemenpengguna.pengguna.Detil",Ext.form.Panel,{controller:"pengguna-detil",viewModel:{type:"manajemenpenggunamodel",data:{viewInfoDetil:false}},layout:{type:"vbox",align:"stretch"},border:false,initComponent:function(){var f=this;f.items=[{xtype:"fieldset",flex:1,defaultType:"displayfield",margin:"5 5 5 5",border:false,cls:" shadow-panel x-color-w",items:[{margin:"10 10 10 10",bind:{html:"<h1>{getNamaPegawai}</h1>"}},{margin:"10 10 10 10",bind:{html:"<h3>Nip : {getNipPegawai}</h3>"}}]}];f.callParent(arguments)},loadStore:function(){var g=this,l=g.getViewModel().get("store");if(l){l.removeAll();l.load()}}},0,["pengguna-detil"],["component","box","container","panel","form","pengguna-detil"],{component:true,box:true,container:true,panel:true,form:true,"pengguna-detil":true},["widget.pengguna-detil"],0,[master.manajemenpengguna.pengguna,"Detil"],0));(Ext.cmd.derive("master.manajemenpengguna.pengguna.DetilController",Ext.app.ViewController,{},0,0,0,0,["controller.pengguna-detil"],0,[master.manajemenpengguna.pengguna,"DetilController"],0));(Ext.cmd.derive("master.manajemenpengguna.pengguna.Form",com.Form,{controller:"pengguna-form",viewModel:{stores:{store:{type:"pengguna-store"}},data:{viewInfoDetil:false,hideForm:true}},defaultType:"textfield",defaults:{anchor:"100%"},model:"data.model.Pengguna",title:"Form Pengguna",initComponent:function(){var f=this;f.items=[{fieldLabel:"Username",labelAlign:"right",allowBlank:false,reference:"username",emptyText:"Input Username",name:"LOGIN"},{fieldLabel:"Password",labelAlign:"right",reference:"pass",emptyText:"Input Password",inputType:"password",name:"PASSWORD"},{fieldLabel:"Ulangi Password",labelAlign:"right",reference:"repeatpass",inputType:"password",emptyText:"Ulangi Password",name:"ULANGPASSWORD"},{fieldLabel:"NIK",labelAlign:"right",allowBlank:false,reference:"nik",enforceMaxLength:true,maxLength:16,emptyText:"Input Nomor Induk Kependudukan",name:"NIK"},{fieldLabel:"Jenis Pengguna",labelAlign:"right",name:"JENIS",xtype:"referensi-combo",defaultValue:1,params:{JENIS:69},firstLoad:true,reference:"jenispengguna",emptyText:"[Pilih Jenis Pengguna]",allowBlank:false,typeAhead:true,enterFocus:true}],f.buttons=[{text:"Simpan",ui:"soft-blue",iconCls:"x-fa fa-save",listeners:{click:"onSimpan"},tooltip:{text:"Simpan",mouseOffset:[0,-75]}},{text:"Reset",ui:"soft-red",iconCls:"x-fa fa-refresh",handler:"onReset",tooltip:{text:"Reset",mouseOffset:[0,-75]}}];f.callParent(arguments)},storeload:function(s){var o=this,q=o.down("[reference = username]"),p=Ext.create("data.model.Pengguna",{}),n=o.getViewModel().get("store");if(n){n.removeAll();n.queryParams={NIP:s.get("NIP")};n.load({callback:function(g,f,l){if(l){var e=n.getAt(0);o.loadRecord(e);o.getViewModel().set("hideForm",false)}else{o.createRecord({STATUS:1,NAMA:s.get("NAMA"),NIP:s.get("NIP")})}}})}}},0,["pengguna-form"],["component","box","container","panel","form","com-form","pengguna-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"pengguna-form":true},["widget.pengguna-form"],0,[master.manajemenpengguna.pengguna,"Form"],0));(Ext.cmd.derive("master.manajemenpengguna.pengguna.FormController",Ext.app.ViewController,{onReset:function(){var g=this,l=g.getView();l.getForm().reset()},onSimpan:function(u){var e=this,q=e.getView(),f=e.getReferences(),s=q.getForm().getValues(),t=q.getRecord();if(q.getForm().isValid()){if(f.pass.getValue()==f.repeatpass.getValue()){t.set(s);t.showError=true;t.animateTarget=u;t.scope=e;t.save({callback:function(l,g,m){if(g.hasException()||!m){}if(m){q.notifyMessage("Data Telah Tersimpan");q.fireEvent("getView",m)}}})}else{q.notifyMessage("Password Berbeda Silahkan samakan PASSWORD")}}}},0,0,0,0,["controller.pengguna-form"],0,[master.manajemenpengguna.pengguna,"FormController"],0));(Ext.cmd.derive("master.manajemenpengguna.pengguna.List",com.Grid,{controller:"pengguna-list",viewModel:{stores:{store:{type:"pengguna-store"}}},initComponent:function(){var f=this;f.columns=[{xtype:"rownumberer",text:"No",align:"left",width:60},{text:"NIP",flex:1,dataIndex:"NIP"},{text:"LOGIN",flex:1,dataIndex:"LOGIN"},{text:"NAMA",flex:1,dataIndex:"NAMA"},{text:"NIK",flex:1,dataIndex:"NIK"},{text:"JENIS",flex:1,dataIndex:"JENIS",renderer:"onJenisRenderer"},{xtype:"checkcolumn",header:"STATUS",dataIndex:"STATUS",width:90,listeners:{checkchange:"onChange"}},{text:"#",align:"center",width:90,xtype:"widgetcolumn",widget:{xtype:"button",text:"Akses",tooltip:"Akses User",padding:3,ui:"soft-red",margin:"2.2.2.2",iconCls:"x-fa fa-pencil",listeners:{click:"onClickAkses"}}}],f.dockedItems=[{xtype:"pagingtoolbar",bind:{store:"{store}"},dock:"bottom",displayInfo:true,items:["-",{},{},{xtype:"search-field",cls:"x-text-border",autoFocus:true,emptyText:"Nama",flex:1,listeners:{search:"onsearch",clear:"onClear"}}]}];f.callParent(arguments)}},0,["pengguna-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","pengguna-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"pengguna-list":true},["widget.pengguna-list"],0,[master.manajemenpengguna.pengguna,"List"],0));(Ext.cmd.derive("master.manajemenpengguna.pengguna.ListController",Ext.app.ViewController,{onJenisRenderer:function(y,s,q,w,u,v){var t=q.get("REFERENSI"),x=t?(t.JENIS_PENGGUNA?t.JENIS_PENGGUNA.DESKRIPSI:""):"";return x},onClickAkses:function(p){var n=this,o=n.getView(),e=p.getWidgetRecord();o.openDialog("",true,0,0,{xtype:"workspace-pengguna",viewModel:{data:{pegawai:e,pengguna:e,viewInfoDetil:true}},showCloseButton:true,ui:"panel-red",iconCls:"x-fa fa-unlock-alt"},function(f,g){var l=g.down("workspace-pengguna");l.load(e)},p)},onChange:function(u,f,x){var w=this,e=w.getView(),v=w.getViewModel(),g=v.get("store"),y=g.getAt(f);y.set("STATUS",x?1:0);y.scope=this;y.save({callback:function(m,l,n){if(n){e.notifyMessage("Status di"+(x==true?"Aktifkan":"Non Aktifkan"),"danger-blue");e.reload()}}})},onsearch:function(q,f){var e=this,s=e.getViewModel(),p=s.get("store");p.queryParams={NAMA:f,page:1,start:0};p.load()},onClear:function(){var m=this,l=m.getViewModel(),n=l.get("store");delete n.queryParams.NAMA;delete n.queryParams.page;delete n.queryParams.start;n.load()}},0,0,0,0,["controller.pengguna-list"],0,[master.manajemenpengguna.pengguna,"ListController"],0));(Ext.cmd.derive("master.manajemenpengguna.pengguna.Workspace",com.Form,{controller:"workspace-pengguna",viewModel:{stores:{penggunaaksesstore:{type:"pengguna-akses-store"},store:{type:"pengguna-store"},penggunaaksesruangan:{type:"pengguna-akses-ruangan-store"}},data:{viewInfoDetil:false},formulas:{getNamaPegawai:function(n){var l=n("pegawai.GELAR_DEPAN")||"",m=n("pegawai.GELAR_BELAKANG")||"";l=l==""?"":l+". ";m=m==""?"":", "+m;return l+n("pegawai.NAMA")+m},getNipPegawai:function(l){var g=l("pegawai.NIP");return g}}},layout:"fit",bind:{title:"Nama Pengguna : <strong>{getNamaPegawai}</strong> / NIP : <strong>{getNipPegawai}</strong>"},initComponent:function(){var f=this;f.items=[{xtype:"form",border:false,layout:"border",items:[{region:"west",xtype:"pengguna-group-list",flex:1,reference:"penggunagrouplist",checkboxModel:true,selModel:{selType:"checkboxmodel",mode:"MULTI",checkOnly:true},listeners:{select:"onSelectGroup",deselect:"onDeselectGroup",itemclick:"onItemClick"}},{region:"center",title:"Modul Akses",xtype:"pengguna-modul-check-tree",flex:1,reference:"penggunamodulchecktree",listeners:{checkchange:"onCheckChange"}},{region:"east",xtype:"ruangan-list",checkboxModel:true,selModel:{selType:"checkboxmodel",mode:"MULTI",checkOnly:true},flex:1,reference:"penggunaaksesruangan",listeners:{select:"onSelectAksesRuangan",deselect:"onDeselectAksesRuangan"}}],buttons:[{text:"Simpan",ui:"soft-blue",iconCls:"x-fa fa-save",handler:"onSimpan",tooltip:{text:"Simpan",mouseOffset:[0,-75]}},{text:"Refresh",ui:"soft-red",iconCls:"x-fa fa-refresh",handler:"onRefresh",tooltip:{text:"Refresh",mouseOffset:[0,-75]}}]}];f.callParent(arguments)},load:function(f){}},0,["workspace-pengguna"],["component","box","container","panel","form","com-form","workspace-pengguna"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-pengguna":true},["widget.workspace-pengguna"],0,[master.manajemenpengguna.pengguna,"Workspace"],0));(Ext.cmd.derive("master.manajemenpengguna.pengguna.WorkspaceController",Ext.app.ViewController,{init:function(){var v=this,s=v.getView(),w=this.getViewModel(),p=w.get("penggunaaksesstore"),t=w.get("penggunaaksesruangan"),u=w.get("pengguna"),q=this.getReferences();t.on("beforesync",function(){s.setLoading(true)});p.on("beforesync",function(){s.setLoading(true)});q.penggunagrouplist.loadStore();p.removeAll();p.queryParams={PENGGUNA:u.get("ID")};t.removeAll();t.queryParams={PENGGUNA:u.get("ID")};q.penggunaaksesruangan.setParams({RUANGAN_AKSES:1,TREE:0,PENGGUNA:u.get("ID"),STATUS:1});q.penggunaaksesruangan.loadStore();new Ext.util.DelayedTask(function(){p.on("load",function(g,f,e){if(e){Ext.Array.each(f,function(l){if(l.get("STATUS")==1){var n=l.get("REFERENSI"),m=n?n.GROUP_PENGGUNA.GROUP_PENGGUNA:null;q.penggunagrouplist.selectAkses(m,l.get("STATUS")==1)}})}});p.load();t.load()}).delay(1000)},onRefresh:function(){var m=this,l=m.getReferences(),n=m.getViewModel().get("store");if(n){n.reload();l.penggunamodulchecktree.loadStore();l.penggunaaksesruangan.loadStore()}},onCheckChange:function(m,l){var n=this;if(n.storeData){n.storeData(m,l);m.cascadeBy(function(e){e.set("checked",l);n.storeData(e,l)})}},storeData:function(y,x){var w=this,g=w.getReferences(),f=g.penggunagrouplist.getSelection(),u=w.getViewModel().get("penggunaaksesstore"),v=w.getViewModel().get("pengguna"),e=u.findRecord("GROUP_PENGGUNA_AKSES_MODULE",y.get("GPAM"),0,false,true,true);if(e){if(Ext.isNumeric(e.get("ID"))&&e.get("ID")!=0){e.set("STATUS",x?1:0);w.checkGroup(y,x)}else{if(!x){u.remove(e);w.checkGroup(y,x)}}}else{if(v){if(x){u.add(Ext.create("data.model.PenggunaAkses",{GROUP_PENGGUNA_AKSES_MODULE:y.get("GPAM"),PENGGUNA:v.get("ID"),STATUS:1}))}w.checkGroup(y,x)}}},checkGroup:function(x,t){var y=this,q=y.getReferences(),w=q.penggunamodulchecktree,u=w.getStore(),s=x.get("ID").length,v=parseInt(s)-2;if(v!=0){id_substr=x.get("ID").substr(0,v);find=u.findRecord("ID",id_substr,0,false,true,true);if(t){find.set("checked",t);if(find){y.storeData(find,t)}}}},onSelectGroup:function(u,w,e){var v=this,g=v.getViewModel().get("store"),f=v.getViewModel().get("pengguna"),t=v.getReferences();t.penggunamodulchecktree.setParams({GROUP_PENGGUNA:w.get("ID"),TIPE:2,PENGGUNA:f.get("ID")});t.penggunamodulchecktree.loadStore();t.penggunamodulchecktree.setTitle("Modul Akses - "+w.get("DESKRIPSI"))},onDeselectGroup:function(m,l,n){},onItemClick:function(l,g){this.onSelectGroup(l,g)},onSelectAksesRuangan:function(m,l,n){this.checkedAksesRuangan(l,true)},onDeselectAksesRuangan:function(m,l,n){this.checkedAksesRuangan(l,false)},onSimpan:function(n){var o=this,q=o.getView(),s=o.getStore("penggunaaksesstore"),p=o.getStore("penggunaaksesruangan");s.sync({callback:function(e,f,g){o.getView().setLoading(false);q.notifyMessage("Data Pengguna Akses Modul telah disimpan","danger-blue")}});p.sync({callback:function(e,f,g){o.getView().setLoading(false);q.notifyMessage("Data Pengguna Akses Ruangan telah disimpan","danger-blue")}})},privates:{checkedAksesRuangan:function(u,p){var q=this,t=q.getViewModel().get("pengguna"),s=q.getStore("penggunaaksesruangan"),o=s.findRecord("RUANGAN",u.get("ID"),0,false,true,false);if(o){if(Ext.isNumeric(o.get("ID"))&&o.get("ID")!=0){o.set("STATUS",p?1:0)}else{if(!p){s.remove(o)}}}else{if(p){s.add(Ext.create("data.model.PenggunaAksesRuangan",{PENGGUNA:t.get("ID"),RUANGAN:u.get("ID"),STATUS:1}))}}}}},0,0,0,0,["controller.workspace-pengguna"],0,[master.manajemenpengguna.pengguna,"WorkspaceController"],0));(Ext.cmd.derive("master.marginpenjaminfarmasi.Form",com.Form,{controller:"master-form-marginpenjaminfarmasi",viewModel:{stores:{storesCekDuplikat:{type:"master-marginpenjaminfarmasi-store",queryParams:{STATUS:1,start:0,limit:1}}},data:{isNewForm:true}},layout:{type:"hbox"},defaults:{flex:1,margin:"0 10 0 0"},model:"master.marginpenjaminfarmasi.Model",initComponent:function(){var f=this;f.items=[{xtype:"referensi-combo",params:{JENIS:10},firstLoad:true,name:"PENJAMIN",allowBlank:false,emptyText:"[ Cara Bayar ]",flex:2},{xtype:"referensi-combo",params:{JENIS:78},emptyText:"[ Jenis ]",firstLoad:true,name:"JENIS",allowBlank:false},{xtype:"numberfield",emptyText:"[ Margin % ]",name:"MARGIN",allowBlank:false,hideTrigger:true},{xtype:"textfield",emptyText:"[ No.SK ]",name:"NOMOR_SK",allowBlank:false},{xtype:"datefield",emptyText:"[ Tanggal SK ]",name:"TANGGAL_SK",format:"Y-m-d",allowBlank:false},{xtype:"button",text:"Simpan",flex:0.6,ui:"soft-blue",handler:"onSimpan"}];com.Form.prototype.initComponent.apply(this,arguments)},onBeforeGetRecord:function(p,n){var s=p.getViewModel(),o=p.down("[name=TANGGAL_SK]").getValue(),q=Ext.Date.clone(o);q.setHours(0);q.setMinutes(0);q.setSeconds(0);n.TANGGAL_SK=q},isDuplikcatDataEntry:function(q,o,n){var p=this,s=p.getViewModel().get("storesCekDuplikat");if(s){s.queryParams=s.queryParams||{};s.queryParams={PENJAMIN:q,JENIS:o,STATUS:1,start:0,limit:1};s.load(function(f,g,e){if(Ext.isArray(f)){n(f.length>0)}})}}},0,["master-form-marginpenjaminfarmasi"],["component","box","container","panel","form","com-form","master-form-marginpenjaminfarmasi"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"master-form-marginpenjaminfarmasi":true},["widget.master-form-marginpenjaminfarmasi"],0,[master.marginpenjaminfarmasi,"Form"],0));(Ext.cmd.derive("master.marginpenjaminfarmasi.FormController",Ext.app.ViewController,{onSimpan:function(q){var o=this,s=o.getView(),p=s.getRecord().get("PENJAMIN"),n=s.getRecord().get("JENIS");s.isDuplikcatDataEntry(p,n,function(e){if(e){Ext.Msg.show({title:"Informasi",message:"Data Dengan Cara Bayar Tersebut Sudah Ada, Apakah Anda Ingin Update Data Tersebut .?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:function(g){if(g==="yes"){var l=o.getViewModel().get("storesCekDuplikat"),f=l.getAt(0);f.set("STATUS",0);f.save({callback:function(w,v,m){if(m){s.save(q)}else{s.notifyMessage("Gagal")}}})}}})}else{s.save(q)}})}},0,0,0,0,["controller.master-form-marginpenjaminfarmasi"],0,[master.marginpenjaminfarmasi,"FormController"],0));(Ext.cmd.derive("master.marginpenjaminfarmasi.List",com.Grid,{controller:"master-list-marginpenjaminfarmasi",flex:1,viewModel:{stores:{store:{type:"master-marginpenjaminfarmasi-store"}}},header:{iconCls:"x-fa fa-list",padding:"7px 7px 7px 7px",title:"Detail"},ui:"panel-cyan",hideColumns:false,layout:"fit",initComponent:function(){var f=this;f.columns=[{xtype:"rownumberer",text:"No",align:"left",width:40},{xtype:"templatecolumn",text:"Cara Bayar",flex:2,tpl:'<div style="white-space:normal !important;">{REFERENSI.PENJAMIN.DESKRIPSI}</div>'},{xtype:"templatecolumn",text:"Jenis",flex:1,tpl:'<div style="white-space:normal !important;">{REFERENSI.JENIS.DESKRIPSI}</div>'},{xtype:"templatecolumn",text:"Margin",flex:1,tpl:'<div style="white-space:normal !important;">{MARGIN} %</div>'},{text:"No.SK",dataIndex:"NOMOR_SK",flex:1},{xtype:"datecolumn",text:"Tgl.SK",dataIndex:"TANGGAL_SK",flex:1},{xtype:"actioncolumn",align:"center",width:75,hidden:f.hideColumns,text:"#",items:[{xtype:"tool",iconCls:"x-fa fa-history",tooltip:"History",handler:"onHistory"}]}],f.dockedItems=[{xtype:"pagingtoolbar",bind:{store:"{store}"},dock:"bottom",displayInfo:true}];com.Grid.prototype.initComponent.apply(this,arguments)},onLoadRecord:function(){var g=this,l=g.getViewModel().get("store");l.queryParams=l.queryParams||{};l.queryParams={STATUS:1};l.load()},onLoadHistory:function(n){var l=this,m=l.getViewModel().get("store");m.queryParams=m.queryParams||{};m.queryParams={PENJAMIN:n.get("PENJAMIN"),JENIS:n.get("JENIS"),STATUS:0};m.load()}},0,["master-list-marginpenjaminfarmasi"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","master-list-marginpenjaminfarmasi"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"master-list-marginpenjaminfarmasi":true},["widget.master-list-marginpenjaminfarmasi"],0,[master.marginpenjaminfarmasi,"List"],0));(Ext.cmd.derive("master.marginpenjaminfarmasi.ListController",Ext.app.ViewController,{onChange:function(x,w,y){var q=this,s=q.getViewModel(),v=q.getView(),u=s.get("store"),t=u.getAt(w);t.set("STATUS",y?1:0);t.scope=this;t.save({callback:function(g,f,e){if(e){v.notifyMessage("Status di "+(y==true?"Aktifkan":"NonAktifkan"),"danger-red")}else{t.set("STATUS",y?0:1)}}})},onHistory:function(w,v,p){var q=this,t=q.getView(),s=q.getViewModel().get("store"),u=s.getAt(v);dialog=t.openDialog("",true,0,0,{xtype:"master-list-marginpenjaminfarmasi",title:"History Tarif Margin & Tuslah",ui:"panel-cyan",showCloseButton:true,hideColumns:true,listeners:{close:function(){dialog.close();t.onLoadRecord()}}},function(g,e){var f=e.down("master-list-marginpenjaminfarmasi");f.onLoadHistory(u);f.on("success",function(l){t.refresh();win.close()})})}},0,0,0,0,["controller.master-list-marginpenjaminfarmasi"],0,[master.marginpenjaminfarmasi,"ListController"],0));(Ext.cmd.derive("master.marginpenjaminfarmasi.Workspace",com.Form,{controller:"master-workspace-marginpenjaminfarmasi",layout:{type:"hbox",align:"stretch"},flex:1,title:"Margin Obat",initComponent:function(){var f=this;f.items=[{flex:1,header:{iconCls:"x-fa fa-money",padding:"7px 7px 7px 7px",title:"Margin Obat"},ui:"panel-cyan",margin:"2px 2px 2px 2px",layout:"border",items:[{region:"north",border:true,xtype:"master-form-marginpenjaminfarmasi",reference:"formmarginpenjaminfarmasi",listeners:{save:"onSuccess"}},{region:"center",xtype:"master-list-marginpenjaminfarmasi",reference:"listmarginpenjaminfarmasi",listeners:{success:"onSuccess"}}]}];com.Form.prototype.initComponent.apply(this,arguments)},load:function(){var m=this,n=m.down("master-form-marginpenjaminfarmasi"),l=m.down("master-list-marginpenjaminfarmasi");n.createRecord({});l.onLoadRecord()}},0,["master-workspace-marginpenjaminfarmasi"],["component","box","container","panel","form","com-form","master-workspace-marginpenjaminfarmasi"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"master-workspace-marginpenjaminfarmasi":true},["widget.master-workspace-marginpenjaminfarmasi"],0,[master.marginpenjaminfarmasi,"Workspace"],0));(Ext.cmd.derive("master.marginpenjaminfarmasi.WorkspaceController",Ext.app.ViewController,{onSuccess:function(q,u,s){var o=this,t=o.getView(),p=o.getViewModel();t.load()}},0,0,0,0,["controller.master-workspace-marginpenjaminfarmasi"],0,[master.marginpenjaminfarmasi,"WorkspaceController"],0));(Ext.cmd.derive("master.negara.Form",com.Form,{controller:"form-negara",layout:{type:"hbox",align:"stretch"},model:"master.negara.Model",bodyPadding:1,header:false,border:false,defaults:{margin:"0 1 0 1"},defaultType:"textfield",initComponent:function(){this.items=[{maxLength:75,name:"DESKRIPSI",reference:"nama_negara",emptyText:"[Nama Negara]",flex:3},{maxLength:75,name:"SINGKATAN",emptyText:"[Singkatan]",flex:1},{xtype:"button",text:"Simpan",ui:"soft-green",iconCls:"x-fa fa-save",handler:"onSimpan"},{text:"Batal",xtype:"button",ui:"soft-red",iconCls:"x-fa fa-times",handler:"onBatal"}];com.Form.prototype.initComponent.apply(this,arguments)}},0,["form-negara"],["component","box","container","panel","form","com-form","form-negara"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-negara":true},["widget.form-negara"],0,[master.negara,"Form"],0));(Ext.cmd.derive("master.negara.FormController",Ext.app.ViewController,{onSimpan:function(e){var m=this,n=m.getView();n.save(e)},onBatal:function(g){var l=this;l.getView().fireEvent("batal")}},0,0,0,0,["controller.form-negara"],0,[master.negara,"FormController"],0));(Ext.cmd.derive("master.negara.List",com.Grid,{controller:"negara-list",flex:1,viewModel:{stores:{store:{type:"master-negara-store"}}},cls:"x-br-top",border:true,reference:"master-negara",columns:[{xtype:"rownumberer",text:"No",align:"left",width:70},{text:"Nama Negara ",dataIndex:"DESKRIPSI",flex:4},{text:"Singkatan ",dataIndex:"SINGKATAN",flex:1},{xtype:"checkcolumn",header:"STATUS",dataIndex:"STATUS",width:90,stopSelection:true,listeners:{checkchange:"onChange"}}],dockedItems:[{xtype:"pagingtoolbar",bind:{store:"{store}"},dock:"bottom",displayInfo:true,items:["-",{},{},{xtype:"search-field",cls:"x-text-border",autoFocus:true,emptyText:"Cari berdasarkan Nama Negara",flex:1,listeners:{search:"onsearch",clear:"onClear"}}]}]},0,["negara-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","negara-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"negara-list":true},["widget.negara-list"],0,[master.negara,"List"],0));(Ext.cmd.derive("master.negara.ListController",Ext.app.ViewController,{onsearch:function(q,f){var e=this,s=e.getViewModel(),p=s.get("store");p.queryParams={DESKRIPSI:f,page:1,start:0};p.load()},onClear:function(){var m=this,l=m.getViewModel(),n=l.get("store");delete n.queryParams.DESKRIPSI;delete n.queryParams.page;delete n.queryParams.start;n.load()},onChange:function(t,f,w){var v=this,u=v.getViewModel(),g=u.get("store"),e=g.getAt(f);e.set("STATUS",w?1:0);e.scope=this;e.save({callback:function(m,l,n){if(n){v.getView().notifyMessage("Status Negara di"+(w==true?"Aktifkan":"Non Aktifkan"))}}})}},0,0,0,0,["controller.negara-list"],0,[master.negara,"ListController"],0));(Ext.cmd.derive("master.negara.ViewModel",Ext.app.ViewModel,{stores:{negarastore:{type:"master-negara-store"}}},0,0,0,0,["viewmodel.negaramodel"],0,[master.negara,"ViewModel"],0));(Ext.cmd.derive("master.negara.Workspace",com.Form,{controller:"workspace-negara",viewModel:{data:{hideForm:true}},border:false,layout:"border",initComponent:function(){var f=this;f.items=[{region:"north",title:"Negara",ui:"panel-gray",iconCls:"x-fa fa-list",header:{items:[{xtype:"button",margin:2,height:32,cls:"x-fa fa-plus hide-icon-tools",tooltip:"Tambah Negara",listeners:{click:"onAddNegara"}}]},layout:"fit",items:[{xtype:"form-negara",bind:{hidden:"{hideForm}"},reference:"formnegara",listeners:{scope:f.getController(),batal:"onBatal",save:"onSuccess"}}]},{region:"center",xtype:"negara-list",border:false,reference:"negaralist",listeners:{select:"onSelect"}}];f.callParent(arguments)},load:function(){var m=this,l=m.down("negara-list"),n=m.getViewModel();n.set("hideForm",true);l.load({})}},0,["workspace-negara"],["component","box","container","panel","form","com-form","workspace-negara"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-negara":true},["widget.workspace-negara"],0,[master.negara,"Workspace"],0));(Ext.cmd.derive("master.negara.WorkspaceController",Ext.app.ViewController,{onAddNegara:function(f){this.confForm()},onBatal:function(){this.confForm()},confForm:function(){var n=this,m=n.getViewModel(),o=m.get("hideForm"),p=n.getReferences();m.set("hideForm",!o);p.formnegara.createRecord({STATUS:1})},onSelect:function(s,e,f){var u=this,t=u.getViewModel(),g=u.getReferences();t.set("hideForm",false);g.formnegara.loadRecord(e)},onSuccess:function(){var l=this,e=l.getReferences();e.negaralist.reload();l.confForm()}},0,0,0,0,["controller.workspace-negara"],0,[master.negara,"WorkspaceController"],0));(Ext.cmd.derive("master.paket.Combo",com.Combo,{viewModel:{stores:{store:{type:"paket-store"}}},emptyText:"[Pilih Paket]",displayField:"NAMA"},0,["paket-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","paket-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"paket-combo":true},["widget.paket-combo"],0,[master.paket,"Combo"],0));(Ext.cmd.derive("master.paket.Form",com.Form,{controller:"form-paket",viewModel:{stores:{combokelasstore:{type:"referensi-store",queryParams:{JENIS:19},autoLoad:true},combojeniskunjunganstore:{type:"referensi-store",queryParams:{JENIS:15},autoLoad:true}}},model:"data.model.Paket",border:false,items:[{xtype:"form",flex:1,border:false,defaults:{margin:"2 2 2 2",flex:1},items:[{layout:"hbox",flex:1,border:false,defaults:{margin:"2 2 2 2",flex:1},items:[{xtype:"textfield",name:"NAMA",allowBlank:false,emptyText:"[ NAMA PAKET ]"}]},{layout:"hbox",flex:1,border:false,defaults:{xtype:"combo",queryMode:"local",allowBlank:false,displayField:"DESKRIPSI",valueField:"ID",margin:"2 2 2 2",flex:1,listeners:{specialkey:"onFocusEnter"}},items:[{name:"KELAS",bind:{store:"{combokelasstore}"},emptyText:"[ KELAS ]"},{name:"UNTUK_KUNJUNGAN",bind:{store:"{combojeniskunjunganstore}"},emptyText:"[ JENIS KUNJUNGAN ]"}]},{layout:"hbox",flex:1,border:false,defaults:{xtype:"numberfield",hideTrigger:true,margin:"2 2 2 2",flex:1},items:[{name:"LAMA",emptyText:"[ LAMA KUNJUNGAN ]"},{name:"TARIF",emptyText:"[ TARIF KUNJUNGAN ]"}]}]}],buttons:[{text:"Simpan",ui:"soft-green",iconCls:"x-fa fa-save",listeners:{click:"onSimpan"}},{text:"BATAL",ui:"soft-red",iconCls:"x-fa fa-refresh",listeners:{click:"onBatal"}}]},0,["form-paket"],["component","box","container","panel","form","com-form","form-paket"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-paket":true},["widget.form-paket"],0,[master.paket,"Form"],0));(Ext.cmd.derive("master.paket.FormController",Ext.app.ViewController,{onSimpan:function(g){var l=this.getView();l.save(g)},onBatal:function(){var f=this.getView();f.getForm().reset();f.createRecord({STATUS:1})}},0,0,0,0,["controller.form-paket"],0,[master.paket,"FormController"],0));(Ext.cmd.derive("master.paket.List",com.Grid,{controller:"paket-list",viewModel:{stores:{store:{type:"paket-store"}}},border:false,title:"Daftar Paket",iconCls:"x-fa fa-list",tools:[{type:"plus",tooltip:"Tambah Paket",callback:"onAddPaket"}],columns:[{xtype:"rownumberer",text:"No",align:"left",width:40},{text:"NAMA PAKET",dataIndex:"NAMA",flex:2},{text:"TARIF",dataIndex:"TARIF",flex:1,align:"right"},{text:"Distribusi",xtype:"actioncolumn",align:"center",width:100,items:[{xtype:"tool",iconCls:"x-fa fa-pencil-square-o",tooltip:"Distribusi Tarif Paket",handler:"onClickDistribusiPaket"}]}]},0,["paket-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","paket-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"paket-list":true},["widget.paket-list"],0,[master.paket,"List"],0));(Ext.cmd.derive("master.paket.ListController",Ext.app.ViewController,{onClickDistribusiPaket:function(A,s,x){var u=this,t=u.getView(),w=A.getStore().getAt(s),y=w.get("ID"),z=w.get("REFERENSI")?w.get("REFERENSI").KELAS.DESKRIPSI:"",v="( "+y+" )  "+w.get("NAMA")+" - "+z;t.openDialog("",true,0,0,{title:v,xtype:"workspace-paket-distribusitarif",ui:"panel-cyan",showCloseButton:true},function(f,e){var g=e.down("workspace-paket-distribusitarif");g.load(w.get("ID"));e.on({close:function(){t.reload()}})})},onAddPaket:function(m){var l=this,n=l.getView();n.openDialog("",true,100,195,{xtype:"form-paket",title:"Form Paket",ui:"panel-cyan",showCloseButton:true},function(e,g){var f=g.down("form-paket");f.on("save",function(s,u,t){n.reload();g.close()});f.createRecord({STATUS:1,TANGGAL:n.getSysdate()})},m)}},0,0,0,0,["controller.paket-list"],0,[master.paket,"ListController"],0));(Ext.cmd.derive("master.paket.Workspace",com.Form,{controller:"workspace-paket",layout:"border",title:"Paket",iconCls:"x-fa fa-cart-plus",defaults:{margin:"3 3 3 3",border:false},items:[{region:"center",ui:"panel-blue",xtype:"workspace-paketdetil",reference:"paketdetil"},{region:"east",header:{height:35},ui:"panel-blue",title:"Daftar Paket",xtype:"paket-list",reference:"paketlist",collapsible:true,floatable:true,split:true,flex:1,listeners:{select:"onSelectPaket"},doAfterLoad:function(n,o,m,p){if(m){if(o.length>0){n.setSelection(o[0])}}}}],load:function(l){var m=this,n=m.down("paket-list");n.setGridConfig({paging:true});n.load({})}},0,["workspace-paket"],["component","box","container","panel","form","com-form","workspace-paket"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-paket":true},["widget.workspace-paket"],0,[master.paket,"Workspace"],0));(Ext.cmd.derive("master.paket.WorkspaceController",Ext.app.ViewController,{onSelectPaket:function(p,n,s){var o=this,q=o.getReferences();if(n){q.paketdetil.load(n);q.paketdetil.loadRecord(n);q.paketdetil.setTitle("Daftar Item Paket - "+n.get("NAMA"))}}},0,0,0,0,["controller.workspace-paket"],0,[master.paket,"WorkspaceController"],0));(Ext.cmd.derive("master.paket.distribusitarif.Form",com.Form,{viewModel:{data:{temporery:undefined},formulas:{getTotal:function(C){var y=C("record.ADMINISTRASI"),x=C("record.SARANA"),A=C("record.BHP"),B=C("record.DOKTER_OPERATOR"),E=C("record.DOKTER_ANASTESI"),z=C("record.DOKTER_LAINNYA"),u=C("record.PENATA_ANASTESI"),D=C("record.PARAMEDIS"),w=C("record.NON_MEDIS"),v=y+x+A+B+E+z+u+D+w;return v}}},controller:"paket-distribusitarif-form",model:"data.model.DistribusiTarifPaket",layout:{align:"stretch",type:"hbox"},defaults:{border:false},items:[{layout:{type:"vbox",align:"stretch"},defaults:{xtype:"numberfield",hideTrigger:true,labelAlign:"top",margin:"5 5 5 5",bind:{readOnly:"{formConfig.simpan}"}},flex:1,items:[{fieldLabel:"Administrasi",bind:{value:"{record.ADMINISTRASI}"},name:"ADMINISTRASI"},{fieldLabel:"Sarana",bind:{value:"{record.SARANA}"},name:"SARANA"},{fieldLabel:"BHP",bind:{value:"{record.BHP}"},name:"BHP"},{fieldLabel:"Dokter Operator",bind:{value:"{record.DOKTER_OPERATOR}"},name:"DOKTER_OPERATOR"},{fieldLabel:"Dokter Anastesi",bind:{value:"{record.DOKTER_ANASTESI}"},name:"DOKTER_ANASTESI"},{fieldLabel:"Dokter Lainya",bind:{value:"{record.DOKTER_LAINNYA}"},name:"DOKTER_LAINNYA"}]},{layout:{type:"vbox",align:"stretch"},defaults:{labelAlign:"top",margin:"5 5 5 5",bind:{readOnly:"{formConfig.simpan}"}},flex:1,items:[{xtype:"numberfield",fieldLabel:"Penata Anastesi",hideTrigger:true,bind:{value:"{record.PENATA_ANASTESI}"},name:"PENATA_ANASTESI"},{xtype:"numberfield",fieldLabel:"Paramedis",hideTrigger:true,bind:{value:"{record.PARAMEDIS}"},name:"PARAMEDIS"},{xtype:"numberfield",fieldLabel:"Non Medis",hideTrigger:true,bind:{value:"{record.NON_MEDIS}"},name:"NON_MEDIS"},{xtype:"numberfield",fieldLabel:"Tarif",hideTrigger:true,readOnly:true,bind:{value:"{getTotal}"},name:"TARIF"},{xtype:"datefield",fieldLabel:"Tanggal SK",name:"TANGGAL_SK"},{xtype:"textfield",fieldLabel:"Nomor SK",name:"NOMOR_SK"}]}],buttons:[{text:"Ganti Distribusi Tarif Paket",bind:{hidden:"{!formConfig.simpan}"},ui:"soft-red",iconCls:"x-fa fa-exchange",handler:"onGanti",tooltip:{text:"Ganti Distribusi Tarif Paket"}},{text:"Simpan",ui:"soft-blue",iconCls:"x-fa fa-save",handler:"onSimpan",bind:{hidden:"{formConfig.simpan}"},tooltip:{text:"Simpan"}},{text:"Reset",bind:{hidden:"{formConfig.simpan}"},ui:"soft-red",iconCls:"x-fa fa-refresh",handler:"onReset",tooltip:{text:"Reset"}}]},0,["paket-distribusitarif-form"],["component","box","container","panel","form","com-form","paket-distribusitarif-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"paket-distribusitarif-form":true},["widget.paket-distribusitarif-form"],0,[master.paket.distribusitarif,"Form"],0));(Ext.cmd.derive("master.paket.distribusitarif.FormController",Ext.app.ViewController,{onReset:function(){var n=this,p=n.getView(),o=n.getViewModel().get("temporery"),m=p.getRecord();if(o){obj={PAKET:o.get("PAKET"),STATUS:1,TANGGAL:p.getSysdate()}}else{obj={PAKET:m.get("PAKET"),STATUS:1,TANGGAL:p.getSysdate()}}p.getForm().reset();p.createRecord(obj)},onSimpan:function(o){var n=this,q=n.getView(),s=q.getRecord(),p=n.getViewModel().get("temporery");if(p){p.set("STATUS",0);p.save();p.animateTarget=o;p.scope=n;p.showError=true;p.save({callback:function(e,g,f){if(f){q.save(o,{},function(l,u,m){if(m){n.getViewModel().set("temporery",undefined)}})}}})}else{q.save(o)}},onGanti:function(p){var n=this,q=n.getView(),o=n.getViewModel(),s=q.getRecord();q.showMessageBox({title:"Konfirmasi",message:"Apakah anda ingin mengganti tarif?",ui:"window-warning",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,defaultButton:"no",animateTarget:p,fn:function(e){if(e=="yes"){o.set("temporery",Ext.create("data.model.DistribusiTarifPaket",s.data));q.setFormConfig({viewOnly:!status,simpan:false});n.onReset()}}})}},0,0,0,0,["controller.paket-distribusitarif-form"],0,[master.paket.distribusitarif,"FormController"],0));(Ext.cmd.derive("master.paket.distribusitarif.List",com.Grid,{controller:"paket-distribusitarif-list",viewModel:{stores:{store:{type:"distribusi-tarif-paket-store"}}},cls:"x-br-top",border:false,reference:"discountList",columns:[{xtype:"rownumberer",text:"No",align:"left",width:60},{xtype:"numbercolumn",text:"ADMINISTRASI",dataIndex:"ADMINISTRASI",flex:1,format:"0,00",align:"right"},{xtype:"numbercolumn",text:"SARANA",dataIndex:"SARANA",flex:1,format:"0,00",align:"right"},{xtype:"numbercolumn",text:"DOKTER OPERATOR",dataIndex:"DOKTER_OPERATOR",flex:1,format:"0,00",align:"right"},{xtype:"numbercolumn",text:"DOKTER ANASTESI",dataIndex:"DOKTER_ANASTESI",flex:1,format:"0,00",align:"right"},{xtype:"numbercolumn",text:"DOKTER LAINNYA",dataIndex:"DOKTER_LAINNYA",flex:1,format:"0,00",align:"right"},{xtype:"numbercolumn",text:"PENATA ANASTESI",dataIndex:"PENATA_ANASTESI",flex:1,format:"0,00",align:"right"},{xtype:"numbercolumn",text:"PARAMEDIS",dataIndex:"PARAMEDIS",flex:1,format:"0,00",align:"right"},{xtype:"numbercolumn",text:"NON MEDIS",dataIndex:"NON_MEDIS",flex:1,format:"0,00",align:"right"},{xtype:"numbercolumn",text:"TARIF",dataIndex:"TARIF",flex:1,format:"0,00",align:"right"},{text:"NOMOR SK",dataIndex:"NOMOR_SK",flex:1},{xtype:"datecolumn",text:"TANGGAL SK",dataIndex:"TANGGAL_SK",flex:1,format:"d-m-Y H:i:s",align:"center"}]},0,["paket-distribusitarif-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","paket-distribusitarif-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"paket-distribusitarif-list":true},["widget.paket-distribusitarif-list"],0,[master.paket.distribusitarif,"List"],0));(Ext.cmd.derive("master.paket.distribusitarif.ListController",Ext.app.ViewController,{},0,0,0,0,["controller.paket-distribusitarif-list"],0,[master.paket.distribusitarif,"ListController"],0));(Ext.cmd.derive("master.paket.distribusitarif.Workspace",com.Form,{controller:"workspace-paket-distribusitarif",viewModel:{stores:{store:{type:"distribusi-tarif-paket-store"}}},layout:"fit",items:[{xtype:"tabpanel",layout:"border",ui:"header-tab",items:[{title:"FORM",xtype:"paket-distribusitarif-form",reference:"distribusiform",listeners:{save:"onSuccess"}},{title:"HISTORY",xtype:"paket-distribusitarif-list",reference:"distribusilist"}]}],load:function(n){var p=this,s=this.getViewModel().get("store"),q=p.down("paket-distribusitarif-form"),o=p.down("paket-distribusitarif-list");if(n){s.queryParams={PAKET:n,STATUS:1},s.load({callback:function(l,g,e){if(e){var m=l[0].get("STATUS")==1;q.setFormConfig({viewOnly:!m,simpan:m});q.loadRecord(l[0])}else{q.setFormConfig({viewOnly:!m,simpan:false});var f={PAKET:n,STATUS:1,TANGGAL:q.getSysdate()};q.createRecord(f)}}});o.load({PAKET:n,STATUS:0})}}},0,["workspace-paket-distribusitarif"],["component","box","container","panel","form","com-form","workspace-paket-distribusitarif"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-paket-distribusitarif":true},["widget.workspace-paket-distribusitarif"],0,[master.paket.distribusitarif,"Workspace"],0));(Ext.cmd.derive("master.paket.distribusitarif.WorkspaceController",Ext.app.ViewController,{onSuccess:function(l){var m=this,n=m.getView();if(l){n.load(l.get("PAKET"))}}},0,0,0,0,["controller.workspace-paket-distribusitarif"],0,[master.paket.distribusitarif,"WorkspaceController"],0));(Ext.cmd.derive("master.paketdetil.Form",com.Form,{viewModel:{stores:{comboobatstore:{type:"barang-store",queryParams:{STATUS:1},autoLoad:true},combotindakanstore:{type:"tindakan-store",queryParams:{STATUS:1},autoLoad:true},combojenisstore:{type:"referensi-store",queryParams:{JENIS:37},autoLoad:true},comboadministrasistore:{type:"administrasi-store",queryParams:{STATUS:1},autoLoad:true},comboo2store:{type:"referensi-store",queryParams:{JENIS:0},autoLoad:true}},data:{store:undefined}},model:"data.model.PaketDetil",controller:"form-paketdetil",border:false,items:[{layout:"hbox",flex:1,border:false,defaults:{margin:"2 2 2 2"},items:[{xtype:"combo",border:false,flex:2,name:"JENIS",bind:{store:"{combojenisstore}"},displayField:"DESKRIPSI",valueField:"ID",allowBlank:false,emptyText:"[ Jenis Items ]",listeners:{select:"onSelect"}},{xtype:"combo",flex:2,forceSelection:true,multiSelect:true,name:"ITEM",queryMode:"remote",bind:{store:"{store}"},displayField:"NAMA",queryParam:"QUERY",minChars:2,reference:"item",valueField:"ID",emptyText:"[ NAMA PAKET ]"},{xtype:"numberfield",flex:1,name:"QTY",allowBlank:false,reference:"qty",hideTrigger:true,emptyText:"[ QTY ]"},{xtype:"button",text:"Add",ui:"soft-green",iconCls:"x-fa fa-save",border:false,listeners:{click:"onSimpan"}}]}]},0,["form-paketdetil"],["component","box","container","panel","form","com-form","form-paketdetil"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-paketdetil":true},["widget.form-paketdetil"],0,[master.paketdetil,"Form"],0));(Ext.cmd.derive("master.paketdetil.FormController",Ext.app.ViewController,{selectId:0,onSelect:function(v,t,s,u){var w=this,f=w.getReferences(),e=w.getViewModel();f.item.select(null);w.selectId=t.get("ID"),store=null;if(t.get("ID")==1){store=e.getStore("combotindakanstore")}if(t.get("ID")==2){store=e.getStore("comboobatstore")}if(t.get("ID")==3){store=e.getStore("comboadministrasistore")}if(t.get("ID")==4){store=e.getStore("comboo2store")}f.qty.setValue(t.get("ID")>2?1:0);f.qty.setReadOnly(t.get("ID")>2);e.set("store",store);w.getView().fireEvent("select",t.get("ID"))},onSimpan:function(p){var o=this,s=o.getView(),q=o.getReferences(),u=s.getRecord(),t=q.item.getSelection();if(t==null&&o.selectId!=4){s.notifyMessage("Silahkan pilih Item Paket terlebih dahulu !","danger-red");return}if(u){s.save(p)}else{s.notifyMessage("Silahkan pilih Paket terlebih dahulu !","danger-red")}},onBatal:function(g){var l=this.getView();l.getForm().reset()}},0,0,0,0,["controller.form-paketdetil"],0,[master.paketdetil,"FormController"],0));(Ext.cmd.derive("master.paketdetil.List",com.Grid,{controller:"paketdetil-list",viewModel:{data:{tindakan:false,id:undefined,listConfig:{enabledDistribusiTarif:false}},stores:{store:{type:"paketdetil-store"}}},flex:1,border:false,tindakan:false,reference:"master-obat",columns:[{xtype:"rownumberer",text:"No",align:"left",width:40},{text:"NAMA ITEM",dataIndex:"ITEM",flex:4,renderer:"onItem"},{text:"QTY",dataIndex:"QTY",flex:1,align:"right",format:"0,000.00"},{xtype:"checkcolumn",header:"STATUS",dataIndex:"STATUS",stopSelection:true,listeners:{checkchange:"onChange",headertriggerclick:"onHeaderTriggerClick",focusleave:"onFocusLeave"}},{text:"Distribusi",xtype:"actioncolumn",align:"center",bind:{hidden:"{!listConfig.enabledDistribusiTarif}"},width:100,items:[{xtype:"tool",iconCls:"x-fa fa-pencil-square-o",tooltip:"Distribusi Tarif",handler:"onClickDistribusiTarif"}]}]},0,["paketdetil-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","paketdetil-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"paketdetil-list":true},["widget.paketdetil-list"],0,[master.paketdetil,"List"],0));(Ext.cmd.derive("master.paketdetil.ListController",Ext.app.ViewController,{menu:undefined,statusMenuItem:undefined,lastSelectedStatus:1,onItem:function(g,w,s,v,u,t){var f=s.get("REFERENSI");return f?(f.NAMA_ITEM?f.NAMA_ITEM.NAMA:""):""},onChange:function(s,w,x){var y=this,q=y.getViewModel(),u=y.getView(),t=q.get("store"),v=t.getAt(w);v.set("STATUS",x?1:0);v.scope=this;v.save({callback:function(l,g,e){if(e){var f="Status Item Paket di"+(x==true?"Aktifkan":"Non Aktifkan");u.notifyMessage(f)}}})},onClickDistribusiTarif:function(A,s,x){var u=this,t=u.getView(),w=A.getStore().getAt(s),z=w.get("ID"),y=w.get("REFERENSI"),v=y?(y.NAMA_ITEM?y.NAMA_ITEM.NAMA:""):"";t.openDialog("",true,0,0,{title:v,xtype:"workspace-paketdetil-distribusitarif",ui:"panel-cyan",showCloseButton:true},function(f,e){var g=e.down("workspace-paketdetil-distribusitarif");g.load(w.get("ID"));e.on({close:function(){t.reload()}})})},onHeaderTriggerClick:function(q,e,v,s,t){var w=this,u=q.getMenu();w.menu=u;if(w.statusMenuItem==undefined){w.statusMenuItem=u.add({text:"Status",menu:[{xtype:"segmentedbutton",vertical:true,defaults:{textAlign:"left"},items:[{text:"All",STATUS:-1,pressed:w.lastSelectedStatus==-1?true:false},{text:"Aktif",STATUS:1,pressed:w.lastSelectedStatus==1?true:false},{text:"Tidak Aktif",STATUS:0,pressed:w.lastSelectedStatus==0?true:false}],listeners:{scope:w,toggle:"onStatus"}}]})}},onStatus:function(n,p){var o=this,s=o.getView(),q=s.getStore();o.lastSelectedStatus=p.STATUS;if(p.STATUS==-1){delete q.queryParams.STATUS}else{s.setParams({STATUS:p.STATUS})}if(o.menu){o.menu.remove(o.statusMenuItem);o.menu.hide();o.statusMenuItem=undefined}s.load()},onFocusLeave:function(){if(this.menu){this.menu.remove(this.statusMenuItem);this.statusMenuItem=undefined}}},0,0,0,0,["controller.paketdetil-list"],0,[master.paketdetil,"ListController"],0));(Ext.cmd.derive("master.paketdetil.Workspace",com.Form,{controller:"workspace-paketdetil",border:false,title:"Daftar Item Paket",layout:"border",model:"data.model.Paket",viewModel:{data:{record:undefined,uisAktif:["soft-black","soft-green"]},formulas:{getAktifStatusText:function(f){return f("record.STATUS")==1?"Aktif":""},getNonAktifStatusText:function(f){return f("record.STATUS")==0?"Non Aktif":""}}},header:{iconCls:"x-fa fa-list",margin:0,padding:"2 5 2 5",height:35,layout:{type:"hbox",align:"stretch"},bind:{title:"{getTitle}"},items:[{xtype:"fieldcontainer",defaultType:"button",border:false,layout:"hbox",defaults:{width:80,handler:"onStatus"},border:false,items:[{reference:"btnAktif",tooltip:"Aktifkan",bind:{text:"{getAktifStatusText}"},status:1},{reference:"btnNonAktif",tooltip:"Non Aktifkan",bind:{text:"{getNonAktifStatusText}"},status:0}]}]},defaults:{margin:"2 2 2 2"},bodyPadding:2,items:[{region:"north",title:"Form Item Paket",xtype:"panel",iconCls:"x-fa fa-pencil-square-o",layout:"hbox",defaults:{margin:"2 2 2 2"},margin:"2 2 2 2",items:[{xtype:"form-paketdetil",flex:1,reference:"formpaketdetil",listeners:{save:"onSuccess",select:"onSelect"}}]},{region:"center",xtype:"com-tab",reference:"paketdetiltab",items:[{xtype:"paketdetil-list",iconCls:"x-fa fa-stethoscope",tooltip:"Daftar Tindakan",border:false,tindakan:false,jenis:1,reference:"tindakanlist"},{xtype:"paketdetil-list",iconCls:"x-fa fa-medkit",tooltip:"Daftar Farmasi",border:false,tindakan:true,jenis:2,reference:"farmasilist"},{xtype:"paketdetil-list",iconCls:"x-fa fa-money",tooltip:"Daftar Administrasi",border:false,tindakan:false,jenis:3,reference:"administrasilist"},{xtype:"paketdetil-list",iconCls:"x-fa fa-heart",tooltip:"Daftar O2",border:false,tindakan:true,jenis:4,reference:"o2list"}]}],load:function(p){var v=this,w=v.down("[reference=formpaketdetil]"),t=v.down("[reference=tindakanlist]"),q=v.down("[reference=farmasilist]"),s=v.down("[reference=administrasilist]"),u=v.down("[reference=o2list]");if(p){v.loadRecord(p);t.setListConfig({enabledDistribusiTarif:true});t.loadStore({PAKET:p.get("ID"),JENIS:1,STATUS:1});q.loadStore({PAKET:p.get("ID"),JENIS:2,STATUS:1});s.loadStore({PAKET:p.get("ID"),JENIS:3,STATUS:1});u.loadStore({PAKET:p.get("ID"),JENIS:4,STATUS:1});w.createRecord({PAKET:p.get("ID"),STATUS:1})}},onLoadRecord:function(m,l){var m=this,n=m.getViewModel();if(l){m.setUiButtons(l.get("STATUS"))}},setUiButtons:function(s){var n=this,o=n.getViewModel(),p=o.get("uisAktif"),q=n.getController().getReferences();q.btnAktif.setUI(p[s==1?1:0]);q.btnNonAktif.setUI(p[s==0?1:0])}},0,["workspace-paketdetil"],["component","box","container","panel","form","com-form","workspace-paketdetil"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-paketdetil":true},["widget.workspace-paketdetil"],0,[master.paketdetil,"Workspace"],0));(Ext.cmd.derive("master.paketdetil.DetilController",Ext.app.ViewController,{onSuccess:function(){var o=this,p=o.getViewModel(),n=p.get("record"),q=o.getReferences();q.tindakanlist.reload();q.farmasilist.reload();q.formpaketdetil.reset();q.formpaketdetil.createRecord({PAKET:n.get("ID"),STATUS:1});var s=q.paketdetiltab.getActiveTab();if(s){if(s.reload){s.reload()}}},onBatal:function(){var n=this,o=n.getViewModel(),m=o.get("record"),p=n.getReferences();p.formpaketdetil.reset();p.formpaketdetil.createRecord({PAKET:m.get("ID"),STATUS:1})},onSelect:function(l){var g=this.getReferences();g.paketdetiltab.setActiveTab(l-1)},onStatus:function(o){var m="Anda Yakin Ingin"+(o.status==1?"":"Non")+"Aktifkan Paket Ini ?",n=this.getViewModel().get("record"),p=this.getView();p.showMessageBox({title:"Paket",message:m,ui:"window-warning",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,defaultButton:"no",animateTarget:o,fn:function(f){if(f==="yes"){var e=n.get("STATUS");n.set("STATUS",o.status);n.showError=true;n.animateTarget=o;n.scope=this;n.save({callback:function(l,s,g){if(s.hasException()||!g){n.set("STATUS",e);p.setUiButtons(e)}if(g){p.setUiButtons(o.status);p.notifyMessage((o.status==1?"":"Non ")+"Aktif Paket berhasil")}}})}}})}},0,0,0,0,["controller.workspace-paketdetil"],0,[master.paketdetil,"DetilController"],0));(Ext.cmd.derive("master.paketdetil.distribusitarif.Form",com.Form,{viewModel:{data:{temporery:undefined},formulas:{getTotal:function(C){var y=C("record.ADMINISTRASI"),x=C("record.SARANA"),A=C("record.BHP"),B=C("record.DOKTER_OPERATOR"),E=C("record.DOKTER_ANASTESI"),z=C("record.DOKTER_LAINNYA"),u=C("record.PENATA_ANASTESI"),D=C("record.PARAMEDIS"),w=C("record.NON_MEDIS"),v=y+x+A+B+E+z+u+D+w;return v}}},controller:"paketdetil-distribusitarif-form",model:"master.paketdetil.distribusitarif.Model",layout:{align:"stretch",type:"hbox"},defaults:{border:false},items:[{layout:{type:"vbox",align:"stretch"},defaults:{xtype:"numberfield",labelAlign:"top",margin:"5 5 5 5",hideTrigger:true,bind:{readOnly:"{formConfig.simpan}"}},flex:1,items:[{fieldLabel:"Administrasi",bind:{value:"{record.ADMINISTRASI}"},name:"ADMINISTRASI"},{fieldLabel:"Sarana",bind:{value:"{record.SARANA}"},name:"SARANA"},{fieldLabel:"BHP",bind:{value:"{record.BHP}"},name:"BHP"},{fieldLabel:"Dokter Operator",bind:{value:"{record.DOKTER_OPERATOR}"},name:"DOKTER_OPERATOR"},{fieldLabel:"Dokter Anastesi",bind:{value:"{record.DOKTER_ANASTESI}"},name:"DOKTER_ANASTESI"},{fieldLabel:"Dokter Lainya",bind:{value:"{record.DOKTER_LAINNYA}"},name:"DOKTER_LAINNYA"}]},{layout:{type:"vbox",align:"stretch"},defaults:{labelAlign:"top",margin:"5 5 5 5",bind:{readOnly:"{formConfig.simpan}"}},flex:1,items:[{xtype:"numberfield",fieldLabel:"Penata Anastesi",hideTrigger:true,bind:{value:"{record.PENATA_ANASTESI}"},name:"PENATA_ANASTESI"},{xtype:"numberfield",fieldLabel:"Paramedis",hideTrigger:true,bind:{value:"{record.PARAMEDIS}"},name:"PARAMEDIS"},{xtype:"numberfield",fieldLabel:"Non Medis",hideTrigger:true,bind:{value:"{record.NON_MEDIS}"},name:"NON_MEDIS"},{xtype:"numberfield",fieldLabel:"Tarif",hideTrigger:true,readOnly:true,bind:{value:"{getTotal}"},name:"TARIF"},{xtype:"datefield",fieldLabel:"Tanggal SK",name:"TANGGAL_SK"},{xtype:"textfield",fieldLabel:"Nomor SK",name:"NOMOR_SK"}]}],buttons:[{text:"Ganti Distribusi Tarif Paket Detil",bind:{hidden:"{!formConfig.simpan}"},ui:"soft-red",iconCls:"x-fa fa-exchange",handler:"onGanti",tooltip:{text:"Ganti Distribusi Tarif Paket Detil"}},{text:"Simpan",ui:"soft-blue",iconCls:"x-fa fa-save",handler:"onSimpan",bind:{hidden:"{formConfig.simpan}"},tooltip:{text:"Simpan"}},{text:"Reset",bind:{hidden:"{formConfig.simpan}"},ui:"soft-red",iconCls:"x-fa fa-refresh",handler:"onReset",tooltip:{text:"Reset"}}]},0,["paketdetil-distribusitarif-form"],["component","box","container","panel","form","com-form","paketdetil-distribusitarif-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"paketdetil-distribusitarif-form":true},["widget.paketdetil-distribusitarif-form"],0,[master.paketdetil.distribusitarif,"Form"],0));(Ext.cmd.derive("master.paketdetil.distribusitarif.FormController",Ext.app.ViewController,{onReset:function(){var n=this,p=n.getView(),o=n.getViewModel().get("temporery"),m=p.getRecord();if(o){obj={PAKET_DETIL:o.get("PAKET_DETIL"),STATUS:1,TANGGAL:p.getSysdate()}}else{obj={PAKET_DETIL:m.get("PAKET_DETIL"),STATUS:1,TANGGAL:p.getSysdate()}}p.getForm().reset();p.createRecord(obj)},onSimpan:function(o){var n=this,q=n.getView(),s=q.getRecord(),p=n.getViewModel().get("temporery");if(p){p.set("STATUS",0);p.save();p.animateTarget=o;p.scope=n;p.showError=true;p.save({callback:function(e,g,f){if(f){q.save(o,{},function(l,u,m){if(m){n.getViewModel().set("temporery",undefined)}})}}})}else{q.save(o)}},onGanti:function(p){var n=this,q=n.getView(),o=n.getViewModel(),s=q.getRecord();q.showMessageBox({title:"Konfirmasi",message:"Apakah anda ingin mengganti tarif?",ui:"window-warning",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,defaultButton:"no",animateTarget:p,fn:function(e){if(e=="yes"){o.set("temporery",Ext.create("master.paketdetil.distribusitarif.Model",s.data));q.setFormConfig({viewOnly:!status,simpan:false});n.onReset()}}})}},0,0,0,0,["controller.paketdetil-distribusitarif-form"],0,[master.paketdetil.distribusitarif,"FormController"],0));(Ext.cmd.derive("master.paketdetil.distribusitarif.List",com.Grid,{controller:"paketdetil-distribusitarif-list",viewModel:{stores:{store:{type:"master-paketdetil-distribusitarif-Store"}}},cls:"x-br-top",border:false,reference:"discountList",columns:[{xtype:"rownumberer",text:"No",align:"left",width:60},{xtype:"numbercolumn",text:"ADMINISTRASI",dataIndex:"ADMINISTRASI",flex:1,format:"0,00",align:"right"},{xtype:"numbercolumn",text:"SARANA",dataIndex:"SARANA",flex:1,format:"0,00",align:"right"},{xtype:"numbercolumn",text:"DOKTER OPERATOR",dataIndex:"DOKTER_OPERATOR",flex:1,format:"0,00",align:"right"},{xtype:"numbercolumn",text:"DOKTER ANASTESI",dataIndex:"DOKTER_ANASTESI",flex:1,format:"0,00",align:"right"},{xtype:"numbercolumn",text:"DOKTER LAINNYA",dataIndex:"DOKTER_LAINNYA",flex:1,format:"0,00",align:"right"},{xtype:"numbercolumn",text:"PENATA ANASTESI",dataIndex:"PENATA_ANASTESI",flex:1,format:"0,00",align:"right"},{xtype:"numbercolumn",text:"PARAMEDIS",dataIndex:"PARAMEDIS",flex:1,format:"0,00",align:"right"},{xtype:"numbercolumn",text:"NON MEDIS",dataIndex:"NON_MEDIS",flex:1,format:"0,00",align:"right"},{xtype:"numbercolumn",text:"TARIF",dataIndex:"TARIF",flex:1,format:"0,00",align:"right"},{text:"NOMOR SK",dataIndex:"NOMOR_SK",flex:1},{xtype:"datecolumn",text:"TANGGAL SK",dataIndex:"TANGGAL_SK",flex:1,format:"d-m-Y H:i:s",align:"center"}]},0,["paketdetil-distribusitarif-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","paketdetil-distribusitarif-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"paketdetil-distribusitarif-list":true},["widget.paketdetil-distribusitarif-list"],0,[master.paketdetil.distribusitarif,"List"],0));(Ext.cmd.derive("master.paketdetil.distribusitarif.ListController",Ext.app.ViewController,{},0,0,0,0,["controller.paketdetil-distribusitarif-list"],0,[master.paketdetil.distribusitarif,"ListController"],0));(Ext.cmd.derive("master.paketdetil.distribusitarif.Workspace",com.Form,{controller:"workspace-paketdetil-distribusitarif",viewModel:{stores:{store:{type:"master-paketdetil-distribusitarif-Store"}}},layout:"fit",items:[{xtype:"tabpanel",layout:"border",ui:"header-tab",items:[{title:"FORM",xtype:"paketdetil-distribusitarif-form",reference:"distribusiform",listeners:{save:"onSuccess"}},{title:"HISTORY",xtype:"paketdetil-distribusitarif-list",reference:"distribusilist"}]}],load:function(n){var p=this,s=this.getViewModel().get("store"),q=p.down("paketdetil-distribusitarif-form"),o=p.down("paketdetil-distribusitarif-list");if(n){s.queryParams={PAKET_DETIL:n,STATUS:1},s.load({callback:function(l,g,e){if(e){var m=l[0].get("STATUS")==1;q.setFormConfig({viewOnly:!m,simpan:m});q.loadRecord(l[0])}else{q.setFormConfig({viewOnly:!m,simpan:false});var f={PAKET_DETIL:n,STATUS:1,TANGGAL:q.getSysdate()};q.createRecord(f)}}});o.load({PAKET_DETIL:n,STATUS:0})}}},0,["workspace-paketdetil-distribusitarif"],["component","box","container","panel","form","com-form","workspace-paketdetil-distribusitarif"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-paketdetil-distribusitarif":true},["widget.workspace-paketdetil-distribusitarif"],0,[master.paketdetil.distribusitarif,"Workspace"],0));(Ext.cmd.derive("master.paketdetil.distribusitarif.WorkspaceController",Ext.app.ViewController,{onSuccess:function(l){var m=this,n=m.getView();if(l){n.load(l.get("PAKET_DETIL"))}}},0,0,0,0,["controller.workspace-paketdetil-distribusitarif"],0,[master.paketdetil.distribusitarif,"WorkspaceController"],0));(Ext.cmd.derive("master.pakettindakanfarmasi.Combo",com.Combo,{viewModel:{stores:{store:{type:"tindakan-paket-store"}}},bind:{store:"{store}"},emptyText:"[ Masukkan Nama Paket ]",queryMode:"remote",hideTrigger:true,queryParam:"QUERY",displayField:"NAMA",valueField:"ID",typeAhead:true,minChars:2,tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="x-boundlist-item">',"[ {ID} ] - <strong>{NAMA}</strong>","</div>","</tpl>"),displayTpl:Ext.create("Ext.XTemplate",'<tpl for=".">',"{ID} - {NAMA}","</tpl>")},0,["paket-tindakan-farmasi-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","paket-tindakan-farmasi-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"paket-tindakan-farmasi-combo":true},["widget.paket-tindakan-farmasi-combo"],0,[master.pakettindakanfarmasi,"Combo"],0));(Ext.cmd.derive("master.pakettindakanfarmasi.Detil",com.Grid,{controller:"detil-barang-tindakan-paket",flex:1,viewModel:{stores:{store:{type:"tindakan-paket-farmasi-store",autoSync:true}}},cls:"x-br-top",border:true,initComponent:function(){var f=this;f.cellEditing=new Ext.grid.plugin.CellEditing({clicksToEdit:1});f.plugins=[f.cellEditing];f.columns=[{xtype:"templatecolumn",text:"Nama Obat",align:"left",tpl:'<div style="font-weight: bold; white-space:normal !important;">{REFERENSI.BARANG.NAMA}</div>',flex:1},{text:"Qty",width:90,dataIndex:"JUMLAH",editor:{xtype:"numberfield",allowBlank:false,hideTrigger:true}},{xtype:"checkcolumn",header:"STATUS",dataIndex:"STATUS",width:50,stopSelection:true,listeners:{checkchange:"onChange"}}],f.dockedItems=[{xtype:"pagingtoolbar",bind:{store:"{store}"},dock:"bottom"}];com.Grid.prototype.initComponent.apply(this,arguments)},onLoadRecord:function(l){var m=this,n=m.getViewModel().get("store");n.removeAll();n.queryParams={TINDAKAN:l};n.load()}},0,["detil-barang-tindakan-paket"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","detil-barang-tindakan-paket"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"detil-barang-tindakan-paket":true},["widget.detil-barang-tindakan-paket"],0,[master.pakettindakanfarmasi,"Detil"],0));(Ext.cmd.derive("master.pakettindakanfarmasi.DetilController",Ext.app.ViewController,{onChange:function(t,f,w){var v=this,u=v.getViewModel(),g=u.get("store"),e=g.getAt(f);e.set("STATUS",w?1:0);e.scope=this;e.save({callback:function(m,l,n){if(n){Ext.toast({headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",html:"Status Item Paket di"+(w==true?"Aktifkan":"Non Aktifkan"),align:"t"})}}})}},0,0,0,0,["controller.detil-barang-tindakan-paket"],0,[master.pakettindakanfarmasi,"DetilController"],0));(Ext.cmd.derive("master.pakettindakanfarmasi.Form",com.Form,{controller:"form-paket-farmasi",model:"master.tindakanpaket.Model",bodyPadding:10,items:[{xtype:"textfield",name:"NAMA",labelWidth:150,width:500,fieldLabel:"Nama / Deskripsi",allowBlank:false}],buttons:[{text:"Simpan",handler:"onSimpan"}]},0,["form-paket-farmasi"],["component","box","container","panel","form","com-form","form-paket-farmasi"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-paket-farmasi":true},["widget.form-paket-farmasi"],0,[master.pakettindakanfarmasi,"Form"],0));(Ext.cmd.derive("master.pakettindakanfarmasi.FormController",Ext.app.ViewController,{init:function(){var g=this,l=g.getView();l.down("[name=NAMA]").focus(false,1000)},onSimpan:function(e){var f=this,p=f.getView(),q=p.getForm().getValues(),s=f.getViewModel().get("record");if(p.getForm().isValid()){s.set(q);s.showError=true;s.animateTarget=e;s.scope=f;s.save({callback:function(g,m,l){if(m.hasException()||!l){}if(l){p.notifyMessage("Data telah tersimpan");p.fireEvent("success",g)}}})}}},0,0,0,0,["controller.form-paket-farmasi"],0,[master.pakettindakanfarmasi,"FormController"],0));(Ext.cmd.derive("master.pakettindakanfarmasi.List",com.Grid,{controller:"list-tindakan-paket",flex:1,viewModel:{stores:{store:{type:"tindakan-paket-store"},paketstore:{type:"tindakan-paket-farmasi-store"}},data:{hiddenStatus:true,hiddenPilihan:true}},cls:"x-br-top",border:true,header:{items:[{xtype:"button",iconCls:"x-fa fa-plus",margin:"0 0 0 1",tooltip:"Tambah Paket",reference:"BtnAddPaket",listeners:{click:"onAddPaket"}}]},columns:[{xtype:"templatecolumn",text:"Tindakan",align:"left",tpl:'<div style="font-weight: bold; white-space:normal !important;">{NAMA}</div>',flex:1},{xtype:"checkcolumn",header:"STATUS",dataIndex:"STATUS",width:90,stopSelection:true,listeners:{checkchange:"onChange"},bind:{hidden:"{hiddenStatus}"}},{text:"Pilih",xtype:"actioncolumn",align:"center",width:50,items:[{xtype:"tool",iconCls:"x-fa fa-arrow-circle-right",handler:"onOrderPaket"}],bind:{hidden:"{hiddenPilihan}"}}],onLoadRecord:function(m){var n=this,o=n.getViewModel(),p=o.get("store");if(m==1){o.set("hiddenStatus",true);o.set("hiddenPilihan",false);p.removeAll();p.queryParams={STATUS:1};p.load()}else{o.set("hiddenStatus",false);o.set("hiddenPilihan",true);p.load()}},setView:function(f){this.ownerCt.setLoadData(f)}},0,["list-master-tindakan-paket"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","list-master-tindakan-paket"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"list-master-tindakan-paket":true},["widget.list-master-tindakan-paket"],0,[master.pakettindakanfarmasi,"List"],0));(Ext.cmd.derive("master.pakettindakanfarmasi.ListBarang",com.Grid,{flex:1,viewModel:{stores:{store:{type:"barang-store",autoLoad:true}}},cls:"x-br-top",border:true,header:{items:[{xtype:"search-field",cls:"x-text-border",autoFocus:true,emptyText:"Cari ...",flex:1,listeners:{search:"onsearch",clear:"onClear"}}]},columns:[{xtype:"templatecolumn",text:"Nama Obat",align:"left",tpl:'<div style="font-weight: bold; white-space:normal !important;">{NAMA}</div>',flex:1}],dockedItems:[{xtype:"pagingtoolbar",bind:{store:"{store}"},dock:"bottom",displayInfo:true}]},0,["list-barang-paket"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","list-barang-paket"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"list-barang-paket":true},["widget.list-barang-paket"],0,[master.pakettindakanfarmasi,"ListBarang"],0));(Ext.cmd.derive("master.pakettindakanfarmasi.ListController",Ext.app.ViewController,{onAddPaket:function(){var g=this,l=g.getView();vm=g.getViewModel();model={};l.openDialog("",true,520,150,{xtype:"form-paket-farmasi",title:"Paket Baru",showCloseButton:true,ui:"panel-red"},function(e,f){var n=f.down("form-paket-farmasi");n.createRecord({});n.focus("NAMA");n.on("success",function(m){l.refresh();f.close()})})},onChange:function(t,f,w){var v=this,u=v.getViewModel(),g=u.get("store"),e=g.getAt(f);e.set("STATUS",w?1:0);e.scope=this;e.save({callback:function(m,l,n){if(n){v.getView().notifyMessage("Status Item Paket di"+(w==true?"Aktifkan":"Non Aktifkan"))}}})},onsearch:function(q,f){var e=this,s=e.getViewModel(),p=s.get("store");p.queryParams={QUERY:f};p.removeAll();p.load()},onClear:function(){var m=this,l=m.getViewModel(),n=l.get("store");delete n.queryParams.QUERY;n.removeAll();n.load()},onOrderPaket:function(o,m,p){var n=o.getStore().getAt(m);this.setOrderData(n.get("ID"))},setOrderData:function(l){var m=this,n=m.getView().ownerCt.getViewModel().get("paketstore");n.removeAll();n.queryParams=n.queryParams||{};n.queryParams={TINDAKAN:l,STATUS:1};n.load({callback:function(f,g,e){if(e){m.getView().fireEvent("orderpaket",data)}}})}},0,0,0,0,["controller.list-tindakan-paket"],0,[master.pakettindakanfarmasi,"ListController"],0));(Ext.cmd.derive("master.pakettindakanfarmasi.Workspace",com.Form,{controller:"workspace-paket-tindakan-farmasi",layout:"border",defaults:{margin:"2.2.2.2",flex:1},initComponent:function(){var f=this;f.items=[{region:"west",ui:"panel-red",title:"Tindakan",reference:"tindakanpaketfarmasi",iconCls:"x-fa fa-list",xtype:"list-master-tindakan-paket",listeners:{select:"onSelectTindakan"}},{region:"center",header:{height:35},ui:"panel-red",reference:"paketbarangfarmasi",title:"Paket Farmasi",iconCls:"x-fa fa-list",xtype:"detil-barang-tindakan-paket",viewConfig:{plugins:{ptype:"gridviewdragdrop",enableDrag:false},listeners:{scope:f.getController(),drop:"onDropBarang"}}},{region:"east",title:"Barang",ui:"panel-red",showSearch:true,hideHeaders:true,iconCls:"x-fa fa-list",reference:"daftarpeket",xtype:"barang-list",viewConfig:{plugins:{ptype:"gridviewdragdrop",enableDrop:false},copy:true}}];com.Form.prototype.initComponent.apply(this,arguments)},load:function(){var f=this;ref=f.down("[reference=tindakanpaketfarmasi]");barang=f.down("[reference=daftarpeket]");ref.onLoadRecord(0);barang.load({STATUS:1})}},0,["workspace-paket-tindakan-farmasi"],["component","box","container","panel","form","com-form","workspace-paket-tindakan-farmasi"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-paket-tindakan-farmasi":true},["widget.workspace-paket-tindakan-farmasi"],0,[master.pakettindakanfarmasi,"Workspace"],0));(Ext.cmd.derive("master.pakettindakanfarmasi.WorkspaceController",Ext.app.ViewController,{onSelectTindakan:function(p,m){var n=this,o=n.getReferences().paketbarangfarmasi;o.onLoadRecord(m.get("ID"))},onDropBarang:function(F,e,G,B){var E=this,z=E.getReferences().tindakanpaketfarmasi.getSelection(),A=z[0].get("ID"),y=E.getViewModel(),f=y.get("record"),D=Ext.Array.clone(e.records),g=new Date(),C=0;if(z[0].get("ID")){e.records=[];Ext.Array.each(D,function(l){l=Ext.create("inventory.paketfarmasi.Model",{BARANG:l.get("ID"),TINDAKAN:A});C++;E.simpanPaketFarmasi(l,false,function(m,n){e.records.push(l);if(C==D.length){E.loadBarangPaket(A)}})})}},privates:{simpanPaketFarmasi:function(q,p,f){var s=this,p=p!=undefined?p:true,e=q.get("ID");q.showError=true;q.save({callback:function(g,m,l){if(l){s.getView().notifyMessage("Sukses")}if(Ext.isFunction(f)){f(g,l)}}})},loadBarangPaket:function(m){var n=this,o=n.getReferences(),p=o.paketbarangfarmasi;p.onLoadRecord(m)}}},0,0,0,0,["controller.workspace-paket-tindakan-farmasi"],0,[master.pakettindakanfarmasi,"WorkspaceController"],0));(Ext.cmd.derive("master.paramedis.Combo",master.pegawai.Combo,{viewModel:{stores:{store:{type:"perawat-store"}}},valueField:"ID",loadStore:function(){var f=this.getViewModel().get("store");if(f){f.load()}}},0,["paramedis-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","pegawai-combo","paramedis-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"pegawai-combo":true,"paramedis-combo":true},["widget.paramedis-combo"],0,[master.paramedis,"Combo"],0));(Ext.cmd.derive("master.parameterhasil.Form",com.Form,{controller:"parameterhasil-form",model:"data.model.ParameterTindakanLab",layout:{type:"hbox"},defaults:{margin:"0 2 2 2"},defaultType:"textfield",initComponent:function(){var f=this;f.comboSatuan=Ext.create("master.referensi.Combo",{params:{JENIS:35},emptyText:"SATUAN",name:"SATUAN",flex:1,monitorTab:true,selectOnTab:true,editable:true});f.comboSatuan.getViewModel().get("store").load();f.items=[{name:"PARAMETER",emptyText:"PARAMETER",flex:2,bind:{readOnly:"{formConfig.simpan}"}},{name:"NILAI_RUJUKAN",emptyText:"NILAI RUJUKAN",flex:1},{xtype:f.comboSatuan},{name:"INDEKS",emptyText:"INDEKS",flex:1}],f.buttons=[{text:"Simpan",ui:"soft-green",iconCls:"x-fa fa-save",listeners:{click:"onSimpan"}},{text:"Reset",ui:"soft-red",iconCls:"x-fa fa-times",listeners:{click:"onBatal"}}];com.Form.prototype.initComponent.apply(this,arguments)}},0,["parameterhasil-form"],["component","box","container","panel","form","com-form","parameterhasil-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"parameterhasil-form":true},["widget.parameterhasil-form"],0,[master.parameterhasil,"Form"],0));(Ext.cmd.derive("master.parameterhasil.FormController",Ext.app.ViewController,{onSimpan:function(m){var l=this,n=l.getView();n.save(m)},onBatal:function(l){var m=this,n=m.getView();n.fireEvent("save",true)}},0,0,0,0,["controller.parameterhasil-form"],0,[master.parameterhasil,"FormController"],0));(Ext.cmd.derive("master.parameterhasil.List",com.Grid,{controller:"parameterhasil-list",viewModel:{stores:{store:{type:"parametertindakanlab-store"}}},border:false,columns:[{xtype:"rownumberer",text:"No",align:"left",width:60},{text:"ID",dataIndex:"ID",flex:1},{text:"PARAMETER",dataIndex:"PARAMETER",flex:2},{text:"NILAI RUJUKAN",flex:2,dataIndex:"NILAI_RUJUKAN"},{text:"SATUAN",dataIndex:"SATUAN",flex:1,renderer:"onRenderSatuan"},{text:"INDEKS",dataIndex:"INDEKS",flex:2},{xtype:"checkcolumn",header:"STATUS",dataIndex:"STATUS",width:90,listeners:{checkchange:"onChange"}}]},0,["parameterhasil-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","parameterhasil-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"parameterhasil-list":true},["widget.parameterhasil-list"],0,[master.parameterhasil,"List"],0));(Ext.cmd.derive("master.parameterhasil.ListController",Ext.app.ViewController,{onRenderSatuan:function(m,o,n){var p=n.get("REFERENSI");satuan=p?(p.SATUAN?p.SATUAN.DESKRIPSI:""):"";return satuan},onChange:function(u,f,x){var w=this,e=w.getView(),v=w.getViewModel(),g=v.get("store"),y=g.getAt(f);y.set("STATUS",x?1:0);y.scope=this;y.save({callback:function(m,l,n){if(n){e.notifyMessage("Status Parameter di"+(x==true?"Aktifkan":"NonAktifkan "))}}})}},0,0,0,0,["controller.parameterhasil-list"],0,[master.parameterhasil,"ListController"],0));(Ext.cmd.derive("master.parameterhasil.Workspace",com.Form,{controller:"workspace-parameterhasil",border:false,layout:"border",defaults:{margin:"2 2 2 2",border:false},bodyPadding:0,initComponent:function(){var f=this;f.items=[{region:"north",reference:"parameterhasilform",xtype:"parameterhasil-form",reference:"form",listeners:{save:"onSuccess"},title:"Form Parameter Tindakan"},{region:"center",xtype:"parameterhasil-list",flex:2,reference:"parameterhasillist",listeners:{select:"onSelect"}}];com.Form.prototype.initComponent.apply(this,arguments)},load:function(n){var p=this,q=this.down("parameterhasil-form"),s=this.getViewModel(),o=this.down("parameterhasil-list");if(n){s.set("record",n);q.setFormConfig({viewOnly:false,simpan:false});o.load({TINDAKAN:n.get("TINDAKAN")});o.setGridConfig({paging:true});q.createRecord({TINDAKAN:n.get("TINDAKAN"),STATUS:1,TANGGAL:q.getSysdate()})}}},0,["workspace-parameterhasil"],["component","box","container","panel","form","com-form","workspace-parameterhasil"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-parameterhasil":true},["widget.workspace-parameterhasil"],0,[master.parameterhasil,"Workspace"],0));(Ext.cmd.derive("master.parameterhasil.WorkspaceController",Ext.app.ViewController,{onSelect:function(f,o,q){var p=this,s=p.getReferences();s.form.loadRecord(o);s.form.setFormConfig({viewOnly:false,simpan:true})},onSuccess:function(){var e=this,l=e.getView();l.load(e.getViewModel().get("record"))}},0,0,0,0,["controller.workspace-parameterhasil"],0,[master.parameterhasil,"WorkspaceController"],0));(Ext.cmd.derive("master.pegawai.Form",com.Form,{controller:"master-pegawai-form",model:"data.model.Pegawai",layout:{type:"vbox",align:"stretch"},isCreate:false,bodyPadding:15,defaults:{margin:"0 0 0 0"},initComponent:function(){var f=this;f.items=[{flex:1,layout:{type:"vbox",align:"stretch"},header:{margin:0,padding:"5 8 5 8"},scrollable:true,ui:"panel-cyan",title:"Identitas",border:true,bodyPadding:5,items:[{xtype:"fieldcontainer",scrollable:true,layout:{type:"hbox",align:"stretch"},defaultType:"textfield",defaults:{flex:1,enterFocus:true,margin:"0 2 0 1"},items:[{name:"NIP",hidden:true},{maxLength:75,name:"NIP_BARU",reference:"nip",emptyText:"[ NIP ]",allowBlank:false},{name:"GELAR_DEPAN",enforceMaxLength:true,maxLength:25,emptyText:"[Gelar Depan]"},{name:"NAMA",enforceMaxLength:true,allowBlank:false,maxLength:75,flex:3,emptyText:"[Masukkan Nama Tanpa Gelar]"},{name:"GELAR_BELAKANG",enforceMaxLength:true,maxLength:35,emptyText:"[Gelar Blkg]"}]},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},defaults:{margin:"0 2 0 1",flex:1},items:[{xtype:"master-wilayah-tempatlahir-combo",firstLoad:true,name:"TEMPAT_LAHIR",enterFocus:true,forceSelection:false,valueField:"DESKRIPSI",emptyText:"[Pilih Tempat Lahir]"},{xtype:"datefield",name:"TANGGAL_LAHIR",enterFocus:true,allowBlank:false,maxValue:f.getSysdate(),width:200,emptyText:"[Tgl. Lahir (tgl/bln/thn)]",format:"d-m-Y H:i:s",reference:"tgl_lahir"},{xtype:"referensi-combo",params:{JENIS:2,STATUS:1},firstLoad:true,name:"JENIS_KELAMIN",enterFocus:true,emptyText:"[Pilih Jenis Kelamin]"},{xtype:"referensi-combo",params:{JENIS:1,STATUS:1},firstLoad:true,name:"AGAMA",enterFocus:true,emptyText:"[Agama]"},{xtype:"referensi-combo",params:{JENIS:36,STATUS:1},firstLoad:true,name:"PROFESI",enterFocus:true,emptyText:"[Jenis Profesi]"},{xtype:"referensi-combo",params:{JENIS:26,STATUS:1},firstLoad:true,name:"SMF",enterFocus:true,emptyText:"[PILIH S M F]"}]},{xtype:"fieldcontainer",layout:{type:"hbox"},scrollable:true,flex:1,defaults:{margin:"0 10 0 0",flex:1},defaultType:"fieldcontainer",items:[{cls:"shadow-panel",layout:{type:"vbox",align:"stretch"},defaults:{border:false,ui:"panel-cyan",margin:"0 0 5 0"},items:[{xtype:"pegawai-kartuidentitas-form",reference:"frmkartuidentitas",listeners:{specialkey:"onFocusEnter"}},{xtype:"pegawai-kontak-workspace",border:false,height:300,reference:"frmkontak"}]},{cls:"shadow-panel",layout:{type:"vbox",align:"stretch"},defaults:{border:false,ui:"panel-cyan",margin:"0 0 5 0"},items:[{xtype:"form-alamat",reference:"frmAlamat",title:"Alamat"}]}]}]}];com.Form.prototype.initComponent.apply(this,arguments)},onLoadRecord:function(u,p){var u=this,v=u.down("[name=NIP]"),q=u.down("[name=NIP_BARU]"),s=u.down("[reference=frmAlamat]"),w=u.down("pegawai-kartuidentitas-form"),t=u.down("pegawai-kontak-workspace");t.load(p,false);if(!p.get("KARTU_IDENTITAS")){p.set("KARTU_IDENTITAS",[new pegawai.kartuidentitas.Model({NIP:p.get("NIP")})])}s.loadRecord(p);w.loadRecord(p);q.setValue(v.getValue().indexOf("data.model.Pegawai")<0?v.getValue():"");q.focus(100,true)},onBeforeGetRecord:function(o,m){var n=o.down("[name=TANGGAL_LAHIR]").getValue(),p=Ext.Date.clone(n);m.TANGGAL_LAHIR=p},buttons:[{iconCls:"x-fa fa-save",text:"Simpan",handler:"onSimpan"}]},0,["master-pegawai-form"],["component","box","container","panel","form","com-form","master-pegawai-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"master-pegawai-form":true},["widget.master-pegawai-form"],0,[master.pegawai,"Form"],0));(Ext.cmd.derive("master.pegawai.FormController",Ext.app.ViewController,{onFocusEnter:function(g,l){},onSimpan:function(q){var p=this,s=p.getView();model=s.getRecord(),nipbaru=s.down("[name = NIP_BARU]"),refs=p.getReferences(),data=model.data,alamat=refs.frmAlamat.getFormData(),kip=refs.frmkartuidentitas.getFormData(),kontak=s.down("pegawai-kontak-workspace");delete data.PROPINSI;delete data.KABUPATEN;delete data.KECAMATAN;delete data.KELURAHAN;delete data.JENIS;delete data.NOMOR;delete data.REFERENSI;var o=Ext.merge(data,alamat);p.clearReferenceInModel(model.data);model.set(o);if(kip){var n=kip;kip[0]["NIP"]=nipbaru.getValue();model.set("KARTU_IDENTITAS",n)}if(s.getForm().isValid()){model.showError=true;model.animateTarget=s;model.scope=p;model.save({callback:function(e,g,f){if(g.hasException()||!f){}if(f){s.notifyMessage("Data Pegawai telah tersimpan","danger-blue");kontak.saveList(e);s.fireEvent("save",e)}}})}},clearReferenceInModel:function(f){delete f.KARTU_IDENTITAS}},0,0,0,0,["controller.master-pegawai-form"],0,[master.pegawai,"FormController"],0));(Ext.cmd.derive("master.pegawai.Grid",com.Grid,{controller:"master-pegawai-grid",viewModel:{stores:{store:{type:"pegawai-store"}}},header:{items:[{xtype:"search-field",emptyText:"Cari NIP / Nama",flex:1,listeners:{search:"onSearch",clear:"onClear",change:"onChange"}},{xtype:"button",iconCls:"x-fa fa-plus",ui:"soft-green",handler:"onTambah",tooltip:"Pegawai Baru"}]},actions:{edit:{iconCls:"x-fa fa-edit",tooltip:"Ubah Pegawai",handler:"onUbah"},pengguna:{iconCls:"x-fa fa-unlock-alt x-color-red",tooltip:"Create / Edit Pengguna",handler:"onPengguna"}},columns:[{xtype:"rownumberer",text:"No",menuDisabled:true,sortable:false,align:"left",width:70},{text:"NIP",dataIndex:"NIP",menuDisabled:true,sortable:false,width:200},{text:"Nama Lengkap",dataIndex:"NAMA",menuDisabled:true,sortable:false,flex:2},{text:"Tempat / Tgl.Lahir",flex:2,menuDisabled:true,sortable:false,renderer:"onRendererTempatLahir"},{text:"Jenis Kelamin",dataIndex:"JENIS_KELAMIN",flex:1,menuDisabled:true,sortable:false,renderer:"onRendererJenisKelamin"},{text:"Alamat",dataIndex:"ALAMAT",menuDisabled:true,sortable:false,flex:2},{text:"Profesi",dataIndex:"PROFESI",flex:1,menuDisabled:true,sortable:false,renderer:"onRendererProfesi"},{xtype:"checkcolumn",header:"STATUS",dataIndex:"STATUS",menuDisabled:true,sortable:false,width:90,listeners:{checkchange:"onChangeStatus"}},{menuDisabled:true,sortable:false,align:"center",xtype:"actioncolumn",width:100,items:["@edit","@pengguna"]}]},0,["master-pegawai-grid"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","master-pegawai-grid"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"master-pegawai-grid":true},["widget.master-pegawai-grid"],0,[master.pegawai,"Grid"],0));(Ext.cmd.derive("master.pegawai.GridController",Ext.app.ViewController,{query:"",onSearch:function(l,g){this.query=g;this.cari()},onClear:function(){this.query="";this.cari()},onChange:function(p,n){var o=this,s=o.getView(),q=s.down("search-field");if(n==""){q.onClearClick()}},onRendererJenisKelamin:function(f){return f==1?"Laki - laki":"Perempuan"},onRendererTempatLahir:function(q,w,u,v,s,t){var f=Ext.Date.format(u.get("TANGGAL_LAHIR"),"d F Y");tempatlahir=u.get("TEMPAT_LAHIR")+",  "+f;return tempatlahir},onRendererProfesi:function(x,s,v,u,e,t){var y=v.get("REFERENSI"),w=y?(y.PROFESI?y.PROFESI.DESKRIPSI:""):"";return w},onChangeStatus:function(q,w,v){var x=this,u=x.getView(),y=x.getViewModel(),t=y.get("store"),s=t.getAt(w);s.set("STATUS",v?1:0);s.scope=x;s.save({callback:function(g,f,e){if(e){u.notifyMessage("Status Pegawai di"+(e==true?"Aktifkan":"NonAktifkan "),"danger-blue")}}})},onTambah:function(f){this.openWindow(f,true,{})},onUbah:function(q,u,s,t,p,g){this.openWindow(q,false,g)},onPengguna:function(s,w,u,t,y,x){var g=this,v=g.getView();v.openDialog("",true,"55%","50%",{xtype:"pengguna-form",showCloseButton:true,ui:"panel-red",iconCls:"x-fa fa-unlock-alt",title:x.get("NAMA")+" ("+x.get("NIP")+")"},function(l,e){var f=e.down("pengguna-form");f.storeload(x);f.on("getView",function(){e.close()})},s)},privates:{cari:function(){var l=this,n=l.getView(),m=n.down("pagingtoolbar");if(l.query==""){delete n.getStore().queryParams.QUERY}else{n.setParams({QUERY:l.query})}if(m){m.moveFirst()}else{n.load()}},openWindow:function(p,q,n){var o=this,s=o.getView();s.openDialog("",true,"90%","90%",{xtype:"master-pegawai-form",ui:"panel-cyan",showCloseButton:true,title:(q?"Tambah":"Ubah")+" Pegawai",isCreate:q},function(f,e){form=e.down("master-pegawai-form");if(q){form.createRecord(n)}else{form.loadRecord(n)}form.on("save",function(){e.close();o.cari()})})}}},0,0,0,0,["controller.master-pegawai-grid"],0,[master.pegawai,"GridController"],0));(Ext.cmd.derive("master.pegawai.Workspace",com.Form,{controller:"master-pegawai-workspace",bodyPadding:0,border:false,layout:"fit",items:[{xtype:"master-pegawai-grid",ui:"panel-cyan",title:"Daftar Pegawai"}],load:function(){var g=this,l=g.down("master-pegawai-grid");l.setGridConfig({paging:true});l.load()}},0,["master-pegawai-workspace"],["component","box","container","panel","form","com-form","master-pegawai-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"master-pegawai-workspace":true},["widget.master-pegawai-workspace"],0,[master.pegawai,"Workspace"],0));(Ext.cmd.derive("master.pegawai.WorkspaceController",Ext.app.ViewController,{},0,0,0,0,["controller.master-pegawai-workspace"],0,[master.pegawai,"WorkspaceController"],0));(Ext.cmd.derive("master.referensi.Combo",com.Combo,{viewModel:{stores:{store:{type:"referensi-store"}}}},0,["referensi-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","referensi-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"referensi-combo":true},["widget.referensi-combo"],0,[master.referensi,"Combo"],0));(Ext.cmd.derive("master.ruangan.Combo",com.Combo,{viewModel:{stores:{store:{type:"ruangan-store"}}},emptyText:"[Pilih Ruangan]",displayField:"DESKRIPSI",valueField:"ID",minChars:2,tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="x-boundlist-item">','<div"><strong>{DESKRIPSI}</strong></div>',"</div>","</tpl>"),displayTpl:Ext.create("Ext.XTemplate",'<tpl for=".">',"{DESKRIPSI}","</tpl>")},0,["ruangan-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","ruangan-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"ruangan-combo":true},["widget.ruangan-combo"],0,[master.ruangan,"Combo"],0));(Ext.cmd.derive("master.penjaminruangan.Grid",com.Grid,{controller:"grid-penjaminruangan",viewModel:{stores:{store:{type:"penjamin-ruangan-store"}}},title:"Penjamin Ruangan",tools:[{type:"save",tooltip:"Simpan",handler:"onSimpan"},{type:"plus",tooltip:"Tambah",handler:"onTambah"},{type:"refresh",tooltip:"Refresh",handler:"onRefresh"}],plugins:{ptype:"cellediting",clicksToEdit:1},columns:[{text:"Id",align:"left",width:60,dataIndex:"ID",hidden:true},{text:"Penjamin",flex:1,dataIndex:"PENJAMIN",editor:{xtype:"referensi-combo",params:{JENIS:10,STATUS:1},firstLoad:true,allowBlank:false,listeners:{select:"onPenjaminCombo"}},renderer:"onPenjaminRenderer"},{text:"Penjamin Ruangan",flex:1,dataIndex:"RUANGAN_PENJAMIN",editor:"textfield"},{text:"Ruangan Rumah Sakit",flex:1,dataIndex:"RUANGAN_RS",editor:{xtype:"ruangan-combo",params:{JENIS:5,STATUS:1},firstLoad:true,allowBlank:false,listeners:{select:"onRuanganCombo"}},renderer:"onRuanganRenderer"},{xtype:"widgetcolumn",text:"Status",flex:1,dataIndex:"STATUS",widget:{xtype:"checkbox",listeners:{change:"onStatusCheck"}}}]},0,["grid-penjaminruangan"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","grid-penjaminruangan"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"grid-penjaminruangan":true},["widget.grid-penjaminruangan"],0,[master.penjaminruangan,"Grid"],0));(Ext.cmd.derive("master.penjaminruangan.GridController",Ext.app.ViewController,{onSimpan:function(p){var o=this,q=o.getStore("store"),n=q.getModifiedRecords(),s=0;Ext.Array.each(n,function(e){e.save({callback:function(l,g,f){if(f){if(s===(n.length-1)){o.getView().notifyMessage("Data telah disimpan")}}s++}})})},onRefresh:function(m){var l=this,n=l.getView();n.refresh()},onStatusCheck:function(q,o,s){var p=this,u=o?1:0,t=q.getWidgetRecord();if(t){if(t.get("STATUS")===u){return}t.set("STATUS",u);t.save({callback:function(g,f,e){if(e){p.getView().notifyMessage("Data telah disimpan")}}})}},onTambah:function(m){var l=this,n=l.getStore("store");n.insert(0,Ext.create("data.model.PenjaminRuangan",{PENJAMIN:2,REFERENSI:{PENJAMIN:{ID:2,DESKRIPSI:"BPJS / JKN"}}}))},onPenjaminCombo:function(p,m){var n=this.getView().getSelection();if(m){if(Ext.isArray(n)){if(n.length>0){var o=n[0].get("REFERENSI")||{};o.PENJAMIN=m.data;n[0].set("REFERENSI",o)}}}},onPenjaminRenderer:function(n,p,q){var o=q.get("REFERENSI"),s=o?o.PENJAMIN:null;if(s){return s.DESKRIPSI}return n},onRuanganCombo:function(p,m){var n=this.getView().getSelection();if(m){if(Ext.isArray(n)){if(n.length>0){var o=n[0].get("REFERENSI")||{};o.RUANGAN_RS=m.data;n[0].set("REFERENSI",o)}}}},onRuanganRenderer:function(n,p,q){var o=q.get("REFERENSI"),s=o?o.RUANGAN_RS:null;if(s){return s.DESKRIPSI}return n}},0,0,0,0,["controller.grid-penjaminruangan"],0,[master.penjaminruangan,"GridController"],0));(Ext.cmd.derive("master.penjaminruangan.Workspace",com.Form,{layout:"border",items:[{xtype:"grid-penjaminruangan",ui:"panel-red",region:"center"}],load:function(l){var m=this,n=m.down("grid-penjaminruangan");n.load({})}},0,["workspace-penjaminruangan"],["component","box","container","panel","form","com-form","workspace-penjaminruangan"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-penjaminruangan":true},["widget.workspace-penjaminruangan"],0,[master.penjaminruangan,"Workspace"],0));(Ext.cmd.derive("master.penyedia.Combo",com.Combo,{viewModel:{stores:{store:{type:"penyedia-store"}}},bind:{store:"{store}"},emptyText:"[ Masukkan Nama PBF ]",queryMode:"remote",queryParam:"QUERY",displayField:"NAMA",valueField:"ID",typeAhead:true,minChars:1,tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="x-boundlist-item">',"{NAMA}","</div>","</tpl>"),displayTpl:Ext.create("Ext.XTemplate",'<tpl for=".">',"{NAMA}","</tpl>")},0,["penyedia-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","penyedia-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"penyedia-combo":true},["widget.penyedia-combo"],0,[master.penyedia,"Combo"],0));(Ext.cmd.derive("master.penyedia.Form",com.Form,{controller:"penyedia-form",model:"master.penyedia.Model",layout:{type:"vbox",align:"stretch"},defaults:{margin:"0 2 2 0"},fieldDefaults:{labelAlign:"top",msgTarget:"side"},defaultType:"textfield",bodyPadding:5,initComponent:function(){var g=this,l=new Date();g.items=[{name:"NAMA",reference:"namapenyedia",fieldLabel:"Nama Penyedia"},{xtype:"textarea",fieldLabel:"Alamat",name:"ALAMAT",flex:1},{fieldLabel:"Telepon",name:"TELEPON"},{fieldLabel:"Fax",name:"FAX"}],g.buttons=[{text:"Simpan",ui:"soft-green",iconCls:"x-fa fa-save",listeners:{click:"onSimpan"}},{text:"Reset",ui:"soft-red",iconCls:"x-fa fa-times",listeners:{click:"onBatal"}}];com.Form.prototype.initComponent.apply(this,arguments)}},0,["penyedia-form"],["component","box","container","panel","form","com-form","penyedia-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"penyedia-form":true},["widget.penyedia-form"],0,[master.penyedia,"Form"],0));(Ext.cmd.derive("master.penyedia.FormController",Ext.app.ViewController,{onSimpan:function(g){var m=this,n=m.getView();n.save(g)},onBatal:function(m){var l=this.getReferences(),n=this.getView();l.namapenyedia.focus(true);n.fireEvent("batal")}},0,0,0,0,["controller.penyedia-form"],0,[master.penyedia,"FormController"],0));(Ext.cmd.derive("master.penyedia.List",com.Grid,{controller:"penyedia-list",viewModel:{stores:{store:{type:"master-penyedia-store"}}},border:false,columns:[{xtype:"rownumberer",text:"No",align:"left",width:60},{text:"ID",dataIndex:"ID",width:60},{text:"Nama",dataIndex:"NAMA",flex:2},{text:"Alamat",flex:2,dataIndex:"ALAMAT"},{text:"No.Telepon",dataIndex:"TELEPON",flex:1},{text:"Fax",dataIndex:"FAX",flex:2},{text:"Tanggal",dataIndex:"TANGGAL",flex:1},{xtype:"checkcolumn",header:"STATUS",dataIndex:"STATUS",width:90,listeners:{checkchange:"onChange"}}],dockedItems:[{xtype:"pagingtoolbar",bind:{store:"{store}"},dock:"bottom",displayInfo:true,items:["-",{},{},{xtype:"search-field",cls:"x-text-border",autoFocus:true,emptyText:"Cari berdasarkan Nama Penyedia",flex:1,listeners:{search:"onsearch",clear:"onClear"}}]}]},0,["penyedia-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","penyedia-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"penyedia-list":true},["widget.penyedia-list"],0,[master.penyedia,"List"],0));(Ext.cmd.derive("master.penyedia.barang.ListController",Ext.app.ViewController,{onChange:function(t,f,w){var v=this,u=v.getViewModel(),g=u.get("store"),e=g.getAt(f);e.set("STATUS",w?1:0);e.scope=this;e.save({callback:function(m,l,n){if(n){v.getView().notifyMessage("Status di"+(w==true?"Aktifkan":"NonAktifkan"))}else{e.set("STATUS",w?0:1)}}})},onsearch:function(q,f){var e=this,s=e.getViewModel(),p=s.get("store");p.queryParams={QUERY:f,page:1,start:0};p.removeAll();p.load()},onClear:function(){var m=this,l=m.getViewModel(),n=l.get("store");delete n.queryParams.QUERY;delete n.queryParams.page;delete n.queryParams.start;n.removeAll();n.load()}},0,0,0,0,["controller.penyedia-list"],0,[master.penyedia.barang,"ListController"],0));(Ext.cmd.derive("master.penyedia.Workspace",com.Form,{controller:"workspace-penyedia",border:false,layout:"border",bodyPadding:2,defaults:{margin:"2 2 2 2",border:false},initComponent:function(){var f=this;f.items=[{region:"center",ui:"panel-gray",xtype:"penyedia-list",flex:2,title:"Daftar Penyedia",reference:"penyedialist",listeners:{select:"onSelect"}},{region:"east",ui:"panel-gray",reference:"penyediaform",xtype:"penyedia-form",title:"Tambah Penyedia",collapsed:true,collapsible:true,flex:1,split:true,listeners:{batal:"onBatal",save:"onSuccess"}}];com.Form.prototype.initComponent.apply(this,arguments)},load:function(){var f=this;listpenyedia=f.down("penyedia-list");form=f.down("penyedia-form");listpenyedia.load({});form.createRecord({STATUS:1,TANGGAL:f.getSysdate()})}},0,["workspace-penyedia"],["component","box","container","panel","form","com-form","workspace-penyedia"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-penyedia":true},["widget.workspace-penyedia"],0,[master.penyedia,"Workspace"],0));(Ext.cmd.derive("master.penyedia.WorkspaceController",Ext.app.ViewController,{onSelect:function(s,e,f){var u=this,t=u.getViewModel(),g=u.getReferences();g.penyediaform.setCollapsed(false);g.penyediaform.loadRecord(e)},onSuccess:function(){var l=this,e=l.getReferences();l.confForm();e.penyedialist.reload()},onBatal:function(){this.confForm()},confForm:function(){var g=this.getReferences(),l=this.getView();g.penyediaform.getForm().reset();g.penyediaform.createRecord({STATUS:1,TANGGAL:l.getSysdate()})}},0,0,0,0,["controller.workspace-penyedia"],0,[master.penyedia,"WorkspaceController"],0));(Ext.cmd.derive("master.perawatruangan.Form",com.Form,{controller:"form-perawatruangan",model:"data.model.PerawatRuangan",layout:{type:"hbox",align:"stretch"},border:false,defaults:{margin:"2 2 2 2"},bodyPadding:0,items:[{xtype:"paramedis-combo",name:"PERAWAT",reference:"comboperawat",flex:1,emptyText:"[ PILIH PARAMEDIS RUANGAN ]",allowBlank:false},{xtype:"button",text:"ADD",width:60,listeners:{click:"onSimpan"}}]},0,["form-perawatruangan"],["component","box","container","panel","form","com-form","form-perawatruangan"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-perawatruangan":true},["widget.form-perawatruangan"],0,[master.perawatruangan,"Form"],0));(Ext.cmd.derive("master.perawatruangan.FormController",Ext.app.ViewController,{onSimpan:function(m){var l=this,n=l.getView();n.save(m)}},0,0,0,0,["controller.form-perawatruangan"],0,[master.perawatruangan,"FormController"],0));(Ext.cmd.derive("master.perawatruangan.List",com.Grid,{controller:"perawatruangan-list",viewModel:{stores:{store:{type:"perawat-ruangan-store"}}},cls:"x-br-top",border:true,columns:[{xtype:"rownumberer",text:"No",align:"left",width:60},{text:"ID ",dataIndex:"ID",flex:1},{text:"NIP",dataIndex:"NIP",flex:3,renderer:"onNIPRender"},{text:"NAMA",dataIndex:"PERAWAT",flex:4,renderer:"onNamaRender"},{xtype:"checkcolumn",header:"STATUS",dataIndex:"STATUS",width:90,listeners:{checkchange:"onChange"}}]},0,["perawatruangan-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","perawatruangan-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"perawatruangan-list":true},["widget.perawatruangan-list"],0,[master.perawatruangan,"List"],0));(Ext.cmd.derive("master.perawatruangan.ListController",Ext.app.ViewController,{onChange:function(s,w,x){var y=this,v=y.getView(),q=y.getViewModel(),u=q.get("store"),t=u.getAt(w);if(t){t.set("STATUS",x?1:0);t.scope=y;t.save({callback:function(e,g,f){if(f){v.notifyMessage("Status di "+(x==true?"Aktifkan":"NonAktifkan"))}else{t.set("STATUS",x?0:1)}}})}},onNIPRender:function(n,q,o){var s=o.get("REFERENSI"),p=s?(s.PERAWAT?s.PERAWAT.NIP:""):"";return p},onNamaRender:function(n,p,o){var s=o.get("REFERENSI"),q=s?(s.PERAWAT?s.PERAWAT.NAMA:""):"";return q}},0,0,0,0,["controller.perawatruangan-list"],0,[master.perawatruangan,"ListController"],0));(Ext.cmd.derive("master.perawatruangan.ViewModel",Ext.app.ViewModel,{formulas:{init:function(f){f("perawatruangancombostore").load();f("pegawaistore").load();f("perawatstore").load()}},stores:{perawatruangancombostore:{type:"perawat-store"},pegawaistore:{type:"pegawai-store"},perawatstore:{type:"perawat-store"}}},0,0,0,0,["viewmodel.perawatruanganmodel"],0,[master.perawatruangan,"ViewModel"],0));(Ext.cmd.derive("master.perawatruangan.Workspace",com.Form,{controller:"workspace-perawatruangan",viewModel:{data:{hideForm:true}},border:false,defaults:{border:false},layout:"border",initComponent:function(){var g=this,l=g.getController();g.items=[{region:"north",layout:{type:"hbox",align:"stretch"},items:[{xtype:"form-perawatruangan",reference:"formperawatruangan",hidden:true,bind:{hidden:"{hideForm}"},flex:1,listeners:{scope:l,save:"onSuccess"}},{xtype:"component",flex:0.7},{xtype:"button",margin:2,height:32,cls:"x-fa fa-plus hide-icon-tools",tooltip:"Tambah Perawat Ruangan",listeners:{scope:l,click:"onAddPerawatRuangan"}}]},{region:"center",xtype:"perawatruangan-list",reference:"perawatruanganlist"}];com.Form.prototype.initComponent.apply(this,arguments)},load:function(m){var n=this,o=n.getViewModel(),p=n.down("perawatruangan-list");if(m){n.loadRecord(m);p.load({RUANGAN:m.get("ID")});o.set("hideForm",true)}}},0,["workspace-perawatruangan"],["component","box","container","panel","form","com-form","workspace-perawatruangan"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-perawatruangan":true},["widget.workspace-perawatruangan"],0,[master.perawatruangan,"Workspace"],0));(Ext.cmd.derive("master.perawatruangan.WorkspaceController",Ext.app.ViewController,{onAddPerawatRuangan:function(s){var p=this,u=p.getView(),q=p.getViewModel(),t=p.getReferences(),w=q.get("record"),v=q.get("hideForm");q.set("hideForm",!v);t.formperawatruangan.createRecord({RUANGAN:w.get("ID"),STATUS:1});t.formperawatruangan.focus("PERAWAT")},onSuccess:function(){var o=this,s=o.getView(),p=o.getViewModel(),q=o.getReferences(),n=p.get("record");q.perawatruanganlist.reload();q.formperawatruangan.createRecord({RUANGAN:n.get("ID"),STATUS:1})}},0,0,0,0,["controller.workspace-perawatruangan"],0,[master.perawatruangan,"WorkspaceController"],0));(Ext.cmd.derive("master.ppk.Combo",com.Combo,{viewModel:{stores:{store:{type:"ppk-store"}}},queryMode:"remote",queryParam:"NAMA",displayField:"NAMA",emptyText:"[Masukkan P P K]",typeAhead:true,hideTrigger:true,tpl:new Ext.XTemplate('<tpl for=".">','<div class="x-boundlist-item" style="font-size: 12px; line-height: 15px; padding: 3px 10px">','<div style="font-weight: bold; white-space:normal !important;">{[this.getKode(values)]} - {NAMA}</div>','<div style="white-space:normal !important;">{ALAMAT}</div>','<div style="white-space:normal !important;">{DESWILAYAH}</div>',"</div>","</tpl>",{getKode:function(f){return f.KODE?f.KODE:""}}),displayTpl:Ext.create("Ext.XTemplate",'<tpl for=".">',"{NAMA}","</tpl>")},0,["master-ppk-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","master-ppk-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"master-ppk-combo":true},["widget.master-ppk-combo"],0,[master.ppk,"Combo"],0));(Ext.cmd.derive("master.ppk.Form",com.Form,{controller:"master-ppk-form",model:"data.model.Ppk",layout:{type:"vbox",align:"stretch"},isCreate:false,bodyPadding:15,defaults:{margin:"0 0 0 0"},items:[{xtype:"fieldcontainer",layout:"hbox",defaults:{xtype:"textfield",labelAlign:"top",bind:{readOnly:"{formConfig.viewOnly}"},margin:"0 1 0 0"},items:[{fieldLabel:"Kode Faskes",name:"KODE"},{fieldLabel:"Kode Faskes BPJS",name:"BPJS"}]},{xtype:"fieldcontainer",layout:"hbox",defaults:{xtype:"referensi-combo",labelAlign:"top",bind:{readOnly:"{formConfig.viewOnly}"},margin:"0 1 0 0",editable:false},items:[{fieldLabel:"Jenis",width:150,name:"JENIS",params:{JENIS:11,STATUS:1},emptyText:"[Jenis]"},{fieldLabel:"Kepemilikan",width:250,name:"KEPEMILIKAN",params:{JENIS:28,STATUS:1},emptyText:"[Kepemilikan]"},{fieldLabel:"Tipe",width:250,name:"JPK",params:{JENIS:29,STATUS:1},emptyText:"[Jenis Pelayanan]"},{xtype:"combobox",fieldLabel:"Kelas",width:250,name:"KELAS",store:{fields:[{name:"ID"}],data:[{ID:"A"},{ID:"B"},{ID:"C"},{ID:"D"}]},displayField:"ID",valueField:"ID"}]},{xtype:"textfield",fieldLabel:"Nama",labelAlign:"top",allowBlank:false,bind:{readOnly:"{formConfig.viewOnly}"},name:"NAMA"},{xtype:"fieldcontainer",layout:"hbox",defaults:{xtype:"textfield",labelAlign:"top",bind:{readOnly:"{formConfig.viewOnly}"},margin:"0 1 0 0"},items:[{fieldLabel:"Alamat",name:"ALAMAT",flex:1},{fieldLabel:"RT",name:"RT",width:50},{fieldLabel:"RW",name:"RW",width:50},{fieldLabel:"Kodepos",name:"KODEPOS",width:60}]},{xtype:"fieldcontainer",layout:"hbox",defaults:{xtype:"textfield",labelAlign:"top",bind:{readOnly:"{formConfig.viewOnly}"},margin:"0 1 0 0"},items:[{fieldLabel:"Telepon",name:"TELEPON"},{fieldLabel:"Fax",name:"FAX"},{xtype:"master-wilayah-combo",fieldLabel:"Kota/Kabupaten",labelAlign:"top",allowBlank:false,name:"WILAYAH",flex:1,bind:{readOnly:"{formConfig.viewOnly}"},params:{JENIS:2,STATUS:1},listeners:{select:"onSelectWilayah"}},{name:"DESWILAYAH",hidden:true}]}],onLoadRecord:function(s,v){var w=s.down("[name=JENIS]"),t=s.down("[name=KEPEMILIKAN]"),u=s.down("[name=JPK]"),q=s.down("[name=KELAS]"),p=s.down("[name=WILAYAH]");if(s.isCreate){w.select(1);t.select(1);u.select(1);q.select("D")}w.load();t.load();u.load();p.load()},buttons:[{iconCls:"x-fa fa-save",text:"Simpan",handler:"onSimpan"}]},0,["master-ppk-form"],["component","box","container","panel","form","com-form","master-ppk-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"master-ppk-form":true},["widget.master-ppk-form"],0,[master.ppk,"Form"],0));(Ext.cmd.derive("master.ppk.FormController",Ext.app.ViewController,{onSelectWilayah:function(m,l){var n=this.getView();if(l){n.down("[name=DESWILAYAH]").setValue(l.get("DESKRIPSI"))}},onSimpan:function(f){this.getView().save(f)}},0,0,0,0,["controller.master-ppk-form"],0,[master.ppk,"FormController"],0));(Ext.cmd.derive("master.ppk.Grid",com.Grid,{controller:"master-ppk-grid",viewModel:{stores:{store:{type:"ppk-store"}}},header:{items:[{xtype:"search-field",emptyText:"Cari Kode / Nama PPK",flex:1,listeners:{search:"onSearch",clear:"onClear",change:"onChange"}},{xtype:"button",iconCls:"x-fa fa-plus",ui:"soft-green",handler:"onTambah",tooltip:"PPK Baru"}]},actions:{edit:{iconCls:"x-fa fa-edit",tooltip:"Ubah PPK",handler:"onUbah"}},columns:[{xtype:"rownumberer",text:"No",menuDisabled:true,sortable:false,align:"left",width:70},{text:"Kode",menuDisabled:true,sortable:false,dataIndex:"KODE",align:"center",width:80},{text:"Kode BPJS",menuDisabled:true,sortable:false,dataIndex:"BPJS",align:"center",width:80},{text:"Jenis",xtype:"templatecolumn",menuDisabled:true,sortable:false,tpl:new Ext.XTemplate('<div style="font-size: 12px; white-space:normal !important;">{[this.getReferensi(values.REFERENSI)]}</div>',{getReferensi:function(f){return f?(f.JENIS?f.JENIS.DESKRIPSI:"-"):"-"}}),width:100},{text:"Kepemilikan",xtype:"templatecolumn",menuDisabled:true,sortable:false,tpl:new Ext.XTemplate('<div style="font-size: 12px; white-space:normal !important;">{[this.getReferensi(values.REFERENSI)]}</div>',{getReferensi:function(f){return f?(f.KEPEMILIKAN?f.KEPEMILIKAN.DESKRIPSI:"-"):"-"}}),width:100},{text:"Tipe",xtype:"templatecolumn",menuDisabled:true,sortable:false,tpl:new Ext.XTemplate('<div style="font-size: 12px; white-space:normal !important;">{[this.getReferensi(values.REFERENSI)]}</div>',{getReferensi:function(f){return f?(f.JPK?f.JPK.DESKRIPSI:"-"):"-"}}),width:100},{text:"Nama",menuDisabled:true,sortable:false,dataIndex:"NAMA",width:300},{text:"Kelas",menuDisabled:true,sortable:false,dataIndex:"KELAS",align:"center",width:60},{text:"Alamat",menuDisabled:true,sortable:false,dataIndex:"ALAMAT",xtype:"templatecolumn",tpl:new Ext.XTemplate('<div style="font-size: 12px; white-space:normal !important;">{ALAMAT}</div>','<div style="font-size: 12px; white-space:normal !important;">{[this.getInfo(values)]}</div>',{getInfo:function(f){return"RT."+(f.RT?f.RT:"-")+"/ RW."+(f.RW?f.RW:"-")+" | Kodepos "+(f.KODEPOS?f.KODEPOS:"-")+" | Telp. "+(f.TELEPON?f.TELEPON:"-")+" | Fax. "+(f.FAX?f.FAX:"-")}}),width:250},{text:"Kota/Kab.",menuDisabled:true,sortable:false,dataIndex:"DESWILAYAH",width:100},{text:"Status",xtype:"templatecolumn",menuDisabled:true,sortable:false,tpl:new Ext.XTemplate('<div style="font-size: 12px; white-space:normal !important;">{[this.getStatus(values.STATUS)]}</div>',{getStatus:function(f){return f===1?"Aktif":"Tidak Aktif"}})},{menuDisabled:true,sortable:false,align:"center",xtype:"actioncolumn",width:50,items:["@edit"]}],cari:function(g){var l=this.down("search-field");l.setValue(g);l.fireEvent("search",l,g)}},0,["master-ppk-grid"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","master-ppk-grid"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"master-ppk-grid":true},["widget.master-ppk-grid"],0,[master.ppk,"Grid"],0));(Ext.cmd.derive("master.ppk.GridController",Ext.app.ViewController,{query:"",onSearch:function(l,g){this.query=g;this.cari()},onClear:function(){this.query="";this.cari()},onChange:function(p,n){var o=this,s=o.getView(),q=s.down("search-field");if(n==""){q.onClearClick()}},onTambah:function(f){this.openWindow(f,true,{})},onUbah:function(q,u,s,t,p,g){this.openWindow(q,false,g)},privates:{cari:function(){var l=this,n=l.getView(),m=n.down("pagingtoolbar");if(l.query==""){delete n.getStore().queryParams.QUERY}else{n.setParams({QUERY:l.query})}if(m){m.moveFirst()}else{n.load()}},openWindow:function(p,q,n){var o=this,s=o.getView();s.openDialog("",true,"90%","90%",{xtype:"master-ppk-form",ui:"panel-cyan",showCloseButton:true,title:(q?"Tambah":"Ubah")+" Pemberi Pelayanan Kesehatan (PPK)",isCreate:q},function(f,e){form=e.down("master-ppk-form");if(q){form.createRecord(n)}else{form.loadRecord(n)}form.on("save",function(){e.close();o.cari()});form.focus("KODE")})}}},0,0,0,0,["controller.master-ppk-grid"],0,[master.ppk,"GridController"],0));(Ext.cmd.derive("master.ppk.Workspace",com.Form,{controller:"master-ppk-workspace",bodyPadding:0,border:false,layout:"fit",items:[{xtype:"master-ppk-grid",ui:"panel-blue",title:"Pemberi Pelayanan Kesehatan (PPK)"}],load:function(){var g=this,l=g.down("master-ppk-grid");l.setGridConfig({paging:true});l.load()}},0,["master-ppk-workspace"],["component","box","container","panel","form","com-form","master-ppk-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"master-ppk-workspace":true},["widget.master-ppk-workspace"],0,[master.ppk,"Workspace"],0));(Ext.cmd.derive("master.ppk.WorkspaceController",Ext.app.ViewController,{},0,0,0,0,["controller.master-ppk-workspace"],0,[master.ppk,"WorkspaceController"],0));(Ext.cmd.derive("master.referensi.Form",com.Form,{controller:"form-referensi",model:"data.model.Referensi",header:false,border:true,bodyPadding:5,layout:{type:"hbox",align:"stretch"},defaults:{margin:"0 1 0 1"},initComponent:function(){this.items=[{xtype:"textfield",maxLength:75,name:"DESKRIPSI",reference:"deksripsi",emptyText:"[Nama Deskripsi]",flex:2},{xtype:"button",text:"Simpan",ui:"soft-green",iconCls:"x-fa fa-save",handler:"onSimpan"},{text:"Batal",xtype:"button",ui:"soft-red",iconCls:"x-fa fa-times",handler:"onBatal"}];com.Form.prototype.initComponent.apply(this,arguments)}},0,["form-referensi"],["component","box","container","panel","form","com-form","form-referensi"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-referensi":true},["widget.form-referensi"],0,[master.referensi,"Form"],0));(Ext.cmd.derive("master.referensi.FormController",Ext.app.ViewController,{onSimpan:function(m){var l=this,n=l.getView();n.save(m)},onBatal:function(l){var m=this,n=m.getView();n.fireEvent("batal")}},0,0,0,0,["controller.form-referensi"],0,[master.referensi,"FormController"],0));(Ext.cmd.derive("master.referensi.FormControllerJenisReferensi",Ext.app.ViewController,{init:function(){var g=this,l=g.getView();l.down("[name=DESKRIPSI]").focus(false,1000)},onSimpan:function(m){var l=this,n=l.getView();n.save(m)}},0,0,0,0,["controller.form-jenis_referensi"],0,[master.referensi,"FormControllerJenisReferensi"],0));(Ext.cmd.derive("master.referensi.FormJenisReferensi",com.Form,{controller:"form-jenis_referensi",model:"data.model.JenisReferensi",bodyPadding:10,items:[{xtype:"textfield",name:"DESKRIPSI",labelWidth:100,width:500,fieldLabel:"Deskripsi",allowBlank:false}],buttons:[{text:"Simpan",ui:"soft-green",padding:4,handler:"onSimpan"}]},0,["form-jenis_referensi"],["component","box","container","panel","form","com-form","form-jenis_referensi"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-jenis_referensi":true},["widget.form-jenis_referensi"],0,[master.referensi,"FormJenisReferensi"],0));(Ext.cmd.derive("master.referensi.List",com.Grid,{controller:"referensi-list",viewModel:{stores:{store:{type:"referensi-store"}}},bind:{store:"{store}"},cls:"x-br-top",border:false,columns:[{xtype:"rownumberer",text:"No",align:"left",width:40},{text:"DESKRIPSI",dataIndex:"DESKRIPSI",flex:2},{xtype:"checkcolumn",header:"STATUS",dataIndex:"STATUS",flex:0.3,stopSelection:true,listeners:{checkchange:"onChek"}}]},0,["referensi-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","referensi-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"referensi-list":true},["widget.referensi-list"],0,[master.referensi,"List"],0));(Ext.cmd.derive("master.referensi.ListController",Ext.app.ViewController,{onRendererStatus:function(u,s,t,g,e,f){},onChek:function(x,g,v){var e=this,f=e.getView(),z=e.getViewModel(),w=z.get("store"),A=w.getAt(g),y=A.get("JENIS")+"-"+A.get("ID");A.setId(y);A.set("STATUS",v?1:0);A.save({callback:function(m,l,n){if(n){f.notifyMessage("Status Referensi di"+(v==true?"Aktifkan":"NonAktifkan"))}}})}},0,0,0,0,["controller.referensi-list"],0,[master.referensi,"ListController"],0));(Ext.cmd.derive("master.referensi.ListJenis",com.Grid,{viewModel:{stores:{store:{type:"jenisreferensi-store"}}},flex:1,border:false,columns:[{xtype:"rownumberer",text:"No",align:"left",width:"10%"},{text:"DESKRIPSI",dataIndex:"DESKRIPSI",flex:1},{text:"SINGKATAN",dataIndex:"SINGKATAN",flex:0.5}]},0,["jenisreferensi-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","jenisreferensi-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"jenisreferensi-list":true},["widget.jenisreferensi-list"],0,[master.referensi,"ListJenis"],0));(Ext.cmd.derive("master.referensi.ViewModel",Ext.app.ViewModel,{stores:{referensistore:Ext.create("data.store.Referensi",{}),jenisreferensistore:{type:"jenisreferensi-store"}}},0,0,0,0,["viewmodel.referensimodel"],0,[master.referensi,"ViewModel"],0));(Ext.cmd.derive("master.referensi.Workspace",com.Form,{controller:"workspace-referensi",viewModel:{data:{hideForm:true}},layout:"border",defaults:{border:false,margin:"1 1 1 1"},initComponent:function(){var f=this;f.items=[{region:"north",ui:"panel-red",title:"Referensi",iconCls:"x-fa fa-list",header:{items:[{xtype:"button",margin:2,height:32,cls:"x-fa fa-plus hide-icon-tools",tooltip:"Tambah Referensi",listeners:{click:"onAddReferensi"}}]},layout:"fit",items:[{xtype:"form-referensi",bind:{hidden:"{hideForm}"},reference:"formreferensi",listeners:{scope:f.getController(),batal:"onBatal",save:"onSuccess"}}]},{region:"center",title:"Daftar referensi",xtype:"referensi-list",reference:"referensilist",flex:2,listeners:{select:"onSelect"}},{iconCls:"x-fa fa-list",title:"Jenis Referensi",region:"east",xtype:"jenisreferensi-list",cls:"x-br-top x-br-left",collapsible:true,floatable:true,split:true,tools:[{xtype:"tool",cls:"x-fa fa-plus hide-icon-tools",width:20,height:20,tooltip:"Tambah Jenis Referensi",listeners:{scope:f.getController(),click:"onAddJenisReferensi"}},{xtype:"tool",cls:"x-fa fa-history hide-icon-tools",width:20,height:20,tooltip:"Refresh",listeners:{scope:f.getController(),click:"onRefreshJenis"}}],reference:"jenisreferensilist",flex:1,listeners:{select:"onSelectJenis"}}];f.callParent(arguments);f.down("form-referensi").setHidden(true)},load:function(f){this.down("jenisreferensi-list").load({})}},0,["workspace-referensi"],["component","box","container","panel","form","com-form","workspace-referensi"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-referensi":true},["widget.workspace-referensi"],0,[master.referensi,"Workspace"],0));(Ext.cmd.derive("master.referensi.WorkspaceController",Ext.app.ViewController,{onAddReferensi:function(n){var p=this,s=p.getView(),q=p.getViewModel(),o=q.get("record");if(o){this.confForm()}else{s.notifyMessage("Pilih jenis referensi terlebih dahulu","danger-red")}},onAddJenisReferensi:function(o){var n=this,p=n.getView(),m=n.getReferences();p.openDialog("",true,"50%",20,{xtype:"form-jenis_referensi",showCloseButton:true,ui:"panel-green",iconCls:"x-fa fa-pencil-square-o",title:"Form Jenis Referensi"},function(e,f){var g=f.down("form-jenis_referensi");g.createRecord({STATUS:1});g.on("save",function(){m.jenisreferensilist.reload();f.close()})},o)},onBatal:function(){this.confForm()},confForm:function(){var o=this,t=o.getView(),s=o.getReferences(),p=o.getViewModel(),q=p.get("hideForm"),u=p.get("record");t.getForm().reset();p.set("hideForm",!q);s.formreferensi.createRecord({JENIS:u.get("ID"),STATUS:1})},onSelect:function(t,w,f){var v=this,u=v.getViewModel(),g=v.getReferences(),e=w.get("JENIS")+"-"+w.get("ID");w.setId(e);u.set("hideForm",false);g.formreferensi.loadRecord(w)},onSelectJenis:function(w,u,t){var e=this,s=e.getView(),v=u.get("ID"),q=e.getReferences();if(u){s.loadRecord(u);q.referensilist.load({JENIS:v})}},onRefreshJenis:function(){var g=this,l=g.getReferences();l.jenisreferensilist.reload()},onSuccess:function(){var o=this,s=o.getView(),p=o.getViewModel(),q=o.getReferences(),n=p.get("record");s.getForm().reset();q.referensilist.reload();q.formreferensi.createRecord({JENIS:n.get("ID"),STATUS:1})}},0,0,0,0,["controller.workspace-referensi"],0,[master.referensi,"WorkspaceController"],0));(Ext.cmd.derive("master.ruangan.Detil",com.Form,{controller:"ruangan-detil",model:"data.model.Ruangan",viewModel:{data:{uisAktif:["soft-black","soft-green"],record:undefined,recordTree:undefined,visibleJenisRawatInap:false,visibleRawatJalan:false},formulas:{getAktifStatusText:function(f){return f("record.STATUS")==1?"Aktif":""},getNonAktifStatusText:function(f){return f("record.STATUS")==0?"Non Aktif":""}}},bind:{title:"{record.DESKRIPSI}"},header:{iconCls:"x-fa fa-list",margin:0,padding:"5 10 5 10",height:50,layout:{type:"hbox",align:"stretch"},bind:{title:"{getTitle}"},items:[{xtype:"fieldcontainer",width:"60%",defaultType:"button",border:false,layout:"hbox",defaults:{width:90},border:false,items:[{xtype:"referensi-combo",params:{JENIS:15,STATUS:1},firstLoad:true,name:"JENIS_KUNJUNGAN",reference:"combojeniskunjungan",flex:1,margin:"0 2 2 2",emptyText:"[ JENIS KUNJUNGAN ]",listeners:{select:"onSelect"}},{xtype:"referensi-combo",params:{JENIS:75,STATUS:1},firstLoad:true,name:"REF_ID",reference:"combojenisri",flex:1,margin:"0 2 2 2",emptyText:"[ JENIS RAWAT INAP ]",bind:{hidden:"{!visibleJenisRawatInap}"},listeners:{select:"onSelectJenisRawatInap"}},{xtype:"checkbox",boxLabel:"<font color = 'white'> Poli Eksekutif </font>",width:110,name:"POLI_EKS",boxLabelAlign:"before",reference:"polieksekutif",margin:"0 15 2 5",bind:{hidden:"{!visibleRawatJalan}"},listeners:{change:"onChangePoliEks"}},{reference:"btnAktif",tooltip:"Aktifkan",bind:{text:"{getAktifStatusText}"},status:1,handler:"onStatus"},{reference:"btnNonAktif",tooltip:"Non Aktifkan",bind:{text:"{getNonAktifStatusText}"},status:0,handler:"onStatus"}]}]},listeners:{afterrender:"onAfterRender"},setUiButtons:function(q){var n=this,o=n.getViewModel(),s=o.get("uisAktif"),p=n.getReferences();p.btnAktif.setUI(s[q==1?1:0]);p.btnNonAktif.setUI(s[q==0?1:0])},load:function(n){var o=this,p=o.getViewModel(),m=o.down("[name=POLI_EKS]");if(n){p.set("recordTree",n);o.createRecord({ID:n.get("ID"),JENIS:n.get("JENIS"),JENIS_KUNJUNGAN:n.get("JENIS_KUNJUNGAN"),REF_ID:n.get("REF_ID"),DESKRIPSI:n.get("DESKRIPSI"),STATUS:n.get("STATUS")});p.set("visibleJenisRawatInap",n.get("JENIS_KUNJUNGAN")==3);p.set("visibleRawatJalan",n.get("JENIS_KUNJUNGAN")==1);if(n.get("JENIS_KUNJUNGAN")==1){if(m){m.setValue(n.get("REF_ID")==1)}}o.setUiButtons(n.get("STATUS"))}}},0,["ruangan-detil"],["component","box","container","panel","form","com-form","ruangan-detil"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"ruangan-detil":true},["widget.ruangan-detil"],0,[master.ruangan,"Detil"],0));(Ext.cmd.derive("master.ruangan.DetilController",Ext.app.ViewController,{onStatus:function(p){var o=this,t=o.getView(),s=o.getViewModel().get("recordTree"),q=t.getRecord(),u="Anda Yakin Ingin "+(p.status==1?"":"Non ")+"Aktifkan Ruangan Ini ?";if(q){Ext.Msg.show({message:u,buttons:Ext.Msg.YESNO,headerPosition:"left",buttonAlign:"left",icon:Ext.Msg.QUESTION,animateTarget:p,fn:function(f){if(f==="yes"){var e=q.get("STATUS");q.set("STATUS",p.status);t.save(p,{success:(p.status==1?"":"Non ")+"Aktif Ruangan berhasil"},function(m,l,g){if(g){t.setUiButtons(p.status);s.set("STATUS",p.status)}else{q.set("STATUS",e);t.setUiButtons(e)}})}}})}},onSelect:function(q,v){var w=this,u=w.getView(),p=w.getViewModel(),s=u.getRecord(),t=p.get("recordTree");if(v){s.set("JENIS_KUNJUNGAN",v.get("ID"));p.set("visibleJenisRawatInap",v.get("ID")==3);p.set("visibleRawatJalan",v.get("ID")==1);u.save(q,{success:"Update Jenis Kunjungan Ruangan berhasil"},function(f,g,e){if(f){t.set("JENIS_KUNJUNGAN",v.get("ID"));u.load(f)}})}},onSelectJenisRawatInap:function(p,u){var o=this,t=o.getView(),q=t.getRecord(),s=o.getViewModel().get("recordTree");if(u){q.set("REF_ID",u.get("ID"));t.save(p,{success:"Update Jenis Ruangan Rawat Inap berhasil"},function(f,g,e){if(f){s.set("REF_ID",u.get("ID"));t.load(f)}})}},onChangePoliEks:function(s,v){var u=this,t=u.getView(),y=u.getViewModel(),x=y.get("record"),w=Ext.create("data.model.Ruangan",{ID:x.get("ID"),REF_ID:x.get("REF_ID")}),z=v?1:0,A=y.get("recordTree");if(x.get("REF_ID")!=z){w.set("REF_ID",z);w.showError=true;w.animateTarget=s;w.save({failure:function(e,f){x.set("REF_ID",z==1?0:1);t.notifyMessage("Update Poli Eksekutif Ruangan Rawat Jalan gagal","danger-red")},success:function(e,f){x.set("REF_ID",z);A.set("REF_ID",z);t.notifyMessage("Update Poli Eksekutif Ruangan Rawat Jalan berhasil")}})}},onAfterRender:function(){var m=this,p=m.getView(),n=m.getViewModel(),o=n.get("record");if(o){p.setUiButtons(o.get("STATUS"))}}},0,0,0,0,["controller.ruangan-detil"],0,[master.ruangan,"DetilController"],0));(Ext.cmd.derive("master.ruangan.Form",com.Form,{controller:"form-ruangan",model:"data.model.Ruangan",title:"Form Ruangan",bodyPadding:10,items:[{xtype:"textfield",name:"DESKRIPSI",labelWidth:100,width:500,fieldLabel:"Deskripsi",allowBlank:false}],buttons:[{text:"Simpan",handler:"onSimpan"}]},0,["form-ruangan"],["component","box","container","panel","form","com-form","form-ruangan"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-ruangan":true},["widget.form-ruangan"],0,[master.ruangan,"Form"],0));(Ext.cmd.derive("master.ruangan.FormController",Ext.app.ViewController,{init:function(){var g=this,l=g.getView();l.down("[name=DESKRIPSI]").focus(false,1000)},onSimpan:function(e){var f=this,p=f.getView(),q=p.getForm().getValues(),s=f.getViewModel().get("record");if(p.getForm().isValid()){s.set(q);s.showError=true;s.animateTarget=e;s.scope=f;s.save({callback:function(g,m,l){if(m.hasException()||!l){}if(l){p.notifyMessage("Data telah tersimpan");p.fireEvent("save",g)}}})}}},0,0,0,0,["controller.form-ruangan"],0,[master.ruangan,"FormController"],0));(Ext.cmd.derive("master.Links",com.Tab,{cls:"x-br-top",items:[{title:"Dokter",iconCls:"x-fa fa-user-secret",xtype:"workspace-dokterruangan"},{title:"SMF",iconCls:"x-fa fa-user-md",xtype:"smf-ruangan-workspace"},{title:"Paramedis",iconCls:"x-fa fa-stethoscope",xtype:"workspace-perawatruangan"},{title:"Staff",iconCls:"x-fa fa-user",xtype:"workspace-staffruangan"},{title:"Kamar",iconCls:"x-fa fa-hospital-o",xtype:"workspace-kamar"},{title:"Tindakan",iconCls:"x-fa fa-medkit",xtype:"tindakan-ruangan-workspace"},{title:"Barang",iconCls:"x-fa fa-cubes",xtype:"barang-ruangan-workspace"},{title:"Kelas",iconCls:"x-fa fa-star",xtype:"ruangan-kelas-workspace"}],load:function(g){var l=this.getActiveTab();if(l){l.load(g)}}},0,["ruangan-links"],["component","box","container","panel","tabpanel","com-tab","ruangan-links"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"ruangan-links":true},["widget.ruangan-links"],0,[master,"Links"],0));(Ext.cmd.derive("master.ruangan.List",com.Grid,{controller:"ruangan-list",viewModel:{stores:{store:{type:"ruangan-store",queryParams:{}}}},checkboxModel:false,ruanganAkses:true,initComponent:function(){var f=this;f.columns=[{xtype:"rownumberer",text:"No",align:"left",width:60,hidden:f.checkboxModel},{text:f.ruanganAkses?"Ruangan Akses":"Ruangan",flex:1,dataIndex:"DESKRIPSI",renderer:"onRenderer"},{text:"Status",flex:1,hidden:f.ruanganAkses,dataIndex:"STATUS",renderer:"onStatus"}];com.Grid.prototype.initComponent.apply(this,arguments)},doAfterLoad:function(y,x,w,v){var s=this,u=s.getSelectionModel();if(Ext.isArray(x)){if(x.length>0){for(var t=0;t<x.length;t++){if(u){if(s.checkboxModel){var q=x[t].get("checked")?(x[t].get("checked")==1):false;if(q){u.select(x[t],true)}}}}}(new Ext.util.DelayedTask(function(){})).delay(100)}}},0,["ruangan-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","ruangan-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"ruangan-list":true},["widget.ruangan-list"],0,[master.ruangan,"List"],0));(Ext.cmd.derive("master.ruangan.ListController",Ext.app.ViewController,{onRenderer:function(A,s,z,t){var w=this,u=w.getView(),x=A.length,v=((z.get("JENIS")-1)*10),y=u.getSelectionModel();return u.ruanganAkses?Ext.String.leftPad(A,x+v,"&nbsp;"):A},onStatus:function(u,q,o,t){var s=this,p=(o.get("STATUS")==1)?"Aktif":"Non Aktif";if(o.get("STATUS")==1){return'<span style="color:green;">'+p+"</span>"}else{return'<span style="color:red;">'+p+"</span>"}}},0,0,0,0,["controller.ruangan-list"],0,[master.ruangan,"ListController"],0));(Ext.cmd.derive("master.ruangan.RuanganSelection",com.Form,{controller:"ruangan-selection",viewModel:{data:{ikutIbu:false},stores:{instalasistore:{type:"ruangan-store",queryParams:{JENIS:3,STATUS:1}},unitstore:{type:"ruangan-store",queryParams:{JENIS:4,STATUS:1}},ruanganstore:{type:"ruangan-store",queryParams:{JENIS:5,STATUS:1}}}},bodyPadding:5,notJenisKunjungan:[0],layout:{type:"vbox",align:"stretch"},defaultType:"fieldcontainer",defaults:{margin:"0 0 2 0 ",layout:{type:"hbox",align:"stretch"}},ruanganSelected:false,items:[{xtype:"textfield",name:"RUANGAN",reference:"ruangan",hidden:true,inputType:"hidden"},{xtype:"combobox",margin:"0 2 2 0",padding:0,labelAlign:"top",enterFocus:true,flex:1,forceSelection:true,name:"INSTALASI",emptyText:"[Pilih Instalasi]",queryMode:"local",typeAhead:true,reference:"instalasi",displayField:"DESKRIPSI",valueField:"ID",allowBlank:false,bind:{store:"{instalasistore}",readOnly:"{ikutIbu}"},listeners:{specialkey:"onFocusEnter",select:"onSelectedInstalasi",blur:"onBlurInstalasi"}},{defaultType:"combobox",defaults:{margin:"0 2 0 0",padding:0,labelAlign:"top",enterFocus:true,flex:1,forceSelection:true,queryMode:"local",typeAhead:true,displayField:"DESKRIPSI",valueField:"ID",allowBlank:false},items:[{name:"UNIT",bind:{store:"{unitstore}",readOnly:"{ikutIbu}"},emptyText:"[Pilih Unit]",reference:"unit",listeners:{specialkey:"onFocusEnter",select:"onSelectedUnit",blur:"onBlurUnit"}},{name:"SUBUNIT",bind:{store:"{ruanganstore}",readOnly:"{ikutIbu}"},emptyText:"[Pilih Ruangan]",reference:"subunit",listeners:{specialkey:"onFocusEnter",select:"onSelectedRuangan",blur:"onBlurSubUnit"}}]}],getFormData:function(){var f=this.getForm().getValues();delete f.INSTALASI;delete f.UNIT;delete f.SUBUNIT;return f},select:function(l){if(Ext.getClassName(l)=="data.model.Ruangan"){var m=this.down("[reference=ruangan]"),n=this.down("[reference=subunit]");m.setValue(l.get("ID"));this.ruanganSelected=l}},setIkutIbu:function(f){this.getViewModel().set("ikutIbu",f)},onLoadRecord:function(n,m){var o=n.getViewModel(),p=o.get("instalasistore");if(p){p.setQueryParams({JENIS:3,STATUS:1,NOT:Ext.JSON.encode({JENIS_KUNJUNGAN:n.notJenisKunjungan})});p.load()}}},0,["ruangan-selection"],["component","box","container","panel","form","com-form","ruangan-selection"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"ruangan-selection":true},["widget.ruangan-selection"],0,[master.ruangan,"RuanganSelection"],0));(Ext.cmd.derive("master.ruangan.RuanganSelectionController",Ext.app.ViewController,{init:function(){var w=this,f=w.getView(),u=w.getViewModel(),g=w.getReferences(),t=u.get("instalasistore"),v=u.get("unitstore"),e=u.get("ruanganstore");t.on("load",function(){var l=g.ruangan.getValue();if(l==null){return}if(l.length>0&&t!=null){g.instalasi.setValue(l.substring(0,5))}v.removeAll();g.unit.select(null);e.removeAll();g.subunit.select(null);f.fireEvent("load",1);if(l.length>0&&v!=null){v.queryParams.ID=l.substring(0,5);v.load()}});v.on("load",function(l,n){var m=g.ruangan.getValue();if(m==null){return}if(m.length>5&&v!=null){g.unit.setValue(m.substring(0,7))}if(n.length==1){g.unit.select(n[0]);g.unit.fireEvent("select",g.unit,n[0]);g.subunit.focus(false,100)}e.removeAll();g.subunit.select(null);f.fireEvent("load",2);if(m.length>5&&e!=null){e.queryParams.ID=m.substring(0,7);e.load()}});e.on("load",function(l,m){if(m.length==1||f.ruanganSelected){var n=f.ruanganSelected?f.ruanganSelected:m[0];g.subunit.select(n);g.subunit.fireEvent("select",g.subunit,n);f.fireEvent("nextfocus")}})},onFocusEnter:function(g,l){this.getView().fireEvent("specialkey",g,l)},onSelectedInstalasi:function(q,f){var e=this,p=e.getView(),s=e.getViewModel().get("unitstore");e.getReferences().unit.select(null);e.getReferences().subunit.select(null);e.removeStoreData(e.getReferences().unit,"unitstore");e.removeStoreData(e.getReferences().subunit,"ruanganstore");p.fireEvent("selected",f,1);if(f){if(!p.ruanganSelected){e.getReferences().ruangan.setValue(f.get("ID"))}s.queryParams.ID=f.get("ID");s.load()}},onSelectedUnit:function(q,f){var s=this,p=s.getView(),e=s.getViewModel().get("ruanganstore");s.getReferences().subunit.select(null);s.removeStoreData(s.getReferences().subunit,"ruanganstore");p.fireEvent("selected",f,2);if(f){if(!p.ruanganSelected){s.getReferences().ruangan.setValue(f.get("ID"))}e.queryParams.ID=f.get("ID");e.load()}},onSelectedRuangan:function(e,o){var n=this,p=n.getView();p.fireEvent("selected",o,3);if(o){n.getReferences().ruangan.setValue(o.get("ID"));p.ruanganSelected=false}},onBlurInstalasi:function(l){var g=l.getSelection();if(g==null){this.getView().fireEvent("blurselection",1);this.removeStoreData(this.getReferences().unit,"unitstore");this.removeStoreData(this.getReferences().subunit,"ruanganstore")}},onBlurUnit:function(l){var g=l.getSelection();if(g==null){this.getView().fireEvent("blurselection",2);this.removeStoreData(this.getReferences().subunit,"ruanganstore")}},onBlurSubUnit:function(l){var g=l.getSelection();if(g==null){this.getView().fireEvent("blurselection",3)}},removeStoreData:function(m,l){var n=this;n.getViewModel().get(l).removeAll();m.select(null)}},0,0,0,0,["controller.ruangan-selection"],0,[master.ruangan,"RuanganSelectionController"],0));(Ext.cmd.derive("master.ruangan.Tree",com.Tree,{controller:"ruangan-tree",viewModel:{data:{treeConfig:{add:false}},stores:{store:{type:"tree-ruangan-store",queryParams:{TREE:1}}}},tools:[{xtype:"tool",cls:"x-fa fa-plus hide-icon-tools",width:20,height:20,tooltip:"Tambah Ruangan",reference:"tambah_ruangan",bind:{hidden:"{!treeConfig.add}"},listeners:{click:"onAddRuangan"}},{xtype:"tool",cls:"x-fa fa-history hide-icon-tools",width:20,height:20,tooltip:"Reload Ruangan",reference:"Load_ruangan",listeners:{click:"onReload"}}],header:{iconCls:"x-fa fa-list",padding:"10 10 10 5"},doAfterLoad:function(o,n,m,p){if(Ext.isArray(n)){if(n.length>0){o.setSelection(n[0])}(new Ext.util.DelayedTask(function(){o.expandAll()})).delay(100)}}},0,["ruangan-tree"],["component","box","container","panel","tablepanel","treepanel","com-tree","ruangan-tree"],{component:true,box:true,container:true,panel:true,tablepanel:true,treepanel:true,"com-tree":true,"ruangan-tree":true},["widget.ruangan-tree"],0,[master.ruangan,"Tree"],0));(Ext.cmd.derive("master.ruangan.TreeController",Ext.app.ViewController,{onAddRuangan:function(){var m=this,p=m.getView(),o={},n=p.getSelection();if(n.length>0){o.PARENT={ID:n[0].get("ID"),JENIS:n[0].get("JENIS")};o.JENIS=n[0].get("JENIS")+1;o.STATUS=1}p.openDialog("",true,520,150,{xtype:"form-ruangan",iconCls:"x-fa fa-edit",title:"Form Ruangan",showCloseButton:true,ui:"panel-blue"},function(f,g){var e=g.down("form-ruangan");e.createRecord(o);e.focus("DESKRIPSI");e.on("save",function(l){p.refresh();g.close()})})},onReload:function(){this.getView().refresh()}},0,0,0,0,["controller.ruangan-tree"],0,[master.ruangan,"TreeController"],0));(Ext.cmd.derive("master.ruangan.Workspace",com.Form,{controller:"workspace-ruangan",layout:"border",border:false,initComponent:function(){var g=this,l=g.getController();g.items=[{xtype:"ruangan-tree",ui:"panel-blue",reference:"ruangantree",region:"east",title:"Ruangan",width:250,header:{height:45},listeners:{select:"onRuanganSelect"}},{region:"center",xtype:"container",cls:"x-br-right",layout:{type:"vbox",align:"stretch"},items:[{ui:"panel-blue",xtype:"ruangan-detil",reference:"ruangandetil",height:45},{xtype:"ruangan-links",reference:"ruanganlinks",flex:1,listeners:{tabchange:"onTabChange"}}]}];com.Form.prototype.initComponent.apply(this,arguments)},load:function(){var g=this,l=g.down("ruangan-tree");l.setTreeConfig({add:true});l.load({})}},0,["workspace-ruangan"],["component","box","container","panel","form","com-form","workspace-ruangan"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-ruangan":true},["widget.workspace-ruangan"],0,[master.ruangan,"Workspace"],0));(Ext.cmd.derive("master.ruangan.WorkspaceController",Ext.app.ViewController,{ruanganSelected:undefined,onTabChange:function(g,l){if(l.load){l.load(this.ruanganSelected)}},onRuanganSelect:function(p,u){var o=this,q=o.lookupReference("ruangantree"),t=o.lookupReference("ruangandetil"),s=o.lookupReference("ruanganlinks");if(u){o.ruanganSelected=u;t.load(u);q.setTreeConfig({add:u.get("JENIS")!==5});s.load(u)}}},0,0,0,0,["controller.workspace-ruangan"],0,[master.ruangan,"WorkspaceController"],0));(Ext.cmd.derive("master.ruangan.kelas.List",com.Grid,{controller:"ruangan-kelas-list",viewModel:{stores:{store:{type:"ruangan-kelas-store"}}},cls:"x-br-top",border:true,columns:[{text:"Kelas",dataIndex:"KELAS",flex:4,renderer:"onKelasRender"},{xtype:"checkcolumn",header:"STATUS",dataIndex:"STATUS",width:90,listeners:{checkchange:"onChange"}}]},0,["ruangan-kelas-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","ruangan-kelas-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"ruangan-kelas-list":true},["widget.ruangan-kelas-list"],0,[master.ruangan.kelas,"List"],0));(Ext.cmd.derive("master.ruangan.kelas.ListController",Ext.app.ViewController,{onChange:function(t,w,y){var q=this,s=q.getViewModel(),v=q.getView(),u=s.get("store"),x=u.getAt(w);x.set("STATUS",y?1:0);x.scope=this;x.save({callback:function(e,g,f){if(f){v.notifyMessage("Status ruangan kelas di "+(y==true?"Aktifkan":"Non Aktifkan"),"danger-blue");v.reload()}}})},onKelasRender:function(w,q,p,v,t,u){var s=p.get("REFERENSI");return s?(s.KELAS?s.KELAS.DESKRIPSI:""):""}},0,0,0,0,["controller.ruangan-kelas-list"],0,[master.ruangan.kelas,"ListController"],0));(Ext.cmd.derive("master.ruangan.kelas.Workspace",com.Form,{controller:"ruangan-kelas-workspace",layout:"border",border:false,initComponent:function(){var f=this;f.items=[{region:"west",title:"Daftar Kelas",xtype:"referensi-list",border:false,collapsible:true,flex:0.7,reference:"referensilist",split:true,multiSelect:true,viewConfig:{plugins:{ptype:"gridviewdragdrop",enableDrop:false},copy:true},listeners:{itemdblclick:"onItemDblClickReferensi"}},{region:"center",border:false,xtype:"ruangan-kelas-list",reference:"ruangankelaslist",viewConfig:{plugins:{ptype:"gridviewdragdrop",enableDrag:false},listeners:{scope:f.getController(),drop:"onDropRuanganKelas"}}}];com.Form.prototype.initComponent.apply(this,arguments)},load:function(o){var q=this,s=q.getViewModel(),n=q.down("referensi-list"),p=q.down("ruangan-kelas-list");n.setListConfig({showStatus:false});n.load({JENIS:19});if(o){p.loadStore({start:0,limit:3000,RUANGAN:o.get("ID")});q.loadRecord(o)}}},0,["ruangan-kelas-workspace"],["component","box","container","panel","form","com-form","ruangan-kelas-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"ruangan-kelas-workspace":true},["widget.ruangan-kelas-workspace"],0,[master.ruangan.kelas,"Workspace"],0));(Ext.cmd.derive("master.ruangan.kelas.WorkspaceController",Ext.app.ViewController,{onItemDblClickReferensi:function(s,n){var p=this,q=p.getViewModel(),o=q.get("record");n=Ext.create("master.ruangan.kelas.Model",{RUANGAN:o.get("ID"),KELAS:n.get("ID"),STATUS:1});p.simpanRuanganKelas(n)},onDropRuanganKelas:function(z,x,t,s){var v=this,A=v.getViewModel(),y=A.get("record"),u=Ext.Array.clone(x.records),w=0;x.records=[];Ext.Array.each(u,function(e){e=Ext.create("master.ruangan.kelas.Model",{RUANGAN:y.get("ID"),KELAS:e.get("ID"),STATUS:1});w++;v.simpanRuanganKelas(e,false,function(f,g){x.records.push(f);if(w==u.length){v.loadRuanganKelas()}})})},privates:{simpanRuanganKelas:function(p,s,u){var q=this,t=q.getView(),s=s!=undefined?s:true,o=p.get("ID");p.showError=true;p.save({callback:function(e,m,f){if(f){var l=e.get("REFERENSI"),g=l?(l.KELAS?l.KELAS.DESKRIPSI:""):"";t.notifyMessage((!Ext.isNumeric(o)?"Kelas <b>"+g+"</b>":"Data")+" telah tersimpan","danger-blue");if(s){q.loadRuanganKelas()}}if(Ext.isFunction(u)){u(e,f)}}})},loadRuanganKelas:function(){var g=this,l=g.getReferences();l.ruangankelaslist.reload()}}},0,0,0,0,["controller.ruangan-kelas-workspace"],0,[master.ruangan.kelas,"WorkspaceController"],0));(Ext.cmd.derive("master.ruanganfarmasi.Combo",com.Combo,{viewModel:{stores:{store:{type:"ruangan-farmasi-store"}}},emptyText:"[Pilih Depo Layanan]",displayField:"FARMASI",valueField:"FARMASI",minChars:2,tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="x-boundlist-item">','<div"><strong>{REFERENSI.FARMASI.DESKRIPSI}</strong></div>',"</div>","</tpl>"),displayTpl:Ext.create("Ext.XTemplate",'<tpl for=".">',"{REFERENSI.FARMASI.DESKRIPSI}","</tpl>")},0,["ruangan-farmasi-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","ruangan-farmasi-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"ruangan-farmasi-combo":true},["widget.ruangan-farmasi-combo"],0,[master.ruanganfarmasi,"Combo"],0));(Ext.cmd.derive("master.ruangankonsul.Combo",com.Combo,{viewModel:{stores:{store:{type:"ruangan-konsul-store"}}},emptyText:"[Pilih Tujuan Konsul]",displayField:"KONSUL",valueField:"KONSUL",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="x-boundlist-item">','<div"><strong>{REFERENSI.KONSUL.DESKRIPSI}</strong></div>',"</div>","</tpl>"),displayTpl:Ext.create("Ext.XTemplate",'<tpl for=".">',"{REFERENSI.KONSUL.DESKRIPSI}","</tpl>")},0,["ruangan-konsul-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","ruangan-konsul-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"ruangan-konsul-combo":true},["widget.ruangan-konsul-combo"],0,[master.ruangankonsul,"Combo"],0));(Ext.cmd.derive("master.ruanganlab.Combo",com.Combo,{viewModel:{stores:{store:{type:"ruangan-lab-store"}}},emptyText:"[Pilih Tujuan Laboratorium]",displayField:"LABORATORIUM",valueField:"LABORATORIUM",minChars:2,tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="x-boundlist-item">','<div"><strong>{REFERENSI.LABORATORIUM.DESKRIPSI}</strong></div>',"</div>","</tpl>"),displayTpl:Ext.create("Ext.XTemplate",'<tpl for=".">',"{REFERENSI.LABORATORIUM.DESKRIPSI}","</tpl>")},0,["ruangan-lab-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","ruangan-lab-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"ruangan-lab-combo":true},["widget.ruangan-lab-combo"],0,[master.ruanganlab,"Combo"],0));(Ext.cmd.derive("master.ruanganmutasi.Combo",com.Combo,{viewModel:{stores:{store:{type:"ruangan-mutasi-store"}}},emptyText:"[Pilih Tujuan Mutasi]",displayField:"MUTASI",valueField:"MUTASI",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="x-boundlist-item">','<div"><strong>{REFERENSI.MUTASI.DESKRIPSI}</strong></div>',"</div>","</tpl>"),displayTpl:Ext.create("Ext.XTemplate",'<tpl for=".">',"{REFERENSI.MUTASI.DESKRIPSI}","</tpl>")},0,["ruangan-mutasi-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","ruangan-mutasi-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"ruangan-mutasi-combo":true},["widget.ruangan-mutasi-combo"],0,[master.ruanganmutasi,"Combo"],0));(Ext.cmd.derive("master.ruanganoperasi.Combo",com.Combo,{viewModel:{stores:{store:{type:"ruangan-operasi-store"}}},emptyText:"[Pilih Tujuan Operasi]",displayField:"OPERASI",valueField:"OPERASI",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="x-boundlist-item">','<div"><strong>{REFERENSI.OPERASI.DESKRIPSI}</strong></div>',"</div>","</tpl>"),displayTpl:Ext.create("Ext.XTemplate",'<tpl for=".">',"{REFERENSI.OPERASI.DESKRIPSI}","</tpl>")},0,["ruangan-operasi-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","ruangan-operasi-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"ruangan-operasi-combo":true},["widget.ruangan-operasi-combo"],0,[master.ruanganoperasi,"Combo"],0));(Ext.cmd.derive("master.ruanganrad.Combo",com.Combo,{viewModel:{stores:{store:{type:"ruangan-rad-store"}}},emptyText:"[Pilih Tujuan Radiologi]",displayField:"RADIOLOGI",valueField:"RADIOLOGI",minChars:2,tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="x-boundlist-item">','<div"><strong>{REFERENSI.RADIOLOGI.DESKRIPSI}</strong></div>',"</div>","</tpl>"),displayTpl:Ext.create("Ext.XTemplate",'<tpl for=".">',"{REFERENSI.RADIOLOGI.DESKRIPSI}","</tpl>")},0,["ruangan-rad-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","ruangan-rad-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"ruangan-rad-combo":true},["widget.ruangan-rad-combo"],0,[master.ruanganrad,"Combo"],0));(Ext.cmd.derive("master.smfruangan.Form",com.Form,{controller:"smf-ruangan-form",model:"data.model.SmfRuangan",layout:{type:"hbox",align:"stretch"},border:false,defaults:{margin:2},bodyPadding:0,defaultType:"button",items:[{xtype:"referensi-combo",params:{JENIS:26,STATUS:1},firstLoad:true,name:"SMF",width:"60%",multiSelect:true,reference:"combosmf",emptyText:"[ PILIH SMF ]",allowBlank:false},{text:"ADD",listeners:{click:"onSimpan"}},{text:"ALL",listeners:{click:"onAllSmf"}}]},0,["smf-ruangan-form"],["component","box","container","panel","form","com-form","smf-ruangan-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"smf-ruangan-form":true},["widget.smf-ruangan-form"],0,[master.smfruangan,"Form"],0));(Ext.cmd.derive("master.smfruangan.FormController",Ext.app.ViewController,{onSimpan:function(m){var l=this,n=l.getView();n.save(m)},onAllSmf:function(){var l=this,n=l.getView(),m=n.getRecord();if(m){m.set("ALL",1);m.save({callback:function(g,f,e){if(e){n.fireEvent("save",g)}}})}}},0,0,0,0,["controller.smf-ruangan-form"],0,[master.smfruangan,"FormController"],0));(Ext.cmd.derive("master.smfruangan.List",com.Grid,{controller:"smf-ruangan-list",viewModel:{stores:{store:{type:"smf-ruangan-store"}}},cls:"x-br-top",borde:true,columns:[{xtype:"rownumberer",text:"No",align:"left",width:60},{text:"ID ",dataIndex:"ID",flex:1,hidden:true},{text:"SMF",dataIndex:"SMF",flex:4,renderer:"onSmfRender"},{xtype:"checkcolumn",header:"STATUS",dataIndex:"STATUS",width:90,listeners:{checkchange:"onChange"}}]},0,["smf-ruangan-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","smf-ruangan-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"smf-ruangan-list":true},["widget.smf-ruangan-list"],0,[master.smfruangan,"List"],0));(Ext.cmd.derive("master.smfruangan.ListController",Ext.app.ViewController,{onChange:function(s,w,x){var y=this,v=y.getView(),q=y.getViewModel(),u=q.get("store"),t=u.getAt(w);if(t){t.set("STATUS",x?1:0);t.scope=y;t.save({callback:function(e,g,f){if(f){v.notifyMessage("Status SMF di "+(x==true?"Aktifkan":"NonAktifkan"))}else{t.set("STATUS",x?0:1)}}})}},onSmfRender:function(n,p,o){var s=o.get("REFERENSI"),q=s?(s.SMF?s.SMF.DESKRIPSI:""):"";return q}},0,0,0,0,["controller.smf-ruangan-list"],0,[master.smfruangan,"ListController"],0));(Ext.cmd.derive("master.smfruangan.Workspace",com.Form,{controller:"smf-ruangan-workspace",viewModel:{data:{hideForm:true}},layout:"border",defaults:{border:false},initComponent:function(){var g=this,l=g.getController();g.items=[{region:"north",layout:{type:"hbox",align:"stretch"},margin:"2.2.2.2",items:[{xtype:"smf-ruangan-form",reference:"formsmfruangan",hidden:true,bind:{hidden:"{hideForm}"},flex:1,listeners:{scope:l,save:"onSuccess"}},{xtype:"component",flex:0.7},{xtype:"button",margin:2,height:32,cls:"x-fa fa-plus hide-icon-tools",tooltip:"Tambah Smf",listeners:{scope:l,click:"onAddSmf"}}]},{region:"center",xtype:"smf-ruangan-list",reference:"smfruanganlist"}];com.Form.prototype.initComponent.apply(this,arguments)},load:function(m){var n=this,o=n.getViewModel(),p=n.down("smf-ruangan-list");if(m){n.loadRecord(m);p.load({RUANGAN:m.get("ID")});o.set("hideForm",true)}}},0,["smf-ruangan-workspace"],["component","box","container","panel","form","com-form","smf-ruangan-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"smf-ruangan-workspace":true},["widget.smf-ruangan-workspace"],0,[master.smfruangan,"Workspace"],0));(Ext.cmd.derive("master.smfruangan.WorkspaceController",Ext.app.ViewController,{onAddSmf:function(s){var p=this,u=p.getView(),q=p.getViewModel(),t=p.getReferences(),w=q.get("record"),v=q.get("hideForm");q.set("hideForm",!v);t.formsmfruangan.createRecord({RUANGAN:w.get("ID"),STATUS:1});t.formsmfruangan.focus("SMF")},onSuccess:function(){var o=this,s=o.getView(),p=o.getViewModel(),q=o.getReferences(),n=p.get("record");q.smfruanganlist.reload();q.formsmfruangan.createRecord({RUANGAN:n.get("ID"),STATUS:1});p.set("hideForm",true)}},0,0,0,0,["controller.smf-ruangan-workspace"],0,[master.smfruangan,"WorkspaceController"],0));(Ext.cmd.derive("master.staff.Combo",master.pegawai.Combo,{viewModel:{stores:{store:{type:"staff-store"}}},valueField:"ID",loadStore:function(){var f=this.getViewModel().get("store");if(f){f.load()}}},0,["staff-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","pegawai-combo","staff-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"pegawai-combo":true,"staff-combo":true},["widget.staff-combo"],0,[master.staff,"Combo"],0));(Ext.cmd.derive("master.staff.Form",com.Form,{controller:"form-staff",viewModel:{stores:{store:{type:"staff-store",autoLoad:true}}},model:"data.model.StaffRuangan",border:false,items:[{layout:"border",layout:{type:"hbox",align:"stretch"},border:false,defaults:{margin:"2 2 3 1",flex:1},items:[{xtype:"combo",bodyPadding:2,name:"STAFF",bind:{store:"{store}"},displayField:"NAMA",valueField:"ID",queryMode:"local",flex:4,margin:"2 2 2 2",emptyText:"[ PILIH STAFF ]",allowBlank:false,tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="x-boundlist-item">','<div style="height: 17px;"><strong>{NAMA}</strong></div>','<div style="font-size: 12px;">{NIP}</div>',"</div>","</tpl>"),displayTpl:Ext.create("Ext.XTemplate",'<tpl for=".">',"{NIP} - {NAMA}","</tpl>")},{xtype:"button",text:"ADD",margin:"2 2 2 2",listeners:{click:"onSimpan"}}]}]},0,["form-staff"],["component","box","container","panel","form","com-form","form-staff"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-staff":true},["widget.form-staff"],0,[master.staff,"Form"],0));(Ext.cmd.derive("master.staff.FormController",Ext.app.ViewController,{onSimpan:function(l){var m=this,n=m.getView();n.save(l)}},0,0,0,0,["controller.form-staff"],0,[master.staff,"FormController"],0));(Ext.cmd.derive("master.staff.List",com.Grid,{controller:"staff-list",viewModel:{stores:{store:{type:"staff-ruangan-store"}}},cls:"x-br-top",border:true,columns:[{xtype:"rownumberer",text:"No",align:"left",width:60},{text:"ID ",dataIndex:"ID",flex:1},{text:"NIP",dataIndex:"ID",flex:2,renderer:"onStaffRender"},{text:"NAMA",dataIndex:"ID",flex:4,renderer:"onNamaStaffRender"},{xtype:"checkcolumn",header:"STATUS",dataIndex:"STATUS",width:90,listeners:{checkchange:"onChange"}}]},0,["staff-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","staff-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"staff-list":true},["widget.staff-list"],0,[master.staff,"List"],0));(Ext.cmd.derive("master.staff.ListController",Ext.app.ViewController,{onRemoveClick:function(n,m){var l=this;l.getStore("staffgridstore").removeAt(m)},onStaffRender:function(v,q,u,t,e,s){var w=u.get("REFERENSI");nip=w?(w.STAFF?w.STAFF.NIP:""):"";return nip},onNamaStaffRender:function(v,s,w,u,q,t){var p=w.get("REFERENSI");staff=p?(p.STAFF?p.STAFF.NAMA:""):"";return staff},onChange:function(t,f,w){var v=this,u=v.getViewModel(),g=u.get("staffruanganstore"),e=g.getAt(f);e.set("STATUS",w?1:0);e.scope=this;e.save({callback:function(m,l,n){if(n){Ext.toast({headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",html:"Status STAFF di"+(w==true?"Aktifkan":"Non Aktifkan"),align:"t"})}}})}},0,0,0,0,["controller.staff-list"],0,[master.staff,"ListController"],0));(Ext.cmd.derive("master.staff.Workspace",com.Form,{controller:"workspace-staff",viewModel:{data:{hideForm:true}},border:false,layout:"border",initComponent:function(){var f=this;f.items=[{region:"north",layout:{type:"hbox",align:"stretch"},border:false,items:[{xtype:"form-staff",reference:"formstaff",hidden:true,bind:{hidden:"{hideForm}"},flex:1,listeners:{scope:f.getController(),save:"onSuccess"}},{xtype:"component",flex:1},{xtype:"button",margin:2,height:32,cls:"x-fa fa-plus hide-icon-tools",tooltip:"Tambah Staff",listeners:{scope:f.getController(),click:"onAddStaff"}}]},{region:"center",xtype:"staff-list",border:false,reference:"stafflist"}];f.callParent(arguments);f.down("form-staff").setHidden(true)},load:function(n){var o=this,p=this.getViewModel(),m=o.down("staff-list");if(n){o.loadRecord(n);m.load({RUANGAN:n.get("ID")});p.set("hideForm",true)}}},0,["workspace-staff"],["component","box","container","panel","form","com-form","workspace-staff"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-staff":true},["widget.workspace-staff"],0,[master.staff,"Workspace"],0));(Ext.cmd.derive("master.staff.WorkspaceController",Ext.app.ViewController,{onAddStaff:function(u){var p=this,t=p.getView(),q=p.getViewModel(),s=p.getReferences(),w=q.get("record"),v=q.get("hideForm");q.set("hideForm",!v);s.formstaff.createRecord({RUANGAN:w.get("ID"),STATUS:1});s.formstaff.focus("STAFF")},onSuccess:function(){var o=this,s=o.getView(),p=o.getViewModel(),q=o.getReferences(),n=p.get("record");q.stafflist.reload();q.formstaff.createRecord({RUANGAN:n.get("ID"),STATUS:1});p.set("hideForm",true)}},0,0,0,0,["controller.workspace-staff"],0,[master.staff,"WorkspaceController"],0));(Ext.cmd.derive("master.staffruangan.Form",com.Form,{controller:"form-staffruangan",model:"data.model.StaffRuangan",border:false,layout:{type:"hbox",align:"stretch"},border:false,defaults:{margin:"2 2 2 2"},bodyPadding:0,items:[{xtype:"staff-combo",name:"STAFF",reference:"combostaff",flex:1,emptyText:"[ PILIH STAFF RUANGAN ]",allowBlank:false},{xtype:"button",text:"ADD",width:60,listeners:{click:"onSimpan"}}]},0,["form-staffruangan"],["component","box","container","panel","form","com-form","form-staffruangan"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-staffruangan":true},["widget.form-staffruangan"],0,[master.staffruangan,"Form"],0));(Ext.cmd.derive("master.staffruangan.FormController",Ext.app.ViewController,{onSimpan:function(m){var l=this,n=l.getView();n.save(m)}},0,0,0,0,["controller.form-staffruangan"],0,[master.staffruangan,"FormController"],0));(Ext.cmd.derive("master.staffruangan.List",com.Grid,{controller:"staffruangan-list",viewModel:{stores:{store:{type:"staff-ruangan-store"}}},cls:"x-br-top",border:true,columns:[{xtype:"rownumberer",text:"No",align:"left",width:60},{text:"ID ",dataIndex:"ID",flex:1},{text:"NIP",dataIndex:"ID",flex:2,renderer:"onNIPRender"},{text:"NAMA",dataIndex:"ID",flex:4,renderer:"onNamaRender"},{xtype:"checkcolumn",header:"STATUS",dataIndex:"STATUS",width:90,listeners:{checkchange:"onChange"}}]},0,["staffruangan-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","staffruangan-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"staffruangan-list":true},["widget.staffruangan-list"],0,[master.staffruangan,"List"],0));(Ext.cmd.derive("master.staffruangan.ListController",Ext.app.ViewController,{onChange:function(s,w,x){var y=this,v=y.getView(),q=y.getViewModel(),u=q.get("store"),t=u.getAt(w);if(t){t.set("STATUS",x?1:0);t.scope=y;t.save({callback:function(e,g,f){if(f){v.notifyMessage("Status di "+(x==true?"Aktifkan":"NonAktifkan"))}else{t.set("STATUS",x?0:1)}}})}},onNIPRender:function(n,q,o){var s=o.get("REFERENSI"),p=s?(s.STAFF?s.STAFF.NIP:""):"";return p},onNamaRender:function(n,p,o){var s=o.get("REFERENSI"),q=s?(s.STAFF?s.STAFF.NAMA:""):"";return q}},0,0,0,0,["controller.staffruangan-list"],0,[master.staffruangan,"ListController"],0));(Ext.cmd.derive("master.staffruangan.Workspace",com.Form,{controller:"workspace-staffruangan",viewModel:{data:{hideForm:true}},border:false,defaults:{border:false},layout:"border",initComponent:function(){var g=this,l=g.getController();g.items=[{region:"north",layout:{type:"hbox",align:"stretch"},items:[{xtype:"form-staffruangan",reference:"formstaffruangan",hidden:true,bind:{hidden:"{hideForm}"},flex:1,listeners:{scope:l,save:"onSuccess"}},{xtype:"component",flex:0.7},{xtype:"button",margin:2,height:32,cls:"x-fa fa-plus hide-icon-tools",tooltip:"Tambah Staff",listeners:{scope:l,click:"onAddStaffRuangan"}}]},{region:"center",xtype:"staffruangan-list",reference:"staffruanganlist"}];com.Form.prototype.initComponent.apply(this,arguments)},load:function(m){var n=this,o=n.getViewModel(),p=n.down("staffruangan-list");if(m){n.loadRecord(m);p.load({RUANGAN:m.get("ID")});o.set("hideForm",true)}}},0,["workspace-staffruangan"],["component","box","container","panel","form","com-form","workspace-staffruangan"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-staffruangan":true},["widget.workspace-staffruangan"],0,[master.staffruangan,"Workspace"],0));(Ext.cmd.derive("master.staffruangan.WorkspaceController",Ext.app.ViewController,{onAddStaffRuangan:function(s){var p=this,u=p.getView(),q=p.getViewModel(),t=p.getReferences(),w=q.get("record"),v=q.get("hideForm");q.set("hideForm",!v);t.formstaffruangan.createRecord({RUANGAN:w.get("ID"),STATUS:1});t.formstaffruangan.focus("STAFF")},onSuccess:function(){var o=this,s=o.getView(),p=o.getViewModel(),q=o.getReferences(),n=p.get("record");q.staffruanganlist.reload();q.formstaffruangan.createRecord({RUANGAN:n.get("ID"),STATUS:1})}},0,0,0,0,["controller.workspace-staffruangan"],0,[master.staffruangan,"WorkspaceController"],0));(Ext.cmd.derive("master.tarif.Workspace",com.Tab,{controller:"master-tarif-workspace",defaults:{textAlign:"left"},tabPosition:"right",tabRotation:0,cls:"x-br-right x-br-top",ui:"nav-tab",initComponent:function(){var f=this;f.items=[{title:"Tarif Administrasi",iconCls:"x-fa fa-money",xtype:"workspace-tarif-administrasi"},{title:"Tarif Ruang Rawat",iconCls:"x-fa fa-wheelchair",xtype:"workspace-tarifruangrawat"},{title:"Tarif O2",iconCls:"x-fa fa-heart",xtype:"workspace-tarifo2"},{title:"Tarif Farmasi Per-Kelas",iconCls:"x-fa fa-tags",xtype:"workspace-tarifkelasfarmasi"}];com.Tab.prototype.initComponent.apply(this,arguments)},load:function(){var f=this.getActiveTab();if(f){f.load({})}},listeners:{tabchange:"onTabChange"}},0,["master-tarif-workspace"],["component","box","container","panel","tabpanel","com-tab","master-tarif-workspace"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"master-tarif-workspace":true},["widget.master-tarif-workspace"],0,[master.tarif,"Workspace"],0));(Ext.cmd.derive("master.tarif.WorkspaceController",Ext.app.ViewController,{onTabChange:function(g,l){if(l.load){l.load({})}}},0,0,0,0,["controller.master-tarif-workspace"],0,[master.tarif,"WorkspaceController"],0));(Ext.cmd.derive("master.tarifadministrasi.Form",com.Form,{controller:"form-tarif-administrasi",viewModel:{stores:{administrasiStore:{type:"administrasi-store",queryParams:{STATUS:1},autoLoad:true}},data:{oldTarif:undefined,newTarif:false}},model:"data.model.TarifAdministrasi",initComponent:function(){var f=this;f.items=[{region:"north",layout:"hbox",defaults:{margin:"2.2.2.2",flex:1},items:[{xtype:"combobox",bind:{store:"{administrasiStore}"},displayField:"NAMA",valueField:"ID",name:"ADMINISTRASI",emptyText:"[ ADMINISTRASI ]"},{xtype:"referensi-combo",name:"JENIS_KUNJUNGAN",emptyText:"[ KUNJUNGAN ]"},{xtype:"checkbox",boxLabel:"Pasien Baru",boxLabelAlign:"before",name:"PASIEN_BARU"}]},{region:"center",layout:"hbox",defaults:{margin:"2.2.2.2",flex:1},items:[{xtype:"numberfield",hideTrigger:true,name:"TARIF",emptyText:"[ TARIF ]"},{xtype:"datetimefield",name:"TANGGAL_SK",format:"Y-m-d H:i:s",emptyText:"[ TANGGAL SK ]"},{xtype:"textfield",name:"NOMOR_SK",emptyText:"[ NOMOR SK ]"}]}];f.buttons=[{xtype:"button",iconCls:"x-fa fa-save",text:"Simpan",handler:"onSimpan"}];com.Form.prototype.initComponent.apply(this,arguments)},load:function(n,s){var p=this,q=p.getViewModel(),o=p.down("referensi-combo");if(n){q.set("oldTarif",n)}q.set("newTarif",s);if(s){p.createRecord({STATUS:1,TANGGAL:Ext.util.Format.date(p.getSysdate(),"Y-m-d H:i:s")})}else{p.createRecord({STATUS:1,TANGGAL:Ext.util.Format.date(p.getSysdate(),"Y-m-d H:i:s"),ADMINISTRASI:n.get("ADMINISTRASI"),JENIS_KUNJUNGAN:n.get("JENIS_KUNJUNGAN"),PASIEN_BARU:n.get("PASIEN_BARU"),TARIF:n.get("TARIF"),TANGGAL_SK:n.get("TANGGAL_SK"),NOMOR_SK:n.get("NOMOR_SK")})}o.getStore().setQueryParams({STATUS:1,JENIS:15});o.load()},onBeforeGetRecord:function(m,l){var n=m.down("[name=PASIEN_BARU]").getValue();l.PASIEN_BARU=n?1:0}},0,["form-tarif-administrasi"],["component","box","container","panel","form","com-form","form-tarif-administrasi"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-tarif-administrasi":true},["widget.form-tarif-administrasi"],0,[master.tarifadministrasi,"Form"],0));(Ext.cmd.derive("master.tarifadministrasi.FormController",Ext.app.ViewController,{onSimpan:function(q){var o=this,t=o.getView(),p=o.getViewModel(),u=p.get("oldTarif"),s=p.get("newTarif");if(s){t.save(q)}else{Ext.Msg.show({title:"Perhatian",message:"Apakah anda ingin menganti tarif ?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:q,fn:function(e){if(e==="yes"){u.set("STATUS",0);u.scope=o;u.save({callback:function(g,f,l){if(l){t.save(q)}else{t.notifyMessage("Tarif tidak dapat di ganti","danger-red")}}})}}})}},onBatal:function(m){var l=this,n=l.getView();n.fireEvent("cancel",true)}},0,0,0,0,["controller.form-tarif-administrasi"],0,[master.tarifadministrasi,"FormController"],0));(Ext.cmd.derive("master.tarifadministrasi.List",com.Grid,{controller:"list-tarif-administrasi",viewModel:{stores:{store:{type:"tarif-administrasi-store"}}},initComponent:function(){var f=this;if(!f.history){f.dockedItems=[{xtype:"toolbar",dock:"top",items:["->",{xtype:"button",iconCls:"x-fa fa-add",ui:"soft-green",text:"Tarif Baru",iconCls:"x-fa fa-plus-circle",handler:"onClickNewTarif"}]}]}f.columns=[{dataIndex:"ADMINISTRASI",flex:0.75,text:"Administrasi",xtype:"templatecolumn",tpl:'<div style="white-space:normal !important;">{REFERENSI.ADMINISTRASI.NAMA}</div>'},{dataIndex:"JENIS_KUNJUNGAN",flex:1,text:"Jenis Kunjungan",xtype:"templatecolumn",tpl:'<div style="white-space:normal !important;">{REFERENSI.JENIS_KUNJUNGAN.DESKRIPSI}</div>'},{dataIndex:"PASIEN_BARU",width:100,align:"center",text:"Pasien Baru?",xtype:"templatecolumn",tpl:new Ext.XTemplate("{[this.getJenisPasien(values.PASIEN_BARU)]}",{getJenisPasien:function(e){return e===0?"Tidak":"Ya"}})},{dataIndex:"TARIF",flex:0.5,xtype:"numbercolumn",format:"0.00",align:"right",text:"Tarif (Rp)"},{dataIndex:"TANGGAL_SK",flex:0.5,xtype:"datecolumn",format:"H:i:s d-m-Y",text:"Tanggal SK"},{dataIndex:"NOMOR_SK",flex:1,text:"Nomor SK"},{xtype:"widgetcolumn",text:"act",hidden:f.history,widget:{xtype:"fieldcontainer",defaultType:"button",layout:{type:"vbox",align:"stretch"},defaults:{padding:2,margin:"0 2 1 0"},items:[{text:"Ganti",handler:"onClickGanti",ui:"soft-red",iconCls:"x-fa fa-refresh"}]}}];com.Grid.prototype.initComponent.apply(this,arguments)}},0,["list-tarif-administrasi"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","list-tarif-administrasi"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"list-tarif-administrasi":true},["widget.list-tarif-administrasi"],0,[master.tarifadministrasi,"List"],0));(Ext.cmd.derive("master.tarifadministrasi.ListController",Ext.app.ViewController,{onClickGanti:function(n){var m=this,l=n.ownerCt.getWidgetRecord();m.showForm(n,l,false,"Ganti Tarif")},onClickEdit:function(q,u,s){var p=this,t=p.getView(),o=q.getStore().getAt(u);t.fireEvent("editTarif",o)},onClickNewTarif:function(m){var l=this,n=l.getView();l.showForm(m,{},true,"Tarif Baru")},privates:{showForm:function(q,u,s,o){var p=this,t=p.getView();t.openDialog("",true,"50%","25%",{title:o,showCloseButton:true,ui:(s)?"panel-green":"panel-red",iconCls:"x-fa fa-edit",xtype:"form-tarif-administrasi"},function(g,e){var f=e.down("form-tarif-administrasi");f.load(u,s);f.on("save",function(){e.close()});e.on("close",function(){t.reload()})},q)}}},0,0,0,0,["controller.list-tarif-administrasi"],0,[master.tarifadministrasi,"ListController"],0));(Ext.cmd.derive("master.tarifadministrasi.Workspace",com.Tab,{controller:"workspace-tarif-administrasi",title:"Tarif Administrasi",border:true,layout:"border",defaults:{border:true,margin:"1.1.1.1"},initComponent:function(){var f=this;f.items=[{title:"Tarif Administrasi",iconCls:"x-fa fa-list",history:false,xtype:"list-tarif-administrasi",flex:1},{title:"HISTORY",iconCls:"x-fa fa-history",history:true,xtype:"list-tarif-administrasi",flex:1}];com.Tab.prototype.initComponent.apply(this,arguments)},listeners:{tabchange:"onTabChange"},load:function(){var m=this,n=m.getViewModel(),o=m.getController(),p=m.getActiveTab();p.setLoading(true);o.onTabChange(m,p)}},0,["workspace-tarif-administrasi"],["component","box","container","panel","tabpanel","com-tab","workspace-tarif-administrasi"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"workspace-tarif-administrasi":true},["widget.workspace-tarif-administrasi"],0,[master.tarifadministrasi,"Workspace"],0));(Ext.cmd.derive("master.tarifadministrasi.WorkspaceController",Ext.app.ViewController,{onEditTarif:function(m){var n=this,o=n.getReferences(),p=n.getView();o.form.loadRecord(m)},onTabChange:function(g,l){if(!l.history){params={STATUS:1}}else{params={STATUS:0}}if(l.load){l.loadStore(params)}},onSave:function(){var g=this,l=g.getView();l.load()},onCancel:function(){var g=this,l=g.getView();l.load()}},0,0,0,0,["controller.workspace-tarif-administrasi"],0,[master.tarifadministrasi,"WorkspaceController"],0));(Ext.cmd.derive("master.tarifkelasfarmasi.List",com.Grid,{controller:"list-tarifkelasfarmasi",viewModel:{data:{tarifruangrawat:undefined,hideSimpan:true,allhide:true,allTarif:false},stores:{store:{type:"tariffarmasiperkelas-store"},kelasstore:{type:"referensi-store",queryParams:{JENIS:19}}}},history:false,hideGantiTarif:false,cls:"x-br-top",dockedItems:[{xtype:"toolbar",dock:"top",items:["->",{xtype:"checkbox",bind:{hidden:"{hideSimpan}"},boxLabel:"Samakan Data",reference:"smtarif",listeners:{change:"onSamakanTarif"}},{text:"Ganti Semua Tarif",xtype:"button",ui:"soft-red",bind:{hidden:"{allhide}"},reference:"all",listeners:{click:"onClickAll"}},{text:"SIMPAN",xtype:"button",ui:"soft-green",bind:{hidden:"{hideSimpan}"},reference:"simpan",listeners:{click:"onSimpan"}}]}],initComponent:function(){var l=this,g=l.getViewModel().get("store");l.cellEditing=new Ext.grid.plugin.CellEditing({clicksToEdit:1,listeners:{beforeedit:"onBeforeEdit"}});l.columns=[{text:"Kelas",dataIndex:"KELAS",flex:1,renderer:"onRenderKelas"},{text:"Farmasi ( Berdasarkan Persentase % )",dataIndex:"FARMASI",flex:1,editor:{xtype:"numberfield",allowBlank:false,listeners:{change:"onChange"}}},{xtype:"datecolumn",text:"Tanggal",format:"Y-m-d H:i:s",dataIndex:"TANGGAL",flex:1,editor:{xtype:"datefield",format:"Y-m-d H:i:s",listeners:{change:"onChange"}}},{text:"Action",xtype:"widgetcolumn",hidden:l.history,width:"10%",onWidgetAttach:function(f,n,e){n.setHidden(!Ext.isNumeric(e.get("ID")))},widget:{xtype:"button",text:"Ganti Tarif",action:0,listeners:{click:"onClickGantiTarif"}}}];if(!l.history){l.plugins=[l.cellEditing];l.cellModel={selType:"cellmodel"}}g.on("load",function(s,q,e){if(l.getViewModel()){var p=l.getViewModel().get("kelasstore"),f=[];p.each(function(n){var m=g.findRecord("KELAS",n.get("ID"),0,false,true);if(!m){if(!l.history){f.push(Ext.create("data.model.TarifFarmasiPerKelas",{KELAS:n.get("ID"),STATUS:1}))}}});g.add(f);l.getViewModel().set("hideSimpan",f.length==0);l.getViewModel().set("allhide",f.length==0);if(f.length==0){if(!l.history){l.getViewModel().set("allhide",l.history)}else{l.getViewModel().set("hideSimpan",true);l.getViewModel().set("allhide",true)}}}});com.Grid.prototype.initComponent.apply(this,arguments)},loadData:function(){var f=this;vm=f.getViewModel().get("kelasstore");vm.load({callback:function(e,n,m){if(m){f.load({STATUS:1})}}})}},0,["list-tarifkelasfarmasi"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","list-tarifkelasfarmasi"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"list-tarifkelasfarmasi":true},["widget.list-tarifkelasfarmasi"],0,[master.tarifkelasfarmasi,"List"],0));(Ext.cmd.derive("master.tarifkelasfarmasi.ListController",Ext.app.ViewController,{recordSelected:undefined,onSamakanTarif:function(l,g){if(!g){this.getView().loadStore(this.getViewModel().get("store"))}},onRenderKelas:function(z,w,e,y,g,x){var v=this,A=v.getViewModel(),f=A.get("kelasstore");return this.getDeskripsi(f,e.get("KELAS"))},getDeskripsi:function(n,m){var l=n.findRecord("ID",m,0,false,true);if(l==null){return m}return l.get("DESKRIPSI")},onBeforeEdit:function(l,n){var m=n.record;this.recordSelected=m;if(Ext.isNumeric(m.get("ID"))&&m.get("ID")>0){n.cancel=true}if(n.colIdx==0||n.colIdx==10){n.cancel=true}if(!n.cancel){this.getViewModel().set("hideSimpan",false)}if(!n.cancel){this.getViewModel().set("allhide",true)}},onSimpan:function(f){var o=this,p=o.getViewModel();rec=p.get("dataTarif");allganti=p.get("farmasiperkelas");allTarif=p.get("allTarif");if(allTarif){total=allganti.totalCount;for(var n=0;n<total;n++){a=1;record=allganti.getAt(n);record.set("STATUS",0);record.scope=this;record.save({callback:function(l,g,e){total2=allganti.totalCount;b=total2;if(e){if(a==b){o.simpan(f)}}a++}})}}else{if(rec){rec.scope=this;rec.save({callback:function(l,g,e){if(e){o.simpan(f)}}})}else{o.simpan(f)}}},privates:{simpan:function(n){var l=this,m=l.getViewModel();store=m.get("store"),rec=store.getModifiedRecords(),c=0,dataarray=[];Ext.Array.each(rec,function(e){if(e.modified){dataarray.push(e)}});Ext.Array.each(dataarray,function(e){e.save({callback:function(p,g,f){if(dataarray.length-1==c){if(f){l.getView().notifyMessage("Data telah tersimpan")}store.removeAll();m.set("allTarif",false);store.load();l.getView().refresh()}c++}})})}},onChange:function(n,m){var l=this;refs=l.getReferences().smtarif.getValue();if(refs){if(l.recordSelected){l.getViewModel().get("store").each(function(f){var e=true;if(Ext.isNumeric(f.get("ID"))&&f.get("ID")>0){e=false}if(f.get("ID")==l.recordSelected.get("ID")){e=false}if(e){f.set(n.dataIndex,m)}})}}},onClickGantiTarif:function(p){var n=this,o=n.getViewModel(),m=p.getWidgetRecord();store=n.getViewModel().get("store");Ext.Msg.show({title:"Konfirmasis",message:"Apakah anda ingin mengganti tarif?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:function(f){if(f==="yes"){m.set("STATUS",0);o.set("dataTarif",m);var e=Ext.create("data.model.TarifFarmasiPerKelas",{KELAS:m.get("KELAS"),TANGGAL:"",FARMASI:0,STATUS:1});store.remove(m);store.insert(store.totalCount,e)}}})},onClickAll:function(u){var p=this,q=p.getViewModel(),o=p.getViewModel().get("store"),t=p.getViewModel().get("kelasstore"),s=[];Ext.Msg.show({title:"Konfirmasis",message:"Apakah anda ingin mengganti semua tarif?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:function(e){if(e==="yes"){q.set("allTarif",true);o.removeAll();t.each(function(f){s.push(Ext.create("data.model.TarifFarmasiPerKelas",{KELAS:f.get("ID"),TANGGAL:"",FARMASI:0,STATUS:1}))});o.insert(0,s)}}})}},0,0,0,0,["controller.list-tarifkelasfarmasi"],0,[master.tarifkelasfarmasi,"ListController"],0));(Ext.cmd.derive("master.tarifkelasfarmasi.ListHistory",com.Grid,{viewModel:{stores:{store:{type:"tariffarmasiperkelas-store"},kelasstore:{type:"referensi-store",queryParams:{JENIS:19}}}},cls:"x-br-top",initComponent:function(){this.columns=[{text:"Kelas",dataIndex:"KELAS",flex:1,renderer:function(z,w,e,y,g,x){var v=this,A=v.getViewModel(),f=A.get("kelasstore");return this.getDeskripsi(f,e.get("KELAS"))}},{text:"Farmasi ( Berdasarkan Persentase % )",dataIndex:"FARMASI",flex:1},{text:"Tanggal",xtype:"datecolumn",format:"Y-m-d H:i:s",dataIndex:"TANGGAL",flex:1}];com.Grid.prototype.initComponent.apply(this,arguments)},loadStore:function(){var f=this.getViewModel().get("store");vm=this.getViewModel().get("kelasstore");vm.load({callback:function(e,n,m){if(m){f.removeAll();f.queryParams={STATUS:0};f.load()}}})},getDeskripsi:function(n,m){var l=n.findRecord("ID",m,0,false,true);if(l==null){return m}return l.get("DESKRIPSI")}},0,["historyfarmasikelas-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","historyfarmasikelas-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"historyfarmasikelas-list":true},["widget.historyfarmasikelas-list"],0,[master.tarifkelasfarmasi,"ListHistory"],0));(Ext.cmd.derive("master.tarifkelasfarmasi.ViewModel",Ext.app.ViewModel,{},0,0,0,0,["viewmodel.tarifkelasfarmasimodel"],0,[master.tarifkelasfarmasi,"ViewModel"],0));(Ext.cmd.derive("master.tarifkelasfarmasi.Workspace",com.Form,{controller:"workspace-tarifkelasfarmasi",layout:"border",initComponent:function(){this.items=[{region:"center",title:"TARIF FARMASI PER-KELAS ",flex:1,xtype:"list-tarifkelasfarmasi",reference:"list",history:false,listeners:{refresh:"onTarifRefresh"}}];this.buttons=[{text:"HISTORY",ui:"soft-blue",iconCls:"x-fa fa-history",handler:"onClickHistory"}];com.Form.prototype.initComponent.apply(this,arguments)},load:function(){var f=this.down("[reference=list]");f.loadData()}},0,["workspace-tarifkelasfarmasi"],["component","box","container","panel","form","com-form","workspace-tarifkelasfarmasi"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-tarifkelasfarmasi":true},["widget.workspace-tarifkelasfarmasi"],0,[master.tarifkelasfarmasi,"Workspace"],0));(Ext.cmd.derive("master.tarifkelasfarmasi.WorkspaceController",Ext.app.ViewController,{onClickHistory:function(f){var m=this,n=m.getView();n.openDialog("",true,0,0,{xtype:"historyfarmasikelas-list",showCloseButton:true,ui:"panel-blue",iconCls:"x-fa fa-history",title:"History Tarif"},function(g,l){var e=l.down("historyfarmasikelas-list");e.loadStore()},f)}},0,0,0,0,["controller.workspace-tarifkelasfarmasi"],0,[master.tarifkelasfarmasi,"WorkspaceController"],0));(Ext.cmd.derive("master.tarifo2.Form",com.Form,{controller:"form-tarifo2",layout:{type:"hbox",align:"stretch"},bodyPadding:4,border:true,defaults:{margin:"0 1 0 1"},viewModel:{data:{datarecord:undefined}},model:"data.model.TarifO2",initComponent:function(){this.items=[{xtype:"numberfield",name:"TARIF",emptyText:"[ Tarif ]",flex:1,allowBlank:false,hideTrigger:true,bind:{readOnly:"{formConfig.simpan}"}},{xtype:"datefield",name:"TANGGAL_SK",emptyText:"[ Tanggal SK ]",format:"Y-m-d H:i:s",allowBlank:false,flex:1,bind:{readOnly:"{formConfig.simpan}"}},{xtype:"textfield",name:"NOMOR_SK",emptyText:"[ Nomor SK ]",flex:1,bind:{readOnly:"{formConfig.simpan}"}},{text:"Ganti Tarif",xtype:"button",ui:"soft-black",bind:{hidden:"{!formConfig.simpan}"},handler:"onGantiTarif"},{text:"Simpan",xtype:"button",ui:"soft-green",iconCls:"x-fa fa-save",bind:{hidden:"{formConfig.simpan}"},handler:"onSimpan"},{text:"Reset",xtype:"button",ui:"soft-red",iconCls:"x-fa fa-times",bind:{hidden:"{formConfig.simpan}"},handler:"onReset"}];com.Form.prototype.initComponent.apply(this,arguments)}},0,["form-tarifo2"],["component","box","container","panel","form","com-form","form-tarifo2"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-tarifo2":true},["widget.form-tarifo2"],0,[master.tarifo2,"Form"],0));(Ext.cmd.derive("master.tarifo2.FormController",Ext.app.ViewController,{onReset:function(){var n=this,p=n.getView(),o=n.getViewModel().get("datarecord"),m=p.getRecord();if(o){obj={STATUS:1,TANGGAL:p.getSysdate()}}else{obj={STATUS:1,TANGGAL:p.getSysdate()}}p.getForm().reset();p.createRecord(obj)},onSimpan:function(n){var m=this,p=m.getView(),o=m.getViewModel().get("datarecord");if(o){o.set("STATUS",0);o.animateTarget=n;o.scope=m;o.showError=true;o.save({callback:function(f,e,g){if(g){p.save(n);m.getViewModel().set("datarecord",undefined)}}})}else{p.save(n)}},onGantiTarif:function(p){var n=this,q=n.getView(),o=n.getViewModel(),s=q.getRecord();Ext.Msg.show({title:"Konfirmasi",message:"Apakah anda ingin mengganti tarif?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:function(e){if(e=="yes"){o.set("datarecord",Ext.create("data.model.TarifO2",s.data));q.setFormConfig({viewOnly:!status,simpan:false});n.onReset()}}})}},0,0,0,0,["controller.form-tarifo2"],0,[master.tarifo2,"FormController"],0));(Ext.cmd.derive("master.tarifo2.List",com.Grid,{viewModel:{stores:{store:{type:"tarifo2-store"}}},columns:[{xtype:"rownumberer",text:"No",align:"left",width:100},{text:"TARIF",dataIndex:"TARIF",flex:1},{xtype:"datecolumn",format:"Y-m-d H:i:s",text:"TANGGAL SK",dataIndex:"TANGGAL_SK",flex:1},{text:"NOMOR SK",dataIndex:"NOMOR_SK",flex:3}]},0,["tarifo2-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","tarifo2-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"tarifo2-list":true},["widget.tarifo2-list"],0,[master.tarifo2,"List"],0));(Ext.cmd.derive("master.tarifo2.Workspace",com.Form,{controller:"workspace-tarifo2",layout:"border",viewModel:{stores:{tarif:{type:"tarifo2-store"}}},defaults:{border:false},initComponent:function(){this.items=[{region:"north",title:"Form",iconCls:"x-fa fa-edit",xtype:"form-tarifo2",listeners:{save:"onSave"}},{region:"center",title:"History",iconCls:"x-fa fa-list",xtype:"tarifo2-list"}];com.Form.prototype.initComponent.apply(this,arguments)},load:function(g){var l=this;form=l.down("form-tarifo2");list=l.down("tarifo2-list");vm=l.getViewModel();tarif=vm.get("tarif");tarif.queryParams={STATUS:1};tarif.load({callback:function(e,n,f){if(f){form.loadRecord(e[0]);form.setFormConfig({viewOnly:f,simpan:f})}else{form.createRecord({TANGGAL:l.getSysdate(),STATUS:1});form.setFormConfig({viewOnly:false,simpan:false})}}});list.load({STATUS:0})}},0,["workspace-tarifo2"],["component","box","container","panel","form","com-form","workspace-tarifo2"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-tarifo2":true},["widget.workspace-tarifo2"],0,[master.tarifo2,"Workspace"],0));(Ext.cmd.derive("master.tarifo2.WorkspaceController",Ext.app.ViewController,{onSave:function(f){this.getView().load(f)}},0,0,0,0,["controller.workspace-tarifo2"],0,[master.tarifo2,"WorkspaceController"],0));(Ext.cmd.derive("master.tarifruangrawat.List",com.Grid,{controller:"tarifruangrawat-list",viewModel:{data:{tarifruangrawat:undefined,hideSimpan:true,allhide:true},stores:{store:{type:"tarifruangrawat-store"},kelasstore:{type:"referensi-store",queryParams:{JENIS:19,STATUS:1}}}},history:false,cls:"x-br-top",autoScroll:true,dockedItems:[{xtype:"toolbar",dock:"top",items:["->",{xtype:"checkbox",bind:{hidden:"{hideSimpan}"},boxLabel:"Samakan Data",reference:"smtarif"},{text:"Ganti Semua Tarif",xtype:"button",reference:"tombolAll",bind:{hidden:"{allhide}"},reference:"all",listeners:{click:"onClickAll"}},{text:"SIMPAN",xtype:"button",iconCls:"x-fa fa-save",hidden:true,bind:{hidden:"{hideSimpan}"},reference:"simpan",listeners:{click:"onSimpan"}}]}],initComponent:function(){var l=this,m=l.getViewModel(),n=m.get("store");l.cellEditing=new Ext.grid.plugin.CellEditing({clicksToEdit:1,listeners:{beforeedit:"onBeforeEdit"}});l.columns=[{text:"Kelas",dataIndex:"KELAS",flex:1,renderer:"onRenderKelas",editor:{xtype:"combo",bind:{store:"{kelasstore}"},displayField:"DESKRIPSI",valueField:"ID"}},{xtype:"numbercolumn",text:"Sarana",format:"0,000",dataIndex:"SARANA",align:"right",width:120,editor:{xtype:"numberfield",allowBlank:false,listeners:{change:"onChange"}}},{xtype:"numbercolumn",text:"Jasa Pelayanan",format:"0,000",dataIndex:"JASA_PELAYANAN",align:"right",width:130,editor:{xtype:"numberfield",allowBlank:false,listeners:{change:"onChange"}}},{xtype:"templatecolumn",text:"Tarif",align:"right",width:120,tpl:new Ext.XTemplate('<div style="font-weight: bold; font-size: 14px; white-space:normal !important;">{[this.getTotal(values)]} </div>',{getTotal:function(e){var f=Number(e.SARANA)+Number(e.JASA_PELAYANAN);return Ext.util.Format.number(f<0?0:f,"0,000")}})},{text:"Tanggal SK ",xtype:"datecolumn",format:"Y-m-d H:i:s",dataIndex:"TANGGAL_SK",editor:{xtype:"datefield",format:"d/m/Y",listeners:{change:"onChange"}},width:120},{text:"Nomor SK ",dataIndex:"NOMOR_SK",width:120,editor:{allowBlank:false,listeners:{change:"onChange"}}},{text:"Action",xtype:"widgetcolumn",width:"10%",hidden:l.history,onWidgetAttach:function(e,f,g){f.setHidden(!Ext.isNumeric(g.get("ID")))},widget:{xtype:"button",text:"Ganti Tarif",action:0,listeners:{click:"onClickGantiTarif"}}}];if(!l.history){l.plugins=[l.cellEditing];l.selModel={selType:"cellmodel"}}com.Grid.prototype.initComponent.apply(this,arguments)},doAfterLoad:function(x,s,w,t){var y=x.getViewModel(),u=y.get("store"),q=y.get("kelasstore"),v=[];if(q){q.each(function(e){var f=u.findRecord("KELAS",e.get("ID"),0,false,true,true);if(!f){if(!x.history){v.push(Ext.create("data.model.TarifRuangRawat",{KELAS:e.get("ID")}))}}});u.add(v);y.set("hideSimpan",v.length==0);y.set("allhide",v.length==0);if(v.length==0){if(!x.history){y.set("allhide",x.history)}}}},loadStore:function(m){var n=this,o=this.getViewModel(),p=o.get("kelasstore");if(p){if(n.history){delete p.queryParams.STATUS}p.load({callback:function(f,e,g){if(g){n.load(m)}}})}}},0,["tarifruangrawat-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","tarifruangrawat-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"tarifruangrawat-list":true},["widget.tarifruangrawat-list"],0,[master.tarifruangrawat,"List"],0));(Ext.cmd.derive("master.tarifruangrawat.ListController",Ext.app.ViewController,{recordSelected:undefined,onRenderKelas:function(A,s,y,u,w,x){var v=this,z=v.getViewModel(),t=z.get("kelasstore");return v.getDeskripsi(t,y.get("KELAS"))},getDeskripsi:function(m,l){var n=m.findRecord("ID",l,0,false,true);if(n==null){return l}return n.get("DESKRIPSI")},onBeforeEdit:function(p,s){var o=this,q=o.getViewModel(),n=s.record;o.recordSelected=n;if(Ext.isNumeric(n.get("ID"))&&n.get("ID")>0){s.cancel=true}if(s.colIdx==0||s.colIdx==10){s.cancel=true}if(!s.cancel){q.set("hideSimpan",false)}if(!s.cancel){q.set("allhide",true)}},onSimpan:function(s){var w=this,u=w.getView(),q=w.getViewModel(),t=q.get("store"),v=t.getModifiedRecords(),p=[];Ext.Array.each(v,function(e){if(e.modified){p.push(e)}});w.total=p.length-1;w.count=0;u.setLoading(true);Ext.Array.each(p,function(e){e.save({callback:function(f,l,g){if(g){if(w.count==w.total){u.notifyMessage("Data telah tersimpan");u.refresh()}}w.count++}})})},onChange:function(p,q){var u=this,o=u.getViewModel(),s=u.getReferences(),t=o.get("store");if(s.smtarif.getValue()){if(u.recordSelected){t.each(function(f){var e=true;if(Ext.isNumeric(f.get("ID"))&&f.get("ID")>0){e=false}if(f.get("ID")==u.recordSelected.get("ID")){e=false}if(e){f.set(p.dataIndex,q)}})}}},onClickGantiTarif:function(q){var o=this,s=o.getView(),p=o.getViewModel(),n=q.getWidgetRecord();Ext.Msg.show({title:"Konfirmasi",message:"Apakah anda ingin mengganti tarif?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:q,fn:function(e){if(e==="yes"){n.set("STATUS",0);n.scope=this;s.setLoading(true);n.save({callback:function(f,l,g){if(g){s.notifyMessage("Silahkan input Tarif Baru");s.refresh()}else{s.setLoading(false)}}})}}})},onClickAll:function(p){var n=this,s=n.getView(),o=n.getViewModel(),q=o.get("store");Ext.Msg.show({title:"Konfirmasis",message:"Apakah anda ingin mengganti semua tarif?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:p,fn:function(e){if(e==="yes"){n.total=q.totalCount-1;n.count=0;s.setLoading(true);for(var f=0;f<=n.total;f++){rec=q.getAt(f);rec.set("STATUS",0);rec.scope=this;rec.save({callback:function(g,m,l){if(l){if(n.count==n.total){s.notifyMessage("Silahkan input Tarif Baru");s.refresh()}}n.count++}})}}}})}},0,0,0,0,["controller.tarifruangrawat-list"],0,[master.tarifruangrawat,"ListController"],0));(Ext.cmd.derive("master.tarifruangrawat.Workspace",com.Form,{controller:"workspace-tarifruangrawat",layout:"fit",items:[{region:"center",title:"TARIF RUANG RAWAT ",xtype:"tarifruangrawat-list",flex:1,reference:"tarifruangrawatlist"}],buttons:[{text:"HISTORY",ui:"soft-blue",iconCls:"x-fa fa-history",handler:"onClickHistory"}],load:function(){var f=this.down("[reference=tarifruangrawatlist]");f.loadStore({STATUS:1})}},0,["workspace-tarifruangrawat"],["component","box","container","panel","form","com-form","workspace-tarifruangrawat"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-tarifruangrawat":true},["widget.workspace-tarifruangrawat"],0,[master.tarifruangrawat,"Workspace"],0));(Ext.cmd.derive("master.tarifruangrawat.WorkspaceController",Ext.app.ViewController,{onClickHistory:function(m){var l=this,n=l.getView();n.openDialog("",true,0,0,{title:"History Tarif Ruang Rawat",showCloseButton:true,ui:"panel-blue",iconCls:"x-fa fa-edit",xtype:"tarifruangrawat-list",history:true},function(f,g){var e=g.down("tarifruangrawat-list");e.loadStore({STATUS:0})},m)}},0,0,0,0,["controller.workspace-tarifruangrawat"],0,[master.tarifruangrawat,"WorkspaceController"],0));(Ext.cmd.derive("master.tenagamedis.Combo",master.pegawai.Combo,{viewModel:{stores:{store:{type:"tenaga-medis-store"}}},valueField:"ID"},0,["tenaga-medis-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","pegawai-combo","tenaga-medis-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"pegawai-combo":true,"tenaga-medis-combo":true},["widget.tenaga-medis-combo"],0,[master.tenagamedis,"Combo"],0));(Ext.cmd.derive("master.tindakan.Combo",com.Combo,{viewModel:{stores:{store:{type:"tindakan-store"}}},emptyText:"[Masukkan Nama Tindakan]",queryMode:"remote",params:{start:0,limit:3000},hideTrigger:true,queryParam:"QUERY",displayField:"NAMA",minChars:2,tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="x-boundlist-item">',"<div ><strong>{NAMA}</strong></div>",'<div style="font-size: 12px;">{ID}</div>',"</div>","</tpl>"),displayTpl:Ext.create("Ext.XTemplate",'<tpl for=".">',"{ID} - {NAMA}","</tpl>")},0,["tindakan-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","tindakan-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"tindakan-combo":true},["widget.tindakan-combo"],0,[master.tindakan,"Combo"],0));(Ext.cmd.derive("master.tindakan.Form",com.Form,{controller:"form-tindakan",layout:{type:"hbox",align:"stretch"},model:"data.model.Tindakan",header:false,border:true,defaults:{margin:"0 1 0 1"},initComponent:function(){this.items=[{xtype:"textfield",name:"NAMA",reference:"deksripsi",emptyText:"[Nama Tindakan]",flex:3},{xtype:"referensi-combo",params:{JENIS:74,STATUS:1},firstLoad:true,name:"JENIS",reference:"combojenis",flex:1,emptyText:"[ Jenis/Kategori/Kelompok Tindakan ]",allowBlank:false},{xtype:"button",text:"Simpan",ui:"soft-green",iconCls:"x-fa fa-save",handler:"onSimpan"},{text:"Batal",xtype:"button",ui:"soft-red",iconCls:"x-fa fa-times",handler:"onBatal"}];com.Form.prototype.initComponent.apply(this,arguments)}},0,["form-tindakan"],["component","box","container","panel","form","com-form","form-tindakan"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-tindakan":true},["widget.form-tindakan"],0,[master.tindakan,"Form"],0));(Ext.cmd.derive("master.tindakan.FormController",Ext.app.ViewController,{onSimpan:function(m){var l=this,n=l.getView();n.save(m)},onBatal:function(l){var m=this,n=m.getView();n.fireEvent("batal")}},0,0,0,0,["controller.form-tindakan"],0,[master.tindakan,"FormController"],0));(Ext.cmd.derive("master.tindakan.List",com.Grid,{controller:"tindakan-list",viewModel:{stores:{store:{type:"tindakan-store"}}},cls:"x-br-top",border:true,showSearch:false,initComponent:function(){var f=this;if(f.showSearch){f.header={items:[{xtype:"search-field",cls:"x-text-border",iconCls:"iconSearch",autoFocus:true,emptyText:"Cari Tindakan",enableKeyEvents:true,flex:1,listeners:{search:"onSearch",clear:"onClear"}}]}}f.initColumns();f.callParent(arguments)},privates:{initColumns:function(){var f=this;f.columns=[{xtype:"rownumberer",text:"No",align:"left",width:40,hidden:f.hideHeaders},{text:" ID ",dataIndex:"ID",flex:1,hidden:f.hideHeaders},{text:"Nama Tindakan ",dataIndex:"NAMA",flex:4,hidden:f.hideHeaders},{xtype:"templatecolumn",text:"Kategori Tindakan ",dataIndex:"JENIS",flex:4,hidden:f.hideHeaders,tpl:'<div style="white-space:normal !important;">{REFERENSI.JENIS.DESKRIPSI}</div>'},{xtype:"checkcolumn",header:"Status",dataIndex:"STATUS",width:90,stopSelection:true,hidden:f.hideHeaders,listeners:{checkchange:"onChange"}},{text:"Action",width:98,xtype:"widgetcolumn",hidden:f.hideHeaders,widget:{xtype:"button",padding:3,ui:"soft-blue",text:"Input Tarif",listeners:{click:"onClickTarif"}}},{xtype:"templatecolumn",flex:1,hidden:!f.hideHeaders,tpl:'<div style="font-weight: bold; white-space:normal !important;">{ID} - {NAMA}</div>'},{xtype:"templatecolumn",align:"right",hidden:!f.hideHeaders,tpl:new Ext.XTemplate("<div>{[this.numberFormat(values.REFERENSI.TARIF.TARIF)]}</div>",{numberFormat:function(e){return Ext.util.Format.number(e,"0,000")}})}]}},loadStore:function(m){var l=this,n=l.getViewModel().get("store");if(n){n.removeAll();n.queryParams=n.queryParams||{};if(m){if(Ext.getClassName(m)=="data.model.Ruangan"){n.queryParams={RUANGAN:m.get("RUANGAN")}}else{n.queryParams=m}}n.load()}},clearSearch:function(){this.down("search-field").setValue("")},refresh:function(){var f=this.getViewModel().get("store");if(f){f.reload()}},removeDataStore:function(){this.getViewModel().get("store").removeAll()}},0,["tindakan-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","tindakan-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"tindakan-list":true},["widget.tindakan-list"],0,[master.tindakan,"List"],0));(Ext.cmd.derive("master.tindakan.ListController",Ext.app.ViewController,{onChange:function(u,f,x){var w=this,e=w.getView(),v=w.getViewModel(),g=v.get("store"),y=g.getAt(f);y.set("STATUS",x?1:0);y.scope=this;y.save({callback:function(m,l,n){if(n){e.notifyMessage("Status Tindakan di"+(x==true?"Aktifkan":"NonAktifkan"))}else{y.set("STATUS",x?0:1)}}})},onSearch:function(l,g){this.doSearch(g)},onClear:function(){this.doSearch("")},privates:{doSearch:function(g){var l=this.getStore("store");if(l){l.clearFilter(true);l.filterBy(function(f,n){var e=f.get("NAMA").toUpperCase().indexOf(g.toUpperCase());return e>=0})}}},onClickTarif:function(t){var v=this,f=v.getView(),w=t.getWidgetRecord(),u=v.getViewModel(),s=w.get("ID");var e="( "+s+" )  "+w.get("NAMA");f.openWindow({title:"Tarif Tindakan",iconCls:"x-fa fa-money",ui:"danger-blue",header:{margin:0,padding:"10 15 10 15"},closable:true,maximized:true,constrain:f,layout:"border",border:false,items:[{region:"north",bodyPadding:5,html:"<h2> "+e+" </h2><hr>"},{region:"center",bodyPadding:5,flex:1,xtype:"tarif-tab"}]},function(l,g){g.down("tarif-tab").load(w)})},onRenderTanggal:function(f){return Ext.Date.format(f,"d F Y")}},0,0,0,0,["controller.tindakan-list"],0,[master.tindakan,"ListController"],0));(Ext.cmd.derive("master.tindakan.ViewModel",Ext.app.ViewModel,{stores:{kelasstore:{type:"referensi-store",queryParams:{JENIS:19,STATUS:1},autoLoad:true}}},0,0,0,0,["viewmodel.tindakanmodel"],0,[master.tindakan,"ViewModel"],0));(Ext.cmd.derive("master.tindakan.Workspace",com.Form,{controller:"workspace-tindakan",viewModel:{data:{hideForm:true}},layout:"border",border:false,initComponent:function(){var f=this;f.items=[{region:"north",ui:"panel-gray",title:"Tindakan",iconCls:"x-fa fa-list",header:{items:[{xtype:"button",margin:2,height:32,cls:"x-fa fa-plus hide-icon-tools",tooltip:"Tambah Tindakan",listeners:{click:"onAddTindakan"}}]},layout:"fit",items:[{xtype:"form-tindakan",bind:{hidden:"{hideForm}"},reference:"formtindakan",listeners:{scope:f.getController(),batal:"onBatal",save:"onSuccess"}}]},{region:"center",xtype:"tindakan-list",border:false,reference:"tindakanlist",showSearch:true,listeners:{select:"onSelect"}}];f.callParent(arguments);f.down("form-tindakan").setHidden(true)},load:function(l){var n=this.down("tindakan-list");var m={};m={start:0,limit:3000};n.loadStore(m)}},0,["workspace-tindakan"],["component","box","container","panel","form","com-form","workspace-tindakan"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-tindakan":true},["widget.workspace-tindakan"],0,[master.tindakan,"Workspace"],0));(Ext.cmd.derive("master.tindakan.WorkspaceController",Ext.app.ViewController,{onFocusEnter:function(g,l){this.getView().fireEvent("specialkey",g,l)},onAddTindakan:function(f){this.confForm()},onBatal:function(f){this.confForm()},confForm:function(){var m=this,p=m.getView(),n=m.getViewModel(),o=m.getReferences();hide=n.get("hideForm");n.set("hideForm",!hide);p.getForm().reset();o.formtindakan.createRecord({STATUS:1})},onSelect:function(s,e,f){var u=this,t=u.getViewModel(),g=u.getReferences();t.set("hideForm",false);g.formtindakan.loadRecord(e)},onSuccess:function(){var g=this,l=g.getReferences();g.confForm();l.tindakanlist.reload()}},0,0,0,0,["controller.workspace-tindakan"],0,[master.tindakan,"WorkspaceController"],0));(Ext.cmd.derive("master.tindakan.tarif.List",com.Grid,{controller:"tarif-list",viewModel:{data:{tindakan:undefined,hideSimpan:true,allhide:true,disabledsimpan:true},stores:{store:{type:"tariftindakan-store"},kelasstore:{type:"referensi-store",queryParams:{JENIS:19,STATUS:1}}}},history:false,hideGantiTarif:false,cls:"x-br-top",autoScroll:true,dockedItems:[{xtype:"toolbar",dock:"top",items:["->",{xtype:"checkbox",bind:{hidden:"{hideSimpan}"},boxLabel:"Samakan Tarif",reference:"smtarif"},{text:"Ganti Semua Tarif",xtype:"button",ui:"soft-red",reference:"tombolAll",bind:{hidden:"{allhide}"},reference:"all",listeners:{click:"onClickAll"}},{text:"SIMPAN",xtype:"button",ui:"soft-green",hidden:true,bind:{hidden:"{hideSimpan}",disabled:"{disabledsimpan}"},reference:"simpan",listeners:{click:"onSimpan"}}]}],initComponent:function(){var l=this,m=l.getViewModel(),n=m.get("store");l.cellEditing=new Ext.grid.plugin.CellEditing({clicksToEdit:1,listeners:{beforeedit:"onBeforeEdit",afteredit:"onAfterEdit"}});l.columns=[{text:"Kelas",dataIndex:"KELAS",width:"10%",sortable:false,renderer:"onRenderKelas",editor:{xtype:"combo",bind:{store:"{kelasstore}"},displayField:"DESKRIPSI",valueField:"ID"}},{text:"Administrasi ",dataIndex:"ADMINISTRASI",width:"10%",sortable:false,editor:{xtype:"numberfield",allowBlank:false,listeners:{change:"onChange"}}},{text:"Sarana ",dataIndex:"SARANA",width:"10%",sortable:false,editor:{allowBlank:false,xtype:"numberfield",listeners:{change:"onChange"}}},{text:"B H P ",dataIndex:"BHP",width:"10%",sortable:false,editor:{xtype:"numberfield",allowBlank:false,listeners:{change:"onChange"}}},{text:"Dokter Operator ",dataIndex:"DOKTER_OPERATOR",width:"10%",sortable:false,editor:{xtype:"numberfield",allowBlank:false,listeners:{change:"onChange"}}},{text:"Dokter Anastesi ",dataIndex:"DOKTER_ANASTESI",width:"10%",sortable:false,editor:{xtype:"numberfield",allowBlank:false,listeners:{change:"onChange"}}},{text:"Dokter Lainnya ",dataIndex:"DOKTER_LAINNYA",width:"10%",sortable:false,editor:{xtype:"numberfield",allowBlank:false,listeners:{change:"onChange"}}},{text:"Penata Anastesi ",dataIndex:"PENATA_ANASTESI",width:"10%",sortable:false,editor:{xtype:"numberfield",allowBlank:false,listeners:{change:"onChange"}}},{text:"Paramedis ",dataIndex:"PARAMEDIS",width:"10%",sortable:false,editor:{xtype:"numberfield",allowBlank:false,listeners:{change:"onChange"}}},{text:"Non Medis ",dataIndex:"NON_MEDIS",width:"10%",sortable:false,editor:{xtype:"numberfield",allowBlank:false,listeners:{change:"onChange"}}},{text:"Total ",dataIndex:"TARIF",width:"10%",sortable:false},{text:"Tanggal SK ",dataIndex:"TANGGAL_SK",sortable:false,editor:{xtype:"datefield",format:"d/m/Y",listeners:{change:"onChange"}},width:"10%",renderer:"onRenderTanggal"},{text:"Nomor SK ",dataIndex:"NOMOR_SK",width:"10%",sortable:false,editor:{allowBlank:false,listeners:{change:"onChange"}}},{text:"Action",xtype:"widgetcolumn",reference:"gantitarif",width:"10%",hidden:l.hideGantiTarif,onWidgetAttach:function(e,f,g){f.setHidden(!Ext.isNumeric(g.get("ID")))},widget:{xtype:"button",text:"Ganti Tarif",action:0,hidden:true,listeners:{click:"onClickGantiTarif"}}}];if(!l.history){l.plugins=[l.cellEditing];l.selModel={selType:"cellmodel"}}com.Grid.prototype.initComponent.apply(this,arguments)},doAfterLoad:function(v,z,w,y){var A=v.getViewModel(),u=A.get("tindakan"),s=A.get("store"),t=A.get("kelasstore"),x=[];if(t){t.each(function(e){var f=s.findRecord("KELAS",e.get("ID"),0,false,true,true);if(!f){if(!v.history){x.push(Ext.create("data.model.TarifTindakan",{TINDAKAN:s.queryParams.TINDAKAN,KELAS:e.get("ID")}))}}});s.add(x);A.set("hideSimpan",x.length==0);A.set("allhide",x.length==0);if(x.length==0){if(!v.history){A.set("allhide",v.history)}}}},loadStore:function(m){var n=this,o=this.getViewModel(),p=o.get("kelasstore");if(p){p.load({callback:function(f,e,g){if(g){n.load(m)}}})}}},0,["tarif-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","tarif-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"tarif-list":true},["widget.tarif-list"],0,[master.tindakan.tarif,"List"],0));(Ext.cmd.derive("master.tindakan.tarif.ListController",Ext.app.ViewController,{solsimdisabled:true,recordSelected:undefined,onRenderTanggal:function(f){return Ext.Date.format(f,"d/m/Y")},onRenderKelas:function(A,s,y,u,w,x){var v=this,z=v.getViewModel(),t=z.get("kelasstore");return v.getDeskripsi(t,y.get("KELAS"))},getDeskripsi:function(m,l){var n=m.findRecord("ID",l,0,false,true);if(n==null){return l}return n.get("DESKRIPSI")},onAfterEdit:function(p,s){var o=this,t=o.getView(),q=o.getViewModel(),u=s.record;store=q.get("store"),recmodif=store.getModifiedRecords();o.count=0;Ext.Array.each(recmodif,function(e){if(e.modified){if(e.get("TANGGAL_SK")==null){o.count++}}});if(o.count>0){t.notifyMessage("Pengisian Distribusi harap melengkapi column tanggal SK");o.solsimdisabled=true}else{o.solsimdisabled=false}q.set("disabledsimpan",o.solsimdisabled)},onBeforeEdit:function(p,s){var o=this,q=o.getViewModel(),n=s.record;store=q.get("store"),recmodif=store.getModifiedRecords(),o.recordSelected=n;if(Ext.isNumeric(n.get("ID"))&&n.get("ID")>0){s.cancel=true}if(s.colIdx==0||s.colIdx==10){s.cancel=true}if(!s.cancel){q.set("hideSimpan",false)}if(!s.cancel){q.set("allhide",true)}},onSimpan:function(s){var w=this,u=w.getView(),q=w.getViewModel(),t=q.get("store"),v=t.getModifiedRecords(),p=[];Ext.Array.each(v,function(e){if(e.modified){p.push(e)}});w.total=p.length-1;w.count=0;u.setLoading(true);Ext.Array.each(p,function(e){e.save({callback:function(f,l,g){if(g){if(w.count==w.total){u.notifyMessage("Data telah tersimpan");u.refresh()}}w.count++}})})},onChange:function(p,q){var u=this,o=u.getViewModel(),s=u.getReferences(),t=o.get("store");if(s.smtarif.getValue()){if(u.recordSelected){t.each(function(f){var e=true;if(Ext.isNumeric(f.get("ID"))&&f.get("ID")>0){e=false}if(f.get("ID")==u.recordSelected.get("ID")){e=false}if(e){f.set(p.dataIndex,q)}})}}},onClickGantiTarif:function(q){var o=this,s=o.getView(),p=o.getViewModel(),n=q.getWidgetRecord();Ext.Msg.show({title:"Konfirmasi",message:"Apakah anda ingin mengganti tarif?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:q,fn:function(e){if(e==="yes"){n.set("STATUS",0);n.scope=this;s.setLoading(true);n.save({callback:function(f,l,g){if(g){s.notifyMessage("Silahkan input Tarif Baru");s.refresh()}else{s.setLoading(false)}}})}}})},onClickAll:function(p){var n=this,s=n.getView(),o=n.getViewModel(),q=o.get("store");Ext.Msg.show({title:"Konfirmasis",message:"Apakah anda ingin mengganti semua tarif?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:p,fn:function(e){if(e==="yes"){n.total=q.totalCount-1;n.count=0;s.setLoading(true);for(var f=0;f<=n.total;f++){rec=q.getAt(f);rec.set("STATUS",0);rec.scope=this;rec.save({callback:function(g,m,l){if(l){if(n.count==n.total){s.notifyMessage("Silahkan input Tarif Baru");s.refresh()}}n.count++}})}}}})}},0,0,0,0,["controller.tarif-list"],0,[master.tindakan.tarif,"ListController"],0));(Ext.cmd.derive("master.tindakan.tarif.Tab",com.Tab,{controller:"tarif-tab",viewModel:{data:{tindakan:undefined}},defaults:{bodyPadding:5},initComponent:function(){this.items=[{title:"TARIF TINDAKAN ",xtype:"tarif-list",reference:"tariflist",history:false,listeners:{reload:"onReload"}},{title:"HISTORY",xtype:"tarif-list",reference:"historytarif",layout:"fit",history:true,hideGantiTarif:true}];com.Tab.prototype.initComponent.apply(this,arguments)},listeners:{tabchange:"onTabChange"},load:function(q){var n=this,o=n.getViewModel(),p=n.getController(),s=n.getActiveTab();if(q){o.set("tindakan",q)}s.setLoading(true);p.onTabChange(n,s)}},0,["tarif-tab"],["component","box","container","panel","tabpanel","com-tab","tarif-tab"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"tarif-tab":true},["widget.tarif-tab"],0,[master.tindakan.tarif,"Tab"],0));(Ext.cmd.derive("master.tindakan.tarif.TabController",Ext.app.ViewController,{onTabChange:function(m,o){var p=this.getViewModel().get("tindakan"),n={TINDAKAN:p.get("ID")};if(!o.history){n.STATUS=1}else{n.STATUS=0}if(o.load){o.loadStore(n)}}},0,0,0,0,["controller.tarif-tab"],0,[master.tindakan.tarif,"TabController"],0));(Ext.cmd.derive("master.tindakanruangan.Form",Ext.form.Panel,{controller:"tindakan-ruangan-form",layout:{type:"hbox",align:"stretch"},border:false,items:[{xtype:"combo",bodyPadding:2,name:"TINDAKAN",bind:{store:"{tindakanstore}"},displayField:"NAMA",valueField:"ID",queryMode:"local",forceSelection:true,flex:4,multiSelect:true,width:"50%",reference:"combotindakan",margin:2,emptyText:"[ PILIH TINDAKAN ]",allowBlank:false,tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="x-boundlist-item">','<div style="height: 17px;"><strong>{NAMA}</strong></div>','<div style="font-size: 12px;">{ID}</div>',"</div>","</tpl>"),displayTpl:Ext.create("Ext.XTemplate",'<tpl for=".">{NAMA}<tpl if="xindex < xcount">, </tpl></tpl>')},{xtype:"button",text:"ADD",margin:2,listeners:{click:"onSimpan"}},{xtype:"button",text:"ALL",margin:2,listeners:{click:"onAllTindakan"}}]},0,["tindakan-ruangan-form"],["component","box","container","panel","form","tindakan-ruangan-form"],{component:true,box:true,container:true,panel:true,form:true,"tindakan-ruangan-form":true},["widget.tindakan-ruangan-form"],0,[master.tindakanruangan,"Form"],0));(Ext.cmd.derive("master.tindakanruangan.FormController",Ext.app.ViewController,{onSimpan:function(n){var o=this,p=o.getView(),e=p.getForm().getValues();model=p.getRecord();if(p.getForm().isValid()){model.set(e);model.showError=true;model.animateTarget=n;model.scope=o;model.save({callback:function(l,g,f){if(g.hasException()||!f){}if(f){Ext.toast({html:"Data telah disimpan",headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"});p.fireEvent("success",l)}}})}},onAllTindakan:function(){var e=this,p=e.getView(),q=p.getRecord(),f=e.getReferences().combotindakan.getStore();for(var s=0;s<f.totalCount;s++){tindakan=f.getAt(s);q.set("TINDAKAN",tindakan.get("ID"));q.save({callback:function(g,m,l){if(m.hasException()||!l){}if(l){p.fireEvent("success",g)}}})}}},0,0,0,0,["controller.tindakan-ruangan-form"],0,[master.tindakanruangan,"FormController"],0));(Ext.cmd.derive("master.tindakanruangan.List",com.Grid,{controller:"tindakan-ruangan-list",flex:1,viewModel:{stores:{store:{type:"tindakan-ruangan-store"}}},cls:"x-br-top",border:true,header:{items:[{xtype:"search-field",cls:"x-text-border",iconCls:"iconSearch",autoFocus:true,emptyText:"Cari Tindakan",enableKeyEvents:true,flex:1,listeners:{search:"onSearch",clear:"onClear"}}]},columns:[{text:"ID ",dataIndex:"TINDAKAN",flex:1,hidden:false},{text:"TINDAKAN",dataIndex:"TINDAKAN",flex:4,renderer:"onTindakanRender"},{text:"Parameter",width:100,xtype:"widgetcolumn",widget:{xtype:"button",padding:2,text:"Parameter",listeners:{click:"onClickParameter"}}},{xtype:"checkcolumn",header:"#",dataIndex:"STATUS",width:50,listeners:{checkchange:"onChange"}}],dockedItems:[{xtype:"pagingtoolbar",bind:{store:"{store}"},dock:"bottom"}],loadHalPertama:function(n,s){var o=this,p=o.getViewModel(),q=p.get("store");if(n){if(s){q.queryParams={RUANGAN:n.get("ID"),start:0,page:1};q.load({callback:function(f,g,e){if(e){delete q.queryParams.start;delete q.queryParams.page}}})}}}},0,["tindakan-ruangan-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","tindakan-ruangan-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"tindakan-ruangan-list":true},["widget.tindakan-ruangan-list"],0,[master.tindakanruangan,"List"],0));(Ext.cmd.derive("master.tindakanruangan.ListController",Ext.app.ViewController,{onChange:function(u,f,x){var w=this,e=w.getView(),v=w.getViewModel(),g=v.get("store"),y=g.getAt(f);y.set("STATUS",x?1:0);y.scope=this;y.save({callback:function(m,l,n){if(n){e.notifyMessage("Status TINDAKAN di"+(x==true?"Aktifkan":"Non Aktifkan"));g.reload()}}})},onTindakanRender:function(A,w,f,y,g,x){var v=this,e=f.get("REFERENSI"),z=e?(e.TINDAKAN?e.TINDAKAN.NAMA:""):"";return z},onSearch:function(q,s){var p=this,o=p.getViewModel(),q=o.get("store"),e=q.getQueryParams();q.queryParams={QUERY:s,RUANGAN:e.RUANGAN,start:0,page:1};q.removeAll();q.load()},onClear:function(){var m=this,l=m.getViewModel(),n=l.get("store");delete n.queryParams.QUERY;delete n.queryParams.start;delete n.queryParams.page;n.removeAll();n.load()},onClickParameter:function(f){var n=this,p=n.getView(),o=f.getWidgetRecord();p.openDialog("",true,"70%","65%",{xtype:"workspace-parameterhasil",showCloseButton:true,ui:"panel-cyan",iconCls:"x-fa fa-medkit",title:o.get("TINDAKAN")+" - "+o.get("REFERENSI").TINDAKAN.NAMA},function(e,g){var l=g.down("workspace-parameterhasil");l.load(o)},f)}},0,0,0,0,["controller.tindakan-ruangan-list"],0,[master.tindakanruangan,"ListController"],0));(Ext.cmd.derive("master.tindakanruangan.Workspace",com.Form,{controller:"tindakan-ruangan-workspace",layout:"border",border:false,defaults:{border:false},initComponent:function(){var f=this;f.items=[{region:"west",title:"Daftar Tindakan",xtype:"tindakan-list",showSearch:true,collapsible:true,flex:0.7,reference:"tindakanlist",hideHeaders:true,split:true,multiSelect:true,viewConfig:{plugins:{ptype:"gridviewdragdrop",enableDrop:false},copy:true},listeners:{itemdblclick:"onItemDblClickTindakan"}},{region:"center",xtype:"tindakan-ruangan-list",reference:"tindakanruanganlist",viewConfig:{plugins:{ptype:"gridviewdragdrop",enableDrag:false},listeners:{scope:f.getController(),drop:"onDropTindakan"}}}];f.callParent(arguments)},load:function(n){var p=this,q=p.getViewModel(),s=p.down("tindakan-list"),o=p.down("tindakan-ruangan-list");if(n){s.loadStore({start:0,limit:3000,STATUS:1});p.loadRecord(n);o.loadHalPertama(n,true)}}},0,["tindakan-ruangan-workspace"],["component","box","container","panel","form","com-form","tindakan-ruangan-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"tindakan-ruangan-workspace":true},["widget.tindakan-ruangan-workspace"],0,[master.tindakanruangan,"Workspace"],0));(Ext.cmd.derive("master.tindakanruangan.WorkspaceController",Ext.app.ViewController,{onItemDblClickTindakan:function(s,o){var n=this,q=n.getViewModel(),p=q.get("record");o=Ext.create("data.model.TindakanRuangan",{RUANGAN:p.get("ID"),TINDAKAN:o.get("ID"),STATUS:1});n.simpanTindakanRuangan(o)},onDropTindakan:function(e,g,f,z){var C=this,y=C.getViewModel(),w=y.get("record"),B=Ext.Array.clone(g.records),x=w.get("ID"),A=0;g.records=[];Ext.Array.each(B,function(l){l=Ext.create("data.model.TindakanRuangan",{RUANGAN:x,TINDAKAN:l.get("ID"),STATUS:1});A++;C.simpanTindakanRuangan(l,false,function(m,n){g.records.push(l);if(A==B.length){C.loadTindakanRuangan()}})})},privates:{simpanTindakanRuangan:function(s,q,e){var t=this,f=t.getView(),q=q!=undefined?q:true,u=s.get("ID");s.showError=true;s.save({callback:function(n,m,o){if(o){var l=n.get("REFERENSI"),g=l?(l.TINDAKAN?l.TINDAKAN.NAMA:""):"";f.notifyMessage((!Ext.isNumeric(u)?"Tindakan <b>"+g+"</b>":"Data")+" telah tersimpan");if(q){t.loadTindakanRuangan()}}if(Ext.isFunction(e)){e(n,o)}}})},loadTindakanRuangan:function(){var m=this,n=m.getReferences(),l=n.tindakanruanganlist;l.reload()}}},0,0,0,0,["controller.tindakan-ruangan-workspace"],0,[master.tindakanruangan,"WorkspaceController"],0));(Ext.cmd.derive("master.wilayah.Combo",com.Combo,{viewModel:{stores:{store:{type:"wilayah-store"}}}},0,["master-wilayah-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","master-wilayah-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"master-wilayah-combo":true},["widget.master-wilayah-combo"],0,[master.wilayah,"Combo"],0));(Ext.cmd.derive("master.wilayah.Form",com.Form,{controller:"form-wilayah",model:"data.model.Wilayah",layout:{type:"vbox",align:"stretch"},bodyPadding:4,header:false,border:true,defaults:{margin:"0 1 0 1"},initComponent:function(){this.items=[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},defaults:{margin:"0 1 0 1"},items:[{xtype:"textfield",maxLength:75,name:"DESKRIPSI",reference:"nama_wilayah",emptyText:"[ Nama Wilayah ]",width:"100%",bodyPadding:5}]}];this.buttons=[{text:"Simpan",xtype:"button",ui:"soft-green",iconCls:"x-fa fa-save",handler:"onSimpan"}];com.Form.prototype.initComponent.apply(this,arguments)}},0,["form-wilayah"],["component","box","container","panel","form","com-form","form-wilayah"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-wilayah":true},["widget.form-wilayah"],0,[master.wilayah,"Form"],0));(Ext.cmd.derive("master.wilayah.FormController",Ext.app.ViewController,{onSimpan:function(n){var l=this,m=l.getView();m.save(n,{success:"Data telah tersimpan",failed:"Gagal menyimpan data"},function(g,f,e){if(e){m.fireEvent("save",e)}})},onSelectedProp:function(f,w){var g=this,u=g.getViewModel().get("kabupatenstore"),t=g.getViewModel().get("wilayahstore"),e=w.get("ID"),v=w.get("JENIS")+1;if(w){u.queryParams.ID=e;t.queryParams.JENIS=v;t.queryParams.ID=e;u.load();t.load()}},onSelectedKab:function(f,w){var g=this,u=g.getViewModel().get("kecamatanstore"),t=g.getViewModel().get("wilayahstore"),e=w.get("ID"),v=w.get("JENIS")+1;if(w){u.queryParams.ID=e;t.queryParams.JENIS=v;t.queryParams.ID=e;u.load();t.load()}},onSelectedKec:function(f,u){var g=this,s=g.getViewModel().get("wilayahstore"),e=u.get("ID"),t=u.get("JENIS")+1;if(u){s.queryParams.ID=e;s.queryParams.JENIS=t;s.load()}}},0,0,0,0,["controller.form-wilayah"],0,[master.wilayah,"FormController"],0));(Ext.cmd.derive("master.wilayah.List",com.Grid,{controller:"wilayah-list",flex:1,bind:{store:"{wilayahstore}"},cls:"x-br-top",border:true,reference:"master-wilayah",columns:[{xtype:"rownumberer",text:"No",align:"left",width:60},{text:"ID",dataIndex:"ID",flex:1},{text:"Nama Wilayah ",dataIndex:"DESKRIPSI",flex:4},{text:"Jenis",dataIndex:"JENIS",flex:1,renderer:"onRenderJenis"},{xtype:"widgetcolumn",text:"Act",widget:{xtype:"fieldcontainer",defaultType:"button",layout:{type:"vbox",align:"stretch"},defaults:{padding:2,margin:"0 2 1 0"},items:[{text:"Edit",ui:"soft-red",handler:"clickEdit"}]}},{xtype:"checkcolumn",header:"STATUS",dataIndex:"STATUS",width:90,listeners:{checkchange:"onChange"}}]},0,["wilayah-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","wilayah-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"wilayah-list":true},["widget.wilayah-list"],0,[master.wilayah,"List"],0));(Ext.cmd.derive("master.wilayah.ListController",Ext.app.ViewController,{onChange:function(t,f,w){var v=this,u=v.getViewModel(),g=u.get("wilayahstore"),e=g.getAt(f);id=e.get("ID")+"-"+e.get("JENIS");e.setId(id);e.set("STATUS",w?1:0);e.scope=this;e.save({callback:function(m,l,n){if(n){v.getView().notifyMessage("Status Wilayah di"+(w==true?"Aktifkan":"NonAktifkan "))}}})},onRenderJenis:function(A,w,f,y,g,x){var v=this,e=v.getViewModel(),z=e.get("jeniswilayahstore");return this.getDeskripsi(z,f.get("JENIS"))},getDeskripsi:function(n,m){var l=n.findRecord("ID",m,0,false,true);if(l==null){return m}return l.get("DESKRIPSI")},clickEdit:function(o){var n=this,p=n.getView(),m=o.ownerCt.getWidgetRecord();id=m.get("ID")+"-"+m.get("JENIS");m.setId(id);show=p.openDialog("",true,"50%","25%",{xtype:"form-wilayah",showCloseButton:true,ui:"panel-cyan",title:"Form",tanpaNorm:true,listeners:{berhasil:function(e){show.close();p.getStore().reload()}}},function(e,f){var g=f.down("form-wilayah");g.load(m);g.on("save",function(){f.close();list.reload()})},o)}},0,0,0,0,["controller.wilayah-list"],0,[master.wilayah,"ListController"],0));(Ext.cmd.derive("master.wilayah.ViewModel",Ext.app.ViewModel,{stores:{wilayahstore:{type:"wilayah-store",queryParams:{JENIS:1}},jeniswilayahstore:{type:"jeniswilayah-store"}}},0,0,0,0,["viewmodel.wilayahmodel"],0,[master.wilayah,"ViewModel"],0));(Ext.cmd.derive("master.wilayah.Workspace",com.Form,{controller:"workspace-wilayah",viewModel:{type:"wilayahmodel",data:{kab:true,kec:true,kel:true,datwilayah:undefined}},layout:"border",initComponent:function(){var f=this;f.items=[{region:"center",xtype:"wilayah-list",border:false,title:"Wilayah",iconCls:"x-fa fa-list",ui:"panel-gray",reference:"wilayahlist",flex:1,header:{items:[{xtype:"button",margin:2,height:32,ui:"soft-green",cls:"x-fa fa-plus hide-icon-tools",tooltip:"Tambah Wilayah",listeners:{scope:f.getController(),click:"onAddWilayah"}},{text:"Provinsi",name:"prof",xtype:"button",listeners:{scope:f.getController(),click:"onClickProv"}},{text:"Kabupaten",xtype:"button",bind:{hidden:"{kab}"},listeners:{scope:f.getController(),click:"onClickKab"}},{text:"Kecamatan",xtype:"button",bind:{hidden:"{kec}"},listeners:{scope:f.getController(),click:"onClickKec"}}]},listeners:{itemdblclick:"onItemwilayah"}}];f.callParent(arguments)},load:function(){var g=this,l=g.getViewModel();l.get("wilayahstore").load();l.get("jeniswilayahstore").load()}},0,["workspace-wilayah"],["component","box","container","panel","form","com-form","workspace-wilayah"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-wilayah":true},["widget.workspace-wilayah"],0,[master.wilayah,"Workspace"],0));(Ext.cmd.derive("master.wilayah.WorkspaceController",Ext.app.ViewController,{onFocusEnter:function(g,l){this.getView().fireEvent("specialkey",g,l)},onAddWilayah:function(f){var u=this,w=u.getView(),x=u.getViewModel(),s=u.getReferences(),v=s.wilayahlist,t=x.get("wilayahstore"),y=t.getQueryParams();if(y.JENIS==1){y={ID:0,JENIS:1}}show=w.openDialog("",true,"50%","25%",{xtype:"form-wilayah",showCloseButton:true,ui:"panel-cyan",title:"Form",listeners:{berhasil:function(){show.close();t.reload()}}},function(l,e){var g=e.down("form-wilayah");g.createRecord({STATUS:1,PARENT:y});g.on("save",function(){e.close();v.reload()})},f)},onItemwilayah:function(y,B,x,w,C,l){var f=this,A=f.getViewModel(),g=B.get("JENIS")+1,z=A.get("wilayahstore");if(B){if(g>4){f.getView().notifyMessage("data telah menunjukkan Wilayah kelurahan")}else{z.removeAll();if(g==2){A.set("kab",false)}if(g==3){A.set("kec",false)}if(g==4){A.set("kel",false)}z.queryParams.JENIS=g;z.queryParams.ID=B.get("ID");z.load()}}},onClickProv:function(o){var n=this,g=n.getViewModel(),p=g.get("wilayahstore");p.queryParams.JENIS=1;delete p.queryParams.ID;p.load();g.set("kab",true);g.set("kec",true);g.set("kel",true)},onClickKab:function(o){var n=this,g=n.getViewModel(),p=g.get("wilayahstore");par=p.getQueryParams().ID;kon=new String(par);pot=kon.substr(0,2);p.queryParams.JENIS=2;p.queryParams.ID=pot;p.load();g.set("kec",true);g.set("kel",true)},onClickKec:function(o){var n=this,g=n.getViewModel(),p=g.get("wilayahstore");par=p.getQueryParams().ID;kon=new String(par);pot=kon.substr(0,4);p.queryParams.JENIS=3;p.queryParams.ID=pot;p.load();g.set("kel",true)}},0,0,0,0,["controller.workspace-wilayah"],0,[master.wilayah,"WorkspaceController"],0));(Ext.cmd.derive("master.wilayah.tempatlahir.Combo",com.Combo,{viewModel:{stores:{store:{type:"tempat-lahir-store"}}}},0,["master-wilayah-tempatlahir-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","master-wilayah-tempatlahir-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"master-wilayah-tempatlahir-combo":true},["widget.master-wilayah-tempatlahir-combo"],0,[master.wilayah.tempatlahir,"Combo"],0));(Ext.cmd.derive("pegawai.absensi.mesin.Model",data.model.Model,{serviceName:"pegawai/absensi/mesin",fields:[{name:"ID",type:"int"},{name:"NAMA_MESIN",type:"string"},{name:"IP",type:"string"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[pegawai.absensi.mesin,"Model"],0));(Ext.cmd.derive("pegawai.absensi.mesin.Store",data.store.Store,{model:"pegawai.absensi.mesin.Model"},0,0,0,0,["store.pegawai-absensi-mesin-store"],0,[pegawai.absensi.mesin,"Store"],0));(Ext.cmd.derive("pegawai.absensi.penarikan.Model",data.model.Model,{serviceName:"pegawai/absensi/penarikan",fields:[{name:"ID",type:"int"},{name:"NAMA_MESIN",type:"string"},{name:"IP",type:"string"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[pegawai.absensi.penarikan,"Model"],0));(Ext.cmd.derive("pegawai.absensi.penarikan.Store",data.store.Store,{model:"pegawai.absensi.penarikan.Model"},0,0,0,0,["store.pegawai-absensi-penarikan-store"],0,[pegawai.absensi.penarikan,"Store"],0));(Ext.cmd.derive("pegawai.absensi.presensi.Model",data.model.Model,{serviceName:"pegawai/absensi/presensi",fields:[{name:"ID",type:"int"},{name:"KODE_MESIN",type:"string"},{name:"KODE_ABSEN",type:"string"},{name:"IO_MODE",type:"string"},{name:"WAKTU_PRESENSI",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[pegawai.absensi.presensi,"Model"],0));(Ext.cmd.derive("pegawai.absensi.presensi.Store",data.store.Store,{model:"pegawai.absensi.presensi.Model"},0,0,0,0,["store.pegawai-absensi-presensi-store"],0,[pegawai.absensi.presensi,"Store"],0));(Ext.cmd.derive("pegawai.absensi.waktupenarikan.Model",data.model.Model,{serviceName:"pegawai/absensi/waktupenarikan",fields:[{name:"ID",type:"int"},{name:"MESIN",type:"string"},{name:"WAKTU",type:"date",dateFormat:"H:i:s"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[pegawai.absensi.waktupenarikan,"Model"],0));(Ext.cmd.derive("pegawai.absensi.waktupenarikan.Store",data.store.Store,{model:"pegawai.absensi.waktupenarikan.Model"},0,0,0,0,["store.pegawai-absensi-waktupenarikan-store"],0,[pegawai.absensi.waktupenarikan,"Store"],0));(Ext.cmd.derive("pegawai.dasarjadwal.Model",data.model.Model,{serviceName:"pegawai/dasarjadwal",fields:[{name:"ID",type:"int"},{name:"NIP",type:"string"},{name:"SCHEDULE",type:"int"},{name:"TANGGAL_BERLAKU",dateFormat:"Y-m-d",type:"date"},{name:"TANGGAL",dateFormat:"Y-m-d",type:"date"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[pegawai.dasarjadwal,"Model"],0));(Ext.cmd.derive("pegawai.dasarjadwal.Store",data.store.Store,{model:"pegawai.dasarjadwal.Model"},0,0,0,0,["store.pegawai-dasarjadwal-store"],0,[pegawai.dasarjadwal,"Store"],0));(Ext.cmd.derive("pegawai.jadwaldinas.Model",data.model.Model,{serviceName:"pegawai/jadwaldinas",fields:[{name:"ID",type:"int"},{name:"NIP",type:"string"},{name:"DINAS",type:"int"},{name:"RUANGAN",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[pegawai.jadwaldinas,"Model"],0));(Ext.cmd.derive("pegawai.jadwaldinas.Store",data.store.Store,{model:"pegawai.jadwaldinas.Model"},0,0,0,0,["store.pegawai-jadwaldinas-store"],0,[pegawai.jadwaldinas,"Store"],0));(Ext.cmd.derive("pegawai.kartuasuransi.Model",data.model.Model,{serviceName:"pegawai/kartuasuransipegawai",fields:[{name:"ID",type:"int"},{name:"JENIS",type:"int"},{name:"NIP",type:"string"},{name:"NOMOR",type:"string"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[pegawai.kartuasuransi,"Model"],0));(Ext.cmd.derive("pegawai.kartuasuransi.Store",data.store.Store,{model:"pegawai.kartuasuransi.Model"},0,0,0,0,["store.pegawai-kartuasuransi-store"],0,[pegawai.kartuasuransi,"Store"],0));(Ext.cmd.derive("pegawai.kartuidentitas.Model",data.model.Model,{serviceName:"pegawai/kartuidentitas",fields:[{name:"ID",type:"int"},{name:"JENIS",type:"int",defaultValue:1},{name:"NIP",type:"int"},{name:"NOMOR",type:"string"},{name:"ALAMAT",type:"string"},{name:"RT",type:"string"},{name:"RW",type:"string"},{name:"KODEPOS",type:"string"},{name:"WILAYAH",type:"string"}]},0,0,0,0,0,0,[pegawai.kartuidentitas,"Model"],0));(Ext.cmd.derive("pegawai.kartuidentitas.Store",data.store.Store,{model:"pegawai.kartuidentitas.Model"},0,0,0,0,["store.pegawai-kartuidentitas-store"],0,[pegawai.kartuidentitas,"Store"],0));(Ext.cmd.derive("pegawai.keluarga.Model",data.model.Model,{serviceName:"pegawai/keluarga",fields:[{name:"ID",type:"int"},{name:"NIP",type:"string"},{name:"SHDK",type:"int"},{name:"NAMA",type:"string"},{name:"JENIS_KELAMIN",type:"int"},{name:"ALAMAT",type:"string"},{name:"PENDIDIKAN",type:"int"},{name:"PEKERJAAN",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[pegawai.keluarga,"Model"],0));(Ext.cmd.derive("pegawai.keluarga.Store",data.store.Store,{model:"pegawai.keluarga.Model"},0,0,0,0,["store.pegawai-keluarga-store"],0,[pegawai.keluarga,"Store"],0));(Ext.cmd.derive("pegawai.kodeabsensi.Model",data.model.Model,{serviceName:"pegawai/kodeabsensi",fields:[{name:"ID",type:"int"},{name:"NIP",type:"string"},{name:"KODE_ABSEN",type:"string"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[pegawai.kodeabsensi,"Model"],0));(Ext.cmd.derive("pegawai.kodeabsensi.Store",data.store.Store,{model:"pegawai.kodeabsensi.Model"},0,0,0,0,["store.pegawai-kodeabsensi-store"],0,[pegawai.kodeabsensi,"Store"],0));(Ext.cmd.derive("pegawai.kontak.Model",data.model.Model,{serviceName:"pegawai/kontakpegawai",fields:[{name:"ID",type:"int"},{name:"JENIS",type:"int"},{name:"NIP",type:"string"},{name:"NOMOR",type:"string"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[pegawai.kontak,"Model"],0));(Ext.cmd.derive("pegawai.kontak.Store",data.store.Store,{model:"pegawai.kontak.Model"},0,0,0,0,["store.pegawai-kontak-store"],0,[pegawai.kontak,"Store"],0));(Ext.cmd.derive("pegawai.pegawaiabsen.Model",data.model.Model,{serviceName:"pegawai/pegawaiabsen",fields:[{name:"ID",type:"int"},{name:"JENIS",type:"int"},{name:"NIP",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d"},{name:"KETERANGAN",type:"string"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[pegawai.pegawaiabsen,"Model"],0));(Ext.cmd.derive("pegawai.pegawaiabsen.Store",data.store.Store,{model:"pegawai.pegawaiabsen.Model"},0,0,0,0,["store.pegawai-pegawaiabsen-store"],0,[pegawai.pegawaiabsen,"Store"],0));(Ext.cmd.derive("pegawai.pendidikan.Model",data.model.Model,{serviceName:"pegawai/pendidikan",fields:[{name:"ID",type:"int"},{name:"NIP",type:"string"},{name:"JENIS_PENDIDIKAN",type:"int"},{name:"NAMA_LEMBAGA",type:"string"},{name:"ALAMAT",type:"string"},{name:"TAHUN_KELULUSAN",dateFormat:"Y",type:"date"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[pegawai.pendidikan,"Model"],0));(Ext.cmd.derive("pegawai.pendidikan.Store",data.store.Store,{model:"pegawai.pendidikan.Model"},0,0,0,0,["store.pegawai-pendidikan-store"],0,[pegawai.pendidikan,"Store"],0));(Ext.cmd.derive("pegawai.penempatan.Model",data.model.Model,{serviceName:"pegawai/penempatan",fields:[{name:"ID",type:"int"},{name:"SK",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[pegawai.penempatan,"Model"],0));(Ext.cmd.derive("pegawai.penempatan.Store",data.store.Store,{model:"pegawai.penempatan.Model"},0,0,0,0,["store.pegawai-penempatan-store"],0,[pegawai.penempatan,"Store"],0));(Ext.cmd.derive("pegawai.penempatan.detil.Model",data.model.Model,{serviceName:"pegawai/penempatan/detil",fields:[{name:"ID",type:"int"},{name:"PENEMPATAN",type:"int"},{name:"NIP",type:"string"},{name:"RUANGAN",type:"string"},{name:"JABATAN",type:"int"},{name:"TANGGAL_BERLAKU",type:"date",dateFormat:"Y-m-d"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[pegawai.penempatan.detil,"Model"],0));(Ext.cmd.derive("pegawai.penempatan.detil.Store",data.store.Store,{model:"pegawai.penempatan.detil.Model"},0,0,0,0,["store.pegawai-penempatan-detil-store"],0,[pegawai.penempatan.detil,"Store"],0));(Ext.cmd.derive("pegawai.penempatan.sekarang.Model",data.model.Model,{serviceName:"pegawai/penempatan/sekarang",fields:[{name:"NIP",type:"string"},{name:"RUANGAN",type:"string"},{name:"JABATAN",type:"int"},{name:"TANGGAL_BERLAKU",type:"date",dateFormat:"Y-m-d"},{name:"STATUS",type:"int",defaultValue:1}]},0,0,0,0,0,0,[pegawai.penempatan.sekarang,"Model"],0));(Ext.cmd.derive("pegawai.penempatan.sekarang.Store",data.store.Store,{model:"pegawai.penempatan.sekarang.Model"},0,0,0,0,["store.pegawai-penempatan-sekarang-store"],0,[pegawai.penempatan.sekarang,"Store"],0));(Ext.cmd.derive("pegawai.rincianabsensi.Model",data.model.Model,{serviceName:"pegawai/rincianabsensi",fields:[{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"NIP",type:"string"},{name:"NAMA_JADWAL",type:"string"},{name:"HARI_KERJA",type:"int"},{name:"JADWAL_DATANG",type:"string"},{name:"JADWAL_PULANG",type:"string"},{name:"MASUK",type:"string"},{name:"PULANG",type:"string"},{name:"HADIR_KERJA",type:"int"},{name:"HADIR_LIBUR",type:"int"},{name:"EFEKTIF",type:"string"},{name:"LAMBAT",type:"string"},{name:"PULANG_CEPAT",type:"string"},{name:"LEMBUR_KERJA",type:"string"},{name:"LEMBUR_LIBUR",type:"string"},{name:"ABSENT_NAME",type:"string"},{name:"ALPA",type:"int"},{name:"SAKIT",type:"int"},{name:"IZIN",type:"int"},{name:"CUTI",type:"int"},{name:"TUGAS",type:"int"},{name:"LAIN_LAIN",type:"int"},{name:"KETERANGAN",type:"string"}]},0,0,0,0,0,0,[pegawai.rincianabsensi,"Model"],0));(Ext.cmd.derive("pegawai.rincianabsensi.Store",data.store.Store,{model:"pegawai.rincianabsensi.Model"},0,0,0,0,["store.pegawai-rincianabsensi-store"],0,[pegawai.rincianabsensi,"Store"],0));(Ext.cmd.derive("pegawai.schedule.Model",data.model.Model,{serviceName:"pegawai/schedule",fields:[{name:"ID",type:"int"},{name:"DESK",type:"string"},{name:"STATUS_SHIFT",type:"int"},{name:"KET",type:"string"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[pegawai.schedule,"Model"],0));(Ext.cmd.derive("pegawai.schedule.Store",data.store.Store,{model:"pegawai.schedule.Model"},0,0,0,0,["store.pegawai-schedule-store"],0,[pegawai.schedule,"Store"],0));(Ext.cmd.derive("pegawai.schedule.detail.Model",data.model.Model,{serviceName:"pegawai/schedule/detail",fields:[{name:"ID",type:"int"},{name:"SCHEDULE",type:"int"},{name:"SHIFT",type:"int"},{name:"DAY",type:"int"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[pegawai.schedule.detail,"Model"],0));(Ext.cmd.derive("pegawai.schedule.detail.Store",data.store.Store,{model:"pegawai.schedule.detail.Model"},0,0,0,0,["store.pegawai-schedule-detail-store"],0,[pegawai.schedule.detail,"Store"],0));(Ext.cmd.derive("pegawai.schedule.shift.Model",data.model.Model,{serviceName:"pegawai/shift",fields:[{name:"ID",type:"int"},{name:"SCHEDULE",type:"int"},{name:"JENIS_JADWAL",type:"int"},{name:"KET",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[pegawai.schedule.shift,"Model"],0));(Ext.cmd.derive("pegawai.schedule.shift.Store",data.store.Store,{model:"pegawai.schedule.shift.Model"},0,0,0,0,["store.pegawai-schedule-shift-store"],0,[pegawai.schedule.shift,"Store"],0));(Ext.cmd.derive("pegawai.schedule.shift.detail.Model",data.model.Model,{serviceName:"pegawai/shift/detail",fields:[{name:"ID",type:"int"},{name:"ID_SHIFT",type:"int"},{name:"JAM_MASUK",type:"string"},{name:"JAM_PULANG",type:"string"},{name:"TGL_BERLAKU",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[pegawai.schedule.shift.detail,"Model"],0));(Ext.cmd.derive("pegawai.schedule.shift.detail.Store",data.store.Store,{model:"pegawai.schedule.shift.detail.Model"},0,0,0,0,["store.pegawai-schedule-shift-detail-store"],0,[pegawai.schedule.shift.detail,"Store"],0));(Ext.cmd.derive("pegawai.statuspegawai.Model",data.model.Model,{serviceName:"pegawai/statuspegawai",fields:[{name:"ID",type:"int"},{name:"NIP",type:"string"},{name:"STATUS_PEGAWAI",type:"int"},{name:"TMT",type:"date",dateFormat:"Y-m-d"},{name:"SK_PENGANGKATAN",type:"string"},{name:"TANGGAL_SK",type:"date",dateFormat:"Y-m-d"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[pegawai.statuspegawai,"Model"],0));(Ext.cmd.derive("pegawai.statuspegawai.Store",data.store.Store,{model:"pegawai.statuspegawai.Model"},0,0,0,0,["store.pegawai-statuspegawai-store"],0,[pegawai.statuspegawai,"Store"],0));(Ext.cmd.derive("pegawai.strsip.Model",data.model.Model,{serviceName:"pegawai/strsip",fields:[{name:"ID",type:"int"},{name:"NIP",type:"string"},{name:"JENIS",type:"int"},{name:"NOMOR",type:"string"},{name:"TANGGAL_BERLAKU",dateFormat:"Y-m-d",type:"date"},{name:"BERLAKU_SAMPAI",dateFormat:"Y-m-d",type:"date"},{name:"FILE",type:"string"},{name:"TYPE",type:"string"},{name:"TANGGAL",dateFormat:"Y-m-d",type:"date"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[pegawai.strsip,"Model"],0));(Ext.cmd.derive("pegawai.strsip.Store",data.store.Store,{model:"pegawai.strsip.Model"},0,0,0,0,["store.pegawai-strsip-store"],0,[pegawai.strsip,"Store"],0));(Ext.cmd.derive("pegawai.waktudinasruangan.Model",data.model.Model,{serviceName:"pegawai/waktudinasruangan",fields:[{name:"ID",type:"int"},{name:"RUANGAN",type:"string"},{name:"JAM_MASUK",type:"date",dateFormat:"H:i:s"},{name:"JAM_PULANG",type:"date",dateFormat:"H:i:s"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[pegawai.waktudinasruangan,"Model"],0));(Ext.cmd.derive("pegawai.waktudinasruangan.Store",data.store.Store,{model:"pegawai.waktudinasruangan.Model"},0,0,0,0,["store.pegawai-waktudinasruangan-store"],0,[pegawai.waktudinasruangan,"Store"],0));(Ext.cmd.derive("pegawai.kartuidentitas.Form",com.Form,{title:"Kartu Identitas",header:{iconCls:"x-fa fa-credit-card",margin:0,padding:"5 15 5 15",layout:{type:"hbox",align:"middle"}},viewModel:{data:{isNewForm:true,pegawai:undefined}},layout:{type:"vbox",align:"stretch"},bodyPadding:5,defaults:{margin:"0 0 3"},items:[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{xtype:"referensi-combo",params:{JENIS:9,STATUS:1},firstLoad:true,name:"JENIS",enterFocus:true,typeAhead:true,forceSelection:true,validateOnBlur:true,emptyText:"[Jenis Kartu]",margin:"0 1 0 1",flex:1,listeners:{specialkey:"onFocusEnter"}},{xtype:"textfield",name:"NOMOR",enterFocus:true,margin:"0 1 0 1",emptyText:"[Nomor Kartu]",flex:1}]},{xtype:"form-alamat",header:false,bodyPadding:0,border:false,listeners:{specialkey:"onFocusEnter"}}],getFormData:function(){var l=this.getForm().getValues(),m=this.down("form-alamat").getFormData(),n=!(l.NOMOR==""||l.NOMOR==null||Number(l.JENIS)==0);delete l.PROPINSI;delete l.KABUPATEN;delete l.KECAMATAN;l.WILAYAH=l.KELURAHAN;delete l.KELURAHAN;l=Ext.merge(l,m);return n?[l]:null},loadRecord:function(m){var n=this,l=m.get("KARTU_IDENTITAS")||null,l=Ext.isArray(l)?l[0]:l;l=Ext.getClassName(l)==""?new pegawai.kartuidentitas.Model(l):l;if(l){n.down("form-alamat").loadRecord(l)}return n.getForm().loadRecord(l)}},0,["pegawai-kartuidentitas-form"],["component","box","container","panel","form","com-form","pegawai-kartuidentitas-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"pegawai-kartuidentitas-form":true},["widget.pegawai-kartuidentitas-form"],0,[pegawai.kartuidentitas,"Form"],0));(Ext.cmd.derive("pegawai.kartuidentitas.FormController",Ext.app.ViewController,{onSimpan:function(m){var l=this,n=l.getView();n.save(m)}},0,0,0,0,["controller.pegawai-kartuidentitas-form"],0,[pegawai.kartuidentitas,"FormController"],0));(Ext.cmd.derive("pegawai.kartuidentitas.Workspace",com.Form,{viewModel:{stores:{store:{type:"pegawai-kartuidentitas-store"}},data:{pgwi:undefined}},items:[{xtype:"pegawai-kartuidentitas-form",reference:"formkartuidentitaspegawai",listeners:{save:"onSuccess"}}],load:function(u){var o=this,q=o.getViewModel(),p=o.down("pegawai-kartuidentitas-form"),s=o.getViewModel().get("store"),t=p.getViewModel().get("jeniskipstore");t.load();params={NIP:u.get("NIP")};s.setQueryParams(params);s.load(function(f,g,e){if(e){if(f.length>0){p.loadRecord(f[0])}}else{p.createRecord({STATUS:1,NIP:u.get("NIP")})}})}},0,["pegawai-kartuidentitas-workspace"],["component","box","container","panel","form","com-form","pegawai-kartuidentitas-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"pegawai-kartuidentitas-workspace":true},["widget.pegawai-kartuidentitas-workspace"],0,[pegawai.kartuidentitas,"Workspace"],0));(Ext.cmd.derive("pegawai.kontak.Form",com.Form,{controller:"pegawai-kontak-form",viewModel:{data:{isNewForm:true,pegawai:undefined}},layout:{type:"hbox"},defaults:{margin:"0 5 0 0"},model:"pegawai.kontak.Model",initComponent:function(){var f=this;f.items=[{xtype:"textfield",emptyText:"[ Nomor ]",name:"NOMOR",reference:"nomor",flex:2},{xtype:"referensi-combo",params:{JENIS:8,STATUS:1},firstLoad:true,name:"JENIS",enterFocus:true,emptyText:"[Jenis Kontak]",flex:1},{xtype:"button",iconCls:"x-fa fa-plus",ui:"soft-blue",handler:"onSimpan"}];com.Form.prototype.initComponent.apply(this,arguments)},onLoadRecord:function(g){var l=this;l.getViewModel().set("isNewForm",false);l.getViewModel().set("pegawai",g)}},0,["pegawai-kontak-form"],["component","box","container","panel","form","com-form","pegawai-kontak-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"pegawai-kontak-form":true},["widget.pegawai-kontak-form"],0,[pegawai.kontak,"Form"],0));(Ext.cmd.derive("pegawai.kontak.FormController",Ext.app.ViewController,{onSimpan:function(q){var p=this,s=p.getView(),o=s.down("[name = JENIS]"),n=o.getSelection();s.fireEvent("simpan",q,n)}},0,0,0,0,["controller.pegawai-kontak-form"],0,[pegawai.kontak,"FormController"],0));(Ext.cmd.derive("pegawai.kontak.List",com.Grid,{controller:"pegawai-kontak-list",viewModel:{stores:{store:{type:"pegawai-kontak-store"}}},ui:"panel-gray",layout:"fit",initComponent:function(){var f=this;f.columns=[{align:"left",text:"Nomor",dataIndex:"NOMOR",flex:2},{xtype:"templatecolumn",align:"left",text:"Jenis",dataIndex:"JENIS",tpl:'<div style="white-space:normal !important;color:black">{REFERENSI.JENIS.DESKRIPSI}</div>',flex:1},{xtype:"checkcolumn",header:"Status",dataIndex:"STATUS",width:90,listeners:{checkchange:"onChange"}}];com.Grid.prototype.initComponent.apply(this,arguments)},load:function(l){var n=this;if(Ext.getClassName(l)=="data.model.Pegawai"){var m=l;l={NIP:m.get("NIP")}}n.setParams(l);com.Grid.prototype.load.apply(this,l)}},0,["pegawai-kontak-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","pegawai-kontak-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"pegawai-kontak-list":true},["widget.pegawai-kontak-list"],0,[pegawai.kontak,"List"],0));(Ext.cmd.derive("pegawai.kontak.ListController",Ext.app.ViewController,{onChange:function(x,w,y){console.log(y);var q=this,s=q.getViewModel(),v=q.getView(),u=s.get("store"),t=u.getAt(w);t.set("STATUS",y?1:0);t.scope=this;t.save({callback:function(g,f,e){if(e){v.notifyMessage("Status di "+(y==true?"Aktifkan":"NonAktifkan"),"danger-red")}else{t.set("STATUS",y?0:1)}}})}},0,0,0,0,["controller.pegawai-kontak-list"],0,[pegawai.kontak,"ListController"],0));(Ext.cmd.derive("pegawai.kontak.Workspace",com.Form,{controller:"pegawai-kontak-workspace",viewModel:{stores:{store:{type:"pegawai-kontak-store"}},data:{pgwi:undefined}},title:"Kontak",header:{iconCls:"x-fa fa-phone",margin:0},layout:"border",items:[{region:"north",border:true,xtype:"pegawai-kontak-form",reference:"formkontakpegawai",listeners:{simpan:"onSimpan"}},{region:"center",layout:"fit",flex:1,xtype:"pegawai-kontak-list",reference:"listkontakpegawai",listeners:{success:"onSuccess"}}],load:function(m,p){var n=this,o=n.getViewModel(),p=p?p:false;form=n.down("pegawai-kontak-form"),list=n.down("pegawai-kontak-list");store=n.getViewModel().get("store"),params={NIP:m.get("NIP")};list.load({NIP:m.get("NIP")});list.setGridConfig({paging:p});form.createRecord({STATUS:1,NIP:m.get("NIP")});o.set("pgwi",m);store.setQueryParams(params);store.load(function(g,e,f){if(f){if(g.length>0){m.history=g[0]}}})},saveList:function(m){var p=this,n=p.down("pegawai-kontak-list"),o=n.getStore();o.each(function(e){e.set("NIP",m.get("NIP_BARU"))});o.sync({callback:function(f,g,e){p.notifyMessage("Kontak tersimpan");p.load(m)}})}},0,["pegawai-kontak-workspace"],["component","box","container","panel","form","com-form","pegawai-kontak-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"pegawai-kontak-workspace":true},["widget.pegawai-kontak-workspace"],0,[pegawai.kontak,"Workspace"],0));(Ext.cmd.derive("pegawai.kontak.WorkspaceController",Ext.app.ViewController,{onSuccess:function(q,v,s){var w=this,t=w.getView(),p=w.getViewModel(),u=p.get("pgwi");t.load(u)},onSimpan:function(F,A){var y=this,w=y.getView(),C=y.getViewModel(),E=C.get("pgwi"),x=y.getReferences(),D=x.formkontakpegawai,z=x.listkontakpegawai,G=z.getStore(),t=(G.length==0)?0:G.length+1,B=D.getRecord();if(Ext.isNumeric(E.get("ID"))){D.save(F);w.load(E)}else{B.set("REFERENSI",{JENIS:A.getData()});G.insert(t,B)}}},0,0,0,0,["controller.pegawai-kontak-workspace"],0,[pegawai.kontak,"WorkspaceController"],0));(Ext.cmd.derive("pasien.Dashboard",com.Dashboard,{controller:"pasien-dashboard",items:[{reference:"leftwidget",items:[{xtype:"pasien-widget-info",responsiveCls:"big-100 small-100"}]},{reference:"rightwidget"}],createPendaftaranWidget:function(){var g=this,l=g.down("[reference=rightwidget]");l.add({xtype:"pendaftaran-widget-info",responsiveCls:"big-100 small-100",listeners:{baru:"onBaru",detil:"onDetilPendaftaran",icd:"onICD",cetakbukti:"onCetakBukti",cetakbarcode:"onCetakBarcodePendaftaran",cetaktracert:"onCetakTracert",cetakgelang:"onCetakGelang",history:"onHistory"}})},createKunjunganWidget:function(){var g=this,l=g.down("[reference=rightwidget]");l.add({xtype:"kunjungan-widget-info",responsiveCls:"big-100 small-100",listeners:{detilkunjungan:"onDetilKunjungan",historykunjungan:"onHistoryKunjungan"}})},createPembayaranWidget:function(){var l=this,g=l.down("[reference=leftwidget]");g.add({xtype:"pembayaran-widget-info",responsiveCls:"big-100 small-100",listeners:{viewtagihan:"onViewTagihan",historytagihan:"onHistoryTagihan"}})},listeners:{afterrender:"onAfterRender",activate:"onActivate",deactivate:"onDeactivate"}},0,["pasien-dashboard"],["component","box","container","com-dashboard","pasien-dashboard"],{component:true,box:true,container:true,"com-dashboard":true,"pasien-dashboard":true},["widget.pasien-dashboard"],0,[pasien,"Dashboard"],0));(Ext.cmd.derive("pasien.DashboardController",Ext.app.ViewController,{task:undefined,onAfterRender:function(){var p=this,s=p.getView(),q=p.getReferences(),n=webservice.app,o=n.xpriv;s.down("pasien-widget-info").setViewConfig({photo:false,detil:true,edit:o("100701",false),kartu:o("10080101",false)||o("10080201",false),barcode:o("10080102",false)||o("10080202",false)});s.suspendLayouts();if(o("10",true)){s.createPendaftaranWidget()}if(o("12",true)){s.createPembayaranWidget()}if(o("11",true)){s.createKunjunganWidget()}p.updateLayoutData();s.resumeLayouts();p.task={run:function(){if(!n.pauseAutoRefresh){p.task.interval=60000;q.leftwidget.items.each(function(e){try{e.refresh()}catch(f){}});q.rightwidget.items.each(function(e){try{e.refresh()}catch(f){}})}},interval:500};Ext.TaskManager.start(p.task)},updateLayoutData:function(){var n=this,o=n.getViewModel(),p=n.getReferences(),m=o.get("pasien");p.leftwidget.items.each(function(f){var g=f.getViewModel(),e=g.get("pasien");g.set("pasien",m);g.notify()});p.rightwidget.items.each(function(f){var g=f.getViewModel(),e=g.get("pasien");g.set("pasien",m);g.notify()})},setActiveItem:function(m){var n=this,p=n.getView().ownerCt,o=p.getLayout();if(m=="pasien-form"){p.createPasienForm()}if(m=="pendaftaran-form"){p.createPendaftaranForm()}o.setActiveItem(p.getIndexItem(m));return o.getActiveItem()},onTakePhoto:function(){},onEdit:function(){if(webservice.app.xpriv("100701",false)){var m=this,n=m.getViewModel().get("pasien"),l=m.setActiveItem("pasien-form");l.loadRecord(n)}},onDetil:function(){var m=this,l=m.getViewModel().get("pasien"),n=m.getView();n.openDialog("",true,0,0,{xtype:"pasien-detil",title:"Detil Pasien",ui:"panel-cyan",showCloseButton:true,viewModel:{data:{pasien:l,viewInfoDetil:true}}},function(f,g){m.onDeactivate();var e=g.down("pasien-detil");g.on({close:function(){m.onActivate()}})})},onCetakKartu:function(){var n=this,m=n.getViewModel().get("pasien"),p=n.getView().ownerCt,o=p.getController();o.onCetakKartu(m)},onCetakBarcode:function(q,u){var e=this,t=e.getViewModel().get("pasien"),s=e.getView().ownerCt,p=s.getController();p.onCetakBarcodePasien(t)},onBaru:function(){var p=this,s=p.getView(),t=p.getViewModel().get("pasien"),u=p.setActiveItem("pendaftaran-form"),q=s.down("pendaftaran-widget-info"),o=u.getViewModel();o.set("pasien",t);o.set("pendaftaran",Ext.create("data.model.Pendaftaran",{NORM:t.get("NORM")}));u.setTitle("Pendaftaran Kunjungan Pasien an. <b>"+t.get("NAMA")+"</b>");q.getViewModel().set("buttons.baru",false);u.getController().init()},onDetilPendaftaran:function(o){var m=this,n=m.getView().ownerCt,p=m.getView();p.openDialog("",true,0,0,{xtype:"pendaftaran-detil",title:"Detil Pendaftaran Kunjungan",ui:"panel-cyan",showCloseButton:true},function(g,f){m.onDeactivate();wrksp=f.down("pendaftaran-detil");wrksp.on({cetakbukti:function(l){n.getController().onCetakBukti(l)},cetakbarcode:function(l){n.getController().onCetakBarcodePendaftaran(l)},cetaktracert:function(l){n.getController().onCetakTracert(l)},cetaksep:function(l){n.getController().onCetakSep(l)},cetakgelang:function(l){n.getController().onCetakGelang(l)}});f.on({close:function(){m.onActivate()}});var e=new Ext.util.DelayedTask(function(){wrksp.load(o)});e.delay(100)})},onICD:function(q,o,u){var p=this,s=p.getViewModel().get("pasien"),t=p.getView();t.openDialog("",true,0,0,{xtype:"workspace-icd",title:"ICD",ui:"panel-cyan",showCloseButton:true},function(f,e){p.onDeactivate();wrksp=e.down("workspace-icd");e.on({close:function(){p.onActivate()}});var g=new Ext.util.DelayedTask(function(){wrksp.load(s,q,o,u)});g.delay(100)})},onHistory:function(m){var l=this,n=l.getView();n.openDialog("",true,"90%","70%",{xtype:"pendaftaran-list",ui:"panel-cyan",showCloseButton:true,title:"History Pendaftaran Kunjungan Pasien "+m.get("NAMA")+"("+m.get("NORM")+")"},function(e,g){l.onDeactivate();wrksp=g.down("pendaftaran-list");wrksp.setListConfig({paging:true});wrksp.on({lihat:function(p){if(data.model){data.model.Pendaftaran.load(p.get("NOMOR"),{callback:function(o,u,t){if(t){l.onDetilPendaftaran(o)}}})}},icd:function(p){if(data.model){data.model.Pendaftaran.load(p.get("NOMOR"),{callback:function(o,x,v){if(v){var y=o.get("TUJUAN")?Ext.create("data.model.TujuanPasien",o.get("TUJUAN")):null,w=o.get("PENJAMIN")?Ext.create("data.model.Penjamin",o.get("PENJAMIN")):null;l.onICD(o,y,w)}}})}}});g.on({close:function(){l.onActivate()}});var f=new Ext.util.DelayedTask(function(){wrksp.loadStore({NORM:m.get("NORM")})});f.delay(100)})},onCetakBukti:function(o){var m=this,p=m.getView().ownerCt,n=p.getController();n.onCetakBukti(o)},onCetakBarcodePendaftaran:function(o){var m=this,p=m.getView().ownerCt,n=p.getController();n.onCetakBarcodePendaftaran(o)},onCetakTracert:function(o){var m=this,p=m.getView().ownerCt,n=p.getController();n.onCetakTracert(o)},onCetakGelang:function(o){var m=this,p=m.getView().ownerCt,n=p.getController();n.onCetakGelang(o)},onDetilKunjungan:function(s,u,t,w,y,x){var q=this,v=q.getView();v.openWindow({header:false,border:false,modal:true,maximized:true,constrain:v,layout:"fit",items:[{xtype:"layanan-workspace",ui:"panel-cyan",showCloseButton:true}]},function(g,e){q.onDeactivate();var f=e.down("layanan-workspace");f.on({close:function(){if(Ext.isFunction(x)){x()}},reopen:function(m){e.close();q.onDetilKunjungan(s,u,t,m,y,x)}});e.on({close:function(){q.onActivate();if(Ext.isFunction(x)){x()}}});var l=new Ext.util.DelayedTask(function(){f.load(u,t,w)});l.delay(100)})},onHistoryKunjungan:function(q,t,s,v,w){var p=this,u=p.getView();u.openDialog("",true,"90%","70%",{xtype:"kunjungan-list",ui:"panel-cyan",showCloseButton:true,title:"History Kunjungan Pasien "+t.get("NAMA")+"("+t.get("NORM")+")"},function(g,e){var f=e.down("kunjungan-list");p.onDeactivate();f.setListConfig({paging:true,filter:{status:{enabled:true}}});f.on({lihat:function(m){if(data.model){data.model.Kunjungan.load(m.get("NOMOR"),{callback:function(o,E,D){if(D){var n=o.get("REFERENSI"),B=Ext.create("data.model.Pendaftaran",n.PENDAFTARAN),C=Ext.create("data.model.Penjamin",n.PENDAFTARAN.REFERENSI.PENJAMIN);p.onDetilKunjungan(q,t,B,o,C,function(){f.refresh()})}}})}}});e.on({close:function(){p.onActivate()}});var l=new Ext.util.DelayedTask(function(){f.loadStore({NORM:t.get("NORM")})});l.delay(100)})},onViewTagihan:function(u,q){var o=this,p=o.getViewModel(),s=p.get("pasien"),t=o.getView();t.openDialog("",true,0,0,{xtype:"workspace-tagihan",ui:"panel-cyan",showCloseButton:true},function(f,e){o.onDeactivate();wrksp=e.down("workspace-tagihan");e.on({close:function(){if(q){if(q.refresh){q.refresh()}}o.onActivate()}});var g=new Ext.util.DelayedTask(function(){wrksp.load(u,s)});g.delay(100)})},onHistoryTagihan:function(o){var m=this,n=m.getViewModel(),o=n.get("pasien"),p=m.getView();p.openDialog("",true,"50%",400,{xtype:"tagihan-list",iconCls:"x-fa fa-history",title:"History Tagihan / Pembayaran",ui:"panel-cyan",showCloseButton:true},function(g,f){m.onDeactivate();list=f.down("tagihan-list");list.setListConfig({pasienInfo:false,paging:true});list.on({viewtagihan:function(l){m.onViewTagihan(l,list)}});f.on({close:function(){m.onActivate()}});var e=new Ext.util.DelayedTask(function(){list.loadStore({REF:o.get("NORM"),JENIS:1,STATUS:2})});e.delay(100)})},onActivate:function(){if(this.task){this.task.interval=500;Ext.TaskManager.start(this.task)}},onDeactivate:function(){Ext.TaskManager.stop(this.task)},destroy:function(){var f=this;Ext.TaskManager.stop(f.task);Ext.app.ViewController.prototype.destroy.call(this)}},0,0,0,0,["controller.pasien-dashboard"],0,[pasien,"DashboardController"],0));(Ext.cmd.derive("pasien.Detil",com.Form,{controller:"pasien-detil",viewModel:{type:"pasienmodel",data:{viewInfoDetil:false,showEditButtonInDetil:false,glyphButtonDetil:"xf139@FontAwesome",buttonDetilUp:true,iconUp:"xf139@FontAwesome",iconDown:"xf13a@FontAwesome"},formulas:{isDetilUp:function(f){}}},layout:{type:"vbox",align:"stretch"},initComponent:function(){var f=this;f.items=[f.reviewPasien(),f.referensiPasien(),f.lytFoother()];f.callParent(arguments)},reviewPasien:function(){var f=this;return{xtype:"panel",title:"Detail Pasien",bind:{iconCls:"{getIconSex}"},collapsible:true,plugins:"responsive",responsiveConfig:{"width < 600":{layout:{type:"vbox",align:"stretch"}},"width >= 600":{layout:{type:"hbox",align:"stretch"}}},items:[{xtype:"fieldset",flex:1,border:false,defaultType:"displayfield",cls:" shadow-panel x-color-w",fieldDefaults:{labelWidth:120,margin:0,padding:0,style:"min-height: 10px"},items:[{xtype:"fieldcontainer",flex:1,border:false,layout:{type:"hbox",align:"stretch"},items:[{xtype:"image",cls:"photo-image",width:120,height:130,bind:{src:webservice.location+"general/photopasien?NORM={pasien.NORM}&JENIS_KELAMIN={pasien.JENIS_KELAMIN}"},alt:"No Photo"},{xtype:"fieldcontainer",flex:1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"component",flex:1,style:"text-align: right; padding-top: 2px; font-size: 2em; font-weight: bold",bind:{html:"{getFormatNorm}"}},{xtype:"component",flex:1,style:"text-align: left; font-weight: bold; padding-left: 10px",bind:"{getNamaLengkap} / {pasien.PANGGILAN}"},{xtype:"component",flex:1,style:"text-align: left; padding-left: 10px",bind:"{getTempatLahir} / {getTglLahir}"},{xtype:"component",flex:1,style:"text-align: left; padding-left: 10px",bind:"{getUmur}"},{xtype:"component",flex:1,style:"text-align: left; padding-left: 10px",bind:"{getAgama} / {getJenisKelamin}"}]}]},{fieldLabel:"Alamat",labelWidth:115,bind:"{pasien.ALAMAT}"},{xtype:"container",padding:0,border:false,layout:"hbox",items:[{xtype:"displayfield",labelSeparator:"",hideEmptyLabel:false,labelWidth:115},{xtype:"displayfield",fieldLabel:"RT",labelWidth:30,bind:"{pasien.RT}"},{xtype:"displayfield",fieldLabel:"RW",labelWidth:30,bind:"{pasien.RW}"},{xtype:"displayfield",fieldLabel:"KODE POS",labelWidth:100,bind:"{pasien.KODEPOS}"}]}]},{xtype:"fieldset",flex:1,border:false,defaultType:"displayfield",style:"padding-top: 0px;",cls:"x-color-w shadow-panel",fieldDefaults:{labelWidth:140,margin:0,padding:0},items:[{fieldLabel:"Pendidikan",bind:"{getPendidikan}"},{fieldLabel:"Pekerjaan",bind:"{getPekerjaan}"},{fieldLabel:"Status Perkawinan",bind:"{getStatusPerkawinan}"},{fieldLabel:"Golongan Darah",bind:"{getGolonganDarah}"},{fieldLabel:"Kewarganegaraan",bind:"{getKewarganegaraan}"}]}]}},referensiPasien:function(){var f=this;return{xtype:"tabpanel",plain:false,cls:"x-br-top",ui:"header-tab",padding:"10 0 0 0 ",tabBar:{layout:{pack:"left"}},flex:1,bind:{hidden:"{!isDetilUp}"},animate:true,items:[{title:"Kartu Identitas",xtype:"grid",bind:{store:"{kipstore}"},columns:[{xtype:"rownumberer",text:"No.",align:"left",width:45},{text:"No. Kartu",dataIndex:"NOMOR",width:150},{text:"Jenis",dataIndex:"JENIS",width:200,renderer:"onRendererJenisKIP"},{text:"Alamat",dataIndex:"ALAMAT",flex:1}]},{title:"Kartu Jaminan",xtype:"grid",bind:{store:"{kapstore}"},columns:[{xtype:"rownumberer",text:"No.",align:"left",width:45},{text:"No. Kartu",dataIndex:"NOMOR",width:200},{text:"Jenis",dataIndex:"JENIS",flex:1,renderer:"onRendererJenisKAP"}]},{title:"Keluarga Pasien",glyph:"xf0c0@FontAwesome",xtype:"grid",bind:{store:"{keluargastore}"},columns:[{xtype:"rownumberer",text:"No.",align:"left",width:45},{text:"Nama",dataIndex:"NAMA",flex:2},{text:"Jenis Kelamin",dataIndex:"JENIS_KELAMIN",flex:1,renderer:"onRendererJK"},{text:"Hubungan",dataIndex:"SHDK",flex:1,renderer:"onRendererSHDK"},{text:"Alamat",dataIndex:"ALAMAT",flex:1},{text:"Pendidikan",dataIndex:"PENDIDIKAN",flex:1,renderer:"onRendererPendidikan"},{text:"Pekerjaan",dataIndex:"PEKERJAAN",flex:1,renderer:"onRendererPekerjaan"}]},{title:"Kontak",glyph:"xf095@FontAwesome",xtype:"grid",bind:{store:"{kontakpasienstore}"},columns:[{xtype:"rownumberer",text:"No.",align:"left",width:45},{text:"Nomor",dataIndex:"NOMOR",width:200},{text:"Jenis",dataIndex:"JENIS",flex:1,renderer:"onRendererJenisKontak"}]}]}},lytFoother:function(){return{xtype:"container",height:25,border:true,cls:"x-color x-br-top"}}},0,["pasien-detil"],["component","box","container","panel","form","com-form","pasien-detil"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"pasien-detil":true},["widget.pasien-detil"],0,[pasien,"Detil"],0));(Ext.cmd.derive("pasien.DetilController",Ext.app.ViewController,{initViewModel:function(){var o=this,q=o.getViewModel(),n=q.get("pasien"),s=n.get("NORM")||0,p=n.get("KELUARGA");o.getStore("jeniskipstore").initStore("jeniskip");o.getStore("jeniskapstore").initStore("jeniskap");o.getStore("jeniskelaminstore").initStore("jeniskelamin");o.getStore("shdkstore").initStore("shdk");o.getStore("pendidikanstore").initStore("pendidikan");o.getStore("pekerjaanstore").initStore("pekerjaan");o.getStore("jeniskontakstore").initStore("jeniskontak");o.getStore("golongandarahstore").initStore("golongandarah");o.getStore("statusperkawinanstore").initStore("statusperkawinan");o.getStore("negarastore").initStore("negara");q.get("kipstore").load({params:{NORM:s}});q.get("kapstore").load({params:{NORM:s}});if(p!=undefined){q.get("keluargastore").removeAll();q.get("keluargastore").loadData(p)}else{q.get("keluargastore").load({params:{NORM:s}})}q.get("kontakpasienstore").load({params:{NORM:s}})},onEditClick:function(){this.getView().fireEvent("editclick",this.getViewModel().get("pasien"))},onDetilClick:function(){var g=this.getViewModel(),l=g.get("isDetilUp");if(l){g.set("glyphButtonDetil",g.get("iconDown"))}else{g.set("glyphButtonDetil",g.get("iconUp"))}g.set("buttonDetilUp",!l)},onRendererJenisKIP:function(t,g,s,f,u,e){return this.getViewModel().getDeskripsi(this.getStore("jeniskipstore"),t)},onRendererJenisKAP:function(t,g,s,f,u,e){return this.getViewModel().getDeskripsi(this.getStore("jeniskapstore"),t)},onRendererJK:function(t,g,s,f,u,e){return this.getViewModel().getDeskripsi(this.getStore("jeniskelaminstore"),t)},onRendererSHDK:function(t,g,s,f,u,e){return this.getViewModel().getDeskripsi(this.getStore("shdkstore"),t)},onRendererPendidikan:function(t,g,s,f,u,e){return this.getViewModel().getDeskripsi(this.getStore("pendidikanstore"),t)},onRendererPekerjaan:function(t,g,s,f,u,e){return this.getViewModel().getDeskripsi(this.getStore("pekerjaanstore"),t)},onRendererJenisKontak:function(t,g,s,f,u,e){return this.getViewModel().getDeskripsi(this.getStore("jeniskontakstore"),t)}},0,0,0,0,["controller.pasien-detil"],0,[pasien,"DetilController"],0));(Ext.cmd.derive("pasien.Form",com.Form,{controller:"pasien-form",model:"data.model.Pasien",viewModel:{type:"pasienmodel",data:{hideBatal:true,hideReset:true,hideSimpanCetak:false}},layout:{type:"vbox",align:"stretch"},defaults:{bodyPadding:10},isOpenWindow:false,initComponent:function(){var f=this;f.items=[{xtype:"form-identitas",cls:"shadow-panel",border:true,margin:"0 0 15 0",reference:"identitas"},{xtype:"fieldcontainer",flex:1,scrollable:true,layout:{type:"hbox"},items:[{xtype:"fieldcontainer",flex:1,cls:"shadow-panel",margin:"0 10 0 0",layout:{type:"vbox",align:"stretch"},items:[{xtype:"form-alamat",border:true,cls:"shadow-panel",margin:"0 0 15 0",reference:"frmAlamat",listeners:{specialkey:"onFocusEnter"}},{xtype:"form-kartu-identitas",cls:"shadow-panel",border:true,reference:"kip"}]},{xtype:"fieldcontainer",flex:1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"form-kontak",flex:1,cls:"shadow-panel",margin:"0 0 15 0",border:true,reference:"kontaks",listeners:{specialkey:"onFocusEnter"}},{xtype:"form-keluarga",flex:1,cls:"shadow-panel",border:true,reference:"keluarga",listeners:{specialkey:"onFocusEnter"}}]}]}];f.callParent(arguments)},buttons:{items:[{text:"Simpan",iconCls:"x-fa fa-save",ui:"soft-blue",margin:1,reference:"simpan",handler:"onSimpan"},{text:"Simpan & Cetak Kartu",iconCls:"x-fa fa-save",ui:"soft-green",reference:"simpancetak",margin:1,handler:"onSimpanCetak",hidden:true,bind:{hidden:"{hideSimpanCetak}"}},{text:"Reset",iconCls:"x-fa fa-refresh",margin:"0 5 0 0",ui:"soft-black",hidden:true,bind:{hidden:"{hideReset}"},handler:"onReset"},{text:"Batal",iconCls:"x-fa fa-times",ui:"soft-red",margin:"0 5 0 0",hidden:true,bind:{hidden:"{hideBatal}"},handler:"onBatal"}]},onLoadRecord:function(l,g){l.getController().loadRecord(g)}},0,["pasien-form"],["component","box","container","panel","form","com-form","pasien-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"pasien-form":true},["widget.pasien-form"],0,[pasien,"Form"],0));(Ext.cmd.derive("pasien.FormAlamat",Ext.form.Panel,{title:"Alamat Sekarang",layout:{type:"vbox",align:"stretch"},header:{iconCls:"x-fa fa-location-arrow",margin:0,padding:"10 15 10 15"},controller:"form-alamat",viewModel:{stores:{propinsistore:{type:"wilayah-store",queryParams:{JENIS:1}},kabupatenstore:{type:"wilayah-store",queryParams:{JENIS:2}},kecamatanstore:{type:"wilayah-store",queryParams:{JENIS:3}},kelurahanstore:{type:"wilayah-store",queryParams:{JENIS:4}}}},bodyPadding:5,defaults:{margin:"0 0 3 0"},items:[{xtype:"textfield",name:"WILAYAH",reference:"wil",hidden:true,inputType:"hidden"},{xtype:"textfield",name:"ALAMAT",enterFocus:true,enforceMaxLength:true,maxLength:150,reference:"ALAMAT",margin:"0 2 3 1",flex:1,emptyText:"[Alamat]",listeners:{specialkey:"onFocusEnter"}},{xtype:"fieldcontainer",layout:{type:"hbox"},margin:0,defaultType:"textfield",defaults:{margin:"0 1 3 1",enterFocus:true,enforceMaxLength:true,flex:1,listeners:{specialkey:"onFocusEnter"}},items:[{name:"RT",maxLength:3,reference:"RT",emptyText:"[RT]"},{name:"RW",reference:"RW",maxLength:3,emptyText:"[RW]"},{xtype:"numberfield",hideTrigger:true,name:"KODEPOS",reference:"KODEPOS",margin:"0 2 0 1",maxLength:5,emptyText:"[Kode Pos]"}]},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},defaultType:"combobox",defaults:{enterFocus:true,typeAhead:true,forceSelection:true,validateOnBlur:true,flex:1,queryMode:"local",displayField:"DESKRIPSI",valueField:"ID"},items:[{emptyText:"[Propinsi]",margin:"0 1 0 1",name:"PROPINSI",reference:"prop",bind:{store:"{propinsistore}"},listeners:{specialkey:"onFocusEnter",select:"onSelectedProp",blur:"onBlurProp"}},{emptyText:"[Kabupaten / Kota]",margin:"0 2 0 1",name:"KABUPATEN",reference:"kab",bind:{store:"{kabupatenstore}"},listeners:{specialkey:"onFocusEnter",select:"onSelectedKab",blur:"onBlurKab"}}]},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},defaultType:"combobox",defaults:{enterFocus:true,typeAhead:true,forceSelection:true,validateOnBlur:true,flex:1,queryMode:"local",displayField:"DESKRIPSI",valueField:"ID"},items:[{emptyText:"[Kecamatan]",margin:"0 1 0 1",name:"KECAMATAN",reference:"kec",bind:{store:"{kecamatanstore}"},listeners:{specialkey:"onFocusEnter",select:"onSelectedKec",blur:"onBlurKec"}},{emptyText:"[Kelurahan / Desa]",margin:"0 2 0 1",name:"KELURAHAN",reference:"kel",bind:{store:"{kelurahanstore}"},listeners:{specialkey:"onFocusEnter",select:"onSelectedKel"}}]}],getFormData:function(){var f=this.getForm().getValues();f.WILAYAH=f.KELURAHAN||f.KECAMATAN||f.KABUPATEN||f.PROPINSI;delete f.PROPINSI;delete f.KABUPATEN;delete f.KECAMATAN;delete f.KELURAHAN;return f},loadRecord:function(E){var g=this,f=E.get("WILAYAH"),C=g.getViewModel(),B=g.getController(),y=B.getReferences(),z=C.get("propinsistore"),D=C.get("kabupatenstore"),A=C.get("kecamatanstore"),e=C.get("kelurahanstore"),x=false;if(!(f==null||f=="")){f=f+"";if(z){new Ext.util.DelayedTask(function(){if(z.getCount()>0){if(f.length>0&&z!=null){y.prop.setValue(f.substring(0,2))}if(f.length>2&&D!=null){D.queryParams.ID=f.substring(0,2);D.load()}}}).delay(500)}else{x=true}}else{x=true}if(x){D.removeAll();y.kab.select(null);A.removeAll();y.kec.select(null);e.removeAll();y.kel.select(null)}return g.getForm().loadRecord(E)},setWilayah:function(q){var p=this,s=p.getViewModel(),t=s.get("propinsistore"),u=s.get("kabupatenstore"),v=p.down("[name=WILAYAH]"),w=p.down("[name=PROPINSI]");v.setValue(q);if(t.getCount()>0){if(q.length>0&&t!=null){w.setValue(q.substring(0,2))}if(q.length>2&&u!=null){u.queryParams.ID=q.substring(0,2);u.load()}}}},0,["form-alamat"],["component","box","container","panel","form","form-alamat"],{component:true,box:true,container:true,panel:true,form:true,"form-alamat":true},["widget.form-alamat"],0,[pasien,"FormAlamat"],0));(Ext.cmd.derive("pasien.FormAlamatController",Ext.app.ViewController,{init:function(){var t=this,g=t.getViewModel(),e=t.getReferences(),v=g.get("propinsistore"),w=g.get("kabupatenstore"),f=g.get("kecamatanstore"),u=g.get("kelurahanstore");v.on("load",function(){var l=e.wil.getValue();if(l.length>0&&v!=null){e.prop.setValue(l.substring(0,2))}w.removeAll();e.kab.select(null);f.removeAll();e.kec.select(null);u.removeAll();e.kel.select(null);if(l.length>0&&w!=null){w.queryParams.ID=l.substring(0,2);w.load()}});w.on("load",function(){var l=e.wil.getValue();if(l.length>2&&w!=null){e.kab.setValue(l.substring(0,4))}f.removeAll();e.kec.select(null);u.removeAll();e.kel.select(null);if(l.length>2&&f!=null){f.queryParams.ID=l.substring(0,4);f.load()}});f.on("load",function(){var l=e.wil.getValue();if(l.length>4&&f!=null){e.kec.setValue(l.substring(0,6))}u.removeAll();e.kel.select(null);if(l.length>4&&u!=null){u.queryParams.ID=l.substring(0,6);u.load()}});u.on("load",function(){var l=e.wil.getValue();e.kel.setValue(l)})},initViewModel:function(){var g=this,l=g.getViewModel();l.get("propinsistore").initStore("propinsi")},onFocusEnter:function(l,g){this.getView().fireEvent("specialkey",l,g)},onSelectedProp:function(o,n){var p=this,m=p.getViewModel().get("kabupatenstore");if(n){this.getReferences().wil.setValue(n.get("ID"));m.queryParams.ID=n.get("ID");m.load()}},onSelectedKab:function(p,n){var m=this,o=m.getViewModel().get("kecamatanstore");if(n){this.getReferences().wil.setValue(n.get("ID"));o.queryParams.ID=n.get("ID");o.load()}},onSelectedKec:function(o,n){var m=this,p=m.getViewModel().get("kelurahanstore");if(n){this.getReferences().wil.setValue(n.get("ID"));p.queryParams.ID=n.get("ID");p.load()}},onSelectedKel:function(g,l){if(l){this.getReferences().wil.setValue(l.get("ID"))}},onBlurProp:function(g){var l=g.getSelection();if(l==null){this.removeStoreData(this.getReferences().kab,"kabupatenstore");this.removeStoreData(this.getReferences().kec,"kecamatanstore");this.removeStoreData(this.getReferences().kel,"kelurahanstore")}},onBlurKab:function(g){var l=g.getSelection();if(l==null){this.removeStoreData(this.getReferences().kec,"kecamatanstore");this.removeStoreData(this.getReferences().kel,"kelurahanstore")}},onBlurKec:function(g){var l=g.getSelection();if(l==null){this.removeStoreData(this.getReferences().kel,"kelurahanstore")}},removeStoreData:function(l,n){var m=this;m.getViewModel().get(n).removeAll();l.select(null)}},0,0,0,0,["controller.form-alamat"],0,[pasien,"FormAlamatController"],0));(Ext.cmd.derive("pasien.FormController",Ext.app.ViewController,{changeTglLhr:false,firstLoad:true,totalStore:12,ctrStore:12,initViewModel:function(){var g=this,l=g.getViewModel();l.get("agamastore").initStore("agama",function(){g.ctrStore--});l.get("jeniskelaminstore").initStore("jeniskelamin",function(){g.ctrStore--});l.get("pendidikanstore").initStore("pendidikan",function(){g.ctrStore--});l.get("pekerjaanstore").initStore("pekerjaan",function(){g.ctrStore--});l.get("statusperkawinanstore").initStore("statusperkawinan",function(){g.ctrStore--});l.get("golongandarahstore").initStore("golongandarah",function(){g.ctrStore--});l.get("shdkstore").initStore("shdk",function(){g.ctrStore--});l.get("jeniskontakstore").initStore("jeniskontak",function(){g.ctrStore--});l.get("negarastore").initStore("negara",function(){g.ctrStore--});l.get("tempatlahirstore").initStore("tempatlahir",function(){g.ctrStore--});l.get("jeniskipstore").initStore("jeniskip",function(){g.ctrStore--});l.get("jeniskapstore").initStore("jeniskap",function(){g.ctrStore--})},loadRecord:function(w){var u=this,x=u.getViewModel(),s=u.getView(),t=u.getReferences(),A=w.get("NORM")||0,v=w.get("KELUARGA"),y=Ext.getStore("instansi"),z=y?y.getAt(0).get("REFERENSI").PPK.WILAYAH:"";s.setLoading(true);if(u.task==undefined){u.task={interval:500,run:function(){if(u.ctrStore==0){u.ctrStore=u.totalStore;Ext.TaskManager.stop(u.task);x.set("pasien",w);var e=Ext.isNumeric(w.get("NORM"))&&w.get("NORM")>0;if(!s.isOpenWindow){x.set("hideBatal",!e);x.set("hideReset",e)}if(!w.get("WILAYAH")){w.set("WILAYAH",z)}if(!w.get("KARTUIDENTITAS")){w.set("KARTUIDENTITAS",[new data.model.KIP({WILAYAH:z})])}if(!w.get("KONTAK")){w.set("KONTAK",[new data.model.KontakPasien()])}t.identitas.loadRecord(w);t.frmAlamat.loadRecord(w);t.kip.loadRecord(w);t.kontaks.loadRecord(w);t.keluarga.loadRecord(w)}s.setLoading(false)}}}Ext.TaskManager.start(u.task)},onReset:function(){var f=this;f.loadRecord(f.getViewModel().get("pasien"))},onBatal:function(f){this.getView().fireEvent("batal",f)},onSimpan:function(g){var l=this;if(l.getView().getForm().isValid()){this.simpan(g,function(n,e,f){if(n){l.getView().fireEvent("simpansuccess",g,e,true,f,false)}})}},onSimpanCetak:function(n){var l=this,m=l.getView();if(l.getView().getForm().isValid()){this.simpan(n,function(e,g,p){if(e){var f=Ext.create("data.model.KartuPasien",{NORM:g.get("NORM"),JENIS:1});f.animateTarget=n;f.scope=l;f.showError=true;f.save({callback:function(o,u,t){if(t){m.fireEvent("cetakkartu",g);new Ext.util.DelayedTask(function(){m.fireEvent("cetakbarcode",g)}).delay(1000);new Ext.util.DelayedTask(function(){m.fireEvent("simpansuccess",n,g,true,p,true)}).delay(2000)}}})}})}},privates:{disableBtnSimpan:function(l){var g=this.getReferences();g.simpan.setDisabled(l);g.simpancetak.setDisabled(l)},simpan:function(G,H){var z=this,x=z.getView(),A=z.getViewModel().get("pasien"),B=A.data,y=z.getReferences(),D=y.identitas.getFormData(),F=y.frmAlamat.getFormData(),I=y.kip.getFormData(),E=y.kontaks.getFormData(),C=y.keluarga.getFormData(),t=!z.getViewModel().get("hideBatal");z.clearReferenceInModel(B);D=Ext.merge(D,F);if(I){D.KARTUIDENTITAS=I}if(E){D.KONTAK=E}if(C){D.KELUARGA=C}A.set(D);A.animateTarget=G;A.scope=z;A.showError=true;x.setLoading(true);A.save({callback:function(f,e,g){x.setLoading(false);if(g){var l="Pasien An. "+A.get("NAMA")+(t?" berhasil dilakukan perubahan data":" berhasil didaftarkan");Ext.toast({html:l,headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"});z.loadRecord(f);if(H!=undefined){H(true,f,t)}}}})}},onFocusEnter:function(f,s){if(s.getKey()===s.ENTER){var o=this.getView().query("component[enterFocus=true]"),q=o.indexOf(f)+1,p=q>=o.length?null:o[q];if(p){p.focus()}}},onChangeNomorKIP:function(p,o){var n=this,q=n.getView(),s=this.getViewModel();if(n.firstLoad){n.firstLoad=false}else{n.disableBtnSimpan(true)}if(o.trim().length==16){data.model.KIP.load(p.getValue(),{success:function(f,e){if(f.get("NORM")!=s.get("pasien.NORM")){data.model.Pasien.load(f.get("NORM"),{success:function(l,g){Ext.MessageBox.show({title:"Pencarian Pasien",msg:"Pasien tersebut sudah terdaftar dgn Nomor Kartu "+p.getValue()+" ini :<br/><h2>"+l.get("NAMA")+" - "+s.toFormatNorm(l.get("NORM"))+"</h2><p>Anda ingin menampilkan data pasien ini ?</p>",buttons:Ext.MessageBox.YESNO,animateTarget:p,scope:this,icon:Ext.MessageBox.INFO,fn:function(m){if(m=="yes"){q.fireEvent("simpansuccess",p,l,false,false,false)}p.setValue("");p.focus();n.disableBtnSimpan(false)}})}})}}})}},onBlurNorm:function(q){var o=this,s=o.getView(),p=o.getViewModel(),n=""+q.getValue();if(q.getValue()==null){return}if(n.length>0){if(data.model){data.model.Pasien.load(n,{success:function(e){Ext.MessageBox.show({title:"Pencarian Pasien",msg:"Pasien tersebut sudah terdaftar:<br/><h2>"+e.get("NAMA")+" - "+p.toFormatNorm(e.get("NORM"))+"</h2><p>Anda ingin menampilkan data pasien ini ?</p>",buttons:Ext.MessageBox.YESNO,animateTarget:q,scope:o,icon:Ext.MessageBox.INFO,fn:function(f){if(f=="yes"){o.getView().fireEvent("simpansuccess",q,e,false,false,false)}q.setValue("");q.focus()}})}})}}},onBlurNomorKIP:function(G){var t=this,K=t.getView(),I=K.down("form-kartu-identitas"),F=""+G.getValue(),D=t.getViewModel(),A=D.get("pasien");t.disableBtnSimpan(false);if(G.getValue()==null){return}if(F.length==16&&I.getJenis()==1){var E=F.substring(6,12),J=E.substring(0,2),C=E.substring(2,4),z=E.substring(4,6),B=(Number(J)-40)<1?1:2;J=Ext.String.leftPad((B==1?J:(Number(J)-40)),2,"0");var y=Ext.Date.parse(z+"-"+C+"-"+J,"y-m-d"),H=K.down("form-identitas");if(!Ext.isNumeric(A.get("NORM"))){H.setJenisKelamin(B);H.setTanggalLahir(y)}I.getFormAlamat().setWilayah(F.substring(0,6))}},onAlamatSkrgOnChange:function(u,w){var v=this,f=v.getViewModel().get("pasien"),g=v.getReferences(),x=g.frmAlamat.getFormData(),e=g.kip.getFormData(),y=f.get("KARTUIDENTITAS");if(w){y=y?y[0]:{};if(e){e=Ext.merge(e,x)}else{e=x}y=Ext.Object.merge(y.data?y.data:y,e);f.get("KARTUIDENTITAS")[0]=y;g.kip.loadRecord(f)}g.kip.down("[name=NOMOR]").allowBlank=!w},onChangeUmurTgl:function(m,l){var n=this;if(l==null){return}if(Ext.isDate(l)){n.changeTglLhr=true;umur=n.getViewModel().getTglToUmur(new Date(),l);n.getReferences().umur_tahun.setValue(umur.thn);n.getReferences().umurBulan.setValue(umur.bln);n.getReferences().umurHari.setValue(umur.hr)}},onChangeUmurTahun:function(g){var l=this;if(!l.changeTglLhr){thn=l.getViewModel().getUmurToTglLahir(g.getValue());l.getReferences().tgl_lahir.setValue(thn)}l.changeTglLhr=false},onBlurTglLahir:function(){var f=this.getReferences().umur_tahun.getValue();this.dibawahUmur(f>-1?f:-1)},onBlurUmurTahun:function(g){var l=this.getReferences().umur_tahun.getValue();this.dibawahUmur(l>-1?l:-1)},dibawahUmur:function(g){if(g==null){return}var l=this.getReferences().identitas;if(g>=0){if(g<=12){l.down("[name=STATUS_PERKAWINAN]").setValue(1)}if(g<=5){l.down("[name=PENDIDIKAN]").setValue(1)}if(g>=6&&g<=11){l.down("[name=PENDIDIKAN]").setValue(2)}if(g>=12&&g<=14){l.down("[name=PENDIDIKAN]").setValue(3)}if(g>=14&&g<=17){l.down("[name=PENDIDIKAN]").setValue(4)}if(g<=17){l.down("[name=PEKERJAAN]").setValue(1)}}},clearReferenceInModel:function(f){delete f.KARTUIDENTITAS;delete f.KONTAK;delete f.KELUARGA}},0,0,0,0,["controller.pasien-form"],0,[pasien,"FormController"],0));(Ext.cmd.derive("pasien.FormIdentitas",com.Form,{title:"Data Identitas",header:{iconCls:"x-fa fa-user",margin:0,padding:"0 15 0 15",layout:{type:"hbox",align:"middle"},items:[{xtype:"component",flex:1},{xtype:"displayfield",cls:"x-color-blue x-font-weight",bind:"{getInfoNoRM}"}]},bodyPadding:5,layout:{type:"vbox",align:"stretch"},defaults:{margin:"0 0 3 0"},items:[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},flex:1,defaults:{margin:"0 1"},items:[{xtype:"numberfield",name:"NORM",hidden:true},{xtype:"numberfield",name:"NORM_MANUAL",emptyText:"[Masukkan Norm Manual]",enterFocus:true,enforceMaxLength:true,maxLength:8,hideTrigger:true,bind:{hidden:"{formConfig.hideNorm}"},listeners:{specialkey:"onFocusEnter",blur:"onBlurNorm"}},{xtype:"textfield",name:"GELAR_DEPAN",enterFocus:true,enforceMaxLength:true,maxLength:25,flex:1,emptyText:"[Gelar Depan]",listeners:{specialkey:"onFocusEnter"}},{xtype:"textfield",name:"NAMA",enterFocus:true,enforceMaxLength:true,allowBlank:false,maxLength:75,flex:3,emptyText:"[Masukkan Nama Tanpa Gelar]",listeners:{specialkey:"onFocusEnter"}},{xtype:"textfield",name:"GELAR_BELAKANG",enterFocus:true,enforceMaxLength:true,maxLength:35,flex:2,emptyText:"[Gelar Blkg]",listeners:{specialkey:"onFocusEnter"}},{xtype:"component",html:"/",style:"padding-top: 7px; text-align: center",width:10},{xtype:"textfield",name:"PANGGILAN",enterFocus:true,enforceMaxLength:true,maxLength:15,width:187,emptyText:"[Masukkan Nama Panggilan]",listeners:{specialkey:"onFocusEnter"}}]},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},defaultType:"combobox",defaults:{margin:"0 1"},items:[{name:"TEMPAT_LAHIR",enterFocus:true,enforceMaxLength:true,maxLength:35,flex:1,displayField:"DESKRIPSI",valueField:"ID",queryMode:"local",typeAhead:true,emptyText:"[Pilih Tempat Lahir]",bind:{store:"{tempatlahirstore}"},listeners:{specialkey:"onFocusEnter"}},{xtype:"datefield",name:"TANGGAL_LAHIR",enterFocus:true,allowBlank:false,maxValue:new Date(),width:200,emptyText:"[Tgl. Lahir (tgl/bln/thn)]",format:"d/m/Y",reference:"tgl_lahir",listeners:{change:"onChangeUmurTgl",blur:"onBlurTglLahir",specialkey:"onFocusEnter"}},{xtype:"numberfield",hideTrigger:true,name:"UMUR_TAHUN",width:85,enterFocus:true,emptyText:"Umur Thn",reference:"umur_tahun",listeners:{change:"onChangeUmurTahun",blur:"onBlurUmurTahun",specialkey:"onFocusEnter"}},{xtype:"numberfield",hideTrigger:true,name:"UMUR_BULAN",width:85,enterFocus:true,emptyText:"Umur Bln",reference:"umurBulan",readonly:true,listeners:{specialkey:"onFocusEnter"}},{xtype:"numberfield",hideTrigger:true,name:"UMUR_TGL",width:85,enterFocus:true,readonly:true,emptyText:"Umur hr",reference:"umurHari",listeners:{specialkey:"onFocusEnter"}},{xtype:"referensi-combo",name:"JENIS_KELAMIN",enterFocus:true,params:{JENIS:2,STATUS:1},emptyText:"[Pilih Jenis Kelamin]",allowBlank:false,listeners:{specialkey:"onFocusEnter"}}]},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},defaultType:"referensi-combo",defaults:{margin:"0 1",flex:1,enterFocus:true,listeners:{specialkey:"onFocusEnter"}},items:[{name:"AGAMA",emptyText:"[Agama]",bind:{store:"{agamastore}"}},{name:"STATUS_PERKAWINAN",emptyText:"[Status Perkawinan]",bind:{store:"{statusperkawinanstore}"}},{name:"PENDIDIKAN",emptyText:"[Pendidikan]",bind:{store:"{pendidikanstore}"}},{name:"PEKERJAAN",emptyText:"[Pekerjaan]",bind:{store:"{pekerjaanstore}"}}]},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},defaultType:"referensi-combo",defaults:{margin:"0 1",enterFocus:true,listeners:{specialkey:"onFocusEnter"}},items:[{name:"GOLONGAN_DARAH",flex:1,emptyText:"[Gol. Darah]",defaultValue:13,params:{JENIS:6,STATUS:1},tooltip:"Golongan Darah"},{name:"KEWARGANEGARAAN",flex:2,emptyText:"[Kewarganegaraan]",bind:{store:"{negarastore}"}},{name:"SUKU",flex:1,emptyText:"[Suku]",defaultValue:0,params:{JENIS:140,STATUS:1}}]}],getFormData:function(){var f=this.getForm().getValues();tgl=this.down("[name=TANGGAL_LAHIR]").getValue();f.TANGGAL_LAHIR=tgl;delete f.UMUR_BULAN;delete f.UMUR_TAHUN;delete f.UMUR_TGL;return f},onLoadRecord:function(J,A){if(A){var D={hideNorm:Ext.isNumeric(A.get("NORM"))},F=J.down("[name=NORM_MANUAL]"),x=J.down("[name=GELAR_DEPAN]"),z=J.down("[name=JENIS_KELAMIN]"),y=J.down("[name=AGAMA]"),G=J.down("[name=STATUS_PERKAWINAN]"),E=J.down("[name=PENDIDIKAN]"),I=J.down("[name=PEKERJAAN]"),H=J.down("[name=GOLONGAN_DARAH]"),C=J.down("[name=KEWARGANEGARAAN]"),B=J.down("[name=SUKU]"),K=J.getPropertyConfig("1");if(J.getPropertyConfig("2")=="FALSE"){D.hideNorm=true}if(K!="FALSE"){F.setMaxValue(K)}J.setFormConfig(D);if(!D.hideNorm){F.focus(false,100)}else{x.focus(false,100)}z.load();z.doAfterLoad=function(f,m,e){if(A.get("JENIS_KELAMIN_DESK")){J.comboSelectFromStore("jeniskelamin","DESKRIPSI",A.get("JENIS_KELAMIN_DESK"),z,false)}else{var l=A.get("JENIS_KELAMIN")?A.get("JENIS_KELAMIN"):1,g=e.findRecord("ID",l,0,true,false,true);z.select(g)}};if(A.get("AGAMA")){J.comboSelectFromStore("agama","ID",A.get("AGAMA"),y)}else{if(A.get("AGAMA_DESK")){J.comboSelectFromStore("agama","DESKRIPSI",A.get("AGAMA_DESK"),y,false)}}if(A.get("STATUS_PERKAWINAN")){J.comboSelectFromStore("statusperkawinan","ID",A.get("STATUS_PERKAWINAN"),G)}else{if(A.get("STATUS_PERKAWINAN_DESK")){J.comboSelectFromStore("statusperkawinan","DESKRIPSI",A.get("STATUS_PERKAWINAN_DESK"),G,false)}}H.load();H.doAfterLoad=function(f,m,e){if(A.get("GOLONGAN_DARAH_DESK")){m.comboSelectFromStore("golongandarah","DESKRIPSI",A.get("GOLONGAN_DARAH_DESK"),H,false)}else{var l=A.get("GOLONGAN_DARAH")?A.get("GOLONGAN_DARAH"):1,g=e.findRecord("ID",A.get("GOLONGAN_DARAH"),0,true,false,true);H.select(g)}};if(A.get("KEWARGANEGARAAN")){J.comboSelectFromStore("negara","ID",A.get("KEWARGANEGARAAN"),C)}else{C.select(null);C.select(Ext.create("data.model.Negara",{ID:71,DESKRIPSI:"INDONESIA"}))}B.load();B.doAfterLoad=function(f,m,e){var l=A.get("SUKU")?A.get("SUKU"):0,g=e.findRecord("ID",A.get("SUKU"),0,true,false,true);B.select(g)};new Ext.util.DelayedTask(function(){if(A.get("PENDIDIKAN")){J.comboSelectFromStore("pendidikan","ID",A.get("PENDIDIKAN"),E)}else{if(A.get("PENDIDIKAN_DESK")){J.comboSelectFromStore("pendidikan","DESKRIPSI",A.get("PENDIDIKAN_DESK"),E,false)}}}).delay(500);new Ext.util.DelayedTask(function(){if(A.get("PEKERJAAN")){J.comboSelectFromStore("pekerjaan","ID",A.get("PEKERJAAN"),I)}else{if(A.get("PEKERJAAN_DESK")){J.comboSelectFromStore("pekerjaan","DESKRIPSI",A.get("PEKERJAAN_DESK"),I,false)}}}).delay(1000)}},comboSelectFromStore:function(u,y,B,z,w,t){var C=Ext.getStore(u),v=w!=undefined?w:true,x=t!=undefined?t:false,A=C.findRecord(y,B,0,v,x,true);z.select(A)},setJenisKelamin:function(l){var m=this,n=m.down("[name=JENIS_KELAMIN]");m.comboSelectFromStore("jeniskelamin","ID",l,n,false)},setTanggalLahir:function(u){var q=this,p=q.down("[name=TANGGAL_LAHIR]"),t=q.getSysdate(),o=Ext.util.Format.date(p.getValue(),"Y-m-d"),s=Ext.util.Format.date(t,"Y-m-d");if(o==s){p.setValue(u)}}},0,["form-identitas"],["component","box","container","panel","form","com-form","form-identitas"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-identitas":true},["widget.form-identitas"],0,[pasien,"FormIdentitas"],0));(Ext.cmd.derive("pasien.FormKartuIdentitas",Ext.form.Panel,{title:"Kartu Identitas",header:{iconCls:"x-fa fa-credit-card",margin:0,padding:"5 15 5 15",layout:{type:"hbox",align:"middle"},items:[{xtype:"component",flex:1},{xtype:"checkboxfield",boxLabel:"Sama Dengan Alamat Sekarang",name:"ALAMAT",checked:false,reference:"isAlamatSkrg",listeners:{change:"onAlamatSkrgOnChange"}}]},layout:{type:"vbox",align:"stretch"},bodyPadding:5,defaults:{margin:"0 0 3"},items:[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},defaultType:"combobox",items:[{xtype:"numberfield",inputType:"hidden",name:"NORM",hidden:true},{name:"JENIS",enterFocus:true,typeAhead:true,forceSelection:true,validateOnBlur:true,emptyText:"[Jenis Kartu]",queryMode:"local",margin:"0 1 0 1",flex:1,displayField:"DESKRIPSI",valueField:"ID",bind:{store:"{jeniskipstore}"},listeners:{specialkey:"onFocusEnter"}},{xtype:"textfield",name:"NOMOR",enterFocus:true,margin:"0 1 0 1",emptyText:"[Nomor Kartu]",flex:1,listeners:{specialkey:"onFocusEnter",change:"onChangeNomorKIP",blur:"onBlurNomorKIP"}}]},{xtype:"form-alamat",header:false,bodyPadding:0,bodyStyle:"background: white",border:false,listeners:{specialkey:"onFocusEnter"}}],getFormData:function(){var l=this.getForm().getValues(),m=this.down("form-alamat").getFormData(),n=!(l.NOMOR==""||l.NOMOR==null||Number(l.JENIS)==0);delete l.PROPINSI;delete l.KABUPATEN;delete l.KECAMATAN;l.WILAYAH=l.KELURAHAN;delete l.KELURAHAN;l=Ext.merge(l,m);return n?[l]:null},loadRecord:function(m){var n=this,l=m.get("KARTUIDENTITAS")||null,l=Ext.isArray(l)?l[0]:l;l=Ext.getClassName(l)==""?new data.model.KIP(l):l;if(l){n.down("form-alamat").loadRecord(l)}return n.getForm().loadRecord(l)},getFormAlamat:function(){return this.down("form-alamat")},getJenis:function(){return this.down("[name=JENIS]").getValue()}},0,["form-kartu-identitas"],["component","box","container","panel","form","form-kartu-identitas"],{component:true,box:true,container:true,panel:true,form:true,"form-kartu-identitas":true},["widget.form-kartu-identitas"],0,[pasien,"FormKartuIdentitas"],0));(Ext.cmd.derive("pasien.FormKeluarga",Ext.form.Panel,{controller:"form-keluarga",title:"Keluarga",layout:{type:"vbox",align:"stretch"},header:{iconCls:"x-fa fa-group",margin:0,padding:"10 15 10 15"},tools:[{xtype:"tool",cls:"x-fa fa-plus hide-icon-tools",width:20,height:20,listeners:{click:"onAdd"}}],bodyPadding:5,defaults:{margin:"0 0 10 0"},items:[{xtype:"keluarga",bodyStyle:"background: white",border:false,hideDelete:true,listeners:{specialkey:"onFocusEnter"}},{xtype:"keluarga",bodyStyle:"background: white",border:false,hideDelete:true,listeners:{specialkey:"onFocusEnter"}}],getFormData:function(){var f=[];this.items.each(function(o){var e=o.down("kontak").getFormData(),p=o.down("form").getForm().getValues(),n=p.NAMA!=""&&Number(p.SHDK)>0&&Number(p.JENIS_KELAMIN)>0;if(n){if(e){p.KONTAK=[e]}f.push(p)}});return f.length>0?f:null},loadRecord:function(o){var m=this,n=o.get("KELUARGA")||null;len=n?n.length:0;for(var p=m.items.getCount();p<len;p++){m.getController().onAdd(null)}m.items.each(function(e,f){if(len>0){e.loadRecord(n[f])}});return true}},0,["form-keluarga"],["component","box","container","panel","form","form-keluarga"],{component:true,box:true,container:true,panel:true,form:true,"form-keluarga":true},["widget.form-keluarga"],0,[pasien,"FormKeluarga"],0));(Ext.cmd.derive("pasien.FormKeluargaController",Ext.app.ViewController,{onFocusEnter:function(l,g){this.getView().fireEvent("specialkey",l,g)},onAdd:function(n){var m=this.getView(),l=Ext.create("pasien.Keluarga",{listeners:{specialkey:"onFocusEnter",ondelete:"onDelete"}});m.add(l);l.down("textfield").focus()},onDelete:function(f){this.getView().remove(f.ownerCt.ownerCt.ownerCt)}},0,0,0,0,["controller.form-keluarga"],0,[pasien,"FormKeluargaController"],0));(Ext.cmd.derive("pasien.FormKontak",Ext.form.Panel,{controller:"form-kontak",title:"Kontak",layout:{type:"vbox",align:"stretch"},cls:"icon-title",header:{iconCls:"x-fa fa-phone",margin:0,padding:"10 15 10 15"},tools:[{xtype:"tool",cls:"x-fa fa-plus hide-icon-tools",width:20,height:20,listeners:{click:"onAdd"}}],bodyPadding:5,defaults:{margin:"0 0 5 0"},items:[{xtype:"kontak",listeners:{specialkey:"onFocusEnter"},hideDelete:true}],getFormData:function(){var f=[];this.items.each(function(e){var l=e.getFormData();if(l){f.push(l)}});return f.length>0?f:null},loadRecord:function(o){var m=this,n=o.get("KONTAK")||null;load=m.getForm().loadRecord(o);len=n?n.length:0;for(var p=m.items.getCount();p<len;p++){m.getController().onAdd(null)}m.items.each(function(e,f){if(len>0){e.loadRecord(n[f])}});return load}},0,["form-kontak"],["component","box","container","panel","form","form-kontak"],{component:true,box:true,container:true,panel:true,form:true,"form-kontak":true},["widget.form-kontak"],0,[pasien,"FormKontak"],0));(Ext.cmd.derive("pasien.FormKontakController",Ext.app.ViewController,{onFocusEnter:function(l,g){this.getView().fireEvent("specialkey",l,g)},onAdd:function(l){var n=this.getView(),m=Ext.create("pasien.Kontak",{});n.add(m);m.down("textfield").focus()},onDelete:function(f){this.getView().remove(f.ownerCt)}},0,0,0,0,["controller.form-kontak"],0,[pasien,"FormKontakController"],0));(Ext.cmd.derive("pasien.Grid",com.Grid,{controller:"pasien-grid",viewModel:{data:{filter:{NAMA:"",TANGGAL_LAHIR:"",ALAMAT:""}},stores:{store:{type:"pasien-store"}}},title:"Daftar Pasien",ui:"panel-cyan",tbar:[{xtype:"textfield",flex:1,jns:1,bind:"{filter.NAMA}",emptyText:"Nama Pasien",listeners:{change:"onCari"}},{xtype:"datefield",flex:1,jns:2,bind:"{filter.TANGGAL_LAHIR}",emptyText:"Tanggal Lahir",listeners:{blur:"onCari"},format:"d/m/Y"},{xtype:"textfield",flex:1,jns:3,bind:"{filter.ALAMAT}",emptyText:"Alamat Pasien",listeners:{change:"onCari"}}],actions:{buka:{iconCls:"x-fa fa-folder-open",tooltip:"Buka Pasien",handler:"onBuka"}},columns:[{xtype:"rownumberer",text:"No",menuDisabled:true,sortable:false,align:"left",width:70},{text:"No RM",dataIndex:"NORM",width:70},{text:"Nama Pasien",dataIndex:"NAMA",flex:1},{text:"Alamat",dataIndex:"ALAMAT",flex:1},{xtype:"datecolumn",text:"Tanggal Lahir",dataIndex:"TANGGAL_LAHIR",format:"d/m/Y",width:90},{text:"Tempat Lahir",dataIndex:"TEMPAT_LAHIR",width:200,renderer:"onRendererTempatLahir"},{text:"Nama Ibu",flex:1,renderer:"onRendererNamaIbu"},{menuDisabled:true,sortable:false,align:"center",xtype:"actioncolumn",width:50,items:["@buka"]}],createMenuContext:function(){var f=this;f.menucontext=new Ext.menu.Menu({items:[{text:"Detail Pasien",glyph:"xf05a@FontAwesome",handler:function(){f.getController().onDetilPasien()}},{text:"Daftarkan Kunjungan",glyph:"xf234@FontAwesome",handler:function(){f.getController().onPendaftaranKunjungan()}},{text:"Refresh",glyph:"xf021@FontAwesome",handler:function(){f.refresh()}}]});return f.menucontext},initComponent:function(){this.createMenuContext();com.Grid.prototype.initComponent.apply(this,arguments)},listeners:{rowcontextmenu:"onKlikKananMenu",itemdblclick:"onItemDoubleClick",itemkeydown:"onItemKeydown"}},0,["pasien-grid"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","pasien-grid"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"pasien-grid":true},["widget.pasien-grid"],0,[pasien,"Grid"],0));(Ext.cmd.derive("pasien.GridController",Ext.app.ViewController,{onCari:function(q,u){var v=this,t=v.getView(),f=v.getViewModel(),s=t.down("pagingtoolbar"),w=q.getValue();if(q.jns==1){f.set("filter.NAMA",u)}if(q.jns==3){f.set("filter.ALAMAT",u)}if(q.jns==2){if(w==null){f.set("filter.TANGGAL_LAHIR",null)}else{f.set("filter.TANGGAL_LAHIR",Ext.util.Format.date(w,"Y-m-d"))}}t.setParams(f.get("filter"));if(s){s.moveFirst()}else{t.load()}},onRendererTempatLahir:function(n,p,o){var s=o.get("REFERENSI"),q=s?(s.TEMPATLAHIR?s.TEMPATLAHIR.DESKRIPSI:""):"";return Ext.isNumeric(n)?q:n},onRendererNamaIbu:function(u,s,t,q,f,g){return this.getNamaIbu(t.get("KELUARGA"))},getNamaIbu:function(l){if(l==null||l.length==0){return""}var g=null;Ext.Array.each(l,function(e){if(e.SHDK=="7"&&e.JENIS_KELAMIN=="2"){g=e}});return g==null?"":g.NAMA},onPendaftaranKunjungan:function(m){var n=this,p=n.getView(),o=m!=null?m:p.getSelection()[0];p.fireEvent("pendaftarankunjungan",o)},onItemDoubleClick:function(q,f,o,p,s){this.onPendaftaranKunjungan(f)},onItemKeydown:function(s,t,u,q,g){var p=this;if(g.getKey()==g.ENTER){p.onPendaftaranKunjungan(t)}},onBuka:function(s,v,u,t,g,w){var q=this;new Ext.util.DelayedTask(function(){q.onPendaftaranKunjungan(w)}).delay(200)},onKlikKananMenu:function(w,t,v,s,y){var q=this,u=q.getView(),x=y.getXY();y.stopEvent();u.menucontext.showAt(x)},onDetilPasien:function(){var l=this.getView(),g=l.getSelection()[0];l.fireEvent("detailpasien",g)}},0,0,0,0,["controller.pasien-grid"],0,[pasien,"GridController"],0));(Ext.cmd.derive("pasien.Keluarga",com.Form,{controller:"keluarga",layout:{type:"vbox",align:"stretch"},viewModel:{stores:{jeniskelaminstore:{type:"referensi-store",queryParams:{JENIS:2}},pendidikanstore:{type:"referensi-store",queryParams:{JENIS:3}},pekerjaanstore:{type:"referensi-store",queryParams:{JENIS:4}},shdkstore:{type:"referensi-store",queryParams:{JENIS:7}}}},header:false,border:false,hideDelete:false,hideKontak:false,defaults:{margin:"0 1 0 1"},bodyPadding:0,initComponent:function(){this.items=[{xtype:"form",layout:{type:"vbox",align:"stretch"},header:false,border:false,defaults:{margin:"0 0 2 0"},bodyStyle:"background: white",items:[{xtype:"fieldcontainer",flex:1,layout:{type:"hbox",align:"stretch"},defaults:{margin:"0 1 0 1"},items:[{xtype:"numberfield",inputType:"hidden",name:"NORM",hidden:true},{xtype:"numberfield",inputType:"hidden",name:"ID",hidden:true},{xtype:"combobox",name:"SHDK",enterFocus:true,forceSelection:true,validateOnBlur:true,emptyText:"[Hubungan dgn Pasien]",bind:{store:"{shdkstore}",readOnly:"{formConfig.viewOnly}"},queryMode:"local",displayField:"DESKRIPSI",valueField:"ID",flex:1,listeners:{specialkey:"onFocusEnter",select:"onSelected"}},{xtype:"textfield",enforceMaxLength:true,maxLength:75,name:"NAMA",enterFocus:true,emptyText:"[Nama Keluarga tanpa Gelar]",width:300,bind:{readOnly:"{formConfig.viewOnly}"},listeners:{specialkey:"onFocusEnter"}},{xtype:"button",hidden:this.hideDelete,ui:"soft-red",iconCls:"x-fa fa-times",handler:"onDelete"}]},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},defaultType:"combobox",defaults:{margin:"0 1 0 1",enterFocus:true,typeAhead:true,forceSelection:true,queryMode:"local",displayField:"DESKRIPSI",valueField:"ID",listeners:{specialkey:"onFocusEnter"},bind:{readOnly:"{formConfig.viewOnly}"}},items:[{name:"JENIS_KELAMIN",width:150,emptyText:"[Jenis Kelamin]",bind:{store:"{jeniskelaminstore}",readOnly:"{formConfig.viewOnly}"}},{name:"PENDIDIKAN",flex:1,emptyText:"[Pendidikan]",bind:{store:"{pendidikanstore}",readOnly:"{formConfig.viewOnly}"}},{name:"PEKERJAAN",flex:1,emptyText:"[Pekerjaan]",bind:{store:"{pekerjaanstore}",readOnly:"{formConfig.viewOnly}"}}]},{xtype:"textfield",name:"ALAMAT",margin:"0 1 3 1",enterFocus:true,enforceMaxLength:true,maxLength:150,emptyText:"[Masukan Alamat]",listeners:{specialkey:"onFocusEnter"},bind:{readOnly:"{formConfig.viewOnly}"}}]},{xtype:"kontak",hideDelete:true,margin:"0 1 0 1",hidden:this.hideKontak}];com.Form.prototype.initComponent.apply(this,arguments)},loadRecord:function(m){var n=this,l=m||null,l=Ext.getClassName(l)==""?new data.model.KeluargaPasien(l):l;return n.getForm().loadRecord(l)}},0,["keluarga"],["component","box","container","panel","form","com-form","keluarga"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,keluarga:true},["widget.keluarga"],0,[pasien,"Keluarga"],0));(Ext.cmd.derive("pasien.KeluargaController",Ext.app.ViewController,{initViewModel:function(){var g=this,l=g.getViewModel();l.get("jeniskelaminstore").initStore("jeniskelamin");l.get("pendidikanstore").initStore("pendidikan");l.get("pekerjaanstore").initStore("pekerjaan");l.get("shdkstore").initStore("shdk")},onFocusEnter:function(l,g){this.getView().fireEvent("specialkey",l,g)},onSelected:function(n,l){var m=this.getView().down("combobox[name=JENIS_KELAMIN]");if(l.get("ID")==2){m.setValue(1)}else{if(l.get("ID")==3){m.setValue(2)}else{m.select(null)}}},onDelete:function(f){this.getView().fireEvent("ondelete",f)}},0,0,0,0,["controller.keluarga"],0,[pasien,"KeluargaController"],0));(Ext.cmd.derive("pasien.Kontak",com.Form,{layout:{type:"hbox",align:"stretch"},header:false,border:false,refId:"NORM",hideDelete:false,controller:"kontak",viewModel:{stores:{jeniskontakstore:{type:"referensi-store",queryParams:{JENIS:8}}}},defaults:{margin:"0 1 0 1"},bodyPadding:0,bodyStyle:"background: white",initComponent:function(){var f=this;f.items=[{xtype:"numberfield",inputType:"hidden",name:f.refId,hidden:true},{xtype:"textfield",hideTrigger:true,enterFocus:true,enforceMaxLength:true,maxLength:35,name:"NOMOR",hidden:f.hidden,emptyText:"Ex.0411-123456 / 085342123456",width:250,bind:{readOnly:"{formConfig.viewOnly}"},listeners:{specialkey:"onFocusEnter"}},{xtype:"combobox",name:"JENIS",enterFocus:true,typeAhead:true,forceSelection:true,validateOnBlur:true,emptyText:"[Jenis Kontak]",queryMode:"local",displayField:"DESKRIPSI",valueField:"ID",flex:1,hidden:f.hidden,bind:{store:"{jeniskontakstore}",readOnly:"{formConfig.viewOnly}"},listeners:{specialkey:"onFocusEnter"}},{xtype:"button",hidden:f.hideDelete,iconCls:"x-fa fa-times",ui:"soft-red",handler:"onDelete"}];f.callParent(arguments)},getFormData:function(){var l=this.getForm().getValues(),g=l.NOMOR!=""&&Number(l.JENIS)>0;return g?l:null},loadRecord:function(m){var n=this,l=m||null,l=Ext.getClassName(l)==""?new data.model.KontakPasien(l):l;return n.getForm().loadRecord(l)}},0,["kontak"],["component","box","container","panel","form","com-form","kontak"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,kontak:true},["widget.kontak"],0,[pasien,"Kontak"],0));(Ext.cmd.derive("pasien.KontakController",Ext.app.ViewController,{initViewModel:function(){var g=this,l=g.getViewModel();l.get("jeniskontakstore").initStore("jeniskontak")},onFocusEnter:function(l,g){this.getView().fireEvent("specialkey",l,g)}},0,0,0,0,["controller.kontak"],0,[pasien,"KontakController"],0));(Ext.cmd.derive("pasien.Pencarian",com.Form,{controller:"pasien-pencarian",layout:{type:"hbox",align:"stretch"},viewModel:{formConfig:{baru:false}},bodyPadding:0,items:[{xtype:"search-field",cls:"x-text-border",iconCls:"iconSearch",autoFocus:true,emptyText:"Cari Pasien dgn Memasukkan No.RM/No.KTP/Nama",reference:"cari_text",enableKeyEvents:true,flex:1,listeners:{search:"onSearch",change:"onChange"}},{iconCls:"x-fa fa-user-plus x-color-gray",cls:"x-btn-white",xtype:"button",handler:"onBaru",width:50,tooltip:"Pasien Baru",hidden:true,bind:{hidden:"{!formConfig.baru}"}},{iconCls:"x-fa fa-list x-color-gray",cls:"x-btn-white",width:50,xtype:"button",handler:"onList",tooltip:"Daftar Pasien"}],onLoadRecord:function(){var f=this;f.setFormConfig({baru:webservice.app.xpriv("1001",false)})}},0,["pasien-pencarian"],["component","box","container","panel","form","com-form","pasien-pencarian"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"pasien-pencarian":true},["widget.pasien-pencarian"],0,[pasien,"Pencarian"],0));(Ext.cmd.derive("pasien.PencarianController",Ext.app.ViewController,{dukcapil:{integrasi:undefined,service:undefined},pusdatin:{integrasi:undefined,service:undefined},init:function(){var g=this,l=g.getView();g.dukcapil.integrasi=l.app.xitr("ID",4);if(g.dukcapil.integrasi){g.dukcapil.service=Ext.create(g.dukcapil.integrasi.NAMA_KLAS,{})}g.pusdatin.integrasi=l.app.xitr("ID",5);if(g.pusdatin.integrasi){g.pusdatin.service=Ext.create(g.pusdatin.integrasi.NAMA_KLAS,{})}},onSearch:function(){this.doCari()},doCari:function(){var l=this,g=this.getReferences().cari_text.getValue();if(g.trim().length==0){return}if(Ext.isNumeric(g)){if(g.length==16){l.cariPasienDgnNomor(g)}else{l.cariPasienDgnNorm(g)}}else{l.cariPasienDgnNama(g)}},cariPasienDgnNorm:function(l){var m=this,n=m.getView();if(data.model){data.model.Pasien.load(l,{success:function(e){n.fireEvent("opentab",e,m.getIconSex(e),true,"pasien.Workspace","psn-"+e.getId(),m.toFormatNorm(e.getId()))},failure:function(){n.notifyMessage("Pasien tidak ditemukan","danger-red")}})}},cariPasienDgnNomor:function(l){var m=this,n=m.getView();if(data.model){data.model.KIP.load(l,{success:function(e){m.cariPasienDgnNorm(e.get("NORM"))},failure:function(){if(m.dukcapil.service){m.dukcapil.service.nik(l,function(q,e,s){if(q){if(e.status==200){var f=Ext.create("data.model.Pasien",e.data),g=f.getId().replace("data.model.","");n.fireEvent("opentab",f,m.getIconSex(f),true,"pasien.Workspace",g,g)}else{m.requestPusdatinNIK(l)}}else{m.requestPusdatinNIK(l)}})}else{m.requestPusdatinNIK(l)}}})}},cariPasienDgnNama:function(l){var m=this,n=m.getView();n.openDialog("",true,0,0,{xtype:"pasien-grid",showCloseButton:true,viewModel:{data:{filter:{NAMA:l}}}},function(f,g){var e=g.down("pasien-grid");e.setListConfig({paging:true});e.on({pendaftarankunjungan:function(p){g.close();n.fireEvent("opentab",p,m.getIconSex(p),true,"pasien.Workspace","psn-"+p.getId(),m.toFormatNorm(p.getId()))},detailpasien:function(p){n.openDialog("",true,0,0,{xtype:"pasien-detil",title:"Detil Pasien",ui:"panel-cyan",showCloseButton:true,viewModel:{data:{pasien:p,viewInfoDetil:true}}})}});if(l==""){e.load()}})},onList:function(){this.cariPasienDgnNama("")},onClearText:function(){this.getReferences().cari_text.onClearClick()},onChange:function(p,n){var o=this,s=o.getView(),q=s.down("search-field");if(n==""){q.onClearClick()}},onBaru:function(){var m=this,n=m.getView(),l=new data.model.Pasien();id=l.getId().replace("data.model.","");n.fireEvent("opentab",l,m.getIconSex(l),true,"pasien.Workspace",id,id)},privates:{getIconSex:function(f){return"x-fa fa-"+(f.get("JENIS_KELAMIN")==1?"male":"female")},toFormatNorm:function(m){var n=Ext.String.leftPad(m,8,"0"),l=Ext.String.insert(Ext.String.insert(Ext.String.insert(n,".",2),".",5),".",8);return l},requestPusdatinNIK:function(m){var l=this,n=l.getView();if(l.pusdatin.service){l.pusdatin.service.nik(m,function(q,e,s){if(q){if(e.status==200){var f=Ext.create("data.model.Pasien",e.data),g=f.getId().replace("data.model.","");n.fireEvent("opentab",f,l.getIconSex(f),true,"pasien.Workspace",g,g)}else{n.notifyMessage("Pasien tidak ditemukan","danger-red")}}else{n.notifyMessage("Pasien tidak ditemukan","danger-red")}})}else{n.notifyMessage("Pasien tidak ditemukan","danger-red")}}}},0,0,0,0,["controller.pasien-pencarian"],0,[pasien,"PencarianController"],0));(Ext.cmd.derive("pasien.ShortDetil",com.Form,{controller:"pasien-short-detil",viewModel:{data:{record:undefined,formConfig:{edit:false}},stores:{store:{type:"pasien-store"}},formulas:{getNamaLengkap:function(m){var n=m("record.GELAR_DEPAN")||"",l=m("record.GELAR_BELAKANG")||"";n=n==""?"":n+". ";l=l==""?"":", "+l;return n+m("record.NAMA")+l},getFormatNorm:function(g){var l=g("record.NORM")||0;if(l>0){return this.toFormatNorm(l)}return""},getTempatLahir:function(m){var n=m("record.TEMPAT_LAHIR"),p=n?m("record.REFERENSI"):null,o=p?(p.TEMPATLAHIR?p.TEMPATLAHIR.DESKRIPSI:n):n;return Ext.isNumeric(n)?o:n},getTglLahir:function(f){return Ext.Date.format(f("record.TANGGAL_LAHIR"),"d F Y")},getInfoTanggal:function(n){var l=n("record.TANGGAL"),m=l?Ext.Date.format(l,"d-m-Y H:i:s"):"";return m},getIconSex:function(f){return"x-fa fa-"+(f("record.JENIS_KELAMIN")==1?"mars":"venus")},getUmur:function(g){var l=this.getTglToUmur(new Date(),g("record.TANGGAL_LAHIR"));return Ext.util.Format.format("{0}Thn {1}bln {2}hr",l.thn,l.bln,l.hr)},getStatus:function(m){var l=m("record.REFERENSI"),n=l?(l.STATUS?l.STATUS.DESKRIPSI:""):"";return n}},toFormatNorm:function(n){var m=Ext.String.leftPad(n,8,"0"),l=Ext.String.insert(Ext.String.insert(Ext.String.insert(m,".",2),".",5),".",8);return l},getTglToUmur:function(l,n){var m=Ext.Date.diff(n,l,Ext.Date.DAY);thn=Math.floor(m/365);bln=Math.floor((m%365)/30);hr=Math.floor((m%365)%30);return{thn:thn,bln:bln,hr:hr}}},layout:{type:"vbox",align:"stretch"},config:{hideNorm:false,hideKontak:true},defaults:{style:"font-size: 13px;",margin:"0 0 1 0"},initComponent:function(){var f=this;f.items=[{xtype:"container",flex:1,layout:"hbox",margin:"10 0 2 0",items:[{xtype:"component",style:"font-size: 1.8em; font-weight: bold",margin:"0 10 0 0",bind:{html:"{getFormatNorm}"},hidden:f.hideNorm},{xtype:"button",padding:1,iconCls:"x-fa fa-pencil-square-o",tooltip:"Edit Pasien",ui:"soft-purple",hidden:true,bind:{hidden:"{!formConfig.edit}"},handler:"onEdit"}]},{xtype:"component",style:"font-weight: bold; font-size: 17px",margin:"0 0 3 0",bind:{html:"{getNamaLengkap}"}},{xtype:"component",bind:{html:"{getTempatLahir}, {getTglLahir} / {getUmur}"}},{xtype:"component",bind:{html:'<span class="{getIconSex}"></span>&nbsp;{record.REFERENSI.JENISKELAMIN.DESKRIPSI} / Status. {getStatus}'}},{xtype:"component",cls:"x-color-gray",hidden:f.hideKontak,bind:{data:{KONTAK:"{record.KONTAK}"}},tpl:new Ext.XTemplate('<tpl for="KONTAK">','<span class="{[this.getJenis(values.JENIS)]}">&nbsp;{NOMOR}&nbsp;&nbsp;</span>',"</tpl>",{getJenis:function(e){if(e==3){return"fa fa-mobile"}else{if(e==2){return"fa fa-phone-square"}else{if(e==1){return"fa fa-home"}else{return""}}}}})}];f.callParent(arguments)},load:function(e,o){var s=this,q=s.getViewModel(),p=q.get("store");if(Ext.getClassName(e)=="data.model.Pasien"){q.set("record",e)}else{p.queryParams=e;p.load(function(l,g,f){if(f&&l.length>0){q.set("record",l[0]);if(Ext.isFunction(o)){o(l[0])}}})}},getRecord:function(){return this.getViewModel().get("record")}},0,["pasien-short-detil"],["component","box","container","panel","form","com-form","pasien-short-detil"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"pasien-short-detil":true},["widget.pasien-short-detil"],0,[pasien,"ShortDetil"],0));(Ext.cmd.derive("pasien.ShortDetilController",Ext.app.ViewController,{onEdit:function(){var m=this,l=m.getViewModel().get("record"),n=m.getView();n.openDialog("",true,0,0,{xtype:"pasien-form"},function(f,g){var e=g.down("pasien-form");e.getViewModel().set("hideSimpanCetak",true);e.loadRecord(l);e.on({batal:function(){g.close()}})})}},0,0,0,0,["controller.pasien-short-detil"],0,[pasien,"ShortDetilController"],0));(Ext.cmd.derive("pasien.ViewModel",Ext.app.ViewModel,{data:{filter:{NAMA:"",TANGGAL_LAHIR:"",ALAMAT:""},pasien:undefined},formulas:{getInfoNoRM:function(g){var l=g("pasien.NORM")||0;if(l>0){return this.toFormatNorm(l)}return"[No Rekam Medis]"},getTitle:function(n){var m=n("pasien"),l=n("pasien.NORM")||0;if(l>0){return m.NORM+" - "+m.NAMA}return"Pasien Baru"},getFormatNorm:function(g){var l=g("pasien.NORM")||0;return this.toFormatNorm(l)},getNamaLengkap:function(m){var n=m("pasien.GELAR_DEPAN")||"",l=m("pasien.GELAR_BELAKANG")||"";n=n==""?"":n+". ";l=l==""?"":", "+l;return n+m("pasien.NAMA")+l},getTempatLahir:function(o){var p=o("pasien.TEMPAT_LAHIR"),m=o("pasien.REFERENSI"),n=m?(m.TEMPATLAHIR?m.TEMPATLAHIR.DESKRIPSI:"-"):"-";return Ext.isNumeric(p)?n:p},getTglLahir:function(f){return Ext.Date.format(f("pasien.TANGGAL_LAHIR"),"d F Y")},getUmur:function(g){var l=this.getTglToUmur(new Date(),g("pasien.TANGGAL_LAHIR"));return Ext.util.Format.format("{0}Thn {1}bln {2}hr",l.thn,l.bln,l.hr)},getAgama:function(f){return this.getDeskripsi(f("agamastore"),f("pasien.AGAMA"))},getJenisKelamin:function(n){var l=n("pasien.REFERENSI"),m=l?(l.JENISKELAMIN?l.JENISKELAMIN.DESKRIPSI:""):"";return m},getPendidikan:function(f){return this.getDeskripsi(f("pendidikanstore"),f("pasien.PENDIDIKAN"))},getPekerjaan:function(f){return this.getDeskripsi(f("pekerjaanstore"),f("pasien.PEKERJAAN"))},getStatusPerkawinan:function(f){return this.getDeskripsi(f("statusperkawinanstore"),f("pasien.STATUS_PERKAWINAN"))},getGolonganDarah:function(f){return this.getDeskripsi(f("golongandarahstore"),f("pasien.GOLONGAN_DARAH"))},getKewarganegaraan:function(f){return this.getDeskripsi(f("negarastore"),f("pasien.KEWARGANEGARAAN"))},getIconSex:function(f){return"x-fa fa-"+(f("pasien.JENIS_KELAMIN")==1?"male":"female")},getIconSexOthers:function(f){return"x-fa fa-"+(f("pasien.JENIS_KELAMIN")==1?"mars":"venus")},getStatus:function(m){var l=m("pasien.REFERENSI"),n=l?(l.STATUS?l.STATUS.DESKRIPSI:""):"";return n}},getDeskripsi:function(m,l){var n=m?m.findRecord("ID",l,0,true,false,true):null;if(n==null){return"-"}return n.get("DESKRIPSI")},toFormatNorm:function(n){var m=Ext.String.leftPad(n,8,"0"),l=Ext.String.insert(Ext.String.insert(Ext.String.insert(m,".",2),".",5),".",8);return l},getUmurToTglLahir:function(g){var l=new Date();l.setMonth(0);l.setDate(1);l=Ext.Date.subtract(l,Ext.Date.YEAR,g);return l},getTglToUmur:function(q,s){s=s?s:new Date();var o=Ext.Date.diff(s,q,Ext.Date.YEAR),n=Ext.Date.diff(s,q,Ext.Date.MONTH),p=Ext.Date.getDaysInMonth(s)-s.getDate();n=n-(o*12);if(q.getMonth()==1&&q.getDate()>=28&&s.getDate()>28){n-=1}if(q.getDate()>=s.getDate()){p=q.getDate()-s.getDate()}else{p=p+q.getDate()}return{thn:o,bln:n,hr:p}},stores:{pasienstore:Ext.create("data.store.Pasien",{}),agamastore:{type:"referensi-store",queryParams:{JENIS:1}},jeniskelaminstore:{type:"referensi-store",queryParams:{JENIS:2}},gangguankehamilanstore:{type:"referensi-store",queryParams:{JENIS:47}},pendidikanstore:{type:"referensi-store",queryParams:{JENIS:3}},pekerjaanstore:{type:"referensi-store",queryParams:{JENIS:4}},statusperkawinanstore:{type:"referensi-store",queryParams:{JENIS:5}},golongandarahstore:{type:"referensi-store",queryParams:{JENIS:6}},shdkstore:{type:"referensi-store",queryParams:{JENIS:7}},jeniskontakstore:{type:"referensi-store",queryParams:{JENIS:8}},negarastore:{type:"negara-store"},tempatlahirstore:{type:"tempat-lahir-store"},propinsistore:{type:"wilayah-store",queryParams:{JENIS:1},autoLoad:true},kabupatenstore:{type:"wilayah-store",queryParams:{JENIS:2}},kecamatanstore:{type:"wilayah-store",queryParams:{JENIS:3}},kelurahanstore:{type:"wilayah-store",queryParams:{JENIS:4}},jeniskipstore:{type:"referensi-store",queryParams:{JENIS:9}},jeniskapstore:{type:"referensi-store",queryParams:{JENIS:10}},kipstore:{type:"kip-store"},kapstore:{type:"kap-store"},keluargastore:{type:"keluarga-pasien-store"},kontakpasienstore:{type:"kontak-pasien-store"}}},0,0,0,0,["viewmodel.pasienmodel"],0,[pasien,"ViewModel"],0));(Ext.cmd.derive("pasien.Workspace",com.Form,{controller:"pasien-workspace",viewModel:{type:"pasienmodel",data:{record:undefined,pendaftaran:undefined,xpriv:undefined}},layout:"card",formSelected:undefined,initComponent:function(){var l=this,g=l.getViewModel().get("record");l.items=[{xtype:"pasien-dashboard",reference:"pasiendashboard",viewModel:{data:{pasien:g}}}];com.Form.prototype.initComponent.apply(this,arguments)},getIndexItem:function(l){var m=this,n=-1;m.items.eachKey(function(e){if(e.indexOf(l)>-1){n=m.items.indexOfKey(e)}});return n},createPasienForm:function(){var f=this;if(Ext.getClassName(f.items.getAt(0))!="pasien.Form"){if(f.formSelected){f.remove(f.formSelected,true)}f.formSelected=f.add({xtype:"pasien-form",scrollable:true,listeners:{simpansuccess:"onSimpanPasien",batal:"onBatalForm"}})}},createPendaftaranForm:function(){var f=this;if(Ext.getClassName(f.items.getAt(3))!="pendaftaran.Form"){if(f.formSelected){f.remove(f.formSelected,true)}f.formSelected=f.add({xtype:"pendaftaran-form",scrollable:true,listeners:{simpansuccess:"onSimpanPendaftaran",cetakbukti:"onCetakBukti",cetakbarcode:"onCetakBarcodePendaftaran",cetaktracert:"onCetakTracert",cetakmr1:"onCetakMR1",cetaksep:"onCetakSep",batal:"onBatalForm"}});f.formSelected=f.down("pendaftaran-form");f.formSelected.loadRecord({})}},listeners:{activate:"onActivate",deactivate:"onDeactivate"}},0,["pasien-workspace"],["component","box","container","panel","form","com-form","pasien-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"pasien-workspace":true},["widget.pasien-workspace"],0,[pasien,"Workspace"],0));(Ext.cmd.derive("pasien.WorkspaceController",Ext.app.ViewController,{initViewModel:function(){var f=this.getViewModel();f.get("agamastore").initStore("agama");f.get("jeniskelaminstore").initStore("jeniskelamin");f.get("pendidikanstore").initStore("pendidikan");f.get("pekerjaanstore").initStore("pekerjaan");f.get("statusperkawinanstore").initStore("statusperkawinan");f.get("golongandarahstore").initStore("golongandarah");f.get("shdkstore").initStore("shdk");f.get("jeniskontakstore").initStore("jeniskontak");f.get("negarastore").initStore("negara");f.get("tempatlahirstore").initStore("tempatlahir");f.get("jeniskipstore").initStore("jeniskip");f.get("jeniskapstore").initStore("jeniskap")},init:function(){var q=this,s=q.getViewModel(),t=q.getView(),u=s.get("record"),p="pasien-dashboard",o=SIMpel.app.getApplication();s.set("title","Pasien Baru");if(u==null){p="pasien-form"}else{if(Ext.isNumeric(u.get("NORM"))){s.set("title",u.get("NORM")+" - "+u.get("NAMA"))}else{p="pasien-form"}}s.set("xpriv",o.xpriv);if(p=="pasien-form"){t.createPasienForm()}t.getLayout().setActiveItem(t.getIndexItem(p));if(p=="pasien-form"){t.getLayout().getActiveItem().loadRecord(u)}},onBatalForm:function(){this.getView().getLayout().setActiveItem(this.getView().getIndexItem("pasien-dashboard"))},onSimpanPasien:function(s,z,y,A,t){var x=this,v=x.getView(),u=v.ownerCt.getController(),w="x-fa fa-"+(z.get("JENIS_KELAMIN")==1?"male":"female");if(!A){u.createWorkspace(z,w,true,"pasien.Workspace","psn-"+z.getId(),u.toFormatNorm(z.getId()))}else{v.getLayout().setActiveItem(v.getIndexItem("pasien-dashboard"))}if(t){x.onCetakKartu(z);new Ext.util.DelayedTask(function(){x.onCetakBarcodePasien(z);if(!A&&y){v.ownerCt.remove(v)}}).delay(2000)}else{if(!A&&y){v.ownerCt.remove(v)}}},onCetakKartu:function(g){var l=this.getView();l.cetak({NAME:"pasien.CetakKartu",TYPE:"Word",EXT:"docx",PARAMETER:{PNORM:g.get("NORM")},REQUEST_FOR_PRINT:true,PRINT_NAME:"CetakKartu"})},onCetakBarcodePasien:function(g){var l=this.getView();l.cetak({NAME:"pasien.CetakBarcodeRM",TYPE:"Word",EXT:"docx",PARAMETER:{PNORM:g.get("NORM")},REQUEST_FOR_PRINT:true,PRINT_NAME:"CetakBarcodePasien"})},onSimpanPendaftaran:function(q,u,s){var o=this,t=o.getView(),p=o.getViewModel();p.set("pendaftaran",u);t.getLayout().setActiveItem(t.getIndexItem("pasien-dashboard"))},onCetakBukti:function(o){var m=this,p=m.getView(),n=m.getViewModel(),o=Ext.getClassName(o)=="data.model.Pendaftaran"?o:n.get("pendaftaran");p.cetak({NAME:"pendaftaran.CetakBuktiRegistrasi",TYPE:"Word",EXT:"docx",PARAMETER:{PNOPEN:o.get("NOMOR")},REQUEST_FOR_PRINT:true,PRINT_NAME:"CetakBukti"})},onCetakBarcodePendaftaran:function(s){var p=this,t=p.getView();if(s){var q=s.get("TUJUAN"),o=q?q.REFERENSI.RUANGAN:null,u=o?o.JENIS_KUNJUNGAN:1;if(u==2||u==3){t.cetak({NAME:"pendaftaran."+t.kode+"CetakBarcodePendaftaran",TYPE:"Word",EXT:"docx",PARAMETER:{PNOPEN:s.get("NOMOR")},REQUEST_FOR_PRINT:true,PRINT_NAME:"CetakBarcodePendaftaran"})}}},onCetakTracert:function(t){var x=this,w=x.getView();if(t){var y=t.get("TUJUAN"),B=y?y.REFERENSI.RUANGAN:null,v=B?B.JENIS_KUNJUNGAN:1,z=t.get("REFERENSI"),C=Ext.Date.format(Ext.Date.parse(z.SYSDATE,"Y-m-d H:i:s"),"Y-m-d"),u=z.PASIEN,A=Ext.Date.format(Ext.Date.parse(u.TANGGAL,"Y-m-d H:i:s"),"Y-m-d");if(v==1&&(C>A)){w.cetak({NAME:"pendaftaran.CetakTracertPasien",TYPE:"Word",EXT:"docx",PARAMETER:{PNOPEN:t.get("NOMOR")},REQUEST_FOR_PRINT:true,PRINT_NAME:"CetakTracert"})}}},onCetakMR1:function(F){var x=this,w=x.getView();if(F){var y=F.get("TUJUAN"),C=y?y.REFERENSI.RUANGAN:null,v=C?C.JENIS_KUNJUNGAN:1,z=F.get("REFERENSI"),E=Ext.Date.format(Ext.Date.parse(z.SYSDATE,"Y-m-d H:i:s"),"Y-m-d"),G=z.PASIEN,A=Ext.Date.format(Ext.Date.parse(G.TANGGAL,"Y-m-d H:i:s"),"Y-m-d"),B={NAME:"mr.",TYPE:"Word",EXT:"docx",PARAMETER:{PNOPEN:F.get("NOMOR"),CETAK_HEADER:1},REQUEST_FOR_PRINT:true,PRINT_NAME:"CetakMR"},D=(v==1||v==14?"CetakMR1RawatJalan":(v==2?"CetakMR2RawatDarurat":w.kode+"CetakMR1RawatInap"));if(D==""){return}B.NAME=B.NAME+D;w.cetak(B);if(v==3){B.NAME="mr."+w.kode+"CetakMR1aRawatInap";w.cetak(B)}}},onCetakSep:function(p){var o=this,q=o.getView();if(p){var s=p.get("PENJAMIN");if(s){var n=q.app.xitr("ID",1);if(n){if(n.REF==s.JENIS){q.cetak({NAME:"bpjs.CetakSEP",TYPE:"Word",EXT:"docx",PARAMETER:{PSEP:s.NOMOR,CETAK_HEADER:1},REQUEST_FOR_PRINT:true,PRINT_NAME:"CetakSEP"})}}}}},onCetakGelang:function(s){var p=this,t=p.getView();if(s){var q=s.get("TUJUAN"),o=q?q.REFERENSI.RUANGAN:null,u=o?o.JENIS_KUNJUNGAN:1;if(u==2||u==3){_type="Pdf",_ext="pdf",_print=false,_title="Cetak Gelang",option={NAME:"pendaftaran."+t.kode+"CetakGelang",TYPE:_type,EXT:_ext,PARAMETER:{PNOPEN:s.get("NOMOR")},REQUEST_FOR_PRINT:_print,PRINT_NAME:"CetakGelang"},option.NAME=option.NAME;option.TYPE=_type;option.EXT=_ext;option.REQUEST_FOR_PRINT=_print;t.cetak(option,function(e){t.printPreview(_title,e)})}}},onActivate:function(){var f=this.lookupReference("pasiendashboard");if(f){f.fireEvent("activate")}},onDeactivate:function(){var f=this.lookupReference("pasiendashboard");if(f){f.fireEvent("deactivate")}}},0,0,0,0,["controller.pasien-workspace"],0,[pasien,"WorkspaceController"],0));(Ext.cmd.derive("pasien.tagihan.List",Ext.grid.Panel,{controller:"tagihan-pasien",viewModel:{stores:{store:{type:"tagihan-store"}}},title:"Tagihan Pasien",hideHeaders:true,waitRefresh:true,bind:{store:"{store}"},columns:[{xtype:"templatecolumn",flex:2,tpl:new Ext.XTemplate('<div style="font-weight: bold; font-size: 12px; white-space:normal !important;">{[this.numberFormat(values.TOTAL)]} </div>','<div style="font-size: 12px; white-space:normal !important;">{[this.tanggalFormat(values.TANGGAL)]}</div>',{getFormatNorm:function(l){var m=Ext.String.leftPad(l,8,"0"),n=Ext.String.insert(Ext.String.insert(Ext.String.insert(m,".",2),".",5),".",8);return n},tanggalFormat:function(l){var g=Ext.isDate(l)?l:Ext.Date.parse(l,"Y-m-d H:i:s");return Ext.Date.format(g,"d-m-Y H:i:s")},numberFormat:function(f){return Ext.util.Format.number(f,"0,000")}})},{xtype:"widgetcolumn",text:"Status",flex:1,align:"right",widget:{xtype:"fieldcontainer",defaults:{padding:2},items:[{xtype:"button",text:"View",action:0,margin:"0 1 0 0",handler:"onView"}]}}],loadStore:function(l){var g=this.getViewModel().get("store");console.log(l);if(g){g.removeAll();g.queryParams=l;this.waitRefresh=true;g.load()}},setListConfig:function(m){var l=this,n=l.getViewModel();_config=n.get("listConfig");m=Ext.apply(_config,m);n.set("listConfig",m);n.notify()},refresh:function(){var f=this.getViewModel().get("store");if(!this.waitRefresh){if(f){f.reload()}}}},0,["tagihan-pasien"],["component","box","container","panel","tablepanel","gridpanel","grid","tagihan-pasien"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"tagihan-pasien":true},["widget.tagihan-pasien"],0,[pasien.tagihan,"List"],0));(Ext.cmd.derive("pasien.tagihan.ListController",Ext.app.ViewController,{init:function(){var l=this,g=l.getStore("store");if(g){g.on("load",function(e,f){if(f.length==0){g.removeAll()}l.getView().waitRefresh=false})}},onView:function(g){var l=this;console.log(l)}},0,0,0,0,["controller.tagihan-pasien"],0,[pasien.tagihan,"ListController"],0));(Ext.cmd.derive("pasien.widget.Desc",Ext.container.Container,{layout:{type:"vbox",align:"stretch"},cls:"x-br-top",defaults:{style:"font-size: 13px;",margin:"0 0 1 0"},items:[{xtype:"component",style:"font-weight: bold; font-size: 17px",margin:"0 0 3 0",bind:{html:"{getNamaLengkap}"}},{xtype:"component",bind:{html:"{getTempatLahir}, {getTglLahir} / {getUmur}"}},{xtype:"component",bind:{html:'<span class="{getIconSexOthers}"></span>&nbsp;{getJenisKelamin} / Status. {getStatus}'}},{xtype:"component",cls:"x-color-gray",bind:{data:{KONTAK:"{pasien.KONTAK}"}},tpl:new Ext.XTemplate('<tpl for="KONTAK">','<span class="{[this.getJenis(values.JENIS)]}">&nbsp;{NOMOR}&nbsp;&nbsp;</span>',"</tpl>",{getJenis:function(f){if(f==3){return"fa fa-mobile"}else{if(f==2){return"fa fa-phone-square"}else{if(f==1){return"fa fa-home"}else{return""}}}}})}]},0,["pasien-widget-desc"],["component","box","container","pasien-widget-desc"],{component:true,box:true,container:true,"pasien-widget-desc":true},["widget.pasien-widget-desc"],0,[pasien.widget,"Desc"],0));(Ext.cmd.derive("pasien.widget.Info",Ext.form.Panel,{viewModel:{type:"pasienmodel",data:{viewConfig:{photo:false,detil:false,edit:false,kartu:false,barcode:false}}},cls:"shadow-panel",border:true,layout:{type:"vbox",align:"stretch"},header:{bind:{iconCls:"{getIconSex}"},title:"Pasien Info",margin:0,padding:"5 10 5 10",cls:"x-color-w",layout:{type:"hbox",align:"middle"},items:[{xtype:"component",flex:1},{xtype:"button",iconCls:"x-fa fa-camera",tooltip:"Ambil Photo",ui:"soft-black",margin:"0 0 0 1",handler:"onTakePhone",hidden:true,bind:{hidden:"{!viewConfig.photo}"}},{xtype:"button",iconCls:"x-fa fa-list",tooltip:"Tampilkan Detil Pasien",ui:"soft-blue",margin:"0 0 0 1",handler:"onDetil",hidden:true,bind:{hidden:"{!viewConfig.detil}"}},{xtype:"button",iconCls:"x-fa fa-pencil-square-o",tooltip:"Edit Pasien",ui:"soft-purple",margin:"0 0 0 1",handler:"onEdit",hidden:true,bind:{hidden:"{!viewConfig.edit}"}},{xtype:"button",iconCls:"x-fa fa-print",tooltip:"Cetak Kartu Pasien",ui:"soft-saphire",margin:"0 0 0 1",handler:"onCetakKartu",hidden:true,bind:{hidden:"{!viewConfig.kartu}"}},{xtype:"button",iconCls:"x-fa fa-barcode",tooltip:"Cetak Barcode Pasien",ui:"soft-cyan",margin:"0 0 0 1",handler:"onCetakBarcode",hidden:true,bind:{hidden:"{!viewConfig.barcode}"}}]},bodyPadding:5,items:[{xtype:"fieldcontainer",flex:1,margin:"0 0 15 0",layout:{type:"hbox",align:"stretch"},items:[{xtype:"image",cls:"photo-image",width:120,height:130,bind:{src:webservice.location+"general/photopasien?NORM={pasien.NORM}&JENIS_KELAMIN={pasien.JENIS_KELAMIN}"},alt:"No Photo"},{xtype:"component",flex:1,style:"text-align: right; padding-top: 10px; font-size: 2em; font-weight: bold",bind:{html:"{getFormatNorm}"}}]},{xtype:"pasien-widget-desc",flex:1}],refresh:function(){},setViewConfig:function(m){var l=this,n=l.getViewModel();_config=n.get("viewConfig");m=Ext.apply(_config,m);n.set("viewConfig",m);n.notify()}},0,["pasien-widget-info"],["component","box","container","panel","form","pasien-widget-info"],{component:true,box:true,container:true,panel:true,form:true,"pasien-widget-info":true},["widget.pasien-widget-info"],0,[pasien.widget,"Info"],0));(Ext.cmd.derive("plugins.bpjs.monitoring.histori.pelayanan.Model",data.model.Model,{serviceName:"plugins/bpjs/monitoringHistoriPelayanan",fields:[{name:"noKartu",type:"string"},{name:"namaPeserta",type:"string"},{name:"noSep",type:"string"},{name:"poli",type:"string"},{name:"ppkPelayanan",type:"string"},{name:"tglPlgSep",type:"date",dateFormat:"Y-m-d"},{name:"tglSep",type:"date",dateFormat:"Y-m-d"},{name:"kelasRawat",type:"string"},{name:"jnsPelayanan",type:"string"},{name:"diagnosa",type:"string"}]},0,0,0,0,0,0,[plugins.bpjs.monitoring.histori.pelayanan,"Model"],0));(Ext.cmd.derive("plugins.bpjs.monitoring.histori.pelayanan.Store",data.store.Store,{model:"plugins.bpjs.monitoring.histori.pelayanan.Model"},0,0,0,0,["store.plugins-bpjs-monitoring-histori-pelayanan-store"],0,[plugins.bpjs.monitoring.histori.pelayanan,"Store"],0));(Ext.cmd.derive("plugins.bpjs.monitoring.klaim.Model",data.model.Model,{serviceName:"plugins/bpjs/monitoringKlaim",timeout:120000,fields:[{name:"Inacbg"},{name:"biaya"},{name:"kelasRawat",type:"string"},{name:"noFPK",type:"string"},{name:"noSEP",type:"string"},{name:"peserta"},{name:"poli",type:"string"},{name:"status",type:"string"},{name:"tglPulang",type:"date",dateFormat:"Y-m-d"},{name:"tglSep",type:"date",dateFormat:"Y-m-d"}]},0,0,0,0,0,0,[plugins.bpjs.monitoring.klaim,"Model"],0));(Ext.cmd.derive("plugins.bpjs.monitoring.klaim.Store",data.store.Store,{model:"plugins.bpjs.monitoring.klaim.Model"},0,0,0,0,["store.plugins-bpjs-monitoring-klaim-store"],0,[plugins.bpjs.monitoring.klaim,"Store"],0));(Ext.cmd.derive("plugins.bpjs.monitoring.klaim.jasaraharja.Model",data.model.Model,{serviceName:"plugins/bpjs/monitoringKlaimJaminanJasaRaharja",fields:[{name:"sep"},{name:"jasaraharja"}]},0,0,0,0,0,0,[plugins.bpjs.monitoring.klaim.jasaraharja,"Model"],0));(Ext.cmd.derive("plugins.bpjs.monitoring.klaim.jasaraharja.Store",data.store.Store,{model:"plugins.bpjs.monitoring.klaim.jasaraharja.Model"},0,0,0,0,["store.plugins-bpjs-monitoring-klaim-jasaraharja-store"],0,[plugins.bpjs.monitoring.klaim.jasaraharja,"Store"],0));(Ext.cmd.derive("plugins.bpjs.monitoring.kunjungan.Model",data.model.Model,{serviceName:"plugins/bpjs/monitoringKunjungan",fields:[{name:"diagnosa",type:"string"},{name:"jnsPelayanan",type:"string"},{name:"kelasRawat",type:"string"},{name:"nama",type:"string"},{name:"noKartu",type:"string"},{name:"noSep",type:"string"},{name:"poli",type:"string"},{name:"tglPlgSep",type:"date",dateFormat:"Y-m-d"},{name:"tglSep",type:"date",dateFormat:"Y-m-d"}]},0,0,0,0,0,0,[plugins.bpjs.monitoring.kunjungan,"Model"],0));(Ext.cmd.derive("plugins.bpjs.monitoring.kunjungan.Store",data.store.Store,{model:"plugins.bpjs.monitoring.kunjungan.Model"},0,0,0,0,["store.plugins-bpjs-monitoring-kunjungan-store"],0,[plugins.bpjs.monitoring.kunjungan,"Store"],0));(Ext.cmd.derive("plugins.bpjs.referensi.carakeluar.Model",data.model.Model,{serviceName:"plugins/bpjs/caraKeluar",fields:[{name:"kode",type:"string"},{name:"nama",type:"string"}]},0,0,0,0,0,0,[plugins.bpjs.referensi.carakeluar,"Model"],0));(Ext.cmd.derive("plugins.bpjs.referensi.carakeluar.Store",data.store.Store,{model:"plugins.bpjs.referensi.carakeluar.Model"},0,0,0,0,["store.bpjs-referensi-carakeluar-store"],0,[plugins.bpjs.referensi.carakeluar,"Store"],0));(Ext.cmd.derive("plugins.bpjs.referensi.dokter.Model",data.model.Model,{serviceName:"plugins/bpjs/dokter",fields:[{name:"kode",type:"string"},{name:"nama",type:"string"}]},0,0,0,0,0,0,[plugins.bpjs.referensi.dokter,"Model"],0));(Ext.cmd.derive("plugins.bpjs.referensi.dokter.Store",data.store.Store,{model:"plugins.bpjs.referensi.dokter.Model"},0,0,0,0,["store.bpjs-referensi-dokter-store"],0,[plugins.bpjs.referensi.dokter,"Store"],0));(Ext.cmd.derive("plugins.bpjs.referensi.dpjp.Model",data.model.Model,{serviceName:"plugins/bpjs/dpjp",fields:[{name:"kode",type:"string"},{name:"nama",type:"string"}]},0,0,0,0,0,0,[plugins.bpjs.referensi.dpjp,"Model"],0));(Ext.cmd.derive("plugins.bpjs.referensi.dpjp.Store",data.store.Store,{model:"plugins.bpjs.referensi.dpjp.Model"},0,0,0,0,["store.bpjs-referensi-dpjp-store"],0,[plugins.bpjs.referensi.dpjp,"Store"],0));(Ext.cmd.derive("plugins.bpjs.referensi.faskes.Model",data.model.Model,{serviceName:"plugins/bpjs/faskes",fields:[{name:"kdCabang",type:"string"},{name:"nmCabang",type:"string"},{name:"kdProvider",type:"string"},{name:"nmProvider",type:"string"}]},0,0,0,0,0,0,[plugins.bpjs.referensi.faskes,"Model"],0));(Ext.cmd.derive("plugins.bpjs.referensi.faskes.Store",data.store.Store,{model:"plugins.bpjs.referensi.faskes.Model"},0,0,0,0,["store.bpjs-referensi-faskes-store"],0,[plugins.bpjs.referensi.faskes,"Store"],0));(Ext.cmd.derive("plugins.bpjs.referensi.kelasrawat.Model",data.model.Model,{serviceName:"plugins/bpjs/kelasRawat",fields:[{name:"kode",type:"string"},{name:"nama",type:"string"}]},0,0,0,0,0,0,[plugins.bpjs.referensi.kelasrawat,"Model"],0));(Ext.cmd.derive("plugins.bpjs.referensi.kelasrawat.Store",data.store.Store,{model:"plugins.bpjs.referensi.kelasrawat.Model"},0,0,0,0,["store.bpjs-referensi-kelasrawat-store"],0,[plugins.bpjs.referensi.kelasrawat,"Store"],0));(Ext.cmd.derive("plugins.bpjs.referensi.pascapulang.Model",data.model.Model,{serviceName:"plugins/bpjs/pascaPulang",fields:[{name:"kode",type:"string"},{name:"nama",type:"string"}]},0,0,0,0,0,0,[plugins.bpjs.referensi.pascapulang,"Model"],0));(Ext.cmd.derive("plugins.bpjs.referensi.pascapulang.Store",data.store.Store,{model:"plugins.bpjs.referensi.pascapulang.Model"},0,0,0,0,["store.bpjs-referensi-pascapulang-store"],0,[plugins.bpjs.referensi.pascapulang,"Store"],0));(Ext.cmd.derive("plugins.bpjs.referensi.poli.Model",data.model.Model,{serviceName:"plugins/bpjs/poli",fields:[{name:"kdPoli",type:"string"},{name:"nmPoli",type:"string"}]},0,0,0,0,0,0,[plugins.bpjs.referensi.poli,"Model"],0));(Ext.cmd.derive("plugins.bpjs.referensi.poli.Store",data.store.Store,{model:"plugins.bpjs.referensi.poli.Model"},0,0,0,0,["store.bpjs-referensi-poli-store"],0,[plugins.bpjs.referensi.poli,"Store"],0));(Ext.cmd.derive("plugins.bpjs.referensi.ruangrawat.Model",data.model.Model,{serviceName:"plugins/bpjs/ruangRawat",fields:[{name:"kode",type:"string"},{name:"nama",type:"string"}]},0,0,0,0,0,0,[plugins.bpjs.referensi.ruangrawat,"Model"],0));(Ext.cmd.derive("plugins.bpjs.referensi.ruangrawat.Store",data.store.Store,{model:"plugins.bpjs.referensi.ruangrawat.Model"},0,0,0,0,["store.bpjs-referensi-ruangrawat-store"],0,[plugins.bpjs.referensi.ruangrawat,"Store"],0));(Ext.cmd.derive("plugins.bpjs.referensi.spesialistik.Model",data.model.Model,{serviceName:"plugins/bpjs/spesialistik",fields:[{name:"kode",type:"string"},{name:"nama",type:"string"}]},0,0,0,0,0,0,[plugins.bpjs.referensi.spesialistik,"Model"],0));(Ext.cmd.derive("plugins.bpjs.referensi.spesialistik.Store",data.store.Store,{model:"plugins.bpjs.referensi.spesialistik.Model"},0,0,0,0,["store.bpjs-referensi-spesialistik-store"],0,[plugins.bpjs.referensi.spesialistik,"Store"],0));(Ext.cmd.derive("plugins.bpjs.referensi.wilayah.Model",data.model.Model,{serviceName:"plugins/bpjs/wilayah",fields:[{name:"kode",type:"string"},{name:"nama",type:"string"}]},0,0,0,0,0,0,[plugins.bpjs.referensi.wilayah,"Model"],0));(Ext.cmd.derive("plugins.bpjs.referensi.wilayah.Store",data.store.Store,{model:"plugins.bpjs.referensi.wilayah.Model"},0,0,0,0,["store.bpjs-referensi-wilayah-store"],0,[plugins.bpjs.referensi.wilayah,"Store"],0));(Ext.cmd.derive("plugins.bpjs.rujukan.Model",data.model.Model,{serviceName:"plugins/bpjs/listRujukan",fields:[{name:"noKunjungan",type:"string"},{name:"tglKunjungan",type:"date",dateFormat:"Y-m-d"},{name:"keluhan",type:"string"},{name:"diagnosa"},{name:"pelayanan"},{name:"peserta"},{name:"poliRujukan"},{name:"provPerujuk"}]},0,0,0,0,0,0,[plugins.bpjs.rujukan,"Model"],0));(Ext.cmd.derive("plugins.bpjs.rujukan.Store",data.store.Store,{model:"plugins.bpjs.rujukan.Model"},0,0,0,0,["store.plugins-bpjs-rujukan-store"],0,[plugins.bpjs.rujukan,"Store"],0));(Ext.cmd.derive("plugins.bpjs.sep.pengajuan.Model",data.model.Model,{serviceName:"plugins/bpjs/daftarPengajuan",fields:[{name:"noKartu",type:"string"},{name:"tglSep",type:"date",dateFormat:"Y-m-d"},{name:"jnsPelayanan",type:"int"},{name:"keterangan",type:"string"},{name:"user",type:"string"},{name:"tgl",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"tglAprove",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"userAprove",type:"string"},{name:"status",type:"int"}]},0,0,0,0,0,0,[plugins.bpjs.sep.pengajuan,"Model"],0));(Ext.cmd.derive("plugins.bpjs.sep.pengajuan.Store",data.store.Store,{model:"plugins.bpjs.sep.pengajuan.Model"},0,0,0,0,["store.plugins-bpjs-sep-pengajuan-store"],0,[plugins.bpjs.sep.pengajuan,"Store"],0));(Ext.cmd.derive("plugins.inacbg.tipe.Model",data.model.Model,{serviceName:"inacbgservice/tipe",fields:[{name:"ID",type:"int"},{name:"VERSION",type:"string"},{name:"NAMA",type:"string"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[plugins.inacbg.tipe,"Model"],0));(Ext.cmd.derive("plugins.inacbg.tipe.Store",data.store.Store,{model:"plugins.inacbg.tipe.Model"},0,0,0,0,["store.inacbg-tipe-store"],0,[plugins.inacbg.tipe,"Store"],0));(Ext.cmd.derive("plugins.kemkes.sitt.Model",data.model.Model,{serviceName:"plugins/kemkes/sitt",fields:[{name:"id",type:"int"},{name:"nourut_pasien",type:"int"},{name:"id_tb_03",type:"string"},{name:"id_periode_laporan",type:"int"},{name:"tahun_buat_laporan",type:"int"},{name:"kd_wasor",type:"string"},{name:"noregkab",type:"string"},{name:"kd_pasien",type:"string"},{name:"nik",type:"string"},{name:"jenis_kelamin",type:"int"},{name:"alamat_lengkap",type:"string"},{name:"id_propinsi",type:"string"},{name:"kd_kabupaten",type:"string"},{name:"id_kecamatan",type:"string"},{name:"id_kelurahan",type:"string"},{name:"kd_fasyankes",type:"string"},{name:"nama_rujukan",type:"int"},{name:"sebutkan1",type:"string"},{name:"tipe_diagnosis",type:"int"},{name:"klasifikasi_lokasi_anatomi",type:"int"},{name:"klasifikasi_riwayat_pengobatan",type:"int"},{name:"klasifikasi_status_hiv",type:"int"},{name:"total_skoring_anak",type:"int"},{name:"konfirmasiSkoring5",type:"int"},{name:"konfirmasiSkoring6",type:"int"},{name:"tanggal_mulai_pengobatan",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"paduan_oat",type:"int"},{name:"sumber_obat",type:"int"},{name:"sebutkan",type:"string"},{name:"sebelum_pengobatan_hasil_mikroskopis",type:"int"},{name:"sebelum_pengobatan_hasil_tes_cepat",type:"int"},{name:"sebelum_pengobatan_hasil_biakan",type:"int"},{name:"noreglab_bulan_2",type:"string"},{name:"hasil_mikroskopis_bulan_2",type:"int"},{name:"noreglab_bulan_3",type:"string"},{name:"hasil_mikroskopis_bulan_3",type:"int"},{name:"noreglab_bulan_5",type:"string"},{name:"hasil_mikroskopis_bulan_5",type:"int"},{name:"akhir_pengobatan_noreglab",type:"string"},{name:"akhir_pengobatan_hasil_mikroskopis",type:"int"},{name:"tanggal_buat_laporan",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"tanggal_updated",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"oleh",type:"int"},{name:"kirim",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[plugins.kemkes.sitt,"Model"],0));(Ext.cmd.derive("plugins.kemkes.sitt.Store",data.store.Store,{model:"plugins.kemkes.sitt.Model"},0,0,0,0,["store.plugins-kemkes-sitt-store"],0,[plugins.kemkes.sitt,"Store"],0));(Ext.cmd.derive("plugins.BaseService",Ext.Base,{scope:this,animateTarget:null,showError:true,request:function(q,s,o,n){var p=this;Ext.Ajax.request({url:webservice.location+"plugins/"+q,method:s,jsonData:o,success:function(e,f){if(Ext.isFunction(n)){n(true,Ext.JSON.decode(e.responseText),f)}},failure:function(g,l){if(p.showError){try{var f=Ext.JSON.decode(g.responseText),m=f.detail?(Ext.isObject(f.detail)?Ext.JSON.encode(f.detail):f.detail):"Koneksi Gagal",u=Ext.create("Ext.window.MessageBox",{ui:"window-red",title:g.status+" - "+g.statusText,header:{padding:5}});u.show({msg:m,buttons:Ext.MessageBox.OK,animateTarget:p.animateTarget,scope:p.scope,icon:Ext.Msg.ERROR})}catch(e){var u=Ext.create("Ext.window.MessageBox",{ui:"window-red",title:"Error",header:{padding:5}});u.show({msg:"Koneksi Gagal",buttons:Ext.MessageBox.OK,animateTarget:p.animateTarget,scope:p.scope,icon:Ext.Msg.ERROR})}}if(Ext.isFunction(n)){n(false,g,l)}}})},enabledShowError:function(f){this.showError=f}},0,["baseservice"],["baseservice"],{baseservice:true},["widget.baseservice"],0,[plugins,"BaseService"],0));(Ext.cmd.derive("plugins.bpjs.Service",Ext.Base,{scope:this,animateTarget:null,showError:true,privates:{request:function(s,o,q,e){var p=this;Ext.Ajax.request({url:webservice.location+"plugins/"+s,method:o,jsonData:q,success:function(g,f){if(Ext.isFunction(e)){e(true,Ext.JSON.decode(g.responseText),f)}},failure:function(l,m){if(p.showError){try{var g=Ext.JSON.decode(l.responseText),n=g.detail?(Ext.isObject(g.detail)?Ext.JSON.encode(g.detail):g.detail):"Koneksi Gagal",v=Ext.create("Ext.window.MessageBox",{ui:"window-red",title:l.status+" - "+l.statusText,header:{padding:5}});v.show({msg:n,buttons:Ext.MessageBox.OK,animateTarget:p.animateTarget,scope:p.scope,icon:Ext.Msg.ERROR})}catch(f){var v=Ext.create("Ext.window.MessageBox",{ui:"window-red",title:"Error",header:{padding:5}});v.show({msg:"Koneksi Gagal",buttons:Ext.MessageBox.OK,animateTarget:p.animateTarget,scope:p.scope,icon:Ext.Msg.ERROR})}}if(Ext.isFunction(e)){e(false,l,m)}}})}},enabledShowError:function(f){this.showError=f},getPesertaByNoKartu:function(g,l){this.request("bpjs/"+g.nomor+"?tglSEP="+g.tglSEP,"GET","",l)},getPersertaByNIK:function(g,l){this.request("bpjs/nik/"+g.nomor+"?tglSEP="+g.tglSEP,"GET","",l)},buatSEP:function(g,l){this.request("bpjs","POST",g,l)},updateSEP:function(g,l){this.request("bpjs/updateSEP","POST",g,l)},cekSEP:function(g,l){this.request("bpjs/cekSEP/"+g,"GET","",l)},storeNoTransaksiDiKunjungan:function(m,o,n){var p={noSEP:m,noTrans:o};this.request("bpjs/mappingDataTransaksi","POST",p,n)},updateTanggalPulang:function(l,g){this.request("bpjs/updateTanggalPulang","POST",l,g)},batalkanSEP:function(n,l){var m={noSEP:n.nomor,user:n.user};this.request("bpjs/batalkanSEP","POST",m,l)},pengajuanSEP:function(l,g){this.request("bpjs/pengajuanSEP","POST",l,g)},aprovalPengajuanSEP:function(l,g){this.request("bpjs/aprovalPengajuanSEP","POST",l,g)},batalPengajuanSEP:function(l,g){this.request("bpjs/batalPengajuanSEP","POST",l,g)},kunjunganPeserta:function(n,l){var m={noSEP:n};this.request("bpjs/kunjunganPeserta","POST",m,l)},monitoringVerifikasiKlaim:function(l,g){this.request("bpjs/monitoringVerifikasiKlaim","POST",l,g)},riwayatPelayananPeserta:function(n,l){var m={noKartu:n};this.request("bpjs/riwayatPelayananPeserta","POST",m,l)},inacbg:function(n,l){var m={noSEP:n};this.request("bpjs/inacbg","POST",m,l)},cariRujukanDgnNoRujukan:function(l,g){this.request("bpjs/cariRujukanDgnNoRujukan/"+l,"GET","",g)},cariRujukanDgnNoKartuBPJS:function(l,g){this.request("bpjs/cariRujukanDgnNoKartuBPJS/"+l,"GET","",g)},buatRujukan:function(l,g){this.request("bpjs/insertRujukan","POST",l,g)},updateRujukan:function(l,g){this.request("bpjs/updateRujukan","POST",l,g)},deleteRujukan:function(l,g){this.request("bpjs/deleteRujukan","POST",l,g)},simpanRujukan:function(l,g){this.request("bpjs/simpanRujukan","POST",l,g)},diagnosa:function(l,g){this.request("bpjs/diagnosa?query="+l,"GET","",g)},procedure:function(l,g){this.request("bpjs/procedure?query="+l,"GET","",g)}},0,["bpjservice"],["bpjservice"],{bpjservice:true},["widget.bpjservice"],0,[plugins.bpjs,"Service"],0));(Ext.cmd.derive("plugins.bpjs.Workspace",com.Tab,{controller:"workspace-bpjs",initComponent:function(){var f=this;f.items=[{title:"Referensi",xtype:"workspace-bpjs-referensi"},{title:"Peserta",xtype:"form-bpjs-peserta"},{title:"SEP",xtype:"workspace-bpjs-sep"},{title:"Rujukan",xtype:"workspace-bpjs-rujukan"},{title:"Monitoring",xtype:"workspace-bpjs-monitoring"}];com.Tab.prototype.initComponent.apply(this,arguments)},load:function(){var f=this.getActiveTab();if(f){if(f.load){f.load({})}}},listeners:{tabchange:"onTabChange"}},0,["workspace-bpjs"],["component","box","container","panel","tabpanel","com-tab","workspace-bpjs"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"workspace-bpjs":true},["widget.workspace-bpjs"],0,[plugins.bpjs,"Workspace"],0));(Ext.cmd.derive("plugins.bpjs.WorkspaceController",Ext.app.ViewController,{onTabChange:function(g,l){if(l.load){l.load({})}}},0,0,0,0,["controller.workspace-bpjs"],0,[plugins.bpjs,"WorkspaceController"],0));(Ext.cmd.derive("plugins.bpjs.klaim.pengajuan.Workspace",com.Tab,{controller:"workspace-bpjs-klaim-pengajuan",defaults:{textAlign:"left"},tabPosition:"right",tabRotation:0,initComponent:function(){var f=this;f.items=[{title:"Insert LPK"},{title:"Update LPK"},{title:"Delete LPK"},{title:"Data Lembar Pengajuan Klaim"}];com.Tab.prototype.initComponent.apply(this,arguments)},load:function(){var f=this.getActiveTab();if(f){if(f.load){f.load({})}}},listeners:{tabchange:"onTabChange"}},0,["workspace-bpjs-klaim-pengajuan"],["component","box","container","panel","tabpanel","com-tab","workspace-bpjs-klaim-pengajuan"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"workspace-bpjs-klaim-pengajuan":true},["widget.workspace-bpjs-klaim-pengajuan"],0,[plugins.bpjs.klaim.pengajuan,"Workspace"],0));(Ext.cmd.derive("plugins.bpjs.klaim.pengajuan.WorkspaceController",Ext.app.ViewController,{onTabChange:function(g,l){if(l.load){l.load({})}}},0,0,0,0,["controller.workspace-bpjs-klaim-pengajuan"],0,[plugins.bpjs.klaim.pengajuan,"WorkspaceController"],0));(Ext.cmd.derive("plugins.bpjs.monitoring.Workspace",com.Tab,{controller:"workspace-bpjs-monitoring",defaults:{textAlign:"left"},tabPosition:"right",tabRotation:0,initComponent:function(){var f=this;f.items=[{title:"Data Kunjungan",xtype:"plugins-bpjs-monitoring-kunjungan-grid"},{title:"Data Klaim",xtype:"plugins-bpjs-monitoring-klaim-grid"},{title:"Data Histori Pelayanan Peserta",xtype:"plugins-bpjs-monitoring-histori-pelayanan-grid"},{title:"Data Klaim Jaminan Jasa Raharja",xtype:"plugins-bpjs-monitoring-klaim-jasaraharja-grid"}];com.Tab.prototype.initComponent.apply(this,arguments)},load:function(){var f=this.getActiveTab();if(f){if(f.load){f.load({})}}},listeners:{tabchange:"onTabChange"}},0,["workspace-bpjs-monitoring"],["component","box","container","panel","tabpanel","com-tab","workspace-bpjs-monitoring"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"workspace-bpjs-monitoring":true},["widget.workspace-bpjs-monitoring"],0,[plugins.bpjs.monitoring,"Workspace"],0));(Ext.cmd.derive("plugins.bpjs.monitoring.WorkspaceController",Ext.app.ViewController,{onTabChange:function(g,l){if(l.load){l.load({})}}},0,0,0,0,["controller.workspace-bpjs-monitoring"],0,[plugins.bpjs.monitoring,"WorkspaceController"],0));(Ext.cmd.derive("plugins.bpjs.monitoring.histori.pelayanan.Grid",com.Grid,{controller:"plugins-bpjs-monitoring-histori-pelayanan-grid",viewModel:{data:{listConfig:{paging:true}},stores:{store:{type:"plugins-bpjs-monitoring-histori-pelayanan-store",queryParams:{noKartu:"",tglMulai:Ext.util.Format.date(new Date(),"Y-m-d"),tglAkhir:Ext.util.Format.date(new Date(),"Y-m-d")}}}},columns:[{text:"Kunjungan",columns:[{text:"No. SEP",dataIndex:"noSep",sortable:false,width:150,align:"center",editor:{readOnly:true,selectOnFocus:true}},{text:"Tgl. SEP",dataIndex:"tglSep",sortable:false,width:100,align:"center"},{text:"Tgl. Pulang",dataIndex:"tglPlgSep",sortable:false,width:100,align:"center"},{text:"Kelas Rawat",dataIndex:"kelasRawat",sortable:false,width:150,align:"center"},{text:"Poli",dataIndex:"poli",sortable:false},{text:"PPK Pelayanan",dataIndex:"ppkPelayanan",sortable:false},{text:"Jenis Pelayanan",dataIndex:"jnsPelayanan",sortable:false},{text:"Diagnosa",dataIndex:"diagnosa",sortable:false}]},{text:"Peserta",flex:1,columns:[{text:"No. Kartu",sortable:false,width:150,align:"center",dataIndex:"noKartu",editor:{readOnly:true,selectOnFocus:true}},{xtype:"templatecolumn",text:"Nama",sortable:false,tpl:"{namaPeserta}"}]}],plugins:[{ptype:"cellediting",clicksToEdit:1}],dockedItems:[{xtype:"toolbar",items:[{xtype:"textfield",name:"nomor",emptyText:"Nomor Kartu",flex:1},{xtype:"datefield",fieldLabel:"Tgl. Mulai",labelWidth:70,name:"mulai",width:200,format:"d-m-Y",value:new Date()},{xtype:"datefield",fieldLabel:"Tgl. Akhir",labelWidth:70,name:"akhir",width:200,format:"d-m-Y",value:new Date()},{xtype:"button",iconCls:"x-fa fa-search",handler:"onSearch"}]},{xtype:"pagingtoolbar",hidden:true,bind:{store:"{store}",hidden:"{!listConfig.paging}"},dock:"bottom",beforePageText:"Hal.",afterPageText:"dari {0}",displayMsg:"Menampilkan {0} - {1} dari {2}",displayInfo:true}],doAfterLoad:function(y,s,v,t){try{if(!v){if(t.error){var u=t.error.response,x=Ext.JSON.decode(u.responseText),e=x.detail?(Ext.isObject(x.detail)?Ext.JSON.encode(x.detail):x.detail):"Koneksi Gagal";y.notifyMessage(e,"danger-red")}}}catch(w){y.notifyMessage("Koneksi Gagal","danger-red")}}},0,["plugins-bpjs-monitoring-histori-pelayanan-grid"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","plugins-bpjs-monitoring-histori-pelayanan-grid"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"plugins-bpjs-monitoring-histori-pelayanan-grid":true},["widget.plugins-bpjs-monitoring-histori-pelayanan-grid"],0,[plugins.bpjs.monitoring.histori.pelayanan,"Grid"],0));(Ext.cmd.derive("plugins.bpjs.monitoring.histori.pelayanan.GridController",Ext.app.ViewController,{onSearch:function(f){this.cari()},privates:{cari:function(){var o=this,t=o.getView(),s=t.down("pagingtoolbar"),u=t.down("[name=nomor]").getValue(),q=Ext.util.Format.date(t.down("[name=mulai]").getValue(),"Y-m-d"),p=Ext.util.Format.date(t.down("[name=akhir]").getValue(),"Y-m-d");t.removeDataStore();t.setParams({noKartu:u,tglMulai:q,tglAkhir:p});if(s){s.moveFirst()}else{t.load()}}}},0,0,0,0,["controller.plugins-bpjs-monitoring-histori-pelayanan-grid"],0,[plugins.bpjs.monitoring.histori.pelayanan,"GridController"],0));(Ext.cmd.derive("plugins.bpjs.monitoring.klaim.Grid",com.Grid,{controller:"plugins-bpjs-monitoring-klaim-grid",viewModel:{data:{listConfig:{paging:true}},stores:{store:{type:"plugins-bpjs-monitoring-klaim-store",queryParams:{tanggal:Ext.util.Format.date(new Date(),"Y-m-d"),jenis:2,status:3}}}},columns:[{text:"Kunjungan",columns:[{text:"No. SEP",dataIndex:"noSEP",sortable:false,width:150,align:"center",editor:{readOnly:true,selectOnFocus:true}},{text:"No. FPK",dataIndex:"noFPK",sortable:false,width:150,align:"center",editor:{readOnly:true,selectOnFocus:true}},{xtype:"datecolumn",format:"d-m-Y",text:"Tgl. SEP",dataIndex:"tglSep",sortable:false,width:100,align:"center"},{xtype:"datecolumn",format:"d-m-Y",text:"Tgl. Pulang",dataIndex:"tglPulang",sortable:false,width:100,align:"center"},{text:"Kelas Rawat",dataIndex:"kelasRawat",sortable:false,width:150,align:"center"},{text:"Poli",dataIndex:"poli",sortable:false}]},{text:"Biaya",columns:[{xtype:"templatecolumn",text:"Pengajuan",sortable:false,width:150,align:"right",tpl:new Ext.XTemplate("{[this.getFormatNumber(values.biaya.byPengajuan)]}",{getFormatNumber:function(f){return f===0?"":Ext.util.Format.number(f,"0,000.00")}})},{xtype:"templatecolumn",text:"Setujui",sortable:false,width:150,align:"right",tpl:new Ext.XTemplate("{[this.getFormatNumber(values.biaya.bySetujui)]}",{getFormatNumber:function(f){return f===0?"":Ext.util.Format.number(f,"0,000.00")}})},{xtype:"templatecolumn",text:"Tarif Gruper",sortable:false,width:150,align:"right",tpl:new Ext.XTemplate("{[this.getFormatNumber(values.biaya.byTarifGruper)]}",{getFormatNumber:function(f){return f===0?"":Ext.util.Format.number(f,"0,000.00")}})},{xtype:"templatecolumn",text:"Tarif RS",sortable:false,width:150,align:"right",tpl:new Ext.XTemplate("{[this.getFormatNumber(values.biaya.byTarifRS)]}",{getFormatNumber:function(f){return f===0?"":Ext.util.Format.number(f,"0,000.00")}})},{xtype:"templatecolumn",text:"TopUp",sortable:false,width:150,align:"right",tpl:new Ext.XTemplate("{[this.getFormatNumber(values.biaya.byTopup)]}",{getFormatNumber:function(f){return f===0?"":Ext.util.Format.number(f,"0,000.00")}})}]},{text:"Peserta",columns:[{xtype:"templatecolumn",text:"No. Kartu",sortable:false,width:150,align:"center",tpl:"{peserta.noKartu}"},{xtype:"templatecolumn",text:"No. RM",sortable:false,width:150,align:"center",tpl:"{peserta.noMR}"},{xtype:"templatecolumn",text:"Nama",sortable:false,tpl:"{peserta.nama}"}]},{text:"Inacbg",columns:[{xtype:"templatecolumn",text:"Kode",sortable:false,width:150,align:"center",tpl:"{Inacbg.kode}"},{xtype:"templatecolumn",text:"Nama",sortable:false,tpl:"{Inacbg.nama}"}]},{text:"Status",dataIndex:"status",sortable:false}],plugins:[{ptype:"cellediting",clicksToEdit:1}],dockedItems:[{xtype:"toolbar",items:[{xtype:"datefield",fieldLabel:"Tgl. Pulang",labelWidth:70,width:200,format:"d-m-Y",value:new Date()},{xtype:"combobox",name:"jenis",store:Ext.create("Ext.data.Store",{fields:["id","name"],data:[{id:1,name:"Rawat Inap"},{id:2,name:"Rawat Jalan"}]}),displayField:"name",valueField:"id",editable:false,value:2},{xtype:"combobox",name:"status",store:Ext.create("Ext.data.Store",{fields:["id","name"],data:[{id:1,name:"Proses Verifikasi"},{id:2,name:"Pending Verifikasi"},{id:3,name:"Klaim"}]}),displayField:"name",valueField:"id",editable:false,value:3},{xtype:"button",iconCls:"x-fa fa-search",text:"Ambil dari BPJS",valueId:1,handler:"onSearch"},{xtype:"button",iconCls:"x-fa fa-search",text:"Tampilkan",valueId:2,handler:"onSearch"}]},{xtype:"pagingtoolbar",hidden:true,bind:{store:"{store}",hidden:"{!listConfig.paging}"},dock:"bottom",beforePageText:"Hal.",afterPageText:"dari {0}",displayMsg:"Menampilkan {0} - {1} dari {2}",displayInfo:true}],doAfterLoad:function(y,s,v,t){try{if(!v){if(t.error){var u=t.error.response,x=Ext.JSON.decode(u.responseText),e=x.detail?(Ext.isObject(x.detail)?Ext.JSON.encode(x.detail):x.detail):"Koneksi Gagal";y.notifyMessage(e,"danger-red")}}}catch(w){y.notifyMessage("Koneksi Gagal","danger-red")}}},0,["plugins-bpjs-monitoring-klaim-grid"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","plugins-bpjs-monitoring-klaim-grid"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"plugins-bpjs-monitoring-klaim-grid":true},["widget.plugins-bpjs-monitoring-klaim-grid"],0,[plugins.bpjs.monitoring.klaim,"Grid"],0));(Ext.cmd.derive("plugins.bpjs.monitoring.klaim.GridController",Ext.app.ViewController,{onSearch:function(f){this.cari(f)},privates:{cari:function(s){var p=this,u=p.getView(),t=u.down("pagingtoolbar"),w=Ext.util.Format.date(u.down("datefield").getValue(),"Y-m-d"),q=u.down("combobox[name=jenis]").getSelection(),v=u.down("combobox[name=status]").getSelection();u.removeDataStore();u.setParams({tanggal:w,jenis:q?q.get("id"):"",status:v?v.get("id"):"",jenisPengambilanData:s.valueId});if(t){t.moveFirst()}else{u.load()}}}},0,0,0,0,["controller.plugins-bpjs-monitoring-klaim-grid"],0,[plugins.bpjs.monitoring.klaim,"GridController"],0));(Ext.cmd.derive("plugins.bpjs.monitoring.klaim.jasaraharja.Grid",com.Grid,{controller:"plugins-bpjs-monitoring-klaim-jasaraharja-grid",viewModel:{data:{listConfig:{paging:true}},stores:{store:{type:"plugins-bpjs-monitoring-klaim-jasaraharja-store",queryParams:{tglMulai:Ext.util.Format.date(new Date(),"Y-m-d"),tglAkhir:Ext.util.Format.date(new Date(),"Y-m-d")}}}},columns:[{text:"Peserta",columns:[{xtype:"templatecolumn",text:"No. Kartu",sortable:false,width:150,align:"center",tpl:"{sep.peserta.noKartu}"},{xtype:"templatecolumn",text:"No. RM",sortable:false,width:100,align:"center",tpl:"{sep.peserta.noMR}"},{xtype:"templatecolumn",text:"Nama",sortable:false,tpl:"{sep.peserta.nama}"}]},{text:"Kunjungan",columns:[{xtype:"templatecolumn",text:"No. SEP",sortable:false,width:150,align:"center",tpl:"{sep.noSEP}"},{xtype:"templatecolumn",text:"Tgl. SEP",sortable:false,width:100,align:"center",tpl:new Ext.XTemplate("{[this.getFormatDate(values.sep.tglSep)]}",{getFormatDate:function(f){return Ext.util.Format.date(f,"d-m-Y")}})},{xtype:"templatecolumn",text:"Tgl. Pulang",sortable:false,width:100,align:"center",tpl:new Ext.XTemplate("{[this.getFormatDate(values.sep.tglPlgSEP)]}",{getFormatDate:function(f){return Ext.util.Format.date(f,"d-m-Y")}})},{xtype:"templatecolumn",text:"Jenis Pelayanan",sortable:false,tpl:"{sep.jnsPelayanan}"},{xtype:"templatecolumn",text:"Poli",sortable:false,tpl:"{sep.poli}"},{xtype:"templatecolumn",text:"Diagnosa",sortable:false,tpl:"{sep.diagnosa}"}]},{text:"Jasa Raharja",columns:[{xtype:"templatecolumn",text:"No. Register",sortable:false,width:150,align:"center",tpl:"{jasaRaharja.noRegister}"},{xtype:"templatecolumn",text:"Tgl. Kejadian",sortable:false,width:100,align:"center",tpl:new Ext.XTemplate("{[this.getFormatDate(values.jasaRaharja.tglKejadian)]}",{getFormatDate:function(f){return Ext.util.Format.date(f,"d-m-Y")}})},{xtype:"templatecolumn",text:"Plafon",sortable:false,width:140,align:"right",tpl:new Ext.XTemplate("{[this.getFormatNumber(values.jasaRaharja.plafon)]}",{getFormatNumber:function(f){return f===0?"":Ext.util.Format.number(f,"0,000.00")}})},{xtype:"templatecolumn",text:"Dijamin",sortable:false,width:140,align:"right",tpl:new Ext.XTemplate("{[this.getFormatNumber(values.jasaRaharja.biayaDijamin)]}",{getFormatNumber:function(f){return f===0?"":Ext.util.Format.number(f,"0,000.00")}})},{xtype:"templatecolumn",text:"Dibayar",sortable:false,width:140,align:"right",tpl:new Ext.XTemplate("{[this.getFormatNumber(values.jasaRaharja.jmlDibayar)]}",{getFormatNumber:function(f){return f===0?"":Ext.util.Format.number(f,"0,000.00")}})},{xtype:"templatecolumn",text:"Status Dijamin",sortable:false,tpl:"{jasaRaharja.ketStatusDijamin}"},{xtype:"templatecolumn",text:"Status Dikirim",sortable:false,tpl:"{jasaRaharja.ketStatusDikirim}"},{xtype:"templatecolumn",text:"Result",sortable:false,tpl:"{jasaRaharja.resultsJasaRaharja}"}]}],dockedItems:[{xtype:"toolbar",items:[{xtype:"datefield",fieldLabel:"Tgl. Mulai",labelWidth:70,name:"mulai",width:200,format:"d-m-Y",value:new Date()},{xtype:"datefield",fieldLabel:"Tgl. Akhir",labelWidth:70,name:"akhir",width:200,format:"d-m-Y",value:new Date()},{xtype:"button",iconCls:"x-fa fa-search",handler:"onSearch"}]},{xtype:"pagingtoolbar",hidden:true,bind:{store:"{store}",hidden:"{!listConfig.paging}"},dock:"bottom",beforePageText:"Hal.",afterPageText:"dari {0}",displayMsg:"Menampilkan {0} - {1} dari {2}",displayInfo:true}],doAfterLoad:function(y,s,v,t){try{if(!v){if(t.error){var u=t.error.response,x=Ext.JSON.decode(u.responseText),e=x.detail?(Ext.isObject(x.detail)?Ext.JSON.encode(x.detail):x.detail):"Koneksi Gagal";y.notifyMessage(e,"danger-red")}}}catch(w){y.notifyMessage("Koneksi Gagal","danger-red")}}},0,["plugins-bpjs-monitoring-klaim-jasaraharja-grid"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","plugins-bpjs-monitoring-klaim-jasaraharja-grid"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"plugins-bpjs-monitoring-klaim-jasaraharja-grid":true},["widget.plugins-bpjs-monitoring-klaim-jasaraharja-grid"],0,[plugins.bpjs.monitoring.klaim.jasaraharja,"Grid"],0));(Ext.cmd.derive("plugins.bpjs.monitoring.klaim.jasaraharja.GridController",Ext.app.ViewController,{onSearch:function(f){this.cari()},privates:{cari:function(){var n=this,s=n.getView(),q=s.down("pagingtoolbar"),p=Ext.util.Format.date(s.down("[name=mulai]").getValue(),"Y-m-d"),o=Ext.util.Format.date(s.down("[name=akhir]").getValue(),"Y-m-d");s.removeDataStore();s.setParams({tglMulai:p,tglAkhir:o});if(q){q.moveFirst()}else{s.load()}}}},0,0,0,0,["controller.plugins-bpjs-monitoring-klaim-jasaraharja-grid"],0,[plugins.bpjs.monitoring.klaim.jasaraharja,"GridController"],0));(Ext.cmd.derive("plugins.bpjs.monitoring.kunjungan.Grid",com.Grid,{controller:"plugins-bpjs-monitoring-kunjungan-grid",viewModel:{data:{listConfig:{paging:true}},stores:{store:{type:"plugins-bpjs-monitoring-kunjungan-store",queryParams:{tanggal:Ext.util.Format.date(new Date(),"Y-m-d"),jenis:2}}}},columns:[{text:"No. Kartu",dataIndex:"noKartu",sortable:false,width:110,align:"center",editor:{readOnly:true,selectOnFocus:true}},{text:"Nama",dataIndex:"nama",sortable:false,flex:1},{text:"No. SEP",dataIndex:"noSep",sortable:false,width:170,align:"center",editor:{readOnly:true,selectOnFocus:true}},{xtype:"datecolumn",format:"d-m-Y",text:"Tgl. SEP",dataIndex:"tglSep",sortable:false,width:100,align:"center"},{xtype:"datecolumn",format:"d-m-Y",text:"Tgl. Pulang SEP",dataIndex:"tglPlgSep",sortable:false,width:100,align:"center"},{text:"Jenis Pelayanan",dataIndex:"jnsPelayanan",sortable:false},{text:"Kelas Rawat",dataIndex:"kelasRawat",sortable:false},{text:"Poli",dataIndex:"poli",sortable:false},{text:"Diagnosa",dataIndex:"diagnosa",sortable:false}],plugins:[{ptype:"cellediting",clicksToEdit:1}],dockedItems:[{xtype:"toolbar",items:[{xtype:"datefield",fieldLabel:"Tgl. SEP",labelWidth:50,width:180,format:"d-m-Y",value:new Date()},{xtype:"combobox",name:"jenis",store:Ext.create("Ext.data.Store",{fields:["id","name"],data:[{id:1,name:"Rawat Inap"},{id:2,name:"Rawat Jalan"}]}),displayField:"name",valueField:"id",editable:false,value:2},{xtype:"button",iconCls:"x-fa fa-search",handler:"onSearch"}]},{xtype:"pagingtoolbar",hidden:true,bind:{store:"{store}",hidden:"{!listConfig.paging}"},dock:"bottom",beforePageText:"Hal.",afterPageText:"dari {0}",displayMsg:"Menampilkan {0} - {1} dari {2}",displayInfo:true}],doAfterLoad:function(y,s,v,t){try{if(!v){if(t.error){var u=t.error.response,x=Ext.JSON.decode(u.responseText),e=x.detail?(Ext.isObject(x.detail)?Ext.JSON.encode(x.detail):x.detail):"Koneksi Gagal";y.notifyMessage(e,"danger-red")}}}catch(w){y.notifyMessage("Koneksi Gagal","danger-red")}}},0,["plugins-bpjs-monitoring-kunjungan-grid"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","plugins-bpjs-monitoring-kunjungan-grid"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"plugins-bpjs-monitoring-kunjungan-grid":true},["widget.plugins-bpjs-monitoring-kunjungan-grid"],0,[plugins.bpjs.monitoring.kunjungan,"Grid"],0));(Ext.cmd.derive("plugins.bpjs.monitoring.kunjungan.GridController",Ext.app.ViewController,{onSearch:function(f){this.cari()},privates:{cari:function(){var p=this,s=p.getView(),q=s.down("pagingtoolbar"),o=Ext.util.Format.date(s.down("datefield").getValue(),"Y-m-d"),n=s.down("combobox").getSelection();s.removeDataStore();s.setParams({tanggal:o,jenis:n?n.get("id"):""});if(q){q.moveFirst()}else{s.load()}}}},0,0,0,0,["controller.plugins-bpjs-monitoring-kunjungan-grid"],0,[plugins.bpjs.monitoring.kunjungan,"GridController"],0));(Ext.cmd.derive("plugins.bpjs.peserta.Form",com.Form,{controller:"form-bpjs-peserta",viewModel:{data:{emptytext:"Masukkan No. Kartu"}},layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldcontainer",layout:{type:"hbox"},items:[{xtype:"segmentedbutton",items:[{text:"No. Kartu",idx:1,pressed:true},{text:"NIK",idx:2}],listeners:{toggle:"onToggleButton"}},{xtype:"textfield",bind:{emptyText:"{emptytext}"},flex:1,reference:"nomor"},{xtype:"datefield",reference:"tglSEP",format:"d-m-Y",value:new Date(),width:120},{xtype:"button",iconCls:"x-fa fa-search",tooltip:"Cari",handler:"onButtonCari"}]},{xtype:"textareafield",fieldLabel:"Respon",reference:"response",labelAlign:"top",readOnly:true,flex:1}]},0,["form-bpjs-peserta"],["component","box","container","panel","form","com-form","form-bpjs-peserta"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-bpjs-peserta":true},["widget.form-bpjs-peserta"],0,[plugins.bpjs.peserta,"Form"],0));(Ext.cmd.derive("plugins.bpjs.peserta.FormController",Ext.app.ViewController,{idxSelected:1,init:function(){var g=this,l=g.getView();g.integrasi=l.app.xitr("ID",1);if(g.integrasi){g.service=Ext.create(g.integrasi.NAMA_KLAS,{})}},onToggleButton:function(n,m,l){this.getViewModel().set("emptytext","Masukkan "+m.text);this.idxSelected=m.idx},onButtonCari:function(n){var m=this,p=m.getView(),o=m.getReferences();o.response.setValue("");if(o.nomor.getValue()===""){return}if(m.service){if(m.idxSelected===1){p.setLoading(true);m.service.getPesertaByNoKartu({nomor:o.nomor.getValue(),tglSEP:Ext.util.Format.date(o.tglSEP.getValue(),"Y-m-d")},function(f,e){if(f){o.response.setValue(JSON.stringify(e,undefined,2))}p.setLoading(false)})}if(m.idxSelected===2){p.setLoading(true);m.service.getPersertaByNIK({nomor:o.nomor.getValue(),tglSEP:Ext.util.Format.date(o.tglSEP.getValue(),"Y-m-d")},function(f,e){if(f){o.response.setValue(JSON.stringify(e,undefined,2))}p.setLoading(false)})}}},destroy:function(){if(this.service){delete this.service}Ext.app.ViewController.prototype.destroy.call(this)}},0,0,0,0,["controller.form-bpjs-peserta"],0,[plugins.bpjs.peserta,"FormController"],0));(Ext.cmd.derive("plugins.bpjs.referensi.Workspace",com.Tab,{controller:"workspace-bpjs-referensi",defaults:{textAlign:"left"},tabPosition:"right",tabRotation:0,initComponent:function(){var f=this;f.items=[{title:"Diagnosa",xtype:"form-bpjs-referensi-diagnosa"},{title:"Poli",xtype:"grid-bpjs-referensi-poli"},{title:"Fasilitas Kesehatan",xtype:"grid-bpjs-referensi-faskes"},{title:"Procedure",xtype:"form-bpjs-referensi-procedure"},{title:"Kelas Rawat",xtype:"grid-bpjs-referensi-kelasrawat"},{title:"DPJP",xtype:"grid-bpjs-referensi-dpjp"},{title:"Dokter",xtype:"grid-bpjs-referensi-dokter"},{title:"Spesialistik",xtype:"grid-bpjs-referensi-spesialistik"},{title:"Ruang Rawat",xtype:"grid-bpjs-referensi-ruangrawat"},{title:"Cara Keluar",xtype:"grid-bpjs-referensi-carakeluar"},{title:"Pasca Pulang",xtype:"grid-bpjs-referensi-pascapulang"}];com.Tab.prototype.initComponent.apply(this,arguments)},load:function(){var f=this.getActiveTab();if(f){if(f.load){f.load({})}}},listeners:{tabchange:"onTabChange"}},0,["workspace-bpjs-referensi"],["component","box","container","panel","tabpanel","com-tab","workspace-bpjs-referensi"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"workspace-bpjs-referensi":true},["widget.workspace-bpjs-referensi"],0,[plugins.bpjs.referensi,"Workspace"],0));(Ext.cmd.derive("plugins.bpjs.referensi.WorkspaceController",Ext.app.ViewController,{onTabChange:function(g,l){if(l.load){l.load({})}}},0,0,0,0,["controller.workspace-bpjs-referensi"],0,[plugins.bpjs.referensi,"WorkspaceController"],0));(Ext.cmd.derive("plugins.bpjs.referensi.carakeluar.Grid",com.Grid,{viewModel:{stores:{store:{type:"bpjs-referensi-carakeluar-store"}}},columns:[{text:"Kode",dataIndex:"kode",sortable:false,width:150,align:"center"},{text:"Nama",dataIndex:"nama",sortable:false,flex:1}],doAfterLoad:function(y,s,v,t){try{if(!v){y.removeDataStore();if(t.error){var u=t.error.response,x=Ext.JSON.decode(u.responseText),e=x.detail?(Ext.isObject(x.detail)?Ext.JSON.encode(x.detail):x.detail):"Koneksi Gagal";y.notifyMessage(e,"danger-red")}}}catch(w){y.notifyMessage("Koneksi Gagal","danger-red")}}},0,["grid-bpjs-referensi-carakeluar"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","grid-bpjs-referensi-carakeluar"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"grid-bpjs-referensi-carakeluar":true},["widget.grid-bpjs-referensi-carakeluar"],0,[plugins.bpjs.referensi.carakeluar,"Grid"],0));(Ext.cmd.derive("plugins.bpjs.referensi.diagnosa.Form",com.Form,{controller:"form-bpjs-referensi-diagnosa",layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldcontainer",layout:{type:"hbox"},items:[{xtype:"textfield",fieldLabel:"Diagnosa (ICD-10)",labelWidth:110,emptyText:"Masukkan Kode atau Nama Diagnosa (ICD-10)",reference:"nomor",flex:1},{xtype:"button",text:"Tampilkan Detail",iconCls:"x-fa fa-list",handler:"onTampilkan"}]},{xtype:"textareafield",fieldLabel:"Respon",reference:"response",labelAlign:"top",readOnly:true,flex:1}]},0,["form-bpjs-referensi-diagnosa"],["component","box","container","panel","form","com-form","form-bpjs-referensi-diagnosa"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-bpjs-referensi-diagnosa":true},["widget.form-bpjs-referensi-diagnosa"],0,[plugins.bpjs.referensi.diagnosa,"Form"],0));(Ext.cmd.derive("plugins.bpjs.referensi.diagnosa.FormController",Ext.app.ViewController,{init:function(){var g=this,l=g.getView();g.integrasi=l.app.xitr("ID",1);if(g.integrasi){g.service=Ext.create(g.integrasi.NAMA_KLAS,{})}},onTampilkan:function(n){var m=this,p=m.getView(),o=m.getReferences();o.response.setValue("");if(o.nomor.getValue()===""){return}if(m.service){p.setLoading(true);m.service.diagnosa(o.nomor.getValue(),function(f,e){if(f){o.response.setValue(JSON.stringify(e,undefined,2))}p.setLoading(false)})}},destroy:function(){if(this.service){delete this.service}Ext.app.ViewController.prototype.destroy.call(this)}},0,0,0,0,["controller.form-bpjs-referensi-diagnosa"],0,[plugins.bpjs.referensi.diagnosa,"FormController"],0));(Ext.cmd.derive("plugins.bpjs.referensi.dokter.Grid",com.Grid,{controller:"grid-bpjs-referensi-dokter",viewModel:{data:{listConfig:{paging:true}},stores:{store:{type:"bpjs-referensi-dokter-store"}}},columns:[{text:"Kode",dataIndex:"kode",sortable:false,width:150,align:"center"},{text:"Nama",dataIndex:"nama",sortable:false,flex:1}],dockedItems:[{xtype:"toolbar",items:[{xtype:"textfield",emptyText:"Nama Dokter / DPJP",flex:1},{xtype:"button",iconCls:"x-fa fa-search",handler:"onSearch"}]},{xtype:"pagingtoolbar",hidden:true,bind:{store:"{store}",hidden:"{!listConfig.paging}"},dock:"bottom",beforePageText:"Hal.",afterPageText:"dari {0}",displayMsg:"Menampilkan {0} - {1} dari {2}",displayInfo:true}],doAfterLoad:function(y,s,v,t){try{if(!v){if(t.error){var u=t.error.response,x=Ext.JSON.decode(u.responseText),e=x.detail?(Ext.isObject(x.detail)?Ext.JSON.encode(x.detail):x.detail):"Koneksi Gagal";y.notifyMessage(e,"danger-red")}}}catch(w){y.notifyMessage("Koneksi Gagal","danger-red")}}},0,["grid-bpjs-referensi-dokter"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","grid-bpjs-referensi-dokter"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"grid-bpjs-referensi-dokter":true},["widget.grid-bpjs-referensi-dokter"],0,[plugins.bpjs.referensi.dokter,"Grid"],0));(Ext.cmd.derive("plugins.bpjs.referensi.dokter.GridController",Ext.app.ViewController,{onSearch:function(f){this.cari()},privates:{cari:function(){var m=this,p=m.getView(),o=p.down("pagingtoolbar"),n=p.down("textfield");p.removeDataStore();p.setParams({query:n.getValue()});if(o){o.moveFirst()}else{p.load()}}}},0,0,0,0,["controller.grid-bpjs-referensi-dokter"],0,[plugins.bpjs.referensi.dokter,"GridController"],0));(Ext.cmd.derive("plugins.bpjs.referensi.dpjp.Combo",com.Combo,{viewModel:{stores:{store:{type:"bpjs-referensi-dpjp-store"}}},emptyText:"[ Pilih DPJP ]",displayField:"nama",valueField:"kode"},0,["plugins-bpjs-referensi-dpjp-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","plugins-bpjs-referensi-dpjp-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"plugins-bpjs-referensi-dpjp-combo":true},["widget.plugins-bpjs-referensi-dpjp-combo"],0,[plugins.bpjs.referensi.dpjp,"Combo"],0));(Ext.cmd.derive("plugins.bpjs.referensi.dpjp.Grid",com.Grid,{controller:"grid-bpjs-referensi-dpjp",viewModel:{data:{listConfig:{paging:true},jenisPelayanan:2},stores:{store:{type:"bpjs-referensi-dpjp-store"}}},columns:[{text:"Kode",dataIndex:"kode",sortable:false,width:150,align:"center"},{text:"Nama",dataIndex:"nama",sortable:false,flex:1}],dockedItems:[{xtype:"toolbar",items:[{xtype:"combobox",store:Ext.create("Ext.data.Store",{fields:["id","name"],data:[{id:1,name:"Rawat Inap"},{id:2,name:"Rawat Jalan"}]}),displayField:"name",valueField:"id",editable:false,bind:{value:"{jenisPelayanan}"}},{xtype:"datefield",format:"d-m-Y",value:new Date(),width:120},{xtype:"referensi-combo",emptyText:"[Pilih Poliklinik]",params:{JENIS:70,STATUS:1},firstLoad:true,flex:1,bind:{hidden:"{jenisPelayanan == 1}"}},{xtype:"plugins-bpjs-referensi-spesialistik-combo",flex:1,bind:{hidden:"{jenisPelayanan == 2}"}},{xtype:"button",iconCls:"x-fa fa-search",handler:"onSearch"}]},{xtype:"pagingtoolbar",hidden:true,bind:{store:"{store}",hidden:"{!listConfig.paging}"},dock:"bottom",beforePageText:"Hal.",afterPageText:"dari {0}",displayMsg:"Menampilkan {0} - {1} dari {2}",displayInfo:true}],doAfterLoad:function(A,y,u,w){try{if(!u){if(w.error){var v=w.error.response,x=Ext.JSON.decode(v.responseText),t=x.detail?(Ext.isObject(x.detail)?Ext.JSON.encode(x.detail):x.detail):"Koneksi Gagal";A.notifyMessage(t,"danger-red")}}var z=A.down("plugins-bpjs-referensi-spesialistik-combo");z.load()}catch(e){A.notifyMessage("Koneksi Gagal","danger-red")}}},0,["grid-bpjs-referensi-dpjp"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","grid-bpjs-referensi-dpjp"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"grid-bpjs-referensi-dpjp":true},["widget.grid-bpjs-referensi-dpjp"],0,[plugins.bpjs.referensi.dpjp,"Grid"],0));(Ext.cmd.derive("plugins.bpjs.referensi.dpjp.GridController",Ext.app.ViewController,{onSearch:function(f){this.cari()},privates:{cari:function(){var y=this,u=y.getView(),t=u.down("pagingtoolbar"),s=u.down("combobox").getSelection().get("id"),q=Ext.util.Format.date(u.down("datefield").getValue(),"Y-m-d"),w=u.down("referensi-combo").getSelection(),v=u.down("plugins-bpjs-referensi-spesialistik-combo").getSelection(),x=s==1?(v?v.get("kode"):""):(w?w.get("REF_ID"):"");u.removeDataStore();u.setParams({jenisPelayanan:s,tglPelayanan:q,kodeSpesialis:x});if(t){t.moveFirst()}else{u.load()}}}},0,0,0,0,["controller.grid-bpjs-referensi-dpjp"],0,[plugins.bpjs.referensi.dpjp,"GridController"],0));(Ext.cmd.derive("plugins.bpjs.referensi.faskes.Grid",com.Grid,{controller:"grid-bpjs-referensi-faskes",viewModel:{data:{listConfig:{paging:true}},stores:{store:{type:"bpjs-referensi-faskes-store"}}},columns:[{text:"Kode Provider",dataIndex:"kdProvider",sortable:false,width:150,align:"center"},{text:"Nama Provider",dataIndex:"nmProvider",sortable:false,flex:1},{text:"Kode Cabang",dataIndex:"kdCabang",sortable:false,width:150,align:"center"},{text:"Nama Cabang",dataIndex:"nmCabang",sortable:false,flex:1}],dockedItems:[{xtype:"toolbar",items:[{xtype:"textfield",emptyText:"Cari Nama / Kode Faskes",flex:1},{xtype:"combobox",name:"jenis",store:Ext.create("Ext.data.Store",{fields:["id","name"],data:[{id:1,name:"Faskes 1"},{id:2,name:"Faskes 2/RS"}]}),displayField:"name",valueField:"id",editable:false,value:2},{xtype:"button",iconCls:"x-fa fa-search",handler:"onSearch"}]},{xtype:"pagingtoolbar",hidden:true,bind:{store:"{store}",hidden:"{!listConfig.paging}"},dock:"bottom",beforePageText:"Hal.",afterPageText:"dari {0}",displayMsg:"Menampilkan {0} - {1} dari {2}",displayInfo:true}],doAfterLoad:function(y,s,v,t){try{if(!v){if(t.error){var u=t.error.response,x=Ext.JSON.decode(u.responseText),e=x.detail?(Ext.isObject(x.detail)?Ext.JSON.encode(x.detail):x.detail):"Koneksi Gagal";y.notifyMessage(e,"danger-red")}}}catch(w){y.notifyMessage("Koneksi Gagal","danger-red")}}},0,["grid-bpjs-referensi-faskes"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","grid-bpjs-referensi-faskes"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"grid-bpjs-referensi-faskes":true},["widget.grid-bpjs-referensi-faskes"],0,[plugins.bpjs.referensi.faskes,"Grid"],0));(Ext.cmd.derive("plugins.bpjs.referensi.faskes.GridController",Ext.app.ViewController,{onSearch:function(f){this.cari()},privates:{cari:function(){var o=this,s=o.getView(),q=s.down("pagingtoolbar"),p=s.down("textfield"),n=s.down("combobox").getSelection();s.removeDataStore();s.setParams({nama:p.getValue(),jenis:n?n.get("id"):""});if(q){q.moveFirst()}else{s.load()}}}},0,0,0,0,["controller.grid-bpjs-referensi-faskes"],0,[plugins.bpjs.referensi.faskes,"GridController"],0));(Ext.cmd.derive("plugins.bpjs.referensi.kelasrawat.Grid",com.Grid,{viewModel:{stores:{store:{type:"bpjs-referensi-kelasrawat-store"}}},columns:[{text:"Kode",dataIndex:"kode",sortable:false,width:150,align:"center"},{text:"Nama",dataIndex:"nama",sortable:false,flex:1}],doAfterLoad:function(y,s,v,t){try{if(!v){y.removeDataStore();if(t.error){var u=t.error.response,x=Ext.JSON.decode(u.responseText),e=x.detail?(Ext.isObject(x.detail)?Ext.JSON.encode(x.detail):x.detail):"Koneksi Gagal";y.notifyMessage(e,"danger-red")}}}catch(w){y.notifyMessage("Koneksi Gagal","danger-red")}}},0,["grid-bpjs-referensi-kelasrawat"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","grid-bpjs-referensi-kelasrawat"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"grid-bpjs-referensi-kelasrawat":true},["widget.grid-bpjs-referensi-kelasrawat"],0,[plugins.bpjs.referensi.kelasrawat,"Grid"],0));(Ext.cmd.derive("plugins.bpjs.referensi.pascapulang.Grid",com.Grid,{viewModel:{stores:{store:{type:"bpjs-referensi-pascapulang-store"}}},columns:[{text:"Kode",dataIndex:"kode",sortable:false,width:150,align:"center"},{text:"Nama",dataIndex:"nama",sortable:false,flex:1}],doAfterLoad:function(y,s,v,t){try{if(!v){y.removeDataStore();if(t.error){var u=t.error.response,x=Ext.JSON.decode(u.responseText),e=x.detail?(Ext.isObject(x.detail)?Ext.JSON.encode(x.detail):x.detail):"Koneksi Gagal";y.notifyMessage(e,"danger-red")}}}catch(w){y.notifyMessage("Koneksi Gagal","danger-red")}}},0,["grid-bpjs-referensi-pascapulang"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","grid-bpjs-referensi-pascapulang"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"grid-bpjs-referensi-pascapulang":true},["widget.grid-bpjs-referensi-pascapulang"],0,[plugins.bpjs.referensi.pascapulang,"Grid"],0));(Ext.cmd.derive("plugins.bpjs.referensi.poli.Grid",com.Grid,{controller:"grid-bpjs-referensi-poli",viewModel:{data:{listConfig:{paging:true}},stores:{store:{type:"bpjs-referensi-poli-store"}}},columns:[{text:"Kode Poli",dataIndex:"kdPoli",sortable:false,width:150,align:"center"},{text:"Nama Poli",dataIndex:"nmPoli",sortable:false,flex:1}],dockedItems:[{xtype:"toolbar",items:[{xtype:"search-field",emptyText:"Cari Poli / Kode Poli",flex:1,listeners:{search:"onSearch",clear:"onClear",change:"onChange"}}]},{xtype:"pagingtoolbar",hidden:true,bind:{store:"{store}",hidden:"{!listConfig.paging}"},dock:"bottom",beforePageText:"Hal.",afterPageText:"dari {0}",displayMsg:"Menampilkan {0} - {1} dari {2}",displayInfo:true}],doAfterLoad:function(y,s,v,t){try{if(!v){if(t.error){var u=t.error.response,x=Ext.JSON.decode(u.responseText),e=x.detail?(Ext.isObject(x.detail)?Ext.JSON.encode(x.detail):x.detail):"Koneksi Gagal";y.notifyMessage(e,"danger-red")}}}catch(w){y.notifyMessage("Koneksi Gagal","danger-red")}}},0,["grid-bpjs-referensi-poli"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","grid-bpjs-referensi-poli"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"grid-bpjs-referensi-poli":true},["widget.grid-bpjs-referensi-poli"],0,[plugins.bpjs.referensi.poli,"Grid"],0));(Ext.cmd.derive("plugins.bpjs.referensi.poli.GridController",Ext.app.ViewController,{query:"",onSearch:function(l,g){this.query=g;this.cari()},onClear:function(){this.query="";this.cari()},onChange:function(s,u,o){var p=this,t=p.getView(),q=t.down("search-field");if(u===""){q.onClearClick()}},privates:{cari:function(){var l=this,n=l.getView(),m=n.down("pagingtoolbar");n.removeDataStore();n.setParams({query:l.query});if(m){m.moveFirst()}else{n.load()}}}},0,0,0,0,["controller.grid-bpjs-referensi-poli"],0,[plugins.bpjs.referensi.poli,"GridController"],0));(Ext.cmd.derive("plugins.bpjs.referensi.procedure.Form",com.Form,{controller:"form-bpjs-referensi-procedure",layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldcontainer",layout:{type:"hbox"},items:[{xtype:"textfield",fieldLabel:"Procedure",labelWidth:110,emptyText:"Masukkan Kode atau Nama procedure",reference:"nomor",flex:1},{xtype:"button",text:"Tampilkan Detail",iconCls:"x-fa fa-list",handler:"onTampilkan"}]},{xtype:"textareafield",fieldLabel:"Respon",reference:"response",labelAlign:"top",readOnly:true,flex:1}]},0,["form-bpjs-referensi-procedure"],["component","box","container","panel","form","com-form","form-bpjs-referensi-procedure"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-bpjs-referensi-procedure":true},["widget.form-bpjs-referensi-procedure"],0,[plugins.bpjs.referensi.procedure,"Form"],0));(Ext.cmd.derive("plugins.bpjs.referensi.procedure.FormController",Ext.app.ViewController,{init:function(){var g=this,l=g.getView();g.integrasi=l.app.xitr("ID",1);if(g.integrasi){g.service=Ext.create(g.integrasi.NAMA_KLAS,{})}},onTampilkan:function(n){var m=this,p=m.getView(),o=m.getReferences();o.response.setValue("");if(o.nomor.getValue()===""){return}if(m.service){p.setLoading(true);m.service.procedure(o.nomor.getValue(),function(f,e){if(f){o.response.setValue(JSON.stringify(e,undefined,2))}p.setLoading(false)})}},destroy:function(){if(this.service){delete this.service}Ext.app.ViewController.prototype.destroy.call(this)}},0,0,0,0,["controller.form-bpjs-referensi-procedure"],0,[plugins.bpjs.referensi.procedure,"FormController"],0));(Ext.cmd.derive("plugins.bpjs.referensi.ruangrawat.Grid",com.Grid,{viewModel:{stores:{store:{type:"bpjs-referensi-ruangrawat-store"}}},columns:[{text:"Kode",dataIndex:"kode",sortable:false,width:150,align:"center"},{text:"Nama",dataIndex:"nama",sortable:false,flex:1}],doAfterLoad:function(y,s,v,t){try{if(!v){y.removeDataStore();if(t.error){var u=t.error.response,x=Ext.JSON.decode(u.responseText),e=x.detail?(Ext.isObject(x.detail)?Ext.JSON.encode(x.detail):x.detail):"Koneksi Gagal";y.notifyMessage(e,"danger-red")}}}catch(w){y.notifyMessage("Koneksi Gagal","danger-red")}}},0,["grid-bpjs-referensi-ruangrawat"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","grid-bpjs-referensi-ruangrawat"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"grid-bpjs-referensi-ruangrawat":true},["widget.grid-bpjs-referensi-ruangrawat"],0,[plugins.bpjs.referensi.ruangrawat,"Grid"],0));(Ext.cmd.derive("plugins.bpjs.referensi.spesialistik.Combo",com.Combo,{viewModel:{stores:{store:{type:"bpjs-referensi-spesialistik-store"}}},emptyText:"[ Pilih Spesialistik ]",displayField:"nama",valueField:"kode"},0,["plugins-bpjs-referensi-spesialistik-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","plugins-bpjs-referensi-spesialistik-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"plugins-bpjs-referensi-spesialistik-combo":true},["widget.plugins-bpjs-referensi-spesialistik-combo"],0,[plugins.bpjs.referensi.spesialistik,"Combo"],0));(Ext.cmd.derive("plugins.bpjs.referensi.spesialistik.Grid",com.Grid,{viewModel:{stores:{store:{type:"bpjs-referensi-spesialistik-store"}}},columns:[{text:"Kode",dataIndex:"kode",sortable:false,width:150,align:"center"},{text:"Nama",dataIndex:"nama",sortable:false,flex:1}],doAfterLoad:function(y,s,v,t){try{if(!v){y.removeDataStore();if(t.error){var u=t.error.response,x=Ext.JSON.decode(u.responseText),e=x.detail?(Ext.isObject(x.detail)?Ext.JSON.encode(x.detail):x.detail):"Koneksi Gagal";y.notifyMessage(e,"danger-red")}}}catch(w){y.notifyMessage("Koneksi Gagal","danger-red")}}},0,["grid-bpjs-referensi-spesialistik"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","grid-bpjs-referensi-spesialistik"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"grid-bpjs-referensi-spesialistik":true},["widget.grid-bpjs-referensi-spesialistik"],0,[plugins.bpjs.referensi.spesialistik,"Grid"],0));(Ext.cmd.derive("plugins.bpjs.referensi.wilayah.Combo",com.Combo,{viewModel:{stores:{store:{type:"bpjs-referensi-wilayah-store"}}},emptyText:"[ Pilih Wilayah ]",params:{tipe:1},displayField:"nama",valueField:"kode"},0,["plugins-bpjs-referensi-wilayah-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","plugins-bpjs-referensi-wilayah-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"plugins-bpjs-referensi-wilayah-combo":true},["widget.plugins-bpjs-referensi-wilayah-combo"],0,[plugins.bpjs.referensi.wilayah,"Combo"],0));(Ext.cmd.derive("plugins.bpjs.rujukan.Grid",com.Grid,{controller:"plugins-bpjs-rujukan-grid",viewModel:{data:{listConfig:{paging:true}},stores:{store:{type:"plugins-bpjs-rujukan-store",queryParams:{noKartu:"",faskes:2}}}},columns:[{text:"Kunjungan",columns:[{text:"No. Kunjungan",dataIndex:"noKunjungan",sortable:false,width:150,align:"center",editor:{readOnly:true,selectOnFocus:true}},{xtype:"datecolumn",format:"d-m-Y",text:"Tgl. Kunjungan",dataIndex:"tglKunjungan",sortable:false,width:100,align:"center"},{xtype:"templatecolumn",text:"Pelayanan",sortable:false,width:150,tpl:"{pelayanan.nama}"},{text:"Keluhan",dataIndex:"keluhan",sortable:false,width:150,align:"center"}]},{text:"Peserta",flex:1,columns:[{xtype:"templatecolumn",text:"No. Kartu",sortable:false,width:135,align:"center",tpl:"{peserta.noKartu}"},{xtype:"templatecolumn",text:"No. RM",sortable:false,width:120,align:"center",tpl:"{peserta.mr.noMR}"},{xtype:"templatecolumn",text:"Nama",sortable:false,tpl:"{peserta.nama}"}]},{text:"Diagnosa",flex:1,columns:[{xtype:"templatecolumn",text:"Kode",sortable:false,width:150,align:"center",tpl:"{diagnosa.kode}"},{xtype:"templatecolumn",text:"Nama",sortable:false,tpl:"{diagnosa.nama}"}]},{text:"Poli Rujukan",flex:1,columns:[{xtype:"templatecolumn",text:"Kode",sortable:false,width:150,align:"center",tpl:"{poliRujukan.kode}"},{xtype:"templatecolumn",text:"Nama",sortable:false,tpl:"{poliRujukan.nama}"}]},{text:"Perujuk",flex:1,columns:[{xtype:"templatecolumn",text:"Kode",sortable:false,width:150,align:"center",tpl:"{provPerujuk.kode}"},{xtype:"templatecolumn",text:"Nama",sortable:false,tpl:"{provPerujuk.nama}"}]}],plugins:[{ptype:"cellediting",clicksToEdit:1}],dockedItems:[{xtype:"toolbar",items:[{xtype:"textfield",name:"nomor",emptyText:"Nomor Kartu",flex:1},{xtype:"combobox",name:"faskes",store:Ext.create("Ext.data.Store",{fields:["id","name"],data:[{id:1,name:"Faskes 1"},{id:2,name:"Faskes 2/RS"}]}),displayField:"name",valueField:"id",editable:false,value:2},{xtype:"button",iconCls:"x-fa fa-search",handler:"onSearch"}]},{xtype:"pagingtoolbar",hidden:true,bind:{store:"{store}",hidden:"{!listConfig.paging}"},dock:"bottom",beforePageText:"Hal.",afterPageText:"dari {0}",displayMsg:"Menampilkan {0} - {1} dari {2}",displayInfo:true}],doAfterLoad:function(y,s,v,t){try{if(!v){if(t.error){var u=t.error.response,x=Ext.JSON.decode(u.responseText),e=x.detail?(Ext.isObject(x.detail)?Ext.JSON.encode(x.detail):x.detail):"Koneksi Gagal";y.notifyMessage(e,"danger-red")}}}catch(w){y.notifyMessage("Koneksi Gagal","danger-red")}},setNomorKartu:function(m){var l=this.down("[name=nomor]"),n=this.down("button");l.setValue(m);l.setDisabled(true);this.setParams({noKartu:m})}},0,["plugins-bpjs-rujukan-grid"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","plugins-bpjs-rujukan-grid"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"plugins-bpjs-rujukan-grid":true},["widget.plugins-bpjs-rujukan-grid"],0,[plugins.bpjs.rujukan,"Grid"],0));(Ext.cmd.derive("plugins.bpjs.rujukan.GridController",Ext.app.ViewController,{onSearch:function(f){this.cari()},privates:{cari:function(){var o=this,s=o.getView(),q=s.down("pagingtoolbar"),n=s.down("[name=nomor]").getValue(),p=s.down("combobox").getSelection();s.removeDataStore();s.setParams({noKartu:n,faskes:p?p.get("id"):"2"});if(q){q.moveFirst()}else{s.load()}}}},0,0,0,0,["controller.plugins-bpjs-rujukan-grid"],0,[plugins.bpjs.rujukan,"GridController"],0));(Ext.cmd.derive("plugins.bpjs.rujukan.Workspace",com.Tab,{controller:"workspace-bpjs-rujukan",defaults:{textAlign:"left"},tabPosition:"right",tabRotation:0,initComponent:function(){var f=this;f.items=[{title:"Pencarian",xtype:"form-bpjs-rujukan-pencarian"},{title:"Cari Data Rujukan",xtype:"plugins-bpjs-rujukan-grid"}];com.Tab.prototype.initComponent.apply(this,arguments)},load:function(){var f=this.getActiveTab();if(f){if(f.load){f.load({})}}},listeners:{tabchange:"onTabChange"}},0,["workspace-bpjs-rujukan"],["component","box","container","panel","tabpanel","com-tab","workspace-bpjs-rujukan"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"workspace-bpjs-rujukan":true},["widget.workspace-bpjs-rujukan"],0,[plugins.bpjs.rujukan,"Workspace"],0));(Ext.cmd.derive("plugins.bpjs.rujukan.WorkspaceController",Ext.app.ViewController,{onTabChange:function(g,l){if(l.load){l.load({})}}},0,0,0,0,["controller.workspace-bpjs-rujukan"],0,[plugins.bpjs.rujukan,"WorkspaceController"],0));(Ext.cmd.derive("plugins.bpjs.rujukan.pencarian.Form",com.Form,{controller:"form-bpjs-rujukan-pencarian",viewModel:{data:{emptytext:"Masukkan No. Rujukan"}},layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldcontainer",layout:{type:"hbox"},items:[{xtype:"segmentedbutton",items:[{text:"No. Rujukan",idx:1,pressed:true},{text:"No. Kartu BPJS",idx:2}],listeners:{toggle:"onToggleButton"}},{xtype:"textfield",bind:{emptyText:"{emptytext}"},flex:1,reference:"nomor"},{xtype:"button",iconCls:"x-fa fa-search",tooltip:"Cari",handler:"onButtonCari"}]},{xtype:"textareafield",fieldLabel:"Respon",reference:"response",labelAlign:"top",readOnly:true,flex:1}]},0,["form-bpjs-rujukan-pencarian"],["component","box","container","panel","form","com-form","form-bpjs-rujukan-pencarian"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-bpjs-rujukan-pencarian":true},["widget.form-bpjs-rujukan-pencarian"],0,[plugins.bpjs.rujukan.pencarian,"Form"],0));(Ext.cmd.derive("plugins.bpjs.rujukan.pencarian.FormController",Ext.app.ViewController,{idxSelected:1,init:function(){var g=this,l=g.getView();g.integrasi=l.app.xitr("ID",1);if(g.integrasi){g.service=Ext.create(g.integrasi.NAMA_KLAS,{})}},onToggleButton:function(n,m,l){this.getViewModel().set("emptytext","Masukkan "+m.text);this.idxSelected=m.idx},onButtonCari:function(n){var m=this,p=m.getView(),o=m.getReferences();o.response.setValue("");if(o.nomor.getValue()===""){return}if(m.service){if(m.idxSelected===1){p.setLoading(true);m.service.cariRujukanDgnNoRujukan(o.nomor.getValue(),function(f,e){if(f){o.response.setValue(JSON.stringify(e,undefined,2))}p.setLoading(false)})}if(m.idxSelected===2){p.setLoading(true);m.service.cariRujukanDgnNoKartuBPJS(o.nomor.getValue(),function(f,e){if(f){o.response.setValue(JSON.stringify(e,undefined,2))}p.setLoading(false)})}}},destroy:function(){if(this.service){delete this.service}Ext.app.ViewController.prototype.destroy.call(this)}},0,0,0,0,["controller.form-bpjs-rujukan-pencarian"],0,[plugins.bpjs.rujukan.pencarian,"FormController"],0));(Ext.cmd.derive("plugins.bpjs.sep.Workspace",com.Tab,{controller:"workspace-bpjs-sep",defaults:{textAlign:"left"},tabPosition:"right",tabRotation:0,initComponent:function(){var f=this;f.items=[{title:"Insert SEP",xtype:"form-sep-insert"},{title:"Update SEP",xtype:"form-sep-update"},{title:"Hapus SEP",xtype:"form-sep-hapus"},{title:"Cari SEP",xtype:"form-sep-detail"},{title:"Pengajuan",xtype:"plugins-bpjs-sep-pengajuan-form"},{title:"Aproval Pengajuan",xtype:"plugins-bpjs-sep-pengajuan-aproval-form"},{title:"Update Tanggal Pulang",xtype:"form-sep-update-tanggal-pulang"},{title:"Integrasi SEP dengan Inacbg",xtype:"form-sep-integrasi-inacbg"},{title:"Mapping Transaksi SEP",xtype:"form-sep-mapping-transaksi"},{title:"Monitoring Verifikasi Klaim",xtype:"form-sep-monitoring-verifikasi-klaim"},{title:"Data Kunjungan Peserta",xtype:"form-sep-kunjungan-peserta"},{title:"Data Riwayat Pelayanan Peserta",xtype:"form-sep-riwayat-pelayanan-peserta"}];com.Tab.prototype.initComponent.apply(this,arguments)},load:function(){var f=this.getActiveTab();if(f){if(f.load){f.load({})}}},listeners:{tabchange:"onTabChange"}},0,["workspace-bpjs-sep"],["component","box","container","panel","tabpanel","com-tab","workspace-bpjs-sep"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"workspace-bpjs-sep":true},["widget.workspace-bpjs-sep"],0,[plugins.bpjs.sep,"Workspace"],0));(Ext.cmd.derive("plugins.bpjs.sep.WorkspaceController",Ext.app.ViewController,{onTabChange:function(g,l){if(l.load){l.load({})}}},0,0,0,0,["controller.workspace-bpjs-sep"],0,[plugins.bpjs.sep,"WorkspaceController"],0));(Ext.cmd.derive("plugins.bpjs.sep.detail.Form",com.Form,{controller:"form-sep-detail",layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldcontainer",layout:{type:"hbox"},items:[{xtype:"textfield",fieldLabel:"No. SEP",reference:"nomor",flex:1},{xtype:"button",text:"Tampilkan Detail",iconCls:"x-fa fa-list",handler:"onTampilkan"}]},{xtype:"textareafield",fieldLabel:"Respon",reference:"response",labelAlign:"top",readOnly:true,flex:1}]},0,["form-sep-detail"],["component","box","container","panel","form","com-form","form-sep-detail"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-sep-detail":true},["widget.form-sep-detail"],0,[plugins.bpjs.sep.detail,"Form"],0));(Ext.cmd.derive("plugins.bpjs.sep.detail.FormController",Ext.app.ViewController,{init:function(){var g=this,l=g.getView();g.integrasi=l.app.xitr("ID",1);if(g.integrasi){g.service=Ext.create(g.integrasi.NAMA_KLAS,{})}},onTampilkan:function(n){var m=this,p=m.getView(),o=m.getReferences();o.response.setValue("");if(o.nomor.getValue()===""){return}if(m.service){p.setLoading(true);m.service.cekSEP(o.nomor.getValue(),function(f,e){if(f){o.response.setValue(JSON.stringify(e,undefined,2))}p.setLoading(false)})}},destroy:function(){if(this.service){delete this.service}Ext.app.ViewController.prototype.destroy.call(this)}},0,0,0,0,["controller.form-sep-detail"],0,[plugins.bpjs.sep.detail,"FormController"],0));(Ext.cmd.derive("plugins.bpjs.sep.hapus.Form",com.Form,{controller:"form-sep-hapus",layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldcontainer",layout:{type:"hbox"},items:[{xtype:"textfield",fieldLabel:"No. SEP",reference:"nomor",emptyText:"Masukkan No. SEP",flex:1},{xtype:"button",ui:"soft-red",text:"Hapus",iconCls:"x-fa fa-minus-circle",tooltip:"Hapus SEP",handler:"onHapus"}]},{xtype:"textareafield",fieldLabel:"Respon",reference:"response",labelAlign:"top",readOnly:true,flex:1}]},0,["form-sep-hapus"],["component","box","container","panel","form","com-form","form-sep-hapus"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-sep-hapus":true},["widget.form-sep-hapus"],0,[plugins.bpjs.sep.hapus,"Form"],0));(Ext.cmd.derive("plugins.bpjs.sep.hapus.FormController",Ext.app.ViewController,{init:function(){var g=this,l=g.getView();g.integrasi=l.app.xitr("ID",1);if(g.integrasi){g.service=Ext.create(g.integrasi.NAMA_KLAS,{})}},onHapus:function(n){var m=this,p=m.getView(),o=m.getReferences();o.response.setValue("");if(o.nomor.getValue()===""){return}if(m.service){p.setLoading(true);m.service.batalkanSEP({nomor:o.nomor.getValue(),user:p.app.usrNm},function(f,e){if(f){o.response.setValue(JSON.stringify(e,undefined,2))}p.setLoading(false)})}},destroy:function(){if(this.service){delete this.service}Ext.app.ViewController.prototype.destroy.call(this)}},0,0,0,0,["controller.form-sep-hapus"],0,[plugins.bpjs.sep.hapus,"FormController"],0));(Ext.cmd.derive("plugins.bpjs.sep.insert.Form",com.Form,{controller:"form-sep-insert",klsRawat:3,jnsPelayanan:2,lakaLantas:2,asalRujukan:1,poliEksekutif:0,cob:0,katarak:0,penjamin:0,suplesi:0,layout:{type:"vbox",align:"stretch"},defaults:{xtype:"fieldcontainer",layout:{type:"hbox"},margin:"1 0 0 0"},items:[{fieldLabel:"No. Kartu",items:[{xtype:"textfield",emptyText:"Masukkan No. Kartu",margin:"0 15 0 0",reference:"noKartu",flex:1},{xtype:"datefield",fieldLabel:"Tgl. SEP",labelWidth:50,format:"d/m/Y",reference:"tglSep",width:180,margin:"0 1 0 0"},{xtype:"timefield",format:"H:i:s",width:110,reference:"wktSep"}]},{fieldLabel:"Asal Rujukan",items:[{xtype:"segmentedbutton",items:[{text:"Faskes 1",idx:1,pressed:true},{text:"Faskes 2(RS)",idx:2}],listeners:{toggle:"onToggleAsalRujukan"},margin:"0 15 0 0"},{xtype:"textfield",fieldLabel:"Nomor",emptyText:"Masukkan No. Rujukan",margin:"0 15 0 0",reference:"noRujukan",labelWidth:45,flex:1},{xtype:"textfield",fieldLabel:"PPK",emptyText:"Masukkan PPK Rujukan",margin:"0 15 0 0",reference:"ppkRujukan",labelWidth:27,width:120},{xtype:"datefield",fieldLabel:"Tgl.",labelWidth:27,format:"d/m/Y",reference:"tglRujukan",width:157,margin:"0 1 0 0"},{xtype:"timefield",format:"H:i:s",width:110,reference:"wktRujukan"}]},{fieldLabel:"Jenis Pelayanan",items:[{xtype:"segmentedbutton",items:[{text:"Rawat Inap",idx:1},{text:"Rawat Jalan",idx:2,pressed:true}],listeners:{toggle:"onToggleButtonRawat"},margin:"0 15 0 0"},{xtype:"textfield",fieldLabel:"Catatan",labelWidth:50,reference:"catatan",emptyText:"Masukkan Catatan",flex:1}]},{fieldLabel:"Diagnosa Awal",items:[{xtype:"textfield",emptyText:"Masukkan Diagnosa Awal",reference:"diagAwal",margin:"0 15 0 0",flex:1},{xtype:"textfield",fieldLabel:"Poli Tujuan",labelWidth:70,emptyText:"Masukkan Poli Tujuan",reference:"poliTujuan",margin:"0 15 0 0",flex:1},{fieldLabel:"Poli Eksekutif?",xtype:"fieldcontainer",labelWidth:90,items:[{xtype:"segmentedbutton",items:[{text:"Ya",idx:1},{text:"Tidak",idx:0,pressed:true}],listeners:{toggle:"onTogglePoliEksekutif"}}]}]},{fieldLabel:"Kelas Rawat",defaults:{margin:"0 15 0 0"},items:[{xtype:"segmentedbutton",items:[{text:"Kelas 1",idx:1},{text:"Kelas 2",idx:2},{text:"Kelas 3",idx:3,pressed:true}],listeners:{toggle:"onToggleButtonKelas"}},{fieldLabel:"COB?",xtype:"fieldcontainer",labelWidth:35,items:[{xtype:"segmentedbutton",items:[{text:"Ya",idx:1},{text:"Tidak",idx:0,pressed:true}],listeners:{toggle:"onToggleCOB"}}]},{fieldLabel:"Katarak?",xtype:"fieldcontainer",labelWidth:60,items:[{xtype:"segmentedbutton",items:[{text:"Ya",idx:1},{text:"Tidak",idx:0,pressed:true}],listeners:{toggle:"onToggleKatarak"}}]}]},{fieldLabel:"SKDP",items:[{xtype:"textfield",emptyText:"Masukkan No. Surat",reference:"nosuratskdp",flex:2},{xtype:"plugins-bpjs-referensi-spesialistik-combo",reference:"spesialiscombo",flex:1,listeners:{select:"onSelectSpesialistik"}},{xtype:"plugins-bpjs-referensi-dpjp-combo",flex:1,reference:"dpjpcombo"}]},{fieldLabel:"Laka Lantas",items:[{xtype:"segmentedbutton",items:[{text:"Kasus Kecelakaan",idx:1},{text:"Bukan Kasus Kecelakaan",idx:2,pressed:true}],listeners:{toggle:"onToggleButtonLakaLantas"},margin:"0 15 0 0"},{xtype:"combobox",fieldLabel:"Penjamin",labelWidth:60,store:{fields:["ID","DESKRIPSI"],data:[{ID:1,DESKRIPSI:"PT. Jasa Raharja"},{ID:2,DESKRIPSI:"BPJS Ketenagakerjaan"},{ID:3,DESKRIPSI:"PT. TASPEN"},{ID:4,DESKRIPSI:"PT. ASABRI"}]},displayField:"DESKRIPSI",valueField:"ID",editable:false,listeners:{select:"onSelectPenjamin"},margin:"0 15 0 0"},{xtype:"datefield",fieldLabel:"Tgl. Kejadian",labelWidth:90,format:"d/m/Y",reference:"tglkejadian",width:220,margin:"0 15 0 0"},{xtype:"textfield",fieldLabel:"Keterangan",labelWidth:90,emptyText:"Masukkan Keterangan",reference:"lokasiLaka",flex:1}]},{fieldLabel:"Suplesi",items:[{xtype:"segmentedbutton",items:[{text:"Ya",idx:1},{text:"Tidak",idx:0,pressed:true}],listeners:{toggle:"onToggleButtonSuplesi"},margin:"0 15 0 0"},{xtype:"textfield",emptyText:"Masukkan No. Suplesi",reference:"nosuplesi",flex:1},{xtype:"plugins-bpjs-referensi-wilayah-combo",name:"KODE_PROPINSI",firstLoad:true,reference:"propinsicombo",emptyText:"[Propinsi]",flex:1,listeners:{select:"onSelectWilayah"}},{xtype:"plugins-bpjs-referensi-wilayah-combo",name:"KODE_KABUPATEN",reference:"kabupatencombo",params:{tipe:2},emptyText:"[Kabupaten]",flex:1,listeners:{select:"onSelectWilayah"}},{xtype:"plugins-bpjs-referensi-wilayah-combo",name:"KODE_KECAMATAN",reference:"kecamatancombo",params:{tipe:3},flex:1,emptyText:"[Kecamatan]"}]},{fieldLabel:"User",items:[{xtype:"textfield",emptyText:"Masukkan Nama Pengguna",flex:1,reference:"user",margin:"0 15 0 0"},{xtype:"textfield",fieldLabel:"No. MR",labelWidth:50,emptyText:"Masukkan Nomor Rekam Medis",reference:"noMr",flex:1,margin:"0 15 0 0"},{xtype:"textfield",fieldLabel:"No. Telp.",labelWidth:55,emptyText:"No. Telepon Peserta/Pasien",reference:"noTelp",flex:1}]},{xtype:"fieldcontainer",items:[{xtype:"component",flex:1},{xtype:"button",text:"Generate SEP",handler:"onGenerateSEP"}]},{xtype:"textareafield",fieldLabel:"Respon",reference:"response",labelAlign:"top",readOnly:true,flex:1}],load:function(){var t=this.down("[reference=tglSep]"),u=this.down("[reference=wktSep]"),q=this.down("[reference=tglRujukan]"),s=this.down("[reference=wktRujukan]"),v=this.down("[reference=tglkejadian]"),p=this.down("[reference=spesialiscombo]"),w=this.down("[reference=propinsicombo]");t.setValue(this.getSysdate());u.setValue(this.getSysdate());q.setValue(this.getSysdate());s.setValue(this.getSysdate());v.setValue(this.getSysdate());p.load();w.load()}},0,["form-sep-insert"],["component","box","container","panel","form","com-form","form-sep-insert"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-sep-insert":true},["widget.form-sep-insert"],0,[plugins.bpjs.sep.insert,"Form"],0));(Ext.cmd.derive("plugins.bpjs.sep.insert.FormController",Ext.app.ViewController,{init:function(){var g=this,l=g.getView();g.integrasi=l.app.xitr("ID",1);if(g.integrasi){g.service=Ext.create(g.integrasi.NAMA_KLAS,{})}},onToggleButtonKelas:function(n,m,l){this.getView().klsRawat=m.idx},onToggleButtonRawat:function(n,m,l){this.getView().jnsPelayanan=m.idx},onToggleAsalRujukan:function(n,m,l){this.getView().asalRujukan=m.idx},onTogglePoliEksekutif:function(n,m,l){this.getView().poliEksekutif=m.idx},onToggleCOB:function(n,m,l){this.getView().cob=m.idx},onToggleKatarak:function(n,m,l){this.getView().katarak=m.idx},onSelectSpesialistik:function(q,v){var p=this,u=p.getView(),s=p.getReferences(),t=s.dpjpcombo.getStore(),w=s.tglSep.getValue();if(v){t.setQueryParams({jenisPelayanan:u.jnsPelayanan,tglPelayanan:Ext.util.Format.date(w,"Y-m-d"),kodeSpesialis:v.get("kode")});t.load()}},onToggleButtonLakaLantas:function(n,m,l){this.getView().lakaLantas=m.idx},onSelectPenjamin:function(l,g){if(g){this.getView().penjamin=g.get("ID")}},onToggleButtonSuplesi:function(n,m,l){this.getView().suplesi=m.idx},onSelectWilayah:function(m,l){var n=this.getReferences();if(m.params.tipe==1){n.kecamatancombo.getStore().removeAll();n.kabupatencombo.getStore().removeAll();n.kabupatencombo.params.kodePropinsi=l.get("kode");n.kabupatencombo.load()}if(m.params.tipe==2){n.kecamatancombo.getStore().removeAll();n.kecamatancombo.params.kodeKabupaten=l.get("kode");n.kecamatancombo.load()}},onGenerateSEP:function(G){var y=this,I=y.getView(),t=y.getReferences();t.response.setValue("");if(y.service){var A=t.tglSep.getValue(),F=t.wktSep.getValue(),D=t.tglRujukan.getValue(),x=t.wktRujukan.getValue(),B=t.tglkejadian.getValue(),z=t.dpjpcombo.getSelection(),E=t.propinsicombo.getSelection(),C=t.kabupatencombo.getSelection(),H=t.kecamatancombo.getSelection();A.setHours(F.getHours());A.setMinutes(F.getMinutes());A.setSeconds(F.getSeconds());D.setHours(x.getHours());D.setMinutes(x.getMinutes());D.setSeconds(x.getSeconds());I.setLoading(true);y.service.buatSEP({noKartu:t.noKartu.getValue(),tglSep:Ext.util.Format.date(A,"Y-m-d H:i:s"),tglRujukan:Ext.util.Format.date(D,"Y-m-d H:i:s"),asalRujukan:I.asalRujukan,noRujukan:t.noRujukan.getValue(),ppkRujukan:t.ppkRujukan.getValue(),jnsPelayanan:I.jnsPelayanan,catatan:t.catatan.getValue(),diagAwal:t.diagAwal.getValue(),poliTujuan:t.poliTujuan.getValue(),eksekutif:I.poliEksekutif,klsRawat:I.klsRawat,cob:I.cob,katarak:I.katarak,noSuratSKDP:t.nosuratskdp.getValue(),dpjpSKDP:z?z.get("kode"):"",lakaLantas:I.lakaLantas,penjamin:I.penjamin,tglKejadian:Ext.util.Format.date(B,"Y-m-d"),suplesi:I.suplesi,noSuplesi:t.nosuplesi.getValue(),lokasiLaka:t.lokasiLaka.getValue(),propinsi:E?E.get("kode"):"",kabupaten:C?C.get("kode"):"",kecamatan:H?H.get("kode"):"",user:t.user.getValue(),norm:t.noMr.getValue(),noTelp:t.noTelp.getValue()},function(e,f){if(e){t.response.setValue(JSON.stringify(f,undefined,2))}I.setLoading(false)})}},destroy:function(){if(this.service){delete this.service}Ext.app.ViewController.prototype.destroy.call(this)}},0,0,0,0,["controller.form-sep-insert"],0,[plugins.bpjs.sep.insert,"FormController"],0));(Ext.cmd.derive("plugins.bpjs.sep.integrasi.inacbg.Form",com.Form,{controller:"form-sep-integrasi-inacbg",layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldcontainer",layout:{type:"hbox"},items:[{xtype:"textfield",fieldLabel:"No. SEP",reference:"nomor",emptyText:"Masukkan No. SEP",flex:1},{xtype:"button",ui:"soft-cyan",text:"Tampilkan",iconCls:"x-fa fa-list",tooltip:"Tampilkan",handler:"onTampilkan"}]},{xtype:"textareafield",fieldLabel:"Respon",reference:"response",labelAlign:"top",readOnly:true,flex:1}]},0,["form-sep-integrasi-inacbg"],["component","box","container","panel","form","com-form","form-sep-integrasi-inacbg"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-sep-integrasi-inacbg":true},["widget.form-sep-integrasi-inacbg"],0,[plugins.bpjs.sep.integrasi.inacbg,"Form"],0));(Ext.cmd.derive("plugins.bpjs.sep.integrasi.inacbg.FormController",Ext.app.ViewController,{init:function(){var g=this,l=g.getView();g.integrasi=l.app.xitr("ID",1);if(g.integrasi){g.service=Ext.create(g.integrasi.NAMA_KLAS,{})}},onTampilkan:function(n){var m=this,p=m.getView(),o=m.getReferences();o.response.setValue("");if(o.nomor.getValue()===""){return}if(m.service){p.setLoading(true);m.service.inacbg(o.nomor.getValue(),function(f,e){if(f){o.response.setValue(JSON.stringify(e,undefined,2))}p.setLoading(false)})}},destroy:function(){if(this.service){delete this.service}Ext.app.ViewController.prototype.destroy.call(this)}},0,0,0,0,["controller.form-sep-integrasi-inacbg"],0,[plugins.bpjs.sep.integrasi.inacbg,"FormController"],0));(Ext.cmd.derive("plugins.bpjs.sep.kunjungan.Form",com.Form,{controller:"form-sep-kunjungan-peserta",layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldcontainer",layout:{type:"hbox"},items:[{xtype:"textfield",fieldLabel:"No. SEP",reference:"nomor",emptyText:"Masukkan No. SEP",flex:1},{xtype:"button",ui:"soft-cyan",text:"Tampilkan",iconCls:"x-fa fa-list",tooltip:"Tampilkan",handler:"onTampilkan"}]},{xtype:"textareafield",fieldLabel:"Respon",reference:"response",labelAlign:"top",readOnly:true,flex:1}]},0,["form-sep-kunjungan-peserta"],["component","box","container","panel","form","com-form","form-sep-kunjungan-peserta"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-sep-kunjungan-peserta":true},["widget.form-sep-kunjungan-peserta"],0,[plugins.bpjs.sep.kunjungan,"Form"],0));(Ext.cmd.derive("plugins.bpjs.sep.kunjungan.FormController",Ext.app.ViewController,{init:function(){var g=this,l=g.getView();g.integrasi=l.app.xitr("ID",1);if(g.integrasi){g.service=Ext.create(g.integrasi.NAMA_KLAS,{})}},onTampilkan:function(n){var m=this,p=m.getView(),o=m.getReferences();o.response.setValue("");if(o.nomor.getValue()===""){return}if(m.service){p.setLoading(true);m.service.kunjunganPeserta(o.nomor.getValue(),function(f,e){if(f){o.response.setValue(JSON.stringify(e,undefined,2))}p.setLoading(false)})}},destroy:function(){if(this.service){delete this.service}Ext.app.ViewController.prototype.destroy.call(this)}},0,0,0,0,["controller.form-sep-kunjungan-peserta"],0,[plugins.bpjs.sep.kunjungan,"FormController"],0));(Ext.cmd.derive("plugins.bpjs.sep.mapping.transaksi.Form",com.Form,{controller:"form-sep-mapping-transaksi",layout:{type:"vbox",align:"stretch"},defaults:{margin:"1 0 0 0"},items:[{xtype:"textfield",fieldLabel:"No. SEP",reference:"nomor",emptyText:"Masukkan No. SEP"},{xtype:"textfield",fieldLabel:"No. Transaksi",emptyText:"Masukkan No. Transaksi (No. Pendaftaran di SIMRS)",reference:"notrx"},{xtype:"fieldcontainer",layout:"hbox",items:[{xtype:"component",flex:1},{xtype:"button",text:"Update",tooltip:"Update",handler:"onUpdate"}]},{xtype:"textareafield",fieldLabel:"Respon",reference:"response",labelAlign:"top",readOnly:true,flex:1}]},0,["form-sep-mapping-transaksi"],["component","box","container","panel","form","com-form","form-sep-mapping-transaksi"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-sep-mapping-transaksi":true},["widget.form-sep-mapping-transaksi"],0,[plugins.bpjs.sep.mapping.transaksi,"Form"],0));(Ext.cmd.derive("plugins.bpjs.sep.mapping.transaksi.FormController",Ext.app.ViewController,{init:function(){var g=this,l=g.getView();g.integrasi=l.app.xitr("ID",1);if(g.integrasi){g.service=Ext.create(g.integrasi.NAMA_KLAS,{})}},onUpdate:function(n){var m=this,p=m.getView(),o=m.getReferences();o.response.setValue("");if(o.nomor.getValue()===""){return}if(m.service){p.setLoading(true);m.service.storeNoTransaksiDiKunjungan(o.nomor.getValue(),o.notrx.getValue(),function(f,e){if(f){o.response.setValue(JSON.stringify(e,undefined,2))}p.setLoading(false)})}},destroy:function(){if(this.service){delete this.service}Ext.app.ViewController.prototype.destroy.call(this)}},0,0,0,0,["controller.form-sep-mapping-transaksi"],0,[plugins.bpjs.sep.mapping.transaksi,"FormController"],0));(Ext.cmd.derive("plugins.bpjs.sep.monitoring.verifikasiklaim.Form",com.Form,{controller:"form-sep-monitoring-verifikasi-klaim",layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldcontainer",layout:{type:"vbox",align:"stretch"},defaults:{xtype:"fieldcontainer",margin:"0 0 1 0"},items:[{fieldLabel:"Tgl. Masuk",layout:"hbox",items:[{xtype:"datefield",format:"d/m/Y",reference:"tglMasuk",margin:"0 15 0 0"},{xtype:"datefield",fieldLabel:"Tgl. Keluar",labelWidth:70,reference:"tglKeluar",format:"d/m/Y"}]},{fieldLabel:"Kelas Rawat",items:[{xtype:"segmentedbutton",items:[{text:"Kelas 1",idx:1,pressed:true},{text:"Kelas 2",idx:2},{text:"Kelas 3",idx:3}],listeners:{toggle:"onToggleButtonKelas"}}]},{fieldLabel:"Jenis Pelayanan",items:[{xtype:"segmentedbutton",items:[{text:"Rawat Inap",idx:1,pressed:true},{text:"Rawat Jalan",idx:2}],listeners:{toggle:"onToggleButtonRawat"}}]},{fieldLabel:"Pencarian",items:[{xtype:"segmentedbutton",items:[{text:"Tanggal Masuk",idx:0,pressed:true},{text:"Tanggal Keluar",idx:1}],listeners:{toggle:"onToggleButtonTgl"}}]},{fieldLabel:"Status",items:[{xtype:"segmentedbutton",items:[{text:"Klaim baru",idx:"00",pressed:true},{text:"Klaim Terima CBG",idx:"10"},{text:"Klaim Layak",idx:"21"},{text:"Klaim Tidak Layak",idx:"22"},{text:"Klaim Pending",idx:"23"},{text:"Terverifikasi",idx:"30"},{text:"Proses Cabang",idx:"40"}],listeners:{toggle:"onToggleButtonStatus"}}]},{layout:{type:"hbox",align:"stretch"},items:[{xtype:"component",flex:1},{xtype:"button",iconCls:"x-fa fa-list",text:"Tampilkan",handler:"onTampilkan"}]}]},{xtype:"textareafield",fieldLabel:"Respon",reference:"response",labelAlign:"top",readOnly:true,flex:1}],load:function(){var l=this.down("[reference=tglMasuk]"),g=this.down("[reference=tglKeluar]");l.setValue(this.getSysdate());g.setValue(this.getSysdate())}},0,["form-sep-monitoring-verifikasi-klaim"],["component","box","container","panel","form","com-form","form-sep-monitoring-verifikasi-klaim"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-sep-monitoring-verifikasi-klaim":true},["widget.form-sep-monitoring-verifikasi-klaim"],0,[plugins.bpjs.sep.monitoring.verifikasiklaim,"Form"],0));(Ext.cmd.derive("plugins.bpjs.sep.monitoring.verifikasiklaim.FormController",Ext.app.ViewController,{klsRawat:1,jnsPelayanan:1,cari:0,status:"00",init:function(){var g=this,l=g.getView();g.integrasi=l.app.xitr("ID",1);if(g.integrasi){g.service=Ext.create(g.integrasi.NAMA_KLAS,{})}},onToggleButtonKelas:function(n,m,l){this.klsRawat=m.idx},onToggleButtonRawat:function(n,m,l){this.jnsPelayanan=m.idx},onToggleButtonTgl:function(n,m,l){this.cari=m.idx},onToggleButtonStatus:function(n,m,l){this.status=m.idx},onTampilkan:function(n){var m=this,p=m.getView(),o=m.getReferences();o.response.setValue("");if(m.service){p.setLoading(true);m.service.monitoringVerifikasiKlaim({tglMasuk:Ext.util.Format.date(o.tglMasuk.getValue(),"Y-m-d"),tglKeluar:Ext.util.Format.date(o.tglKeluar.getValue(),"Y-m-d"),kelasRawat:m.klsRawat,jnsPelayanan:m.jnsPelayanan,cari:m.cari,status:m.status},function(f,e){if(f){o.response.setValue(JSON.stringify(e,undefined,2))}p.setLoading(false)})}},destroy:function(){if(this.service){delete this.service}Ext.app.ViewController.prototype.destroy.call(this)}},0,0,0,0,["controller.form-sep-monitoring-verifikasi-klaim"],0,[plugins.bpjs.sep.monitoring.verifikasiklaim,"FormController"],0));(Ext.cmd.derive("plugins.bpjs.sep.pengajuan.Form",com.Form,{controller:"plugins-bpjs-sep-pengajuan-form",layout:{type:"vbox",align:"stretch"},defaults:{xtype:"fieldcontainer",layout:{type:"hbox"},margin:"1 0 0 0"},items:[{fieldLabel:"No. Kartu",items:[{xtype:"textfield",emptyText:"Masukkan No. Kartu",margin:"0 15 0 0",reference:"noKartu",flex:1,bind:{readOnly:"{formConfig.readOnly}"}},{xtype:"datefield",fieldLabel:"Tgl. SEP",labelWidth:50,format:"d/m/Y",reference:"tglSep",width:180}]},{fieldLabel:"Jenis Pelayanan",items:[{xtype:"segmentedbutton",items:[{text:"Rawat Inap",idx:1},{text:"Rawat Jalan",idx:2,pressed:true}],listeners:{toggle:"onToggleButtonRawat"},margin:"0 15 0 0"},{xtype:"textfield",fieldLabel:"Keterangan",labelWidth:75,reference:"keterangan",emptyText:"Masukkan Keterangan",flex:1}]},{xtype:"fieldcontainer",layout:"hbox",items:[{xtype:"component",flex:1},{xtype:"button",text:"Ajukan",tooltip:"Pengajuan",handler:"onAjukan"}]},{xtype:"textareafield",fieldLabel:"Respon",reference:"response",labelAlign:"top",readOnly:true,flex:1}],load:function(){var f=this.down("datefield");f.setValue(this.getSysdate())},setData:function(g){var l=this.getReferences();l.noKartu.setValue(g.noKartu);l.tglSep.setValue(g.tglSep)}},0,["plugins-bpjs-sep-pengajuan-form"],["component","box","container","panel","form","com-form","plugins-bpjs-sep-pengajuan-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"plugins-bpjs-sep-pengajuan-form":true},["widget.plugins-bpjs-sep-pengajuan-form"],0,[plugins.bpjs.sep.pengajuan,"Form"],0));(Ext.cmd.derive("plugins.bpjs.sep.pengajuan.FormController",Ext.app.ViewController,{jnsPelayanan:1,init:function(){var g=this,l=g.getView();g.integrasi=l.app.xitr("ID",1);if(g.integrasi){g.service=Ext.create(g.integrasi.NAMA_KLAS,{})}},onToggleButtonRawat:function(n,m,l){this.jnsPelayanan=m.idx},onAjukan:function(n){var m=this,p=m.getView(),o=m.getReferences();o.response.setValue("");if(o.noKartu.getValue()===""){return}if(m.service){p.setLoading(true);m.service.pengajuanSEP({noKartu:o.noKartu.getValue(),tglSep:Ext.util.Format.date(o.tglSep.getValue(),"Y-m-d"),jnsPelayanan:m.jnsPelayanan,keterangan:o.keterangan.getValue(),user:p.app.usrNm},function(f,e){if(f){o.response.setValue(JSON.stringify(e,undefined,2))}p.setLoading(false);p.fireEvent("save",f,e)})}},destroy:function(){if(this.service){delete this.service}Ext.app.ViewController.prototype.destroy.call(this)}},0,0,0,0,["controller.plugins-bpjs-sep-pengajuan-form"],0,[plugins.bpjs.sep.pengajuan,"FormController"],0));(Ext.cmd.derive("plugins.bpjs.sep.pengajuan.Grid",com.Grid,{controller:"plugins-bpjs-sep-pengajuan-grid",title:"Daftar Pengajuan SEP",iconCls:"x-fa fa-list",ui:"panel-cyan",cls:"shadow-panel",border:true,viewModel:{data:{listConfig:{paging:true}},stores:{store:{type:"plugins-bpjs-sep-pengajuan-store",queryParams:{status:1}}}},header:{padding:5,items:[{xtype:"search-field",emptyText:"Cari No. Kartu",flex:1,listeners:{search:"onSearch",clear:"onClear",change:"onChange"}}]},hideHeaders:true,columns:[{xtype:"templatecolumn",flex:2,tpl:new Ext.XTemplate('<div style="font-weight: bold; font-size: 12px; white-space:normal !important;">{[values.noKartu]} - {[this.getNamaPeserta(values)]}</div>','<div style="font-size: 12px; white-space:normal !important;">Tgl. SEP: {[this.tanggalFormat(values.tglSep, 2)]} / {[this.getJenisPelayanan(values.jnsPelayanan)]}</div>','<div style="font-size: 12px; white-space:normal !important;">Ket.:{[(values.keterangan)]}</div>','<div style="font-size: 12px; white-space:normal !important;">{[(values.user)]}</div>','<div style="font-size: 12px; white-space:normal !important;">{[this.tanggalFormat(values.tgl,1)]}</div>',{getNamaPeserta:function(l){var n=l.REFERENSI?l.REFERENSI:null,m=n?(n.PESERTA?n.PESERTA.nama:""):"";return m},tanggalFormat:function(n,l){var m=Ext.isDate(n)?n:Ext.Date.parse(n,l==1?"Y-m-d H:i:s":"Y-m-d");return Ext.Date.format(m,l==1?"d-m-Y H:i:s":"d-m-Y")},getJenisPelayanan:function(f){return f==1?"Rawat Inap":"Rawat Jalan"}})},{xtype:"widgetcolumn",text:"Status",align:"center",widget:{xtype:"fieldcontainer",layout:{type:"vbox",align:"stretch"},defaults:{padding:2,margin:"0 0 1 0"},items:[{xtype:"button",text:"Aprove",action:0,handler:"onAprove"},{xtype:"button",ui:"soft-red",text:"Batalkan",action:1,handler:"onBatal"}]}}],dockedItems:[{xtype:"pagingtoolbar",hidden:true,bind:{store:"{store}",hidden:"{!listConfig.paging}"},dock:"bottom",beforePageText:"Hal.",afterPageText:"dari {0}",displayMsg:"",displayInfo:true}],doAfterLoad:function(y,s,v,t){try{if(!v){if(t.error){var u=t.error.response,x=Ext.JSON.decode(u.responseText),e=x.detail?(Ext.isObject(x.detail)?Ext.JSON.encode(x.detail):x.detail):"Koneksi Gagal"}}}catch(w){y.notifyMessage("Koneksi Gagal untuk request daftar pengajuan","danger-red")}}},0,["plugins-bpjs-sep-pengajuan-grid"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","plugins-bpjs-sep-pengajuan-grid"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"plugins-bpjs-sep-pengajuan-grid":true},["widget.plugins-bpjs-sep-pengajuan-grid"],0,[plugins.bpjs.sep.pengajuan,"Grid"],0));(Ext.cmd.derive("plugins.bpjs.sep.pengajuan.GridController",Ext.app.ViewController,{query:"",init:function(){var g=this,l=g.getView();g.integrasi=l.app.xitr("ID",1);if(g.integrasi){g.service=Ext.create(g.integrasi.NAMA_KLAS,{})}},onSearch:function(l,g){this.query=g;this.cari()},onClear:function(){this.query="";this.cari()},onChange:function(s,u,o){var p=this,t=p.getView(),q=t.down("search-field");if(u===""){q.onClearClick()}},onAprove:function(o){var n=this,p=n.getView();if(n.service){var m=o.ownerCt.getWidgetRecord();p.showMessageBox({title:"Aprove Pengajuan SEP",message:"Anda yakin ingin mengaprove pengajuan ini ?",ui:"window-warning",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,defaultButton:"no",animateTarget:o,fn:function(e){if(e==="yes"){p.setLoading(true);n.service.aprovalPengajuanSEP({noKartu:m.get("noKartu"),tglSep:Ext.util.Format.date(m.get("tglSep"),"Y-m-d"),jnsPelayanan:m.get("jnsPelayanan"),keterangan:m.get("keterangan"),user:p.app.usrNm},function(f,g){if(f){p.notifyMessage("Aprove pengajuan SEP berhasil");p.refresh()}p.setLoading(false)})}}})}},onBatal:function(o){var n=this,p=n.getView();if(n.service){var m=o.ownerCt.getWidgetRecord();p.showMessageBox({title:"Batalkan Pengajuan SEP",message:"Anda yakin ingin membatalkan pengajuan ini ?",ui:"window-warning",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,defaultButton:"no",animateTarget:o,fn:function(e){if(e==="yes"){p.setLoading(true);n.service.batalPengajuanSEP({noKartu:m.get("noKartu"),tglSep:Ext.util.Format.date(m.get("tglSep"),"Y-m-d"),jnsPelayanan:m.get("jnsPelayanan"),user:p.app.usrNm},function(f,g){if(f){p.notifyMessage("Batal pengajuan SEP berhasil");p.refresh()}p.setLoading(false)})}}})}},privates:{cari:function(){var m=this,p=m.getView(),n=p.getStore(),o=p.down("pagingtoolbar");p.removeDataStore();if(m.query==""){delete n.queryParams.noKartu}else{p.setParams({noKartu:m.query})}if(o){o.moveFirst()}else{p.load()}}}},0,0,0,0,["controller.plugins-bpjs-sep-pengajuan-grid"],0,[plugins.bpjs.sep.pengajuan,"GridController"],0));(Ext.cmd.derive("plugins.bpjs.sep.pengajuan.aproval.Form",com.Form,{controller:"plugins-bpjs-sep-pengajuan-aproval-form",layout:{type:"vbox",align:"stretch"},defaults:{xtype:"fieldcontainer",layout:{type:"hbox"},margin:"1 0 0 0"},items:[{fieldLabel:"No. Kartu",items:[{xtype:"textfield",emptyText:"Masukkan No. Kartu",margin:"0 15 0 0",reference:"noKartu",flex:1},{xtype:"datefield",fieldLabel:"Tgl. SEP",labelWidth:50,format:"d/m/Y",reference:"tglSep",width:180}]},{fieldLabel:"Jenis Pelayanan",items:[{xtype:"segmentedbutton",items:[{text:"Rawat Inap",idx:1},{text:"Rawat Jalan",idx:2,pressed:true}],listeners:{toggle:"onToggleButtonRawat"},margin:"0 15 0 0"},{xtype:"textfield",fieldLabel:"Keterangan",labelWidth:75,reference:"keterangan",emptyText:"Masukkan Keterangan",flex:1}]},{xtype:"fieldcontainer",layout:"hbox",items:[{xtype:"component",flex:1},{xtype:"button",text:"Aprove",tooltip:"Aprove Pengajuan",handler:"onAprove"}]},{xtype:"textareafield",fieldLabel:"Respon",reference:"response",labelAlign:"top",readOnly:true,flex:1}],load:function(){var f=this.down("datefield");f.setValue(this.getSysdate())}},0,["plugins-bpjs-sep-pengajuan-aproval-form"],["component","box","container","panel","form","com-form","plugins-bpjs-sep-pengajuan-aproval-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"plugins-bpjs-sep-pengajuan-aproval-form":true},["widget.plugins-bpjs-sep-pengajuan-aproval-form"],0,[plugins.bpjs.sep.pengajuan.aproval,"Form"],0));(Ext.cmd.derive("plugins.bpjs.sep.pengajuan.aproval.FormController",Ext.app.ViewController,{jnsPelayanan:1,init:function(){var g=this,l=g.getView();g.integrasi=l.app.xitr("ID",1);if(g.integrasi){g.service=Ext.create(g.integrasi.NAMA_KLAS,{})}},onToggleButtonRawat:function(n,m,l){this.jnsPelayanan=m.idx},onAprove:function(n){var m=this,p=m.getView(),o=m.getReferences();o.response.setValue("");if(o.noKartu.getValue()===""){return}if(m.service){p.setLoading(true);m.service.aprovalPengajuanSEP({noKartu:o.noKartu.getValue(),tglSep:Ext.util.Format.date(o.tglSep.getValue(),"Y-m-d"),jnsPelayanan:m.jnsPelayanan,keterangan:o.keterangan.getValue(),user:p.app.usrNm},function(f,e){if(f){o.response.setValue(JSON.stringify(e,undefined,2))}p.setLoading(false)})}},destroy:function(){if(this.service){delete this.service}Ext.app.ViewController.prototype.destroy.call(this)}},0,0,0,0,["controller.plugins-bpjs-sep-pengajuan-aproval-form"],0,[plugins.bpjs.sep.pengajuan.aproval,"FormController"],0));(Ext.cmd.derive("plugins.bpjs.sep.riwayat.pelayanan.Form",com.Form,{controller:"form-sep-riwayat-pelayanan-peserta",layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldcontainer",layout:{type:"hbox"},items:[{xtype:"textfield",fieldLabel:"No. Kartu",reference:"nomor",emptyText:"Masukkan No. Kartu",flex:1},{xtype:"button",ui:"soft-cyan",text:"Tampilkan",iconCls:"x-fa fa-list",tooltip:"Tampilkan",handler:"onTampilkan"}]},{xtype:"textareafield",fieldLabel:"Respon",reference:"response",labelAlign:"top",readOnly:true,flex:1}]},0,["form-sep-riwayat-pelayanan-peserta"],["component","box","container","panel","form","com-form","form-sep-riwayat-pelayanan-peserta"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-sep-riwayat-pelayanan-peserta":true},["widget.form-sep-riwayat-pelayanan-peserta"],0,[plugins.bpjs.sep.riwayat.pelayanan,"Form"],0));(Ext.cmd.derive("plugins.bpjs.sep.riwayat.pelayanan.FormController",Ext.app.ViewController,{init:function(){var g=this,l=g.getView();g.integrasi=l.app.xitr("ID",1);if(g.integrasi){g.service=Ext.create(g.integrasi.NAMA_KLAS,{})}},onTampilkan:function(n){var m=this,p=m.getView(),o=m.getReferences();o.response.setValue("");if(o.nomor.getValue()===""){return}if(m.service){p.setLoading(true);m.service.riwayatPelayananPeserta(o.nomor.getValue(),function(f,e){if(f){o.response.setValue(JSON.stringify(e,undefined,2))}p.setLoading(false)})}},destroy:function(){if(this.service){delete this.service}Ext.app.ViewController.prototype.destroy.call(this)}},0,0,0,0,["controller.form-sep-riwayat-pelayanan-peserta"],0,[plugins.bpjs.sep.riwayat.pelayanan,"FormController"],0));(Ext.cmd.derive("plugins.bpjs.sep.update.Form",com.Form,{controller:"form-sep-update",klsRawat:3,jnsPelayanan:2,lakaLantas:2,asalRujukan:1,poliEksekutif:0,cob:0,katarak:0,penjamin:0,suplesi:0,layout:{type:"vbox",align:"stretch"},defaults:{xtype:"fieldcontainer",layout:{type:"hbox"},margin:"1 0 0 0"},items:[{fieldLabel:"No. SEP",defaults:{bind:{readOnly:"{formConfig.readOnly}"}},items:[{xtype:"textfield",emptyText:"Masukkan No. SEP",margin:"0 15 0 0",reference:"noSep",flex:1},{xtype:"textfield",emptyText:"Masukkan No. Kartu",fieldLabel:"No. Kartu",labelWidth:60,margin:"0 15 0 0",reference:"noKartu",flex:1},{xtype:"datefield",fieldLabel:"Tgl. SEP",labelWidth:50,format:"d/m/Y",reference:"tglSep",width:180,margin:"0 1 0 0"},{xtype:"timefield",format:"H:i:s",width:110,reference:"wktSep"}]},{fieldLabel:"Asal Rujukan",items:[{xtype:"displayfield",reference:"infoAsalRujukan"},{xtype:"segmentedbutton",reference:"asalRujukan",items:[{text:"Faskes 1",idx:1,pressed:true},{text:"Faskes 2(RS)",idx:2}],listeners:{toggle:"onToggleAsalRujukan"},bind:{hidden:"{formConfig.readOnly}"}},{xtype:"textfield",fieldLabel:"Nomor",emptyText:"Masukkan No. Rujukan",margin:"0 15 0 15",reference:"noRujukan",labelWidth:45,flex:1,bind:{readOnly:"{formConfig.readOnly}"}},{xtype:"textfield",fieldLabel:"PPK",emptyText:"Masukkan PPK Rujukan",margin:"0 15 0 0",reference:"ppkRujukan",labelWidth:27,width:120,bind:{readOnly:"{formConfig.readOnly}"}},{xtype:"datefield",fieldLabel:"Tgl.",labelWidth:27,format:"d/m/Y",reference:"tglRujukan",width:157,margin:"0 1 0 0",bind:{readOnly:"{formConfig.readOnly}"}},{xtype:"timefield",format:"H:i:s",width:110,reference:"wktRujukan",bind:{readOnly:"{formConfig.readOnly}"}}]},{fieldLabel:"Jenis Pelayanan",items:[{xtype:"displayfield",reference:"infoJnsPelayanan"},{xtype:"segmentedbutton",reference:"jnsPelayanan",items:[{text:"Rawat Inap",idx:1},{text:"Rawat Jalan",idx:2,pressed:true}],listeners:{toggle:"onToggleButtonRawat"},bind:{hidden:"{formConfig.readOnly}"}},{xtype:"textfield",fieldLabel:"Catatan",labelWidth:50,margin:"0 0 0 15",reference:"catatan",emptyText:"Masukkan Catatan",flex:1,bind:{readOnly:"{formConfig.readOnly}"}}]},{fieldLabel:"Diagnosa Awal",items:[{xtype:"textfield",emptyText:"Masukkan Diagnosa Awal",reference:"diagAwal",flex:1,margin:"0 15 0 0",bind:{readOnly:"{formConfig.readOnly}"}},{xtype:"textfield",fieldLabel:"Poli Tujuan",labelWidth:70,emptyText:"Masukkan Poli Tujuan",reference:"poliTujuan",margin:"0 15 0 0",flex:1,bind:{readOnly:"{formConfig.readOnly}"}},{fieldLabel:"Poli Eksekutif?",xtype:"fieldcontainer",labelWidth:90,layout:"hbox",items:[{xtype:"displayfield",reference:"infoPoliEksekutif"},{xtype:"segmentedbutton",reference:"poliEksekutif",items:[{text:"Ya",idx:1},{text:"Tidak",idx:0,pressed:true}],listeners:{toggle:"onTogglePoliEksekutif"},bind:{hidden:"{formConfig.readOnly}"}}]}]},{fieldLabel:"Kelas Rawat",items:[{xtype:"displayfield",reference:"infoKelas",hidden:true},{xtype:"segmentedbutton",reference:"kelas",items:[{text:"Kelas 1",idx:1},{text:"Kelas 2",idx:2},{text:"Kelas 3",idx:3,pressed:true}],listeners:{toggle:"onToggleButtonKelas"}},{fieldLabel:"COB?",xtype:"fieldcontainer",labelWidth:35,layout:"hbox",margin:"0 0 0 15",items:[{xtype:"displayfield",reference:"infoCOB"},{xtype:"segmentedbutton",reference:"COB",items:[{text:"Ya",idx:1},{text:"Tidak",idx:0,pressed:true}],listeners:{toggle:"onToggleCOB"},bind:{hidden:"{formConfig.readOnly}"}}]},{fieldLabel:"Katarak?",xtype:"fieldcontainer",labelWidth:60,layout:"hbox",margin:"0 0 0 15",items:[{xtype:"displayfield",reference:"infoKatarak"},{xtype:"segmentedbutton",reference:"katarak",items:[{text:"Ya",idx:1},{text:"Tidak",idx:0,pressed:true}],listeners:{toggle:"onToggleKatarak"},bind:{hidden:"{formConfig.readOnly}"}}]}]},{fieldLabel:"SKDP",items:[{xtype:"textfield",emptyText:"Masukkan No. Surat",reference:"nosuratskdp",flex:2,bind:{readOnly:"{formConfig.readOnly}"}},{xtype:"plugins-bpjs-referensi-dpjp-combo",flex:1,reference:"dpjpcombo"}]},{fieldLabel:"Laka Lantas",items:[{xtype:"displayfield",reference:"infoLakalantas"},{xtype:"segmentedbutton",reference:"lakalantas",items:[{text:"Kasus Kecelakaan",idx:1},{text:"Bukan Kasus Kecelakaan",idx:2,pressed:true}],listeners:{toggle:"onToggleButtonLakaLantas"},bind:{hidden:"{formConfig.readOnly}"},margin:"0 15 0 0"},{xtype:"datefield",fieldLabel:"Tgl. Kejadian",labelWidth:90,format:"d/m/Y",reference:"tglkejadian",width:220,margin:"0 15 0 0"},{xtype:"textfield",fieldLabel:"Keterangan",labelWidth:90,emptyText:"Masukkan Keterangan",reference:"lokasiLaka",flex:1,bind:{readOnly:"{formConfig.readOnly}"}},{xtype:"combobox",fieldLabel:"Penjamin",labelWidth:60,reference:"penjamin",store:{fields:["ID","DESKRIPSI"],data:[{ID:1,DESKRIPSI:"PT. Jasa Raharja"},{ID:2,DESKRIPSI:"BPJS Ketenagakerjaan"},{ID:3,DESKRIPSI:"PT. TASPEN"},{ID:4,DESKRIPSI:"PT. ASABRI"}]},displayField:"DESKRIPSI",valueField:"ID",editable:false,listeners:{select:"onSelectPenjamin"},bind:{readOnly:"{formConfig.readOnly}"}}]},{fieldLabel:"Suplesi",items:[{xtype:"segmentedbutton",reference:"suplesi",items:[{text:"Ya",idx:1},{text:"Tidak",idx:0,pressed:true}],listeners:{toggle:"onToggleButtonSuplesi"},margin:"0 15 0 0"},{xtype:"textfield",emptyText:"Masukkan No. Suplesi",reference:"nosuplesi",flex:1,bind:{readOnly:"{formConfig.readOnly}"}},{xtype:"plugins-bpjs-referensi-wilayah-combo",name:"KODE_PROPINSI",firstLoad:true,reference:"propinsicombo",emptyText:"[Propinsi]",flex:1,listeners:{select:"onSelectWilayah"}},{xtype:"plugins-bpjs-referensi-wilayah-combo",name:"KODE_KABUPATEN",reference:"kabupatencombo",params:{tipe:2},emptyText:"[Kabupaten]",flex:1,listeners:{select:"onSelectWilayah"}},{xtype:"plugins-bpjs-referensi-wilayah-combo",name:"KODE_KECAMATAN",reference:"kecamatancombo",params:{tipe:3},flex:1,emptyText:"[Kecamatan]"}]},{fieldLabel:"User",defaults:{bind:{readOnly:"{formConfig.readOnly}"}},items:[{xtype:"textfield",emptyText:"Masukkan ID / Nama Pengguna",flex:1,reference:"user",margin:"0 15 0 0"},{xtype:"textfield",fieldLabel:"No. MR",labelWidth:50,emptyText:"Masukkan Nomor Rekam Medis",reference:"noMr",flex:1,margin:"0 15 0 0"},{xtype:"textfield",fieldLabel:"No. Telp.",labelWidth:55,emptyText:"No. Telepon Peserta/Pasien",reference:"noTelp",flex:1}]},{xtype:"fieldcontainer",items:[{xtype:"component",flex:1},{xtype:"button",text:"Update SEP",handler:"onUpdateSEP"}]},{xtype:"textareafield",fieldLabel:"Respon",reference:"response",labelAlign:"top",readOnly:true,flex:1}],load:function(){var s=this.down("[reference=tglSep]"),t=this.down("[reference=wktSep]"),p=this.down("[reference=tglRujukan]"),q=this.down("[reference=wktRujukan]"),o=this.down("[reference=spesialiscombo]"),u=this.down("[reference=propinsicombo]");s.setValue(this.getSysdate());t.setValue(this.getSysdate());p.setValue(this.getSysdate());q.setValue(this.getSysdate());o.load();u.load()},setData:function(l){var m=this,n=m.getReferences();n.noSep.setValue(l.noSep);n.noKartu.setValue(l.noKartu);n.tglSep.setValue(l.tglSep);n.wktSep.setValue(l.tglSep);m.asalRujukan=l.asalRujukan;n.infoAsalRujukan.setValue(l.asalRujukan?(l.asalRujukan==1?"Faskes 1":"Faskes 2(RS)"):"Faskes 1");if(l.asalRujukan){n.asalRujukan.setValue(l.asalRujukan==1?0:1)}n.tglRujukan.setValue(l.tglRujukan);n.wktRujukan.setValue(l.tglRujukan);n.noRujukan.setValue(l.noRujukan);n.ppkRujukan.setValue(l.ppkRujukan);m.jnsPelayanan=l.jnsPelayanan;n.infoJnsPelayanan.setValue(l.jnsPelayanan==1?"Rawat Inap":"Rawat Jalan");n.jnsPelayanan.setValue(l.jnsPelayanan-1);n.catatan.setValue(l.catatan);n.diagAwal.setValue(l.diagAwal);n.poliTujuan.setValue(l.poliTujuan);m.poliEksekutif=l.eksekutif;n.infoPoliEksekutif.setValue(l.eksekutif?(l.eksekutif==0?"Tidak":"Ya"):"Tidak");if(l.eksekutif){n.poliEksekutif.setValue(l.eksekutif==1?0:1)}m.klsRawat=l.klsRawat==3?1:(l.kelas==2?2:3);n.infoKelas.setValue(l.klsRawat==1?"Kelas 3":(l.klsRawat==2?"Kelas 2":(l.klsRawat==3?"Kelas 1":"-")));if(l.klsRawat!=""){n.kelas.setValue(l.klsRawat==1?2:(l.klsRawat==2?1:0))}m.cob=l.cob;n.infoCOB.setValue(l.cob?(l.cob==0?"Tidak":"Ya"):"Tidak");if(l.cob){n.COB.setValue(l.cob==1?0:1)}m.katarak=l.katarak;n.infoKatarak.setValue(l.katarak?(l.katarak==0?"Tidak":"Ya"):"Tidak");if(l.katarak){n.katarak.setValue(l.katarak==1?0:1)}m.lakaLantas=l.lakaLantas;n.infoLakalantas.setValue(l.lakaLantas==1?"Kasus Kecelakaan":"Bukan Kasus Kecelakaan");n.lakalantas.setValue(l.lakaLantas-1);n.lokasiLaka.setValue(l.lokasiLaka);n.tglkejadian.setValue(l.tglKejadian);m.suplesi=l.suplesi;if(l.suplesi){n.suplesi.setValue(l.suplesi==1?0:1)}n.nosuplesi.setValue(l.noSuplesi);m.penjamin=l.penjamin;n.penjamin.select(l.penjamin);n.nosuratskdp.setValue(l.noSuratSKDP);n.dpjpcombo.setValue(l.dpjpSKDP);n.user.setValue(l.user);n.noMr.setValue(l.norm);n.noTelp.setValue(l.noTelp);n.dpjpcombo.params.jenisPelayanan=1;n.dpjpcombo.params.tglPelayanan=Ext.util.Format.date(l.tglSep,"Y-m-d");n.dpjpcombo.params.kodeSpesialis=1;n.dpjpcombo.load();n.dpjpcombo.doAfterLoad=function(g,p,e){var f=e.findRecord("kode",l.dpjpSKDP,0,true,false,true);if(f){n.dpjpcombo.select(f)}};n.propinsicombo.doAfterLoad=function(g,p,e){var f=e.findRecord("kode",l.propinsi,0,true,false,true);if(f){n.propinsicombo.select(f);n.propinsicombo.fireEvent("select",n.propinsicombo,f)}};n.kabupatencombo.doAfterLoad=function(g,p,e){var f=e.findRecord("kode",l.kabupaten,0,true,false,true);if(f){n.kabupatencombo.select(f);n.kabupatencombo.fireEvent("select",n.kabupatencombo,f)}};n.kecamatancombo.doAfterLoad=function(g,p,e){var f=e.findRecord("kode",l.kecamatan,0,true,false,true);if(f){n.kecamatancombo.select(f)}}}},0,["form-sep-update"],["component","box","container","panel","form","com-form","form-sep-update"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-sep-update":true},["widget.form-sep-update"],0,[plugins.bpjs.sep.update,"Form"],0));(Ext.cmd.derive("plugins.bpjs.sep.update.FormController",Ext.app.ViewController,{init:function(){var g=this,l=g.getView();g.integrasi=l.app.xitr("ID",1);if(g.integrasi){g.service=Ext.create(g.integrasi.NAMA_KLAS,{})}},onToggleButtonKelas:function(n,m,l){this.getView().klsRawat=m.idx},onToggleButtonRawat:function(n,m,l){this.getView().jnsPelayanan=m.idx},onToggleAsalRujukan:function(n,m,l){this.getView().asalRujukan=m.idx},onTogglePoliEksekutif:function(n,m,l){this.getView().poliEksekutif=m.idx},onToggleCOB:function(n,m,l){this.getView().cob=m.idx},onToggleKatarak:function(n,m,l){this.getView().katarak=m.idx},onToggleButtonLakaLantas:function(n,m,l){this.getView().lakaLantas=m.idx},onSelectPenjamin:function(l,g){if(g){this.getView().penjamin=g.get("ID")}},onToggleButtonSuplesi:function(n,m,l){this.getView().suplesi=m.idx},onSelectWilayah:function(m,l){var n=this.getReferences();if(m.params.tipe==1){n.kecamatancombo.getStore().removeAll();n.kabupatencombo.getStore().removeAll();n.kabupatencombo.params.kodePropinsi=l.get("kode");n.kabupatencombo.load()}if(m.params.tipe==2){n.kecamatancombo.getStore().removeAll();n.kecamatancombo.params.kodeKabupaten=l.get("kode");n.kecamatancombo.load()}},onUpdateSEP:function(G){var y=this,I=y.getView(),t=y.getReferences();t.response.setValue("");if(y.service){var B=t.tglSep.getValue(),F=t.wktSep.getValue(),D=t.tglRujukan.getValue(),x=t.wktRujukan.getValue(),z=t.tglkejadian.getValue(),A=t.dpjpcombo.getSelection(),E=t.propinsicombo.getSelection(),C=t.kabupatencombo.getSelection(),H=t.kecamatancombo.getSelection();B.setHours(F.getHours());B.setMinutes(F.getMinutes());B.setSeconds(F.getSeconds());D.setHours(x.getHours());D.setMinutes(x.getMinutes());D.setSeconds(x.getSeconds());I.setLoading(true);y.service.updateSEP({noSep:t.noSep.getValue(),noKartu:t.noKartu.getValue(),tglSep:Ext.util.Format.date(B,"Y-m-d H:i:s"),tglRujukan:Ext.util.Format.date(D,"Y-m-d H:i:s"),asalRujukan:I.asalRujukan,noRujukan:t.noRujukan.getValue(),ppkRujukan:t.ppkRujukan.getValue(),jnsPelayanan:I.jnsPelayanan,catatan:t.catatan.getValue(),diagAwal:t.diagAwal.getValue(),poliTujuan:t.poliTujuan.getValue(),eksekutif:I.poliEksekutif,klsRawat:I.klsRawat,cob:I.cob,katarak:I.katarak,lakaLantas:I.lakaLantas,lokasiLaka:t.lokasiLaka.getValue(),penjamin:I.penjamin,tglKejadian:Ext.util.Format.date(z,"Y-m-d H:i:s"),suplesi:I.suplesi,noSuplesi:t.nosuplesi.getValue(),propinsi:E?E.get("kode"):"",kabupaten:C?C.get("kode"):"",kecamatan:H?H.get("kode"):"",noSuratSKDP:t.nosuratskdp.getValue(),dpjpSKDP:A?A.get("kode"):"",user:t.user.getValue(),norm:t.noMr.getValue(),noTelp:t.noTelp.getValue()},function(e,f){if(e){t.response.setValue(JSON.stringify(f,undefined,2))}I.setLoading(false)})}},destroy:function(){if(this.service){delete this.service}Ext.app.ViewController.prototype.destroy.call(this)}},0,0,0,0,["controller.form-sep-update"],0,[plugins.bpjs.sep.update,"FormController"],0));(Ext.cmd.derive("plugins.bpjs.sep.update.tanggalpulang.Form",com.Form,{controller:"form-sep-update-tanggal-pulang",layout:{type:"vbox",align:"stretch"},defaults:{margin:"1 0 0 0"},items:[{xtype:"textfield",fieldLabel:"No. SEP",reference:"nomor"},{xtype:"fieldcontainer",layout:"hbox",fieldLabel:"Tgl. Pulang",items:[{xtype:"datefield",format:"d/m/Y",margin:"0 1 0 0",reference:"tgl"},{xtype:"timefield",format:"H:i:s",reference:"wkt"}]},{xtype:"fieldcontainer",layout:"hbox",items:[{xtype:"component",flex:1},{xtype:"button",text:"Update",tooltip:"Update",handler:"onUpdate"}]},{xtype:"textareafield",fieldLabel:"Respon",reference:"response",labelAlign:"top",readOnly:true,flex:1}],load:function(){var g=this.down("datefield"),l=this.down("timefield");g.setValue(this.getSysdate());l.setValue(this.getSysdate())}},0,["form-sep-update-tanggal-pulang"],["component","box","container","panel","form","com-form","form-sep-update-tanggal-pulang"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-sep-update-tanggal-pulang":true},["widget.form-sep-update-tanggal-pulang"],0,[plugins.bpjs.sep.update.tanggalpulang,"Form"],0));(Ext.cmd.derive("plugins.bpjs.sep.update.tanggalpulang.FormController",Ext.app.ViewController,{init:function(){var g=this,l=g.getView();g.integrasi=l.app.xitr("ID",1);if(g.integrasi){g.service=Ext.create(g.integrasi.NAMA_KLAS,{})}},onUpdate:function(q){var o=this,t=o.getView(),s=o.getReferences();s.response.setValue("");if(s.nomor.getValue()===""){return}if(o.service){var u=s.tgl.getValue(),p=s.wkt.getValue();u.setHours(p.getHours());u.setMinutes(p.getMinutes());u.setSeconds(p.getSeconds());t.setLoading(true);o.service.updateTanggalPulang({noSEP:s.nomor.getValue(),tglPlg:Ext.util.Format.date(u,"Y-m-d H:i:s"),user:t.app.usrNm},function(e,f){if(e){s.response.setValue(JSON.stringify(f,undefined,2))}t.setLoading(false)})}},destroy:function(){if(this.service){delete this.service}Ext.app.ViewController.prototype.destroy.call(this)}},0,0,0,0,["controller.form-sep-update-tanggal-pulang"],0,[plugins.bpjs.sep.update.tanggalpulang,"FormController"],0));(Ext.cmd.derive("plugins.dukcapil.Service",plugins.BaseService,{nik:function(l,g){this.request("dukcapil/nik/"+l,"GET","",g)}},0,["dukcapilservice"],["baseservice","dukcapilservice"],{baseservice:true,dukcapilservice:true},["widget.dukcapilservice"],0,[plugins.dukcapil,"Service"],0));(Ext.cmd.derive("plugins.inacbg.Service",Ext.Base,{scope:this,animateTarget:null,showError:true,privates:{request:function(s,o,q,e){var p=this;Ext.Ajax.request({url:webservice.location+"plugins/"+s,method:o,jsonData:q,success:function(g,f){if(Ext.isFunction(e)){e(true,Ext.JSON.decode(g.responseText),f)}},failure:function(l,m){if(p.showError){try{var g=Ext.JSON.decode(l.responseText),n=g.detail?(Ext.isObject(g.detail)?Ext.JSON.encode(g.detail):g.detail):"Koneksi Gagal",v=Ext.create("Ext.window.MessageBox",{ui:"window-red",title:l.status+" - "+l.statusText,header:{padding:5}});v.show({msg:n,buttons:Ext.MessageBox.OK,animateTarget:p.animateTarget,scope:p.scope,icon:Ext.Msg.ERROR})}catch(f){var v=Ext.create("Ext.window.MessageBox",{ui:"window-red",title:"Error",header:{padding:5}});v.show({msg:"Koneksi Gagal",buttons:Ext.MessageBox.OK,animateTarget:p.animateTarget,scope:p.scope,icon:Ext.Msg.ERROR})}}if(Ext.isFunction(e)){e(false,l,m)}}})}},grouper:function(l,g){Ext.Array.each(l.diags,function(e,f){Ext.applyIf(l,Ext.Object.fromQueryString("diag"+(f+1)+"="+e.KODE))});Ext.Array.each(l.procs,function(e,f){Ext.applyIf(l,Ext.Object.fromQueryString("proc"+(f+1)+"="+e.KODE))});delete l.diags;delete l.procs;delete l.ref;this.request("inacbg","POST",l,g)},hapusGrouper:function(l,g){this.request("inacbg/batalKlaim","POST",l,g)}},0,["inacbgservice"],["inacbgservice"],{inacbgservice:true},["widget.inacbgservice"],0,[plugins.inacbg,"Service"],0));(Ext.cmd.derive("plugins.inacbg.model.Inacbg",data.model.Model,{serviceName:"inacbgservice/inacbg",fields:[{name:"JENIS",type:"int"},{name:"KODE",type:"string"},{name:"DESKRIPSI",type:"string"}]},0,0,0,0,0,0,[plugins.inacbg.model,"Inacbg"],0));(Ext.cmd.derive("plugins.inacbg.combo.Inacbg",com.Combo,{viewModel:{stores:{store:{type:"inacbg-store"}}},valueField:"KODE"},0,["combo-inacbg"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","combo-inacbg"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"combo-inacbg":true},["widget.combo-inacbg"],0,[plugins.inacbg.combo,"Inacbg"],0));(Ext.cmd.derive("plugins.inacbg.model.MapInacbgSimrs",data.model.Model,{serviceName:"inacbgservice/map",fields:[{name:"JENIS",type:"int"},{name:"INACBG",type:"string"},{name:"SIMRS",type:"int"}]},0,0,0,0,0,0,[plugins.inacbg.model,"MapInacbgSimrs"],0));(Ext.cmd.derive("plugins.inacbg.model.ListProcedure",data.model.Model,{serviceName:"inacbgservice/listprocedure",fields:[{name:"ID",type:"int"},{name:"JENIS",type:"int"},{name:"PROC",type:"string"},{name:"CMG",type:"string"},{name:"GROUP_CODE",type:"string"}],idProperty:"ID"},0,0,0,0,0,0,[plugins.inacbg.model,"ListProcedure"],0));(Ext.cmd.derive("plugins.inacbg.grouping.Form",com.Form,{controller:"grouping-form",model:"plugins.inacbg.model.Grouping",viewModel:{data:{pendaftaran:undefined,kunjunganRawat:[],kunjunganMasuk:undefined,kunjunganKeluar:undefined,tagihanPendaftaran:undefined,penjaminTagihan:undefined,finalGrouping:false,kirimDC:false,hideUpdateSepButton:true,hideInfoTagihan:true,naiKelasVIP:false,minPersenSelNaikVIP:0,maxPersenSelNaikVIP:75,persenValue:0},stores:{kunjungans:{type:"kunjungan-store"},mapInacbgSimrs:{type:"map-inacbg-simrs-store"},listProcedure:{type:"list-procedure-store"},tagihanPendaftarans:{type:"tagihan-pendaftaran-store"},tagihan:Ext.create("Ext.data.Store",{fields:["NAME","VALUE"]})},formulas:{getStatusGrouping:function(m){var n=m("finalGrouping"),l=m("kirimDC");return'<span style="color: #2d74a6;">Status Grouping: '+(n?"Final":"Belum Final")+'</span> <span style="color: #c0392b;">#</span"> <span style="color: #90c258;">Status Kirim ke DC: '+(l?"Terkirim":"Belum / Gagal Terkirim")+"</span>"}}},dockedItems:[{xtype:"toolbar",dock:"top",items:[{xtype:"button",ui:"soft-cyan",iconCls:"x-fa fa-info",tooltip:"Informasi Distribusi Tagihan",enableToggle:true,margin:"0 10 0 0",listeners:{toggle:"onInfo"}},{xtype:"displayfield",bind:{value:"{getStatusGrouping}"},style:"font-weight: bold;"},"->",{xtype:"numberfield",fieldLabel:"Persentase Selisih Naik Kelas VIP",name:"PERSEN_NAIK_KELAS_VIP",reference:"psnkvip",labelWidth:170,allowDecimals:false,bind:{minValue:"{minPersenSelNaikVIP}",maxValue:"{maxPersenSelNaikVIP}",hidden:"{!naiKelasVIP}",value:"{persenValue}"}},{xtype:"button",ui:"soft-red",iconCls:"x-fa fa-save",tooltip:"Simpan Persentase Selisih Naik Kelas VIP",handler:"onSimpanPsnkVIP",bind:{hidden:"{!naiKelasVIP}"}},{name:"KELAS_KLAIM",xtype:"referensi-combo",reference:"kelasklaim",fieldLabel:"Kelas Klaim",labelWidth:70,params:{JENIS:19,STATUS:1},firstLoad:true,emptyText:"[Pilih Kelas Klaim]",editable:false,listeners:{select:"onSelectKelasKlaim"}},{xtype:"button",text:"Update SEP",iconCls:"x-fa fa-send",ui:"soft-red",handler:"onUpdateSep",bind:{hidden:"{hideUpdateSepButton}"}},{xtype:"inacbg-tipe-combo",reference:"inacbgtipecombo",name:"TIPE",editable:false,labelWidth:80,fieldLabel:"Tipe INACBG",params:{STATUS:1},listeners:{select:"onSelectTipe"}}]},{xtype:"toolbar",dock:"right",items:[{xtype:"button",text:"Proses Grouping",iconCls:"x-fa fa-cogs",ui:"soft-blue",finalGroup:false,handler:"onGrouping"},{xtype:"button",text:"Final Grouping",iconCls:"x-fa fa-check-square",ui:"soft-red",finalGroup:true,finalGroup:true,kirimDataCenter:false,handler:"onGrouping"},{xtype:"button",text:"Final Grouping & <br/>Kirim ke Data Center",iconCls:"x-fa fa-send",ui:"soft-red",finalGroup:true,kirimDataCenter:true,handler:"onGrouping"},{xtype:"button",text:"Hapus Grouping",iconCls:"x-fa fa-remove",ui:"soft-red",handler:"onHapusGrouping"},{xtype:"button",text:"Cetak Laporan Individual",iconCls:"x-fa fa-print",ui:"soft-green",menu:{plain:true,width:200,items:[{text:"Kelas Hak",action:0,handler:"onCetak"},{text:"Kelas II",action:2,handler:"onCetak"},{text:"Kelas 1",action:1,handler:"onCetak"}]}}]}],layout:{type:"hbox",align:"stretch"},cls:"x-br-top",items:[{xtype:"com-grid",ui:"panel-cyan",header:{padding:5,items:[{xtype:"button",ui:"soft-red",iconCls:"x-fa fa-calculator",tooltip:"Hitung Ulang Distribusi Tagihan",handler:"onRedistribusiTagihan"}]},title:"Distribusi Tagihan",hideHeaders:true,columns:[{text:"Nama",dataIndex:"NAME",sortable:false,width:160},{xtype:"numbercolumn",text:"Nilai",format:"0,000",dataIndex:"VALUE",sortable:false,flex:1,align:"right"}],bind:{store:"{tagihan}",hidden:"{hideInfoTagihan}"},width:250,margin:"0 5 0 0"},{layout:{type:"vbox",align:"stretch"},flex:0.3,defaults:{labelAlign:"top"},items:[{xtype:"dokter-combo",fieldLabel:"DPJP",name:"DPJP",reference:"dpjp",allowBlank:false,params:{STATUS:1}},{xtype:"numberfield",fieldLabel:"Ventilator (Jam)",name:"VENTILATOR",reference:"ventilator",allowDecimals:false,maxValue:99999},{xtype:"numberfield",fieldLabel:"Berat Lahir",name:"BERAT_LAHIR",reference:"beratlahir",allowDecimals:false,maxValue:99999},{xtype:"combo-inacbg",fieldLabel:"Special Drug",name:"SPECIAL_DRUG",reference:"specialdrug",params:{JENIS:3,VERSION:""}},{xtype:"combo-inacbg",fieldLabel:"ADL Sub Acute >= 43hr",name:"ADL",reference:"adl",params:{JENIS:7}},{xtype:"combo-inacbg",fieldLabel:"ADL Chronic >= 43hr",name:"ADL_CHRONIC",reference:"adl_chronic",params:{JENIS:7}}]},{xtype:"grouping-hasil-form",flex:1}],onLoadRecord:function(E,x){var D=E.down("[name=DPJP]"),v=E.down("[name=VENTILATOR]"),B=E.down("[name=BERAT_LAHIR]"),C=E.down("[name=SPECIAL_DRUG]"),w=E.down("[name=ADL]"),z=E.down("[name=ADL_CHRONIC]"),F=E.down("[name=TIPE]"),A=Ext.JSON.decode(x.get("DATA")),y=1;if(A){var G=A.ref.dpjp?Ext.create("data.model.Dokter",A.ref.dpjp):null;if(G){D.getStore().add(G);D.setValue(G.get("ID"))}if(A.ventilator_hour){v.setValue(A.ventilator_hour)}if(A.berat_lahir){B.setValue(A.berat_lahir)}if(A.spec_dr){C.setValue(A.spec_dr)}if(A.adl){w.setValue(A.adl)}if(A.adl_chronic){z.setValue(A.adl_chronic)}if(A.tipe){y=A.tipe}E.getViewModel().set("finalGrouping",A.status==1)}F.load();F.setValue(y);F.doAfterLoad=function(e,f,g){var l=g.findRecord(F.valueField,y,0,false,true);if(l){E.getController().onSelectTipe(F,l)}else{if(e.length>0){F.setValue(e[0].get("ID"));E.getController().onSelectTipe(F,e[0])}}}},setPendaftaran:function(F){var E=this,B=E.getViewModel(),v=B.get("kunjungans"),w=B.get("tagihanPendaftarans"),G=E.down("grouping-hasil-form"),C=E.down("[name=BERAT_LAHIR]"),x=E.down("[name=TIPE]"),D=E.down("[name=DPJP]"),A=E.getController(),y=F.get("TUJUAN"),z=Ext.create("data.model.Dokter",E.getReferensi(y,"DOKTER"));B.set("pendaftaran",F);C.setValue(F.get("BERAT_BAYI"));D.getStore().add(z);D.setValue(z.get("ID"));E.reloadHasilGrouping();if(v){v.queryParams={NOPEN:F.get("NOMOR"),HISTORY:1,start:0,limit:1000,COLUMNS:'["NOMOR", "RUANGAN", "MASUK", "KELUAR", "REF", "STATUS"]',REFERENSI:Ext.JSON.encode({PasienPulang:{COLUMNS:["TANGGAL","CARA","KEADAAN","DIAGNOSA"],REFERENSI:{Diagnosa:true}}})};v.load(function(e,g,l){if(l){var f=[],m=false;Ext.Array.each(e,function(o){var n=x.getSelection();if(A.getDataMapInacbgSimrs(1,"SIMRS",o.get("JENIS_KUNJUNGAN"),n!=null?n.get("VERSION"):4)!=null&&o.get("STATUS")!=0){f.push(o.data);if(o.get("REF")==null){B.set("kunjunganMasuk",o)}if(o.get("JENIS_KUNJUNGAN")==3){var p=o.get("REFERENSI");if(p){if(p.PASIEN_KELUAR){m=true;B.set("kunjunganKeluar",o)}}}}});B.set("kunjunganRawat",f);if(!m){B.set("kunjunganKeluar",B.get("kunjunganMasuk"))}if(f.length>0){G.setTipePasien(B.get("kunjunganMasuk").get("JENIS_KUNJUNGAN")==3?"Rawat Inap":"Rawat Jalan")}}})}if(w){w.queryParams={UTAMA:1,STATUS:1,COLUMNS:'["TAGIHAN"]',REFERENSI:Ext.JSON.encode({Tagihan:{COLUMNS:["ID","TOTAL","PROSEDUR_NON_BEDAH","PROSEDUR_BEDAH","KONSULTASI","TENAGA_AHLI","KEPERAWATAN","PENUNJANG","RADIOLOGI","LABORATORIUM","BANK_DARAH","REHAB_MEDIK","AKOMODASI","AKOMODASI_INTENSIF","OBAT","OBAT_KRONIS","OBAT_KEMOTERAPI","ALKES","BMHP","SEWA_ALAT","RAWAT_INTENSIF","LAMA_RAWAT_INTENSIF"],REFERENSI:{PenjaminTagihan:true}}}),PENDAFTARAN:F.get("NOMOR")};w.load(function(f,g,e){if(e){if(f.length>0){B.set("tagihanPendaftaran",f[0]);E.setKelasKlaim(F,f[0])}}})}E.down("[name=ADL]").load();E.down("[name=ADL_CHRONIC]").load()},setKelasKlaim:function(u,w){var t=this,y=t.getViewModel(),x=t.down("[name=KELAS_KLAIM]"),A=u.get("PENJAMIN"),z=t.getReferensi(w.data,"TAGIHAN"),v=z?t.getReferensi(z,"PENJAMIN_TAGIHAN"):null,C=v?(v.length>0?v[0]:null):null;klsKlaim=C?t.getReferensi(C,"KELAS_KLAIM"):t.getReferensi(A,"KELAS"),klsKlm=klsKlaim.ID==0?t.getReferensi(A,"KELAS"):klsKlaim,kelas=Ext.create("data.model.Referensi",klsKlm),controller=t.getController(),minTarifInacbgPersen=Number(t.getPropertyConfig("16"));y.set("minPersenSelNaikVIP",minTarifInacbgPersen);t.setInfoDistribusiTagihan(z);if(C){var B=C.TAGIHAN+"-"+C.PENJAMIN;data.model.PenjaminTagihan.load(B,{success:function(f,e){y.set("penjaminTagihan",f);y.set("naiKelasVIP",f.get("NAIK_KELAS_VIP")!=0);y.set("persenValue",f.get("PERSENTASE_TARIF_INACBG_KELAS1")>0?f.get("PERSENTASE_TARIF_INACBG_KELAS1"):minTarifInacbgPersen)}});if(controller.BPJService){if(controller.integrasiBPJS.REF==A.JENIS){y.set("hideUpdateSepButton",false)}}}x.select(kelas)},setInfoDistribusiTagihan:function(m){var n=this,o=n.getViewModel(),p=o.get("tagihan");if(m){p.loadData([{NAME:"Tarif RS",VALUE:m.TOTAL},{NAME:"Procedure Non Bedah",VALUE:m.PROSEDUR_NON_BEDAH},{NAME:"Procedure Bedah",VALUE:m.PROSEDUR_BEDAH},{NAME:"Konsultasi",VALUE:m.KONSULTASI},{NAME:"Tenaga Ahli",VALUE:m.TENAGA_AHLI},{NAME:"Keperawatan",VALUE:m.KEPERAWATAN},{NAME:"Penunjang",VALUE:m.PENUNJANG},{NAME:"Radiologi",VALUE:m.RADIOLOGI},{NAME:"Laboratorium",VALUE:m.LABORATORIUM},{NAME:"Bank Darah",VALUE:m.BANK_DARAH},{NAME:"Rehab Medik",VALUE:m.REHAB_MEDIK},{NAME:"Akomodasi",VALUE:m.AKOMODASI},{NAME:"Akomodasi Intensif",VALUE:m.AKOMODASI_INTENSIF},{NAME:"Obat",VALUE:m.OBAT},{NAME:"Obat Kronis",VALUE:m.OBAT_KRONIS},{NAME:"Obat Kemoterapi",VALUE:m.OBAT_KEMOTERAPI},{NAME:"ALKES",VALUE:m.ALKES},{NAME:"BMHP",VALUE:m.BMHP},{NAME:"Sewa Alat",VALUE:m.SEWA_ALAT}])}},reloadHasilGrouping:function(){var n=this,o=n.getViewModel(),m=o.get("pendaftaran"),p=n.down("grouping-hasil-form");if(plugins.inacbg){plugins.inacbg.model.HasilGrouping.load(m.get("NOMOR"),{callback:function(f,e,g){if(g){p.loadRecord(f);o.set("kirimDC",f.get("DC_KEMKES")==1)}}})}}},0,["grouping-form"],["component","box","container","panel","form","com-form","grouping-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"grouping-form":true},["widget.grouping-form"],0,[plugins.inacbg.grouping,"Form"],0));(Ext.cmd.derive("plugins.inacbg.grouping.FormController",Ext.app.ViewController,{initViewModel:function(){var f=this.getViewModel();f.get("mapInacbgSimrs").initStore("mapinacbgsimrs");f.get("listProcedure").initStore("listprocedure")},init:function(){var g=this,l=g.getView();g.integrasi=l.app?l.app.xitr("ID",2):false;if(g.integrasi){g.service=Ext.create(g.integrasi.NAMA_KLAS,{})}g.integrasiBPJS=l.app.xitr("ID",1);if(g.integrasiBPJS){g.BPJService=Ext.create(g.integrasiBPJS.NAMA_KLAS,{})}},onGrouping:function(o){var m=this,n=m.getViewModel(),p=m.getView();if(p.getForm().isValid()){if(n.get("naiKelasVIP")){m.onSimpanPsnkVIP(o)}this.grouping(o.finalGroup,o.kirimDataCenter)}},onUpdateSep:function(T){var t=this,X=t.getView(),S=t.getViewModel(),al=t.getReferences(),Y=al.kelasklaim.getSelection(),ai=S.get("pendaftaran"),ab=X.getReferensi(ai.data,"PASIEN"),V=ab.KONTAK?ab.KONTAK:null,Q=null,am=ai.get("PENJAMIN"),U=am?X.getReferensi(am,"KAP"):null,P=ai.get("TUJUAN"),ah=P?X.getReferensi(P,"RUANGAN"):null,R=ah?(ah.JENIS_KUNJUNGAN==3?1:2):2,ad=ai.get("DIAGNOSAMASUK")?ai.get("DIAGNOSAMASUK"):null,af=ai.get("RUJUKAN")?(Ext.isObject(ai.get("RUJUKAN"))?ai.get("RUJUKAN"):null):null,aa=af?X.getReferensi(af,"PPK"):null,ae=X.getReferensi(X.app.ppk,"PPK"),ak=X.getReferensi(ai.data,"KECELAKAAN"),Z=S.get("penjaminTagihan");if(Ext.isArray(V)){Ext.Array.each(V,function(e){Q=e.NOMOR})}if(am){if(t.BPJService){if(t.integrasiBPJS.REF==Z.get("PENJAMIN")&&am){S.set("hideUpdateSepButton",false);var aj=aa?aa.BPJS:"",N=af&&R!=1?(af.NOMOR==""?"0000000000000000001":af.NOMOR):"0000000000000000001",ag=af&&R!=1?(af.TANGGAL?af.TANGGAL:ai.get("TANGGAL")):ai.get("TANGGAL"),M=aa?(af&&R!=1?(af.NOMOR==""?(ae.JENIS==1?2:1):(aa.JENIS==1?2:1)):(ae.JENIS==1?2:1)):(ae.JENIS==1?2:1),W=ah?(ah.JENIS_KUNJUNGAN==1?ah.REF_ID:0):0,O=t.getPenjaminRuangan(ah,am.JENIS),ac=Y?Y.get("ID"):0;aj=aj==""?(af&&R!=1?(af.NOMOR==""?ae.BPJS:af.NOMOR.substring(0,8)):ae.BPJS):aj;ak=ak?(ak.STATUS==0?null:ak):null;t.BPJService.updateSEP({noSep:am.NOMOR,noKartu:U?U.NOMOR:"",tglSep:Ext.util.Format.date(ai.get("TANGGAL"),"Y-m-d H:i:s"),tglRujukan:Ext.isString(ag)?Ext.Date.parse(ag,"Y-m-d H:i:s"):ag,asalRujukan:M,noRujukan:N,ppkRujukan:aj,jnsPelayanan:R,catatan:"-",diagAwal:ad?ad.ICD:"",poliTujuan:R==2?(O?O:""):"",eksekutif:W,klsRawat:ac==3?1:(ac==2?2:3),cob:am.COB,lakaLantas:ak?1:2,lokasiLaka:ak?ak.LOKASI:"",penjamin:ak?ak.PENJAMIN:0,user:X.app.usrNm,norm:ai.get("NORM"),noTelp:Q},function(f,e){if(f){X.notifyMessage("Update Sep berhasil")}})}}}},onInfo:function(p,m){var n=this,o=n.getViewModel();o.set("hideInfoTagihan",!m)},onSimpanPsnkVIP:function(s){var o=this,t=o.getView(),p=o.getViewModel(),q=t.down("[name=PERSEN_NAIK_KELAS_VIP]"),u=q.getValue();if(!((Number(u)>=p.get("minPersenSelNaikVIP"))&&(Number(u)<=p.get("maxPersenSelNaikVIP")))){t.notifyMessage("Penginputan tidak boleh kurang dari "+p.get("minPersenSelNaikVIP")+" dan tidak boleh lebih dari "+p.get("maxPersenSelNaikVIP"));return}o.savePenjaminTagihan({PERSENTASE_TARIF_INACBG_KELAS1:u==null||u==""?0:u},"Data Persentase Selisih Naik Kelas VIP telah berhasil disimpan")},onSelectKelasKlaim:function(s,u){var o=this,t=o.getView(),p=o.getViewModel(),q=p.get("penjaminTagihan");o.savePenjaminTagihan({KELAS_KLAIM:u.get("ID")},"Perubahan kelas klaim berhasil")},onSelectTipe:function(q,v){var p=this,t=p.getView(),u=t.down("[name=SPECIAL_DRUG]"),s=u.getStore(),w={JENIS:3,VERSION:""};if(v){w.VERSION=v.get("VERSION")}s.setQueryParams(w);u.load()},getDataMapInacbgSimrs:function(u,o,q,t){var s=this.getStore("mapInacbgSimrs"),p=null;s.each(function(e){if(e.get("JENIS")==u&&e.get(o)==q&&e.get("VERSION")==t){p=e.data;return p}});return p},onHapusGrouping:function(q){var x=this,u=x.getView(),y=x.getViewModel(),s=x.getReferences(),w=s.inacbgtipecombo.getSelection(),t=y.get("pendaftaran"),v=t?t.get("PENJAMIN"):null;Ext.Msg.show({title:"Hapus Grouping",message:"Anda yakin ingin hapus data grouping di INACBG ?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:q,fn:function(e){if(e==="yes"){x.service.hapusGrouper({nopen:t.get("NOMOR"),nomor_sep:v.NOMOR,coder_nik:u.app.usrNik,tipe:w?w.get("ID"):0},function(f,l,g){if(f){u.notifyMessage("Hapus grouping berhasil")}})}}})},privates:{getNamaLengkap:function(n){var m=n.GELAR_DEPAN||"",l=n.GELAR_BELAKANG||"";m=m==""?"":m+". ";l=l==""?"":", "+l;return m+n.NAMA+l},getListProcedures:function(w,G,H){var y=this,D=y.getViewModel(),x=y.getReferences(),E=x.inacbgtipecombo.getSelection(),z=D.get("pendaftaran"),A=z?z.get("TUJUAN"):null,B=A?(A.REFERENSI?A.REFERENSI.RUANGAN:null):null,F=y.getDataMapInacbgSimrs(1,"SIMRS",B?B.JENIS_KUNJUNGAN:2,E.get("VERSION")),I=y.getStore("listProcedure"),C=null;I.each(function(e){if(e.get("JENIS")==F.INACBG&&e.get(w)==G&&e.get("GROUP_CODE")==H){C=e.data;return C}});return C},getDiagnosis:function(){var l=this,m=l.getView(),n=m.ownerCt;return n.diagnosisWorkspace.getDiagnosis()},getProcedures:function(){var l=this,m=l.getView(),n=m.ownerCt;return n.proceduresWorkspace.getProcedures()},getSpecial:function(){var l=this,m=l.getProcedures(),n={procedure:"",investigation:"",prosthesis:""};Ext.Array.each(m,function(f){var p=l.getListProcedures("PROC",f.KODE,"sprocedure"),e=l.getListProcedures("PROC",f.KODE,"sinvestigation"),g=l.getListProcedures("PROC",f.KODE,"sprosthesis");if(p){n.procedure=p.CMG}if(e){n.investigation=e.CMG}if(g){n.prosthesis=g.CMG}});return n},getPenjaminRuangan:function(p,s){var n="";if(p){var q=p.REFERENSI?p.REFERENSI:null,o=q?(q.PENJAMIN_RUANGAN?q.PENJAMIN_RUANGAN:[]):[];Ext.Array.each(o,function(e){if(e.PENJAMIN==s){n=e.RUANGAN_PENJAMIN}})}return n},grouping:function(aR,az){var aG=this,aP=aG.getView(),aq=aG.getReferences(),au=aP.ownerct,aK=aq.inacbgtipecombo.getSelection(),aJ=aq.dpjp.getSelection(),aD=aq.specialdrug.getSelection(),aC=aq.adl.getSelection(),aj=aq.kelasklaim.getSelection(),ag=aq.adl_chronic.getSelection(),af=aq.beratlahir.getValue(),aS=aq.ventilator.getValue(),aI=aG.getViewModel(),ar=aI.get("kunjunganRawat"),ad=aI.get("kunjunganMasuk"),ap=aI.get("kunjunganKeluar"),aw=aG.getDataMapInacbgSimrs(1,"SIMRS",ad.get("JENIS_KUNJUNGAN"),aK.get("VERSION")),an=ap.get("REFERENSI")?ap.get("REFERENSI"):null,ay=aw.INACBG==2?1:(an?(an.PASIEN_KELUAR?an.PASIEN_KELUAR.CARA:null):null);if(ar.length==0){aP.notifyMessage("Belum ada transaksi penerimaan pasien di ruangan");return}if(ay==null){aP.notifyMessage("Pasien belum di pulangkan");return}var aF=aI.get("mapInacbgSimrs"),aN=aI.get("tagihanPendaftaran"),av=aI.get("pendaftaran"),am=av?av.get("REFERENSI"):null,aL=am?am.PASIEN:null,at=av?av.get("PENJAMIN"):null,ah=aG.getDataMapInacbgSimrs(4,"SIMRS",aj.get("ID"),aK.get("VERSION")),al=at.REFERENSI?(at.REFERENSI.KAP?at.REFERENSI.KAP:null):null,ab=av?av.get("TUJUAN"):null,aQ=aG.getDataMapInacbgSimrs(2,"SIMRS",ay,aK.get("VERSION")),aM=aG.getSpecial(),aE=aN?aP.getReferensi(aN.data,"TAGIHAN"):null,aO=aI.get("penjaminTagihan"),aA=aO?(aO.get("NAIK_KELAS")==1||aO.get("NAIK_KELAS_VIP")==1||aO.get("NAIK_DIATAS_VIP")==1?1:0):0,aB=aO?aO.get("KELAS"):0,ao=aG.getDataMapInacbgSimrs(6,"SIMRS",aB,aK.get("VERSION")),ai=aO?aO.get("LAMA_NAIK"):0;if(aG.integrasi&&av&&aL&&at&&al&&ab&&ar.length>0){if(aG.service&&at.JENIS>1){aP.setLoading(true);var ac=aG.getDataMapInacbgSimrs(3,"SIMRS",at.JENIS,aK.get("VERSION")),aH=Ext.Date.format(av.get("TANGGAL"),"Y-m-d H:i:s"),ax=aw.INACBG==2?aH:Ext.Date.format(ap.get("KELUAR"),"Y-m-d H:i:s"),ak=aG.getDataMapInacbgSimrs(5,"SIMRS",ad.get("RUANGAN"),aK.get("VERSION")),ae={norm:aL.NORM,nm_pasien:aG.getNamaLengkap(aL),jns_kelamin:aL.JENIS_KELAMIN,tgl_lahir:aL.TANGGAL_LAHIR,jns_pbyrn:ac.INACBG,no_peserta:al.NOMOR,no_sep:at.NOMOR,jns_perawatan:aw.INACBG,kls_perawatan:aw.INACBG==2?(ak?1:3):ah.INACBG,tgl_masuk:aH,tgl_keluar:ax?ax:"",cara_keluar:aQ.INACBG,dpjp:aJ?aJ.get("NAMA"):"",berat_lahir:af&&af!=0?af:"",tarif_rs:aE?Math.round(Number(aE.TOTAL)):0,prosedur_non_bedah:aE?Math.round(Number(aE.PROSEDUR_NON_BEDAH)):0,prosedur_bedah:aE?Math.round(Number(aE.PROSEDUR_BEDAH)):0,konsultasi:aE?Math.round(Number(aE.KONSULTASI)):0,tenaga_ahli:aE?Math.round(Number(aE.TENAGA_AHLI)):0,keperawatan:aE?Math.round(Number(aE.KEPERAWATAN)):0,penunjang:aE?Math.round(Number(aE.PENUNJANG)):0,radiologi:aE?Math.round(Number(aE.RADIOLOGI)):0,laboratorium:aE?Math.round(Number(aE.LABORATORIUM)):0,pelayanan_darah:aE?Math.round(Number(aE.BANK_DARAH)):0,rehabilitasi:aE?Math.round(Number(aE.REHAB_MEDIK)):0,kamar:aE?Math.round(Number(aE.AKOMODASI)):0,rawat_intensif:aE?Math.round(Number(aE.AKOMODASI_INTENSIF)):0,obat:aE?Math.round(Number(aE.OBAT)):0,obat_kronis:aE?Math.round(Number(aE.OBAT_KRONIS)):0,obat_kemoterapi:aE?Math.round(Number(aE.OBAT_KEMOTERAPI)):0,alkes:aE?Math.round(Number(aE.ALKES)):0,bmhp:aE?Math.round(Number(aE.BMHP)):0,sewa_alat:aE?Math.round(Number(aE.SEWA_ALAT)):0,tarif_poli_eks:aw.INACBG==2?(ak?(aE?Math.round(Number(aE.TOTAL)):0):0):0,srt_rujukan:1,bhp:0,severity3:0,diags:aG.getDiagnosis(),procs:aG.getProcedures(),adl:aC?aC.get("KODE"):0,adl_sub_acute:aC?aC.get("KODE"):0,adl_chronic:ag?ag.get("KODE"):0,spec_proc:aM.procedure,spec_dr:aD?aD.get("KODE"):"",spec_inv:aM.investigation,spec_prosth:aM.prosthesis,nopen:av.get("NOMOR"),user:aP.app.usrid,user_nik:aP.app.usrNik,status:aR?1:0,kirim:az?1:0,tipe:aK?aK.get("ID"):0,icu_indikator:aE?aE.RAWAT_INTENSIF:0,icu_los:aE?aE.LAMA_RAWAT_INTENSIF:0,ventilator_hour:aS&&aS!=0?aS:"",upgrade_class_ind:aA,upgrade_class_class:ao?ao.INACBG:"",upgrade_class_los:ai,ref:{dpjp:aJ?aJ.data:null}},aT=aP.getRecord();ae.norm=Ext.String.leftPad(aL.NORM,aP.getPropertyConfig(15),"0");if(aT){aT.set("DATA",Ext.JSON.encode(ae));aP.save(aG,{},function(e,g,f){if(f){aI.set("finalGrouping",ae.status==1);aG.service.grouper(ae,function(l,n,m){aP.reloadHasilGrouping();aP.setLoading(false)})}else{aP.setLoading(false)}})}else{aP.setLoading(false)}}}},savePenjaminTagihan:function(o,u){var p=this,t=p.getView(),q=p.getViewModel(),s=q.get("penjaminTagihan");if(s){s.set(o);s.save({callback:function(e,g,f){if(f){t.notifyMessage(u)}}})}}},onCetak:function(E){var y=this,G=y.getView(),B=y.getViewModel(),t=y.getReferences(),C=t.inacbgtipecombo.getSelection(),z=B.get("pendaftaran"),A=z?z.get("PENJAMIN"):null,D=y.getDataMapInacbgSimrs(4,"SIMRS",A?A.KELAS:3,C.get("VERSION")),w=B.get("kunjunganRawat"),x=B.get("kunjunganMasuk");if(z&&w.length>0){var F=y.getDataMapInacbgSimrs(1,"SIMRS",x.get("JENIS_KUNJUNGAN"),C.get("VERSION")),D=E.action==0?(F.INACBG==2?3:D.INACBG):E.action;Ext.Msg.show({title:"Cetak Laporan Individual",message:"Anda ingin tampilkan?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:E,fn:function(f){var e=true;if(f==="yes"){e=false}y.getView().cetak({NAME:"inacbg.CetakLapIndividual"+C.get("VERSION"),TYPE:e?"Word":"Pdf",EXT:e?"docx":"pdf",PARAMETER:{PNOPEN:z.get("NOMOR"),PKELAS:D,CETAK_HEADER:1},REQUEST_FOR_PRINT:e,PRINT_NAME:"CetakMR"},function(g){G.openDialog("Print Preview",true,0,0,{xtype:"panel",title:"Cetak Laporan Individual"},function(m,l){l.down("panel").update("<iframe style='width: 100%; height: 100%' src='"+g+"'></iframe>")})})}})}},onRedistribusiTagihan:function(s){var p=this,u=p.getView(),q=p.getViewModel(),v=q.get("tagihanPendaftaran"),w=u.getReferensi(v.data,"TAGIHAN"),t=Ext.create("data.model.Tagihan",{ID:w.ID});t.set("REDISTRIBUSI",1);u.ownerCt.setLoading(true);t.animateTarget=s;t.scope=p;t.showError=true;t.save({callback:function(e,g,f){if(f){w=e.data;u.setInfoDistribusiTagihan(e.data)}u.ownerCt.setLoading(false)}})},destroy:function(){if(this.service){delete this.service}Ext.app.ViewController.prototype.destroy.call(this)}},0,0,0,0,["controller.grouping-form"],0,[plugins.inacbg.grouping,"FormController"],0));(Ext.cmd.derive("plugins.inacbg.grouping.Workspace",com.Form,{autoScroll:true,cls:"x-br-top",border:false,diagnosisWorkspace:undefined,proceduresWorkspace:undefined,items:[{xtype:"grouping-form",border:false}],onLoadRecord:function(n,l){var m=n.down("grouping-form");if(plugins.inacbg){plugins.inacbg.model.Grouping.load(l.get("NOMOR"),{callback:function(g,f,e){if(e){m.loadRecord(g)}else{m.createRecord({NOPEN:l.get("NOMOR")})}}})}m.setPendaftaran(l)},setICDWorkspace:function(l,g){this.diagnosisWorkspace=l;this.proceduresWorkspace=g}},0,["grouping-workspace"],["component","box","container","panel","form","com-form","grouping-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"grouping-workspace":true},["widget.grouping-workspace"],0,[plugins.inacbg.grouping,"Workspace"],0));(Ext.cmd.derive("plugins.inacbg.grouping.hasil.Form",com.Form,{model:"plugins.inacbg.model.HasilGrouping",viewModel:{formulas:{getWaktu:function(f){return Ext.util.Format.date(f("record.TANGGAL"),"d-m-Y H:i:s")},getTarifCBG:function(f){return Ext.util.Format.number(f("record.TARIFCBG"),"0,000")},getTarifAdl:function(f){return Ext.util.Format.number(f("record.TARIFSA"),"0,000")},getTarifAdlChronic:function(f){return Ext.util.Format.number(f("record.TARIFSC"),"0,000")},getTarifSpecialProcedure:function(f){return Ext.util.Format.number(f("record.TARIFSP"),"0,000")},getTarifSpecialProsthesis:function(f){return Ext.util.Format.number(f("record.TARIFSR"),"0,000")},getTarifSpecialInvestigation:function(f){return Ext.util.Format.number(f("record.TARIFSI"),"0,000")},getTarifSpecialDrug:function(f){return Ext.util.Format.number(f("record.TARIFSD"),"0,000")},getTotalTarif:function(f){return Ext.util.Format.number(f("record.TOTALTARIF"),"0,000")}}},layout:{type:"vbox",align:"stretch"},border:false,defaults:{margin:2,labelAlign:"right",labelWidth:100,readOnly:true},defaultType:"textfield",items:[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},defaults:{margin:2,labelAlign:"right",labelWidth:100,readOnly:true},defaultType:"textfield",items:[{labelWidth:100,fieldLabel:"Operator/Waktu",flex:1,emptyText:"[Operator]",bind:{value:"{record.REFERENSI.USER.NAMA}"}},{emptyText:"[Waktu]",width:150,bind:{value:"{getWaktu}"}},{fieldLabel:"Tipe Pasien",flex:1,emptyText:"[Tipe Pasien]",reference:"tipepasien"}]},{fieldLabel:"Kode INACBG",flex:1,emptyText:"[Kode INACBG]",bind:{value:"{record.CODECBG}"}},{fieldLabel:"Deskripsi",flex:1,emptyText:"[Deskripsi]",bind:{value:"{record.REFERENSI.CODECBG.DESKRIPSI}"}},{fieldLabel:"Tarif INACBG",flex:1,emptyText:"[Tarif INACBG]",bind:{value:"{getTarifCBG}"},fieldStyle:"text-align: right"},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},defaults:{margin:2,labelAlign:"right",labelWidth:200,readOnly:true},defaultType:"textfield",items:[{fieldLabel:"Sub Acute",emptyText:"[Kode]",bind:{value:"{record.UNUSA}"}},{emptyText:"[Deskripsi Sub Acute]",flex:1,bind:{value:"{record.REFERENSI.UNUSA.DESKRIPSI}"}},{emptyText:"[Tarif Sub Acute]",width:150,bind:{value:"{getTarifAdl}"},fieldStyle:"text-align: right"}]},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},defaults:{margin:2,labelAlign:"right",labelWidth:200,readOnly:true},defaultType:"textfield",items:[{fieldLabel:"Chronic",emptyText:"[Kode]",bind:{value:"{record.UNUSC}"}},{emptyText:"[Deskripsi Chronic]",flex:1,bind:{value:"{record.REFERENSI.UNUSC.DESKRIPSI}"}},{emptyText:"[Tarif Chronic]",width:150,bind:{value:"{getTarifAdlChronic}"},fieldStyle:"text-align: right"}]},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},defaults:{margin:2,labelAlign:"right",labelWidth:200,readOnly:true},defaultType:"textfield",items:[{fieldLabel:"Special Procedur",emptyText:"[Kode]",bind:{value:"{record.UNUSP}"}},{emptyText:"[Deskripsi Special Procedure]",flex:1,bind:{value:"{record.REFERENSI.UNUSP.DESKRIPSI}"}},{emptyText:"[Tarif Special Procedure]",width:150,bind:{value:"{getTarifSpecialProcedure}"},fieldStyle:"text-align: right"}]},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},defaults:{margin:2,labelAlign:"right",labelWidth:200,readOnly:true},defaultType:"textfield",items:[{fieldLabel:"Special Prosthesis",emptyText:"[Kode]",bind:{value:"{record.UNUSR}"}},{emptyText:"[Deskripsi Special Prosthesis]",flex:1,bind:{value:"{record.REFERENSI.UNUSR.DESKRIPSI}"}},{emptyText:"[Tarif Special Prosthesis]",width:150,bind:{value:"{getTarifSpecialProsthesis}"},fieldStyle:"text-align: right"}]},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},defaults:{margin:2,labelAlign:"right",labelWidth:200,readOnly:true},defaultType:"textfield",items:[{fieldLabel:"Special Investigation",emptyText:"[Kode]",bind:{value:"{record.UNUSI}"}},{emptyText:"[Deskripsi Special Investigation]",flex:1,bind:{value:"{record.REFERENSI.UNUSI.DESKRIPSI}"}},{emptyText:"[Tarif Special Investigation]",width:150,bind:{value:"{getTarifSpecialInvestigation}"},fieldStyle:"text-align: right"}]},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},defaults:{margin:2,labelAlign:"right",labelWidth:200,readOnly:true},defaultType:"textfield",items:[{fieldLabel:"Special Drug",emptyText:"[Kode]",bind:{value:"{record.UNUSD}"}},{emptyText:"[Deskripsi Special Drug]",flex:1,bind:{value:"{record.REFERENSI.UNUSD.DESKRIPSI}"}},{emptyText:"[Tarif Special Drug]",width:150,bind:{value:"{getTarifSpecialDrug}"},fieldStyle:"text-align: right"}]},{fieldLabel:"Total Tarif",flex:1,emptyText:"[Total Tarif]",bind:{value:"{getTotalTarif}",fieldStyle:"text-align: right"}}],setTipePasien:function(f){this.down("[reference=tipepasien]").setValue(f)}},0,["grouping-hasil-form"],["component","box","container","panel","form","com-form","grouping-hasil-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"grouping-hasil-form":true},["widget.grouping-hasil-form"],0,[plugins.inacbg.grouping.hasil,"Form"],0));(Ext.cmd.derive("plugins.inacbg.model.Grouping",data.model.Model,{serviceName:"inacbgservice/grouping",fields:[{name:"NOPEN",type:"string"},{name:"DATA"}],idProperty:"NOPEN"},0,0,0,0,0,0,[plugins.inacbg.model,"Grouping"],0));(Ext.cmd.derive("plugins.inacbg.model.HasilGrouping",data.model.Model,{serviceName:"inacbgservice/hasilgrouping",fields:[{name:"NOPEN",type:"string"},{name:"NOSEP",type:"string"},{name:"CODECBG",type:"string"},{name:"int",type:"string"},{name:"TARIFSP",type:"int"},{name:"TARIFSR",type:"int"},{name:"TARIFSI",type:"int"},{name:"TARIFSD",type:"int"},{name:"TARIFSA",type:"int"},{name:"TARIFKLS1",type:"int"},{name:"TARIFKLS2",type:"int"},{name:"TARIFKLS3",type:"int"},{name:"TOTALTARIF",type:"int"},{name:"TARIFRS",type:"int"},{name:"UNUSR",type:"string"},{name:"UNUSI",type:"string"},{name:"UNUSP",type:"string"},{name:"UNUSD",type:"string"},{name:"UNUSA",type:"string"},{name:"TANGGAL",type:"date"},{name:"USER",type:"int"},{name:"STATUS",type:"int"}],idProperty:"NOPEN"},0,0,0,0,0,0,[plugins.inacbg.model,"HasilGrouping"],0));(Ext.cmd.derive("plugins.inacbg.store.Grouping",data.store.Store,{model:"plugins.inacbg.model.Grouping"},0,0,0,0,["store.grouping-store"],0,[plugins.inacbg.store,"Grouping"],0));(Ext.cmd.derive("plugins.inacbg.store.HasilGrouping",data.store.Store,{model:"plugins.inacbg.model.HasilGrouping"},0,0,0,0,["store.hasil-grouping-store"],0,[plugins.inacbg.store,"HasilGrouping"],0));(Ext.cmd.derive("plugins.inacbg.store.Inacbg",data.store.Store,{model:"plugins.inacbg.model.Inacbg"},0,0,0,0,["store.inacbg-store"],0,[plugins.inacbg.store,"Inacbg"],0));(Ext.cmd.derive("plugins.inacbg.store.ListProcedure",data.store.Store,{model:"plugins.inacbg.model.ListProcedure"},0,0,0,0,["store.list-procedure-store"],0,[plugins.inacbg.store,"ListProcedure"],0));(Ext.cmd.derive("plugins.inacbg.store.MapInacbgSimrs",data.store.Store,{model:"plugins.inacbg.model.MapInacbgSimrs"},0,0,0,0,["store.map-inacbg-simrs-store"],0,[plugins.inacbg.store,"MapInacbgSimrs"],0));(Ext.cmd.derive("plugins.inacbg.tipe.Combo",com.Combo,{viewModel:{stores:{store:{type:"inacbg-tipe-store"}}},valueField:"ID",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="x-boundlist-item">','<div style="font-size: 12px;"><strong>Ver.{VERSION} - {NAMA}</strong></div>',"</div>","</tpl>"),displayTpl:Ext.create("Ext.XTemplate",'<tpl for=".">',"Ver.{VERSION} - {NAMA}","</tpl>")},0,["inacbg-tipe-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","inacbg-tipe-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"inacbg-tipe-combo":true},["widget.inacbg-tipe-combo"],0,[plugins.inacbg.tipe,"Combo"],0));(Ext.cmd.derive("plugins.inasis.Service",Ext.Base,{scope:this,animateTarget:null,showError:true,privates:{request:function(s,o,q,e){var p=this;Ext.Ajax.request({url:webservice.location+"plugins/"+s,method:o,jsonData:q,success:function(g,f){if(Ext.isFunction(e)){e(true,Ext.JSON.decode(g.responseText),f)}},failure:function(l,m){if(p.showError){var f=Ext.JSON.decode(l.responseText),g=Ext.isObject(f.detail)?Ext.JSON.encode(f.detail):f.detail;Ext.MessageBox.show({header:{height:20},ui:"danger-red",msg:"<strong>"+l.status+" - "+l.statusText+"</strong><br/>"+g,buttons:Ext.MessageBox.OK,animateTarget:p.animateTarget,scope:p.scope,icon:"error"})}if(Ext.isFunction(e)){e(false,l,m)}}})}},getPesertaByNoKartu:function(g,l){this.request("inasis/"+g,"GET","",l)},getPersertaByNIK:function(g,l){this.request("inasis/nik/"+g,"GET","",l)},buatSEP:function(g,l){this.request("inasis","POST",g,l)},cekSEP:function(g,l){this.request("inasis/cekSEP/"+g,"GET","",l)},storeNoTransaksiDiKunjungan:function(m,o,n){var p={noSEP:m,noTrans:o};this.request("inasis/mappingDataTransaksi","POST",p,n)},updateTanggalPulang:function(m,o,n){var p={noSEP:m,tglPlg:o};this.request("inasis/updateTanggalPulang","POST",p,n)},batalkanSEP:function(n,l){var m={noSEP:n};this.request("inasis/batalkanSEP","POST",m,l)}},0,["inasiservice"],["inasiservice"],{inasiservice:true},["widget.inasiservice"],0,[plugins.inasis,"Service"],0));(Ext.cmd.derive("plugins.kemkes.Service",plugins.BaseService,{sisrute:undefined,sitt:undefined,constructor:function(){this.sisrute=Ext.create("plugins.kemkes.sisrute.Service");this.sitt=Ext.create("plugins.kemkes.sitt.Service")},getSisrute:function(){return this.sisrute},getSITT:function(){return this.sitt}},1,["kemkeservice"],["baseservice","kemkeservice"],{baseservice:true,kemkeservice:true},["widget.kemkeservice"],0,[plugins.kemkes,"Service"],0));(Ext.cmd.derive("plugins.kemkes.sisrute.Service",plugins.BaseService,{getRujukan:function(l,g){this.request("kemkes/getRujukan/"+l,"GET","",g)},buatRujukan:function(l,g){this.request("kemkes/buatRujukan","POST",l,g)},ubahRujukan:function(l,g){this.request("kemkes/ubahRujukan","PUT",l,g)},batalRujukan:function(m,n,l){this.request("kemkes/batalRujukan/"+m,"PUT",n,l)},simpanRujukan:function(l,g){this.request("kemkes/simpanRujukan","POST",l,g)}},0,["sisruteservice"],["baseservice","sisruteservice"],{baseservice:true,sisruteservice:true},["widget.sisruteservice"],0,[plugins.kemkes.sisrute,"Service"],0));(Ext.cmd.derive("plugins.kemkes.sitt.Form",com.Form,{controller:"plugins-kemkes-sitt-form",model:"plugins.kemkes.sitt.Model",layout:{type:"vbox",align:"stretch"},defaults:{xtype:"fieldcontainer",layout:{type:"hbox"},margin:"1 0 0 0"},items:[{fieldLabel:"No. Registrasi Kab/Kota",items:[{xtype:"textfield",emptyText:"Masukkan No. Registrasi Kab/Kota",margin:"0 15 0 0",name:"noKartu",flex:1},{xtype:"datefield",fieldLabel:"Tgl. SEP",labelWidth:50,format:"d/m/Y",reference:"tglSep",width:180,margin:"0 1 0 0"},{xtype:"timefield",format:"H:i:s",width:110,reference:"wktSep"}]},{fieldLabel:"Asal Rujukan",items:[{xtype:"segmentedbutton",items:[{text:"Faskes 1",idx:1,pressed:true},{text:"Faskes 2(RS)",idx:2}],listeners:{toggle:"onToggleAsalRujukan"},margin:"0 15 0 0"},{xtype:"textfield",fieldLabel:"Nomor",emptyText:"Masukkan No. Rujukan",margin:"0 15 0 0",reference:"noRujukan",labelWidth:45,flex:1},{xtype:"textfield",fieldLabel:"PPK",emptyText:"Masukkan PPK Rujukan",margin:"0 15 0 0",reference:"ppkRujukan",labelWidth:27,width:120},{xtype:"datefield",fieldLabel:"Tgl.",labelWidth:27,format:"d/m/Y",reference:"tglRujukan",width:157,margin:"0 1 0 0"},{xtype:"timefield",format:"H:i:s",width:110,reference:"wktRujukan"}]},{fieldLabel:"Jenis Pelayanan",items:[{xtype:"segmentedbutton",items:[{text:"Rawat Inap",idx:1},{text:"Rawat Jalan",idx:2,pressed:true}],listeners:{toggle:"onToggleButtonRawat"},margin:"0 15 0 0"},{xtype:"textfield",fieldLabel:"Catatan",labelWidth:50,reference:"catatan",emptyText:"Masukkan Catatan",flex:1}]},{fieldLabel:"Diagnosa Awal",items:[{xtype:"textfield",emptyText:"Masukkan Diagnosa Awal",reference:"diagAwal",margin:"0 15 0 0",flex:1},{xtype:"textfield",fieldLabel:"Poli Tujuan",labelWidth:70,emptyText:"Masukkan Poli Tujuan",reference:"poliTujuan",margin:"0 15 0 0",flex:1},{fieldLabel:"Poli Eksekutif?",xtype:"fieldcontainer",labelWidth:90,items:[{xtype:"segmentedbutton",items:[{text:"Ya",idx:1},{text:"Tidak",idx:0,pressed:true}],listeners:{toggle:"onTogglePoliEksekutif"}}]}]},{fieldLabel:"Kelas Rawat",defaults:{margin:"0 15 0 0"},items:[{xtype:"segmentedbutton",items:[{text:"Kelas 1",idx:1},{text:"Kelas 2",idx:2},{text:"Kelas 3",idx:3,pressed:true}],listeners:{toggle:"onToggleButtonKelas"}},{fieldLabel:"COB?",xtype:"fieldcontainer",labelWidth:35,items:[{xtype:"segmentedbutton",items:[{text:"Ya",idx:1},{text:"Tidak",idx:0,pressed:true}],listeners:{toggle:"onToggleCOB"}}]},{fieldLabel:"Katarak?",xtype:"fieldcontainer",labelWidth:60,items:[{xtype:"segmentedbutton",items:[{text:"Ya",idx:1},{text:"Tidak",idx:0,pressed:true}],listeners:{toggle:"onToggleKatarak"}}]}]},{fieldLabel:"SKDP",items:[{xtype:"textfield",emptyText:"Masukkan No. Surat",reference:"nosuratskdp",flex:2},{xtype:"plugins-bpjs-referensi-spesialistik-combo",reference:"spesialiscombo",flex:1,listeners:{select:"onSelectSpesialistik"}},{xtype:"plugins-bpjs-referensi-dpjp-combo",flex:1,reference:"dpjpcombo"}]},{fieldLabel:"Laka Lantas",items:[{xtype:"segmentedbutton",items:[{text:"Kasus Kecelakaan",idx:1},{text:"Bukan Kasus Kecelakaan",idx:2,pressed:true}],listeners:{toggle:"onToggleButtonLakaLantas"},margin:"0 15 0 0"},{xtype:"combobox",fieldLabel:"Penjamin",labelWidth:60,store:{fields:["ID","DESKRIPSI"],data:[{ID:1,DESKRIPSI:"PT. Jasa Raharja"},{ID:2,DESKRIPSI:"BPJS Ketenagakerjaan"},{ID:3,DESKRIPSI:"PT. TASPEN"},{ID:4,DESKRIPSI:"PT. ASABRI"}]},displayField:"DESKRIPSI",valueField:"ID",editable:false,listeners:{select:"onSelectPenjamin"},margin:"0 15 0 0"},{xtype:"datefield",fieldLabel:"Tgl. Kejadian",labelWidth:90,format:"d/m/Y",reference:"tglkejadian",width:220,margin:"0 15 0 0"},{xtype:"textfield",fieldLabel:"Keterangan",labelWidth:90,emptyText:"Masukkan Keterangan",reference:"lokasiLaka",flex:1}]},{fieldLabel:"Suplesi",items:[{xtype:"segmentedbutton",items:[{text:"Ya",idx:1},{text:"Tidak",idx:0,pressed:true}],listeners:{toggle:"onToggleButtonSuplesi"},margin:"0 15 0 0"},{xtype:"textfield",emptyText:"Masukkan No. Suplesi",reference:"nosuplesi",flex:1},{xtype:"plugins-bpjs-referensi-wilayah-combo",name:"KODE_PROPINSI",firstLoad:true,reference:"propinsicombo",emptyText:"[Propinsi]",flex:1,listeners:{select:"onSelectWilayah"}},{xtype:"plugins-bpjs-referensi-wilayah-combo",name:"KODE_KABUPATEN",reference:"kabupatencombo",params:{tipe:2},emptyText:"[Kabupaten]",flex:1,listeners:{select:"onSelectWilayah"}},{xtype:"plugins-bpjs-referensi-wilayah-combo",name:"KODE_KECAMATAN",reference:"kecamatancombo",params:{tipe:3},flex:1,emptyText:"[Kecamatan]"}]},{fieldLabel:"User",items:[{xtype:"textfield",emptyText:"Masukkan Nama Pengguna",flex:1,reference:"user",margin:"0 15 0 0"},{xtype:"textfield",fieldLabel:"No. MR",labelWidth:50,emptyText:"Masukkan Nomor Rekam Medis",reference:"noMr",flex:1,margin:"0 15 0 0"},{xtype:"textfield",fieldLabel:"No. Telp.",labelWidth:55,emptyText:"No. Telepon Peserta/Pasien",reference:"noTelp",flex:1}]},{xtype:"fieldcontainer",items:[{xtype:"component",flex:1},{xtype:"button",text:"Generate SEP",handler:"onGenerateSEP"}]},{xtype:"textareafield",fieldLabel:"Respon",reference:"response",labelAlign:"top",readOnly:true,flex:1}]},0,["plugins-kemkes-sitt-form"],["component","box","container","panel","form","com-form","plugins-kemkes-sitt-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"plugins-kemkes-sitt-form":true},["widget.plugins-kemkes-sitt-form"],0,[plugins.kemkes.sitt,"Form"],0));(Ext.cmd.derive("plugins.kemkes.sitt.FormController",Ext.app.ViewController,{init:function(){var g=this,l=g.getView();g.integrasi=l.app.xitr("ID",1);if(g.integrasi){g.service=Ext.create(g.integrasi.NAMA_KLAS,{})}},onToggleButtonKelas:function(n,m,l){this.getView().klsRawat=m.idx},onToggleButtonRawat:function(n,m,l){this.getView().jnsPelayanan=m.idx},onToggleAsalRujukan:function(n,m,l){this.getView().asalRujukan=m.idx},onTogglePoliEksekutif:function(n,m,l){this.getView().poliEksekutif=m.idx},onToggleCOB:function(n,m,l){this.getView().cob=m.idx},onToggleKatarak:function(n,m,l){this.getView().katarak=m.idx},onSelectSpesialistik:function(q,v){var p=this,u=p.getView(),s=p.getReferences(),t=s.dpjpcombo.getStore(),w=s.tglSep.getValue();if(v){t.setQueryParams({jenisPelayanan:u.jnsPelayanan,tglPelayanan:Ext.util.Format.date(w,"Y-m-d"),kodeSpesialis:v.get("kode")});t.load()}},onToggleButtonLakaLantas:function(n,m,l){this.getView().lakaLantas=m.idx},onSelectPenjamin:function(l,g){if(g){this.getView().penjamin=g.get("ID")}},onToggleButtonSuplesi:function(n,m,l){this.getView().suplesi=m.idx},onSelectWilayah:function(m,l){var n=this.getReferences();if(m.params.tipe==1){n.kecamatancombo.getStore().removeAll();n.kabupatencombo.getStore().removeAll();n.kabupatencombo.params.kodePropinsi=l.get("kode");n.kabupatencombo.load()}if(m.params.tipe==2){n.kecamatancombo.getStore().removeAll();n.kecamatancombo.params.kodeKabupaten=l.get("kode");n.kecamatancombo.load()}},onGenerateSEP:function(G){var y=this,I=y.getView(),t=y.getReferences();t.response.setValue("");if(y.service){var A=t.tglSep.getValue(),F=t.wktSep.getValue(),D=t.tglRujukan.getValue(),x=t.wktRujukan.getValue(),B=t.tglkejadian.getValue(),z=t.dpjpcombo.getSelection(),E=t.propinsicombo.getSelection(),C=t.kabupatencombo.getSelection(),H=t.kecamatancombo.getSelection();A.setHours(F.getHours());A.setMinutes(F.getMinutes());A.setSeconds(F.getSeconds());D.setHours(x.getHours());D.setMinutes(x.getMinutes());D.setSeconds(x.getSeconds());I.setLoading(true);y.service.buatSEP({noKartu:t.noKartu.getValue(),tglSep:Ext.util.Format.date(A,"Y-m-d H:i:s"),tglRujukan:Ext.util.Format.date(D,"Y-m-d H:i:s"),asalRujukan:I.asalRujukan,noRujukan:t.noRujukan.getValue(),ppkRujukan:t.ppkRujukan.getValue(),jnsPelayanan:I.jnsPelayanan,catatan:t.catatan.getValue(),diagAwal:t.diagAwal.getValue(),poliTujuan:t.poliTujuan.getValue(),eksekutif:I.poliEksekutif,klsRawat:I.klsRawat,cob:I.cob,katarak:I.katarak,noSuratSKDP:t.nosuratskdp.getValue(),dpjpSKDP:z?z.get("kode"):"",lakaLantas:I.lakaLantas,penjamin:I.penjamin,tglKejadian:Ext.util.Format.date(B,"Y-m-d"),suplesi:I.suplesi,noSuplesi:t.nosuplesi.getValue(),lokasiLaka:t.lokasiLaka.getValue(),propinsi:E?E.get("kode"):"",kabupaten:C?C.get("kode"):"",kecamatan:H?H.get("kode"):"",user:t.user.getValue(),norm:t.noMr.getValue(),noTelp:t.noTelp.getValue()},function(e,f){if(e){t.response.setValue(JSON.stringify(f,undefined,2))}I.setLoading(false)})}},destroy:function(){if(this.service){delete this.service}Ext.app.ViewController.prototype.destroy.call(this)}},0,0,0,0,["controller.plugins-kemkes-sitt-form"],0,[plugins.kemkes.sitt,"FormController"],0));(Ext.cmd.derive("plugins.kemkes.sitt.Service",plugins.BaseService,{simpan:function(l,g){this.request("kemkes/sitt","POST",l,g)}},0,["sittservice"],["baseservice","sittservice"],{baseservice:true,sittservice:true},["widget.sittservice"],0,[plugins.kemkes.sitt,"Service"],0));(Ext.cmd.derive("plugins.pusdatin.Service",plugins.BaseService,{nik:function(l,g){this.request("pusdatin/nik/"+l,"GET","",g)}},0,["pusdatinservice"],["baseservice","pusdatinservice"],{baseservice:true,pusdatinservice:true},["widget.pusdatinservice"],0,[plugins.pusdatin,"Service"],0));(Ext.cmd.derive("plugins.tts.Service",plugins.BaseService,{audios:[],idx:0,parent:undefined,audioCount:0,constructor:function(p){var m=this;m.config=Ext.apply(m.config,p);m.callParent();m.initConfig(m.config);for(var o=0;o<=m.audioCount-1;o++){var n=Ext.create("com.Audio",{controls:false,volume:10});n.on("ended",function(){if(m.idx<(m.audios.length-1)){m.idx++;m.audios[m.idx].play()}else{m.idx=0}});m.audios.push(n)}},getAudios:function(){return this.audios},speech:function(p){var m=this,n=webservice.location+"plugins/tts?q=";if(Ext.isArray(p)){if(m.audioCount>1){Ext.Array.each(p,function(e,f){if(f==0){m.audios[f].setSrc(n+e)}else{m.audios[f].setSrc(n+e);m.audios[f].load()}})}else{var o=Ext.JSON.encode(p);m.audios[m.idx].setSrc(n+o+"&ty=json")}}else{m.audios[m.idx].setSrc(n+p)}m.audios[m.idx].play()},load:function(n){var l=this;if(Ext.isArray(n)){var m=Ext.JSON.encode(n);l.request("tts?q="+m+"&ty=json")}else{l.request("tts?q="+n+"&ty=json")}},replay:function(){this.audios[this.idx].play()},destroy:function(){var l=this;if(l.audios.length>0){for(var n=0;n<=l.audioCount-1;n++){var m=l.audios.pop();if(m){if(m.destroy){m.destroy()}}}l.audios=[]}l.callParent()}},1,["ttservice"],["baseservice","ttservice"],{baseservice:true,ttservice:true},["widget.ttservice"],0,[plugins.tts,"Service"],0));(Ext.cmd.derive("pendaftaran.kecelakaan.Model",data.model.Model,{serviceName:"pendaftaran/kecelakaan",fields:[{name:"NOMOR",type:"string"},{name:"NOPEN",type:"string"},{name:"PENJAMIN",type:"int"},{name:"LOKASI",type:"string"},{name:"TANGGAL_KEJADIAN",type:"date",dateFormat:"Y-m-d"},{name:"SUPLESI",type:"int",defaultValue:0},{name:"NO_SEP_SUPLESI",type:"string"},{name:"KODE_PROPINSI",type:"string"},{name:"KODE_KABUPATEN",type:"string"},{name:"KODE_KECAMATAN",type:"string"},{name:"STATUS",type:"int"}],idProperty:"NOMOR"},0,0,0,0,0,0,[pendaftaran.kecelakaan,"Model"],0));(Ext.cmd.derive("pendaftaran.kecelakaan.Store",data.store.Store,{model:"pendaftaran.kecelakaan.Model"},0,0,0,0,["store.pendaftaran-kecelakaan-store"],0,[pendaftaran.kecelakaan,"Store"],0));(Ext.cmd.derive("pendaftaran.online.reservasi.Model",data.model.Model,{serviceName:"registrasionline/reservasi",fields:[{name:"ID",type:"string"},{name:"TANGGALKUNJUGAN",type:"date"},{name:"NORM",type:"string"},{name:"NAMA",type:"string"},{name:"TEMPAT_LAHIR",type:"string"},{name:"TGL_LAHIR",type:"date"},{name:"POLI",type:"int"},{name:"DOKTER",type:"string"},{name:"CARABAYAR",type:"string"},{name:"CONTACT",type:"string"},{name:"TGL_DAFTAR",type:"string"},{name:"NO",type:"int"},{name:"JAM",type:"string"},{name:"POS_ANTRIAN",type:"int"},{name:"JENIS",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[pendaftaran.online.reservasi,"Model"],0));(Ext.cmd.derive("pendaftaran.online.reservasi.Store",data.store.Store,{model:"pendaftaran.online.reservasi.Model"},0,0,0,0,["store.pendaftaran-online-reservasi-store"],0,[pendaftaran.online.reservasi,"Store"],0));(Ext.cmd.derive("pendaftaran.rujukan.keluar.Model",data.model.Model,{serviceName:"pendaftaran/rujukan/keluar",fields:[{name:"NOMOR",type:"string"},{name:"NOPEN",type:"string"},{name:"KUNJUNGAN",type:"string"},{name:"JENIS",type:"int"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"TUJUAN",type:"int"},{name:"TUJUAN_RUANGAN",type:"int"},{name:"DIAGNOSA",type:"string"},{name:"DOKTER",type:"int"},{name:"KETERANGAN",type:"string"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"NOMOR"},0,0,0,0,0,0,[pendaftaran.rujukan.keluar,"Model"],0));(Ext.cmd.derive("pendaftaran.rujukan.keluar.Store",data.store.Store,{model:"pendaftaran.rujukan.keluar.Model"},0,0,0,0,["store.pendaftaran-rujukan-keluar-store"],0,[pendaftaran.rujukan.keluar,"Store"],0));(Ext.cmd.derive("pendaftaran.Detil",com.Form,{controller:"pendaftaran-detil",viewModel:{data:{record:undefined,formConfig:{cetakRegistrasi:true,cetakBarcode:false}},stores:{store:{type:"pendaftaran-store"}},formulas:{getFormatPendaftaran:function(m){var l=m("record.NOMOR"),n=l?l.substring(0,6)+"."+l.substring(6):"";return n},getInfoTanggal:function(p){var n=p("record.TANGGAL"),o=n?Ext.Date.format(n,"l, d F Y"):"",m=n?" Pukul "+Ext.Date.format(n,"H:i:s"):"";return o+m},diterima:function(n){var l=n("record.TUJUAN"),m=l?l.STATUS:0;return m==2||m==0},dibatalkan:function(p){var m=p("record.TUJUAN"),n=p("record.STATUS"),o=m?m.STATUS:0;return o!=2&&n!=0},selesai:function(n){var l=n("record.STATUS"),m=l?l:0;return m==2||m==0}}},title:"Detil Pendaftaran Kunjungan",header:{itemPosition:1,items:[{xtype:"component",width:260,bind:{html:"<strong>No. Pendaftaran: {getFormatPendaftaran}</strong>"}}]},layout:"border",border:false,defaults:{border:false},initComponent:function(){var f=this;f.items=[{region:"center",xtype:"panel",layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",layout:{type:"hbox"},padding:5,items:[{xtype:"pasien-short-detil",reference:"pasien",flex:1,cls:""},{xtype:"container",layout:{type:"vbox",align:"stretch"},items:[{xtype:"component",bind:"Tgl. Pendaftaran: {getInfoTanggal}"},{xtype:"tujuan-detil",reference:"tujuandetil",cls:"",flex:1},{xtype:"penjamin-detil",reference:"penjamindetil",cls:"",layout:{type:"vbox",align:"right"},flex:1}]}]},f.createLinks()]},f.createNavs()];f.callParent()},privates:{createLinks:function(){return{xtype:"tabpanel",flex:1,cls:"x-br-top",ui:"header-tab",items:[{xtype:"form-rujukan",title:"Rujukan",iconCls:"x-fa fa-envelope-o"},{xtype:"form-penanggung-jawab",title:"Penanggung Jawab",iconCls:"x-fa fa-user"}]}},createNavs:function(){return{region:"east",split:true,xtype:"container",layout:{type:"vbox",align:"stretch",pack:"center"},padding:5,defaultType:"button",items:[{text:"Batalkan",hidden:true,bind:{hidden:"{!dibatalkan}"},handler:"onBatalPendaftaran"},{text:"Ubah Tgl. Pendaftaran",hidden:true,bind:{hidden:"{diterima}"},handler:"onUbahTanggal"},{text:"Ubah Penjamin",hidden:true,bind:{hidden:"{selesai}"},handler:"onUbahPenjamin"},{text:"Ubah Tujuan",hidden:true,bind:{hidden:"{diterima}"},handler:"onUbahTujuan"},{text:"Ubah Berat & Panjang Bayi",hidden:true,bind:{hidden:"{selesai}"},handler:"onBayi"},{text:"Ubah Paket",hidden:true,bind:{hidden:"{selesai}"},handler:"onUbahPaket"},{text:"Surat Rujukan / Diagnosa Masuk",hidden:true,bind:{hidden:"{selesai}"},handler:"onSuratRujukan"},{text:"Kecelakaan",hidden:true,bind:{hidden:"{selesai}"},handler:"onKecelakaan"},{text:"Penanggungjawab",hidden:true,bind:{hidden:"{selesai}"},handler:"onPenanggungjawab"},{text:"Mapping Transaksi SEP",handler:"onMappingTransaksiSEP",bind:{hidden:"{!formConfig.supportSEP}"}},{text:"Hapus SEP",handler:"onHapusSEP",bind:{hidden:"{!formConfig.supportSEP}"}},{text:"Update SEP",handler:"onUpdateSEP",bind:{hidden:"{!formConfig.supportSEP}"}},{text:"Update Tanggal Pulang SEP",handler:"onUpdateTglPulangSEP",bind:{hidden:"{!formConfig.supportSEP}"}},{xtype:"component",flex:1},{text:"Cetak MR.1",handler:"onCetakMR1"},{text:"Cetak Registrasi (MR.1a)",hidden:true,bind:{hidden:"{!formConfig.cetakRegistrasi}"},handler:"onCetakRegistrasi"},{text:"Cetak Bukti Pendaftaran",handler:"onCetakBukti"},{text:"Cetak Barcode",handler:"onCetakBarcode",hidden:true,bind:{hidden:"{!formConfig.cetakBarcode}"}},{text:"Cetak Tracert",handler:"onCetakTracert"},{text:"Cetak Sep",handler:"onCetakSep",bind:{hidden:"{!formConfig.cetakSep}"}},{text:"Cetak Permohonan DPJP",handler:"onCetakPermohonanDPJP",bind:{hidden:"{!formConfig.cetakPermohonanDPJP}"}},{text:"Cetak Bukti Pemberian Informasi",handler:"onCetakBuktiPemberianInfo"}]}},updateContents:function(){var O=this,G=O.getViewModel(),K=G.get("record"),D=O.down("pasien-short-detil"),I=O.down("tujuan-detil"),e=O.down("penjamin-detil"),F=K.get("STATUS"),J=K.get("TUJUAN"),E=J?J.REFERENSI.RUANGAN:null,g=E?E.JENIS_KUNJUNGAN:1,H=K.get("REFERENSI"),L=H?Ext.create("data.model.Pasien",H.PASIEN):null,M=Ext.create("data.model.TujuanPasien",J),C=Ext.create("data.model.Penjamin",K.get("PENJAMIN")),f=O.app.xitr("ID",1),N=f?f.REF==C.get("JENIS"):false;D.load(L);I.load(M);e.load(C);G.set("formConfig.cetakRegistrasi",g==3);G.set("formConfig.cetakBarcode",g==2||g==3);G.set("formConfig.cetakSep",N);G.set("formConfig.supportSEP",N&&F!=0);G.set("formConfig.cetakPermohonanDPJP",g==3)}},load:function(e,o){var s=this,q=s.getViewModel(),p=q.get("store");if(q){if(Ext.getClassName(e)=="data.model.Pendaftaran"){q.set("record",e);s.loadRujukan(e);s.loadPenanggungJawab(e);q.notify();s.updateContents()}else{if(p){p.queryParams=e;p.load(function(y,x,w){try{if(w&&y.length>0){var m=q.get("record"),f=s.down("pasien-short-detil"),n=y[0].get("REFERENSI"),g=n?Ext.create("data.model.Pasien",n.PASIEN):null;q.set("record",y[0]);s.loadRujukan(y[0]);s.loadPenanggungJawab(y[0]);s.updateContents()}if(Ext.isFunction(o)){if(y){o(y[0],w)}}}catch(l){}})}}}},loadRujukan:function(m){var o=this,p=o.down("form-rujukan");p.setFormConfig({viewOnly:true});if(m){var n=m.get("RUJUKAN");if(n&&!Ext.isObject(n)){data.model.SuratRujukan.load(n,{success:function(e,f){m.set("RUJUKAN",e.data);p.loadRecord(e)}})}else{if(Ext.isObject(n)){p.loadRecord(Ext.create("data.model.SuratRujukan",n))}}}},loadPenanggungJawab:function(n){var o=this,s=o.down("form-penanggung-jawab");s.setFormConfig({viewOnly:true});if(n){var p=n.get("REFERENSI"),q=p?(p.PENANGGUNG_PASIEN?Ext.create("data.model.PenanggungJawab",p.PENANGGUNG_PASIEN):null):null;s.loadRecord(q)}},getRecord:function(){return this.getViewModel().get("record")}},0,["pendaftaran-detil"],["component","box","container","panel","form","com-form","pendaftaran-detil"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"pendaftaran-detil":true},["widget.pendaftaran-detil"],0,[pendaftaran,"Detil"],0));(Ext.cmd.derive("pendaftaran.DetilController",Ext.app.ViewController,{init:function(){var g=this,l=g.getView();g.integrasi=l.app.xitr("ID",1);if(g.integrasi){g.service=Ext.create(g.integrasi.NAMA_KLAS,{})}},onBatalPendaftaran:function(q){var w=this,t=w.getView(),v=t.getRecord(),x=t.app.xpriv,s=x?false:true,y=v.get("PENJAMIN"),u=Ext.create("data.model.Pendaftaran",{NOMOR:v.get("NOMOR"),STATUS:v.get("STATUS")});if(x){s=!x("1010",false)}if(s){t.notifyMessage("Anda tidak memiliki Hak Akses untuk melakukan Pembatalan pendaftaran kunjungan!");return}u.showError=true;u.animateTarget=q;u.scope=w;t.showMessageBox({title:"Pembatalan Pendaftaran Kunjungan",message:"Anda yakin ingin membatalkan pendaftaran kunjungan ini ?",ui:"window-warning",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,defaultButton:"no",animateTarget:q,fn:function(e){if(e==="yes"){u.set("STATUS",0);u.save({callback:function(g,f,l){if(l){v.set("STATUS",0);if(y){if(y.JENIS>1){if(w.service){if(w.integrasi.REF==y.JENIS){if(y.NOMOR!=""){t.showMessageBox({title:"Pembatalan SEP",message:"Apakah anda ingin membatalkan SEP ?",ui:"window-warning",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,defaultButton:"no",animateTarget:q,fn:function(m){if(m==="yes"){w.service.batalkanSEP({nomor:y.NOMOR,user:t.app.usrNm},function(n,o){if(n){w.batalSepPenjamin();t.notifyMessage("Hapus SEP di BPJS berhasil")}})}}})}}}}}t.notifyMessage("Pembatalan pendaftaran kunjungan berhasil")}}})}}})},onUbahTanggal:function(){var p=this,s=p.getView(),n=s.getRecord(),o=s.app.xpriv,q=o?false:true;if(o){q=!o("100705",false)}if(q){s.notifyMessage("Anda tidak memiliki Hak Akses untuk melakukan Perubahan Tanggal pendaftaran kunjungan!");return}s.openDialog("",true,"27%","auto",{reference:"tanggaldaftarform",xtype:"tanggal-daftar-form",title:"Ubah Tanggal Pendaftaran",ui:"panel-cyan",showCloseButton:true},function(l,e){var f=e.down("tanggal-daftar-form"),g=Ext.clone(n.get("RUJUKAN"));f.on({save:function(m){m.set("RUJUKAN",g);e.close()}});delete n.data.RUJUKAN;f.loadRecord(n)})},onUbahPenjamin:function(){var q=this,w=q.getView(),t=q.getReferences(),x=t.pasien,u=w.getRecord(),y=Ext.create("data.model.Penjamin",u.get("PENJAMIN")),v=w.app.xpriv,s=v?false:true;if(v){s=!v("100702",false)}if(s){w.notifyMessage("Anda tidak memiliki Hak Akses untuk melakukan Perubahan Penjamin / Cara bayar!");return}w.openDialog("",true,"35%","40%",{reference:"ubahpenjamin",xtype:"ubah-penjamin-form",title:"Ubah Penjamin",ui:"panel-cyan",iconCls:"x-fa fa-user-secret",layout:"fit",showCloseButton:true},function(g,e){var f=e.down("ubah-penjamin-form");f.on({simpan:function(l){var n=w.app.xitr("ID",1),m=n?n.REF==l.get("JENIS"):false;record=q.getViewModel().get("record");q.getViewModel().set("formConfig.cetakSep",m);t.penjamindetil.load(l);u.set("PENJAMIN",l.data);record.set("PENJAMIN",l.data);e.close()}});f.setPendaftaran(u);f.setPasien(x.getRecord());f.loadRecord(y)})},onBayi:function(){var m=this,n=m.getView(),l=n.getRecord();n.openDialog("",true,"27%","auto",{xtype:"pendaftaran-bayi-form",ui:"panel-cyan",showCloseButton:true},function(f,g){var p=g.down("pendaftaran-bayi-form"),e=Ext.clone(l.get("RUJUKAN"));p.on({save:function(o){o.set("RUJUKAN",e);m.getViewModel().set("record",o);g.close()}});delete l.data.RUJUKAN;p.loadRecord(l)})},onUbahPaket:function(){var p=this,s=p.getView(),n=s.getRecord(),o=s.app.xpriv,q=o?false:true;if(o){q=!o("100704",false)}if(q){s.notifyMessage("Anda tidak memiliki Hak Akses untuk melakukan Perubahan Paket!");return}s.openDialog("",true,"27%","auto",{reference:"ubahpaketform",xtype:"ubah-paket-form",title:"Ubah Paket Pendaftaran",ui:"panel-cyan",showCloseButton:true},function(l,e){var f=e.down("ubah-paket-form"),g=Ext.clone(n.get("RUJUKAN"));f.on({save:function(m){m.set("RUJUKAN",g);p.getViewModel().set("record",m);e.close()}});delete n.data.RUJUKAN;f.loadRecord(n)})},onUbahTujuan:function(){if(!this.pasienTlhDiTerima()){var p=this,s=p.getView(),q=p.getReferences(),o=q.pasien,n=s.getRecord();n=Ext.create("data.model.TujuanPasien",n.get("TUJUAN")),record=p.getViewModel().get("record"),xpriv=s.app.xpriv,notify=xpriv?false:true;if(xpriv){notify=!xpriv("100703",false)}if(notify){s.notifyMessage("Anda tidak memiliki Hak Akses untuk melakukan Perubahan Tujuan!");return}s.openDialog("",true,"28%","40%",{reference:"ubahtujuan",xtype:"ubah-tujuan-form",title:"Ubah Tujuan",iconCls:"x-fa fa-home",ui:"panel-cyan",showCloseButton:true},function(g,e){var f=e.down("ubah-tujuan-form");f.on({simpan:function(l){q.tujuandetil.load(l);record.set("TUJUAN",l.data);e.close()}});f.setPasien(o.getRecord());f.loadRecord(n)})}},onCetakBukti:function(p,e){var o=this,q=o.getView(),s=o.getViewModel().get("record");q.fireEvent("cetakbukti",s)},onCetakBarcode:function(){var l=this,g=l.getViewModel().get("record");this.getView().fireEvent("cetakbarcode",g)},onCetakTracert:function(){var l=this,g=l.getViewModel().get("record");this.getView().fireEvent("cetaktracert",g)},onCetakSep:function(){var l=this,g=l.getViewModel().get("record");this.getView().fireEvent("cetaksep",g)},onCetakMR1:function(){var I=this,H=I.getView(),D=I.getViewModel().get("record"),w=D.get("TUJUAN"),A=w?w.REFERENSI.RUANGAN:null,G=A?A.JENIS_KUNJUNGAN:1,x=D.get("REFERENSI"),z="Word",B="docx",E=true,F="Cetak Medical Record",y={NAME:"mr.",TYPE:z,EXT:B,PARAMETER:{PNOPEN:D.get("NOMOR"),CETAK_HEADER:1},REQUEST_FOR_PRINT:E,PRINT_NAME:"CetakMR"},C=(G==1||G==14?"CetakMR1RawatJalan":(G==2?"CetakMR2RawatDarurat":H.kode+"CetakMR1RawatInap"));y.NAME=y.NAME+C;Ext.Msg.show({title:F,message:"Tekan tombol Yes/Ya utk cetak langsung<br/>Tekan tombol No/Tidak untuk Preview",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,defaultButton:"yes",animateTarget:I,fn:function(e){if(e!="yes"){z="Pdf";B="pdf";E=false}y.TYPE=z;y.EXT=B;y.REQUEST_FOR_PRINT=E;H.cetak(y,function(f){H.printPreview(F,f)})}})},onCetakRegistrasi:function(){var l=this,g=l.getViewModel().get("record");l.getView().cetak({NAME:"mr.CetakMR1aRawatInap",TYPE:"Word",EXT:"docx",PARAMETER:{PNOPEN:g.get("NOMOR"),CETAK_HEADER:1},REQUEST_FOR_PRINT:true,PRINT_NAME:"CetakMR"})},onSuratRujukan:function(q){var p=this,s=p.getView(),n=p.getViewModel().get("record"),o=n.get("RUJUKAN")?Ext.create("data.model.SuratRujukan",n.get("RUJUKAN")):false;s.openDialog("",true,450,300,{xtype:"form-rujukan",title:"Surat Rujukan / Diagnosa Masuk",ui:"panel-cyan",showCloseButton:true},function(g,e){var f=e.down("form-rujukan");f.setFormConfig({simpan:true});if(o){o.set("NOPEN",n.get("NOMOR"));f.loadRecord(o)}else{f.createRecord({NORM:n.get("NORM"),PPK:o?o.PPK:0,NOPEN:n.get("NOMOR"),STATUS:1})}f.on({save:function(l){n.set("RUJUKAN",l.data);s.loadRujukan(n);e.close()}})},q)},onKecelakaan:function(s){var o=this,t=o.getView(),u=o.getViewModel().get("record"),p=u.get("REFERENSI")?u.get("REFERENSI"):null,q=p?(p.KECELAKAAN?Ext.create("pendaftaran.kecelakaan.Model",p.KECELAKAAN):null):null;t.openDialog("",true,"50%",200,{xtype:"pendaftaran-kecelakaan-form",ui:"panel-cyan",showCloseButton:true},function(g,e){var f=e.down("pendaftaran-kecelakaan-form");f.setFormConfig({simpan:true});if(q){f.loadRecord(q)}else{f.createRecord({NOPEN:u.get("NOMOR")})}f.on({save:function(l){if(p){p.KECELAKAAN=l.data}else{u.set("REFERENSI",{KECELAKAAN:l.data})}e.close()}})},s)},onPenanggungjawab:function(s){var o=this,t=o.getView(),u=o.getViewModel().get("record"),p=u.get("REFERENSI")?u.get("REFERENSI"):null,q=p?(p.PENANGGUNG_PASIEN?Ext.create("data.model.PenanggungJawab",p.PENANGGUNG_PASIEN):null):null;t.openDialog("",true,"50%","40%",{xtype:"form-penanggung-jawab",ui:"panel-cyan",showCloseButton:true},function(g,e){var f=e.down("form-penanggung-jawab");f.setFormConfig({simpan:true});if(q){f.loadRecord(q)}else{f.createRecord({NOPEN:u.get("NOMOR")})}f.on({save:function(l){if(p){p.PENANGGUNG_PASIEN=l.data}else{u.set("REFERENSI",{PENANGGUNG_PASIEN:l.data})}t.loadPenanggungJawab(u);e.close()}})},s)},onMappingTransaksiSEP:function(q){var p=this,s=p.getView(),n=s.getRecord(),o=n.get("PENJAMIN");if(o){if(o.NOMOR==""||o.NOMOR==null){s.notifyMessage("No. SEP belum dimasukkan / digenerate!!!");return}if(o.JENIS>1){if(p.service){if(p.integrasi.REF==o.JENIS){p.service.storeNoTransaksiDiKunjungan(o.NOMOR,o.NOPEN,function(e,f){if(e){o.NOMOR="";s.notifyMessage("Mapping transaksi ke BPJS berhasil")}})}}}}},onHapusSEP:function(p){var o=this,s=o.getView(),q=o.getReferences(),u=s.getRecord(),t=o.getViewModel().get("record");pjmn=u.get("PENJAMIN");if(pjmn){if(pjmn.NOMOR==""||pjmn.NOMOR==null){s.notifyMessage("No. SEP belum dimasukkan / digenerate!!!");return}if(pjmn.JENIS>1){if(o.service){if(o.integrasi.REF==pjmn.JENIS){s.showMessageBox({title:"Hapus SEP",message:"Anda yakin ingin hapus SEP "+pjmn.NOMOR+" ?",ui:"window-red",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:p,fn:function(e){if(e==="yes"){o.service.batalkanSEP({nomor:pjmn.NOMOR,user:s.app.usrNm},function(f,g){if(f){o.batalSepPenjamin();s.notifyMessage("Hapus SEP di BPJS berhasil")}})}}})}}}}},onUpdateSEP:function(D){var Q=this,N=Q.getView(),E=N.getRecord(),L=E.get("REFERENSI").PASIEN,I=L.KONTAK?L.KONTAK:null,F=null,H=E.get("PENJAMIN"),B=E.get("TUJUAN"),C=E.get("DIAGNOSAMASUK")?E.get("DIAGNOSAMASUK"):null,O=E.get("REFERENSI"),G=E.get("RUJUKAN")?(Ext.isObject(E.get("RUJUKAN"))?E.get("RUJUKAN"):null):null,t=G?(G.REFERENSI?G.REFERENSI:null):null,P=t?(t.PPK?t.PPK:null):null,J=P?P.BPJS:"",K=O?(O.KECELAKAAN?O.KECELAKAAN:null):null,M=E.get("TUJUAN").REFERENSI.RUANGAN.JENIS_KUNJUNGAN==3?1:2;J=J==""?(G&&M!=1?(G.NOMOR==""?N.app.ppk.REFERENSI.PPK.BPJS:G.NOMOR.substring(0,8)):N.app.ppk.REFERENSI.PPK.BPJS):J;asalRjkn=P?(G&&M!=1?(G.NOMOR==""?(N.app.ppk.REFERENSI.PPK.JENIS==1?2:1):(P.JENIS==1?2:1)):(N.app.ppk.REFERENSI.PPK.JENIS==1?2:1)):(N.app.ppk.REFERENSI.PPK.JENIS==1?2:1);K=K?(K.STATUS==0?null:K):null;if(Ext.isArray(I)){Ext.Array.each(I,function(e){F=e.NOMOR})}if(H){if(H.JENIS>1){if(H.NOMOR==""||H.NOMOR==null){N.notifyMessage("No. SEP belum dimasukkan / digenerate!!!");return}if(Q.service){if(Q.integrasi.REF==H.JENIS){N.openDialog("",true,0,0,{xtype:"form-sep-update",title:"Update SEP",ui:"panel-blue",showCloseButton:true},function(q,s){var g=s.down("form-sep-update"),o=Ext.util.Format.date(E.get("TANGGAL"),"ymdH")+E.get("NORM"),f=G&&M!=1?(G.NOMOR==""?o:G.NOMOR):o,p=G&&M!=1?(G.TANGGAL?G.TANGGAL:E.get("TANGGAL")):E.get("TANGGAL"),l=B?(B.REFERENSI?B.REFERENSI:null):null,e=l?(l.RUANGAN?l.RUANGAN:null):null,m=e?(e.JENIS_KUNJUNGAN==1?e.REF_ID:0):0,n=Q.getPenjaminRuangan(e,H.JENIS);g.setFormConfig({readOnly:true});g.setData({noSep:H.NOMOR,noKartu:H.REFERENSI.KAP.NOMOR,tglSep:E.get("TANGGAL"),asalRujukan:asalRjkn,tglRujukan:Ext.isString(p)?Ext.Date.parse(p,"Y-m-d H:i:s"):p,noRujukan:f,ppkRujukan:J,jnsPelayanan:M,cob:H.COB,katarak:H.KATARAK,catatan:H.CATATAN,diagAwal:C?C.ICD:"",poliTujuan:M==2?(n?n:""):"",eksekutif:m,klsRawat:H.KELAS,lakaLantas:K?1:2,lokasiLaka:K?K.LOKASI:"",penjamin:K?K.PENJAMIN:0,tglKejadian:K?Ext.Date.parse(K.TANGGAL_KEJADIAN,"Y-m-d"):"",suplesi:K?K.SUPLESI:0,noSuplesi:K?K.NO_SEP_SUPLESI:"",propinsi:K?K.KODE_PROPINSI:"",kabupaten:K?K.KODE_KABUPATEN:"",kecamatan:K?K.KODE_KECAMATAN:"",noSuratSKDP:H.NO_SURAT,dpjpSKDP:H.DPJP,user:N.app.usrNm,norm:E.get("NORM"),noTelp:F})})}}}}},onUpdateTglPulangSEP:function(q){var p=this,t=p.getView(),v=t.getRecord(),w=v.get("PENJAMIN"),s=v.get("REFERENSI"),u=s?(s.PASIEN_PULANG?s.PASIEN_PULANG:null):null;if(u==null){t.notifyMessage("Pasien belum dipulangkan!!!");return}if(w){if(w.NOMOR==""||w.NOMOR==null){t.notifyMessage("No. SEP belum dimasukkan / digenerate!!!");return}if(w.JENIS>1){if(p.service){if(p.integrasi.REF==w.JENIS){t.showMessageBox({title:"Update Tanggal Pulang SEP",message:"No. SEP: "+w.NOMOR+"<br/>Tgl. Pulang: "+u.TANGGAL,ui:"window-red",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:q,fn:function(e){if(e==="yes"){p.service.updateTanggalPulang({noSEP:w.NOMOR,tglPlg:u.TANGGAL,user:t.app.usrNm},function(f,g){if(f){t.notifyMessage("Kirim update tanggal pulang ke BPJS berhasil")}})}}})}}}}},privates:{pasienTlhDiTerima:function(){var f=this.getViewModel().get("record");if(f.get("STATUS")==2){view.notifyMessage("Data tdk dapat diproses karena telah diterima di tujuan");return true}return false},getPenjaminRuangan:function(p,s){var n="";if(p){var q=p.REFERENSI?p.REFERENSI:null,o=q?(q.PENJAMIN_RUANGAN?q.PENJAMIN_RUANGAN:[]):[];Ext.Array.each(o,function(e){if(e.PENJAMIN==s){n=e.RUANGAN_PENJAMIN}})}return n},batalSepPenjamin:function(){var p=this,s=p.getView(),q=p.getReferences(),u=s.getRecord(),t=p.getViewModel().get("record");pjmn=u.get("PENJAMIN");var q=this.getReferences();var o=Ext.create("data.model.Penjamin",{NOPEN:pjmn.NOPEN});o.set("JENIS",pjmn.JENIS);o.set("NORM",pjmn.REFERENSI.KAP.NORM);o.set("NOMOR",pjmn.REFERENSI.KAP.NOMOR);o.set("SEP","");o.save({success:function(e,f){t.set("PENJAMIN",e.data);q.penjamindetil.load(e)}})}},onCetakPermohonanDPJP:function(){var g=this,l=g.getView();preview=true,rec=g.getViewModel().get("record");l.cetak({NAME:"mr.CetakPermohonanDPJP",TYPE:preview?"Pdf":"Word",EXT:preview?"pdf":"docx",PARAMETER:{PNOPEN:rec.get("NOMOR")},REQUEST_FOR_PRINT:!preview},function(e){if(preview){l.printPreview("Cetak Permohonan DPJP",e)}})},onCetakBuktiPemberianInfo:function(){var g=this,l=g.getView();preview=true,rec=g.getViewModel().get("record");l.cetak({NAME:"mr.CetakBuktiPemberianInfo",TYPE:preview?"Pdf":"Word",EXT:preview?"pdf":"docx",PARAMETER:{PNOPEN:rec.get("NOMOR")},REQUEST_FOR_PRINT:!preview},function(e){if(preview){l.printPreview("Cetak Bukti Pemberian Informasi",e)}})}},0,0,0,0,["controller.pendaftaran-detil"],0,[pendaftaran,"DetilController"],0));(Ext.cmd.derive("pendaftaran.Form",com.Form,{controller:"pendaftaran-form",viewModel:{type:"pendaftaranmodel",data:{hideReset:false,isBayi:false,editPasien:false}},layout:{type:"vbox",align:"stretch"},ui:"panel-simpel-front",cls:"shadow-panel",scrollable:"y",title:"Pendaftaran Kunjungan",header:{iconCls:"x-fa fa-user-plus",margin:0,padding:"10 15 10 15",layout:{type:"hbox",align:"middle"},items:[{xtype:"component",flex:1},{xtype:"displayfield",reference:"nopendaftaran",fieldCls:"x-color-white x-font-bold"}]},bodyPadding:5,initComponent:function(){var f=this;f.items=[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},scrollable:"y",defaultType:"fieldcontainer",defaults:{margin:"10 5 0 0",flex:1,layout:{type:"vbox",pack:"start",align:"stretch"}},items:[{defaults:{cls:"shadow-panel",border:true},items:[{xtype:"form-tujuan",reference:"tujuan",listeners:{specialkey:"onFocusEnter",tujuanselected:"onTujuanSelected",tujuanblur:"onTujuanBlur",ruanganreserved:"onRuanganReserved",clearreservasi:"onClearReservasi"}},{xtype:"form-penjamin",reference:"penjamin",margin:"10 0 0 0",listeners:{specialkey:"onFocusEnter",rujukan:"onLoadRujukan"}}]},{defaults:{cls:"shadow-panel",border:true},items:[{xtype:"form-rujukan",reference:"rujukan",listeners:{specialkey:"onFocusEnter"}},{xtype:"pendaftaran-kecelakaan-form",margin:"10 0 0 0",reference:"kecelakaan"},{xtype:"form-penanggung-jawab",reference:"penanggungjawab",margin:"10 0 10 0"}]}]}];f.dockedItems=[{xtype:"toolbar",border:true,dock:"top",items:[{name:"TANGGAL",fieldLabel:"Tgl. Pendaftaran",reference:"tanggal",width:240,labelWidth:115,xtype:"datefield",emptyText:"[Pilih Tanggal]",format:"d/m/Y",value:f.getSysdate(),maxValue:f.getSysdate(),listeners:{change:"onChange"},margin:"0 1 0 0"},{name:"WAKTU",reference:"waktu",width:90,xtype:"timefield",emptyText:"[Jam:Mnt:Dtk]",format:"H:i:s",value:f.getSysdate(),listeners:{change:"onChange"},hideTrigger:true,margin:"0 25 0 0"},{xtype:"button",iconCls:"x-fa fa-file-pdf-o",text:"General Consent",tooltip:"Cetak General Consent",margin:"0 4 0 0",ui:"soft-red",handler:"onViewGeneralConsent"},"->",{name:"BERAT_BAYI",fieldLabel:"Bayi",labelWidth:30,reference:"beratbayi",emptyText:"[Berat dlm Gram]",width:190,allowDecimals:false,maxValue:99999,xtype:"numberfield",hidden:true,bind:{hidden:"{!isBayi}"}},{name:"PANJANG_BAYI",reference:"panjangbayi",emptyText:"[Panjang dlm CM]",width:157,allowDecimals:false,maxValue:99999,xtype:"numberfield",hidden:true,bind:{hidden:"{!isBayi}"}},{xtype:"button",iconCls:"x-fa fa-user",tooltip:"Edit Pasien",margin:"0 5 0 4",ui:"soft-purple",bind:{hidden:"{!editPasien}"},handler:"onEditPasien"}]},{xtype:"toolbar",border:true,dock:"bottom",items:["->",{text:"Daftarkan & Cetak",iconCls:"x-fa fa-user-plus",ui:"soft-green",handler:"onDaftarCetak",margin:"0 4 0 0"},{text:"Daftarkan",iconCls:"x-fa fa-user-plus",ui:"soft-blue",hidden:true,bind:{hidden:"{isEditing}"},handler:"onDaftar",margin:"0 4 0 0"},{text:"Simpan",iconCls:"x-fa fa-save",ui:"soft-blue",handler:"onDaftar",hidden:true,bind:{hidden:"{!isEditing}"},margin:"0 4 0 0"},{text:"Reset",iconCls:"x-fa fa-refresh",ui:"soft-black",handler:"onReset",hidden:true,bind:{hidden:"{hideReset}"},margin:"0 4 0 0"},{text:"Batal",iconCls:"x-fa fa-times",ui:"soft-red",handler:"onBatal",margin:"0 4 0 0"}]}];f.callParent(arguments)},onLoadRecord:function(n,m){var o=n.down("form-tujuan"),p=n.getViewModel();o.loadRecord(null);p.set("editPasien",n.app.xpriv("100701",false))}},0,["pendaftaran-form"],["component","box","container","panel","form","com-form","pendaftaran-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"pendaftaran-form":true},["widget.pendaftaran-form"],0,[pendaftaran,"Form"],0));(Ext.cmd.derive("pendaftaran.FormController",Ext.app.ViewController,{orderItem:undefined,init:function(){var e=this,C=e.getViewModel(),y=e.getView(),f=e.getReferences(),E=C.get("pasien"),z=C.get("pendaftaran"),D=false,B=y.getSysdate();if(E){var A=E.get("NORM"),g=e.getTglToUmur(B,E.get("TANGGAL_LAHIR")),x=y.getPropertyConfig(13);C.set("isBayi",g<=x);e.integrasi=y.app.xitr("ID",1);if(e.integrasi){e.service=Ext.create(e.integrasi.NAMA_KLAS,{})}if(z==undefined){z=Ext.create("data.model.Pendaftaran",{NORM:A});C.set("pendaftaran",z)}if(f.nopendaftaran){f.nopendaftaran.setValue(Ext.isNumeric(z.get("NOMOR"))&&z.get("NOMOR")>0?z.get("NOMOR"):"[No. Pendaftaran]")}if(Ext.getClassName(z)!=""){D=Ext.isNumeric(z.get("NOMOR"))&&z.get("NOMOR")>0}C.set("hideReset",D);z.set("TANGGAL",B);f.tanggal.setValue(B);f.waktu.setValue(B);f.penjamin.setFormConfig({showLoadRujukan:true});f.penjamin.setPendaftaran(z);f.penjamin.createRecord({NOPEN:z.get("NOMOR"),NORM:A,JENIS:1});f.tujuan.setPasien(E);f.tujuan.setIsBayi(g<=x);f.rujukan.createRecord({NORM:A,NOPEN:z.get("NOMOR"),STATUS:1});y.down("[name=INSTALASI]").focus(false,100)}},onFocusEnter:function(m,p){if(p.getKey()===p.ENTER){var n=this.getView().query("component[enterFocus=true]"),o=this.nextFocusComponents(n,n.indexOf(m)+1);if(o){o.focus()}}},onReset:function(){var f=this;f.init()},onBatal:function(f){this.getView().fireEvent("batal",f)},onDaftar:function(n){var l=this,m=l.getView();if(m.isValid()){this.simpan(n,function(f,g,e){if(f){m.fireEvent("simpansuccess",n,g,e)}})}},onDaftarCetak:function(m){var l=this,n=l.getView();if(n.isValid()){this.simpan(m,function(s,u,t){if(s){n.fireEvent("simpansuccess",m,u,t);if(n.getPropertyConfig(25)=="TRUE"){n.fireEvent("cetaktracert",u)}var f=[{ID:1,NAMA:"Bukti Pendaftaran",TIPE:1,DATA:"cetakbukti",CETAK:1},{ID:2,NAMA:"Medical Record (MR) 1",TIPE:1,DATA:"cetakMR1",CETAK:1}],g=u.get("TUJUAN").REFERENSI.RUANGAN.JENIS_KUNJUNGAN;if(g==2||g==3){f.push({ID:3,NAMA:"Barcode Pendaftaran",TIPE:1,DATA:"cetakbarcode",CETAK:1})}if(l.integrasi){var e=u.get("PENJAMIN");if(e){if(l.integrasi.REF==e.JENIS){f.push({ID:4,NAMA:"SEP",TIPE:1,DATA:"cetaksep",CETAK:1})}}}if(n.getPropertyConfig(12)!=="FALSE"){if(g==2||g==3){f.push({ID:5,NAMA:"Gelang Pasien",TIPE:1,DATA:"cetakgelang",CETAK:1})}}n.printList({width:500,height:300},f,function(p,o){o.on({cetaklist:function(w){if(Ext.isArray(w)){var q=0;Ext.Array.each(w,function(v){if(v.TIPE==1&&v.CETAK){var y=new Ext.util.DelayedTask(function(){if(v.DATA=="cetakbukti"){l.cetakBukti(n,u,true)}if(v.DATA=="cetakMR1"){l.cetakMR1(n,u,true)}if(v.DATA=="cetakbarcode"){l.cetakBarcodePendaftaran(n,u,true)}if(v.DATA=="cetaksep"){l.cetakSep(n,u,true)}if(v.DATA=="cetakgelang"){l.cetakGelang(n,u,true)}delete y}).delay(q*1000);q++}})}else{if(w.get("TIPE")==1&&w.get("CETAK")){n.fireEvent(w.get("DATA"),u)}}}})})}})}},cetakBukti:function(n,m,l){n.cetak({NAME:"pendaftaran.CetakBuktiRegistrasi",TYPE:"Word",EXT:"docx",PARAMETER:{PNOPEN:m.get("NOMOR")},REQUEST_FOR_PRINT:true,MULTI_PRINT:l,PRINT_NAME:"CetakBukti"})},cetakBarcodePendaftaran:function(t,s,q){if(s){var p=s.get("TUJUAN"),o=p?p.REFERENSI.RUANGAN:null,u=o?o.JENIS_KUNJUNGAN:1;if(u==2||u==3){t.cetak({NAME:"pendaftaran."+t.kode+"CetakBarcodePendaftaran",TYPE:"Word",EXT:"docx",PARAMETER:{PNOPEN:s.get("NOMOR")},REQUEST_FOR_PRINT:true,MULTI_PRINT:q,PRINT_NAME:"CetakBarcodePendaftaran"})}}},cetakMR1:function(w,u,t){if(u){var y=u.get("TUJUAN"),x=y?y.REFERENSI.RUANGAN:null,v=x?x.JENIS_KUNJUNGAN:1,q={NAME:"mr.",TYPE:"Word",EXT:"docx",PARAMETER:{PNOPEN:u.get("NOMOR"),CETAK_HEADER:1},REQUEST_FOR_PRINT:true,MULTI_PRINT:t,PRINT_NAME:"CetakMR"},s=(v==1||v==14?"CetakMR1RawatJalan":(v==2?"CetakMR2RawatDarurat":w.kode+"CetakMR1RawatInap"));if(s==""){return}q.NAME=q.NAME+s;w.cetak(q);if(v==3){q.NAME="mr."+w.kode+"CetakMR1aRawatInap";w.cetak(q)}}},cetakSep:function(q,p,o){if(p){var s=p.get("PENJAMIN");if(s){var n=q.app.xitr("ID",1);if(n){if(n.REF==s.JENIS){q.cetak({NAME:"bpjs.CetakSEP",TYPE:"Word",EXT:"docx",PARAMETER:{PSEP:s.NOMOR,CETAK_HEADER:1},REQUEST_FOR_PRINT:true,MULTI_PRINT:o,PRINT_NAME:"CetakSEP"})}}}}},cetakGelang:function(t,s,q){if(s){var p=s.get("TUJUAN"),o=p?p.REFERENSI.RUANGAN:null,u=o?o.JENIS_KUNJUNGAN:1;if(u==2||u==3){t.cetak({NAME:"pendaftaran."+t.kode+"CetakGelang",TYPE:"Pdf",EXT:"pdf",PARAMETER:{PNOPEN:s.get("NOMOR")},REQUEST_FOR_PRINT:false,PRINT_NAME:"CetakGelang"})}}},onTujuanSelected:function(w){var t=this,s=t.getView(),f=t.getReferences(),e=w.get("JENIS"),v=w.get("JENIS_KUNJUNGAN"),u=v==3?1:2;if(e!=5){return}if(t.orderItem!=undefined){s.remove(t.orderItem)}if(f.penjamin){f.penjamin.setRuangan(w.data)}},onTujuanBlur:function(){var l=this,g=l.getView();if(l.orderItem!=undefined){g.remove(l.orderItem)}l.orderItem=undefined},onRuanganReserved:function(n,m){var p=this,o=p.getReferences();if(m){o.paket.params.KELAS=m.get("ID");o.paket.load()}},onClearReservasi:function(){var l=this,g=l.getReferences()},privates:{getTglToUmur:function(m,l){var n=Ext.Date.diff(l,m,Ext.Date.DAY);return n},nextFocusComponents:function(l,g){nextComp=g>l.length?null:l[g];if(nextComp){if(nextComp.isHidden()||nextComp.isDisabled()){nextComp=this.nextFocusComponents(l,g+1)}}return nextComp},getPenjaminRuangan:function(n,s){if(n){var q=n.get("REFERENSI"),p=q?(q.PENJAMIN_RUANGAN?q.PENJAMIN_RUANGAN:[]):[],o=false;Ext.Array.each(p,function(e){if(e.PENJAMIN==s){o=e.RUANGAN_PENJAMIN}})}return o},simpan:function(X,aq){var ag=this,aj=ag.getView(),U=ag.getViewModel(),ao=U.get("pendaftaran"),W=U.get("pasien"),m=ao.data,am=ag.getReferences(),af=am.tanggal.getValue(),V=am.waktu.getValue(),ah=W.get("KONTAK")?W.get("KONTAK"):null,l=null,at=am.kecelakaan.getFormData(),ad=am.rujukan.getFormData(),Z=am.tujuan.getFormData(),e=am.penanggungjawab.getFormData(),T=am.penjamin.getFormData(),g=Ext.isNumeric(m.NOMOR),an=am.tujuan.recordSelected;jns=an?(an.get("JENIS_KUNJUNGAN")==3?1:2):2,sep=T.SEP?T.SEP:"";if(Ext.isArray(ah)){Ext.Array.each(ah,function(n){l=n.NOMOR})}ag.clearReferenceInModel(m);aj.setLoading(true);m.DIAGNOSAMASUK={ICD:ad.ICD,DIAGNOSA:ad.DIAGNOSA_MASUK};m.DIAGNOSA_MASUK=Ext.isNumeric(ad.DIAGNOSA_MASUK)?ad.DIAGNOSA_MASUK:null;if(!Ext.isNumeric(m.NOMOR)&&ad.PPK==""&&ad.NOMOR==""&&ad.TANGGAL==null&&ad.DOKTER==""&&ad.BAGIAN_DOKTER==""&&ad.DIAGNOSA_MASUK==""){}else{m.RUJUKAN=ad.NOMOR;m.SURAT_RUJUKAN=ad}if(e.NAMA){m.PENANGGUNGJAWAB=e}m.PAKET=Z.PAKET;m.TUJUAN=Z;m.PENJAMIN=T;m.BERAT_BAYI=am.beratbayi.getValue();m.PANJANG_BAYI=am.panjangbayi.getValue();m.TANGGAL=new Date(af.getFullYear(),af.getMonth(),af.getDate(),V.getHours(),V.getMinutes(),V.getSeconds());if(at.STATUS==1){at.TANGGAL_KEJADIAN=Ext.util.Format.date(at.TANGGAL_KEJADIAN,"Y-m-d");m.REFERENSI={KECELAKAAN:at}}if(ag.service&&sep==""){var ap=Ext.util.Format.date(m.TANGGAL,"Y-m-d H:i:s"),ae=Ext.util.Format.date(m.TANGGAL,"ymdH")+m.NORM,Y=ad&&jns!=1?(ad.NOMOR==""?ae:ad.NOMOR):ae,al=ad&&jns!=1?(ad.TANGGAL?Ext.util.Format.date(ad.TANGGAL,"Y-m-d H:i:s"):ap):ap,ar=ad&&jns!=1?(ad.NOMOR==""?aj.app.ppk.REFERENSI.PPK.BPJS:ad.PPKRujukan):aj.app.ppk.REFERENSI.PPK.BPJS,f=ad&&jns!=1?(ad.NOMOR==""?(aj.app.ppk.REFERENSI.PPK.JENIS==1?2:1):ad.asalRujukan):(aj.app.ppk.REFERENSI.PPK.JENIS==1?2:1),ac=ad?ad.ICD:null,ai=an?an.get("ID"):null,ab=ag.getPenjaminRuangan(an,T.JENIS),aa=an.get("JENIS_KUNJUNGAN")==1?an.get("REF_ID"):0,ak={noKartu:T.NOMOR,tglSep:ap,asalRujukan:f,tglRujukan:al,noRujukan:Y,ppkRujukan:ar,jnsPelayanan:jns,catatan:T.CATATAN,diagAwal:ac,poliTujuan:jns==2?(ab?ab:""):"",eksekutif:aa,cob:T.COB,katarak:T.KATARAK,lakaLantas:at.STATUS==1?1:2,lokasiLaka:at.STATUS==1?at.LOKASI:"",penjamin:at.STATUS==1?at.PENJAMIN:0,tglKejadian:at.STATUS==1?Ext.util.Format.date(at.TANGGAL_KEJADIAN,"Y-m-d"):"",suplesi:at.STATUS==1?at.SUPLESI:0,noSuplesi:at.STATUS==1?at.NO_SEP_SUPLESI:"",propinsi:at.STATUS==1?at.KODE_PROPINSI:"",kabupaten:at.STATUS==1?at.KODE_KABUPATEN:"",kecamatan:at.STATUS==1?at.KODE_KECAMATAN:"",noSuratSKDP:T.NO_SURAT,dpjpSKDP:T.DPJP,user:aj.app.usrNm,norm:m.NORM,noTelp:l};if(ag.integrasi.REF==T.JENIS){ag.service.buatSEP(ak,function(n,q,o){if(n){var p=q.data;p=p?p.kunjungan:null;p=p?p.noSEP:null;m.PENJAMIN.SEP=p;ag.doSimpan(X,m,aq)}else{aj.setLoading(false);aj.showMessageBox({title:"Pesan Pendaftaran",message:"Anda ingin melanjutkan pendaftaran pasien ini?",ui:"window-blue",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:X,fn:function(s){if(s==="yes"){aj.setLoading(true);ag.doSimpan(X,m,aq)}}})}});return}}ag.doSimpan(X,m,aq)},doSimpan:function(t,p,v){var s=this,u=s.getView(),q=Ext.isNumeric(p.NOMOR),w=s.getViewModel().get("pendaftaran");w.set(p);w.animateTarget=t;w.scope=s;w.showError=true;w.save({callback:function(m,f,e){if(e){if(s.service){if(p.PENJAMIN){var g=p.PENJAMIN.SEP?p.PENJAMIN.SEP!="":false;if(g){var l=Ext.clone(s.service);l.enabledShowError(false);l.storeNoTransaksiDiKunjungan(p.PENJAMIN.SEP,m.get("NOMOR"))}}}s.init();if(Ext.isFunction(v)){v(true,m,q)}}u.setLoading(false)}})},loadDataRujukan:function(w,p,v){var q=this,u=q.getView(),s=q.getReferences();p.PPK=v.get("ID");p.REFERENSI={PPK:v.data};var t=Ext.create("data.model.DiagnosaMasuk");t.set({DIAGNOSA:w.keluhan,ICD:w.diagnosa.kode});t.save({success:function(e,f){p.REFERENSI=p.REFERENSI||{};p.REFERENSI.DIAGNOSA_MASUK=e.data;p.DIAGNOSA_MASUK=e.get("ID");s.rujukan.loadRecord(Ext.create("data.model.SuratRujukan",p))}})}},clearReferenceInModel:function(f){f.RUJUKAN="";delete f.DIAGNOSAMASUK;delete f.SURAT_RUJUKAN;delete f.TUJUAN;delete f.PENANGGUNGJAWAB;delete f.PENJAMIN;delete f.ORDER},onViewGeneralConsent:function(m){var l=this,n=l.getView();n.printPreview("General Consent","resources/files/GENERAL_CONSENT.pdf")},onChange:function(t,w){var q=this,s=q.getViewModel(),u=s.get("pendaftaran"),v=q.getReferences();if(w){var y=u.get("TANGGAL");if(t.name=="TANGGAL"){var x=v.waktu.getValue();y=new Date(w.getFullYear(),w.getMonth(),w.getDate(),x.getHours(),x.getMinutes(),x.getSeconds())}if(t.name=="WAKTU"){var x=v.tanggal.getValue();y=new Date(x.getFullYear(),x.getMonth(),x.getDate(),w.getHours(),w.getMinutes(),w.getSeconds())}u.set("TANGGAL",y)}},onLoadRujukan:function(y){var w=this,B=w.getViewModel(),u=w.getView(),C=B.get("pendaftaran"),v=w.getReferences();if(y.success){if(y.data){if(y.data.rujukan){var A=y.data.rujukan,z=v.rujukan.getViewModel().get("ppkstore"),x={},t=true;x.NORM=C.get("NORM");x.NOMOR=A.noKunjungan;x.TANGGAL=A.tglKunjungan;x.STATUS=1;x.BAGIAN_DOKTER=A.poliRujukan.nama;z.setQueryParams({BPJS:A.provPerujuk.kode});z.load(function(g,l,e){if(e){if(Ext.isArray(g)){if(g.length>0){if(g[0].get("STATUS")==1){t=false;w.loadDataRujukan(A,x,g[0]);return}}}}if(t){var f=u.app.xpriv("1901");if(!f){u.notifyMessage("PPK perujuk dgn Kode: <b>"+A.provPerujuk.kode+"</b>, Nama: <b>"+A.provPerujuk.nama+"</b> belum terdaftar...</br>Silahkan daftarkan PPK tersebut untuk melakukan proses ini lagi...")}u.showMessageBox({title:"PPK Rujukan belum terdaftar",message:"PPK Rujukan belum terdaftar, apakah anda ingin mendaftarkan?",ui:"window-warning",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:u,fn:function(m){if(m==="yes"){u.openDialog("",true,"90%","90%",{xtype:"master-ppk-form",ui:"panel-cyan",showCloseButton:true,title:"Tambah Pemberi Pelayanan Kesehatan (PPK)",isCreate:true},function(o,n){form=n.down("master-ppk-form");form.createRecord({BPJS:A.provPerujuk.kode,NAMA:A.provPerujuk.nama,STATUS:1});form.on("save",function(p){w.loadDataRujukan(A,x,p);n.close()});form.focus("KODE")})}}})}})}}}},onEditPasien:function(){var m=this,o=m.getView(),n=m.getViewModel(),p=n.get("pasien");o.openDialog("",true,"0","0",{xtype:"pasien-form",ui:"panel-purple",title:"Edit Pasien",isOpenWindow:true,showCloseButton:true},function(e,f){var g=f.down("pasien-form"),l=g.getViewModel();l.set("hideSimpanCetak",true);g.loadRecord(p);g.on("simpansuccess",function(){f.close()})})},destroy:function(){if(this.service){delete this.service}Ext.app.ViewController.prototype.destroy.call(this)}},0,0,0,0,["controller.pendaftaran-form"],0,[pendaftaran,"FormController"],0));(Ext.cmd.derive("pendaftaran.List",com.Grid,{controller:"pendaftaran-list",viewModel:{data:{hideColumnConfig:{noUrut:false,nomor:false,tanggal:false,tujuan:false,dokter:true,statusTujuan:true,status:false,action:false,icd:true}},stores:{store:{type:"pendaftaran-store"}}},header:{items:[{xtype:"search-field",emptyText:"[Cari No. Pendaftaran]",width:200,listeners:{search:"onSearch",clear:"onClear"}}]},columns:[{xtype:"rownumberer",text:"No",align:"left",width:50,bind:{hidden:"{hideColumnConfig.noUrut}"}},{text:"No. Pendaftaran",dataIndex:"NOMOR",sortable:false,width:117,align:"center",bind:{hidden:"{hideColumnConfig.nomor}"}},{xtype:"datecolumn",text:"Tanggal",dataIndex:"TANGGAL",width:137,align:"center",format:"d/m/Y H:i:s",sortable:false,bind:{hidden:"{hideColumnConfig.tanggal}"}},{xtype:"templatecolumn",text:"Tujuan",flex:1,sortable:false,bind:{hidden:"{hideColumnConfig.tujuan}"},tpl:'<div style="white-space:normal !important;">{TUJUAN.REFERENSI.RUANGAN.DESKRIPSI}</div>'},{xtype:"templatecolumn",text:"Dokter",flex:1,sortable:false,bind:{hidden:"{hideColumnConfig.dokter}"},tpl:'<div style="white-space:normal !important;">{TUJUAN.REFERENSI.DOKTER.NAMA}</div>'},{xtype:"templatecolumn",text:"Status Tujuan",flex:1,sortable:false,bind:{hidden:"{hideColumnConfig.statusTujuan}"},tpl:'<div style="white-space:normal !important;">{TUJUAN.REFERENSI.STATUS.DESKRIPSI}</div>'},{xtype:"templatecolumn",text:"Status",flex:1,sortable:false,bind:{hidden:"{hideColumnConfig.status}"},tpl:'<div style="white-space:normal !important;">{REFERENSI.STATUS.DESKRIPSI}</div>'},{xtype:"widgetcolumn",text:"Aksi",align:"center",bind:{hidden:"{hideColumnConfig.action}"},widget:{xtype:"fieldcontainer",layout:{type:"vbox",align:"stretch"},defaults:{padding:2,margin:"0 2 1 0"},items:[{xtype:"button",text:"lihat",action:0,handler:"onLihat"},{xtype:"button",text:"ICD",action:1,handler:"onICD",bind:{hidden:"{hideColumnConfig.icd}"}}]}}],hideColumnConfig:function(m){var l=this,n=l.getViewModel();_config=n.get("hideColumnConfig");m=Ext.apply(_config,m);n.set("hideColumnConfig",m);n.notify()},onBeforeLoad:function(l,m,n){l.setParams({COLUMNS:'["NOMOR","NORM","TANGGAL","STATUS"]',REFERENSI:Ext.JSON.encode({Referensi:true,TujuanPasien:{REFERENSI:{Dokter:true,Ruangan:true}}})})}},0,["pendaftaran-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","pendaftaran-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"pendaftaran-list":true},["widget.pendaftaran-list"],0,[pendaftaran,"List"],0));(Ext.cmd.derive("pendaftaran.ListController",Ext.app.ViewController,{query:"",init:function(){var o=this,q=o.getView(),p=o.getStore("store"),n=q.app.xpriv,s=n("1302",false);o.getViewModel().set("hideColumnConfig.icd",!s);if(p){p.on("load",function(f,e){if(e.length==0){p.removeAll()}})}},onLihat:function(f){this.getView().fireEvent("lihat",f.ownerCt.getWidgetRecord())},onICD:function(f){this.getView().fireEvent("icd",f.ownerCt.getWidgetRecord())},onSearch:function(l,g){this.query=g;this.cari()},onClear:function(){this.query="";this.cari()},privates:{cari:function(){var l=this,n=l.getView(),m=n.down("pagingtoolbar");if(l.query==""){delete n.getStore().queryParams.NOMOR}else{n.setParams({NOMOR:l.query})}if(m){m.moveFirst()}else{n.load()}}}},0,0,0,0,["controller.pendaftaran-list"],0,[pendaftaran,"ListController"],0));(Ext.cmd.derive("pendaftaran.ShortDetil",Ext.container.Container,{viewModel:{data:{record:undefined},stores:{store:{type:"pendaftaran-store"}},formulas:{getInfoTanggal:function(p){var n=p("record.TANGGAL"),o=n?Ext.Date.format(n,"l, d F Y"):"",m=n?" Pukul "+Ext.Date.format(n,"H:i:s"):"";return o+m},getPaket:function(m){var l=m("record.REFERENSI"),n=l?(l.PAKET?l.PAKET.NAMA:""):"";return n}}},layout:{type:"vbox",pack:"top"},cls:"x-br-top",defaults:{style:"font-size: 13px;",margin:"0 0 1 0"},items:[{xtype:"component",style:"font-size: 24px; font-weight: bold",bind:"{record.NOMOR}"},{xtype:"component",bind:"{getInfoTanggal}"},{xtype:"component",style:"font-size: 17px; font-weight: bold",bind:"{getPaket}"},{xtype:"component",bind:"{record.REFERENSI.STATUS.DESKRIPSI}"}],load:function(e,o){try{var s=this,q=s.getViewModel(),p=q.get("store");if(q){if(Ext.getClassName(e)=="data.model.Pendaftaran"){q.set("record",e)}else{if(p){p.queryParams=e;p.load(function(l,f,g){try{if(g&&l.length>0){q.set("record",l[0]);if(Ext.isFunction(o)){o(l[0])}}}catch(m){}})}}}}catch(o){}},getRecord:function(){return this.getViewModel().get("record")}},0,["pendaftaran-short-detil"],["component","box","container","pendaftaran-short-detil"],{component:true,box:true,container:true,"pendaftaran-short-detil":true},["widget.pendaftaran-short-detil"],0,[pendaftaran,"ShortDetil"],0));(Ext.cmd.derive("pendaftaran.TanggalDaftar",com.Form,{controller:"tanggal-daftar-form",viewModel:{data:{readOnly:false}},layout:{type:"hbox"},defaults:{margin:"0 2 2 0",allowBlank:false},items:[{xtype:"hiddenfield",name:"NOMOR"},{name:"TANGGAL",reference:"tanggal",flex:1,xtype:"datefield",emptyText:"[Pilih Tanggal Tindakan]",format:"d/m/Y",submitFormat:"Y-m-d",margin:"0 1 0 0"},{name:"WAKTU",reference:"waktu",xtype:"timefield",emptyText:"[Jam:Mnt:Dtk]",format:"H:i:s",hideTrigger:true}],buttons:[{text:"Simpan",iconCls:"x-fa fa-save",handler:"onSimpan"}],onLoadRecord:function(p,m){var o=p.down("datefield"),n=p.down("timefield");o.setMaxValue(p.getSysdate());n.setValue(m.get("TANGGAL"))},onBeforeGetRecord:function(o,m){var n=o.down("datefield").getValue(),p=o.down("timefield").getValue();dt=Ext.Date.clone(n);dt.setHours(p.getHours());dt.setMinutes(p.getMinutes());dt.setSeconds(p.getSeconds());m.TANGGAL=dt}},0,["tanggal-daftar-form"],["component","box","container","panel","form","com-form","tanggal-daftar-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"tanggal-daftar-form":true},["widget.tanggal-daftar-form"],0,[pendaftaran,"TanggalDaftar"],0));(Ext.cmd.derive("pendaftaran.TanggalDaftarController",Ext.app.ViewController,{onSimpan:function(m){var l=this,n=l.getView();n.showMessageBox({title:"Ubah Tanggal Pendaftaran",message:"Anda yakin ingin mengubah tanggal pendaftaran ini ? ",ui:"window-warning",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:m,fn:function(e){if(e==="yes"){n.save(m,{success:"Ubah tanggal pendaftaran berhasil"})}}})}},0,0,0,0,["controller.tanggal-daftar-form"],0,[pendaftaran,"TanggalDaftarController"],0));(Ext.cmd.derive("pendaftaran.ViewModel",Ext.app.ViewModel,{data:{pasien:undefined,pendaftaran:undefined},formulas:{isEditing:function(g){var l=g("pendaftaran.NOMOR")||0;if(l>0){return true}return false}}},0,0,0,0,["viewmodel.pendaftaranmodel"],0,[pendaftaran,"ViewModel"],0));(Ext.cmd.derive("pendaftaran.bayi.Form",com.Form,{controller:"pendaftaran-bayi-form",title:"Bayi",header:{iconCls:"x-fa fa-child",padding:"5 10 5 10"},bodyPadding:5,layout:"hbox",defaults:{margin:"0 2 2 0 ",listeners:{specialkey:"onFocusEnter"}},items:[{name:"BERAT_BAYI",reference:"beratbayi",emptyText:"[Berat dlm Gram]",width:190,allowDecimals:false,maxValue:99999,xtype:"numberfield"},{name:"PANJANG_BAYI",reference:"panjangbayi",emptyText:"[Panjang dlm CM]",width:157,allowDecimals:false,maxValue:99999,xtype:"numberfield"}],dockedItems:[{xtype:"toolbar",dock:"bottom",items:["->",{xtype:"button",iconCls:"x-fa fa-save",ui:"soft-blue",text:"Simpan",handler:"onSimpan"}]}]},0,["pendaftaran-bayi-form"],["component","box","container","panel","form","com-form","pendaftaran-bayi-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"pendaftaran-bayi-form":true},["widget.pendaftaran-bayi-form"],0,[pendaftaran.bayi,"Form"],0));(Ext.cmd.derive("pendaftaran.bayi.FormController",Ext.app.ViewController,{onFocusEnter:function(l,g){this.getView().fireEvent("specialkey",l,g)},onSimpan:function(m){var l=this,n=l.getView();n.save(m,{success:"Ubah data bayi berhasil"})}},0,0,0,0,["controller.pendaftaran-bayi-form"],0,[pendaftaran.bayi,"FormController"],0));(Ext.cmd.derive("pendaftaran.kecelakaan.Form",com.Form,{model:"pendaftaran.kecelakaan.Model",controller:"pendaftaran-kecelakaan-form",title:"Kecelakaan",viewModel:{data:{formConfig:{simpan:false}}},header:{iconCls:"x-fa fa-ambulance",padding:"0 10 0 10",items:[{xtype:"checkbox",checked:false,name:"STATUS",reference:"lakalantas",publishes:"checked"}]},layout:{type:"vbox",align:"stretch"},bodyPadding:5,defaultType:"fieldcontainer",defaults:{margin:"0 0 2 0 ",layout:{type:"hbox"},defaults:{margin:"0 2 2 0 "}},items:[{items:[{xtype:"textfield",emptyText:"[Masukkan keterangan]",name:"LOKASI",margin:"0 2 0 0",enterFocus:true,bind:{disabled:"{!lakalantas.checked}"},flex:1,listeners:{specialkey:"onFocusEnter"}},{name:"TANGGAL_KEJADIAN",reference:"tanggalkejadian",width:120,xtype:"datefield",emptyText:"[Tanggal Kejadian]",format:"d/m/Y",bind:{disabled:"{!lakalantas.checked}"},value:new Date()},{xtype:"referensi-combo",name:"PENJAMIN",emptyText:"[Penjamin Kecelakaan]",firstLoad:true,width:200,params:{JENIS:80,STATUS:1},bind:{disabled:"{!lakalantas.checked}"}}]},{items:[{xtype:"checkboxfield",name:"SUPLESI",boxLabel:"Suplesi ?",reference:"suplesi",boxLabelAlign:"before",checked:false,publishes:"checked",bind:{disabled:"{!lakalantas.checked}"}},{xtype:"textfield",emptyText:"[Masukkan No. Sep Suplesi]",name:"NO_SEP_SUPLESI",enforceMaxLength:true,maxLength:25,enterFocus:true,bind:{disabled:"{!suplesi.checked}"},flex:1,listeners:{specialkey:"onFocusEnter"}}]},{items:[{xtype:"plugins-bpjs-referensi-wilayah-combo",name:"KODE_PROPINSI",firstLoad:true,reference:"propinsicombo",emptyText:"[Propinsi]",bind:{disabled:"{!lakalantas.checked}"},flex:1,listeners:{select:"onSelectWilayah"}},{xtype:"plugins-bpjs-referensi-wilayah-combo",name:"KODE_KABUPATEN",reference:"kabupatencombo",params:{tipe:2},emptyText:"[Kabupaten]",bind:{disabled:"{!lakalantas.checked}"},flex:1,listeners:{select:"onSelectWilayah"}},{xtype:"plugins-bpjs-referensi-wilayah-combo",name:"KODE_KECAMATAN",reference:"kecamatancombo",params:{tipe:3},flex:1,emptyText:"[Kecamatan]",bind:{disabled:"{!lakalantas.checked}"}}]}],dockedItems:[{xtype:"toolbar",dock:"bottom",hidden:true,bind:{hidden:"{!formConfig.simpan}"},items:["->",{xtype:"button",iconCls:"x-fa fa-save",ui:"soft-blue",text:"Simpan",handler:"onSimpan"}]}],onLoadRecord:function(q,w){var u=q.down("[name=STATUS]"),s=q.down("[name=SUPLESI]"),v=q.down("[name=KODE_PROPINSI]"),p=q.down("[name=KODE_KABUPATEN]"),t=q.down("[name=KODE_KECAMATAN]");u.setValue(w.get("STATUS")==1);s.setValue(w.get("SUPLESI")==1);v.doAfterLoad=function(e,f,g){var l=g.findRecord("kode",w.get("KODE_PROPINSI"),0,true,false,true);if(l){v.select(l);v.fireEvent("select",v,l)}};p.doAfterLoad=function(e,f,g){var l=g.findRecord("kode",w.get("KODE_KABUPATEN"),0,true,false,true);if(l){p.select(l);p.fireEvent("select",p,l)}};t.doAfterLoad=function(e,f,g){var l=g.findRecord("kode",w.get("KODE_KECAMATAN"),0,true,false,true);if(l){t.select(l)}}},onBeforeGetRecord:function(p,n){var s=p.down("[name=STATUS]"),q=p.down("[name=SUPLESI]"),o=p.down("[name=TANGGAL_KEJADIAN]").getValue();n.TANGGAL_KEJADIAN=o;n.STATUS=s.getValue()?1:0;n.SUPLESI=q.getValue()?1:0},getFormData:function(){var n=this,l=n.getForm().getValues(),m=n.down("[name=TANGGAL_KEJADIAN]").getValue();l.TANGGAL_KEJADIAN=m;l.STATUS=l.STATUS?1:0;l.SUPLESI=l.SUPLESI?1:0;return l}},0,["pendaftaran-kecelakaan-form"],["component","box","container","panel","form","com-form","pendaftaran-kecelakaan-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"pendaftaran-kecelakaan-form":true},["widget.pendaftaran-kecelakaan-form"],0,[pendaftaran.kecelakaan,"Form"],0));(Ext.cmd.derive("pendaftaran.kecelakaan.FormController",Ext.app.ViewController,{onFocusEnter:function(l,g){this.getView().fireEvent("specialkey",l,g)},onSimpan:function(m){var l=this,n=l.getView();n.save(m)},onSelectWilayah:function(m,l){var n=this.getReferences();if(m.params.tipe==1){n.kecamatancombo.getStore().removeAll();n.kabupatencombo.getStore().removeAll();n.kabupatencombo.params.kodePropinsi=l.get("kode");n.kabupatencombo.load()}if(m.params.tipe==2){n.kecamatancombo.getStore().removeAll();n.kecamatancombo.params.kodeKabupaten=l.get("kode");n.kecamatancombo.load()}}},0,0,0,0,["controller.pendaftaran-kecelakaan-form"],0,[pendaftaran.kecelakaan,"FormController"],0));(Ext.cmd.derive("pendaftaran.konsul.List",Ext.grid.Panel,{controller:"konsul-list",viewModel:{data:{listConfig:{paging:false,status:true}},stores:{store:{type:"konsul-store"}}},bind:{store:"{store}"},columns:[{xtype:"rownumberer",text:"No",align:"left",width:50},{text:"Nomor",dataIndex:"NOMOR",sortable:false,flex:1},{xtype:"datecolumn",text:"Tanggal",dataIndex:"TANGGAL",format:"d/m/Y H:i:s",sortable:false},{xtype:"templatecolumn",text:"Asal",flex:1,sortable:false,hidden:true,tpl:'<div style="white-space:normal !important;">{REFERENSI.KUNJUNGAN.REFERENSI.RUANGAN.DESKRIPSI}</div>'},{xtype:"templatecolumn",text:"Dokter Asal",flex:1,sortable:false,hidden:true,tpl:'<div style="white-space:normal !important;">{REFERENSI.DOKTER_ASAL.NAMA}</div>'},{xtype:"templatecolumn",text:"Alasan",flex:1,sortable:false,tpl:'<div style="white-space:normal !important;">{ALASAN}</div>'},{xtype:"templatecolumn",text:"Konsul Yg. Diminta",flex:1,sortable:false,tpl:'<div style="white-space:normal !important;">{PERMINTAAN_TINDAKAN}</div>'},{xtype:"templatecolumn",text:"Tujuan",flex:1,sortable:false,tpl:'<div style="white-space:normal !important;">{REFERENSI.TUJUAN.DESKRIPSI}</div>'},{xtype:"widgetcolumn",align:"center",text:"Status",width:110,hideable:false,hidden:true,bind:{hidden:"{!listConfig.status}"},widget:{xtype:"fieldcontainer",flex:1,defaults:{padding:2},items:[{xtype:"button",text:"Batalkan",action:0,handler:"onBatal"},{xtype:"button",text:"Dibatalkan",action:1,ui:"soft-red"},{xtype:"button",text:"Lihat Jawaban",action:2,ui:"soft-blue",handler:"onLihat"}]},onWidgetAttach:"onWidgetAttach"}],dockedItems:[{xtype:"pagingtoolbar",hidden:true,bind:{store:"{store}",hidden:"{!listConfig.paging}"},dock:"bottom",displayInfo:true}],loadStore:function(l){var g=this.getViewModel().get("store");if(g){g.removeAll();g.queryParams=l;g.load()}},setListConfig:function(m){var l=this,n=l.getViewModel();_config=n.get("listConfig");m=Ext.apply(_config,m);n.set("listConfig",m);n.notify()},refresh:function(){var f=this.getViewModel().get("store");if(f){f.reload()}}},0,["konsul-list"],["component","box","container","panel","tablepanel","gridpanel","grid","konsul-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"konsul-list":true},["widget.konsul-list"],0,[pendaftaran.konsul,"List"],0));(Ext.cmd.derive("pendaftaran.konsul.ListController",Ext.app.ViewController,{init:function(){var l=this,g=l.getStore("store");if(g){g.on("load",function(e,f){if(f.length==0){g.removeAll()}})}},onWidgetAttach:function(A,w,g){var x=this,z=x.getViewModel(),v=g.get("STATUS"),f=w.down("[action=0]"),e=w.down("[action=1]"),y=w.down("[action=2]");f.setHidden(v!=1);e.setHidden(v==1||v==2);y.setHidden(v!=2)},onBatal:function(m){var n=this,o=n.getStore("store"),p=m.ownerCt.getWidgetRecord();p.showError=true;p.animateTarget=m;p.scope=n;Ext.Msg.show({title:"Pembatalan Konsul",message:"Anda yakin ingin membatalkan Konsul dengan Nomor Konsul "+p.get("NOMOR")+" ?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:m,fn:function(e){if(e==="yes"){p.set("STATUS",0);p.save({callback:function(g,f,l){if(l){Ext.toast({html:"Pembatalan konsul dengan Nomor Konsul "+p.get("NOMOR")+" berhasil",headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"});o.load()}else{p.set("STATUS",1)}}})}else{p.set("STATUS",1)}}})},onLihat:function(g){var l=g.ownerCt.getWidgetRecord();data.model.JawabKonsul.load(l.get("NOMOR"),{callback:function(e,f,n){if(n){me.openDialog("Jawaban Konsul",true,"80%",300,{xtype:"jawab-konsul-form"},function(m,p){form=p.down("jawab-konsul-form");form.setFormConfig({readOnly:true,simpan:false});form.loadRecord(e)})}else{Ext.toast({html:"Jawaban Konsul tidak ditemukan",headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"})}}})},privates:{openDialog:function(w,v,f,e,g,y){var x=(f==0&&e==0)?true:false,u=Ext.create("Ext.Window",{modal:v,closable:true,maximizable:true,maximized:x,constrain:this.getView(),header:{height:20,cls:"bgheaderTop"},layout:"fit",minWidth:900,minHeight:400,border:false,width:f,height:e,items:[g]});u.on("show",function(){if(Ext.isFunction(y)){y("onshow",u)}});u.show()}}},0,0,0,0,["controller.konsul-list"],0,[pendaftaran.konsul,"ListController"],0));(Ext.cmd.derive("pendaftaran.konsul.Workspace",com.Tab,{controller:"konsultasi-workspace",kunjungan:undefined,bodyPadding:5,items:[{title:"Konsul",xtype:"konsul-workspace",reference:"konsul"},{title:"Jawab Konsul",xtype:"jawaban-konsul-workspace",reference:"jawabankonsul"},{title:"Riwayat",xtype:"riwayat-konsul-workspace",reference:"riwayatkonsul"}],load:function(l){var m=this,n=this.getActiveTab();this.kunjungan=l;if(n){n.load(l)}else{if(m.items.getCount()>0){m.setActiveTab(0)}}},listeners:{tabchange:"onTabChange"}},0,["konsultasi-workspace"],["component","box","container","panel","tabpanel","com-tab","konsultasi-workspace"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"konsultasi-workspace":true},["widget.konsultasi-workspace"],0,[pendaftaran.konsul,"Workspace"],0));(Ext.cmd.derive("pendaftaran.konsul.WorkspaceController",Ext.app.ViewController,{init:function(){var l=this,g=l.getReferences()},onTabChange:function(m,n){var l=this.getView().kunjungan;if(n.load){n.load(l)}}},0,0,0,0,["controller.konsultasi-workspace"],0,[pendaftaran.konsul,"WorkspaceController"],0));(Ext.cmd.derive("pendaftaran.konsul.jawab.Form",Ext.form.Panel,{title:"Jawab Konsul",controller:"jawab-konsul-form",viewModel:{data:{record:undefined,formConfig:{readOnly:true,simpan:false}}},layout:{type:"vbox",align:"stretch"},defaults:{margin:"0 2 2 0"},bodyPadding:5,config:{hideButtons:false},initComponent:function(){var l=this,g=new Date();l.items=[{xtype:"textareafield",name:"JAWABAN",flex:1,allowBlank:false,emptyText:"["+l.title+"]",bind:{readOnly:"{formConfig.readOnly}"}},{xtype:"textareafield",name:"ANJURAN",flex:1,allowBlank:false,emptyText:"[Anjuran]",bind:{readOnly:"{formConfig.readOnly}"}},{xtype:"dokter-combo",emptyText:"[Dokter Yg Menjawab]",name:"DOKTER",bind:{readOnly:"{formConfig.readOnly}"},allowBlank:false},{xtype:"fieldcontainer",layout:{type:"hbox"},defaults:{allowBlank:false,value:g},items:[{name:"TANGGAL",reference:"tanggal",flex:1,xtype:"datefield",emptyText:"[Pilih Tanggal Jawab]",format:"d/m/Y",submitFormat:"Y-m-d",maxValue:g,margin:"0 1 0 0",bind:{readOnly:"{formConfig.readOnly}"}},{name:"WAKTU",reference:"waktu",width:105,xtype:"timefield",emptyText:"[Jam:Mnt:Dtk]",format:"H:i:s",hideTrigger:true,bind:{readOnly:"{formConfig.readOnly}"}}]}];l.buttons=[{text:"Simpan",bind:{hidden:"{!formConfig.simpan}"},iconCls:"x-fa fa-save",handler:"onSimpan"}];l.callParent(arguments)},loadRecord:function(u){var x=this,g=x.down("[name=JAWABAN]"),y=x.getForm().loadRecord(u),f=x.down("dokter-combo"),w=x.down("[name=WAKTU]"),v=u.get("REFERENSI"),e=v?Ext.create("data.model.Dokter",v.DOKTER):null;w.setValue(u.get("TANGGAL"));f.params.RUANGAN=v?v.KONSUL.REFERENSI.TUJUAN.ID:0;f.loadStore();x.getViewModel().set("record",u);f.select(e);g.focus(false,100);return y},setFormConfig:function(m){var l=this,n=l.getViewModel();_config=n.get("formConfig");m=Ext.apply(_config,m);n.set("formConfig",m);n.notify()},getRecord:function(){var f=this.getViewModel().get("record"),q=this.getForm().getValues(),u=this.getForm().isValid(),t=this.down("[name=TANGGAL]").getValue(),s=this.down("[name=WAKTU]").getValue();if(u){var e=f.get("NOMOR");if(Ext.isNumeric(e)){f.setId(e)}t.setHours(s.getHours());t.setMinutes(s.getMinutes());t.setSeconds(s.getSeconds());q.TANGGAL=t;f.set(q)}return !u?false:f},reset:function(){this.getForm().reset();this.down("[name=JAWABAN]").focus(false,100)}},0,["jawab-konsul-form"],["component","box","container","panel","form","jawab-konsul-form"],{component:true,box:true,container:true,panel:true,form:true,"jawab-konsul-form":true},["widget.jawab-konsul-form"],0,[pendaftaran.konsul.jawab,"Form"],0));(Ext.cmd.derive("pendaftaran.konsul.jawab.FormController",Ext.app.ViewController,{onSimpan:function(m){var n=this,o=n.getView(),p=o.getRecord();if(p){p.showError=true;p.animateTarget=m;p.scope=n;p.save({callback:function(g,f,e){if(e){Ext.toast({html:"Jawaban anda telah tersimpan",headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"})}}})}}},0,0,0,0,["controller.jawab-konsul-form"],0,[pendaftaran.konsul.jawab,"FormController"],0));(Ext.cmd.derive("pendaftaran.konsul.jawab.Workspace",Ext.panel.Panel,{controller:"jawaban-konsul-workspace",viewModel:{stores:{store:{type:"konsul-store"}}},layout:"border",items:[{region:"center",xtype:"konsul-form",reference:"konsulformjawab"},{region:"east",xtype:"jawab-konsul-form",reference:"konsuljawab",split:true,flex:1}],load:function(o){var s=this,q=s.down("konsul-form"),e=s.down("jawab-konsul-form"),p=s.getViewModel().get("store");q.setFormConfig({readOnly:true,baru:false,kirim:false});if(o){p.queryParams={NOMOR:o.get("REF")};p.load(function(l,g,f){if(f){if(l.length==0){return}q.loadRecord(l[0]);e.setFormConfig({readOnly:o.get("STATUS")!=1,simpan:o.get("STATUS")==1});if(data.model){data.model.JawabKonsul.load(l[0].get("NOMOR"),{callback:function(m,n,u){if(!u){m=Ext.create("data.model.JawabKonsul",{NOMOR:l[0].get("NOMOR"),TANGGAL:new Date(),REFERENSI:{KONSUL:l[0].data}})}e.loadRecord(m)}})}}})}}},0,["jawaban-konsul-workspace"],["component","box","container","panel","jawaban-konsul-workspace"],{component:true,box:true,container:true,panel:true,"jawaban-konsul-workspace":true},["widget.jawaban-konsul-workspace"],0,[pendaftaran.konsul.jawab,"Workspace"],0));(Ext.cmd.derive("pendaftaran.konsul.jawab.WorkspaceController",Ext.app.ViewController,{},0,0,0,0,["controller.jawaban-konsul-workspace"],0,[pendaftaran.konsul.jawab,"WorkspaceController"],0));(Ext.cmd.derive("pendaftaran.konsul.konsul.Form",com.Form,{controller:"konsul-form",model:"data.model.Konsul",viewModel:{data:{formConfig:{readOnly:true,baru:false,kirim:false,tanggal:new Date()}}},layout:{type:"vbox",align:"stretch"},defaults:{margin:"0 2 2 0"},bodyPadding:5,title:"Form Konsul",header:{items:[{xtype:"button",ui:"soft-cyan",iconCls:"x-fa fa-file",hidden:true,bind:{hidden:"{!formConfig.baru}"},tooltip:"Konsul Baru",listeners:{click:"onKonsulBaruClick"}}]},initComponent:function(){var l=this,g=new Date();l.items=[{xtype:"ruangan-konsul-combo",hideTrigger:false,allowBlank:false,reference:"ruanganselection",params:{STATUS:1},name:"TUJUAN",bind:{readOnly:"{formConfig.readOnly}"}},{xtype:"textareafield",allowBlank:false,name:"ALASAN",flex:1,bind:{readOnly:"{formConfig.readOnly}"},emptyText:"[Alasan Konsul]"},{xtype:"textfield",allowBlank:false,name:"PERMINTAAN_TINDAKAN",flex:1,emptyText:"[Konsul Yang Diminta]",bind:{readOnly:"{formConfig.readOnly}"}},{xtype:"fieldcontainer",layout:{type:"hbox"},defaults:{allowBlank:false,value:g},items:[{name:"TANGGAL",reference:"tanggal",flex:1,xtype:"datefield",emptyText:"[Pilih Tanggal Konsul]",format:"d/m/Y",submitFormat:"Y-m-d",maxValue:g,margin:"0 1 0 0",bind:{readOnly:"{formConfig.readOnly}",minValue:"{formConfig.tanggal}"}},{name:"WAKTU",reference:"waktu",width:105,xtype:"timefield",emptyText:"[Jam:Mnt:Dtk]",format:"H:i:s",hideTrigger:true,bind:{readOnly:"{formConfig.readOnly}"}}]},{xtype:"dokter-combo",emptyText:"[Dokter Perujuk]",name:"DOKTER_ASAL",params:{STATUS:1},bind:{readOnly:"{formConfig.readOnly}"},allowBlank:false}];l.buttons=[{text:"Kirim",iconCls:"x-fa fa-save",hidden:true,bind:{hidden:"{!formConfig.kirim}"},handler:"onKirim"}];l.callParent(arguments)},onLoadRecord:function(s,y){var s=this,t=s.down("ruangan-konsul-combo"),w=s.down("dokter-combo"),x=s.down("[name=WAKTU]"),u=y.get("REFERENSI"),q=u?(u.KUNJUNGAN?u.KUNJUNGAN.RUANGAN:0):0,v=u?(u.DOKTER_ASAL?Ext.create("data.model.Dokter",u.DOKTER_ASAL):null):null;x.setValue(y.get("TANGGAL"));t.params.RUANGAN=q;t.load();w.params.RUANGAN=q;if(v){w.select(v);w.params.ID=v.get("ID");w.load()}t.focus(false,100)},onBeforeGetRecord:function(o,m){var o=this,n=o.down("[name=TANGGAL]").getValue(),p=o.down("[name=WAKTU]").getValue();n.setHours(p.getHours());n.setMinutes(p.getMinutes());n.setSeconds(p.getSeconds());m.TANGGAL=n}},0,["konsul-form"],["component","box","container","panel","form","com-form","konsul-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"konsul-form":true},["widget.konsul-form"],0,[pendaftaran.konsul.konsul,"Form"],0));(Ext.cmd.derive("pendaftaran.konsul.konsul.FormController",Ext.app.ViewController,{onKirim:function(m){var l=this,n=l.getView();n.setLoading(true);n.save(m,{success:"Konsul anda telah terkirim"},function(g,f,e){if(e){n.fireEvent("kirim",g);l.onKonsulBaruClick()}})},onKonsulBaruClick:function(){var n=this,p=n.getView(),o=n.getReferences(),m=n.getViewModel().get("record");p.createRecord({KUNJUNGAN:m.get("KUNJUNGAN"),TANGGAL:p.getSysdate()});o.ruanganselection.focus(false,100)}},0,0,0,0,["controller.konsul-form"],0,[pendaftaran.konsul.konsul,"FormController"],0));(Ext.cmd.derive("pendaftaran.konsul.konsul.Workspace",com.Form,{controller:"konsul-workspace",layout:"border",items:[{region:"center",xtype:"konsul-form",reference:"konsulform",listeners:{kirim:"onKirim"}},{region:"east",xtype:"konsul-list",reference:"konsullist",title:"Daftar Konsul",split:true,flex:1}],load:function(o){var s=this,q=s.down("konsul-form"),e=s.down("konsul-list");e.setListConfig({paging:false});if(o){var p=o.get("STATUS")!=1;q.createRecord({KUNJUNGAN:o.get("NOMOR"),TANGGAL:s.getSysdate(),REFERENSI:{KUNJUNGAN:o.data}});q.setFormConfig({readOnly:p,baru:!p,kirim:!p,tanggal:o.get("MASUK")});e.loadStore({NOPEN:o.get("NOPEN"),ASAL:o.get("RUANGAN"),HISTORY:1})}}},0,["konsul-workspace"],["component","box","container","panel","form","com-form","konsul-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"konsul-workspace":true},["widget.konsul-workspace"],0,[pendaftaran.konsul.konsul,"Workspace"],0));(Ext.cmd.derive("pendaftaran.konsul.konsul.WorkspaceController",Ext.app.ViewController,{onKirim:function(n){var l=this,m=l.getReferences();m.konsullist.refresh()}},0,0,0,0,["controller.konsul-workspace"],0,[pendaftaran.konsul.konsul,"WorkspaceController"],0));(Ext.cmd.derive("pendaftaran.konsul.riwayat.Workspace",Ext.panel.Panel,{controller:"riwayat-konsul-workspace",layout:"border",items:[{region:"center",xtype:"konsul-list",flex:1.5,reference:"konsullistriwayat",title:"Riwayat",listeners:{select:"onSelect"}},{region:"east",xtype:"jawab-konsul-form",reference:"konsuljawab",title:"Jawaban Konsul",split:true,flex:1}],load:function(p){var s=this,t=s.down("konsul-list"),u=s.down("jawab-konsul-form"),q=p.get("REFERENSI")?p.get("REFERENSI"):null,o=q?(q.PENDAFTARAN?q.PENDAFTARAN:0):0;u.setFormConfig({readOnly:true,simpan:false});t.setListConfig({paging:true,status:false});if(p){t.loadStore({NORM:o.NORM,HISTORY:1,STATUS:2})}u.reset()}},0,["riwayat-konsul-workspace"],["component","box","container","panel","riwayat-konsul-workspace"],{component:true,box:true,container:true,panel:true,"riwayat-konsul-workspace":true},["widget.riwayat-konsul-workspace"],0,[pendaftaran.konsul.riwayat,"Workspace"],0));(Ext.cmd.derive("pendaftaran.konsul.riwayat.WorkspaceController",Ext.app.ViewController,{onSelect:function(n,l){var m=this.getReferences();m.konsuljawab.setLoading(true);if(data.model){data.model.JawabKonsul.load(l.get("NOMOR"),{callback:function(g,e,f){if(f){m.konsuljawab.loadRecord(g)}else{m.konsuljawab.loadRecord(Ext.create("data.model.JawabKonsul"))}m.konsuljawab.setLoading(false)}})}}},0,0,0,0,["controller.riwayat-konsul-workspace"],0,[pendaftaran.konsul.riwayat,"WorkspaceController"],0));(Ext.cmd.derive("pendaftaran.konsul.terima.List",com.Grid,{controller:"terima-konsul",viewModel:{data:{inProses:false},stores:{store:{type:"konsul-store"}}},title:"Pengunjung Konsul",iconCls:"x-fa fa-wheelchair",header:{items:[{xtype:"search-field",emptyText:"[NORM]",flex:1,listeners:{search:"onSearch",clear:"onClear",change:"onChange"}}]},hideHeaders:true,first:true,columns:[{xtype:"templatecolumn",flex:2,tpl:new Ext.XTemplate('<div style="font-weight: bold; font-size: 12px; white-space:normal !important;">{[this.getFormatNorm(values.REFERENSI.KUNJUNGAN.REFERENSI.PENDAFTARAN.REFERENSI.PASIEN.NORM)]} - {[this.getNamaLengkap(values.REFERENSI.KUNJUNGAN.REFERENSI.PENDAFTARAN.REFERENSI.PASIEN)]}</div>',"<div>{[this.getFormatPendaftaran(values.REFERENSI.KUNJUNGAN.NOPEN)]} - {[this.tanggalFormat(values.REFERENSI.KUNJUNGAN.REFERENSI.PENDAFTARAN.TANGGAL)]}</div>",'<div style="font-size: 12px; white-space:normal !important;">{NOMOR} - {[this.tanggalFormat(values.TANGGAL)]}</div>','<div style="font-size: 12px; white-space:normal !important;">Asal: {[this.getAsal(values.REFERENSI.KUNJUNGAN)]}</div>','<div style="font-size: 12px; white-space:normal !important;">Tujuan: {[this.getTujuan(values.REFERENSI.TUJUAN)]}</div>','<div style="font-size: 12px; white-space:normal !important;">{[this.getDokterAsal(values.REFERENSI.DOKTER_ASAL)]}</div>','<div style="font-size: 12px; white-space:normal !important;">Penjamin: {[this.getPenjamin(values.REFERENSI.KUNJUNGAN.REFERENSI.PENDAFTARAN.PENJAMIN)]}</div>',{getFormatNorm:function(l){var m=Ext.String.leftPad(l,8,"0"),n=Ext.String.insert(Ext.String.insert(Ext.String.insert(m,".",2),".",5),".",8);return n},getNamaLengkap:function(o){var m=o.GELAR_DEPAN||"",p=o.NAMA||"",n=o.GELAR_BELAKANG||"";m=m==""?"":m+". ";n=n==""?"":", "+n;return m+p+n},getDokterAsal:function(g){var l=g.NAMA||"";return l},getFormatPendaftaran:function(f){return f.substring(0,6)+"."+f.substring(6)},tanggalFormat:function(l){var g=Ext.isDate(l)?l:Ext.Date.parse(l,"Y-m-d H:i:s");return Ext.Date.format(g,"d-m-Y H:i:s")},getAsal:function(y){var C=y.REFERENSI,x=y.JENIS_KUNJUNGAN==3,f=C?(C.RUANGAN?C.RUANGAN.DESKRIPSI:""):"",g=C&&x?C.RUANG_KAMAR_TIDUR:null,w=g?g.REFERENSI.RUANG_KAMAR:null,A=g?g.TEMPAT_TIDUR:"",e=w?w.KAMAR:"",z=w?(w.REFERENSI.KELAS?w.REFERENSI.KELAS.DESKRIPSI:""):"",B=f+(x?"</br>"+e+" / "+A+" / "+z:"");return B},getTujuan:function(n){var m=n?n:null,l=m?m.DESKRIPSI:"";return l},getPenjamin:function(o){var m=o.REFERENSI,n=m.KAP,p=n.REFERENSI.PENJAMIN.DESKRIPSI+(n.NOMOR==""?"":"-"+n.NOMOR)+" [ Kls. "+(m.KELAS?m.KELAS.DESKRIPSI:"")+" - SEP. "+o.NOMOR+" ]";return p}})},{xtype:"widgetcolumn",text:"Status",flex:1,align:"right",widget:{xtype:"fieldcontainer",defaults:{padding:2},items:[{xtype:"button",text:"Terima",action:0,margin:"0 1 0 0",handler:"onTerima"},{xtype:"button",text:"Batal",action:1,ui:"soft-red",handler:"onBatal"}]}}],onBeforeLoad:function(m,n,p){var o=n.get("config");if(m.first){m.first=false}n.set("config",o);m.setParams({COLUMNS:'["NOMOR","KUNJUNGAN","TANGGAL","DOKTER_ASAL","TUJUAN","STATUS"]',REFERENSI:Ext.JSON.encode({Kunjungan:{COLUMNS:["NOMOR","NOPEN","JENIS_KUNJUNGAN","RUANGAN","RUANG_KAMAR_TIDUR","STATUS"],REFERENSI:{Ruangan:{},RuangKamarTidur:{REFERENSI:{RuangKamar:{REFERENSI:{Kelas:true}}}},Pendaftaran:{COLUMNS:["NOMOR","NORM","TANGGAL"],REFERENSI:{Pasien:{COLUMNS:["NORM","GELAR_DEPAN","NAMA","GELAR_BELAKANG","JENIS_KELAMIN","TANGGAL_LAHIR","TEMPAT_LAHIR"]},Penjamin:{REFERENSI:{Kelas:true,KAP:true}}}}}},Dokter:true,Ruangan:{COLUMNS:["DESKRIPSI"]}})})}},0,["terima-konsul"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","terima-konsul"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"terima-konsul":true},["widget.terima-konsul"],0,[pendaftaran.konsul.terima,"List"],0));(Ext.cmd.derive("pendaftaran.konsul.terima.ListController",Ext.app.ViewController,{filter:{norm:"",tanggal:{checked:false,value:new Date()}},orderSelected:{property:"TANGGAL",direction:"ASC"},onSearch:function(l,g){this.filter.norm=g;this.cari()},onClear:function(){this.filter.norm="";this.cari()},onChange:function(p,n){var o=this,s=o.getView(),q=s.down("search-field");if(n==""){q.onClearClick()}},onTerima:function(q){var o=this,s=o.getView(),p=o.getViewModel(),t=q.ownerCt.getWidgetRecord(),u=t.get("REFERENSI").KUNJUNGAN.REFERENSI.PENDAFTARAN.REFERENSI.PASIEN.NAMA;s.waitRefresh=true;s.showMessageBox({title:"Penerimaan Pasien Konsul",message:"Anda yakin ingin menerima Konsul Pasien An. "+u+" ?",header:{padding:5},buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:q,fn:function(e){if(e==="yes"){p.set("inProses",true);var f=Ext.create("data.model.Kunjungan",{NOPEN:t.get("REFERENSI").KUNJUNGAN.NOPEN,RUANGAN:t.get("TUJUAN"),REF:t.get("NOMOR"),STATUS:1});f.showError=true;f.animateTarget=e;f.scope=o;f.save({callback:function(g,m,l){s.waitRefresh=false;if(l){s.remove(q.ownerCt);s.notifyMessage("Penerimaan Konsul Pasien An. "+u+" berhasil");s.fireEvent("terima",t);s.refresh()}p.set("inProses",false)}})}else{s.waitRefresh=false;p.set("inProses",false)}}})},onBatal:function(p){var o=this,q=o.getView(),s=p.ownerCt.getWidgetRecord(),t=s.get("STATUS"),u=s.get("REFERENSI").KUNJUNGAN.REFERENSI.PENDAFTARAN.REFERENSI.PASIEN.NAMA;q.waitRefresh=true;s.showError=true;s.animateTarget=p;s.scope=o;q.showMessageBox({title:"Pembatalan Penerimaan Pasien Konsul",message:"Anda yakin ingin membatalkan penerimaan Konsul Pasien An. "+u+" ?",ui:"window-warning",header:{padding:5},buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:p,fn:function(e){if(e==="yes"){s.set("STATUS",0);s.save({callback:function(f,l,g){q.waitRefresh=false;if(g){q.remove(p.ownerCt);q.notifyMessage("Pembatalan penerimaan Konsul Pasien An. "+u+" berhasil");q.refresh()}else{s.set("STATUS",t)}}})}else{q.waitRefresh=false;s.set("STATUS",t)}}})},privates:{cari:function(){var n=this,p=n.getView(),o=p.down("pagingtoolbar"),m={sort:Ext.JSON.encode(n.orderSelected)};if(n.filter.norm==""){delete p.getStore().queryParams.NORM}else{m.NORM=n.filter.norm}if(!n.filter.tanggal.checked){delete p.getStore().queryParams.TANGGAL}else{m.TANGGAL=Ext.Date.format(n.filter.tanggal.value,"Y-m-d")}p.setParams(m);if(o){o.moveFirst()}else{p.load()}}}},0,0,0,0,["controller.terima-konsul"],0,[pendaftaran.konsul.terima,"ListController"],0));(Ext.cmd.derive("pendaftaran.mutasi.List",com.Grid,{controller:"mutasi-list",viewModel:{stores:{store:{type:"mutasi-store"}}},columns:[{xtype:"rownumberer",text:"No",align:"left",width:50},{text:"Nomor",dataIndex:"NOMOR",sortable:false,flex:1},{xtype:"datecolumn",text:"Tanggal",dataIndex:"TANGGAL",format:"d/m/Y H:i:s",sortable:false},{xtype:"templatecolumn",text:"Asal",flex:1,sortable:false,tpl:'<div style="white-space:normal !important;">{REFERENSI.KUNJUNGAN.REFERENSI.RUANGAN.DESKRIPSI}</div>'},{xtype:"templatecolumn",text:"Tujuan",flex:1,sortable:false,tpl:'<div style="white-space:normal !important;">{REFERENSI.TUJUAN.DESKRIPSI}</div>'}]},0,["mutasi-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","mutasi-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"mutasi-list":true},["widget.mutasi-list"],0,[pendaftaran.mutasi,"List"],0));(Ext.cmd.derive("pendaftaran.mutasi.ListController",Ext.app.ViewController,{},0,0,0,0,["controller.mutasi-list"],0,[pendaftaran.mutasi,"ListController"],0));(Ext.cmd.derive("pendaftaran.mutasi.Workspace",com.Tab,{controller:"mutasi-workspace",bodyPadding:5,kunjungan:undefined,items:[{title:"Mutasi",xtype:"permintaan-mutasi-workspace",reference:"mutasi"},{title:"Riwayat Mutasi",xtype:"riwayat-mutasi-workspace",reference:"riwayatmutasi"}],load:function(l){var m=this,n=this.getActiveTab();this.kunjungan=l;if(n){n.load(l)}else{if(m.items.getCount()>0){m.setActiveTab(0)}}},listeners:{tabchange:"onTabChange"}},0,["mutasi-workspace"],["component","box","container","panel","tabpanel","com-tab","mutasi-workspace"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"mutasi-workspace":true},["widget.mutasi-workspace"],0,[pendaftaran.mutasi,"Workspace"],0));(Ext.cmd.derive("pendaftaran.mutasi.WorkspaceController",Ext.app.ViewController,{onTabChange:function(m,n){var l=this.getView().kunjungan;if(n.load){n.load(l)}}},0,0,0,0,["controller.mutasi-workspace"],0,[pendaftaran.mutasi,"WorkspaceController"],0));(Ext.cmd.derive("pendaftaran.mutasi.permintaan.Form",com.Form,{controller:"mutasi-form",model:"data.model.Mutasi",viewModel:{data:{nopenIbu:""}},layout:{type:"vbox",align:"stretch"},defaults:{margin:"0 2 2 0"},bodyPadding:5,title:"Form Mutasi",initComponent:function(){var g=this,l=new Date();g.items=[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},margin:"0 0 3 0",items:[{xtype:"checkboxfield",name:"IKUT_IBU",boxLabel:"Ikut Ibu ?",boxLabelAlign:"before",reference:"ikutibu",checked:false,bind:{value:"{formConfig.ikutIbu}",hidden:"{!formConfig.isBayi}"}},{xtype:"combobox",name:"KUNJUNGAN_IBU",hideTrigger:true,reference:"kunjunganibu",displayField:"DESKRIPSI",valueField:"NOMOR",store:Ext.create("Ext.data.Store",{fields:["NOMOR","DESKRIPSI"]}),readOnly:true,flex:1,bind:{hidden:"{!formConfig.isBayi}"}},{xtype:"button",ui:"soft-green",iconCls:"x-fa fa-female",handler:"onPilihKunjunganIbu",bind:{disabled:"{!formConfig.ikutIbu}",hidden:"{!formConfig.isBayi}"}}]},{xtype:"ruangan-mutasi-combo",hideTrigger:false,allowBlank:false,reference:"ruanganselection",name:"TUJUAN",params:{STATUS:1},bind:{readOnly:"{formConfig.viewOnly || ikutibu.checked}"},listeners:{select:"onRuanganSelected"}},{xtype:"reservasi-selection",reference:"reservasiselection",bodyPadding:0,border:false,listeners:{ruanganreserved:"onRuanganReserved"},bind:{hidden:"{ikutibu.checked}"}},{xtype:"fieldcontainer",layout:{type:"hbox"},defaults:{allowBlank:false,value:l},items:[{name:"TANGGAL",reference:"tanggal",flex:1,xtype:"datefield",emptyText:"[Pilih Tanggal Mutasi]",format:"d/m/Y",maxValue:l,margin:"0 1 0 0",bind:{readOnly:"{formConfig.viewOnly}",minValue:"{formConfig.tanggal}"}},{name:"WAKTU",reference:"waktu",width:105,xtype:"timefield",emptyText:"[Jam:Mnt:Dtk]",format:"H:i:s",hideTrigger:true,bind:{readOnly:"{formConfig.viewOnly}"}}]}];g.buttons=[{text:"Kirim",iconCls:"x-fa fa-save",hidden:true,bind:{hidden:"{!formConfig.kirim}"},handler:"onKirim"},{text:"Batalkan",hidden:true,bind:{hidden:"{!formConfig.batal}"},handler:"onBatal"}];com.Form.prototype.initComponent.apply(this,arguments)},onLoadRecord:function(q,x){var u=q.getViewModel(),w=q.down("ruangan-mutasi-combo"),v=q.down("[name=WAKTU]");if(x){var s=x.get("REFERENSI"),y=s?(s.KUNJUNGAN?s.KUNJUNGAN.RUANGAN:0):0,t=s?(s.TUJUAN?(Ext.create("data.model.Ruangan",s.TUJUAN)):null):null;v.setValue(x.get("TANGGAL"));w.params.RUANGAN=y;w.load();w.doAfterLoad=function(e,g,f){w.focus(false,100)}}},setFormConfig:function(o){var m=this,n=m.getViewModel(),p=m.down?m.down("reservasi-selection"):null;com.Form.prototype.setFormConfig.apply(this,arguments);if(p){p.setSelectionConfig({readOnly:n.get("formConfig.viewOnly"),reservasi:!n.get("formConfig.viewOnly")})}},onBeforeGetRecord:function(p,n){var o=p.down("[name=TANGGAL]").getValue(),q=p.down("[name=WAKTU]").getValue(),s=p.down("[name=IKUT_IBU]").getValue();o.setHours(q.getHours());o.setMinutes(q.getMinutes());o.setSeconds(q.getSeconds());n.TANGGAL=o;n.IKUT_IBU=s?1:0},setNoPendaftaranIbu:function(f){this.getViewModel().set("nopenIbu",f)}},0,["mutasi-form"],["component","box","container","panel","form","com-form","mutasi-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"mutasi-form":true},["widget.mutasi-form"],0,[pendaftaran.mutasi.permintaan,"Form"],0));(Ext.cmd.derive("pendaftaran.mutasi.permintaan.FormController",Ext.app.ViewController,{onKirim:function(m){var l=this,n=l.getView();n.save(m,{success:"Permintaan mutasi anda telah terkirim"},function(g,f,e){if(e){n.setFormConfig({viewOnly:true,kirim:false,batal:true});n.fireEvent("kirim",g)}})},onBatal:function(o){var n=this,p=n.getView(),m=p.getRecord();if(m){Ext.Msg.show({title:"Pembatalan Mutasi",message:"Anda yakin ingin membatalkan mutasi ini ?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:o,fn:function(e){if(e==="yes"){m.set("STATUS",0);p.save(o,{success:"Pembatalan mutasi berhasil"},function(f,l,g){if(g){p.setFormConfig({readOnly:false,kirim:true,batal:false})}else{f.set("STATUS",1)}})}}})}},onRuanganSelected:function(n,l){if(!this.getViewModel().get("formConfig.ikutIbu")){var m=Ext.create("data.model.Ruangan",l.get("REFERENSI").MUTASI);this.getReferences().reservasiselection.setRuangan(m)}},onRuanganReserved:function(m){var n=this.getReferences(),l=n.ruanganselection.findRecordByValue(m.get("ID"));n.ruanganselection.select(l)},onPilihKunjunganIbu:function(){var m=this,o=m.getViewModel(),p=m.getView(),n=m.getReferences();p.openDialog("",true,"90%","70%",{xtype:"kunjungan-list",ui:"panel-cyan",showCloseButton:true,title:"History Kunjungan Pasien"},function(e,g){var l=g.down("kunjungan-list");l.setListConfig({paging:true,hiddenLihatAction:true,pencarian:{norm:{enabled:true},nama:{enabled:true}}});l.hideColumnConfig({pasien:false,action:true});l.on({itemdblclick:function(C,K,D,I,H,G){var L=p.getReferensi(K.data,"RUANGAN"),E=p.getReferensi(K.data,"PENDAFTARAN"),J=p.getReferensi(E,"PASIEN"),F=Ext.create("Ext.data.Model",{NOMOR:K.get("NOMOR"),DESKRIPSI:J.NAMA}),M=L?Ext.create("data.model.RuanganMutasi",{RUANGAN:0,MUTASI:L.ID,STATUS:1,REFERENSI:{MUTASI:L}}):null;n.ruanganselection.select(M);n.kunjunganibu.select(F);g.close()}});var f={STATUS:1,JENIS_KUNJUNGAN:3,HISTORY:1,JENIS_KELAMIN:2,REFERENSI:Ext.JSON.encode({Ruangan:true,Referensi:true,RuangKamarTidur:true,Pendaftaran:{COLUMNS:["NOMOR","NORM"],REFERENSI:{Pasien:true,TujuanPasien:true}}})};if(o.get("nopenIbu")!=""){f.NOPEN=o.get("nopenIbu")}l.loadStore(f)})}},0,0,0,0,["controller.mutasi-form"],0,[pendaftaran.mutasi.permintaan,"FormController"],0));(Ext.cmd.derive("pendaftaran.mutasi.permintaan.Workspace",com.Form,{controller:"permintaan-mutasi-workspace",viewModel:{stores:{store:{type:"mutasi-store"},kunjungan:{type:"kunjungan-store"}}},layout:"border",items:[{region:"center",xtype:"mutasi-form",reference:"mutasiform",listeners:{kirim:"onKirim"}}],load:function(D){var L=this,F=L.down("mutasi-form");if(D&&F){var C=D.get("STATUS")!=1,H=L.getViewModel().get("store"),M=L.getViewModel().get("kunjungan"),E=D.get("REFERENSI")?D.get("REFERENSI"):null,J=E?(E.PEMBATALAN?E.PEMBATALAN:false):false,K=J?(J.JENIS==1):false,I=L.getReferensi(D.data,"PENDAFTARAN"),y=L.getReferensi(I,"PASIEN"),A=Ext.Date.diff(Ext.Date.parse(y.TANGGAL_LAHIR,"Y-m-d H:i:s"),L.getSysdate(),Ext.Date.DAY),B=L.getPropertyConfig(13),G=(A<=B);F.createRecord({KUNJUNGAN:D.get("NOMOR"),TANGGAL:L.getSysdate(),REFERENSI:{KUNJUNGAN:D.data}});F.setFormConfig({viewOnly:C,kirim:!C,tanggal:D.get("MASUK"),batal:K?false:C,isBayi:G});if(H){H.removeAll();H.queryParams={KUNJUNGAN:D.get("NOMOR")};H.load(function(e,l,g){if(g){var f=false;Ext.Array.each(e,function(m){var q=m.get("STATUS")!=0,o=m.get("REFERENSI")?m.get("REFERENSI"):null,n=o?(o.KUNJUNGAN?o.KUNJUNGAN:null):null,t=n?(n.REFERENSI?n.REFERENSI:null):null,p=t?(t.PEMBATALAN?t.PEMBATALAN:null):null,s=p?(p.JENIS==1):false;if(q&!f){F.loadRecord(m);F.setFormConfig({viewOnly:q,kirim:!q,batal:s?false:q,isBayi:G});f=true}});if(C){F.setFormConfig({viewOnly:true,kirim:false,batal:false,isBayi:G})}}})}if(M){var z=I.TUJUAN;if(z.IKUT_IBU==1){M.removeAll();M.queryParams={NOMOR:z.KUNJUNGAN_IBU};M.load(function(f,g,e){if(e){if(f.length>0){F.setNoPendaftaranIbu(f[0].get("NOPEN"))}}})}}}}},0,["permintaan-mutasi-workspace"],["component","box","container","panel","form","com-form","permintaan-mutasi-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"permintaan-mutasi-workspace":true},["widget.permintaan-mutasi-workspace"],0,[pendaftaran.mutasi.permintaan,"Workspace"],0));(Ext.cmd.derive("pendaftaran.mutasi.permintaan.WorkspaceController",Ext.app.ViewController,{onKirim:function(f){}},0,0,0,0,["controller.permintaan-mutasi-workspace"],0,[pendaftaran.mutasi.permintaan,"WorkspaceController"],0));(Ext.cmd.derive("pendaftaran.mutasi.riwayat.Workspace",com.Form,{controller:"riwayat-mutasi-workspace",layout:"fit",items:[{xtype:"mutasi-list",reference:"mutasilistriwayat",title:"Riwayat"}],load:function(l){var m=this,n=m.down("mutasi-list");n.setListConfig({paging:true,status:false});if(l){n.loadStore({KUNJUNGAN:l.get("NOMOR"),HISTORY:1,STATUS:2})}}},0,["riwayat-mutasi-workspace"],["component","box","container","panel","form","com-form","riwayat-mutasi-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"riwayat-mutasi-workspace":true},["widget.riwayat-mutasi-workspace"],0,[pendaftaran.mutasi.riwayat,"Workspace"],0));(Ext.cmd.derive("pendaftaran.mutasi.riwayat.WorkspaceController",Ext.app.ViewController,{},0,0,0,0,["controller.riwayat-mutasi-workspace"],0,[pendaftaran.mutasi.riwayat,"WorkspaceController"],0));(Ext.cmd.derive("pendaftaran.mutasi.terima.List",com.Grid,{controller:"terima-mutasi",viewModel:{data:{inProses:false},stores:{store:{type:"mutasi-store"}}},title:"Pengunjung Mutasi",iconCls:"x-fa fa-bed",header:{items:[{xtype:"search-field",emptyText:"[NORM]",flex:1,listeners:{search:"onSearch",clear:"onClear",change:"onChange"}}]},hideHeaders:true,first:true,columns:[{xtype:"templatecolumn",flex:2,tpl:new Ext.XTemplate('<div style="font-weight: bold; font-size: 12px; white-space:normal !important;">{[this.getFormatNorm(values.REFERENSI.KUNJUNGAN.REFERENSI.PENDAFTARAN.REFERENSI.PASIEN.NORM)]} - {[this.getNamaLengkap(values.REFERENSI.KUNJUNGAN.REFERENSI.PENDAFTARAN.REFERENSI.PASIEN)]}</div>',"<div>{[this.getFormatPendaftaran(values.REFERENSI.KUNJUNGAN.NOPEN)]} - {[this.tanggalFormat(values.REFERENSI.KUNJUNGAN.REFERENSI.PENDAFTARAN.TANGGAL)]}</div>",'<div style="font-size: 12px; white-space:normal !important;">{NOMOR} - {[this.tanggalFormat(values.TANGGAL)]}</div>','<div style="font-size: 12px; white-space:normal !important;">Asal: {[this.getAsal(values.REFERENSI.KUNJUNGAN)]}</div>','<div style="font-size: 12px; white-space:normal !important;">Tujuan: {[this.getTujuan(values.REFERENSI.RESERVASI)]}</div>','<div style="font-size: 12px; white-space:normal !important;">Penjamin: {[this.getPenjamin(values.REFERENSI.KUNJUNGAN.REFERENSI.PENDAFTARAN.PENJAMIN)]}</div>',{getFormatNorm:function(l){var m=Ext.String.leftPad(l,8,"0"),n=Ext.String.insert(Ext.String.insert(Ext.String.insert(m,".",2),".",5),".",8);return n},getNamaLengkap:function(o){var m=o.GELAR_DEPAN||"",p=o.NAMA||"",n=o.GELAR_BELAKANG||"";m=m==""?"":m+". ";n=n==""?"":", "+n;return m+p+n},getFormatPendaftaran:function(f){return f.substring(0,6)+"."+f.substring(6)},tanggalFormat:function(l){var g=Ext.isDate(l)?l:Ext.Date.parse(l,"Y-m-d H:i:s");return Ext.Date.format(g,"d-m-Y H:i:s")},getAsal:function(x){var e=x.REFERENSI,g=e?(e.RUANGAN?e.RUANGAN.DESKRIPSI:""):"",v=e?e.RUANG_KAMAR_TIDUR:null,w=v?v.REFERENSI.RUANG_KAMAR:null,z=v?v.TEMPAT_TIDUR:"",f=w?w.KAMAR:"",y=w?(w.REFERENSI.KELAS?w.REFERENSI.KELAS.DESKRIPSI:""):"",A=g+"</br>"+f+" / "+z+" / "+y;return A},getTujuan:function(w){var e=w.REFERENSI,v=e?e.RUANG_KAMAR_TIDUR:null,x=v?v.REFERENSI.RUANG_KAMAR:null,g=x?x.REFERENSI.RUANGAN.DESKRIPSI:"",z=v?v.TEMPAT_TIDUR:"",f=x?x.KAMAR:"",y=x?(x.REFERENSI.KELAS?x.REFERENSI.KELAS.DESKRIPSI:""):"",A=g+"</br>"+f+" / "+z+" / "+y+"</br>No. Resevasi : "+w.NOMOR;return A},getPenjamin:function(o){var m=o.REFERENSI,n=m.KAP,p=n.REFERENSI.PENJAMIN.DESKRIPSI+(n.NOMOR==""?"":"-"+n.NOMOR)+" [ Kls. "+(m.KELAS?m.KELAS.DESKRIPSI:"")+" - SEP. "+o.NOMOR+" ]";return p}})},{xtype:"widgetcolumn",text:"Status",flex:1,align:"right",widget:{xtype:"fieldcontainer",defaults:{padding:2},items:[{xtype:"button",text:"Terima",action:0,margin:"0 1 0 0",handler:"onTerima"},{xtype:"button",text:"Batal",action:1,ui:"soft-red",handler:"onBatal"}]}}],onBeforeLoad:function(m,n,p){var o=n.get("config");if(m.first){m.first=false}n.set("config",o);m.setParams({COLUMNS:'["NOMOR","KUNJUNGAN","TANGGAL","TUJUAN","RESERVASI","STATUS"]',REFERENSI:Ext.JSON.encode({Kunjungan:{COLUMNS:["NOMOR","NOPEN","JENIS_KUNJUNGAN","RUANGAN","RUANG_KAMAR_TIDUR","STATUS"],REFERENSI:{Ruangan:{},RuangKamarTidur:{REFERENSI:{RuangKamar:{REFERENSI:{Kelas:true}}}},Pendaftaran:{COLUMNS:["NOMOR","NORM","TANGGAL"],REFERENSI:{Pasien:{COLUMNS:["NORM","GELAR_DEPAN","NAMA","GELAR_BELAKANG","JENIS_KELAMIN","TANGGAL_LAHIR","TEMPAT_LAHIR"]},Penjamin:{REFERENSI:{Kelas:true,KAP:true}}}}}},Ruangan:{COLUMNS:["DESKRIPSI"]},Reservasi:true})})}},0,["terima-mutasi"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","terima-mutasi"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"terima-mutasi":true},["widget.terima-mutasi"],0,[pendaftaran.mutasi.terima,"List"],0));(Ext.cmd.derive("pendaftaran.mutasi.terima.ListController",Ext.app.ViewController,{filter:{norm:"",tanggal:{checked:false,value:new Date()}},orderSelected:{property:"TANGGAL",direction:"ASC"},onSearch:function(l,g){this.filter.norm=g;this.cari()},onClear:function(){this.filter.norm="";this.cari()},onChange:function(p,n){var o=this,s=o.getView(),q=s.down("search-field");if(n==""){q.onClearClick()}},onTerima:function(q){var p=this,s=p.getView(),n=q.ownerCt.getWidgetRecord(),o=n.get("REFERENSI").KUNJUNGAN.REFERENSI.PENDAFTARAN.REFERENSI.PASIEN.NAMA;s.waitRefresh=true;s.showMessageBox({title:"Penerimaan Pasien Mutasi",message:"Anda yakin ingin menerima Mutasi Pasien An. "+o+" ?",header:{padding:5},buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:q,fn:function(e){if(e==="yes"){var f=Ext.create("data.model.Kunjungan",{NOPEN:n.get("REFERENSI").KUNJUNGAN.NOPEN,RUANGAN:n.get("TUJUAN"),RUANG_KAMAR_TIDUR:n.get("REFERENSI").RESERVASI.RUANG_KAMAR_TIDUR,REF:n.get("NOMOR"),STATUS:1});f.showError=true;f.animateTarget=q;f.scope=p;f.save({callback:function(g,m,l){s.waitRefresh=false;if(l){s.remove(q.ownerCt);s.notifyMessage("Penerimaan Mutasi Pasien An. "+o+" berhasil");s.fireEvent("terima",g);s.refresh()}}})}else{s.waitRefresh=false}}})},onBatal:function(q){var p=this,s=p.getView(),u=q.ownerCt.getWidgetRecord(),t=u.get("STATUS"),o=u.get("REFERENSI").KUNJUNGAN.REFERENSI.PENDAFTARAN.REFERENSI.PASIEN.NAMA;s.waitReresh=true;u.showError=true;u.animateTarget=q;u.scope=p;s.showMessageBox({title:"Pembatalan Penerimaan Pasien Mutasi",message:"Anda yakin ingin membatalkan penerimaan Mutasi Pasien An. "+o+" ?",ui:"window-warning",header:{padding:5},buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:q,fn:function(e){if(e==="yes"){u.set("STATUS",0);u.save({callback:function(f,l,g){s.waitRefresh=false;if(g){s.remove(q.ownerCt);s.notifyMessage("Pembatalan penerimaan Mutasi Pasien An. "+o+" berhasil");s.refresh()}else{f.set("STATUS",t)}}})}else{s.waitRefresh=false;u.set("STATUS",t)}}})},privates:{cari:function(){var n=this,p=n.getView(),o=p.down("pagingtoolbar"),m={sort:Ext.JSON.encode(n.orderSelected)};if(n.filter.norm==""){delete p.getStore().queryParams.NORM}else{m.NORM=n.filter.norm}if(!n.filter.tanggal.checked){delete p.getStore().queryParams.TANGGAL}else{m.TANGGAL=Ext.Date.format(n.filter.tanggal.value,"Y-m-d")}p.setParams(m);if(o){o.moveFirst()}else{p.load()}}}},0,0,0,0,["controller.terima-mutasi"],0,[pendaftaran.mutasi.terima,"ListController"],0));(Ext.cmd.derive("pendaftaran.online.reservasi.List",com.Grid,{controller:"pendaftaran-online-reservasi-list",viewModel:{stores:{store:{type:"pendaftaran-online-reservasi-store"}},data:{tgltemp:undefined}},initComponent:function(){var f=this;f.createMenuContext();f.dockedItems=[{xtype:"toolbar",dock:"top",items:["->",{xtype:"datefield",name:"FTANGGAL",format:"d-m-Y",reference:"ftanggal",listeners:{change:"onChangeTgl"}},{xtype:"combobox",emptyText:"[Jenis Pendaftaran]",displayField:"deskripsi",reference:"fjenis",valueField:"jenis",store:Ext.create("Ext.data.Store",{fields:["jenis","deskripsi"],data:[{jenis:"1",deskripsi:"P. Lama"},{jenis:"2",deskripsi:"P. Baru"}]}),listeners:{select:"onChangeTgl"}},{xtype:"button",ui:"soft-red",iconCls:"x-fa fa-print",tooltip:"Print Kunjungan",listeners:{scope:f.getController(),click:"onCetak"}}]},{xtype:"pagingtoolbar",bind:{store:"{store}"},dock:"bottom",beforePageText:"Hal.",afterPageText:"dari {0}",displayMsg:"Menampilkan {0} - {1} dari {2}",displayInfo:true}];f.columns=[{text:"No Antrian",dataIndex:"NO",align:"left",flex:0.3,renderer:"onAntrian"},{text:"Poli Tujuan",dataIndex:"POLI",align:"left",flex:0.5,renderer:"onPoli"},{text:"Tgl. Kunjungan",align:"left",dataIndex:"TANGGALKUNJUGAN",flex:0.5,renderer:"onTglK"},{text:"Cara Bayar",align:"left",dataIndex:"CARABAYAR",flex:0.5,renderer:"onCaraBayar"},{text:"No RM",align:"left",dataIndex:"NORM",flex:0.5,renderer:"onNorm"},{text:"Nama",dataIndex:"NAMA",align:"left",renderer:"onRenderNama",flex:0.5},{text:"Contact",align:"left",dataIndex:"CONTACT",flex:0.5,renderer:"onCont"},{xtype:"datecolumn",format:"d-m-Y",text:"Tgl. Lahir",dataIndex:"TGL_LAHIR",align:"left",renderer:"onRenderTgl",flex:0.5},{text:"Jenis Pendaftar",align:"left",dataIndex:"JENIS",flex:0.5,renderer:"onRenderJenis"},{text:"Res",xtype:"actioncolumn",align:"center",width:50,items:[{xtype:"tool",iconCls:"x-fa fa-arrow-circle-right",tooltip:"Terima Kedatangan Pasien",handler:"onClickRespon"}]}];com.Grid.prototype.initComponent.apply(this,arguments)},listeners:{rowcontextmenu:"onKlikKananMenu"},createMenuContext:function(){var f=this;f.menucontext=new Ext.menu.Menu({items:[{text:"Terima Kedatangan Pasien",iconCls:"x-fa fa-arrow-circle-right",handler:function(){f.getController().onRespon()}},{text:"Refresh",glyph:"xf021@FontAwesome",handler:function(){f.getController().onRefresh()}}]});return f.menucontext},loadData:function(){var p=this,s=p.getViewModel(),n=p.down("[name = FTANGGAL]"),o=Ext.Date.format(s.get("tgltemp"),"d-m-Y"),q=Ext.Date.format(p.getSysdate(),"d-m-Y");if(o!=q){n.setValue(p.getSysdate());s.set("tgltemp",p.getSysdate())}else{p.reload()}}},0,["pendaftaran-online-reservasi-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","pendaftaran-online-reservasi-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"pendaftaran-online-reservasi-list":true},["widget.pendaftaran-online-reservasi-list"],0,[pendaftaran.online.reservasi,"List"],0));(Ext.cmd.derive("pendaftaran.online.reservasi.ListController",Ext.app.ViewController,{onChangeTgl:function(){var o=this,p=o.getReferences(),m=p.ftanggal,n=p.fjenis.getValue();config={};obj={TANGGALKUNJUGAN:Ext.Date.format(m.getValue(),"Y-m-d")};if(n){config={JENIS:n};obj=Ext.apply(obj,config)}o.getView().load(obj)},onRenderJenis:function(o,p,m){var n=m.get("JENIS")==1?"Pasien Lama":"Pasien Baru";this.setBackGround(p,m.get("STATUS"));return n},onRenderNama:function(m,n,l){this.setBackGround(n,l.get("STATUS"));return m},onAntrian:function(m,n,l){this.setBackGround(n,l.get("STATUS"));return m},onPoli:function(n,o,m){var p=m.get("REFERENSI")?m.get("REFERENSI").POLI.DESKRIPSI:"";this.setBackGround(o,m.get("STATUS"));return p},onTglK:function(m,n,l){this.setBackGround(n,l.get("STATUS"));return Ext.Date.format(l.get("TANGGALKUNJUGAN"),"d-m-Y")},onCaraBayar:function(n,o,m){var p=m.get("REFERENSI").CARABAYAR.DESKRIPSI;this.setBackGround(o,m.get("STATUS"));return p},onNorm:function(n,o,m){var p=(n==0)?"":n;this.setBackGround(o,m.get("STATUS"));return p},onCont:function(m,n,l){this.setBackGround(n,l.get("STATUS"));return m},onRenderTgl:function(n,o,m){var p=Ext.Date.format(n,"d-m-Y");this.setBackGround(o,m.get("STATUS"));return p},setBackGround:function(g,l){if(l==2){g.style="background-color:#0df775;color:#000000;font-weight: bold"}},onKlikKananMenu:function(u,g,t,f,w){var s=this,v=w.getXY();w.stopEvent();s.getView().menucontext.showAt(v)},onClickRespon:function(q,u,s){var p=this,t=p.getView(),o=q.getStore().getAt(u);p.onResponPasien(o)},onResponPasien:function(f){},onRespon:function(){var l=this,g=l.getView().getSelection()[0];l.onResponPasien(g)},onRefresh:function(){var f=this.getView();f.reload()},onCetak:function(g,l){}},0,0,0,0,["controller.pendaftaran-online-reservasi-list"],0,[pendaftaran.online.reservasi,"ListController"],0));(Ext.cmd.derive("pendaftaran.online.reservasi.Workspace",com.Form,{bodyPadding:2,layout:"border",border:true,initComponent:function(){var f=this;f.items=[{region:"center",xtype:"pendaftaran-online-reservasi-list",flex:1,layout:"fit"}];com.Form.prototype.initComponent.apply(this,arguments)},load:function(){var l=this,g=l.down("pendaftaran-online-reservasi-list");g.loadData()}},0,["pendaftaran-online-reservasi-workspace"],["component","box","container","panel","form","com-form","pendaftaran-online-reservasi-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"pendaftaran-online-reservasi-workspace":true},["widget.pendaftaran-online-reservasi-workspace"],0,[pendaftaran.online.reservasi,"Workspace"],0));(Ext.cmd.derive("pendaftaran.paket.UbahPaket",com.Form,{controller:"ubah-paket-form",model:"data.model.Pendaftaran",viewModel:{data:{readOnly:false}},layout:{type:"hbox"},defaults:{margin:"0 2 2 0"},border:false,items:[{xtype:"hiddenfield",name:"NOMOR"},{name:"PAKET",reference:"paket",flex:1,firstLoad:true,xtype:"paket-combo",params:{STATUS:1}}],buttons:[{text:"Simpan",iconCls:"x-fa fa-save",handler:"onSimpan"}]},0,["ubah-paket-form"],["component","box","container","panel","form","com-form","ubah-paket-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"ubah-paket-form":true},["widget.ubah-paket-form"],0,[pendaftaran.paket,"UbahPaket"],0));(Ext.cmd.derive("pendaftaran.paket.UbahPaketController",Ext.app.ViewController,{onSimpan:function(m){var l=this,n=l.getView();n.showMessageBox({title:"Ubah Paket Pendaftaran",message:"Anda yakin ingin mengubah paket pendaftaran ini ?",ui:"window-warning",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:m,fn:function(e){if(e==="yes"){n.save(m,{success:"Ubah paket pendaftaran berhasil"})}}})}},0,0,0,0,["controller.ubah-paket-form"],0,[pendaftaran.paket,"UbahPaketController"],0));(Ext.cmd.derive("pendaftaran.pembatalan.kunjungan.Form",com.Form,{controller:"pembatalan-kunjungan-form",model:"data.model.PembatalanKunjungan",bodyPadding:5,layout:"fit",items:[{xtype:"referensi-combo",name:"JENIS",params:{JENIS:57},firstLoad:true,allowBlank:false,editable:false,emptyText:"[Jenis Pembatalan Kunjungan]"}],buttons:[{text:"Batalkan",ui:"soft-blue",iconCls:"x-fa fa-minus-circle",handler:"onBatalkan"}]},0,["pembatalan-kunjungan-form"],["component","box","container","panel","form","com-form","pembatalan-kunjungan-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"pembatalan-kunjungan-form":true},["widget.pembatalan-kunjungan-form"],0,[pendaftaran.pembatalan.kunjungan,"Form"],0));(Ext.cmd.derive("pendaftaran.pembatalan.kunjungan.FormController",Ext.app.ViewController,{onBatalkan:function(g){var m=this,n=m.getView();n.save(g,{success:"Final kunjungan telah dibatalkan"})}},0,0,0,0,["controller.pembatalan-kunjungan-form"],0,[pendaftaran.pembatalan.kunjungan,"FormController"],0));(Ext.cmd.derive("pendaftaran.penanggungjawab.Form",com.Form,{controller:"form-penanggung-jawab",model:"data.model.PenanggungJawab",viewModel:{data:{formConfig:{simpan:false}}},layout:{type:"vbox",align:"stretch"},title:"Penanggungjawab",header:{iconCls:"x-fa fa-user",padding:"5 10 5 10"},bodyPadding:5,layout:{type:"vbox",align:"stretch"},items:[{xtype:"textfield",inputType:"hidden",name:"NOPEN",hidden:true},{xtype:"numberfield",inputType:"hidden",name:"REF",hidden:true},{xtype:"keluarga",border:false,hideDelete:true,hideKontak:true,listeners:{specialkey:"onFocusEnter"}},{xtype:"kontak",reference:"kontakpenanggung",hideDelete:true,margin:"0 1 0 1",refId:"ID"}],dockedItems:[{xtype:"toolbar",dock:"bottom",hidden:true,bind:{hidden:"{!formConfig.simpan}"},items:["->",{xtype:"button",iconCls:"x-fa fa-save",ui:"soft-blue",text:"Simpan",handler:"onSimpan"}]}],onLoadRecord:function(q,v){var t=q.getViewModel(),w=t.get("formConfig").viewOnly,s=v?(v.get("KONTAK")?v.get("KONTAK"):[]):[],u=q.down("keluarga"),p=q.down("[reference=kontakpenanggung]");p.setFormConfig({viewOnly:w});u.setFormConfig({viewOnly:w});Ext.Array.each(s,function(e){p.load(Ext.create("data.model.KontakPenanggungJawab",e))})},getFormData:function(){var n={},m=this.down("keluarga"),o=m.down("form").getForm().getValues(),p=this.down("[reference=kontakpenanggung]").getFormData();delete o.NORM;n=Ext.merge(n,o);if(p){n.KONTAK=[p]}n.NOPEN=this.down("[name=NOPEN]").getValue();n.REF=this.down("[name=REF]").getValue();if(n.NOPEN==""&&n.ID==""&&n.JENIS_KELAMIN==""&&n.NAMA==""&&n.SHDK==""){return{}}return n}},0,["form-penanggung-jawab"],["component","box","container","panel","form","com-form","form-penanggung-jawab"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-penanggung-jawab":true},["widget.form-penanggung-jawab"],0,[pendaftaran.penanggungjawab,"Form"],0));(Ext.cmd.derive("pendaftaran.penanggungjawab.FormController",Ext.app.ViewController,{onFocusEnter:function(l,g){this.getView().fireEvent("specialkey",l,g)},onSimpan:function(p){var o=this,q=o.getView(),n=q.getFormData(),s=Ext.create("data.model.PenanggungJawab",{});if(n.ID==""){delete n.ID}s.set(n);s.showError=true;s.animateTarget=p;s.save({callback:function(g,f,e){if(e){q.fireEvent("save",g);q.notifyMessage("Berhasil menyimpan data penanggungjawab")}else{q.notifyMessage("Gagal menyimpan data penanggungjawab","danger-red")}}})}},0,0,0,0,["controller.form-penanggung-jawab"],0,[pendaftaran.penanggungjawab,"FormController"],0));(Ext.cmd.derive("pendaftaran.penjamin.Detil",Ext.container.Container,{viewModel:{data:{record:undefined},stores:{store:{type:"penjamin-store"}},formulas:{info:function(p){var n=p("record.JENIS"),m=p("record.REFERENSI.KAP"),o=m?(n==1?"":m.NOMOR+" - ")+m.REFERENSI.PENJAMIN.DESKRIPSI:"";return o},infoDetil:function(q){var o=q("record.JENIS"),e=q("record.NOMOR"),s=q("record.REFERENSI"),p=s?(o==1?"":(s.KELAS?s.KELAS.DESKRIPSI+" / SEP. "+e:"")):"";return p}}},layout:{type:"vbox"},cls:"x-br-top",defaultType:"component",defaults:{style:"font-size: 13px;",margin:"0 0 1 0"},items:[{style:"font-size: 20px; font-weight: bold",bind:"{info}"},{cls:"x-color-green",bind:"{infoDetil}"}],load:function(e,o){try{var s=this,q=s.getViewModel(),p=q.get("store");if(q){if(Ext.getClassName(e)=="data.model.Penjamin"){q.set("record",e)}else{if(p){p.queryParams=e;p.load(function(l,f,g){try{if(g&&l.length>0){q.set("record",l[0]);if(Ext.isFunction(o)){o(l[0])}}}catch(m){}})}}}}catch(o){}},getRecord:function(){return this.getViewModel().get("record")}},0,["penjamin-detil"],["component","box","container","penjamin-detil"],{component:true,box:true,container:true,"penjamin-detil":true},["widget.penjamin-detil"],0,[pendaftaran.penjamin,"Detil"],0));(Ext.cmd.derive("pendaftaran.penjamin.Form",com.Form,{controller:"form-penjamin",model:"data.model.Penjamin",viewModel:{data:{formConfig:{showLoadRujukan:false},pendaftaran:undefined,ruangan:undefined,readOnlyInput:false,hideNama:true,loadRujukan:false,isBPJS:false,isMata:false}},layout:{type:"vbox",align:"stretch"},title:"Penjamin",header:{iconCls:"x-fa fa-user-secret",padding:"5 10 5 10"},bodyPadding:5,layout:{type:"vbox",align:"stretch"},defaultType:"fieldcontainer",defaults:{margin:"0 0 2 0 ",layout:{type:"hbox",align:"stretch"}},items:[{xtype:"textfield",inputType:"hidden",name:"NOPEN",reference:"nopen",hidden:true},{xtype:"textfield",inputType:"hidden",name:"NORM",hidden:true},{defaults:{padding:0,margin:"0 2 0 0",labelAlign:"top",enterFocus:true},items:[{name:"JENIS",xtype:"referensi-combo",params:{JENIS:10,STATUS:1},flex:1,reference:"penjamin",emptyText:"[Pilih Penjamin]",allowBlank:false,typeAhead:true,listeners:{specialkey:"onFocusEnter",select:"onJenisSelected"}},{xtype:"checkboxfield",name:"COB",boxLabel:"Cob ?",reference:"cob",boxLabelAlign:"before",checked:false,bind:{hidden:"{!isBPJS}"},margin:"0 5 0 0"},{xtype:"checkboxfield",name:"KATARAK",boxLabel:"Katarak ?",reference:"katarak",boxLabelAlign:"before",checked:false,bind:{hidden:"{!isBPJS || !isMata}"}}]},{defaults:{margin:"0 2 0 0",padding:0,labelAlign:"top",enterFocus:true,listeners:{specialkey:"onFocusEnter"}},items:[{name:"NOMOR",xtype:"textfield",enforceMaxLength:true,maxLength:25,flex:1,reference:"NOMOR",emptyText:"[Nomor Kartu / Penjamin]",listeners:{blur:"onNomorBlur"},bind:{readOnly:"{readOnlyInput}"}},{xtype:"button",iconCls:"x-fa fa-envelope-o",tooltip:"Ambil Surat Rujukan",ui:"soft-black",padding:"0 10 0 10",handler:"onLoadRujukan",hidden:true,bind:{hidden:"{!loadRujukan}"}},{xtype:"button",iconCls:"x-fa fa-list",tooltip:"Daftar Surat Rujukan",ui:"soft-black",padding:"0 10 0 10",handler:"onListRujukan",hidden:true,bind:{hidden:"{!loadRujukan}"}},{xtype:"button",iconCls:"x-fa fa-paper-plane",text:"Pengajuan SEP",tooltip:"Pengajuan SEP dilakukan jika peserta tersebut sudah melebihi 3 (tiga) hari dari batas pengurusan SEP",ui:"soft-black",padding:"0 10 0 10",handler:"onPengajuan",hidden:true,bind:{hidden:"{!isBPJS}"}},{name:"KELAS",xtype:"referensi-combo",reference:"kelashak",params:{JENIS:19,STATUS:1},firstLoad:true,emptyText:"[Pilih Kelas Hak]",typeAhead:true,bind:{readOnly:"{readOnlyInput}"}}]},{xtype:"textfield",readOnly:true,empty:"Nama Pemilik Kartu",reference:"namapemilik",hidden:true,bind:{hidden:"{hideNama}"},margin:"0 2 0 0"},{items:[{name:"SEP",labelAlign:"top",enforceMaxLength:true,enterFocus:true,flex:1,reference:"sep",xtype:"textfield",bind:{readOnly:"{readOnlyInput}"},maxLength:25,margin:"0 2 0 0",padding:0,emptyText:"[Nomor Surat Elegibilitas Perserta (SEP)]",listeners:{specialkey:"onFocusEnter"}}]},{defaults:{margin:"0 2 0 0",padding:0,labelAlign:"top",enterFocus:true,listeners:{specialkey:"onFocusEnter"}},bind:{hidden:"{!isBPJS}"},items:[{xtype:"textfield",emptyText:"[Masukkan No. SKDP]",name:"NO_SURAT",reference:"suratskdp",enterFocus:true,flex:1,listeners:{specialkey:"onFocusEnter"}},{xtype:"plugins-bpjs-referensi-dpjp-combo",name:"DPJP",emptyText:"[DPJP]",reference:"dpjpskdp",forceSelection:false,flex:1}]},{xtype:"textfield",reference:"catatan",emptyText:"[Catatan/Keterangan]",name:"CATATAN",enforceMaxLength:true,maxLength:250,margin:"0 2 0 0",enterFocus:true}],onLoadRecord:function(K,D){var E=K.down("[name=NOMOR]"),G=K.down("[name=NORM]"),A=K.down("[name=SEP]"),J=K.down("[name=JENIS]"),L=K.down("[name=COB]"),I=K.down("[name=KATARAK]"),y=K.down("plugins-bpjs-referensi-dpjp-combo"),H=K.down("[name=CATATAN]"),z=K.getController(),F=D.get("REFERENSI"),M=F?(F.KAP?F.KAP:null):null,B=M?(M.REFERENSI?M.REFERENSI:null):null,C=B?(B.PENJAMIN?Ext.create("data.model.Referensi",B.PENJAMIN):null):null;if(D.get("JENIS")>1){G.setValue(M?M.NORM:"");E.setValue(M?M.NOMOR:"");A.setValue(D.get("NOMOR"));L.setValue(D.get("COB")==1);I.setValue(D.get("KATARAK")==1);H.setValue(D.get("CATATAN"));z.onNomorBlur(E)}J.load();J.doAfterLoad=function(e,f,g){if(D.get("JENIS")>1){J.select(C);z.onJenisSelected(J,C)}else{J.setValue(1)}};y.doAfterLoad=function(e,f,l){var g=l.findRecord("kode",D.get("DPJP"),0,true,false,true);if(g){y.select(g)}}},setPasien:function(f){this.getViewModel().set("pasien",f)},setPendaftaran:function(f){this.getViewModel().set("pendaftaran",f)},setRuangan:function(m){var o=this,p=o.getViewModel(),n=o.getController();p.set("ruangan",m);n.showDPJP()},onBeforeGetRecord:function(l,g){g.COB=l.down("[name=COB]").getValue()?1:0;g.KATARAK=l.down("[name=KATARAK]").getValue()?1:0},getFormData:function(){var l=this,g=l.getForm().getValues();g.COB=g.COB?1:0;g.KATARAK=g.KATARAK?1:0;return g}},0,["form-penjamin"],["component","box","container","panel","form","com-form","form-penjamin"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-penjamin":true},["widget.form-penjamin"],0,[pendaftaran.penjamin,"Form"],0));(Ext.cmd.derive("pendaftaran.penjamin.FormController",Ext.app.ViewController,{service:undefined,init:function(){var p=this,s=p.getView(),q=p.getViewModel(),o=q.getParent().get("record"),n=s.down("referensi-combo");p.integrasi=s.app.xitr("ID",1);if(p.integrasi){p.service=Ext.create(p.integrasi.NAMA_KLAS,{})}},onJenisSelected:function(f,x){var F=this,E=F.getView(),A=F.getViewModel(),z=A.get("record"),D=A.get("pasien"),G=F.getReferences(),y=G.namapemilik,B=A.get("jenisPelayanan"),g=A.get("formConfig.showLoadRujukan");y.setValue("");G.sep.setValue("");G.kelashak.select(null);G.NOMOR.setValue("");A.set("hideNama",true);if(x){if(F.integrasi){if(F.service){A.set("loadRujukan",g&&(F.integrasi.REF==x.get("ID")));A.set("isBPJS",(F.integrasi.REF==x.get("ID")));F.showDPJP()}}if(D){var C=D.get("KARTUASURANSI");if(Ext.isArray(C)){Ext.Array.each(C,function(e){if(x.get("ID")==e.JENIS){G.NOMOR.setValue(e.NOMOR);F.onNomorBlur(G.NOMOR)}})}}if(z){if(x.get("ID")>1){if(z.get("NOMOR")&&z.get("JENIS")>1){G.sep.setValue(z.get("NOMOR"))}}}}},onFocusEnter:function(l,g){this.getView().fireEvent("specialkey",l,g)},showDPJP:function(){var v=this,t=v.getView(),u=this.getReferences(),y=this.getViewModel(),s=y.get("pendaftaran"),w=y.get("ruangan"),z=u.penjamin.getSelection();if(z){if(v.integrasi){if(v.service){if(w){var x=t.getReferensi(w,"PENJAMIN_RUANGAN"),A=1;x=x?(x.length>0?x[0].RUANGAN_PENJAMIN:null):null;y.set("isMata",(x=="MAT"||w.JENIS_KUNJUNGAN==3||w.JENIS_KUNJUNGAN==2));x=1;if(v.integrasi.REF==z.get("ID")){u.dpjpskdp.params.jenisPelayanan=A;u.dpjpskdp.params.tglPelayanan=Ext.util.Format.date(s.get("TANGGAL"),"Y-m-d");u.dpjpskdp.params.kodeSpesialis=x;if(!(A==2&&x==null)){u.dpjpskdp.load()}}}}}}},onNomorBlur:function(f){var g=this,C=g.getView(),y=g.getViewModel(),z=y.get("pendaftaran"),B=g.getReferences(),x=B.namapemilik,A=B.penjamin.getSelection(),e=B.kelashak,w=f.getValue();if(w.trim()==""){return}if(A){if(g.service){if(g.integrasi.REF==A.get("ID")){g.service.scope=g;g.service.animateTarget=f;g.service.getPesertaByNoKartu({nomor:w,tglSEP:Ext.util.Format.date(z.get("TANGGAL"),"Y-m-d")},function(o,m,s){if(o){var q=m.data,p=q.kelasTanggungan?q.kelasTanggungan.kdKelas:(q.hakKelas?q.hakKelas.kode:0),u=p,u=u==2?2:(u==3?1:3),l=e.getStore(),n=l.findRecord("ID",u,0,false,true,false);x.setValue(q.nama);g.getViewModel().set("hideNama",false);e.select(n);if(q.statusPeserta){var t=q.statusPeserta;if(t.kode!=0){C.notifyMessage("Status Peserta: "+t.keterangan+"("+t.kode+")");return}}}})}}}},onLoadRujukan:function(p){var o=this,q=o.getView(),s=q.down("[name=JENIS]").getSelection(),n=q.down("[name=NOMOR]").getValue();if(n.trim()==""){q.notifyMessage("Anda belum memasukkan Nomor Kartu");return}if(o.integrasi){if(o.service){if(s){if(o.integrasi.REF==s.get("ID")){o.service.scope=o;o.service.animateTarget=p;q.setLoading(true);o.service.cariRujukanDgnNoKartuBPJS(n,function(e,g){q.setLoading(false);if(e){var f=Ext.Date.parse(g.data.rujukan.tglKunjungan,"Y-m-d");g.data.rujukan.tglKunjungan=f;q.fireEvent("rujukan",g)}})}}}}},onListRujukan:function(o){var n=this,p=n.getView(),m=p.down("[name=NOMOR]").getValue();p.openDialog("",true,"80%","70%",{xtype:"plugins-bpjs-rujukan-grid",ui:"panel-blue",title:"Daftar Surat Rujukan",iconCls:"x-fa fa-list",showCloseButton:true},function(e,f){var g=f.down("plugins-bpjs-rujukan-grid");g.on({itemdblclick:function(x,A,w,z,l,y){p.fireEvent("rujukan",{success:true,data:{rujukan:A.data}});f.close()}});g.setNomorKartu(m);g.load()})},onPengajuan:function(q){var w=this,p=w.getViewModel(),t=w.getView(),u=t.down("[name=JENIS]").getSelection(),v=t.down("[name=NOMOR]").getValue(),s=p.get("pendaftaran");if(v.trim()==""){t.notifyMessage("Anda belum memasukkan Nomor Kartu");return}if(w.integrasi){if(w.service){if(u){if(w.integrasi.REF==u.get("ID")){t.openDialog("",true,"60%","70%",{xtype:"plugins-bpjs-sep-pengajuan-form",title:"Pengajuan SEP",ui:"panel-cyan",showCloseButton:true},function(g,e){var f=e.down("plugins-bpjs-sep-pengajuan-form");f.setFormConfig({readOnly:true});f.load();f.setData({noKartu:v,tglSep:Ext.util.Format.date(s.get("TANGGAL")?s.get("TANGGAL"):t.getSysdate(),"Y-m-d")});f.on({save:function(l,m){t.notifyMessage("Pengajuan anda telah terkirim ke admin");e.close()}})},q)}}}}},destroy:function(){if(this.service){delete this.service}Ext.app.ViewController.prototype.destroy.call(this)}},0,0,0,0,["controller.form-penjamin"],0,[pendaftaran.penjamin,"FormController"],0));(Ext.cmd.derive("pendaftaran.penjamin.UbahPenjamin",com.Form,{controller:"ubah-penjamin-form",viewModel:{data:{pendaftaran:undefined,readOnly:false}},layout:{type:"hbox",align:"stretch"},defaults:{margin:"0 2 2 0"},items:[{reference:"penjamin",xtype:"form-penjamin",header:false}],buttons:[{text:"Simpan",iconCls:"x-fa fa-save",handler:"onSimpan"}],onLoadRecord:function(m,l){var n=Ext.create("data.model.Penjamin",Ext.clone(l.data));m.down("form-penjamin").loadRecord(n)},setPendaftaran:function(s){var o=this,q=this.getViewModel(),u=o.down("form-penjamin"),p=s.get("TUJUAN"),t=o.getReferensi(p,"RUANGAN");q.set("pendaftaran",s);u.setPendaftaran(s);u.setRuangan(t)},setPasien:function(f){this.down("form-penjamin").setPasien(f)}},0,["ubah-penjamin-form"],["component","box","container","panel","form","com-form","ubah-penjamin-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"ubah-penjamin-form":true},["widget.ubah-penjamin-form"],0,[pendaftaran.penjamin,"UbahPenjamin"],0));(Ext.cmd.derive("pendaftaran.penjamin.UbahPenjaminController",Ext.app.ViewController,{init:function(){var g=this,l=g.getView();g.integrasi=l.app.xitr("ID",1);if(g.integrasi){g.service=Ext.create(g.integrasi.NAMA_KLAS,{})}},onSimpan:function(J){var K=this,L=K.getView(),ac=K.getReferences().penjamin,ad=ac.getRecord(),V=K.getViewModel().get("pendaftaran").data,U=V.RUJUKAN?V.RUJUKAN:null,S=U?(U.REFERENSI?U.REFERENSI:null):null,P=S?(S.PPK?S.PPK:null):null,Y=P?P.BPJS:"",Q=V.TUJUAN?V.TUJUAN:null,T=Q?(Q.REFERENSI?Q.REFERENSI:null):null,aa=T?(T.RUANGAN?T.RUANGAN:null):null,I=V.DIAGNOSAMASUK?V.DIAGNOSAMASUK:null,X=aa?(aa.JENIS_KUNJUNGAN==3?1:2):2,Z=K.getViewModel().get("record"),ae=ad.get("NOMOR"),O=ad.get("COB"),t=ad.get("JENIS")>1&&ad.get("JENIS")!=Z.get("JENIS"),W=V.REFERENSI?V.REFERENSI:null,R=W?(W.PASIEN?W.PASIEN:null):null,N=R.KONTAK?R.KONTAK:null,M=null,ab=W?(W.KECELAKAAN?W.KECELAKAAN:null):null;ab=ab?(ab.STATUS==0?null:ab):null;if(Ext.isArray(N)){Ext.Array.each(N,function(e){M=e.NOMOR})}L.setLoading(true);Ext.Msg.show({title:"Perubahan Data Penjamin",message:"Anda yakin ingin mengubah data penjamin ?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:function(p){if(p==="yes"){var f=true,g=Ext.create("data.model.Penjamin",{NOPEN:V.NOMOR,JENIS:-1});ad.set("NORM",V.NORM);g.set("JENIS",ad.get("JENIS"));g.set("KELAS",ad.get("KELAS"));g.set("NORM",ad.get("NORM"));g.set("NOMOR",ad.get("NOMOR"));g.set("KATARAK",ad.get("KATARAK"));g.set("NO_SURAT",ad.get("NO_SURAT"));g.set("DPJP",ad.get("DPJP"));g.set("CATATAN",ad.get("CATATAN"));if(K.integrasi){if(K.service&&K.integrasi.REF==ad.get("JENIS")){console.log("proses grouping...");if(ad.get("SEP")==null||ad.get("SEP")==""){console.log("get data grouping...");var o=Ext.util.Format.date(V.TANGGAL,"Y-m-d H:i:s"),l=Ext.util.Format.date(V.TANGGAL,"ymdH")+V.NORM,n=U?(U.NOMOR==""?l:U.NOMOR):l,m=U?(U.TANGGAL?Ext.util.Format.date(U.TANGGAL,"Y-m-d H:i:s"):o):o,q=U?(U.NOMOR==""?L.app.ppk.REFERENSI.PPK.BPJS:(Y==""?U.NOMOR.substring(0,8):Y)):L.app.ppk.REFERENSI.PPK.BPJS,e=P?(U&&X!=1?(U.NOMOR==""?(L.app.ppk.REFERENSI.PPK.JENIS==1?2:1):(P.JENIS==1?2:1)):(L.app.ppk.REFERENSI.PPK.JENIS==1?2:1)):(L.app.ppk.REFERENSI.PPK.JENIS==1?2:1);icd=I?I.ICD:null,idtjuan=Q?Q.ID:null,tjnRef=Q?(Q.REFERENSI?Q.REFERENSI:null):null,ruangan=tjnRef?(tjnRef.RUANGAN?tjnRef.RUANGAN:null):null,poliEks=ruangan?(ruangan.JENIS_KUNJUNGAN==1?ruangan.REF_ID:0):0,pjmnRuangan=K.getPenjaminRuangan(Q,ad.get("JENIS")),sepData={noKartu:ae,tglSep:o,asalRujukan:e,tglRujukan:m,noRujukan:n,ppkRujukan:q,jnsPelayanan:X,catatan:ad.get("CATATAN"),diagAwal:icd,poliTujuan:X==2?(pjmnRuangan?pjmnRuangan:""):"",eksekutif:poliEks,cob:O,katarak:ad.get("KATARAK"),lakaLantas:ab?1:2,lokasiLaka:ab?ab.LOKASI:"",penjamin:ab?ab.PENJAMIN:0,tglKejadian:ab?ab.TANGGAL_KEJADIAN:"",suplesi:ab?ab.SUPLESI:0,noSuplesi:ab?ab.NO_SEP_SUPLESI:"",propinsi:ab?ab.KODE_PROPINSI:"",kabupaten:ab?ab.KODE_KABUPATEN:"",kecamatan:ab?ab.KODE_KECAMATAN:"",noSuratSKDP:ad.get("NO_SURAT"),dpjpSKDP:ad.get("DPJP"),user:L.app.usrNm,norm:V.NORM,noTelp:M};K._generate=true;K.service.buatSEP(sepData,function(s,w,u){if(s){var v=w.data,x=Ext.clone(K.service);v=v?v.kunjungan:null;v=v?v.noSEP:null;g.set("SEP",v);g.set("COB",O);if(x){if(x.enabledShowError){x.enabledShowError(false);x.storeNoTransaksiDiKunjungan(v,V.NOMOR)}}g.save({callback:function(A,y,z){if(z){if(K.service&&t){if(K.integrasi.REF==Z.get("JENIS")){K.service.batalkanSEP(Z.get("NOMOR"))}}L.notifyMessage("Perubahan data penjamin berhasil");L.fireEvent("simpan",A)}L.setLoading(false)}})}else{g.set("SEP",ad.get("SEP"));g.set("COB",O);g.save({callback:function(A,y,z){if(z){L.notifyMessage("Perubahan data penjamin berhasil");L.fireEvent("simpan",A)}L.setLoading(false)}})}})}else{f=false}}else{f=false}}else{f=false}if(!f){g.set("SEP",ad.get("SEP"));g.set("COB",O);g.save({callback:function(s,u,v){if(v){L.notifyMessage("Perubahan data penjamin berhasil");L.fireEvent("simpan",s)}L.setLoading(false)}})}}else{L.setLoading(false)}}})},privates:{getPenjaminRuangan:function(n,s){if(n){var q=n.REFERENSI,p=q?(q.RUANGAN.REFERENSI.PENJAMIN_RUANGAN?q.RUANGAN.REFERENSI.PENJAMIN_RUANGAN:[]):[],o=false;Ext.Array.each(p,function(e){if(e.PENJAMIN==s){o=e.RUANGAN_PENJAMIN}})}return o}},onReset:function(){var f=this;f.init()},onBatal:function(f){this.getView().fireEvent("batal",f)}},0,0,0,0,["controller.ubah-penjamin-form"],0,[pendaftaran.penjamin,"UbahPenjaminController"],0));(Ext.cmd.derive("pendaftaran.reservasi.Form",com.Form,{controller:"reservasi-form",viewModel:{data:{RKT:undefined,formConfig:{readOnly:false,reservasi:false,batal:true}}},layout:{type:"vbox",align:"stretch"},title:"Reservasi",defaultType:"fieldcontainer",defaults:{layout:{type:"hbox"}},bodyPadding:5,initComponent:function(){var f=this;f.items=[{items:[{xtype:"component",style:"font-size: 17px; font-weight: bold;",height:25,bind:{html:"Ruangan: {RKT.RUANGAN} / {RKT.KAMAR} / {RKT.TEMPAT_TIDUR} - {RKT.KELAS}"}}]},{items:[{xtype:"textfield",name:"NOMOR",emptyText:"[Dibuat oleh Sistem]",readOnly:true,labelAlign:"top",fieldLabel:"NOMOR",flex:1,margin:"0 5 0 0"},{xtype:"datefield",name:"TANGGAL",readOnly:true,reference:"tanggal",labelAlign:"top",fieldLabel:"TANGGAL"}]},{items:[{xtype:"textfield",name:"ATAS_NAMA",emptyText:"[Atas Nama]",labelAlign:"top",fieldLabel:"Atas Nama",flex:1,margin:"0 5 0 0",bind:{readOnly:"{formConfig.readOnly}"}},{xtype:"textfield",name:"KONTAK_INFO",emptyText:"Kontak Info",flex:1,labelAlign:"top",fieldLabel:"Kontak Info",bind:{readOnly:"{formConfig.readOnly}"}}]}];f.buttons=[{text:"Reservasikan",handler:"onReservasikan",bind:{hidden:"{!formConfig.reservasi}"}},{text:"Batalkan",handler:"onBatalkan",bind:{hidden:"{!formConfig.batal}"}}];f.callParent()},loadRecord:function(m,n){var l=this.getForm().loadRecord(m);if(n){this.getViewModel().set("RKT",n)}this.down("[name=ATAS_NAMA]").focus(false,100);return l},setFormConfig:function(m){var l=this,n=l.getViewModel();_config=n.get("formConfig");m=Ext.apply(_config,m);n.set("formConfig",m);n.notify()}},0,["reservasi-form"],["component","box","container","panel","form","com-form","reservasi-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"reservasi-form":true},["widget.reservasi-form"],0,[pendaftaran.reservasi,"Form"],0));(Ext.cmd.derive("pendaftaran.reservasi.FormController",Ext.app.ViewController,{onReservasikan:function(e){var o=this,q=o.getView(),p=q.getForm().getRecord(),s=q.getForm().getValues();if(q.getForm().isValid()){p.set(s);p.animateTarget=e;p.scope=o;p.showError=true;p.save({callback:function(g,f,l){if(l){q.loadRecord(g,o.getViewModel().get("RKT"));o.getViewModel().set("formConfig",{readOnly:true,reservasi:false,batal:true})}q.fireEvent("reserved",g,l)}})}},onBatalkan:function(m){var n=this,o=n.getView(),p=o.getForm().getRecord();p.showError=true;p.animateTarget=m;p.scope=n;Ext.Msg.show({title:"Pembatalan Reservasi",message:"Anda yakin ingin membatalkan reservasi dengan Nomor "+p.get("NOMOR")+" ?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:m,fn:function(e){if(e==="yes"){p.set("STATUS",0);p.save({callback:function(g,f,l){if(l){Ext.toast({html:"Pembatalan reservasi dengan Nomor "+p.get("NOMOR")+" berhasil",headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"});o.fireEvent("batalreservasi")}else{p.set("STATUS",1)}}})}else{p.set("STATUS",1)}}})}},0,0,0,0,["controller.reservasi-form"],0,[pendaftaran.reservasi,"FormController"],0));(Ext.cmd.derive("pendaftaran.reservasi.Selection",com.Form,{controller:"reservasi-selection",viewModel:{data:{reservedBy:"",ruangan:undefined,pasien:undefined,selectionConfig:{readOnly:false,reservasi:true}}},layout:{type:"hbox",align:"stretch"},defaults:{margin:"0 2 0 0",padding:0,labelAlign:"top",enterFocus:true},items:[{xtype:"textfield",flex:1,emptyText:"Masukkan Kode Reservasi",name:"RESERVASI",enforceMaxLength:true,maxLength:10,allowBlank:false,reference:"reservasitext",bind:{readOnly:"{selectionConfig.readOnly}"},listeners:{blur:"onReservasiBlur",change:"onReservasiChange",specialkey:"onFocusEnter"}},{xtype:"component",style:"font-weight: bold;",bind:"{reservedBy}"},{xtype:"button",text:"Reservasi",handler:"onReservasi",bind:{hidden:"{!selectionConfig.reservasi}"}}],setNomor:function(f){this.down("[reference=reservasitext]").setValue(f)},setRuangan:function(f){this.getViewModel().set("ruangan",f)},setPasien:function(f){this.getViewModel().set("pasien",f)},clear:function(){this.getViewModel().set("ruangan",undefined);this.getViewModel().set("reservedBy","");this.down("[reference=reservasitext]").setValue("")},setSelectionConfig:function(m){var l=this,n=l.getViewModel();_config=n.get("selectionConfig");m=Ext.apply(_config,m);n.set("selectionConfig",m);n.notify()}},0,["reservasi-selection"],["component","box","container","panel","form","com-form","reservasi-selection"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"reservasi-selection":true},["widget.reservasi-selection"],0,[pendaftaran.reservasi,"Selection"],0));(Ext.cmd.derive("pendaftaran.reservasi.SelectionController",Ext.app.ViewController,{onFocusEnter:function(l,g){this.getView().fireEvent("specialkey",l,g)},onReservasiBlur:function(f){if(f.getValue().trim()==""){return}this.cekNomorReservasi(f)},onReservasiChange:function(){this.getViewModel().set("reservedBy","");this.getView().fireEvent("clear")},onReservasi:function(s){var w=this,p=w.getViewModel(),t=w.getView(),q=w.getReferences(),v=p.get("ruangan"),u=p.get("pasien");v=v?v.get("ID"):"";t.openDialog("",true,0,0,{xtype:"workspace-ruangkamartidur",ruangan:v,formReservasi:false,ui:"panel-cyan",showCloseButton:true},function(g,e){var f=e.down("workspace-ruangkamartidur");f.setViewConfig({kosong:true,terpesan:true,semua:false,terisi:false});f.setPasien(u);f.on({reserved:function(l){q.reservasitext.setValue(l.get("NOMOR"));e.close()}})})},cekNomorReservasi:function(s){var p=this,q=p.getView(),o=p.getViewModel(),n=o.get("ruangan"),s=Ext.isString(s)?s:s.getValue();data.model.Reservasi.load(s,{callback:function(y,g,x){var w=false;if(!x){w="Nomor Reservasi tidak valid!"}else{if(y.get("STATUS")==0){w="Nomor Reservasi telah di batalkan"}if(y.get("STATUS")==2){w="Nomor Reservasi sudah digunakan"}}if(w){q.notifyMessage(w);q.clear()}else{var e=y.get("ATAS_NAMA"),f=y.get("REFERENSI"),m=f?Ext.create("data.model.Ruangan",f.RUANG_KAMAR_TIDUR.REFERENSI.RUANG_KAMAR.REFERENSI.RUANGAN):null,l=f?Ext.create("data.model.Referensi",f.RUANG_KAMAR_TIDUR.REFERENSI.RUANG_KAMAR.REFERENSI.KELAS):null;if(m){if(m.get("ID")!==n.get("ID")){q.notifyMessage("Nomor Reservasi yang dimasukkan tidak sesuai dengan ruangan yang dipilih...");q.clear();return}q.fireEvent("ruanganreserved",m,l)}o.set("reservedBy",e?'<div style="margin: 0px; margin-right: 10px; margin-left: 5px; padding: 0; padding-top: 7px;">Di reservasi oleh: '+e+"</div>":"")}}})}},0,0,0,0,["controller.reservasi-selection"],0,[pendaftaran.reservasi,"SelectionController"],0));(Ext.cmd.derive("pendaftaran.rujukan.Form",com.Form,{controller:"form-rujukan",model:"data.model.SuratRujukan",viewModel:{data:{formConfig:{simpan:false,showPPK:false},nopen:""},stores:{store:{type:"suratrujukan-store"},ppkstore:{type:"ppk-store"},diagnosamasukstore:{type:"diagnosa-masuk-store"}}},layout:{type:"vbox",align:"stretch"},title:"Rujukan dari:",header:{iconCls:"x-fa fa-envelope-o",padding:"5 10 5 10"},bodyPadding:5,defaultType:"fieldcontainer",defaults:{margin:"0 0 2 0 ",layout:{type:"hbox",align:"stretch"}},items:[{xtype:"textfield",inputType:"hidden",name:"NORM",hidden:true},{defaults:{margin:"0 2 0 0",labelAlign:"top",enterFocus:true,listeners:{specialkey:"onFocusEnter"}},items:[{name:"PPK",xtype:"master-ppk-combo",flex:1,padding:0,bind:{readOnly:"{formConfig.viewOnly}"}},{xtype:"button",iconCls:"x-fa fa-arrow-left",text:"Ambil Sebelumnya",tooltip:"Ambil Surat Rujukan Sebelumnya",ui:"soft-cyan",handler:"onLoad",hidden:true,bind:{hidden:"{formConfig.viewOnly}"}},{xtype:"button",iconCls:"x-fa fa-file",tooltip:"Surat Rujukan Baru",ui:"soft-black",handler:"onBaru",hidden:true,bind:{hidden:"{formConfig.viewOnly}"}},{xtype:"button",iconCls:"x-fa fa-hospital-o",tooltip:"PPK",ui:"soft-green",handler:"onPPK",hidden:true,bind:{hidden:"{formConfig.viewOnly || !formConfig.showPPK}"}}]},{defaults:{margin:"0 2 0 0",padding:0,labelAlign:"top",enterFocus:true,listeners:{specialkey:"onFocusEnter"},bind:{readOnly:"{formConfig.viewOnly}"}},items:[{name:"NOMOR",xtype:"textfield",enforceMaxLength:true,maxLength:35,flex:1,emptyText:"[Nomor]"},{name:"TANGGAL",xtype:"datefield",format:"d/m/Y",emptyText:"[Format tgl/bln/thn]"}]},{defaults:{margin:"0 2 0 0",padding:0,labelAlign:"top",enforceMaxLength:true,enterFocus:true,flex:1,listeners:{specialkey:"onFocusEnter"},bind:{readOnly:"{formConfig.viewOnly}"}},items:[{name:"DOKTER",xtype:"textfield",maxLength:75,emptyText:"[Nama Dokter]"},{name:"BAGIAN_DOKTER",xtype:"textfield",maxLength:100,emptyText:"[Nama S M F]"}]},{defaultType:"combobox",defaults:{margin:"0 2 0 0",padding:0,labelAlign:"top",enforceMaxLength:true,enterFocus:true,flex:1,bind:{readOnly:"{formConfig.viewOnly}"}},items:[{name:"DIAGNOSA_MASUK",emptyText:"[Diagnosa Masuk]",maxLength:250,queryMode:"remote",bind:{store:"{diagnosamasukstore}"},hideTrigger:true,typeAhead:true,minChars:2,queryParam:"DIAGNOSA",displayField:"DIAGNOSA",valueField:"ID",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="x-boundlist-item"><strong>{DIAGNOSA}</strong> - {ICD}</div>',"</tpl>"),displayTpl:Ext.create("Ext.XTemplate",'<tpl for=".">',"{DIAGNOSA} - {ICD}","</tpl>"),listeners:{select:"onSelectDiagnosaMasuk",specialkey:"onFocusEnter"}},{xtype:"rekammedis-icd-combo",emptyText:"[Masukkan / Pilih Kode ICD]",name:"ICD",reference:"icd",listeners:{beforequery:"onBeforeQuery",specialkey:"onFocusEnter"}}]}],dockedItems:[{xtype:"toolbar",dock:"bottom",hidden:true,bind:{hidden:"{!formConfig.simpan}"},items:["->",{xtype:"button",iconCls:"x-fa fa-save",ui:"soft-blue",text:"Simpan",handler:"onSimpan"}]}],onLoadRecord:function(u,y){var z=u.getViewModel(),x=u.down("[name=PPK]"),v=u.down("[name=DIAGNOSA_MASUK]"),w=u.down("[name=ICD]"),A=y.get("REFERENSI")?y.get("REFERENSI"):null,E=A?(A.PPK?Ext.create("data.model.Ppk",A.PPK):null):null,D=A?(A.DIAGNOSA_MASUK?Ext.create("data.model.DiagnosaMasuk",A.DIAGNOSA_MASUK):null):null,B=D?(D.get("REFERENSI")?D.get("REFERENSI"):null):null,C=B?(B.DIAGNOSA?Ext.create("data.model.Diagnosa",B.DIAGNOSA):null):null;z.set("nopen",y.get("NOPEN"));delete y.data.NOPEN;u.setFormConfig({showPPK:u.app.xpriv("1901")});x.select(E);v.select(D);w.select(C)},onBeforeGetRecord:function(p,u){var t=p.getViewModel(),o=p.down("[name=TANGGAL]").getValue(),q=p.getSysdate(),s=Ext.Date.clone(o);u.NOPEN=t.get("nopen");if(u.DIAGNOSA_MASUK&&u.ICD){u.REFERENSI={DIAGNOSA_MASUK:{DIAGNOSA:u.DIAGNOSA_MASUK,ICD:u.ICD}};delete u.DIAGNOSA_MASUK;delete u.ICD}s.setHours(q.getHours());s.setMinutes(q.getMinutes());s.setSeconds(q.getSeconds());u.TANGGAL=s},getFormData:function(){var m=this.getForm().getValues(),n=this.down("[name=TANGGAL]").getValue(),l=this.down("[name=PPK]").getSelection();m.TANGGAL=n;if(l){m.PPKRujukan=l.get("BPJS");m.asalRujukan=l.get("JENIS")==1?2:1}return m}},0,["form-rujukan"],["component","box","container","panel","form","com-form","form-rujukan"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-rujukan":true},["widget.form-rujukan"],0,[pendaftaran.rujukan,"Form"],0));(Ext.cmd.derive("pendaftaran.rujukan.FormController",Ext.app.ViewController,{onFocusEnter:function(l,g){this.getView().fireEvent("specialkey",l,g)},onSelectDiagnosaMasuk:function(p,m){var o=this.getReferences().icd,n=m.data.REFERENSI;n=n?m.data.REFERENSI.DIAGNOSA:null;if(n){o.select(Ext.create("data.model.Diagnosa",n))}},onBeforeQuery:function(f){f.combo.getStore().removeAll()},onBaru:function(q){var o=this,p=o.getViewModel(),n=p.get("record"),s=o.getView();s.createRecord({NORM:n.get("NORM"),NOPEN:p.get("nopen"),STATUS:1});s.focus("PPK",false,100)},onLoad:function(q){var o=this,p=o.getViewModel(),u=p.get("record"),s=p.get("store"),t=o.getView();s.setQueryParams({NORM:u.get("NORM"),STATUS:1,limit:1});s.load(function(f,g,e){if(e){if(f.length>0){t.loadRecord(f[0])}}})},onPPK:function(q){var p=this,s=p.getView(),o=s.down("[name=PPK]"),n=o.getSelection();s.openDialog("",true,"80%","70%",{xtype:"master-ppk-grid",ui:"panel-blue",title:"Pemberi Pelayanan Kesehatan (PPK)",iconCls:"x-fa fa-hospital-o",showCloseButton:true},function(g,e){var f=e.down("master-ppk-grid");f.on({itemdblclick:function(x,A,m,z,l,y){o.select(A);e.close()}});f.setGridConfig({paging:true});if(n){f.cari(n.get("NAMA"))}f.load()})},onSimpan:function(m){var l=this,n=l.getView();n.save(m)}},0,0,0,0,["controller.form-rujukan"],0,[pendaftaran.rujukan,"FormController"],0));(Ext.cmd.derive("pendaftaran.rujukan.keluar.Form",com.Form,{controller:"pendaftaran-rujukan-keluar-form",model:"pendaftaran.rujukan.keluar.Model",viewModel:{data:{kjgn:undefined,formConfig:{showBatal:false}},stores:{anamnesistore:{type:"rekammedis-anamnesis-umum-store"},pemeriksaanfisikstore:{type:"rekammedis-pemeriksaan-fisik-store"},alergistore:{type:"rekammedis-anamnesis-riwayat-alergi-store"},tandavitalstore:{type:"rekammedis-pemeriksaan-umum-tandavital-store"}}},title:"Rujukan Keluar",ui:"panel-green",bodyPadding:15,layout:{type:"vbox",align:"stretch"},defaults:{margin:"0 0 1 0"},items:[{xtype:"fieldcontainer",fieldLabel:"Tanggal Keluar",layout:{type:"hbox"},items:[{name:"TANGGAL",xtype:"datefield",emptyText:"[Pilih Tanggal Keluar]",format:"d/m/Y",allowBlank:false,bind:{readOnly:"{formConfig.viewOnly}",minValue:"{formConfig.minDate}",maxValue:"{formConfig.maxDate}"}},{name:"WAKTU",xtype:"timefield",emptyText:"[Jam:Mnt:Dtk]",bind:{readOnly:"{formConfig.viewOnly}"},format:"H:i:s",allowBlank:false,hideTrigger:true,margin:"0 15 0 0"},{xtype:"referensi-combo",params:{JENIS:86},firstLoad:true,labelWidth:90,fieldLabel:"Jenis Rujukan",allowBlank:false,flex:1,name:"JENIS",bind:{readOnly:"{formConfig.viewOnly}"},listeners:{change:"onChangeJenis"}}]},{xtype:"fieldcontainer",fieldLabel:"Tujuan PPK",layout:{type:"hbox"},items:[{name:"TUJUAN",xtype:"master-ppk-combo",allowBlank:false,emptyText:"[Masukkan Tujuan PPK]",bind:{readOnly:"{formConfig.viewOnly}"},flex:1,margin:"0 15 0 0"},{name:"TUJUAN_RUANGAN",fieldLabel:"Tujuan Ruangan/Poli",xtype:"referensi-combo",labelWidth:160,allowBlank:false,params:{STATUS:1,JENIS:70},firstLoad:true,flex:1,emptyText:"[Masukkan Tujuan Ruangan / Poli]",bind:{readOnly:"{formConfig.viewOnly}"}}]},{xtype:"fieldcontainer",fieldLabel:"Diagnosa",layout:{type:"hbox"},items:[{xtype:"rekammedis-icd-combo",emptyText:"[Masukkan Kode ICD 10]",allowBlank:false,name:"DIAGNOSA",bind:{readOnly:"{formConfig.viewOnly}"},margin:"0 15 0 0",flex:1},{xtype:"dokter-combo",fieldLabel:"Dokter",name:"DOKTER",flex:1,params:{STATUS:1},bind:{readOnly:"{formConfig.viewOnly}"}}]},{xtype:"textarea",name:"KETERANGAN",fieldLabel:"Keterangan",bind:{readOnly:"{formConfig.viewOnly}"}}],buttons:[{iconCls:"x-fa fa-save",text:"Simpan",handler:"onSimpan",bind:{hidden:"{formConfig.viewOnly}"}},{iconCls:"x-fa fa-times",text:"Batal Rujukan",ui:"soft-red",handler:"onBatal",bind:{hidden:"{!formConfig.showBatal}"}},{iconCls:"x-fa fa-print",ui:"soft-green",text:"Cetak Surat",handler:"onCetak"}],onLoadRecord:function(M,S){var F=M.getViewModel(),Y=M.down("[name=WAKTU]"),K=M.down("master-ppk-combo"),I=M.down("dokter-combo"),P=M.down("rekammedis-icd-combo"),O=M.getReferensi(S.data,"TUJUAN"),V=O?Ext.create("data.model.Ppk",O):null,G=M.getReferensi(S.data,"DOKTER"),X=G?Ext.create("data.model.Dokter",G):null,H=M.getReferensi(S.data,"DIAGNOSA"),W=H?Ext.create("data.model.Diagnosa",H):null,L=F.get("anamnesistore"),N=F.get("pemeriksaanfisikstore"),R=F.get("alergistore"),Q=F.get("tandavitalstore");if(Y){Y.setValue(S.get("TANGGAL"))}var T=M.getReferensi(S.data,"KUNJUNGAN"),U=M.getReferensi(T,"PENDAFTARAN"),E={NORM:U?U.NORM:0,HISTORY:1,start:0,limit:1,STATUS:1,sort:Ext.JSON.encode({property:"TANGGAL",direction:"DESC"})},J=T.STATUS!=1;F.set("kjgn",T);M.setFormConfig({viewOnly:J,showBatal:!J&&S.get("NOMOR").length<=10,minDate:T.MASUK,maxDate:M.getSysdate()});K.select(V);P.select(W);I.select(X);I.params.RUANGAN=T.RUANGAN;I.load();L.setQueryParams(E);N.setQueryParams(E);R.setQueryParams(E);Q.setQueryParams(E);L.load();N.load();R.load();Q.load()},onBeforeGetRecord:function(p,n){var o=p.down("[name=TANGGAL]").getValue(),q=p.down("[name=WAKTU]").getValue(),s=Ext.Date.clone(o);s.setHours(q.getHours());s.setMinutes(q.getMinutes());s.setSeconds(q.getSeconds());n.TANGGAL=s}},0,["pendaftaran-rujukan-keluar-form"],["component","box","container","panel","form","com-form","pendaftaran-rujukan-keluar-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"pendaftaran-rujukan-keluar-form":true},["widget.pendaftaran-rujukan-keluar-form"],0,[pendaftaran.rujukan.keluar,"Form"],0));(Ext.cmd.derive("pendaftaran.rujukan.keluar.FormController",Ext.app.ViewController,{kemkes:{integrasi:undefined,service:undefined},bpjs:{integrasi:undefined,service:undefined},init:function(){var g=this,l=g.getView();g.kemkes.integrasi=l.app.xitr("ID",3);if(g.kemkes.integrasi){g.kemkes.service=Ext.create(g.kemkes.integrasi.NAMA_KLAS,{})}g.bpjs.integrasi=l.app.xitr("ID",1);if(g.bpjs.integrasi){g.bpjs.service=Ext.create(g.bpjs.integrasi.NAMA_KLAS,{})}},onSimpan:function(N){var M=this,Y=M.getViewModel(),R=M.getView(),ac=R.down("[name=TUJUAN]"),V=R.down("[name=TUJUAN_RUANGAN]"),T=ac.getSelection(),aj=V.getSelection(),ae=Y.get("kjgn"),ag=R.getReferensi(ae,"PENDAFTARAN"),ab=R.getReferensi(ag,"PASIEN"),ai=R.getReferensi(ab,"TEMPATLAHIR"),P=ab.KONTAK?ab.KONTAK:null,W="",L=ab.KARTUIDENTITAS?ab.KARTUIDENTITAS:null,ad="",ak=ag?ag.PENJAMIN:null,Z=R.getReferensi(ak,"KAP"),S=Y.get("anamnesistore"),Q=Y.get("pemeriksaanfisikstore"),X=Y.get("alergistore"),U=Y.get("tandavitalstore"),t=S.getCount()>0?S.getAt(0):null,O=Q.getCount()>0?Q.getAt(0):null,aa=X.getCount()>0?X.getAt(0):null,ah=U.getCount()>0?U.getAt(0):null;if(Ext.isArray(P)){Ext.Array.each(P,function(e){W=e.NOMOR})}if(Ext.isArray(L)){Ext.Array.each(L,function(e){if(e.JENIS==1){ad=e.NOMOR}})}if(T){var af=false;if(M.bpjs.service&&T.get("BPJS")==""){af=true}if(M.kemkes.service&&T.get("KODE")==""){af=true}if(af){R.notifyMessage("Kode rumah sakit tidak lengkap<br/>Silahkan hub. admin untuk melengkapi data rumah sakit yg akan dirujuk");return}}if(M.bpjs.service){if(ak){if(M.bpjs.integrasi.REF==ak.JENIS){if(ak.NOMOR==null||ak.NOMOR==""){R.notifyMessage("Nomor SEP tdk boleh kosong<br/>Silahkan hub. bagian pendaftaran / admission");return}}}}R.save(N,{},function(o,s,e){if(e){var m=o.get("REFERENSI")||{},f=R.getReferensi(o.data,"TUJUAN_RUANGAN"),q=R.getReferensi(o.data,"DOKTER"),g=R.getReferensi(q,"KARTU_INDETITAS"),l="";if(Ext.isArray(g)){Ext.Array.each(g,function(u){if(u.JENIS==1){l=u.NOMOR}})}if(M.kemkes.service){var n=M.kemkes.service.getSisrute(),p={PASIEN:{NORM:ab.NORM,NIK:ad,NO_KARTU_JKN:Z?(Z.JENIS==2?Z.NOMOR:""):"",NAMA:ab.NAMA,JENIS_KELAMIN:ab.JENIS_KELAMIN,TANGGAL_LAHIR:ab.TANGGAL_LAHIR,TEMPAT_LAHIR:ai?ai.DESKRIPSI:ab.TEMPAT_LAHIR,ALAMAT:ab.ALAMAT,KONTAK:W},RUJUKAN:{REF:o.get("NOMOR"),JENIS_RUJUKAN:f.REF_ID=="IGD"||f.REF_ID=="UGD"?2:(o.get("JENIS")==1?3:1),TANGGAL:Ext.util.Format.date(o.get("TANGGAL"),"Y-m-d H:i:s"),FASKES_TUJUAN:T?T.get("KODE"):"",ALASAN:"1",ALASAN_LAINNYA:o.get("KETERANGAN"),DIAGNOSA:o.get("DIAGNOSA"),DOKTER:{NIK:l,NAMA:q?q.NAMA:""},PETUGAS:{NIK:R.app.usrNik,NAMA:R.app.usrNm}},KONDISI_UMUM:{ANAMNESIS_DAN_PEMERIKSAAN_FISIK:(t?t.get("DESKRIPSI"):"-")+"#"+(O?O.get("DESKRIPSI"):"-"),KESADARAN:1,TEKANAN_DARAH:ah?Number(ah.get("SISTOLIK"))+"/"+Number(ah.get("DISTOLIK")):"",FREKUENSI_NADI:ah?Number(ah.get("FREKUENSI_NADI")):"",SUHU:ah?Number(ah.get("SUHU")):"",PERNAPASAN:ah?Number(ah.get("FREKUENSI_NAFAS")):"",KEADAAN_UMUM:ah?ah.get("KEADAAN_UMUM"):"",NYERI:0,ALERGI:aa?aa.get("DESKRIPSI"):""},PENUNJANG:{LABORATORIUM:"",RADIOLOGI:"",TERAPI_ATAU_TINDAKAN:""}};n.simpanRujukan(p,function(u,w,v){if(u){R.notifyMessage("Rujukan berhasil terkirim ke SISRUTE")}})}if(M.bpjs.service){if(ak){if(M.bpjs.integrasi.REF==ak.JENIS){var p={noSep:ak.NOMOR,tglRujukan:Ext.util.Format.date(o.get("TANGGAL"),"Y-m-d H:i:s"),ppkDirujuk:T?T.get("BPJS"):"",jnsPelayanan:"2",catatan:o.get("KETERANGAN"),diagRujukan:o.get("DIAGNOSA"),tipeRujukan:o.get("JENIS"),poliRujukan:f.REF_ID,user:R.app.usrNm};M.bpjs.service.simpanRujukan(p,function(u,w,v){if(u){R.notifyMessage("Rujukan berhasil terkirim ke BPJS")}})}}}m.KUNJUNGAN=ae;o.set("REFERENSI",m);R.loadRecord(o)}})},onBatal:function(t){var q=this,s=q.getViewModel(),w=q.getView(),x=w.getRecord(),v=s.get("kjgn"),u=w.getReferensi(v,"PENDAFTARAN"),y=u?u.PENJAMIN:null;if(x){w.showMessageBox({title:"Batal Rujukan",message:"Anda yakin ingin membatalkan rujukan ini ?",ui:"window-warning",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:t,fn:function(e){if(e==="yes"){x.set("STATUS",0);w.save(t,{success:"Berhasil membatalkan rujukan",failed:"Gagal membatalkan rujukan"},function(f,m,g){if(g){if(q.kemkes.service){var n=q.kemkes.service.getSisrute(),l={PETUGAS:{NIK:w.app.usrNik,NAMA:w.app.usrNm}};n.batalRujukan(f.get("NOMOR"),l,function(p,o,A){if(p){w.notifyMessage("Batal Rujukan SISRUTE berhasil")}})}if(q.bpjs.service){if(y){if(q.bpjs.integrasi.REF==y.JENIS){var l={noSep:y.NOMOR,status:0,user:w.app.usrNm};q.bpjs.service.simpanRujukan(l,function(p,o,A){if(p){w.notifyMessage("Hapus Rujukan BPJS berhasil")}})}}}w.createRecord({NOPEN:f.get("NOPEN"),KUNJUNGAN:f.get("KUNJUNGAN"),STATUS:1,TANGGAL:w.getSysdate(),REFERENSI:{KUNJUNGAN:v}});w.focus("TUJUAN",false,100)}})}}})}},onChangeJenis:function(C,y){var w=this,u=w.getView(),z=w.getViewModel();kjgn=z.get("kjgn");if(kjgn==null){return}var t=u.getReferensi(kjgn,"PENDAFTARAN"),A=u.getReferensi(kjgn,"RUANGAN"),B=t.PENJAMIN?t.PENJAMIN:null;jns=C.getSelection(),ppkCb=u.down("master-ppk-combo"),ppkSel=ppkCb.getSelection();if(w.bpjs.service){if(jns){ppkCb.setReadOnly(false);if(jns.get("ID")==2){var x=B?u.getReferensi(B,"KAP"):null,v=x?Ext.create("data.model.Ppk",u.getReferensi(x,"PPK")):null;if(B){if(w.bpjs.integrasi.REF==B.JENIS){if(A.JENIS_KUNJUNGAN==1){ppkCb.select(v);ppkCb.setReadOnly(true);w.ppkBefore=ppkSel}}}}else{ppkCb.select(w.ppkBefore)}}}},onCetak:function(s){var y=this,w=y.getView(),v=w.getRecord(),t="Cetak Surat Rujukan Keluar",u="Word",q="docx",x=true;if(v){w.showMessageBox({title:t,message:"Tekan tombol Yes/Ya utk cetak langsung<br/>Tekan tombol No/Tidak untuk Preview",ui:"window-green",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,defaultButton:"yes",animateTarget:s,fn:function(e){if(e!="yes"){u="Pdf";q="pdf";x=false}w.cetak({NAME:"pendaftaran.CetakRujukanKeluar",PARAMETER:{PNOPEN:v.get("NOPEN"),CETAK_HEADER:1},TYPE:u,EXT:q,REQUEST_FOR_PRINT:x},function(f){w.printPreview(t,f)})}})}}},0,0,0,0,["controller.pendaftaran-rujukan-keluar-form"],0,[pendaftaran.rujukan.keluar,"FormController"],0));(Ext.cmd.derive("pendaftaran.rujukan.keluar.Workspace",com.Form,{viewModel:{stores:{store:{type:"pendaftaran-rujukan-keluar-store"}}},layout:"border",items:[{region:"center",xtype:"pendaftaran-rujukan-keluar-form",reference:"rujukankeluar"}],load:function(m){var n=this,o=n.down("pendaftaran-rujukan-keluar-form"),p=n.getViewModel().get("store");if(m){p.queryParams={NOPEN:m.get("NOPEN"),STATUS:1};p.load({callback:function(e,s,g){if(g){var f=e[0],l=f.get("REFERENSI")||{};l.KUNJUNGAN=m.data;f.set("REFERENSI",l);o.loadRecord(f)}else{o.createRecord({NOPEN:m.get("NOPEN"),KUNJUNGAN:m.get("NOMOR"),STATUS:1,TANGGAL:n.getSysdate(),REFERENSI:{KUNJUNGAN:m.data}})}}})}}},0,["pendaftaran-rujukan-keluar-workspace"],["component","box","container","panel","form","com-form","pendaftaran-rujukan-keluar-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"pendaftaran-rujukan-keluar-workspace":true},["widget.pendaftaran-rujukan-keluar-workspace"],0,[pendaftaran.rujukan.keluar,"Workspace"],0));(Ext.cmd.derive("pendaftaran.tujuan.Detil",Ext.container.Container,{viewModel:{data:{record:undefined},stores:{store:{type:"tujuanpasien-store"}},formulas:{getDokter:function(g){var l=g("record.REFERENSI.DOKTER"),l=l?l.NAMA:"";return l}}},layout:{type:"vbox",align:"stretch",pack:"top"},cls:"x-br-top",defaults:{style:"font-size: 13px; text-align: right",cls:"x-color-gray",margin:"0 0 1 0"},items:[{xtype:"component",bind:"<b>{record.REFERENSI.RUANGAN.DESKRIPSI}</b>, {getDokter}"},{xtype:"component",bind:"{record.REFERENSI.STATUS.DESKRIPSI}"}],load:function(e,o){var s=this,q=s.getViewModel(),p=q.get("store");if(Ext.getClassName(e)=="data.model.TujuanPasien"){q.set("record",e)}else{if(p){p.queryParams=e;p.load(function(l,f,g){try{if(g&&l.length>0){q.set("record",l[0]);if(Ext.isFunction(o)){o(l[0])}}}catch(m){}})}}},getRecord:function(){return this.getViewModel().get("record")}},0,["tujuan-detil"],["component","box","container","tujuan-detil"],{component:true,box:true,container:true,"tujuan-detil":true},["widget.tujuan-detil"],0,[pendaftaran.tujuan,"Detil"],0));(Ext.cmd.derive("pendaftaran.tujuan.Form",com.Form,{controller:"form-tujuan",model:"data.model.Tujuan",recordSelected:undefined,viewModel:{data:{record:undefined,pasien:undefined,isBayi:false,ikutIbu:false},stores:{smfstore:{type:"referensi-store",queryParams:{JENIS:26}},smfruanganstore:{type:"smf-ruangan-store",queryParams:{STATUS:1}},dokterstore:{type:"dokter-store",queryParams:{STATUS:1}}}},title:"Tujuan ke:",header:{iconCls:"x-fa fa-home",padding:"5 10 5 10"},bodyPadding:5,layout:{type:"vbox",align:"stretch"},defaultType:"fieldcontainer",defaults:{margin:"0 0 2 0",layout:{type:"hbox",align:"stretch"}},items:[{xtype:"textfield",inputType:"hidden",name:"NOPEN",hidden:true},{xtype:"textfield",inputType:"hidden",name:"RESERVASI",hidden:true},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},margin:"0 0 3 0",items:[{xtype:"checkboxfield",name:"IKUT_IBU",boxLabel:"Ikut Ibu ?",boxLabelAlign:"before",reference:"ikutibu",checked:false,bind:{value:"{ikutIbu}",hidden:"{!isBayi}"},listeners:{change:"onChangeIkutIbu"}},{xtype:"combobox",name:"KUNJUNGAN_IBU",hideTrigger:true,reference:"kunjunganibu",displayField:"DESKRIPSI",valueField:"NOMOR",store:Ext.create("Ext.data.Store",{fields:["NOMOR","DESKRIPSI"]}),readOnly:true,flex:1,bind:{hidden:"{!isBayi}"}},{xtype:"button",ui:"soft-green",iconCls:"x-fa fa-female",handler:"onPilihKunjunganIbu",bind:{disabled:"{!ikutIbu}",hidden:"{!isBayi}"}}]},{xtype:"ruangan-selection",bodyPadding:0,border:false,reference:"ruanganselection",notJenisKunjungan:[0,11],bodyStyle:"background: white",layout:{type:"vbox",align:"stretch"},margin:0,listeners:{load:"onLoadRuangan",nextfocus:"onNextFocus",specialkey:"onFocusEnter",selected:"onSelectedRuangan",blurselection:"onBlurSelection"}},{defaultType:"combobox",defaults:{margin:"0 2 0 0",padding:0,labelAlign:"top",enterFocus:true,flex:1,typeAhead:true,queryMode:"local",forceSelection:true,allowBlank:false},items:[{name:"SMF",bind:{store:"{smfstore}"},reference:"smf",displayField:"DESKRIPSI",valueField:"ID",emptyText:"[Pilih SMF]",listeners:{specialkey:"onFocusEnter",select:"onSmfSelected"}},{name:"DOKTER",reference:"dokter",bind:{store:"{dokterstore}"},emptyText:"[Pilih Dokter]",displayField:"NAMA",valueField:"ID",listeners:{specialkey:"onFocusEnter"}}]},{name:"PAKET",reference:"paket",margin:"0 2 0 0",width:300,firstLoad:true,xtype:"paket-combo",params:{UNTUK_KUNJUNGAN:0,STATUS:1},bind:{}}],onLoadRecord:function(p,n){var s=p.down("ruangan-selection"),q=n?n.get("REFERENSI"):null,o=q?(q.RUANGAN?Ext.create("data.model.Ruangan",q.RUANGAN):null):null;s.loadRecord(o);s.select(o)},setPasien:function(f){this.getViewModel().set("pasien",f)},setIsBayi:function(f){this.getViewModel().set("isBayi",f)},onBeforeGetRecord:function(l,g){g.IKUT_IBU=l.down("[name=IKUT_IBU]").getValue()?1:0},getFormData:function(){var l=this,g=l.getForm().getValues();delete g.INSTALASI;delete g.UNIT;delete g.SUBUNIT;g.RESERVASI=g.RESERVASI[1];g.IKUT_IBU=g.IKUT_IBU?1:0;return g}},0,["form-tujuan"],["component","box","container","panel","form","com-form","form-tujuan"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-tujuan":true},["widget.form-tujuan"],0,[pendaftaran.tujuan,"Form"],0));(Ext.cmd.derive("pendaftaran.tujuan.FormController",Ext.app.ViewController,{ruangan:undefined,init:function(){var u=this,t=u.getViewModel(),s=u.getReferences(),e=t.get("smfstore"),q=t.get("smfruanganstore"),f=t.get("dokterstore");q.on("load",function(g,l){e.removeAll();e.load()});e.on("load",function(l,m){var g=[];e.each(function(n){if(n!=undefined){var o=q.findRecord("SMF",n.get("ID"),0,false,true,false);if(o&&(o.get("SMF").toString().length==n.get("ID").toString().length)){g.push(n.data)}}});e.removeAll();e.loadData(g);if(g.length==1){s.smf.select(e.getAt(0));s.smf.fireEvent("select",s.smf,e.getAt(0));s.dokter.focus(false,100)}});f.on("load",function(g,n){var o=t.get("record"),l=o.get("REFERENSI")?o.get("REFERENSI"):null,m=l?(l.DOKTER?Ext.create("data.model.Dokter",l.DOKTER):null):null;if(n.length==1){s.dokter.select(n[0])}else{if(Ext.isArray(n)){if(m){Ext.Array.each(n,function(p){if(p.get("ID")==m.get("ID")){s.dokter.select(m)}})}}}})},onChangeIkutIbu:function(p,m,n){var o=this.getReferences();o.ruanganselection.setIkutIbu(m)},onFocusEnter:function(l,g){this.getView().fireEvent("specialkey",l,g)},onLoadRuangan:function(t){var v=this,u=v.getViewModel(),g=v.getReferences(),w=u.get("smfstore"),f=u.get("smfruanganstore"),e=u.get("dokterstore");w.removeAll();g.smf.select(null);e.removeAll();g.dokter.select(null)},onNextFocus:function(){var l=this,g=l.getReferences();g.smf.focus(false,true)},onSelectedRuangan:function(G,E){var y=this,D=y.getViewModel(),z=D.get("record"),C=z?(z.get("REFERENSI")?z.get("REFERENSI"):null):null,A=y.getReferences(),g=G.get("JENIS_KUNJUNGAN");y.removeFormReservasi();y.removeStoreData(A.smf,"smfstore");y.removeStoreData(A.dokter,"dokterstore");if(E==3){var f=D.get("smfruanganstore");f.removeAll();if(G){var e=C?(C.SMF?Ext.create("data.model.Referensi",C.SMF):null):null,F=C?(C.DOKTER?Ext.create("data.model.Dokter",C.DOKTER):null):null;f.queryParams.RUANGAN=G.get("ID");delete f.queryParams.SMF;y.getView().recordSelected=G;f.load();A.smf.select(e);A.dokter.select(F);if(!D.get("ikutIbu")){if(g==3){y.addFormReservasi();var B=new Ext.util.DelayedTask(function(){A.reservasiselection.setRuangan(G);if(z){A.reservasiselection.setNomor(z.get("RESERVASI"))}});B.delay(100)}}}}A.paket.params.UNTUK_KUNJUNGAN=g;if(g!=3){delete A.paket.params.KELAS}A.paket.load();this.getView().fireEvent("tujuanselected",G)},onSmfSelected:function(s,o){var p=this.getViewModel(),q=p.get("dokterstore"),n=this.getReferences().ruanganselection.getFormData();q.removeAll();this.getReferences().dokter.select(null);if(o&&n){q.queryParams.SMF=o.get("ID");q.queryParams.RUANGAN=n.RUANGAN;q.load()}},onBlurSelection:function(l){var g=this.getViewModel();if(!g.get("ikutIbu")){this.removeStoreData(this.getReferences().smf,"smfstore");this.removeStoreData(this.getReferences().dokter,"dokterstore");this.getView().fireEvent("tujuanblur")}},removeStoreData:function(l,n){var m=this.getViewModel();if(!m.get("ikutIbu")){m.get(n).removeAll();l.select(null)}},onRuanganReserved:function(l,g){this.getReferences().ruanganselection.select(l);this.getView().fireEvent("ruanganreserved",l,g)},onClearReservasi:function(){this.getView().fireEvent("clearreservasi")},onPilihKunjunganIbu:function(){var l=this,n=l.getView(),m=l.getReferences();n.openDialog("",true,"90%","70%",{xtype:"kunjungan-list",ui:"panel-cyan",showCloseButton:true,title:"History Kunjungan Pasien"},function(f,g){var e=g.down("kunjungan-list");e.setListConfig({paging:true,hiddenLihatAction:true,pencarian:{norm:{enabled:true},nama:{enabled:true}}});e.hideColumnConfig({pasien:false,action:true});e.on({itemdblclick:function(J,S,E,P,O,N){var G=n.getReferensi(S.data,"RUANGAN"),K=n.getReferensi(S.data,"PENDAFTARAN"),Q=n.getReferensi(K,"PASIEN"),R=K.TUJUAN,L=n.getReferensi(R,"SMF"),F=Ext.create("data.model.Referensi",L),I=n.getReferensi(R,"DOKTER"),H=Ext.create("data.model.Dokter",I),M=Ext.create("Ext.data.Model",{NOMOR:S.get("NOMOR"),DESKRIPSI:Q.NAMA});G=G?Ext.create("data.model.Ruangan",G):null;m.ruanganselection.loadRecord(G);m.ruanganselection.select(G);m.kunjunganibu.select(M);(new Ext.util.DelayedTask(function(){m.smf.select(F);m.dokter.select(H)})).delay(700);g.close()}});e.loadStore({STATUS:1,JENIS_KUNJUNGAN:3,HISTORY:1,JENIS_KELAMIN:2,REFERENSI:Ext.JSON.encode({Ruangan:true,Referensi:true,RuangKamarTidur:true,Pendaftaran:{COLUMNS:["NOMOR","NORM"],REFERENSI:{Pasien:true,TujuanPasien:true}}})})})},privates:{addFormReservasi:function(){var n=this.getView(),l=this.getViewModel(),m=n.add({xtype:"reservasi-selection",reference:"reservasiselection",bodyPadding:0,bodyStyle:"background: white",margin:"2 0 0 0",border:false,listeners:{ruanganreserved:"onRuanganReserved",specialkey:"onFocusEnter",clear:"onClearReservasi"}});m.setPasien(l.get("pasien"))},removeFormReservasi:function(){this.getView().remove(this.getReferences().reservasiselection)}}},0,0,0,0,["controller.form-tujuan"],0,[pendaftaran.tujuan,"FormController"],0));(Ext.cmd.derive("pendaftaran.tujuan.List",com.Grid,{controller:"tujuan-list",viewModel:{data:{inProses:false},stores:{store:{type:"tujuanpasien-store"}}},iconCls:"x-fa fa-user",title:"Pengunjung",header:{items:[{xtype:"search-field",emptyText:"[NORM]",flex:1,listeners:{search:"onSearch",clear:"onClear",change:"onChange"}}]},hideHeaders:true,first:true,columns:[{xtype:"templatecolumn",cls:"laporan-main laporan-dataview",flex:2,tpl:new Ext.XTemplate('<div class="thumb-wrap">','<div class="thumb">','<div style="font-weight: bold;">{[this.getFormatPendaftaran(values.NOPEN)]} - {[this.tanggalFormat(values.REFERENSI.PENDAFTARAN.TANGGAL)]}</div>','<div style="font-size: 12px; white-space:normal !important;">{[this.getFormatNorm(values.REFERENSI.PENDAFTARAN.REFERENSI.PASIEN.NORM)]} - {[this.getNamaLengkap(values.REFERENSI.PENDAFTARAN.REFERENSI.PASIEN)]}</div>','<div style="font-size: 12px; white-space:normal !important;">Tujuan: {[this.getTujuan(values.REFERENSI.RUANGAN)]}</div>','<div style="font-size: 12px; white-space:normal !important;">Penjamin: {[this.getPenjamin(values.REFERENSI.PENDAFTARAN.PENJAMIN)]}</div>',"</div>","</div>",{getFormatNorm:function(m){var n=Ext.String.leftPad(m,8,"0"),l=Ext.String.insert(Ext.String.insert(Ext.String.insert(n,".",2),".",5),".",8);return l},getNamaLengkap:function(p){var n=p.GELAR_DEPAN||"",e=p.NAMA||"",o=p.GELAR_BELAKANG||"";n=n==""?"":n+". ";o=o==""?"":", "+o;return n+e+o},getFormatPendaftaran:function(f){return f.substring(0,6)+"."+f.substring(6)},tanggalFormat:function(f){return Ext.Date.format(Ext.Date.parse(f,"Y-m-d H:i:s"),"d-m-Y H:i:s")},getTujuan:function(n){var m=n?n:null,l=m?m.DESKRIPSI:"";return l},getPenjamin:function(o){var m=o.REFERENSI,n=m.KAP,p=n.REFERENSI.PENJAMIN.DESKRIPSI+(n.NOMOR==""?"":"-"+n.NOMOR)+" [ Kls. "+(m.KELAS?m.KELAS.DESKRIPSI:"")+" - SEP. "+o.NOMOR+" ]";return p}})},{xtype:"widgetcolumn",text:"Status",flex:1,align:"right",widget:{xtype:"fieldcontainer",defaults:{padding:2,margin:"0 0 1 0"},layout:{type:"vbox",align:"stretch"},items:[{xtype:"button",text:"Panggil",action:1,ui:"soft-blue",bind:{disabled:"{inProses}"},handler:"onPanggil"},{xtype:"button",text:"Terima",action:0,bind:{disabled:"{inProses}"},handler:"onTerima"},{xtype:"button",text:"Batal",action:1,ui:"soft-red",bind:{disabled:"{inProses}"},handler:"onBatal"}]},onWidgetAttach:"onWidgetAttach"}],onBeforeLoad:function(o,p,s){var q=p.get("config");if(o.first){o.first=false}p.set("config",q);var n={COLUMNS:'["NOPEN","TANGGAL","RUANGAN","STATUS"]',REFERENSI:Ext.JSON.encode({Pendaftaran:{COLUMNS:["NOMOR","NORM","TANGGAL"],REFERENSI:{Pasien:{COLUMNS:["NORM","GELAR_DEPAN","NAMA","GELAR_BELAKANG","JENIS_KELAMIN","TANGGAL_LAHIR","TEMPAT_LAHIR"]},Penjamin:{REFERENSI:{Kelas:true,KAP:true}}}},Ruangan:{COLUMNS:["DESKRIPSI","JENIS_KUNJUNGAN"]},AntrianRuangan:{COLUMNS:["ID"]}})};o.setParams(n)}},0,["tujuan-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","tujuan-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"tujuan-list":true},["widget.tujuan-list"],0,[pendaftaran.tujuan,"List"],0));(Ext.cmd.derive("pendaftaran.tujuan.ListController",Ext.app.ViewController,{tts:{integrasi:undefined,service:undefined},filter:{norm:"",tanggal:{checked:false,value:new Date()}},orderSelected:{property:"TANGGAL",direction:"ASC"},init:function(){var g=this,l=g.getView();g.tts.integrasi=l.app.xitr("ID",6);if(g.tts.integrasi){g.tts.service=Ext.create(g.tts.integrasi.NAMA_KLAS,{})}},onSearch:function(l,g){this.filter.norm=g;this.cari()},onClear:function(){this.filter.norm="";this.cari()},onChange:function(p,n){var o=this,s=o.getView(),q=s.down("search-field");if(n==""){q.onClearClick()}},onTerima:function(q){var o=this,s=o.getView(),p=o.getViewModel(),t=q.ownerCt.getWidgetRecord(),u=t.get("REFERENSI").PENDAFTARAN.REFERENSI.PASIEN.NAMA;s.waitRefresh=true;s.showMessageBox({title:"Penerimaan Pasien",message:"Anda yakin ingin menerima Pasien An. "+u+" ?",header:{padding:5},buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:q,fn:function(e){if(e==="yes"){p.set("inProses",true);var f=Ext.create("data.model.Kunjungan",{NOPEN:t.get("NOPEN"),RUANGAN:t.get("RUANGAN"),STATUS:1});f.showError=true;f.animateTarget=e;f.scope=o;f.save({callback:function(g,m,l){s.waitRefresh=false;if(l){s.remove(q.ownerCt);s.notifyMessage("Penerimaan Pasien An. "+u+" berhasil");s.fireEvent("terima",t);s.refresh()}p.set("inProses",false)}})}else{s.waitRefresh=false;p.set("inProses",false)}}})},onBatal:function(p){var o=this,q=o.getView(),s=p.ownerCt.getWidgetRecord(),t=s.get("STATUS"),u=s.get("REFERENSI").PENDAFTARAN.REFERENSI.PASIEN.NAMA;q.waitRefresh=true;s.showError=true;s.animateTarget=p;s.scope=o;q.showMessageBox({title:"Pembatalan Penerimaan Pasien",message:"Anda yakin ingin membatalkan penerimaan Pasien An. "+u+" ?",ui:"window-warning",header:{padding:5},buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:p,fn:function(e){if(e==="yes"){s.set("STATUS",0);s.save({callback:function(f,l,g){q.waitRefresh=false;if(g){q.remove(p.ownerCt);q.notifyMessage("Pembatalan penerimaan Pasien An. "+u+" berhasil");q.refresh()}else{s.set("STATUS",t)}}})}else{q.waitRefresh=false;s.set("STATUS",t)}}})},onPanggil:function(s){var w=this,v=w.getView(),z=w.getViewModel(),y=s.ownerCt.getWidgetRecord(),u=v.getReferensi(y.data,"ANTRIAN"),t=v.getReferensi(y.data,"PENDAFTARAN"),A=v.getReferensi(y.data,"RUANGAN"),x=u?Ext.create("data.model.PanggilanAntrianRuangan",{ANTRIAN_RUANGAN:u.ID}):null;v.waitRefresh=true;z.set("inProses",true);if(w.tts.service){w.tts.service.load(["Pasien Dengan Nomor Antrian","Silahkan Ke",A.DESKRIPSI])}if(x){x.showError=true;x.animateTarget=s;x.scope=w;x.save({callback:function(e,g,f){var l=v.getReferensi(e.data,"ANTRIAN");if(w.tts.service){w.tts.service.load(l.NOMOR)}v.waitRefresh=false;z.set("inProses",false)}})}},privates:{cari:function(){var n=this,p=n.getView(),o=p.down("pagingtoolbar"),m={sort:Ext.JSON.encode(n.orderSelected)};if(n.filter.norm==""){delete p.getStore().queryParams.NORM}else{m.NORM=n.filter.norm}if(!n.filter.tanggal.checked){delete p.getStore().queryParams.TANGGAL}else{m.TANGGAL=Ext.Date.format(n.filter.tanggal.value,"Y-m-d")}p.setParams(m);if(o){o.moveFirst()}else{p.load()}}},onWidgetAttach:function(w,u,y){var v=this,t=v.getView(),z=t.getPropertyConfig("4")=="TRUE",x=t.getReferensi(y.data,"RUANGAN"),A=u.down("[action=1]");A.setHidden(!z);if(x){var s=x.JENIS_KUNJUNGAN;if(s==0||s==2||s==3){A.setHidden(true)}}}},0,0,0,0,["controller.tujuan-list"],0,[pendaftaran.tujuan,"ListController"],0));(Ext.cmd.derive("pendaftaran.tujuan.SettingList",com.Form,{controller:"setting-tujuan-list",title:"Pengaturan",header:{iconCls:"x-fa fa-cog",margin:0,padding:"10 15 10 15"},bodyPadding:5,layout:{type:"hbox"},items:[{xtype:"checkbox",checked:false},{xtype:"datefield",fieldLabel:"Tanggal",name:"TANGGAL",format:"d-m-Y",value:new Date()}],buttons:[{text:"Simpan",iconCls:"x-fa fa-save",handler:"onSimpan"}],setConfig:function(p){var n=this,m=n.down("checkbox"),o=n.down("[name=TANGGAL]");if(p){m.setValue(p.isFilterTanggal);o.setValue(p.TANGGAL);n.focus("TANGGAL")}}},0,["setting-tujuan-list"],["component","box","container","panel","form","com-form","setting-tujuan-list"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"setting-tujuan-list":true},["widget.setting-tujuan-list"],0,[pendaftaran.tujuan,"SettingList"],0));(Ext.cmd.derive("pendaftaran.tujuan.SettingListController",Ext.app.ViewController,{onSimpan:function(){var n=this,p=n.getView(),m=p.down("checkbox"),o=p.down("[name=TANGGAL]");p.fireEvent("save",{isFilterTanggal:m.getValue(),TANGGAL:o.getValue()})}},0,0,0,0,["controller.setting-tujuan-list"],0,[pendaftaran.tujuan,"SettingListController"],0));(Ext.cmd.derive("pendaftaran.UbahTujuan",com.Form,{controller:"ubah-tujuan-form",viewModel:{data:{record:undefined,pasien:undefined,readOnly:false}},layout:"fit",defaults:{margin:"0 2 2 0"},items:[{reference:"ubahtujuan",xtype:"form-tujuan",header:false}],buttons:[{text:"Simpan",iconCls:"x-fa fa-save",handler:"onSimpan"}],onLoadRecord:function(o,n){var q=o.getViewModel(),s=Ext.create("data.model.TujuanPasien",Ext.clone(n.data)),p=o.down("form-tujuan");p.setPasien(q.get("pasien"));p.loadRecord(s)},setPasien:function(f){this.getViewModel().set("pasien",f)}},0,["ubah-tujuan-form"],["component","box","container","panel","form","com-form","ubah-tujuan-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"ubah-tujuan-form":true},["widget.ubah-tujuan-form"],0,[pendaftaran,"UbahTujuan"],0));(Ext.cmd.derive("pendaftaran.UbahTujuanController",Ext.app.ViewController,{onSimpan:function(p){var o=this,s=o.getView(),q=s.down("form-tujuan"),u=q.getFormData(),t=o.getViewModel().get("record");if(t.get("STATUS")==2){return}t.showError=true;t.animateTarget=p;t.scope=o;if(q.isValid()){t.set(u);s.showMessageBox({title:"Ubah Tujuan",message:"Anda yakin ingin mengubah tujuan pasien ?",ui:"window-red",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:p,fn:function(e){t.save({callback:function(f,l,g){if(g){s.notifyMessage("Ubah Tujuan berhasil");s.fireEvent("simpan",f)}}})}})}},onReset:function(){var f=this;f.init()},onBatal:function(f){this.getView().fireEvent("batal",f)}},0,0,0,0,["controller.ubah-tujuan-form"],0,[pendaftaran,"UbahTujuanController"],0));(Ext.cmd.derive("pendaftaran.widget.Info",com.Form,{controller:"pendaftaran-widget-info",viewModel:{data:{pasien:undefined,buttons:{baru:false,icd:false,barcode:false,batal:false,tracert:false,gelang:false},dataFound:false},stores:{pendaftaranstore:{type:"pendaftaran-store"},kunjunganstore:{type:"kunjungan-store"}}},cls:"shadow-panel",border:true,inRefresh:false,layout:{type:"vbox",align:"stretch"},header:{iconCls:"x-fa fa-user-plus",title:"Pendaftaran Kunjungan",margin:0,padding:"5 10 1 10",cls:"x-color-w",layout:{type:"hbox",align:"middle"},items:[{xtype:"component",flex:1},{xtype:"button",iconCls:"x-fa fa-file",tooltip:"Pendaftaran Kunjungan Baru",ui:"soft-black",margin:"0 0 0 1",bind:{hidden:"{!buttons.baru}"},handler:"onBaru"},{xtype:"button",iconCls:"x-fa fa-list-alt",tooltip:"ICD",ui:"soft-cerulen",bind:{hidden:"{!buttons.icd}"},margin:"0 0 0 1",handler:"onICD"},{xtype:"button",iconCls:"x-fa fa-list",tooltip:"Tampilkan Detil",ui:"soft-blue",bind:{hidden:"{!dataFound}"},margin:"0 0 0 1",handler:"onDetil"},{xtype:"button",iconCls:"x-fa fa-history",tooltip:"History Pendaftaran Kunjungan",ui:"soft-cyan",bind:{hidden:"{!dataFound}"},margin:"0 0 0 1",handler:"onHistory"},{xtype:"button",iconCls:"x-fa fa-print",tooltip:"Cetak Bukti Pendaftaran",ui:"soft-asperages",margin:"0 0 0 1",handler:"onCetakBukti"},{xtype:"button",iconCls:"x-fa fa-barcode",tooltip:"Cetak Barcode Pendaftaran",ui:"soft-cyan",margin:"0 0 0 1",bind:{hidden:"{!buttons.barcode}"},handler:"onCetakBarcode"},{xtype:"button",iconCls:"x-fa fa-print",tooltip:"Cetak Tracert",ui:"soft-saphire",margin:"0 0 0 1",handler:"onCetakTracert",bind:{hidden:"{!buttons.tracert}"}},{xtype:"button",iconCls:"x-fa fa-circle-o",tooltip:"Cetak Gelang",ui:"soft-green",margin:"0 0 0 1",handler:"onCetakGelang",bind:{hidden:"{!buttons.gelang}"}},{xtype:"button",iconCls:"x-fa fa-minus-circle",tooltip:"Batalkan Pendaftaran Kunjungan",ui:"soft-red",bind:{hidden:"{!buttons.batal}"},margin:"0 0 0 1",handler:"onBatal"}]},bodyPadding:5,items:[{xtype:"container",layout:"hbox",items:[{xtype:"pendaftaran-short-detil",flex:1,reference:"pendaftaran"},{xtype:"tujuan-detil",flex:1,reference:"tujuan"}]},{xtype:"penjamin-detil",flex:1,reference:"penjamin"},{xtype:"kunjungan-detil",flex:1,reference:"kunjungan"}],refresh:function(){if(!this.inRefresh){this.getController().init()}}},0,["pendaftaran-widget-info"],["component","box","container","panel","form","com-form","pendaftaran-widget-info"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"pendaftaran-widget-info":true},["widget.pendaftaran-widget-info"],0,[pendaftaran.widget,"Info"],0));(Ext.cmd.derive("pendaftaran.widget.InfoController",Ext.app.ViewController,{init:function(){var w=this,B=w.getView(),f=w.getViewModel(),e=w.getReferences(),A=f.get("pasien"),C=f.get("pendaftaranstore"),x=f.get("kunjunganstore"),y=B.app.xpriv,z=y("1010",false),v=y("1302",false);if(A.get("STATUS")!=1){f.set("buttons.baru",false)}if(!z){f.set("buttons.batal",false)}f.set("buttons.icd",v);B.inRefresh=true;w.integrasi=B.app.xitr("ID",1);if(w.integrasi){w.service=Ext.create(w.integrasi.NAMA_KLAS,{})}if(A&&C&&f){C.queryParams={NORM:A.get("NORM"),start:0,limit:1};C.load(function(o,n,p){try{if(p){if(o.length>0){var q=o[0],s={},m={},u={NOPEN:q.get("NOMOR"),STATUS:1,HISTORY:1,start:0,limit:1},E=q.get("TUJUAN"),t=q.get("PENJAMIN");if(E){s=Ext.create("data.model.TujuanPasien",E);if(E.STATUS==0){f.set("buttons.baru",true)}var g=E.REFERENSI?(E.REFERENSI.RUANGAN?E.REFERENSI.RUANGAN.JENIS_KUNJUNGAN:1):1;f.set("buttons.barcode",(g==2||g==3));f.set("buttons.tracert",(g==1));f.set("buttons.gelang",(g==2||g==3)&&B.getPropertyConfig(12)!=="FALSE")}else{s={NOPEN:q.get("NOMOR")}}if(t){m=Ext.create("data.model.Penjamin",t)}else{m={NOPEN:q.get("NOMOR"),NORM:q.get("NORM")}}if(e.pendaftaran.load){e.pendaftaran.load(q)}if(e.tujuan.load){e.tujuan.load(s)}if(e.penjamin.load){e.penjamin.load(m)}if(e.kunjungan.load){x.queryParams=u;x.load(function(I,D,K){try{f.set("buttons.baru",!K);if(K&&I.length>0){if(A.get("STATUS")!=1){f.set("buttons.baru",false)}}delete u.HISTORY;delete u.STATUS;e.kunjungan.load(u,function(){B.inRefresh=false})}catch(J){}})}if(q.get("STATUS")==0){f.set("buttons.baru",true);f.set("buttons.batal",false)}else{if(q.get("STATUS")==2){f.set("buttons.batal",false)}}}}else{f.set("buttons.baru",true);f.set("buttons.batal",false)}if(A.get("STATUS")!=1){f.set("buttons.baru",false)}B.inRefresh=false;f.set("dataFound",p);if(!z){f.set("buttons.batal",false)}}catch(l){}})}},onBaru:function(){this.getView().fireEvent("baru")},onICD:function(){var f=this.getReferences();this.getView().fireEvent("icd",f.pendaftaran.getRecord(),f.tujuan.getRecord(),f.penjamin.getRecord())},onDetil:function(){this.getView().fireEvent("detil",this.getReferences().pendaftaran.getRecord())},onHistory:function(){this.getView().fireEvent("history",this.getViewModel().get("pasien"))},onCetakBukti:function(){this.getView().fireEvent("cetakbukti",this.getReferences().pendaftaran.getRecord())},onCetakBarcode:function(){this.getView().fireEvent("cetakbarcode",this.getReferences().pendaftaran.getRecord())},onCetakTracert:function(){this.getView().fireEvent("cetaktracert",this.getReferences().pendaftaran.getRecord())},onCetakGelang:function(){this.getView().fireEvent("cetakgelang",this.getReferences().pendaftaran.getRecord())},onBatal:function(p){var o=this,t=o.getView(),s=o.getReferences();rec=s.pendaftaran.getRecord(),pjmn=rec.get("PENJAMIN");if(rec){var u=t.app.xpriv,q=u?false:true;if(u){q=!u("1010",false)}if(q){t.notifyMessage("Anda tidak memiliki Hak Akses untuk melakukan Pembatalan pendaftaran kunjungan!","danger-blue");return}rec.showError=true;rec.animateTarget=p;rec.scope=o;Ext.Msg.show({title:"Pembatalan Pendaftaran Kunjungan",message:"Anda yakin ingin membatalkan pendaftaran kunjungan ini ?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:p,fn:function(e){if(e==="yes"){rec.set("STATUS",0);rec.save({callback:function(f,l,g){if(g){if(o.service){if(o.integrasi.REF==pjmn.JENIS){o.service.batalkanSEP(pjmn.NOMOR)}}t.notifyMessage("Pembatalan pendaftaran kunjungan berhasil","danger-blue")}else{f.set("STATUS",1)}}})}else{rec.set("STATUS",1)}}})}o.getView().fireEvent("batal")},destroy:function(){if(this.service){delete this.service}Ext.app.ViewController.prototype.destroy.call(this)}},0,0,0,0,["controller.pendaftaran-widget-info"],0,[pendaftaran.widget,"InfoController"],0));(Ext.cmd.derive("pendaftaran.widget.Konsul",Ext.Container,{layout:"fit",items:[{xtype:"terima-konsul",reference:"terimakonsul",viewConfig:{loadMask:false},listeners:{terima:"onTerima"}}],loadStore:function(l){var g=this.down("terima-konsul");g.loadStore(l)},refresh:function(){this.down("terima-konsul").refresh()}},0,["pendaftaran-widget-konsul"],["component","box","container","pendaftaran-widget-konsul"],{component:true,box:true,container:true,"pendaftaran-widget-konsul":true},["widget.pendaftaran-widget-konsul"],0,[pendaftaran.widget,"Konsul"],0));(Ext.cmd.derive("pendaftaran.widget.Mutasi",Ext.Container,{layout:"fit",items:[{xtype:"terima-mutasi",reference:"terimamutasi",viewConfig:{loadMask:false},listeners:{terima:"onTerima"}}],loadStore:function(l){var g=this.down("terima-mutasi");g.loadStore(l)},refresh:function(){this.down("terima-mutasi").refresh()}},0,["pendaftaran-widget-mutasi"],["component","box","container","pendaftaran-widget-mutasi"],{component:true,box:true,container:true,"pendaftaran-widget-mutasi":true},["widget.pendaftaran-widget-mutasi"],0,[pendaftaran.widget,"Mutasi"],0));(Ext.cmd.derive("pendaftaran.widget.Pengunjung",Ext.Container,{layout:"fit",items:[{xtype:"tujuan-list",reference:"tujuanlist",viewConfig:{loadMask:false},listeners:{terima:"onTerima"}}],loadStore:function(l){var g=this.down("tujuan-list");g.loadStore(l)},refresh:function(){try{this.down("tujuan-list").refresh()}catch(e){}}},0,["pendaftaran-widget-pengunjung"],["component","box","container","pendaftaran-widget-pengunjung"],{component:true,box:true,container:true,"pendaftaran-widget-pengunjung":true},["widget.pendaftaran-widget-pengunjung"],0,[pendaftaran.widget,"Pengunjung"],0));(Ext.cmd.derive("kunjungan.perubahantanggal.Model",data.model.Model,{serviceName:"pendaftaran/perubahantanggalkunjungan",fields:[{name:"ID",type:"int"},{name:"KUNJUNGAN",type:"string"},{name:"TANGGAL_LAMA",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"TANGGAL_BARU",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"JENIS",type:"int"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[kunjungan.perubahantanggal,"Model"],0));(Ext.cmd.derive("kunjungan.Detil",com.Form,{controller:"kunjungan-detil",viewModel:{data:{record:undefined,allowEditTanggal:false},stores:{store:{type:"kunjungan-store"}},formulas:{isAllowEditTanggal:function(g){var l=g("record.STATUS");l=l!=undefined?l:1;l=l==2||l==0;return !l&&g("allowEditTanggal")},getInfoMasuk:function(p){var n=p("record.MASUK"),o=n?"Masuk: "+Ext.Date.format(n,"l, d F Y"):"",m=n?" Pukul "+Ext.Date.format(n,"H:i:s"):"";return o+m},getInfoKeluar:function(p){var n=p("record.KELUAR"),o=n?"Keluar: "+Ext.Date.format(n,"l, d F Y"):"",m=n?" Pukul "+Ext.Date.format(n,"H:i:s"):"";return o+m},getInfoRawatInap:function(o){var m=o("record.REFERENSI"),n=o("record.JENIS_KUNJUNGAN"),p=m?(n==3?(m.RUANG_KAMAR_TIDUR?m.RUANG_KAMAR_TIDUR:null):null):null;rk=p?p.REFERENSI.RUANG_KAMAR:null;kls=rk?rk.REFERENSI.KELAS:null;desk=p?(rk?rk.KAMAR+" / "+p.TEMPAT_TIDUR+(kls?" / "+kls.DESKRIPSI:""):""):"";return desk},getInfoStatus:function(p){var n=p("record.REFERENSI"),m=n?(n.STATUS?n.STATUS:false):false,o=m?m.DESKRIPSI:"";return o},getInfoTitipan:function(p){var o=p("record.REFERENSI"),m=o?(o.TITIPAN_KELAS?o.TITIPAN_KELAS:false):false,n=m?"Pasien Titipan "+m.DESKRIPSI:"";return n}}},layout:{type:"vbox",align:"stretch",pack:"top"},cls:"x-br-top",bodyStyle:"background: white",border:false,defaultType:"component",defaults:{style:"font-size: 13px; text-align: right",margin:"0 0 1 0"},items:[{cls:"x-color-blue",style:"font-size: 17px; text-align: right",bind:"<b>{record.REFERENSI.RUANGAN.DESKRIPSI}</b>"},{cls:"x-color-blue",style:"font-size: 14px; text-align: right",bind:"<b>{getInfoRawatInap}</b>"},{xtype:"fieldcontainer",layout:"hbox",items:[{xtype:"component",cls:"x-color-blue",style:"font-size: 14px; text-align: right",bind:"<b>{getInfoTitipan}</b>",flex:1},{xtype:"button",padding:1,text:"Titipkan",hidden:true,bind:{hidden:"{!(record.JENIS_KUNJUNGAN == 3 && record.STATUS == 1 && record.TITIPAN == 0)}"},margin:"0 0 0 3",handler:"onTitipkan"},{xtype:"button",padding:1,text:"Batalkan Titipan",ui:"soft-red",hidden:true,bind:{hidden:"{!(record.JENIS_KUNJUNGAN == 3 && record.STATUS == 1 && record.TITIPAN == 1)}"},margin:"0 0 0 3",handler:"onBatalkanTitipan"}]},{xtype:"fieldcontainer",layout:"hbox",items:[{xtype:"component",cls:"x-color-gray",style:"text-align: right",bind:"{getInfoMasuk}",flex:1},{xtype:"button",padding:0,border:false,frame:false,margin:"0 0 0 3",style:"background: transparent;",iconCls:"x-fa fa-pencil-square-o x-color-blue x-bold",hidden:true,bind:{hidden:"{!isAllowEditTanggal}"},handler:"onUbah"}]},{bind:"{getInfoKeluar}"},{cls:"x-color-red",bind:"Status. {getInfoStatus}"}],load:function(s,e){try{var o=this,p=o.getViewModel(),q=p.get("store");if(p){if(Ext.getClassName(s)=="data.model.Kunjungan"){p.set("record",s);p.notify()}else{if(q){q.queryParams=s;q.load(function(n,g,m){try{if(m&&n.length>0){var f=p.get("record");if(Ext.getClassName(f)=="data.model.Kunjungan"){f.set(n[0].data)}else{p.set("record",n[0])}}if(Ext.isFunction(e)){if(n){e(n[0],m)}}}catch(l){}})}}p.set("allowEditTanggal",o.app.xpriv("110110"))}}catch(e){}},getRecord:function(){return this.getViewModel().get("record")}},0,["kunjungan-detil"],["component","box","container","panel","form","com-form","kunjungan-detil"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"kunjungan-detil":true},["widget.kunjungan-detil"],0,[kunjungan,"Detil"],0));(Ext.cmd.derive("kunjungan.DetilController",Ext.app.ViewController,{onUbah:function(s){var x=this,w=x.getView(),q=x.getViewModel(),v=q.get("record"),y=v.get("REFERENSI"),u=y?(y.PENDAFTARAN?y.PENDAFTARAN:false):false,t=true;if(w.app){t=!w.app.xpriv("110110")}if(t){w.notifyMessage("Anda tidak memiliki Hak Akses untuk melakukan Perubahan tanggal kunjungan!");return}w.showMessageBox({title:"Perubahan Tanggal Kunjungan",message:"Anda yakin ingin merubah tanggal kunjungan?",ui:"window-red",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:s,fn:function(e){if(e==="yes"){w.openDialog("",true,170,200,{xtype:"kunjungan-perubahantanggal-form",title:"Perubahan Tanggal Kunjungan",ui:"panel-red",showCloseButton:true},function(m,f){var g=f.down("kunjungan-perubahantanggal-form"),l=u?(Ext.isString(u.TANGGAL)?Ext.Date.parse(u.TANGGAL,"Y-m-d H:i:s"):u.TANGGAL):new Date();g.on({close:function(){f.close()},save:function(){v.load();f.close()}});g.setFormConfig({tanggalBaru:{minValueBefore:Ext.Date.clone(l),minValue:l}});g.createRecord({KUNJUNGAN:v.get("NOMOR"),JENIS:1,TANGGAL_LAMA:v.get("MASUK"),TANGGAL_BARU:v.get("MASUK")})})}}})},onTitipkan:function(s){var p=this,t=p.getView(),q=p.getViewModel(),u=q.get("record"),o=u?u.clone():null;if(o){t.showMessageBox({title:"Titipan",message:"Anda yakin ingin melakukan penitipan pasien di ruangan ini?",ui:"window-red",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:s,fn:function(e){if(e==="yes"){t.openDialog("",true,170,200,{xtype:"kunjungan-titipan-form",title:"Titipan",ui:"panel-red",showCloseButton:true},function(l,f){var g=f.down("kunjungan-titipan-form");g.on({save:function(){u.load();f.close()}});o.set("TITIPAN",1);o.set("TITIPAN_KELAS",0);g.loadRecord(o)})}}})}},onBatalkanTitipan:function(s){var p=this,t=p.getView(),q=p.getViewModel(),u=q.get("record"),o=u?u.clone():null;if(o){o.showError=true;o.animateTarget=s;o.scope=p;t.showMessageBox({title:"Pembatalan Titipan",message:"Anda yakin ingin melakukan pembatalan pasien titipan?",ui:"window-red",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:s,fn:function(e){if(e==="yes"){o.set("TITIPAN",0);o.set("TITIPAN_KELAS",null);o.save({callback:function(f,l,g){if(g){t.notifyMessage("Pembatalan titipan pasien berhasil","danger-blue");u.load()}}})}}})}}},0,0,0,0,["controller.kunjungan-detil"],0,[kunjungan,"DetilController"],0));(Ext.cmd.derive("kunjungan.List",com.Grid,{controller:"kunjungan-list",viewModel:{data:{listConfig:{paging:false,hiddenPencarian:false,pencarian:{norm:{enabled:false},nama:{enabled:false}},hiddenLihatAction:false,hiddenFinalAction:true,filter:{status:{enabled:false}}},hideColumnConfig:{noUrut:false,nomor:true,nopen:false,pasien:true,ruangan:false,tglMasuk:false,tglKeluar:false,status:false,action:false}},stores:{store:{type:"kunjungan-store"}}},header:{items:[{xtype:"search-field",emptyText:"[Cari No. RM]",width:200,hidden:true,jenis:1,bind:{hidden:"{!listConfig.pencarian.norm.enabled}"},listeners:{search:"onSearch",clear:"onClear"}},{xtype:"search-field",emptyText:"[Cari No. Pendaftaran]",width:200,hidden:true,jenis:2,bind:{hidden:"{listConfig.hiddenPencarian}"},listeners:{search:"onSearch",clear:"onClear"}},{xtype:"search-field",emptyText:"[Nama Pasien]",flex:1,hidden:true,jenis:3,bind:{hidden:"{!listConfig.pencarian.nama.enabled}"},listeners:{search:"onSearch",clear:"onClear"}},{xtype:"fieldcontainer",layout:"hbox",width:200,bind:{hidden:"{!listConfig.filter.status.enabled}"},items:[{xtype:"checkbox",reference:"enablestatus",checked:true,listeners:{change:"onStatusChange"}},{xtype:"referensi-combo",reference:"statusaktifitas",defaultValue:2,firstLoad:true,flex:1,params:{JENIS:31,STATUS:1},tooltip:"Status Aktifitas Kunjungan",bind:{disabled:"{!enablestatus.checked}"},listeners:{select:"onSelectStatusAktifitas"}}]},{xtype:"button",iconCls:"x-fa fa-bars",ui:"soft-green",tooltip:"Pilihan",arrowVisible:false,menu:[{text:"Filter",iconCls:"x-fa fa-filter",menu:[{xtype:"fieldcontainer",layout:"hbox",items:[{xtype:"checkbox",boxLabel:"Tanggal",reference:"filtertanggal",checked:false,listeners:{change:"onFilterTanggalChange"}},{xtype:"datefield",name:"TANGGAL",format:"d-m-Y",value:new Date(),bind:{disabled:"{!filtertanggal.checked}"},listeners:{change:"onFilterTanggalChange"}}]}]}]}]},columns:[{xtype:"rownumberer",text:"No",align:"left",width:50,bind:{hidden:"{hideColumnConfig.noUrut}"}},{text:"Nomor",dataIndex:"NOMOR",sortable:false,flex:1,align:"center",bind:{hidden:"{hideColumnConfig.nomor}"}},{text:"No. Pendaftaran",dataIndex:"NOPEN",sortable:false,width:117,align:"center",bind:{hidden:"{hideColumnConfig.nopen}"}},{xtype:"templatecolumn",text:"Pasien",flex:1,sortable:false,bind:{hidden:"{hideColumnConfig.pasien}"},tpl:new Ext.XTemplate('<div class="thumb-wrap">','<div class="thumb">','<div style="white-space:normal !important;">{[this.getInfoPasien(values)]}</div>',"</div>","</div>",{getInfoPasien:function(n){var m=n.REFERENSI,o=m.PENDAFTARAN,p=o.REFERENSI.PASIEN;return p.NORM+" - "+p.NAMA+"</br>"+(p.ALAMAT?p.ALAMAT:"-")}})},{xtype:"templatecolumn",text:"Ruangan",flex:1,sortable:false,bind:{hidden:"{hideColumnConfig.ruangan}"},tpl:new Ext.XTemplate('<div class="thumb-wrap">','<div class="thumb">','<div style="white-space:normal !important;">{REFERENSI.RUANGAN.DESKRIPSI}</div>','<div style="white-space:normal !important;">{[this.getInfo(values)]}</div>','<div style="white-space:normal !important;">{[this.getInfoTitipan(values)]}</div>',"</div>","</div>",{getInfo:function(p){var n=p.REFERENSI,m=p.JENIS_KUNJUNGAN,o=n?(m==3?(n.RUANG_KAMAR_TIDUR?n.RUANG_KAMAR_TIDUR:null):null):null;rk=o?o.REFERENSI.RUANG_KAMAR:null;kls=rk?rk.REFERENSI.KELAS:null;desk=o?(rk?rk.KAMAR+" / "+o.TEMPAT_TIDUR+(kls?" / "+kls.DESKRIPSI:""):""):"";return desk},getInfoTitipan:function(o){var n=o.REFERENSI,m=n?(n.TITIPAN_KELAS?n.TITIPAN_KELAS:null):null,p=m?"Pasien Titipan "+m.DESKRIPSI:"";return p}})},{xtype:"datecolumn",text:"Tgl. Masuk",dataIndex:"MASUK",width:137,align:"center",format:"d/m/Y H:i:s",sortable:false,bind:{hidden:"{hideColumnConfig.tglMasuk}"}},{xtype:"datecolumn",text:"Tgl. Keluar",dataIndex:"KELUAR",align:"center",width:137,format:"d/m/Y H:i:s",sortable:false,bind:{hidden:"{hideColumnConfig.tglKeluar}"}},{xtype:"templatecolumn",text:"Status",sortable:false,flex:1,bind:{hidden:"{hideColumnConfig.status}"},tpl:'<div style="white-space:normal !important;">{REFERENSI.STATUS.DESKRIPSI}</div>'},{xtype:"widgetcolumn",text:"Aksi",align:"center",bind:{hidden:"{hideColumnConfig.action}"},widget:{xtype:"fieldcontainer",layout:{type:"vbox",align:"stretch"},defaults:{padding:2,margin:"0 2 1 0"},items:[{xtype:"button",text:"Lihat",action:0,handler:"onLihat",hidden:true,bind:{hidden:"{listConfig.hiddenLihatAction}"}},{xtype:"button",text:"Final",ui:"soft-red",action:1,hidden:true,bind:{hidden:"{listConfig.hiddenFinalAction}"},handler:"onFinal"}]}}],hideColumnConfig:function(m){var l=this,n=l.getViewModel();_config=n.get("hideColumnConfig");m=Ext.apply(_config,m);n.set("hideColumnConfig",m);n.notify()},onBeforeLoad:function(l,m,n){l.setParams({COLUMNS:'["NOMOR","NOPEN","MASUK","KELUAR","RUANGAN","RUANG_KAMAR_TIDUR","TITIPAN","TITIPAN_KELAS","STATUS"]',REFERENSI:Ext.JSON.encode({Ruangan:{COLUMNS:["DESKRIPSI"]},Pendaftaran:true,Referensi:true,RuangKamarTidur:true}),STATUS:2})}},0,["kunjungan-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","kunjungan-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"kunjungan-list":true},["widget.kunjungan-list"],0,[kunjungan,"List"],0));(Ext.cmd.derive("kunjungan.ListController",Ext.app.ViewController,{init:function(){var f=this.getStore("store");if(f){f.on("load",function(l,e){if(e.length==0){f.removeAll()}})}this.isFirstLoad=true;this.filter={tanggal:{checked:false,value:new Date()},norm:"",nopen:"",nama:"",status:{checked:true,value:2}};this.orderSelected={property:"MASUK",direction:"ASC"}},onLihat:function(f){this.getView().fireEvent("lihat",f.ownerCt.getWidgetRecord())},onFinal:function(o){var n=this,p=n.getView(),s=o.ownerCt.getWidgetRecord(),q=s?s.get("STATUS"):0;if(q==0){return}p.showMessageBox({title:"Final Kunjungan",message:"Anda yakin ingin menyelesaikan / memfinalkan kunjungan ini ?",ui:"window-red",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:o,fn:function(e){if(e==="yes"){s.showError=true;s.animateTarget=e;s.scope=n;s.set("STATUS",2);s.save({callback:function(l,g,f){if(f){p.notifyMessage("Kunjungan telah difinalkan");p.reload()}else{s.set("STATUS",q)}}})}else{s.set("STATUS",q)}}})},onSearch:function(l,g){if(l.jenis==1){this.filter.norm=g}if(l.jenis==2){this.filter.nopen=g}if(l.jenis==3){this.filter.nama=g}this.cari()},onClear:function(f){if(f.jenis==1){this.filter.norm=""}if(f.jenis==2){this.filter.nopen=""}if(f.jenis==3){this.filter.nama=""}this.cari()},onFilterTanggalChange:function(o,n,p){var m=this;if(Ext.getClassName(o)=="Ext.form.field.Checkbox"){m.filter.tanggal.checked=n}else{m.filter.tanggal.value=n}m.doFilterTanggal()},onStatusChange:function(m,l,n){this.filter.status.checked=l;this.doFilterStatus()},onSelectStatusAktifitas:function(l,g){if(g&&!this.isFirstLoad){this.filter.status.value=g.get("ID");this.doFilterStatus()}this.isFirstLoad=false},privates:{cari:function(){var n=this,s=n.getView(),o=n.getViewModel(),q=s.down("pagingtoolbar"),p={};if(o.get("listConfig.pencarian.norm.enabled")){if(n.filter.norm==""){delete s.getStore().queryParams.NORM}else{p.NORM=n.filter.norm}}if(n.filter.nopen==""){delete s.getStore().queryParams.NOPEN}else{p.NOPEN=n.filter.nopen}if(n.filter.nama==""){delete s.getStore().queryParams.NAMA}else{p.NAMA=n.filter.nama}s.setParams(p);if(q){q.moveFirst()}else{s.load()}},doFilterTanggal:function(){var n=this,p=n.getView(),o=p.down("pagingtoolbar"),m={sort:Ext.JSON.encode(n.orderSelected)};if(!n.filter.tanggal.checked){delete p.getStore().queryParams.MASUK}else{m.MASUK=Ext.Date.format(n.filter.tanggal.value,"Y-m-d")}p.setParams(m);if(o){o.moveFirst()}else{p.load()}},doFilterStatus:function(){var n=this,p=n.getView(),o=p.down("pagingtoolbar"),m={};if(!n.filter.status.checked){delete p.getStore().queryParams.STATUS}else{m.STATUS=n.filter.status.value}p.setParams(m);if(o){o.moveFirst()}else{p.load()}}}},0,0,0,0,["controller.kunjungan-list"],0,[kunjungan,"ListController"],0));(Ext.cmd.derive("kunjungan.pasienmeninggal.Form",com.Form,{controller:"pasien-meninggal-form",model:"data.model.PasienMeninggal",layout:{type:"vbox",align:"stretch"},title:"Pasien Meninggal",bodyPadding:5,defaults:{margin:"0 2 2 0"},initComponent:function(){var f=this;f.defaults={allowBlank:false};f.items=[{xtype:"fieldcontainer",fieldLabel:"Tanggal Meninggal",layout:{type:"hbox"},items:[{name:"TANGGAL",reference:"tanggal",xtype:"datefield",emptyText:"[Pilih Tanggal Meninggal]",format:"d/m/Y",allowBlank:false,bind:{readOnly:"{formConfig.viewOnly}",minValue:"{formConfig.minDate}",maxValue:"{formConfig.maxDate}"}},{name:"WAKTU",reference:"waktu",width:105,xtype:"timefield",emptyText:"[Jam:Mnt:Dtk]",bind:{readOnly:"{formConfig.viewOnly}"},format:"H:i:s",allowBlank:false,hideTrigger:true}]},{xtype:"textfield",fieldLabel:"Diagnosa Meninggal",name:"DIAGNOSA",bind:{readOnly:"{formConfig.viewOnly}"}},{xtype:"dokter-combo",fieldLabel:"Dokter Penanggung Jawab",name:"DOKTER",bind:{readOnly:"{formConfig.viewOnly}"},listeners:{focus:"onBeforeQuery"}}];com.Form.prototype.initComponent.apply(this,arguments)},onLoadRecord:function(q,y){var w=q.down("[reference=waktu]"),u=q.down("dokter-combo"),s=y.get("REFERENSI"),t=s?(s.DOKTER?Ext.create("data.model.Dokter",s.DOKTER):null):null;if(w){w.setValue(y.get("TANGGAL"))}if(s){var x=s.KUNJUNGAN,v=x.STATUS!=1;q.setFormConfig({viewOnly:v,minDate:x.MASUK,maxDate:q.getSysdate()});u.select(t);u.params.RUANGAN=x.RUANGAN;u.load()}},onBeforeGetRecord:function(o,m){var n=o.down("[reference=tanggal]").getValue(),p=o.down("[reference=waktu]").getValue();if(n){n.setHours(p.getHours());n.setMinutes(p.getMinutes());n.setSeconds(p.getSeconds())}m.TANGGAL=n}},0,["pasien-meninggal-form"],["component","box","container","panel","form","com-form","pasien-meninggal-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"pasien-meninggal-form":true},["widget.pasien-meninggal-form"],0,[kunjungan.pasienmeninggal,"Form"],0));(Ext.cmd.derive("kunjungan.pasienmeninggal.FormController",Ext.app.ViewController,{onBeforeQuery:function(f){if(f.combo){f.combo.getStore().removeAll()}},onSimpan:function(m){var l=this,n=l.getView();n.save(m,{success:"Data pasien meninggal telah tersimpan"})}},0,0,0,0,["controller.pasien-meninggal-form"],0,[kunjungan.pasienmeninggal,"FormController"],0));(Ext.cmd.derive("kunjungan.pasienpulang.Form",com.Form,{controller:"pasien-pulang-form",model:"data.model.PasienPulang",layout:{type:"vbox",align:"stretch"},title:"Pasien Keluar",bodyPadding:5,defaults:{margin:"0 2 2 0"},initComponent:function(){var f=this;f.defaults={allowBlank:false,labelWidth:150};f.items=[{xtype:"fieldcontainer",fieldLabel:"Tanggal Keluar",layout:{type:"hbox"},defaults:{margin:"0 0 2 0"},items:[{name:"TANGGAL",reference:"tanggal",xtype:"datefield",emptyText:"[Pilih Tanggal Keluar]",format:"d/m/Y",allowBlank:false,bind:{readOnly:"{formConfig.viewOnly}",minValue:"{formConfig.minDate}",maxValue:"{formConfig.maxDate}"}},{name:"WAKTU",reference:"waktu",xtype:"timefield",emptyText:"[Jam:Mnt:Dtk]",bind:{readOnly:"{formConfig.viewOnly}"},format:"H:i:s",allowBlank:false,hideTrigger:true}]},{xtype:"referensi-combo",params:{JENIS:45},firstLoad:true,fieldLabel:"Cara Keluar",name:"CARA",reference:"cara",bind:{readOnly:"{formConfig.viewOnly}"},listeners:{select:"onSelectCara"}},{xtype:"referensi-combo",params:{JENIS:46},firstLoad:true,fieldLabel:"Keadaan Keluar",name:"KEADAAN",reference:"keadaaan",bind:{readOnly:"{formConfig.viewOnly}"}},{xtype:"textfield",fieldLabel:"Diagnosa Akhir",name:"DIAGNOSA",bind:{readOnly:"{formConfig.viewOnly}"}},{xtype:"dokter-combo",fieldLabel:"Dokter Penanggung Jawab",name:"DOKTER",bind:{readOnly:"{formConfig.viewOnly}"},listeners:{focus:"onBeforeQuery"}}];com.Form.prototype.initComponent.apply(this,arguments)},onLoadRecord:function(t,x){var A=t.down("[reference=waktu]"),v=t.down("[reference=cara]"),y=t.down("dokter-combo"),z=x.get("REFERENSI"),B=z?(z.DOKTER?Ext.create("data.model.Dokter",z.DOKTER):null):null;if(A){A.setValue(x.get("TANGGAL"))}if(z){var u=z.KUNJUNGAN,C=Ext.create("data.model.Referensi",z.CARA),w=u.STATUS!=1;t.setFormConfig({viewOnly:w,minDate:u.MASUK,maxDate:t.getSysdate()});v.select(C);t.getController().onSelectCara(v,C);v.load();y.select(B);y.params.RUANGAN=u.RUANGAN;y.load()}},onBeforeGetRecord:function(o,m){var n=o.down("[reference=tanggal]").getValue(),p=o.down("[reference=waktu]").getValue();if(n){n.setHours(p.getHours());n.setMinutes(p.getMinutes());n.setSeconds(p.getSeconds())}m.TANGGAL=n;m.STATUS=1}},0,["pasien-pulang-form"],["component","box","container","panel","form","com-form","pasien-pulang-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"pasien-pulang-form":true},["widget.pasien-pulang-form"],0,[kunjungan.pasienpulang,"Form"],0));(Ext.cmd.derive("kunjungan.pasienpulang.FormController",Ext.app.ViewController,{onBeforeQuery:function(f){if(f.combo){f.combo.getStore().removeAll()}},onSelectCara:function(l,g){this.getView().fireEvent("caraselect",g)},onSimpan:function(m){var l=this,n=l.getView();n.save(m,{success:"Data pasien keluar telah tersimpan"},function(v,w,z){if(z){var g=n.app.xitr("ID",1);if(g){var e=Ext.create(g.NAMA_KLAS,{}),f=n.getRecord(),x=f.get("REFERENSI").KUNJUNGAN.REFERENSI.PENDAFTARAN.PENJAMIN,y=x.NOMOR,A=Ext.util.Format.date(f.get("TANGGAL"),"Y-m-d H:i:s");if(e&&y!=""){if(g.REF==x.JENIS){e.updateTanggalPulang({noSEP:y,tglPlg:A,user:n.app.usrNm},function(o,p){if(o){n.notifyMessage("Kirim update tanggal pulang ke BPJS berhasil")}})}}}}})}},0,0,0,0,["controller.pasien-pulang-form"],0,[kunjungan.pasienpulang,"FormController"],0));(Ext.cmd.derive("kunjungan.pasienpulang.Workspace",com.Form,{controller:"pasien-pulang-workspace",viewModel:{data:{viewConfig:{pasienmeninggal:false,simpan:false}},stores:{ppstore:{type:"pasienpulang-store"},pmstore:{type:"pasienmeninggal-store"}}},layout:"border",initComponent:function(){var f=this;f.items=[{region:"center",xtype:"pasien-pulang-form",reference:"pasienkeluar",listeners:{caraselect:"onCaraSelect",save:"onSimpanPasienKeluar"}},{region:"east",width:"45%",collapsible:true,xtype:"pasien-meninggal-form",reference:"pasienmeninggal",split:true,hidden:true,bind:{hidden:"{!viewConfig.pasienmeninggal}"},listeners:{save:"onSimpanPasienMeninggal"}}];f.buttons=[{text:"Simpan",hidden:true,bind:{hidden:"{!viewConfig.simpan}"},handler:"onSimpan"}];com.Form.prototype.initComponent.apply(this,arguments)},load:function(x){var w=this,A=w.down("pasien-pulang-form"),u=w.down("pasien-meninggal-form");if(x){if(Ext.getClassName(x)=="data.model.Kunjungan"){var z=x.get("STATUS")!=1,v=w.getViewModel().get("ppstore"),C=w.getViewModel().get("pmstore"),t={KUNJUNGAN:x.get("NOMOR")},y={KUNJUNGAN:x.get("NOMOR"),NOPEN:x.get("NOPEN"),REFERENSI:{KUNJUNGAN:x.data},TANGGAL:w.getSysdate()},B={KUNJUNGAN:x.get("NOMOR"),REFERENSI:{KUNJUNGAN:x.data},TANGGAL:w.getSysdate()};w.getViewModel().set("viewConfig.simpan",!z);v.queryParams=t;C.queryParams=t;v.load(function(f,g,e){var m=false;if(e){if(f.length>0){var l=f[0].get("REFERENSI")?f[0].get("REFERENSI"):null,n=l.KUNJUNGAN?l.KUNJUNGAN:false;if(!n){l.KUNJUNGAN=x.data}A.loadRecord(f[0]);C.load(function(E,o,s){if(s){if(E.length>0){var q=E[0].get("REFERENSI")?E[0].get("REFERENSI"):null,p=q.KUNJUNGAN?q.KUNJUNGAN:false;if(!p){q.KUNJUNGAN=x.data}u.loadRecord(E[0])}else{u.createRecord(B)}A.focus("TANGGAL")}})}else{m=true}}else{m=true}if(m){A.createRecord(y);u.createRecord(B);A.focus("TANGGAL")}})}}}},0,["pasien-pulang-workspace"],["component","box","container","panel","form","com-form","pasien-pulang-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"pasien-pulang-workspace":true},["widget.pasien-pulang-workspace"],0,[kunjungan.pasienpulang,"Workspace"],0));(Ext.cmd.derive("kunjungan.pasienpulang.WorkspaceController",Ext.app.ViewController,{onCaraSelect:function(f){if(f){this.getViewModel().set("viewConfig.pasienmeninggal",f.get("ID")==6||f.get("ID")==7)}},onSimpan:function(m){var l=this,n=l.getReferences();n.pasienkeluar.getController().onSimpan(m)},onSimpanPasienKeluar:function(m){var n=this,p=n.getView(),o=n.getReferences();if(m.get("CARA")==6||m.get("CARA")==7){o.pasienmeninggal.getController().onSimpan(n)}p.fireEvent("pasienpulang",m)},onSimpanPasienMeninggal:function(f){}},0,0,0,0,["controller.pasien-pulang-workspace"],0,[kunjungan.pasienpulang,"WorkspaceController"],0));(Ext.cmd.derive("kunjungan.perubahantanggal.Form",com.Form,{controller:"kunjungan-perubahantanggal-form",model:"kunjungan.perubahantanggal.Model",viewModel:{data:{formConfig:{jenis:{readOnly:true},tanggalBaru:{minValue:new Date()}}}},bodyPadding:5,items:[{xtype:"combobox",fieldLabel:"Jenis",name:"JENIS",editable:false,store:{fields:["ID","DESKRIPSI"],data:[{ID:1,DESKRIPSI:"Tanggal Masuk"},{ID:2,DESKRIPSI:"Tanggal Keluar"}]},displayField:"DESKRIPSI",valueField:"ID",emptyText:"[Jenis Perubahan]",bind:{readOnly:"{formConfig.jenis.readOnly}"}},{xtype:"fieldcontainer",fieldLabel:"Tanggal Baru",layout:"hbox",flex:1,items:[{name:"TANGGAL_BARU",reference:"tanggal",xtype:"datefield",emptyText:"[Tanggal]",flex:1,format:"d/m/Y",margin:"0 1 0 0",bind:{minValue:"{formConfig.tanggalBaru.minValue}"}},{name:"WAKTU",reference:"waktu",width:105,xtype:"timefield",emptyText:"[Jam:Mnt:Dtk]",format:"H:i:s",hideTrigger:true}]}],buttons:[{text:"Ubah",ui:"soft-blue",iconCls:"x-fa fa-pencil-square-o",handler:"onUbah"}],onLoadRecord:function(m,l){var n=m.down("[name=WAKTU]");n.setValue(l.get("TANGGAL_BARU"))},onBeforeGetRecord:function(o,m){var n=o.down("[reference=tanggal]").getValue(),p=o.down("[reference=waktu]").getValue();n.setHours(p.getHours());n.setMinutes(p.getMinutes());n.setSeconds(p.getSeconds());m.TANGGAL_BARU=n}},0,["kunjungan-perubahantanggal-form"],["component","box","container","panel","form","com-form","kunjungan-perubahantanggal-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"kunjungan-perubahantanggal-form":true},["widget.kunjungan-perubahantanggal-form"],0,[kunjungan.perubahantanggal,"Form"],0));(Ext.cmd.derive("kunjungan.perubahantanggal.FormController",Ext.app.ViewController,{onUbah:function(s){var p=this,t=p.getView(),q=p.getViewModel(),u=t.getRecord(),o=q.get("formConfig.tanggalBaru.minValueBefore");if(!u){t.notifyMessage("Silahkan cek tanggal & waktu baru yang anda inputkan");return}if(o>u.get("TANGGAL_BARU")){t.notifyMessage("Tanggal & waktu yang anda inputkan tidak boleh kurang dari tanggal "+Ext.Date.format(o,"d-m-Y H:i:s"));return}if(u.get("TANGGAL_LAMA")==u.get("TANGGAL_BARU")){t.notifyMessage("Anda belum melakukan perubahan tanggal & waktu");return}t.save(s,{success:"Ubah Tanggal Kunjungan sudah berhasil diubah"})}},0,0,0,0,["controller.kunjungan-perubahantanggal-form"],0,[kunjungan.perubahantanggal,"FormController"],0));(Ext.cmd.derive("kunjungan.titipan.Form",com.Form,{controller:"kunjungan-titipan-form",model:"data.model.Kunjungan",items:[{xtype:"textfield",name:"TITIPAN",hidden:true},{xtype:"referensi-combo",fieldLabel:"Pilih kelas titipan",labelAlign:"top",params:{JENIS:19,STATUS:1},name:"TITIPAN_KELAS",firstLoad:true,editable:false,allowBlank:false}],buttons:[{text:"Titipkan",ui:"soft-blue",handler:"onTitipkan"}]},0,["kunjungan-titipan-form"],["component","box","container","panel","form","com-form","kunjungan-titipan-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"kunjungan-titipan-form":true},["widget.kunjungan-titipan-form"],0,[kunjungan.titipan,"Form"],0));(Ext.cmd.derive("kunjungan.titipan.FormController",Ext.app.ViewController,{onTitipkan:function(m){var l=this,n=l.getView();n.save(m,{success:"Pasien sudah berhasil dititip"})}},0,0,0,0,["controller.kunjungan-titipan-form"],0,[kunjungan.titipan,"FormController"],0));(Ext.cmd.derive("kunjungan.widget.Info",com.Form,{controller:"kunjungan-widget-info",viewModel:{data:{pasien:undefined,buttons:{batal:false},dataFound:false}},cls:"shadow-panel",border:true,inRefresh:false,layout:{type:"vbox",align:"stretch"},header:{iconCls:"x-fa fa-users",title:"Kunjungan",margin:0,padding:"5 10 1 10",cls:"x-color-w",layout:{type:"hbox",align:"middle"},items:[{xtype:"component",flex:1},{xtype:"button",iconCls:"x-fa fa-list",tooltip:"Tampilkan Detil",ui:"soft-blue",bind:{hidden:"{!dataFound}"},margin:"0 0 0 1",handler:"onDetilKunjungan"},{xtype:"button",iconCls:"x-fa fa-history",tooltip:"History Kunjungan",ui:"soft-cyan",bind:{hidden:"{!dataFound}"},margin:"0 0 0 1",handler:"onHistoryKunjungan"},{xtype:"button",iconCls:"x-fa fa-minus-circle",tooltip:"Batalkan Kunjungan",bind:{hidden:"{!buttons.batal}"},ui:"soft-red",margin:"0 0 0 1",handler:"onBatalKunjungan"}]},bodyPadding:5,items:[{xtype:"container",layout:"hbox",items:[{xtype:"pendaftaran-short-detil",flex:1,reference:"pendaftaran"},{xtype:"kunjungan-detil",flex:1,reference:"kunjungan"}]},{xtype:"penjamin-detil",flex:1,reference:"penjamin"}],refresh:function(){if(!this.inRefresh){this.getController().init()}}},0,["kunjungan-widget-info"],["component","box","container","panel","form","com-form","kunjungan-widget-info"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"kunjungan-widget-info":true},["widget.kunjungan-widget-info"],0,[kunjungan.widget,"Info"],0));(Ext.cmd.derive("kunjungan.widget.InfoController",Ext.app.ViewController,{init:function(){var w=this,t=w.getView(),v=w.getViewModel(),u=w.getReferences(),s=v.get("pasien"),e=w.getXpriv(),q=e("110802",false);if(!q){v.set("buttons.batal",false)}t.inRefresh=true;u.kunjungan.load({NORM:s.get("NORM"),STATUS:Ext.JSON.encode([1,2]),start:0,limit:1},function(g,f){try{if(f){u.penjamin.load({NOPEN:g.get("NOPEN"),NORM:s.get("NORM")});u.pendaftaran.load({NOMOR:g.get("NOPEN")});var l=g.get("REFERENSI");v.set("igdirna",l.RUANGAN.JENIS_KUNJUNGAN==2||l.RUANGAN.JENIS_KUNJUNGAN==3);v.set("buttons.batal",g.get("STATUS")==1)}else{v.set("buttons.batal",false)}t.inRefresh=false;v.set("dataFound",f);if(!q){v.set("buttons.batal",false)}}catch(m){}})},onDetilKunjungan:function(u){var w=this,v=w.getViewModel(),g=w.getReferences(),e=v.get("pasien"),f=g.pendaftaran.getRecord(),y=g.kunjungan.getRecord(),x=g.penjamin.getRecord();this.getView().fireEvent("detilkunjungan",u,e,f,y,x)},onHistoryKunjungan:function(u){var w=this,v=w.getViewModel(),g=w.getReferences(),e=v.get("pasien"),f=g.pendaftaran.getRecord(),y=g.kunjungan.getRecord(),x=g.penjamin.getRecord();this.getView().fireEvent("historykunjungan",u,e,f,y,x)},onBatalKunjungan:function(q){var p=this,u=p.getView(),t=p.getReferences(),v=t.kunjungan.getRecord();if(v){var w=p.getXpriv(),s=w?false:true;if(w){s=!w("110802",false)}if(s){u.notifyMessage("Anda tidak memiliki Hak Akses untuk melakukan Pembatalan kunjungan!");return}v.showError=true;v.animateTarget=q;v.scope=p;u.showMessageBox({title:"Pembatalan Kunjungan",message:"Anda yakin ingin membatalkan kunjungan ini ?",ui:"window-red",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:q,fn:function(e){if(e==="yes"){v.set("STATUS",0);v.save({callback:function(f,l,g){if(g){u.notifyMessage("Pembatalan kunjungan berhasil")}else{f.set("STATUS",1)}}})}else{v.set("STATUS",1)}}})}p.getView().fireEvent("batal")},privates:{getXpriv:function(){var g=webservice.app,l=g?g.xpriv:false;return l}}},0,0,0,0,["controller.kunjungan-widget-info"],0,[kunjungan.widget,"InfoController"],0));(Ext.cmd.derive("layanan.JasaTuslahFarmasi.Model",data.model.Model,{serviceName:"layanan/jasatuslahfarmasi",fields:[{name:"NOMOR",type:"string"},{name:"KUNJUNGAN",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"FARMASI",type:"int"},{name:"JUMLAH",type:"float"},{name:"HARGA",type:"int"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"NOMOR"},0,0,0,0,0,0,[layanan.JasaTuslahFarmasi,"Model"],0));(Ext.cmd.derive("layanan.JasaTuslahFarmasi.Store",data.store.Store,{model:"layanan.JasaTuslahFarmasi.Model"},0,0,0,0,["store.layanan-jasa-tuslah-farmasi-store"],0,[layanan.JasaTuslahFarmasi,"Store"],0));(Ext.cmd.derive("layanan.kelahiran.Model",data.model.Model,{serviceName:"layanan/kelahiran",fields:[{name:"ID",type:"int"},{name:"NOPEN",type:"string"},{name:"KUNJUNGAN",type:"string"},{name:"NAMA",type:"string"},{name:"JENIS_KELAMIN",type:"int"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"BERAT",type:"int"},{name:"PANJANG",type:"int"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[layanan.kelahiran,"Model"],0));(Ext.cmd.derive("layanan.kelahiran.Store",data.store.Store,{model:"layanan.kelahiran.Model"},0,0,0,0,["store.layanan-kelahiran-store"],0,[layanan.kelahiran,"Store"],0));(Ext.cmd.derive("layanan.Links",com.Tab,{border:true,cls:"x-br-top",ui:"header-tab",createLinks:false,items:[],activeTab:0,load:function(l){var m=this;m.kunjungan=l;if(!m.createLinks){m.createComponentLinks(l);m.createLinks=true}var n=m.getActiveTab();if(n){n.load(l)}},listeners:{tabchange:"onTabChange"},privates:{createComponentLinks:function(y){var I=this,F=I.app.xpriv("110107"),E=I.app.xpriv("110108"),G=I.app.xpriv("110109"),A=I.app.xpriv("110303")||I.app.xpriv("110604"),w=I.app.xpriv("110304")||I.app.xpriv("110605"),x=I.app.xpriv("110305")||I.app.xpriv("110606"),C=I.app.xpriv("1110"),D=F||E||G;if(y){var H=y.get("JENIS_KUNJUNGAN"),B=I.getReferensi(y.data,"MUTASI"),z=B?true:false;I.suspendLayouts();if(H==1||H==2||H==3){I.add({title:"Rekam Medis",iconCls:"x-fa fa-file-text-o",xtype:"rekammedis-workspace"})}if(H==11){I.add({title:"Layanan Farmasi",xtype:"layanan-farmasi-workspace"});I.add({title:"Retur Pelayanan Farmasi",xtype:"retur-layanan-farmasi-workspace"})}else{if(((H!=4||H!=5||H!=11||H)&&!D)||(H==4||H==5)){I.add({iconCls:"x-fa fa-user-md",title:"Layanan",xtype:"tindakan-medis-workspace"})}if(H==4){I.add({iconCls:"x-fa fa-flask",title:"Hasil Laboratorium",xtype:"workspace-input-hasil-lab"});I.add({iconCls:"x-fa fa-eyedropper",title:"Hasil Patologi Anatomi",xtype:"workspace-hasil-pa"})}if(H==5){I.add({iconCls:"x-fa fa-odnoklassniki-square",title:"Hasil Radiologi",xtype:"workspace-hasil-rad"})}}if(!(H==4||H==5||H==11)){if(!E&&!G&&A){I.add({iconCls:"x-fa fa-flask",title:"Laboratorium",xtype:"laboratorium-workspace",listeners:{reopen:"onReopen"}})}if(!F&&!G&&w){I.add({iconCls:"x-fa fa-odnoklassniki-square",title:"Radiologi",xtype:"radiologi-workspace",listeners:{reopen:"onReopen"}})}if(!F&&!E&&x){I.add({iconCls:"x-fa fa-eraser",title:"E-Resep",xtype:"resep-workspace",listeners:{reopen:"onReopen"}})}if(!D){I.add({iconCls:"x-fa fa-wheelchair",title:"Konsul",xtype:"konsultasi-workspace"});I.add({iconCls:"x-fa fa-newspaper-o",title:"Laporan Operasi",xtype:"workspace-list-lap-operasi"})}}if(H==2||H==3||H==6||H==12){if(!D){I.add({iconCls:"x-fa fa-heart-o",title:"Pemakaian O2",xtype:"pemakaian-o2-workspace"});if(H==3){I.add({iconCls:"x-fa fa-bed",xtype:"mutasi-workspace",title:"Mutasi"})}}}if((H==1||H==2||H==3)&&!D&&!z){I.add({iconCls:"x-fa fa-envelope-o",xtype:"pendaftaran-rujukan-keluar-workspace",title:"Rujukan Keluar"})}if((H==2||H==3)&&!D&&!z){I.add({iconCls:"x-fa fa-arrow-circle-o-right",xtype:"pasien-pulang-workspace",title:"Pasien Pulang",listeners:{pasienpulang:"onPasienPulang"}})}I.resumeLayouts()}I.setActiveTab(0)}}},0,["layanan-links"],["component","box","container","panel","tabpanel","com-tab","layanan-links"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"layanan-links":true},["widget.layanan-links"],0,[layanan,"Links"],0));(Ext.cmd.derive("layanan.Workspace",com.Form,{controller:"layanan-workspace",viewModel:{data:{pasien:undefined,pendaftaran:undefined,kunjungan:undefined,allowAuto:false,allowBatalFinal:false},formulas:{getFormatPendaftaran:function(m){var l=m("pendaftaran.NOMOR"),n=l?l.substring(0,6)+"."+l.substring(6):"";return n},isFinal:function(l){var g=l("kunjungan.STATUS");g=g!=undefined?g:1;return g==2||g==0},isFinalAllow:function(f){return f("isFinal")||f("allowAuto")},isInap:function(q){var n=q("kunjungan.JENIS_KUNJUNGAN"),p=q("kunjungan.REFERENSI")?q("kunjungan.REFERENSI"):null,s=p?(p.PEMBATALAN?p.PEMBATALAN:null):null,o=s?s.JENIS==1:false;n=n!=undefined?n:1;return(o?false:n==3)||q("isFinal")},isInapAllow:function(f){return f("isInap")||f("allowAuto")},isAllowBatalFinal:function(n){var l=n("isFinalAllow"),m=n("allowBatalFinal");if(!l){return false}return m},isBukanPenunjang:function(l){var g=l("kunjungan.JENIS_KUNJUNGAN");return g==1||g==2||g==3}}},layout:{type:"vbox",align:"stretch"},title:"Detil Kunjungan",header:{itemPosition:1,defaults:{margin:"0 1 0 0"},items:[{xtype:"displayfield",bind:{value:"<strong>No. Pendaftaran: {getFormatPendaftaran}</strong>"},margin:"0 5 0 0",fieldStyle:"margin-top: 12px"},{xtype:"button",ui:"soft-cerulen",text:"Final",tooltip:"Final Kunjungan",hidden:true,bind:{hidden:"{isInapAllow}"},handler:"onFinal"},{xtype:"button",iconCls:"x-fa fa-minus-circle",tooltip:"Batalkan Kunjungan",bind:{hidden:"{isFinalAllow}"},ui:"soft-red",handler:"onBatalKunjungan"},{xtype:"button",iconCls:"x-fa fa-chain-broken",tooltip:"Batalkan Final",bind:{hidden:"{!isAllowBatalFinal}"},ui:"soft-red",handler:"onBatalFinal"},{xtype:"button",ui:"soft-asperages",iconCls:"x-fa fa-refresh",tooltip:"Perbarui Data",handler:"onReload"}]},items:[{xtype:"container",layout:{type:"hbox"},padding:5,items:[{xtype:"pasien-short-detil",reference:"pasien",flex:1,border:false},{xtype:"container",flex:1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"kunjungan-detil",cls:"",margin:"0 0 5 0",reference:"kunjungan"},{xtype:"penjamin-detil",cls:"",layout:{type:"vbox",align:"right"},reference:"penjamin"}]}]},{xtype:"layanan-links",flex:1,reference:"layananlinks"}],load:function(e,g,H){var L=this,K=L.getViewModel(),J=L.getReferences(),M=g?g.get("PENJAMIN"):undefined;K.set("pasien",e);K.set("pendaftaran",g);K.set("kunjungan",H);J.pasien.setFormConfig({edit:L.app.xpriv("100701",false)});if(e){J.pasien.load(e)}if(H){J.kunjungan.load(H)}if(M){J.penjamin.load(Ext.create("data.model.Penjamin",M))}if(H){J.layananlinks.load(H)}if(K){var B=L.app.xpriv("110107"),E=L.app.xpriv("110108"),F=L.app.xpriv("110109"),D=B||E||F,f=L.app.xpriv("110804"),I=H.get("JENIS_KUNJUNGAN")?H.get("JENIS_KUNJUNGAN"):1,C=H.get("REFERENSI"),G=C?C.PENDAFTARAN:g;if(I==4||I==5||I==11){D=false}K.set("allowAuto",D);if(G.STATUS==2){f=false}K.set("allowBatalFinal",f)}}},0,["layanan-workspace"],["component","box","container","panel","form","com-form","layanan-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"layanan-workspace":true},["widget.layanan-workspace"],0,[layanan,"Workspace"],0));(Ext.cmd.derive("layanan.WorkspaceController",Ext.app.ViewController,{onReload:function(){var l=this,m=l.getView(),n=l.getViewModel();m.setLoading(true);(new Ext.util.DelayedTask(function(){if(data.model){data.model.Kunjungan.load(n.get("kunjungan").get("NOMOR"),{callback:function(g,f,e){if(e){m.load(n.get("pasien"),n.get("pendaftaran"),g)}m.setLoading(false)}})}})).delay(1500)},onFinal:function(s){var u=this,p=u.getView(),t=u.getViewModel(),e=t.get("kunjungan"),q=e?e.get("STATUS"):0;if(q==0){return}p.showMessageBox({title:"Final Kunjungan",message:"Anda yakin ingin menyelesaikan / memfinalkan kunjungan ini ?",ui:"window-red",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:s,fn:function(f){if(f==="yes"){e.showError=true;e.animateTarget=s;e.scope=u;e.set("STATUS",2);e.save({callback:function(l,g,m){if(m){p.notifyMessage("Kunjungan telah difinalkan");u.onReload()}else{e.set("STATUS",q)}}})}else{e.set("STATUS",q)}}})},onBatalKunjungan:function(q){var p=this,u=p.getView(),t=p.getReferences(),v=t.kunjungan.getRecord();if(v){var w=p.getView().app.xpriv,s=w?false:true;if(w){s=!w("110802",false)}if(s){u.notifyMessage("Anda tidak memiliki Hak Akses untuk melakukan Pembatalan kunjungan!");return}v.showError=true;v.animateTarget=q;v.scope=p;u.showMessageBox({title:"Pembatalan Kunjungan",message:"Anda yakin ingin membatalkan kunjungan ini ?",ui:"window-red",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:q,fn:function(e){if(e==="yes"){v.set("STATUS",0);v.save({callback:function(f,l,g){if(g){u.notifyMessage("Pembatalan kunjungan berhasil","danger-blue");p.onReload()}else{f.set("STATUS",1)}}})}else{v.set("STATUS",1)}}})}},onBatalFinal:function(q){var o=this,t=o.getView(),p=o.getViewModel(),u=p.get("kunjungan"),s=true;if(t.app){s=!t.app.xpriv("110804")}if(s){t.notifyMessage("Anda tidak memiliki Hak Akses untuk melakukan Pembatalan final kunjungan!");return}t.showMessageBox({title:"Pembatalan Final",message:"Anda yakin ingin membatalkan final kunjungan?",ui:"window-red",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:q,fn:function(e){if(e==="yes"){t.openDialog("",true,100,50,{xtype:"pembatalan-kunjungan-form",title:"Pembatalan Final Kunjungan",ui:"panel-red",showCloseButton:true},function(l,f){var g=f.down("pembatalan-kunjungan-form");g.on({close:function(){f.close()},save:function(m,w,n){o.onReload();f.close()}});g.createRecord({KUNJUNGAN:u.get("NOMOR"),JENIS:1,TANGGAL:t.getSysdate()})})}}})},onPasienPulang:function(g){var l=this;l.onReload()},onReopen:function(f){this.getView().fireEvent("reopen",f)},onTabChange:function(e,q){var p=this.getViewModel();try{var s=p.get("kunjungan");if(q.load){q.load(s)}}catch(o){console.log("Error: "+o.message)}}},0,0,0,0,["controller.layanan-workspace"],0,[layanan,"WorkspaceController"],0));(Ext.cmd.derive("layanan.farmasi.Detil",com.Grid,{controller:"layanan-farmasi-detil",viewModel:{stores:{store:{type:"layananfarmasi-store",autoSync:true},kunjungan:{type:"kunjungan-store"},tariffarmasi:{type:"tariffarmasiperkelas-store"},returlayananfarm:{type:"returlayananfarmasi-store"},marginpenjamin:{type:"master-marginpenjaminfarmasi-store"}},data:{notFinalKunjungan:true,ruangan:0,isEdit:0}},bind:{store:"{store}"},title:"Detail",header:{items:[{xtype:"button",text:"Jasa Tuslah",tooltip:"Tambah Jasa Tuslah",bind:{disabled:"{!notFinalKunjungan}"},listeners:{click:"onAddTuslah"}}]},ui:"panel-cyan",margin:"2px 2px 2px 2px",viewConfig:{stripeRows:true},initComponent:function(){var f=this;f.cellEditing=new Ext.grid.plugin.CellEditing({clicksToEdit:1,listeners:{beforeedit:"BeforeEdit"}});f.comboBarang=Ext.create("master.barang.Combo",{listeners:{select:"onSelectBarang",focus:"onFocuBarang"}});f.plugins=[f.cellEditing],f.columns=[{xtype:"rownumberer",text:"No",align:"left",width:40},{text:"",dataIndex:"STATUS",renderer:"RenderStatus",width:1},{text:"Klp.Racik",dataIndex:"GROUP_RACIKAN",sortable:false,renderer:"onRenderRacikan",width:65},{text:"Nama Obat",sortable:false,dataIndex:"FARMASI",renderer:"onRenderObat",reference:"ObatPengganti",flex:1,editor:f.comboBarang},{text:"Jumlah",dataIndex:"JUMLAH",hideTrigger:true,width:75,editor:{xtype:"numberfield",hideTrigger:true,reference:"jumlah",name:"JUMLAH"}},{text:"Aturan Pakai",dataIndex:"ATURAN_PAKAI",sortable:false,renderer:"onRenderAturanPakai",flex:1,editor:{xtype:"referensi-combo",params:{JENIS:41},minChars:2,name:"ATURAN_PAKAI",queryMode:"remote",queryParam:"QUERY",reference:"aturanpakai",emptyText:"[ Aturan Pakai ]",hideTrigger:true,typeAhead:true,flex:1,listeners:{select:"onSelectAturanPakai",focus:"onFocuAturanPakai"}}},{text:"Keterangan",dataIndex:"KETERANGAN",sortable:false,flex:1,editor:{xtype:"textfield",name:"KETERANGAN"}},{text:"Hari",width:75,dataIndex:"HARI",reference:"hari",editor:{xtype:"numberfield",hideTrigger:true}},{text:"Alasan Jika Tidak Terlayani",dataIndex:"ALASAN_TIDAK_TERLAYANI",sortable:false,flex:1,editor:{xtype:"textfield"}},{text:"Harga (Rp)",format:"0,00",renderer:"Renderhargasatuan",align:"right",width:100,summaryRenderer:"onSummaryInfoRenderer"},{xtype:"numbercolumn",text:"Total (Rp)",align:"right",format:"0,00",width:120,renderer:"onTotalRenderer",summaryRenderer:"onSummaryRenderer"}],f.features=[{ftype:"summary",dock:"bottom"}],f.buttons=[{xtype:"component",flex:1},{text:"Cetak Kwitansi Pelayanan",iconCls:"x-fa fa-print",reference:"printkwitansipelayananfarmasi",handler:"oncetakkwitansi",bind:{hidden:"{notFinalKunjungan}"}},{text:"Cetak Etiket",iconCls:"x-fa fa-print",handler:"onceetaketiket",reference:"printetiketpelayananfarmasi",bind:{hidden:"{notFinalKunjungan}"}}];f.callParent(arguments)},load:function(w){var v=this,t=w.get("NOMOR"),y=w.get("RUANGAN"),z=w.get("REFERENSI"),s=z.PENDAFTARAN,A=s.PENJAMIN,x=v.getViewModel(),u=x.get("store");k=x.get("kunjungan");tarif=x.get("tariffarmasi"),margin=x.get("marginpenjamin");x.set("ruangan",y);if(w){x.set("notFinalKunjungan",w.get("STATUS")!=2);x.set("isEdit",w.get("STATUS"))}if(k){k.queryParams=k.queryParams||{};if(t){k.queryParams.NOMOR=t;k.load()}}if(tarif){tarif.queryParams=tarif.queryParams||{};if(w){tarif.queryParams={KELAS:A.KELAS,STATUS:1}}tarif.load()}if(margin){margin.setQueryParams({PENJAMIN:A.JENIS,JENIS:1,TANGGAL_SK:s.TANGGAL,start:0,limit:1});margin.load()}(new Ext.util.DelayedTask(function(){if(u){u.queryParams=u.queryParams||{};if(w){u.queryParams.KUNJUNGAN=w.get("NOMOR")}u.load()}})).delay(1000)},getData:function(){var m=this,n=m.getViewModel().get("store"),l=[];n.each(function(e){l.push(e.data)});return l}},0,["layanan-farmasi-detil"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","layanan-farmasi-detil"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"layanan-farmasi-detil":true},["widget.layanan-farmasi-detil"],0,[layanan.farmasi,"Detil"],0));(Ext.cmd.derive("layanan.farmasi.DetilController",Ext.app.ViewController,{currentRecord:undefined,presentase:0,margin:0,totalretur:0,total:0,initViewModel:function(){var o=this,s=o.getView(),q=o.getStore("store"),p=o.getStore("tariffarmasi"),n=o.getStore("marginpenjamin");p.doAfterLoad=function(e){e.each(function(f){o.presentase=Number(f.get("FARMASI"))})};n.doAfterLoad=function(e){e.each(function(f){o.margin=Number(f.get("MARGIN"))})};q.doAfterLoad=function(e){var f=0;e.each(function(l){var g=o.getHargaJual(l),C=o.isKategoryPenjualan(l),A=g*(o.margin/100),y=g+(C?A:0),m=y*(o.presentase/100),B=y+(C?m:0),z=Number(l.get("JUMLAH"))*B;f=f+z});o.total=f}},onAddTuslah:function(u){var o=this,s=o.getView(),p=o.getViewModel(),q=p.get("store"),t=q.getData().items[0].get("KUNJUNGAN");dialog=s.openDialog("",true,"70%","200px",{xtype:"layanan-farmasi-form-tuslah",title:"Form Jasa Tuslah",ui:"panel-cyan",showCloseButton:true,hideColumns:true,listeners:{close:function(){dialog.close();q.reload()}}},function(g,e){var f=e.down("layanan-farmasi-form-tuslah");f.setRuangan(p.get("ruangan"));f.createRecord({KUNJUNGAN:t});f.on("save",function(l){s.refresh();e.close()})})},getHargaJual:function(n){var p=n.get("REFERENSI")?n.get("REFERENSI"):null,o=p?(p.FARMASI?p.FARMASI:null):null,q=o?(o.REFERENSI?o.REFERENSI:null):null,s=q?(q.HARGA?q.HARGA:null):null;return s?Number(s.HARGA_JUAL):0},isKategoryPenjualan:function(n){var p=n.get("REFERENSI"),o=p?(p.FARMASI?p.FARMASI:null):null,m=o?(o.KATEGORI?o.KATEGORI.substring(0,3):""):"";return m=="101"||m=="102"},getTotal:function(){var l=this,n=l.getStore("store"),m=0;n.each(function(t){var g=l.getHargaJual(t),f=l.isKategoryPenjualan(t),w=g*(l.margin/100),v=g+(f?w:0),u=v*(l.presentase/100),e=v+(f?u:0);m+=Number(t.get("JUMLAH"))*e});return m},onTotalRenderer:function(D,F,C){var y=this,v=y.getView(),z=y.getHargaJual(C),E=y.isKategoryPenjualan(C),w=z*(y.margin/100),G=z+(E?w:0),B=G*(y.presentase/100),A=G+(E?B:0),x=Number(C.get("JUMLAH"))*A;return Ext.util.Format.number(x,"0,00")},onReturRenderer:function(B,E,z){var w=this,u=w.getView();if(z.get("REFERENSI")){var A=z.get("REFERENSI"),x=0,D=A.RETUR.length;for(var y=0;y<D;y++){var C=Number(A.RETUR[y].JUMLAH);x=x+C}var v=x}else{var v=0}return x},onSummaryRenderer:function(m,o,n){var p='<span style="font-size: 12px; font-weight: bold">'+Ext.util.Format.number(this.getTotal(),"0,00")+"</span>";return p},BeforeEdit:function(o,s,p){var e=this,q=e.getViewModel().get("isEdit");if(q==1){e.currentRecord=s.record}else{return false}},onSelectBarang:function(q,s){var o=this;var p=s.get("REFERENSI"),n=o.currentRecord.get("REFERENSI")||{};if(n){n.FARMASI=p.BARANG}o.currentRecord.set("REFERENSI",n)},onRenderObat:function(n,p,o){var s=o.get("REFERENSI"),q=s?(s.FARMASI?s.FARMASI.NAMA:""):"";return q},Renderhargasatuan:function(x,t,w){var z=this.getHargaJual(w),A=this.isKategoryPenjualan(w),v=this.presentase,u=z*(this.margin/100),p=z+(A?u:0),y=p*(v/100);hrg_jual=p+(A?y:0);return'<span style="color:black;">'+Ext.util.Format.number(hrg_jual,"0,000")+"</span>"},isNullManualEntry:function(l){var m=this,n=m.getViewModel().get("storeCekNull");n.load(function(e,f,g){if(Ext.isArray(e)){l(e.length>0)}})},onSummaryInfoRenderer:function(){return'<span style="font-size: 12px; font-weight: bold">Total (Rp.): </span>'},onFocuBarang:function(s){var t=this.getView,v=s.getViewModel(),p=this.getViewModel().get("ruangan"),w=v.get("store");w.queryParams.RUANGAN=p;w.load();var q=this.currentRecord.get("REFERENSI"),u=q?q.FARMASI:null;rec=u?Ext.create("data.model.Barang",u):null;s.select(rec)},onRenderAturanPakai:function(q,t,u){var o=u.get("ATURAN_PAKAI");if(Ext.isNumeric(o)){var p=u.get("REFERENSI"),s=p?(p.ATURAN_PAKAI?p.ATURAN_PAKAI.DESKRIPSI:""):"";return s}else{var p=u.get("ATURAN_PAKAI");return'<span style="color:black;">'+p+"</span>"}},onSelectAturanPakai:function(m,n){var l=this;d=l.currentRecord.get("REFERENSI")||{};if(d){d.ATURAN_PAKAI=n.data}l.currentRecord.set("REFERENSI",d)},onFocuAturanPakai:function(n){var l=this.currentRecord.get("REFERENSI"),m=l?l.ATURAN_PAKAI:null;rec=m?Ext.create("data.model.Referensi",m):null;n.select(rec)},RenderStatus:function(l){var m=this.getReferences(),n=l!=1;m.printkwitansipelayananfarmasi.setDisabled(!n);m.printetiketpelayananfarmasi.setDisabled(!n);return l},onRenderRacikan:function(f){if(f>0){return'<span style="color:green;"> Racikan['+f+"]</span>"}else{return'<span style="color:black;"> - </span>'}return f},onKirimLayanan:function(o){var m=this,p=m.getView(),n=m.getViewModel();datafm=p.getData(),record=Ext.create("data.model.LayananFarmasi",{}),i=0,baris=0,j=false,jumlah=datafm.length;while(i<datafm.length){record.set("ID",datafm[i].ID);record.set("KUNJUNGAN",datafm[i].KUNJUNGAN);record.set("FARMASI",datafm[i].FARMASI);record.set("JUMLAH",datafm[i].JUMLAH);record.set("ATURAN_PAKAI",datafm[i].ATURAN_PAKAI);record.set("KETERANGAN",datafm[i].KETERANGAN);record.set("ALASAN_TIDAK_TERLAYANI",datafm[i].ALASAN_TIDAK_TERLAYANI);record.set("HARI",datafm[i].HARI);if(datafm[i].ALASAN_TIDAK_TERLAYANI!=""){record.set("STATUS",3)}else{record.set("STATUS",2)}record.showError=true;record.animateTarget=o;record.scope=m;record.save({callback:function(e,g,f){if(g.hasException()||!i){}if(f){baris++;if(jumlah==baris){Ext.toast({html:"Resep Telah Terlayani",headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"});n.get("store").load()}}}});i++}},oncetakkwitansi:function(q){var p=this,s=p.getView(),o=p.getStore("store").getAt(0),n=o.get("KUNJUNGAN");new Ext.util.DelayedTask(function(){s.fireEvent("printkwitansipelayanan",q,n,2)}).delay(1000)},onceetaketiket:function(){var m=this,n=m.getView(),l=m.getStore("store").getAt(0);kjgn=l.get("KUNJUNGAN");new Ext.util.DelayedTask(function(){n.fireEvent("printetiket",kjgn)}).delay(1000)}},0,0,0,0,["controller.layanan-farmasi-detil"],0,[layanan.farmasi,"DetilController"],0));(Ext.cmd.derive("layanan.farmasi.Form",com.Form,{controller:"layanan-farmasi-form",viewModel:{stores:{store:{type:"order-resep-store"}}},layout:{type:"vbox",align:"stretch"},header:{iconCls:"x-fa fa-print",padding:"7px 7px 7px 7px",title:"Copy Resep"},ui:"panel-cyan",margin:"2px 2px 2px 2px",defaults:{margin:"0 2 2 0",readOnly:true},fieldDefaults:{labelAlign:"top",msgTarget:"side"},bodyPadding:5,initComponent:function(){var g=this,l=new Date();g.items=[{xtype:"textfield",name:"NOMOR",reference:"nomorresep"},{xtype:"textfield",name:"PEMBERI_RESEP",fieldLabel:"Pemberi Resep"},{xtype:"datefield",fieldLabel:"Waktu Peresepan",format:"d-m-Y H:m:s",margin:"0 1 0 0",name:"TANGGAL"},{xtype:"textfield",fieldLabel:"Gangguan Ginjal",name:"GANGGUAN_FUNGSI_GINJAL",renderer:"RenderGangguanGinjal"},{xtype:"textfield",fieldLabel:"Hamil",name:"HAMIL",renderer:"ReandeHamil"},{xtype:"textfield",fieldLabel:"Menyusui",name:"MENYUSUI",renderer:"RenderMenyusui"},{xtype:"textfield",fieldLabel:"Diagnosa",name:"DIAGNOSA",flex:1},{xtype:"button",iconCls:"x-fa fa-print",text:"Cetak Copy Resep",handler:"OnCetakCopyResep"}];com.Form.prototype.initComponent.apply(this,arguments)},load:function(e){try{var o=this,p=o.getViewModel().get("store");if(e){p.queryParams.NOMOR=e}p.load({callback:function(m,g,f){if(f){if(m.length>0){var l=m[0];o.loadRecord(l)}}}})}catch(n){}}},0,["layanan-farmasi-form"],["component","box","container","panel","form","com-form","layanan-farmasi-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"layanan-farmasi-form":true},["widget.layanan-farmasi-form"],0,[layanan.farmasi,"Form"],0));(Ext.cmd.derive("layanan.farmasi.FormController",Ext.app.ViewController,{kode:"",init:function(){var f=Ext.getStore("instansi");f=f?f.getAt(0):null;if(f){this.kode=f.get("REFERENSI").PPK.KODE}this.kode=this.kode+(this.kode==""?this.kode:"-")},OnCetakCopyResep:function(s){var w=this,u=w.getView(),v=w.getReferences(),x=v.nomorresep.getValue(),y="Word",z="docx",A=true,t="Cetak Copy Resep";Ext.Msg.show({title:t,message:"Tekan tombol Yes/Ya utk cetak langsung<br/>Tekan tombol No/Tidak untuk Preview",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,defaultButton:"yes",animateTarget:s,fn:function(e){if(e!="yes"){y="Pdf";z="pdf";A=false}u.cetak({NAME:"layanan.farmasi."+w.kode+"CetakCopyResep",TYPE:y,EXT:z,PARAMETER:{PNOMOR:x,CETAK_HEADER:1},REQUEST_FOR_PRINT:A,PRINT_NAME:"CetakResep"},function(f){u.openDialog("Print Preview",true,0,0,{xtype:"panel",title:t},function(l,g){g.down("panel").update("<iframe style='width: 100%; height: 100%' src='"+f+"'></iframe>")})})}})},RenderGangguanGinjal:function(f){if(f>0){return'<span style="color:black;"> Ya </span>'}else{return'<span style="color:black;"> Tidak </span>'}return f}},0,0,0,0,["controller.layanan-farmasi-form"],0,[layanan.farmasi,"FormController"],0));(Ext.cmd.derive("layanan.farmasi.FormTuslah",com.Form,{controller:"layanan-farmasi-form-tuslah",layout:{type:"hbox"},ui:"panel-cyan",margin:"2px 2px 2px 2px",defaults:{margin:"0 2 2 0"},fieldDefaults:{labelAlign:"top",msgTarget:"side"},bodyPadding:15,model:"layanan.JasaTuslahFarmasi.Model",config:{ruangan:undefined},initComponent:function(){var f=this;f.items=[{xtype:"barang-combo",flex:2,hideTrigger:true,reference:"barangcombo",allowBlank:false,emptyText:"[ Nama Tuslah ]",name:"FARMASI",params:{STATUS:1,KATEGORI:10701}},{xtype:"numberfield",margin:"0 1 0 0",reference:"jumlah",name:"JUMLAH",emptyText:"[ Jumlah ]",flex:1},{xtype:"button",iconCls:"x-fa fa-save",text:"Tambahkan",handler:"OnSimpanJasaTuslah"}];com.Form.prototype.initComponent.apply(this,arguments)},onLoadRecord:function(o,n){var p=o.getRuangan(),m=o.down("barang-combo");if(p){m.getStore().setQueryParams({RUANGAN:p})}},onBeforeGetRecord:function(n,m){var p=n.down("barang-combo").getSelection(),o=n.down("[reference=jumlah]").getValue();m.REFERENSI={RACIKAN:{ID:0,DESKRIPSI:"Jasa Tuslah"}};m.JUMLAH=o;if(p){m.REFERENSI.BARANG=p.data;m.HARGA=p.data.REFERENSI.BARANG.REFERENSI.HARGA.ID}}},0,["layanan-farmasi-form-tuslah"],["component","box","container","panel","form","com-form","layanan-farmasi-form-tuslah"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"layanan-farmasi-form-tuslah":true},["widget.layanan-farmasi-form-tuslah"],0,[layanan.farmasi,"FormTuslah"],0));(Ext.cmd.derive("layanan.farmasi.FormTuslahController",Ext.app.ViewController,{OnSimpanJasaTuslah:function(o){var n=this,p=n.getView(),m=p.getRecord();if(p.getForm().isValid()){m.save({callback:function(e,g,f){if(f){p.save(o)}else{p.notifyMessage("Gagal")}}})}}},0,0,0,0,["controller.layanan-farmasi-form-tuslah"],0,[layanan.farmasi,"FormTuslahController"],0));(Ext.cmd.derive("layanan.farmasi.TransaksiLangsung.Detil",Ext.grid.Panel,{viewModel:{stores:{store:{type:"order-detil-resep-store"}}},bind:{store:"{store}"},title:"Detil",border:false,columns:[{xtype:"rownumberer",text:"No",align:"left",width:50},{xtype:"templatecolumn",text:"Nama Obat",flex:3,sortable:false,tpl:"<div>{REFERENSI.BARANG.NAMA}</div>"},{text:"Aturan Pakai",dataIndex:"ATURAN_PAKAI",sortable:false,flex:2},{text:"Jumlah",dataIndex:"JUMLAH",sortable:false,flex:1},{text:"Harga (Rp)",format:"0,00",renderer:"Renderhargasatuan",align:"right",width:100,summaryRenderer:"onSummaryInfoRenderer"},{xtype:"numbercolumn",text:"Jumlah Harga(Rp)",align:"right",format:"0,00",width:120,renderer:"onTotalRenderer",summaryRenderer:"onSummaryRenderer"},{xtype:"widgetcolumn",align:"center",text:"#",width:70,widget:{xtype:"fieldcontainer",flex:1,defaults:{padding:2},items:[{xtype:"button",action:0,iconCls:"x-fa fa-minus-circle",ui:"soft-red",handler:"onBatalOrder",bind:{hidden:"{columnCommandConfig.hideBatalOrder}"}}]}}],features:[{ftype:"summary",dock:"bottom"}],dockedItems:[{xtype:"pagingtoolbar",bind:{store:"{store}"},dock:"bottom",displayInfo:true}],getData:function(){var n=this,m=n.getViewModel().get("store"),l=[];m.each(function(e){l.push(e.data)});return l},addRow:function(l){var n=this,m=n.getViewModel().get("store");m.add(l)},removeDataStore:function(){this.getViewModel().get("store").removeAll()},removeAnotherModels:function(){var l=this.getViewModel().get("store"),m=[];l.each(function(e){if(Ext.getClassName(e)!="data.model.OrderDetilResep"){m.push(e)}});var n=new Ext.util.DelayedTask(function(){l.remove(m)});n.delay(100)}},0,["transaksi-farmasi-langsung-detil"],["component","box","container","panel","tablepanel","gridpanel","grid","transaksi-farmasi-langsung-detil"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"transaksi-farmasi-langsung-detil":true},["widget.transaksi-farmasi-langsung-detil"],0,[layanan.farmasi.TransaksiLangsung,"Detil"],0));(Ext.cmd.derive("layanan.farmasi.TransaksiLangsung.DetilController",Ext.app.ViewController,{onBatalOrder:function(m){var n=this,o=n.getStore("store"),p=m.ownerCt.getWidgetRecord();o.remove(p)},onRenderAturanPakai:function(q,t,u){var o=u.get("ATURAN_PAKAI");if(Ext.isNumeric(o)){var p=u.get("REFERENSI"),s=p?(p.ATURANPAKAI?p.ATURANPAKAI.DESKRIPSI:""):"";console.log(p);return s}else{var p=u.get("ATURAN_PAKAI");return'<span style="color:black;">'+p+"</span>"}},onRenderRacikan:function(f){console.log(f);if(f>0){return'<span style="color:green;"> Racikan['+f+"]</span>"}else{return'<span style="color:black;"> Non Racik </span>'}return f}},0,0,0,0,["controller.transaksi-farmasi-langsung-detil"],0,[layanan.farmasi.TransaksiLangsung,"DetilController"],0));(Ext.cmd.derive("layanan.farmasi.TransaksiLangsung.Form",Ext.form.Panel,{controller:"transaksi-farmasi-langsung-form",layout:{type:"vbox",align:"stretch"},bodyPadding:15,initComponent:function(){var f=this;f.items=[{xtype:"fieldcontainer",layout:"hbox",combineErrors:true,defaultType:"textfield",defaults:{hideLabel:"true",margin:"0 0 0 5"},items:[{xtype:"barang-combo",flex:3,hideTrigger:true,reference:"barangcombo",allowBlank:false,name:"FARMASI",allowBlank:false},{xtype:"referensi-combo",params:{JENIS:41},minChars:2,name:"ATURAN_PAKAI",queryMode:"remote",queryParam:"QUERY",reference:"aturanpakai",emptyText:"[ Aturan Pakai ]",hideTrigger:true,typeAhead:true,flex:2,listeners:{beforequery:"onBeforeQuery"}},{name:"JUMLAH",flex:1,emptyText:"Jumlah",allowBlank:false},{xtype:"button",iconCls:"x-fa fa-save",ui:"soft-green",handler:"onSimpan"}]}];Ext.form.Panel.prototype.initComponent.apply(this,arguments)},focus:function(){this.down("[reference=barangcombo]").focus(false,100)}},0,["transaksi-farmasi-langsung-form"],["component","box","container","panel","form","transaksi-farmasi-langsung-form"],{component:true,box:true,container:true,panel:true,form:true,"transaksi-farmasi-langsung-form":true},["widget.transaksi-farmasi-langsung-form"],0,[layanan.farmasi.TransaksiLangsung,"Form"],0));(Ext.cmd.derive("layanan.farmasi.TransaksiLangsung.FormController",Ext.app.ViewController,{onBeforeQuery:function(f){f.combo.getStore().removeAll()}},0,0,0,0,["controller.transaksi-farmasi-langsung-form"],0,[layanan.farmasi.TransaksiLangsung,"FormController"],0));(Ext.cmd.derive("layanan.farmasi.TransaksiLangsung.Tagihan",Ext.form.Panel,{layout:{type:"vbox",align:"stretch"},bodyPadding:5,defaults:{margin:5},fieldDefaults:{labelAlign:"top"},initComponent:function(){var g=this,l=new Date();g.items=[{name:"KODE_TRANSAKSI",reference:"kodetransaks",xtype:"textfield",emptyText:"[ Kode Transaksi ]"},{name:"NAMA_PENGUNJUNG",reference:"pengunjung",xtype:"textfield",emptyText:"[ Nama Pengunjung ]"},{name:"KETERANGAN",reference:"keterangan",xtype:"textarea",emptyText:"[ Keterangan ]",flex:1},{xtype:"container",layout:{type:"hbox",align:"stretch"},defaults:{margin:"0 2 1 0"},items:[{name:"TANGGAL",reference:"tanggal",flex:1,xtype:"datefield",emptyText:"[Pilih Tanggal Order]",format:"d/m/Y",maxValue:l},{name:"WAKTU",reference:"waktu",flex:1,xtype:"timefield",emptyText:"[Jam:Mnt:Dtk]",format:"H:i:s",hideTrigger:true}]}],g.buttons=[{text:"Cetak",reference:"btncetakpenjualan",tooltip:"Selesai",flex:1,iconCls:"x-fa fa-print",handler:"onCetakBuktiPenjualan"},{text:"Selesaikan",reference:"btnselesaipenjualan",tooltip:"Selesai",flex:1,iconCls:"x-fa fa-save",handler:"onSelesaiPenjualan"}];Ext.form.Panel.prototype.initComponent.apply(this,arguments)},loadRecord:function(p){var s=this,e=s.getForm().loadRecord(p),q=s.getReferences(),f=q.waktu;if(p){f.setValue(p.get("TANGGAL"));s.getViewModel().set("record",p)}b.load();return e},getRecord:function(){return this.getViewModel().get("record")},getFormData:function(){var s=this,q=s.getReferences(),n=s.getForm().getValues(),o=q.tanggal.getValue(),p=q.waktu.getValue();o.setHours(p.getHours());o.setMinutes(p.getMinutes());o.setSeconds(p.getSeconds());n.TANGGAL=o;return n}},0,["transaksi-farmasi-langsung-tagihan"],["component","box","container","panel","form","transaksi-farmasi-langsung-tagihan"],{component:true,box:true,container:true,panel:true,form:true,"transaksi-farmasi-langsung-tagihan":true},["widget.transaksi-farmasi-langsung-tagihan"],0,[layanan.farmasi.TransaksiLangsung,"Tagihan"],0));(Ext.cmd.derive("layanan.farmasi.TransaksiLangsung.Workspace",Ext.form.Panel,{viewModel:{},layout:"border",reference:"transaksilangsung",initComponent:function(){var f=this;dt=new Date();f.items=[{region:"center",xtype:"form",flex:1,title:"Form Transaksi",layout:"border",bodyPadding:2,items:[{region:"north",xtype:"transaksi-farmasi-langsung-form",bodyPadding:10,height:60,reference:"transaksilangsungfarmasiform"},{region:"center",xtype:"transaksi-farmasi-langsung-detil",flex:1,reference:"transaksilangsungfarmasilist"}]},{region:"east",xtype:"transaksi-farmasi-langsung-tagihan",reference:"tagihantransaksifarmasi",collapsible:true,split:true,title:"Pengunjung",width:300,border:true}];Ext.form.Panel.prototype.initComponent.apply(this,arguments)},load:function(g){var l=this.down("[reference=tagihantransaksifarmasi]");l.load({TANGGAL:b.getView().getSysdate()})},getFormData:function(){var p=this.down("[reference=tagihantransaksifarmasi]"),n=this.down("[reference=transaksilangsungfarmasilist]"),m=p.getFormData(),o=n.getData();m.PENJUALAN_DETIL=o;return{PENJUALAN_LANGSUNG:m}}},0,["transaksi-langsung-farmasi-workspace"],["component","box","container","panel","form","transaksi-langsung-farmasi-workspace"],{component:true,box:true,container:true,panel:true,form:true,"transaksi-langsung-farmasi-workspace":true},["widget.transaksi-langsung-farmasi-workspace"],0,[layanan.farmasi.TransaksiLangsung,"Workspace"],0));(Ext.cmd.derive("layanan.farmasi.TransaksiLangsung.WorkspaceController",Ext.app.ViewController,{onSelesaiPenjualan:function(u){var p=this,t=p.getReferences(),s=t.tagihantransaksifarmasi.getFormData(),f=t.transaksilangsungfarmasilist.getData();if(t.tagihantransaksifarmasi.isValid()&&f.length>0){var q=t.tagihantransaksifarmasi.getRecord();if(q){s.PENJUALAN_DETIL=f;q.set(s);q.animateTarget=u;q.scope=p;q.showError=true;q.save({callback:function(l,g,e){if(e){Ext.toast({html:"Sukses..",headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"});p.getView().fireEvent("kirim",l);p.onReset()}}});this.onReset()}}},onReset:function(){var l=this,g=l.getReferences();g.transaksilangsungfarmasiform.reset();g.tagihantransaksifarmasi.getRecord();g.tagihantransaksifarmasi.reset();g.tagihantransaksifarmasi.loadRecord(Ext.create("data.model.OrderResep",{TANGGAL:l.getView().getSysdate()}));g.transaksilangsungfarmasiform.focus(false,100);g.transaksilangsungfarmasilist.removeDataStore()}},0,0,0,0,["controller.transaksi-langsung-farmasi-workspace"],0,[layanan.farmasi.TransaksiLangsung,"WorkspaceController"],0));(Ext.cmd.derive("layanan.farmasi.Workspace",com.Form,{controller:"layanan-farmasi-workspace",viewModel:{},layout:"border",reference:"layananfarmasi",initComponent:function(){var f=this;dt=new Date();f.items=[{region:"west",xtype:"layanan-farmasi-form",reference:"formlayananfarmasi",collapsible:true,width:300,border:true},{region:"center",xtype:"layanan-farmasi-detil",flex:1,reference:"detillayananfarmasi",listeners:{printkwitansipelayanan:"onPrintKwitansiPelayanan",printetiket:"onPrintEtiket"}},{region:"east",xtype:"riwayat-layanan-farmasi-workspace",flex:1,margin:"0 2 0 0",reference:"riwayatlayananfarmasi",collapsed:true,title:"Riwayat",collapsible:true}];com.Form.prototype.initComponent.apply(this,arguments)},load:function(t){var p=this,q=p.down("[reference=formlayananfarmasi]"),s=p.down("[reference=detillayananfarmasi]"),u=p.down("[reference=riwayatlayananfarmasi]");try{q.load(t.get("REF"));s.load(t);riwayatFarmasi.load(t)}catch(e){}},getFormData:function(){var f=me.down("[reference=detillayananfarmasi]");a=f.getData();return a}},0,["layanan-farmasi-workspace"],["component","box","container","panel","form","com-form","layanan-farmasi-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"layanan-farmasi-workspace":true},["widget.layanan-farmasi-workspace"],0,[layanan.farmasi,"Workspace"],0));(Ext.cmd.derive("layanan.farmasi.WorkspaceController",Ext.app.ViewController,{onItemDoubleClick:function(q,f,o,p,s){this.onLayananResep(f)},onPrintKwitansiPelayanan:function(s,x){var y=this,w=y.getView(),u="Word",q="docx",v=true,t="Cetak Kwitansi Pelayanan";Ext.Msg.show({title:t,message:"Tekan tombol Yes/Ya utk cetak langsung<br/>Tekan tombol No/Tidak untuk Preview",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,defaultButton:"yes",animateTarget:s,fn:function(e){if(e!="yes"){u="Pdf";q="pdf";v=false}w.cetak({NAME:"layanan.farmasi."+w.kode+"CetakResep",TYPE:u,EXT:q,PARAMETER:{PKUNJUNGAN:x,CETAK_HEADER:1},REQUEST_FOR_PRINT:v,PRINT_NAME:"CetakResep"},function(f){w.openDialog("Print Preview",true,0,0,{xtype:"panel",title:t},function(l,g){g.down("panel").update("<iframe style='width: 100%; height: 100%' src='"+f+"'></iframe>")})})}})},onPrintEtiket:function(w){var p=this,u=p.getView(),t="Word",q="docx",v=true,s="Cetak Etiket Obat";Ext.Msg.show({title:s,message:"Tekan tombol Yes/Ya utk cetak langsung<br/>Tekan tombol No/Tidak untuk Preview",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,defaultButton:"yes",animateTarget:p,fn:function(e){if(e!="yes"){t="Pdf";q="pdf";v=false}u.cetak({NAME:"layanan.farmasi."+u.kode+"CetakEtiket",TYPE:t,EXT:q,PARAMETER:{PKUNJUNGAN:w,CETAK_HEADER:1},REQUEST_FOR_PRINT:v,PRINT_NAME:"CetakEtiket"},function(f){u.openDialog("Print Preview",true,0,0,{xtype:"panel",title:s},function(l,g){g.down("panel").update("<iframe style='width: 100%; height: 100%' src='"+f+"'></iframe>")})})}})}},0,0,0,0,["controller.layanan-farmasi-workspace"],0,[layanan.farmasi,"WorkspaceController"],0));(Ext.cmd.derive("layanan.farmasi.retur.Workspace",Ext.tab.Panel,{activeTab:0,cls:"x-br-top",ui:"header-tab",initComponent:function(){var f=this;f.items=[{title:"Pelayanan",xtype:"retur-layanan-farmasi-workspace"}],Ext.tab.Panel.prototype.initComponent.apply(this,arguments)},load:function(f){this.items.each(function(e){e.load(f)})}},0,["retur-farmasi-workspace"],["component","box","container","panel","tabpanel","retur-farmasi-workspace"],{component:true,box:true,container:true,panel:true,tabpanel:true,"retur-farmasi-workspace":true},["widget.retur-farmasi-workspace"],0,[layanan.farmasi.retur,"Workspace"],0));(Ext.cmd.derive("layanan.farmasi.retur.pelayanan.DaftarObat",Ext.grid.Panel,{viewModel:{stores:{store:{type:"layananfarmasi-store"}}},bind:{store:"{store}"},initComponent:function(){var f=this;f.cellEditing=new Ext.grid.plugin.CellEditing({clicksToEdit:1});f.plugins=[f.cellEditing];f.columns=[{xtype:"rownumberer",text:"No",align:"left",width:50},{xtype:"templatecolumn",text:"Nama Obat",flex:1,sortable:false,tpl:'<div style="white-space:normal !important;">{REFERENSI.FARMASI.NAMA}</div>'},{text:"Jumlah",dataIndex:"JUMLAH",hideTrigger:true,width:75}];Ext.grid.Panel.prototype.initComponent.apply(this,arguments)},loadStore:function(n){var o=this,m=o.getViewModel(),p=m.get("store");if(p){p.removeAll();p.queryParams=p.queryParams||{};if(n){p.queryParams=n}p.load()}},getData:function(){var m=this,n=m.getViewModel().get("store"),l=[];n.each(function(e){l.push(e.data)});return l}},0,["retur-layanan-farmasi-daftar-obat"],["component","box","container","panel","tablepanel","gridpanel","grid","retur-layanan-farmasi-daftar-obat"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"retur-layanan-farmasi-daftar-obat":true},["widget.retur-layanan-farmasi-daftar-obat"],0,[layanan.farmasi.retur.pelayanan,"DaftarObat"],0));(Ext.cmd.derive("layanan.farmasi.retur.pelayanan.Detil",Ext.grid.Panel,{controller:"retur-layanan-farmasi-detil",viewModel:{stores:{store:{type:"returlayananfarmasi-store"}}},bind:{store:"{store}"},flex:1,initComponent:function(){var f=this;f.cellEditing=new Ext.grid.plugin.CellEditing({clicksToEdit:1});f.plugins=[f.cellEditing];f.columns=[{xtype:"rownumberer",text:"No",align:"left",width:50},{text:"Jumlah",dataIndex:"JUMLAH",width:75},{xtype:"datecolumn",text:"Tanggal Retur",dataIndex:"TANGGAL",format:"d/m/Y H:i:s",flex:1}],f.dockedItems=[{xtype:"pagingtoolbar",bind:{store:"{store}"},dock:"bottom",displayInfo:true}];Ext.grid.Panel.prototype.initComponent.apply(this,arguments)},loadStore:function(n){var o=this,m=o.getViewModel(),p=m.get("store");if(p){p.removeAll();p.queryParams=n;p.load()}},refresh:function(){var f=this.getViewModel().get("store");if(f){f.reload()}}},0,["retur-layanan-farmasi-detil"],["component","box","container","panel","tablepanel","gridpanel","grid","retur-layanan-farmasi-detil"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"retur-layanan-farmasi-detil":true},["widget.retur-layanan-farmasi-detil"],0,[layanan.farmasi.retur.pelayanan,"Detil"],0));(Ext.cmd.derive("layanan.farmasi.retur.pelayanan.DetilController",Ext.app.ViewController,{},0,0,0,0,["controller.retur-layanan-farmasi-detil"],0,[layanan.farmasi.retur.pelayanan,"DetilController"],0));(Ext.cmd.derive("layanan.farmasi.retur.pelayanan.Form",com.Form,{viewModel:{stores:{returlayanan:{type:"returlayananfarmasi-store"}},data:{totalR:0},formulas:{getTotalRetur:function(g){var l=g("totalR");return l}}},layout:{type:"vbox",align:"stretch"},defaults:{margin:"0 2 2 0"},fieldDefaults:{labelAlign:"top",msgTarget:"side"},bodyPadding:5,initComponent:function(){var g=this,l=new Date();g.items=[{xtype:"hiddenfield",name:"ID_FARMASI",reference:"idfarmasi"},{xtype:"numberfield",name:"JUMLAH_RETUR",bind:{value:"{getTotalRetur}"},hidden:true},{xtype:"numberfield",reference:"jumlahlayanan",name:"JUMLAH_LAYANAN",hidden:true},{xtype:"datefield",format:"Y-m-d H:m:s",margin:"0 0 3 0",hideTrigger:true,name:"TANGGAL",reference:"tanggalretur",readOnly:true},{xtype:"numberfield",hideTrigger:true,reference:"jumlahretur",margin:"0 0 3 0",name:"JUMLAH"},{xtype:"button",text:"Retur",reference:"buttonlayanifarmasi",ui:"soft-green",iconCls:"x-fa fa-share",handler:"onReturLayanan"}];com.Form.prototype.initComponent.apply(this,arguments)},load:function(v){try{var y=this,e=y.getViewModel(),t=e.get("returlayanan"),u=v.ID_FARMASI,s=v.JUMLAH,x=y.getSysdate();this.down("[reference=jumlahretur]").focus(false,100);this.down("[reference=idfarmasi]").setValue(u);this.down("[reference=jumlahlayanan]").setValue(s);this.down("[reference=tanggalretur]").setValue(x);if(t){t.removeAll();t.queryParams=t.queryParams||{};if(v){t.queryParams.ID_FARMASI=u;t.load({callback:function(f){if(f){var n=f.length,l=0;for(var m=0;m<n;m++){var g=f[m].get("JUMLAH");l=l+g}e.set("totalR",l)}else{e.set("totalR",0)}}})}}}catch(w){}}},0,["retur-layanan-farmasi-form"],["component","box","container","panel","form","com-form","retur-layanan-farmasi-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"retur-layanan-farmasi-form":true},["widget.retur-layanan-farmasi-form"],0,[layanan.farmasi.retur.pelayanan,"Form"],0));(Ext.cmd.derive("layanan.farmasi.retur.pelayanan.FormController",Ext.app.ViewController,{onReturLayanan:function(l){var g=this;view=g.getView();view.fireIvent("onreturpelayanan",l)}},0,0,0,0,["controller.retur-layanan-farmasi-form"],0,[layanan.farmasi.retur.pelayanan,"FormController"],0));(Ext.cmd.derive("layanan.farmasi.retur.pelayanan.List",Ext.grid.Panel,{controller:"retur-layanan-farmasi-list",viewModel:{stores:{store:{type:"kunjungan-store"}}},bind:{store:"{store}"},header:{items:[{xtype:"search-field",cls:"x-text-border",iconCls:"iconSearch",autoFocus:true,emptyText:"Cari berdasarkan No.Resep",enableKeyEvents:true,flex:1,listeners:{search:"onSearch",clear:"onClear"}}]},columns:[{xtype:"rownumberer",text:"No",align:"left",width:50},{text:"No.Registrasi",dataIndex:"NOPEN",width:1,sortable:false},{xtype:"templatecolumn",text:"No.Resep",flex:1,sortable:false,tpl:'<div style="white-space:normal !important;">{REFERENSI.ASAL.NOMOR}</div>'},{xtype:"templatecolumn",text:"Asal Resep / Unit",flex:1,sortable:false,tpl:'<div style="white-space:normal !important;">{REFERENSI.RUANGAN.DESKRIPSI}</div>'},{xtype:"datecolumn",text:"Tanggal",dataIndex:"MASUK",format:"d/m/Y H:i:s",sortable:false,flex:1}],dockedItems:[{xtype:"pagingtoolbar",bind:{store:"{store}"},dock:"bottom",displayInfo:true}],loadStore:function(l){var g=this.getViewModel().get("store");if(g){g.removeAll();g.queryParams=l;g.load()}},refresh:function(){var f=this.getViewModel().get("store");if(f){f.reload()}}},0,["retur-layanan-farmasi-list"],["component","box","container","panel","tablepanel","gridpanel","grid","retur-layanan-farmasi-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"retur-layanan-farmasi-list":true},["widget.retur-layanan-farmasi-list"],0,[layanan.farmasi.retur.pelayanan,"List"],0));(Ext.cmd.derive("layanan.farmasi.retur.pelayanan.ListController",Ext.app.ViewController,{onFocusEnter:function(g,l){this.getView().fireEvent("specialkey",g,l)},onSearch:function(p,o){var f=this,e=f.getViewModel().get("store");e.queryParams={ID:o};e.load()},onClear:function(){var m=this,l=m.getViewModel(),n=m.getViewModel().get("store");delete n.queryParams.ID;n.load()}},0,0,0,0,["controller.retur-layanan-farmasi-list"],0,[layanan.farmasi.retur.pelayanan,"ListController"],0));(Ext.cmd.derive("layanan.farmasi.retur.pelayanan.Workspace",Ext.form.Panel,{controller:"retur-layanan-farmasi-workspace",layout:"border",initComponent:function(){var f=this;f.items=[{region:"west",title:"List",xtype:"retur-layanan-farmasi-list",reference:"returlayananfarmasilist",flex:1,collapsible:true,split:true,listeners:{select:"onListSelected"}},{region:"center",title:"Daftar Obat",xtype:"retur-layanan-farmasi-daftar-obat",reference:"returlayananfarmasidaftarobat",flex:1,listeners:{select:"onListSelectedObat"}},{region:"east",layout:{type:"vbox",align:"stretch"},flex:1,items:[{xtype:"retur-layanan-farmasi-form",title:"Form",reference:"returlayananfarmasiform",listeners:{onreturpelayanan:"OnReturLayanan"}},{xtype:"retur-layanan-farmasi-detil",title:"Riwayat Retur",reference:"returlayananfarmasidetil"}],collapsible:true,split:true}];f.callParent(arguments)},load:function(n){var p=this,o=p.down("[reference=returlayananfarmasilist]"),m=p.down("[reference=returlayananfarmasidaftarobat]");o.loadStore({JENIS_KUNJUNGAN:11,NOPEN:n.get("NOPEN"),STATUS:2})}},0,["retur-layanan-farmasi-workspace"],["component","box","container","panel","form","retur-layanan-farmasi-workspace"],{component:true,box:true,container:true,panel:true,form:true,"retur-layanan-farmasi-workspace":true},["widget.retur-layanan-farmasi-workspace"],0,[layanan.farmasi.retur.pelayanan,"Workspace"],0));(Ext.cmd.derive("layanan.farmasi.retur.pelayanan.WorkspaceController",Ext.app.ViewController,{onListSelected:function(s,p){var o=this,q=o.getReferences(),e=p.get("NOMOR");q.returlayananfarmasidaftarobat.loadStore({KUNJUNGAN:e,STATUS:2})},onListSelectedObat:function(s,o){var e=this,q=e.getReferences(),p=o.get("ID");jml_lyn=o.get("JUMLAH");q.returlayananfarmasidetil.loadStore({ID_FARMASI:p});q.returlayananfarmasiform.load({ID_FARMASI:p,JUMLAH:jml_lyn})},onReturLayanan:function(u){var f=this,A=f.getView(),t=A.getForm().getValues(),x=t.JUMLAH_LAYANAN,z=t.JUMLAH_RETUR,y=t.JUMLAH,v=x-z,w=Ext.create("data.model.ReturLayananFarmasi",{});A.waitRefresh=true;Ext.Msg.show({title:"Retur Obat",message:"Anda yakin ingin Meretur Obat Ini.. ?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:u,fn:function(e){if(e==="yes"){if(A.getForm().isValid()){if(y>v){Ext.MessageBox.alert("Warning","Jumlah Retur Tidak Boleh Melebihi Jumlah Layanan..!",this.showResult,this);A.waitRefresh=false}else{w.set(t);w.showError=true;w.animateTarget=u;w.scope=f;w.save({callback:function(l,g,m){A.waitRefresh=false;if(g.hasException()||!m){}if(m){Ext.toast({html:"Data Berhasil Diretur",headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"});A.waitRefresh=false;A.getForm().reset();f.refresh(t)}}})}}}else{A.waitRefresh=false}}})},refresh:function(l){var m=this,n=l.ID_FARMASI;jml_lyn=l.JUMLAH_LAYANAN;ref=m.getReferences();ref.returlayananfarmasidetil.loadStore({ID_FARMASI:n});ref.returlayananfarmasiform.load({ID_FARMASI:n,JUMLAH:jml_lyn})}},0,0,0,0,["controller.retur-layanan-farmasi-workspace"],0,[layanan.farmasi.retur.pelayanan,"WorkspaceController"],0));(Ext.cmd.derive("layanan.farmasi.widget.Form",Ext.window.Window,{layout:{type:"vbox",align:"stretch"},bodyPadding:5,"default":{margin:10},initComponent:function(){var g=this,l=new Date();g.items=[{xtype:"button",reference:"cetakfakturpelayanan",iconCls:"x-fa fa-print",text:"Cetak Faktur Pelayanan",margin:10,handler:"OnCetak"},{xtype:"button",reference:"cetaketiket",iconCls:"x-fa fa-print",text:"Cetak Etiket",margin:10,handler:"OnCetak"}];Ext.window.Window.prototype.initComponent.apply(this,arguments)}},0,["layanan-farmasi-form-widget"],["component","box","container","panel","window","layanan-farmasi-form-widget"],{component:true,box:true,container:true,panel:true,window:true,"layanan-farmasi-form-widget":true},["widget.layanan-farmasi-form-widget"],0,[layanan.farmasi.widget,"Form"],0));(Ext.cmd.derive("layanan.farmasi.widget.Workspace",Ext.form.Panel,{viewModel:{},layout:"fit",initComponent:function(){var f=this;dt=new Date();f.items=[{region:"north",xtype:"container",layout:{type:"hbox"},padding:5,items:[{xtype:"layanan-farmasi-form-widget",flex:1}]}];Ext.form.Panel.prototype.initComponent.apply(this,arguments)}},0,["layanan-farmasi-widget-workspace"],["component","box","container","panel","form","layanan-farmasi-widget-workspace"],{component:true,box:true,container:true,panel:true,form:true,"layanan-farmasi-widget-workspace":true},["widget.layanan-farmasi-widget-workspace"],0,[layanan.farmasi.widget,"Workspace"],0));(Ext.cmd.derive("layanan.farmasi.widget.riwayat.Detil",Ext.grid.Panel,{viewModel:{stores:{store:{type:"layananfarmasi-store"}}},bind:{store:"{store}"},flex:1,columns:[{xtype:"rownumberer",text:"No",align:"left",width:50},{text:"Tanggal",xtype:"datecolumn",dataIndex:"TANGGAL",format:"d/m/Y H:i:s",sortable:false,width:120},{xtype:"templatecolumn",text:"Nama Obat",flex:2,sortable:false,tpl:"<div>{REFERENSI.FARMASI.NAMA}</div>"},{text:"Jumlah",dataIndex:"JUMLAH",width:75}],dockedItems:[{xtype:"pagingtoolbar",bind:{store:"{store}"},dock:"bottom",displayInfo:true}],loadStore:function(l){var g=this.getViewModel().get("store");if(g){g.removeAll();g.queryParams=l;g.load()}},refresh:function(){var f=this.getViewModel().get("store");if(f){f.reload()}}},0,["riwayat-layanan-farmasi-detil"],["component","box","container","panel","tablepanel","gridpanel","grid","riwayat-layanan-farmasi-detil"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"riwayat-layanan-farmasi-detil":true},["widget.riwayat-layanan-farmasi-detil"],0,[layanan.farmasi.widget.riwayat,"Detil"],0));(Ext.cmd.derive("layanan.farmasi.widget.riwayat.Workspace",Ext.panel.Panel,{flex:1,layout:{type:"vbox",align:"stretch"},initComponent:function(){var f=this;f.items=[{xtype:"riwayat-layanan-farmasi-detil",reference:"riwayatlayananfarmasidetil",flex:1}];f.callParent(arguments)},load:function(n){var s=this,q=s.down("[reference=riwayatlayananfarmasidetil]"),o=n.get("REFERENSI")?n.get("REFERENSI"):null,p=o?(o.PENDAFTARAN?o.PENDAFTARAN.NORM:0):0;q.loadStore({NORM:p,JENIS_KUNJUNGAN:11,STATUS:2})}},0,["riwayat-layanan-farmasi-workspace"],["component","box","container","panel","riwayat-layanan-farmasi-workspace"],{component:true,box:true,container:true,panel:true,"riwayat-layanan-farmasi-workspace":true},["widget.riwayat-layanan-farmasi-workspace"],0,[layanan.farmasi.widget.riwayat,"Workspace"],0));(Ext.cmd.derive("layanan.kelahiran.Form",com.Form,{model:"layanan.kelahiran.Model",controller:"layanan-kelahiran-form",defaults:{allowBlank:false,margin:"0 0 1 0",labelAlign:"top"},defaultFocus:"DESKRIPSI",layout:"fit",items:[{xtype:"textarea",emptyText:"[Masukkan Deskripsi Anamnesis]",name:"DESKRIPSI",border:false,bind:{readOnly:"{formConfig.viewOnly}",value:"{DESKRIPSI}"}}],dockedItems:[{xtype:"toolbar",bind:{hidden:"{!formConfig.simpan}"},dock:"bottom",items:["->",{text:"Simpan",iconCls:"x-fa fa-save",formBind:true,handler:"onSimpan",ui:"soft-red",bind:{hidden:"{!formConfig.simpan}"}}]}]},0,["layanan-kelahiran-form"],["component","box","container","panel","form","com-form","layanan-kelahiran-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"layanan-kelahiran-form":true},["widget.layanan-kelahiran-form"],0,[layanan.kelahiran,"Form"],0));(Ext.cmd.derive("layanan.kelahiran.FormController",Ext.app.ViewController,{onSimpan:function(m){var l=this,n=l.getView();n.save(m)}},0,0,0,0,["controller.layanan-kelahiran-form"],0,[layanan.kelahiran,"FormController"],0));(Ext.cmd.derive("layanan.kelahiran.Workspace",com.Form,{controller:"layanan-kelahiran-workspace",layout:"fit",items:[{region:"center",xtype:"layanan-kelahiran-form"}],load:function(n){var p=this,q=p.down("layanan-kelahiran-form");if(n){if(Ext.getClassName(n)=="data.model.Kunjungan"){var s=n.get("STATUS")!=1,o={KUNJUNGAN:n.get("NOMOR"),NOPEN:n.get("NOPEN"),REFERENSI:{KUNJUNGAN:n.data},TANGGAL:p.getSysdate()}}}}},0,["layanan-kelahiran-workspace"],["component","box","container","panel","form","com-form","layanan-kelahiran-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"layanan-kelahiran-workspace":true},["widget.layanan-kelahiran-workspace"],0,[layanan.kelahiran,"Workspace"],0));(Ext.cmd.derive("layanan.kelahiran.WorkspaceController",Ext.app.ViewController,{},0,0,0,0,["controller.layanan-kelahiran-workspace"],0,[layanan.kelahiran,"WorkspaceController"],0));(Ext.cmd.derive("layanan.laboratorium.Workspace",com.Tab,{controller:"laboratorium-workspace",activeTab:0,cls:"x-br-top",ui:"header-tab",kunjungan:undefined,initComponent:function(){var n=this;com.Tab.prototype.initComponent.apply(this,arguments);var l=n.app.xpriv("110303"),m=n.app.xpriv("110604");if(l){n.add({title:"Order",xtype:"order-lab-workspace",listeners:{kirim:"onKirim",reopen:"onReopen"}});n.add({title:"Daftar Order",xtype:"orderlist-lab-workspace",reference:"orderlistworkspace"})}if(m){n.add({title:"Riwayat",xtype:"riwayat-lab-workspace"})}},load:function(l){var m=this,n=this.getActiveTab();this.kunjungan=l;if(n){n.load(l)}else{if(m.items.getCount()>0){m.setActiveTab(0)}}},listeners:{tabchange:"onTabChange"}},0,["laboratorium-workspace"],["component","box","container","panel","tabpanel","com-tab","laboratorium-workspace"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"laboratorium-workspace":true},["widget.laboratorium-workspace"],0,[layanan.laboratorium,"Workspace"],0));(Ext.cmd.derive("layanan.laboratorium.WorkspaceController",Ext.app.ViewController,{onKirim:function(l){var g=this;refs=g.getReferences();refs.orderlistworkspace.refresh()},onReopen:function(f){this.getView().fireEvent("reopen",f)},onTabChange:function(m,n){var l=this.getView().kunjungan;if(n.load){n.load(l)}}},0,0,0,0,["controller.laboratorium-workspace"],0,[layanan.laboratorium,"WorkspaceController"],0));(Ext.cmd.derive("layanan.laboratorium.hasil.Form",com.Form,{controller:"form-hasil-lab-catatan",model:"data.model.CatatanHasilLab",border:true,defaultType:"container",defaults:{margin:"0 2 2 0",layout:{type:"vbox",align:"stretch"},defaults:{margin:"0 2 2 0"}},initComponent:function(){var g=this,l=new Date();g.items=[{flex:1,defaults:{bind:{readOnly:"{formConfig.viewOnly}"},allowBlank:false},items:[{xtype:"textareafield",name:"CATATAN",flex:1,emptyText:"[ CATATAN / SARAN ]"},{xtype:"dokter-combo",name:"DOKTER",reference:"doktercombo",emptyText:"[ DOKTER ]"}]}];g.buttons=[{text:"Simpan",ui:"soft-green",iconCls:"x-fa fa-save",hidden:true,bind:{hidden:"{!formConfig.simpan}"},handler:"onSimpan"}];com.Form.prototype.initComponent.apply(this,arguments)},onLoadRecord:function(m,l){var n=l.get("REFERENSI");doktercombo=m.down("dokter-combo"),dokter=n?n.DOKTER:null;dok=dokter?Ext.create("data.model.Dokter",dokter):null;doktercombo.select(dok);doktercombo.load()},setDokterRuangan:function(l){var m=this,n=m.down("[reference=doktercombo]");n.params.RUANGAN=l}},0,["form-hasil-lab-catatan"],["component","box","container","panel","form","com-form","form-hasil-lab-catatan"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-hasil-lab-catatan":true},["widget.form-hasil-lab-catatan"],0,[layanan.laboratorium.hasil,"Form"],0));(Ext.cmd.derive("layanan.laboratorium.hasil.FormController",Ext.app.ViewController,{onSimpan:function(m){var l=this,n=l.getView();n.save(m)},onCetak:function(f){this.cetak(false)},onPreview:function(f){this.cetak(true)},privates:{cetak:function(n){var o=this,p=o.getView(),m=o.getViewModel().get("record");p.cetak({NAME:"layanan.CetakHasilLab",TYPE:n?"Pdf":"Word",EXT:n?"pdf":"docx",PARAMETER:{PNOMOR:m.get("KUNJUNGAN")},REQUEST_FOR_PRINT:!n,PRINT_NAME:"CetakHasil"},function(e){if(n){p.openDialog("Print Preview",true,0,0,{xtype:"panel",title:"Preview Hasil Lab"},function(g,f){f.down("panel").update("<iframe style='width: 100%; height: 100%' src='"+e+"'></iframe>")})}})}}},0,0,0,0,["controller.form-hasil-lab-catatan"],0,[layanan.laboratorium.hasil,"FormController"],0));(Ext.cmd.derive("layanan.laboratorium.hasil.List",com.Grid,{controller:"list-hasil-lab-controller",doAfterLoadParameters:Ext.emptyFn,viewModel:{data:{tindakan:undefined,hideSimpan:false},stores:{store:{type:"hasillab-store"},parameterstore:{type:"parametertindakanlab-store"}}},bind:{title:"Input Hasil Laboratorium - {tindakan.TINDAKAN_DESKRIPSI}"},border:false,initComponent:function(){var f=this;f.cellEditing=new Ext.grid.plugin.CellEditing({clicksToEdit:1});f.plugins=[f.cellEditing];f.selModel={selType:"cellmodel"};com.Grid.prototype.initComponent.call(this)},columns:[{xtype:"rownumberer",text:"No",align:"left",width:"5%"},{text:"Parameter",flex:2,dataIndex:"PARAMETER_TINDAKAN",renderer:"onRendererParameter"},{text:"Nilai Normal",flex:2,dataIndex:"NILAI_NORMAL",editor:{xtype:"textfield",allowBlank:false,hideTrigger:true}},{text:"Satuan",dataIndex:"SATUAN",flex:2,editor:{xtype:"textfield",allowBlank:false,hideTrigger:true}},{text:"Hasil",dataIndex:"HASIL",flex:2,editor:{xtype:"textfield",allowBlank:false,hideTrigger:true}},{text:"Keterangan",dataIndex:"KETERANGAN",flex:2,editor:{xtype:"textfield",hideTrigger:true}}],buttons:[{text:"Simpan",reference:"btnsimpan",tooltip:"SImpan Hasil",hidden:true,bind:{hidden:"{hideSimpan}"},iconCls:"x-fa fa-save",listeners:{click:"onSimpan"}}],loadParameters:function(s){var o=this,p=o.getViewModel(),q=o.getStore(),n=p.get("parameterstore");if(s){p.set("tindakan",s);o.removeDataStore();n.queryParams={TINDAKAN:s.get("TINDAKAN"),STATUS:1};n.load({callback:function(g,l,e){if(e){o.setParams({TINDAKAN_MEDIS:s.get("ID")});try{o.load()}catch(f){}}if(Ext.isFunction(o.doAfterLoadParameters)){o.doAfterLoadParameters(o,n,g,q,l,e)}}})}o.doAfterLoad=function(l,f,e,g){datatindakan=p.get("tindakan"),n=p.get("parameterstore"),dataarray=[];n.each(function(m){var v=q.findRecord("PARAMETER_TINDAKAN",m.get("ID"),0,true,false,true),w=o.getReferensi(m.data,"SATUAN");if(!v){dataarray.push(Ext.create("data.model.HasilLab",{TINDAKAN_MEDIS:datatindakan.get("ID"),PARAMETER_TINDAKAN:m.get("ID"),TANGGAL:Ext.Date.format(o.getSysdate(),"Y-m-d H:i:s"),NILAI_NORMAL:m.get("NILAI_RUJUKAN"),SATUAN:w?w.DESKRIPSI:null,STATUS:1}))}else{if(v.get("NILAI_NORMAL")==null||v.get("NILAI_NORMAL")==""){v.set("NILAI_NORMAL",m.get("NILAI_RUJUKAN"))}if(v.get("SATUAN")==null||v.get("SATUAN")==""){v.set("SATUAN",w?w.DESKRIPSI:null)}dataarray.push(v)}});q.removeAll();q.add(dataarray)}},loadStore:function(f){},hideButtonSimpan:function(f){this.getViewModel().set("hideSimpan",f)}},0,["list-input-hasil-lab"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","list-input-hasil-lab"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"list-input-hasil-lab":true},["widget.list-input-hasil-lab"],0,[layanan.laboratorium.hasil,"List"],0));(Ext.cmd.derive("layanan.laboratorium.hasil.ListController",Ext.app.ViewController,{onSimpan:function(m){var n=this,p=n.getView(),o=n.getViewModel().get("store");o.sync({callback:function(f,g,e){p.setLoading(false);p.notifyMessage("Data  telah disimpan")}})},onRendererParameter:function(v,x,z,t,w,y){var u=this,B=u.getViewModel(),C=B.get("parameterstore"),A=u.getParameter(C,z.get("PARAMETER_TINDAKAN"));return Ext.isString(A)?A:A.get("PARAMETER")},onRendererNilai:function(u,x,v,C,w,y){var f=this,A=f.getViewModel(),B=A.get("parameterstore"),z=f.getParameter(B,rec.get("PARAMETER_TINDAKAN"));return Ext.isString(z)?z:z.get("NILAI_RUJUKAN")},onRendererSatuan:function(f,y,v,D,w,z){var E=this,B=E.getViewModel(),C=B.get("parameterstore"),A=E.getParameter(C,rec.get("PARAMETER_TINDAKAN")),x=A.get("REFERENSI")?(A.get("REFERENSI").SATUAN?A.get("REFERENSI").SATUAN.DESKRIPSI:""):"";return x},getParameter:function(n,l){var m=n.findRecord("ID",l,0,false,true);if(m==null){return l}return m}},0,0,0,0,["controller.list-hasil-lab-controller"],0,[layanan.laboratorium.hasil,"ListController"],0));(Ext.cmd.derive("layanan.laboratorium.hasil.Workspace",com.Form,{controller:"workspace-input-hasil-lab-controller",viewModel:{data:{kunjungan:undefined}},justPrint:false,layout:"border",initComponent:function(){var f=this;f.items=[{region:"west",title:"Tindakan",hideAction:true,flex:0.3,checkboxModel:true,selModel:{selType:"checkboxmodel",checkOnly:false,mode:"Multi"},xtype:"tindakan-medis-list",reference:"listindakanmedist",split:true,collapsed:true,collapsible:true,listeners:{tindakanselected:"onSelectTindakanMedis"},dockedItems:[{xtype:"toolbar",dock:"bottom",items:["->",{xtype:"button",text:"Preview",iconCls:"x-fa fa-print",ui:"soft-green",menu:{plain:true,width:200,items:[{text:"Format I",action:1,listeners:{scope:f.getController(),click:"onPreview"}},{text:"Format II",action:2,listeners:{scope:f.getController(),click:"onPreview"}}]}},{text:"Cetak",ui:"soft-green",iconCls:"x-fa fa-print",listeners:{scope:f.getController(),click:"onPreview"}}]}]},{region:"center",xtype:"list-input-hasil-lab",border:false,reference:"listlab"},{region:"east",title:"Catatan",flex:0.3,split:true,collapsed:false,collapsible:true,xtype:"form-hasil-lab-catatan",border:false,reference:"formsaran"}];com.Form.prototype.initComponent.apply(this,arguments)},load:function(v){var p=this,q=p.down("tindakan-medis-list"),t=p.down("form-hasil-lab-catatan"),w=p.down("list-input-hasil-lab"),s=p.getViewModel(),u=s.get("formConfig");if(v){p.getViewModel().set("kunjungan",v);q.loadStore(v,1);t.setFormConfig({viewOnly:u.viewOnly,simpan:u.simpan});t.setDokterRuangan(v.get("RUANGAN"));if(data.model){data.model.CatatanHasilLab.load(v.get("NOMOR"),{callback:function(e,g,f){if(f){t.loadRecord(e)}else{t.createRecord({KUNJUNGAN:v.get("NOMOR"),STATUS:1})}}})}w.getStore().removeAll();w.doAfterLoadParameters=function(){q.setDisabled(false)};if(p.justPrint){w.hideButtonSimpan(p.justPrint)}}}},0,["workspace-input-hasil-lab"],["component","box","container","panel","form","com-form","workspace-input-hasil-lab"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-input-hasil-lab":true},["widget.workspace-input-hasil-lab"],0,[layanan.laboratorium.hasil,"Workspace"],0));(Ext.cmd.derive("layanan.laboratorium.hasil.WorkspaceController",Ext.app.ViewController,{onSelectTindakanMedis:function(o,n){var p=this.getReferences(),m=this.getViewModel().get("kunjungan");if(n){p.listindakanmedist.setDisabled(true);p.listlab.loadParameters(n)}},onCetak:function(f){this.cetak(false)},onPreview:function(f){this.cetak(true,f.action)},privates:{cetak:function(x,E){var w=this,G=w.getView(),v=w.getReferences(),A=v.listindakanmedist,B=v.formsaran,F=A.getSelection(),z=B.getViewModel().get("record"),y="",C=Ext.getStore("instansi"),D="";C=C?C.getAt(0):null;if(C){D=C.get("REFERENSI").PPK.KODE}D=D+(D==""?D:"-");F.forEach(function(e){if(y==""){y=e.data.ID}else{y=e.data.ID+","+y}});G.cetak({NAME:"layanan."+D+"CetakHasilLab",TYPE:x?"Pdf":"Word",EXT:x?"pdf":"docx",PARAMETER:{PNOMOR:z.get("KUNJUNGAN"),PTINDAKAN:y,PFORMAT:E},REQUEST_FOR_PRINT:!x,PRINT_NAME:"CetakHasil"},function(e){if(x){G.printPreview("Preview Hasil Lab",e)}})}}},0,0,0,0,["controller.workspace-input-hasil-lab-controller"],0,[layanan.laboratorium.hasil,"WorkspaceController"],0));(Ext.cmd.derive("layanan.laboratorium.order.Detil",Ext.grid.Panel,{controller:"order-lab-detil",viewModel:{data:{columnCommandConfig:{hideBatalOrder:false,hideLihatHasil:true,hideAction:false}},formulas:{showLihatHasil:function(m){var n=!m("columnCommandConfig.hideLihatHasil"),l=m("order")?m("order.STATUS"):0;return n&&l==2}},stores:{store:{type:"order-detil-lab-store"}}},title:"Order Detil",bind:{store:"{store}"},columns:[{xtype:"rownumberer",text:"No",align:"left",width:50},{xtype:"templatecolumn",text:"Tindakan",sortable:false,flex:1,tpl:'<div style="white-space:normal !important;">{REFERENSI.TINDAKAN.NAMA}</div>'},{xtype:"widgetcolumn",align:"center",text:"Aksi",sortable:false,bind:{hidden:"{columnCommandConfig.hideAction}"},width:130,align:"center",widget:{xtype:"fieldcontainer",layout:{type:"vbox"},defaults:{padding:2,xtype:"button"},items:[{action:0,iconCls:"x-fa fa-minus-circle",ui:"soft-red",align:"center",handler:"onBatalOrder",bind:{hidden:"{columnCommandConfig.hideBatalOrder}"}},{text:"Lihat Hasil",action:0,ui:"soft-blue",align:"center",hidden:true,handler:"onLihatHasil",bind:{hidden:"{!showLihatHasil}"}}]}}],loadStore:function(o,p){var e=this,s=e.getViewModel(),q=s.get("store");if(q){q.removeAll();q.queryParams=q.queryParams||{};if(o){q.queryParams.ORDER_ID=p.get("NOMOR");if(!s.get("kunjungan")){s.set("kunjungan",o)}if(!s.get("order")){s.set("order",p)}}q.load()}},getData:function(){var n=this,m=n.getViewModel().get("store"),l=[];m.each(function(e){l.push(e.data)});return l},addRow:function(l){var n=this,m=n.getViewModel().get("store");m.add(l)},removeDataStore:function(){this.getViewModel().get("store").removeAll()},removeAnotherModels:function(){var l=this.getViewModel().get("store"),g=[];l.each(function(e){if(Ext.getClassName(e)!="data.model.OrderDetilLab"){g.push(e)}});l.remove(g)},hideCommandButtons:function(o){var m=this,p=m.getViewModel(),n=p.get("columnCommandConfig");o=Ext.apply(n,o);p.set("columnCommandConfig",o);p.notify()}},0,["order-lab-detil"],["component","box","container","panel","tablepanel","gridpanel","grid","order-lab-detil"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"order-lab-detil":true},["widget.order-lab-detil"],0,[layanan.laboratorium.order,"Detil"],0));(Ext.cmd.derive("layanan.laboratorium.order.DetilController",Ext.app.ViewController,{onBatalOrder:function(m){var n=this,o=n.getStore("store"),p=m.ownerCt.getWidgetRecord();o.remove(p)}},0,0,0,0,["controller.order-lab-detil"],0,[layanan.laboratorium.order,"DetilController"],0));(Ext.cmd.derive("layanan.laboratorium.order.Form",com.Form,{controller:"order-lab-form",viewModel:{data:{record:undefined,formConfig:{readOnly:true,tanggal:new Date()}}},layout:{type:"hbox",align:"stretch"},defaults:{margin:"0 1 0 0"},bodyPadding:5,initComponent:function(){var l=this,g=l.getSysdate();l.items=[{xtype:"ruangan-lab-combo",params:{STATUS:1},flex:1,hideTrigger:false,bind:{readOnly:"{formConfig.readOnly}"},reference:"ruanganlabcombo",allowBlank:false,name:"TUJUAN",listeners:{select:"onTujuanSelect"}},{xtype:"dokter-combo",emptyText:"[Dokter Perujuk]",flex:1,bind:{readOnly:"{formConfig.readOnly}"},reference:"doktercombo",allowBlank:false,name:"DOKTER_ASAL",listeners:{focus:"onBeforeQuery"}},{name:"ALASAN",reference:"alasan",flex:1,xtype:"textfield",emptyText:"[ Diagnosa ]",bind:{readOnly:"{formConfig.readOnly}"}},{name:"TANGGAL",reference:"tanggal",width:200,xtype:"datefield",emptyText:"[Pilih Tanggal Order]",format:"d/m/Y",maxValue:g,bind:{readOnly:"{formConfig.readOnly}",minValue:"{formConfig.tanggal}"}},{name:"WAKTU",reference:"waktu",width:105,xtype:"timefield",emptyText:"[Jam:Mnt:Dtk]",bind:{readOnly:"{formConfig.readOnly}"},format:"H:i:s",hideTrigger:true}];l.callParent(arguments)},loadRecord:function(f){var v=this,w=v.getForm().loadRecord(f);if(f){var y=v.down("[reference=waktu]"),e=v.down("[reference=ruanganlabcombo]"),g=v.down("[reference=doktercombo]"),u=f.get("REFERENSI");y.setValue(f.get("TANGGAL"));v.getViewModel().set("record",f);if(u){var x=u.KUNJUNGAN;e.params.RUANGAN=x.RUANGAN;g.params.RUANGAN=x.RUANGAN}e.load()}return w},setFormConfig:function(m){var l=this,n=l.getViewModel();_config=n.get("formConfig");m=Ext.apply(_config,m);n.set("formConfig",m);n.notify()},getRecord:function(){return this.getViewModel().get("record")},getFormData:function(){var n=this,m=n.getReferences(),l=n.getForm().getValues();tgl=m.tanggal.getValue(),wkt=m.waktu.getValue();tgl.setHours(wkt.getHours());tgl.setMinutes(wkt.getMinutes());tgl.setSeconds(wkt.getSeconds());l.TANGGAL=tgl;return l},focus:function(g,l){this.getReferences().ruanganlabcombo.focus(g,l)}},0,["order-lab-form"],["component","box","container","panel","form","com-form","order-lab-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"order-lab-form":true},["widget.order-lab-form"],0,[layanan.laboratorium.order,"Form"],0));(Ext.cmd.derive("layanan.laboratorium.order.FormController",Ext.app.ViewController,{onTujuanSelect:function(g,l){if(l){this.getView().fireEvent("tujuanselected",l)}},onBeforeQuery:function(f){if(f.combo){f.combo.getStore().removeAll()}}},0,0,0,0,["controller.order-lab-form"],0,[layanan.laboratorium.order,"FormController"],0));(Ext.cmd.derive("layanan.laboratorium.order.Workspace",com.Form,{controller:"order-lab-workspace",viewModel:{data:{kunjungan:undefined}},layout:"border",initComponent:function(){var f=this;f.items=[{region:"north",xtype:"order-lab-form",border:false,bodyPadding:2,reference:"orderlabform",listeners:{tujuanselected:"onTujuanSelected"}},{region:"center",xtype:"order-lab-detil",flex:1,reference:"orderlabdetil",viewConfig:{plugins:{ptype:"gridviewdragdrop",enableDrag:false},listeners:{scope:f.getController(),drop:"onDropTindakan"}}},{region:"east",title:"Daftar Tindakan",xtype:"tindakan-list",collapsible:true,showSearch:true,flex:1,reference:"tindakanlist",hideHeaders:true,split:true,multiSelect:true,viewConfig:{plugins:{ptype:"gridviewdragdrop",enableDrop:false},copy:true},listeners:{itemdblclick:"onItemDblClickTindakan"}}];f.buttons=[{text:"Kirim Order",ui:"soft-green",reference:"btnkirimlab",bind:{hidden:"{isFinal}"},tooltip:{text:"Kirim Order Laboratorium",mouseOffset:[50,-65]},iconCls:"x-fa fa-share",handler:"onKirim"},{text:"Reset",ui:"soft-blue",reference:"btnresetlab",bind:{hidden:"{isFinal}"},tooltip:{text:"Reset",mouseOffset:[50,-65]},iconCls:"x-fa fa-refresh",handler:"onReset"}];com.Form.prototype.initComponent.call(this)},load:function(o){var u=this,p=u.getViewModel(),q=u.getReferences(),t={};if(o){p.set("kunjungan",o);if(Ext.getClassName(o)=="data.model.Kunjungan"){var s=o.get("STATUS")!=1;t={KUNJUNGAN:o.get("NOMOR"),REFERENSI:{KUNJUNGAN:o.data},TANGGAL:u.getSysdate()};q.orderlabform.setFormConfig({readOnly:s,tanggal:o.get("MASUK")})}q.tindakanlist.removeDataStore();q.orderlabform.loadRecord(Ext.create("data.model.OrderLab",t));q.orderlabform.focus(false,100)}},getFormData:function(){var n=this.down("[reference=orderlabform]"),p=this.down("[reference=orderlabdetil]"),m=n.getFormData(),o=p.getData();m.ORDER_DETIL=o;return{ORDER_LAB:m}}},0,["order-lab-workspace"],["component","box","container","panel","form","com-form","order-lab-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"order-lab-workspace":true},["widget.order-lab-workspace"],0,[layanan.laboratorium.order,"Workspace"],0));(Ext.cmd.derive("layanan.laboratorium.order.WorkspaceController",Ext.app.ViewController,{onTujuanSelected:function(w){var H=this,G=H.getReferences(),D=H.getViewModel(),I=H.getView(),z=D.get("kunjungan"),x=I.getReferensi(z.data,"RUANG_KAMAR_TIDUR"),B=I.getReferensi(x,"RUANG_KAMAR"),y=I.getPropertyConfig(7),A=I.getReferensi(w.data,"LABORATORIUM"),F=I.getReferensi(A,"RUANGAN_KELAS"),E=F?F.KELAS:0,C={RUANGAN:w.get("LABORATORIUM"),start:0,limit:10000,KELAS:E,STATUS:1};if(y=="TRUE"){if(B){E=B.KELAS}if(z.get("TITIPAN")==1){E=z.get("TITIPAN_KELAS")}C.KELAS=E}G.tindakanlist.clearSearch();G.tindakanlist.loadStore(C);G.orderlabdetil.removeDataStore()},onItemDblClickTindakan:function(p,n){var m=this,o=m.getReferences();n=Ext.create("data.model.OrderDetilLab",{TINDAKAN:n.get("ID"),REFERENSI:{TINDAKAN:n.data}});o.orderlabdetil.addRow(n)},onDropTindakan:function(t,e,u,q){var s=this,f=s.getReferences();Ext.Array.each(e.records,function(l,g){l=Ext.create("data.model.OrderDetilLab",{TINDAKAN:l.get("ID"),REFERENSI:{TINDAKAN:l.data}});f.orderlabdetil.addRow(l)});f.orderlabdetil.removeAnotherModels()},onKirim:function(u){var v=this,e=v.getView(),t=v.getReferences(),s=t.orderlabform.getFormData(),w=t.orderlabdetil.getData();if(t.orderlabform.isValid()&&w.length>0){var f=t.orderlabform.getRecord();if(f){s.ORDER_DETIL=w;f.set(s);f.animateTarget=u;f.scope=v;f.showError=true;f.save({callback:function(l,g,m){if(m){var o=e.app.xpriv("110107");if(o){e.setLoading(true);var n=Ext.create("data.model.Kunjungan",{NOPEN:l.get("REFERENSI").KUNJUNGAN.NOPEN,RUANGAN:l.get("TUJUAN"),REF:l.get("NOMOR"),STATUS:1});n.showError=true;n.animateTarget=u;n.scope=v;n.save({callback:function(p,y,q){if(q){e.fireEvent("reopen",p)}e.setLoading(false)}})}else{Ext.toast({html:"Order anda telah terkirim ke tujuan",headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"});v.getView().fireEvent("kirim",l);v.onReset()}}}})}}},onReset:function(){var n=this,m=n.getReferences(),l=m.orderlabform.getRecord();m.orderlabform.reset();m.orderlabform.loadRecord(Ext.create("data.model.OrderLab",{KUNJUNGAN:l.get("NOMOR"),REFERENSI:{KUNJUNGAN:l.get("REFERENSI").KUNJUNGAN},TANGGAL:n.getView().getSysdate()}));m.orderlabform.focus(false,100);m.orderlabdetil.removeDataStore();m.tindakanlist.removeDataStore()}},0,0,0,0,["controller.order-lab-workspace"],0,[layanan.laboratorium.order,"WorkspaceController"],0));(Ext.cmd.derive("layanan.laboratorium.orderlist.List",Ext.grid.Panel,{controller:"order-lab-list",viewModel:{stores:{store:{type:"order-lab-store"}}},bind:{store:"{store}"},columns:[{xtype:"rownumberer",text:"No",align:"left",width:50},{text:"Nomor",dataIndex:"NOMOR",sortable:false,flex:1},{xtype:"datecolumn",text:"Tgl. Order",dataIndex:"TANGGAL",format:"d/m/Y H:i:s",sortable:false},{xtype:"templatecolumn",text:"Asal",flex:1,sortable:false,hidden:true,tpl:'<div style="white-space:normal !important;">{REFERENSI.KUNJUNGAN.REFERENSI.RUANGAN.DESKRIPSI}</div>'},{xtype:"templatecolumn",text:"Dokter Asal",flex:1,sortable:false,hidden:true,tpl:'<div style="white-space:normal !important;">{REFERENSI.DOKTER_ASAL.NAMA}</div>'},{xtype:"templatecolumn",text:"Tujuan",flex:1,sortable:false,tpl:'<div style="white-space:normal !important;">{REFERENSI.TUJUAN.DESKRIPSI}</div>'},{xtype:"widgetcolumn",align:"center",text:"Aksi",widget:{xtype:"fieldcontainer",defaults:{padding:2,margin:"0 2 1 0"},items:[{xtype:"button",action:0,text:"Batalkan",iconCls:"x-fa fa-minus-circle",ui:"soft-red",tooltip:"Batalkan Order",handler:"onBatalOrder"},{xtype:"button",text:"Dibatalkan",action:1,ui:"soft-red",hidden:true}]},onWidgetAttach:function(q,s,u){var f=u.get("STATUS"),e=s.down("[action=0]"),t=s.down("[action=1]");e.setHidden(f!=1);t.setHidden(!(f==0))}}],loadStore:function(n){var m=this,p=m.getViewModel(),o=p.get("store");if(o){o.removeAll();o.queryParams=o.queryParams||{};if(n){if(Ext.getClassName(n)=="data.model.Kunjungan"){o.queryParams.KUNJUNGAN=n.get("NOMOR");o.queryParams.HISTORY=1;if(!p.get("kunjungan")){p.set("kunjungan",n)}}}o.load()}},refresh:function(){var f=this.getViewModel().get("store");if(f){f.reload()}}},0,["order-lab-list"],["component","box","container","panel","tablepanel","gridpanel","grid","order-lab-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"order-lab-list":true},["widget.order-lab-list"],0,[layanan.laboratorium.orderlist,"List"],0));(Ext.cmd.derive("layanan.laboratorium.orderlist.ListController",Ext.app.ViewController,{init:function(){var f=this.getStore("store");if(f){f.on("load",function(l,e){if(e.length==0){f.removeAll()}})}},onBatalOrder:function(m){var n=this,o=n.getStore("store"),p=m.ownerCt.getWidgetRecord();p.showError=true;p.animateTarget=m;p.scope=n;Ext.Msg.show({title:"Pembatalan Order",message:"Anda yakin ingin membatalkan Order dengan Nomor Order "+p.get("NOMOR")+" ?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:m,fn:function(e){if(e==="yes"){p.set("STATUS",0);p.save({callback:function(g,f,l){if(l){Ext.toast({html:"Pembatalan order dengan Nomor Order "+p.get("NOMOR")+" berhasil",headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"});o.load()}else{p.set("STATUS",1)}}})}else{p.set("STATUS",status==1?0:1)}}})}},0,0,0,0,["controller.order-lab-list"],0,[layanan.laboratorium.orderlist,"ListController"],0));(Ext.cmd.derive("layanan.laboratorium.orderlist.Workspace",com.Form,{controller:"orderlist-lab-workspace",viewModel:{stores:{kunjungan:{type:"kunjungan-store"}}},layout:"border",initComponent:function(){var f=this;f.items=[{region:"center",title:"Orders",xtype:"order-lab-list",reference:"orderlablist",listeners:{select:"onOrderSelected"}},{region:"east",xtype:"order-lab-detil",flex:1,reference:"orderlabdetil",header:{items:[{xtype:"button",text:"Lihat Hasil",listeners:{scope:f.getController(),click:"onLihatHasil"}}]},flex:1,collapsible:true,split:true}];f.callParent(arguments)},load:function(n){var p=this,o=p.down("[reference=orderlablist]"),m=p.down("[reference=orderlabdetil]");o.loadStore(n);m.removeDataStore()},refresh:function(){var n=this,m=n.down("[reference=orderlablist]"),l=n.down("[reference=orderlabdetil]");m.refresh();l.removeDataStore()}},0,["orderlist-lab-workspace"],["component","box","container","panel","form","com-form","orderlist-lab-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"orderlist-lab-workspace":true},["widget.orderlist-lab-workspace"],0,[layanan.laboratorium.orderlist,"Workspace"],0));(Ext.cmd.derive("layanan.laboratorium.orderlist.WorkspaceController",Ext.app.ViewController,{onOrderSelected:function(s,u){var t=this,q=t.getReferences(),e=t.getViewModel().get("kunjungan"),f=u.get("STATUS");q.orderlabdetil.hideCommandButtons({hideBatalOrder:true,hideLihatHasil:f!=2,hideAction:true});q.orderlabdetil.loadStore(e,u)},onLihatHasil:function(){var n=this,p=n.getReferences(),o=n.getViewModel(),s=p.orderlablist.getSelection();if(s.length>0){s=s[0];if(s.get("STATUS")!=2){return}var q=o.get("kunjungan");q.queryParams={REF:s.get("NOMOR"),STATUS:2,HISTORY:1};q.load(function(f,g,e){if(e){if(f.length>0){n.getView().openDialog("",true,0,0,{title:"Hasil Laboratorium",xtype:"workspace-input-hasil-lab",ui:"panel-cyan",showCloseButton:true,justPrint:true},function(m,l){var u=l.down("workspace-input-hasil-lab");u.setFormConfig({viewOnly:true,simpan:false});u.load(f[0])})}}})}}},0,0,0,0,["controller.orderlist-lab-workspace"],0,[layanan.laboratorium.orderlist,"WorkspaceController"],0));(Ext.cmd.derive("layanan.laboratorium.riwayat.Workspace",com.Form,{controller:"riwayat-lab-workspace",viewModel:{},layout:"border",initComponent:function(){var f=this;f.items=[{region:"center",xtype:"kunjungan-list",flex:2,margin:"0 2 0 0",reference:"riwayatlist",listeners:{select:"onSelect"}},{xtype:"tindakan-medis-list",region:"east",header:{items:[{xtype:"button",text:"Lihat Hasil",listeners:{scope:f.getController(),click:"onLihatHasil"}}]},split:true,collapsible:true,width:600,reference:"tindakanlist",riwayat:true}];f.callParent(arguments)},load:function(o){var t=this,s=t.down("[reference=riwayatlist]"),u=t.down("[reference=tindakanlist]"),p=o.get("REFERENSI")?o.get("REFERENSI"):null,q=p?(p.PENDAFTARAN?p.PENDAFTARAN.NORM:0):0;s.hideColumnConfig({action:true});s.loadStore({NORM:q,JENIS_KUNJUNGAN:4,HISTORY:1,STATUS:2});u.removeDataStore()}},0,["riwayat-lab-workspace"],["component","box","container","panel","form","com-form","riwayat-lab-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"riwayat-lab-workspace":true},["widget.riwayat-lab-workspace"],0,[layanan.laboratorium.riwayat,"Workspace"],0));(Ext.cmd.derive("layanan.laboratorium.riwayat.WorkspaceController",Ext.app.ViewController,{onSelect:function(p,n){var m=this,o=m.getReferences();o.tindakanlist.loadStore(n,1)},onLihatHasil:function(){var l=this,n=l.getReferences(),m=n.riwayatlist.getSelection();if(m.length>0){l.getView().openDialog("",true,0,0,{title:"Hasil Laboratorium",xtype:"workspace-input-hasil-lab"},function(e,g){var f=g.down("workspace-input-hasil-lab");f.setFormConfig({viewOnly:true,simpan:false});f.load(m[0])})}}},0,0,0,0,["controller.riwayat-lab-workspace"],0,[layanan.laboratorium.riwayat,"WorkspaceController"],0));(Ext.cmd.derive("layanan.laboratorium.terimaorder.List",com.Grid,{controller:"terima-lab-list",viewModel:{data:{inProses:false},stores:{store:{type:"order-lab-store"}}},title:"Pengunjung Laboratorium",iconCls:"x-fa fa-flask",header:{items:[{xtype:"search-field",emptyText:"[NORM]",flex:1,listeners:{search:"onSearch",clear:"onClear",change:"onChange"}}]},hideHeaders:true,first:true,cls:"x-css-shadow x-color-w",columns:[{xtype:"templatecolumn",flex:2,border:false,tpl:new Ext.XTemplate('<div style="font-weight: bold; font-size: 12px; white-space:normal !important;">{[this.getFormatNorm(values.REFERENSI.KUNJUNGAN.REFERENSI.PENDAFTARAN.REFERENSI.PASIEN.NORM)]} - {[this.getNamaLengkap(values.REFERENSI.KUNJUNGAN.REFERENSI.PENDAFTARAN.REFERENSI.PASIEN)]}</div>',"<div>{[this.getFormatPendaftaran(values.REFERENSI.KUNJUNGAN.NOPEN)]} - {[this.tanggalFormat(values.REFERENSI.KUNJUNGAN.REFERENSI.PENDAFTARAN.TANGGAL)]}</div>",'<div style="font-size: 12px; white-space:normal !important;">{NOMOR} - {[this.tanggalFormat(values.TANGGAL)]}</div>','<div style="font-size: 12px; white-space:normal !important;">Asal: {[this.getAsal(values.REFERENSI.KUNJUNGAN)]}</div>','<div style="font-size: 12px; white-space:normal !important;">Tujuan: {[this.getTujuan(values.REFERENSI.TUJUAN)]}</div>','<div style="font-size: 12px; white-space:normal !important;">{[this.getDokterAsal(values.REFERENSI.DOKTER_ASAL)]}</div>','<div style="font-size: 12px; white-space:normal !important;">Penjamin: {[this.getPenjamin(values.REFERENSI.KUNJUNGAN.REFERENSI.PENDAFTARAN.PENJAMIN)]}</div>',{getFormatNorm:function(m){var n=Ext.String.leftPad(m,8,"0"),l=Ext.String.insert(Ext.String.insert(Ext.String.insert(n,".",2),".",5),".",8);return l},getNamaLengkap:function(p){var n=p.GELAR_DEPAN||"",e=p.NAMA||"",o=p.GELAR_BELAKANG||"";n=n==""?"":n+". ";o=o==""?"":", "+o;return n+e+o},getDokterAsal:function(l){var g=l?(l.NAMA||""):"";return g},getFormatPendaftaran:function(f){return f.substring(0,6)+"."+f.substring(6)},tanggalFormat:function(g){var l=Ext.isDate(g)?g:Ext.Date.parse(g,"Y-m-d H:i:s");return Ext.Date.format(l,"d-m-Y H:i:s")},getAsal:function(y){var C=y.REFERENSI,x=y.JENIS_KUNJUNGAN==3,f=C?(C.RUANGAN?C.RUANGAN.DESKRIPSI:""):"",g=C&&x?C.RUANG_KAMAR_TIDUR:null,w=g?g.REFERENSI.RUANG_KAMAR:null,A=g?g.TEMPAT_TIDUR:"",e=w?w.KAMAR:"",z=w?(w.REFERENSI.KELAS?w.REFERENSI.KELAS.DESKRIPSI:""):"",B=f+(x?"</br>"+e+" / "+A+" / "+z:"");return B},getTujuan:function(l){var n=l?l:null,m=n?n.DESKRIPSI:"";return m},getPenjamin:function(o){var m=o.REFERENSI,n=m.KAP,p=n.REFERENSI.PENJAMIN.DESKRIPSI+(n.NOMOR==""?"":"-"+n.NOMOR)+" [ Kls. "+(m.KELAS?m.KELAS.DESKRIPSI:"")+" - SEP. "+o.NOMOR+" ]";return p}})},{xtype:"widgetcolumn",text:"Status",flex:1,align:"right",widget:{xtype:"fieldcontainer",defaults:{padding:2},items:[{xtype:"button",text:"Terima",action:0,margin:"0 1 0 0",handler:"onTerima"},{xtype:"button",text:"Batal",action:1,ui:"soft-red",handler:"onBatal"}]}}],onBeforeLoad:function(m,n,p){var o=n.get("config");if(m.first){m.first=false}n.set("config",o);m.setParams({COLUMNS:'["NOMOR","KUNJUNGAN","TANGGAL","DOKTER_ASAL","TUJUAN","STATUS"]',REFERENSI:Ext.JSON.encode({Kunjungan:{COLUMNS:["NOMOR","NOPEN","JENIS_KUNJUNGAN","RUANGAN","RUANG_KAMAR_TIDUR","STATUS"],REFERENSI:{Ruangan:{},RuangKamarTidur:{REFERENSI:{RuangKamar:{REFERENSI:{Kelas:true}}}},Pendaftaran:{COLUMNS:["NOMOR","NORM","TANGGAL"],REFERENSI:{Pasien:{COLUMNS:["NORM","GELAR_DEPAN","NAMA","GELAR_BELAKANG","JENIS_KELAMIN","TANGGAL_LAHIR","TEMPAT_LAHIR"]},Penjamin:{REFERENSI:{Kelas:true,KAP:true}}}}}},Dokter:true,Ruangan:{COLUMNS:["DESKRIPSI"]}})})}},0,["terima-lab-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","terima-lab-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"terima-lab-list":true},["widget.terima-lab-list"],0,[layanan.laboratorium.terimaorder,"List"],0));(Ext.cmd.derive("layanan.laboratorium.terimaorder.ListController",Ext.app.ViewController,{filter:{norm:"",tanggal:{checked:false,value:new Date()}},orderSelected:{property:"TANGGAL",direction:"ASC"},onSearch:function(l,g){this.filter.norm=g;this.cari()},onClear:function(){this.filter.norm="";this.cari()},onChange:function(p,n){var o=this,s=o.getView(),q=s.down("search-field");if(n==""){q.onClearClick()}},onTerima:function(q){var o=this,s=o.getView(),p=o.getViewModel(),t=q.ownerCt.getWidgetRecord(),u=t.get("REFERENSI").KUNJUNGAN.REFERENSI.PENDAFTARAN.REFERENSI.PASIEN.NAMA;s.waitRefresh=true;s.showMessageBox({title:"Penerimaan Order Laboratorium",message:"Anda yakin ingin menerima Order Laboratorium Pasien An. "+u+" ?",header:{padding:5},buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:q,fn:function(e){if(e==="yes"){p.set("inProses",true);var f=Ext.create("data.model.Kunjungan",{NOPEN:t.get("REFERENSI").KUNJUNGAN.NOPEN,RUANGAN:t.get("TUJUAN"),REF:t.get("NOMOR"),STATUS:1});f.showError=true;f.animateTarget=e;f.scope=o;f.save({callback:function(g,m,l){s.waitRefresh=false;if(l){s.remove(q.ownerCt);s.notifyMessage("Penerimaan Order Laboratorium Pasien An. "+u+" berhasil");s.fireEvent("terima",t);s.refresh()}p.set("inProses",false)}})}else{s.waitRefresh=false;p.set("inProses",false)}}})},onBatal:function(p){var o=this,q=o.getView(),s=p.ownerCt.getWidgetRecord(),t=s.get("STATUS"),u=s.get("REFERENSI").KUNJUNGAN.REFERENSI.PENDAFTARAN.REFERENSI.PASIEN.NAMA;q.waitRefresh=true;s.showError=true;s.animateTarget=p;s.scope=o;q.showMessageBox({title:"Pembatalan Penerimaan Order Laboratorium",message:"Anda yakin ingin membatalkan penerimaan Order Laboratorium Pasien An. "+u+" ?",ui:"window-warning",header:{padding:5},buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:p,fn:function(e){if(e==="yes"){s.set("STATUS",0);s.save({callback:function(f,l,g){q.waitRefresh=false;if(g){q.remove(p.ownerCt);q.notifyMessage("Pembatalan penerimaan Order Laboratorium Pasien An. "+u+" berhasil");q.refresh()}else{s.set("STATUS",t)}}})}else{q.waitRefresh=false;s.set("STATUS",t)}}})},privates:{cari:function(){var n=this,p=n.getView(),o=p.down("pagingtoolbar"),m={sort:Ext.JSON.encode(n.orderSelected)};if(n.filter.norm==""){delete p.getStore().queryParams.NORM}else{m.NORM=n.filter.norm}if(!n.filter.tanggal.checked){delete p.getStore().queryParams.TANGGAL}else{m.TANGGAL=Ext.Date.format(n.filter.tanggal.value,"Y-m-d")}p.setParams(m);if(o){o.moveFirst()}else{p.load()}}}},0,0,0,0,["controller.terima-lab-list"],0,[layanan.laboratorium.terimaorder,"ListController"],0));(Ext.cmd.derive("layanan.laboratorium.viewhasil.Form",Ext.grid.Panel,{viewModel:{data:{listModel:true},stores:{store:{type:"tindakan-order",autoLoad:true}}},bind:{store:"{store}"},layout:{type:"vbox",align:"stretch"},defaults:{margin:"0 0 10 0"},border:false,flex:1,initComponent:function(){var l=this,g=new Date();l.columns=[{xtype:"rownumberer",text:"No",align:"left",width:50},{text:"Parameter",dataIndex:"PARAMETER",flex:1},{text:"Hasil",dataIndex:"HASIL",flex:1},{text:"Nilai",dataIndex:"NILAI",width:100},{text:"Satuan",dataIndex:"SATUAN",width:100}],l.buttons=[{text:"Close",iconCls:"x-fa fa-save",handler:"onClose"}];l.callParent(arguments)}},0,["form-hasil-lab"],["component","box","container","panel","tablepanel","gridpanel","grid","form-hasil-lab"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"form-hasil-lab":true},["widget.form-hasil-lab"],0,[layanan.laboratorium.viewhasil,"Form"],0));(Ext.cmd.derive("layanan.laboratorium.viewhasil.Workspace",Ext.panel.Panel,{layout:{type:"hbox",align:"stretch"},bodyPadding:5,dockedItems:[{xtype:"toolbar",dock:"top",layout:{type:"hbox",align:"left"},defaults:{xtype:"displayfield",labelWidth:100,style:"text-align: left; font-weight: bold; font-size: 14px"},items:[{value:"08-08-2015"},{value:"  |  "},{value:"Dislokasi dari tengkorak dari tulang belakang leher"}]}],items:[{xtype:"form-hasil-lab",border:false,flex:1}]},0,["workspace-hasil-lab"],["component","box","container","panel","workspace-hasil-lab"],{component:true,box:true,container:true,panel:true,"workspace-hasil-lab":true},["widget.workspace-hasil-lab"],0,[layanan.laboratorium.viewhasil,"Workspace"],0));(Ext.cmd.derive("layanan.laboratorium.widget.Orders",Ext.Container,{layout:"fit",items:[{xtype:"terima-lab-list",reference:"terimalablist",viewConfig:{loadMask:false},listeners:{terima:"onTerima"}}],loadStore:function(l){var g=this.down("terima-lab-list");g.loadStore(l)},refresh:function(){this.down("terima-lab-list").refresh()}},0,["laboratorium-widget-orders"],["component","box","container","laboratorium-widget-orders"],{component:true,box:true,container:true,"laboratorium-widget-orders":true},["widget.laboratorium-widget-orders"],0,[layanan.laboratorium.widget,"Orders"],0));(Ext.cmd.derive("layanan.pa.hasil.Form",com.Form,{controller:"form-hasil-pa",model:"data.model.HasilPa",layout:{type:"hbox",align:"stretch"},viewModel:{stores:{store:{type:"hasilpa-store"}}},bodyPadding:5,border:true,defaultType:"container",defaults:{margin:"0 2 2 0",layout:{type:"vbox",align:"stretch"},defaults:{margin:"0 2 2 0"}},jenisPemeriksaan:1,initComponent:function(){var g=this,l=new Date();g.items=[{flex:1,defaults:{bind:{readOnly:"{formConfig.viewOnly}"},allowBlank:true},items:[{xtype:"textfield",emptyText:"[ Lokasi ]",name:"LOKASI"},{xtype:"textfield",name:"DIDAPAT_DENGAN",emptyText:"[ Didapat Dengan ]"},{xtype:"textfield",hidden:true,name:"KUNJUNGAN"},{xtype:"textfield",hidden:true,name:"JENIS_PEMERIKSAAN"},{xtype:"textareafield",name:"CAIRAN_FIKSASI",flex:1,emptyText:"[ Cairan Fiksasi ]"},{xtype:"textareafield",name:"DIAGNOSA_KLINIK",flex:1,emptyText:"[ Diagnosa Klinik ]"},{xtype:"textareafield",emptyText:"[ Keterangan Klinik ]",flex:1,name:"KETERANGAN_KLINIK"},{xtype:"textareafield",name:"MAKROSKOPIK",flex:1,emptyText:"[ Makroskopik ]"}]},{xtype:"splitter"},{flex:1,defaults:{bind:{readOnly:"{formConfig.viewOnly}"}},items:[{xtype:"textareafield",name:"MIKROSKOPIK",flex:1,emptyText:"[ Mikroskopik ]"},{xtype:"textareafield",name:"KESIMPULAN",flex:1,emptyText:"[ Kesimpulan ]"},{xtype:"textareafield",name:"REEVALUASI",flex:1,emptyText:"[ Re-Evaluasi ]"}]},{xtype:"splitter"},{flex:1,defaults:{bind:{readOnly:"{formConfig.viewOnly}"}},items:[{xtype:"datefield",name:"TANGGAL_IMUNO",emptyText:"[ Tanggal Imuno ]"},{xtype:"textareafield",name:"IMUNO_HISTOKIMIA",flex:1,emptyText:"[ Imuno Histokimia ]"},{xtype:"dokter-combo",name:"DOKTER"}]}];com.Form.prototype.initComponent.apply(this,arguments)},buttons:[{name:"TANGGAL",reference:"tanggal",width:150,xtype:"datefield",format:"d/m/Y",submitFormat:"Y-m-d",value:new Date(),maxValue:new Date(),margin:"0 1 0 0",readOnly:true},{name:"WAKTU",reference:"waktu",width:125,xtype:"timefield",format:"H:i:s",hideTrigger:true,value:new Date(),readOnly:true},{xtype:"component",flex:1},{text:"Simpan",ui:"soft-green",iconCls:"x-fa fa-save",hidden:true,bind:{hidden:"{!formConfig.simpan}"},handler:"onSimpan"},{text:"Cetak",iconCls:"x-fa fa-print",hidden:true,bind:{hidden:"{!formConfig.simpan}"},handler:"onPreview"}],onLoadRecord:function(o,u){var p=u.get("REFERENSI"),t=p?(p.DOKTER?Ext.create("data.model.Dokter",p.DOKTER):null):null,s=o.down("dokter-combo"),q=o.down("[name=WAKTU]");if(t){s.select(t)}},load:function(u){console.log(u);var o=this,p=o.getViewModel(),q=p.get("store");if(u){if(Ext.getClassName(u)=="data.model.Kunjungan"){var s=u;console.log(u.get("NOMOR"));q.queryParams={KUNJUNGAN:u.get("NOMOR"),JENIS_PEMERIKSAAN:o.jenisPemeriksaan},q.load({callback:function(e,l,f){console.log(e);if(f){o.loadRecord(e[0])}else{var g={KUNJUNGAN:s.get("NOMOR"),TANGGAL:o.getSysdate(),JENIS_PEMERIKSAAN:o.jenisPemeriksaan,REFERENSI:{KUNJUNGAN:s.data}};console.log(g);o.createRecord(g)}}})}else{var t=u.get("STATUS")==1;o.setFormConfig({viewOnly:!t,simpan:t});o.loadRecord(u[0])}}}},0,["form-hasil-pa"],["component","box","container","panel","form","com-form","form-hasil-pa"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-hasil-pa":true},["widget.form-hasil-pa"],0,[layanan.pa.hasil,"Form"],0));(Ext.cmd.derive("layanan.pa.hasil.FormController",Ext.app.ViewController,{onSimpan:function(m){var l=this,n=l.getView();n.save(m)},onPreview:function(f){this.cetak(true)},privates:{cetak:function(n){var o=this,p=o.getView(),m=o.getViewModel().get("record");p.cetak({NAME:"layanan.CetakHasilPa",TYPE:n?"Pdf":"Word",EXT:n?"pdf":"docx",PARAMETER:{PID:m.get("ID")},REQUEST_FOR_PRINT:!n,PRINT_NAME:"CetakHasil"},function(e){if(n){p.openDialog("Print Preview",true,0,0,{xtype:"panel",title:"Preview Hasil Patologi"},function(g,f){f.down("panel").update("<iframe style='width: 100%; height: 100%' src='"+e+"'></iframe>")})}})}}},0,0,0,0,["controller.form-hasil-pa"],0,[layanan.pa.hasil,"FormController"],0));(Ext.cmd.derive("layanan.pa.hasil.Workspace",com.Tab,{controller:"workspace-hasil-pa",viewModel:{data:{kunjungan:undefined}},defaults:{border:false,listeners:{save:"onSimpan"}},items:[{title:"Hasil Patologi",xtype:"form-hasil-pa",reference:"hasilpatologi"},{title:"Hasil Sitologi",xtype:"form-hasil-pa",jenisPemeriksaan:2,reference:"hasilsitoogi"}],load:function(o){console.log(o);var m=this,n=m.getViewModel(),p=m.getActiveTab();if(p){n.set("kunjungan",o);if(p.load){p.load(o)}}},listeners:{tabchange:"onTabChange"}},0,["workspace-hasil-pa"],["component","box","container","panel","tabpanel","com-tab","workspace-hasil-pa"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"workspace-hasil-pa":true},["widget.workspace-hasil-pa"],0,[layanan.pa.hasil,"Workspace"],0));(Ext.cmd.derive("layanan.pa.hasil.WorkspaceController",Ext.app.ViewController,{onTabChange:function(n,m){var o=this.getViewModel(),p=o.get("kunjungan");if(m.load){m.load(p)}},onSimpan:function(f){this.getView().fireEvent("load")}},0,0,0,0,["controller.workspace-hasil-pa"],0,[layanan.pa.hasil,"WorkspaceController"],0));(Ext.cmd.derive("layanan.pemakaiano2.Form",com.Form,{controller:"pemakaian-o2-form",viewModel:{data:{record:undefined,formConfig:{readOnly:true,tanggal:new Date(),simpan:false,reset:false}}},layout:{type:"hbox"},model:"data.model.O2",initComponent:function(){this.items=[{name:"PASANG",reference:"pasang",flex:1,xtype:"datetimefield",emptyText:"[Tanggal Pasang O2]",format:"Y-m-d H:i:s",maxValue:Ext.Date.subtract(this.getSysdate(),Ext.Date.DAY,-1),bind:{readOnly:"{formConfig.readOnly}",minValue:"{formConfig.tanggal}"},allowBlank:false,margin:"0 1 0 0"},{xtype:"referensi-combo",params:{JENIS:51},valueField:"DESKRIPSI",firstLoad:true,name:"FLOW",emptyText:"[Flow]",enterFocus:true,enforceMaxLength:true,forceSelection:true,validateOnBlur:true,reference:"flow",flex:1,bind:{readOnly:"{formConfig.readOnly}"},listeners:{specialkey:"onFocusEnter"}},{xtype:"button",text:"Simpan",ui:"soft-blue",hidden:true,bind:{hidden:"{!formConfig.simpan}"},handler:"onSimpan"},{xtype:"button",text:"Reset",hidden:true,bind:{hidden:"{!formConfig.reset}"},ui:"soft-blue",handler:"onReset"}];com.Form.prototype.initComponent.apply(this,arguments)},setFormConfig:function(m){var l=this,n=l.getViewModel();_config=n.get("formConfig");m=Ext.apply(_config,m);n.set("formConfig",m);n.notify()}},0,["pemakaian-o2-form"],["component","box","container","panel","form","com-form","pemakaian-o2-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"pemakaian-o2-form":true},["widget.pemakaian-o2-form"],0,[layanan.pemakaiano2,"Form"],0));(Ext.cmd.derive("layanan.pemakaiano2.FormController",Ext.app.ViewController,{onFocusEnter:function(g,l){},onSimpan:function(y){var e=this,g=e.getView(),f=g.getForm(),w=e.getReferences(),v=g.getForm().getValues(),x=g.getRecord(),u=g.ownerCt.getStatusLepas();if(u){if(g.getForm().isValid()){x.set(v);x.showError=true;x.animateTarget=y;x.scope=e;x.save({callback:function(m,l,n){if(n){Ext.toast({html:"Data telah disimpan",headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"});g.fireEvent("success",m);e.onReset()}}})}}else{Ext.Msg.show({title:"Perhatian",width:"40%",message:'Anda belum mengisi <b><font color="red">TANGGAL LEPAS</font></b> pada inputan sebelumnya<br> Silahkan mengisi atau menghapus data yang belum memiliki tanggal lepas sebelum menyimpan',buttons:Ext.Msg.OK,animateTarget:y})}},onReset:function(m){var l=this,n=l.getView();n.getForm().reset()}},0,0,0,0,["controller.pemakaian-o2-form"],0,[layanan.pemakaiano2,"FormController"],0));(Ext.cmd.derive("layanan.pemakaiano2.List",com.Grid,{controller:"pemakaian-o2-list",viewModel:{stores:{store:{type:"o2-store"}}},bind:{store:"{store}"},border:false,reference:"pemakaiano2List",cls:"x-br-top",initComponent:function(){var f=this;f.cellEditing=new Ext.grid.plugin.CellEditing({clicksToEdit:2,listeners:{afteredit:"onAfterEdit"}});f.tanggal={xtype:"datetimefield",format:"Y-m-d H:i:s",value:f.getSysdate(),allowBlank:false,containFormatTime:true,minimalAddMinuteToMaxValue:5};f.plugins=[f.cellEditing];f.columns=[{xtype:"rownumberer",text:"No",align:"left",width:60},{text:"Tanggal Pasang O2",dataIndex:"PASANG",name:"PASANG",xtype:"datecolumn",format:"Y-m-d H:i:s",value:new Date(),width:"20%"},{text:"Tanggal Lepas O2",dataIndex:"LEPAS",name:"LEPAS",xtype:"datecolumn",format:"Y-m-d H:i:s",editor:f.tanggal,width:"20%"},{xtype:"numbercolumn",format:"0,000.00",text:"Flow",name:"FLOW",flex:1,dataIndex:"FLOW"},{xtype:"numbercolumn",name:"PEMAKAIAN",format:"0,000.00",text:"Jumlah Pemakaian O2",flex:1,dataIndex:"PEMAKAIAN"},{text:"#",width:100,xtype:"widgetcolumn",widget:{xtype:"fieldcontainer",defaultType:"button",layout:{type:"vbox",align:"stretch"},defaults:{padding:1,margin:"0 2 1 0"},items:[{xtype:"button",text:"Update",ui:"soft-blue",padding:1,margin:"0.2.1.0",listeners:{click:"onUpdate"}},{xtype:"button",text:"hapus",padding:1,ui:"soft-red",margin:"0.2.1.0",listeners:{click:"onHapus"}}]},onWidgetAttach:"onWidgetAttach"}];f.callParent(arguments)},dockedItems:[{xtype:"pagingtoolbar",bind:{store:"{store}"},dock:"bottom",displayInfo:true}]},0,["pemakaian-o2-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","pemakaian-o2-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"pemakaian-o2-list":true},["widget.pemakaian-o2-list"],0,[layanan.pemakaiano2,"List"],0));(Ext.cmd.derive("layanan.pemakaiano2.ListController",Ext.app.ViewController,{onAfterEdit:function(o,p,m){var n=this;rec=p.record;view=n.getView();pasang=rec.get("PASANG");if(pasang>p.value){rec.set("LEPAS","");view.notifyMessage("Tanggal lepas tidak boleh lebih besar dari tanggal pasang","danger-red")}else{if(p.value>view.getSysdate()){view.notifyMessage("Tanggal lepas tidak boleh lebih besar dari tanggal sekarang","danger-red");rec.set("LEPAS","")}}},onUpdate:function(m){var l=this,n=l.getView();vm=l.getViewModel();record=m.ownerCt.getWidgetRecord();record.showError=true;record.animateTarget=m;record.scope=l;record.save({callback:function(e,g,f){if(f){Ext.toast({html:"Data telah diupdate",headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"});n.fireEvent("success",e)}}})},onHapus:function(m){var l=this,n=l.getView();vm=l.getViewModel();record=m.ownerCt.getWidgetRecord();if((record.get("LEPAS")=="")||(record.get("LEPAS")==null)){record.set("STATUS",0);record.showError=true;record.animateTarget=m;record.scope=l;record.save({callback:function(e,g,f){if(f){n.notifyMessage("Data telah dihapus","danger-red");n.fireEvent("success",e)}}})}else{n.notifyMessage("anda tidak dapat menghapus data yang memiliki tanggal lepas","danger-red")}},onWidgetAttach:function(q,p,n){var o=this,s=p.items.items[1];if((n.get("LEPAS")=="")||(n.get("LEPAS")==null)){s.setHidden(false)}else{s.setHidden(true)}}},0,0,0,0,["controller.pemakaian-o2-list"],0,[layanan.pemakaiano2,"ListController"],0));(Ext.cmd.derive("master.pemakaiano2.Workspace",Ext.panel.Panel,{controller:"pemakaian-o2-workspace",layout:"border",viewModel:{data:{kjgn:undefined}},initComponent:function(){var f=this;f.items=[{region:"north",xtype:"pemakaian-o2-form",reference:"pemakaiano2form",listeners:{success:"onSuccess"}},{region:"center",xtype:"pemakaian-o2-list",reference:"pemakaiano2list",listeners:{success:"onSuccess"}}];f.callParent(arguments)},load:function(u){var o=this,p=o.getViewModel(),s=o.getReferences();if(u){p.set("kjgn",u);var t=u.get("STATUS")!=1,q=Ext.create("data.model.O2",{TANGGAL:s.pemakaiano2form.getSysdate()});q.set("KUNJUNGAN",u.get("NOMOR"));s.pemakaiano2form.setFormConfig({readOnly:t,tanggal:u.get("MASUK"),simpan:!t,reset:!t});s.pemakaiano2form.createRecord({TANGGAL:s.pemakaiano2form.getSysdate(),KUNJUNGAN:u.get("NOMOR")});s.pemakaiano2list.loadStore({KUNJUNGAN:u.get("NOMOR"),STATUS:1})}},getStatusLepas:function(){var o=this,n=o.down("pemakaian-o2-list"),m=n.getStore(),p=true;m.each(function(f,e){if(!f.get("LEPAS")){p=false}});return p}},0,["pemakaian-o2-workspace"],["component","box","container","panel","pemakaian-o2-workspace"],{component:true,box:true,container:true,panel:true,"pemakaian-o2-workspace":true},["widget.pemakaian-o2-workspace"],0,[master.pemakaiano2,"Workspace"],0));(Ext.cmd.derive("layanan.pemakaiano2.WorkspaceController",Ext.app.ViewController,{onSuccess:function(p){var n=this,s=n.getView(),o=n.getViewModel(),q=n.getReferences();s.load(o.get("kjgn"));n.getReferences().pemakaiano2list.refresh()}},0,0,0,0,["controller.pemakaian-o2-workspace"],0,[layanan.pemakaiano2,"WorkspaceController"],0));(Ext.cmd.derive("layanan.radiologi.Workspace",com.Tab,{controller:"radiologi-workspace",activeTab:0,cls:"x-br-top",ui:"header-tab",kunjungan:undefined,initComponent:function(){var m=this;com.Tab.prototype.initComponent.apply(this,arguments);var n=m.app.xpriv("110304"),l=m.app.xpriv("110605");if(n){m.add({title:"Order",xtype:"order-rad-workspace",listeners:{kirim:"onKirim",reopen:"onReopen"}});m.add({title:"Daftar Order",xtype:"orderlist-rad-workspace",reference:"orderlistworkspace"})}if(l){m.add({title:"Riwayat",xtype:"riwayat-rad-workspace"})}},load:function(l){var m=this,n=this.getActiveTab();this.kunjungan=l;if(n){n.load(l)}else{if(m.items.getCount()>0){m.setActiveTab(0)}}},listeners:{tabchange:"onTabChange"}},0,["radiologi-workspace"],["component","box","container","panel","tabpanel","com-tab","radiologi-workspace"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"radiologi-workspace":true},["widget.radiologi-workspace"],0,[layanan.radiologi,"Workspace"],0));(Ext.cmd.derive("layanan.radiologi.WorkspaceController",Ext.app.ViewController,{onKirim:function(l){var g=this;refs=g.getReferences();refs.orderlistworkspace.refresh()},onReopen:function(f){this.getView().fireEvent("reopen",f)},onTabChange:function(m,n){var l=this.getView().kunjungan;if(n.load){n.load(l)}}},0,0,0,0,["controller.radiologi-workspace"],0,[layanan.radiologi,"WorkspaceController"],0));(Ext.cmd.derive("layanan.radiologi.hasil.Form",com.Form,{controller:"form-hasil-rad",model:"data.model.HasilRad",layout:{type:"hbox",align:"stretch"},bodyPadding:5,border:true,defaultType:"container",defaults:{margin:"0 2 2 0",layout:{type:"vbox",align:"stretch"},defaults:{margin:"0 2 2 0"}},initComponent:function(){var g=this,l=new Date();g.items=[{flex:1,defaults:{bind:{readOnly:"{formConfig.viewOnly}"},allowBlank:false},items:[{xtype:"textfield",emptyText:"[ Klinis ]",name:"KLINIS"},{xtype:"textareafield",name:"KESAN",flex:1,emptyText:"[ Kesan ]"},{xtype:"textareafield",name:"USUL",flex:1,emptyText:"[ Usul ]"}]},{xtype:"splitter"},{flex:1,defaults:{bind:{readOnly:"{formConfig.viewOnly}"}},items:[{xtype:"textareafield",name:"HASIL",flex:1,emptyText:"[ Hasil Pemeriksaan ]"},{xtype:"textfield",emptyText:"[ BTK ]",name:"BTK"},{xtype:"dokter-combo",name:"DOKTER"}]}];com.Form.prototype.initComponent.apply(this,arguments)},buttons:[{name:"TANGGAL",reference:"tanggal",width:150,xtype:"datefield",format:"d/m/Y",submitFormat:"Y-m-d",value:new Date(),maxValue:new Date(),margin:"0 1 0 0",readOnly:true},{name:"WAKTU",reference:"waktu",width:125,xtype:"timefield",format:"H:i:s",hideTrigger:true,value:new Date(),readOnly:true},{xtype:"component",flex:1},{text:"Simpan",ui:"soft-green",iconCls:"x-fa fa-save",hidden:true,bind:{hidden:"{!formConfig.simpan}"},handler:"onSimpan"},{text:"Cetak",iconCls:"x-fa fa-print",hidden:true,bind:{hidden:"{!formConfig.simpan}"},handler:"onPreview"}],loadRecord:function(w,s){var t=this,A=t.getForm().loadRecord(w),y=t.getViewModel(),s=s||false,z=w.get("REFERENSI"),v=z?(z.DOKTER?Ext.create("data.model.Dokter",z.DOKTER):null):null,x=t.down("dokter-combo"),u=t.down("[name=WAKTU]");if(w){y.set("record",w);u.setValue(w.get("TANGGAL"));x.select(v)}return A},setDokterRuangan:function(g){var l=this.down("dokter-combo");l.params.RUANGAN=g}},0,["form-hasil-rad"],["component","box","container","panel","form","com-form","form-hasil-rad"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-hasil-rad":true},["widget.form-hasil-rad"],0,[layanan.radiologi.hasil,"Form"],0));(Ext.cmd.derive("layanan.radiologi.hasil.FormController",Ext.app.ViewController,{onSimpan:function(m){var l=this,n=l.getView();n.save(m)},onPreview:function(f){this.cetak(true)},privates:{cetak:function(n){var o=this,p=o.getView(),m=o.getViewModel().get("record");p.cetak({NAME:"layanan.CetakHasilRad",TYPE:n?"Pdf":"Word",EXT:n?"pdf":"docx",PARAMETER:{PTINDAKAN:m.get("TINDAKAN_MEDIS")},REQUEST_FOR_PRINT:!n,PRINT_NAME:"CetakHasil"},function(e){if(n){p.openDialog("Print Preview",true,0,0,{xtype:"panel",title:"Preview Hasil Radiologi"},function(g,f){f.down("panel").update("<iframe style='width: 100%; height: 100%' src='"+e+"'></iframe>")})}})}}},0,0,0,0,["controller.form-hasil-rad"],0,[layanan.radiologi.hasil,"FormController"],0));(Ext.cmd.derive("layanan.radiologi.hasil.Workspace",com.Form,{controller:"workspace-hasil-rad-controller",viewModel:{data:{kunjungan:undefined}},layout:"border",initComponent:function(){var f=this;f.items=[{region:"west",title:"Tindakan",hideAction:true,flex:0.3,xtype:"tindakan-medis-list",reference:"listindakanmedist",split:true,collapsed:false,collapsible:true,listeners:{tindakanselected:"onSelectTindakanMedis"}},{region:"center",xtype:"com-form",reference:"hasilrad",title:"Hasil Radiologi",fullscreenEnabled:true,layout:"border",items:[{xtype:"form-hasil-rad",reference:"formhasilrad",border:false,region:"center"},{xtype:"panel",title:"Viewer",region:"east",reference:"pnlviewer",layout:"fit",hidden:true,items:[{xtype:"uxiframe",reference:"viewer"}],split:true,flex:1,collapsed:true,collapsible:true,iconCls:"x-fa fa-picture-o"}]}];com.Form.prototype.initComponent.apply(this,arguments)},load:function(u){var p=this,s=this.getViewModel(),q=this.down("tindakan-medis-list"),t=this.down("form-hasil-rad"),o=this.down("[reference=pnlviewer]");o.setHidden(p.getPropertyConfig("10")=="FALSE");config=s.get("formConfig");if(u){this.getViewModel().set("kunjungan",u);q.loadStore(u,1);t.setFormConfig({viewOnly:config.viewOnly,simpan:config.simpan});t.setDokterRuangan(u.get("RUANGAN"))}}},0,["workspace-hasil-rad"],["component","box","container","panel","form","com-form","workspace-hasil-rad"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-hasil-rad":true},["widget.workspace-hasil-rad"],0,[layanan.radiologi.hasil,"Workspace"],0));(Ext.cmd.derive("layanan.radiologi.hasil.WorkspaceController",Ext.app.ViewController,{onSelectTindakanMedis:function(e,v){var t=this.getView(),s=this.getReferences(),u=this.getViewModel().get("kunjungan");if(v){var q=webservice.location+"layanan/viewerad?TINDAKAN_MEDIS="+v.get("ID");s.listindakanmedist.setDisabled(true);if(data.model){data.model.HasilRad.load(v.get("ID"),{callback:function(f,l,g){if(g){s.formhasilrad.loadRecord(f)}else{s.formhasilrad.createRecord({TINDAKAN_MEDIS:v.get("ID")})}s.listindakanmedist.setDisabled(false)}})}try{if(t.getPropertyConfig("10")=="TRUE"){s.viewer.load(q)}}catch(w){console.log("Error load pacs viewer: "+w.message)}}}},0,0,0,0,["controller.workspace-hasil-rad-controller"],0,[layanan.radiologi.hasil,"WorkspaceController"],0));(Ext.cmd.derive("layanan.radiologi.order.Detil",com.Grid,{controller:"order-rad-detil",viewModel:{data:{columnCommandConfig:{hideBatalOrder:false,hideLihatHasil:true}},stores:{store:{type:"order-detil-rad-store"}}},title:"Order Detil",bind:{store:"{store}"},columns:[{xtype:"rownumberer",text:"No",align:"left",width:50},{xtype:"templatecolumn",text:"Tindakan",sortable:false,flex:1,tpl:'<div style="white-space:normal !important;">{REFERENSI.TINDAKAN.NAMA}</div>'},{xtype:"widgetcolumn",align:"center",text:"Aksi",sortable:false,width:100,align:"right",widget:{xtype:"fieldcontainer",layout:{type:"vbox"},defaults:{padding:2,xtype:"button"},items:[{action:0,text:"Batalkan",iconCls:"x-fa fa-minus-circle",ui:"soft-red",handler:"onBatalOrder",bind:{hidden:"{columnCommandConfig.hideBatalOrder}"}},{text:"Lihat Hasil",action:0,ui:"soft-blue",handler:"onLihatHasil",bind:{hidden:"{columnCommandConfig.hideLihatHasil}"}}]}}],loadStore:function(o,p){var e=this,s=e.getViewModel(),q=s.get("store");if(q){q.removeAll();q.queryParams=q.queryParams||{};if(o){q.queryParams.ORDER_ID=p.get("NOMOR");if(!s.get("kunjungan")){s.set("kunjungan",o)}if(!s.get("order")){s.set("order",p)}}q.load()}},getData:function(){var n=this,m=n.getViewModel().get("store"),l=[];m.each(function(e){l.push(e.data)});return l},addRow:function(l){var n=this,m=n.getViewModel().get("store");m.add(l)},removeDataStore:function(){this.getViewModel().get("store").removeAll()},removeAnotherModels:function(){var l=this.getViewModel().get("store"),m=[];l.each(function(e){if(Ext.getClassName(e)!="data.model.OrderDetilRad"){m.push(e)}});var n=new Ext.util.DelayedTask(function(){l.remove(m)});n.delay(100)},hideCommandButtons:function(m){var l=this,n=l.getViewModel();_config=n.get("columnCommandConfig");m=Ext.apply(_config,m);n.set("columnCommandConfig",m);n.notify()}},0,["order-rad-detil"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","order-rad-detil"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"order-rad-detil":true},["widget.order-rad-detil"],0,[layanan.radiologi.order,"Detil"],0));(Ext.cmd.derive("layanan.radiologi.order.DetilController",Ext.app.ViewController,{onBatalOrder:function(m){var n=this,o=n.getStore("store"),p=m.ownerCt.getWidgetRecord();o.remove(p)},onLihatHasil:function(q){var p=this,o=true,s=p.getView(),n=q.ownerCt.getWidgetRecord();s.cetak({NAME:"layanan.CetakHasilRad",TYPE:o?"Pdf":"Word",EXT:o?"pdf":"docx",PARAMETER:{PTINDAKAN:n.get("REF")},REQUEST_FOR_PRINT:!o,PRINT_NAME:"CetakHasil"},function(e){if(o){s.openDialog("Print Preview",true,0,0,{xtype:"panel",title:"Preview Hasil Radiologi"},function(g,f){f.down("panel").update("<iframe style='width: 100%; height: 100%' src='"+e+"'></iframe>")})}})}},0,0,0,0,["controller.order-rad-detil"],0,[layanan.radiologi.order,"DetilController"],0));(Ext.cmd.derive("layanan.radiologi.order.Form",com.Form,{controller:"order-rad-form",viewModel:{data:{record:undefined,formConfig:{readOnly:true,tanggal:new Date()}}},layout:{type:"hbox",align:"stretch"},defaults:{margin:"0 1 0 0"},bodyPadding:5,initComponent:function(){var l=this,g=l.getSysdate();l.items=[{xtype:"ruangan-rad-combo",params:{STATUS:1},flex:1,hideTrigger:false,bind:{readOnly:"{formConfig.readOnly}"},reference:"ruanganradcombo",forceSelection:true,allowBlank:false,name:"TUJUAN",listeners:{select:"onTujuanSelect"}},{xtype:"dokter-combo",emptyText:"[Dokter Perujuk]",flex:1,bind:{readOnly:"{formConfig.readOnly}"},reference:"doktercombo",allowBlank:false,name:"DOKTER_ASAL",listeners:{focus:"onBeforeQuery"}},{name:"ALASAN",reference:"alasan",flex:1,xtype:"textfield",emptyText:"[ Diagnosa ]",bind:{readOnly:"{formConfig.readOnly}"}},{name:"TANGGAL",reference:"tanggal",width:200,xtype:"datefield",emptyText:"[Pilih Tanggal Order]",format:"d/m/Y",maxValue:g,allowBlank:false,bind:{readOnly:"{formConfig.readOnly}"}},{name:"WAKTU",reference:"waktu",width:105,xtype:"timefield",emptyText:"[Jam:Mnt:Dtk]",bind:{readOnly:"{formConfig.readOnly}",minValue:"{formConfig.tanggal}"},format:"H:i:s",allowBlank:false,hideTrigger:true}];l.callParent(arguments)},loadRecord:function(e){var u=this,w=u.getForm().loadRecord(e);if(e){var y=u.down("[reference=waktu]"),v=u.down("[reference=ruanganradcombo]"),f=u.down("[reference=doktercombo]"),g=e.get("REFERENSI");y.setValue(e.get("TANGGAL"));u.getViewModel().set("record",e);if(g){var x=g.KUNJUNGAN;v.params.RUANGAN=x.RUANGAN;f.params.RUANGAN=x.RUANGAN}v.load()}return w},setFormConfig:function(m){var l=this,n=l.getViewModel();_config=n.get("formConfig");m=Ext.apply(_config,m);n.set("formConfig",m);n.notify()},getRecord:function(){return this.getViewModel().get("record")},getFormData:function(){var n=this,m=n.getReferences(),l=n.getForm().getValues();tgl=m.tanggal.getValue(),wkt=m.waktu.getValue();tgl.setHours(wkt.getHours());tgl.setMinutes(wkt.getMinutes());tgl.setSeconds(wkt.getSeconds());l.TANGGAL=tgl;return l},focus:function(g,l){this.getReferences().ruanganradcombo.focus(g,l)}},0,["order-rad-form"],["component","box","container","panel","form","com-form","order-rad-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"order-rad-form":true},["widget.order-rad-form"],0,[layanan.radiologi.order,"Form"],0));(Ext.cmd.derive("layanan.radiologi.order.FormController",Ext.app.ViewController,{onTujuanSelect:function(g,l){if(l){this.getView().fireEvent("tujuanselected",l)}},onBeforeQuery:function(f){if(f.combo){f.combo.getStore().removeAll()}}},0,0,0,0,["controller.order-rad-form"],0,[layanan.radiologi.order,"FormController"],0));(Ext.cmd.derive("layanan.radiologi.order.Workspace",com.Form,{controller:"order-rad-workspace",viewModel:{data:{kunjungan:undefined}},layout:"border",initComponent:function(){var f=this;f.items=[{region:"north",xtype:"order-rad-form",border:false,bodyPadding:2,reference:"orderradform",listeners:{tujuanselected:"onTujuanSelected"}},{region:"center",xtype:"order-rad-detil",flex:1,reference:"orderraddetil",viewConfig:{plugins:{ptype:"gridviewdragdrop",enableDrag:false},listeners:{scope:f.getController(),drop:"onDropTindakan"}}},{region:"east",title:"Daftar Tindakan",xtype:"tindakan-list",collapsible:true,showSearch:true,flex:1,reference:"tindakanlist",hideHeaders:true,split:true,multiSelect:true,viewConfig:{plugins:{ptype:"gridviewdragdrop",enableDrop:false},copy:true},listeners:{itemdblclick:"onItemDblClickTindakan"}}];f.buttons=[{text:"Kirim Order",ui:"soft-green",reference:"btnkirim",bind:{hidden:"{isFinal}"},tooltip:{text:"Kirim Order Radiologi",mouseOffset:[50,-65]},iconCls:"x-fa fa-share",handler:"onKirim"},{text:"Reset",ui:"soft-blue",reference:"btnreset",bind:{hidden:"{isFinal}"},tooltip:{text:"Reset",mouseOffset:[50,-65]},iconCls:"x-fa fa-refresh",handler:"onReset"}];com.Form.prototype.initComponent.call(this)},load:function(o){var u=this,p=u.getViewModel(),q=u.getReferences(),t={};if(o){p.set("kunjungan",o);if(Ext.getClassName(o)=="data.model.Kunjungan"){var s=o.get("STATUS")!=1;t={KUNJUNGAN:o.get("NOMOR"),REFERENSI:{KUNJUNGAN:o.data},TANGGAL:u.getSysdate()};q.orderradform.setFormConfig({readOnly:s,tanggal:o.get("MASUK")})}q.tindakanlist.removeDataStore();q.orderradform.loadRecord(Ext.create("data.model.OrderRad",t));q.orderradform.focus(false,100)}},getFormData:function(){var p=this.down("[reference=orderradform]"),n=this.down("[reference=orderraddetil]"),m=p.getFormData(),o=n.getData();m.ORDER_DETIL=o;return{ORDER_RAD:m}}},0,["order-rad-workspace"],["component","box","container","panel","form","com-form","order-rad-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"order-rad-workspace":true},["widget.order-rad-workspace"],0,[layanan.radiologi.order,"Workspace"],0));(Ext.cmd.derive("layanan.radiologi.order.WorkspaceController",Ext.app.ViewController,{onTujuanSelected:function(w){var H=this,G=H.getReferences(),D=H.getViewModel(),I=H.getView(),A=D.get("kunjungan"),y=I.getReferensi(A.data,"RUANG_KAMAR_TIDUR"),B=I.getReferensi(y,"RUANG_KAMAR"),z=I.getPropertyConfig(7),x=I.getReferensi(w.data,"RADIOLOGI"),F=I.getReferensi(x,"RUANGAN_KELAS"),E=F?F.KELAS:0,C={RUANGAN:w.get("RADIOLOGI"),start:0,limit:10000,KELAS:E,STATUS:1};if(z=="TRUE"){if(B){E=B.KELAS}if(A.get("TITIPAN")==1){E=A.get("TITIPAN_KELAS")}C.KELAS=E}G.tindakanlist.clearSearch();G.tindakanlist.loadStore(C);G.orderraddetil.removeDataStore()},onItemDblClickTindakan:function(p,n){var m=this,o=m.getReferences();n=Ext.create("data.model.OrderDetilRad",{TINDAKAN:n.get("ID"),REFERENSI:{TINDAKAN:n.data}});o.orderraddetil.addRow(n)},onDropTindakan:function(t,e,u,q){var s=this,f=s.getReferences();Ext.Array.each(e.records,function(l,g){l=Ext.create("data.model.OrderDetilRad",{TINDAKAN:l.get("ID"),REFERENSI:{TINDAKAN:l.data}});f.orderraddetil.addRow(l)});f.orderraddetil.removeAnotherModels()},onKirim:function(u){var v=this,e=v.getView(),t=v.getReferences(),s=t.orderradform.getFormData(),w=t.orderraddetil.getData();if(t.orderradform.isValid()&&w.length>0){var f=t.orderradform.getRecord();if(f){s.ORDER_DETIL=w;f.set(s);f.animateTarget=u;f.scope=v;f.showError=true;f.save({callback:function(l,g,m){if(m){var o=e.app.xpriv("110108");if(o){e.setLoading(true);var n=Ext.create("data.model.Kunjungan",{NOPEN:l.get("REFERENSI").KUNJUNGAN.NOPEN,RUANGAN:l.get("TUJUAN"),REF:l.get("NOMOR"),STATUS:1});n.showError=true;n.animateTarget=u;n.scope=v;n.save({callback:function(p,y,q){if(q){e.fireEvent("reopen",p)}e.setLoading(false)}})}else{Ext.toast({html:"Order anda telah terkirim ke tujuan",headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"});v.getView().fireEvent("kirim",l);v.onReset()}}}})}}},onReset:function(){var n=this,m=n.getReferences(),l=m.orderradform.getRecord();m.orderradform.reset();m.orderradform.loadRecord(Ext.create("data.model.OrderRad",{KUNJUNGAN:l.get("NOMOR"),REFERENSI:{KUNJUNGAN:l.get("REFERENSI").KUNJUNGAN},TANGGAL:n.getView().getSysdate()}));m.orderradform.focus(false,100);m.orderraddetil.removeDataStore();m.tindakanlist.removeDataStore()}},0,0,0,0,["controller.order-rad-workspace"],0,[layanan.radiologi.order,"WorkspaceController"],0));(Ext.cmd.derive("layanan.radiologi.orderlist.List",Ext.grid.Panel,{controller:"order-rad-list",viewModel:{stores:{store:{type:"order-rad-store"}}},bind:{store:"{store}"},columns:[{xtype:"rownumberer",text:"No",align:"left",width:50},{text:"Nomor",dataIndex:"NOMOR",sortable:false,flex:1},{xtype:"datecolumn",text:"Tgl. Order",dataIndex:"TANGGAL",format:"d/m/Y H:i:s",sortable:false},{xtype:"templatecolumn",text:"Asal",flex:1,sortable:false,hidden:true,tpl:'<div style="white-space:normal !important;">{REFERENSI.KUNJUNGAN.REFERENSI.RUANGAN.DESKRIPSI}</div>'},{xtype:"templatecolumn",text:"Dokter Asal",flex:1,sortable:false,hidden:true,tpl:'<div style="white-space:normal !important;">{REFERENSI.DOKTER_ASAL.NAMA}</div>'},{xtype:"templatecolumn",text:"Tujuan",flex:1,sortable:false,tpl:'<div style="white-space:normal !important;">{REFERENSI.TUJUAN.DESKRIPSI}</div>'},{xtype:"widgetcolumn",align:"center",text:"Aksi",widget:{xtype:"fieldcontainer",defaults:{padding:2,margin:"0 2 1 0"},items:[{xtype:"button",action:0,text:"Batalkan",iconCls:"x-fa fa-minus-circle",ui:"soft-red",tooltip:"Batalkan Order",handler:"onBatalOrder"},{xtype:"button",text:"Dibatalkan",action:1,ui:"soft-red",hidden:true}]},onWidgetAttach:function(q,s,u){var f=u.get("STATUS"),e=s.down("[action=0]"),t=s.down("[action=1]");e.setHidden(f!=1);t.setHidden(!(f==0))}}],loadStore:function(n){var m=this,p=m.getViewModel(),o=p.get("store");if(o){o.removeAll();o.queryParams=o.queryParams||{};if(n){if(Ext.getClassName(n)=="data.model.Kunjungan"){o.queryParams.KUNJUNGAN=n.get("NOMOR");o.queryParams.HISTORY=1;if(!p.get("kunjungan")){p.set("kunjungan",n)}}}o.load()}},refresh:function(){var f=this.getViewModel().get("store");if(f){f.reload()}}},0,["order-rad-list"],["component","box","container","panel","tablepanel","gridpanel","grid","order-rad-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"order-rad-list":true},["widget.order-rad-list"],0,[layanan.radiologi.orderlist,"List"],0));(Ext.cmd.derive("layanan.radiologi.orderlist.ListController",Ext.app.ViewController,{init:function(){var f=this.getStore("store");if(f){f.on("load",function(l,e){if(e.length==0){f.removeAll()}})}},onBatalOrder:function(m){var n=this,o=n.getStore("store"),p=m.ownerCt.getWidgetRecord();p.showError=true;p.animateTarget=m;p.scope=n;Ext.Msg.show({title:"Pembatalan Order",message:"Anda yakin ingin membatalkan Order dengan Nomor Order "+p.get("NOMOR")+" ?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:m,fn:function(e){if(e==="yes"){p.set("STATUS",0);p.save({callback:function(g,f,l){if(l){Ext.toast({html:"Pembatalan order dengan Nomor Order "+p.get("NOMOR")+" berhasil",headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"});o.load()}else{p.set("STATUS",1)}}})}else{p.set("STATUS",1)}}})}},0,0,0,0,["controller.order-rad-list"],0,[layanan.radiologi.orderlist,"ListController"],0));(Ext.cmd.derive("layanan.radiologi.orderlist.Workspace",Ext.panel.Panel,{controller:"orderlist-rad-workspace",layout:"border",initComponent:function(){var f=this;f.items=[{region:"center",title:"Orders",xtype:"order-rad-list",reference:"orderradlist",listeners:{select:"onOrderSelected"}},{region:"east",xtype:"order-rad-detil",flex:1,reference:"orderraddetil",riwayat:f.riwayat,flex:1,collapsible:true,split:true}];f.callParent(arguments)},load:function(n){var p=this,o=p.down("[reference=orderradlist]"),m=p.down("[reference=orderraddetil]");o.loadStore(n);m.removeDataStore()},refresh:function(){var n=this,m=n.down("[reference=orderradlist]"),l=n.down("[reference=orderraddetil]");m.refresh();l.removeDataStore()}},0,["orderlist-rad-workspace"],["component","box","container","panel","orderlist-rad-workspace"],{component:true,box:true,container:true,panel:true,"orderlist-rad-workspace":true},["widget.orderlist-rad-workspace"],0,[layanan.radiologi.orderlist,"Workspace"],0));(Ext.cmd.derive("layanan.radiologi.orderlist.WorkspaceController",Ext.app.ViewController,{onOrderSelected:function(s,u){var t=this,q=t.getReferences(),e=t.getViewModel().get("kunjungan"),f=u.get("STATUS");q.orderraddetil.hideCommandButtons({hideBatalOrder:true,hideLihatHasil:f!=2});q.orderraddetil.loadStore(e,u)}},0,0,0,0,["controller.orderlist-rad-workspace"],0,[layanan.radiologi.orderlist,"WorkspaceController"],0));(Ext.cmd.derive("layanan.radiologi.riwayat.Workspace",Ext.panel.Panel,{controller:"riwayat-rad-workspace",viewModel:{},layout:"border",initComponent:function(){var f=this;f.items=[{region:"west",title:"Daftar Kunjungan Radiologi",xtype:"kunjungan-list",flex:0.5,margin:"0 2 0 0",split:true,collapsible:true,reference:"riwayatlist",listeners:{select:"onSelect"}},{xtype:"workspace-hasil-rad",region:"center",reference:"hasillab",width:2}];f.callParent(arguments)},load:function(n){var o=this,p=o.down("[reference=riwayatlist]"),q=n.get("REFERENSI")?n.get("REFERENSI"):null,s=q?(q.PENDAFTARAN?q.PENDAFTARAN.NORM:0):0;p.hideColumnConfig({action:true});p.loadStore({NORM:s,JENIS_KUNJUNGAN:5,HISTORY:1,STATUS:2})}},0,["riwayat-rad-workspace"],["component","box","container","panel","riwayat-rad-workspace"],{component:true,box:true,container:true,panel:true,"riwayat-rad-workspace":true},["widget.riwayat-rad-workspace"],0,[layanan.radiologi.riwayat,"Workspace"],0));(Ext.cmd.derive("layanan.radiologi.riwayat.WorkspaceController",Ext.app.ViewController,{onSelect:function(o,m){var n=this,p=n.getReferences();p.hasillab.setFormConfig({viewOnly:true,simpan:false});p.hasillab.load(m)}},0,0,0,0,["controller.riwayat-rad-workspace"],0,[layanan.radiologi.riwayat,"WorkspaceController"],0));(Ext.cmd.derive("layanan.radiologi.terimaorder.List",com.Grid,{controller:"terima-rad-list",viewModel:{data:{inProses:false},stores:{store:{type:"order-rad-store"}}},title:"Pengunjung Radiologi",iconCls:"x-fa fa-odnoklassniki-square",header:{items:[{xtype:"search-field",emptyText:"[NORM]",flex:1,listeners:{search:"onSearch",clear:"onClear",change:"onChange"}}]},hideHeaders:true,first:true,columns:[{xtype:"templatecolumn",flex:2,tpl:new Ext.XTemplate('<div style="font-weight: bold; font-size: 12px; white-space:normal !important;">{[this.getFormatNorm(values.REFERENSI.KUNJUNGAN.REFERENSI.PENDAFTARAN.REFERENSI.PASIEN.NORM)]} - {[this.getNamaLengkap(values.REFERENSI.KUNJUNGAN.REFERENSI.PENDAFTARAN.REFERENSI.PASIEN)]}</div>',"<div>{[this.getFormatPendaftaran(values.REFERENSI.KUNJUNGAN.NOPEN)]} - {[this.tanggalFormat(values.REFERENSI.KUNJUNGAN.REFERENSI.PENDAFTARAN.TANGGAL)]}</div>",'<div style="font-size: 12px; white-space:normal !important;">{NOMOR} - {[this.tanggalFormat(values.TANGGAL)]}</div>','<div style="font-size: 12px; white-space:normal !important;">Asal: {[this.getAsal(values.REFERENSI.KUNJUNGAN)]}</div>','<div style="font-size: 12px; white-space:normal !important;">Tujuan: {[this.getTujuan(values.REFERENSI.TUJUAN)]}</div>','<div style="font-size: 12px; white-space:normal !important;">{[this.getDokterAsal(values.REFERENSI.DOKTER_ASAL)]}</div>','<div style="font-size: 12px; white-space:normal !important;">Penjamin: {[this.getPenjamin(values.REFERENSI.KUNJUNGAN.REFERENSI.PENDAFTARAN.PENJAMIN)]}</div>',{getFormatNorm:function(m){var n=Ext.String.leftPad(m,8,"0"),l=Ext.String.insert(Ext.String.insert(Ext.String.insert(n,".",2),".",5),".",8);return l},getNamaLengkap:function(p){var n=p.GELAR_DEPAN||"",e=p.NAMA||"",o=p.GELAR_BELAKANG||"";n=n==""?"":n+". ";o=o==""?"":", "+o;return n+e+o},getDokterAsal:function(l){var g=l?(l.NAMA||""):"";return g},getFormatPendaftaran:function(f){return f.substring(0,6)+"."+f.substring(6)},tanggalFormat:function(g){var l=Ext.isDate(g)?g:Ext.Date.parse(g,"Y-m-d H:i:s");return Ext.Date.format(l,"d-m-Y H:i:s")},getAsal:function(y){var C=y.REFERENSI,x=y.JENIS_KUNJUNGAN==3,f=C?(C.RUANGAN?C.RUANGAN.DESKRIPSI:""):"",g=C&&x?C.RUANG_KAMAR_TIDUR:null,w=g?g.REFERENSI.RUANG_KAMAR:null,A=g?g.TEMPAT_TIDUR:"",e=w?w.KAMAR:"",z=w?(w.REFERENSI.KELAS?w.REFERENSI.KELAS.DESKRIPSI:""):"",B=f+(x?"</br>"+e+" / "+A+" / "+z:"");return B},getTujuan:function(l){var n=l?l:null,m=n?n.DESKRIPSI:"";return m},getPenjamin:function(o){var m=o.REFERENSI,n=m.KAP,p=n.REFERENSI.PENJAMIN.DESKRIPSI+(n.NOMOR==""?"":"-"+n.NOMOR)+" [ Kls. "+(m.KELAS?m.KELAS.DESKRIPSI:"")+" - SEP. "+o.NOMOR+" ]";return p}})},{xtype:"widgetcolumn",text:"Status",flex:1,align:"right",widget:{xtype:"fieldcontainer",defaults:{padding:2},items:[{xtype:"button",text:"Terima",action:0,margin:"0 1 0 0",handler:"onTerima"},{xtype:"button",text:"Batal",action:1,ui:"soft-red",handler:"onBatal"}]}}],onBeforeLoad:function(m,n,p){var o=n.get("config");if(m.first){m.first=false}n.set("config",o);m.setParams({COLUMNS:'["NOMOR","KUNJUNGAN","TANGGAL","DOKTER_ASAL","TUJUAN","STATUS"]',REFERENSI:Ext.JSON.encode({Kunjungan:{COLUMNS:["NOMOR","NOPEN","JENIS_KUNJUNGAN","RUANGAN","RUANG_KAMAR_TIDUR","STATUS"],REFERENSI:{Ruangan:{},RuangKamarTidur:{REFERENSI:{RuangKamar:{REFERENSI:{Kelas:true}}}},Pendaftaran:{COLUMNS:["NOMOR","NORM","TANGGAL"],REFERENSI:{Pasien:{COLUMNS:["NORM","GELAR_DEPAN","NAMA","GELAR_BELAKANG","JENIS_KELAMIN","TANGGAL_LAHIR","TEMPAT_LAHIR"]},Penjamin:{REFERENSI:{Kelas:true,KAP:true}}}}}},Dokter:true,Ruangan:{COLUMNS:["DESKRIPSI"]}})})}},0,["terima-rad-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","terima-rad-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"terima-rad-list":true},["widget.terima-rad-list"],0,[layanan.radiologi.terimaorder,"List"],0));(Ext.cmd.derive("layanan.radiologi.terimaorder.ListController",Ext.app.ViewController,{filter:{norm:"",tanggal:{checked:false,value:new Date()}},orderSelected:{property:"TANGGAL",direction:"ASC"},onSearch:function(l,g){this.filter.norm=g;this.cari()},onClear:function(){this.filter.norm="";this.cari()},onChange:function(p,n){var o=this,s=o.getView(),q=s.down("search-field");if(n==""){q.onClearClick()}},onTerima:function(q){var o=this,s=o.getView(),p=o.getViewModel(),t=q.ownerCt.getWidgetRecord(),u=t.get("REFERENSI").KUNJUNGAN.REFERENSI.PENDAFTARAN.REFERENSI.PASIEN.NAMA;s.waitRefresh=true;s.showMessageBox({title:"Penerimaan Order Radiologi",message:"Anda yakin ingin menerima Order Radiologi Pasien An. "+u+" ?",header:{padding:5},buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:q,fn:function(e){if(e==="yes"){p.set("inProses",true);var f=Ext.create("data.model.Kunjungan",{NOPEN:t.get("REFERENSI").KUNJUNGAN.NOPEN,RUANGAN:t.get("TUJUAN"),REF:t.get("NOMOR"),STATUS:1});f.showError=true;f.animateTarget=e;f.scope=o;f.save({callback:function(g,m,l){s.waitRefresh=false;if(l){s.remove(q.ownerCt);s.notifyMessage("Penerimaan Pasien Order Radiologi An. "+u+" berhasil");s.fireEvent("terima",t);s.refresh()}p.set("inProses",false)}})}else{s.waitRefresh=false;p.set("inProses",false)}}})},onBatal:function(p){var o=this,q=o.getView(),s=p.ownerCt.getWidgetRecord(),t=s.get("STATUS"),u=s.get("REFERENSI").KUNJUNGAN.REFERENSI.PENDAFTARAN.REFERENSI.PASIEN.NAMA;q.waitRefresh=true;s.showError=true;s.animateTarget=p;s.scope=o;q.showMessageBox({title:"Pembatalan Penerimaan Order Radiologi",message:"Anda yakin ingin membatalkan penerimaan Order Radiologi Pasien An. "+u+" ?",ui:"window-warning",header:{padding:5},buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:p,fn:function(e){if(e==="yes"){s.set("STATUS",0);s.save({callback:function(f,l,g){q.waitRefresh=false;if(g){q.remove(p.ownerCt);q.notifyMessage("Pembatalan penerimaan Order Radiologi Pasien An. "+u+" berhasil");q.refresh()}else{s.set("STATUS",t)}}})}else{q.waitRefresh=false;s.set("STATUS",t)}}})},privates:{cari:function(){var n=this,p=n.getView(),o=p.down("pagingtoolbar"),m={sort:Ext.JSON.encode(n.orderSelected)};if(n.filter.norm==""){delete p.getStore().queryParams.NORM}else{m.NORM=n.filter.norm}if(!n.filter.tanggal.checked){delete p.getStore().queryParams.TANGGAL}else{m.TANGGAL=Ext.Date.format(n.filter.tanggal.value,"Y-m-d")}p.setParams(m);if(o){o.moveFirst()}else{p.load()}}}},0,0,0,0,["controller.terima-rad-list"],0,[layanan.radiologi.terimaorder,"ListController"],0));(Ext.cmd.derive("layanan.radiologi.widget.Orders",Ext.Container,{layout:"fit",items:[{xtype:"terima-rad-list",reference:"terimaradlist",viewConfig:{loadMask:false},listeners:{terima:"onTerima"}}],loadStore:function(l){var g=this.down("terima-rad-list");g.loadStore(l)},refresh:function(){this.down("terima-rad-list").refresh()}},0,["radiologi-widget-orders"],["component","box","container","radiologi-widget-orders"],{component:true,box:true,container:true,"radiologi-widget-orders":true},["widget.radiologi-widget-orders"],0,[layanan.radiologi.widget,"Orders"],0));(Ext.cmd.derive("layanan.resep.Workspace",com.Tab,{controller:"resep-workspace",activeTab:0,cls:"x-br-top",ui:"header-tab",kunjungan:undefined,initComponent:function(){var m=this;com.Tab.prototype.initComponent.apply(this,arguments);var n=m.app.xpriv("110305"),l=m.app.xpriv("110606");if(n){m.add({title:"Order",xtype:"order-resep-workspace",listeners:{kirim:"onKirim",reopen:"onReopen"}});m.add({title:"Daftar Order",xtype:"orderlist-resep-workspace",reference:"orderlistresepworkspace"})}if(l){m.add({title:"Riwayat",xtype:"riwayat-resep-workspace"})}},load:function(l){var m=this,n=this.getActiveTab();this.kunjungan=l;if(n){n.load(l)}else{if(m.items.getCount()>0){m.setActiveTab(0)}}},listeners:{tabchange:"onTabChange"}},0,["resep-workspace"],["component","box","container","panel","tabpanel","com-tab","resep-workspace"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"resep-workspace":true},["widget.resep-workspace"],0,[layanan.resep,"Workspace"],0));(Ext.cmd.derive("layanan.resep.WorkspaceController",Ext.app.ViewController,{onKirim:function(l){var g=this;refs=g.getReferences();refs.orderlistresepworkspace.refresh()},onReopen:function(f){this.getView().fireEvent("reopen",f)},onTabChange:function(m,n){var l=this.getView().kunjungan;if(n.load){n.load(l)}}},0,0,0,0,["controller.resep-workspace"],0,[layanan.resep,"WorkspaceController"],0));(Ext.cmd.derive("layanan.resep.order.Detil",Ext.grid.Panel,{controller:"order-resep-detil",viewModel:{data:{columnCommandConfig:{hideBatalOrder:false}},stores:{store:{type:"order-detil-resep-store"}}},title:"Order Detil",bind:{store:"{store}"},columns:[{xtype:"rownumberer",text:"No",align:"left",width:50},{text:"Jenis Obat",dataIndex:"GROUP_RACIKAN",sortable:false,renderer:"onRenderRacikan",width:100},{xtype:"templatecolumn",text:"Nama Obat",flex:2,sortable:false,tpl:"<div>{REFERENSI.BARANG.REFERENSI.BARANG.NAMA}</div>"},{text:"Jumlah",dataIndex:"JUMLAH",sortable:false,width:75},{text:"Aturan Pakai",dataIndex:"ATURAN_PAKAI",sortable:false,renderer:"onRenderAturanPakai",flex:1},{text:"Keterangan",dataIndex:"KETERANGAN",sortable:false,flex:1},{xtype:"widgetcolumn",align:"center",text:"Status",width:110,widget:{xtype:"fieldcontainer",flex:1,defaults:{padding:2},items:[{xtype:"button",action:0,iconCls:"x-fa fa-minus-circle",ui:"soft-red",handler:"onBatalOrder",bind:{hidden:"{columnCommandConfig.hideBatalOrder}"}}]}}],dockedItems:[{xtype:"pagingtoolbar",bind:{store:"{store}"},dock:"bottom",displayInfo:true}],loadStore:function(o,p){var e=this,s=e.getViewModel(),q=s.get("store");if(q){q.queryParams=q.queryParams||{};if(o){q.queryParams.ORDER_ID=p.get("NOMOR");if(!s.get("kunjungan")){s.set("kunjungan",o)}if(!s.get("order")){s.set("order",p)}}q.load()}},getData:function(){var n=this,m=n.getViewModel().get("store"),l=[];m.each(function(e){l.push(e.data)});return l},addRow:function(l){var n=this,m=n.getViewModel().get("store");m.add(l)},removeDataStore:function(){this.getViewModel().get("store").removeAll()},removeAnotherModels:function(){var l=this.getViewModel().get("store"),m=[];l.each(function(e){if(Ext.getClassName(e)!="data.model.OrderDetilResep"){m.push(e)}});var n=new Ext.util.DelayedTask(function(){l.remove(m)});n.delay(100)}},0,["order-resep-detil"],["component","box","container","panel","tablepanel","gridpanel","grid","order-resep-detil"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"order-resep-detil":true},["widget.order-resep-detil"],0,[layanan.resep.order,"Detil"],0));(Ext.cmd.derive("layanan.resep.order.DetilController",Ext.app.ViewController,{onBatalOrder:function(m){var n=this,o=n.getStore("store"),p=m.ownerCt.getWidgetRecord();o.remove(p)},onRenderAturanPakai:function(q,t,u){var o=u.get("ATURAN_PAKAI");if(Ext.isNumeric(o)){var p=u.get("REFERENSI"),s=p?(p.ATURANPAKAI?p.ATURANPAKAI.DESKRIPSI:""):"";return s}else{var p=u.get("ATURAN_PAKAI");return'<span style="color:black;">'+p+"</span>"}},onRenderRacikan:function(q,t,u){var o=u.get("RACIKAN"),p=u.get("GROUP_RACIKAN"),s=u.get("JUMLAH_RACIKAN");if(o>0){return'<span style="color:green;"> Racikan['+p+"]| ["+s+"]</span>"}else{return'<span style="color:black;"> Non Racik </span>'}}},0,0,0,0,["controller.order-resep-detil"],0,[layanan.resep.order,"DetilController"],0));(Ext.cmd.derive("layanan.resep.order.Form",com.Form,{viewModel:{data:{record:undefined,formConfig:{readOnly:true}}},layout:{type:"vbox",align:"stretch"},defaults:{margin:"0 1 2 0"},bodyPadding:5,initComponent:function(){var l=this,g=new Date();l.items=[{xtype:"container",layout:{type:"hbox",align:"stretch"},defaults:{margin:"0 2 1 0"},items:[{name:"TANGGAL",reference:"tanggal",width:200,xtype:"datefield",emptyText:"[Pilih Tanggal Order]",format:"d/m/Y"},{name:"WAKTU",reference:"waktu",width:105,xtype:"timefield",emptyText:"[Jam:Mnt:Dtk]",bind:{readOnly:"{formConfig.readOnly}"},format:"H:i:s",hideTrigger:true},{xtype:"hiddenfield",flex:1,emptyText:"[ Depo Asal ]",name:"KUNJUNGAN"},{xtype:"ruangan-farmasi-combo",params:{STATUS:1},flex:1,hideTrigger:false,bind:{readOnly:"{formConfig.readOnly}"},reference:"ruanganfarmasicombo",forceSelection:true,allowBlank:false,name:"TUJUAN",listeners:{select:"onSelectTujuanResep"}},{xtype:"textfield",flex:1,emptyText:"[ Pemberi Resep ]",reference:"pemberiresep",name:"PEMBERI_RESEP"},{xtype:"dokter-combo",emptyText:"[Dokter DPJP]",flex:1,reference:"doktercombo",name:"DOKTER_DPJP"},{xtype:"numberfield",emptyText:"[ BB (kg) ]",width:125,allowDecimals:true,decimalPrecision:1,reference:"beratbadan",hideTrigger:true,name:"BERAT_BADAN"},{xtype:"numberfield",emptyText:"[ TB (cm) ]",width:125,allowDecimals:true,decimalPrecision:1,reference:"tinggibadan",hideTrigger:true,name:"TINGGI_BADAN"},{xtype:"textfield",emptyText:"[Alergi Obat]",flex:1,reference:"alergiobat",name:"ALERGI_OBAT"}]},{xtype:"container",layout:{type:"hbox",align:"stretch"},defaults:{margin:"0 35 0 0"},items:[{flex:1,name:"DIAGNOSA",reference:"diagnosa",xtype:"textfield",margin:"0 15 0 0",emptyText:"[ Diagnosa ]"},{xtype:"fieldcontainer",fieldLabel:"Gangguan Fungsi GInjal",labelWidth:175,defaultType:"radiofield",layout:"hbox",items:[{boxLabel:"Ya ",name:"GANGGUAN_FUNGSI_GINJAL",inputValue:"1",width:50},{boxLabel:"Tidak",name:"GANGGUAN_FUNGSI_GINJAL",inputValue:"0"}]},{xtype:"fieldcontainer",fieldLabel:"Menyusui",defaultType:"radiofield",layout:"hbox",labelWidth:70,items:[{boxLabel:"Ya  ",name:"MENYUSUI",inputValue:"1",width:50},{boxLabel:"Tidak",name:"MENYUSUI",inputValue:"0"}]},{xtype:"fieldcontainer",fieldLabel:"Hamil",defaultType:"radiofield",layout:"hbox",labelWidth:50,items:[{boxLabel:"Ya ",name:"HAMIL",inputValue:"1",width:50},{boxLabel:"Tidak",name:"HAMIL",inputValue:"0"}]},{xtype:"checkbox",fieldLabel:"Resep Pasien Pulang",boxLabel:"Ya",labelWidth:130,name:"RESEP_PASIEN_PULANG",inputValue:"1"}]}];l.callParent(arguments)},loadRecord:function(A){try{var E=this,f=E.getForm().loadRecord(A);if(A){var y=E.down("[reference=waktu]"),e=E.down("[reference=ruanganfarmasicombo]"),C=E.down("[reference=doktercombo]"),D=A.get("REFERENSI");y.setValue(A.get("TANGGAL"));E.getViewModel().set("record",A);if(D){var g=D.KUNJUNGAN,z=g.REFERENSI,x=Ext.create("data.model.Dokter",z.PENDAFTARAN.TUJUAN.REFERENSI.DOKTER||{});e.params.RUANGAN=g.RUANGAN;C.params.RUANGAN=g.RUANGAN;C.select(x)}e.load()}return f}catch(B){}},getRecord:function(){return this.getViewModel().get("record")},setFormConfig:function(m){var l=this,n=l.getViewModel();_config=n.get("formConfig");m=Ext.apply(_config,m);n.set("formConfig",m);n.notify()},getFormData:function(){var g=this,l=g.getForm().getValues();tgl=g.down("[reference=tanggal]").getValue(),wkt=g.down("[reference=waktu]").getValue();tgl.setHours(wkt.getHours());tgl.setMinutes(wkt.getMinutes());tgl.setSeconds(wkt.getSeconds());l.TANGGAL=tgl;return l},focus:function(g,l){this.down("[reference=ruanganfarmasicombo]").focus(g,l)}},0,["order-resep-form"],["component","box","container","panel","form","com-form","order-resep-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"order-resep-form":true},["widget.order-resep-form"],0,[layanan.resep.order,"Form"],0));(Ext.cmd.derive("layanan.resep.order.Paket",com.Form,{model:"data.model.PermintaanDetil",viewModel:{stores:{paketstore:{type:"tindakan-paket-farmasi-store"}}},layout:"fit",items:[{xtype:"list-master-tindakan-paket",flex:1,reference:"reseppaketlist",listeners:{orderpaket:"onOrderPaket"}}],onLoadRecord:function(){var g=this,l=g.down("list-master-tindakan-paket");l.onLoadRecord(1)},getData:function(){var g=this,l=g.down("list-master-tindakan-paket");a=g.getViewModel().get("paketstore"),rec=Ext.create("data.model.OrderDetilResep"),c=[];a.each(function(e){var f={FARMASI:e.data.BARANG,JUMLAH:e.data.JUMLAH,REFERENSI:{BARANG:{REFERENSI:e.data.REFERENSI},JUMLAH:e.data.JUMLAH}};c.push(f);rec.set(c)});return c}},0,["order-resep-paket"],["component","box","container","panel","form","com-form","order-resep-paket"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"order-resep-paket":true},["widget.order-resep-paket"],0,[layanan.resep.order,"Paket"],0));(Ext.cmd.derive("layanan.resep.order.Resep",Ext.tab.Panel,{activeTab:0,border:true,cls:"x-br-top",ui:"header-tab",items:[{title:"Non Racik",xtype:"order-resep-non-racik-form",flex:1,reference:"orderresepnonracik",listeners:{buatresep:"onBuatResep"}},{title:"Racikan",xtype:"order-resep-racikan-workspace",reference:"orderresepracikan",flex:1},{title:"Paket",xtype:"order-resep-paket",reference:"orderreseppaket",flex:1}],setTujuan:function(m){var n=this.down("order-resep-non-racik-form"),p=this.down("order-resep-racikan-workspace"),o=this.down("order-resep-paket");n.setTujuan(m);p.setTujuan(m);o.onLoadRecord({})}},0,["order-resep"],["component","box","container","panel","tabpanel","order-resep"],{component:true,box:true,container:true,panel:true,tabpanel:true,"order-resep":true},["widget.order-resep"],0,[layanan.resep.order,"Resep"],0));(Ext.cmd.derive("layanan.resep.order.Tujuan",Ext.form.Panel,{layout:{type:"vbox",align:"stretch"},defaults:{margin:"0 1 2 0"},bodyPadding:5,initComponent:function(){var l=this,g=new Date();l.items=[{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"ruangan-farmasi-combo",flex:1,reference:"orderreseptujuan",allowBlank:false,name:"TUJUAN"},{name:"TANGGAL",reference:"tanggal",width:200,xtype:"datefield",format:"d/m/Y",maxValue:g,value:g}]}];l.callParent(arguments)}},0,["order-resep-tujuan"],["component","box","container","panel","form","order-resep-tujuan"],{component:true,box:true,container:true,panel:true,form:true,"order-resep-tujuan":true},["widget.order-resep-tujuan"],0,[layanan.resep.order,"Tujuan"],0));(Ext.cmd.derive("layanan.resep.order.Workspace",com.Form,{controller:"order-resep-workspace",viewModel:{},layout:"border",items:[{region:"north",title:"Form Order",xtype:"order-resep-form",border:false,bodyPadding:2,reference:"orderresepform"},{region:"center",xtype:"order-resep",flex:1,reference:"orderresep"},{region:"east",xtype:"order-resep-detil",flex:2,reference:"orderresepdetil",collapsible:true,split:true}],buttons:[{text:"Kirim Order",ui:"soft-green",reference:"btnkirimorderresep",bind:{hidden:"{isFinal}"},tooltip:{text:"Kirim Order",mouseOffset:[50,-65]},iconCls:"x-fa fa-share",handler:"onKirimOrderResep"},{text:"Reset",ui:"soft-blue",reference:"btnresetorderresep",bind:{hidden:"{isFinal}"},tooltip:{text:"Reset",mouseOffset:[50,-65]},iconCls:"x-fa fa-refresh",handler:"onReset"}],load:function(o){var u=this,p=u.down("order-resep-form"),q=u.getReferences(),t={};if(o){if(Ext.getClassName(o)=="data.model.Kunjungan"){var s=o.get("STATUS")!=1;t={KUNJUNGAN:o.get("NOMOR"),REFERENSI:{KUNJUNGAN:o.data},TANGGAL:u.getSysdate()};q.orderresepform.setFormConfig({readOnly:s,tanggal:o.get("MASUK")})}q.orderresepform.loadRecord(Ext.create("data.model.OrderResep",t));q.orderresepform.focus(false,100)}},getFormData:function(){var p=this.down("[reference=orderresepform]"),n=this.down("[reference=orderresepdetil]"),m=p.getFormData(),o=n.getData();m.ORDER_DETIL=o;return{ORDER_RESEP:m}}},0,["order-resep-workspace"],["component","box","container","panel","form","com-form","order-resep-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"order-resep-workspace":true},["widget.order-resep-workspace"],0,[layanan.resep.order,"Workspace"],0));(Ext.cmd.derive("layanan.resep.order.WorkspaceController",Ext.app.ViewController,{groupracikan:1,onSelectTujuanResep:function(n,p){var m=this,o=m.getReferences();o.orderresep.setTujuan(p)},onBuatResep:function(n){var l=this,m=l.getReferences();rec=l.getReferences().orderresepnonracik.getRecord();m.orderresepdetil.addRow(rec);m.orderresepnonracik.reset();m.orderresepnonracik.focus()},onOrderPaket:function(n){var l=this,m=l.getReferences();rec=l.getReferences().orderreseppaket.getData();console.log(rec);m.orderresepdetil.addRow(rec)},onBuatResepRacikan:function(l){var m=this,n=m.getReferences().orderresepracikan;if(n.getForm().isValid()){this.simpanracikan(l,function(f,g,e){if(f){n.getView().fireEvent("simpansuccess",l,g,true,e,false)}})}},onDropTindakan:function(t,e,u,q){var s=this,f=s.getReferences();Ext.Array.each(e.records,function(l,g){l=Ext.create("data.model.OrderDetilRad",{TINDAKAN:l.get("ID"),REFERENSI:{TINDAKAN:l.data}});f.orderraddetil.addRow(l)});f.orderraddetil.removeAnotherModels()},simpanracikan:function(C,t){var x=this,z=0,w=x.getReferences(),u=x.getReferences().orderresepracikan,v=w.resepracikandetil.getFormData(),B=w.resepracikanform.getFormData();var A=[];for(z=0;z<B.length;z++){var y=Ext.create("data.model.OrderDetilResep",B[z]);y.set("GROUP_RACIKAN",x.groupracikan);y.set("ATURAN_PAKAI",v.ATURAN_PAKAI);y.set("KETERANGAN",v.KETERANGAN);y.set("PETUNJUK_RACIKAN",v.PETUNJUK_RACIKAN);y.set("JUMLAH_RACIKAN",v.JUMLAH_RACIKAN);w.orderresepdetil.addRow(y)}x.groupracikan++;u.reset()},onKirimOrderResep:function(u){var v=this,e=v.getView(),t=v.getReferences(),s=t.orderresepform.getFormData(),w=t.orderresepdetil.getData();e.setLoading(true);if(t.orderresepform.isValid()&&w.length>0){var f=t.orderresepform.getRecord();if(f){s.ORDER_DETIL=w;f.set(s);f.animateTarget=u;f.scope=v;f.showError=true;f.save({callback:function(l,g,m){if(m){var o=e.app.xpriv("110109");if(o){var n=Ext.create("data.model.Kunjungan",{NOPEN:l.get("REFERENSI").KUNJUNGAN.NOPEN,RUANGAN:l.get("TUJUAN"),REF:l.get("NOMOR"),STATUS:1});n.showError=true;n.animateTarget=u;n.scope=v;n.save({callback:function(p,y,q){if(q){e.fireEvent("reopen",p)}e.setLoading(false)}})}else{Ext.toast({html:"Order anda telah terkirim ke tujuan",headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"});v.getView().fireEvent("kirim",l);e.setLoading(false)}v.onReset()}else{e.setLoading(false)}}})}else{e.setLoading(false)}}else{e.setLoading(false)}},onReset:function(){var n=this,m=n.getReferences(),l=m.orderresepnonracik.getRecord();m.orderresepnonracik.reset();m.orderresepform.reset();m.orderresepform.loadRecord(Ext.create("data.model.OrderResep",{KUNJUNGAN:l.get("NOMOR"),REFERENSI:{KUNJUNGAN:l.get("REFERENSI").KUNJUNGAN},TANGGAL:n.getView().getSysdate()}));m.orderresepform.focus(false,100);m.orderresepdetil.removeDataStore()}},0,0,0,0,["controller.order-resep-workspace"],0,[layanan.resep.order,"WorkspaceController"],0));(Ext.cmd.derive("layanan.resep.order.nonracikan.Form",Ext.form.Panel,{controller:"order-resep-non-racik-form",layout:{type:"vbox",align:"stretch"},defaults:{margin:"0 1 5 0"},bodyPadding:5,initComponent:function(){var l=this,g=new Date();l.items=[{xtype:"hiddenfield",name:"ORDER_ID"},{xtype:"hiddenfield",name:"RACIKAN",value:0},{xtype:"container",layout:{type:"hbox",align:"stretch"},defaults:{margin:"0 2 1 0"},items:[{xtype:"barang-combo",flex:1,hideTrigger:true,reference:"barangcombo",allowBlank:false,name:"FARMASI",params:{STATUS:1}},{name:"JUMLAH",reference:"jumlah",xtype:"numberfield",allowBlank:false,hideTrigger:true,emptyText:"[ Jumlah ]",width:100}]},{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"referensi-combo",params:{JENIS:41,STATUS:1},minChars:2,name:"ATURAN_PAKAI",queryMode:"remote",queryParam:"QUERY",reference:"aturanpakai",emptyText:"[ Aturan Pakai ]",hideTrigger:true,typeAhead:true,forceSelection:false,flex:1,listeners:{beforequery:"onBeforeQuery"}}]},{name:"KETERANGAN",reference:"keterangan",xtype:"textarea",emptyText:"[ Keterangan ]",flex:1}],l.buttons=[{text:"Buat Resep",ui:"soft-green",reference:"btnkirim",tooltip:"Simpan Resep",iconCls:"x-fa fa-share",handler:"onBuatResep"}];l.callParent(arguments)},loadRecord:function(o){try{var p=this,e=p.getForm().loadRecord(o);if(o){this.down("barang-combo").focus()}return e}catch(n){}},getRecord:function(){var p=this.down("barang-combo").getSelection(),s=this.down("[reference=jumlah]").getValue(),q=this.down("[reference=keterangan]").getValue(),e=this.down("[reference=aturanpakai]").getValue(),o=this.down("referensi-combo").getSelection();rec=Ext.create("data.model.OrderDetilResep",{REFERENSI:{RACIKAN:{ID:0,DESKRIPSI:"Non Racikan"}}}),ref=rec.get("REFERENSI");if(p){br=p.get("BARANG"),rec.set("FARMASI",br);ref.BARANG=p.data;rec.set("REFERENSI",ref)}if(o){br=o.get("ID"),rec.set("ATURAN_PAKAI",br);ref.ATURANPAKAI=o.data;rec.set("REFERENSI",ref)}if(e){ref.ATURAN_PAKAI=e;rec.set("ATURAN_PAKAI",e)}if(s){ref.JUMLAH=s;rec.set("JUMLAH",s)}if(q){ref.KETERANGAN=q;rec.set("KETERANGAN",q)}return rec},setTujuan:function(g){var l=this.down("barang-combo");if(g){l.params.RUANGAN=g.get("FARMASI")}}},0,["order-resep-non-racik-form"],["component","box","container","panel","form","order-resep-non-racik-form"],{component:true,box:true,container:true,panel:true,form:true,"order-resep-non-racik-form":true},["widget.order-resep-non-racik-form"],0,[layanan.resep.order.nonracikan,"Form"],0));(Ext.cmd.derive("layanan.resep.order.nonracikan.FormController",Ext.app.ViewController,{onBuatResep:function(){var g=this,l=g.getView();if(l.getForm().isValid()){this.getView().fireEvent("buatresep")}},onBeforeQuery:function(f){f.combo.getStore().removeAll()}},0,0,0,0,["controller.order-resep-non-racik-form"],0,[layanan.resep.order.nonracikan,"FormController"],0));(Ext.cmd.derive("layanan.resep.order.racikan.Detil",Ext.form.Panel,{controller:"order-resep-racik-detil",layout:{type:"vbox",align:"stretch"},defaults:{margin:"0 1 5 0"},bodyPadding:5,initComponent:function(){var f=this;f.items=[{xtype:"referensi-combo",params:{JENIS:41,STATUS:1},minChars:1,name:"ATURAN_PAKAI",queryMode:"remote",queryParam:"QUERY",reference:"aturanpakai",emptyText:"[ Aturan Pakai ]",hideTrigger:true,typeAhead:true,forceSelection:false,flex:1,listeners:{beforequery:"onBeforeQuery"}},{layout:{type:"hbox",align:"stretch"},defaults:{margin:"0 2 1 0"},items:[{xtype:"referensi-combo",params:{JENIS:84,STATUS:1},minChars:1,name:"PETUNJUK_RACIKAN",queryMode:"remote",queryParam:"QUERY",reference:"petunjukracikan",emptyText:"[ Petunjuk Peracikan ]",hideTrigger:true,typeAhead:true,flex:1,listeners:{beforequery:"onBeforeQuery"},flex:2},{name:"JUMLAH_RACIKAN",reference:"jumlah_racikan",xtype:"textfield",allowBlank:false,emptyText:"[ Jumlah Racikan ]",flex:1,listeners:{specialkey:"onFocusEnter"}}]},{flex:1,name:"KETERANGAN",reference:"keterangan",xtype:"textarea",emptyText:"[ Keterangan ]"}];f.callParent(arguments)},getFormData:function(){var f=this.getForm().getValues();return f}},0,["order-resep-racik-detil"],["component","box","container","panel","form","order-resep-racik-detil"],{component:true,box:true,container:true,panel:true,form:true,"order-resep-racik-detil":true},["widget.order-resep-racik-detil"],0,[layanan.resep.order.racikan,"Detil"],0));(Ext.cmd.derive("layanan.resep.order.racikan.DetilController",Ext.app.ViewController,{onBeforeQuery:function(f){f.combo.getStore().removeAll()}},0,0,0,0,["controller.order-resep-racik-detil"],0,[layanan.resep.order.racikan,"DetilController"],0));(Ext.cmd.derive("layanan.resep.order.racikan.Form",Ext.form.Panel,{controller:"order-resep-racik-form",viewModel:{data:{ruangan:undefined}},layout:{type:"vbox",align:"stretch"},scrollable:true,items:[{xtype:"order-resep-racik",hideDelete:true}],loadRecord:function(o){try{var p=this,e=p.getForm().loadRecord(o);if(o){this.down("barang-combo").focus()}return e}catch(n){}},getFormData:function(){var f=[];this.items.each(function(e){var l=e.getFormData();if(l){f.push(l)}});return f.length>0?f:null},setTujuan:function(g){var l=this.down("order-resep-racik");if(g){this.getViewModel().set("ruangan",g);l.setTujuan(g)}}},0,["order-resep-racik-form"],["component","box","container","panel","form","order-resep-racik-form"],{component:true,box:true,container:true,panel:true,form:true,"order-resep-racik-form":true},["widget.order-resep-racik-form"],0,[layanan.resep.order.racikan,"Form"],0));(Ext.cmd.derive("layanan.resep.order.racikan.FormController",Ext.app.ViewController,{onFocusEnter:function(o,n){if(n.getKey()===n.ENTER){var s=this.getView(),p=this.getViewModel().get("ruangan"),q=Ext.create("layanan.resep.order.racikan.Racikan",{});s.add(q);if(p){q.setTujuan(p)}q.down("combobox").focus()}},onDelete:function(f){this.getView().remove(f.ownerCt)},onBeforeQuery:function(f){f.combo.getStore().removeAll()}},0,0,0,0,["controller.order-resep-racik-form"],0,[layanan.resep.order.racikan,"FormController"],0));(Ext.cmd.derive("layanan.resep.order.racikan.Racikan",Ext.form.Panel,{layout:{type:"hbox",align:"stretch"},defaults:{margin:"0 2 1 0"},bodyPadding:5,hideDelete:false,initComponent:function(){var l=this,g=new Date();l.items=[{xtype:"barang-combo",params:{STATUS:1},hideTrigger:true,reference:"barangcombo",allowBlank:false,name:"FARMASI",width:300},{name:"JUMLAH",reference:"jumlah",xtype:"textfield",allowBlank:false,value:0,emptyText:"[ Jumlah ]",flex:1,listeners:{specialkey:"onFocusEnter"}},{xtype:"button",ui:"soft-red",hidden:l.hideDelete,iconCls:"x-fa fa-times",handler:"onDelete"}];l.callParent(arguments)},getFormData:function(){var s=this.getForm().getValues(),n=this.down("barang-combo").getSelection(),o=this.down("[reference=jumlah]").getValue(),p=o,q=s.FARMASI!=""&&Number(s.JUMLAH)>=0;this.down("[reference=jumlah]").setValue(0);if(q){s.RACIKAN=1;s.JUMLAH=o;s.REFERENSI={BARANG:n.data,RACIKAN:{ID:1,DESKRIPSI:"Racikan"}}}return q?s:null},loadRecord:function(m){var n=this,l=m||null,l=Ext.getClassName(l)==""?new data.model.OrderDetilResep(l):l;return n.getForm().loadRecord(l)},setTujuan:function(g){var l=this.down("barang-combo");if(g){l.params.RUANGAN=g.get("FARMASI")}}},0,["order-resep-racik"],["component","box","container","panel","form","order-resep-racik"],{component:true,box:true,container:true,panel:true,form:true,"order-resep-racik":true},["widget.order-resep-racik"],0,[layanan.resep.order.racikan,"Racikan"],0));(Ext.cmd.derive("layanan.resep.order.racikan.Workspace",Ext.form.Panel,{layout:{type:"vbox",align:"stretch"},scrollable:true,defaults:{margin:"0 2 1 0"},initComponent:function(){var f=this;dt=new Date();f.items=[{xtype:"order-resep-racik-form",reference:"resepracikanform"},{xtype:"order-resep-racik-detil",reference:"resepracikandetil"}],f.buttons=[{text:"Buat Resep",ui:"soft-green",reference:"btnkirim",tooltip:"Kirim ",iconCls:"x-fa fa-share",handler:"onBuatResepRacikan"},{text:"Reset",ui:"soft-blue",reference:"btnreset",tooltip:"Reset",iconCls:"x-fa fa-refresh",handler:"onReset"}];f.callParent(arguments)},loadRecord:function(f){this.getController().loadRecord(f)},setTujuan:function(g){var l=this.down("order-resep-racik-form");l.setTujuan(g)}},0,["order-resep-racikan-workspace"],["component","box","container","panel","form","order-resep-racikan-workspace"],{component:true,box:true,container:true,panel:true,form:true,"order-resep-racikan-workspace":true},["widget.order-resep-racikan-workspace"],0,[layanan.resep.order.racikan,"Workspace"],0));(Ext.cmd.derive("layanan.resep.order.racikan.WorkspaceController",Ext.app.ViewController,{onBuatResep:function(n){var l=this,m=l.getReferences();rec=l.getReferences().orderresepnonracik.getRecord();m.orderresepdetil.addRow(rec);m.orderresepnonracik.reset();m.orderresepnonracik.focus()},onBuatResepRacikan:function(g){var l=this;rec=c.getReferences().orderresepnonracik.getRecord();console.log(rec);if(l.getView().getForm().isValid()){this.simpanracikan(g,function(n,e,f){if(n){l.getView().fireEvent("simpansuccess",g,e,true,f,false)}})}},onKirim:function(t){var u=this,s=u.getReferences(),q=s.orderresepform.getFormData(),e=s.orderresepdetil.getData();if(s.orderresepform.isValid()&&e.length>0){var f=s.orderresepform.getRecord();if(f){q.ORDER_DETIL=e;f.set(q);f.animateTarget=t;f.scope=u;f.showError=true;f.save({callback:function(l,g,m){if(m){Ext.toast({html:"Order anda telah terkirim ke tujuan",headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"});u.getView().fireEvent("kirim",l);u.getView().onReset()}}})}}},onReset:function(){var n=this,m=n.getReferences(),l=m.orderresepnonracik.getRecord();m.orderresepnonracik.reset();m.orderresepform.reset();m.orderresepform.focus(false,100);m.orderresepdetil.removeDataStore();m.orderresepform.loadRecord(Ext.create("data.model.OrderResep",{KUNJUNGAN:l.get("NOMOR"),REFERENSI:{KUNJUNGAN:l.get("REFERENSI").KUNJUNGAN},TANGGAL:new Date()}))}},0,0,0,0,["controller.order-resep-racikan-workspace"],0,[layanan.resep.order.racikan,"WorkspaceController"],0));(Ext.cmd.derive("layanan.resep.orderlist.Detil",Ext.grid.Panel,{viewModel:{stores:{store:{type:"order-detil-resep-store"}}},bind:{store:"{store}"},initComponent:function(){var f=this;f.columns=[{xtype:"rownumberer",text:"No",align:"left",width:50},{xtype:"templatecolumn",text:"Nama Obat",flex:1,sortable:false,tpl:'<div style="white-space:normal !important;">{REFERENSI.FARMASI.NAMA}</div>'},{text:"Jumlah",dataIndex:"JUMLAH",hideTrigger:true,width:75},{text:"Aturan Pakai",flex:1,dataIndex:"ATURAN_PAKAI"},{text:"Keterangan",dataIndex:"KETERANGAN",flex:1}],f.dockedItems=[{xtype:"pagingtoolbar",bind:{store:"{store}"},dock:"bottom",displayInfo:true}];Ext.grid.Panel.prototype.initComponent.apply(this,arguments)},loadStore:function(n){var o=this,m=o.getViewModel(),p=m.get("store");if(p){p.removeAll();if(n){p.queryParams=n}p.load()}},getData:function(){var m=this,n=m.getViewModel().get("store"),l=[];n.each(function(e){l.push(e.data)});return l},refresh:function(){var f=this.getViewModel().get("store");if(f){f.reload()}}},0,["order-resep-listdetil"],["component","box","container","panel","tablepanel","gridpanel","grid","order-resep-listdetil"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"order-resep-listdetil":true},["widget.order-resep-listdetil"],0,[layanan.resep.orderlist,"Detil"],0));(Ext.cmd.derive("layanan.resep.orderlist.DetilController",Ext.app.ViewController,{onRenderAturanPakai:function(q,t,u){var o=u.get("ATURAN_PAKAI");if(Ext.isNumeric(o)){var p=u.get("REFERENSI"),s=p?(p.ATURAN_PAKAI?p.ATURAN_PAKAI.DESKRIPSI:""):"";return s}else{var p=u.get("ATURAN_PAKAI");return'<span style="color:black;">'+p+"</span>"}},onRenderRacikan:function(f){if(f>0){return'<span style="color:green;"> R ['+f+"]</span>"}else{return'<span style="color:black;"> Non R </span>'}return f}},0,0,0,0,["controller.order-resep-listdetil"],0,[layanan.resep.orderlist,"DetilController"],0));(Ext.cmd.derive("layanan.resep.orderlist.List",Ext.grid.Panel,{controller:"order-resep-list",viewModel:{stores:{store:{type:"order-resep-store"}}},bind:{store:"{store}"},columns:[{xtype:"rownumberer",text:"No",align:"left",width:50},{text:"No.Resep",dataIndex:"NOMOR",sortable:false,flex:1},{xtype:"templatecolumn",text:"Asal / Unit",flex:1,sortable:false,tpl:'<div style="white-space:normal !important;">{REFERENSI.KUNJUNGAN.REFERENSI.RUANGAN.DESKRIPSI}</div>'},{xtype:"templatecolumn",text:"Tujuan",flex:1,sortable:false,tpl:'<div style="white-space:normal !important;">{REFERENSI.TUJUAN.DESKRIPSI}</div>'},{xtype:"datecolumn",text:"Tgl. Resep",dataIndex:"TANGGAL",format:"d/m/Y H:i:s",sortable:false,flex:1},{xtype:"widgetcolumn",align:"center",text:"Aksi",widget:{xtype:"fieldcontainer",defaults:{padding:2,margin:"0 2 1 0"},items:[{xtype:"button",action:0,text:"Batalkan",iconCls:"x-fa fa-minus-circle",ui:"soft-red",tooltip:"Batalkan Order",handler:"onBatalkanOrderResep",hidden:true},{xtype:"button",text:"Dibatalkan",action:1,ui:"soft-blue",hidden:true},{xtype:"button",text:"Diterima",action:2,ui:"soft-green",hidden:true}]},onWidgetAttach:function(f,g,u){var e=u.get("STATUS"),v=g.down("[action=0]"),t=g.down("[action=1]"),w=g.down("[action=2]");v.setHidden(e!=1);t.setHidden(e!=0);w.setHidden(e!=2)}}],dockedItems:[{xtype:"pagingtoolbar",bind:{store:"{store}"},dock:"bottom",displayInfo:true}],loadStore:function(n){var m=this,p=m.getViewModel(),o=p.get("store");if(o){o.removeAll();o.queryParams=o.queryParams||{};if(n){if(Ext.getClassName(n)=="data.model.Kunjungan"){o.queryParams.KUNJUNGAN=n.get("NOMOR");o.queryParams.HISTORY=1;if(!p.get("kunjungan")){p.set("kunjungan",n)}}}o.load()}},refresh:function(){var f=this.getViewModel().get("store");if(f){f.reload()}}},0,["order-resep-list"],["component","box","container","panel","tablepanel","gridpanel","grid","order-resep-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"order-resep-list":true},["widget.order-resep-list"],0,[layanan.resep.orderlist,"List"],0));(Ext.cmd.derive("layanan.resep.orderlist.ListController",Ext.app.ViewController,{onBatalkanOrderResep:function(n){var o=this,q=o.getStore("store"),s=n.ownerCt.getWidgetRecord(),p=s.get("NOMOR");s.showError=true;s.animateTarget=n;s.scope=o;Ext.Msg.show({title:"Pembatalan Order",message:"Anda yakin ingin membatalkan Order dengan Nomor Order "+s.get("NOMOR")+" ?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:n,fn:function(e){if(e==="yes"){s.set("STATUS",0);s.save({callback:function(g,f,l){if(l){Ext.toast({html:"Pembatalan order dengan Nomor Order "+s.get("NOMOR")+" berhasil",headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"});q.load()}else{s.set("STATUS",1)}}})}else{s.set("STATUS",status==1?0:1)}}})}},0,0,0,0,["controller.order-resep-list"],0,[layanan.resep.orderlist,"ListController"],0));(Ext.cmd.derive("layanan.resep.orderlist.Workspace",Ext.panel.Panel,{controller:"orderlist-resep-workspace",layout:"border",initComponent:function(){var f=this;f.items=[{region:"center",title:"Orders",xtype:"order-resep-list",reference:"orderreseplist",listeners:{select:"onOrderSelected"}},{region:"east",xtype:"order-resep-listdetil",flex:1,title:"Detil",reference:"orderresepdetil",collapsible:true,split:true}];f.callParent(arguments)},load:function(n){var p=this,o=p.down("[reference=orderreseplist]"),m=p.down("[reference=orderresepdetil]");o.loadStore(n)},refresh:function(){var n=this,m=n.down("[reference=orderreseplist]"),l=n.down("[reference=orderresepdetil]");m.refresh()}},0,["orderlist-resep-workspace"],["component","box","container","panel","orderlist-resep-workspace"],{component:true,box:true,container:true,panel:true,"orderlist-resep-workspace":true},["widget.orderlist-resep-workspace"],0,[layanan.resep.orderlist,"Workspace"],0));(Ext.cmd.derive("layanan.resep.orderlist.WorkspaceController",Ext.app.ViewController,{onOrderSelected:function(s,p){var e=this,q=e.getReferences(),o=p.get("NOMOR");q.orderresepdetil.loadStore({ORDER_ID:o})}},0,0,0,0,["controller.orderlist-resep-workspace"],0,[layanan.resep.orderlist,"WorkspaceController"],0));(Ext.cmd.derive("layanan.resep.riwayat.Detil",Ext.grid.Panel,{controller:"riwayat-resep-listdetil",viewModel:{stores:{store:{type:"layananfarmasi-store"}}},bind:{store:"{store}"},initComponent:function(){var f=this;f.columns=[{xtype:"rownumberer",text:"No",align:"left",width:50},{text:"Klp.Racik",dataIndex:"GROUP_RACIKAN",sortable:false,renderer:"onRenderRacikan",width:65},{xtype:"templatecolumn",text:"Nama Obat",flex:1,sortable:false,tpl:'<div style="white-space:normal !important;">{REFERENSI.FARMASI.NAMA}</div>'},{text:"Jumlah",dataIndex:"JUMLAH",hideTrigger:true,width:75},{text:"Aturan Pakai",flex:1,renderer:"onRenderAturanPakai",dataIndex:"ATURAN_PAKAI"},{text:"Keterangan",dataIndex:"KETERANGAN",sortable:false,flex:1}];f.callParent(arguments)},loadStore:function(n){var o=this,m=o.getViewModel(),p=m.get("store");if(p){p.removeAll();p.queryParams=p.queryParams||{};if(n){p.queryParams=n}p.load()}}},0,["riwayat-resep-listdetil"],["component","box","container","panel","tablepanel","gridpanel","grid","riwayat-resep-listdetil"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"riwayat-resep-listdetil":true},["widget.riwayat-resep-listdetil"],0,[layanan.resep.riwayat,"Detil"],0));(Ext.cmd.derive("layanan.resep.riwayat.DetilController",Ext.app.ViewController,{onRenderAturanPakai:function(q,t,u){var o=u.get("ATURAN_PAKAI");if(Ext.isNumeric(o)){var p=u.get("REFERENSI"),s=p?(p.ATURAN_PAKAI?p.ATURAN_PAKAI.DESKRIPSI:""):"";return s}else{var p=u.get("ATURAN_PAKAI");return'<span style="color:black;">'+p+"</span>"}},onRenderRacikan:function(f){if(f>0){return'<span style="color:green;"> R ['+f+"]</span>"}else{return'<span style="color:black;"> Non R </span>'}return f}},0,0,0,0,["controller.riwayat-resep-listdetil"],0,[layanan.resep.riwayat,"DetilController"],0));(Ext.cmd.derive("layanan.resep.riwayat.List",Ext.grid.Panel,{viewModel:{stores:{store:{type:"kunjungan-store"}}},bind:{store:"{store}"},columns:[{xtype:"rownumberer",text:"No",align:"left",width:50},{text:"No.Resep",dataIndex:"REF",sortable:false,flex:1},{xtype:"templatecolumn",text:"Tujuan / Unit",flex:1,sortable:false,tpl:'<div style="white-space:normal !important;">{REFERENSI.RUANGAN.DESKRIPSI}</div>'},{xtype:"datecolumn",text:"Tanggal",dataIndex:"MASUK",format:"d/m/Y H:i:s",sortable:false,flex:1}],dockedItems:[{xtype:"pagingtoolbar",bind:{store:"{store}"},dock:"bottom",displayInfo:true}],loadStore:function(l){var g=this.getViewModel().get("store");if(g){g.removeAll();g.queryParams=l;g.load()}},refresh:function(){var f=this.getViewModel().get("store");if(f){f.reload()}}},0,["riwayat-resep-list"],["component","box","container","panel","tablepanel","gridpanel","grid","riwayat-resep-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"riwayat-resep-list":true},["widget.riwayat-resep-list"],0,[layanan.resep.riwayat,"List"],0));(Ext.cmd.derive("layanan.resep.riwayat.Workspace",Ext.panel.Panel,{controller:"riwayat-resep-workspace",layout:"border",initComponent:function(){var f=this;f.items=[{region:"center",title:"Daftar Order",xtype:"riwayat-resep-list",reference:"riwayatorderreseplist",listeners:{select:"onOrderSelected"}},{region:"east",xtype:"riwayat-resep-listdetil",title:"Detil Order",reference:"riwayatorderresepdetil",flex:1,collapsible:true,split:true}];f.callParent(arguments)},load:function(n){var o=this,s=o.down("[reference=riwayatorderreseplist]"),p=n.get("REFERENSI")?n.get("REFERENSI"):null,q=p?(p.PENDAFTARAN?p.PENDAFTARAN.NORM:0):0;if(n){s.loadStore({NORM:q,JENIS_KUNJUNGAN:11,HISTORY:1,STATUS:2})}}},0,["riwayat-resep-workspace"],["component","box","container","panel","riwayat-resep-workspace"],{component:true,box:true,container:true,panel:true,"riwayat-resep-workspace":true},["widget.riwayat-resep-workspace"],0,[layanan.resep.riwayat,"Workspace"],0));(Ext.cmd.derive("layanan.resep.riwayat.WorkspaceController",Ext.app.ViewController,{onOrderSelected:function(s,p){var e=this,q=e.getReferences(),o=p.get("NOMOR");q.riwayatorderresepdetil.loadStore({KUNJUNGAN:o})}},0,0,0,0,["controller.riwayat-resep-workspace"],0,[layanan.resep.riwayat,"WorkspaceController"],0));(Ext.cmd.derive("layanan.resep.terima.List",com.Grid,{controller:"terima-resep-list",viewModel:{data:{inProses:false},stores:{store:{type:"order-resep-store"}}},title:"Daftar Resep",cls:"x-css-shadow x-color-w",iconCls:"x-fa fa-eraser",header:{items:[{xtype:"search-field",emptyText:"[NORM]",flex:1,listeners:{search:"onSearch",clear:"onClear",change:"onChange"}}]},hideHeaders:true,first:true,columns:[{xtype:"templatecolumn",flex:2,border:false,tpl:new Ext.XTemplate('<div style="font-weight: bold; font-size: 12px; white-space:normal !important;">{[this.getFormatNorm(values.REFERENSI.KUNJUNGAN.REFERENSI.PENDAFTARAN.REFERENSI.PASIEN.NORM)]} - {[this.getNamaLengkap(values.REFERENSI.KUNJUNGAN.REFERENSI.PENDAFTARAN.REFERENSI.PASIEN)]}</div>',"<div>{[this.getFormatPendaftaran(values.REFERENSI.KUNJUNGAN.NOPEN)]} - {[this.tanggalFormat(values.REFERENSI.KUNJUNGAN.REFERENSI.PENDAFTARAN.TANGGAL)]}</div>",'<div style="font-size: 12px; white-space:normal !important;">{NOMOR} - {[this.tanggalFormat(values.TANGGAL)]}</div>','<div style="font-size: 12px; white-space:normal !important;">Asal: {[this.getAsal(values.REFERENSI.KUNJUNGAN)]}</div>','<div style="font-size: 12px; white-space:normal !important;">Tujuan: {[this.getTujuan(values.REFERENSI.TUJUAN)]}</div>','<div style="font-size: 12px; white-space:normal !important;">{[this.getDokter(values.REFERENSI.DOKTER_DPJP)]}</div>','<div style="font-size: 12px; white-space:normal !important;">Penjamin: {[this.getPenjamin(values.REFERENSI.KUNJUNGAN.REFERENSI.PENDAFTARAN.PENJAMIN)]}</div>',{getFormatNorm:function(m){var n=Ext.String.leftPad(m,8,"0"),l=Ext.String.insert(Ext.String.insert(Ext.String.insert(n,".",2),".",5),".",8);return l},getNamaLengkap:function(p){var n=p.GELAR_DEPAN||"",e=p.NAMA||"",o=p.GELAR_BELAKANG||"";n=n==""?"":n+". ";o=o==""?"":", "+o;return n+e+o},getDokter:function(l){var g=l?(l.NAMA||""):"";return g},getFormatPendaftaran:function(f){return f.substring(0,6)+"."+f.substring(6)},tanggalFormat:function(g){var l=Ext.isDate(g)?g:Ext.Date.parse(g,"Y-m-d H:i:s");return Ext.Date.format(l,"d-m-Y H:i:s")},getAsal:function(y){var C=y.REFERENSI,x=y.JENIS_KUNJUNGAN==3,f=C?(C.RUANGAN?C.RUANGAN.DESKRIPSI:""):"",g=C&&x?C.RUANG_KAMAR_TIDUR:null,w=g?g.REFERENSI.RUANG_KAMAR:null,A=g?g.TEMPAT_TIDUR:"",e=w?w.KAMAR:"",z=w?(w.REFERENSI.KELAS?w.REFERENSI.KELAS.DESKRIPSI:""):"",B=f+(x?"</br>"+e+" / "+A+" / "+z:"");return B},getTujuan:function(l){var n=l?l:null,m=n?n.DESKRIPSI:"";return m},getPenjamin:function(o){var m=o.REFERENSI,n=m.KAP,p=n.REFERENSI.PENJAMIN.DESKRIPSI+(n.NOMOR==""?"":"-"+n.NOMOR)+" [ Kls. "+(m.KELAS?m.KELAS.DESKRIPSI:"")+" - SEP. "+o.NOMOR+" ]";return p}})},{xtype:"widgetcolumn",text:"Status",flex:1,align:"right",widget:{xtype:"fieldcontainer",defaults:{padding:2},items:[{xtype:"button",text:"Terima",action:0,margin:"0 1 0 0",bind:{disabled:"{inProses}"},handler:"onTerima"},{xtype:"button",text:"Batal",action:1,ui:"soft-red",bind:{disabled:"{inProses}"},handler:"onBatal"}]}}],onBeforeLoad:function(m,n,p){var o=n.get("config");if(m.first){m.first=false}n.set("config",o);m.setParams({COLUMNS:'["NOMOR","KUNJUNGAN","TANGGAL","DOKTER_DPJP","TUJUAN","STATUS"]',REFERENSI:Ext.JSON.encode({Kunjungan:{COLUMNS:["NOMOR","NOPEN","JENIS_KUNJUNGAN","RUANGAN","RUANG_KAMAR_TIDUR","STATUS"],REFERENSI:{Ruangan:{},RuangKamarTidur:{REFERENSI:{RuangKamar:{REFERENSI:{Kelas:true}}}},Pendaftaran:{COLUMNS:["NOMOR","NORM","TANGGAL"],REFERENSI:{Pasien:{COLUMNS:["NORM","GELAR_DEPAN","NAMA","GELAR_BELAKANG","JENIS_KELAMIN","TANGGAL_LAHIR","TEMPAT_LAHIR"]},Penjamin:{REFERENSI:{Kelas:true,KAP:true}}}}}},Dokter:true,Ruangan:{COLUMNS:["DESKRIPSI"]}})})}},0,["terima-resep-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","terima-resep-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"terima-resep-list":true},["widget.terima-resep-list"],0,[layanan.resep.terima,"List"],0));(Ext.cmd.derive("layanan.resep.terima.ListController",Ext.app.ViewController,{filter:{norm:"",tanggal:{checked:false,value:new Date()}},orderSelected:{property:"TANGGAL",direction:"ASC"},onSearch:function(l,g){this.filter.norm=g;this.cari()},onClear:function(){this.filter.norm="";this.cari()},onChange:function(p,n){var o=this,s=o.getView(),q=s.down("search-field");if(n==""){q.onClearClick()}},onTerima:function(q){var o=this,s=o.getView(),p=o.getViewModel(),t=q.ownerCt.getWidgetRecord(),u=t.get("REFERENSI").KUNJUNGAN.REFERENSI.PENDAFTARAN.REFERENSI.PASIEN.NAMA;s.waitRefresh=true;s.showMessageBox({title:"Penerimaan Order Resep",message:"Anda yakin ingin menerima Order Resep Pasien An. "+u+" ?",header:{padding:5},buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:q,fn:function(e){if(e==="yes"){p.set("inProses",true);var f=Ext.create("data.model.Kunjungan",{NOPEN:t.get("REFERENSI").KUNJUNGAN.NOPEN,RUANGAN:t.get("TUJUAN"),REF:t.get("NOMOR"),STATUS:1});f.showError=true;f.animateTarget=e;f.scope=o;f.save({callback:function(g,m,l){s.waitRefresh=false;if(l){s.remove(q.ownerCt);s.notifyMessage("Penerimaan Order Resep Pasien An. "+u+" berhasil");s.fireEvent("terima",t);s.refresh()}p.set("inProses",false)}})}else{s.waitRefresh=false;p.set("inProses",false)}}})},onBatal:function(p){var o=this,q=o.getView(),s=p.ownerCt.getWidgetRecord(),t=s.get("STATUS"),u=s.get("REFERENSI").KUNJUNGAN.REFERENSI.PENDAFTARAN.REFERENSI.PASIEN.NAMA;q.waitRefresh=true;s.showError=true;s.animateTarget=p;s.scope=o;q.showMessageBox({title:"Pembatalan Penerimaan Order Resep Pasien Konsul",message:"Anda yakin ingin membatalkan penerimaan Order Resep Pasien An. "+u+" ?",ui:"window-warning",header:{padding:5},buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:p,fn:function(e){if(e==="yes"){s.set("STATUS",0);s.save({callback:function(f,l,g){q.waitRefresh=false;if(g){q.remove(p.ownerCt);q.notifyMessage("Pembatalan penerimaan Order Resep Pasien An. "+u+" berhasil");q.refresh()}else{s.set("STATUS",t)}}})}else{q.waitRefresh=false;s.set("STATUS",t)}}})},privates:{cari:function(){var n=this,p=n.getView(),o=p.down("pagingtoolbar"),m={sort:Ext.JSON.encode(n.orderSelected)};if(n.filter.norm==""){delete p.getStore().queryParams.NORM}else{m.NORM=n.filter.norm}if(!n.filter.tanggal.checked){delete p.getStore().queryParams.TANGGAL}else{m.TANGGAL=Ext.Date.format(n.filter.tanggal.value,"Y-m-d")}p.setParams(m);if(o){o.moveFirst()}else{p.load()}}}},0,0,0,0,["controller.terima-resep-list"],0,[layanan.resep.terima,"ListController"],0));(Ext.cmd.derive("layanan.resep.widget.Orders",Ext.Container,{layout:"fit",items:[{xtype:"terima-resep-list",reference:"terimareseplist",viewConfig:{loadMask:false},listeners:{terima:"onTerima"}}],loadStore:function(l){var g=this.down("terima-resep-list");g.loadStore(l)},refresh:function(){this.down("terima-resep-list").refresh()}},0,["resep-widget-orders"],["component","box","container","resep-widget-orders"],{component:true,box:true,container:true,"resep-widget-orders":true},["widget.resep-widget-orders"],0,[layanan.resep.widget,"Orders"],0));(Ext.cmd.derive("layanan.tindakanmedis.Form",com.Form,{controller:"tindakan-medis-form",model:"data.model.TindakanMedis",viewModel:{data:{record:undefined},formulas:{isFinalKunjungan:function(l){var g=l("kunjungan.STATUS");g=g!=undefined?g:1;return g==2||g==0},isRecorded:function(o){var n=o("isFinalKunjungan"),m=o("record.SIMPAN")?o("record.SIMPAN"):false,p=o("record.STATUS")==0;return m||n||p}}},layout:{type:"vbox",align:"stretch"},defaults:{margin:"0 0 3 0"},bodyPadding:5,initComponent:function(){var l=this,g=new Date();l.items=[{xtype:"fieldcontainer",layout:{type:"hbox"},defaults:{allowBlank:false,value:g},items:[{name:"TANGGAL",reference:"tanggal",flex:1,xtype:"datefield",emptyText:"[Pilih Tanggal Tindakan]",format:"d/m/Y",maxValue:g,allowBlank:false,bind:{readOnly:"{isRecorded}"},margin:"0 1 0 0"},{name:"WAKTU",reference:"waktu",width:105,xtype:"timefield",emptyText:"[Jam:Mnt:Dtk]",bind:{readOnly:"{isRecorded}"},format:"H:i:s",allowBlank:false,hideTrigger:true}]},{xtype:"tindakan-combo",cls:"shadow-panel",name:"TINDAKAN",allowBlank:false,reference:"tindakancombo",bind:{readOnly:"{isRecorded}"},hideTrigger:false,listeners:{change:"onTindakanChange",focus:"onBeforeQuery"}}];l.callParent(arguments)},onLoadRecord:function(n,m){var p=n.getReferences(),o=p.waktu;if(m){o.setValue(m.get("TANGGAL"))}},setKunjungan:function(n){var m=this,p=m.getViewModel(),o=m.down("[reference=tindakancombo]");if(n){if(!p.get("kunjungan")){p.set("kunjungan",n)}if(o.params){o.params.RUANGAN=n.get("RUANGAN");o.params.STATUS=1;o.load()}}},getFormData:function(){var n=this,m=n.getReferences(),l=n.getForm().getValues();tgl=m.tanggal.getValue(),wkt=m.waktu.getValue();tgl.setHours(wkt.getHours());tgl.setMinutes(wkt.getMinutes());tgl.setSeconds(wkt.getSeconds());l.TANGGAL=tgl;return l},focus:function(g,l){this.getReferences().tindakancombo.focus(g,l)}},0,["tindakan-medis-form"],["component","box","container","panel","form","com-form","tindakan-medis-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"tindakan-medis-form":true},["widget.tindakan-medis-form"],0,[layanan.tindakanmedis,"Form"],0));(Ext.cmd.derive("layanan.tindakanmedis.FormController",Ext.app.ViewController,{onTindakanChange:function(l){var g=l.getStore();g.queryParams.STATUS=1},onBeforeQuery:function(f){if(f.combo){f.combo.getStore().removeAll()}}},0,0,0,0,["controller.tindakan-medis-form"],0,[layanan.tindakanmedis,"FormController"],0));(Ext.cmd.derive("layanan.tindakanmedis.List",com.Grid,{controller:"tindakan-medis-list",viewModel:{formulas:{isFinalKunjungan:function(l){var g=l("kunjungan.STATUS");g=g!=undefined?g:1;return g==2||g==0}},stores:{store:{type:"tindakan-medis-store"}}},riwayat:false,title:"Tindakan",hideHeaders:true,hideAction:false,doAfterLoad:Ext.emptyFn,initComponent:function(){var l=this,g=l.getViewModel().get("store");l.columns=[{xtype:"rownumberer",text:"No",width:60,hidden:l.hideHeaders},{text:"Tanggal",width:160,dataIndex:"TANGGAL",xtype:"datecolumn",format:"d-m-Y H:i:s",hidden:l.hideHeaders},{xtype:"templatecolumn",flex:1,hidden:!l.hideHeaders,tpl:new Ext.XTemplate('<div style="font-weight: bold; white-space:normal !important;">{[this.tanggalFormat(values.TANGGAL)]} - {TINDAKAN_DESKRIPSI}</div>'+(l.hideAction?"":'<div style="font-size: 12px"><span class="x-fa fa-user"></span>&nbsp;{NAMA_PENGGUNA}</div>'),{tanggalFormat:function(e){return Ext.Date.format(e,"d-m-Y H:i:s")}})},{text:"Ruangan",flex:1,dataIndex:"RUANGAN",hidden:l.hideHeaders},{text:"Tindakan",flex:2,dataIndex:"TINDAKAN_DESKRIPSI",hidden:l.hideHeaders},{text:"Petugas",flex:1,dataIndex:"NAMA_PENGGUNA",hidden:l.hideHeaders},{xtype:"widgetcolumn",text:"Status",hidden:l.hideAction,widget:{xtype:"fieldcontainer",defaultType:"button",layout:{type:"vbox",align:"stretch"},defaults:{padding:2,margin:"0 2 1 0"},items:[{text:"Batalkan",action:0,handler:"onBatal"},{text:"Dibatalkan",action:1,ui:"soft-red"}]},onWidgetAttach:"onWidgetAttach"}];g.doAfterLoad=function(o,e,f,p){l.doAfterLoad(e,f,p)};l.callParent(arguments)},listeners:{select:"onTindakanSelected"},loadStore:function(m,p){var n=this,o=n.getViewModel();if(m){o.set("kunjungan",m)}com.Grid.prototype.loadStore.call(this)},setRiwayat:function(f){this.riwayat=f},onBeforeLoad:function(n,o,p){var m=o.get("kunjungan");n.setParams({KUNJUNGAN:m.get("NOMOR"),REFERENSI:Ext.JSON.encode({Kunjungan:false})})}},0,["tindakan-medis-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","tindakan-medis-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"tindakan-medis-list":true},["widget.tindakan-medis-list"],0,[layanan.tindakanmedis,"List"],0));(Ext.cmd.derive("layanan.tindakanmedis.ListController",Ext.app.ViewController,{init:function(){var f=this.getStore("store");if(f){f.on("load",function(l,e){if(e.length==0){f.removeAll()}})}},onBatal:function(t){var v=this,e=v.getView(),u=v.getViewModel(),w=u.get("kunjungan"),f=v.getStore("store"),s=t.ownerCt.getWidgetRecord();if(w.get("STATUS")!=1){return}s.showError=true;s.animateTarget=t;s.scope=v;e.showMessageBox({title:"Pembatalan Tindakan",message:"Anda yakin ingin membatalkan tindakan <b>"+s.get("TINDAKAN_DESKRIPSI")+"</b> ini ?",ui:"window-red",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:t,fn:function(g){if(g==="yes"){s.set("STATUS",0);s.save({callback:function(m,l,n){if(n){e.notifyMessage("Pembatalan tindakan <b>"+s.get("TINDAKAN_DESKRIPSI")+"</b> berhasil");f.load();v.onTindakanSelected(g,s)}else{s.set("STATUS",1)}}})}else{s.set("STATUS",status==1?0:1)}}})},onTindakanSelected:function(g,l){this.getView().fireEvent("tindakanselected",g,l)},onWidgetAttach:function(m,E,C){var e=this,l=e.getViewModel(),G=l.get("kunjungan"),g=e.getView().riwayat,D=C.get("STATUS"),f=G.get("JENIS_KUNJUNGAN"),B=E.down("[action=0]"),n=E.down("[action=1]"),F=!(f==4||f==5||f==6)&&D!=0;B.setHidden(D==0||G.get("STATUS")==2||g);n.setHidden(D==1||g)}},0,0,0,0,["controller.tindakan-medis-list"],0,[layanan.tindakanmedis,"ListController"],0));(Ext.cmd.derive("layanan.tindakanmedis.Workspace",com.Form,{controller:"tindakan-medis-workspace",viewModel:{data:{data:undefined},stores:{konStore:{type:"konsul-store"},labStore:{type:"order-lab-store"},radStore:{type:"order-rad-store"}}},layout:"border",initComponent:function(){var f=this;f.items=[{region:"west",title:"Daftar Tindakan",xtype:"tindakan-list",showSearch:true,collapsed:true,collapsible:true,width:300,reference:"tindakanlist",hideHeaders:true,split:true,multiSelect:true,viewConfig:{plugins:{ptype:"gridviewdragdrop",enableDrop:false},copy:true},listeners:{itemdblclick:"onItemDblClickTindakan"}},{region:"center",xtype:"tindakan-medis-list",flex:2,margin:"0 2 0 0",reference:"tindakanmedislist",viewConfig:{plugins:{ptype:"gridviewdragdrop",enableDrag:false},listeners:{scope:f.getController(),beforedrop:"onBeforeDropTindakan",drop:"onDropTindakan"}},listeners:{tindakanselected:"onTindakanSelected"}},{region:"east",split:true,collapsible:true,xtype:"form",width:600,border:true,title:"Form Tindakan",layout:{type:"vbox",align:"stretch"},header:{items:[{xtype:"button",ui:"soft-cyan",iconCls:"x-fa fa-file",hidden:true,bind:{hidden:"{isFinal}"},tooltip:"Tindakan Medis Baru",handler:"addTindakan"}]},bodyPadding:"2 0 0 0",items:[{xtype:"tindakan-medis-form",border:false,bodyPadding:0,reference:"tindakanmedis"},{xtype:"petugas-medis-form-list",flex:1,reference:"tenagamedis"}],buttons:[{text:"Simpan",ui:"soft-blue",reference:"btnsimpan",hidden:true,bind:{hidden:"{isFinal}"},iconCls:"x-fa fa-save",handler:"onSimpan"}]}];f.callParent(arguments)},load:function(z){var L=this,J=L.getReferences(),M=J.tindakanmedislist,K=J.tenagamedis;vm=L.getViewModel(),tarifKelasKonsulMengikutiKelasRIYgMengkonsul=L.getPropertyConfig(7);if(z){var I=z.get("JENIS_KUNJUNGAN"),A=L.getReferensi(z.data,"RUANGAN"),G=L.getReferensi(A,"RUANGAN_KELAS"),F=G?G.KELAS:0,E=z.get("REF"),C={RUANGAN:z.get("RUANGAN"),start:0,limit:10000,KELAS:F,STATUS:1};K.setKunjungan(z);J.tindakanmedis.createRecord(Ext.create("data.model.TindakanMedis",{KUNJUNGAN:z.get("NOMOR"),TANGGAL:L.getSysdate(),SIMPAN:false}));if(I!=3){if(tarifKelasKonsulMengikutiKelasRIYgMengkonsul=="TRUE"&&E!=null){var D=E.substring(0,2),H=null;if(D=="10"){H=vm.get("konStore");H.setQueryParams({NOMOR:E,STATUS:2,REFERENSI:Ext.JSON.encode({Kunjungan:true})})}else{if(D=="12"){H=vm.get("labStore");H.setQueryParams({NOMOR:E,STATUS:2,REFERENSI:Ext.JSON.encode({Kunjungan:true})})}}if(D=="13"){H=vm.get("radStore");H.setQueryParams({NOMOR:E,STATUS:2,REFERENSI:Ext.JSON.encode({Kunjungan:true})})}if(H){H.load(function(n,l,m){if(m){if(Ext.isArray(n)){if(n.length>0){var g=L.getReferensi(n[0].data,"KUNJUNGAN"),f=L.getReferensi(g,"RUANG_KAMAR_TIDUR"),o=L.getReferensi(f,"RUANG_KAMAR");if(o){F=o.KELAS}if(z.get("TITIPAN")==1){F=z.get("TITIPAN_KELAS")}C.KELAS=F}}}J.tindakanlist.loadStore(C)})}else{J.tindakanlist.loadStore(C)}}else{J.tindakanlist.loadStore(C)}}else{var e=L.getReferensi(z.data,"RUANG_KAMAR_TIDUR"),B=L.getReferensi(e,"RUANG_KAMAR");if(B){F=B.KELAS}if(z.get("TITIPAN")==1){F=z.get("TITIPAN_KELAS")}C.KELAS=F;J.tindakanlist.loadStore(C)}J.tindakanmedis.setKunjungan(z);J.tindakanmedis.getForm().reset()}vm.set("data",z);M.loadStore(z)}},0,["tindakan-medis-workspace"],["component","box","container","panel","form","com-form","tindakan-medis-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"tindakan-medis-workspace":true},["widget.tindakan-medis-workspace"],0,[layanan.tindakanmedis,"Workspace"],0));(Ext.cmd.derive("layanan.tindakanmedis.WorkspaceController",Ext.app.ViewController,{onTindakanSelected:function(q,e){var s=this,p=s.getReferences(),o=s.getViewModel().get("isFinal");e.set("SIMPAN",true);p.tindakanmedis.loadRecord(e);p.tenagamedis.loadStore(e);p.btnsimpan.setHidden(o||e.get("STATUS")==0)},addTindakan:function(){var s=this,p=s.getReferences(),q=s.getView(),o=s.getViewModel().get("kunjungan"),n=Ext.create("data.model.TindakanMedis",{KUNJUNGAN:o.get("NOMOR"),TANGGAL:q.getSysdate(),SIMPAN:false});p.tindakanmedis.loadRecord(n);p.tenagamedis.loadStore(n);p.tindakanmedis.focus(false,200);p.btnsimpan.setHidden(false)},onSimpan:function(u){var e=this,s=e.getReferences(),t=s.tindakanmedis.getRecord(),q=s.tindakanmedis.getFormData(),f=s.tenagamedis.getData();if(s.tindakanmedis.isValid()){if(f.length>0){q.PETUGAS_MEDIS=f}t.set(q);t.animateTarget=u;t.scope=e;e.simpanTindakanMedis(t);s.tenagamedis.loadStore(t)}},onBeforeDropTindakan:function(v,x,w,f,g){var u=this,y=u.getViewModel().get("kunjungan"),e=y.get("STATUS");if(e==2||e==0){u.showInfoStatus(e);g.cancelDrop()}},onItemDblClickTindakan:function(s,u){var t=this,p=t.getView(),e=t.getViewModel().get("kunjungan"),q=e.get("STATUS");if(q==2||q==0){t.showInfoStatus(q);return}u=Ext.create("data.model.TindakanMedis",{KUNJUNGAN:e.get("NOMOR"),TINDAKAN:u.get("ID"),TANGGAL:p.getSysdate(),SIMPAN:true});t.simpanTindakanMedis(u)},onDropTindakan:function(v,x,w,z){var g=this,A=g.getView(),f=Ext.Array.clone(x.records),y=g.getViewModel().get("kunjungan")||w,e=0;x.records=[];Ext.Array.each(f,function(l){l=Ext.create("data.model.TindakanMedis",{KUNJUNGAN:y.get("NOMOR"),TINDAKAN:l.get("ID"),TANGGAL:A.getSysdate(),SIMPAN:true});e++;g.simpanTindakanMedis(l,false,function(m,n){x.records.push(l);if(e==f.length){g.loadTindakanMedis()}})})},privates:{showInfoStatus:function(g){var l=this.getView();l.notifyMessage("Tindakan tidak dapat di masukkan, karena kujungan ini "+(g==2?"sudah final":"telah dibatalkan"),"danger-blue")},simpanTindakanMedis:function(s,p,e){var t=this,q=t.getView(),p=p!=undefined?p:true,u=s.get("ID");s.showError=true;s.save({callback:function(l,f,g){if(g){q.notifyMessage((!Ext.isNumeric(u)?"Tindakan <b>"+l.get("TINDAKAN_DESKRIPSI")+"</b>":"Data")+" telah tersimpan");t.onTindakanSelected(null,l);if(p){t.loadTindakanMedis()}}if(Ext.isFunction(e)){e(l,g)}}})},loadTindakanMedis:function(){var l=this,g=l.getReferences();g.tindakanmedislist.refresh()}}},0,0,0,0,["controller.tindakan-medis-workspace"],0,[layanan.tindakanmedis,"WorkspaceController"],0));(Ext.cmd.derive("layanan.tindakanmedis.tenagamedis.FormList",com.Grid,{controller:"tenaga-medis-form-list",viewModel:{data:{tindakan:undefined},formulas:{isFinalKunjungan:function(l){var g=l("kunjungan.STATUS");g=g!=undefined?g:1;return g==2||g==0},isBatalTindakan:function(m){var l=m("isFinalKunjungan"),n=m("tindakan.STATUS")==0;return l||n}},stores:{store:{type:"petugas-tindakan-medis-store"}}},title:"Tenaga Medis",header:{items:[{xtype:"button",iconCls:"x-fa fa-plus",hidden:true,bind:{hidden:"{isBatalTindakan}"},tooltip:"Tambah Tenaga Medis",listeners:{click:"onAddClick"}}]},currentEditingRecord:undefined,initComponent:function(){var f=this;f.cellEditing=new Ext.grid.plugin.CellEditing({clicksToEdit:1,listeners:{beforeedit:"onBeforeEditCell"}});f.comboJenis=Ext.create("master.referensi.Combo",{params:{JENIS:32,STATUS:1},monitorTab:true,selectOnTab:true,editable:true,listeners:{select:"onSelectJenis"}});f.comboJenis.getViewModel().get("store").load();f.comboMedis=Ext.create("master.tenagamedis.Combo",{triggerAction:"query",monitorTab:true,selectOnFocus:true,emptyText:"[Pilih Tenaga Medis]",listeners:{select:"onSelectMedis",focus:"onFocusMedis",change:"onChangeMedis"}});f.columns=[{text:"Jenis",dataIndex:"JENIS",width:100,menuDisabled:true,sortable:false,editor:f.comboJenis,renderer:"onRendereJenis"},{text:"Nama",dataIndex:"MEDIS",flex:1,menuDisabled:true,sortable:false,editor:f.comboMedis,renderer:"onRendererNama"},{xtype:"checkcolumn",text:"Status",dataIndex:"STATUS",menuDisabled:true,sortable:false,listeners:{checkchange:"onCheckChange"}}];f.plugins=[f.cellEditing];f.callParent(arguments)},setKunjungan:function(n){var m=this,p=m.getViewModel(),o=p.get("store");o.removeAll();if(n){if(!p.get("kunjungan")){p.set("kunjungan",n)}}},loadStore:function(n){var m=this,p=m.getViewModel(),o=p.get("store");p.set("tindakan",n);if(o){o.removeAll();o.queryParams.TINDAKAN_MEDIS=n.get("ID");o.load()}},getData:function(){var m=this,n=m.getViewModel().get("store"),l=[];n.each(function(e){l.push(e.data)});return l}},0,["petugas-medis-form-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","petugas-medis-form-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"petugas-medis-form-list":true},["widget.petugas-medis-form-list"],0,[layanan.tindakanmedis.tenagamedis,"FormList"],0));(Ext.cmd.derive("layanan.tindakanmedis.tenagamedis.FormListController",Ext.app.ViewController,{init:function(){var f=this.getStore("store");if(f){f.on("load",function(l,e){if(e.length==0){f.removeAll()}})}},onAddClick:function(y){var f=this,B=Ext.create("data.model.TenagaMedis",{TINDAKAN_MEDIS:"",JENIS:1,MEDIS:"",SIMPAN:false,STATUS:1}),g=f.getView(),x=g.comboJenis,C=g.comboMedis,A=f.getViewModel(),e=A.get("kunjungan"),w=A.get("store"),z=x.getViewModel().get("store").getAt(0).data;C.params.JENIS=1;if(e){C.params.RUANGAN=e.get("RUANGAN")}B.set("REFERENSI",{JENIS:z});w.insert(w.getCount(),B)},onBeforeEditCell:function(){var l=arguments[1].record,m=this,n=m.getViewModel().get("isBatalTindakan");if(l.get("SIMPAN")==undefined||l.get("SIMPAN")||n){return false}m.getView().currentEditingRecord=l},onSelectJenis:function(q,o){var e=this,p=e.getView(),s=p.currentEditingRecord.get("REFERENSI")||{};if(s){s.JENIS=o.data}p.currentEditingRecord.set("REFERENSI",s);p.comboMedis.params.JENIS=o.get("ID");p.comboMedis.params.STATUS=1;delete p.currentEditingRecord.data.REFERENSI.MEDIS;p.comboMedis.select(null)},onSelectMedis:function(o,n){var m=this,p=m.getView().currentEditingRecord.get("REFERENSI")||{};if(p){p.MEDIS=n.data}m.getView().currentEditingRecord.set("REFERENSI",p)},onFocusMedis:function(q){var t=this,s=t.getView().currentEditingRecord.get("REFERENSI"),f=s?s.MEDIS:null,e=t.getView().currentEditingRecord.get("JENIS"),u=f?Ext.create("data.model.TenagaMedis",f):null;q.getStore().removeAll();q.params.JENIS=e;q.select(u)},onChangeMedis:function(m,l){var n=this;if(l==null){delete n.getView().currentEditingRecord.data.REFERENSI.MEDIS}},onRendererNama:function(A,f,C,w,y,x,g){var B=C.get("REFERENSI"),e=B?B.MEDIS:null,z=e?e.NIP+" - "+e.NAMA:A;return z},onRendereJenis:function(A,e,C,g,y,x,f){var B=C.get("REFERENSI"),w=B?B.JENIS:null,z=w?w.DESKRIPSI:A;return z},onCheckChange:function(z,f,g){var e=this,C=e.getView(),B=e.getViewModel(),x=B.get("store"),y=B.get("isBatalTindakan"),D=x.getAt(f),E=g?1:0,A=D.get("REFERENSI");if(y){D.set("STATUS",E==1?0:1)}else{if(D.get("SIMPAN")!=undefined){D.set("STATUS",E==1?0:1);return}deskStatus=["Menonaktifkan","Mengaktifkan"];uis=["window-red","window-blue"];dgrs=["danger-red","danger-blue"];C.showMessageBox({title:deskStatus[E]+" Tenaga Medis",message:"Anda yakin ingin "+deskStatus[E]+" "+A.JENIS.DESKRIPSI+" <b>An. "+A.MEDIS.NAMA+"</b>",ui:uis[E],buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:z,fn:function(l){if(l==="yes"){D.showError=true;D.animateTarget=z;D.scope=e;D.set("STATUS",E);D.setId(D.get("TINDAKAN_MEDIS")+"-"+D.get("JENIS")+"-"+D.get("MEDIS"));D.save({callback:function(o,n,m){if(m){C.notifyMessage(deskStatus[E]+" "+A.JENIS.DESKRIPSI+" <b>An. "+A.MEDIS.NAMA+"</b>",dgrs[E])}}})}else{D.set("STATUS",E==1?0:1)}}})}}},0,0,0,0,["controller.tenaga-medis-form-list"],0,[layanan.tindakanmedis.tenagamedis,"FormListController"],0));(Ext.cmd.derive("pembayaran.kasir.Model",data.model.Model,{serviceName:"pembayaran/kasir",fields:[{name:"ID",type:"int"},{name:"NAMA",type:"string"},{name:"NIP",type:"string"}]},0,0,0,0,0,0,[pembayaran.kasir,"Model"],0));(Ext.cmd.derive("pembayaran.kasir.Store",data.store.Store,{model:"pembayaran.kasir.Model"},0,0,0,0,["store.kasir-store"],0,[pembayaran.kasir,"Store"],0));(Ext.cmd.derive("pembayaran.pembayarantagihan.Model",data.model.Model,{serviceName:"pembayaran/pembayarantagihan",fields:[{name:"TAGIHAN",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"JENIS",type:"int"},{name:"REF",type:"string"},{name:"DESKRIPSI",type:"string"},{name:"TOTAL",type:"float"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}]},0,0,0,0,0,0,[pembayaran.pembayarantagihan,"Model"],0));(Ext.cmd.derive("pembayaran.pembayarantagihan.Store",data.store.Store,{model:"pembayaran.pembayarantagihan.Model"},0,0,0,0,["store.pembayaran-pembayarantagihan-store"],0,[pembayaran.pembayarantagihan,"Store"],0));(Ext.cmd.derive("pembayaran.tagihan.discount.tenagamedis.Model",data.model.Model,{serviceName:"pembayaran/diskon/tindakantenagamedis",fields:[{name:"ID",type:"string"},{},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[pembayaran.tagihan.discount.tenagamedis,"Model"],0));(Ext.cmd.derive("pembayaran.tagihan.discount.tenagamedis.Store",data.store.Store,{model:"pembayaran.tagihan.discount.tenagamedis.Model"},0,0,0,0,["store.discount-tenagamedis-store"],0,[pembayaran.tagihan.discount.tenagamedis,"Store"],0));(Ext.cmd.derive("pembayaran.tagihan.pembatalan.Model",data.model.Model,{serviceName:"pembayaran/pembatalantagihan",fields:[{name:"ID",type:"int"},{name:"TAGIHAN",type:"string"},{name:"JENIS",type:"int"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[pembayaran.tagihan.pembatalan,"Model"],0));(Ext.cmd.derive("pembayaran.kasir.Combo",com.Combo,{viewModel:{stores:{store:{type:"kasir-store"}}},valueField:"ID",displayField:"NAMA",minChars:2,emptyText:"[Pilih Kasir]",queryMode:"remote",queryParam:"QUERY"},0,["kasir-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","kasir-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"kasir-combo":true},["widget.kasir-combo"],0,[pembayaran.kasir,"Combo"],0));(Ext.cmd.derive("pembayaran.pembayarantagihan.List",com.Grid,{controller:"pembayaran-pembayarantagihan-list",viewModel:{data:{listConfig:{mode:"grid",enabledSearch:false}},stores:{store:{type:"pembayaran-pembayarantagihan-store"}},formulas:{isModeList:function(l){var g=l("listConfig.mode");return g==="list"}}},title:"Daftar Pembayaran Tagihan",header:{items:[{xtype:"search-field",emptyText:"[Cari No.Tagihan]",bind:{hidden:"{!listConfig.enabledSearch}"},listeners:{search:"onSearch",clear:"onClear"}}]},columns:[{dataIndex:"TAGIHAN",align:"center",text:"No. Tagihan",bind:{hidden:"{isModeList}"},width:100},{xtype:"templatecolumn",text:"Nama",bind:{hidden:"{isModeList}"},flex:2,tpl:"{[values.REFERENSI.REF.NAMA]}"},{xtype:"templatecolumn",text:"Tanggal",align:"center",bind:{hidden:"{isModeList}"},width:100,tpl:new Ext.XTemplate('<div style="font-weight: bold; font-size: 18px; white-space:normal !important;">{[this.tanggalFormat(values.REFERENSI.TAGIHAN.TGL_MASUK)]} </div>',{tanggalFormat:function(l){var g=Ext.isDate(l)?l:Ext.Date.parse(l,"Y-m-d H:i:s");return Ext.Date.format(g,"d-m-Y H:i:s")}})},{xtype:"templatecolumn",text:"Jenis",bind:{hidden:"{isModeList}"},flex:1,tpl:"{[values.REFERENSI.JENIS.DESKRIPSI]}"},{xtype:"templatecolumn",text:"Deskripsi",bind:{hidden:"{isModeList}"},flex:1,tpl:"{[values.DESKRIPSI]}"},{xtype:"templatecolumn",text:"Total",align:"right",bind:{hidden:"{isModeList}"},flex:2,tpl:new Ext.XTemplate('<div style="font-weight: bold; font-size: 18px; white-space:normal !important;">{[this.getFormatNumber(values.TOTAL)]} </div>',{getFormatNumber:function(f){return Ext.util.Format.number(val,"0,000")}})},{xtype:"templatecolumn",flex:2,bind:{hidden:"{!isModeList}"},tpl:new Ext.XTemplate('<div style="font-weight: bold; font-size: 14px; white-space:normal !important;">{[values.TAGIHAN]} - {[values.REFERENSI.REF.NAMA]}</div>','<div style="font-size: 12px; white-space:normal !important;">Tgl. {[this.tanggalFormat(values.TANGGAL)]} | {[values.DESKRIPSI]}</div>',{tanggalFormat:function(l){var g=Ext.isDate(l)?l:Ext.Date.parse(l,"Y-m-d H:i:s");return Ext.Date.format(g,"d-m-Y H:i:s")}})},{xtype:"templatecolumn",flex:1,align:"right",bind:{hidden:"{!isModeList}"},tpl:new Ext.XTemplate('<div style="font-weight: bold; font-size: 18px; white-space:normal !important;">{[this.getFormatNumber(values.TOTAL)]} </div>',{getFormatNumber:function(f){return Ext.util.Format.number(f,"0,000")}})}]},0,["pembayaran-pembayarantagihan-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","pembayaran-pembayarantagihan-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"pembayaran-pembayarantagihan-list":true},["widget.pembayaran-pembayarantagihan-list"],0,[pembayaran.pembayarantagihan,"List"],0));(Ext.cmd.derive("pembayaran.pembayarantagihan.ListController",Ext.app.ViewController,{onSearch:function(l,g){this.cariTagihan(g)},onClear:function(){this.cariTagihan("")},privates:{cariTagihan:function(l){var m=this,n=m.getView();n.setLoading(true);if(l==""){delete n.getParams().TAGIHAN}else{n.setParams({TAGIHAN:l})}n.load()}}},0,0,0,0,["controller.pembayaran-pembayarantagihan-list"],0,[pembayaran.pembayarantagihan,"ListController"],0));(Ext.cmd.derive("pembayaran.penerimaan.detail",com.Form,{html:"2"},0,["pembayaran-penerimaan-detail"],["component","box","container","panel","form","com-form","pembayaran-penerimaan-detail"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"pembayaran-penerimaan-detail":true},["widget.pembayaran-penerimaan-detail"],0,[pembayaran.penerimaan,"detail"],0));(Ext.cmd.derive("pembayaran.penerimaan.List",com.Grid,{controller:"pembayaran-penerimaan-list",viewModel:{stores:{store:{type:"tagihan-store"}}},hideHeaders:true,waitRefresh:true,bind:{store:"{store}"},columns:[{xtype:"templatecolumn",flex:1,tpl:new Ext.XTemplate('<div style="font-weight: bold; font-size: 12px; white-space:normal !important;">Id Transaksi: {[values.ID]} </div>')},{xtype:"widgetcolumn",flex:1,align:"right",widget:{xtype:"panel",items:[{bind:{data:{items:"{store.data.items}"}},tpl:new Ext.XTemplate('<div style="text-align: left; font-size: 12px; white-space:normal !important;">Open : {[this.tanggalFormat(values.TANGGAL)]}</div>','<div style="font-size: 12px; text-align: left;  white-space:normal !important;">Close : {[this.tanggalFormat(values.TANGGAL)]}</div>',{getFormatNorm:function(l){var m=Ext.String.leftPad(l,8,"0"),n=Ext.String.insert(Ext.String.insert(Ext.String.insert(m,".",2),".",5),".",8);return n},tanggalFormat:function(l){var g=Ext.isDate(l)?l:Ext.Date.parse(l,"Y-m-d H:i:s");return Ext.Date.format(g,"d-m-Y H:i:s")}})},{xtype:"button",text:"Detail",handler:"onShowDetail"}]}}],loadStore:function(l){var m=this.getViewModel(),n=m.get("store");if(n){n.removeAll();n.queryParams=n.queryParams||{};if(l){n.queryParams=l}n.load({callback:function(e){if(e){if(e.length>0){m.set("status",e[0].get("STATUS"))}}}})}}},0,["pembayaran-penerimaan-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","pembayaran-penerimaan-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"pembayaran-penerimaan-list":true},["widget.pembayaran-penerimaan-list"],0,[pembayaran.penerimaan,"List"],0));(Ext.cmd.derive("pembayaran.penerimaan.ListController",Ext.app.ViewController,{init:function(){var l=this,g=l.getStore("store");if(g){g.on("load",function(e,f){if(f){if(f.length==0){g.removeAll()}}l.getView().waitRefresh=false})}},onView:function(n){var m=this,l=n.ownerCt.getWidgetRecord();m.getView().fireEvent("viewtagihan",l)},onShowDetail:function(){var f=this;f._onShowDetail=Ext.create("Ext.Window",{closable:true,modal:true,maximizable:true,constrain:this.getView(),header:{height:20,cls:"bgheaderTop"},layout:"fit",minWidth:900,minHeight:400,border:false,items:[{xtype:"pembayaran-penerimaan-detail"}]}).show()}},0,0,0,0,["controller.pembayaran-penerimaan-list"],0,[pembayaran.penerimaan,"ListController"],0));(Ext.cmd.derive("pembayaran.penerimaan.Workspace",com.Form,{cls:"shadow-panel",border:true,layout:"border",inRefresh:false,header:{iconCls:"x-fa fa-credit-card",title:"Penerimaan Kasir",margin:0,padding:"5 10 5 10",cls:"x-color-w",layout:{type:"hbox",align:"middle"},items:[{xtype:"component",flex:1},{xtype:"button",iconCls:"x-fa fa-refresh",tooltip:"Refresh",ui:"soft-cyan",margin:"0 0 0 1"}]},items:[{region:"center",reference:"listpenerimaankasir",xtype:"pembayaran-penerimaan-list"}],loadStore:function(g){var l=this.down("[reference=listpenerimaankasir]");l.loadStore({STATUS:1,JENIS:4})},refresh:function(){if(!this.inRefresh){this.getController().init()}}},0,["pembayaran-penerimaan-Workspace"],["component","box","container","panel","form","com-form","pembayaran-penerimaan-Workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"pembayaran-penerimaan-Workspace":true},["widget.pembayaran-penerimaan-Workspace"],0,[pembayaran.penerimaan,"Workspace"],0));(Ext.cmd.derive("pembayaran.penjualan.List",com.Grid,{controller:"pembayaran-penjualan-list",viewModel:{stores:{store:{type:"tagihan-store"}}},hideHeaders:true,waitRefresh:true,reference:"tagihanpenjualanlist",initComponent:function(){var f=this;f.columns=[{xtype:"templatecolumn",flex:2,tpl:new Ext.XTemplate('<div style="font-weight: bold; font-size: 12px; white-space:normal !important;">{[values.ID]} ~ {[this.getReferensi(values, "PENJUALAN", "PENGUNJUNG")]} </div>','<div style="font-size: 12px; white-space:normal !important;">{[this.tanggalFormat(values.TANGGAL)]}</div>',{getFormatNorm:function(e){var m=Ext.String.leftPad(e,8,"0"),n=Ext.String.insert(Ext.String.insert(Ext.String.insert(m,".",2),".",5),".",8);return n},tanggalFormat:function(l){var e=Ext.isDate(l)?l:Ext.Date.parse(l,"Y-m-d H:i:s");return Ext.Date.format(e,"d-m-Y H:i:s")},getReferensi:function(e,n,m){return f.getReferensi(e,n,m)}})},{xtype:"templatecolumn",flex:1,tpl:new Ext.XTemplate('<div style="font-weight: bold; font-size: 18px; white-space:normal !important;">{TOTAL} </div>')},{xtype:"widgetcolumn",text:"Status",align:"right",flex:1,widget:{xtype:"fieldcontainer",defaults:{padding:2},items:[{xtype:"button",text:"View",action:0,margin:"0 1 0 0",handler:"onViewTagihanPenjualan"},{xtype:"button",text:"Cetak Kwitansi",action:1,handler:"onCetakKwitansi",bind:{hidden:"{getStatusCetakKwitansi}"}}]},onWidgetAttach:"onWidgetAttach"}];com.Grid.prototype.initComponent.call(this)}},0,["pembayaran-penjualan-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","pembayaran-penjualan-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"pembayaran-penjualan-list":true},["widget.pembayaran-penjualan-list"],0,[pembayaran.penjualan,"List"],0));(Ext.cmd.derive("pembayaran.penjualan.ListController",Ext.app.ViewController,{onViewTagihanPenjualan:function(n){var m=this,l=n.ownerCt.getWidgetRecord();m.getView().fireEvent("viewtagihanpenjualan",l)},onCetakKwitansi:function(n){var m=this,l=n.ownerCt.getWidgetRecord();m.getView().fireEvent("cetakkwitansi",l)},onWidgetAttach:function(q,o,u){var p=this,s=u.get("STATUS"),t=o.down("[action=1]");t.setHidden(s!==2)}},0,0,0,0,["controller.pembayaran-penjualan-list"],0,[pembayaran.penjualan,"ListController"],0));(Ext.cmd.derive("pembayaran.penjualan.Workspace",com.Form,{controller:"pembayaran-penjualan-workspace",cls:"shadow-panel",border:true,waitRefresh:false,layout:{type:"vbox",align:"stretch"},header:{iconCls:"x-fa fa-credit-card",title:"Tagihan / Pembayaran",margin:0,padding:"5 10 5 10",cls:"x-color-w",layout:{type:"hbox",align:"middle"},items:[{xtype:"component",flex:1},{xtype:"button",iconCls:"x-fa fa-refresh",tooltip:"Refresh",ui:"soft-cyan",margin:"0 0 0 1",handler:"onRefreshTagihanPenjualan"},{xtype:"button",iconCls:"x-fa fa-history",tooltip:"History Tagihan / Pembayaran",ui:"soft-green",margin:"0 0 0 1",handler:"onViewHistoryTagihanPenjualan"}]},scrollable:true,bodyPadding:5,items:[{region:"center",xtype:"pembayaran-penjualan-list",reference:"listpembayaranpenjualan",viewConfig:{loadMask:false},listeners:{viewtagihanpenjualan:"onViewTagihanPenjualan",cetakkwitansi:"onCetakKwitansiPenjualan"}}],loadStore:function(g){var l=this.down("[reference=listpembayaranpenjualan]");l.setGridConfig({paging:true});l.loadStore({STATUS:1,JENIS:4})},refresh:function(){if(!this.waitRefresh){this.down("pembayaran-penjualan-list").refresh()}}},0,["pembayaran-penjualan-Workspace"],["component","box","container","panel","form","com-form","pembayaran-penjualan-Workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"pembayaran-penjualan-Workspace":true},["widget.pembayaran-penjualan-Workspace"],0,[pembayaran.penjualan,"Workspace"],0));(Ext.cmd.derive("pembayaran.penjualan.WorkspaceController",Ext.app.ViewController,{onViewTagihanPenjualan:function(m){var l=this,n=l.getView();n.waitRefresh=true;n.openDialog("",true,0,0,{xtype:"tagihan-penjualan-Workspace",title:"Tagihan Penjualan",ui:"panel-cyan",showCloseButton:true},function(f,e){wrksp=e.down("tagihan-penjualan-Workspace");wrksp.on({close:function(){n.waitRefresh=false;n.refresh();e.close()}});wrksp.load(m)})},onViewHistoryTagihanPenjualan:function(m){var l=this,n=l.getView();n.waitRefresh=true;n.openDialog("",true,0,0,{xtype:"pembayaran-penjualan-list",title:"History Pembayaran Tagihan Penjualan",ui:"panel-cyan",showCloseButton:true},function(f,e){wrksp=e.down("pembayaran-penjualan-list");wrksp.on({close:function(){n.waitRefresh=false;n.refresh();e.close()},cetakkwitansi:function(g){l.onCetakKwitansiPenjualan(g)},viewtagihanpenjualan:function(g){l.onViewTagihanPenjualan(g)}});wrksp.setGridConfig({paging:true});wrksp.loadStore({STATUS:2,JENIS:4})})},onCetakKwitansiPenjualan:function(o){var m=this,p=m.getView(),n=o.get("ID");p.cetak({NAME:"pembayaran.CetakKwitansiPenjualan",TYPE:"Word",EXT:"docx",PARAMETER:{PTAGIHAN:n,PJENIS:4},REQUEST_FOR_PRINT:true,PRINT_NAME:"CetakKwitansiPenjualan"})},onRefreshTagihanPenjualan:function(n){var l=this,m=l.getView();m.waitRefresh=false;m.refresh()}},0,0,0,0,["controller.pembayaran-penjualan-workspace"],0,[pembayaran.penjualan,"WorkspaceController"],0));(Ext.cmd.derive("pembayaran.tagihan.HeaderValue",Ext.form.Panel,{viewModel:{data:{value:0},formulas:{getValueNumber:function(l){var g=l("value");g=g?g:0;return Ext.util.Format.number(g,"0,00")}}},border:false,fontWeight:"bold",fontSize:"17px",paddingText:"4 0 0 0",layout:{type:"hbox",align:"stretch"},bodyPadding:5,initComponent:function(){var f=this;f.items=[{xtype:"component",html:"Rp.",margin:"0 5 0 0"},{xtype:"component",flex:1,style:{fontWeight:f.fontWeight,fontSize:f.fontSize,textAlign:"right",padding:f.paddingText},bind:{html:"{getValueNumber}"}}];Ext.form.Panel.prototype.initComponent.apply(this,arguments)},setValue:function(f){this.getViewModel().set("value",f)}},0,["headervalue"],["component","box","container","panel","form","headervalue"],{component:true,box:true,container:true,panel:true,form:true,headervalue:true},["widget.headervalue"],0,[pembayaran.tagihan,"HeaderValue"],0));(Ext.cmd.derive("pembayaran.tagihan.Info",com.Form,{controller:"tagihan-info",viewModel:{data:{tagihan:undefined,pembayaran:undefined,viewConfig:{tagihanFinal:false,tagihanHak:false,cetakKuitansi:false},total:0,info:""},formulas:{adaPembayaranTunai:function(l){var g=l("total");return g>0}}},layout:{type:"vbox",align:"stretch"},width:300,bodyPadding:0,header:{itemPosition:1,items:[{xtype:"button",ui:"soft-red",iconCls:"x-fa fa-calculator",tooltip:"Hitung Ulang Tagihan",bind:{hidden:"{!viewConfig.tagihanFinal}"},handler:"onHitungUlang",margin:"0 1 0 0"},{xtype:"button",ui:"soft-cyan",iconCls:"x-fa fa-info",tooltip:"Informasi",handler:"onInfo"}]},initComponent:function(){var f=this;com.Form.prototype.initComponent.call(this);f.suspendLayouts();f.add(f.lCetakan());f.add(f.lInfoTagihan());f.add(f.lBtnTagihan());f.resumeLayouts()},lCetakan:function(){var f=this;return{height:30,layout:{type:"hbox",align:"stretch"},defaultType:"button",items:[{text:"Cetak Rekap",iconCls:"x-fa fa-print",ui:"soft-cyan",rptName:"CetakRekapRincianPasien",flex:1,handler:"onCetak"},{text:"Cetak Rincian",iconCls:"x-fa fa-print",ui:"soft-cerulen",flex:1,menu:[{text:"Format 1",rptName:f.kode+"CetakRincianPasien",handler:"onCetak"},{text:"Format 2",rptName:"CetakRincianPasien",handler:"onCetak"},{text:"Format 3",rptName:f.kode+"CetakRincianPasienPerGroup",handler:"onCetak"},{text:"Format 4",rptName:"CetakRincianKegiatanPasien",handler:"onCetak"}]}]}},lInfoTagihan:function(){return{autoScroll:true,flex:1,layout:{type:"vbox",align:"stretch"},defaults:{fontSize:"15px",height:55},items:[{xtype:"headervalue",fontSize:"20px",paddingText:"7px 0 0 0",height:60,reference:"totaltagihan",title:"Total Tagihan"},{xtype:"headervalue",reference:"totaltagihanhak",title:"Total Tagihan Hak",hidden:true,bind:{hidden:"{!viewConfig.tagihanHak}"}},{xtype:"headervalue",reference:"totaljaminan",title:"Total Jaminan"},{xtype:"headervalue",reference:"totalsubsidi",title:"Total Subsidi"},{xtype:"headervalue",reference:"totalpiutang",title:"Total Piutang"},{xtype:"headervalue",reference:"totaldiskon",title:"Total Diskon"},{xtype:"headervalue",reference:"totaledc",title:"Total Pembayaran Non Tunai"},{xtype:"headervalue",fontSize:"25px",paddingText:"7px 0 0 0",height:65,reference:"totaltunai",title:"Total Harus Bayar / Tunai"},{xtype:"headervalue",reference:"totaluangmuka",title:"Total Deposit"},{xtype:"headervalue",reference:"sisapembayaran",title:"Sisa Pembayaran"}]}},lBtnTagihan:function(){return{height:160,layout:{type:"vbox",align:"stretch"},items:[{xtype:"kwitansi-form",title:"Kwitansi",bind:{hidden:"{!adaPembayaranTunai}"},reference:"kwitansi"},{xtype:"button",ui:"soft-cerulen",text:"Finalkan Tagihan",hidden:true,bind:{hidden:"{!viewConfig.tagihanFinal}"},handler:"onFinalTagihan"},{xtype:"button",iconCls:"x-fa fa-print",ui:"soft-cyan",text:"Cetak Kwitansi",bind:{hidden:"{!viewConfig.cetakKuitansi}"},handler:"onCetakKwitansi"}]}},load:function(ae){var W=this,Z=W.getViewModel(),ac=webservice.app?webservice.app:false,ax=ac?ac.xpriv:false,ap=W.down("kwitansi-form"),S=W.down("[reference=totaltagihan]"),Q=W.down("[reference=totaltagihanhak]"),an=W.down("[reference=totaljaminan]"),al=W.down("[reference=totalsubsidi]"),ah=W.down("[reference=totalpiutang]"),ar=W.down("[reference=totaldiskon]"),ab=W.down("[reference=totaledc]"),Y=W.down("[reference=totaltunai]"),aa=W.down("[reference=totaluangmuka]"),T=W.down("[reference=sisapembayaran]");Z.set("viewConfig.tagihanHak",false);if(ae){var ai=W.getReferensi(ae.data,"KWITANSI_PEMBAYARAN");if(ai){Ext.Array.each(ai,function(e){ap.loadRecord(Ext.create("data.model.KwitansiPembayaran",e));ap.setFormConfig({viewOnly:true})})}var ag=ae.get("TOTAL"),at=ag,am=0,ao=W.hitungTotalJaminan(ae),aw=W.hitungTotalSubsidi(ae),au=W.hitungTotalPiutang(ae),ad=W.hitungTotalDiskon(ae),av=W.hitungTotalEDC(ae),ak=W.hitungTotalUangMuka(ae),aq=W.getPenjamin(ae,2),U=0;R=R<0?0:R;Z.set("tagihan",ae);var aj=ag-ao;if(aq){if(aq.NAIK_KELAS==1){ag=Number(aq.TOTAL_NAIK_KELAS);Z.set("info","<span style='color: maroon'>Tagihan ini menggunakan perhitungan <br/>Selisih (tarif INACBG Naik Kelas - Tarif INACBG Hak Kelas)</span>")}if(aq.NAIK_KELAS_VIP==1){ag=Number(aq.TOTAL_NAIK_KELAS);var V=Number(W.getPropertyConfig("16")),af=W.getPropertyConfig("20")=="TRUE",U=Number(aq.SELISIH_MINIMAL),X=Number(aq.PERSENTASE_TARIF_INACBG_KELAS1);ag+=U;Z.set("info","<span style='color: maroon'>Tagihan ini menggunakan perhitungan <br/>Selisih (tarif INACBG Kelas 1 - Tarif INACBG Hak Kelas) + <br/>"+(V==0||af?"(Tarif INACBG Kelas 1 x "+X+"%)</span>":"((Tarif INACBG Kelas 1 x "+V+"%) >= (Tarif RS - Tarif INACBG Kelas 1) = (Tarif INACBG Kelas 1 x "+V+"%)) </br>((Tarif RS - Tarif INACBG Kelas 1) >= (Tarif INACBG Kelas 1 x 75%) = (Tarif INACBG Kelas 1 x 75%))</br>((Tarif RS - Tarif INACBG Kelas 1) > (Tarif INACBG Kelas 1 x "+V+"%) & <= (Tarif INACBG Kelas 1 x 75%) = (Tarif RS - Tarif INACBG Kelas 1))</span>"))}if(aq.NAIK_DIATAS_VIP==1){if(aq.TOTAL_TAGIHAN_HAK>0){Z.set("viewConfig.tagihanHak",true);am=Number(aq.TOTAL_TAGIHAN_HAK)}Z.set("info","<span style='color: maroon'>Tagihan ini menggunakan perhitungan<br/>(tarifrs - jaminan inacbg hak kelas) = selisih bayar<br/>jika ada selisih bayar maka (jaminan inacbg hak kelas > tagihan hak maka (tarifrs - jaminan inacbg hak kelas))<br/>atau (jaminan inacbg hak kelas < tagihan hak maka (tarifrs - tagihan hak))<br/>subsidi = tagihan hak - jaminan inacbg hak kelas</span>")}if(W.getPropertyConfig("9")=="TRUE"){if(aq.NAIK_KELAS==1||aq.NAIK_KELAS_VIP==1||aq.NAIK_DIATAS_VIP==1){ag=Number(aq.TOTAL_NAIK_KELAS);aw=0;am=0;Z.set("info","<span style='color: maroon'>KEBIJAKAN RS:<br/>Tagihan ini menggunakan perhitungan <br/>Selisih (Total Akomodasi Naik Kelas - Total Akomodasi Hak Kelas)</span>")}}}var R=ag-ao-aw-au-ad-av;R=R<0?0:R;S.setValue(ag);Q.setValue(am);an.setValue(ao);al.setValue(aw);ah.setValue(au);ar.setValue(ad);ab.setValue(av);Y.setValue(R);aa.setValue(ak);T.setValue(R-ak);Z.set("total",R);if(ax){Z.set("viewConfig.cetakKuitansi",ax("121301",false)&&ae.get("STATUS")==1);if(!ax("1201",false)){Z.set("viewConfig.tagihanFinal",false);return}}Z.set("viewConfig.tagihanFinal",ae.get("STATUS")==1)}},hitungTotalJaminan:function(m){var l=0,n=this.getReferensi(m.data,"PENJAMIN_TAGIHAN");if(n){Ext.Array.each(n,function(e){l+=Number(e.TOTAL)})}return l},getPenjamin:function(m,l){var n=this.getReferensi(m.data,"PENJAMIN_TAGIHAN");_penjamin=undefined;if(n){Ext.Array.each(n,function(e){if(e.PENJAMIN==l){_penjamin=e}})}return _penjamin},hitungTotalUangMuka:function(o){var n=0,p=this.getReferensi(o.data,"DEPOSIT"),m=this.getReferensi(o.data,"PENGEMBALIAN_DEPOSIT");if(p){Ext.Array.each(p,function(e){if(e.JENIS==1){n+=Number(e.TOTAL)}else{n-=Number(e.TOTAL)}})}if(m){Ext.Array.each(m,function(e){n-=Number(e.TOTAL)})}return n},hitungTotalPiutang:function(o){var m=0,n=this.getReferensi(o.data,"PIUTANG_PASIEN"),p=this.getReferensi(o.data,"PIUTANG_PERUSAHAAN");if(n){Ext.Array.each(n,function(e){m+=Number(e.TOTAL)})}if(p){Ext.Array.each(p,function(e){m+=Number(e.TOTAL)})}return m},hitungTotalDiskon:function(o){var n=0,m=this.getReferensi(o.data,"DISKON"),p=this.getReferensi(o.data,"DISKON_DOKTER");if(m){Ext.Array.each(m,function(e){n+=(Number(e.ADMINISTRASI)+Number(e.AKOMODASI)+Number(e.SARANA_NON_AKOMODASI)+Number(e.PARAMEDIS))})}if(p){Ext.Array.each(p,function(e){n+=Number(e.TOTAL)})}return n},hitungTotalEDC:function(n){var l=0,m=this.getReferensi(n.data,"EDC");if(m){Ext.Array.each(m,function(e){l+=Number(e.TOTAL)})}return l},hitungTotalSubsidi:function(n){var m=0,l=this.getReferensi(n.data,"SUBSIDI_TAGIHAN");if(l){Ext.Array.each(l,function(e){if(e.STATUS==1){m+=Number(e.TOTAL)}})}return m}},0,["tagihan-info"],["component","box","container","panel","form","com-form","tagihan-info"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"tagihan-info":true},["widget.tagihan-info"],0,[pembayaran.tagihan,"Info"],0));(Ext.cmd.derive("pembayaran.tagihan.InfoController",Ext.app.ViewController,{onHitungUlang:function(s){var w=this,u=w.getView(),q=w.getViewModel(),v=q.get("tagihan"),p=q.get("total"),t=Ext.create("data.model.Tagihan",{ID:v.get("ID")});t.set("HITUNGULANG",1);u.ownerCt.setLoading(true);t.animateTarget=s;t.scope=w;t.showError=true;t.timeout=120000;t.save({callback:function(e,g,f){if(f){u.fireEvent("hitungtagihan")}u.ownerCt.setLoading(false)}})},onFinalTagihan:function(D){var t=this,B=t.getViewModel(),E=t.getView(),C=B.get("tagihan"),x=E.getReferensi(C.data,"PASIEN"),A=E.app,y=A?A.xpriv:false,v=A?(A.trxksr?A.trxksr:false):false;if(!y("1201",false)){E.notifyMessage("Anda tidak memiliki hak akses untuk melakukan Tagihan Final","danger-blue");return}if(!v){E.notifyMessage("Anda belum membuka transaksi kasir / open cashier","danger-blue");return}var z=Ext.create("kunjungan.List",{ui:"panel-cyan",showCloseButton:true,title:"History Kunjungan Pasien "+x.get("NAMA")+"("+x.get("NORM")+")"}),w=true;z.setListConfig({paging:false,hiddenPencarian:true,hiddenLihatAction:true,hiddenFinalAction:false});z.load({TAGIHAN:C.get("ID"),JENIS_KUNJUNGAN:"!3",STATUS:1});z.doAfterLoad=function(l,f,e,g){if(e){if(f.length>0){if(w){w=false;E.openDialog("",true,"90%","70%",z,function(n,m){t.windowDlg=m})}}else{if(t.windowDlg){t.windowDlg.close()}t.finalTagihanPopup(t,E,D)}}else{if(t.windowDlg){t.windowDlg.close()}t.finalTagihanPopup(t,E,D)}}},finalTagihanPopup:function(l,n,m){n.showMessageBox({title:"Finalkan Tagihan",message:"Anda yakin ingin memfinalkan tagihan ini ?",ui:"window-warning",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,defaultButton:"no",animateTarget:m,fn:function(e){if(e==="yes"){l.finalTagihan(m)}}})},finalTagihan:function(s){var v=this,z=v.getViewModel(),t=v.getView(),y=t.app,w=y?(y.trxksr?y.trxksr:false):false,A=z.get("tagihan"),u=z.get("total"),x=Ext.create("data.model.PembayaranTagihan",{TAGIHAN:A.get("ID"),JENIS:1,TUNAI:1,REF:w,TOTAL:u,STATUS:1});t.ownerCt.setLoading(true);s.setDisabled(true);x.animateTarget=s;x.scope=v;x.showError=true;x.save({callback:function(e,g,f){if(f){t.notifyMessage("Tagihan telah di finalkan","danger-blue");z.set("viewConfig.tagihanFinal",false);z.set("pembayaran",x);A.set("STATUS",2);if(u>0){t.showMessageBox({title:"Cetak Kwitansi",message:"Anda ingin mencetak kwitansi ?",ui:"window-cyan",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,defaultButton:"yes",animateTarget:s,fn:function(l){if(l==="yes"){v.onCetakKwitansi()}}})}}t.ownerCt.setLoading(false);s.setDisabled(false)}})},onCetakKwitansi:function(){var o=this,s=o.getView(),p=o.getViewModel(),q=o.getReferences(),n=p.get("tagihan");s.openDialog("",true,100,50,{xtype:"kwitansi-form",title:"Kwitansi",ui:"panel-cyan",showCloseButton:true},function(f,e){kw=e.down("kwitansi-form");kw.setFormConfig({viewOnly:false,cetak:true});kw.createRecord({TAGIHAN:n.get("ID"),STATUS:1});kw.on("cetak",function(g){q.kwitansi.loadRecord(g);e.close()})})},onCetak:function(f){this.cetakRincian(f.rptName)},privates:{cetakRincian:function(y){var q=this,w=q.getView(),v=q.getViewModel().get("tagihan"),u="Word",s="docx",x=true,t="Cetak Rincian";w.showMessageBox({title:t,message:"Tekan tombol Yes/Ya utk cetak langsung<br/>Tekan tombol No/Tidak untuk Preview",ui:"window-cyan",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,defaultButton:"yes",animateTarget:q,fn:function(e){if(e!="yes"){u="Pdf";s="pdf";x=false}w.cetak({NAME:"pembayaran."+y,TYPE:u,EXT:s,PARAMETER:{PTAGIHAN:v.get("ID"),PSTATUS:1},REQUEST_FOR_PRINT:x,PRINT_NAME:"CetakRincian"},function(f){w.printPreview(t,f)})}})}},onInfo:function(o){var m=this,p=m.getView(),n=m.getViewModel();if(n.get("info")==""){p.notifyMessage("Tagihan ini tidak memiliki informasi")}else{p.openWindow({modal:true,title:"Informasi Tagihan",closable:true,maximized:false,width:500,height:250,animateTarget:o,border:false,constrain:m,layout:"fit",header:{iconCls:"x-fa fa-info",margin:0,padding:"10 15 10 15"},items:{xtype:"component",padding:20,html:n.get("info")}})}}},0,0,0,0,["controller.tagihan-info"],0,[pembayaran.tagihan,"InfoController"],0));(Ext.cmd.derive("pembayaran.tagihan.Links",com.Tab,{cls:"x-br-top",ui:"header-tab",items:[{title:"Rincian",xtype:"workspace-rincian",iconCls:"x-fa fa-list-alt"},{title:"Deposit",xtype:"workspace-deposit",listeners:{load:"onReload"},iconCls:"x-fa fa-dollar"},{title:"Penjamin",xtype:"workspace-penjamintagihan",iconCls:"x-fa fa-user-secret"},{title:"Piutang",xtype:"workspace-piutang",iconCls:"x-fa fa-money",listeners:{load:"onReload"}},{title:"Non Tunai / EDC",xtype:"workspace-nontunai",listeners:{load:"onReload"},iconCls:"x-fa fa-credit-card"},{title:"Discount",xtype:"workspace-discount",listeners:{load:"onReload"},iconCls:"x-fa fa-unlink"}],load:function(m){var l=this;var n=l.getActiveTab();if(n){if(n.loadRecord){n.loadRecord(m)}else{if(n.load){n.load(m)}}}}},0,["tagihan-links"],["component","box","container","panel","tabpanel","com-tab","tagihan-links"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"tagihan-links":true},["widget.tagihan-links"],0,[pembayaran.tagihan,"Links"],0));(Ext.cmd.derive("pembayaran.tagihan.List",com.Grid,{controller:"tagihan-list",viewModel:{stores:{store:{type:"tagihan-store"}}},hideHeaders:true,initComponent:function(){var f=this;f.columns=[{xtype:"templatecolumn",flex:2,tpl:new Ext.XTemplate('<div style="font-weight: bold; font-size: 12px; white-space:normal !important;">{[values.ID]} - {[this.tanggalFormat(values.TANGGAL)]}</div>{[this.infoPendaftaranTagihan(values)]}',{tanggalFormat:function(l){var e=Ext.isDate(l)?l:Ext.Date.parse(l,"Y-m-d H:i:s");return Ext.Date.format(e,"d-m-Y H:i:s")},infoPendaftaranTagihan:function(o){var e=f.getReferensi(o,"TAGIHAN_PENDAFTARAN"),p=e?e:[],q='<div style="font-size: 12px; white-space:normal !important;">[FIELD]</div>',s="";Ext.Array.each(p,function(g){var m=f.getReferensi(g,"PENDAFTARAN"),n=m?(m.TUJUAN?m.TUJUAN:null):null,l=n?f.getReferensi(n,"RUANGAN","DESKRIPSI"):"";if(m){l+=" / "+m.NOMOR+" - "+Ext.Date.format(Ext.Date.parse(m.TANGGAL,"Y-m-d H:i:s"),"d-m-Y H:i:s");s+=q.replace("[FIELD]",l)}});return s}})},{xtype:"templatecolumn",flex:1,bind:{hidden:"{!listConfig.pasienInfo}"},tpl:new Ext.XTemplate('<div style="font-weight: bold; font-size: 12px; white-space:normal !important;">{[this.getFormatNorm(values.REFERENSI.PASIEN.NORM)]} </div>','<div style="font-size: 12px; white-space:normal !important;">{[values.REFERENSI.PASIEN.NAMA]}</div>',{getFormatNorm:function(e){var m=Ext.String.leftPad(e,8,"0"),n=Ext.String.insert(Ext.String.insert(Ext.String.insert(m,".",2),".",5),".",8);return n}})},{xtype:"templatecolumn",flex:1,align:"right",tpl:new Ext.XTemplate('<div style="font-weight: bold; font-size: 18px; white-space:normal !important;">{[this.getTotal(values)]} </div>',{getTotal:function(B){var G=Number(B.TOTAL),z=G,K=f.getReferensi(B,"PENJAMIN_TAGIHAN"),F=f.getReferensi(B,"DEPOSIT"),I=f.getReferensi(B,"PENGEMBALIAN_DEPOSIT"),E=f.getReferensi(B,"PIUTANG_PASIEN"),A=f.getReferensi(B,"PIUTANG_PERUSAHAAN"),C=f.getReferensi(B,"DISKON"),e=f.getReferensi(B,"DISKON_DOKTER"),H=f.getReferensi(B,"EDC"),M=f.getReferensi(B,"SUBSIDI_TAGIHAN"),J=null,L=0,D=0;if(K){Ext.Array.each(K,function(g){L+=Number(g.TOTAL);if(g.PENJAMIN==2){J=g}})}if(J){if(J.NAIK_KELAS==1){z=Number(J.TOTAL_NAIK_KELAS)}if(J.NAIK_KELAS_VIP==1){z=Number(J.TOTAL_NAIK_KELAS);z+=Number(J.SELISIH_MINIMAL)}if(f.getPropertyConfig("9")=="TRUE"){if(J.NAIK_KELAS==1||J.NAIK_KELAS_VIP==1||J.NAIK_DIATAS_VIP==1){z=Number(J.TOTAL_NAIK_KELAS);D=0}}}z-=L;if(M){Ext.Array.each(M,function(g){z-=Number(g.TOTAL)})}if(F){Ext.Array.each(F,function(g){if(g.JENIS==1){z-=Number(g.TOTAL)}else{z+=Number(g.TOTAL)}})}if(I){Ext.Array.each(I,function(g){z+=Number(g.TOTAL)})}if(E){Ext.Array.each(E,function(g){z-=Number(g.TOTAL)})}if(A){Ext.Array.each(A,function(g){z-=Number(g.TOTAL)})}if(C){Ext.Array.each(C,function(g){z-=(Number(g.ADMINISTRASI)+Number(g.AKOMODASI)+Number(g.SARANA_NON_AKOMODASI)+Number(g.PARAMEDIS))})}if(e){Ext.Array.each(e,function(g){z-=Number(g.TOTAL)})}if(H){Ext.Array.each(H,function(g){z-=Number(g.TOTAL)})}return Ext.util.Format.number(z<0?0:z,"0,000")}})},{xtype:"widgetcolumn",text:"Status",align:"center",width:60,bind:{hidden:"{!listConfig.view}"},widget:{xtype:"fieldcontainer",defaults:{padding:2},items:[{xtype:"button",text:"View",action:0,margin:"0 1 0 0",handler:"onView"}]}}];com.Grid.prototype.initComponent.call(this)},loadStore:function(f){if(f){if(f.NORM){f.REF=f.NORM;f.JENIS=1;f.STATUS=1;delete f.NORM}this.load(f)}},onBeforeLoad:function(l,m,n){l.setParams({REFERENSI:Ext.JSON.encode({Diskon:true,DiskonDokter:true,EDC:true,PenjaminTagihan:true,PiutangPasien:true,PiutangPerusahaan:true,Deposit:true,PengembalianDeposit:true,KwitansiPembayaran:true,SubsidiTagihan:true,TagihanPendaftaran:{REFERENSI:{Pendaftaran:{REFERENSI:{TujuanPasien:{REFERENSI:{Ruangan:true}}}}}}})})}},0,["tagihan-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","tagihan-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"tagihan-list":true},["widget.tagihan-list"],0,[pembayaran.tagihan,"List"],0));(Ext.cmd.derive("pembayaran.tagihan.ListController",Ext.app.ViewController,{onView:function(n){var m=this,l=n.ownerCt.getWidgetRecord();m.getView().fireEvent("viewtagihan",l)},onSearch:function(){var g=this,l=g.getView();l.openDialog("Pencarian Tagihan",true,300,50,{xtype:"form",title:"Pencarian Nomor Tagihan",bodyPadding:5,items:[{xtype:"search-field",anchor:"100%"}]},function(e,f){var n=f.down("search-field");n.on("search",function(p,m){if(m.trim()!=""){l.setLoading(true);l.loadStore({ID:m});l.onAfterLoad=function(t,v,o,w){if(Ext.isArray(v)){if(v.length>0){f.close()}}}}});n.focus(false,100)})}},0,0,0,0,["controller.tagihan-list"],0,[pembayaran.tagihan,"ListController"],0));(Ext.cmd.derive("pembayaran.tagihan.Workspace",com.Form,{controller:"workspace-tagihan",viewModel:{data:{pasien:undefined,tagihan:undefined,allowBatalFinal:false},formulas:{getNamaLengkap:function(m){var n=m("pasien.GELAR_DEPAN")||"",l=m("pasien.GELAR_BELAKANG")||"";n=n==""?"":n+". ";l=l==""?"":", "+l;return n+m("pasien.NAMA")+l},getFormatNorm:function(g){var l=g("pasien.NORM")||0;if(l>0){return this.toFormatNorm(l)}return""},getFormatTagihan:function(m){var l=m("tagihan.ID")+"",n=l?l.substring(0,6)+"."+l.substring(6):"";return n},getInfoTanggal:function(n){var l=n("tagihan.TANGGAL"),m=l?Ext.Date.format(l,"d F Y H:i:s"):"";return m},isAllowBatalFinal:function(n){var l=n("tagihan.STATUS")==2,m=n("allowBatalFinal");if(!l){return false}return m}},toFormatNorm:function(n){var m=Ext.String.leftPad(n,8,"0"),l=Ext.String.insert(Ext.String.insert(Ext.String.insert(m,".",2),".",5),".",8);return l}},layout:"border",border:false,bind:{title:"Tagihan Pasien An. <b>{getNamaLengkap} - {getFormatNorm}</b>"},header:{itemPosition:1,items:[{xtype:"component",bind:{html:"<strong>No. Tagihan: {getFormatTagihan} / {getInfoTanggal}</strong>"},margin:"0 5 0 0"},{xtype:"button",iconCls:"x-fa fa-chain-broken",tooltip:"Batalkan Final",bind:{hidden:"{!isAllowBatalFinal}"},ui:"soft-red",handler:"onBatalFinal"},{xtype:"button",ui:"soft-asperages",iconCls:"x-fa fa-refresh",tooltip:"Perbarui Data",handler:"onReload"}]},bodyPadding:0,items:[{region:"center",xtype:"tagihan-links",reference:"listtagihanlinks",listeners:{tabchange:"onTabChange"}},{region:"east",title:"Info Tagihan",iconCls:"x-fa fa-list",split:true,collapsible:true,xtype:"tagihan-info",reference:"tagihandetail",listeners:{hitungtagihan:"onHitungTagihan"}}],load:function(s,o){var p=this,t=p.getViewModel(),u=p.app.xpriv("1208"),q=s.get("REFERENSI");t.set("pasien",o);t.set("tagihan",s);if(q){q.PASIEN=o}else{s.set("REFERENSI",{PASIEN:o})}p.down("tagihan-links").load(s);p.down("tagihan-info").load(s);t.set("allowBatalFinal",u)}},0,["workspace-tagihan"],["component","box","container","panel","form","com-form","workspace-tagihan"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-tagihan":true},["widget.workspace-tagihan"],0,[pembayaran.tagihan,"Workspace"],0));(Ext.cmd.derive("pembayaran.tagihan.WorkspaceController",Ext.app.ViewController,{onReload:function(){var o=this,s=this.getView(),p=o.getViewModel(),q=p.get("tagihan"),n=p.get("pasien");s.setLoading(true);(new Ext.util.DelayedTask(function(){if(data.model){data.model.Tagihan.load(q.get("ID"),{callback:function(e,g,f){if(f){s.load(e,n)}s.setLoading(false)}})}})).delay(1500)},onTabChange:function(m,p){var n=this.getViewModel(),o=n.get("tagihan");if(p.loadRecord){p.loadRecord(o)}else{if(p.load){p.load(o)}}},onHitungTagihan:function(){this.onReload()},onBatalFinal:function(q){var u=this,t=u.getView(),o=u.getViewModel(),p=o.get("tagihan"),s=true;if(t.app){s=!t.app.xpriv("1208")}if(s){t.notifyMessage("Anda tidak memiliki Hak Akses untuk melakukan Pembatalan tagihan final!");return}Ext.Msg.show({title:"Pembatalan Tagihan Final",message:"Anda yakin ingin membatalkan tagihan final?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:q,fn:function(e){if(e==="yes"){t.openDialog("",true,100,50,{xtype:"pembatalan-tagihan-form",title:"Pembatalan Tagihan Final"},function(l,f){var g=f.down("pembatalan-tagihan-form");g.on("save",function(m,w,n){u.onReload();f.close()});g.createRecord({TAGIHAN:p.get("ID"),JENIS:1,TANGGAL:t.getSysdate()})})}}})}},0,0,0,0,["controller.workspace-tagihan"],0,[pembayaran.tagihan,"WorkspaceController"],0));(Ext.cmd.derive("pembayaran.tagihan.deposit.Form",com.Form,{controller:"deposit-form",model:"data.model.Deposit",defaults:{allowBlank:false},items:[{xtype:"fieldcontainer",fieldLabel:"Tanggal",layout:{type:"hbox"},defaults:{allowBlank:false},items:[{name:"TANGGAL",reference:"tanggal",flex:1,xtype:"datefield",emptyText:"[Tanggal]",format:"d/m/Y",margin:"0 1 0 0",bind:{readOnly:"{formConfig.viewOnly}",minValue:"{formConfig.minDate}",minValue:"{formConfig.maxDate}"}},{name:"WAKTU",reference:"waktu",width:105,xtype:"timefield",emptyText:"[Jam:Mnt:Dtk]",format:"H:i:s",hideTrigger:true,bind:{readOnly:"{formConfig.viewOnly}"}}]},{xtype:"textfield",anchor:"100%",fieldLabel:"Nama",name:"NAMA",enforceMaxLength:true,maxLength:75,bind:{readOnly:"{formConfig.viewOnly}"},emptyText:"[ Nama ]"},{xtype:"numberfield",textAlign:"right",fieldLabel:"Jumlah",name:"TOTAL",emptyText:"[ Rp. ]",minValue:0,bind:{readOnly:"{formConfig.viewOnly}"},hideTrigger:true}],buttons:[{text:"Simpan",ui:"soft-blue",iconCls:"x-fa fa-save",handler:"onSimpan",bind:{hidden:"{!formConfig.simpan}"},tooltip:{text:"Simpan",mouseOffset:[0,-75]}},{text:"Reset",ui:"soft-red",iconCls:"x-fa fa-refresh",handler:"onReset",bind:{hidden:"{!formConfig.reset}"},tooltip:{text:"Reset",mouseOffset:[0,-75]}}],onLoadRecord:function(m,l){var n=m.down("[name=WAKTU]");n.setValue(l.get("TANGGAL"))},onBeforeGetRecord:function(o,m){var n=Ext.Date.clone(o.down("[reference=tanggal]").getValue()),p=o.down("[reference=waktu]").getValue();n.setHours(p.getHours());n.setMinutes(p.getMinutes());n.setSeconds(p.getSeconds());m.TANGGAL=n}},0,["deposit-form"],["component","box","container","panel","form","com-form","deposit-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"deposit-form":true},["widget.deposit-form"],0,[pembayaran.tagihan.deposit,"Form"],0));(Ext.cmd.derive("pembayaran.tagihan.deposit.FormController",Ext.app.ViewController,{onSimpan:function(m){var l=this,n=l.getView();n.save(m,{},function(g,e,p){if(p){var f="Cetak Kwitansi";n.showMessageBox({title:f,message:"Anda ingin mencetak kwitansi ?",ui:"window-blue",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,defaultButton:"yes",animateTarget:m,fn:function(x){if(x==="yes"){var y="Word",w="docx",v=true,o=g.get("ID");n.showMessageBox({title:f,message:"Tekan tombol Yes/Ya utk cetak langsung<br/>Tekan tombol No/Tidak untuk Preview",ui:"window-cyan",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,defaultButton:"yes",animateTarget:m,fn:function(q){if(q!="yes"){y="Pdf";w="pdf";v=false}n.cetak({NAME:"pembayaran.CetakDeposit",TYPE:y,EXT:w,PARAMETER:{PID:o},REQUEST_FOR_PRINT:v,PRINT_NAME:"CetakKwitansi"},function(s){n.printPreview(f,s)})}})}l.onReset()}})}})},onReset:function(){var m=this,n=this.getView(),l=m.getViewModel().get("record");n.createRecord({TAGIHAN:l.get("TAGIHAN"),JENIS:l.get("JENIS"),TANGGAL:n.getSysdate(),TOTAL:0,STATUS:1});n.focus("NAMA")}},0,0,0,0,["controller.deposit-form"],0,[pembayaran.tagihan.deposit,"FormController"],0));(Ext.cmd.derive("pembayaran.tagihan.deposit.List",com.Grid,{controller:"deposit-list",viewModel:{data:{listConfig:{batal:true}},stores:{store:{type:"deposit-store"}}},border:false,columns:[{xtype:"rownumberer",text:"No",align:"left",width:60},{text:"Jenis Transaksi",dataIndex:"JENIS",width:120,renderer:"onRendererJenis"},{xtype:"datecolumn",text:"Tanggal",dataIndex:"TANGGAL",format:"d/m/Y H:i:s",width:140},{text:"Kasir",dataIndex:"OLEH",flex:1,renderer:"onRendererKasir"},{text:"Pembayar / Penerima",dataIndex:"NAMA",flex:1},{xtype:"numbercolumn",text:"Jumlah",dataIndex:"TOTAL",format:"0,00",align:"right",width:120},{xtype:"numbercolumn",text:"Saldo",format:"0,00",align:"right",width:120,renderer:"onRendererSaldo"},{xtype:"widgetcolumn",align:"center",text:"Status",width:110,hideable:false,hidden:true,widget:{xtype:"fieldcontainer",flex:1,defaults:{padding:2},layout:"fit",items:[{xtype:"button",text:"Batalkan",action:0,handler:"onBatal"},{xtype:"button",text:"Dibatalkan",action:1,ui:"soft-red"}]},onWidgetAttach:"onWidgetAttach"}]},0,["deposit-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","deposit-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"deposit-list":true},["widget.deposit-list"],0,[pembayaran.tagihan.deposit,"List"],0));(Ext.cmd.derive("pembayaran.tagihan.deposit.ListController",Ext.app.ViewController,{onRendererJenis:function(o,q,p){var s=p.get("REFERENSI"),n=s?(s.JENIS?s.JENIS.DESKRIPSI:o):o;return n},onRendererKasir:function(n,p,o){var q=o.get("REFERENSI"),s=q?(q.PENGGUNA?q.PENGGUNA.NAMA:n):n;return s},onRendererSaldo:function(A,u,z,w,s,v){var x=0;for(var y=0;y<=w;y++){var t=v.getAt(y);if(t.get("JENIS")==1&&t.get("STATUS")==1){x+=t.get("TOTAL")}else{if(t.get("STATUS")==1){x-=t.get("TOTAL")}}}return Ext.util.Format.number(x,"0,00")},onWidgetAttach:function(n,s,o){var p=this,q=p.getViewModel().get("listConfig.batal");status=o.get("STATUS"),action0=s.down("[action=0]"),action1=s.down("[action=1]");action0.setHidden(status!=1);action1.setHidden(!(status==0));if(!q){action0.setHidden(true)}},onBatal:function(s){var p=this,t=p.getView(),o=s.ownerCt.getWidgetRecord();if(o){var q=o.get("REFERENSI"),u=q?(q.JENIS?q.JENIS.DESKRIPSI:""):"";o.showError=true;o.animateTarget=s;o.scope=p;t.showMessageBox({title:"Pembatalan "+u+" Deposit",message:"Anda yakin ingin membatalkan "+u+" Deposit ?",ui:"window-warning",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,defaultButton:"yes",animateTarget:s,fn:function(e){if(e==="yes"){o.set("STATUS",0);o.save({callback:function(f,l,g){if(g){t.notifyMessage("Pembatalan "+u+" Deposit berhasil")}else{f.set("STATUS",1)}p.getView().fireEvent("batal")}})}else{o.set("STATUS",1)}}})}}},0,0,0,0,["controller.deposit-list"],0,[pembayaran.tagihan.deposit,"ListController"],0));(Ext.cmd.derive("pembayaran.tagihan.deposit.Workspace",com.Form,{controller:"workspace-deposit",layout:"border",items:[{region:"north",layout:{type:"hbox",align:"stretch"},items:[{xtype:"deposit-form",title:"Penerimaan",flex:1,reference:"penerimaan",listeners:{save:"onReload"},margin:"0 5 0 0"},{xtype:"deposit-form",title:"Pengembalian",flex:1,reference:"pengembalian",listeners:{save:"onReload"}}]},{region:"center",xtype:"deposit-list",reference:"depositlist",listeners:{batal:"onReload"}}],onLoadRecord:function(t,x){var w=t.down("[reference=penerimaan]"),y=t.down("[reference=pengembalian]"),v=t.down("[reference=depositlist]"),u=x.get("STATUS")==1,q=t.app.xpriv("1202")?u:false,s=t.app.xpriv("1203")?u:false;w.setFormConfig({viewOnly:!q,simpan:q,reset:q,minDate:x.get("TANGGAL"),maxDate:t.getSysdate()});w.createRecord({TAGIHAN:x.get("ID"),JENIS:1,TANGGAL:t.getSysdate(),TOTAL:0,STATUS:1});y.setFormConfig({iewOnly:!s,simpan:s,reset:s,minDate:x.get("TANGGAL"),maxDate:t.getSysdate()});y.createRecord({TAGIHAN:x.get("ID"),JENIS:2,TANGGAL:t.getSysdate(),TOTAL:0,STATUS:1});w.focus("TANGGAL");v.setListConfig({paging:true,batal:u});v.load({TAGIHAN:x.get("ID")})}},0,["workspace-deposit"],["component","box","container","panel","form","com-form","workspace-deposit"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-deposit":true},["widget.workspace-deposit"],0,[pembayaran.tagihan.deposit,"Workspace"],0));(Ext.cmd.derive("pembayaran.tagihan.deposit.WorkspaceController",Ext.app.ViewController,{onReload:function(){var f=this.getReferences();f.depositlist.load();this.getView().fireEvent("load")}},0,0,0,0,["controller.workspace-deposit"],0,[pembayaran.tagihan.deposit,"WorkspaceController"],0));(Ext.cmd.derive("pembayaran.tagihan.discount.Workspace",com.Tab,{controller:"workspace-discount",viewModel:{data:{tagihan:undefined}},defaults:{border:false,listeners:{save:"onSimpan"}},items:[{title:"Sarana",xtype:"discountsaranan-form",reference:"discountsarana"},{title:"Dokter",xtype:"workspace-discountdokter",reference:"discountdokter"}],load:function(n){var m=this,o=m.getViewModel(),p=m.getActiveTab();if(p){o.set("tagihan",n);if(p.load){p.load(n)}}},listeners:{tabchange:"onTabChange"}},0,["workspace-discount"],["component","box","container","panel","tabpanel","com-tab","workspace-discount"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"workspace-discount":true},["widget.workspace-discount"],0,[pembayaran.tagihan.discount,"Workspace"],0));(Ext.cmd.derive("pembayaran.tagihan.discount.WorkspaceController",Ext.app.ViewController,{onTabChange:function(m,p){var n=this.getViewModel(),o=n.get("tagihan");if(p.load){p.load(o)}},onSimpan:function(f){this.getView().fireEvent("load")}},0,0,0,0,["controller.workspace-discount"],0,[pembayaran.tagihan.discount,"WorkspaceController"],0));(Ext.cmd.derive("pembayaran.tagihan.discount.dokter.Form",com.Form,{controller:"discountdokter-form",model:"data.model.DiskonDokter",defaults:{border:false,hideLabel:true,allowBlank:false,bind:{readOnly:"{formConfig.viewOnly}"}},header:{items:[{xtype:"button",ui:"soft-red",iconCls:"x-fa fa-file",bind:{hidden:"{!formConfig.simpan}"},margin:"0 1 0 0",handler:"onBaru",tooltip:{text:"Baru",mouseOffset:[0,-75]}},{xtype:"button",ui:"soft-blue",iconCls:"x-fa fa-save",bind:{hidden:"{!formConfig.simpan}"},handler:"onSimpan",tooltip:{text:"Simpan",mouseOffset:[0,-75]}}]},items:[{xtype:"dokter-combo",name:"DOKTER",anchor:"100%"},{xtype:"numberfield",anchor:"100%",hideTrigger:true,emptyText:"TOTAL",name:"TOTAL"}],onLoadRecord:function(p,o){var n=p.down("dokter-combo"),q=o.get("REFERENSI"),s=q?(q.DOKTER?Ext.create("data.model.Dokter",q.DOKTER):null):null;if(s){n.select(s);n.params.ID=s.get("ID");n.load()}}},0,["discountdokter-form"],["component","box","container","panel","form","com-form","discountdokter-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"discountdokter-form":true},["widget.discountdokter-form"],0,[pembayaran.tagihan.discount.dokter,"Form"],0));(Ext.cmd.derive("pembayaran.tagihan.discount.dokter.FormController",Ext.app.ViewController,{onBaru:function(){var m=this,n=m.getView(),l=n.getRecord();n.createRecord({TANGGAL:n.getSysdate(),TAGIHAN:l.get("ID"),STATUS:1});n.focus("DOKTER");n.fireEvent("baru")},onSimpan:function(m){var l=this,n=l.getView();n.setLoading(true);n.save(m,{},function(g,f,e){if(e){n.fireEvent("success",e);l.onBaru()}})}},0,0,0,0,["controller.discountdokter-form"],0,[pembayaran.tagihan.discount.dokter,"FormController"],0));(Ext.cmd.derive("pembayaran.tagihan.discount.dokter.List",com.Grid,{controller:"discount-dokter-list",viewModel:{stores:{store:{type:"diskon-dokter-store"}}},cls:"x-br-top",border:false,reference:"discountList",columns:[{xtype:"rownumberer",text:"No",align:"left",width:60},{text:"Nama Dokter",dataIndex:"DOKTER",flex:1,renderer:"onRendereNama"},{xtype:"numbercolumn",text:"Total",dataIndex:"TOTAL",flex:1,format:"0,00",align:"right"},{xtype:"datecolumn",text:"Tanggal",dataIndex:"TANGGAL",flex:1,format:"d-m-Y H:i:s",align:"center"}]},0,["discount-dokter-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","discount-dokter-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"discount-dokter-list":true},["widget.discount-dokter-list"],0,[pembayaran.tagihan.discount.dokter,"List"],0));(Ext.cmd.derive("pembayaran.tagihan.discount.dokter.ListController",Ext.app.ViewController,{onRendereNama:function(n,p,o){var s=o.get("REFERENSI"),q=s?(s.DOKTER?s.DOKTER.NAMA:""):"";return q}},0,0,0,0,["controller.discount-dokter-list"],0,[pembayaran.tagihan.discount.dokter,"ListController"],0));(Ext.cmd.derive("pembayaran.tagihan.discount.dokter.Workspace",com.Form,{controller:"workspace-discountdokter",layout:"border",items:[{region:"east",title:"Form",width:300,split:true,collapsible:true,iconCls:"x-fa fa-file-o",xtype:"discountdokter-form",border:false,reference:"discountform",listeners:{save:"onSuccess",baru:"onBaru"}},{region:"center",title:"List",iconCls:"x-fa fa-server",xtype:"discount-dokter-list",border:false,reference:"discountlist",listeners:{select:"onSelect"}}],load:function(u){var p=this,o=this.down("discount-dokter-list"),q=this.down("discountdokter-form");if(u){var t=u.get("STATUS")==1,s=p.app.xpriv("1207")?t:false;q.setFormConfig({viewOnly:!s,simpan:s});o.loadStore({TAGIHAN:u.get("ID")});q.createRecord({TANGGAL:p.getSysdate(),TAGIHAN:u.get("ID"),STATUS:1})}}},0,["workspace-discountdokter"],["component","box","container","panel","form","com-form","workspace-discountdokter"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-discountdokter":true},["widget.workspace-discountdokter"],0,[pembayaran.tagihan.discount.dokter,"Workspace"],0));(Ext.cmd.derive("pembayaran.tagihan.discount.dokter.WorkspaceController",Ext.app.ViewController,{onSuccess:function(n){var p=this,s=p.getView(),q=p.getReferences(),o=q.discountlist;o.reload();s.fireEvent("save",n)},onBaru:function(){var g=this,l=g.getReferences();l.discountlist.getSelectionModel().deselect(l.discountlist.getSelection())},onSelect:function(o,m){var n=this,p=n.getReferences();if(m){p.discountform.loadRecord(m)}}},0,0,0,0,["controller.workspace-discountdokter"],0,[pembayaran.tagihan.discount.dokter,"WorkspaceController"],0));(Ext.cmd.derive("pembayaran.tagihan.discount.sarana.Form",com.Form,{controller:"discountsaranan-form",viewModel:{stores:{store:{type:"diskon-store"}},formulas:{getTotal:function(s){var u=s("record.ADMINISTRASI"),t=s("record.AKOMODASI"),q=s("record.SARANA_NON_AKOMODASI"),p=s("record.PARAMEDIS"),o=u+t+q+p;return o}}},model:"data.model.Diskon",border:false,fieldDefaults:{labelAlign:"top"},layout:{type:"vbox",align:"stretch"},title:"Form",iconCls:"x-fa fa-file-o",border:false,items:[{layout:"hbox",defaults:{flex:1,margin:"2 2 2 2",bind:{readOnly:"{formConfig.viewOnly}"},border:false},bodyPadding:10,border:false,items:[{xtype:"numberfield",hideTrigger:true,reference:"administrasi",fieldLabel:"ADMINISTRASI",name:"ADMINISTRASI",bind:{value:"{record.ADMINISTRASI}"}},{xtype:"numberfield",hideTrigger:true,reference:"akomodasi",fieldLabel:"AKOMODASI",name:"AKOMODASI",bind:{value:"{record.AKOMODASI}"}}]},{layout:"hbox",defaults:{flex:1,margin:"2 2 2 2",border:false,bind:{readOnly:"{formConfig.viewOnly}"}},bodyPadding:10,border:false,items:[{xtype:"numberfield",hideTrigger:true,reference:"sarana",fieldLabel:"SARANA NON AKOMODASI",name:"SARANA_NON_AKOMODASI",bind:{value:"{record.SARANA_NON_AKOMODASI}"}},{xtype:"numberfield",hideTrigger:true,reference:"paramedis",fieldLabel:"PARAMEDIS",name:"PARAMEDIS",bind:{value:"{record.PARAMEDIS}"}}]},{xtype:"headervalue",fontSize:"25px",title:"Total Diskon:",paddingText:"7px 0 0 0",height:65,reference:"total",bind:{value:"{getTotal}"}}],buttons:[{text:"Simpan",ui:"soft-blue",iconCls:"x-fa fa-save",handler:"onSimpan",bind:{hidden:"{!formConfig.simpan}"},tooltip:{text:"Simpan",mouseOffset:[0,-75]}}],load:function(o){var u=this,p=u.getViewModel(),s=p.get("store");if(o){var t=o.get("STATUS")==1,q=u.app.xpriv("1207")?t:false;u.setFormConfig({viewOnly:!q,simpan:q});s.queryParams={TAGIHAN:o.get("ID")},s.load({callback:function(e,l,f){if(f){u.loadRecord(e[0])}else{var g={TAGIHAN:o.get("ID"),TANGGAL:u.getSysdate(),STATUS:1};u.createRecord(g)}}})}}},0,["discountsaranan-form"],["component","box","container","panel","form","com-form","discountsaranan-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"discountsaranan-form":true},["widget.discountsaranan-form"],0,[pembayaran.tagihan.discount.sarana,"Form"],0));(Ext.cmd.derive("pembayaran.tagihan.discount.sarana.FormController",Ext.app.ViewController,{onSimpan:function(m){var l=this,n=l.getView();n.save(m)}},0,0,0,0,["controller.discountsaranan-form"],0,[pembayaran.tagihan.discount.sarana,"FormController"],0));(Ext.cmd.derive("pembayaran.tagihan.discount.tenagamedis.List",com.Grid,{controller:"discount-tenagamedis-list",viewModel:{data:{listConfig:{add:false}},stores:{store:{type:"discount-tenagamedis-store"}}},header:{items:[{xtype:"search-field",emptyText:"[Cari Tenaga Medis]",flex:1,listeners:{search:"onSearch",clear:"onClear"}},{xtype:"button",iconCls:"x-fa fa-plus",tooltip:"Tambah Baru",margin:"0 0 0 1",handler:"onAdd",bind:{hidden:"{!listConfig.add}"}}]},actions:{edit:{iconCls:"x-fa fa-pencil-square-o",tooltip:"Edit",handler:"onEdit"}},columns:[{xtype:"rownumberer",text:"No",width:60},{xtype:"templatecolumn",text:"Tindakan",align:"left",menuDisabled:true,sortable:false,flex:1,tpl:'<div style="white-space:normal !important;">{REFERENSI.TINDAKAN_MEDIS.REFERENSI.TINDAKAN.NAMA}</div>'},{xtype:"templatecolumn",text:"Jenis",align:"left",menuDisabled:true,sortable:false,flex:1,tpl:'<div style="white-space:normal !important;">{REFERENSI.JENIS.DESKRIPSI}</div>'},{xtype:"templatecolumn",text:"Nama",align:"left",menuDisabled:true,sortable:false,bind:{hidden:"{listConfig.phoneMode}"},flex:1,tpl:'<div style="white-space:normal !important;">{REFERENSI.TENAGA_MEDIS.NAMA}</div>'},{xtype:"datecolumn",text:"Tanggal",dataIndex:"TANGGAL",format:"d-m-Y H:i:s",menuDisabled:true,sortable:false,align:"center",width:140},{xtype:"templatecolumn",text:"Status",align:"left",menuDisabled:true,sortable:false,width:150,tpl:'<div style="white-space:normal !important;">{REFERENSI.STATUS.DESKRIPSI}</div>'},{text:"#",xtype:"actioncolumn",align:"center",menuDisabled:true,sortable:false,width:50,items:["@edit"]}]},0,["discount-tenagamedis-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","discount-tenagamedis-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"discount-tenagamedis-list":true},["widget.discount-tenagamedis-list"],0,[pembayaran.tagihan.discount.tenagamedis,"List"],0));(Ext.cmd.derive("pembayaran.tagihan.discount.tenagamedis.ListController",Ext.app.ViewController,{},0,0,0,0,["controller.discount-tenagamedis-list"],0,[pembayaran.tagihan.discount.tenagamedis,"ListController"],0));(Ext.cmd.derive("pembayaran.tagihan.discount.tenagamedis.Workspace",com.Form,{controller:"workspace-discountenagamedis",layout:"fit",items:[{title:"Daftar Diskon",iconCls:"x-fa fa-list",xtype:"discount-tenagamedis-list"}],load:function(m){var o=this,n=this.down("discount-tenagamedis-list");if(m){var p=m.get("STATUS")==1;n.loadStore({TAGIHAN:m.get("ID")})}}},0,["workspace-discountenagamedis"],["component","box","container","panel","form","com-form","workspace-discountenagamedis"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-discountenagamedis":true},["widget.workspace-discountenagamedis"],0,[pembayaran.tagihan.discount.tenagamedis,"Workspace"],0));(Ext.cmd.derive("pembayaran.tagihan.discount.tenagamedis.WorkspaceController",Ext.app.ViewController,{},0,0,0,0,["controller.workspace-discountenagamedis"],0,[pembayaran.tagihan.discount.tenagamedis,"WorkspaceController"],0));(Ext.cmd.derive("pembayaran.tagihan.gabung.Workspace",com.Form,{controller:"workspace-gabung-tagihan",model:"data.model.GabungTagihan",layout:{type:"hbox",align:"stretch"},items:[{title:"Sumber",xtype:"tagihan-list",reference:"sumber",flex:1},{xtype:"title",iconCls:"x-fa fa-arrow-right",style:"font-size: 30px",textAlign:"center",padding:"0 0 0 13",width:50},{title:"Tujuan",xtype:"tagihan-list",reference:"tujuan",flex:1}],buttons:[{text:"Gabungkan",handler:"onGabungkan"}],onLoadRecord:function(t,y){var s=t.down("[reference=sumber]"),v=t.down("[reference=tujuan]"),A=y.get("REFERENSI")?y.get("REFERENSI"):null,x=A?(A.DARI?A.DARI:null):null,u=A?(A.KE?A.KE:null):null,z={view:false,pasienInfo:true};if(x){s.setListConfig(z);s.getStore().loadData([x])}if(u){v.setListConfig(z);v.getStore().loadData([u])}else{var w=v.getHeader();w.addTool({type:"search",callback:"onSearch"});v.setListConfig(z)}}},0,["workspace-gabung-tagihan"],["component","box","container","panel","form","com-form","workspace-gabung-tagihan"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-gabung-tagihan":true},["widget.workspace-gabung-tagihan"],0,[pembayaran.tagihan.gabung,"Workspace"],0));(Ext.cmd.derive("pembayaran.tagihan.gabung.WorkspaceController",Ext.app.ViewController,{onGabungkan:function(q){var p=this,u=p.getView(),t=p.getReferences(),w=u.getRecord();if(t.tujuan.getStore().getCount()==0){u.notifyMessage("Anda memilih tujuan tagihan","danger-blue");return}if(t.sumber.getStore().getCount()>0&&t.tujuan.getStore().getCount()>0){var v=t.sumber.getStore().getAt(0),s=t.tujuan.getStore().getAt(0);if(v.get("ID")==s.get("ID")){u.notifyMessage("ID Tagihan sumber & tujuan tidak boleh sama","danger-blue");return}w.set("KE",s.get("ID"))}Ext.Msg.show({title:"Penggabungan Tagihan",message:"Anda yakin ingin melakukan penggabungan tagihan?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:q,fn:function(e){if(e==="yes"){delete w.data.REFERENSI;u.setLoading(true);u.save({success:"Tagihan telah digabungkan"})}}})}},0,0,0,0,["controller.workspace-gabung-tagihan"],0,[pembayaran.tagihan.gabung,"WorkspaceController"],0));(Ext.cmd.derive("pembayaran.tagihan.kwitansi.Form",com.Form,{controller:"kwitansi-form",title:"Form Kwitansi",model:"data.model.KwitansiPembayaran",defaultType:"textfield",border:false,viewModel:{data:{params:undefined}},defaults:{enforceMaxLength:true,readOnly:true,anchor:"100%",allowBlank:false,bind:{readOnly:"{formConfig.viewOnly}"},margin:"0 0 1 0"},header:{items:[{xtype:"button",iconCls:"x-fa fa-print",hidden:true,bind:{hidden:"{!formConfig.cetak}"},ui:"soft-cyan",handler:"onCetak"}]},items:[{emptyText:"[ No. Kwitansi ]",name:"NOMOR",maxLength:15},{emptyText:"[ Nama Pembayar ]",name:"NAMA",maxLength:75}],setParamReport:function(l){var m=this,n=m.getViewModel();if(l){n.set("params",l)}}},0,["kwitansi-form"],["component","box","container","panel","form","com-form","kwitansi-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"kwitansi-form":true},["widget.kwitansi-form"],0,[pembayaran.tagihan.kwitansi,"Form"],0));(Ext.cmd.derive("pembayaran.tagihan.kwitansi.FormController",Ext.app.ViewController,{onCetak:function(o){var m=this,p=m.getView(),n=m.getViewModel();p.save(o,{},function(f,u,g){if(g){var e="Word",v="docx",l=true,w="Cetak Kwitansi";p.showMessageBox({title:w,message:"Tekan tombol Yes/Ya utk cetak langsung<br/>Tekan tombol No/Tidak untuk Preview",ui:"window-warning",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,defaultButton:"yes",animateTarget:o,fn:function(t){if(t!="yes"){e="Pdf";v="pdf";l=false}var q={PTAGIHAN:f.get("TAGIHAN"),PJENIS:1},y=n.get("params"),s="pembayaran.CetakKwitansi";if(y){s=y.name;q=y.params}p.cetak({NAME:s,TYPE:e,EXT:v,PARAMETER:q,REQUEST_FOR_PRINT:l,PRINT_NAME:"CetakKwitansi"},function(x){p.printPreview(w,x)});p.fireEvent("cetak",f)}})}})}},0,0,0,0,["controller.kwitansi-form"],0,[pembayaran.tagihan.kwitansi,"FormController"],0));(Ext.cmd.derive("pembayaran.tagihan.nontunai.Form",com.Form,{controller:"nontunai-form",model:"data.model.Edc",items:[{xtype:"fieldcontainer",flex:1,layout:{type:"hbox",align:"stretch"},items:[{flex:1,layout:{type:"vbox",align:"stretch"},defaults:{allowBlank:false,bind:{readOnly:"{formConfig.viewOnly}"}},items:[{xtype:"radiogroup",fieldLabel:"Jenis Kartu",columns:2,defaults:{allowBlank:false},name:"JENIS_KARTU",layout:{autoFlex:false},defaults:{margin:"0 15 0 0"},items:[{boxLabel:"Master Card",checked:true,inputValue:"1"},{boxLabel:"Visa",inputValue:"2"}]},{xtype:"textfield",fieldLabel:"No. Kartu",name:"NOMOR",emptyText:"[ Nomor Kartu ]",enforceMaxLength:true,maxLength:25},{xtype:"textfield",fieldLabel:"Nama Pemilik Kartu",name:"PEMILIK",emptyText:"[ Nama Pemilik Kartu ]",enforceMaxLength:true,maxLength:75},{xtype:"referensi-combo",params:{JENIS:16},name:"BANK",flex:1,monitorTab:true,selectOnTab:true,editable:true,firstLoad:true,margin:"2 2 1 1",fieldLabel:"Bank Penerbit",name:"BANK",emptyText:"[Bank]"}]},{flex:1,layout:{type:"vbox",align:"stretch"},margin:"0 0 0 20",defaults:{allowBlank:false},items:[{xtype:"textfield",fieldLabel:"Kode Aprove",name:"APRV_CODE",bind:{readOnly:"{formConfig.viewOnly}"},emptyText:"[ Kode Aprove ]"},{xtype:"numberfield",textAlign:"right",fieldLabel:"Total",name:"TOTAL",emptyText:"[ Rp. ]",minValue:0,hideTrigger:true,bind:{readOnly:"{formConfig.viewOnly}"},allowBlank:false},{xtype:"fieldcontainer",fieldLabel:"Tanggal",layout:{type:"hbox"},defaults:{allowBlank:false},items:[{name:"TANGGAL",reference:"tanggal",flex:1,xtype:"datefield",emptyText:"[Tanggal]",format:"d/m/Y",margin:"0 1 0 0",bind:{readOnly:"{formConfig.viewOnly}",minValue:"{formConfig.minDate}",maxValue:"{formConfig.maxDate}"}},{name:"WAKTU",reference:"waktu",width:105,xtype:"timefield",emptyText:"[Jam:Mnt:Dtk]",format:"H:i:s",hideTrigger:true,bind:{readOnly:"{formConfig.viewOnly}"}}]}]}]}],buttons:[{text:"Simpan",ui:"soft-blue",iconCls:"x-fa fa-save",handler:"onSimpan",bind:{hidden:"{!formConfig.simpan}"},tooltip:{text:"Simpan",mouseOffset:[0,-75]}},{text:"Reset",ui:"soft-red",iconCls:"x-fa fa-refresh",handler:"onReset",bind:{hidden:"{!formConfig.reset}"},tooltip:{text:"Reset",mouseOffset:[0,-75]}}],onLoadRecord:function(m,l){var n=m.down("[name=WAKTU]");n.setValue(l.get("TANGGAL"))},onBeforeGetRecord:function(o,m){var n=Ext.Date.clone(o.down("[reference=tanggal]").getValue()),p=o.down("[reference=waktu]").getValue();n.setHours(p.getHours());n.setMinutes(p.getMinutes());n.setSeconds(p.getSeconds());m.TANGGAL=n}},0,["nontunai-form"],["component","box","container","panel","form","com-form","nontunai-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"nontunai-form":true},["widget.nontunai-form"],0,[pembayaran.tagihan.nontunai,"Form"],0));(Ext.cmd.derive("pembayaran.tagihan.nontunai.FormController",Ext.app.ViewController,{onReset:function(){var f=this;view=f.getView(),rec=f.getViewModel().get("record");view.createRecord({TAGIHAN:rec.get("TAGIHAN"),TOTAL:0,TANGGAL:view.getSysdate(),STATUS:1});view.focus("NOMOR")},onSimpan:function(g){var m=this,n=m.getView();n.save(g,{},function(l,f,e){m.onReset()})}},0,0,0,0,["controller.nontunai-form"],0,[pembayaran.tagihan.nontunai,"FormController"],0));(Ext.cmd.derive("pembayaran.tagihan.nontunai.List",com.Grid,{controller:"nontunai-list",viewModel:{stores:{store:{type:"edc-store"}},data:{listConfig:{batal:true}}},border:false,cls:"x-br-top",columns:[{xtype:"rownumberer",text:"No",align:"left",width:60},{text:"Jenis Kartu",width:100,dataIndex:"JENIS_KARTU",renderer:"onRendererJenisKartu"},{text:"Nama Pemilik Kartu",flex:2,dataIndex:"PEMILIK"},{text:"No. Kartu",width:200,dataIndex:"NOMOR"},{text:"Bank Penerbit",flex:2,dataIndex:"BANK",renderer:"onRendererBank"},{text:"Kode Aprove",flex:1,dataIndex:"APRV_CODE"},{xtype:"numbercolumn",text:"Total",format:"0,00",align:"right",width:120,dataIndex:"TOTAL"},{xtype:"widgetcolumn",align:"center",text:"Action",width:110,hideable:false,hidden:true,bind:{hidden:"{!listConfig.status}"},widget:{xtype:"fieldcontainer",flex:1,defaults:{padding:2},layout:"fit",items:[{xtype:"button",text:"Batalkan",action:0,handler:"onBatal"},{xtype:"button",text:"Dibatalkan",action:1,ui:"soft-red"}]},onWidgetAttach:"onWidgetAttach"},{text:"Kwitansi",width:110,xtype:"widgetcolumn",widget:{xtype:"button",text:"Cetak",listeners:{click:"onCetakKwitansi"}}}]},0,["nontunai-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","nontunai-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"nontunai-list":true},["widget.nontunai-list"],0,[pembayaran.tagihan.nontunai,"List"],0));(Ext.cmd.derive("pembayaran.tagihan.nontunai.ListController",Ext.app.ViewController,{onRendererBank:function(n,p,o){var q=o.get("REFERENSI"),s=q?(q.BANK?q.BANK[0].DESKRIPSI:""):"";return s},onRendererJenisKartu:function(n,p,o){var q=o.get("REFERENSI"),s=q?(q.JENIS_KARTU?q.JENIS_KARTU[0].DESKRIPSI:""):"";switch(n){case 1:return"Master Card";case 2:return"Visa"}return s},onWidgetAttach:function(n,s,o){var p=this,q=p.getViewModel().get("listConfig.batal");status=o.get("STATUS"),action0=s.down("[action=0]"),action1=s.down("[action=1]");action0.setHidden(status!=1);action1.setHidden(!(status==0));if(!q){action0.setHidden(true)}},onBatal:function(s){var p=this,t=p.getView(),o=s.ownerCt.getWidgetRecord();if(o){var q=o.get("REFERENSI"),u=q?(q.JENIS?q.JENIS.DESKRIPSI:""):"";o.showError=true;o.animateTarget=s;o.scope=p;t.showMessageBox({title:"Pembatalan EDC",message:"Anda yakin ingin membatalkan EDC ?",ui:"window-warning",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,defaultButton:"no",animateTarget:s,fn:function(e){if(e==="yes"){o.set("STATUS",0);o.save({callback:function(f,l,g){if(g){t.notifyMessage("Pembatalan EDC berhasil")}else{f.set("STATUS",1)}p.getView().fireEvent("batal")}})}else{o.set("STATUS",1)}}})}},onCetakKwitansi:function(n){var o=this,q=o.getView(),p=o.getReferences(),s=n.getWidgetRecord();q.openDialog("",true,100,50,{xtype:"kwitansi-form",title:"Kwitansi",ui:"panel-cyan",showCloseButton:true},function(f,e){kw=e.down("kwitansi-form");kw.setFormConfig({hidden:true,cetak:true});kw.createRecord({TAGIHAN:s.get("TAGIHAN"),TUNAI:0,STATUS:1});kw.setParamReport({name:"pembayaran.CetakKwitansiEdc",params:{PTAGIHAN:s.get("TAGIHAN"),PBANK:s.get("BANK"),PJENIS_KARTU:s.get("JENIS_KARTU"),PNOMOR:s.get("NOMOR")}});kw.on("cetak",function(g){e.close()})})}},0,0,0,0,["controller.nontunai-list"],0,[pembayaran.tagihan.nontunai,"ListController"],0));(Ext.cmd.derive("pembayaran.tagihan.nontunai.Workspace",com.Form,{controller:"workspace-nontunai",layout:"border",items:[{region:"north",xtype:"nontunai-form",reference:"nontunaiform",listeners:{save:"onReload"}},{region:"center",xtype:"nontunai-list",flex:1,reference:"nontunailist",listeners:{select:"onSelect",batal:"onReload"}}],onLoadRecord:function(o,u){var s=o.down("[reference=nontunaiform]"),q=o.down("[reference=nontunailist]"),t=u.get("STATUS")==1,p=o.app.xpriv("1206")?t:false;s.setFormConfig({viewOnly:!p,simpan:p,reset:p,minDate:u.get("TANGGAL"),maxDate:o.getSysdate()});s.createRecord({TAGIHAN:u.get("ID"),TOTAL:0,TANGGAL:o.getSysdate(),STATUS:1});s.focus("NOMOR");q.setListConfig({batal:t});q.load({TAGIHAN:u.get("ID")})}},0,["workspace-nontunai"],["component","box","container","panel","form","com-form","workspace-nontunai"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-nontunai":true},["widget.workspace-nontunai"],0,[pembayaran.tagihan.nontunai,"Workspace"],0));(Ext.cmd.derive("pembayaran.tagihan.nontunai.WorkspaceController",Ext.app.ViewController,{onSelect:function(o,m){var n=this,p=n.getReferences();p.nontunaiform.loadRecord(m)},onReload:function(){var f=this.getReferences();f.nontunailist.load();this.getView().fireEvent("load")}},0,0,0,0,["controller.workspace-nontunai"],0,[pembayaran.tagihan.nontunai,"WorkspaceController"],0));(Ext.cmd.derive("pembayaran.tagihan.pembatalan.Form",com.Form,{controller:"pembatalan-tagihan-form",model:"pembayaran.tagihan.pembatalan.Model",bodyPadding:5,layout:"fit",items:[{xtype:"referensi-combo",name:"JENIS",params:{JENIS:57},firstLoad:true,allowBlank:false,editable:false,emptyText:"[Jenis Pembatalan]"}],buttons:[{text:"Batalkan",ui:"soft-blue",iconCls:"x-fa fa-minus-circle",handler:"onBatalkan"}]},0,["pembatalan-tagihan-form"],["component","box","container","panel","form","com-form","pembatalan-tagihan-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"pembatalan-tagihan-form":true},["widget.pembatalan-tagihan-form"],0,[pembayaran.tagihan.pembatalan,"Form"],0));(Ext.cmd.derive("pembayaran.tagihan.pembatalan.FormController",Ext.app.ViewController,{onBatalkan:function(g){var m=this,n=m.getView();n.save(g,{success:"Tagihan Final telah dibatalkan"})}},0,0,0,0,["controller.pembatalan-tagihan-form"],0,[pembayaran.tagihan.pembatalan,"FormController"],0));(Ext.cmd.derive("pembayaran.tagihan.penjamin.List",com.Grid,{controller:"penjamintagihan-list",viewModel:{stores:{store:{type:"penjamin-tagihan-store"}}},border:false,columns:[{text:"Penjamin",dataIndex:"PENJAMIN",flex:1,renderer:"onRendererPenjamin"},{text:"Ke",dataIndex:"KE",flex:1,hidden:true},{xtype:"numbercolumn",text:"Total",dataIndex:"TOTAL",width:100,align:"right",format:"0,000"}]},0,["penjamintagihan-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","penjamintagihan-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"penjamintagihan-list":true},["widget.penjamintagihan-list"],0,[pembayaran.tagihan.penjamin,"List"],0));(Ext.cmd.derive("pembayaran.tagihan.penjamin.ListController",Ext.app.ViewController,{onRendererPenjamin:function(n,p,o){var q=o.get("REFERENSI"),s=q?q.PENJAMIN:null;if(s){return s.DESKRIPSI}return n}},0,0,0,0,["controller.penjamintagihan-list"],0,[pembayaran.tagihan.penjamin,"ListController"],0));(Ext.cmd.derive("pembayaran.tagihan.penjamin.Workspace",com.Form,{layout:"border",items:[{region:"center",xtype:"penjamintagihan-list",reference:"penjamintagihanlist"}],onLoadRecord:function(m,l){var n=m.down("penjamintagihan-list");n.load({TAGIHAN:l.get("ID")})}},0,["workspace-penjamintagihan"],["component","box","container","panel","form","com-form","workspace-penjamintagihan"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-penjamintagihan":true},["widget.workspace-penjamintagihan"],0,[pembayaran.tagihan.penjamin,"Workspace"],0));(Ext.cmd.derive("pembayaran.tagihan.penjualan.Info",com.Form,{controller:"tagihan-penjualan-info",viewModel:{stores:{PNonTunai:{type:"pembayaran-tagihan-store"},pengunjung:{type:"penjualan-store"}},data:{tagihan:undefined,id_tagihan:undefined,total:0,nama:undefined,totaledc:0,viewConfig:{tagihanFinal:false}},formulas:{getSisaBayar:function(o){var m=o("total"),p=o("totaledc"),n=m-p;return n}}},layout:{type:"vbox",align:"stretch"},bodyPadding:5,defaults:{margin:5},fieldDefaults:{labelAlign:"top"},border:true,items:[{xtype:"button",text:"Cetak Rincian",reference:"btnprintrincian",tooltip:"Cetak Rincian",iconCls:"x-fa fa-print",handler:"onCetakRincianPenjualan"},{fieldLabel:"No.Tagihan",name:"TAGIHAN",xtype:"textfield",readOnly:true,bind:"{id_tagihan}"},{fieldLabel:"Nama",xtype:"textfield",readOnly:true,bind:"{nama}"},{fieldLabel:"Total Tagihan",name:"TOTAL",xtype:"textfield",readOnly:true,bind:"{total}"},{fieldLabel:"Total Pembayaran Non Tunai",xtype:"textfield",readOnly:true,bind:"{totaledc}"},{fieldLabel:"Sisa Pembayaran",name:"SISA_PEMBAYARAN",xtype:"textfield",readOnly:true,bind:{value:"{getSisaBayar}"}},{fieldLabel:"Kwitansi",name:"KWITANSI",xtype:"textfield",emptyText:"No.Kwitansi"},{name:"NAMA_PEMBAYAR",xtype:"textfield",emptyText:"Nama Pembayar"}],buttons:[{text:"Final Tagihan",reference:"btnfinaltagihanpenjualan",tooltip:"Selesai",flex:1,iconCls:"x-fa fa-save",handler:"onFinalTagihanPenjualan",hidden:true,bind:{hidden:"{!viewConfig.tagihanFinal}"}}],load:function(n){var o=this,p=o.getViewModel(),s=p.get("PNonTunai"),q=p.get("pengunjung");if(n){p.set("tagihan",n);p.set("total",n.get("TOTAL"));p.set("id_tagihan",n.get("ID"));p.set("viewConfig.tagihanFinal",n.get("STATUS")==1);q.removeAll();q.setQueryParams({NOMOR:n.get("ID")});q.load({callback:function(e){if(e.length>0){p.set("nama",e[0].get("PENGUNJUNG"))}}});s.removeAll();s.setQueryParams({TAGIHAN:n.get("ID")});s.load({callback:function(e){if(e.length>0){p.set("totaledc",e[0].get("TOTAL"))}}})}}},0,["tagihan-penjualan-info"],["component","box","container","panel","form","com-form","tagihan-penjualan-info"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"tagihan-penjualan-info":true},["widget.tagihan-penjualan-info"],0,[pembayaran.tagihan.penjualan,"Info"],0));(Ext.cmd.derive("pembayaran.tagihan.penjualan.InfoController",Ext.app.ViewController,{onFinalTagihanPenjualan:function(s){var q=this,t=q.getView(),u=t.app,o=u?u.xpriv:false,p=u?(u.trxksr?u.trxksr:false):false;if(!o("1201",false)){t.notifyMessage("Anda tidak memiliki hak akses untuk melakukan Tagihan Final","danger-blue");return}if(!p){t.notifyMessage("Anda belum membuka transaksi kasir / open cashier","danger-blue");return}t.showMessageBox({title:"Finalkan Tagihan",message:"Anda yakin ingin memfinalkan tagihan ini ?",ui:"window-warning",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,defaultButton:"no",animateTarget:s,fn:function(e){if(e==="yes"){q.finalTagihanPenjualan(s)}}})},finalTagihanPenjualan:function(F){var t=this,H=t.getView(),B=t.getViewModel(),C=B.get("tagihan"),A=H.app,x=A?(A.trxksr?A.trxksr:false):false,D=H.getForm().getValues(),I=D.TOTAL,y=D.TAGIHAN,E=D.NAMA_PEMBAYAR,G=Ext.create("data.model.KwitansiPembayaran",{TAGIHAN:D.TAGIHAN,NOMOR:D.KWITANSI,NAMA:D.NAMA_PEMBAYAR}),z=Ext.create("data.model.PembayaranTagihan",{TAGIHAN:D.TAGIHAN,JENIS:8,REF:x,TOTAL:D.SISA_PEMBAYARAN,STATUS:1});F.setDisabled(true);G.animateTarget=F;G.scope=t;G.showError=true;G.save({callback:function(g,f,e){if(e){z.animateTarget=F;z.scope=t;z.showError=true;z.save({callback:function(n,m,l){if(l){H.setLoading(false);B.set("viewConfig.tagihanFinal",false);C.set("STATUS",2);H.notifyMessage("Tagihan telah di finalkan");if(I){H.showMessageBox({title:"Cetak Kwitansi",message:"Anda ingin mencetak kwitansi ?",ui:"window-cyan",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,defaultButton:"yes",animateTarget:F,fn:function(o){if(o==="yes"){t.onCetakKwitansi(y)}}})}H.fireEvent("suksesfinaltagihan",C)}F.setDisabled(false)}})}else{F.setDisabled(false)}}})},onCetakKwitansi:function(m){var l=this,n=l.getView();n.cetak({NAME:"pembayaran.CetakKwitansiPenjualan",TYPE:"Word",EXT:"docx",PARAMETER:{PTAGIHAN:m,PJENIS:4},REQUEST_FOR_PRINT:true,PRINT_NAME:"CetakKwitansiPenjualan"})},onCetakRekapPenjualan:function(){this.cetakRincian(2)},onCetakRincianPenjualan:function(){this.cetakRincian(1)},privates:{cetakRincian:function(t){var y=this,w=y.getView(),v=y.getViewModel().get("tagihan"),u="Word",q="docx",x=true,s="Cetak Rincian";w.showMessageBox({title:s,message:"Tekan tombol Yes/Ya utk cetak langsung<br/>Tekan tombol No/Tidak untuk Preview",ui:"window-cyan",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,defaultButton:"yes",animateTarget:y,fn:function(e){if(e!="yes"){u="Pdf";q="pdf";x=false}w.cetak({NAME:"pembayaran."+(t==1?"CetakRincianPenjualan":"CetakRekapRincianPenjualan"),TYPE:u,EXT:q,PARAMETER:{PTAGIHAN:v.get("ID"),PSTATUS:1},REQUEST_FOR_PRINT:x,PRINT_NAME:"CetakRincian"},function(f){w.printPreview(s,f)})}})}}},0,0,0,0,["controller.tagihan-penjualan-info"],0,[pembayaran.tagihan.penjualan,"InfoController"],0));(Ext.cmd.derive("pembayaran.tagihan.penjualan.Links",com.Tab,{cls:"x-br-top",border:false,ui:"header-tab",defaults:{flex:1,border:false},items:[{title:"Rincian",xtype:"rincian-tagihan-penjualan-Workspace",iconCls:"x-fa fa-list-alt",reference:"workspacerinciantagihanpenjualan"}],load:function(m){var l=this,n=l.getActiveTab();if(n){if(n.loadRecord){n.loadRecord(m)}else{if(n.load){n.load(m)}}}}},0,["tagihan-penjualan-links"],["component","box","container","panel","tabpanel","com-tab","tagihan-penjualan-links"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"tagihan-penjualan-links":true},["widget.tagihan-penjualan-links"],0,[pembayaran.tagihan.penjualan,"Links"],0));(Ext.cmd.derive("pembayaran.tagihan.penjualan.Workspace",com.Form,{controller:"tagihan-penjualan-WorkspaceController",viewModel:{data:{tagihan:undefined}},layout:"border",bodyPadding:0,items:[{region:"center",xtype:"tagihan-penjualan-links",reference:"tagihanpenjualanlink",flex:3,listeners:{tabchange:"onTabChange"}},{region:"east",xtype:"tagihan-penjualan-info",reference:"tagihanpenjualaninfo",flex:1,collapsible:true,split:true,title:"Info tagihan",listeners:{suksesfinaltagihan:"onSuksesFinal"}}],load:function(m){var p=this.getViewModel(),o=this.down("[reference=tagihanpenjualanlink]"),n=this.down("[reference=tagihanpenjualaninfo]");p.set("tagihan",m);o.load(m);n.load(m)}},0,["tagihan-penjualan-Workspace"],["component","box","container","panel","form","com-form","tagihan-penjualan-Workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"tagihan-penjualan-Workspace":true},["widget.tagihan-penjualan-Workspace"],0,[pembayaran.tagihan.penjualan,"Workspace"],0));(Ext.cmd.derive("pembayaran.tagihan.penjualan.WorkspaceController",Ext.app.ViewController,{onSelectedTagihanPenjualan:function(s,o){var e=this,q=e.getReferences(),p=o.get("ID");q.tagihanpenjualandetil.loadStore(p)},onSuksesFinal:function(g){var l=this;l.getView().load(g)},onTabChange:function(m,p){var n=this.getViewModel(),o=n.get("tagihan");if(p.loadRecord){p.loadRecord(o)}else{if(p.load){p.load(o)}}}},0,0,0,0,["controller.tagihan-penjualan-WorkspaceController"],0,[pembayaran.tagihan.penjualan,"WorkspaceController"],0));(Ext.cmd.derive("pembayaran.tagihan.penjualan.rincian.List",com.Grid,{controller:"rincian-tagihan-penjualan-list",viewModel:{stores:{store:{type:"penjualan-detil-store"}}},columns:[{xtype:"rownumberer",text:"No",align:"left",width:50},{xtype:"templatecolumn",text:"Nama Obat",flex:1,sortable:false,tpl:'<div style="white-space:normal !important;">{REFERENSI.FARMASI.NAMA}</div>'},{text:"Jumlah",dataIndex:"JUMLAH",hideTrigger:true,width:75,editor:{xtype:"numberfield",hideTrigger:true,reference:"jumlah",name:"JUMLAH"}},{text:"Harga (Rp)",format:"0,00",renderer:"Renderhargasatuan",align:"right",width:100,summaryRenderer:"onSummaryInfoRenderer"},{xtype:"numbercolumn",text:"Jumlah (Rp)",align:"right",format:"0,00",width:120,renderer:"onTotalRenderer",summaryRenderer:"onSummaryRenderer"}],features:[{ftype:"summary",dock:"bottom"}]},0,["rincian-tagihan-penjualan-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","rincian-tagihan-penjualan-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"rincian-tagihan-penjualan-list":true},["widget.rincian-tagihan-penjualan-list"],0,[pembayaran.tagihan.penjualan.rincian,"List"],0));(Ext.cmd.derive("pembayaran.tagihan.penjualan.rincian.ListController",Ext.app.ViewController,{initViewModel:function(){var l=this,n=l.getView(),m=l.getStore("store");m.doAfterLoad=function(e){var f=0;e.each(function(g){var x=g.get("REFERENSI"),A=Number(x?(x.MARGIN_PENJAMIN?x.MARGIN_PENJAMIN.MARGIN:0):0),w=Number(x?(x.HARGA_BARANG?x.HARGA_BARANG.HARGA_JUAL:0):0),z=w*(A/100),v=parseFloat(w)+parseFloat(z),y=g.get("JUMLAH")*v;f=f+y});n.total=f}},onTotalRenderer:function(C,E,z){var w=this,u=w.getView(),B=z.get("REFERENSI"),D=Number(B?(B.MARGIN_PENJAMIN?B.MARGIN_PENJAMIN.MARGIN:0):0),y=Number(B?(B.HARGA_BARANG?B.HARGA_BARANG.HARGA_JUAL:0):0),A=y*(D/100),x=parseFloat(y)+parseFloat(A),v=z.get("JUMLAH")*x;this.initViewModel();return Ext.util.Format.number(v,"0,00")},onSummaryRenderer:function(m,o,n){var p='<span style="font-size: 12px; font-weight: bold">'+Ext.util.Format.number(this.getView().total,"0,00")+"</span>";return p},Renderhargasatuan:function(w,y,x){var t=x.get("REFERENSI"),v=Number(t?(t.MARGIN_PENJAMIN?t.MARGIN_PENJAMIN.MARGIN:0):0),s=Number(t?(t.HARGA_BARANG?t.HARGA_BARANG.HARGA_JUAL:0):0),u=s*(v/100),q=parseFloat(s)+parseFloat(u);return'<span style="color:black;"> Rp. '+q+"</span>"},onSummaryInfoRenderer:function(){return'<span style="font-size: 12px; font-weight: bold">Total (Rp.): </span>'}},0,0,0,0,["controller.rincian-tagihan-penjualan-list"],0,[pembayaran.tagihan.penjualan.rincian,"ListController"],0));(Ext.cmd.derive("pembayaran.tagihan.penjualan.rincian.Workspace",com.Form,{layout:"fit",items:[{xtype:"rincian-tagihan-penjualan-list",reference:"rinciantagihanpenjualan",flex:1}],onLoadRecord:function(l,g){l.down("rincian-tagihan-penjualan-list").load({PENJUALAN_ID:g.get("ID")})}},0,["rincian-tagihan-penjualan-Workspace"],["component","box","container","panel","form","com-form","rincian-tagihan-penjualan-Workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"rincian-tagihan-penjualan-Workspace":true},["widget.rincian-tagihan-penjualan-Workspace"],0,[pembayaran.tagihan.penjualan.rincian,"Workspace"],0));(Ext.cmd.derive("pembayaran.tagihan.piutang.Workspace",com.Tab,{controller:"workspace-piutang",viewModel:{data:{tagihan:undefined}},items:[{title:"Perorangan",xtype:"workspace-piutangperorangan",reference:"piutangperorangan",listeners:{save:"onSimpan"}},{title:"Perusahaan",xtype:"workspace-piutang-penjamin",reference:"piutangpenjaminform",listeners:{save:"onSimpan"}}],load:function(l){var m=this;vm=m.getViewModel();vm.set("tagihan",l);var n=m.getActiveTab();if(n){if(n.loadRecord){n.loadRecord(l)}else{if(n.load){n.load(l)}}}},listeners:{tabchange:"onTabChange",save:"onSimpan"}},0,["workspace-piutang"],["component","box","container","panel","tabpanel","com-tab","workspace-piutang"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"workspace-piutang":true},["widget.workspace-piutang"],0,[pembayaran.tagihan.piutang,"Workspace"],0));(Ext.cmd.derive("pembayaran.tagihan.piutang.WorkspaceController",Ext.app.ViewController,{onTabChange:function(m,p){var n=this.getViewModel(),o=n.get("tagihan");if(p.loadRecord){p.loadRecord(o)}else{if(p.load){p.load(o)}}},onSimpan:function(){this.getView().fireEvent("load")}},0,0,0,0,["controller.workspace-piutang"],0,[pembayaran.tagihan.piutang,"WorkspaceController"],0));(Ext.cmd.derive("pembayaran.tagihan.piutang.penjamin.Form",com.Form,{controller:"piutangpenjamin-form",model:"data.model.PiutangPerusahaan",layout:{type:"vbox",align:"stretch"},defaults:{border:false,margin:" 5 5 5 5 "},items:[{flex:1,layout:{type:"hbox",align:"stretch"},defaults:{border:false,flex:1,margin:" 2 5 2 5 ",allowBlank:false,bind:{readOnly:"{formConfig.viewOnly}"}},items:[{xtype:"referensi-combo",params:{JENIS:10},emptyText:"[ PENJAMIN ]",name:"PENJAMIN",flex:1,monitorTab:true,selectOnTab:true,editable:true,firstLoad:true},{xtype:"textfield",flex:1,name:"TELEPON",emptyText:"[ NO. TELPON ]"}]},{flex:1,layout:{type:"hbox",align:"stretch"},defaults:{border:false,allowBlank:false,flex:1,margin:" 2 5 2 5 ",bind:{readOnly:"{formConfig.viewOnly}"}},items:[{xtype:"textfield",name:"TOTAL",emptyText:"[ TOTAL ]"},{flex:1,name:"ALAMAT",emptyText:"[ ALAMAT ]",xtype:"textfield"}]}],buttons:[{text:"Simpan",ui:"soft-blue",iconCls:"x-fa fa-save",handler:"onSimpan",bind:{hidden:"{!formConfig.simpan}"},tooltip:{text:"Simpan",mouseOffset:[0,-75]}},{text:"Cetak Surat Piutang",ui:"soft-green",iconCls:"x-fa fa-print",handler:"onCetak",tooltip:{text:"Cetak",mouseOffset:[0,-75]}},{text:"Reset",ui:"soft-red",iconCls:"x-fa fa-refresh",handler:"onReset",bind:{hidden:"{!formConfig.simpan}"},tooltip:{text:"Reset",mouseOffset:[0,-75]}}]},0,["piutangpenjamin-form"],["component","box","container","panel","form","com-form","piutangpenjamin-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"piutangpenjamin-form":true},["widget.piutangpenjamin-form"],0,[pembayaran.tagihan.piutang.penjamin,"Form"],0));(Ext.cmd.derive("pembayaran.tagihan.piutang.penjamin.FormController",Ext.app.ViewController,{onReset:function(){var m=this,n=m.getView(),l=m.getViewModel().get("record");n.createRecord({TAGIHAN:l.get("TAGIHAN"),STATUS:1,TANGGAL:n.getSysdate()})},onSimpan:function(m){var l=this,n=l.getView();n.save(m,{},function(g,f,e){if(e){l.onReset();n.fireEvent("success",e)}})}},0,0,0,0,["controller.piutangpenjamin-form"],0,[pembayaran.tagihan.piutang.penjamin,"FormController"],0));(Ext.cmd.derive("pembayaran.tagihan.piutang.penjamin.List",com.Grid,{controller:"piutang-penjamin-list",viewModel:{stores:{store:{type:"piutang-perusahaan-store"}}},cls:"x-br-top",border:false,columns:[{xtype:"rownumberer",text:"No",align:"left",width:60},{text:"Penjamin",dataIndex:"PENJAMIN",flex:2,renderer:"onRendererPenjamin"},{text:"No. Telpon",dataIndex:"TELEPON",flex:1},{text:"Alamat",dataIndex:"ALAMAT",flex:2},{xtype:"numbercolumn",text:"Total",dataIndex:"TOTAL",flex:1,format:"0,00",align:"right"},{xtype:"datecolumn",text:"Tanggal",dataIndex:"TANGGAL",flex:1,format:"d-m-Y H:i:s",align:"center"}]},0,["piutang-penjamin-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","piutang-penjamin-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"piutang-penjamin-list":true},["widget.piutang-penjamin-list"],0,[pembayaran.tagihan.piutang.penjamin,"List"],0));(Ext.cmd.derive("pembayaran.tagihan.piutang.penjamin.ListController",Ext.app.ViewController,{onRendererPenjamin:function(n,q,o){var p=o.get("REFERENSI"),s=p?(p.PENJAMIN?p.PENJAMIN.DESKRIPSI:""):"";return s}},0,0,0,0,["controller.piutang-penjamin-list"],0,[pembayaran.tagihan.piutang.penjamin,"ListController"],0));(Ext.cmd.derive("pembayaran.tagihan.piutang.penjamin.Workspace",com.Form,{controller:"workspace-piutang-penjamin",layout:"border",items:[{region:"north",title:"Form",iconCls:"x-fa fa-file-o",xtype:"piutangpenjamin-form",border:false,reference:"piutangpenjaminform",listeners:{save:"onSuccess"}},{region:"center",title:"List",iconCls:"x-fa fa-server",xtype:"piutang-penjamin-list",flex:1,border:false,reference:"piutangpenjaminlist"}],onLoadRecord:function(q,v){var p=q.down("piutang-penjamin-list"),s=q.down("piutangpenjamin-form");if(v){var u=v.get("STATUS")==1,t=q.app.xpriv("1204")?u:false,w={TAGIHAN:v.get("ID"),TANGGAL:s.getSysdate(),STATUS:1};s.setFormConfig({viewOnly:!t,simpan:t});s.createRecord(w);p.load({TAGIHAN:v.get("ID")})}}},0,["workspace-piutang-penjamin"],["component","box","container","panel","form","com-form","workspace-piutang-penjamin"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-piutang-penjamin":true},["widget.workspace-piutang-penjamin"],0,[pembayaran.tagihan.piutang.penjamin,"Workspace"],0));(Ext.cmd.derive("pembayaran.tagihan.piutang.penjamin.WorkspaceController",Ext.app.ViewController,{onSuccess:function(n){var p=this,s=p.getView(),q=p.getReferences(),o=q.piutangpenjaminlist;o.reload();s.fireEvent("save",n)}},0,0,0,0,["controller.workspace-piutang-penjamin"],0,[pembayaran.tagihan.piutang.penjamin,"WorkspaceController"],0));(Ext.cmd.derive("pembayaran.tagihan.piutang.perorangan.Form",com.Form,{controller:"piutangperorangan-form",model:"data.model.PiutangPasien",layout:{type:"hbox",align:"stretch"},defaultType:"fieldcontainer",defaults:{margin:"0 5 0 5"},items:[{layout:{type:"vbox",align:"stretch"},flex:1,defaults:{allowBlank:false,margin:"0 0 1 0",labelWidth:150,bind:{readOnly:"{formConfig.viewOnly}"}},items:[{xtype:"textfield",fieldLabel:"Nama",name:"NAMA",enforceMaxLength:true,maxLength:75},{xtype:"referensi-combo",fieldLabel:"Hubungan dgn Pasien",params:{JENIS:7},name:"SHDK",editable:false,firstLoad:true,emptyText:"[Hubungan Dengan Pasien]"},{xtype:"referensi-combo",fieldLabel:"Kartu Tanda Pengenal",params:{JENIS:9},name:"JENIS_KARTU",editable:false,firstLoad:true,emptyText:"[Kartu Tanda Pengenal]"},{xtype:"textfield",fieldLabel:"No. Kartu Pengenal",name:"NO_KARTU_IDENTITAS",enforceMaxLength:true,maxLength:16},{xtype:"textfield",fieldLabel:"Alamat KTP",name:"ALAMAT_KARTU",enforceMaxLength:true,maxLength:150},{xtype:"textfield",fieldLabel:"Alamat Tempat Tinggal",name:"ALAMAT_TEMPAT_TINGGAL",enforceMaxLength:true,maxLength:150}]},{layout:{type:"vbox",align:"stretch"},flex:1,defaults:{margin:"0 0 1 0",labelWidth:150},items:[{xtype:"textfield",fieldLabel:"No. Telepon",name:"TELEPON",enforceMaxLength:true,maxLength:35,bind:{readOnly:"{formConfig.viewOnly}"}},{xtype:"textfield",fieldLabel:"Alasan",name:"ALASAN",enforceMaxLength:true,maxLength:35,bind:{readOnly:"{formConfig.viewOnly}"}},{xtype:"fieldcontainer",fieldLabel:"Tgl. Piutang",layout:{type:"hbox"},defaults:{allowBlank:false},items:[{name:"TANGGAL",reference:"tanggal",flex:1,xtype:"datefield",emptyText:"[Tanggal]",format:"d/m/Y",margin:"0 1 0 0",bind:{readOnly:"{formConfig.viewOnly}",minValue:"{formConfig.minDate}",maxValue:"{formConfig.maxDate}"}},{name:"WAKTU",reference:"waktu",width:105,xtype:"timefield",emptyText:"[Jam:Mnt:Dtk]",format:"H:i:s",hideTrigger:true,bind:{readOnly:"{formConfig.viewOnly}"}}]},{xtype:"numberfield",textAlign:"right",fieldLabel:"Jumlah Piutang",reference:"jumlahpiutang",name:"TOTAL",emptyText:"[ Rp. ]",minValue:0,hideTrigger:true,bind:{readOnly:"{formConfig.viewOnly}"},allowBlank:false,listeners:{change:"onChange"}},{xtype:"radiogroup",fieldLabel:"Jenis Pembayaran",reference:"jenispembayaran",columns:2,defaults:{allowBlank:false},bind:{readOnly:"{formConfig.viewOnly}"},name:"JENIS_PEMBAYARAN",layout:{autoFlex:false},defaults:{margin:"0 15 0 0"},items:[{boxLabel:"Bayar Sekaligus",checked:true,inputValue:"1"},{boxLabel:"Angsuran",inputValue:"2"}],listeners:{change:"onChange"}},{xtype:"numberfield",fieldLabel:"Lama Angsuran",name:"LAMA_ANGSURAN",reference:"lamaangsuran",value:0,minValue:0,allowBlank:false,bind:{readOnly:"{formConfig.viewOnly}"},listeners:{change:"onChange"}},{xtype:"numberfield",textAlign:"right",fieldLabel:"Besar Angsuran",name:"BESAR_ANGSURAN",emptyText:"[ Rp. ]",minValue:0,hideTrigger:true,bind:{readOnly:"{formConfig.viewOnly}",value:"{record.BESAR_ANGSURAN}"},allowBlank:false}]}],buttons:[{text:"Simpan",ui:"soft-blue",iconCls:"x-fa fa-save",handler:"onSimpan",bind:{hidden:"{!formConfig.simpan}"},tooltip:{text:"Simpan",mouseOffset:[0,-75]}},{text:"Reset",ui:"soft-red",iconCls:"x-fa fa-refresh",handler:"onReset",bind:{hidden:"{!formConfig.simpan}"},tooltip:{text:"Reset",mouseOffset:[0,-75]}}],onLoadRecord:function(m,l){var n=m.down("[name=WAKTU]");n.setValue(l.get("TANGGAL"))},onBeforeGetRecord:function(o,m){var n=Ext.Date.clone(o.down("[reference=tanggal]").getValue()),p=o.down("[reference=waktu]").getValue();n.setHours(p.getHours());n.setMinutes(p.getMinutes());n.setSeconds(p.getSeconds());m.TANGGAL=n}},0,["piutangperorangan-form"],["component","box","container","panel","form","com-form","piutangperorangan-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"piutangperorangan-form":true},["widget.piutangperorangan-form"],0,[pembayaran.tagihan.piutang.perorangan,"Form"],0));(Ext.cmd.derive("pembayaran.tagihan.piutang.perorangan.FormController",Ext.app.ViewController,{onFocusEnter:function(g,l){},onReset:function(){var m=this,n=m.getView(),l=m.getViewModel().get("record");n.createRecord({TAGIHAN:l.get("TAGIHAN"),NAMA:"",SHDK:"",JENIS_KARTU:"",TANGGAL:n.getSysdate(),TOTAL:0,LAMA_ANGSURAN:0,BESAR_ANGSURAN:0,STATUS:1});n.focus("NAMA")},onSimpan:function(g){var m=this,n=m.getView();n.save(g,{},function(l,f,e){m.onReset()})},onChange:function(l,n,m){this.hitungBesarAngsuran()},privates:{hitungBesarAngsuran:function(){try{var o=this,p=o.getReferences();rec=o.getViewModel().get("record"),tp=p.jumlahpiutang.getValue(),jp=p.jenispembayaran.getValue(),la=p.lamaangsuran.getValue();if(rec){if(jp.JENIS_PEMBAYARAN==2){var e=la>0?tp/la:0;rec.set("JENIS_PEMBAYARAN",jp.JENIS_PEMBAYARAN);rec.set("BESAR_ANGSURAN",e)}else{rec.set("BESAR_ANGSURAN",tp)}}}catch(n){}}}},0,0,0,0,["controller.piutangperorangan-form"],0,[pembayaran.tagihan.piutang.perorangan,"FormController"],0));(Ext.cmd.derive("pembayaran.tagihan.piutang.perorangan.List",com.Grid,{controller:"piutangperorangan-list",viewModel:{stores:{store:{type:"piutang-pasien-store"}}},columns:[{xtype:"rownumberer",text:"No",align:"left",width:60},{text:"Nama",dataIndex:"NAMA",width:300},{text:"No. Kartu Identitas",dataIndex:"NO_KARTU_IDENTITAS",width:150},{text:"Jenis Kartu",dataIndex:"JENIS_KARTU",width:120,renderer:"onRendererJenisKartu"},{text:"Alamat",dataIndex:"ALAMAT_TEMPAT_TINGGAL",flex:1},{xtype:"datecolumn",text:"Tanggal",dataIndex:"TANGGAL",format:"d/m/Y H:i:s",width:140},{xtype:"numbercolumn",text:"Total",dataIndex:"TOTAL",format:"0,00",align:"right",width:120},{text:"Jenis Pembayaran",dataIndex:"JENIS_PEMBAYARAN",width:120,renderer:"onRendererJenisPembayaran"},{text:"Lama Angsuran",dataIndex:"LAMA_ANGSURAN",align:"right",width:120},{xtype:"numbercolumn",text:"Besar Angsuran",dataIndex:"BESAR_ANGSURAN",format:"0,00",align:"right",width:120}]},0,["piutangperorangan-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","piutangperorangan-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"piutangperorangan-list":true},["widget.piutangperorangan-list"],0,[pembayaran.tagihan.piutang.perorangan,"List"],0));(Ext.cmd.derive("pembayaran.tagihan.piutang.perorangan.ListController",Ext.app.ViewController,{onRendererJenisKartu:function(n,p,o){var q=o.get("REFERENSI"),s=q?(q.JENIS_KARTU?q.JENIS_KARTU.DESKRIPSI:n):n;return s},onRendererJenisPembayaran:function(n,p,o){var q=o.get("REFERENSI"),s=q?(q.JENIS_PEMBAYARAN?q.JENIS_PEMBAYARAN.DESKRIPSI:n):n;return s}},0,0,0,0,["controller.piutangperorangan-list"],0,[pembayaran.tagihan.piutang.perorangan,"ListController"],0));(Ext.cmd.derive("pembayaran.tagihan.piutang.perorangan.Workspace",com.Form,{controller:"workspace-piutangperorangan",layout:"border",items:[{region:"north",xtype:"piutangperorangan-form",title:"Form",reference:"piutangperoranganform",listeners:{save:"onSuccess"}},{region:"center",xtype:"piutangperorangan-list",title:"List",reference:"piutangperoranganlist"}],onLoadRecord:function(q,v){var p=q.down("piutangperorangan-list"),s=q.down("piutangperorangan-form");if(v){var u=v.get("STATUS")==1,t=q.app.xpriv("1204")?u:false,w={TAGIHAN:v.get("ID"),NAMA:"",SHDK:"",JENIS_KARTU:"",TANGGAL:s.getSysdate(),TOTAL:0,LAMA_ANGSURAN:0,BESAR_ANGSURAN:0,STATUS:1};s.setFormConfig({viewOnly:!t,simpan:t,minDate:v.get("TANGGAL"),maxDate:s.getSysdate()});s.createRecord(w);p.load({TAGIHAN:v.get("ID")})}}},0,["workspace-piutangperorangan"],["component","box","container","panel","form","com-form","workspace-piutangperorangan"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-piutangperorangan":true},["widget.workspace-piutangperorangan"],0,[pembayaran.tagihan.piutang.perorangan,"Workspace"],0));(Ext.cmd.derive("pembayaran.tagihan.piutang.perorangan.WorkspaceController",Ext.app.ViewController,{onSuccess:function(n){var p=this,s=p.getView(),q=p.getReferences(),o=q.piutangperoranganlist;o.reload();s.fireEvent("save",n)}},0,0,0,0,["controller.workspace-piutangperorangan"],0,[pembayaran.tagihan.piutang.perorangan,"WorkspaceController"],0));(Ext.cmd.derive("pembayaran.tagihan.rincian.List",com.Grid,{controller:"rincian-tagihan-list",viewModel:{stores:{store:{type:"rincian-tagihan-store"}}},total:0,border:false,columns:[{xtype:"rownumberer",text:"No",align:"left",width:40},{xtype:"templatecolumn",tpl:new Ext.XTemplate('<div style="font-weight: bold; font-size: 12px; white-space:normal !important;">{[values.RUANGAN]} </div>'),text:"Unit Pelayanan",dataIndex:"RUANGAN",flex:1.3},{xtype:"templatecolumn",tpl:new Ext.XTemplate('<div style="font-weight: bold; font-size: 12px; white-space:normal !important;">{[values.LAYANAN]} </div>'),text:"Nama Pelayanan",dataIndex:"LAYANAN",flex:2},{xtype:"datecolumn",text:"Tgl Pelayanan",dataIndex:"TANGGAL",format:"d/m/Y H:i:s",width:150},{text:"JENIS RINCIAN",dataIndex:"JENIS_RINCIAN",width:150,hidden:true},{xtype:"numbercolumn",text:"Qty",dataIndex:"JUMLAH",width:60,align:"right"},{xtype:"numbercolumn",text:"Tarif/Harga (Rp)",dataIndex:"TARIF",align:"right",width:120,summaryRenderer:"onSummaryInfoRenderer"},{xtype:"numbercolumn",text:"TOTAL (Rp)",align:"right",format:"0,00",width:120,renderer:"onTotalRenderer",summaryRenderer:"onSummaryRenderer"}],features:[{ftype:"summary",dock:"bottom"}],dockedItems:[{xtype:"toolbar",dock:"top",items:["->",{xtype:"referensi-combo",reference:"filterby",triggers:{clear:{weight:0,cls:"x-form-clear-trigger",hidden:true,handler:"onClearClick"}},params:{JENIS:30},firstLoad:true,emptyText:"Filter berdasarkan:",width:300,listeners:{select:"onFilterBy",change:"onFilterByChange"}}]}],onBeforeLoad:function(n,o,p){var m=n.down("referensi-combo");n.total=0;if(p){if(p.clearFilter){p.clearFilter(true)}}m.select(null)},doAfterLoad:function(o,n,m,p){if(m){if(Ext.isArray(n)){Ext.Array.each(n,function(f){var e=f.get("JUMLAH")*f.get("TARIF");o.total+=e})}}}},0,["rincian-tagihan-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","rincian-tagihan-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"rincian-tagihan-list":true},["widget.rincian-tagihan-list"],0,[pembayaran.tagihan.rincian,"List"],0));(Ext.cmd.derive("pembayaran.tagihan.rincian.ListController",Ext.app.ViewController,{onTotalRenderer:function(u,p,o){var q=this,t=q.getView(),s=o.get("JUMLAH")*o.get("TARIF");return Ext.util.Format.number(s,"0,00")},onSummaryRenderer:function(m,o,n){var p='<span style="font-size: 17px; font-weight: bold">'+Ext.util.Format.number(this.getView().total,"0,00")+"</span>";return p},onSummaryInfoRenderer:function(){return'<span style="font-size: 17px; font-weight: bold">Total: </span>'},onFilterBy:function(l,g){if(g){this.doFilterBy(g);this.getReferences().filterby.getTrigger("clear").show()}},onFilterByChange:function(n,l,m){if(l==null){this.doFilterBy(l);this.getReferences().filterby.getTrigger("clear").hide();this.getReferences().filterby.select(null)}},onClearClick:function(f){this.onFilterByChange(f,null)},privates:{doFilterBy:function(m){var n=this,p=n.getView(),o=n.getStore("store");if(o){o.clearFilter(true);p.total=0;o.filterBy(function(f){if(m){var e=f.get("JENIS")==m.get("ID");if(e){p.total+=f.get("JUMLAH")*f.get("TARIF")}return e}p.total+=f.get("JUMLAH")*f.get("TARIF");return true})}}}},0,0,0,0,["controller.rincian-tagihan-list"],0,[pembayaran.tagihan.rincian,"ListController"],0));(Ext.cmd.derive("pembayaran.tagihan.rincian.Workspace",com.Form,{controller:"workspace-rincian",layout:"fit",items:[{xtype:"rincian-tagihan-list"}],onLoadRecord:function(l,g){l.down("rincian-tagihan-list").load({RINCIAN:1,TAGIHAN:g.get("ID"),STATUS:1})}},0,["workspace-rincian"],["component","box","container","panel","form","com-form","workspace-rincian"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-rincian":true},["widget.workspace-rincian"],0,[pembayaran.tagihan.rincian,"Workspace"],0));(Ext.cmd.derive("pembayaran.tagihan.rincian.WorkspaceController",Ext.app.ViewController,{},0,0,0,0,["controller.workspace-rincian"],0,[pembayaran.tagihan.rincian,"WorkspaceController"],0));(Ext.cmd.derive("pembayaran.transaksikasir.Detil",com.Form,{controller:"transaksikasir-detil",layout:{type:"hbox",align:"stretch"},items:[{xtype:"fieldset",flex:1,defaultType:"displayfield",cls:" shadow-panel x-color-w",fieldDefaults:{labelWidth:"100%"},items:[{style:"font-size: 2em; font-weight: bold;",fieldLabel:"Unit"},{style:"font-size: 1em; font-weight: bold;",fieldLabel:"NAMA KASIR"},{xtype:"label",text:"Transaksi yang anda lakukan akan berpengaruh ke setoran kasir"}]},{xtype:"fieldset",layout:{type:"vbox",align:"stretch"},flex:1,defaultType:"displayfield",cls:" shadow-panel x-color-w",fieldDefaults:{labelWidth:"100%"},items:[{xtype:"textarea",emptyText:"[ Keterangan ]"},{xtype:"textfield",emptyText:"[ Tanggal / Jam ]"}]}]},0,["transaksikasir-detil"],["component","box","container","panel","form","com-form","transaksikasir-detil"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"transaksikasir-detil":true},["widget.transaksikasir-detil"],0,[pembayaran.transaksikasir,"Detil"],0));(Ext.cmd.derive("pembayaran.transaksikasir.DetilController",Ext.app.ViewController,{},0,0,0,0,["controller.transaksikasir-detil"],0,[pembayaran.transaksikasir,"DetilController"],0));(Ext.cmd.derive("pembayaran.transaksikasir.List",com.Grid,{controller:"transaksi-kasir-list",viewModel:{data:{listConfig:{filter:{enabled:false,kasir:false}}},stores:{store:{type:"transaksi-kasir-store"}}},title:"Transaksi Kasir",hideHeaders:true,tools:[{type:"refresh",callback:"onRefresh"}],dockedItems:[{xtype:"pagingtoolbar",hidden:true,bind:{store:"{store}",hidden:"{!listConfig.paging}"},dock:"bottom",beforePageText:"Hal.",afterPageText:"dari {0}",displayMsg:"Menampilkan {0} - {1} dari {2}",displayInfo:true},{xtype:"toolbar",dock:"top",overflowHandler:"menu",bind:{hidden:"{!listConfig.filter.enabled}"},items:[{xtype:"kasir-combo",reference:"kasircombo",listeners:{select:"onSelectKasirCombo"},bind:{hidden:"{!listConfig.filter.kasir}"}}]}],columns:[{xtype:"templatecolumn",flex:2,tpl:new Ext.XTemplate('<div style="font-weight: bold; font-size: 12px; white-space:normal !important;">No. {[values.NOMOR]} </div>','<div style="font-size: 12px; white-space:normal !important;"><span class="x-fa fa-folder-open"></span> {[this.tanggalFormat(values.BUKA)]}</div>','<div style="font-size: 12px; white-space:normal !important;"><span class="x-fa fa-folder"></span> {[this.tanggalFormat(values.TUTUP)]}</div>',{tanggalFormat:function(l){var g=Ext.isDate(l)?l:Ext.Date.parse(l,"Y-m-d H:i:s");return Ext.Date.format(g,"d-m-Y H:i:s")}})},{text:"Status",dataIndex:"STATUS",renderer:"onRendererStatus"}],listeners:{afterrender:"onAfterRender"}},0,["transaksi-kasir-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","transaksi-kasir-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"transaksi-kasir-list":true},["widget.transaksi-kasir-list"],0,[pembayaran.transaksikasir,"List"],0));(Ext.cmd.derive("pembayaran.transaksikasir.ListController",Ext.app.ViewController,{onRendererStatus:function(f){return f==1?"Buka":"Tutup"},onAfterRender:function(){var l=this,n=l.getView(),m=l.getReferences();m.kasircombo.setValue(n.app.usrid);m.kasircombo.load();n.setLoading(true);n.load({KASIR:n.app.usrid})},onSelectKasirCombo:function(p,n){var o=this,s=o.getView(),q=o.getReferences();if(n){s.setLoading(true);s.load({KASIR:n.get("ID")})}},onRefresh:function(){this.getView().reload()}},0,0,0,0,["controller.transaksi-kasir-list"],0,[pembayaran.transaksikasir,"ListController"],0));(Ext.cmd.derive("pembayaran.transaksikasir.Tab",com.Tab,{viewModel:{type:"pembayaranmodel",data:{disableGrid:true}},bind:{disabled:"disableGrid"},cls:"x-br-top",border:false,items:[{title:"View Pasien Belum Bayar",layout:"fit",items:[{xtype:"pasienbelumbayar-list",reference:"pasienbelumbayarlist",showSearch:true}]}],load:function(l){var g=this.down("[reference=pasienbelumbayarlist]");g.load(l)}},0,["listpasien-tab"],["component","box","container","panel","tabpanel","com-tab","listpasien-tab"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"listpasien-tab":true},["widget.listpasien-tab"],0,[pembayaran.transaksikasir,"Tab"],0));(Ext.cmd.derive("pembayaran.widget.Info",com.Form,{controller:"pembayaran-widget-info",viewModel:{data:{pasien:undefined,dataFound:false}},cls:"shadow-panel",border:true,firstLoad:true,isAfterRender:false,layout:{type:"vbox",align:"stretch"},header:{iconCls:"x-fa fa-credit-card",title:"Tagihan / Pembayaran",margin:0,padding:"5 10 5 10",cls:"x-color-w",layout:{type:"hbox",align:"middle"},items:[{xtype:"component",flex:1},{xtype:"button",iconCls:"x-fa fa-history",tooltip:"History Tagihan / Pembayaran",ui:"soft-cyan",bind:{},margin:"0 0 0 1",handler:"onHistoryTagihan"}]},bodyPadding:5,initComponent:function(){var f=this;f.createMenuContext();f.items=[{xtype:"tagihan-list",viewConfig:{loadMask:false},multiSelect:true,reference:"tagihanlist",listeners:{viewtagihan:"onViewTagihan",rowcontextmenu:"onKlikKananTagihan"}}];com.Form.prototype.initComponent.apply(this,arguments)},createMenuContext:function(){var f=this;f.menucontext=new Ext.menu.Menu({items:[{text:"Gabung Tagihan",glyph:"xf05a@FontAwesome",scope:f.getController(),handler:"onGabungTagihan"}]});return f.menucontext},refresh:function(){var n=this,o=n.getViewModel(),p=n.getReferences(),m=o.get("pasien");if(p&&n.isAfterRender){if(n.firstLoad){p.tagihanlist.setListConfig({pasienInfo:false});p.tagihanlist.loadStore({NORM:m.get("NORM"),start:0,limit:10});n.firstLoad=false}else{p.tagihanlist.refresh()}}},listeners:{afterrender:"onAfterRender"}},0,["pembayaran-widget-info"],["component","box","container","panel","form","com-form","pembayaran-widget-info"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"pembayaran-widget-info":true},["widget.pembayaran-widget-info"],0,[pembayaran.widget,"Info"],0));(Ext.cmd.derive("pembayaran.widget.InfoController",Ext.app.ViewController,{tagihans:[],onViewTagihan:function(f){this.getView().fireEvent("viewtagihan",f)},onHistoryTagihan:function(p){var f=this,e=f.getViewModel(),o=e.get("pasien");this.getView().fireEvent("historytagihan",o)},onKlikKananTagihan:function(s,v,e,u,w){var q=this;refs=q.getReferences(),tagihan=refs.tagihanlist,pilihan=tagihan.getSelection();q.tagihans=[];if(pilihan.length<=2){var t=w.getXY();q.tagihans=pilihan;w.stopEvent();q.getView().menucontext.showAt(t)}},onGabungTagihan:function(n){var m=this,o=m.getReferences(),p=m.getView();p.openDialog("",true,900,220,{xtype:"workspace-gabung-tagihan",title:"Penggabungan Tagihan",ui:"panel-blue",showCloseButton:true},function(f,g){var e=g.down("workspace-gabung-tagihan");e.on("save",function(l){o.tagihanlist.refresh();g.close()});if(m.tagihans.length==2){e.createRecord({DARI:m.tagihans[0].get("ID"),KE:m.tagihans[1].get("ID"),STATUS:1,REFERENSI:{DARI:m.tagihans[0].data,KE:m.tagihans[1].data}})}else{if(m.tagihans.length==1){e.createRecord({DARI:m.tagihans[0].get("ID"),STATUS:1,REFERENSI:{DARI:m.tagihans[0].data}})}}})},onAfterRender:function(){var g=this,l=g.getView();l.isAfterRender=true}},0,0,0,0,["controller.pembayaran-widget-info"],0,[pembayaran.widget,"InfoController"],0));(Ext.cmd.derive("rekammedis.anamnesis.riwayat.alergi.Model",data.model.Model,{serviceName:"medicalrecord/anamnesis/riwayat/alergi",fields:[{name:"ID",type:"int"},{name:"KUNJUNGAN",type:"string"},{name:"DESKRIPSI",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[rekammedis.anamnesis.riwayat.alergi,"Model"],0));(Ext.cmd.derive("rekammedis.anamnesis.riwayat.alergi.Store",data.store.Store,{model:"rekammedis.anamnesis.riwayat.alergi.Model"},0,0,0,0,["store.rekammedis-anamnesis-riwayat-alergi-store"],0,[rekammedis.anamnesis.riwayat.alergi,"Store"],0));(Ext.cmd.derive("rekammedis.anamnesis.riwayat.perjalananpenyakit.Model",data.model.Model,{serviceName:"medicalrecord/anamnesis/riwayat/perjalananpenyakit",fields:[{name:"ID",type:"int"},{name:"KUNJUNGAN",type:"string"},{name:"DESKRIPSI",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[rekammedis.anamnesis.riwayat.perjalananpenyakit,"Model"],0));(Ext.cmd.derive("rekammedis.anamnesis.riwayat.perjalananpenyakit.Store",data.store.Store,{model:"rekammedis.anamnesis.riwayat.perjalananpenyakit.Model"},0,0,0,0,["store.rekammedis-anamnesis-riwayat-perjalananpenyakit-store"],0,[rekammedis.anamnesis.riwayat.perjalananpenyakit,"Store"],0));(Ext.cmd.derive("rekammedis.anamnesis.umum.Model",data.model.Model,{serviceName:"medicalrecord/anamnesis",fields:[{name:"ID",type:"int"},{name:"KUNJUNGAN",type:"string"},{name:"PENDAFTARAN",type:"string"},{name:"DESKRIPSI",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[rekammedis.anamnesis.umum,"Model"],0));(Ext.cmd.derive("rekammedis.anamnesis.umum.Store",data.store.Store,{model:"rekammedis.anamnesis.umum.Model"},0,0,0,0,["store.rekammedis-anamnesis-umum-store"],0,[rekammedis.anamnesis.umum,"Store"],0));(Ext.cmd.derive("rekammedis.pemeriksaan.fisik.Model",data.model.Model,{serviceName:"medicalrecord/pemeriksaan/fisik",fields:[{name:"ID",type:"int"},{name:"KUNJUNGAN",type:"string"},{name:"PENDAFTARAN",type:"string"},{name:"DESKRIPSI",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[rekammedis.pemeriksaan.fisik,"Model"],0));(Ext.cmd.derive("rekammedis.pemeriksaan.fisik.Store",data.store.Store,{model:"rekammedis.pemeriksaan.fisik.Model"},0,0,0,0,["store.rekammedis-pemeriksaan-fisik-store"],0,[rekammedis.pemeriksaan.fisik,"Store"],0));(Ext.cmd.derive("rekammedis.pemeriksaan.umum.tandavital.Model",data.model.Model,{serviceName:"medicalrecord/pemeriksaan/umum/tandavital",fields:[{name:"ID",type:"int"},{name:"KUNJUNGAN",type:"string"},{name:"KEADAAN_UMUM",type:"string"},{name:"KESADARAN",type:"string"},{name:"SISTOLIK",type:"float"},{name:"DISTOLIK",type:"float"},{name:"FREKUENSI_NADI",type:"float"},{name:"FREKUENSI_NAFAS",type:"float"},{name:"SUHU",type:"float"},{name:"WAKTU_PEMERIKSAAN",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[rekammedis.pemeriksaan.umum.tandavital,"Model"],0));(Ext.cmd.derive("rekammedis.pemeriksaan.umum.tandavital.Store",data.store.Store,{model:"rekammedis.pemeriksaan.umum.tandavital.Model"},0,0,0,0,["store.rekammedis-pemeriksaan-umum-tandavital-store"],0,[rekammedis.pemeriksaan.umum.tandavital,"Store"],0));(Ext.cmd.derive("rekammedis.Workspace",com.Form,{viewModel:{data:{jenisKunjungan:1}},controller:"workspace-rekammedis",layout:"fit",bodyPadding:0,kunjungan:undefined,items:[{xtype:"com-form",ui:"panel-cyan",title:"Rekam Medis",titleFieldConfig:{},fullscreenEnabled:true,menuConfig:{enabled:true,width:190,buttonConfig:{}},fullscreenConfig:{},header:{items:[{xtype:"button",iconCls:"x-fa fa-print",ui:"soft-cerulen",tooltip:"Cetak",menu:[{iconCls:"x-fa fa-newspaper-o",text:"Resume Medis",handler:"onCetakResume"},{iconCls:"x-fa fa-newspaper-o",text:"List Instrumen",handler:"onCetakListInstrumen"}]}]}}],load:function(p){var o=this.getViewModel(),n=this.down("com-form");this.kunjungan=p;if(p){o.set("jenisKunjungan",p.get("JENIS_KUNJUNGAN"))}var m=[{text:"Anamnesis",leaf:true,iconCls:"simpel-anamnesis",idClassName:"rekammedis_anamnesis",className:"rekammedis.anamnesis.Workspace",record:p},{text:"Pemeriksaan",leaf:true,iconCls:"x-fa fa-stethoscope",idClassName:"rekammedis_pemeriksaan",className:"rekammedis.pemeriksaan.Workspace",record:p},{text:"ICD",leaf:true,iconCls:"simpel-icd",idClassName:"rekammedis_icd",className:"rekammedis.icd.Workspace",options:{header:false,bodyPadding:0,isLayanan:true},record:p}];n.setMenus(m)}},0,["rekammedis-workspace"],["component","box","container","panel","form","com-form","rekammedis-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"rekammedis-workspace":true},["widget.rekammedis-workspace"],0,[rekammedis,"Workspace"],0));(Ext.cmd.derive("rekammedis.WorkspaceController",Ext.app.ViewController,{onCetakResume:function(n){var m=this,p=m.getView(),o=p.kunjungan.get("REFERENSI").PENDAFTARAN;m.cetakMR({NAME:"mr.CetakMR2ResumeMedis",PARAMETER:{PNOPEN:o.NOMOR},PRINT_NAME:"CetakMR"},"Cetak Resume Medis",n)},onCetakListInstrumen:function(n){var m=this,p=m.getView(),o=p.kunjungan.get("NOMOR");m.cetakMR({NAME:"mr.ListInstrumen",PARAMETER:{PKUNJUNGAN:o},PRINT_NAME:"CetakMR"},"Cetak Resume Medis",n)},privates:{cetakMR:function(z,t,w){var v=this,u=v.getView(),x="Word",y="docx",A=true,s=t;u.showMessageBox({title:s,message:"Tekan tombol Yes/Ya utk cetak langsung<br/>Tekan tombol No/Tidak untuk Preview",ui:"window-green",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,defaultButton:"yes",animateTarget:w,fn:function(e){if(e!="yes"){x="Pdf";y="pdf";A=false}z.TYPE=x;z.EXT=y;z.REQUEST_FOR_PRINT=A;u.cetak(z,function(f){u.printPreview(s,f)})}})}}},0,0,0,0,["controller.workspace-rekammedis"],0,[rekammedis,"WorkspaceController"],0));(Ext.cmd.derive("rekammedis.anamnesis.Workspace",com.Tab,{controller:"rekammedis-anamnesis-workspace",kunjungan:undefined,bodyPadding:0,items:[{title:"Umum",xtype:"rekammedis-anamnesis-umum-workspace",reference:"rauw"},{title:"Riwayat",xtype:"rekammedis-anamnesis-riwayat-workspace",reference:"rarw"}],load:function(l){var m=this,n=this.getActiveTab();this.kunjungan=l;if(n){if(n.load){n.load(l)}}else{if(m.items.getCount()>0){m.setActiveTab(0)}}},listeners:{tabchange:"onTabChange"}},0,["rekammedis-anamnesis-workspace"],["component","box","container","panel","tabpanel","com-tab","rekammedis-anamnesis-workspace"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"rekammedis-anamnesis-workspace":true},["widget.rekammedis-anamnesis-workspace"],0,[rekammedis.anamnesis,"Workspace"],0));(Ext.cmd.derive("rekammedis.anamnesis.WorkspaceController",Ext.app.ViewController,{onTabChange:function(m,n){var l=this.getView().kunjungan;if(n.load){n.load(l)}}},0,0,0,0,["controller.rekammedis-anamnesis-workspace"],0,[rekammedis.anamnesis,"WorkspaceController"],0));(Ext.cmd.derive("rekammedis.anamnesis.riwayat.Workspace",com.Tab,{controller:"rekammedis-anamnesis-riwayat-workspace",bodyPadding:1,tabPosition:"bottom",kunjungan:undefined,items:[{title:"Perjalanan Penyakit",xtype:"rekammedis-anamnesis-riwayat-perjalananpenyakit-workspace",reference:"rarppw"},{title:"Alergi",xtype:"rekammedis-anamnesis-riwayat-alergi-workspace",reference:"raraw"}],load:function(l){var m=this,n=this.getActiveTab();this.kunjungan=l;if(n){n.load(l)}else{if(m.items.getCount()>0){m.setActiveTab(0)}}},listeners:{tabchange:"onTabChange"}},0,["rekammedis-anamnesis-riwayat-workspace"],["component","box","container","panel","tabpanel","com-tab","rekammedis-anamnesis-riwayat-workspace"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"rekammedis-anamnesis-riwayat-workspace":true},["widget.rekammedis-anamnesis-riwayat-workspace"],0,[rekammedis.anamnesis.riwayat,"Workspace"],0));(Ext.cmd.derive("rekammedis.anamnesis.riwayat.WorkspaceController",Ext.app.ViewController,{onTabChange:function(m,n){var l=this.getView().kunjungan;if(n.load){n.load(l)}}},0,0,0,0,["controller.rekammedis-anamnesis-riwayat-workspace"],0,[rekammedis.anamnesis.riwayat,"WorkspaceController"],0));(Ext.cmd.derive("rekammedis.anamnesis.riwayat.alergi.Form",com.Form,{controller:"rekammedis-anamnesis-riwayat-alergi-form",model:"rekammedis.anamnesis.riwayat.alergi.Model",items:[{xtype:"textareafield",name:"DESKRIPSI",listeners:{blur:"onFocusLeave"}}]},0,["rekammedis-anamnesis-riwayat-alergi-form"],["component","box","container","panel","form","com-form","rekammedis-anamnesis-riwayat-alergi-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"rekammedis-anamnesis-riwayat-alergi-form":true},["widget.rekammedis-anamnesis-riwayat-alergi-form"],0,[rekammedis.anamnesis.riwayat.alergi,"Form"],0));(Ext.cmd.derive("rekammedis.anamnesis.riwayat.alergi.FormController",Ext.app.ViewController,{onFocusLeave:function(p,n,q){var o=this,s=o.getView();s.save(p)}},0,0,0,0,["controller.rekammedis-anamnesis-riwayat-alergi-form"],0,[rekammedis.anamnesis.riwayat.alergi,"FormController"],0));(Ext.cmd.derive("rekammedis.anamnesis.riwayat.alergi.List",com.Grid,{viewModel:{stores:{store:{type:"rekammedis-anamnesis-riwayat-alergi-store"}}},hideHeaders:true,history:false,columns:[{xtype:"templatecolumn",flex:1,tpl:new Ext.XTemplate('<div style="font-weight: bold; font-size: 12px; white-space:normal !important;">{[values.DESKRIPSI]}</div>','<div style="font-size: 12px; white-space:normal !important;">{[this.tanggalFormat(values.TANGGAL)]}</div>',{tanggalFormat:function(g){var l=Ext.isDate(g)?g:Ext.Date.parse(g,"Y-m-d H:i:s");return Ext.Date.format(l,"d-m-Y H:i:s")}})}],load:function(l){var n=this;if(Ext.getClassName(l)=="data.model.Kunjungan"){var m=l;if(n.history){l={HISTORY:1,NORM:m.get("REFERENSI").PENDAFTARAN.NORM,sort:Ext.JSON.encode({property:"TANGGAL",direction:"DESC"})};if(m.history){l.NOT=Ext.JSON.encode({ID:m.history.get("ID")})}}else{l={KUNJUNGAN:m.get("NOMOR")}}}n.setParams(l);com.Grid.prototype.load.apply(this,l)}},0,["rekammedis-anamnesis-riwayat-alergi-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","rekammedis-anamnesis-riwayat-alergi-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"rekammedis-anamnesis-riwayat-alergi-list":true},["widget.rekammedis-anamnesis-riwayat-alergi-list"],0,[rekammedis.anamnesis.riwayat.alergi,"List"],0));(Ext.cmd.derive("rekammedis.anamnesis.riwayat.alergi.Workspace",com.Form,{controller:"rekammedis-anamnesis-riwayat-alergi-workspace",viewModel:{stores:{store:{type:"rekammedis-anamnesis-riwayat-alergi-store"}},data:{kjgn:undefined}},layout:"border",bodyPadding:1,items:[{region:"center",layout:"fit",xtype:"rekammedis-anamnesis-riwayat-alergi-form",border:false,listeners:{save:"onSave"}},{region:"east",flex:0.75,split:true,collapsible:true,xtype:"rekammedis-anamnesis-riwayat-alergi-history-workspace",ui:"panel-gray",fullscreenEnabled:true}],load:function(u){var p=this,q=p.down("rekammedis-anamnesis-riwayat-alergi-form"),o=p.down("rekammedis-anamnesis-riwayat-alergi-history-workspace"),s=p.getViewModel(),t=s.get("store");if(u){s.set("kjgn",u);t.queryParams={KUNJUNGAN:u.get("NOMOR")};t.load({callback:function(f,g,e){if(e){q.loadRecord(f[0]);u.history=f[0]}else{q.createRecord({KUNJUNGAN:u.get("NOMOR"),STATUS:1,TANGGAL:Ext.Date.format(p.getSysdate(),"Y-m-d H:i:s")})}o.load(u)}})}}},0,["rekammedis-anamnesis-riwayat-alergi-workspace"],["component","box","container","panel","form","com-form","rekammedis-anamnesis-riwayat-alergi-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"rekammedis-anamnesis-riwayat-alergi-workspace":true},["widget.rekammedis-anamnesis-riwayat-alergi-workspace"],0,[rekammedis.anamnesis.riwayat.alergi,"Workspace"],0));(Ext.cmd.derive("rekammedis.anamnesis.riwayat.alergi.WorkspaceController",Ext.app.ViewController,{onSave:function(s,w,t){var p=this,u=p.getView(),q=p.getViewModel(),v=q.get("kjgn");u.load(v)}},0,0,0,0,["controller.rekammedis-anamnesis-riwayat-alergi-workspace"],0,[rekammedis.anamnesis.riwayat.alergi,"WorkspaceController"],0));(Ext.cmd.derive("rekammedis.anamnesis.riwayat.alergi.history.Tab",com.Tab,{controller:"rekammedis-anamnesis-riwayat-alergi-history-tab",kunjungan:undefined,items:[{title:"Sebelumnya",history:true,xtype:"rekammedis-anamnesis-riwayat-alergi-list"}],load:function(m){var o=this,n=o.down("rekammedis-anamnesis-riwayat-alergi-list"),p=this.getActiveTab();n.setListConfig({paging:true});this.kunjungan=m;if(p){p.load(m)}else{if(o.items.getCount()>0){o.setActiveTab(0)}}},listeners:{tabchange:"onTabChange"}},0,["rekammedis-anamnesis-riwayat-alergi-history-tab"],["component","box","container","panel","tabpanel","com-tab","rekammedis-anamnesis-riwayat-alergi-history-tab"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"rekammedis-anamnesis-riwayat-alergi-history-tab":true},["widget.rekammedis-anamnesis-riwayat-alergi-history-tab"],0,[rekammedis.anamnesis.riwayat.alergi.history,"Tab"],0));(Ext.cmd.derive("rekammedis.anamnesis.riwayat.alergi.history.TabController",Ext.app.ViewController,{onTabChange:function(m,n){var l=this.getView().kunjungan;if(n.load){n.load(l)}}},0,0,0,0,["controller.rekammedis-anamnesis-riwayat-alergi-history-tab"],0,[rekammedis.anamnesis.riwayat.alergi.history,"TabController"],0));(Ext.cmd.derive("rekammedis.anamnesis.riwayat.alergi.history.Workspace",com.Form,{title:"Catatan Medis",iconCls:"x-fa fa-file-text-o",layout:"fit",bodyPadding:0,items:[{xtype:"rekammedis-anamnesis-riwayat-alergi-history-tab"}],load:function(l){var m=this,n=m.down("rekammedis-anamnesis-riwayat-alergi-history-tab");n.load(l)}},0,["rekammedis-anamnesis-riwayat-alergi-history-workspace"],["component","box","container","panel","form","com-form","rekammedis-anamnesis-riwayat-alergi-history-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"rekammedis-anamnesis-riwayat-alergi-history-workspace":true},["widget.rekammedis-anamnesis-riwayat-alergi-history-workspace"],0,[rekammedis.anamnesis.riwayat.alergi.history,"Workspace"],0));(Ext.cmd.derive("rekammedis.anamnesis.riwayat.perjalananpenyakit.Form",com.Form,{model:"rekammedis.anamnesis.riwayat.perjalananpenyakit.Model",controller:"rekammedis-anamnesis-riwayat-perjalananpenyakit-form",defaults:{anchor:"100%",allowBlank:false,margin:"0 0 1 0"},defaultFocus:"DESKRIPSI",items:[{xtype:"textarea",emptyText:"[Masukkan Riwayat Perjalanan Penyakit]",name:"DESKRIPSI",bind:{readOnly:"{formConfig.viewOnly}"}}],dockedItems:[{xtype:"toolbar",bind:{hidden:"{!formConfig.simpan}"},dock:"bottom",items:["->",{text:"Simpan",iconCls:"x-fa fa-save",formBind:true,handler:"onSimpan",ui:"soft-red",bind:{hidden:"{!formConfig.simpan}"}}]}]},0,["rekammedis-anamnesis-riwayat-perjalananpenyakit-form"],["component","box","container","panel","form","com-form","rekammedis-anamnesis-riwayat-perjalananpenyakit-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"rekammedis-anamnesis-riwayat-perjalananpenyakit-form":true},["widget.rekammedis-anamnesis-riwayat-perjalananpenyakit-form"],0,[rekammedis.anamnesis.riwayat.perjalananpenyakit,"Form"],0));(Ext.cmd.derive("rekammedis.anamnesis.riwayat.perjalananpenyakit.FormController",Ext.app.ViewController,{onSimpan:function(m){var l=this,n=l.getView();n.save(m)}},0,0,0,0,["controller.rekammedis-anamnesis-riwayat-perjalananpenyakit-form"],0,[rekammedis.anamnesis.riwayat.perjalananpenyakit,"FormController"],0));(Ext.cmd.derive("rekammedis.anamnesis.riwayat.perjalananpenyakit.List",com.Grid,{viewModel:{stores:{store:{type:"rekammedis-anamnesis-riwayat-perjalananpenyakit-store"}}},hideHeaders:true,history:false,columns:[{xtype:"templatecolumn",flex:1,tpl:new Ext.XTemplate('<div style="font-weight: bold; font-size: 12px; white-space:normal !important;">{[values.DESKRIPSI]}</div>','<div style="font-size: 12px; white-space:normal !important;">{[this.tanggalFormat(values.TANGGAL)]}</div>',{tanggalFormat:function(g){var l=Ext.isDate(g)?g:Ext.Date.parse(g,"Y-m-d H:i:s");return Ext.Date.format(l,"d-m-Y H:i:s")}})}],load:function(l){var n=this;if(Ext.getClassName(l)=="data.model.Kunjungan"){var m=l;if(n.history){l={HISTORY:1,NORM:m.get("REFERENSI").PENDAFTARAN.NORM,sort:Ext.JSON.encode({property:"TANGGAL",direction:"DESC"})};if(m.history){l.NOT=Ext.JSON.encode({ID:m.history.get("ID")})}}else{l={KUNJUNGAN:m.get("NOMOR")}}}n.setParams(l);com.Grid.prototype.load.apply(this,l)}},0,["rekammedis-anamnesis-riwayat-perjalananpenyakit-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","rekammedis-anamnesis-riwayat-perjalananpenyakit-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"rekammedis-anamnesis-riwayat-perjalananpenyakit-list":true},["widget.rekammedis-anamnesis-riwayat-perjalananpenyakit-list"],0,[rekammedis.anamnesis.riwayat.perjalananpenyakit,"List"],0));(Ext.cmd.derive("rekammedis.anamnesis.riwayat.perjalananpenyakit.Workspace",com.Form,{viewModel:{stores:{store:{type:"rekammedis-anamnesis-riwayat-perjalananpenyakit-store"}}},layout:"border",bodyPadding:1,items:[{region:"center",xtype:"rekammedis-anamnesis-riwayat-perjalananpenyakit-form",layout:"fit",border:false},{region:"east",flex:0.75,split:true,collapsible:true,xtype:"rekammedis-anamnesis-riwayat-perjalananpenyakit-history-workspace",ui:"panel-gray",fullscreenEnabled:true}],load:function(u){var p=this,q=p.down("rekammedis-anamnesis-riwayat-perjalananpenyakit-form"),o=p.down("rekammedis-anamnesis-riwayat-perjalananpenyakit-history-workspace"),s=p.getViewModel(),t=s.get("store");if(u){t.queryParams={KUNJUNGAN:u.get("NOMOR"),PENDAFTARAN:u.get("NOPEN")};t.load({callback:function(g,f,e){if(e){q.loadRecord(g[0]);u.history=g[0]}else{q.createRecord({KUNJUNGAN:u.get("NOMOR"),STATUS:1,TANGGAL:Ext.Date.format(p.getSysdate(),"Y-m-d H:i:s")})}o.load(u)}})}}},0,["rekammedis-anamnesis-riwayat-perjalananpenyakit-workspace"],["component","box","container","panel","form","com-form","rekammedis-anamnesis-riwayat-perjalananpenyakit-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"rekammedis-anamnesis-riwayat-perjalananpenyakit-workspace":true},["widget.rekammedis-anamnesis-riwayat-perjalananpenyakit-workspace"],0,[rekammedis.anamnesis.riwayat.perjalananpenyakit,"Workspace"],0));(Ext.cmd.derive("rekammedis.anamnesis.riwayat.perjalananpenyakit.history.Tab",com.Tab,{controller:"rekammedis-anamnesis-riwayat-perjalananpenyakit-history-tab",kunjungan:undefined,items:[{title:"Sebelumnya",history:true,xtype:"rekammedis-anamnesis-riwayat-perjalananpenyakit-list"}],load:function(m){var o=this,n=o.down("rekammedis-anamnesis-riwayat-perjalananpenyakit-list"),p=this.getActiveTab();n.setListConfig({paging:true});this.kunjungan=m;if(p){p.load(m)}else{if(o.items.getCount()>0){o.setActiveTab(0)}}},listeners:{tabchange:"onTabChange"}},0,["rekammedis-anamnesis-riwayat-perjalananpenyakit-history-tab"],["component","box","container","panel","tabpanel","com-tab","rekammedis-anamnesis-riwayat-perjalananpenyakit-history-tab"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"rekammedis-anamnesis-riwayat-perjalananpenyakit-history-tab":true},["widget.rekammedis-anamnesis-riwayat-perjalananpenyakit-history-tab"],0,[rekammedis.anamnesis.riwayat.perjalananpenyakit.history,"Tab"],0));(Ext.cmd.derive("rekammedis.anamnesis.riwayat.perjalananpenyakit.history.TabController",Ext.app.ViewController,{onTabChange:function(m,n){var l=this.getView().kunjungan;if(n.load){n.load(l)}}},0,0,0,0,["controller.rekammedis-anamnesis-riwayat-perjalananpenyakit-history-tab"],0,[rekammedis.anamnesis.riwayat.perjalananpenyakit.history,"TabController"],0));(Ext.cmd.derive("rekammedis.anamnesis.riwayat.perjalananpenyakit.history.Workspace",com.Form,{layout:"fit",title:"Catatan Medis",iconCls:"x-fa fa-file-text-o",bodyPadding:0,items:[{xtype:"rekammedis-anamnesis-riwayat-perjalananpenyakit-history-tab"}],load:function(l){var m=this,n=m.down("rekammedis-anamnesis-riwayat-perjalananpenyakit-history-tab");n.load(l)}},0,["rekammedis-anamnesis-riwayat-perjalananpenyakit-history-workspace"],["component","box","container","panel","form","com-form","rekammedis-anamnesis-riwayat-perjalananpenyakit-history-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"rekammedis-anamnesis-riwayat-perjalananpenyakit-history-workspace":true},["widget.rekammedis-anamnesis-riwayat-perjalananpenyakit-history-workspace"],0,[rekammedis.anamnesis.riwayat.perjalananpenyakit.history,"Workspace"],0));(Ext.cmd.derive("rekammedis.anamnesis.umum.Form",com.Form,{model:"rekammedis.anamnesis.umum.Model",controller:"rekammedis-anamnesis-umum-form",defaults:{allowBlank:false,margin:"0 0 1 0",labelAlign:"top"},defaultFocus:"DESKRIPSI",layout:"fit",items:[{xtype:"textarea",emptyText:"[Masukkan Deskripsi Anamnesis]",name:"DESKRIPSI",border:false,bind:{readOnly:"{formConfig.viewOnly}",value:"{DESKRIPSI}"}}],dockedItems:[{xtype:"toolbar",bind:{hidden:"{!formConfig.simpan}"},dock:"bottom",items:["->",{text:"Simpan",iconCls:"x-fa fa-save",formBind:true,handler:"onSimpan",ui:"soft-red",bind:{hidden:"{!formConfig.simpan}"}}]}]},0,["rekammedis-anamnesis-umum-form"],["component","box","container","panel","form","com-form","rekammedis-anamnesis-umum-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"rekammedis-anamnesis-umum-form":true},["widget.rekammedis-anamnesis-umum-form"],0,[rekammedis.anamnesis.umum,"Form"],0));(Ext.cmd.derive("rekammedis.anamnesis.umum.FormController",Ext.app.ViewController,{onSimpan:function(m){var l=this,n=l.getView();n.save(m)}},0,0,0,0,["controller.rekammedis-anamnesis-umum-form"],0,[rekammedis.anamnesis.umum,"FormController"],0));(Ext.cmd.derive("rekammedis.anamnesis.umum.List",com.Grid,{viewModel:{stores:{store:{type:"rekammedis-anamnesis-umum-store"}}},hideHeaders:true,history:false,columns:[{xtype:"templatecolumn",flex:1,tpl:new Ext.XTemplate('<div style="font-weight: bold; font-size: 12px; white-space:normal !important;">{[values.DESKRIPSI]}</div>','<div style="font-size: 12px; white-space:normal !important;">{[this.tanggalFormat(values.TANGGAL)]}</div>',{tanggalFormat:function(g){var l=Ext.isDate(g)?g:Ext.Date.parse(g,"Y-m-d H:i:s");return Ext.Date.format(l,"d-m-Y H:i:s")}})}],load:function(l){var n=this;if(Ext.getClassName(l)=="data.model.Kunjungan"){var m=l;if(n.history){l={HISTORY:1,NORM:m.get("REFERENSI").PENDAFTARAN.NORM,sort:Ext.JSON.encode({property:"TANGGAL",direction:"DESC"})};if(m.history){l.NOT=Ext.JSON.encode({ID:m.history.get("ID")})}}else{l={KUNJUNGAN:m.get("NOMOR")}}}n.setParams(l);com.Grid.prototype.load.call(this)}},0,["rekammedis-anamnesis-umum-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","rekammedis-anamnesis-umum-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"rekammedis-anamnesis-umum-list":true},["widget.rekammedis-anamnesis-umum-list"],0,[rekammedis.anamnesis.umum,"List"],0));(Ext.cmd.derive("rekammedis.anamnesis.umum.Workspace",com.Form,{viewModel:{stores:{store:{type:"rekammedis-anamnesis-umum-store"}}},layout:"border",bodyPadding:1,items:[{region:"center",xtype:"rekammedis-anamnesis-umum-form",border:false},{region:"east",flex:0.75,split:true,collapsible:true,xtype:"rekammedis-anamnesis-umum-history-workspace",ui:"panel-gray",fullscreenEnabled:true}],load:function(u){var q=this,s=q.down("rekammedis-anamnesis-umum-form"),p=q.down("rekammedis-anamnesis-umum-history-workspace"),t=q.getViewModel().get("store"),o={KUNJUNGAN:u.get("NOMOR"),PENDAFTARAN:u.get("NOPEN")};s.setFormConfig({});t.setQueryParams(o);t.load(function(f,g,e){if(e){if(f.length>0){s.loadRecord(f[0]);u.history=f[0]}}else{s.createRecord(o)}p.load(u)})}},0,["rekammedis-anamnesis-umum-workspace"],["component","box","container","panel","form","com-form","rekammedis-anamnesis-umum-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"rekammedis-anamnesis-umum-workspace":true},["widget.rekammedis-anamnesis-umum-workspace"],0,[rekammedis.anamnesis.umum,"Workspace"],0));(Ext.cmd.derive("rekammedis.anamnesis.umum.history.Tab",com.Tab,{controller:"rekammedis-anamnesis-umum-history-tab",kunjungan:undefined,items:[{title:"Sebelumnya",history:true,xtype:"rekammedis-anamnesis-umum-list"}],load:function(m){var o=this,n=o.down("rekammedis-anamnesis-umum-list"),p=o.getActiveTab();n.setListConfig({paging:true});o.kunjungan=m;if(p){if(p.load){p.load(m)}}else{if(o.items.getCount()>0){o.setActiveTab(0)}}},listeners:{tabchange:"onTabChange"}},0,["rekammedis-anamnesis-umum-history-tab"],["component","box","container","panel","tabpanel","com-tab","rekammedis-anamnesis-umum-history-tab"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"rekammedis-anamnesis-umum-history-tab":true},["widget.rekammedis-anamnesis-umum-history-tab"],0,[rekammedis.anamnesis.umum.history,"Tab"],0));(Ext.cmd.derive("rekammedis.anamnesis.umum.history.TabController",Ext.app.ViewController,{onTabChange:function(m,n){var l=this.getView().kunjungan;if(n.load){n.load(l)}}},0,0,0,0,["controller.rekammedis-anamnesis-umum-history-tab"],0,[rekammedis.anamnesis.umum.history,"TabController"],0));(Ext.cmd.derive("rekammedis.anamnesis.umum.history.Workspace",com.Form,{title:"Catatan Medis",iconCls:"x-fa fa-file-text-o",layout:"fit",bodyPadding:0,items:[{xtype:"rekammedis-anamnesis-umum-history-tab"}],load:function(l){var m=this,n=m.down("rekammedis-anamnesis-umum-history-tab");n.load(l)}},0,["rekammedis-anamnesis-umum-history-workspace"],["component","box","container","panel","form","com-form","rekammedis-anamnesis-umum-history-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"rekammedis-anamnesis-umum-history-workspace":true},["widget.rekammedis-anamnesis-umum-history-workspace"],0,[rekammedis.anamnesis.umum.history,"Workspace"],0));(Ext.cmd.derive("rekammedis.icd.Combo",com.Combo,{viewModel:{stores:{store:{type:"diagnosa-store"}}},queryMode:"remote",queryParam:"QUERY",displayField:"STR",valueField:"CODE",emptyText:"[Masukkan Kode ICD]",typeAhead:true,hideTrigger:true,minChars:2,tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="x-boundlist-item"><strong>{CODE}</strong> - {STR} <b>Versi. {VERSION}</b></div>',"</tpl>"),displayTpl:Ext.create("Ext.XTemplate",'<tpl for=".">',"{CODE} - {STR}","</tpl>")},0,["rekammedis-icd-combo"],["component","box","field","textfield","pickerfield","combobox","combo","com-combo","rekammedis-icd-combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,"com-combo":true,"rekammedis-icd-combo":true},["widget.rekammedis-icd-combo"],0,[rekammedis.icd,"Combo"],0));(Ext.cmd.derive("rekammedis.icd.Link",com.Tab,{viewModel:{data:{pasienMeninggal:false}},ui:"header-tab",activeTab:0,isLayanan:false,isFirst:true,setIsLayanan:function(f){this.isLayanan=f},load:function(t){var w=this,q=w.getViewModel(),p=w.getReferences();if(w.isFirst){w.add({title:"Diagnosa (ICD 10)",xtype:"diagnosa-workspace",reference:"diag-icd",isLayanan:w.isLayanan});w.add({title:"Tindakan (ICD 9 CM)",xtype:"icd-tindakan-workspace",reference:"tind-icd",isLayanan:w.isLayanan});w.add({title:"Penyebab Kematian",reference:"penyebabkematian-icd",xtype:"penyebabkematian-workspace",bind:{hidden:"{!pasienMeninggal}"}});if(Ext.getClassName(t)!="data.model.Kunjungan"){w.add({title:"Grouping INACBG",xtype:"grouping-workspace"});var u=t.get("REFERENSI"),s=u?(u.PASIEN?u.PASIEN.STATUS==2:false):false;q.set("pasienMeninggal",s);w.down("grouping-workspace").setICDWorkspace(w.down("diagnosa-workspace"),w.down("icd-tindakan-workspace"))}w.isFirst=false}w.setActiveTab(0);var v=null;w.items.each(function(e,f){e.loadRecord(t);if(f==0){v=e}});if(v){v.setLoading(false)}}},0,["icd-link"],["component","box","container","panel","tabpanel","com-tab","icd-link"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"icd-link":true},["widget.icd-link"],0,[rekammedis.icd,"Link"],0));(Ext.cmd.derive("rekammedis.icd.Workspace",com.Form,{controller:"workspace-icd",viewModel:{data:{pasien:undefined,selected:undefined},formulas:{getFormatPendaftaran:function(m){var l=m("pendaftaran.NOMOR"),n=l?l.substring(0,6)+"."+l.substring(6):"";return n}}},layout:{type:"vbox",align:"stretch"},isLayanan:false,title:"Coding ICD",header:{itemPosition:1,items:[{xtype:"displayfield",bind:{value:"<strong>No. Pendaftaran: {getFormatPendaftaran}</strong>"}}]},items:[{xtype:"container",reference:"info",layout:{type:"hbox"},padding:5,items:[{xtype:"pasien-short-detil",reference:"pasien",flex:1,border:false},{xtype:"container",flex:1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"tujuan-detil",cls:"",margin:"0 0 5 0",reference:"tujuan"},{xtype:"penjamin-detil",cls:"",layout:{type:"vbox",align:"right"},reference:"penjamin"}]}]},{xtype:"icd-link",flex:1,reference:"icd-link"}],load:function(y,D,B,C){var w=this,z=w.getViewModel(),E=w.down("[reference=pasien]"),u=w.down("[reference=icd-link]"),x=w.down("[reference=tujuan]"),v=w.down("[reference=penjamin]"),A=w.down("[reference=info]");u.setIsLayanan(w.isLayanan);if(Ext.getClassName(y)=="data.model.Kunjungan"){A.setHidden(true);z.set("selected",y);u.load(y)}else{z.set("pendaftaran",D);z.set("selected",D);u.load(D);E.load(y);x.load(B);v.load(C)}}},0,["workspace-icd"],["component","box","container","panel","form","com-form","workspace-icd"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-icd":true},["widget.workspace-icd"],0,[rekammedis.icd,"Workspace"],0));(Ext.cmd.derive("rekammedis.icd.WorkspaceController",Ext.app.ViewController,{onReload:function(o){var m=this,p=m.getReferences(),n=m.getViewModel().get("selected");p.icdlink.load(n)}},0,0,0,0,["controller.workspace-icd"],0,[rekammedis.icd,"WorkspaceController"],0));(Ext.cmd.derive("rekammedis.icd.diagnosa.Form",com.Form,{model:"data.model.Icd",viewModel:{data:{formConfig:{hideKirimInacbg:false}}},layout:{type:"vbox",align:"stretch"},defaults:{anchor:"99%"},items:[{xtype:"fieldcontainer",fieldLabel:"Kategori",defaultType:"checkboxfield",layout:"hbox",items:[{inputValue:"1",name:"UTAMA",boxLabel:"Primary",checked:false},{margin:"0 0 0 10",inputValue:"1",name:"INACBG",boxLabel:"Kirim Ke INACBG",checked:true,bind:{hidden:"{formConfig.hideKirimInacbg}"}}]},{xtype:"rekammedis-icd-combo",fieldLabel:"Kode",emptyText:"[Masukkan Kode ICD 10]",labelWidth:110,reference:"kode-icd",allowBlank:false,name:"KODE",reference:"icd"},{xtype:"textareafield",emptyText:"Masukkan Diagnosa Dokter",flex:1,reference:"diag",name:"DIAGNOSA"}],buttons:[{text:"Simpan",iconCls:"x-fa fa-save",ui:"soft-blue",handler:"onSimpan"}],onBeforeGetRecord:function(m,l){var n=m.down("[name=INACBG]");l.INACBG=n.getValue()?1:0},setCombo:function(n){var s=n.get("REFERENSI"),o=this.down("combobox"),p=s?s.DIAGNOSA:null,q=p?Ext.create("data.model.Diagnosa",p):null;o.select(q)}},0,["diagnosa-form"],["component","box","container","panel","form","com-form","diagnosa-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"diagnosa-form":true},["widget.diagnosa-form"],0,[rekammedis.icd.diagnosa,"Form"],0));(Ext.cmd.derive("rekammedis.icd.diagnosa.Grid",com.Grid,{viewModel:{stores:{store:{type:"icd-store"}}},columns:[{xtype:"rownumberer",text:"No",align:"left",width:40},{text:"Kode (ICD 10)",dataIndex:"KODE"},{text:"Deskripsi",dataIndex:"KODE",flex:1,renderer:"renderDeskripsi"},{text:"Diagnosa",dataIndex:"DIAGNOSA",flex:1},{text:"Kategori",dataIndex:"UTAMA",renderer:"renderKategori"},{text:"Incbg",dataIndex:"INACBG",renderer:"renderIncbg"},{xtype:"checkcolumn",text:"Status",dataIndex:"STATUS",listeners:{checkchange:"onChange"}}],getStore:function(){var l=this,m=l.getViewModel(),n=m?m.get("store"):null;if(n){return n}return com.Grid.prototype.getStore.call(this)}},0,["diagnosa-grid"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","diagnosa-grid"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"diagnosa-grid":true},["widget.diagnosa-grid"],0,[rekammedis.icd.diagnosa,"Grid"],0));(Ext.cmd.derive("rekammedis.icd.diagnosa.Model",Ext.app.ViewModel,{stores:{store:{type:"icd-store"}}},0,0,0,0,["viewmodel.diagmodel"],0,[rekammedis.icd.diagnosa,"Model"],0));(Ext.cmd.derive("rekammedis.icd.diagnosa.Workspace",com.Form,{controller:"workspace-diagnosa",layout:{type:"hbox",align:"stretch"},cls:"x-br-top",isLayanan:false,items:[{xtype:"diagnosa-grid",flex:2,border:false,cls:"x-br-right",reference:"griddiagnosa",listeners:{select:"onSelect"}},{xtype:"diagnosa-form",flex:1,border:false,reference:"formdiagnosa"}],onLoadRecord:function(o,n){var p=o.down("diagnosa-form"),q=o.down("diagnosa-grid"),s=Ext.getClassName(n)=="data.model.Kunjungan"?n.get("NOPEN"):n.get("NOMOR");q.load({NOPEN:s,STATUS:1});p.setFormConfig({hideKirimInacbg:o.isLayanan});p.createRecord({NOPEN:s,INACBG:o.isLayanan?0:1,UTAMA:1,TANGGAL:o.getSysdate(),STATUS:1});p.focus("KODE")},getDiagnosis:function(){var n=this,o=n.down("diagnosa-grid").getStore();if(o){var p=o.getArrayData(),m=[];Ext.Array.each(p,function(e){if(e.INACBG==1&&e.STATUS==1){m.push(e)}});return m}return[]}},0,["diagnosa-workspace"],["component","box","container","panel","form","com-form","diagnosa-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"diagnosa-workspace":true},["widget.diagnosa-workspace"],0,[rekammedis.icd.diagnosa,"Workspace"],0));(Ext.cmd.derive("rekammedis.icd.diagnosa.WorkspaceController",Ext.app.ViewController,{renderDeskripsi:function(v,e,w,u,x,g){var y=w.get("REFERENSI"),t=y?(y.DIAGNOSA?y.DIAGNOSA.STR:""):"";return t},renderKategori:function(f){return f==1?"primary":"Sekunder"},renderIncbg:function(f){return f==1?"Terkirim":"Tidak Terkirim"},onSimpan:function(e){var m=this,n=m.getReferences();n.formdiagnosa.save(e,{success:"Tindakan ICD10 telah tersimpan"},function(l,g,f){if(f){n.formdiagnosa.createRecord({NOPEN:l.get("NOPEN"),UTAMA:2,INACBG:1,TANGGAL:m.getView().getSysdate(),STATUS:1});n.formdiagnosa.focus("KODE");(new Ext.util.DelayedTask(function(){n.griddiagnosa.getSelectionModel().deselect(l);n.griddiagnosa.reload()})).delay(1000)}})},onChange:function(u,w,v){var x=this,t=x.getView(),s=x.getReferences(),g=s.griddiagnosa,y=g.getStore().getAt(w);if(y.get("UTAMA")==1){y.set("STATUS",1);return false}y.set("STATUS",v?1:0);y.scope=this;y.save({callback:function(f,e,l){if(l){t.notifyMessage("Diagnosa di "+(v==true?"Aktifkan":"Non Aktifkan"))}else{y.set("STATUS",v?0:1)}s.griddiagnosa.reload()}})},onSelect:function(s,f,q){var o=this,p=o.getReferences();p.formdiagnosa.setCollapsed(false);p.formdiagnosa.loadRecord(f);p.formdiagnosa.setCombo(f)}},0,0,0,0,["controller.workspace-diagnosa"],0,[rekammedis.icd.diagnosa,"WorkspaceController"],0));(Ext.cmd.derive("rekammedis.icd.penyebabkematian.Form",com.Form,{model:"data.model.PenyebabKematian",layout:{type:"vbox",align:"stretch"},defaults:{anchor:"99%"},items:[{xtype:"fieldcontainer",fieldLabel:"Kategori",defaultType:"checkboxfield",layout:"hbox",items:[{inputValue:"1",name:"UTAMA",boxLabel:"Primary",checked:false}]},{xtype:"rekammedis-icd-combo",fieldLabel:"Kode",emptyText:"[Masukkan Kode ICD 10]",labelWidth:110,reference:"kode-icd",allowBlank:false,name:"KODE",reference:"icd"},{xtype:"textareafield",emptyText:"Masukkan Diagnosa Dokter",flex:1,name:"DIAGNOSA"}],buttons:[{text:"Simpan",iconCls:"x-fa fa-save",ui:"soft-blue",handler:"onSimpan"}],setCombo:function(n){var s=n.get("REFERENSI"),o=this.down("combobox"),p=s?s.DIAGNOSA:null,q=p?Ext.create("data.model.Diagnosa",p):null;o.select(q)}},0,["penyebabkematian-form"],["component","box","container","panel","form","com-form","penyebabkematian-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"penyebabkematian-form":true},["widget.penyebabkematian-form"],0,[rekammedis.icd.penyebabkematian,"Form"],0));(Ext.cmd.derive("rekammedis.icd.penyebabkematian.Grid",Ext.grid.Panel,{bind:{store:"{gridpenyebabkematianstore}"},columns:[{xtype:"rownumberer",text:"No",align:"left",width:40},{text:"Kode (ICD 10)",dataIndex:"KODE"},{text:"Deskripsi",dataIndex:"KODE",flex:1,renderer:"renderDeskripsi"},{text:"Diagnosa",dataIndex:"DIAGNOSA",flex:1},{text:"Kategori",dataIndex:"UTAMA",renderer:"renderKategori"},{xtype:"checkcolumn",text:"Status",dataIndex:"STATUS",listeners:{checkchange:"onChange"}}]},0,["penyebabkematian-grid"],["component","box","container","panel","tablepanel","gridpanel","grid","penyebabkematian-grid"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"penyebabkematian-grid":true},["widget.penyebabkematian-grid"],0,[rekammedis.icd.penyebabkematian,"Grid"],0));(Ext.cmd.derive("rekammedis.icd.penyebabkematian.Model",Ext.app.ViewModel,{stores:{gridpenyebabkematianstore:{type:"penyebabkematian-store"}}},0,0,0,0,["viewmodel.penyebabkematian"],0,[rekammedis.icd.penyebabkematian,"Model"],0));(Ext.cmd.derive("rekammedis.icd.penyebabkematian.Workspace",com.Form,{controller:"workspace-penyebabkematian",viewModel:{type:"penyebabkematian"},layout:{type:"hbox",align:"stretch"},cls:"x-br-top",items:[{xtype:"penyebabkematian-grid",flex:2,border:false,cls:"x-br-right",reference:"gridpenyebabkematian",listeners:{select:"onSelect"}},{xtype:"penyebabkematian-form",flex:1,border:false,reference:"formpenyebabkematian"}],onLoadRecord:function(o,n){var p=o.down("penyebabkematian-form"),s=o.getViewModel().get("gridpenyebabkematianstore"),q=Ext.getClassName(n)=="data.model.Kunjungan"?n.get("NOPEN"):n.get("NOMOR");if(s){s.queryParams={NOPEN:q,STATUS:1};s.removeAll();s.load()}p.createRecord({NOPEN:q,TANGGAL:o.getSysdate(),STATUS:1});p.focus("KODE")}},0,["penyebabkematian-workspace"],["component","box","container","panel","form","com-form","penyebabkematian-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"penyebabkematian-workspace":true},["widget.penyebabkematian-workspace"],0,[rekammedis.icd.penyebabkematian,"Workspace"],0));(Ext.cmd.derive("rekammedis.icd.penyebabkematian.WorkspaceController",Ext.app.ViewController,{renderDeskripsi:function(v,e,w,u,x,g){var y=w.get("REFERENSI"),t=y?(y.DIAGNOSA?y.DIAGNOSA.STR:""):"";return t},renderKategori:function(f){return f==1?"Primary":"Sekunder"},renderIncbg:function(f){return f==1?"Terkirim":"Tidak Terkirim"},onSimpan:function(e){var m=this,n=m.getReferences();n.formpenyebabkematian.save(e,{success:"Penyebab Kematian telah tersimpan"},function(l,g,f){if(f){n.gridpenyebabkematian.getStore().load();n.formpenyebabkematian.createRecord({NOPEN:l.get("NOPEN"),UTAMA:2,TANGGAL:m.getView().getSysdate(),STATUS:1});n.formpenyebabkematian.focus("KODE")}})},onChange:function(u,t,v){var w=this,s=w.getView(),g=w.getViewModel(),q=g.get("gridpenyebabkematianstore");h=q.getAt(t);if(h.get("UTAMA")==1){h.set("STATUS",1);return false}h.set("STATUS",v?1:0);h.scope=this;h.save({callback:function(l,e,f){if(f){s.notifyMessage("Status Tindakan di"+(v==true?"Aktifkan":"NonAktifkan"))}else{h.set("STATUS",v?0:1)}}})},onSelect:function(s,f,q){var o=this,p=o.getReferences();p.formpenyebabkematian.setCollapsed(false);p.formpenyebabkematian.loadRecord(f);p.formpenyebabkematian.setCombo(f)}},0,0,0,0,["controller.workspace-penyebabkematian"],0,[rekammedis.icd.penyebabkematian,"WorkspaceController"],0));(Ext.cmd.derive("rekammedis.icd.tindakan.Form",com.Form,{model:"data.model.Icd9",viewModel:{data:{formConfig:{hideKirimInacbg:false}}},layout:{type:"vbox",align:"stretch"},defaults:{anchor:"99%"},items:[{xtype:"fieldcontainer",defaultType:"checkboxfield",margin:"0 0 0 20",items:[{boxLabel:"Kirim Ke INACBG",inputValue:"1",name:"INACBG",checked:true,bind:{hidden:"{formConfig.hideKirimInacbg}"}}]},{xtype:"rekammedis-icd-combo",fieldLabel:"Kode",emptyText:"[Masukkan Kode ICD 9]",params:{ICD9:1},labelWidth:110,allowBlank:false,name:"KODE",reference:"icd"},{xtype:"textareafield",emptyText:"Masukkan Tindakan Dokter",flex:1,name:"TINDAKAN"}],buttons:[{text:"Simpan",iconCls:"x-fa fa-save",ui:"soft-blue",handler:"onSimpan"}],onBeforeGetRecord:function(m,l){var n=m.down("[name=INACBG]");l.INACBG=n.getValue()?1:0},setCombo:function(n){var s=n.get("REFERENSI"),o=this.down("combobox"),p=s?s.DIAGNOSA:null,q=p?Ext.create("data.model.Diagnosa",p):null;o.select(q)}},0,["icd-tindakan-form"],["component","box","container","panel","form","com-form","icd-tindakan-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"icd-tindakan-form":true},["widget.icd-tindakan-form"],0,[rekammedis.icd.tindakan,"Form"],0));(Ext.cmd.derive("rekammedis.icd.tindakan.Grid",com.Grid,{viewModel:{stores:{store:{type:"icd9-store"}}},columns:[{xtype:"rownumberer",text:"No",align:"left",width:40},{text:"Kode (ICD 9)",dataIndex:"KODE"},{text:"Deskripsi",dataIndex:"KODE",flex:1,renderer:"onDeskripsi"},{text:"Tindakan",dataIndex:"TINDAKAN",flex:1},{text:"Incbg",dataIndex:"INACBG",renderer:"renderIncbg",width:90},{text:"Status",xtype:"checkcolumn",dataIndex:"STATUS",listeners:{checkchange:"onChange"}}],getStore:function(){var l=this,m=l.getViewModel(),n=m?m.get("store"):null;if(n){return n}return com.Grid.prototype.getStore.call(this)}},0,["icd-tindakan-grid"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","icd-tindakan-grid"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"icd-tindakan-grid":true},["widget.icd-tindakan-grid"],0,[rekammedis.icd.tindakan,"Grid"],0));(Ext.cmd.derive("rekammedis.icd.tindakan.Model",Ext.app.ViewModel,{stores:{store:{type:"icd9-store"}}},0,0,0,0,["viewmodel.icd-tindakanmodel"],0,[rekammedis.icd.tindakan,"Model"],0));(Ext.cmd.derive("rekammedis.icd.tindakan.Workspace",com.Form,{controller:"workspace-icd-tindakan",viewModel:{type:"icd-tindakanmodel"},layout:{type:"hbox",align:"stretch"},isLayanan:false,cls:"x-br-top",items:[{xtype:"icd-tindakan-grid",flex:2,border:false,cls:"x-br-right",reference:"gridtindakan",listeners:{select:"onSelect"}},{xtype:"icd-tindakan-form",flex:1,border:false,reference:"formtindakan"}],onLoadRecord:function(o,n){var p=o.down("icd-tindakan-form"),q=o.down("icd-tindakan-grid"),s=Ext.getClassName(n)=="data.model.Kunjungan"?n.get("NOPEN"):n.get("NOMOR");q.load({NOPEN:s,STATUS:1});p.setFormConfig({hideKirimInacbg:o.isLayanan});p.createRecord({NOPEN:s,INACBG:o.isLayanan?0:1,TANGGAL:o.getSysdate(),STATUS:1});p.focus("KODE")},getProcedures:function(){var n=this,o=n.down("icd-tindakan-grid").getStore();if(o){var p=o.getArrayData(),m=[];Ext.Array.each(p,function(e){if(e.INACBG==1&&e.STATUS==1){m.push(e)}});return m}return[]}},0,["icd-tindakan-workspace"],["component","box","container","panel","form","com-form","icd-tindakan-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"icd-tindakan-workspace":true},["widget.icd-tindakan-workspace"],0,[rekammedis.icd.tindakan,"Workspace"],0));(Ext.cmd.derive("rekammedis.icd.tindakan.WorkspaceController",Ext.app.ViewController,{onDeskripsi:function(v,e,w,u,x,g){var y=w.get("REFERENSI"),t=y?(y.DIAGNOSA?y.DIAGNOSA.STR:""):"";return t},renderIncbg:function(f){return f==1?"Terkirim":"Tidak Terkirim"},onSimpan:function(e){var m=this,n=m.getReferences();n.formtindakan.save(e,{success:"Tindakan ICD9 telah tersimpan"},function(l,g,f){if(f){n.formtindakan.createRecord({NOPEN:l.get("NOPEN"),INACBG:1,TANGGAL:m.getView().getSysdate(),STATUS:1});n.formtindakan.focus("KODE");n.gridtindakan.getSelectionModel().deselect([l]);n.gridtindakan.reload()}})},onBeforeQuery:function(f){f.combo.getStore().removeAll()},onSelect:function(s,f,q){var o=this,p=o.getReferences();p.formtindakan.setCollapsed(false);p.formtindakan.loadRecord(f);p.formtindakan.setCombo(f)},onChange:function(u,w,v){var x=this,t=x.getView(),s=x.getReferences(),g=s.gridtindakan,y=g.getStore().getAt(w);y.set("STATUS",v?1:0);y.scope=this;y.save({callback:function(f,e,l){if(l){t.notifyMessage("Tindakan di "+(v==true?"Aktifkan":"Non Aktifkan"))}else{y.set("STATUS",v?0:1)}s.gridtindakan.reload()}})}},0,0,0,0,["controller.workspace-icd-tindakan"],0,[rekammedis.icd.tindakan,"WorkspaceController"],0));(Ext.cmd.derive("rekammedis.laporanoperasi.Form",com.Form,{model:"data.model.Operasi",layout:{type:"vbox",align:"stretch"},cls:"x-br-left",border:false,initComponent:function(){var f=this;f.items=[f.layoutIdentitas(),f.layoutTindakanOperasi(),f.layoutForm(),f.layoutformPascaOperasi(),f.layoutLaporanOPerasi()];com.Form.prototype.initComponent.apply(this,arguments)},layoutIdentitas:function(){return{layout:{type:"vbox",align:"stretch"},cls:"shadow-panel",defaults:{margin:5},border:false,items:[{layout:{type:"hbox",align:"stretch"},border:false,defaults:{bind:{readOnly:"{formConfig.viewOnly}"}},items:[{xtype:"dokter-combo",labelWidth:100,border:false,fieldLabel:"Nama Operator",flex:1,name:"DOKTER",margin:"0 10 0 0"},{xtype:"textfield",labelWidth:100,border:false,fieldLabel:"Nama Asisten",flex:1,name:"ASISTEN_DOKTER",emptyText:"[Nama dr. Asisten]"}]},{layout:{type:"hbox",align:"stretch"},border:false,defaults:{bind:{readOnly:"{formConfig.viewOnly}"}},items:[{xtype:"dokter-combo",labelWidth:100,border:false,fieldLabel:"Dokter Anastesi",flex:1,name:"ANASTESI",margin:"0 10 0 0"},{xtype:"textfield",labelWidth:100,border:false,fieldLabel:"Nama Perawat",flex:1,name:"ASISTEN_ANASTESI",emptyText:"[Nama Perawat]"}]}]}},layoutTindakanOperasi:function(){return{layout:{type:"hbox",align:"stretch"},margin:"10 0 0 0",border:false,defaults:{margin:5,bind:{readOnly:"{formConfig.viewOnly}"}},items:[{xtype:"referensi-combo",labelWidth:70,fieldLabel:"Jenis Anastesi",params:{JENIS:52},name:"JENIS_ANASTESI",flex:1},{xtype:"referensi-combo",labelWidth:70,fieldLabel:"Golongan Operasi",params:{JENIS:53},name:"GOLONGAN_OPERASI",reference:"golonganoperasi",flex:1},{xtype:"referensi-combo",labelWidth:70,fieldLabel:"Jenis Operasi",params:{JENIS:87},name:"JENIS_OPERASI",reference:"jenisoperasi",flex:1}]}},layoutForm:function(){return{layout:{type:"vbox",align:"stretch"},border:false,items:[{xtype:"textfield",labelAlign:"right",labelWidth:150,fieldLabel:"Diagnosis Pra Bedah ",flex:1,emptyText:"[Diagnosis Pra Bedah]",name:"PRA_BEDAH",bind:{readOnly:"{formConfig.viewOnly}"}},{xtype:"textfield",labelAlign:"right",labelWidth:150,fieldLabel:"Diagnosis Pasca Bedah ",flex:1,emptyText:"[Diagnosis Pasca Bedah]",name:"PASCA_BEDAH",bind:{readOnly:"{formConfig.viewOnly}"}},{layout:{type:"hbox",align:"stretch"},border:false,items:[{xtype:"fieldset",cls:"x-color-w",flex:2,margin:"0 10 0 0",border:false,defaultType:"textfield",layout:{type:"vbox",align:"stretch"},fieldDefaults:{labelAlign:"right",labelWidth:115,msgTarget:"side"},defaults:{bind:{readOnly:"{formConfig.viewOnly}"}},items:[{fieldLabel:"Indikasi Operasi",emptyText:"[Indikasi Operasi]",name:"INDIKASI"},{fieldLabel:"Nama Operasi",emptyText:"[Nama Operasi]",name:"NAMA_OPERASI"},{fieldLabel:"Komplikasi",emptyText:"[Komplikasi]",name:"KOMPLIKASI"},{fieldLabel:"Pendarahan",emptyText:"[Pendarahan]",name:"PERDARAHAN"}]},{xtype:"fieldset",border:false,flex:1,cls:"x-color-w",defaultType:"textfield",defaults:{anchor:"100%"},items:[{xtype:"datefield",fieldLabel:"Tanggal Operasi",value:new Date(),name:"TANGGAL",format:"Y-m-d",listeners:{change:"hitungDurasi"},bind:{readOnly:"{formConfig.viewOnly}"}},{xtype:"timefield",fieldLabel:"Jam Mulai",emptyText:"[Jam:Mnt:Dtk]",format:"H:i:s",value:new Date(),name:"WAKTU_MULAI",listeners:{change:"hitungDurasi"},bind:{readOnly:"{formConfig.viewOnly}"}},{xtype:"timefield",fieldLabel:"Jam Selesai",emptyText:"[Jam:Mnt:Dtk]",format:"H:i:s",value:new Date(),name:"WAKTU_SELESAI",listeners:{change:"hitungDurasi"},bind:{readOnly:"{formConfig.viewOnly}"}},{xtype:"timefield",fieldLabel:"Durasi",emptyText:"[Jam:Mnt:Dtk]",format:"H:i:s",value:new Date(),name:"DURASI",readOnly:true}]}]}]}},layoutformPascaOperasi:function(){return{layout:{type:"hbox",align:"stretch"},border:false,defaults:{margin:5},items:[{xtype:"radiogroup",labelWidth:150,flex:1,fieldLabel:"Perawatan Pasca Operasi",layout:{autoFlex:false},defaults:{name:"",margin:"0 10 0 5",bind:{readOnly:"{formConfig.viewOnly}"}},items:[{inputValue:"Ruangan",boxLabel:"Ruangan",checked:true,name:"RUANGAN_PASCA_OPERASI"},{inputValue:"HCU",boxLabel:"HCU",name:"RUANGAN_PASCA_OPERASI"}]},{xtype:"radiogroup",labelWidth:100,flex:1,fieldLabel:"Pemeriksaan PA",labelAlign:"right",flex:1,layout:{autoFlex:false},defaults:{name:"",margin:"0 10 0 5",bind:{readOnly:"{formConfig.viewOnly}"}},items:[{inputValue:"1",boxLabel:"YA",name:"PA"},{inputValue:"0",boxLabel:"Tidak",checked:true,name:"PA"}]},{xtype:"textfield",labelAlign:"right",labelWidth:150,fieldLabel:"Jaringan Dieksisi",name:"JARINGAN_DIEKSISI"}]}},layoutLaporanOPerasi:function(){return{flex:1,layout:"fit",border:false,margin:"5 0 0 0",items:[{xtype:"textareafield",emptyText:"[Laporan Operasi]",name:"LAPORAN_OPERASI",bind:{readOnly:"{formConfig.viewOnly}"}}]}},onLoadRecord:function(x,w){var q=x.down("[name=GOLONGAN_OPERASI]"),s=x.down("[name=JENIS_OPERASI]"),t=x.down("[name=JENIS_ANASTESI]"),u=x.down("[name=DOKTER]"),v=x.down("[name=ANASTESI]"),y=w.get("REFERENSI"),y=y?true:false;q.load();s.load();t.load();u.load();v.load();if(!y){u.select(null);v.select(null)}}},0,["laporan-opersi-form"],["component","box","container","panel","form","com-form","laporan-opersi-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"laporan-opersi-form":true},["widget.laporan-opersi-form"],0,[rekammedis.laporanoperasi,"Form"],0));(Ext.cmd.derive("rekammedis.laporanoperasi.Workspace",com.Form,{controller:"laporan-operasi-workspace",model:"data.model.Operasi",viewModel:{stores:{store:{type:"operasi-ditindakan-store"}}},layout:"border",border:false,title:"Laporan Operasi",initComponent:function(){var g=this,l=g.getViewModel().get("store");g.items=[{region:"west",xtype:"tindakan-medis-list",flex:1,hideAction:true,checkboxModel:true,selModel:{selType:"checkboxmodel",checkOnly:true,mode:"Multi"},reference:"tindakanoperasi",listeners:{select:"onSelect",deselect:"onDeselect"}},{region:"center",xtype:"laporan-opersi-form",cls:"shadow-panel x-br-left",flex:3,reference:"laporanoperasi"}];g.buttons=[{text:"Simpan",iconCls:"x-fa fa-save",ui:"soft-blue",handler:"onSimpan",bind:{hidden:"{!formConfig.simpan}"}},{text:"Cetak",iconCls:"x-fa fa-print",ui:"soft-green",handler:"onCetak"}];l.doAfterLoad=function(o,s,f,v){var w=new Array(),e=g.down("tindakan-medis-list"),m=e.getStore();s.forEach(function(p){var n=m.findRecord("ID",p.get("TINDAKAN_MEDIS"),0,false,true,false);if(n){w.push(n)}});e.setSelection(w)};com.Form.prototype.initComponent.apply(this,arguments)},onLoadRecord:function(E,v){var w=E.getViewModel(),z=E.down("tindakan-medis-list"),C=E.down("laporan-opersi-form"),A=E.getViewModel().get("store"),x=v.get("REFERENSI"),u=u=x?Ext.create("data.model.Kunjungan",x.KUNJUNGAN):null,B=Ext.isString(v.get("ID"))?0:v.get("ID"),y=w.get("formConfig");if(u){var D=u.get("JENIS_KUNJUNGAN")==6;E.setFormConfig({viewOnly:y.viewOnly,simpan:y.simpan});C.loadRecord(v);A.queryParams={STATUS:1,ID:B};z.doAfterLoad=function(f,g,e){A.load()};z.loadStore(u)}}},0,["laporan-operasi-workspace"],["component","box","container","panel","form","com-form","laporan-operasi-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"laporan-operasi-workspace":true},["widget.laporan-operasi-workspace"],0,[rekammedis.laporanoperasi,"Workspace"],0));(Ext.cmd.derive("rekammedis.laporanoperasi.WorkspaceController",Ext.app.ViewController,{onSimpan:function(w){var y=this,s=y.getView(),q=y.getReferences(),x=q.laporanoperasi,u=q.tindakanoperasi.getSelection(),t=new Array(),v=q.tindakanoperasi.getStore();v.each(function(e){e.set("STATUS",0);u.forEach(function(f){if(f.data.TINDAKAN==e.data.TINDAKAN){e.set("STATUS",1)}});t.push(e.data)});x.getRecord().set("TINDAKAN_MEDIS",t);x.save(w)},onSelect:function(p,m){var o=this,n=o.getViewModel().get("formConfig.viewOnly");if(n){return false}m.set("STATUS",1)},onDeselect:function(p,m){var o=this,n=o.getViewModel().get("formConfig.viewOnly");if(n){return false}m.set("STATUS",0)},onCetak:function(o){var n=this,p=n.getView(),m=n.getViewModel().get("record");p.cetak({NAME:"mr.CetakLaporanOperasi",TYPE:"Word",EXT:"docx",PARAMETER:{PID:m.get("ID")},REQUEST_FOR_PRINT:true,PRINT_NAME:"CetakMR"})},hitungDurasi:function(G){var H=this,D=H.getReferences(),K=D.laporanoperasi,I=K.down("[name=TANGGAL]").getSubmitValue(),E=K.down("[name=WAKTU_MULAI]").getSubmitValue(),C=K.down("[name=WAKTU_SELESAI]").getSubmitValue(),F=K.down("[name=DURASI]"),z=new Date(I+" "+E),A=new Date(I+" "+C);if(z>A){A=Ext.Date.subtract(A,Ext.Date.DAY,-1)}var y=Ext.Date.diff(z,A,Ext.Date.SECOND),J=Math.floor(y/3600),t=Math.floor((y-(J*3600))/60),B=new Date(I+" "+J+":"+t+":00");F.setValue(B)}},0,0,0,0,["controller.laporan-operasi-workspace"],0,[rekammedis.laporanoperasi,"WorkspaceController"],0));(Ext.cmd.derive("rekammedis.laporanoperasi.list.List",Ext.grid.Panel,{viewModel:{stores:{store:{type:"operasi-store"}}},bind:{store:"{store}"},columns:[{xtype:"rownumberer",text:"No",align:"left",width:50},{text:"Nomor",dataIndex:"ID",sortable:false,width:90},{xtype:"datecolumn",text:"Tgl. Laporan",dataIndex:"DIBUAT_TANGGAL",format:"d/m/Y H:i:s",sortable:false,width:140},{text:"Nama Operasi",dataIndex:"NAMA_OPERASI",sortable:false,flex:1},{xtype:"datecolumn",text:"Tgl. Operasi",dataIndex:"TANGGAL",format:"d/m/Y",sortable:false,width:90},{xtype:"widgetcolumn",align:"center",text:"Aksi",widget:{xtype:"fieldcontainer",defaults:{padding:2,margin:"0 2 1 0"},items:[{xtype:"button",action:0,text:"View",iconCls:"x-fa fa-minus-circle",ui:"soft-red",tooltip:"View Laporan Operasi",handler:"onViewLaporan"}]},onWidgetAttach:function(q,s,u){var f=u.get("STATUS"),e=s.down("[action=0]"),t=s.down("[action=1]");e.setHidden(f!=1)}}],dockedItems:[{xtype:"pagingtoolbar",bind:{store:"{store}"},dock:"bottom",displayInfo:true}],loadStore:function(m){var n=this,p=n.getViewModel(),o=p.get("store");if(o){o.removeAll();o.queryParams=o.queryParams||{};if(m){if(Ext.getClassName(m)=="data.model.Kunjungan"){o.queryParams.KUNJUNGAN=m.get("NOMOR");if(!p.get("kunjungan")){p.set("kunjungan",m)}}else{o.queryParams=m}}o.load()}},refresh:function(){var f=this.getViewModel().get("store");if(f){f.reload()}}},0,["lap-operasi-list"],["component","box","container","panel","tablepanel","gridpanel","grid","lap-operasi-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"lap-operasi-list":true},["widget.lap-operasi-list"],0,[rekammedis.laporanoperasi.list,"List"],0));(Ext.cmd.derive("rekammedis.laporanoperasi.list.Workspace",com.Form,{controller:"workspace-list-lap-operasi",viewModel:{data:{kunjungan:undefined,hideForm:true,hiddenButton:true}},border:false,layout:"border",initComponent:function(){var f=this;f.items=[{region:"center",title:"Daftar Operasi",header:{items:[{xtype:"button",margin:2,height:32,cls:"x-fa fa-plus hide-icon-tools",tooltip:"Baru",bind:{hidden:"{hiddenButton}"},handler:"onAddLapOperasi"}]},xtype:"lap-operasi-list",border:false,reference:"lapoperasilist"}];f.callParent(arguments)},load:function(v){var w=this,p=w.down("lap-operasi-list"),s=w.getViewModel();if(v){if(Ext.getClassName(v)=="data.model.Kunjungan"){var u=v.get("JENIS_KUNJUNGAN"),q=v.get("REFERENSI"),t=q?q.PENDAFTARAN:null;s.set("kunjungan",v);s.set("hiddenButton",!(u==6));if(u==6){p.loadStore(v)}else{p.loadStore({NORM:t.NORM,STATUS:1})}}else{p.loadStore(v);s.set("hiddenButton",true)}}}},0,["workspace-list-lap-operasi"],["component","box","container","panel","form","com-form","workspace-list-lap-operasi"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-list-lap-operasi":true},["widget.workspace-list-lap-operasi"],0,[rekammedis.laporanoperasi.list,"Workspace"],0));(Ext.cmd.derive("rekammedis.laporanoperasi.list.WorkspaceController",Ext.app.ViewController,{onViewLaporan:function(s){var p=this,n=p.getViewModel().get("kunjungan"),o=s.ownerCt.getWidgetRecord();if(o){var q=o.get("REFERENSI")||{};n=o.get("REFERENSI")?(q.KUNJUNGAN?Ext.create("data.model.Kunjungan",q.KUNJUNGAN):n):n;o.set("KUNJUNGAN",n.get("NOMOR"));q.KUNJUNGAN=n.data;o.set("REFERENSI",q);p.showLaporan(o)}},onAddLapOperasi:function(n){var m=this,l=m.getViewModel().get("kunjungan");m.showLaporan({KUNJUNGAN:l.get("NOMOR"),REFERENSI:{KUNJUNGAN:l.data}})},privates:{showLaporan:function(m){var n=this,p=n.getView(),o=this.getReferences();p.openDialog("",true,0,0,{title:"Laporan Operasi",iconCls:"x-fa fa-newspaper-o",xtype:"laporan-operasi-workspace",ui:"panel-cyan",showCloseButton:true},function(e,f){var g=f.down("laporan-operasi-workspace");if(Ext.getClassName(m)=="data.model.Operasi"){g.loadRecord(m)}else{g.createRecord(m)}f.on("close",function(){o.lapoperasilist.refresh()})})}}},0,0,0,0,["controller.workspace-list-lap-operasi"],0,[rekammedis.laporanoperasi.list,"WorkspaceController"],0));(Ext.cmd.derive("rekammedis.pemeriksaan.Workspace",com.Tab,{controller:"rekammedis-pemeriksaan-workspace",bodyPadding:1,kunjungan:undefined,items:[{title:"Umum",xtype:"rekammedis-pemeriksaan-umum-workspace",reference:"rpuw"},{title:"Fisik",xtype:"rekammedis-pemeriksaan-fisik-workspace",reference:"rpfw"}],load:function(l){var m=this,n=this.getActiveTab();this.kunjungan=l;if(n){n.load(l)}else{if(m.items.getCount()>0){m.setActiveTab(0)}}},listeners:{tabchange:"onTabChange"}},0,["rekammedis-pemeriksaan-workspace"],["component","box","container","panel","tabpanel","com-tab","rekammedis-pemeriksaan-workspace"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"rekammedis-pemeriksaan-workspace":true},["widget.rekammedis-pemeriksaan-workspace"],0,[rekammedis.pemeriksaan,"Workspace"],0));(Ext.cmd.derive("rekammedis.pemeriksaan.WorkspaceController",Ext.app.ViewController,{onTabChange:function(m,n){var l=this.getView().kunjungan;if(n.load){n.load(l)}}},0,0,0,0,["controller.rekammedis-pemeriksaan-workspace"],0,[rekammedis.pemeriksaan,"WorkspaceController"],0));(Ext.cmd.derive("rekammedis.pemeriksaan.fisik.Form",com.Form,{model:"rekammedis.pemeriksaan.fisik.Model",controller:"rekammedis-pemeriksaan-fisik-form",defaultType:"textareafield",defaults:{allowBlank:false,margin:"0 0 1 0"},defaultFocus:"DESKRIPSI",items:[{xtype:"textarea",emptyText:"[Masukkan Deskripsi Pemeriksaan Fisik]",name:"DESKRIPSI",bind:{readOnly:"{formConfig.viewOnly}"}}],dockedItems:[{xtype:"toolbar",bind:{hidden:"{!formConfig.simpan}"},dock:"bottom",items:["->",{text:"Simpan",iconCls:"x-fa fa-save",formBind:true,handler:"onSimpan",ui:"soft-red",bind:{hidden:"{!formConfig.simpan}"}}]}]},0,["rekammedis-pemeriksaan-fisik-form"],["component","box","container","panel","form","com-form","rekammedis-pemeriksaan-fisik-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"rekammedis-pemeriksaan-fisik-form":true},["widget.rekammedis-pemeriksaan-fisik-form"],0,[rekammedis.pemeriksaan.fisik,"Form"],0));(Ext.cmd.derive("rekammedis.pemeriksaan.fisik.FormController",Ext.app.ViewController,{onSimpan:function(m){var l=this,n=l.getView();n.save(m)}},0,0,0,0,["controller.rekammedis-pemeriksaan-fisik-form"],0,[rekammedis.pemeriksaan.fisik,"FormController"],0));(Ext.cmd.derive("rekammedis.pemeriksaan.fisik.List",com.Grid,{viewModel:{stores:{store:{type:"rekammedis-pemeriksaan-fisik-store"}}},hideHeaders:true,history:false,columns:[{xtype:"templatecolumn",flex:1,tpl:new Ext.XTemplate('<div style="font-weight: bold; font-size: 12px; white-space:normal !important;">{[values.DESKRIPSI]}</div>','<div style="font-size: 12px; white-space:normal !important;">{[this.tanggalFormat(values.TANGGAL)]}</div>',{tanggalFormat:function(g){var l=Ext.isDate(g)?g:Ext.Date.parse(g,"Y-m-d H:i:s");return Ext.Date.format(l,"d-m-Y H:i:s")}})}],load:function(l){var n=this;if(Ext.getClassName(l)=="data.model.Kunjungan"){var m=l;if(n.history){l={HISTORY:1,NORM:m.get("REFERENSI").PENDAFTARAN.NORM,sort:Ext.JSON.encode({property:"TANGGAL",direction:"DESC"})};if(m.history){l.NOT=Ext.JSON.encode({ID:m.history.get("ID")})}}else{l={KUNJUNGAN:m.get("NOMOR")}}}n.setParams(l);com.Grid.prototype.load.apply(this,l)}},0,["rekammedis-pemeriksaan-fisik-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","rekammedis-pemeriksaan-fisik-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"rekammedis-pemeriksaan-fisik-list":true},["widget.rekammedis-pemeriksaan-fisik-list"],0,[rekammedis.pemeriksaan.fisik,"List"],0));(Ext.cmd.derive("rekammedis.pemeriksaan.fisik.Workspace",com.Form,{viewModel:{stores:{store:{type:"rekammedis-pemeriksaan-fisik-store"}}},layout:"border",items:[{region:"center",xtype:"rekammedis-pemeriksaan-fisik-form",layout:"fit",border:false},{region:"east",flex:0.75,split:true,collapsible:true,xtype:"rekammedis-pemeriksaan-fisik-history-workspace",ui:"panel-gray",fullscreenEnabled:true}],load:function(u){var q=this,s=q.down("rekammedis-pemeriksaan-fisik-form"),p=q.down("rekammedis-pemeriksaan-fisik-history-workspace"),t=q.getViewModel().get("store"),o={KUNJUNGAN:u.get("NOMOR"),PENDAFTARAN:u.get("NOPEN")};s.setFormConfig({});t.setQueryParams(o);t.load(function(f,g,e){if(e){if(f.length>0){s.loadRecord(f[0]);u.history=f[0]}}else{s.createRecord(o)}p.load(u)})}},0,["rekammedis-pemeriksaan-fisik-workspace"],["component","box","container","panel","form","com-form","rekammedis-pemeriksaan-fisik-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"rekammedis-pemeriksaan-fisik-workspace":true},["widget.rekammedis-pemeriksaan-fisik-workspace"],0,[rekammedis.pemeriksaan.fisik,"Workspace"],0));(Ext.cmd.derive("rekammedis.pemeriksaan.fisik.history.Tab",com.Tab,{controller:"rekammedis-pemeriksaan-fisik-history-tab",kunjungan:undefined,items:[{title:"Sebelumnya",history:true,xtype:"rekammedis-pemeriksaan-fisik-list"}],load:function(m){var o=this,n=o.down("rekammedis-pemeriksaan-fisik-list"),p=this.getActiveTab();n.setListConfig({paging:true});this.kunjungan=m;if(p){p.load(m)}else{if(o.items.getCount()>0){o.setActiveTab(0)}}},listeners:{tabchange:"onTabChange"}},0,["rekammedis-pemeriksaan-fisik-history-tab"],["component","box","container","panel","tabpanel","com-tab","rekammedis-pemeriksaan-fisik-history-tab"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"rekammedis-pemeriksaan-fisik-history-tab":true},["widget.rekammedis-pemeriksaan-fisik-history-tab"],0,[rekammedis.pemeriksaan.fisik.history,"Tab"],0));(Ext.cmd.derive("rekammedis.pemeriksaan.fisik.history.TabController",Ext.app.ViewController,{onTabChange:function(m,n){var l=this.getView().kunjungan;if(n.load){n.load(l)}}},0,0,0,0,["controller.rekammedis-pemeriksaan-fisik-history-tab"],0,[rekammedis.pemeriksaan.fisik.history,"TabController"],0));(Ext.cmd.derive("rekammedis.pemeriksaan.fisik.history.Workspace",com.Form,{layout:"fit",title:"Catatan Medis",iconCls:"x-fa fa-file-text-o",bodyPadding:0,items:[{xtype:"rekammedis-pemeriksaan-fisik-history-tab"}],load:function(l){var m=this,n=m.down("rekammedis-pemeriksaan-fisik-history-tab");n.load(l)}},0,["rekammedis-pemeriksaan-fisik-history-workspace"],["component","box","container","panel","form","com-form","rekammedis-pemeriksaan-fisik-history-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"rekammedis-pemeriksaan-fisik-history-workspace":true},["widget.rekammedis-pemeriksaan-fisik-history-workspace"],0,[rekammedis.pemeriksaan.fisik.history,"Workspace"],0));(Ext.cmd.derive("rekammedis.pemeriksaan.umum.Form",com.Form,{viewModel:{stores:{pemeriksaanUmumStore:{type:"pemeriksaan-umum-store"}},data:{kjgn:undefined}},controller:"form-pemeriksaan-umum",model:"rekammedis.pemeriksaan.umum.Model",layout:"vbox",border:false,defaults:{margin:"2.2.2.2"},initComponent:function(){var f=this;f.items=[{width:"100%",defaults:{margin:"2.2.2.2",width:"50%",border:false},border:false,layout:"hbox",items:[{title:"Nutrisi : ",flex:1,defaultType:"numberfield",defaults:{margin:"2.2.2.2",width:"100%",decimalSeparator:".",decimalPrecision:2,hideTrigger:true},layout:"vbox",items:[{fieldLabel:"Berat Badan (Kg)",name:"BERAT_BADAN",reference:"berat_badan",emptyText:"Kg",listeners:{change:"onChangeHitungIndex",focusleave:"onFocusLeave"}},{fieldLabel:"Tinggi Badan (Cm)",name:"TINGGI_BADAN",reference:"tinggi_badan",emptyText:"Centimeter",listeners:{change:"onChangeHitungIndex",focusleave:"onFocusLeave"}},{fieldLabel:"Index Massa Tubuh",name:"INDEX_MASSA_TUBUH",emptyText:"Kg / m2",readOnly:true,reference:"index_massa",listeners:{focusleave:"onFocusLeave"}},{fieldLabel:"Lingkar Kepala",name:"LINGKAR_KEPALA",emptyText:"cm (Khusus Pediatri)",listeners:{focusleave:"onFocusLeave"}}]},{title:"Fungsional :",defaultType:"textfield",defaults:{margin:"2.2.2.2",width:"100%",decimalSeparator:".",decimalPrecision:2,hideTrigger:true},layout:"vbox",items:[{fieldLabel:"Alat Bantu",name:"ALAT_BANTU",listeners:{focusleave:"onFocusLeave"}},{fieldLabel:"Prothesa",name:"PROTHESA",listeners:{focusleave:"onFocusLeave"}},{fieldLabel:"Cacat Tubuh",name:"CACAT_TUBUH",listeners:{focusleave:"onFocusLeave"}}]}]}];com.Form.prototype.initComponent.apply(this,arguments)},load:function(m){var n=this,o=n.getViewModel(),p=o.get("pemeriksaanUmumStore");if(m){o.set("kjgn",m);p.queryParams={KUNJUNGAN:m.get("NOMOR")};p.load({callback:function(g,e,f){if(f){n.loadRecord(g[0])}else{n.createRecord({KUNJUNGAN:m.get("NOMOR"),STATUS:1,TANGGAL:Ext.Date.format(n.getSysdate(),"Y-m-d H:i:s")})}}})}}},0,["form-pemeriksaan-umum"],["component","box","container","panel","form","com-form","form-pemeriksaan-umum"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-pemeriksaan-umum":true},["widget.form-pemeriksaan-umum"],0,[rekammedis.pemeriksaan.umum,"Form"],0));(Ext.cmd.derive("rekammedis.pemeriksaan.umum.FormController",Ext.app.ViewController,{onFocusLeave:function(s,v,t){var p=this,u=p.getView(),q=p.getViewModel(),w=u.getRecord();if(w.isModified(s.name)){u.save(s);u.load(q.get("kjgn"))}},onChangeHitungIndex:function(s,z){var v=this,u=v.getReferences(),w=u.berat_badan.getValue(),t=u.index_massa,y=u.tinggi_badan.getValue(),A=y/100,x=w/(A*A);t.setValue(x)}},0,0,0,0,["controller.form-pemeriksaan-umum"],0,[rekammedis.pemeriksaan.umum,"FormController"],0));(Ext.cmd.derive("rekammedis.pemeriksaan.umum.Link",com.Tab,{controller:"rekammedis-pemeriksaan-umum-link",activeTab:0,tabPosition:"bottom",cls:"x-br-top",ui:"header-tab",rec:undefined,initComponent:function(){var f=this;f.items=[{title:"Tanda Vital",xtype:"rekammedis-pemerikasaan-umum-tandavital-workspace",scrollable:"y"}];com.Tab.prototype.initComponent.apply(this,arguments)},load:function(l){var m=this,n=this.getActiveTab();m.rec=l;if(n){n.load(l)}else{if(m.items.getCount()>0){m.setActiveTab(0)}}},listeners:{tabchange:"onTabChange"}},0,["rekammedis-pemeriksaan-umum-link"],["component","box","container","panel","tabpanel","com-tab","rekammedis-pemeriksaan-umum-link"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"rekammedis-pemeriksaan-umum-link":true},["widget.rekammedis-pemeriksaan-umum-link"],0,[rekammedis.pemeriksaan.umum,"Link"],0));(Ext.cmd.derive("rekammedis.pemeriksaan.umum.LinkController",Ext.app.ViewController,{onTabChange:function(l,n){var m=this.getView().rec;if(n.load){n.load(m)}}},0,0,0,0,["controller.rekammedis-pemeriksaan-umum-link"],0,[rekammedis.pemeriksaan.umum,"LinkController"],0));(Ext.cmd.derive("rekammedis.pemeriksaan.umum.Workspace",com.Form,{controller:"rekammedis-pemeriksaan-umum-workspace",layout:"border",bodyPadding:1,border:false,initComponent:function(){var f=this;f.items=[{region:"center",xtype:"rekammedis-pemeriksaan-umum-link",flex:1}];com.Form.prototype.initComponent.apply(this,arguments)},load:function(l){var m=this,n=m.down("rekammedis-pemeriksaan-umum-link");if(l){n.load(l)}}},0,["rekammedis-pemeriksaan-umum-workspace"],["component","box","container","panel","form","com-form","rekammedis-pemeriksaan-umum-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"rekammedis-pemeriksaan-umum-workspace":true},["widget.rekammedis-pemeriksaan-umum-workspace"],0,[rekammedis.pemeriksaan.umum,"Workspace"],0));(Ext.cmd.derive("rekammedis.pemeriksaan.umum.WorkspaceController",Ext.app.ViewController,{},0,0,0,0,["controller.rekammedis-pemeriksaan-umum-workspace"],0,[rekammedis.pemeriksaan.umum,"WorkspaceController"],0));(Ext.cmd.derive("rekammedis.pemeriksaan.umum.tandavital.Form",com.Form,{controller:"rekammedis-pemeriksaan-umum-tandavital-form",model:"rekammedis.pemeriksaan.umum.tandavital.Model",layout:"hbox",border:false,defaults:{margin:"2.2.2.2",width:"50%"},initComponent:function(){var f=this;f.items=[{layout:"vbox",border:false,defaultType:"numberfield",defaults:{margin:"1.1.1.1",width:"95%",decimalSeparator:".",decimalPrecision:2,hideTrigger:true,allowBlank:false},items:[{xtype:"textfield",name:"KEADAAN_UMUM",fieldLabel:"Keadaan Umum"},{xtype:"textfield",name:"KESADARAN",fieldLabel:"Kesadaran"},{layout:"hbox",border:true,xtype:"fieldset",defaults:{margin:"2.2.2.2",decimalSeparator:".",decimalPrecision:2,hideTrigger:true,allowBlank:false},items:[{xtype:"label",html:"Tekanan Darah (Sistolik <br> / Distolik) mmHg:",margin:"0 10 0 0"},{xtype:"numberfield",width:"20%",name:"SISTOLIK"},{xtype:"label",text:"/",margin:"0 3 0 3"},{xtype:"numberfield",width:"20%",name:"DISTOLIK"}]},{fieldLabel:"Suhu (OC)",name:"SUHU"}]},{layout:"vbox",border:false,defaultType:"numberfield",defaults:{margin:"1.1.1.1",width:"90%",decimalSeparator:".",decimalPrecision:2,hideTrigger:true,allowBlank:false},items:[{fieldLabel:"Frekuensi Nadi (X/Menit)",name:"FREKUENSI_NADI"},{fieldLabel:"Frekuensi Nafas (X/Menit)",name:"FREKUENSI_NAFAS"},{xtype:"datetimefield",format:"Y-m-d H:i:s",fieldLabel:"Waktu Pemeriksaan",name:"WAKTU_PEMERIKSAAN",hideTrigger:false}]}];f.buttons=[{text:"Simpan",ui:"soft-green",padding:2,margin:"1 1 1 1",handler:"onSimpan"}];com.Form.prototype.initComponent.apply(this,arguments)}},0,["rekammedis-pemeriksaan-umum-tandavital-form"],["component","box","container","panel","form","com-form","rekammedis-pemeriksaan-umum-tandavital-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"rekammedis-pemeriksaan-umum-tandavital-form":true},["widget.rekammedis-pemeriksaan-umum-tandavital-form"],0,[rekammedis.pemeriksaan.umum.tandavital,"Form"],0));(Ext.cmd.derive("rekammedis.pemeriksaan.umum.tandavital.FormController",Ext.app.ViewController,{onSimpan:function(q){var o=this,s=o.getView(),p=o.getViewModel(),n=s.getRecord();s.save(q)}},0,0,0,0,["controller.rekammedis-pemeriksaan-umum-tandavital-form"],0,[rekammedis.pemeriksaan.umum.tandavital,"FormController"],0));(Ext.cmd.derive("rekammedis.pemeriksaan.umum.tandavital.List",com.Grid,{viewModel:{stores:{store:{type:"rekammedis-pemeriksaan-umum-tandavital-store"}}},history:false,initComponent:function(){var f=this;f.columns=[{text:"Keadaan Umum",align:"left",hidden:f.history,dataIndex:"KEADAAN_UMUM",flex:1},{text:"Kesadaran",align:"left",hidden:f.history,dataIndex:"KESADARAN",flex:1},{text:"Sistolik",align:"left",hidden:f.history,dataIndex:"SISTOLIK",flex:1},{text:"Distolik",align:"left",hidden:f.history,dataIndex:"DISTOLIK",flex:1},{text:"Frekuensi Nadi",align:"left",hidden:f.history,dataIndex:"FREKUENSI_NADI",flex:1},{text:"Frekuensi Nafas",align:"left",hidden:f.history,dataIndex:"FREKUENSI_NAFAS",flex:1},{text:"Suhu",align:"left",hidden:f.history,dataIndex:"SUHU",flex:1},{xtype:"datecolumn",align:"left",hidden:f.history,format:"d-m-Y H:i:s",text:"Waktu Pemeriksaan",dataIndex:"WAKTU_PEMERIKSAAN",flex:1},{xtype:"templatecolumn",hidden:!f.history,flex:1,tpl:new Ext.XTemplate('<div style="font-weight: bold; font-size: 12px; white-space:normal !important;">* Kunjungan - {[values.KUNJUNGAN]}</div>','<div style="font-size: 12px; white-space:normal !important;">* Keadaa Umum - {[values.KEADAAN_UMUM]}</div>','<div style="font-size: 12px; white-space:normal !important;">* Kesadaran - {[values.KESADARAN]}</div>','<div style="font-size: 12px; white-space:normal !important;">* Sistolik - {[values.SISTOLIK]} mmHg</div>','<div style="font-size: 12px; white-space:normal !important;">* Distolik - {[values.DISTOLIK]} mmHg</div>','<div style="font-size: 12px; white-space:normal !important;">* Suhu - {[values.SUHU]} OC</div>','<div style="font-size: 12px; white-space:normal !important;">* Frekuensi Nadi - {[values.FREKUENSI_NADI]} X/Menit</div>','<div style="font-size: 12px; white-space:normal !important;">* Frekuensi Nafas - {[values.FREKUENSI_NAFAS]} X/Menit</div>','<div style="font-size: 12px; white-space:normal !important;">{[this.tanggalFormat(values.WAKTU_PEMERIKSAAN)]}</div>',{tanggalFormat:function(e){var l=Ext.isDate(e)?e:Ext.Date.parse(e,"Y-m-d H:i:s");return Ext.Date.format(l,"d-m-Y H:i:s")}})}];com.Grid.prototype.initComponent.apply(this,arguments)},load:function(l){var n=this;if(Ext.getClassName(l)=="data.model.Kunjungan"){var m=l;if(n.history){l={HISTORY:1,NORM:m.get("REFERENSI").PENDAFTARAN.NORM,sort:Ext.JSON.encode({property:"TANGGAL",direction:"DESC"})};if(m.history){l.NOT=Ext.JSON.encode({KUNJUNGAN:m.history.get("KUNJUNGAN")})}}else{l={KUNJUNGAN:m.get("NOMOR")}}}n.setParams(l);com.Grid.prototype.load.apply(this,l)}},0,["rekammedis-pemeriksaan-umum-tandavital-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","rekammedis-pemeriksaan-umum-tandavital-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"rekammedis-pemeriksaan-umum-tandavital-list":true},["widget.rekammedis-pemeriksaan-umum-tandavital-list"],0,[rekammedis.pemeriksaan.umum.tandavital,"List"],0));(Ext.cmd.derive("rekammedis.pemeriksaan.umum.tandavital.Workspace",com.Form,{controller:"rekammedis-pemerikasaan-umum-tandavital-workspace",viewModel:{stores:{store:{type:"rekammedis-pemeriksaan-umum-tandavital-store"}},data:{kjgn:undefined}},layout:"border",border:false,bodyPadding:0,initComponent:function(){var f=this;f.items=[{region:"center",flex:1,layout:"border",items:[{region:"center",xtype:"rekammedis-pemeriksaan-umum-tandavital-form",flex:1,scrollable:"y",listeners:{save:"onSave"}},{region:"south",xtype:"rekammedis-pemeriksaan-umum-tandavital-list",flex:1,layout:"fit"}]},{region:"east",flex:0.6,split:true,collapsible:true,xtype:"rekammedis-pemeriksaan-umum-tandavital-history-workspace",ui:"panel-gray",fullscreenEnabled:true}];com.Form.prototype.initComponent.apply(this,arguments)},load:function(w){var s=this,u=s.getViewModel(),t=s.down("rekammedis-pemeriksaan-umum-tandavital-form"),q=s.down("rekammedis-pemeriksaan-umum-tandavital-list"),y=s.down("rekammedis-pemeriksaan-umum-tandavital-history-workspace"),v=s.getViewModel().get("store"),x={KUNJUNGAN:w.get("NOMOR")};q.load({KUNJUNGAN:w.get("NOMOR")});q.setGridConfig({paging:true});t.createRecord({STATUS:1,KUNJUNGAN:w.get("NOMOR")});u.set("kjgn",w);v.setQueryParams(x);v.load(function(f,g,e){if(e){if(f.length>0){w.history=f[0]}}y.load(w)})}},0,["rekammedis-pemerikasaan-umum-tandavital-workspace"],["component","box","container","panel","form","com-form","rekammedis-pemerikasaan-umum-tandavital-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"rekammedis-pemerikasaan-umum-tandavital-workspace":true},["widget.rekammedis-pemerikasaan-umum-tandavital-workspace"],0,[rekammedis.pemeriksaan.umum.tandavital,"Workspace"],0));(Ext.cmd.derive("rekammedis.pemeriksaan.umum.tandavital.WorkspaceController",Ext.app.ViewController,{onSave:function(s,w,t){var p=this,u=p.getView(),q=p.getViewModel(),v=q.get("kjgn");u.load(v)}},0,0,0,0,["controller.rekammedis-pemerikasaan-umum-tandavital-workspace"],0,[rekammedis.pemeriksaan.umum.tandavital,"WorkspaceController"],0));(Ext.cmd.derive("rekammedis.pemeriksaan.umum.tandavital.history.Tab",com.Tab,{controller:"rekammedis-pemeriksaan-umum-tandavital-history-tab",kunjungan:undefined,items:[{title:"Sebelumnya",history:true,hideHeaders:true,xtype:"rekammedis-pemeriksaan-umum-tandavital-list"}],load:function(m){var o=this,n=o.down("rekammedis-pemeriksaan-umum-tandavital-list"),p=this.getActiveTab();n.setListConfig({paging:true});this.kunjungan=m;if(p){p.load(m)}else{if(o.items.getCount()>0){o.setActiveTab(0)}}},listeners:{tabchange:"onTabChange"}},0,["rekammedis-pemeriksaan-umum-tandavital-history-tab"],["component","box","container","panel","tabpanel","com-tab","rekammedis-pemeriksaan-umum-tandavital-history-tab"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"rekammedis-pemeriksaan-umum-tandavital-history-tab":true},["widget.rekammedis-pemeriksaan-umum-tandavital-history-tab"],0,[rekammedis.pemeriksaan.umum.tandavital.history,"Tab"],0));(Ext.cmd.derive("rekammedis.pemeriksaan.umum.tandavital.history.TabController",Ext.app.ViewController,{onTabChange:function(m,n){var l=this.getView().kunjungan;if(n.load){n.load(l)}}},0,0,0,0,["controller.rekammedis-pemeriksaan-umum-tandavital-history-tab"],0,[rekammedis.pemeriksaan.umum.tandavital.history,"TabController"],0));(Ext.cmd.derive("rekammedis.pemeriksaan.umum.tandavital.history.Workspace",com.Form,{title:"Catatan Medis",iconCls:"x-fa fa-file-text-o",layout:"fit",bodyPadding:0,items:[{xtype:"rekammedis-pemeriksaan-umum-tandavital-history-tab"}],load:function(l){var m=this,n=m.down("rekammedis-pemeriksaan-umum-tandavital-history-tab");n.load(l)}},0,["rekammedis-pemeriksaan-umum-tandavital-history-workspace"],["component","box","container","panel","form","com-form","rekammedis-pemeriksaan-umum-tandavital-history-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"rekammedis-pemeriksaan-umum-tandavital-history-workspace":true},["widget.rekammedis-pemeriksaan-umum-tandavital-history-workspace"],0,[rekammedis.pemeriksaan.umum.tandavital.history,"Workspace"],0));(Ext.cmd.derive("laporan.ButtonDoc",Ext.button.Segmented,{width:220,items:[{text:"Html",doc:{TYPE:"Html",EXT:"html"}},{text:"Word",doc:{TYPE:"Word",EXT:"doc"}},{text:"Excel",doc:{TYPE:"Excel",EXT:"xls"}},{text:"Pdf",pressed:true,doc:{TYPE:"Pdf",EXT:"pdf"}}],getDocType:function(){var g=this,l=g.down("[pressed=true]");return l.doc}},0,["laporan-button-doc"],["component","box","container","segmentedbutton","laporan-button-doc"],{component:true,box:true,container:true,segmentedbutton:true,"laporan-button-doc":true},["widget.laporan-button-doc"],0,[laporan,"ButtonDoc"],0));(Ext.cmd.derive("laporan.DataView",Ext.view.View,{viewModel:{stores:{store:{type:"store"}}},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var g=this,l=g.getViewModel().get("store");if(l){g.setLoading(true);l.removeAll();l.load(function(){g.setLoading(false)})}}},0,["laporan-data-view"],["component","box","dataview","laporan-data-view"],{component:true,box:true,dataview:true,"laporan-data-view":true},["widget.laporan-data-view"],0,[laporan,"DataView"],0));(Ext.cmd.derive("laporan.Filter",com.Form,{layout:{type:"vbox",align:"stretch"},cls:"x-br-right",defaultType:"datefield",minHeight:90,initComponent:function(){var f=this;com.Form.prototype.initComponent.call(this);f.add([{reference:"awal",emptyText:"[Periode Awal]",fieldLabel:"Periode Awal",format:"d-m-Y",value:f.getSysdate()},{reference:"akhir",emptyText:"[Periode Akhir]",fieldLabel:"Periode Akhir",format:"d-m-Y",value:f.getSysdate()}])},getParameters:function(){var g=this.down("[reference=awal]").getValue(),l=this.down("[reference=akhir]").getValue();return{PARAMETER:{TGLAWAL:Ext.Date.format(g,"Y-m-d")+" 00:00:00",TGLAKHIR:Ext.Date.format(l,"Y-m-d")+" 23:59:59"}}}},0,["laporan-filter"],["component","box","container","panel","form","com-form","laporan-filter"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"laporan-filter":true},["widget.laporan-filter"],0,[laporan,"Filter"],0));(Ext.cmd.derive("laporan.Workspace",com.Tab,{controller:"workspace-laporan",viewModel:{stores:{store:{type:"jenis-laporan-store",queryParams:{LEVEL:1}}}},layout:{type:"hbox",align:"stretch"},cls:"x-br-top",ui:"header-tab",defaults:{border:false,listeners:{requestreport:"onRequertReport"}},load:function(n){var p=this,q=p.getViewModel(),o=p.app.xpriv,s=q.get("store");if(s){p.setLoading(true);s.doAfterLoad=function(f,g,e,l){Ext.Array.each(g,function(m){if(o(m.get("MODULE",true))){p.add({title:m.get("DESKRIPSI"),xtype:m.get("NAMA_KLAS")})}});p.setLoading(false);p.setActiveTab(0)};s.removeAll();s.load()}}},0,["workspace-laporan"],["component","box","container","panel","tabpanel","com-tab","workspace-laporan"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"workspace-laporan":true},["widget.workspace-laporan"],0,[laporan,"Workspace"],0));(Ext.cmd.derive("laporan.WorkspaceController",Ext.app.ViewController,{onRequertReport:function(l,n,m){this.getView().fireEvent("requestreport",l,n,m)}},0,0,0,0,["controller.workspace-laporan"],0,[laporan,"WorkspaceController"],0));(Ext.cmd.derive("laporan.inventory.DataView",Ext.view.View,{viewModel:{type:"inventorymodel"},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var f=this.getViewModel().get("store");if(f){f.removeAll();f.load()}}},0,["inventory-data-view"],["component","box","dataview","inventory-data-view"],{component:true,box:true,dataview:true,"inventory-data-view":true},["widget.inventory-data-view"],0,[laporan.inventory,"DataView"],0));(Ext.cmd.derive("laporan.inventory.Model",Ext.app.ViewModel,{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"16",STATUS:1}}}},0,0,0,0,["viewmodel.inventorymodel"],0,[laporan.inventory,"Model"],0));(Ext.cmd.derive("laporan.inventory.Workspace",com.Form,{controller:"workspace-laporan-inventory",viewModel:{stores:{jeniskategoristore:{type:"kategori-store",queryParams:{JENIS:2,STATUS:1}},store:{type:"barang-store"}}},layout:"border",cls:"x-br-top",border:false,initComponent:function(){var f=this;f.items=[{region:"west",width:300,cls:"x-br-right",layout:{type:"vbox",align:"stretch"},defaults:{margin:5},border:false,items:[{xtype:"laporan-filter",reference:"filter"},{xtype:"referensi-combo",reference:"carabayarref",params:{JENIS:10},firstLoad:true,height:30,emptyText:"[Cara Bayar]"},{xtype:"combobox",displayField:"NAMA",reference:"jeniskategori",valueField:"ID",emptyText:"[Jenis Kategori]",bind:{store:"{jeniskategoristore}"}},{xtype:"checkboxfield",hideLabel:true,margin:"0 6 0 0",inputValue:"1",reference:"cekaktif",uncheckedValue:"0",boxLabel:"Aktif",listeners:{change:"onLoad"}},{xtype:"combobox",reference:"jenisbarang",emptyText:"[ Nama Barang ]",queryMode:"remote",hideTrigger:true,queryParam:"QUERY",displayField:"NAMA",valueField:"ID",minChars:2,bind:{store:"{store}"},tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="x-boundlist-item">','<div style="height: 25px;">[ {NAMA} ] </div>',"</div>","</tpl>"),displayTpl:Ext.create("Ext.XTemplate",'<tpl for=".">',"{NAMA}","</tpl>")},{xtype:"combobox",name:"RUANGAN",allowBlank:false,enterFocus:true,reference:"ruanganref",enforceMaxLength:true,forceSelection:true,validateOnBlur:true,displayField:"DESKRIPSI",valueField:"ID",queryMode:"local",typeAhead:true,emptyText:"[Ruangan]",store:{model:"data.model.Ruangan"},listeners:{specialkey:"onFocusEnter",select:"onSelectRuangan"}},{xtype:"laporan-button-doc",reference:"doctype",height:30}]},{region:"center",xtype:"laporan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"16",STATUS:1}}}},border:false,reference:"inventoryView",listeners:{select:"onSelectReport"}}];f.callParent(arguments)},listeners:{afterrender:"onAfterRender"}},0,["workspace-laporan-inventory"],["component","box","container","panel","form","com-form","workspace-laporan-inventory"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-laporan-inventory":true},["widget.workspace-laporan-inventory"],0,[laporan.inventory,"Workspace"],0));(Ext.cmd.derive("laporan.inventory.WorkspaceController",Ext.app.ViewController,{onAfterRender:function(){var l=this,m=l.getReferences(),n=l.getView();m.inventoryView.load();m.ruanganref.getStore().loadData(n.getPenggunaRuangan())},onFocusEnter:function(l,g){if(g.getKey()===g.ENTER){this.getView().fireEvent("addbarang")}},onSelectRuangan:function(f,l){this.getView().fireEvent("select",l,1)},onSelectReport:function(v,x){var D=this.getReferences(),C=D.filter.getParameters(),w=D.carabayarref.getSelection()?D.carabayarref.getSelection().get("ID"):"0",B=D.jeniskategori.getSelection()?D.jeniskategori.getSelection().get("ID"):"0",y=D.jenisbarang.getSelection()?D.jenisbarang.getSelection().get("ID"):"0",z=D.ruanganref.getSelection(),A=z?z.get("ID"):"0",E=z?z.get("JENIS_KUNJUNGAN"):"0",F=Ext.JSON.decode(x.get("REPORT_PARAMS")),G=D.doctype.getDocType();console.log(x.get("REPORT_PARAMS"));C.PARAMETER.CARABAYAR=w;C.PARAMETER.KATEGORI=B;C.PARAMETER.BARANG=y;C.PARAMETER.LAPORAN=E;C.PARAMETER.RUANGAN=A;F=Ext.apply(F,C);F=Ext.apply(F,G);this.getView().fireEvent("requestreport",x.get("DESKRIPSI"),F,true);D.inventoryView.deselect(x)},onLoad:function(){var m=this,n=m.getReferences(),p=(n.cekaktif.getValue())?1:0,o=n.jenisbarang.getStore();o.setQueryParams({STATUS:p});o.load()}},0,0,0,0,["controller.workspace-laporan-inventory"],0,[laporan.inventory,"WorkspaceController"],0));(Ext.cmd.derive("laporan.jasapelayanan.DataView",Ext.view.View,{viewModel:{type:"jasapelayananmodel"},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var f=this.getViewModel().get("store");if(f){f.removeAll();f.load()}}},0,["jasapelayanan-data-view"],["component","box","dataview","jasapelayanan-data-view"],{component:true,box:true,dataview:true,"jasapelayanan-data-view":true},["widget.jasapelayanan-data-view"],0,[laporan.jasapelayanan,"DataView"],0));(Ext.cmd.derive("laporan.jasapelayanan.Model",Ext.app.ViewModel,{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"15",STATUS:1}}}},0,0,0,0,["viewmodel.jasapelayananmodel"],0,[laporan.jasapelayanan,"Model"],0));(Ext.cmd.derive("laporan.jasapelayanan.Workspace",Ext.form.Panel,{controller:"workspace-laporan-jasapelayanan",layout:"border",cls:"x-br-top",border:false,initComponent:function(){var f=this;f.items=[{region:"west",width:300,cls:"x-br-right",layout:{type:"vbox",align:"stretch"},defaults:{margin:5},border:false,items:[{xtype:"laporan-filter",reference:"filter"},{xtype:"referensi-combo",params:{JENIS:10},firstLoad:true,height:30,emptyText:"[Cara Bayar]",reference:"carabayar"},{xtype:"dokter-combo",height:30,emptyText:"[Dokter]",reference:"dokterref"},{xtype:"referensi-combo",reference:"ruanganref",params:{JENIS:15},firstLoad:true,height:30,emptyText:"[Ruangan]",listeners:{select:"onSelect"}},{xtype:"ruangan-tree",reference:"treeJasaPelayanan",flex:1},{xtype:"laporan-button-doc",height:30,reference:"doctype"}]},{region:"center",xtype:"laporan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"15",STATUS:1}}}},border:false,reference:"JasaPelayananView",listeners:{select:"onSelectReport"}}];f.callParent(arguments)},listeners:{afterrender:"onAfterRender"}},0,["workspace-laporan-jasapelayanan"],["component","box","container","panel","form","workspace-laporan-jasapelayanan"],{component:true,box:true,container:true,panel:true,form:true,"workspace-laporan-jasapelayanan":true},["widget.workspace-laporan-jasapelayanan"],0,[laporan.jasapelayanan,"Workspace"],0));(Ext.cmd.derive("laporan.jasapelayanan.WorkspaceController",Ext.app.ViewController,{onAfterRender:function(){var f=this.getReferences();f.JasaPelayananView.load();f.treeJasaPelayanan.setParams({JENIS_KUNJUNGAN:999})},onSelect:function(q,o){var e=this,s=e.getViewModel(),p=e.getReferences();p.treeJasaPelayanan.setParams({JENIS_KUNJUNGAN:o.get("ID")});p.treeJasaPelayanan.loadStore()},onSelectReport:function(z,D,y){var f=this.getReferences(),A=f.filter.getParameters(),g=f.ruanganref.getSelection()?f.ruanganref.getSelection().get("ID"):"0",e=f.carabayar.getSelection()?f.carabayar.getSelection().get("ID"):"0",B=f.dokterref.getSelection()?f.dokterref.getSelection().get("ID"):"0",E=f.treeJasaPelayanan.getSelection().length>0?f.treeJasaPelayanan.getSelection()[0].get("ID"):"1",C=Ext.JSON.decode(D.get("REPORT_PARAMS")),x=f.doctype.getDocType();A.PARAMETER.RUANGAN=E;A.PARAMETER.LAPORAN=g;A.PARAMETER.CARABAYAR=e;A.PARAMETER.DOKTER=B;C=Ext.apply(C,A);C=Ext.apply(C,x);this.getView().fireEvent("requestreport",D.get("DESKRIPSI"),C,true);f.JasaPelayananView.deselect(y)}},0,0,0,0,["controller.workspace-laporan-jasapelayanan"],0,[laporan.jasapelayanan,"WorkspaceController"],0));(Ext.cmd.derive("laporan.kegiatanrird.DataView",Ext.view.View,{viewModel:{type:"kegiatanrirdmodel"},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var f=this.getViewModel().get("store");if(f){f.removeAll();f.load()}}},0,["kegiatanrird-data-view"],["component","box","dataview","kegiatanrird-data-view"],{component:true,box:true,dataview:true,"kegiatanrird-data-view":true},["widget.kegiatanrird-data-view"],0,[laporan.kegiatanrird,"DataView"],0));(Ext.cmd.derive("laporan.kegiatanrird.Model",Ext.app.ViewModel,{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"19",STATUS:1}}}},0,0,0,0,["viewmodel.kegiatanrirdmodel"],0,[laporan.kegiatanrird,"Model"],0));(Ext.cmd.derive("laporan.kegiatanrird.Workspace",Ext.form.Panel,{controller:"workspace-laporan-kegiatanrird",viewModel:{stores:{diagnosastore:{type:"diagnosa-store"}}},layout:"border",cls:"x-br-top",border:false,initComponent:function(){var f=this;f.items=[{region:"west",width:300,cls:"x-br-right",layout:{type:"vbox",align:"stretch"},defaults:{margin:5},border:false,items:[{xtype:"laporan-filter",reference:"filter"},{xtype:"referensi-combo",params:{JENIS:10},firstLoad:true,height:30,emptyText:"[Cara Bayar ]",reference:"carabayarref"},{xtype:"referensi-combo",params:{JENIS:45},firstLoad:true,height:30,emptyText:"[Cara Keluar]",reference:"carakeluarrref"},{xtype:"referensi-combo",reference:"ruanganref",params:{JENIS:15},firstLoad:true,height:30,emptyText:"[Ruangan]",listeners:{select:"onSelect"},doAfterLoad:function(m,e,n){Ext.Array.each(m,function(g){if(g.get("ID")==0||g.get("ID")==8||g.get("ID")==11||g.get("ID")==7||g.get("ID")==10||g.get("ID")==12||g.get("ID")==6||g.get("ID")==4||g.get("ID")==9||g.get("ID")==5||g.get("ID")==1){n.remove(g)}})}},{xtype:"ruangan-tree",reference:"treekegiatanrird",flex:1},{xtype:"laporan-button-doc",height:30,reference:"doctype"}]},{region:"center",xtype:"laporan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"19",STATUS:1}}}},border:false,reference:"kegiatanrirdView",listeners:{select:"onSelectReport"}}];f.callParent(arguments)},listeners:{afterrender:"onAfterRender"}},0,["workspace-laporan-kegiatanrird"],["component","box","container","panel","form","workspace-laporan-kegiatanrird"],{component:true,box:true,container:true,panel:true,form:true,"workspace-laporan-kegiatanrird":true},["widget.workspace-laporan-kegiatanrird"],0,[laporan.kegiatanrird,"Workspace"],0));(Ext.cmd.derive("laporan.kegiatanrird.WorkspaceController",Ext.app.ViewController,{onAfterRender:function(){var f=this.getReferences();f.kegiatanrirdView.load();f.treekegiatanrird.setParams({JENIS_KUNJUNGAN:999})},onSelect:function(q,o){var e=this,s=e.getViewModel(),p=e.getReferences();p.treekegiatanrird.setParams({JENIS_KUNJUNGAN:o.get("ID")});p.treekegiatanrird.loadStore()},onSelectReport:function(A,w,y){var C=this.getReferences(),B=C.filter.getParameters(),v=C.carabayarref.getSelection()?C.carabayarref.getSelection().get("ID"):"0",x=C.carakeluarrref.getSelection()?C.carakeluarrref.getSelection().get("ID"):"0",z=C.ruanganref.getSelection()?C.ruanganref.getSelection().get("ID"):"0",E=C.treekegiatanrird.getSelection().length>0?C.treekegiatanrird.getSelection()[0].get("ID"):"0",D=Ext.JSON.decode(w.get("REPORT_PARAMS")),u=C.doctype.getDocType();B.PARAMETER.CARABAYAR=v;B.PARAMETER.CARAKELUAR=x;B.PARAMETER.LAPORAN=z;B.PARAMETER.RUANGAN=E;D=Ext.apply(D,B);D=Ext.apply(D,u);this.getView().fireEvent("requestreport",w.get("DESKRIPSI"),D,true);C.kegiatanrirdView.deselect(y)}},0,0,0,0,["controller.workspace-laporan-kegiatanrird"],0,[laporan.kegiatanrird,"WorkspaceController"],0));(Ext.cmd.derive("laporan.kunjungan.DataView",Ext.view.View,{viewModel:{type:"kunjunganmodel"},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var f=this.getViewModel().get("store");if(f){f.removeAll();f.load()}}},0,["kunjungan-data-view"],["component","box","dataview","kunjungan-data-view"],{component:true,box:true,dataview:true,"kunjungan-data-view":true},["widget.kunjungan-data-view"],0,[laporan.kunjungan,"DataView"],0));(Ext.cmd.derive("laporan.kunjungan.Model",Ext.app.ViewModel,{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"12",STATUS:1}}}},0,0,0,0,["viewmodel.kunjunganmodel"],0,[laporan.kunjungan,"Model"],0));(Ext.cmd.derive("laporan.kunjungan.Workspace",Ext.form.Panel,{controller:"workspace-laporan-kunjungan",layout:"border",cls:"x-br-top",border:false,initComponent:function(){var f=this;f.items=[{region:"west",width:300,cls:"x-br-right",layout:{type:"vbox",align:"stretch"},defaults:{margin:5},border:false,items:[{xtype:"laporan-filter",reference:"filter"},{xtype:"referensi-combo",params:{JENIS:10},firstLoad:true,height:30,emptyText:"[Cara Bayar ]",reference:"carabayar"},{xtype:"referensi-combo",reference:"ruanganref",params:{JENIS:15},firstLoad:true,height:30,emptyText:"[Ruangan]",listeners:{select:"onSelect"},doAfterLoad:function(m,e,n){Ext.Array.each(m,function(g){if(g.get("ID")==0){n.remove(g)}})}},{xtype:"ruangan-tree",reference:"treeKunjungan",flex:1},{xtype:"laporan-button-doc",height:30,reference:"doctype"}]},{region:"center",xtype:"laporan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"12",STATUS:1}}}},border:false,reference:"kunjunganView",listeners:{select:"onSelectReport"}}];f.callParent(arguments)},listeners:{afterrender:"onAfterRender"}},0,["workspace-laporan-kunjungan"],["component","box","container","panel","form","workspace-laporan-kunjungan"],{component:true,box:true,container:true,panel:true,form:true,"workspace-laporan-kunjungan":true},["widget.workspace-laporan-kunjungan"],0,[laporan.kunjungan,"Workspace"],0));(Ext.cmd.derive("laporan.kunjungan.WorkspaceController",Ext.app.ViewController,{onAfterRender:function(){var f=this.getReferences();f.kunjunganView.load();f.treeKunjungan.setParams({JENIS_KUNJUNGAN:999})},onSelect:function(q,o){var e=this,s=e.getViewModel(),p=e.getReferences();p.treeKunjungan.setParams({JENIS_KUNJUNGAN:o.get("ID")});p.treeKunjungan.loadStore()},onSelectReport:function(y,B,x){var f=this.getReferences(),z=f.filter.getParameters(),e=f.carabayar.getSelection()?f.carabayar.getSelection().get("ID"):"0",g=f.ruanganref.getSelection()?f.ruanganref.getSelection().get("ID"):"0",C=f.treeKunjungan.getSelection().length>0?f.treeKunjungan.getSelection()[0].get("ID"):"0",A=Ext.JSON.decode(B.get("REPORT_PARAMS")),w=f.doctype.getDocType();z.PARAMETER.RUANGAN=C;z.PARAMETER.LAPORAN=g;z.PARAMETER.CARABAYAR=e;A=Ext.apply(A,z);A=Ext.apply(A,w);this.getView().fireEvent("requestreport",B.get("DESKRIPSI"),A,true);f.kunjunganView.deselect(x)}},0,0,0,0,["controller.workspace-laporan-kunjungan"],0,[laporan.kunjungan,"WorkspaceController"],0));(Ext.cmd.derive("laporan.layanan.DataView",Ext.view.View,{viewModel:{type:"layananmodel"},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var f=this.getViewModel().get("store");if(f){f.removeAll();f.load()}}},0,["layanan-data-view"],["component","box","dataview","layanan-data-view"],{component:true,box:true,dataview:true,"layanan-data-view":true},["widget.layanan-data-view"],0,[laporan.layanan,"DataView"],0));(Ext.cmd.derive("laporan.layanan.Model",Ext.app.ViewModel,{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"13",STATUS:1}}}},0,0,0,0,["viewmodel.layananmodel"],0,[laporan.layanan,"Model"],0));(Ext.cmd.derive("laporan.layanan.Workspace",Ext.form.Panel,{controller:"workspace-laporan-layanan",layout:"border",cls:"x-br-top",border:false,initComponent:function(){var f=this;f.items=[{region:"west",width:300,cls:"x-br-right",layout:{type:"vbox",align:"stretch"},defaults:{margin:5},border:false,items:[{xtype:"laporan-filter",reference:"filter"},{xtype:"referensi-combo",params:{JENIS:10},firstLoad:true,height:30,emptyText:"[Cara Bayar ]",reference:"carabayar"},{xtype:"dokter-combo",height:30,emptyText:"[Dokter]",reference:"dokterref"},{xtype:"tindakan-combo",height:30,emptyText:"[Tindakan]",reference:"tindakanref"},{xtype:"referensi-combo",reference:"ruanganref",params:{JENIS:15},firstLoad:true,height:30,emptyText:"[Ruangan]",listeners:{select:"onSelect"}},{xtype:"ruangan-tree",reference:"treeLayanan",flex:1},{xtype:"laporan-button-doc",height:30,reference:"doctype"}]},{region:"center",xtype:"laporan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"13",STATUS:1}}}},border:false,reference:"layananView",listeners:{select:"onSelectReport"}}];f.callParent(arguments)},listeners:{afterrender:"onAfterRender"}},0,["workspace-laporan-layanan"],["component","box","container","panel","form","workspace-laporan-layanan"],{component:true,box:true,container:true,panel:true,form:true,"workspace-laporan-layanan":true},["widget.workspace-laporan-layanan"],0,[laporan.layanan,"Workspace"],0));(Ext.cmd.derive("laporan.layanan.WorkspaceController",Ext.app.ViewController,{onAfterRender:function(){var f=this.getReferences();f.layananView.load();f.treeLayanan.setParams({JENIS_KUNJUNGAN:999})},onSelect:function(q,o){var e=this,s=e.getViewModel(),p=e.getReferences();p.treeLayanan.setParams({JENIS_KUNJUNGAN:o.get("ID")});p.treeLayanan.loadStore()},onSelectReport:function(z,D,l){var e=this.getReferences(),A=e.filter.getParameters(),f=e.ruanganref.getSelection()?e.ruanganref.getSelection().get("ID"):"0",F=e.carabayar.getSelection()?e.carabayar.getSelection().get("ID"):"0",B=e.dokterref.getSelection()?e.dokterref.getSelection().get("ID"):"0",G=e.tindakanref.getSelection()?e.tindakanref.getSelection().get("ID"):"0",E=e.treeLayanan.getSelection().length>0?e.treeLayanan.getSelection()[0].get("ID"):"0",C=Ext.JSON.decode(D.get("REPORT_PARAMS")),g=e.doctype.getDocType();A.PARAMETER.RUANGAN=E;A.PARAMETER.LAPORAN=f;A.PARAMETER.CARABAYAR=F;A.PARAMETER.DOKTER=B;A.PARAMETER.TINDAKAN=G;C=Ext.apply(C,A);C=Ext.apply(C,g);this.getView().fireEvent("requestreport",D.get("DESKRIPSI"),C,true);e.layananView.deselect(l)}},0,0,0,0,["controller.workspace-laporan-layanan"],0,[laporan.layanan,"WorkspaceController"],0));(Ext.cmd.derive("laporan.monitoring.DataView",Ext.view.View,{viewModel:{type:"monitoringpelayananmodel"},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var f=this.getViewModel().get("store");if(f){f.removeAll();f.load()}}},0,["monitoring-pelayanan-data-view"],["component","box","dataview","monitoring-pelayanan-data-view"],{component:true,box:true,dataview:true,"monitoring-pelayanan-data-view":true},["widget.monitoring-pelayanan-data-view"],0,[laporan.monitoring,"DataView"],0));(Ext.cmd.derive("laporan.monitoring.Model",Ext.app.ViewModel,{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"20",STATUS:1}}}},0,0,0,0,["viewmodel.monitoringpelayananmodel"],0,[laporan.monitoring,"Model"],0));(Ext.cmd.derive("laporan.monitoring.Workspace",com.Form,{controller:"workspace-monitoring-pelayanan",layout:"border",cls:"x-br-top",border:false,initComponent:function(){var f=this;f.items=[{region:"west",width:300,cls:"x-br-right",layout:{type:"vbox",align:"stretch"},defaults:{margin:5},border:false,items:[{xtype:"laporan-filter",reference:"filter"},{xtype:"combobox",reference:"statuslayanan",store:Ext.create("Ext.data.Store",{fields:["ID","NAME"],data:[{ID:"1",NAME:"Belum Diterima / Final"},{ID:"2",NAME:"Sudah Diterima / Final"}]}),queryMode:"local",displayField:"NAME",valueField:"ID",height:30,emptyText:"[Status]"},{xtype:"ruangan-combo",reference:"ruanganref",params:{JENIS:5},firstLoad:true,height:30,emptyText:"[Ruangan]",name:"RUANGAN",listeners:{select:"onSelectRuangan",specialkey:"onFocusEnter"}},{xtype:"laporan-button-doc",reference:"doctype",height:30}]},{region:"center",xtype:"monitoring-pelayanan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"20",STATUS:1}}}},border:false,reference:"monitoringView",listeners:{select:"onSelectReport"}}];f.callParent(arguments)},listeners:{afterrender:"onAfterRender"}},0,["workspace-monitoring-pelayanan"],["component","box","container","panel","form","com-form","workspace-monitoring-pelayanan"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-monitoring-pelayanan":true},["widget.workspace-monitoring-pelayanan"],0,[laporan.monitoring,"Workspace"],0));(Ext.cmd.derive("laporan.monitoring.WorkspaceController",Ext.app.ViewController,{onAfterRender:function(){var l=this,m=l.getReferences(),n=l.getView();m.monitoringView.load();m.ruanganref.load();m.statuslayanan.setValue(1)},onFocusEnter:function(l,g){if(g.getKey()===g.ENTER){this.getView().fireEvent("addbarang")}},onSelectRuangan:function(f,l){this.getView().fireEvent("select",l,1)},onSelectReport:function(u,w){var A=this.getReferences(),z=A.filter.getParameters(),v=A.statuslayanan.getSelection()?A.statuslayanan.getSelection().get("ID"):"",x=A.ruanganref.getSelection(),y=x?x.get("ID"):"",s=Ext.JSON.decode(w.get("REPORT_PARAMS")),t=A.doctype.getDocType();z.PARAMETER.PSTATUS=v;z.PARAMETER.RUANGAN=y;s=Ext.apply(s,z);s=Ext.apply(s,t);this.getView().fireEvent("requestreport",w.get("DESKRIPSI"),s,true);A.monitoringView.deselect(w)}},0,0,0,0,["controller.workspace-monitoring-pelayanan"],0,[laporan.monitoring,"WorkspaceController"],0));(Ext.cmd.derive("laporan.pendapatan.DataView",Ext.view.View,{viewModel:{type:"pendapatanmodel"},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var f=this.getViewModel().get("store");if(f){f.removeAll();f.load()}}},0,["pendapatan-data-view"],["component","box","dataview","pendapatan-data-view"],{component:true,box:true,dataview:true,"pendapatan-data-view":true},["widget.pendapatan-data-view"],0,[laporan.pendapatan,"DataView"],0));(Ext.cmd.derive("laporan.pendapatan.Model",Ext.app.ViewModel,{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"18",STATUS:1}}}},0,0,0,0,["viewmodel.pendapatanmodel"],0,[laporan.pendapatan,"Model"],0));(Ext.cmd.derive("laporan.pendapatan.Workspace",Ext.form.Panel,{controller:"workspace-laporan-pendapatan",layout:"border",cls:"x-br-top",border:false,initComponent:function(){var f=this;f.items=[{region:"west",width:300,cls:"x-br-right",layout:{type:"vbox",align:"stretch"},defaults:{margin:5},border:false,items:[{xtype:"laporan-filter",reference:"filter"},{xtype:"referensi-combo",params:{JENIS:10},firstLoad:true,height:30,emptyText:"[Cara Bayar]",reference:"carabayar"},{xtype:"referensi-combo",reference:"ruanganref",params:{JENIS:15},firstLoad:true,height:30,emptyText:"[Ruangan]",listeners:{select:"onSelect"}},{xtype:"ruangan-tree",reference:"treePendapatan",flex:1},{xtype:"laporan-button-doc",height:30,reference:"doctype"}]},{region:"center",xtype:"laporan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"18",STATUS:1}}}},border:false,reference:"pendapatanView",listeners:{select:"onSelectReport"}}];f.callParent(arguments)},listeners:{afterrender:"onAfterRender"}},0,["workspace-laporan-pendapatan"],["component","box","container","panel","form","workspace-laporan-pendapatan"],{component:true,box:true,container:true,panel:true,form:true,"workspace-laporan-pendapatan":true},["widget.workspace-laporan-pendapatan"],0,[laporan.pendapatan,"Workspace"],0));(Ext.cmd.derive("laporan.pendapatan.WorkspaceController",Ext.app.ViewController,{onAfterRender:function(){var f=this.getReferences();f.pendapatanView.load();f.treePendapatan.setParams({JENIS_KUNJUNGAN:999})},onSelect:function(q,o){var e=this,s=e.getViewModel(),p=e.getReferences();p.treePendapatan.setParams({JENIS_KUNJUNGAN:o.get("ID")});p.treePendapatan.loadStore()},onSelectReport:function(A,v,y){var G=this,C=G.getReferences(),B=C.filter.getParameters(),D=C.carabayar.getSelection()?C.carabayar.getSelection().get("ID"):"0",E=C.ruanganref.getSelection()?C.ruanganref.getSelection().get("ID"):"0",w=C.treePendapatan.getSelection(),z=w.length>0?w[0].get("ID"):1,F=Ext.JSON.decode(v.get("REPORT_PARAMS")),x=C.doctype.getDocType();B.PARAMETER.CARABAYAR=D;B.PARAMETER.RUANGAN=z;B.PARAMETER.LAPORAN=E;F=Ext.apply(F,B);F=Ext.apply(F,x);G.getView().fireEvent("requestreport",v.get("DESKRIPSI"),F,true);C.pendapatanView.deselect(y)}},0,0,0,0,["controller.workspace-laporan-pendapatan"],0,[laporan.pendapatan,"WorkspaceController"],0));(Ext.cmd.derive("laporan.penerimaankasir.Workspace",com.Form,{controller:"workspace-laporan-penerimaan-kasir",layout:"border",cls:"x-br-top",border:false,initComponent:function(){var f=this;f.items=[{region:"west",width:300,cls:"x-br-right",layout:{type:"vbox",align:"stretch"},defaults:{margin:5},border:false,items:[{xtype:"transaksi-kasir-list",reference:"transaksikasirlist",flex:1},{xtype:"laporan-button-doc",reference:"doctype",height:30}]},{region:"center",xtype:"laporan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"14",STATUS:1}}}},border:false,reference:"penerimaanKasirView",listeners:{select:"onSelectReport"}}];com.Form.prototype.initComponent.apply(this,arguments)},listeners:{afterrender:"onAfterRender"}},0,["workspace-laporan-penerimaan-kasir"],["component","box","container","panel","form","com-form","workspace-laporan-penerimaan-kasir"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-laporan-penerimaan-kasir":true},["widget.workspace-laporan-penerimaan-kasir"],0,[laporan.penerimaankasir,"Workspace"],0));(Ext.cmd.derive("laporan.penerimaankasir.WorkspaceController",Ext.app.ViewController,{onAfterRender:function(){var m=this,p=m.getView(),o=m.getReferences(),n=p.app.xpriv("1209");o.transaksikasirlist.setGridConfig({paging:true,filter:{enabled:n,kasir:n}});o.penerimaanKasirView.load()},onSelectReport:function(C,B,u){var z=this,w=z.getView(),x=this.getReferences(),y=x.transaksikasirlist.getSelection(),A={PARAMETER:{}},t=Ext.JSON.decode(B.get("REPORT_PARAMS")),v=x.doctype.getDocType();A.PARAMETER.KASIR=w.app.usrid;if(Ext.isArray(y)){A.PARAMETER.NOMOR="";Ext.Array.each(y,function(e,f){A.PARAMETER.NOMOR+="'"+e.get("NOMOR");A.PARAMETER.KASIR=e.get("KASIR");if(f<(y.length-1)){A.PARAMETER.NOMOR+="',"}else{A.PARAMETER.NOMOR+="'"}})}t=Ext.apply(t,A);t=Ext.apply(t,v);this.getView().fireEvent("requestreport",B.get("DESKRIPSI"),t,false);x.penerimaanKasirView.deselect(u)}},0,0,0,0,["controller.workspace-laporan-penerimaan-kasir"],0,[laporan.penerimaankasir,"WorkspaceController"],0));(Ext.cmd.derive("laporan.pengunjung.DataView",Ext.view.View,{viewModel:{type:"pengunjungmodel"},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var f=this.getViewModel().get("store");if(f){f.removeAll();f.load()}}},0,["pengunjung-data-view"],["component","box","dataview","pengunjung-data-view"],{component:true,box:true,dataview:true,"pengunjung-data-view":true},["widget.pengunjung-data-view"],0,[laporan.pengunjung,"DataView"],0));(Ext.cmd.derive("laporan.pengunjung.Model",Ext.app.ViewModel,{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"11",STATUS:1}}}},0,0,0,0,["viewmodel.pengunjungmodel"],0,[laporan.pengunjung,"Model"],0));(Ext.cmd.derive("laporan.pengunjung.Workspace",Ext.form.Panel,{controller:"workspace-laporan-pengunjung",layout:"border",cls:"x-br-top",border:false,initComponent:function(){var f=this;f.items=[{region:"west",width:300,cls:"x-br-right",border:false,defaults:{margin:5},layout:{type:"vbox",align:"stretch"},border:false,items:[{xtype:"laporan-filter",reference:"filter"},{xtype:"referensi-combo",params:{JENIS:10},firstLoad:true,height:30,emptyText:"[Cara Bayar]",reference:"carabayar"},{xtype:"referensi-combo",reference:"ruanganref",params:{JENIS:15},firstLoad:true,height:30,emptyText:"[Ruangan]",listeners:{select:"onSelectRuangan"},doAfterLoad:function(m,e,n){Ext.Array.each(m,function(g){if(g.get("ID")!=1&&g.get("ID")!=2&&g.get("ID")!=3){n.remove(g)}})}},{xtype:"ruangan-tree",reference:"treePengunjung",flex:1},{xtype:"laporan-button-doc",height:30,reference:"doctype"}]},{region:"center",xtype:"laporan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"11",STATUS:1}}}},border:false,reference:"pengunjungView",listeners:{select:"onSelectReport"}}];f.callParent(arguments)},listeners:{afterrender:"onAfterRender"}},0,["workspace-laporan-pengunjung"],["component","box","container","panel","form","workspace-laporan-pengunjung"],{component:true,box:true,container:true,panel:true,form:true,"workspace-laporan-pengunjung":true},["widget.workspace-laporan-pengunjung"],0,[laporan.pengunjung,"Workspace"],0));(Ext.cmd.derive("laporan.pengunjung.WorkspaceController",Ext.app.ViewController,{onAfterRender:function(){var f=this.getReferences();f.pengunjungView.load();f.treePengunjung.setParams({JENIS_KUNJUNGAN:999})},onSelectRuangan:function(q,o){var e=this,s=e.getViewModel(),p=e.getReferences();p.treePengunjung.setParams({JENIS_KUNJUNGAN:o.get("ID")});p.treePengunjung.loadStore()},onSelectReport:function(y,B,x){var f=this.getReferences(),z=f.filter.getParameters(),e=f.carabayar.getSelection()?f.carabayar.getSelection().get("ID"):"0",g=f.ruanganref.getSelection()?f.ruanganref.getSelection().get("ID"):"0",C=f.treePengunjung.getSelection().length>0?f.treePengunjung.getSelection()[0].get("ID"):"0",A=Ext.JSON.decode(B.get("REPORT_PARAMS")),w=f.doctype.getDocType();z.PARAMETER.RUANGAN=C;z.PARAMETER.LAPORAN=g;z.PARAMETER.CARABAYAR=e;A=Ext.apply(A,z);A=Ext.apply(A,w);this.getView().fireEvent("requestreport",B.get("DESKRIPSI"),A,true);f.pengunjungView.deselect(x)}},0,0,0,0,["controller.workspace-laporan-pengunjung"],0,[laporan.pengunjung,"WorkspaceController"],0));(Ext.cmd.derive("laporan.rekammedis.DataView",Ext.view.View,{viewModel:{type:"rekammedismodel"},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var f=this.getViewModel().get("store");if(f){f.removeAll();f.load()}}},0,["rekammedis-data-view"],["component","box","dataview","rekammedis-data-view"],{component:true,box:true,dataview:true,"rekammedis-data-view":true},["widget.rekammedis-data-view"],0,[laporan.rekammedis,"DataView"],0));(Ext.cmd.derive("laporan.rekammedis.Model",Ext.app.ViewModel,{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"17",STATUS:1}}}},0,0,0,0,["viewmodel.rekammedismodel"],0,[laporan.rekammedis,"Model"],0));(Ext.cmd.derive("laporan.rekammedis.Workspace",Ext.form.Panel,{controller:"workspace-laporan-rekammedis",viewModel:{stores:{diagnosastore:{type:"diagnosa-store",queryParams:{ICD:1}}}},layout:"border",cls:"x-br-top",border:false,initComponent:function(){var f=this;f.items=[{region:"west",width:300,cls:"x-br-right",layout:{type:"vbox",align:"stretch"},defaults:{margin:5},border:false,items:[{xtype:"laporan-filter",reference:"filter"},{xtype:"referensi-combo",params:{JENIS:10},firstLoad:true,height:30,emptyText:"[Cara Bayar ]",reference:"carabayarref"},{xtype:"referensi-combo",params:{JENIS:45},firstLoad:true,height:30,emptyText:"[Cara Keluar]",reference:"carakeluarrref"},{xtype:"combobox",emptyText:"[Kode ICD-Deskripsi]",bind:{store:"{diagnosastore}"},hideTrigger:true,reference:"kodeicdref",typeAhead:true,queryParam:"QUERY",displayField:"STR",valueField:"CODE",minChars:2,tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="x-boundlist-item"><strong>{CODE}</strong> - {STR}</div>',"</tpl>"),displayTpl:Ext.create("Ext.XTemplate",'<tpl for=".">',"{CODE} - {STR}","</tpl>"),listeners:{focus:"onBeforeQuery"}},{xtype:"referensi-combo",reference:"ruanganref",params:{JENIS:15},firstLoad:true,height:30,emptyText:"[Ruangan]",listeners:{select:"onSelect"},doAfterLoad:function(m,e,n){Ext.Array.each(m,function(g){if(g.get("ID")==0||g.get("ID")==8||g.get("ID")==11||g.get("ID")==7||g.get("ID")==10||g.get("ID")==12||g.get("ID")==6||g.get("ID")==4||g.get("ID")==9||g.get("ID")==5){n.remove(g)}})}},{xtype:"numberfield",reference:"limitref",value:0,minValue:0,emptyText:"[Limit]"},{xtype:"checkbox",reference:"utamaref",inputValue:1,uncheckedValue:0,boxLabel:"Primary",id:"utama"},{xtype:"ruangan-tree",reference:"treeRekamMedis",flex:1},{xtype:"laporan-button-doc",height:30,reference:"doctype"}]},{region:"center",xtype:"laporan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"17",STATUS:1}}}},border:false,reference:"rekamMedisView",listeners:{select:"onSelectReport"}}];f.callParent(arguments)},listeners:{afterrender:"onAfterRender"}},0,["workspace-laporan-rekammedis"],["component","box","container","panel","form","workspace-laporan-rekammedis"],{component:true,box:true,container:true,panel:true,form:true,"workspace-laporan-rekammedis":true},["widget.workspace-laporan-rekammedis"],0,[laporan.rekammedis,"Workspace"],0));(Ext.cmd.derive("laporan.rekammedis.WorkspaceController",Ext.app.ViewController,{onAfterRender:function(){var f=this.getReferences();f.rekamMedisView.load();f.treeRekamMedis.setParams({JENIS_KUNJUNGAN:999})},onSelect:function(q,e){var o=this,s=o.getViewModel(),p=o.getReferences();p.treeRekamMedis.setParams({JENIS_KUNJUNGAN:e.get("ID")});p.treeRekamMedis.loadStore()},onSelectReport:function(C,J,A){var E=this.getReferences(),D=E.filter.getParameters(),I=E.carabayarref.getSelection()?E.carabayarref.getSelection().get("ID"):"0",z=E.carakeluarrref.getSelection()?E.carakeluarrref.getSelection().get("ID"):"0",F=E.kodeicdref.getSelection()?E.kodeicdref.getSelection().get("CODE"):"0",K=E.limitref.getValue()?E.limitref.getValue():0,x=E.utamaref.getValue()?1:0,B=E.ruanganref.getSelection()?E.ruanganref.getSelection().get("ID"):"0",y=E.treeRekamMedis.getSelection().length>0?E.treeRekamMedis.getSelection()[0].get("ID"):"0",G=Ext.JSON.decode(J.get("REPORT_PARAMS")),H=E.doctype.getDocType();D.PARAMETER.CARAKELUAR=z;D.PARAMETER.RUANGAN=y;D.PARAMETER.LAPORAN=B;D.PARAMETER.CARABAYAR=I;D.PARAMETER.KODEICD=F;D.PARAMETER.UTAMA=x;D.PARAMETER.LMT=K;G=Ext.apply(G,D);G=Ext.apply(G,H);this.getView().fireEvent("requestreport",J.get("DESKRIPSI"),G,true);E.rekamMedisView.deselect(A)},onBeforeQuery:function(f){if(f.combo){f.combo.getStore().removeAll()}}},0,0,0,0,["controller.workspace-laporan-rekammedis"],0,[laporan.rekammedis,"WorkspaceController"],0));(Ext.cmd.derive("laporan.rl.DataView",Ext.view.View,{viewModel:{type:"rlmodel"},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var f=this.getViewModel().get("store");if(f){f.removeAll();f.load()}}},0,["rl-data-view"],["component","box","dataview","rl-data-view"],{component:true,box:true,dataview:true,"rl-data-view":true},["widget.rl-data-view"],0,[laporan.rl,"DataView"],0));(Ext.cmd.derive("laporan.rl.Model",Ext.app.ViewModel,{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"10",STATUS:1}}}},0,0,0,0,["viewmodel.rlmodel"],0,[laporan.rl,"Model"],0));(Ext.cmd.derive("laporan.rl.Workspace",Ext.form.Panel,{controller:"workspace-laporan-rl",layout:"border",cls:"x-br-top  x-br-right",border:false,initComponent:function(){var f=this;f.items=[{region:"west",width:300,cls:"x-br-right",layout:{type:"vbox",align:"stretch"},defaults:{margin:5},border:false,items:[{xtype:"segmentedbutton",reference:"jenis",items:[{text:"Kemkes",iconCls:"simpel-kemkes",inputValue:"1001",pressed:true},{text:"Dinkes",inputValue:"1002"}],listeners:{toggle:"onToggleJenis"}},{xtype:"laporan-filter",reference:"filter"},{xtype:"laporan-button-doc",height:30,reference:"doctype"}]},{region:"center",xtype:"laporan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"1001",STATUS:1}}}},border:false,reference:"rlview",listeners:{select:"onSelectReport"}}];f.callParent(arguments)},listeners:{afterrender:"onAfterRender"}},0,["workspace-laporan-rl"],["component","box","container","panel","form","workspace-laporan-rl"],{component:true,box:true,container:true,panel:true,form:true,"workspace-laporan-rl":true},["widget.workspace-laporan-rl"],0,[laporan.rl,"Workspace"],0));(Ext.cmd.derive("laporan.rl.WorkspaceController",Ext.app.ViewController,{onAfterRender:function(){var f=this.getReferences();f.rlview.load()},onSelectReport:function(u,w,s){var q=this.getReferences(),v=this.getView(),x=q.filter.getParameters(),t=Ext.JSON.decode(w.get("REPORT_PARAMS")),y=q.doctype.getDocType();t=Ext.apply(t,x);t=Ext.apply(t,y);v.fireEvent("requestreport",w.get("DESKRIPSI"),t,true);q.rlview.deselect(s)},onToggleJenis:function(n,q,o){var p=this.getReferences(),s=p.rlview.getStore();if(s){s.setQueryParams({JENIS:q.inputValue,STATUS:1});p.rlview.load()}}},0,0,0,0,["controller.workspace-laporan-rl"],0,[laporan.rl,"WorkspaceController"],0));(Ext.cmd.derive("informasi.Workspace",com.View,{viewModel:{stores:{store:{data:[{title:"Informasi Pengunjung",className:"informasi.pengunjung.Workspace"}]}}},controller:"workspace-informasi",autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap-info",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap-info">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{title}</strong></div>',"</div>","</a>","</div>","</tpl>"),listeners:{select:"onSelect"}},0,["workspace-informasi"],["component","box","dataview","com-view","workspace-informasi"],{component:true,box:true,dataview:true,"com-view":true,"workspace-informasi":true},["widget.workspace-informasi"],0,[informasi,"Workspace"],0));(Ext.cmd.derive("informasi.WorkspaceController",Ext.app.ViewController,{ruangans:undefined,onSelect:function(o,m){var n=this,p=n.getView();p.openDialog("",true,0,0,{xtype:"ruangan-list",ui:"panel-cyan",showCloseButton:true,title:"Pilih Ruangan",hideHeaders:true,ruanganAkses:false,checkboxModel:true,flex:1,selModel:{selType:"checkboxmodel",mode:"MULTI",checkOnly:true},listeners:{scope:n,select:"onSelectRuangan",deselect:"onDeselectRuangan",itemclick:"onItemClick"},bbar:{xtype:"toolbar",ui:"toolbar-blue",items:["->",{xtype:"combobox",reference:"waktuperpindahan",fieldLabel:"Waktu Perpindahan Ruangan",labelWidth:180,value:15,width:253,store:{data:[{ID:5},{ID:10},{ID:15},{ID:20},{ID:25},{ID:30}]},displayField:"ID",valueField:"ID"},{xtype:"component",html:"detik"},{text:"Mulai",listeners:{scope:n,click:"onMulai"}}]}},function(e,f){var g=f.down("ruangan-list"),l=f.down("[reference=waktuperpindahan]");g.setParams({TREE:0,JENIS:5,NOT:Ext.JSON.encode({JENIS_KUNJUNGAN:[0,2,3]}),STATUS:1});l.on("select",function(u,t){n.waktuPerpindahan=t.get("ID")});g.loadStore();g.doAfterLoad=function(u,t){n.ruangans=t;Ext.Array.each(n.ruangans,function(q){q.set("checked",false)});n.waktuPerpindahan=l.getSelection().get("ID")}});p.deselect(m)},onSelectRuangan:function(l,g){g.set("checked",true)},onDeselectRuangan:function(l,g){g.set("checked",false)},onItemClick:function(){},onMulai:function(){var m=this,n=m.getView(),l=[];Ext.Array.each(m.ruangans,function(e){if(e.get("checked")){l.push(e)}});if(l.length==0){n.notifyMessage("Silahkan pilih salah satu ruangan yang ingin ditampilkan","danger-blue");return}n.openDialog("",true,0,0,{xtype:"workspace-info-pengunjung",hideHeader:true},function(f,g){var e=g.down("workspace-info-pengunjung");e.load(l,m.waktuPerpindahan)})}},0,0,0,0,["controller.workspace-informasi"],0,[informasi,"WorkspaceController"],0));(Ext.cmd.derive("informasi.pengunjung.DataView",com.Grid,{viewModel:{data:{ruangan:undefined},stores:{store:{type:"antrian-ruangan-store",queryParams:{STATUS:1}}}},bind:{store:"{store}",title:"<div style='font-weight: bold; border:0px;background: -webkit-linear-gradient(top, #fcfff4 0%,#dfe5d7 40%,#b3bead 100%); border-left: 10px solid #475868;font-size: 20px;padding: 10px 0px 10px 10px;'>Pengunjung {ruangan.DESKRIPSI}</div>"},margin:0,padding:0,bodyStyle:"background-color: #475868;",hideHeaders:true,initComponent:function(){var f=this;f.columns=[{xtype:"templatecolumn",align:"right",flex:2,tpl:new Ext.XTemplate('<div class="thumb-wrap" style="background-color:#637f98;">','<div class="thumb" style="margin: 0px; padding: 0px;">','<div style="float: left; font-weight: bold; color:white; font-size: 40px; padding-left: 5px; padding-top: 13px;">{[this.getNomor(values.NOMOR)]}</div>','<div style="font-weight: bold; color:white; font-size: 22px; padding: 5px;"> {[this.getFormatNorm(values.REFERENSI.TUJUAN_PASIEN.REFERENSI.PENDAFTARAN.REFERENSI.PASIEN.NORM)]} - {[this.getNamaLengkap(values.REFERENSI.TUJUAN_PASIEN.REFERENSI.PENDAFTARAN.REFERENSI.PASIEN)]}</div>','<div style="font-weight: bold; color: #fad644;font-size: 13px">{[this.getFormatPendaftaran(values.REFERENSI.TUJUAN_PASIEN.REFERENSI.PENDAFTARAN.NOMOR)]} - {[this.tanggalFormat(values.REFERENSI.TUJUAN_PASIEN.REFERENSI.PENDAFTARAN.TANGGAL)]}</div>',"</div>","</div>",{getNomor:function(e){return Ext.String.leftPad(e,3,"0")},getFormatNorm:function(m){var n=Ext.String.leftPad(m,8,"0"),e=Ext.String.insert(Ext.String.insert(Ext.String.insert(n,".",2),".",5),".",8);return e},getNamaLengkap:function(p){var n=p.GELAR_DEPAN||"",e=p.NAMA||"",o=p.GELAR_BELAKANG||"";n=n==""?"":n+". ";o=o==""?"":", "+o;return n+e+o},getFormatPendaftaran:function(e){return e.substring(0,6)+"."+e.substring(6)},tanggalFormat:function(e){return Ext.Date.format(Ext.Date.parse(e,"Y-m-d H:i:s"),"d-m-Y H:i:s")}})}];f.callParent(arguments)},setRuangan:function(f){if(f){this.getViewModel().set("ruangan",f)}}},0,["informasi-pengunjung"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","informasi-pengunjung"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"informasi-pengunjung":true},["widget.informasi-pengunjung"],0,[informasi.pengunjung,"DataView"],0));(Ext.cmd.derive("informasi.pengunjung.Workspace",com.Form,{controller:"workspace-info-pengunjung",viewModel:{data:{ruangans:[],refreshTime:0,instansi:undefined,infoTeks:""},stores:{store:{type:"instansi-store"}}},layout:{type:"vbox",align:"stretch"},defaults:{border:false},bodyStyle:"background-color:#aa8a51",initComponent:function(){var f=this;f.antrianPanel=Ext.create("informasi.pengunjung.antrian.Panel",{reference:"antrianpanel"});f.antrianPanel.on("destroy",function(){if(f.antrianPanel){f.antrianPanel.stop()}});f.items=[f.layoutHeader(),f.layoutContent(),f.layoutFooter(),f.antrianPanel];com.Form.prototype.initComponent.apply(this,arguments)},layoutHeader:function(){return{layout:{type:"hbox",align:"middle"},border:false,height:50,bodyStyle:"background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#a90329), color-stop(44%,#8f0222), color-stop(100%,#6d0019));",items:[{xtype:"image",bind:{src:"classic/resources/images/{instansi}.png"},id:"idImage",width:40,border:false,bodyStyle:"background-color:transparent;",margin:"0 5 0 5"},{flex:1,bind:{data:{items:"{store.data.items}"}},tpl:new Ext.XTemplate('<tpl for="items">',"{data.REFERENSI.PPK.NAMA}","</tpl>"),border:false,bodyStyle:"background-color:transparent; font-size: 24px; color: white; padding-top: 15px;",height:50},{xtype:"label",id:"tgl",text:this.getDateIndo(),width:290,border:false,style:"background-color:transparent; font-size: 16px; color: white; "},{bind:{html:"{refreshTime}"},width:60,border:false,height:50,bodyStyle:"background-color:#0d3050; padding-top: 18px; text-align:center; font-family: Walrus Gumbo NF; font-size: 23px;  color: white;"}]}},layoutContent:function(){var f=this;return{flex:1,layout:{type:"hbox",align:"stretch"},defaults:{flex:1,margin:"0 1 0 1"},border:false,reference:"informasi",items:[{xtype:"informasi-pengunjung",firsLoad:false,border:false,viewConfig:{loadMask:false}},{xtype:"informasi-pengunjung",firstLoad:false,border:false,viewConfig:{loadMask:false}}]}},layoutFooter:function(){return{layout:{type:"hbox",align:"middle"},height:50,border:false,bodyStyle:"background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#356aa0), color-stop(100%,#356aa0));",items:[{xtype:"label",flex:1,style:"background-color:transparent;font-size: 21px;  margin-left: 10px;color: white;",border:false,bind:{html:'<marquee style="height: 50px; padding-top: 16px">{infoTeks}</marquee>'},height:50}]}},getDateIndo:function(){return Ext.Date.format(this.getSysdate(),"l, d F Y H:i:s")},refreshInfoTanggal:function(){Ext.getCmp("tgl").setText(this.getDateIndo())},load:function(o,n){var p=this,s=p.getController(),q=p.getViewModel();q.set("ruangans",o);s.refreshTimeRuangan=n;s.currentRefreshTimeRuangan=n;s.mulai();if(data.model){data.model.InfoTeks.load(1,{callback:function(e,g,f){if(f){q.set("infoTeks",e.get("TEKS"))}}})}},listeners:{afterrender:"onAfterRender"},runLogo:function(){if(this.deg==360){this.deg=0}else{this.deg+=5}Ext.getCmp("idImage").setStyle("-webkit-transform: rotateY("+this.deg+"deg)")},destroy:function(){if(this.antrianPanel){this.antrianPanel.stop();this.remove(this.antrianPanel);this.antrianPanel=null}com.Form.prototype.destroy.call(this)}},0,["workspace-info-pengunjung"],["component","box","container","panel","form","com-form","workspace-info-pengunjung"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-info-pengunjung":true},["widget.workspace-info-pengunjung"],0,[informasi.pengunjung,"Workspace"],0));(Ext.cmd.derive("informasi.pengunjung.WorkspaceController",Ext.app.ViewController,{ruanganLastIdx:0,refreshTimeRuangan:10,currentRefreshTimeRuangan:10,onAfterRender:function(){var m=this,o=m.getViewModel(),p=o.get("store"),n=Ext.getStore("instansi");if(n){o.set("store",n);new Ext.util.DelayedTask(function(){o.set("instansi",n.getAt(0).get("PPK"))}).delay(1000)}else{p.doAfterLoad=function(e,g,l,f){if(f){if(g.length>0){o.set("instansi",g[0].get("PPK"))}}};p.load()}},mulai:function(){var p=this,u=p.getView(),t=p.getReferences(),q=p.getViewModel(),v=q.get("ruangans"),w=u.getPropertyConfig("4")=="TRUE";q.set("refreshTime",p.autoRefreshTime);try{if(w){u.antrianPanel.start(v)}if(p.task==undefined){p.task={run:function(){q.set("refreshTime",p.currentRefreshTimeRuangan);if(p.currentRefreshTimeRuangan==p.refreshTimeRuangan){t.informasi.items.each(function(e,f){var g=v[p.ruanganLastIdx];if(g){e.setRuangan(g);e.setParams({RUANGAN:g.get("ID"),STATUS:1});if(v.length<3){if(e.getStore().getCount()>0){e.reload()}else{e.loadStore()}}else{e.loadStore()}p.ruanganLastIdx++}})}if(p.ruanganLastIdx>v.length-1){p.ruanganLastIdx=0}if(p.currentRefreshTimeRuangan==0){p.currentRefreshTimeRuangan=p.refreshTimeRuangan+1}p.currentRefreshTimeRuangan--;p.getView().refreshInfoTanggal()},interval:1000};Ext.TaskManager.start(p.task)}}catch(s){}},destroy:function(){var g=this,l=g.getView();Ext.TaskManager.stop(g.task);Ext.app.ViewController.prototype.destroy.call(this)}},0,0,0,0,["controller.workspace-info-pengunjung"],0,[informasi.pengunjung,"WorkspaceController"],0));(Ext.cmd.derive("informasi.pengunjung.antrian.Detail",com.Form,{viewModel:{data:{record:undefined,pasien:undefined},formulas:{getNamaLengkap:function(n){var o=n("pasien"),m=o.GELAR_DEPAN||"",p=o.GELAR_BELAKANG||"";m=m==""?"":m+". ";p=p==""?"":", "+p;return m+o.NAMA+p},getFormatNorm:function(m){var n=m("pasien"),l=n.NORM||0;if(l>0){return this.toFormatNorm(l)}return""}},toFormatNorm:function(f){f=Ext.String.leftPad(f,8,"0");f=Ext.String.insert(Ext.String.insert(Ext.String.insert(f,".",2),".",5),".",8);return f}},layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",flex:2,layout:{type:"hbox",align:"stretch"},items:[{xtype:"image",alt:"No Photo",src:"resources/images/nousuario.jpg",width:300},{bind:{html:"{record.NOMOR}"},flex:1,bodyStyle:"background:transparent; padding-top: 15%; text-align:center; color:#67f328; font-size:230px; font-weight:900; text-shadow: 3px 3px 5px #000000;"}]},{bind:{html:"{getFormatNorm} - {getNamaLengkap}"},height:40,bodyStyle:"padding-top: 0.7%; background:transparent;  font-size:20px; font-weight:500;"},{bind:{html:"{record.REFERENSI.RUANGAN.DESKRIPSI}"},flex:1,bodyStyle:"padding-top: 5%; background:transparent;  text-align:center; font-size:120px; font-weight:900; text-shadow: 3px 3px 5px #000000;"}],panggil:function(u){var o=this.getViewModel(),p=this.getReferensi(u.data,"TUJUAN_PASIEN"),q=this.getReferensi(p,"PENDAFTARAN"),t=this.getReferensi(q,"PASIEN"),s=this.getReferensi(u.data,"RUANGAN");o.set("record",u);o.set("pasien",t)}},0,["antrian-detail"],["component","box","container","panel","form","com-form","antrian-detail"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"antrian-detail":true},["widget.antrian-detail"],0,[informasi.pengunjung.antrian,"Detail"],0));(Ext.cmd.derive("informasi.pengunjung.antrian.Panel",com.Form,{hidden:true,tts:{integrasi:undefined,service:undefined},viewModel:{stores:{antrians:{type:"panggilan-antrian-ruangan-store",queryParams:{STATUS:1}}}},firstLoad:true,showPanggilAntrian:false,initComponent:function(){var f=this;com.Form.prototype.initComponent.apply(this,arguments);f.tts.integrasi=f.app.xitr("ID",6);if(f.tts.integrasi){f.tts.service=Ext.create(f.tts.integrasi.NAMA_KLAS,{parent:f,audioCount:1})}f.audios=f.tts.service.getAudios();if(f.tts.service){f.add(f.audios)}},start:function(o){var p=this,q=p.getViewModel(),s=q.get("antrians");if(Ext.isArray(o)){var n="";Ext.Array.each(o,function(e,f){n+="'"+e.get("ID")+"'";if(f<o.length-1){n+=","}});s.queryParams.IN=n;if(p._task==undefined){p._task={run:function(){if(s){try{if(s.getCount()==0){s.removeAll();s.reload()}else{if(!p.showPanggilAntrian){p.callAntrian(s.getAt(0))}}}catch(e){}}},interval:3000}}s.load(function(g,f,e){if(p.firstLoad){p.firstLoad=false;Ext.TaskManager.start(p._task)}})}},stop:function(){if(this._task){this.firstLoad=true;Ext.TaskManager.stop(this._task)}},privates:{callAntrian:function(o){var p=this,q=p.getViewModel(),s=q.get("antrians");if(o){var u=p.getReferensi(o.data,"ANTRIAN"),t=this.getReferensi(u,"RUANGAN");p.showPanggilAntrian=true;if(p.tts.service){p.tts.service.speech(["Pasien Dengan Nomor Antrian",u.NOMOR,"Silahkan Ke",t.DESKRIPSI])}p.openDialog("",true,0,0,{xtype:"antrian-detail",ui:"panel-purple",title:"Panggil Antrian"},function(e,f){var m=f.down("antrian-detail"),l=f.getHeight(),g=f.getActiveAnimation();m.panggil(Ext.create("data.model.AntrianRuangan",u));o.set("STATUS",2);o.save({callback:function(){s.remove(o)}});(new Ext.util.DelayedTask(function(){p.showPanggilAntrian=false;f.close()})).delay(7000)})}}},destroy:function(){if(this.audios){this.remove(this.audios)}this.tts.service.destroy();this.tts.service=undefined;com.Form.prototype.destroy.call(this)}},0,["antrian-panel"],["component","box","container","panel","form","com-form","antrian-panel"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"antrian-panel":true},["widget.antrian-panel"],0,[informasi.pengunjung.antrian,"Panel"],0));(Ext.cmd.derive("informasi.ruangkamartidur.DataView",Ext.view.View,{viewModel:{stores:{store:{type:"informasiruangkamartidur-store",queryParams:{RUANGAN:"",STATUS:0,PASIEN:""}}}},loadMask:false,autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap" style="min-height: 95px; height: 125px; width: 300px">','<a class="thumb" href="#" style="{[this.getBgColor(values)]}">','<div class="thumb-title-medium x-fa fa-bed" style="white-space:normal !important; {[this.getColor(values)]}"><strong>&nbsp;{RUANGAN}</strong></div>','<div class="thumb-title-container">','<div class="thumb-title-medium" style="white-space:normal !important; {[this.getColor(values)]}"><strong>{KAMAR}.{TEMPAT_TIDUR} / {KELAS}</strong></div>','<div class="thumb-title-small" style="{[this.getColor(values)]}">{[this.getInfo(values)]} | {STATUS}</div>',"</div>","</a>","</div>","</tpl>",{getInfo:function(p){var n=p.STATUS_ID==2?"<strong>"+p.RESERVASI_NO+"</strong>":(p.STATUS_ID==3?p.NORM:""),m=p.STATUS_ID==2?p.RESERVASI_ATAS_NAMA:(p.STATUS_ID==3?p.NAMA:"");if(p.STATUS_ID==3){lpad=Ext.String.leftPad(n,8,"0"),n=Ext.String.insert(Ext.String.insert(Ext.String.insert(lpad,".",2),".",5),".",8)}var o=p.STATUS_ID==2||p.STATUS_ID==3?n+" - "+m:"";return o},getBgColor:function(g){var l="";if(g.STATUS_ID==2){l="#0e9d6f"}if(g.STATUS_ID==3){l="#e13345"}return l==""?"":"background: "+l},getColor:function(g){var l="";if(g.STATUS_ID==2){l="#77f1ca"}if(g.STATUS_ID==3){l="#fdfdfd"}return l==""?"":"color: "+l}}),initComponent:function(){var g=this,l=g.getViewModel().get("store");if(l){l.on({load:function(){g.fireEvent("afterload")}})}Ext.view.View.prototype.initComponent.call(this)},load:function(g){var l=this.getViewModel().get("store");if(l){l.removeAll();if(g){l.queryParams=Ext.apply(l.queryParams,g)}l.load()}},getStore:function(){return this.getViewModel().get("store")},reload:function(){var f=this.getViewModel().get("store");if(f){f.reload()}}},0,["ruangkamartidur-data-view"],["component","box","dataview","ruangkamartidur-data-view"],{component:true,box:true,dataview:true,"ruangkamartidur-data-view":true},["widget.ruangkamartidur-data-view"],0,[informasi.ruangkamartidur,"DataView"],0));(Ext.cmd.derive("informasi.ruangkamartidur.DetilReservasi",Ext.form.Panel,{layout:{type:"vbox",align:"stretch"},title:"Informasi Reservasi",defaultType:"fieldcontainer",defaults:{layout:{type:"hbox"}},bodyPadding:5,readOnly:true,initComponent:function(){var f=this;f.items=[{items:[{xtype:"component",flex:1,bind:{html:"Ruangan: {RKT.RUANGAN} / {RKT.KAMAR} / {RKT.TEMPAT_TIDUR} - {RKT.KELAS}"}}]},{items:[{xtype:"textfield",name:"RESERVASI_NO",emptyText:"[Dibuat oleh Sistem]",readOnly:true,labelAlign:"top",fieldLabel:"NOMOR"},{xtype:"component",flex:1},{xtype:"datefield",name:"TANGGAL",readOnly:true,labelAlign:"top",fieldLabel:"TANGGAL"}]},{items:[{xtype:"textfield",name:"RESERVASI_ATAS_NAMA",emptyText:"[Atas Nama]",readOnly:f.readOnly,labelAlign:"top",fieldLabel:"Atas Nama"},{xtype:"textfield",name:"RESERVASI_KONTAK_INFO",emptyText:"Kontak Info",readOnly:f.readOnly,labelAlign:"top",fieldLabel:"Kontak Info"}]}];f.callParent()},loadRecord:function(g){var l=this.getForm().loadRecord(g);return l}},0,["detil-reservasi-form"],["component","box","container","panel","form","detil-reservasi-form"],{component:true,box:true,container:true,panel:true,form:true,"detil-reservasi-form":true},["widget.detil-reservasi-form"],0,[informasi.ruangkamartidur,"DetilReservasi"],0));(Ext.cmd.derive("informasi.ruangkamartidur.Workspace",com.Form,{controller:"workspace-ruangkamartidur",viewModel:{data:{hidden:true,val:"",inproses:false,pasien:undefined,viewConfig:{kosong:true,terpesan:true,semua:true,terisi:true},fullscreen:false}},title:"Informasi Ruang Kamar Tidur",layout:"fit",border:false,defaultSelected:1,ruangan:"",formReservasi:true,defaults:{border:false},dockedItems:[{xtype:"container",layout:"hbox",padding:5,dock:"top",items:[{width:320,xtype:"segmentedbutton",reference:"buttons",defaults:{bind:{disabled:"{inproses}"}},items:[{text:"Kosong",value:1,ui:"soft-white",bind:{hidden:"{!viewConfig.kosong}"},listeners:{click:"onRuanganKosong"}},{text:"Terpesan",value:2,ui:"soft-asperages",bind:{hidden:"{!viewConfig.terpesan}"},listeners:{click:"onRuanganTerreservasi"}},{text:"Terisi",value:4,ui:"soft-red",bind:{hidden:"{!viewConfig.terisi}"},listeners:{click:"onRuanganTerisi"}},{text:"Semua",value:3,ui:"soft-cyan",bind:{hidden:"{!viewConfig.semua}"},listeners:{click:"onSemuaRuangan"}}]},{width:300,xtype:"ruangan-mutasi-combo",emptyText:"Pilih Ruangan",reference:"ruangancombo",hideTrigger:false,forceSelection:false,params:{STATUS:1},listeners:{select:"onRuanganSelected",change:"onRuanganChanged"},margin:"0 5 0 5"},{width:250,xtype:"master-kamar-combo",emptyText:"Pilih Kamar",reference:"kamarcombo",hideTrigger:false,forceSelection:false,params:{STATUS:1},listeners:{select:"onKamarSelected",change:"onKamarChanged"},margin:"0 5 0 5"},{width:300,xtype:"search-field",emptyText:"Cari pasien berdasarkan Norm / Nama",bind:{hidden:"{hidden}",value:"{val}"},reference:"searchroom",listeners:{search:"onSearch",clear:"onClear"},margin:"0 5 0 0"},{xtype:"component",flex:1},{xtype:"component",style:"padding: 5px; font-size: 20px; font-weight: bold",hidden:true,bind:{hidden:"{!inproses}"},cls:"x-fa fa-spinner fa-pulse"},{xtype:"component",style:"padding: 5px; font-size: 20px; font-weight: bold",reference:"inforefresh",html:"5"},{xtype:"button",reference:"fullscreenbtn",bind:{tooltip:"{fullscreen ? 'Exit Full Screen' : 'Full Screen'}",iconCls:"{fullscreen ? 'x-fa fa-compress' : 'x-fa fa-expand'}"},handler:"onFullscreen"}]}],items:[{xtype:"ruangkamartidur-data-view",reference:"inforuangkamartidur",listeners:{select:"onSelect",afterload:"onAfterLoad"}}],listeners:{afterrender:"onAfterRender"},setPasien:function(f){this.getViewModel().set("pasien",f)},setViewConfig:function(m){var l=this,n=l.getViewModel();_config=n.get("viewConfig");m=Ext.apply(_config,m);n.set("viewConfig",m);n.notify()}},0,["workspace-ruangkamartidur"],["component","box","container","panel","form","com-form","workspace-ruangkamartidur"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-ruangkamartidur":true},["widget.workspace-ruangkamartidur"],0,[informasi.ruangkamartidur,"Workspace"],0));(Ext.cmd.derive("informasi.ruangkamartidur.WorkspaceController",Ext.app.ViewController,{autoRefresh:true,autoRefreshTime:30,currentRefreshTime:30,status:1,kamar:0,ruangSelectedIndex:0,onAfterRender:function(){var o=this,q=o.getView(),s=o.getReferences(),p=q.app.xpriv("2201");if(!p&&q.formReservasi){q.defaultSelected=3}s.buttons.setValue(q.defaultSelected);var n=s.buttons.down("[value="+q.defaultSelected+"]");n.fireEvent("click",n);if(o.task==undefined){o.task={run:function(){var e=q.app.xpriv("2201");if(!o.getViewModel().get("inproses")){s.inforefresh.update(o.currentRefreshTime)}if(o.currentRefreshTime==0){if(o.autoRefresh&&!o.getViewModel().get("inproses")){s.inforefresh.setVisible(false);o.getViewModel().set("inproses",true);if(!e&&q.formReservasi){var f=s.ruangancombo.getStore();if((f.getCount()-1)==o.ruangSelectedIndex){o.ruangSelectedIndex=0}else{o.ruangSelectedIndex++}s.ruangancombo.select(f.getAt(o.ruangSelectedIndex));o.onRuanganSelected(s.ruangancombo,f.getAt(o.ruangSelectedIndex))}else{s.inforuangkamartidur.reload()}}o.currentRefreshTime=o.autoRefreshTime+1}o.currentRefreshTime--},interval:1000};Ext.TaskManager.start(o.task)}s.ruangancombo.setVisible(q.formReservasi);s.kamarcombo.setVisible(q.formReservasi);s.fullscreenbtn.setVisible(q.formReservasi);if(q.formReservasi){s.ruangancombo.params.RUANGAN=0;s.ruangancombo.load();s.ruangancombo.doAfterLoad=function(f,l,g){var e=q.app.xpriv("2201");if(!e){o.status=0;o.ruangSelectedIndex=0;s.ruangancombo.select(g.getAt(o.ruangSelectedIndex));o.onRuanganSelected(s.ruangancombo,g.getAt(o.ruangSelectedIndex))}}}},onRuanganTerisi:function(){var l=this,g=l.getReferences();l.getViewModel().set("inproses",true);l.status=3;g.inforuangkamartidur.load({RUANGAN:l.getView().ruangan,KAMAR:l.kamar,STATUS:3,PASIEN:""});l.getViewModel().set("hidden",false);this.getViewModel().set("val","")},onSemuaRuangan:function(){var l=this,g=l.getReferences();l.getViewModel().set("inproses",true);l.status=0;g.inforuangkamartidur.load({RUANGAN:l.getView().ruangan,KAMAR:l.kamar,STATUS:0,PASIEN:""});l.getViewModel().set("hidden",false);l.getViewModel().set("val","")},onRuanganKosong:function(){var l=this,g=l.getReferences();l.getViewModel().set("inproses",true);l.status=1;g.inforuangkamartidur.load({RUANGAN:l.getView().ruangan,KAMAR:l.kamar,STATUS:1,PASIEN:""});l.getViewModel().set("hidden",true);l.getViewModel().set("val","")},onRuanganTerreservasi:function(){var l=this,g=l.getReferences();l.getViewModel().set("inproses",true);l.status=2;g.inforuangkamartidur.load({RUANGAN:l.getView().ruangan,KAMAR:l.kamar,STATUS:2});l.getViewModel().set("hidden",true)},onRuanganSelected:function(q,n){var p=this,s=p.getReferences(),o=n?n.get("MUTASI"):"";p.getView().ruangan=o;s.kamarcombo.select(null);s.kamarcombo.params.RUANGAN=o;s.kamarcombo.load();p.onKamarSelected(q,null)},onRuanganChanged:function(g,l){if(l==null){this.getView().ruangan="";this.onRuanganSelected(g,null);this.onKamarSelected(g,null)}},onKamarSelected:function(q,n){var o=this,s=o.getReferences(),p=n?n.get("ID"):"";o.kamar=p;s.inforuangkamartidur.load({RUANGAN:o.getView().ruangan,KAMAR:p})},onKamarChanged:function(g,l){if(l==null){this.kamar=0;this.onKamarSelected(g,null)}},onSearch:function(p,n){var m=this,o=m.getReferences();m.getViewModel().set("inproses",true);o.inforuangkamartidur.load({RUANGAN:m.getView().ruangan,KAMAR:m.kamar,STATUS:m.status,PASIEN:n})},onClear:function(f){this.onSearch(f,"")},onAfterLoad:function(){var f=this;f.getViewModel().set("inproses",false);f.currentRefreshTime=f.autoRefreshTime;f.getReferences().inforefresh.setVisible(true)},onSelect:function(E,y){var t=this,B=t.getViewModel(),G=t.getView(),F=G.app.xpriv("2201");if(G.formReservasi){if(y.get("STATUS_ID")==3){return}if(!F){return}t.autoRefresh=false;t.getReferences().inforefresh.setVisible(false);G.openDialog("",true,"50%","40%",{xtype:"reservasi-form",ui:"panel-cyan",showCloseButton:true,reference:"reservasiform"},function(g,e){form=e.down("reservasi-form");if(y.get("RESERVASI_NO")){data.model.Reservasi.load(y.get("RESERVASI_NO"),{success:function(l,m){form.loadRecord(l,y)}})}else{var f=Ext.create("data.model.Reservasi",{RUANG_KAMAR_TIDUR:y.get("ID"),STATUS:1,TANGGAL:G.getSysdate()});f.set("NOMOR",null);form.loadRecord(f,y)}form.on({reserved:function(m,l){if(l){G.fireEvent("reserved",m);t.getReferences().inforuangkamartidur.load()}},batalreservasi:function(){t.getReferences().inforuangkamartidur.load();win.close()}});if(y.get("STATUS_ID")==1){form.setFormConfig({readOnly:false,reservasi:true,batal:false})}else{form.setFormConfig({readOnly:true,reservasi:false,batal:y.get("NOPEN")?false:true})}e.on("close",function(){t.defaultSettings(y)});form.focus("ATAS_NAMA")})}else{var w=B.get("pasien")?B.get("pasien"):null,A=w?w.get("NORM")+" - "+w.get("NAMA"):"-",D=w.get("KONTAK")?w.get("KONTAK"):[],z="-";if(Ext.isArray(D)){Ext.Array.each(D,function(e){z=e.NOMOR})}if(y.get("STATUS_ID")!=1){if(y.get("STATUS_ID")==2){var x=Ext.create("data.model.Reservasi",{NOMOR:y.get("RESERVASI_NO"),RUANG_KAMAR_TIDUR:y.get("ID"),STATUS:y.get("STATUS_ID"),ATAS_NAMA:y.get("RESERVASI_ATAS_NAMA"),KONTAK_INFO:y.get("RESERVASI_KONTAK_INFO"),TANGGAL:y.get("RESERVASI_TANGGAL")});G.fireEvent("reserved",x);t.defaultSettings(y);return}else{t.defaultSettings(y);return}}t.autoRefresh=false;t.getReferences().inforefresh.setVisible(false);var C=y.get("RUANGAN")+" / "+y.get("KAMAR")+" / "+y.get("TEMPAT_TIDUR")+" - "+y.get("KELAS"),x=Ext.create("data.model.Reservasi",{RUANG_KAMAR_TIDUR:y.get("ID"),STATUS:1,ATAS_NAMA:A,KONTAK_INFO:z,TANGGAL:G.getSysdate()});x.showError=true;x.animateTarget=E;x.scope=t;G.showMessageBox({title:"Reservasi",message:"Anda yakin ingin reservasi ruangan "+C+" ?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:E,fn:function(e){if(e==="yes"){x.save({callback:function(g,l,f){if(f){G.notifyMessage("Reservasi berhasil<br/> Nomor: "+g.get("NOMOR"));G.fireEvent("reserved",g);t.defaultSettings(y)}}})}else{t.defaultSettings(y)}}})}},onFullscreen:function(o){var m=this,n=m.getViewModel(),p=m.getView();if(!n.get("fullscreen")){p.openDialog("",true,0,0,{xtype:"workspace-ruangkamartidur",ui:"panel-purple",iconCls:"x-fa fa-bed",showCloseButton:true},function(g,l){m.autoRefresh=false;var f=l.down("workspace-ruangkamartidur"),e=f.down("[reference=fullscreenbtn]");e.setHidden(true);l.on({beforeclose:function(){m.autoRefresh=true;n.set("fullscreen",false)}})})}},privates:{defaultSettings:function(l){var n=this;if(n.getReferences){var m=n.getReferences();n.autoRefresh=true;n.currentRefreshTime=n.autoRefreshTime;if(m){m.inforefresh.setVisible(true);m.inforuangkamartidur.deselect(l)}}}},destroy:function(){Ext.TaskManager.stop(this.task);Ext.app.ViewController.prototype.destroy.call(this)}},0,0,0,0,["controller.workspace-ruangkamartidur"],0,[informasi.ruangkamartidur,"WorkspaceController"],0));(Ext.cmd.derive("penjualan.Workspace",com.Tab,{controller:"penjualan-langsung-workspace",cls:"x-br-top",ui:"nav-tab",initComponent:function(){var f=this;f.items=[{title:"Penjualan",xtype:"penjualan-workspace",listeners:{refreshitems:"onRefresh"}},{title:"History",xtype:"penjualan-history-workspace",reference:"historypenjualan"},{title:"Retur",xtype:"penjualan-retur-workspace",reference:"returpenjualan"}];com.Tab.prototype.initComponent.apply(this,arguments)},load:function(){var f=this.getActiveTab();if(f){f.load({})}},listeners:{tabchange:"onTabChange"}},0,["penjualan-langsung-workspace"],["component","box","container","panel","tabpanel","com-tab","penjualan-langsung-workspace"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"penjualan-langsung-workspace":true},["widget.penjualan-langsung-workspace"],0,[penjualan,"Workspace"],0));(Ext.cmd.derive("penjualan.WorkspaceController",Ext.app.ViewController,{onTabChange:function(g,l){if(l.load){l.load({})}},onRefresh:function(l){var g=this;g.getView().load({})}},0,0,0,0,["controller.penjualan-langsung-workspace"],0,[penjualan,"WorkspaceController"],0));(Ext.cmd.derive("penjualan.history.Detil",com.Grid,{controller:"penjualan-history-detil",viewModel:{stores:{store:{type:"penjualan-detil-store"}}},columns:[{xtype:"rownumberer",text:"No",align:"left",width:50},{xtype:"templatecolumn",text:"Nama Obat",flex:1,sortable:false,tpl:'<div style="white-space:normal !important;">{REFERENSI.FARMASI.NAMA}</div>'},{text:"Jumlah",dataIndex:"JUMLAH",width:75},{text:"Retur",width:75,renderer:"onRenderRetur"},{text:"Aturan Pakai",xtype:"templatecolumn",flex:1,sortable:false,tpl:'<div style="white-space:normal !important;">{REFERENSI.ATURAN_PAKAI.DESKRIPSI}</div>'}]},0,["penjualan-history-detil"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","penjualan-history-detil"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"penjualan-history-detil":true},["widget.penjualan-history-detil"],0,[penjualan.history,"Detil"],0));(Ext.cmd.derive("penjualan.history.DetilController",Ext.app.ViewController,{onRenderRetur:function(o,q,p){var t=this.getView(),s=0,u=t.getReferensi(p.data,"RETUR");if(u){Ext.Array.each(u,function(e){s+=Number(e.JUMLAH)})}return s}},0,0,0,0,["controller.penjualan-history-detil"],0,[penjualan.history,"DetilController"],0));(Ext.cmd.derive("penjualan.history.List",com.Grid,{controller:"penjualan-history-list",viewModel:{stores:{store:{type:"penjualan-store"}}},columns:[{xtype:"rownumberer",text:"No",align:"left",width:50},{text:"No.Transaksi",dataIndex:"NOMOR",renderer:"OnRenderStatusNomor",sortable:false,flex:1},{xtype:"datecolumn",text:"Tanggal",dataIndex:"TANGGAL",format:"d/m/Y H:i:s",sortable:false,flex:1},{xtype:"widgetcolumn",align:"center",text:"#",flex:1,widget:{xtype:"fieldcontainer",flex:1,defaults:{padding:2},items:[{xtype:"button",action:0,iconCls:"x-fa fa-print",text:"Cetak Faktur",ui:"soft-green",margin:"0 1 0 0",tooltip:"Cetak Ulang Faktur",handler:"OnCetakUlangKwitansiPenjualan"},{xtype:"button",action:0,iconCls:"x-fa fa-print",text:"Cetak Etiket",tooltip:"Cetak Ulang Etiket",handler:"OnCetakUlangEtiketPenjualan"}]}}]},0,["penjualan-history-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","penjualan-history-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"penjualan-history-list":true},["widget.penjualan-history-list"],0,[penjualan.history,"List"],0));(Ext.cmd.derive("penjualan.history.ListController",Ext.app.ViewController,{OnRenderStatusNomor:function(p,s,n){var o=n.get("NOMOR"),q=n.get("STATUS");if(q==1){return'<span style="color:black;">'+o+" - [ Belum Bayar ]</span>"}if(q==2){return'<span style="color:green;">'+o+" - [ Sudah Bayar ]</span>"}if(q==0){return'<span style="color:red;">'+o+" - [ Batal ]</span>"}},OnCetakUlangKwitansiPenjualan:function(o){var p=this,s=p.getView(),q=p.getViewModel();recs=o.ownerCt.getWidgetRecord();var n=recs.get("NOMOR");this.cetakBuktiPenjualan(n)},OnCetakUlangEtiketPenjualan:function(o){var p=this,s=p.getView(),q=p.getViewModel();recs=o.ownerCt.getWidgetRecord();var n=recs.get("NOMOR");this.cetakEtiketenjualan(n)},privates:{cetakBuktiPenjualan:function(v){var p=this,u=p.getView(),t="Word",q="docx",w=true,s="Cetak Rincian Penjualan";u.showMessageBox({title:s,message:"Tekan tombol Yes/Ya utk cetak langsung<br/>Tekan tombol No/Tidak untuk Preview",ui:"window-blue",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,defaultButton:"yes",animateTarget:p,fn:function(e){if(e!="yes"){t="Pdf";q="pdf";w=false}u.cetak({TITLE:s,NAME:"penjualan.CetakFakturPenjualan",TYPE:t,EXT:q,PARAMETER:{PTAGIHAN:v,PJENIS:4},REQUEST_FOR_PRINT:w,PRINT_NAME:"CetakResep"})}})},cetakEtiketenjualan:function(v){var p=this,u=p.getView(),t="Word",q="docx",w=true,s="Cetak Etiket Penjualan";u.showMessageBox({title:s,message:"Tekan tombol Yes/Ya utk cetak langsung<br/>Tekan tombol No/Tidak untuk Preview",ui:"window-blue",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,defaultButton:"yes",animateTarget:p,fn:function(e){if(e!="yes"){t="Pdf";q="pdf";w=false}u.cetak({TITLE:s,NAME:"penjualan.CetakEtiket",TYPE:t,EXT:q,PARAMETER:{PPENJUALAN:v},REQUEST_FOR_PRINT:w,PRINT_NAME:"CetakEtiket"})}})}}},0,0,0,0,["controller.penjualan-history-list"],0,[penjualan.history,"ListController"],0));(Ext.cmd.derive("penjualan.history.Workspace",com.Form,{controller:"penjualan-history-workspace",layout:"border",items:[{region:"center",title:"List",flex:3,xtype:"penjualan-history-list",reference:"penjualanhistorylist",listeners:{select:"onSelectedHistoryPenjualan"}},{region:"east",xtype:"penjualan-history-detil",title:"Detil",reference:"penjualanhistorydetil",flex:2,collapsible:true,split:true}],onLoadRecord:function(o,m){var n=o.down("[reference=penjualanhistorylist]"),p=o.down("[reference=penjualanhistorydetil]");n.setListConfig({paging:true});p.setListConfig({paging:true});n.loadStore({})}},0,["penjualan-history-workspace"],["component","box","container","panel","form","com-form","penjualan-history-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"penjualan-history-workspace":true},["widget.penjualan-history-workspace"],0,[penjualan.history,"Workspace"],0));(Ext.cmd.derive("penjualan.history.WorkspaceController",Ext.app.ViewController,{onSelectedHistoryPenjualan:function(m,l){var n=this.getReferences();n.penjualanhistorydetil.loadStore({PENJUALAN_ID:l.get("NOMOR"),STATUS:l.get("STATUS")})}},0,0,0,0,["controller.penjualan-history-workspace"],0,[penjualan.history,"WorkspaceController"],0));(Ext.cmd.derive("penjualan.penjualan.Detil",com.Grid,{controller:"penjualan-detil",viewModel:{stores:{store:{type:"penjualan-detil-store"}},data:{hide:true,pengurang:0,datatotal:0,jumlrec:0,idlap:undefined,margin:0,harga:0}},header:{iconCls:"x-fa fa-list",padding:"7px 7px 7px 7px",title:"Detail"},ui:"panel-cyan",layout:"fit",total:0,initComponent:function(){var f=this;f.cellEditing=new Ext.grid.plugin.CellEditing({clicksToEdit:1,listeners:{beforeedit:"BeforeEdit"}});f.plugins=[f.cellEditing];f.columns=[{xtype:"rownumberer",text:"No",align:"left",width:50},{xtype:"templatecolumn",text:"Nama Obat",flex:3,sortable:false,tpl:"<div>{REFERENSI.BARANG.REFERENSI.BARANG.NAMA}</div>"},{text:"Aturan Pakai",dataIndex:"ATURAN_PAKAI",sortable:false,renderer:"onRenderAturanPakai",flex:2},{text:"Qty",dataIndex:"JUMLAH",sortable:false,flex:1,editor:{xtype:"numberfield",hideTrigger:true,reference:"jumlah",name:"JUMLAH"}},{text:"Harga",format:"0,00",renderer:"Renderhargasatuan",align:"right",width:100,summaryRenderer:"onSummaryInfoRenderer"},{xtype:"numbercolumn",text:"Jumlah",align:"right",format:"0,00",width:120,renderer:"onTotalRenderer",summaryRenderer:"onSummaryRenderer"},{xtype:"widgetcolumn",align:"center",text:"#",width:70,widget:{xtype:"fieldcontainer",flex:1,defaults:{padding:2},items:[{xtype:"button",action:0,iconCls:"x-fa fa-minus-circle",ui:"soft-red",handler:"onBatalPenjualan"}]}}],f.features=[{ftype:"summary",style:"border:1px #CCC solid;background:red",dock:"bottom"}];com.Grid.prototype.initComponent.apply(this,arguments)},dataOperator:function(n,l){var m=this;vm=m.getViewModel();total=vm.get("datatotal");if(l=="tambah"){vm.set("datatotal",total+n)}else{if(l=="kurang"){vm.set("datatotal",total-n)}else{if(l=="nilaitotal"){vm.set("datatotal",n)}else{if(l=="reset"){vm.set("datatotal",0)}}}}},getTotal:function(){var n=this,o=n.getViewModel(),p=o.get("store"),m=0;p.each(function(f){var l=n.getReferensi(f.data,"BARANG"),w=l?n.getReferensi(l,"BARANG"):null,y=l?n.getReferensi(w,"HARGA"):null,x=y?y.HARGA_JUAL:0,g=w?w.KATEGORI:0,e=g!="10701"?(o.get("margin")*x/100):0,A=parseFloat(x)+parseFloat(e),z=f.get("JUMLAH")*A;m=m+z});return m},addRow:function(v){var q=this,u=q.getViewModel().get("store"),w=q.getReferensi(v.data,"BARANG"),s=w?q.getReferensi(w,"BARANG"):null,t=w?q.getReferensi(s,"HARGA"):null,p=v.get("JUMLAH")*(t?t.HARGA_JUAL:0);u.add(v);q.dataOperator(p,"tambah")},removeAnotherModels:function(){var l=this.getViewModel().get("store"),m=[];l.each(function(e){if(Ext.getClassName(e)!="data.model.PenjualanDetil"){m.push(e)}});var n=new Ext.util.DelayedTask(function(){l.remove(m)});n.delay(100)},setMargin:function(l){var m=this,n=m.getViewModel();n.set("margin",l.MARGIN);m.updateData(l)},updateData:function(m){var n=this,o=n.getViewModel(),p=o.get("store");p.each(function(f){var g=n.getReferensi(f.data,"BARANG"),e=g?n.getReferensi(g,"BARANG"):null,l=e?e.KATEGORI:0,s=l!="10701"?m.ID:0;f.set("MARGIN",s)})}},0,["penjualan-detil"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","penjualan-detil"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"penjualan-detil":true},["widget.penjualan-detil"],0,[penjualan.penjualan,"Detil"],0));(Ext.cmd.derive("penjualan.penjualan.DetilController",Ext.app.ViewController,{currentRecord:undefined,BeforeEdit:function(o,e,p){var n=this;n.currentRecord=e.record},onTotalRenderer:function(D,G,A){var K=this,x=K.getViewModel(),H=K.getView(),E=H.getReferensi(A.data,"BARANG"),F=E?H.getReferensi(E,"BARANG"):null,y=E?H.getReferensi(F,"HARGA"):null,C=F?F.KATEGORI:0,I=y?y.HARGA_JUAL:0,B=C!="10701"?(x.get("margin")*I/100):0,z=parseFloat(I)+parseFloat(B),J=A.get("JUMLAH")*z;return'<span style="color:black;"> Rp. '+Ext.util.Format.number(J,"0,00")+"</span>"},onSummaryInfoRenderer:function(l,n,m){return'<span style="color:black;"> Total </span>'},onSummaryRenderer:function(n,p,o){var q=this.getView(),s='<span style="font-size: 17px; font-weight: bold">'+Ext.util.Format.number(q.getTotal(),"0,00")+"</span>";return'<span style="color:black;"> Rp. '+s+"</span>"},Renderhargasatuan:function(C,F,z){var I=this,w=I.getViewModel(),G=I.getView(),D=G.getReferensi(z.data,"BARANG"),E=D?G.getReferensi(D,"BARANG"):null,x=D?G.getReferensi(E,"HARGA"):null,H=x?x.HARGA_JUAL:0,B=E?E.KATEGORI:0,A=B!="10701"?(w.get("margin")*H/100):0,y=parseFloat(H)+parseFloat(A);return'<span style="color:black;"> Rp. '+Ext.util.Format.number(y,"0,00")+"</span>"},onBatalPenjualan:function(l){var m=this,n=m.getView();a=m.getStore("store"),rec=l.ownerCt.getWidgetRecord(),brg=n.getReferensi(rec.data,"BARANG"),ktgrBrg=brg?n.getReferensi(brg,"BARANG"):null,hrg=brg?n.getReferensi(ktgrBrg,"HARGA"):null;hasil=rec.get("JUMLAH")*(hrg?hrg.HARGA_JUAL:0);n.dataOperator(hasil,"kurang");a.remove(rec)},onRenderAturanPakai:function(s,w,v){var x=v.get("ATURAN_PAKAI"),u=this.getView();if(Ext.isNumeric(x)){var y=u.getReferensi(v.data,"ATURANPAKAI"),t=y?y.DESKRIPSI:"";return t}else{var q=v.get("ATURAN_PAKAI");return'<span style="color:black;">'+q+"</span>"}}},0,0,0,0,["controller.penjualan-detil"],0,[penjualan.penjualan,"DetilController"],0));(Ext.cmd.derive("penjualan.penjualan.Form",com.Form,{viewModel:{data:{formConfig:{disabledField:true}}},controller:"penjualan-form",model:"data.model.PenjualanDetil",layout:{type:"hbox"},defaultType:"textfield",ruangan:undefined,items:[{xtype:"combobox",name:"RUANGAN",allowBlank:false,enterFocus:true,flex:2,reference:"ruanganasal",margin:"0 10 0 0",displayField:"DESKRIPSI",valueField:"ID",queryMode:"local",emptyText:"[Ruangan ASAL]",store:{model:"data.model.Ruangan"},listeners:{select:"onSelectRuangan"}},{disabled:true,bind:{disabled:"{formConfig.disabledField}"},params:{STATUS:1},xtype:"barang-combo",flex:3,margin:"0 10 0 0",hideTrigger:true,reference:"barangcombo",allowBlank:false,name:"BARANG"},{xtype:"referensi-combo",params:{JENIS:41},minChars:1,name:"ATURAN_PAKAI",queryMode:"remote",queryParam:"QUERY",reference:"aturanpakai",emptyText:"[ Aturan Pakai ]",hideTrigger:true,typeAhead:true,disabled:true,bind:{disabled:"{formConfig.disabledField}"},flex:2,margin:"0 10 0 0",listeners:{beforequery:"onBeforeQuery"}},{xtype:"numberfield",name:"JUMLAH",flex:1,reference:"jumlah",emptyText:"Jumlah",allowBlank:false,hideTrigger:true,disabled:true,bind:{disabled:"{formConfig.disabledField}"},margin:"0 10 0 0",decimalPrecision:2,listeners:{specialkey:"onFocusEnter"}},{xtype:"button",iconCls:"x-fa fa-save",reference:"btnaddbarang",ui:"soft-green",handler:"onAddBarang",disabled:true,bind:{disabled:"{formConfig.disabledField}"}}],onLoadRecord:function(l,g){barangRecord=l.down("barang-combo"),storeBR=barangRecord.getViewModel().get("store"),combo=l.down("[name=RUANGAN]");if(l.ruangan==undefined){combo.select(null);combo.getStore().removeAll();l.setFormConfig({disabledField:true})}else{combo.select(l.ruangan)}combo.getStore().loadData(l.getPenggunaRuangan());l.getViewModel().set("isRuanganX",12345)},onBeforeGetRecord:function(q,p){var t=q.down("barang-combo").getSelection(),s=q.down("[reference=jumlah]").getValue(),o=q.down("[reference=aturanpakai]").getValue(),u=q.down("referensi-combo").getSelection();p.REFERENSI={RACIKAN:{ID:0,DESKRIPSI:"Non Racikan"}};p.JUMLAH=s;if(t){p.REFERENSI.BARANG=t.data}if(u){p.REFERENSI.ATURANPAKAI=u.data}},setBarangRuangan:function(m){var o=this,n=o.down("barang-combo"),p=n.getViewModel().get("store");n.select(null);p.removeAll();o.ruangan=m;o.setFormConfig({disabledField:false});p.queryParams={RUANGAN:m.get("ID"),STATUS:1};p.load();o.focus("BARANG")},getRuanganSelection:function(){var l=this,g=l.down("[name=RUANGAN]");return g.getSelection()}},0,["penjualan-form"],["component","box","container","panel","form","com-form","penjualan-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"penjualan-form":true},["widget.penjualan-form"],0,[penjualan.penjualan,"Form"],0));(Ext.cmd.derive("penjualan.penjualan.FormController",Ext.app.ViewController,{onFocusEnter:function(l,g){if(g.getKey()===g.ENTER){this.getView().fireEvent("addbarang")}},onAddBarang:function(){var g=this,l=g.getView();if(l.getForm().isValid()){l.fireEvent("addbarang")}},onBeforeQuery:function(f){f.combo.getStore().removeAll()},onSelectRuangan:function(o,m){var n=this,p=n.getView();p.setBarangRuangan(m)}},0,0,0,0,["controller.penjualan-form"],0,[penjualan.penjualan,"FormController"],0));(Ext.cmd.derive("penjualan.penjualan.Pengunjung",com.Form,{model:"data.model.Penjualan",viewModel:{data:{isResep:false}},layout:{type:"vbox",align:"stretch"},ui:"panel-cyan",border:true,header:{iconCls:"x-fa fa-file",padding:"7px 7px 7px 7px",title:"Pengunjung"},fieldDefaults:{labelAlign:"top"},items:[{xtype:"referensi-combo",params:{JENIS:78},defaultValue:2,emptyText:"[ Jenis ]",firstLoad:true,name:"JENIS",allowBlank:false,listeners:{select:"onSelectJenis"}},{hidden:true,bind:{hidden:"{!isResep}"},name:"DOKTER",reference:"dokterpemberiresep",xtype:"textfield",emptyText:"[ Dokter Pemberi Resep ]"},{name:"PENGUNJUNG",reference:"pengunjung",xtype:"textfield",emptyText:"[ Nama Pengunjung ]"},{name:"KETERANGAN",reference:"keterangan",xtype:"textarea",emptyText:"[ Keterangan ]",flex:1},{xtype:"container",layout:{type:"hbox",align:"stretch"},defaults:{margin:"0 2 1 0"},items:[{name:"TANGGAL",reference:"tanggal",flex:1,xtype:"datefield",emptyText:"[Pilih Tanggal Order]",format:"d/m/Y"},{name:"WAKTU",reference:"waktu",flex:1,xtype:"timefield",emptyText:"[Jam:Mnt:Dtk]",format:"H:i:s",hideTrigger:true}]}],buttons:[{text:"Selesaikan & Cetak",reference:"btnkirim",tooltip:"Selesai",flex:1,iconCls:"x-fa fa-save",handler:"onSimpan"}],onLoadRecord:function(o,n){try{var p=o.down("[reference=waktu]"),q=Ext.create("data.model.Referensi",{JENIS:78,ID:2,DESKRIPSI:"Non Resep"});jenis=o.down("[name=JENIS]");if(jenis.getStore().getCount()>0){jenis.select(q)}p.setValue(n.get("TANGGAL"))}catch(s){}},onBeforeGetRecord:function(o,m){var n=Ext.Date.clone(o.down("[reference=tanggal]").getValue()),p=o.down("[reference=waktu]").getValue();n.setHours(p.getHours());n.setMinutes(p.getMinutes());n.setSeconds(p.getSeconds());m.TANGGAL=n},setRuangan:function(g){var l=this.down("[reference=ruanganpenjualan]");l.setValue(g)}},0,["penjualan-pengunjung"],["component","box","container","panel","form","com-form","penjualan-pengunjung"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"penjualan-pengunjung":true},["widget.penjualan-pengunjung"],0,[penjualan.penjualan,"Pengunjung"],0));(Ext.cmd.derive("penjualan.penjualan.Ruangan",com.Form,{layout:{type:"vbox",align:"stretch"},bodyPadding:5,initComponent:function(){var f=this;f.items=[{xtype:"combobox",name:"RUANGAN",allowBlank:false,enterFocus:true,reference:"ruanganasal",enforceMaxLength:true,forceSelection:true,validateOnBlur:true,width:300,displayField:"DESKRIPSI",valueField:"ID",queryMode:"local",typeAhead:true,emptyText:"[Ruangan ASAL]",store:{model:"data.model.Ruangan"},listeners:{specialkey:"onFocusEnter",select:"onSelectPenjualannRuangan"}}];com.Form.prototype.initComponent.apply(this,arguments)},onLoadRecord:function(l){var n=this,m=n.down("[name=RUANGAN]");m.getStore().loadData(n.getPenggunaRuangan())},getRuanganSelection:function(){var l=this,g=l.down("[name=RUANGAN]");return g.getSelection()}},0,["penjualan-ruangan"],["component","box","container","panel","form","com-form","penjualan-ruangan"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"penjualan-ruangan":true},["widget.penjualan-ruangan"],0,[penjualan.penjualan,"Ruangan"],0));(Ext.cmd.derive("penjualan.penjualan.RuanganController",Ext.app.ViewController,{onAfterRender:function(){var l=this,m=l.getReferences(),n=l.getView();m.inventoryView.load();m.ruanganref.getStore().loadData(n.getPenggunaRuangan())},onFocusEnter:function(l,g){if(g.getKey()===g.ENTER){this.getView().fireEvent("addbarang")}},onSelectRuangan:function(f,l){this.getView().fireEvent("selectruangan",l,1)}},0,0,0,0,["controller.penjualan-ruangan"],0,[penjualan.penjualan,"RuanganController"],0));(Ext.cmd.derive("penjualan.penjualan.Workspace",com.Form,{controller:"penjualan-workspace",viewModel:{stores:{storesMargin:{type:"master-marginpenjaminfarmasi-store"}}},layout:{type:"hbox",align:"stretch"},items:[{flex:2,margin:"0 10px 0 0",layout:"border",items:[{region:"north",border:true,xtype:"penjualan-form",reference:"penjualanform",listeners:{addbarang:"onAddBarang"}},{region:"center",xtype:"penjualan-detil",reference:"penjualandetil"}]},{flex:1,xtype:"penjualan-pengunjung",reference:"penjualanpengunjung"}],onLoadRecord:function(l,g){pengunjung=l.down("penjualan-pengunjung"),form=l.down("penjualan-form");pengunjung.createRecord({TANGGAL:l.getSysdate()});form.createRecord({});form.focus("RUANGAN")},isCekMargin:function(s,o,n){var p=this,q=p.getViewModel().get("storesMargin");if(q){q.setQueryParams({PENJAMIN:s,JENIS:o,STATUS:1,start:0,limit:1});q.load(function(f,g,e){if(Ext.isArray(f)){n(f.length>0)}})}}},0,["penjualan-workspace"],["component","box","container","panel","form","com-form","penjualan-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"penjualan-workspace":true},["widget.penjualan-workspace"],0,[penjualan.penjualan,"Workspace"],0));(Ext.cmd.derive("penjualan.penjualan.WorkspaceController",Ext.app.ViewController,{margin:undefined,onSelectJenis:function(p,s){var w=this,t=w.getView(),q=w.getReferences(),u=1,v=s.get("ID");if(s){p.ownerCt.getViewModel().set("isResep",v==1);t.isCekMargin(u,v,function(e){w.margin=undefined;if(e){var m=w.getViewModel().get("storesMargin"),f=m.getAt(0),l=f?f.get("ID"):0,g=f?f.get("MARGIN"):0;q.penjualandetil.setMargin({ID:l,MARGIN:g});w.margin=f}else{q.penjualandetil.setMargin({ID:0,MARGIN:0})}})}},onAddBarang:function(s){var u=this,t=u.getView(),y=u.getReferences(),v=y.penjualanform.getRecord();if(v){if(u.margin){var z=t.getReferensi(v.data,"BARANG"),A=z?t.getReferensi(z,"BARANG"):null,x=A?A.KATEGORI:0,w=x!="10701"?u.margin.get("ID"):0;v.set("MARGIN",w)}y.penjualandetil.addRow(v);y.penjualanform.createRecord({});y.penjualanform.focus("BARANG")}},onSimpan:function(s){var x=this,v=x.getView(),w=x.getReferences(),z=w.penjualanpengunjung.getRecord(),t=w.penjualandetil.getArrayData(),A=w.penjualandetil.getTotal(),y=w.penjualanform.getRuanganSelection();if(z){if(z.get("JENIS")==1&&(z.get("DOKTER")==null||z.get("DOKTER")=="")){v.notifyMessage("Pengisian Nama Dokter tidak boleh kosong!!!");return}z.set("RUANGAN",y.get("ID"));var u=[{TOTAL:A,JENIS:4,TANGGAL:z.get("TANGGAL")}];if(z&&t.length>0){z.set("TOTAL_PENJUALAN",u);z.set("PENJUALAN_DETIL",t);w.penjualanpengunjung.save(s,{success:"Transaksi Pejualan Berhasil"},function(e,g,f){if(f){v.fireEvent("refreshitems");x.onReset(e);x.cetakBuktiPenjualan(e.get("NOMOR"));x.cetakEtiketPenjualan(e.get("NOMOR"))}})}}},onReset:function(l){var n=this,m=n.getReferences();m.penjualanform.createRecord({});m.penjualanpengunjung.createRecord({TANGGAL:n.getView().getSysdate()});m.penjualanform.focus("BARANG");m.penjualandetil.removeDataStore();m.penjualandetil.dataOperator(0,"reset")},privates:{cetakBuktiPenjualan:function(v){var p=this,u=p.getView(),t="Word",q="docx",w=true,s="Cetak Rincian Penjualan";u.showMessageBox({title:s,message:"Tekan tombol Yes/Ya utk cetak langsung<br/>Tekan tombol No/Tidak untuk Preview",ui:"window-blue",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,defaultButton:"yes",animateTarget:p,fn:function(e){if(e!="yes"){t="Pdf";q="pdf";w=false}u.cetak({TITLE:s,NAME:"penjualan.CetakFakturPenjualan",TYPE:t,EXT:q,PARAMETER:{PTAGIHAN:v,PJENIS:4},REQUEST_FOR_PRINT:w,PRINT_NAME:"CetakResep"})}})},cetakEtiketPenjualan:function(v){var p=this,u=p.getView(),t="Word",q="docx",w=true,s="Cetak Etiket Penjualan";u.showMessageBox({title:s,message:"Tekan tombol Yes/Ya utk cetak langsung<br/>Tekan tombol No/Tidak untuk Preview",ui:"window-blue",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,defaultButton:"yes",animateTarget:p,fn:function(e){if(e!="yes"){t="Pdf";q="pdf";w=false}u.cetak({TITLE:s,NAME:"penjualan.CetakEtiket",TYPE:t,EXT:q,PARAMETER:{PPENJUALAN:v},REQUEST_FOR_PRINT:w,PRINT_NAME:"CetakEtiket"})}})}}},0,0,0,0,["controller.penjualan-workspace"],0,[penjualan.penjualan,"WorkspaceController"],0));(Ext.cmd.derive("penjualan.retur.DaftarObat",com.Grid,{viewModel:{stores:{store:{type:"penjualan-detil-store"}}},columns:[{xtype:"rownumberer",text:"No",align:"left",width:50},{xtype:"templatecolumn",text:"Nama Obat",flex:1,sortable:false,tpl:'<div style="white-space:normal !important;">{REFERENSI.FARMASI.NAMA}</div>'},{text:"Jumlah",dataIndex:"JUMLAH",hideTrigger:true,width:75}]},0,["penjualan-retur-daftar-obat"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","penjualan-retur-daftar-obat"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"penjualan-retur-daftar-obat":true},["widget.penjualan-retur-daftar-obat"],0,[penjualan.retur,"DaftarObat"],0));(Ext.cmd.derive("penjualan.retur.Detil",com.Grid,{controller:"penjualan-retur-detil",viewModel:{stores:{store:{type:"returpenjualan-store"}}},columns:[{xtype:"rownumberer",text:"No",align:"left",width:50},{text:"Jumlah",dataIndex:"JUMLAH",width:75},{xtype:"datecolumn",text:"Tanggal Retur",dataIndex:"TANGGAL",format:"d/m/Y H:i:s",flex:1}]},0,["penjualan-retur-detil"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","penjualan-retur-detil"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"penjualan-retur-detil":true},["widget.penjualan-retur-detil"],0,[penjualan.retur,"Detil"],0));(Ext.cmd.derive("penjualan.retur.DetilController",Ext.app.ViewController,{onBatalReturPenjualan:function(o){var n=this,p=n.getView(),q=o.ownerCt.getWidgetRecord(),s=q.get("STATUS");q.showError=true;q.animateTarget=o;q.scope=n;p.showMessageBox({title:"Pembatalan Retur",message:"Anda yakin ingin membatalkan Retur .. ?",ui:"window-warning",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,defaultButton:"no",animateTarget:o,fn:function(e){if(e==="yes"){q.set("STATUS",0);q.save({callback:function(l,g,f){if(f){p.notifyMessage("Pembatalan Retur berhasil");p.refresh()}else{q.set("STATUS",1)}}})}else{q.set("STATUS",s==1?0:1)}}})}},0,0,0,0,["controller.penjualan-retur-detil"],0,[penjualan.retur,"DetilController"],0));(Ext.cmd.derive("penjualan.retur.Form",com.Form,{model:"data.model.ReturPenjualan",controller:"penjualan-retur-form",layout:{type:"vbox",align:"stretch"},defaults:{margin:"0 2 2 0"},fieldDefaults:{labelAlign:"top",msgTarget:"side"},bodyPadding:5,items:[{xtype:"datefield",format:"Y-m-d H:m:s",margin:"0 0 3 0",hideTrigger:true,name:"TANGGAL",reference:"tanggalretur",readOnly:true},{xtype:"numberfield",hideTrigger:true,reference:"jumlahretur",margin:"0 0 3 0",name:"JUMLAH"},{xtype:"button",text:"Retur",reference:"btnreturpenjualan",ui:"soft-green",iconCls:"x-fa fa-share",handler:"onSimpan",hidden:false,bind:{hidden:"{!formConfig.simpan}"}}],onLoadRecord:function(l,g){this.down("[reference=tanggalretur]").setValue(l.getSysdate());this.down("[reference=jumlahretur]").focus(false,100)}},0,["penjualan-retur-form"],["component","box","container","panel","form","com-form","penjualan-retur-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"penjualan-retur-form":true},["widget.penjualan-retur-form"],0,[penjualan.retur,"Form"],0));(Ext.cmd.derive("penjualan.retur.FormController",Ext.app.ViewController,{onSimpan:function(l){var g=this;view=g.getView();view.save(l,{success:"Data berhasil di retur"})}},0,0,0,0,["controller.penjualan-retur-form"],0,[penjualan.retur,"FormController"],0));(Ext.cmd.derive("penjualan.retur.List",com.Grid,{viewModel:{stores:{store:{type:"penjualan-store"}}},columns:[{xtype:"rownumberer",text:"No",align:"left",width:50},{text:"No.Transaksi",dataIndex:"NOMOR",sortable:false,flex:1},{text:"Nama",dataIndex:"PENGUNJUNG",flex:1,sortable:false},{xtype:"datecolumn",text:"Tanggal",dataIndex:"TANGGAL",format:"d/m/Y H:i:s",sortable:false,flex:1}]},0,["penjualan-retur-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","penjualan-retur-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"penjualan-retur-list":true},["widget.penjualan-retur-list"],0,[penjualan.retur,"List"],0));(Ext.cmd.derive("penjualan.retur.Workspace",com.Form,{controller:"penjualan-retur-workspace",layout:"border",items:[{region:"west",title:"List",flex:1,collapsible:true,split:true,xtype:"penjualan-retur-list",reference:"penjualanreturlist",listeners:{select:"onSelectedListreturPenjualan"}},{region:"center",title:"Daftar Obat",xtype:"penjualan-retur-daftar-obat",reference:"penjualanreturdaftarobat",flex:1,listeners:{select:"onListSelectedReturObat"}},{region:"east",layout:{type:"vbox",align:"stretch"},flex:1,items:[{xtype:"penjualan-retur-form",title:"Form",reference:"returpenjualanobatform",listeners:{save:"onReturPenjualan"}},{xtype:"penjualan-retur-detil",title:"Riwayat Retur",flex:1,reference:"returpenjualanobatdetil"}],collapsible:true,split:true}],onLoadRecord:function(p,u){var p=this,o=p.down("penjualan-retur-list"),s=p.down("penjualan-retur-daftar-obat"),t=p.down("penjualan-retur-detil"),q=p.down("penjualan-retur-form");o.setListConfig({paging:true});s.setListConfig({paging:true});t.setListConfig({paging:true});o.loadStore({STATUS:2});s.doAfterLoad=function(){t.load({PENJUALAN_DETIL_ID:0});q.setFormConfig({simpan:false})}}},0,["penjualan-retur-workspace"],["component","box","container","panel","form","com-form","penjualan-retur-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"penjualan-retur-workspace":true},["widget.penjualan-retur-workspace"],0,[penjualan.retur,"Workspace"],0));(Ext.cmd.derive("penjualan.retur.WorkspaceController",Ext.app.ViewController,{onSelectedListreturPenjualan:function(n,s,p,o){var q=this.getReferences();q.penjualanreturdaftarobat.loadStore({PENJUALAN_ID:s.get("NOMOR")})},onListSelectedReturObat:function(m,p,o,n){this.resetReturPenjualan({PENJUALAN_ID:p.get("PENJUALAN_ID"),PENJUALAN_DETIL_ID:p.get("ID"),BARANG:p.get("BARANG")})},onReturPenjualan:function(f){this.resetReturPenjualan({PENJUALAN_ID:f.get("PENJUALAN_ID"),PENJUALAN_DETIL_ID:f.get("PENJUALAN_DETIL_ID"),BARANG:f.get("BARANG")})},resetReturPenjualan:function(g){var l=this.getReferences();l.returpenjualanobatdetil.loadStore({PENJUALAN_ID:g.PENJUALAN_ID,PENJUALAN_DETIL_ID:g.PENJUALAN_DETIL_ID,BARANG:g.BARANG});l.returpenjualanobatform.setFormConfig({simpan:true});l.returpenjualanobatform.createRecord({PENJUALAN_ID:g.PENJUALAN_ID,PENJUALAN_DETIL_ID:g.PENJUALAN_DETIL_ID,BARANG:g.BARANG})}},0,0,0,0,["controller.penjualan-retur-workspace"],0,[penjualan.retur,"WorkspaceController"],0));(Ext.cmd.derive("inventory.eksternal.pembatalanpenerimaanbarang.Model",data.model.Model,{serviceName:"inventory/pembatalanpenerimaanbarang",fields:[{name:"ID",type:"int"},{name:"PENERIMAAN_BARANG",type:"string"},{name:"JENIS",type:"int"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[inventory.eksternal.pembatalanpenerimaanbarang,"Model"],0));(Ext.cmd.derive("inventory.eksternal.pembatalanpenerimaanbarang.Store",data.store.Store,{model:"inventory.eksternal.pembatalanpenerimaanbarang.Model"},0,0,0,0,["store.inventory-eksternal-pembatalanpenerimaanbarang-store"],0,[inventory.eksternal.pembatalanpenerimaanbarang,"Store"],0));(Ext.cmd.derive("inventory.eksternal.penerimaanbarang.Model",data.model.Model,{serviceName:"inventory/penerimaanbarang",fields:[{name:"ID",type:"int"},{name:"FAKTUR",type:"string"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"REKANAN",type:"int"},{name:"KETERANGAN",type:"string"},{name:"PPN",type:"string"},{name:"TANGGAL_DIBUAT",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"MASA_BERLAKU",type:"date",dateFormat:"Y-m-d"},{name:"OLEH",type:"int"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[inventory.eksternal.penerimaanbarang,"Model"],0));(Ext.cmd.derive("inventory.eksternal.penerimaanbarang.Store",data.store.Store,{model:"inventory.eksternal.penerimaanbarang.Model"},0,0,0,0,["store.inventory-eksternal-penerimaanbarang-store"],0,[inventory.eksternal.penerimaanbarang,"Store"],0));(Ext.cmd.derive("inventory.eksternal.penerimaanbarangdetil.Model",data.model.Model,{serviceName:"inventory/penerimaanbarangdetil",fields:[{name:"ID",type:"int"},{name:"PENERIMAAN",type:"int"},{name:"BARANG",type:"int"},{name:"NO_BATCH",type:"string"},{name:"JUMLAH",type:"float"},{name:"HARGA",type:"float"},{name:"DISKON",type:"float"},{name:"MASA_BERLAKU",type:"date",dateFormat:"Y-m-d"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[inventory.eksternal.penerimaanbarangdetil,"Model"],0));(Ext.cmd.derive("inventory.eksternal.penerimaanbarangdetil.Store",data.store.Store,{model:"inventory.eksternal.penerimaanbarangdetil.Model"},0,0,0,0,["store.inventory-eksternal-penerimaanbarangdetil-store"],0,[inventory.eksternal.penerimaanbarangdetil,"Store"],0));(Ext.cmd.derive("inventory.paketfarmasi.Model",data.model.Model,{serviceName:"inventory/paketfarmasi",fields:[{name:"ID",type:"int"},{name:"TINDAKAN",type:"int"},{name:"BARANG",type:"int"},{name:"JUMLAH",type:"float"},{name:"STATUS",type:"int",defaultValue:1}],idProperty:"ID"},0,0,0,0,0,0,[inventory.paketfarmasi,"Model"],0));(Ext.cmd.derive("inventory.paketfarmasi.Store",data.store.Store,{model:"inventory.paketfarmasi.Model"},0,0,0,0,["store.tindakan-paket-farmasi-store"],0,[inventory.paketfarmasi,"Store"],0));(Ext.cmd.derive("inventory.stokbarangminimum.Model",data.model.Model,{serviceName:"inventory/stokbarangminimum",fields:[{name:"ID",type:"int"},{name:"RUANGAN",type:"string"},{name:"BARANG",type:"int"},{name:"STOK",type:"float"},{name:"TANGGAL",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"STATUS",type:"int"}],idProperty:"ID"},0,0,0,0,0,0,[inventory.stokbarangminimum,"Model"],0));(Ext.cmd.derive("inventory.stokbarangminimum.Store",data.store.Store,{model:"inventory.stokbarangminimum.Model"},0,0,0,0,["store.stokbarangminimum-store"],0,[inventory.stokbarangminimum,"Store"],0));(Ext.cmd.derive("inventory.Workspace",com.Tab,{controller:"inventory-workspace",activeTab:0,cls:"x-br-top",ui:"header-tab",rec:undefined,initComponent:function(){var f=this;f.items=[{title:"Daftar Barang",xtype:"stok-barang-ruangan-workspace"}];com.Tab.prototype.initComponent.apply(this,arguments);if(f.app){if(f.app.xpriv("2304",false)){f.add({title:"Stok Opname",xtype:"stok-opname-workspace",listeners:{refreshitems:"onRefresh"}})}if(f.app.xpriv("2301",false)){f.add({title:"Permintaan",xtype:"tab-permintaan",listeners:{refreshitems:"onRefresh",tabchange:"onTabChange"}})}if(f.app.xpriv("2303",false)){f.add({title:"Pengiriman",xtype:"tab-pengiriman",listeners:{refreshitems:"onRefresh",tabchange:"onTabChange"}})}if(f.app.xpriv("2305",true)){f.add({title:"Rekanan",xtype:"workspace-eksternal",listeners:{refreshitems:"onRefresh"}})}if(f.app.xpriv("2306",true)){f.add({title:"Perjanjian PBF",xtype:"inventory-suratperjanjian-workspace",listeners:{refreshitems:"onRefresh"}})}if(f.app.xpriv("2306",true)){f.add({title:"Perencanaan",xtype:"materialrequest-workspace",listeners:{refreshitems:"onRefresh"}})}if(f.app.xpriv("2306",true)){f.add({title:"Purchase Order",xtype:"purchaseorder-workspace",listeners:{refreshitems:"onRefresh"}})}if(f.app.xpriv("2304",false)){f.add({title:"Monitoring",xtype:"monitoring-workspace"})}}},loadStore:function(l){var m=this,n=this.getActiveTab();m.rec=l;if(n){n.onLoadRecord({})}else{if(m.items.getCount()>0){m.setActiveTab(0)}}},listeners:{tabchange:"onTabChange"}},0,["inventory-workspace"],["component","box","container","panel","tabpanel","com-tab","inventory-workspace"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"inventory-workspace":true},["widget.inventory-workspace"],0,[inventory,"Workspace"],0));(Ext.cmd.derive("inventory.WorkspaceController",Ext.app.ViewController,{onRefresh:function(l){var g=this;g.getView().loadStore({})},onTabChange:function(l,n){var m=this.getView().rec;if(n.load){n.onLoadRecord({})}}},0,0,0,0,["controller.inventory-workspace"],0,[inventory,"WorkspaceController"],0));(Ext.cmd.derive("inventory.eksternal.Detil",Ext.form.Panel,{layout:"fit",defaults:{border:false,bodyPadding:10,flex:1},initComponent:function(){var f=this;f.items=[{layout:"vbox",defaults:{width:"100%",border:false,margin:"5 2 0 5"},items:[{html:"<font size = 4px><b>UNIT: APOTIK RAWAT JALAN</b></font>"},{html:"<font color = red>Transaksi Yang Anda Lakukan Akan Berpengaruh ke Stock Apotek Rawat Jalan</font>"}]}];Ext.form.Panel.prototype.initComponent.apply(this,arguments)}},0,["detil-eksternal"],["component","box","container","panel","form","detil-eksternal"],{component:true,box:true,container:true,panel:true,form:true,"detil-eksternal":true},["widget.detil-eksternal"],0,[inventory.eksternal,"Detil"],0));(Ext.cmd.derive("inventory.eksternal.Links",com.Tab,{activeTab:0,cls:"x-br-top",ui:"header-tab",rec:undefined,initComponent:function(){var f=this;com.Tab.prototype.initComponent.apply(this,arguments);if(f.app){if(f.app.xpriv("230501",false)){f.add({title:"Penerimaan",xtype:"workspace-penerimaan-eksternal"})}if(f.app.xpriv("230502",false)){f.add({title:"Pengembalian",xtype:"workspace-pengembalian-eksternal"})}}},loadStore:function(l){var m=this,n=this.getActiveTab();m.rec=l;if(n){n.onLoadRecord({})}else{if(m.items.getCount()>0){m.setActiveTab(0)}}},listeners:{tabchange:"onTabChange"}},0,["tab-eksternal"],["component","box","container","panel","tabpanel","com-tab","tab-eksternal"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"tab-eksternal":true},["widget.tab-eksternal"],0,[inventory.eksternal,"Links"],0));(Ext.cmd.derive("inventory.eksternal.Workspace",com.Form,{controller:"workspace-eksternal",layout:"border",defaults:{border:false},title:"Transaksi Eksternal",initComponent:function(){var f=this;f.items=[{region:"center",flex:4,xtype:"tab-eksternal"}],com.Form.prototype.initComponent.apply(this,arguments)},onLoadRecord:function(l){var m=this,n=m.down("tab-eksternal");n.loadStore({})}},0,["workspace-eksternal"],["component","box","container","panel","form","com-form","workspace-eksternal"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-eksternal":true},["widget.workspace-eksternal"],0,[inventory.eksternal,"Workspace"],0));(Ext.cmd.derive("inventory.eksternal.WorkspaceController",Ext.app.ViewController,{onTabChange:function(l,n){var m=this.getView().rec;if(n.load){n.onLoadRecord({})}}},0,0,0,0,["controller.workspace-eksternal"],0,[inventory.eksternal,"WorkspaceController"],0));(Ext.cmd.derive("inventory.eksternal.penerimaan.Form",com.Form,{model:"inventory.eksternal.penerimaanbarangdetil.Model",controller:"form-penerimaan-eksternal",layout:{type:"vbox",align:"stretch"},viewModel:{stores:{kategoristore:{type:"kategori-store",queryParams:{JENIS:1,STATUS:1},autoLoad:true}},data:{paramsRuangan:{RUANGAN:undefined,KATEGORI_BARANG:1,STATUS:1}}},border:false,initComponent:function(){var f=this;f.items=[{xtype:"combo",name:"KATEGORY",allowBlank:false,queryMode:"local",reference:"kategory",bind:{store:"{kategoristore}",value:"{paramsRuangan.KATEGORI_BARANG}"},emptyText:"[ NAMA KATEGORY ]",displayField:"NAMA",valueField:"ID",listeners:{select:"onSelectKategori"}},{xtype:"barang-combo",reference:"barangcombo",allowBlank:false,emptyText:"[ Masukkan Nama Barang ]",name:"BARANG"},{xtype:"textfield",allowBlank:false,name:"NO_BATCH",reference:"no_batch",emptyText:"[No. Batch]",tooltip:"Nomor Batch"},{xtype:"numberfield",width:100,hideTrigger:true,allowBlank:false,name:"JUMLAH",reference:"jumlah",emptyText:"[ Jumlah ]",decimalPrecision:2},{xtype:"numberfield",hideTrigger:true,name:"HARGA",allowBlank:false,reference:"harga",emptyText:"[ Harga Satuan Penerimaan ]",decimalPrecision:2},{xtype:"numberfield",hideTrigger:true,allowBlank:false,name:"DISKON",reference:"diskon",emptyText:"[ Diskon (Rp) ]"},{xtype:"datefield",width:110,format:"Y-m-d",name:"MASA_BERLAKU",reference:"masa_berlaku",emptyText:"[ Expire Date ]",listeners:{specialkey:"onFocusEnter"}}],f.buttons=[{ui:"soft-green",text:"Tambah",bind:{hidden:"{formConfig.simpan}"},listeners:{click:"onClickBarang"}}];com.Form.prototype.initComponent.apply(this,arguments)},loadCombo:function(u){var q=this,s=q.getViewModel(),p=s.get("paramsRuangan"),o=q.down("barang-combo"),t=o.getViewModel().get("store");if(u.RUANGAN){p=Ext.apply(p,u);s.set("paramsRuangan",p)}else{if(u.KATEGORI_BARANG){p=Ext.apply(p,u);s.set("paramsRuangan",p)}}t.setQueryParams(s.get("paramsRuangan"))},onBeforeGetRecord:function(n,m){var p=n.down("barang-combo").getSelection(),o=n.down("[reference=jumlah]").getValue();harga=n.down("[reference=harga]").getValue();m.JUMLAH=o;m.HARGA=harga;if(p){m.REFERENSI=p.get("REFERENSI")}}},0,["form-penerimaan-eksternal"],["component","box","container","panel","form","com-form","form-penerimaan-eksternal"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-penerimaan-eksternal":true},["widget.form-penerimaan-eksternal"],0,[inventory.eksternal.penerimaan,"Form"],0));(Ext.cmd.derive("inventory.eksternal.penerimaan.FormController",Ext.app.ViewController,{onFocusEnter:function(m,l){if(l.getKey()===l.ENTER){var n=this;view=n.getView();value=view.getForm().getValues();if(view.getForm().isValid()){view.fireEvent("addBarang",value);view.getForm().reset()}}},onSelectKategori:function(n,l){var m=this;view=m.getView(),refs=m.getReferences(),barangcombo=refs.barangcombo;barangcombo.getStore().removeAll();barangcombo.select(null);config={KATEGORI_BARANG:l.get("ID")};view.loadCombo(config)},onClickBarang:function(){this.getView().fireEvent("addBarang");this.getReferences().barangcombo.getStore().removeAll();this.getReferences().barangcombo.select(null)}},0,0,0,0,["controller.form-penerimaan-eksternal"],0,[inventory.eksternal.penerimaan,"FormController"],0));(Ext.cmd.derive("inventory.eksternal.penerimaan.FormFaktur",com.Form,{controller:"formfaktur-penerimaan-eksternal",viewModel:{data:{penerimaanBarang:undefined,batalPenerimaanBarang:false},formulas:{isAllowBatalPenerimaanBarang:function(m){var l=m("penerimaanBarang.STATUS")==2,n=m("batalPenerimaanBarang");if(!l){return false}return n}}},autoScroll:true,flex:1,layout:"fit",model:"inventory.eksternal.penerimaanbarang.Model",initComponent:function(){var f=this;f.items=[{layout:"hbox",defaults:{border:false,margin:"2 2 2 2",flex:1,bind:{readOnly:"{formConfig.simpan}"}},border:false,items:[{xtype:"combobox",name:"RUANGAN",allowBlank:false,enterFocus:true,reference:"ruanganasal",enforceMaxLength:true,forceSelection:true,validateOnBlur:true,displayField:"DESKRIPSI",valueField:"ID",queryMode:"local",typeAhead:true,emptyText:"[Ruangan ASAL]",store:{model:"data.model.Ruangan"},listeners:{specialkey:"onFocusEnter",select:"onRuanganSelect"}},{xtype:"textfield",emptyText:"[ No Faktur ]",name:"FAKTUR"},{xtype:"datetimefield",emptyText:"[ Tanggal Faktur ]",name:"TANGGAL",format:"Y-m-d H:i:s"},{xtype:"datefield",emptyText:"[ Tanggal Jatuh Tempo ]",name:"MASA_BERLAKU",format:"Y-m-d"},{xtype:"penyedia-combo",params:{STATUS:1},hideTrigger:true,reference:"pbfcombo",allowBlank:false,name:"REKANAN",emptyText:"[ Nama Rekanan ]"},{xtype:"textfield",emptyText:"[ Keterangan ]",name:"KETERANGAN"}]}];com.Form.prototype.initComponent.apply(this,arguments)},onLoadRecord:function(o,u){var o=this,p=o.getViewModel(),s=o.app.xpriv("230503");p.set("penerimaanBarang",u);p.set("batalPenerimaanBarang",s);try{var q=o.down("[name=RUANGAN]");q.getStore().loadData(o.getPenggunaRuangan())}catch(t){}}},0,["form-penerimaan-eksternal-faktur"],["component","box","container","panel","form","com-form","form-penerimaan-eksternal-faktur"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-penerimaan-eksternal-faktur":true},["widget.form-penerimaan-eksternal-faktur"],0,[inventory.eksternal.penerimaan,"FormFaktur"],0));(Ext.cmd.derive("inventory.eksternal.penerimaan.FormFakturController",Ext.app.ViewController,{onRuanganSelect:function(n,l){var m=this;view=m.getView();view.fireEvent("selectRuangan",l)},onPreview:function(){var g=this,l=g.getView();preview=true,rec=g.getViewModel().get("record");l.cetak({NAME:"inventory.CetakPenerimaanBarang",TYPE:preview?"Pdf":"Word",EXT:preview?"pdf":"docx",PARAMETER:{PID:rec.get("ID")},REQUEST_FOR_PRINT:!preview,PRINT_NAME:"CetakFaktur"},function(e){if(preview){l.openDialog("Print Preview",true,0,0,{xtype:"panel",title:"Preview Hasil Lab"},function(n,f){f.down("panel").update("<iframe style='width: 100%; height: 100%' src='"+e+"'></iframe>")})}})}},0,0,0,0,["controller.formfaktur-penerimaan-eksternal"],0,[inventory.eksternal.penerimaan,"FormFakturController"],0));(Ext.cmd.derive("inventory.eksternal.penerimaan.FormPembatalan",com.Form,{controller:"pembatalan-penerimaanbarang-form",model:"inventory.eksternal.pembatalanpenerimaanbarang.Model",bodyPadding:5,layout:"fit",items:[{xtype:"referensi-combo",name:"JENIS",params:{JENIS:67},firstLoad:true,allowBlank:false,editable:false,emptyText:"[Jenis Pembatalan]"}],buttons:[{text:"Batalkan",ui:"soft-blue",iconCls:"x-fa fa-minus-circle",handler:"onBatalkan"}]},0,["pembatalan-penerimaanbarang-form"],["component","box","container","panel","form","com-form","pembatalan-penerimaanbarang-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"pembatalan-penerimaanbarang-form":true},["widget.pembatalan-penerimaanbarang-form"],0,[inventory.eksternal.penerimaan,"FormPembatalan"],0));(Ext.cmd.derive("inventory.eksternal.penerimaan.FormPembatalanController",Ext.app.ViewController,{onBatalkan:function(g){var m=this,n=m.getView();n.save(g,{success:"Tagihan Final telah dibatalkan"})}},0,0,0,0,["controller.pembatalan-penerimaanbarang-form"],0,[inventory.eksternal.penerimaan,"FormPembatalanController"],0));(Ext.cmd.derive("inventory.eksternal.penerimaan.List",com.Grid,{controller:"list-penerimaan-eksternal",viewModel:{stores:{store:{type:"inventory-eksternal-penerimaanbarangdetil-store"}},data:{hide:true,pengurang:0,datatotal:0,jumlrec:0,idlap:undefined,ppn:"Ya"}},bind:{store:"{store}"},layout:"fit",dockedItems:[{xtype:"toolbar",flex:1,dock:"bottom",items:["->",{xtype:"combobox",reference:"statusppn",emptyText:"Status PPN",store:Ext.create("Ext.data.Store",{fields:["value","desk"],data:[{value:"Ya",desk:"Termasuk PPN"},{value:"Tidak",desk:"Tidak Termasuk PPN"}]}),queryMode:"local",displayField:"desk",width:"30%",valueField:"value",bind:{value:"{ppn}"},listeners:{select:"onSelectPpn"}},{xtype:"component",html:"<b><h3>Total Rp:</h3></b>",margin:"0 5 0 0"},{xtype:"component",flex:1,style:{textAlign:"right"},bind:{html:"<b><h3>{datatotal}</h3></b>"}}]}],initComponent:function(){var f=this;f.columns=[{xtype:"templatecolumn",text:"Nama Obat",sortable:false,tpl:"<div>{REFERENSI.BARANG.NAMA}</div>",flex:1},{text:"No.Batch",dataIndex:"NO_BATCH",flex:1},{text:"Jumlah",dataIndex:"JUMLAH",width:75},{text:"Harga Satuan",dataIndex:"HARGA",flex:1},{text:"Jumlah Harga",dataIndex:"JUMLAH_HARGA",flex:1,renderer:"onHitungJumlah"},{xtype:"datecolumn",text:"Expired Date",dataIndex:"MASA_BERLAKU",flex:1,format:"Y-m-d"},{text:"Diskon (Rp)",dataIndex:"DISKON",flex:1},{xtype:"numbercolumn",text:"Total Harga",dataIndex:"HARGA_TOTAL",renderer:"onHitungTotal",flex:1},{xtype:"templatecolumn",text:"H.Sebelum",align:"right",dataIndex:"DISKON",tpl:"<div><span style=color:red;>{REFERENSI.BARANG.HARGA_BELI}</span></div>",flex:1},{xtype:"widgetcolumn",reference:"gantitarif",width:50,onWidgetAttach:"onWidgetAttach",widget:{xtype:"fieldcontainer",defaultType:"button",layout:{type:"vbox",align:"stretch"},defaults:{padding:1},items:[{xtype:"button",ui:"soft-red",iconCls:"x-fa fa-minus-circle",handler:"onRemoved"}]}}];com.Grid.prototype.initComponent.apply(this,arguments)},loadStore:function(g){var l=this;vm=l.getViewModel(),store=vm.get("store");if(g){store.removeAll();store.queryParams={PENERIMAAN:g.get("ID"),STATUS:g.get("STATUS")};store.load({callback:function(f,n,e){if(e){if(g.get("PPN")=="Tidak"){vm.set("datatotal",l.getTotal());total=l.getTotal();hasil=total*10/100;l.dataOperator(hasil,"tambah")}else{vm.set("datatotal",l.getTotal())}}}});vm.set("hide",true);vm.set("ppn",g.get("PPN"))}else{vm.set("hide",false)}},dataOperator:function(n,l){var m=this;vm=m.getViewModel();total=vm.get("datatotal");if(l=="tambah"){vm.set("datatotal",total+n)}else{if(l=="kurang"){vm.set("datatotal",total-n)}else{if(l=="reset"){vm.set("datatotal",0);vm.set("ppn","Ya")}else{if(l=="nilaitotal"){vm.set("datatotal",n)}}}}},getTotal:function(){var n=this,o=n.getViewModel(),p=o.get("store"),m=0;p.each(function(e){hasil=e.get("JUMLAH")*e.get("HARGA")-e.get("DISKON");m=m+hasil});return m},getPpn:function(){var l=this,n=l.getViewModel(),m=n.get("ppn");return m},setPpn:function(l){var m=this,n=m.getViewModel();n.set("ppn",l)},getData:function(){var n=this,o=n.getViewModel(),p=o.get("store"),m=[];p.each(function(e){m.push(e.getData())});return m},addRow:function(l){var n=this,m=n.getViewModel().get("store");hasil=(l.get("JUMLAH")*l.get("HARGA"))-l.get("DISKON");m.add(l);this.dataOperator(hasil,"tambah")},removeDataStore:function(){this.getViewModel().get("store").removeAll()},removeAnotherModels:function(){var l=this.getViewModel().get("store"),m=[];l.each(function(e){if(Ext.getClassName(e)!="data.model.PermintaanDetil"){m.push(e)}});var n=new Ext.util.DelayedTask(function(){l.remove(m)});n.delay(100)}},0,["list-penerimaan-eksternal"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","list-penerimaan-eksternal"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"list-penerimaan-eksternal":true},["widget.list-penerimaan-eksternal"],0,[inventory.eksternal.penerimaan,"List"],0));(Ext.cmd.derive("inventory.eksternal.penerimaan.ListController",Ext.app.ViewController,{onWidgetAttach:function(q,p,n){var o=this,s=p.items.items[0];s.setHidden(n.get("STATUS")==2)},onRenderBarang:function(o,p,m){var n=m.get("REFERENSI");rekanan=n?(n.BARANG?n.BARANG.NAMA:""):"";return rekanan},onHitungJumlah:function(o,p,m){var n=m.get("JUMLAH")*m.get("HARGA");return n},onHitungTotal:function(s,t,u){var p=this,q=p.getViewModel(),o=u.get("JUMLAH")*u.get("HARGA")-u.get("DISKON");return o},onRemoved:function(n){var l=this,m=this.getViewModel();view=this.getView();rec=n.ownerCt.getWidgetRecord();hasil=rec.get("JUMLAH")*rec.get("HARGA")-rec.get("DISKON");if(Ext.isNumeric(rec.get("ID"))){rec.set("STATUS",0);rec.showError=true;rec.animateTarget=n;rec.scope=l;rec.save({callback:function(e,f,g){if(g){Ext.toast({html:"Data telah terhapus",headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"});view.dataOperator(hasil,"kurang");m.get("store").remove(rec)}}})}else{Ext.toast({html:"Data telah terhapus",headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"});m.get("store").remove(rec);view.dataOperator(hasil,"kurang")}},onSelectPpn:function(p,m,n){var o=this;view=o.getView();vm=o.getViewModel();store=vm.get("store");total=view.getTotal();hasil=total*10/100;if(m.get("value")=="Tidak"){view.dataOperator(hasil,"tambah")}else{view.dataOperator(total,"nilaitotal")}view.setPpn(m.get("value"))}},0,0,0,0,["controller.list-penerimaan-eksternal"],0,[inventory.eksternal.penerimaan,"ListController"],0));(Ext.cmd.derive("inventory.eksternal.penerimaan.ViewModel",Ext.app.ViewModel,{stores:{barang:{type:"barang-store"}}},0,0,0,0,["viewmodel.workspace-penerimaan-eksternal"],0,[inventory.eksternal.penerimaan,"ViewModel"],0));(Ext.cmd.derive("inventory.eksternal.penerimaan.Workspace",com.Form,{controller:"workspace-penerimaan-eksternal",viewModel:{type:"workspace-penerimaan-eksternal",data:{recordview:undefined}},layout:"border",flex:1,border:true,initComponent:function(){var f=this;f.items=[{region:"north",reference:"formfaktur",xtype:"form-penerimaan-eksternal-faktur",flex:0.6,buttons:[{text:"Final",iconCls:"x-fa fa-cart-plus",ui:"soft-blue",bind:{hidden:"{formConfig.simpan}"},listeners:{scope:f.getController(),click:"onFinal"}},{text:"Batal Penerimaan",ui:"soft-black",iconCls:"x-fa fa-ban",bind:{hidden:"{!isAllowBatalPenerimaanBarang}"},listeners:{scope:f.getController(),click:"onBatalPenerimaan"}},{text:"Cetak",iconCls:"x-fa fa-print",handler:"onPreview"},{text:"Simpan",ui:"soft-green",iconCls:"x-fa fa-save",bind:{hidden:"{formConfig.simpan}"},listeners:{scope:f.getController(),click:"onSimpan"}},{text:"Reset",ui:"soft-red",iconCls:"x-fa fa-refresh",listeners:{scope:f.getController(),click:"onReset"}}],listeners:{selectRuangan:"onRuanganSelect"}},{region:"center",ui:"panel-cyan",flex:2,header:{iconCls:"x-fa fa-list",padding:"5 5 5 2"},title:"List",reference:"listbarang",xtype:"list-penerimaan-eksternal"},{region:"east",ui:"panel-cyan",layout:"fit",iconCls:"x-fa fa-list",header:{items:[{xtype:"search-field",cls:"x-text-border",iconCls:"iconSearch",autoFocus:true,emptyText:"Search !",enableKeyEvents:true,flex:1}]},title:"History",flex:1,collapsible:true,collapsed:true,split:true,reference:"listhistory",xtype:"list-histori-penerimaan-eksternal",listeners:{select:"onSelectHistori"}},{region:"west",ui:"panel-cyan",title:"Form",header:{iconCls:"x-fa fa-file-o",padding:"2 2 2 1"},flex:1,collapsible:true,reference:"formbarang",xtype:"form-penerimaan-eksternal",split:true,listeners:{addBarang:"onAddBarang"}}];com.Form.prototype.initComponent.apply(this,arguments)},onLoadRecord:function(l){var m=this,n=m.down("form-penerimaan-eksternal-faktur");formbarang=m.down("form-penerimaan-eksternal");listhistory=m.down("list-histori-penerimaan-eksternal");listhistory.loadStore({});n.createRecord({STATUS:1,TANGGAL_DIBUAT:m.getSysdate()});n.setFormConfig({viewOnly:status,simpan:false});formbarang.setFormConfig({viewOnly:status,simpan:false});formbarang.createRecord({})}},0,["workspace-penerimaan-eksternal"],["component","box","container","panel","form","com-form","workspace-penerimaan-eksternal"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-penerimaan-eksternal":true},["widget.workspace-penerimaan-eksternal"],0,[inventory.eksternal.penerimaan,"Workspace"],0));(Ext.cmd.derive("inventory.eksternal.penerimaan.WorkspaceController",Ext.app.ViewController,{onReload:function(){var p=this,t=this.getView(),q=p.getViewModel(),s=p.getReferences(),o=s.listbarang,u=q.get("recordview");t.setLoading(true);(new Ext.util.DelayedTask(function(){if(data.model){p.onReset();t.setLoading(false)}})).delay(1500)},onSelectHistori:function(q,u){var o=this,p=o.getViewModel(),s=o.getReferences(),t=(u.get("STATUS")==1)?false:true;formfaktur=s.formfaktur,formbarang=s.formbarang,listbarang=s.listbarang;formbarang.loadCombo(u.get("RUANGAN"));listbarang.loadStore(u);formfaktur.loadRecord(u);formfaktur.setFormConfig({viewOnly:t,simpan:t});p.set("recordview",u);formbarang.setFormConfig({viewOnly:t,simpan:t});listbarang.setPpn(u.get("PPN"))},onAddBarang:function(s){var o=this,q=o.getView(),p=o.getReferences(),n=p.formbarang.getRecord();if(n){p.listbarang.addRow(n);p.formbarang.createRecord({});p.formbarang.focus("BARANG")}},onSimpan:function(l){var g=this;view=g.getView();refs=g.getReferences(),listbarang=refs.listbarang,form=refs.formfaktur,databarang=listbarang.getData();value=form.getForm().getValues();rec=form.getRecord();value.PENERIMAAN_BARANG_DETIL=databarang;value.PPN=listbarang.getPpn();if(form.getForm().isValid()){rec.set(value);rec.showError=true;rec.animateTarget=l;rec.scope=g;rec.save({callback:function(f,n,e){if(e){Ext.toast({html:"Data telah tersimpan",headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"});g.onReset()}}})}},onFinal:function(l){var g=this;view=g.getView();refs=g.getReferences(),form=refs.formfaktur,rec=form.getRecord();if(rec){if(Ext.isNumeric(rec.get("ID"))){rec.set("STATUS",2);rec.showError=true;rec.animateTarget=l;rec.scope=g;rec.save({callback:function(f,n,e){if(e){Ext.toast({html:"Data telah tersimpan",headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"});g.onReset()}}})}else{Ext.MessageBox.alert("Warning","Anda Tidak Dapat Memfinalkan transaksi ini.",g)}}else{Ext.MessageBox.alert("Warning","Anda Tidak Dapat Memfinalkan transaksi ini.",g)}},onReset:function(){var f=this;view=f.getView();refs=f.getReferences(),listbarang=refs.listbarang,listhistory=refs.listhistory,form=refs.formfaktur;formbarang=refs.formbarang;listbarang.getStore().removeAll();listhistory.getStore().load();form.reset();listbarang.loadStore();listbarang.dataOperator(0,"reset");form.setFormConfig({viewOnly:false,simpan:false});formbarang.setFormConfig({viewOnly:false,simpan:false});form.createRecord({STATUS:1,TANGGAL_DIBUAT:form.getSysdate()})},onRuanganSelect:function(g){var l=this;view=l.getView();vm=l.getViewModel(),refs=l.getReferences(),formbarang=refs.formbarang;config={RUANGAN:g.get("ID")};formbarang.loadCombo(config)},onBatalPenerimaan:function(l){var g=this;vm=g.getViewModel(),view=g.getView();refs=g.getReferences(),form=refs.formfaktur,penerimaan=form.getRecord(),notify=true;if(view.app){notify=!view.app.xpriv("230503")}if(notify){view.notifyMessage("Anda tidak memiliki Hak Akses untuk melakukan Pembatalan final Penerimaan Barang !");return}Ext.Msg.show({title:"Pembatalan Tagihan Final",message:"Anda yakin ingin membatalkan  final penermiaan barang?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:l,fn:function(e){if(e==="yes"){view.openDialog("",true,100,50,{xtype:"pembatalan-penerimaanbarang-form",title:"Pembatalan Final Penerimaan Barang"},function(o,p){var f=p.down("pembatalan-penerimaanbarang-form");f.on("save",function(m,s,n){g.onReload();p.close()});f.createRecord({PENERIMAAN_BARANG:vm.get("recordview").get("ID"),JENIS:1,STATUS:1,TANGGAL:view.getSysdate()})})}}})}},0,0,0,0,["controller.workspace-penerimaan-eksternal"],0,[inventory.eksternal.penerimaan,"WorkspaceController"],0));(Ext.cmd.derive("inventory.eksternal.penerimaan.histori.List",com.Grid,{controller:"list-histori-penerimaan-eksternal",viewModel:{stores:{store:{type:"inventory-eksternal-penerimaanbarang-store"}}},layout:"fit",bind:{store:"{store}"},columns:[{text:"Nama Rekanan",dataIndex:"REKANAN",flex:2,renderer:"onRenderRekanan"},{text:"No. Faktur",dataIndex:"FAKTUR",flex:1.5},{xtype:"datecolumn",text:"Tanggal Faktur",dataIndex:"TANGGAL",format:"Y-m-d H:i:s",flex:1}],dockedItems:[{xtype:"pagingtoolbar",bind:{store:"{store}"},dock:"bottom",displayInfo:false}]},0,["list-histori-penerimaan-eksternal"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","list-histori-penerimaan-eksternal"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"list-histori-penerimaan-eksternal":true},["widget.list-histori-penerimaan-eksternal"],0,[inventory.eksternal.penerimaan.histori,"List"],0));(Ext.cmd.derive("inventory.eksternal.penerimaan.histori.ListController",Ext.app.ViewController,{onRenderRekanan:function(o,p,m){var n=m.get("REFERENSI");rekanan=n?(n.REKANAN?n.REKANAN.NAMA:""):"";if(m.get("STATUS")==2){return'<span style="color:red;">'+rekanan+"</span>"}else{return'<span style="color:green;">'+rekanan+"</span>"}}},0,0,0,0,["controller.list-histori-penerimaan-eksternal"],0,[inventory.eksternal.penerimaan.histori,"ListController"],0));(Ext.cmd.derive("inventory.eksternal.pengembalian.Detil",Ext.form.Panel,{layout:"fit",defaults:{border:false,bodyPadding:2,flex:1},initComponent:function(){var f=this;f.items=[{layout:"vbox",defaults:{width:"100%",border:false,margin:"5 2 0 5"},items:[{html:"<font size = 4px><b>Nama Rekanan: PT. Kimia Farma</b></font>"},{html:"<font size = 3px>Tangga Pengembalian: 10 - 10 - 2015</font>"},{html:"<font size =2px>No. Faktur:1234567890</font>"}]}];Ext.form.Panel.prototype.initComponent.apply(this,arguments)}},0,["detil-pengembalian-eksternal"],["component","box","container","panel","form","detil-pengembalian-eksternal"],{component:true,box:true,container:true,panel:true,form:true,"detil-pengembalian-eksternal":true},["widget.detil-pengembalian-eksternal"],0,[inventory.eksternal.pengembalian,"Detil"],0));(Ext.cmd.derive("inventory.eksternal.pengembalian.Form",com.Form,{layout:"fit",model:"data.model.PengembalianBarang",initComponent:function(){var f=this;f.items=[{layout:"hbox",defaults:{margin:"2 2 2 2"},border:false,items:[{xtype:"penyedia-combo",params:{STATUS:1},hideTrigger:true,reference:"pbfcombo",width:"40%",allowBlank:false,name:"REKANAN",emptyText:"[ Nama Rekanan ]"},{xtype:"combobox",name:"RUANGAN",allowBlank:false,enterFocus:true,reference:"ruanganasal",enforceMaxLength:true,forceSelection:true,validateOnBlur:true,displayField:"DESKRIPSI",valueField:"ID",queryMode:"local",width:"40%",typeAhead:true,emptyText:"[ Ruangan ]",store:{model:"data.model.Ruangan"},listeners:{select:"onRuanganSelect"}}]}];com.Form.prototype.initComponent.apply(this,arguments)},onLoadRecord:function(n,m){try{var o=n.down("[name=RUANGAN]");o.getStore().loadData(n.getPenggunaRuangan())}catch(p){}}},0,["form-pengembalian-eksternal"],["component","box","container","panel","form","com-form","form-pengembalian-eksternal"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-pengembalian-eksternal":true},["widget.form-pengembalian-eksternal"],0,[inventory.eksternal.pengembalian,"Form"],0));(Ext.cmd.derive("inventory.eksternal.pengembalian.FormDetil",com.Form,{controller:"form-pengembalian-detil",layout:{type:"vbox",align:"stretch"},border:false,initComponent:function(){var f=this;f.items=[{xtype:"barang-combo",reference:"barangcombo",allowBlank:false,emptyText:"[ Masukkan Nama Barang ]",name:"BARANG"},{xtype:"numberfield",width:100,hideTrigger:true,allowBlank:false,name:"JUMLAH",emptyText:"[ Jumlah ]",listeners:{specialkey:"onFocusEnter"}},{xtype:"button",ui:"soft-green",text:"Tambah",listeners:{click:"onClickBarang"}}];com.Form.prototype.initComponent.apply(this,arguments)},loadCombo:function(m){var o=this,n=o.down("barang-combo"),p=n.getViewModel().get("store");p.queryParams={RUANGAN:m,STATUS:1}}},0,["form-pengembalian-detil"],["component","box","container","panel","form","com-form","form-pengembalian-detil"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"form-pengembalian-detil":true},["widget.form-pengembalian-detil"],0,[inventory.eksternal.pengembalian,"FormDetil"],0));(Ext.cmd.derive("inventory.eksternal.pengembalian.FormDetilController",Ext.app.ViewController,{onFocusEnter:function(m,l){if(l.getKey()===l.ENTER){var n=this;view=n.getView();value=view.getForm().getValues();if(view.getForm().isValid()){view.fireEvent("addBarang",value);view.getForm().reset()}}},onClickBarang:function(l){var g=this;view=g.getView();value=view.getForm().getValues();if(view.getForm().isValid()){view.fireEvent("addBarang",value);view.getForm().reset()}}},0,0,0,0,["controller.form-pengembalian-detil"],0,[inventory.eksternal.pengembalian,"FormDetilController"],0));(Ext.cmd.derive("inventory.eksternal.pengembalian.List",com.Grid,{viewModel:{stores:{store:{type:"pengembalian-barang-detil-store"}},data:{hideButton:false}},bind:{store:"{store}"},layout:"fit",initComponent:function(){var f=this;f.cellEditing=new Ext.grid.plugin.CellEditing({clicksToEdit:1,listeners:{afteredit:"onAfterEdit"}});f.plugins=[f.cellEditing];f.columns=[{text:"Nama Barang",dataIndex:"BARANG",flex:2,renderer:"onRenderBarang"},{text:"Jumlah",dataIndex:"JUMLAH",flex:1,editor:{xtype:"numberfield",hideTrigger:true,allowBlank:false}},{xtype:"widgetcolumn",reference:"gantitarif",width:"5%",onWidgetAttach:function(m,n,e){n.setHidden(Ext.isNumeric(e.get("ID")))},widget:{xtype:"button",iconCls:"x-fa fa-minus-circle",hidden:true,listeners:{click:"onRemoved"}}}];f.dockedItems=[{xtype:"toolbar",dock:"bottom",items:["->",{xtype:"datefield",flex:1,value:new Date()},{xtype:"button",ui:"soft-green",text:"Final",bind:{hidden:"{hideButton}"},listeners:{click:"onFinal"}},{xtype:"button",ui:"soft-blue",iconCls:"x-fa fa-print",text:"Cetak"},{xtype:"button",ui:"soft-green",iconCls:"x-fa fa-save",text:"Simpan",bind:{hidden:"{hideButton}"},listeners:{click:"onClickSimpan"}},{xtype:"button",ui:"soft-red",iconCls:"x-fa fa-refresh",text:"Reset",listeners:{click:"onReset"}}]}];com.Grid.prototype.initComponent.apply(this,arguments)},loadStore:function(l){var m=this,n=m.getViewModel();store=n.get("store");if(l){store.removeAll();store.queryParams={PENGEMBALIAN:l}}store.load()},finalButton:function(l){var m=this,n=m.getViewModel();if(l==2){n.set("hideButton",true)}else{n.set("hideButton",false)}},getData:function(){var n=this,o=n.getViewModel(),p=o.get("store"),m=[];p.each(function(e){m.push(e.getData())});return m}},0,["list-pengembalian-eksternal"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","list-pengembalian-eksternal"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"list-pengembalian-eksternal":true},["widget.list-pengembalian-eksternal"],0,[inventory.eksternal.pengembalian,"List"],0));(Ext.cmd.derive("inventory.eksternal.pengembalian.ListController",Ext.app.ViewController,{onRenderBarang:function(o,p,m){var n=m.get("REFERENSI");rekanan=n?(n.BARANG?n.BARANG.NAMA:""):"";return rekanan}},0,0,0,0,["controller.list-pengembalian-eksternal"],0,[inventory.eksternal.pengembalian,"ListController"],0));(Ext.cmd.derive("inventory.eksternal.pengembalian.ViewModel",Ext.app.ViewModel,{stores:{rekanan:{type:"penyedia-store",queryParams:{STATUS:1},autoLoad:true},barang:{type:"barang-store"}}},0,0,0,0,["viewmodel.workspace-pengembalian-eksternal"],0,[inventory.eksternal.pengembalian,"ViewModel"],0));(Ext.cmd.derive("inventory.eksternal.pengembalian.Workspace",com.Form,{controller:"workspace-pengembalian-eksternal",viewModel:"workspace-pengembalian-eksternal",layout:"border",flex:1,border:true,initComponent:function(){var f=this;f.items=[{region:"north",reference:"form",xtype:"form-pengembalian-eksternal",border:false},{region:"center",ui:"panel-gray",flex:1.5,header:{iconCls:"x-fa fa-list",padding:"5 5 5 2"},title:"Pengembalian Barang",reference:"listbarang",xtype:"list-pengembalian-eksternal"},{region:"east",ui:"panel-gray",header:{iconCls:"x-fa fa-history",padding:"5 5 5 2"},flex:1,collapsible:true,split:true,reference:"listhistory",xtype:"list-histori-pengembalian-eksternal",title:"Histori Pengembalian Barang",listeners:{select:"onSelectHistory"}},{region:"west",ui:"panel-gray",title:"Barang",header:{iconCls:"x-fa fa-file-o",padding:"5 5 5 2"},flex:1,collapsible:true,reference:"formbarang",xtype:"form-pengembalian-detil",split:true,listeners:{addBarang:"onTambahBarang"}}];com.Form.prototype.initComponent.apply(this,arguments)},onLoadRecord:function(g){var l=this;form=l.down("form-pengembalian-eksternal");form.createRecord({STATUS:1,TANGGAL:form.getSysdate()})}},0,["workspace-pengembalian-eksternal"],["component","box","container","panel","form","com-form","workspace-pengembalian-eksternal"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"workspace-pengembalian-eksternal":true},["widget.workspace-pengembalian-eksternal"],0,[inventory.eksternal.pengembalian,"Workspace"],0));(Ext.cmd.derive("inventory.eksternal.pengembalian.WorkspaceController",Ext.app.ViewController,{onRenderBarang:function(o,p,m){var n=m.get("REFERENSI");barang=n?(n.BARANG?n.BARANG.NAMA:""):"";return barang},onRemoved:function(o,p,m){var n=this.getViewModel();refs=this.getReferences();listbarang=refs.listbarang;listbarang.getStore().removeAt(o.tabIndex)},onTambahBarang:function(n){var o=this,s=o.getReferences(),p=o.getViewModel(),q=p.get("barang");form=s.formfaktur,listbarang=s.listbarang;q.removeAll();q.queryParams={ID:n.BARANG};q.load({callback:function(e,l,f){if(f){var g={BARANG:{ID:e[0].get("ID"),NAMA:e[0].get("NAMA")}};model=Ext.create("data.model.PengembalianBarang",{REFERENSI:g});model.set(n);listbarang.getStore().insert(0,model)}}})},onSelectHistory:function(n,l){var m=this;refs=m.getReferences(),form=refs.form,barang=refs.listbarang;m.dataPemngembalian=l;form.loadRecord(l);barang.loadStore(l.get("ID"));barang.finalButton(l.get("STATUS"))},onClickSimpan:function(l){var g=this;view=g.getView();refs=g.getReferences(),form=refs.form,listbarang=refs.listbarang;databarang=listbarang.getData();rec=form.getRecord();value.PENGEMBALIAN_BARANG_DETIL=databarang;if(form.getForm().isValid()){rec.set(value);rec.showError=true;rec.animateTarget=l;rec.scope=g;rec.save({callback:function(f,n,e){if(e){Ext.toast({html:"Data telah tersimpan",headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"});g.onReset()}}})}},onRuanganSelect:function(n,l){var m=this;view=m.getView();refs=m.getReferences(),formbarang=refs.formbarang;formbarang.loadCombo(l.get("ID"))},onReset:function(){var f=this;view=f.getView();refs=f.getReferences(),listbarang=refs.listbarang,form=refs.form,listhistory=refs.listhistory;form.createRecord({STATUS:1,TANGGAL:form.getSysdate()});listbarang.getStore().removeAll();listhistory.getStore().load()},onFinal:function(l){var g=this;view=g.getView();refs=g.getReferences();rec=form.getRecord();if(rec){if(Ext.isNumeric(rec.get("ID"))){rec.set("STATUS",2);rec.showError=true;rec.animateTarget=l;rec.scope=g;rec.save({callback:function(f,n,e){if(e){Ext.toast({html:"Data telah tersimpan",headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"});g.onReset()}}})}else{Ext.MessageBox.alert("Warning","Anda Tidak Dapat Memfinalkan transaksi ini.",g)}}else{Ext.MessageBox.alert("Warning","Anda Tidak Dapat Memfinalkan transaksi ini.",g)}}},0,0,0,0,["controller.workspace-pengembalian-eksternal"],0,[inventory.eksternal.pengembalian,"WorkspaceController"],0));(Ext.cmd.derive("inventory.eksternal.pengembalian.histori.List",com.Grid,{controller:"list-histori-pengembalian-eksternal",viewModel:{stores:{store:{type:"pengembalian-barang-store",autoLoad:true}}},bind:{store:"{store}"},layout:"fit",columns:[{text:"Nama Rekanan",dataIndex:"REKANAN",renderer:"onRenderRekanan",flex:2},{xtype:"datecolumn",text:"Tanggal Penerimaan",dataIndex:"TANGGAL",flex:1,format:"Y-m-d H:i:s"}],dockedItems:[{xtype:"pagingtoolbar",bind:{store:"{store}"},dock:"bottom",displayInfo:false}]},0,["list-histori-pengembalian-eksternal"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","list-histori-pengembalian-eksternal"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"list-histori-pengembalian-eksternal":true},["widget.list-histori-pengembalian-eksternal"],0,[inventory.eksternal.pengembalian.histori,"List"],0));(Ext.cmd.derive("inventory.eksternal.pengembalian.histori.ListController",Ext.app.ViewController,{onRenderRekanan:function(o,p,m){var n=m.get("REFERENSI");rekanan=n?(n.REKANAN?n.REKANAN.NAMA:""):"";if(m.get("STATUS")==2){return'<span style="color:red;">'+rekanan+"</span>"}else{return'<span style="color:green;">'+rekanan+"</span>"}}},0,0,0,0,["controller.list-histori-pengembalian-eksternal"],0,[inventory.eksternal.pengembalian.histori,"ListController"],0));(Ext.cmd.derive("inventory.monitoring.Workspace",com.Form,{viewModel:{stores:{store:{type:"stokbarangminimum-store"}}},layout:{type:"vbox",align:"stretch"},items:[{xtype:"monitoring-stokbarangminimum-list",flex:1}],onLoadRecord:function(){var l=this,g=l.down("monitoring-stokbarangminimum-list");g.load();g.start(15000)}},0,["monitoring-workspace"],["component","box","container","panel","form","com-form","monitoring-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"monitoring-workspace":true},["widget.monitoring-workspace"],0,[inventory.monitoring,"Workspace"],0));(Ext.cmd.derive("inventory.monitoring.WorkspaceController",Ext.app.ViewController,{},0,0,0,0,["controller.monitoring-workspace"],0,[inventory.monitoring,"WorkspaceController"],0));(Ext.cmd.derive("inventory.monitoring.stokbarangminimum.List",com.Grid,{controller:"monitoring-stokbarangminimum-list",flex:1,viewModel:{data:{listConfig:{autoRefresh:true}},stores:{store:{type:"stokbarangminimum-store"}},formulas:{autoRefreshIcon:function(f){return f("listConfig.autoRefresh")?"x-fa fa-stop":"x-fa fa-play"},tooltipAutoRefresh:function(f){return f("listConfig.autoRefresh")?"Hentikan Perbarui Otomatis":"Jalankan Perbarui Otomatis"}}},cls:"x-br-top",border:true,header:{items:[{xtype:"search-field",cls:"x-text-border",emptyText:"Cari Nama Barang",flex:1,listeners:{search:"onSearch",clear:"onClear"}},{xtype:"combo",reference:"combointerval",width:75,store:{fields:["ID"],data:[{ID:5},{ID:10},{ID:15},{ID:20},{ID:25},{ID:30}]},editable:false,displayField:"ID",valueField:"ID",value:15,bind:{disabled:"{listConfig.autoRefresh}"}},{xtype:"button",enableToggle:true,pressed:true,bind:{iconCls:"{autoRefreshIcon}",tooltip:"{tooltipAutoRefresh}"},toggleHandler:"onToggleRefresh"}]},initComponent:function(){var f=this;f.columns=[{xtype:"rownumberer",text:"No",align:"left",width:60},{text:"ID ",dataIndex:"ID",flex:1,hidden:true},{text:"Barang",dataIndex:"BARANG",flex:4,renderer:"onBarangRender"},{xtype:"templatecolumn",text:"Stok Tersedia",format:"0,00",align:"right",tpl:'<div style="font-weight: bold; white-space:normal !important;">{STOKTERSEDIA}</div>',flex:1},{xtype:"templatecolumn",text:"Stok Minimum",format:"0,00",align:"right",tpl:'<div style="font-weight: bold; color: red; white-space:normal !important;">{REFERENSI.BARANG.STOK}.00</div>',flex:1}];com.Grid.prototype.initComponent.apply(this,arguments)},columns:[{xtype:"rownumberer",text:"No",align:"left",width:60},{text:"ID ",dataIndex:"ID",flex:1,hidden:true},{text:"Barang",dataIndex:"BARANG",flex:4,renderer:"onBarangRender"},{xtype:"templatecolumn",text:"Stok Tersedia",format:"0,00",align:"right",tpl:'<div style="font-weight: bold; white-space:normal !important;">{STOKTERSEDIA}</div>',flex:1},{xtype:"templatecolumn",text:"Stok Minimum",format:"0,00",align:"right",tpl:'<div style="font-weight: bold; color: red; white-space:normal !important;">{REFERENSI.BARANG.STOK}.00</div>',flex:1}],dockedItems:[{xtype:"pagingtoolbar",bind:{store:"{store}"},dock:"bottom"}]},0,["monitoring-stokbarangminimum-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","monitoring-stokbarangminimum-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"monitoring-stokbarangminimum-list":true},["widget.monitoring-stokbarangminimum-list"],0,[inventory.monitoring.stokbarangminimum,"List"],0));(Ext.cmd.derive("inventory.monitoring.stokbarangminimum.ListController",Ext.app.ViewController,{onToggleRefresh:function(p,u){var o=this,t=o.getView(),q=o.getReferences(),s=Number(q.combointerval.getValue())*1000;t.setListConfig({autoRefresh:p.pressed});if(p.pressed){t.start(s)}else{t.stop()}},onBarangRender:function(y,w,x,v,e,g){var u=x.get("REFERENSI"),f=u?(u.BARANG?u.BARANG.NAMA:""):"";return f},onSearch:function(q,f){var e=this,s=e.getViewModel(),p=s.get("store");parameter=p.getQueryParams();p.queryParams={QUERY:f,start:0,page:1};p.load()},onClear:function(){var m=this,l=m.getViewModel(),n=l.get("store");delete n.queryParams.QUERY;delete n.queryParams.start;delete n.queryParams.page;n.load()}},0,0,0,0,["controller.monitoring-stokbarangminimum-list"],0,[inventory.monitoring.stokbarangminimum,"ListController"],0));(Ext.cmd.derive("inventory.penerimaan.List",Ext.grid.Panel,{controller:"penerimaan-list",viewModel:{stores:{permintaanstore:{type:"permintaan-store",queryParams:{STATUS:1},autoLoad:true},referensistore:{type:"referensi-store",queryParams:{JENIS:63,ID:1},autoLoad:true}}},cls:"x-br-top",border:false,bind:{store:"{permintaanstore}"},initComponent:function(){var f=this;f.columns=[{text:"Unit Meminta",dataIndex:"ASAL",flex:1,renderer:"onRendereAsal"},{text:"Unit Tujuan",dataIndex:"TUJUAN",flex:1,renderer:"onRendererTujuan"},{xtype:"datecolumn",text:"Tanggal Permintaan",dataIndex:"TANGGAL",flex:1,format:"d-m-Y H:i",align:"center"},{width:80,xtype:"widgetcolumn",widget:{text:"Terima",xtype:"button",ui:"soft-green",listeners:{click:"onClickTerima"}}}],f.dockedItems=[{xtype:"pagingtoolbar",dock:"bottom",displayInfo:false}];Ext.grid.Panel.prototype.initComponent.apply(this,arguments)},onLoadRecord:function(p,n){console.log("load");var q=this,o=q.getViewModel(),s=o.get("permintaanstore");if(s){s.removeAll();s.queryParams=p;s.load({callback:function(f){var e=null;if(f){if(f.length>0){o.set("status",f[0].get("STATUS"));e=f[0]}if(Ext.isFunction(n)){}}}})}}},0,["penerimaan-list"],["component","box","container","panel","tablepanel","gridpanel","grid","penerimaan-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"penerimaan-list":true},["widget.penerimaan-list"],0,[inventory.penerimaan,"List"],0));(Ext.cmd.derive("inventory.penerimaan.ListController",Ext.app.ViewController,{onRendererTujuan:function(o,p,m){var n=m.get("REFERENSI");n=n?(n.TUJUAN?n.TUJUAN.DESKRIPSI:""):"";return n},onClickTerima:function(m){var n=this,p=n.getView(),o=n.getViewModel();recs=m.getWidgetRecord();Ext.Msg.show({title:"Konfirmasi",message:"Apakah anda ingin menerima barang tersebut?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:function(e){if(e=="yes"){modpenerimaan=Ext.create("data.model.Penerimaan",{RUANGAN:recs.get("TUJUAN"),JENIS:1,REF:1,TANGGAL:"2015-12-30 10:10:10",STATUS:1});modpenerimaan.save({callback:function(f,l,g){if(g){Ext.toast({html:"Data Diterima",headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"});recs.set("STATUS",2);recs.save({callback:function(u,w,v){if(v){p.fireEvent("success",v)}}})}}});p.fireEvent("loaddata",recs)}}})},onRendereAsal:function(o,p,m){var n=m.get("REFERENSI");n=n?(n.ASAL?n.ASAL.DESKRIPSI:""):"";return n}},0,0,0,0,["controller.penerimaan-list"],0,[inventory.penerimaan,"ListController"],0));(Ext.cmd.derive("inventory.penerimaan.pengiriman.Detil",com.Grid,{viewModel:{stores:{store:{type:"pengirimandetil-store",queryParams:{PENGIRIMAN:0},autoLoad:true}}},cls:"x-br-top",border:false,reference:"",columns:[{xtype:"templatecolumn",text:"Nama Barang",flex:3,sortable:false,tpl:"<div>{REFERENSI.PERMINTAAN_DETIL.REFERENSI.BARANG.NAMA}</div>"},{xtype:"numbercolumn",text:"Jumlah",dataIndex:"JUMLAH",flex:1,align:"right"},{xtype:"widgetcolumn",align:"center",text:"#",width:70,onWidgetAttach:function(m,n,l){n.setHidden(Ext.isNumeric(l.get("ID")))},widget:{xtype:"button",action:0,iconCls:"x-fa fa-minus-circle",ui:"soft-red",handler:"onBatal"}}],dockedItems:[{xtype:"pagingtoolbar",bind:{store:"{store}"},dock:"bottom"}],removeDataStore:function(){this.getViewModel().get("store").removeAll()},setDetilPermintaan:function(l){var m=this,n=m.getViewModel().get("store");if(l){n.removeAll();n.queryParams=l;n.load()}}},0,["penerimaan-pengiriman-detil"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","penerimaan-pengiriman-detil"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"penerimaan-pengiriman-detil":true},["widget.penerimaan-pengiriman-detil"],0,[inventory.penerimaan.pengiriman,"Detil"],0));(Ext.cmd.derive("inventory.penerimaan.pengiriman.List",com.Grid,{controller:"penerimaan-pengiriman-list",viewModel:{stores:{store:{type:"pengiriman-store",queryParams:{TUJUAN:0},autoLoad:true}}},cls:"x-br-top",border:false,reference:"",initComponent:function(){var f=this;f.columns=[{text:"Unit Asal Barang",dataIndex:"ASAL",flex:1,renderer:"onRendereAsal"},{text:"Unit Tujuan Barang",dataIndex:"TUJUAN",flex:1,renderer:"onRendererTujuan"},{xtype:"datecolumn",text:"Tanggal Pengiriman",dataIndex:"TANGGAL",flex:1,format:"d-m-Y H:i",align:"center"},{width:100,xtype:"widgetcolumn",widget:{text:"Terima",xtype:"button",ui:"soft-green",listeners:{click:"onClickTerima"}}}],f.dockedItems=[{xtype:"pagingtoolbar",dock:"bottom",bind:{store:"{store}"},displayInfo:false}];com.Grid.prototype.initComponent.apply(this,arguments)},onLoadRecord:function(n){var o=this,m=o.getViewModel(),p=m.get("store");if(p){p.removeAll();p.queryParams=n;p.load()}}},0,["penerimaan-pengiriman-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","penerimaan-pengiriman-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"penerimaan-pengiriman-list":true},["widget.penerimaan-pengiriman-list"],0,[inventory.penerimaan.pengiriman,"List"],0));(Ext.cmd.derive("inventory.penerimaan.pengiriman.ListController",Ext.app.ViewController,{onRendererTujuan:function(o,p,m){var n=m.get("REFERENSI");n=n?(n.TUJUAN?n.TUJUAN.DESKRIPSI:""):"";return n},onClickTerima:function(n){var o=this,q=o.getView(),p=o.getViewModel();recs=n.getWidgetRecord();var s=recs.get("TUJUAN");Ext.Msg.show({title:"Konfirmasi",message:"Apakah anda yakin ingin menerima barang tersebut?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:function(e){if(e=="yes"){modpenerimaan=Ext.create("data.model.Penerimaan",{RUANGAN:recs.get("TUJUAN"),JENIS:2,REF:recs.get("NOMOR"),TANGGAL:q.getSysdate(),STATUS:1});modpenerimaan.save({callback:function(f,l,g){if(g){Ext.toast({html:"Data Diterima",headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"});recs.set("STATUS",2);recs.save({callback:function(m,w,v){if(v){q.fireEvent("success",s)}}})}}})}}})},onRendereAsal:function(o,p,m){var n=m.get("REFERENSI");n=n?(n.ASAL?n.ASAL.DESKRIPSI:""):"";return n}},0,0,0,0,["controller.penerimaan-pengiriman-list"],0,[inventory.penerimaan.pengiriman,"ListController"],0));(Ext.cmd.derive("inventory.penerimaan.permintaan.List",com.Grid,{controller:"penerimaan-permintaan-list",viewModel:{stores:{store:{type:"permintaan-store"}}},cls:"x-br-top",border:false,reference:"",initComponent:function(){var f=this;f.columns=[{xtype:"rownumberer",text:"No",align:"left",width:50},{text:"Unit Meminta",dataIndex:"ASAL",flex:1,renderer:"onRendereAsal"},{text:"Unit Tujuan",dataIndex:"TUJUAN",flex:1,renderer:"onRendererTujuan"},{xtype:"datecolumn",text:"Tanggal Permintaan",dataIndex:"TANGGAL",flex:1,format:"d-m-Y H:i",align:"center"},{width:100,xtype:"widgetcolumn",onWidgetAttach:function(n,o,e){o.setDisabled(2==e.get("TERIMA"))},widget:{text:"Terima",xtype:"button",ui:"soft-green",listeners:{click:"onClickTerima"}}}],f.dockedItems=[{xtype:"pagingtoolbar",dock:"bottom",bind:{store:"{store}"},displayInfo:false}];com.Grid.prototype.initComponent.apply(this,arguments)},onLoadRecord:function(n){var o=this,m=o.getViewModel(),p=m.get("store");if(p){p.removeAll();p.queryParams=n;p.load()}}},0,["penerimaan-permintaan-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","penerimaan-permintaan-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"penerimaan-permintaan-list":true},["widget.penerimaan-permintaan-list"],0,[inventory.penerimaan.permintaan,"List"],0));(Ext.cmd.derive("inventory.penerimaan.permintaan.ListController",Ext.app.ViewController,{onRendererTujuan:function(o,p,m){var n=m.get("REFERENSI");n=n?(n.TUJUAN?n.TUJUAN.DESKRIPSI:""):"";return n},onClickTerima:function(m){var n=this,p=n.getView(),o=n.getViewModel();recs=m.getWidgetRecord();Ext.Msg.show({title:"Konfirmasi",message:"Apakah anda ingin menerima permintaan barang tersebut?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:m,fn:function(e){if(e=="yes"){recs.set("TERIMA",2);recs.scope=this;recs.save({callback:function(g,f,l){if(l){Ext.toast({headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",html:"Data diterima...",align:"t"});p.fireEvent("loaddata",recs)}}})}}})},onRendereAsal:function(o,p,m){var n=m.get("REFERENSI");n=n?(n.ASAL?n.ASAL.DESKRIPSI:""):"";return n}},0,0,0,0,["controller.penerimaan-permintaan-list"],0,[inventory.penerimaan.permintaan,"ListController"],0));(Ext.cmd.derive("inventory.pengiriman.Detil",Ext.grid.Panel,{controller:"pengiriman-detil",viewModel:{stores:{store:{type:""}}},bind:{store:"{}"},border:false,cls:"x-br-top",bind:{title:"Unit Tujuan : <strong>Apotik Rawat Jalan</strong>"},header:{itemPosition:1,items:[{xtype:"component",bind:{html:"No. Transaksi: <strong>123456</strong>"},margin:"0 5 0 0"}]},initComponent:function(){var f=this;f.cellEditing=new Ext.grid.plugin.CellEditing({clicksToEdit:1});f.plugins=[f.cellEditing];f.columns=[{xtype:"rownumberer",text:"No",align:"left",width:60},{text:"Nama Barang",dataIndex:"",name:"",xtype:"",renderer:"",flex:1},{xtype:"numbercolumn",text:"Jumlah Permintaan",name:"",flex:1,dataIndex:""},{xtype:"numbercolumn",name:"",text:"Jumlah Yang Di Kirim",flex:1,dataIndex:""}],f.dockedItems=[{xtype:"toolbar",dock:"bottom",items:["->",{xtype:"datefield",flex:1,value:new Date(),emptyText:"Tanggal Pengiriman Barang"},{xtype:"button",ui:"soft-blue",iconCls:"x-fa fa-print",text:"Cetak"},{xtype:"button",ui:"soft-green",iconCls:"x-fa fa-save",text:"Simpan"}]}];f.callParent(arguments)}},0,["pengiriman-detil"],["component","box","container","panel","tablepanel","gridpanel","grid","pengiriman-detil"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"pengiriman-detil":true},["widget.pengiriman-detil"],0,[inventory.pengiriman,"Detil"],0));(Ext.cmd.derive("inventory.pengiriman.DetilController",Ext.app.ViewController,{},0,0,0,0,["controller.pengiriman-detil"],0,[inventory.pengiriman,"DetilController"],0));(Ext.cmd.derive("inventory.pengiriman.Links",com.Tab,{activeTab:0,cls:"x-br-top",ui:"header-tab",rec:undefined,initComponent:function(){var f=this;com.Tab.prototype.initComponent.apply(this,arguments);if(f.app){if(f.app.xpriv("2301",false)){f.add({title:"Pengiriman",xtype:"pengiriman-workspace",border:true})}if(f.app.xpriv("2302",false)){f.add({title:"History Pengiriman Barang",xtype:"pengiriman-history-workspace",border:true})}}},onLoadRecord:function(l){var m=this,n=this.getActiveTab();m.rec=l;if(n){n.onLoadRecord({})}else{if(m.items.getCount()>0){m.setActiveTab(0)}}}},0,["tab-pengiriman"],["component","box","container","panel","tabpanel","com-tab","tab-pengiriman"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"tab-pengiriman":true},["widget.tab-pengiriman"],0,[inventory.pengiriman,"Links"],0));(Ext.cmd.derive("inventory.pengiriman.List",com.Grid,{controller:"list-pengiriman",viewModel:{data:{permintaan:undefined,hidebutton:true,data:undefined},stores:{permintaandetilstore:{type:"permintaan-detil-store"}}},border:false,cls:"x-br-top",bind:{store:"{permintaandetilstore}"},doAfterLoad:Ext.emptyFn,initComponent:function(){var f=this;store=f.getViewModel().get("permintaandetilstore");f.cellEditing=new Ext.grid.plugin.CellEditing({clicksToEdit:1,listeners:{afteredit:"afterEdit"}});f.plugins=[f.cellEditing];f.columns=[{xtype:"rownumberer",text:"No",align:"left",width:60},{text:"Nama Barang",dataIndex:"BARANG",renderer:"onRenderNamaBarang",flex:1},{text:"Jumlah Permintaan",flex:1,dataIndex:"JUMLAH"},{text:"Jumlah Yang Di Kirim",flex:1,dataIndex:"JUMLAH_KIRIM",editor:{xtype:"numberfield",allowBlank:false,hideTrigger:true}}],f.dockedItems=[{xtype:"toolbar",dock:"bottom",items:["->",{xtype:"button",ui:"soft-green",bind:{disabled:"{hidebutton}"},iconCls:"x-fa fa-save",text:"Simpan & Cetak",listeners:{click:"onClickSimpan"}},{xtype:"button",ui:"soft-red",bind:{disabled:"{hidebutton}"},iconCls:"x-fa fa-times",text:"Reset",handler:"OnReset"}]}];f.plugins=[f.cellEditing];f.selModel={selType:"cellmodel"};com.Grid.prototype.initComponent.apply(this,arguments)},loadStore:function(m){var o=this,p=this.getViewModel(),n=p.get("permintaandetilstore");if(m){p.set("permintaan",m);p.set("data",m);n.removeAll();n.queryParams={PERMINTAAN:m.get("NOMOR"),STATUS:1};if(m.get("TERIMA")==1){p.set("hidebutton",true)}else{p.set("hidebutton",false)}n.load()}},setDataTerima:function(l){var m=this,n=m.getViewModel();n.set("data",l)},getData:function(){var n=this,m=n.getViewModel().get("permintaandetilstore"),l=[];m.each(function(e){l.push({JUMLAH:e.get("JUMLAH_KIRIM"),PERMINTAAN_BARANG_DETIL:e.get("ID"),STATUS:1})});return l}},0,["list-pengiriman"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","list-pengiriman"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"list-pengiriman":true},["widget.list-pengiriman"],0,[inventory.pengiriman,"List"],0));(Ext.cmd.derive("inventory.pengiriman.ListController",Ext.app.ViewController,{onRenderNamaBarang:function(o,p,m){var n=m.get("REFERENSI");barang=n?(n.BARANG?n.BARANG.NAMA:""):"";return barang},afterEdit:function(e,v,t){var w=this,q=w.getViewModel().getStore("permintaandetilstore"),u=q.getAt(v.rowIdx),s=u.get("JUMLAH");if(s<v.value){Ext.toast({html:"Jumlah yang dikirim harus kurang atau sama dengan jumlah yang diminta",headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"});v.record.set("JUMLAH_KIRIM","")}},onClickSimpan:function(l){var g=this;view=g.getView(),datadetil=view.getData(),vm=g.getViewModel();recs=vm.get("data");permintaan=vm.get("permintaan"),modpengiriman=Ext.create("data.model.Pengiriman",{ASAL:permintaan.get("TUJUAN"),TUJUAN:permintaan.get("ASAL"),PERMINTAAN:permintaan.get("NOMOR"),TANGGAL:view.getSysdate(),STATUS:1,PENGIRIMAN_DETIL:datadetil});Ext.Msg.show({title:"Konfirmasi",message:"Apakah anda yakin ingin mengirim barang tersebut?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:l,fn:function(e){if(e=="yes"){modpengiriman.animateTarget=l;modpengiriman.scope=g;modpengiriman.showError=true;modpengiriman.save({callback:function(p,o,f){if(f){Ext.toast({html:"Data Berhasil Disimpan",headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"});view.fireEvent("success",f)}}});modpenerimaan=Ext.create("data.model.Penerimaan",{RUANGAN:recs.get("TUJUAN"),JENIS:1,REF:recs.get("NOMOR"),TANGGAL:view.getSysdate(),STATUS:1});modpenerimaan.save({callback:function(p,o,f){if(f){Ext.toast({html:"Data Diterima",headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"});recs.set("STATUS",2);recs.save({callback:function(m,s,n){if(n){view.fireEvent("success",n)}}})}}})}}})},OnReset:function(){var g=this,l=g.getViewModel();permintaan=l.get("permintaan");g.getView().fireEvent("onreset",permintaan)}},0,0,0,0,["controller.list-pengiriman"],0,[inventory.pengiriman,"ListController"],0));(Ext.cmd.derive("inventory.pengiriman.Workspace",com.Form,{controller:"pengiriman-workspace",layout:"border",flex:1,border:true,initComponent:function(){var f=this;f.items=[{region:"west",title:"List Permintaan Barang Baru",layout:"border",flex:1,collapsible:true,floatable:true,split:true,header:{iconCls:"x-fa fa-list",padding:"10 10 10 5"},items:[{region:"north",layout:"hbox",defaults:{margin:"2 2 2 2"},items:[{xtype:"combobox",name:"RUANGAN",allowBlank:false,enterFocus:true,reference:"ruanganso",enforceMaxLength:true,forceSelection:true,validateOnBlur:true,flex:1,displayField:"DESKRIPSI",valueField:"ID",queryMode:"local",editable:false,emptyText:"[ Pilih Ruangan Tujuan ]",store:{model:"data.model.Ruangan"},listeners:{specialkey:"onFocusEnter",select:"onSelectRuangan"}}]},{region:"center",xtype:"penerimaan-permintaan-list",reference:"penerimaanlist",border:true,flex:1,listeners:{loaddata:"onLoadData",success:"onTerimaPermintaan",select:"onSelectList"}}]},{region:"center",xtype:"list-pengiriman",flex:1.5,reference:"pengirimandetil",listeners:{success:"onSuccessPengiriman",onreset:"onReset"}}];f.callParent(arguments)},onLoadRecord:function(l){var m=this,n=m.down("[name=RUANGAN]");n.getStore().loadData(m.getPenggunaRuangan())}},0,["pengiriman-workspace"],["component","box","container","panel","form","com-form","pengiriman-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"pengiriman-workspace":true},["widget.pengiriman-workspace"],0,[inventory.pengiriman,"Workspace"],0));(Ext.cmd.derive("inventory.pengiriman.WorkspaceController",Ext.app.ViewController,{recordSelection:undefined,onFocusEnter:function(l,g){this.getView().fireEvent("specialkey",l,g)},onSelectRuangan:function(o,q){var n=this,p=n.getReferences();n.recordSelection=q;if(q){var s={TUJUAN:q.get("ID"),STATUS:1};p.penerimaanlist.onLoadRecord(s)}else{var s=0;p.penerimaanlist.onLoadRecord(s)}},onLoadData:function(n){var o=this,s=o.getReferences(),p=s.pengirimandetil,q=s.penerimaanlist;hide=p.getViewModel();p.setDataTerima(n);if(n){hide.set("hidebutton",false);p.loadStore(n);p.setTitle("No. Transaksi : "+n.get("NOMOR"));q.reload()}},onSuccessPengiriman:function(p){var o=this,t=o.getReferences(),u=t.pengirimandetil,q=u.getViewModel(),s=t.penerimaanlist;q.set("hidebutton",true);u.getStore().removeAll();u.setTitle("No. Transaksi : ");s.reload()},onTerimaPermintaan:function(m){var n=this,p=n.getReferences(),o=p.penerimaanlist;o.reload()},onSelectList:function(n,p){var m=this,o=m.getReferences();m.recordSelection=p;o.pengirimandetil.loadStore(p);o.pengirimandetil.setTitle("No. Transaksi : "+p.get("NOMOR"))},onReset:function(o){var m=this,p=m.getView(),n=m.getReferences();n.pengirimandetil.loadStore(o)}},0,0,0,0,["controller.pengiriman-workspace"],0,[inventory.pengiriman,"WorkspaceController"],0));(Ext.cmd.derive("inventory.pengiriman.history.Detil",com.Grid,{viewModel:{stores:{store:{type:"pengirimandetil-store",queryParams:{PENGIRIMAN:0},autoLoad:true}}},cls:"x-br-top",border:false,reference:"",columns:[{xtype:"rownumberer",text:"No",align:"left",width:50},{xtype:"templatecolumn",text:"Nama Barang",flex:3,sortable:false,tpl:"<div>{REFERENSI.PERMINTAAN_DETIL.REFERENSI.BARANG.NAMA}</div>"},{xtype:"templatecolumn",text:"Jumlah Permintaan",flex:1,sortable:false,align:"right",tpl:"<div>{REFERENSI.PERMINTAAN_DETIL.JUMLAH}</div>"},{xtype:"numbercolumn",text:"Jumlah Yang Di Kirim",dataIndex:"JUMLAH",flex:1,align:"right"}],dockedItems:[{xtype:"pagingtoolbar",bind:{store:"{store}"},dock:"bottom"}],removeDataStore:function(){this.getViewModel().get("store").removeAll()},setDetilPermintaan:function(l){var m=this,n=m.getViewModel().get("store");if(l){n.removeAll();n.queryParams=l;n.load()}}},0,["pengiriman-history-detil"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","pengiriman-history-detil"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"pengiriman-history-detil":true},["widget.pengiriman-history-detil"],0,[inventory.pengiriman.history,"Detil"],0));(Ext.cmd.derive("inventory.pengiriman.history.DetilController",Ext.app.ViewController,{onRenderNamaBarang:function(o,p,m){var n=m.get("REFERENSI");barang=n?(n.PERMINTAAN_DETIL?n.PERMINTAAN_DETIL.REFERENSI.BARANG.NAMA:""):"";return barang}},0,0,0,0,["controller.pengiriman-history-detil"],0,[inventory.pengiriman.history,"DetilController"],0));(Ext.cmd.derive("inventory.pengiriman.history.List",com.Grid,{controller:"pengiriman-history-list",viewModel:{stores:{store:{type:"pengiriman-store"}}},cls:"x-br-top",border:false,bind:{store:"{store}"},initComponent:function(){var f=this;f.columns=[{xtype:"rownumberer",text:"No",align:"left",width:50},{text:"Unit Meminta",dataIndex:"ASAL",flex:1,renderer:"onAsal"},{text:"Unit Tujuan",dataIndex:"TUJUAN",flex:1,renderer:"onTujuan"},{text:"No. Transaksi",dataIndex:"NOMOR",flex:1},{xtype:"datecolumn",text:"Tanggal Pengiriman",dataIndex:"TANGGAL",flex:1,format:"d-m-Y H:i:s",align:"center"},{text:"Status",dataIndex:"STATUS",flex:1,renderer:"onRenderStatusPengiriman"},{xtype:"widgetcolumn",align:"center",text:"#",width:70,widget:{xtype:"fieldcontainer",flex:1,defaults:{padding:2},items:[{xtype:"button",action:0,iconCls:"x-fa fa-print",text:"Cetak",ui:"soft-blue",handler:"onClickCetakBuktiPengiriman"}]}}],f.dockedItems=[{xtype:"pagingtoolbar",dock:"bottom",bind:{store:"{store}"},displayInfo:false}];com.Grid.prototype.initComponent.apply(this,arguments)},onLoadRecord:function(n){var o=this,m=o.getViewModel(),p=m.get("store");if(p){p.removeAll();p.queryParams=n;p.load()}}},0,["pengiriman-history-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","pengiriman-history-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"pengiriman-history-list":true},["widget.pengiriman-history-list"],0,[inventory.pengiriman.history,"List"],0));(Ext.cmd.derive("inventory.pengiriman.history.ListController",Ext.app.ViewController,{onTujuan:function(o,p,m){var n=m.get("REFERENSI");tujuan=n?(n.TUJUAN?n.TUJUAN.DESKRIPSI:""):"";return tujuan},onAsal:function(o,p,m){var n=m.get("REFERENSI");asal=n?(n.ASAL?n.ASAL.DESKRIPSI:""):"";return asal},onRenderStatusPengiriman:function(f){if(f==1){return'<span style="color:red;"> Pending </span>'}else{if(f==2){return'<span style="color:green;"> Proses </span>'}else{return'<span style="color:black;"> Selesai </span>'}}return f},onClickCetakBuktiPengiriman:function(o){var p=this,s=p.getView(),q=p.getViewModel();recs=o.ownerCt.getWidgetRecord();var n=recs.get("NOMOR");this.cetakBuktiPengiriman(n)},privates:{cetakBuktiPengiriman:function(v){console.log(v);var p=this,u=p.getView(),t="Word",q="docx",w=true,s="Cetak Bukti Pengiriman :"+v;Ext.Msg.show({title:s,message:"Tekan tombol Yes/Ya utk cetak langsung<br/>Tekan tombol No/Tidak untuk Preview",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,defaultButton:"yes",animateTarget:p,fn:function(e){if(e!="yes"){t="Pdf";q="pdf";w=false}u.cetak({NAME:"inventory.CetakBuktiPengirimanBarang",TYPE:t,EXT:q,PARAMETER:{PNOMOR:v},REQUEST_FOR_PRINT:w,PRINT_NAME:"CetakRincian"},function(f){u.openDialog("Print Preview",true,0,0,{xtype:"panel",title:s},function(l,g){g.down("panel").update("<iframe style='width: 100%; height: 100%' src='"+f+"'></iframe>")})})}})}}},0,0,0,0,["controller.pengiriman-history-list"],0,[inventory.pengiriman.history,"ListController"],0));(Ext.cmd.derive("inventory.pengiriman.history.Workspace",com.Form,{controller:"pengiriman-history-workspace",layout:"border",flex:1,border:true,initComponent:function(){var f=this;f.items=[{region:"west",title:"History Pengiriman Barang",layout:"border",flex:1,collapsible:true,floatable:true,split:true,header:{iconCls:"x-fa fa-list",padding:"10 10 10 5"},items:[{region:"north",layout:"hbox",defaults:{margin:"2 2 2 2"},items:[{xtype:"combobox",name:"RUANGAN",allowBlank:false,enterFocus:true,reference:"ruanganso",enforceMaxLength:true,forceSelection:true,validateOnBlur:true,flex:1,displayField:"DESKRIPSI",valueField:"ID",queryMode:"local",editable:false,emptyText:"[ Pilih Ruangan Tujuan ]",store:{model:"data.model.Ruangan"},listeners:{specialkey:"onFocusEnter",select:"onSelectHistoryPengiriman"}}]},{region:"center",xtype:"pengiriman-history-list",reference:"pengirimanhistorylist",border:true,flex:1,listeners:{select:"onSelectList"}}]},{region:"center",xtype:"pengiriman-history-detil",flex:1.5,reference:"pengirimanhistorydetil"}];f.callParent(arguments)},onLoadRecord:function(l){var m=this,n=m.down("[name=RUANGAN]");n.getStore().loadData(m.getPenggunaRuangan())},setRuangan:function(l){var m=this,n=m.down("pengiriman-history-list");n.onLoadRecord({TUJUAN:l})}},0,["pengiriman-history-workspace"],["component","box","container","panel","form","com-form","pengiriman-history-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"pengiriman-history-workspace":true},["widget.pengiriman-history-workspace"],0,[inventory.pengiriman.history,"Workspace"],0));(Ext.cmd.derive("inventory.pengiriman.history.WorkspaceController",Ext.app.ViewController,{recordSelection:undefined,onFocusEnter:function(l,g){this.getView().fireEvent("specialkey",l,g)},onSelectHistoryPengiriman:function(p,s){var o=this,q=o.getReferences();o.recordSelection=s;if(s){var n={ASAL:s.get("ID")};q.pengirimanhistorylist.onLoadRecord(n)}else{var n=0;q.pengirimanhistorylist.onLoadRecord(n)}},onSelectList:function(m,n){console.log("select");var l=this;if(n){l.getReferences().pengirimanhistorydetil.setDetilPermintaan({PENGIRIMAN:n.get("NOMOR")});l.getReferences().pengirimanhistorydetil.setTitle("No. Transaksi : "+n.get("NOMOR"))}}},0,0,0,0,["controller.pengiriman-history-workspace"],0,[inventory.pengiriman.history,"WorkspaceController"],0));(Ext.cmd.derive("inventory.permintaan.Form",com.Form,{controller:"permintaan-form",model:"data.model.PermintaanDetil",viewModel:{stores:{kategoristore:{type:"kategori-store",queryParams:{JENIS:1,STATUS:1},autoLoad:true},paketstore:{type:"tindakan-paket-farmasi-store"}},data:{setRUANGAN:undefined,setKATEGORI_BARANG:1,setSTATUS:1}},layout:{type:"vbox",align:"stretch"},bodyPadding:5,initComponent:function(){var f=this;f.items=[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},defaults:{hideLabel:"true",margin:"0 0 0 5"},items:[{xtype:"combo",name:"KATEGORY",allowBlank:false,queryMode:"local",reference:"kategory",bind:{store:"{kategoristore}",value:"{KATEGORI_BARANG}"},emptyText:"[ NAMA KATEGORY ]",displayField:"NAMA",valueField:"ID",enterFocus:true,disabled:true,listeners:{select:"onSelectKategori"}},{xtype:"barang-combo",emptyText:"[ Item Barang ]",enterFocus:true,flex:1,enforceMaxLength:true,forceSelection:true,validateOnBlur:true,allowBlank:false,reference:"barangcombo",name:"BARANG",disabled:true},{xtype:"numberfield",hideTrigger:true,enterFocus:true,emptyText:"[ Jumlah ]",allowBlank:false,width:100,reference:"jumlahbarang",name:"JUMLAH",listeners:{specialkey:"onFocusEnter"},disabled:true},{xtype:"button",ui:"soft-blue",iconCls:"x-fa fa-save",reference:"btnaddbarangpermintaan",handler:"AddBarangPermintaan",disabled:true},{xtype:"component",flex:1},{xtype:"paket-tindakan-farmasi-combo",emptyText:"[ Paket ]",enterFocus:true,flex:1,reference:"paketcombo",name:"PAKET",listeners:{select:"onSelectPaket"}},{xtype:"button",ui:"soft-blue",iconCls:"x-fa fa-save",reference:"btnaddbarangpaketpermintaan",handler:"AddBarangPaketPermintaan"}]}];com.Form.prototype.initComponent.apply(this,arguments)},onBeforeGetRecord:function(n,m){var p=n.down("barang-combo").getSelection(),o=n.down("[reference=jumlahbarang]").getValue();m.REFERENSI={};if(p){m.REFERENSI=p.data.REFERENSI}},setDisabledForm:function(n){var o=this,p=o.getViewModel(),s=o.down("barang-combo"),q=s.getViewModel().get("store");s.setDisabled(n);o.down("[reference=jumlahbarang]").setDisabled(false);o.down("[reference=btnaddbarangpermintaan]").setDisabled(false);o.down("barang-combo").setDisabled(false);o.down("[reference=kategory]").setDisabled(false);q.queryParams={RUANGAN:p.get("setRUANGAN"),KATEGORI_BARANG:p.get("setKATEGORI_BARANG"),STATUS:p.get("setSTATUS")}},setLoadData:function(l){var m=this,n=m.getViewModel().get("paketstore");n.removeAll();n.queryParams=n.queryParams||{};n.queryParams={TINDAKAN:l,STATUS:1};n.load()},getData:function(){var o=this,p=o.getViewModel().get("paketstore"),n=o.getViewModel().get("record"),m=[];p.each(function(f){var e={BARANG:f.data.BARANG,JUMLAH:f.data.JUMLAH,REFERENSI:f.data.REFERENSI};m.push(e);n.set(m)});console.log(m);return m}},0,["permintaan-form"],["component","box","container","panel","form","com-form","permintaan-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"permintaan-form":true},["widget.permintaan-form"],0,[inventory.permintaan,"Form"],0));(Ext.cmd.derive("inventory.permintaan.FormController",Ext.app.ViewController,{onFocusEnter:function(l,g){if(g.getKey()===g.ENTER){this.getView().fireEvent("addbarangpermintaan")}},AddBarangPermintaan:function(){this.getView().fireEvent("addbarangpermintaan")},AddBarangPaketPermintaan:function(){this.getView().fireEvent("addbarangpaketpermintaan")},onBeforeQuery:function(f){f.combo.getStore().removeAll()},onSelectKategori:function(n,l){var m=this;view=m.getView(),refs=m.getReferences(),barangcombo=refs.barangcombo;barangcombo.getStore().removeAll();barangcombo.select(null);m.getViewModel().set("setKATEGORI_BARANG",l.get("ID"));view.setDisabledForm("rec")},onSelectPaket:function(n,l){var m=this;view=m.getView();console.log(l.get("ID"));view.setLoadData(l.get("ID"))}},0,0,0,0,["controller.permintaan-form"],0,[inventory.permintaan,"FormController"],0));(Ext.cmd.derive("inventory.permintaan.Links",com.Tab,{activeTab:0,cls:"x-br-top",ui:"header-tab",rec:undefined,initComponent:function(){var f=this;com.Tab.prototype.initComponent.apply(this,arguments);if(f.app){if(f.app.xpriv("2301",false)){f.add({title:"Permintaan",xtype:"permintaan-workspace",border:true})}if(f.app.xpriv("2302",false)){f.add({title:"Penerimaan Barang Baru",xtype:"permintaan-terima-workspace",border:true})}}},onLoadRecord:function(l){var m=this,n=this.getActiveTab();m.rec=l;if(n){n.onLoadRecord({})}else{if(m.items.getCount()>0){m.setActiveTab(0)}}}},0,["tab-permintaan"],["component","box","container","panel","tabpanel","com-tab","tab-permintaan"],{component:true,box:true,container:true,panel:true,tabpanel:true,"com-tab":true,"tab-permintaan":true},["widget.tab-permintaan"],0,[inventory.permintaan,"Links"],0));(Ext.cmd.derive("inventory.permintaan.List",com.Grid,{controller:"permintaan-list",viewModel:{stores:{store:{type:"permintaan-detil-store"}}},cls:"x-br-top",border:false,reference:"",columns:[{xtype:"templatecolumn",text:"Nama Barang",flex:3,sortable:false,tpl:"<div>{REFERENSI.BARANG.NAMA}</div>"},{xtype:"numbercolumn",text:"Jumlah",dataIndex:"JUMLAH",flex:1,align:"right"},{xtype:"widgetcolumn",align:"center",text:"#",width:70,onWidgetAttach:function(m,n,l){n.setHidden(Ext.isNumeric(l.get("ID")))},widget:{xtype:"button",action:0,iconCls:"x-fa fa-minus-circle",ui:"soft-red",handler:"onBatal"}}],dockedItems:[{xtype:"pagingtoolbar",bind:{store:"{store}"},dock:"bottom",items:["->",{xtype:"button",ui:"soft-red",iconCls:"x-fa fa-save",text:"Reset",handler:"OnResetPermintaan"},{xtype:"button",ui:"soft-green",iconCls:"x-fa fa-save",text:"Cetak & Final",reference:"btnOnFinalPermintaan",disabled:false,handler:"FinalPermintaan"}]}],getData:function(){var n=this,m=n.getViewModel().get("store"),l=[];m.each(function(e){l.push(e.data)});return l},addRow:function(l){var n=this,m=n.getViewModel().get("store");m.add(l)},removeDataStore:function(){this.getViewModel().get("store").removeAll()},removeAnotherModels:function(){var l=this.getViewModel().get("store"),m=[];l.each(function(e){if(Ext.getClassName(e)!="data.model.PermintaanDetil"){m.push(e)}});var n=new Ext.util.DelayedTask(function(){l.remove(m)});n.delay(100)},setDetilPermintaan:function(m){var n=this,o=n.down("[reference=btnOnFinalPermintaan]"),p=n.getViewModel().get("store");if(m){p.removeAll();p.queryParams=m;p.load();o.setDisabled(true)}},setAktif:function(l){var m=this,n=m.down("[reference=btnOnFinalPermintaan]");if(l){n.setDisabled(false)}}},0,["permintaan-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","permintaan-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"permintaan-list":true},["widget.permintaan-list"],0,[inventory.permintaan,"List"],0));(Ext.cmd.derive("inventory.permintaan.ListController",Ext.app.ViewController,{onBatal:function(n){var l=this,m=l.getViewModel();view=l.getView();rec=n.getWidgetRecord();m.get("store").remove(rec)},FinalPermintaan:function(){this.getView().fireEvent("finalpermintaan")},OnResetPermintaan:function(){this.getView().fireEvent("resetpermintaan")}},0,0,0,0,["controller.permintaan-list"],0,[inventory.permintaan,"ListController"],0));(Ext.cmd.derive("inventory.permintaan.Widget",com.Form,{model:"data.model.Permintaan",layout:{type:"vbox",align:"stretch"},border:false,initComponent:function(){var f=this;f.items=[{layout:{type:"hbox",align:"stretch"},border:false,items:[{title:"Asal",flex:1,defaults:{margin:"5 5 5 5"},layout:{type:"vbox",align:"stretch"},items:[{layout:{type:"hbox",align:"stretch"},border:false,items:[{name:"TANGGAL",reference:"tanggal",xtype:"datefield",emptyText:"[Pilih Tanggal Order]",format:"d/m/Y",flex:1,margin:"0 5 0 0",hideTrigger:true},{name:"WAKTU",reference:"waktu",xtype:"timefield",emptyText:"[Jam:Mnt:Dtk]",format:"H:i:s",hideTrigger:true,flex:1}]},{xtype:"combobox",name:"ASAL",allowBlank:false,enterFocus:true,reference:"ruanganasal",enforceMaxLength:true,forceSelection:true,validateOnBlur:true,flex:1,displayField:"DESKRIPSI",valueField:"ID",queryMode:"local",typeAhead:true,emptyText:"[Ruangan ASAL]",store:{model:"data.model.Ruangan"},listeners:{specialkey:"onFocusEnter"}}]},{xtype:"ruangan-selection",title:"Tujuan",flex:1,notJenisKunjungan:[-1],reference:"ruangantujuan",name:"TUJUAN",hideTrigger:true,listeners:{selected:"onSelectTujuanRuangan"}}]}];com.Form.prototype.initComponent.apply(this,arguments)},onLoadRecord:function(o,u){try{var q=o.down("[name=ASAL]"),p=o.down("[reference=waktu]"),s=o.down("ruangan-selection");q.getStore().loadData(o.getPenggunaRuangan());p.setValue(o.getSysdate());s.loadRecord(null)}catch(t){}},onBeforeGetRecord:function(l,g){tgl=l.down("[reference=tanggal]").getValue(),wkt=l.down("[reference=waktu]").getValue();tgl.setHours(wkt.getHours());tgl.setMinutes(wkt.getMinutes());tgl.setSeconds(wkt.getSeconds());g.TANGGAL=tgl}},0,["permintaan-widget"],["component","box","container","panel","form","com-form","permintaan-widget"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"permintaan-widget":true},["widget.permintaan-widget"],0,[inventory.permintaan,"Widget"],0));(Ext.cmd.derive("inventory.permintaan.WidgetController",Ext.app.ViewController,{onSelectRuaganTujuan:function(n,l){console.log("select onSelectRuaganTujuan");var m=this;view=m.getView(),refs=m.getReferences();console.log(n);m.getViewModel().set("setKATEGORI_BARANG",n);m.setDisabledForm("rec")}},0,0,0,0,["controller.permintaan-widget"],0,[inventory.permintaan,"WidgetController"],0));(Ext.cmd.derive("inventory.permintaan.Workspace",com.Form,{controller:"permintaan-workspace",layout:"border",border:false,initComponent:function(){var f=this;f.items=[{region:"center",xtype:"form",flex:1,layout:"border",bodyPadding:2,items:[{region:"north",items:[{xtype:"permintaan-widget",reference:"permintaanwidget"},{xtype:"permintaan-form",reference:"permintaanform",listeners:{addbarangpermintaan:"onAddBarangPermintaan",addbarangpaketpermintaan:"onAddBarangPaketPermintaan"}}]},{region:"center",xtype:"permintaan-list",reference:"permintaanlist",flex:1,listeners:{finalpermintaan:"onFinalPermintaan",resetpermintaan:"onReset"}}]},{xtype:"permintaan-history-workspace",region:"east",title:"History Permintaan Barang",reference:"permintaanhistorylist",collapsible:true,collapsed:true,floatable:true,split:true,flex:1,header:{iconCls:"x-fa fa-list",padding:"10 10 10 5"},listeners:{selecthistorypermintaanlist:"onSelectHistoryPermintaan"}}];f.callParent(arguments)},onLoadRecord:function(n){var q=this,s=q.down("permintaan-form"),p=q.down("permintaan-widget"),o=q.down("permintaan-history-workspace");o.onLoadRecord({});s.createRecord({});p.createRecord({TANGGAL:q.getSysdate()});p.focus("ASAL")},setRuangan:function(m){var n=this,l=n.down("penerimaan-pengiriman-list");l.onLoadRecord({TUJUAN:m})}},0,["permintaan-workspace"],["component","box","container","panel","form","com-form","permintaan-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"permintaan-workspace":true},["widget.permintaan-workspace"],0,[inventory.permintaan,"Workspace"],0));(Ext.cmd.derive("inventory.permintaan.WorkspaceController",Ext.app.ViewController,{recordSelection:undefined,onFocusEnter:function(l,g){this.getView().fireEvent("specialkey",l,g)},onSelectHistoryPermintaan:function(m,n){var l=this;if(n){l.getReferences().permintaanlist.setDetilPermintaan({PERMINTAAN:n.get("NOMOR")})}},onSelectRuangan:function(o,q){var n=this,p=n.getReferences();n.recordSelection=q;if(q){var s={ASAL:q.get("ID"),STATUS:1};p.penerimaanlist.onLoadRecord(s)}else{var s=0;p.penerimaanlist.onLoadRecord(s)}n.getView().setRuangan(s)},onSelectTujuanRuangan:function(o,q){var n=this,p=n.getReferences();if(o){var s=o.get("ID");p.permintaanform.getViewModel().set("setRUANGAN",s);p.permintaanform.setDisabledForm("rec");p.permintaanlist.setAktif({})}},onAddBarangPermintaan:function(s){var o=this,q=o.getView(),p=o.getReferences(),n=p.permintaanform.getRecord();if(n){p.permintaanlist.addRow(n);p.permintaanform.createRecord({});p.permintaanform.focus("BARANG")}},onAddBarangPaketPermintaan:function(s){var o=this,q=o.getView(),p=o.getReferences(),n=p.permintaanform.getData();console.log(n);if(n){p.permintaanlist.addRow(n);p.permintaanform.createRecord({});p.permintaanform.focus("PAKET")}},onFinalPermintaan:function(q){var o=this,s=o.getReferences(),n=s.permintaanwidget.getRecord(),p=s.permintaanlist.getData();n.set("TUJUAN",n.get("SUBUNIT"));if(n&&p.length>0){n.set("PERMINTAAN_DETIL",p);s.permintaanwidget.save(q,{success:"Permintaan anda telah terkirim ke tujuan"},function(e,g,f){if(f){o.getView().fireEvent("refreshitems");o.onReset()}})}},onReset:function(){var l=this,g=l.getReferences();g.permintaanform.reset();g.permintaanwidget.reset();g.permintaanhistorylist.onLoadRecord({});g.permintaanwidget.createRecord({TANGGAL:l.getView().getSysdate()});g.permintaanwidget.focus("ASAL");g.permintaanform.focus("BARANG");g.permintaanlist.removeDataStore()},onTerimaPermintaan:function(){var l=this,n=l.getReferences(),m=n.penerimaanlist;m.onLoadRecord({STATUS:1})}},0,0,0,0,["controller.permintaan-workspace"],0,[inventory.permintaan,"WorkspaceController"],0));(Ext.cmd.derive("inventory.permintaan.history.List",com.Grid,{controller:"permintaan-history-list",viewModel:{stores:{store:{type:"permintaan-store",queryParams:{ASAL:0},autoLoad:true}}},cls:"x-br-top",border:false,initComponent:function(){var f=this;f.columns=[{xtype:"rownumberer",text:"No",align:"left",width:60},{text:"Unit Tujuan",dataIndex:"TUJUAN",flex:1,renderer:"onRendererTujuan"},{xtype:"numbercolumn",text:"No. Transaksi",dataIndex:"NOMOR",flex:1,align:"right"},{xtype:"datecolumn",text:"Tanggal Permintaan",dataIndex:"TANGGAL",flex:1,format:"d-m-Y H:i:s",align:"center"},{text:"Status",dataIndex:"STATUS",renderer:"onRenderStatusPermintaan",flex:1},{xtype:"widgetcolumn",align:"center",text:"#",width:70,widget:{xtype:"fieldcontainer",flex:1,defaults:{padding:2},items:[{xtype:"button",action:0,iconCls:"x-fa fa-print",text:"Cetak",ui:"soft-blue",handler:"onClickCetak"}]}},{flex:1,xtype:"widgetcolumn",align:"center",widget:{xtype:"fieldcontainer",defaults:{padding:2,margin:"0 2 1 0"},items:[{xtype:"button",action:0,text:"Dibatalkan",ui:"soft-blue",width:75,hidden:true},{xtype:"button",action:1,text:"Proses",ui:"soft-green",width:75,hidden:true},{xtype:"button",text:"Batalkan",action:2,ui:"soft-red",width:75,handler:"onBatalPermintaan",hidden:true}]},onWidgetAttach:function(q,e,u){var s=u.get("STATUS"),p=e.down("[action=1]"),t=e.down("[action=2]");batalkan=e.down("[action=0]");t.setHidden(s!=1);p.setHidden(s!=2);batalkan.setHidden(s!=0)}}],f.dockedItems=[{xtype:"pagingtoolbar",dock:"bottom",bind:{store:"{store}"},displayInfo:false}];com.Grid.prototype.initComponent.apply(this,arguments)},onLoadRecord:function(m){var n=this,o=n.getViewModel(),p=o.get("store");if(p){p.removeAll();p.queryParams=p.queryParams||{};if(m){p.queryParams=m}p.load()}}},0,["permintaan-history-list"],["component","box","container","panel","tablepanel","gridpanel","grid","com-grid","permintaan-history-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"com-grid":true,"permintaan-history-list":true},["widget.permintaan-history-list"],0,[inventory.permintaan.history,"List"],0));(Ext.cmd.derive("inventory.permintaan.history.ListController",Ext.app.ViewController,{onRendererTujuan:function(o,p,m){var n=m.get("REFERENSI");n=n?(n.TUJUAN?n.TUJUAN.DESKRIPSI:""):"";return n},onRendereAsal:function(o,p,m){var n=m.get("REFERENSI");n=n?(n.ASAL?n.ASAL.DESKRIPSI:""):"";return n},onRenderStatusPermintaan:function(f){if(f==1){return'<span style="color:red;"> Pending </span>'}else{if(f==2){return'<span style="color:green;"> Proses </span>'}else{return'<span style="color:black;"> Selesai </span>'}}return f},onRenderStatusBatal:function(f){if(f==1){return'<span style="color:red;"> Pending </span>'}else{if(f==2){return'<span style="color:green;"> Proses </span>'}else{return'<span style="color:black;"> Selesai </span>'}}return f},onBatalPermintaan:function(m){var n=this,o=n.getStore("store"),p=m.ownerCt.getWidgetRecord();p.showError=true;p.animateTarget=m;p.scope=n;Ext.Msg.show({title:"Pembatalan Permintaan",message:"Anda yakin ingin membatalkan Permintaan Barang Ini ?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:m,fn:function(e){if(e==="yes"){p.set("STATUS",0);p.save({callback:function(g,f,l){if(l){Ext.toast({html:"Pembatalan Permintaan Berhasil",headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"});o.load()}else{p.set("STATUS",1)}}})}else{p.set("STATUS",1)}}})},onClickCetak:function(o){var p=this,s=p.getView(),q=p.getViewModel();recs=o.ownerCt.getWidgetRecord();var n=recs.get("NOMOR");this.cetakBuktiPermintaan(n)},privates:{cetakBuktiPermintaan:function(v){console.log(v);var p=this,u=p.getView(),t="Word",q="docx",w=true,s="Cetak Bukti Permintaan";Ext.Msg.show({title:s,message:"Tekan tombol Yes/Ya utk cetak langsung<br/>Tekan tombol No/Tidak untuk Preview",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,defaultButton:"yes",animateTarget:p,fn:function(e){if(e!="yes"){t="Pdf";q="pdf";w=false}u.cetak({NAME:"inventory.CetakBuktiPermintaanBarang",TYPE:t,EXT:q,PARAMETER:{PNOMOR:v},REQUEST_FOR_PRINT:w,PRINT_NAME:"CetakRincian"},function(f){u.openDialog("Print Preview",true,0,0,{xtype:"panel",title:s},function(l,g){g.down("panel").update("<iframe style='width: 100%; height: 100%' src='"+f+"'></iframe>")})})}})}}},0,0,0,0,["controller.permintaan-history-list"],0,[inventory.permintaan.history,"ListController"],0));(Ext.cmd.derive("inventory.permintaan.history.Workspace",com.Form,{controller:"permintaan-history-workspace",layout:"border",border:false,initComponent:function(){var f=this;f.items=[{region:"north",xtype:"form",layout:{type:"hbox",align:"stretch"},items:[{xtype:"combobox",name:"RUANGANAPOTIK",allowBlank:false,enterFocus:true,reference:"ruanganapotik",enforceMaxLength:true,forceSelection:true,validateOnBlur:true,flex:1,displayField:"DESKRIPSI",valueField:"ID",queryMode:"local",editable:false,emptyText:"[ Ruangan / Depo]",store:{model:"data.model.Ruangan"},listeners:{select:"onSelectHistoryRuanganPermintaan"}}]},{region:"center",xtype:"permintaan-history-list",reference:"historypermintaanlist",border:true,flex:1,listeners:{select:"onSelectListHistory"}}];f.callParent(arguments)},onLoadRecord:function(l){var m=this,n=m.down("[name=RUANGANAPOTIK]");n.getStore().loadData(m.getPenggunaRuangan())}},0,["permintaan-history-workspace"],["component","box","container","panel","form","com-form","permintaan-history-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"permintaan-history-workspace":true},["widget.permintaan-history-workspace"],0,[inventory.permintaan.history,"Workspace"],0));(Ext.cmd.derive("inventory.permintaan.history.WorkspaceController",Ext.app.ViewController,{recordSelection:undefined,onSelectListHistory:function(l,g){this.getView().fireEvent("selecthistorypermintaanlist",l,g)},onSelectHistoryRuanganPermintaan:function(p,s){console.log("select ruangan");var n=this,q=n.getReferences();n.recordSelection=s;if(s){var o={ASAL:s.get("ID")};q.historypermintaanlist.onLoadRecord(o)}else{var o=0;q.historypermintaanlist.onLoadRecord(o)}}},0,0,0,0,["controller.permintaan-history-workspace"],0,[inventory.permintaan.history,"WorkspaceController"],0));(Ext.cmd.derive("inventory.permintaan.terima.Workspace",com.Form,{controller:"permintaan-terima-workspace",layout:"border",border:true,initComponent:function(){var f=this;f.items=[{region:"west",title:"List",layout:"border",flex:1,border:true,items:[{region:"north",layout:"hbox",defaults:{margin:"2 2 2 2"},items:[{xtype:"combobox",name:"RUANGANAPOTIK",allowBlank:false,enterFocus:true,reference:"ruanganapotik",enforceMaxLength:true,forceSelection:true,validateOnBlur:true,displayField:"DESKRIPSI",valueField:"ID",queryMode:"local",editable:false,flex:1,emptyText:"[ Pilih Ruangan Penerima ]",store:{model:"data.model.Ruangan"},listeners:{select:"onSelectRuanganPenerima"}}]},{region:"center",xtype:"penerimaan-pengiriman-list",reference:"penerimaanlist",border:true,flex:1,listeners:{success:"onTerimaPengiriman",select:"onSelectTerimaPengiriman"}}]},{region:"center",flex:1,border:true,title:"Detil",xtype:"penerimaan-pengiriman-detil",reference:"penerimaanlistdetil"}];f.callParent(arguments)},onLoadRecord:function(g){var l=this;ruanganDepo=l.down("[name=RUANGANAPOTIK]");ruanganDepo.getStore().loadData(l.getPenggunaRuangan())}},0,["permintaan-terima-workspace"],["component","box","container","panel","form","com-form","permintaan-terima-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"permintaan-terima-workspace":true},["widget.permintaan-terima-workspace"],0,[inventory.permintaan.terima,"Workspace"],0));(Ext.cmd.derive("inventory.permintaan.terima.WorkspaceController",Ext.app.ViewController,{recordSelection:undefined,onFocusEnter:function(l,g){this.getView().fireEvent("specialkey",l,g)},onSelectRuanganPenerima:function(p,s){var n=this,q=n.getReferences();n.recordSelection=s;if(s){var o={TUJUAN:s.get("ID"),STATUS:1};q.penerimaanlist.onLoadRecord(o)}else{var o=0;q.penerimaanlist.onLoadRecord(o)}},onSelectTerimaPengiriman:function(m,n){console.log("select");var l=this;if(n){l.getReferences().penerimaanlistdetil.setDetilPermintaan({PENGIRIMAN:n.get("NOMOR")})}},onTerimaPengiriman:function(n){var p=this,s=p.getReferences(),o=s.penerimaanlistdetil;terima=s.penerimaanlist;var q={TUJUAN:n,STATUS:1};terima.onLoadRecord(q);o.removeDataStore({})}},0,0,0,0,["controller.permintaan-terima-workspace"],0,[inventory.permintaan.terima,"WorkspaceController"],0));(Ext.cmd.derive("inventory.stokbarangruangan.Workspace",com.Form,{controller:"stok-barang-ruangan-workspace",layout:"border",initComponent:function(){var f=this;f.items=[{xtype:"barang-ruangan-list",region:"center",reference:"barangruanganlist",header:{items:[{xtype:"combobox",name:"RUANGAN",allowBlank:false,enterFocus:true,reference:"ruanganasal",enforceMaxLength:true,forceSelection:true,validateOnBlur:true,flex:1,displayField:"DESKRIPSI",valueField:"ID",queryMode:"local",emptyText:"[Ruangan]",editable:false,store:{model:"data.model.Ruangan"},listeners:{scope:f.getController(),select:"onSelectRuangan"}}]}}];com.Form.prototype.initComponent.apply(this,arguments)},onLoadRecord:function(t){try{var p=this,u=p.down("[name=RUANGAN]"),q=p.down("barang-ruangan-list");store=q.getViewModel().get("store");if(store){var s=p.getPenggunaRuangan();u.getStore().loadData(s);if(s.length>0){u.select(Ext.create("data.model.Ruangan",s[0]));p.focus("RUANGAN");store.queryParams={RUANGAN:s[0].ID,STATUS:1};store.removeAll();store.load()}}}catch(e){}}},0,["stok-barang-ruangan-workspace"],["component","box","container","panel","form","com-form","stok-barang-ruangan-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"stok-barang-ruangan-workspace":true},["widget.stok-barang-ruangan-workspace"],0,[inventory.stokbarangruangan,"Workspace"],0));(Ext.cmd.derive("inventory.stokbarangruangan.WorkspaceController",Ext.app.ViewController,{onSelectRuangan:function(o,m){var n=this,p=n.lookupReference("barangruanganlist");if(m){p.load({RUANGAN:m.get("ID")})}}},0,0,0,0,["controller.stok-barang-ruangan-workspace"],0,[inventory.stokbarangruangan,"WorkspaceController"],0));(Ext.cmd.derive("inventory.stokopname.Form",com.Form,{controller:"stok-opname-form",viewModel:{data:{minDate:null}},layout:"fit",border:false,initComponent:function(){var f=this;f.items=[{layout:"hbox",defaults:{margin:"2 2 2 2",border:false},border:false,flex:1,items:[{xtype:"hiddenfield",name:"RUANGAN",reference:"ruanganstokopname"},{name:"TANGGAL",reference:"tanggal",flex:1,xtype:"datefield",emptyText:"[Pilih Periode Stok Opname]",format:"Y-m-d",bind:{minValue:"{minDate}"},maxValue:f.getSysdate(),allowBlank:false},{xtype:"button",ui:"soft-blue",text:"Create",reference:"btnprosesSO",iconCls:"x-fa fa-sign-in",handler:"onProsesSO",disabled:true}]}];com.Form.prototype.initComponent.apply(this,arguments)},onLoadRecord:function(o){var p=this,s=p.down("[reference=btnprosesSO]"),n=p.down("[reference=ruanganstokopname]"),q=p.down("[reference=waktu]");if(o==0){s.setDisabled(true);n.setValue(0)}else{s.setDisabled(false);n.setValue(o)}},setMinDate:function(f){this.getViewModel().set("minDate",f)}},0,["stok-opname-form"],["component","box","container","panel","form","com-form","stok-opname-form"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"stok-opname-form":true},["widget.stok-opname-form"],0,[inventory.stokopname,"Form"],0));(Ext.cmd.derive("inventory.stokopname.FormController",Ext.app.ViewController,{onProsesSO:function(l){var g=this;view=g.getView(),form=view.getForm(),data=form.getValues();view.fireEvent("onprosesstokopname",data)}},0,0,0,0,["controller.stok-opname-form"],0,[inventory.stokopname,"FormController"],0));(Ext.cmd.derive("inventory.stokopname.List",Ext.grid.Panel,{controller:"stok-opname-list",viewModel:{stores:{store:{type:"stok-opname-detil-store",autoSync:true},storeCekNull:{type:"stok-opname-detil-store",queryParams:{MANUAL:null,start:0,limit:1}}},data:{cellEditing:2,stokOpname:0,status:false}},bind:{store:"{store}"},viewConfig:{stripeRows:true},layout:"fit",initComponent:function(){var f=this;f.cellEditing=new Ext.grid.plugin.CellEditing({clicksToEdit:1,listeners:{beforeedit:"BeforeEdit"}});f.plugins=[f.cellEditing];f.columns=[{xtype:"rownumberer",text:"No",align:"left",width:50},{xtype:"templatecolumn",text:"Kategori",flex:1,tpl:"<div>{REFERENSI.BARANG_RUANGAN.REFERENSI.BARANG.REFERENSI.KATEGORI.NAMA}</div>"},{text:"Barang",dataIndex:"ID",flex:3,renderer:"onBarangRender"},{text:"Stok Opname",dataIndex:"MANUAL",renderer:"onStokManualRender",width:75,editor:{xtype:"numberfield",hideTrigger:true,bind:{readOnly:"{status}"},reference:"manual",name:"MANUAL"}}],f.dockedItems=[{xtype:"pagingtoolbar",bind:{store:"{store}"},dock:"bottom",items:[{xtype:"combo",name:"KATEGORI",flex:1,queryMode:"local",reference:"kategori",emptyText:"[ Filter Berdasarkan Kategori Barang ]",bind:{store:"{kategoristore}"},displayField:"NAMA",valueField:"ID",listeners:{select:"onSelectKategoriBarang"}},{xtype:"search-field",hidden:f.hideHeaders,cls:"x-text-border",autoFocus:true,emptyText:"Cari Nama Obat",flex:1,listeners:{search:"onsearch",clear:"onClear"}}]}];Ext.grid.Panel.prototype.initComponent.apply(this,arguments)},onLoadRecord:function(o){var q=this,n=q.getViewModel(),s=n.get("store"),p=n.get("storeCekNull");q.getViewModel().set("stokOpname",o.get("ID"));if(s){s.queryParams.STOK_OPNAME=o.get("ID");p.queryParams.STOK_OPNAME=o.get("ID");s.load()}},getData:function(){var m=this,n=m.getViewModel().get("store"),l=[];n.each(function(e){l.push(e.data)});return l},isNullManualEntry:function(l){var m=this,n=m.getViewModel().get("storeCekNull");n.load(function(e,f,g){if(Ext.isArray(e)){l(e.length>0)}})}},0,["stok-opname-list"],["component","box","container","panel","tablepanel","gridpanel","grid","stok-opname-list"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"stok-opname-list":true},["widget.stok-opname-list"],0,[inventory.stokopname,"List"],0));(Ext.cmd.derive("inventory.stokopname.ListController",Ext.app.ViewController,{currentRecord:undefined,stokM:undefined,initViewModel:function(){var l=this,n=l.getView(),m=l.getStore("store");m.doAfterLoad=function(e){var f=0;e.each(function(g){})}},BeforeEdit:function(o,e,p){var n=this;n.currentRecord=e.record},onClear:function(){var m=this,l=m.getViewModel(),n=l.get("store");delete n.queryParams.QUERY;n.removeAll();n.queryParams={STOK_OPNAME:l.get("stokOpname")};n.load()},onsearch:function(q,f){var e=this,s=e.getViewModel(),p=s.get("store");p.queryParams={QUERY:f,STOK_OPNAME:s.get("stokOpname")};p.removeAll();p.load()},onSelectKategoriBarang:function(p,q){var o=this,n=o.getViewModel(),s=n.get("store");o.recordSelection=q;if(q){s.queryParams={KATEGORI:q.get("ID"),STOK_OPNAME:n.get("stokOpname")};s.removeAll();s.load()}else{s.queryParams={STOK_OPNAME:n.get("stokOpname")};s.removeAll();s.load()}},onBarangRender:function(y,w,x,v,e,g){var u=x.get("REFERENSI"),f=u?(u.BARANG_RUANGAN?u.BARANG_RUANGAN.REFERENSI.BARANG.NAMA:""):"";return f},onStokManualRender:function(m,o,n){var p=n.get("MANUAL")==null?"red":"green";o.tdStyle="color: "+p;return m}},0,0,0,0,["controller.stok-opname-list"],0,[inventory.stokopname,"ListController"],0));(Ext.cmd.derive("inventory.stokopname.Periode",Ext.grid.Panel,{controller:"stok-opname-periode",viewModel:{stores:{store:{type:"stok-opname-store"}}},bind:{store:"{store}"},hideHeaders:true,waitRefresh:true,layout:"fit",initComponent:function(){var f=this;f.columns=[{xtype:"templatecolumn",flex:2,tpl:new Ext.XTemplate('<div style="font-weight: bold; font-size: 12px; white-space:normal !important;">{[values.ID]} . [ Periode SO : {[this.tanggalFormat(values.TANGGAL)]} ] </div>','<div style="font-size: 10px; white-space:normal !important;">{[this.tanggalJamFormat(values.TANGGAL_DIBUAT)]}</div>',{tanggalFormat:function(l){var e=Ext.isDate(l)?l:Ext.Date.parse(l,"Y-m-d");return Ext.Date.format(e,"d-m-Y")},tanggalJamFormat:function(l){var e=Ext.isDate(l)?l:Ext.Date.parse(l,"Y-m-d H:i:s");return Ext.Date.format(e,"d-m-Y H:i:s")}})},{xtype:"widgetcolumn",align:"center",text:"Aksi",widget:{xtype:"fieldcontainer",defaults:{padding:2,margin:"0 2 1 0"},items:[{xtype:"button",action:1,text:"Dibatalkan",ui:"soft-red",width:80,hidden:true},{xtype:"button",text:"Batalkan",action:2,ui:"soft-green",width:80,handler:"onBatalSo",hidden:true},{xtype:"button",text:"Final",action:3,ui:"soft-blue",width:80,hidden:true}]},onWidgetAttach:function(q,w,v){var s=v.get("STATUS"),e=w.down("[action=1]"),u=w.down("[action=2]"),t=w.down("[action=3]");u.setHidden(s!="Proses");e.setHidden(s!="Batal");t.setHidden(s!="Final")}}],f.dockedItems=[{xtype:"pagingtoolbar",bind:{store:"{store}"},dock:"bottom",displayInfo:true}];Ext.grid.Panel.prototype.initComponent.apply(this,arguments)},onLoadRecord:function(p,n){var q=this,o=q.getViewModel(),s=o.get("store");if(s){s.removeAll();s.queryParams=p;s.load({callback:function(f){var e=null;if(f){if(f.length>0){o.set("status",f[0].get("STATUS"));e=f[0]}if(Ext.isFunction(n)){}}}})}}},0,["stok-opname-periode"],["component","box","container","panel","tablepanel","gridpanel","grid","stok-opname-periode"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,"stok-opname-periode":true},["widget.stok-opname-periode"],0,[inventory.stokopname,"Periode"],0));(Ext.cmd.derive("inventory.stokopname.PeriodeController",Ext.app.ViewController,{onBatalSo:function(m){var n=this,o=n.getStore("store"),p=m.ownerCt.getWidgetRecord();p.showError=true;p.animateTarget=m;p.scope=n;Ext.Msg.show({title:"Pembatalan Order",message:"Anda yakin ingin membatalkan Stok Opname ?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,animateTarget:m,fn:function(e){if(e==="yes"){p.set("STATUS",1);p.save({callback:function(g,f,l){if(l){Ext.toast({html:"Pembatalan Stok Opname Berhasil",headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"});o.load()}else{p.set("STATUS",2)}}})}else{p.set("STATUS",2)}}})}},0,0,0,0,["controller.stok-opname-periode"],0,[inventory.stokopname,"PeriodeController"],0));(Ext.cmd.derive("inventory.stokopname.Workspace",com.Form,{controller:"stok-opname-workspace",viewModel:{stores:{kategoristore:{type:"kategori-store",autoLoad:true,queryParams:{JENIS:3,STATUS:1}}}},layout:"border",flex:1,border:true,initComponent:function(){var f=this;f.items=[{region:"west",title:"Priode Stok Opname",layout:"border",flex:1,items:[{region:"north",layout:"hbox",defaults:{margin:"2 2 2 2"},items:[{xtype:"combobox",name:"RUANGAN",allowBlank:false,enterFocus:true,reference:"ruanganso",enforceMaxLength:true,forceSelection:true,validateOnBlur:true,flex:1,displayField:"DESKRIPSI",valueField:"ID",queryMode:"local",typeAhead:true,emptyText:"[ Ruangan ]",store:{model:"data.model.Ruangan"},listeners:{specialkey:"onFocusEnter",select:"onSelectRuangan"}}]},{region:"center",xtype:"stok-opname-periode",reference:"listperiode",border:true,flex:1,listeners:{select:"onSelectStokOpname"}},{region:"south",xtype:"stok-opname-form",reference:"formperiodestok",border:true,listeners:{onprosesstokopname:"onProsesStokOpname"}}]},{region:"center",flex:3,title:"List",xtype:"stok-opname-list",reference:"liststokopname"}],f.dockedItems=[{xtype:"toolbar",dock:"bottom",items:[{xtype:"component",flex:2},{xtype:"button",ui:"soft-green",iconCls:"x-fa fa-print",text:"Cetak Item Stok Opname",reference:"btnCetakItemSo",handler:"onCetakItemSo",disabled:true},{xtype:"button",ui:"soft-red",iconCls:"x-fa fa-check",text:"Final Stok Opname",reference:"btnFinalSo",handler:"onFinalSo",disabled:true}]}];com.Form.prototype.initComponent.apply(this,arguments)},onLoadRecord:function(n){var o=this,s=o.down("stok-opname-periode"),q=o.down("[reference=ruanganso]"),p=o.down("stok-opname-form");q.getStore().loadData(o.getPenggunaRuangan())},setMinDate:function(m){var n=this,p=n.down("stok-opname-periode"),o=n.down("stok-opname-form");p.onLoadRecord({RUANGAN:m},function(e){if(e){o.setMinDate(e.get("TANGGAL"))}})},getFormData:function(){var f=this.down("[reference=liststokopname]");a=f.getData();return a}},0,["stok-opname-workspace"],["component","box","container","panel","form","com-form","stok-opname-workspace"],{component:true,box:true,container:true,panel:true,form:true,"com-form":true,"stok-opname-workspace":true},["widget.stok-opname-workspace"],0,[inventory.stokopname,"Workspace"],0));(Ext.cmd.derive("inventory.stokopname.WorkspaceController",Ext.app.ViewController,{recordSelection:undefined,onRefresh:function(l){var g=this;g.getView().loadStore({})},onSelectRuangan:function(o,q){var n=this,p=n.getReferences();n.recordSelection=q;if(q){var s=q.get("ID");p.formperiodestok.onLoadRecord(s)}else{var s=0;p.formperiodestok.onLoadRecord(s)}n.getView().setMinDate(s)},onSelectStokOpname:function(n,p){var m=this,o=m.getReferences();m.recordSelection=p;if(p){if(p.get("STATUS")=="Proses"){o.btnFinalSo.setDisabled(false);o.liststokopname.getViewModel().set("status",false)}else{o.btnFinalSo.setDisabled(true);o.liststokopname.getViewModel().set("status",true)}o.btnCetakItemSo.setDisabled(false)}o.liststokopname.onLoadRecord(p)},onProsesStokOpname:function(u){var y=this,w=y.getView(),v=u.TANGGAL,q=u.RUANGAN,s=y.getReferences().listperiode,t=w.getPenggunaRuangan();var x=[{TANGGAL:v,RUANGAN:q,TANGGAL_DIBUAT:y.getView().getSysdate()}];u=x[0];r=Ext.create("data.model.StokOpname",{});r.set(u);r.showError=true;r.save({callback:function(e,g,f){if(f){w.setMinDate(q);var l=s.getStore("store");l.load()}}})},onFinalSo:function(s){var p=this,u=p.getView(),t=p.getReferences().listperiode,q=p.getReferences().liststokopname,w=t.getViewModel().get("store"),v=q.getViewModel().get("store");Ext.Msg.show({title:"Konfirmasi",message:"Apakah anda Yakin ingin Menyelesaikan Stok Opname Periode Tersebut ..?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:function(e){if(e=="yes"){q.isNullManualEntry(function(f){if(f){u.notifyMessage("Masih Ada Item Barang Yang Belum Di Input Stok")}else{if(p.recordSelection){p.recordSelection.set("STATUS",3);p.recordSelection.save({callback:function(m,l,g){if(g){Ext.toast({html:"Stok Opname Berhasil Di Finalkan",headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"});v.removeAll();w.load()}}})}}})}}})},onCetakItemSo:function(m){var l=this,n=l.recordSelection;if(n){l.onCetakStokOpname(n)}},privates:{onCetakStokOpname:function(v){var p=this,u=p.getView(),t="Word",q="docx",w=true,s="Cetak Item Stok Opname";Ext.Msg.show({title:s,message:"Tekan tombol Yes/Ya utk cetak langsung<br/>Tekan tombol No/Tidak untuk Preview",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,defaultButton:"yes",animateTarget:p,fn:function(e){if(e!="yes"){t="Pdf";q="pdf";w=false}u.cetak({NAME:"inventory.CetakItemStokOpname",TYPE:t,EXT:q,PARAMETER:{PSTOKOPNAME:v.get("ID"),CETAK_HEADER:1},REQUEST_FOR_PRINT:w,PRINT_NAME:"CetakItemStokOpname"},function(f){u.openDialog("Print Preview",true,0,0,{xtype:"panel",title:s},function(l,g){g.down("panel").update("<iframe style='width: 100%; height: 100%' src='"+f+"'></iframe>")})})}})}}},0,0,0,0,["controller.stok-opname-workspace"],0,[inventory.stokopname,"WorkspaceController"],0));(Ext.cmd.derive("SIMpel.Application",Ext.app.Application,{name:"SIMpel",defaultToken:"welcome",login:false,xpriv:undefined,stores:[],launch:function(){var n=Ext.get("splashScreen"),p=Ext.get("splashScreenProgress"),m=Ext.get("splashScreenLoading"),o=Ext.get("splashScreenProgressInner");m.update("Membuat Tampilan...");p.setStyle("height","13px");o.setStyle("width","300px");(new Ext.util.DelayedTask(function(){Ext.destroy(n)})).delay(1000)},onAppUpdate:function(){Ext.Msg.confirm("Update Aplikasi","Anda ingin mengupdate aplikasi?",function(f){if(f==="yes"){window.location.reload()}})}},0,0,0,0,0,0,[SIMpel,"Application"],0));(Ext.cmd.derive("SIMpel.view.welcome.Container",Ext.container.Container,{viewModel:{data:{showFormLogin:false,instansi:undefined,version:"",appName:"SIMRSGOS",opensource:""},stores:{store:{type:"aplikasi-instansi-store",storeId:"instansi",autoLoad:true}}},layout:{type:"vbox",align:"stretch"},cls:"welcome",defaultFocus:"login",initComponent:function(){var l=this,m=l.getViewModel(),n=m.get("store");n.doAfterLoad=function(f,p,g,e){if(g){if(Ext.isArray(p)){if(p.length>0){l.getViewModel().set("instansi",p[0].get("PPK"));webservice.app=webservice.app||{};webservice.app.ppk=webservice.app.ppk||p[0].data}}}else{l.handleException(e)}m.set("version",window.version);m.set("appName",window.appTypeDescriptions[window.appType]);m.set("opensource",window.appType==0?"Generic Open Source":"")};Ext.container.Container.prototype.initComponent.call(this)},items:[{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"container",layout:"hbox",padding:5,items:[{xtype:"image",bind:{src:"classic/resources/images/SIMpel.png"},alt:"no-image",height:32,width:32},{xtype:"component",html:"<div style='font-size: 17px; font-weight: bold; margin-top: 11px;'>SIMpel</div>"}]},{xtype:"component",flex:1},{xtype:"container",layout:"hbox",padding:5,items:[{xtype:"image",bind:{src:"classic/resources/images/kemkes.png"},alt:"no-image",height:32,width:32,margin:"0 2 0 0"},{xtype:"component",html:"<div style='font-size: 17px; font-weight: bold; margin-bottom: 2px;'>K E M K E S</div><div style='font-size: 8px; line-height: 0px'>Kementrian Kesehatan</div><div style='font-size: 8px;'>Republik Indonesia</div>"}]}]},{xtype:"container",flex:1,layout:{type:"vbox",align:"middle",pack:"center"},reference:"containerauth",items:[{xtype:"container",width:700,height:350,style:"background: rgba(39,75,104,0.5); border-radius: 30px; position: absolute",items:[{xtype:"container",style:"padding: 40px 30px; color: white; font-family: 'Nunito', sans-serif;",width:350,items:[{xtype:"image",bind:{src:"classic/resources/images/{instansi}.png"},alt:"no-image",height:150},{xtype:"component",bind:{data:{items:"{store.data.items}"}},tpl:new Ext.XTemplate("<tpl for='items'>","<div>","<h1 style='line-height: 21px'>{data.REFERENSI.PPK.NAMA}</h1>","<div><span class='x-fa fa-street-view'></span>&nbsp;{data.REFERENSI.PPK.ALAMAT}</div>","<div><span class='x-fa fa-phone'></span>&nbsp;{data.REFERENSI.PPK.TELEPON} / <span class='x-fa fa-fax'></span>&nbsp; {data.REFERENSI.PPK.FAX}</div>","<div><span class='x-fa fa-envelope'></span>&nbsp;{data.EMAIL}</div>","<div><span class='x-fa fa-globe'></span>&nbsp;{data.WEBSITE}</div>","</div>","</tpl>")}]},{xtype:"aplikasi-login-form",hidden:true,width:350,height:380,style:"Background: white; position: absolute; box-shadow: -20px 0 15px rgba(0,0,0,.2); left: 350px; box-sizing: border-box; border-radius: 15px; top: -15px",bind:{hidden:"{!showFormLogin}"},listeners:{login:"onLogin"}}]}]},{xtype:"component",margin:"0 0 3 0",bind:{html:"<div style='text-align: center; color: #485d3f'><div style='font-size: 14px; font-weight: bold;'>Selamat Datang di {appName} {version}</div><span>Sistem Informasi Manajemen Rumah Sakit {opensource}</span><span>&nbsp; Versi {version}</span></div>"}}],focus:function(){var g=this.down("[reference=containerauth]"),l=this.down("aplikasi-login-form");if(navigator.vendor.indexOf("Google")<0){g.removeAll();g.add({bodyStyle:"background: transparent",html:"<div style='text-align: center; color: white; text-shadow: rgb(150, 150, 150) 0px 0px 4px;'><div style='font-size: 14px; font-weight: bold; color: #ef0f07;'>Web Browser ini tidak di support untuk penggunaan "+window.appTypeDescriptions[window.appType]+"</div><div>Silahkan menggunakan Web Browser Chrome.</div><div>Terima Kasih</div></div>"})}else{this.getViewModel().set("showFormLogin",true);l.reset();l.focus()}},hideFormLogin:function(){this.getViewModel().set("showFormLogin",false)},handleException:function(t){var w=this;if(t.hasException()){try{var s=t.getError(),x=s?s.response.responseText:t.getResponse().responseText,v=Ext.JSON.decode(x),y=v.detail?(Ext.isObject(v.detail)?Ext.JSON.encode(v.detail):v.detail):"Koneksi Gagal";if(!s){s={status:v.status,statusText:""}}if(y!="Koneksi Gagal"){e=Ext.create("Ext.window.MessageBox",{ui:"window-red",title:s.status+" - "+s.statusText});e.show({msg:y,buttons:Ext.MessageBox.OK,animateTarget:w.animateTarget,scope:w.scope,icon:Ext.Msg.ERROR})}}catch(u){var e=Ext.create("Ext.window.MessageBox",{ui:"window-red",title:"Error"});e.show({msg:"Koneksi Gagal",buttons:Ext.MessageBox.OK,animateTarget:w.animateTarget,scope:w.scope,icon:Ext.Msg.ERROR})}}}},0,["welcome"],["component","box","container","welcome"],{component:true,box:true,container:true,welcome:true},["widget.welcome"],0,[SIMpel.view.welcome,"Container"],0));(Ext.cmd.derive("SIMpel.view.main.MainController",Ext.app.ViewController,{routes:{":node":{action:"onNodeNav",before:"onBeforeNodeNav"}},listen:{controller:{"*":{changeroute:"changeRoute",unmatchedroute:"onUnmatchedRoute"}}},login:true,task:undefined,activeItem:undefined,init:function(){var p=this,m=Ext.util.LocalStorage.get("id"),n=["Generic Open Source",""],o=false;Ext.tip.QuickTipManager.init();Ext.Object.each(m._store,function(e,g,l){var f=Ext.JSON.decode(g);if(!o){if(f.name.indexOf("SIMpel")==0){window.version=f.version;window.appType=f.type;window.appTypeDescriptions=f.typeDescriptions;o=true}}});window.refreshPanelPencarian=true;Ext.getHead().dom.getElementsByTagName("title")[0].text="Sistem Informasi Manajemen Pelayanan Rumah Sakit "+n[window.appType]+" Versi "+window.version;p.task={interval:1000,run:function(){p.task.interval=60000;p.isAuthenticated()}};Ext.TaskManager.start(p.task)},onBeforeNodeNav:function(g,l){},onNodeNav:function(f){},changeRoute:function(l,g){this.redirectTo(g)},onUnmatchedRoute:function(f){if(f){this.onBadRoute()}},getExistingItem:function(g){var l=this.getView();return l.down("component[routeId="+g+"]")},getActiveItem:function(){var f=this.getView();return f.getLayout().getActiveItem()},setActiveItem:function(g){var l=this.getView();l.getLayout().setActiveItem(g)},isLogin:function(){return this.login},toWelcome:function(){var f=this.getExistingItem("welcome");this.activeItem=f;this.setActiveItem(f);this.changeRoute(this,"welcome");f.focus()},toMain:function(){var f=this.getExistingItem("main");f.load();this.activeItem=f;this.setActiveItem(f);this.changeRoute(this,"main")},onBadRoute:function(){var f=SIMpel.app.getApplication();this.changeRoute(this,f.getDefaultToken())},onLogout:function(){this.task.interval=1000;Ext.TaskManager.stop(this.task);this.executeAuthenticated({success:false})},onLogin:function(l){var g=this.getExistingItem("welcome");g.hideFormLogin();this.executeAuthenticated(l)},destroy:function(){Ext.app.ViewController.prototype.destroy.call(this);Ext.TaskManager.stop(this.task)},privates:{isAuthenticated:function(){var l=this,g=SIMpel.app.getApplication();Ext.Ajax.request({url:webservice.location+"authentication/isAuthenticate",useDefaultXhrHeader:false,withCredentials:true,success:function(e){var f=Ext.JSON.decode(e.responseText);l.executeAuthenticated(f)},failure:function(e){}})},executeAuthenticated:function(n){var m=this,l=SIMpel.app.getApplication();if(n.success){l.xpriv=n.data.XPRIV;m.initService(n);if(m.activeItem==undefined){m.toMain()}else{if(m.activeItem.routeId=="welcome"){m.toMain()}}if(m.activeItem.routeId=="main"){m.activeItem.refreshStatusTransaksiKasir()}m.login=true;l.login=true}else{if(m.activeItem==undefined){m.toWelcome()}else{if(m.activeItem.routeId=="main"){m.toWelcome()}}m.login=false;l.login=false;l.xpriv=undefined;window.refreshPanelPencarian=true}},initService:function(l){var g=this;webservice.app=webservice.app||{};if(webservice.app.pauseAutoRefresh==undefined){webservice.app.pauseAutoRefresh=false}webservice.app.usrid=l.data.ID;webservice.app.usrNm=l.data.NAME;webservice.app.usrLg=l.data.LGN;webservice.app.usrTp=l.data.JNS;webservice.app.penggunaRuangan=l.data.RUANGANS;webservice.app.privPencarian=l.data.XPRIVPENCARIAN;webservice.app.xuam=l.data.XUAM;webservice.app.ts=l.data.TIMESTAMP;webservice.app.pc=l.data.PC;webservice.app.usrNik=l.data.NIK;if(webservice.app.xpriv==undefined){webservice.app.xpriv=function(s,e){var t=l.data.XPRIV,u=Ext.Object.getValues(t),f=false;if(!e){return t.hasOwnProperty(s)}for(var q=0;q<u.length;q++){if(u[q].indexOf(s)==0){f=true;break}}return f}}webservice.app.trxksr=l.data.NO_TRX_KSR;webservice.app.sysdate=l.data.SYSDATE;if(webservice.app.xitr==undefined){webservice.app.xitr=function(f,p){var e=l.data.XITR,o=null;Ext.Array.each(e,function(m){Ext.Object.each(m,function(s,n){if(s==f&&n==p){o=m;return}});if(o){return}});return o}}if(webservice.app.requestPrint==undefined){webservice.app.location=window.location;webservice.app.requestPrint=function(p,q){var s=Ext.create("com.Form"),e=s.getPropertyConfig(26)=="TRUE";if(!e){if(p.REQUEST_FOR_PRINT){p.REQUEST_FOR_PRINT=false}}var f=Ext.create("data.model.RequestReport",p);f.save({callback:function(o,w,m){if(w.hasException()){var x=w.getError(),y=Ext.JSON.decode(x.response.responseText);Ext.MessageBox.show({title:"Kesalahan Request Print",msg:"<strong>"+x.status+" - "+x.statusText+"</strong><br/>"+y.detail,buttons:Ext.MessageBox.OK,scope:this,icon:"error"})}if(m){var y=Ext.JSON.decode(w.getResponse().responseText);if(p.REQUEST_FOR_PRINT){if(p.MULTI_PRINT){var n=window.open("printdoc:"+y.content);n.close()}else{window.open("printdoc:"+y.content,"_self")}}else{if(p.EXT!="pdf"&&p.EXT!="html"){window.open(y.url)}else{if(Ext.isFunction(q)){q(y.url)}else{window.open(y.url)}}}}delete f;delete s}})}}}}},0,0,0,0,["controller.main"],0,[SIMpel.view.main,"MainController"],0));(Ext.cmd.derive("SIMpel.view.main.MainModel",Ext.app.ViewModel,{data:{name:"SIMpel"}},0,0,0,0,["viewmodel.main"],0,[SIMpel.view.main,"MainModel"],0));(Ext.cmd.derive("SIMpel.view.modules.Main",Ext.container.Container,{controller:"main-module",cls:"main-modules",layout:{type:"vbox",align:"stretch"},items:[{xtype:"main-header",listeners:{menubarheaderclick:"onMenuBarHeaderClick",logout:"onLogout"}},{xtype:"container",flex:1,reference:"mainContent",layout:{type:"hbox",align:"stretch",animate:true,animatePolicy:{x:true,width:true}},items:[{xtype:"sidenav",reference:"sideNav"},{xtype:"workspace",reference:"mainworkspace",flex:1}]},{xtype:"main-footer",cls:"x-br-top"}],load:function(){var l=this,n=webservice.app.xpriv("12",true),m=webservice.app.trxksr?true:false;l.down("main-header").setHeaderConfig({openKasir:n&&!m,closeKasir:n&&m,privPencarian:webservice.app.privPencarian});l.down("sidenav").load();l.down("workspace").load();l.down("main-footer").autoRefresh()},refreshStatusTransaksiKasir:function(){var l=this,n=webservice.app.xpriv("12",true),m=webservice.app.trxksr?true:false;l.down("main-header").setHeaderConfig({openKasir:n&&!m,closeKasir:n&&m,privPencarian:webservice.app.privPencarian})}},0,["main-modules"],["component","box","container","main-modules"],{component:true,box:true,container:true,"main-modules":true},["widget.main-modules"],0,[SIMpel.view.modules,"Main"],0));(Ext.cmd.derive("SIMpel.view.modules.MainController",Ext.app.ViewController,{routes:{":node/:module":{action:"onNodeNav",before:"onBeforeNodeNav"}},onBeforeNodeNav:function(u,q,o){var t=this.getView().ownerCt.getController(),s=t.isLogin(),p=t.getExistingItem(u);if(s){if(!p||u=="welcome"){t.onBadRoute()}else{o.resume()}}else{t.toWelcome()}},onNodeNav:function(n,p){var q=this.getView().ownerCt.getController(),o=q.getActiveItem(),s=this.getView();workspace=s.down("workspace"),tbActive=workspace.getActiveTab(),lsMain=localStorage.getItem(n),modules={modules:[]},tab=workspace.down("component[routeId="+p+"]"),route=this.getRoutes(n,p);if(!tab){tab=tbActive}if(o.routeId!=n){q.setActiveItem(q.getExistingItem(n))}if(tab){workspace.setActiveTab(tab)}},getRoutes:function(){return Ext.Array.toArray(arguments).join("/")},onMenuBarHeaderClick:function(){var p=this.getReferences(),m=p.sideNav,n=p.mainContent,o=m.width==250?0:250;Ext.suspendLayouts();m.setStyle("position","absolute");m.setWidth(o);Ext.resumeLayouts();n.layout.animatePolicy=n.layout.animate=null;n.updateLayout()},onLogout:function(){var l=this.getReferences(),g=l.mainworkspace;while(g.items.getCount()>1){g.remove(g.items.getAt(1))}g.items.getAt(0).unload();this.getView().fireEvent("logout")},onNavSelectionChange:function(t,y){var q=this,w=q.getView(),s=w.down("workspace").getController(),v=webservice.app.requestPrint;if(y){if(!y.get("isOpenWindow")){var u=y.get("options")||{};s.createWorkspace(null,y.get("iconCls")==""?"x-fa fa-home":y.get("iconCls"),true,y.get("className"),y.get("idName"),y.get("text"),u,{requestreport:function(e,f,g){if(v){v(f,function(l){if(g){window.open(l)}else{q.openDialog("Print Preview",true,0,0,{xtype:"panel",title:e},function(n,m){m.down("panel").update("<iframe style='width: 100%; height: 100%' src='"+l+"'></iframe>")})}})}},onTabPasien:function(C,n,g,B,e,m,f,o,l){var p=this;s.createWorkspace(C,n,g,B,e,m)}},function(e){if(e.loadStore){e.loadStore(null)}else{if(e.load){e.load(null)}}})}else{var x=Ext.create("com.Window",{constrain:w});x.setWindowConfig(y.get("options"));x.show()}t.setSelection(null);q.onMenuBarHeaderClick()}},openDialog:function(y,q,u,w,t,v){var x=(u==0&&w==0)?true:false,s=Ext.create("Ext.Window",{modal:q,closable:true,maximizable:true,maximized:x,resizable:false,constrain:this.getView(),header:{height:20,cls:"bgheaderTop"},layout:"fit",minWidth:900,minHeight:400,border:false,width:u,height:w,items:[t]});s.on("show",function(){if(Ext.isFunction(v)){v("onshow",s)}});s.show()}},0,0,0,0,["controller.main-module"],0,[SIMpel.view.modules,"MainController"],0));(Ext.cmd.derive("SIMpel.view.modules.Pencarian",Ext.container.Container,{controller:"panel-pencarian",viewModel:{data:{enabledCombo:false}},layout:{type:"hbox",align:"stretch"},wsCtrl:undefined,items:[{xtype:"combobox",name:"JENISPENCARIAN",border:true,allowBlank:false,enterFocus:true,enforceMaxLength:true,forceSelection:true,validateOnBlur:true,displayField:"NAMA",bind:{hidden:"{!enableCombo}"},valueField:"ID",queryMode:"local",editable:false,store:{model:"data.model.PenggunaAksesPencarian"},listeners:{select:"onSelectJenisPencarian"}},{xtype:"container",flex:1,layout:"card"}],load:function(n){var p=this,q=p.getViewModel(),o=p.down("combobox"),s=p.down("container");s.suspendLayouts();s.removeAll(true);s.resumeLayouts();q.set("enableCombo",n.length>1);o.getStore().removeAll();o.getStore().loadData(n);if(Ext.isArray(n)){Ext.Array.each(n,function(e,g){var f=Ext.create(e.CLASS,{flex:1,listeners:{opentab:"onOpenTab"}});s.add(f);f.load({});e.INDEX=g})}o.select(Ext.create("data.model.PenggunaAksesPencarian",n[0]));window.refreshPanelPencarian=false}},0,["panel-pencarian"],["component","box","container","panel-pencarian"],{component:true,box:true,container:true,"panel-pencarian":true},["widget.panel-pencarian"],0,[SIMpel.view.modules,"Pencarian"],0));(Ext.cmd.derive("SIMpel.view.modules.PencarianController",Ext.app.ViewController,{onOpenTab:function(B,w,E,A,C,v,D,y,u){var z=this,x=z.getView();x.wsCtrl.createWorkspace(B,w,E,A,C,v)},onSelectJenisPencarian:function(p,n){var o=this,q=o.getView(),s=q.down("container");s.getLayout().setActiveItem(n.get("INDEX"))}},0,0,0,0,["controller.panel-pencarian"],0,[SIMpel.view.modules,"PencarianController"],0));(Ext.cmd.derive("SIMpel.view.modules.Header",Ext.container.Container,{cls:"main-header",layout:{type:"vbox",align:"stretch"},controller:"header",viewModel:{data:{headerConfig:{openKasir:false,closeKasir:false,privPencarian:undefined},instansi:undefined},stores:{store:{type:"instansi-store"}}},height:48,items:[{xtype:"component",height:2,cls:"bgheaderTop"},{xtype:"toolbar",padding:0,height:46,defaults:{height:44,width:50,margin:"0 0 0 0"},border:true,cls:"shadow-panel",items:[{xtype:"component",cls:"x-bold-text",id:"simpelicon",style:"padding-top:14px;padding-left:10px;cursor: pointer; font-weight: bold",html:'<div class="simple-logo">SIMRS GOS 2</div>',width:129,listeners:{click:{element:"el",fn:"onSIMpelClick"}}},{iconCls:"x-fa fa-navicon",cls:"x-btn-nav",handler:"onIconMenuClick"},{xtype:"container",cls:"x-bold-text x-br-right",width:400,padding:"7 0 0 0",layout:{type:"hbox",pack:"center"},items:[{xtype:"image",bind:{src:"classic/resources/images/{instansi}.png"},width:30,height:30,alt:"no-image",margin:"0 5 0 0"},{xtype:"component",style:"padding-top: 8px;",cls:"x-bold-text",bind:{data:{items:"{store.data.items}"}},tpl:new Ext.XTemplate('<tpl for="items">',"{data.REFERENSI.PPK.NAMA}","</tpl>")}]},{xtype:"panel-pencarian",reference:"panelpencarian",flex:2},{iconCls:"x-fa fa-folder-open",cls:"x-btn-white",handler:"onOpenKasir",tooltip:"Buka Transaksi Kasir",hidden:true,bind:{hidden:"{!headerConfig.openKasir}"}},{iconCls:"x-fa fa-folder",cls:"x-btn-white",handler:"onCloseKasir",tooltip:"Tutup Transaksi Kasir",hidden:true,bind:{hidden:"{!headerConfig.closeKasir}"}},{iconCls:"x-fa fa-sign-out",cls:"x-btn-white",handler:"onLogout",tooltip:"Logout"}]}],listeners:{afterrender:"onAfterRender"},setHeaderConfig:function(s){var u=this,o=u.getViewModel(),p=u.down("panel-pencarian"),t=u.ownerCt,q=t.down("workspace");p.wsCtrl=q.getController();if(window.refreshPanelPencarian){p.load(s.privPencarian)}_config=o.get("headerConfig");s=Ext.apply(_config,s);o.set("headerConfig",s);o.notify()}},0,["main-header"],["component","box","container","main-header"],{component:true,box:true,container:true,"main-header":true},["widget.main-header"],0,[SIMpel.view.modules,"Header"],0));(Ext.cmd.derive("SIMpel.view.modules.HeaderController",Ext.app.ViewController,{onAfterRender:function(){var o=this,q=o.getViewModel(),s=q.get("store"),p=Ext.getStore("instansi");if(p){q.set("store",p);new Ext.util.DelayedTask(function(){var e=p.getAt(0);if(e){q.set("instansi",e.get("PPK"))}}).delay(4000)}else{s.doAfterLoad=function(l,f,g,e){if(e&&Ext.isArray(f)){if(f.length>0){q.set("instansi",f[0].get("PPK"))}}};s.load()}var n=Ext.create("Ext.tip.ToolTip",{target:"simpelicon",html:"Klik utk Reload aplikasi"})},onIconMenuClick:function(){this.getView().fireEvent("menubarheaderclick")},onOpenKasir:function(f){this.transaksiKasir(f,{JENIS:1})},onCloseKasir:function(l){var g=webservice.app?(webservice.app.trxksr?webservice.app.trxksr:false):false;if(g){this.transaksiKasir(l,{NOMOR:g,JENIS:2})}},onLogout:function(){var f=this;Ext.Ajax.request({url:webservice.location+"authentication/logout",success:function(l){var e=webservice.app.ppk;webservice.app=undefined;webservice.app={};webservice.app.ppk=e;f.getView().fireEvent("logout")}})},onSIMpelClick:function(){window.location.reload(true)},privates:{transaksiKasir:function(n,q){var o=this,p=o.getViewModel(),s=Ext.create("data.model.TransaksiKasir",q);if(q.JENIS==1){p.set("headerConfig.openKasir",q.JENIS!=1)}else{p.set("headerConfig.closeKasir",q.JENIS!=2)}s.animateTarget=n;s.scope=this;s.showError=true;s.save({callback:function(f,e,g){if(g){Ext.toast({html:"Anda telah "+(q.JENIS==1?"Membuka Transaksi Kasir":"Menutup Transaksi Kasir"),headerPosition:"left",style:"padding: 7px 0px 0px 4px",border:false,header:{width:13},ui:"danger-blue",align:"t"});if(q.JENIS==1){webservice.app.trxksr=Number(q.NOMOR);p.set("headerConfig.openKasir",false);p.set("headerConfig.closeKasir",true)}else{p.set("headerConfig.openKasir",true);p.set("headerConfig.closeKasir",false)}}}})}}},0,0,0,0,["controller.header"],0,[SIMpel.view.modules,"HeaderController"],0));(Ext.cmd.derive("SIMpel.view.modules.Nav",Ext.container.Container,{viewModel:{stores:{store:{type:"tree"}}},layout:{type:"vbox",align:"stretch"},width:0,cls:"x-nav-border",items:[{xtype:"aplikasi-pengguna-info-panel",cls:"x-color-w",height:200},{xtype:"treelist",ui:"navigation",flex:1,expanderFirst:false,expanderOnly:false,bind:{store:"{store}"},listeners:{selectionchange:"onNavSelectionChange"}}],load:function(){var p=this,o=[],m=webservice.app.xpriv,n=p.down("aplikasi-pengguna-info-panel");if(n){n.load()}if(m("14",true)){o.push({text:"Laporan",leaf:true,iconCls:"x-fa fa-file-text-o",className:"laporan.Workspace",idName:"laporan"})}if(m("19",true)){o.push({text:"Master",leaf:true,iconCls:"x-fa fa-cogs",className:"master.Workspace",idName:"master"})}if(m("20",true)){o.push({text:"Informasi",leaf:true,iconCls:"x-fa fa-stack-exchange",className:"informasi.Workspace",idName:"informasi"})}if(m("21",true)){o.push({text:"Penjualan",leaf:true,iconCls:"x-fa fa-cart-plus",className:"penjualan.Workspace",idName:"penjualan"})}if(m("22",true)){o.push({text:"Tempat Tidur",leaf:true,iconCls:"x-fa fa-bed",className:"informasi.ruangkamartidur.Workspace",idName:"reservasi"})}if(m("23",true)){o.push({text:"Inventory",leaf:true,iconCls:"x-fa fa-cubes",className:"inventory.Workspace",idName:"inventory"})}p.getViewModel().set("store",Ext.create("Ext.data.TreeStore",{root:{expanded:true,children:o}}))}},0,["sidenav"],["component","box","container","sidenav"],{component:true,box:true,container:true,sidenav:true},["widget.sidenav"],0,[SIMpel.view.modules,"Nav"],0));(Ext.cmd.derive("SIMpel.view.modules.Footer",Ext.toolbar.Toolbar,{controller:"main-footer",viewModel:{data:{version:""}},height:35,createdYear:2015,initComponent:function(){var l=this,g=Ext.util.Format.date(new Date(),"Y");l.items=[{xtype:"component",style:"cursor: pointer",id:"teamsimpel",bind:{html:"<div><strong>Copyright</strong> <span class='fa fa-copyright'></span>&nbsp;"+l.createdYear+(l.createdYear==g?"":" - "+g)+" @ <span class='simpel-simpel' style='color: rgb(18,96,96); font-size: 17px'></span> {appName} Ver. {version}</div>"},listeners:{click:{element:"el",fn:"onTeamsClick"}}},"-","->",{xtype:"component",flex:1,reference:"notifikasiresep",bind:{html:"<span style='color:{warna}'><b>Jumlah Resep Yang Belum Terlayani <strong>( {resep} )</strong></b></span>"}},"->","-",{xtype:"label",text:Ext.util.Format.date(new Date(),"d/m/Y H:i:s"),reference:"infoTanggal"}];Ext.toolbar.Toolbar.prototype.initComponent.apply(this,arguments)},listeners:{afterrender:"onAfterRender"},autoRefresh:function(){var o=this,m=SIMpel.app.getApplication(),n=o.getViewModel().get("store"),p=o.down("[reference=notifikasiresep]");if(o.task==undefined){o.task={interval:20000,run:function(){if(n&&m.login){n.removeAll();n.queryParams={STATUS:1,limit:1};n.load({callback:function(g,e,f){if(f){var l=e._resultSet.total}else{var l=0}if(o.getViewModel().get("resep")<l){o.onWindow(l," Resep Masuk","left","t")}else{o.onWindow(l," Resep Yang Belum Terlayani","left","b")}if(l>0){o.getViewModel().set("resep",l);o.getViewModel().set("warna","blue")}else{o.getViewModel().set("resep",0);o.getViewModel().set("warna","red")}}})}else{Ext.TaskManager.stop(o.task)}}}}Ext.TaskManager.start(o.task)},onWindow:function(n,o,p,m){if(n==0){return}Ext.toast({html:"Ada "+n+" "+o,headerPosition:p,style:"padding: 10px 10px 10px 10px",border:false,header:{width:13},ui:"danger-blue",align:m})}},0,["main-footer"],["component","box","container","toolbar","main-footer"],{component:true,box:true,container:true,toolbar:true,"main-footer":true},["widget.main-footer"],0,[SIMpel.view.modules,"Footer"],0));(Ext.cmd.derive("SIMpel.view.modules.FooterController",Ext.app.ViewController,{onAfterRender:function(){var m=this,n=m.getViewModel();n.set("version",window.version);n.set("appName",window.appTypeDescriptions[window.appType]);var l=Ext.create("Ext.tip.ToolTip",{target:"teamsimpel",html:'Klik utk melihat Team <span class="simpel-simpel"></span>&nbsp;SIMpel'});if(m.task==undefined){m.task={interval:1000,run:function(){var e=webservice.app?webservice.app:false;if(e){e.sysdate=Ext.isDate(e.sysdate)?Ext.Date.add(e.sysdate,Ext.Date.SECOND,1):Ext.Date.parse(e.sysdate,"Y-m-d H:i:s");m.getReferences().infoTanggal.setText(Ext.util.Format.date(e.sysdate,"d/m/Y H:i:s"))}}}}Ext.TaskManager.start(m.task)},onTeamsClick:function(){var f=Ext.create("aplikasi.teams.Form",{ui:"panel-cyan",title:"Team SIMpelDevelopment",showCloseButton:true});f.openDialog("",true,0,0,f)}},0,0,0,0,["controller.main-footer"],0,[SIMpel.view.modules,"FooterController"],0));(Ext.cmd.derive("SIMpel.view.modules.Workspace",Ext.tab.Panel,{controller:"workspace",cls:"workspace",items:[{iconCls:"x-fa fa-home",routeId:"1",xtype:"home-dashboard"}],plugins:{ptype:"tabclosemenu",closeAllTabsText:"Tutup semua tab",closeOthersTabsText:"Tutup semua tab kecuali tab ini",closeTabText:"Tutup tab ini"},load:function(){this.down("home-dashboard").load()},unload:function(){this.down("home-dashboard").unload()}},0,["workspace"],["component","box","container","panel","tabpanel","workspace"],{component:true,box:true,container:true,panel:true,tabpanel:true,workspace:true},["widget.workspace"],0,[SIMpel.view.modules,"Workspace"],0));(Ext.cmd.derive("SIMpel.view.modules.WorkspaceController",Ext.app.ViewController,{location:undefined,init:function(){this.location=window.location},createWorkspace:function(B,u,v,E,C,y,D,z,w){var A=this,x={itemId:C,viewModel:{data:{record:B}},title:y,closable:v,iconCls:u,listeners:z};_option=Ext.apply(x,D);A.createTab(B,E,x,w)},createTab:function(x,y,u,w){var q=this,v=q.getView(),s,t=v.getComponent(u.itemId);if(t!=null){v.setActiveTab(t);return}s=Ext.create(y,u);Ext.suspendLayouts();v.add(s);v.setActiveTab(s);if(Ext.isFunction(w)){w(s)}Ext.resumeLayouts()},toFormatNorm:function(m){var n=Ext.String.leftPad(m,8,"0"),l=Ext.String.insert(Ext.String.insert(Ext.String.insert(n,".",2),".",5),".",8);return l},showResult:function(l,g){this.showToast(Ext.String.format("You clicked the {0} button",l))}},0,0,0,0,["controller.workspace"],0,[SIMpel.view.modules,"WorkspaceController"],0));(Ext.cmd.derive("SIMpel.view.modules.home.Dashboard",Ext.container.Container,{controller:"home-dashboard",layout:"responsivecolumn",scrollable:"y",items:[],createWidgets:function(){var l=this,g=webservice.app.xpriv;l.suspendLayouts();if(g("110101",false)||g("11080101",false)){l.add({xtype:"pendaftaran-widget-pengunjung",border:true,responsiveCls:"big-33 small-100",height:350})}if(g("110104",false)||g("11080104",false)){l.add({xtype:"laboratorium-widget-orders",border:true,responsiveCls:"big-33 small-100",height:350})}if(g("110105",false)||g("11080105",false)){l.add({xtype:"radiologi-widget-orders",border:true,responsiveCls:"big-33 small-100",height:350})}if(g("110106",false)||g("11080106",false)){l.add({xtype:"resep-widget-orders",border:true,responsiveCls:"big-33 small-100",height:350})}if(g("110102",false)||g("11080102",false)){l.add({xtype:"pendaftaran-widget-konsul",border:true,responsiveCls:"big-33 small-100",height:350})}if(g("110103",false)||g("11080103",false)){l.add({xtype:"pendaftaran-widget-mutasi",border:true,responsiveCls:"big-33 small-100",height:350})}if(g("2102",false)){l.add({xtype:"pembayaran-penjualan-Workspace",border:true,responsiveCls:"big-33 small-100",height:350})}if(g("25010306",false)){l.add({xtype:"plugins-bpjs-sep-pengajuan-grid",viewConfig:{loadMask:false},border:true,responsiveCls:"big-33 small-100",height:350})}l.resumeLayouts()},load:function(){this.getController().load()},unload:function(){this.getController().unload()},listeners:{activate:"onActivate",deactivate:"onDeactivate"}},0,["home-dashboard"],["component","box","container","home-dashboard"],{component:true,box:true,container:true,"home-dashboard":true},["widget.home-dashboard"],0,[SIMpel.view.modules.home,"Dashboard"],0));(Ext.cmd.derive("SIMpel.view.modules.home.DashboardController",Ext.app.ViewController,{task:undefined,firstLoadStore:true,load:function(){var o=this,p=o.getView(),n=SIMpel.app.getApplication(),m=webservice.app;p.createWidgets();if(o.task==undefined){o.task={run:function(){if(n.login&&!m.pauseAutoRefresh){o.task.interval=15000;if(o.firstLoadStore){p.items.each(function(f,e,l){try{f.loadStore({STATUS:1})}catch(g){}});o.firstLoadStore=false}else{p.items.each(function(f){try{f.refresh()}catch(e){}})}}},interval:500}}Ext.TaskManager.start(o.task)},unload:function(){Ext.TaskManager.stop(this.task);this.getView().removeAll();this.firstLoadStore=true},onTerima:function(n){var o=this,s=o.getView(),p=s.ownerCt.getController(),q=n.get("REFERENSI").PENDAFTARAN?n.get("REFERENSI").PENDAFTARAN:n.get("REFERENSI").KUNJUNGAN.REFERENSI.PENDAFTARAN;data.model.Pasien.load(q.REFERENSI.PASIEN.NORM,{success:function(f,e){var g="x-fa fa-"+(f.get("JENIS_KELAMIN")==1?"male":"female");p.createWorkspace(f,g,true,"pasien.Workspace","psn-"+f.getId(),p.toFormatNorm(f.getId()))},failure:function(f,e){}})},onActivate:function(){this.task.interval=500;Ext.TaskManager.start(this.task)},onDeactivate:function(){Ext.TaskManager.stop(this.task)},destroy:function(){var f=this;Ext.TaskManager.stop(f.task);Ext.app.ViewController.prototype.destroy.call(this)}},0,0,0,0,["controller.home-dashboard"],0,[SIMpel.view.modules.home,"DashboardController"],0));(Ext.cmd.derive("SIMpel.view.main.Main",Ext.container.Container,{controller:"main",viewModel:"main",layout:"card",activeItem:0,items:[{xtype:"welcome",routeId:"welcome"},{xtype:"main-modules",routeId:"main",listeners:{logout:"onLogout"}}]},0,["app-main"],["component","box","container","app-main"],{component:true,box:true,container:true,"app-main":true},["widget.app-main"],0,[SIMpel.view.main,"Main"],0));Ext.application({name:"SIMpel",extend:SIMpel.Application,mainView:"SIMpel.view.main.Main"});